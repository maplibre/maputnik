(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function eu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function WD(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var eO={exports:{}},s2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KK;function zae(){if(KK)return s2;KK=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return s2.Fragment=e,s2.jsx=t,s2.jsxs=t,s2}var FK;function jae(){return FK||(FK=1,eO.exports=zae()),eO.exports}var te=jae(),tO={exports:{}},Yr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zK;function Nae(){if(zK)return Yr;zK=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function S(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=x&&Oe[x]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,F={};function j(Oe,ze,we){this.props=Oe,this.context=ze,this.refs=F,this.updater=we||B}j.prototype.isReactComponent={},j.prototype.setState=function(Oe,ze){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,ze,"setState")},j.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function W(){}W.prototype=j.prototype;function H(Oe,ze,we){this.props=Oe,this.context=ze,this.refs=F,this.updater=we||B}var $=H.prototype=new W;$.constructor=H,R($,j.prototype),$.isPureReactComponent=!0;var N=Array.isArray;function Y(){}var z={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function ae(Oe,ze,we){var At=we.ref;return{$$typeof:n,type:Oe,key:ze,ref:At!==void 0?At:null,props:we}}function ve(Oe,ze){return ae(Oe.type,ze,Oe.props)}function pe(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===n}function be(Oe){var ze={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(we){return ze[we]})}var Ee=/\/+/g;function Te(Oe,ze){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?be(""+Oe.key):ze.toString(36)}function je(Oe){switch(Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason;default:switch(typeof Oe.status=="string"?Oe.then(Y,Y):(Oe.status="pending",Oe.then(function(ze){Oe.status==="pending"&&(Oe.status="fulfilled",Oe.value=ze)},function(ze){Oe.status==="pending"&&(Oe.status="rejected",Oe.reason=ze)})),Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason}}throw Oe}function Re(Oe,ze,we,At,it){var Ct=typeof Oe;(Ct==="undefined"||Ct==="boolean")&&(Oe=null);var It=!1;if(Oe===null)It=!0;else switch(Ct){case"bigint":case"string":case"number":It=!0;break;case"object":switch(Oe.$$typeof){case n:case e:It=!0;break;case m:return It=Oe._init,Re(It(Oe._payload),ze,we,At,it)}}if(It)return it=it(Oe),It=At===""?"."+Te(Oe,0):At,N(it)?(we="",It!=null&&(we=It.replace(Ee,"$&/")+"/"),Re(it,ze,we,"",function(Se){return Se})):it!=null&&(pe(it)&&(it=ve(it,we+(it.key==null||Oe&&Oe.key===it.key?"":(""+it.key).replace(Ee,"$&/")+"/")+It)),ze.push(it)),1;It=0;var Ke=At===""?".":At+":";if(N(Oe))for(var Ie=0;Ie<Oe.length;Ie++)At=Oe[Ie],Ct=Ke+Te(At,Ie),It+=Re(At,ze,we,Ct,it);else if(Ie=S(Oe),typeof Ie=="function")for(Oe=Ie.call(Oe),Ie=0;!(At=Oe.next()).done;)At=At.value,Ct=Ke+Te(At,Ie++),It+=Re(At,ze,we,Ct,it);else if(Ct==="object"){if(typeof Oe.then=="function")return Re(je(Oe),ze,we,At,it);throw ze=String(Oe),Error("Objects are not valid as a React child (found: "+(ze==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":ze)+"). If you meant to render a collection of children, use an array instead.")}return It}function qe(Oe,ze,we){if(Oe==null)return Oe;var At=[],it=0;return Re(Oe,At,"","",function(Ct){return ze.call(we,Ct,it++)}),At}function nt(Oe){if(Oe._status===-1){var ze=Oe._result;ze=ze(),ze.then(function(we){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=we)},function(we){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=we)}),Oe._status===-1&&(Oe._status=0,Oe._result=ze)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var ht=typeof reportError=="function"?reportError:function(Oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ze=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Oe=="object"&&Oe!==null&&typeof Oe.message=="string"?String(Oe.message):String(Oe),error:Oe});if(!window.dispatchEvent(ze))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Oe);return}console.error(Oe)},ke={map:qe,forEach:function(Oe,ze,we){qe(Oe,function(){ze.apply(this,arguments)},we)},count:function(Oe){var ze=0;return qe(Oe,function(){ze++}),ze},toArray:function(Oe){return qe(Oe,function(ze){return ze})||[]},only:function(Oe){if(!pe(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}};return Yr.Activity=v,Yr.Children=ke,Yr.Component=j,Yr.Fragment=t,Yr.Profiler=r,Yr.PureComponent=H,Yr.StrictMode=i,Yr.Suspense=c,Yr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Yr.__COMPILER_RUNTIME={__proto__:null,c:function(Oe){return z.H.useMemoCache(Oe)}},Yr.cache=function(Oe){return function(){return Oe.apply(null,arguments)}},Yr.cacheSignal=function(){return null},Yr.cloneElement=function(Oe,ze,we){if(Oe==null)throw Error("The argument must be a React element, but you passed "+Oe+".");var At=R({},Oe.props),it=Oe.key;if(ze!=null)for(Ct in ze.key!==void 0&&(it=""+ze.key),ze)!ne.call(ze,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&ze.ref===void 0||(At[Ct]=ze[Ct]);var Ct=arguments.length-2;if(Ct===1)At.children=we;else if(1<Ct){for(var It=Array(Ct),Ke=0;Ke<Ct;Ke++)It[Ke]=arguments[Ke+2];At.children=It}return ae(Oe.type,it,At)},Yr.createContext=function(Oe){return Oe={$$typeof:s,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null},Oe.Provider=Oe,Oe.Consumer={$$typeof:o,_context:Oe},Oe},Yr.createElement=function(Oe,ze,we){var At,it={},Ct=null;if(ze!=null)for(At in ze.key!==void 0&&(Ct=""+ze.key),ze)ne.call(ze,At)&&At!=="key"&&At!=="__self"&&At!=="__source"&&(it[At]=ze[At]);var It=arguments.length-2;if(It===1)it.children=we;else if(1<It){for(var Ke=Array(It),Ie=0;Ie<It;Ie++)Ke[Ie]=arguments[Ie+2];it.children=Ke}if(Oe&&Oe.defaultProps)for(At in It=Oe.defaultProps,It)it[At]===void 0&&(it[At]=It[At]);return ae(Oe,Ct,it)},Yr.createRef=function(){return{current:null}},Yr.forwardRef=function(Oe){return{$$typeof:a,render:Oe}},Yr.isValidElement=pe,Yr.lazy=function(Oe){return{$$typeof:m,_payload:{_status:-1,_result:Oe},_init:nt}},Yr.memo=function(Oe,ze){return{$$typeof:h,type:Oe,compare:ze===void 0?null:ze}},Yr.startTransition=function(Oe){var ze=z.T,we={};z.T=we;try{var At=Oe(),it=z.S;it!==null&&it(we,At),typeof At=="object"&&At!==null&&typeof At.then=="function"&&At.then(Y,ht)}catch(Ct){ht(Ct)}finally{ze!==null&&we.types!==null&&(ze.types=we.types),z.T=ze}},Yr.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Yr.use=function(Oe){return z.H.use(Oe)},Yr.useActionState=function(Oe,ze,we){return z.H.useActionState(Oe,ze,we)},Yr.useCallback=function(Oe,ze){return z.H.useCallback(Oe,ze)},Yr.useContext=function(Oe){return z.H.useContext(Oe)},Yr.useDebugValue=function(){},Yr.useDeferredValue=function(Oe,ze){return z.H.useDeferredValue(Oe,ze)},Yr.useEffect=function(Oe,ze){return z.H.useEffect(Oe,ze)},Yr.useEffectEvent=function(Oe){return z.H.useEffectEvent(Oe)},Yr.useId=function(){return z.H.useId()},Yr.useImperativeHandle=function(Oe,ze,we){return z.H.useImperativeHandle(Oe,ze,we)},Yr.useInsertionEffect=function(Oe,ze){return z.H.useInsertionEffect(Oe,ze)},Yr.useLayoutEffect=function(Oe,ze){return z.H.useLayoutEffect(Oe,ze)},Yr.useMemo=function(Oe,ze){return z.H.useMemo(Oe,ze)},Yr.useOptimistic=function(Oe,ze){return z.H.useOptimistic(Oe,ze)},Yr.useReducer=function(Oe,ze,we){return z.H.useReducer(Oe,ze,we)},Yr.useRef=function(Oe){return z.H.useRef(Oe)},Yr.useState=function(Oe){return z.H.useState(Oe)},Yr.useSyncExternalStore=function(Oe,ze,we){return z.H.useSyncExternalStore(Oe,ze,we)},Yr.useTransition=function(){return z.H.useTransition()},Yr.version="19.2.0",Yr}var jK;function Ba(){return jK||(jK=1,tO.exports=Nae()),tO.exports}var wt=Ba();const On=eu(wt);var nZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ox=On.createContext&&On.createContext(nZ),Gae=["attr","size","title"];function Wae(n,e){if(n==null)return{};var t=Qae(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Qae(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Rw(){return Rw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rw.apply(this,arguments)}function NK(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Dw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(t),!0).forEach(function(i){qae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NK(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qae(n,e,t){return e=Yae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yae(n){var e=$ae(n,"string");return typeof e=="symbol"?e:e+""}function $ae(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function iZ(n){return n&&n.map((e,t)=>On.createElement(e.tag,Dw({key:t},e.attr),iZ(e.child)))}function Bo(n){return e=>On.createElement(Vae,Rw({attr:Dw({},n.attr)},e),iZ(n.child))}function Vae(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Wae(n,Gae),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),On.createElement("svg",Rw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:Dw(Dw({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&On.createElement("title",null,o),n.children)};return ox!==void 0?On.createElement(ox.Consumer,null,t=>e(t)):e(nZ)}var nO={exports:{}},a2={},iO={exports:{}},rO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GK;function Hae(){return GK||(GK=1,(function(n){function e(Re,qe){var nt=Re.length;Re.push(qe);e:for(;0<nt;){var ht=nt-1>>>1,ke=Re[ht];if(0<r(ke,qe))Re[ht]=qe,Re[nt]=ke,nt=ht;else break e}}function t(Re){return Re.length===0?null:Re[0]}function i(Re){if(Re.length===0)return null;var qe=Re[0],nt=Re.pop();if(nt!==qe){Re[0]=nt;e:for(var ht=0,ke=Re.length,Oe=ke>>>1;ht<Oe;){var ze=2*(ht+1)-1,we=Re[ze],At=ze+1,it=Re[At];if(0>r(we,nt))At<ke&&0>r(it,we)?(Re[ht]=it,Re[At]=nt,ht=At):(Re[ht]=we,Re[ze]=nt,ht=ze);else if(At<ke&&0>r(it,nt))Re[ht]=it,Re[At]=nt,ht=At;else break e}}return qe}function r(Re,qe){var nt=Re.sortIndex-qe.sortIndex;return nt!==0?nt:Re.id-qe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],h=[],m=1,v=null,x=3,S=!1,B=!1,R=!1,F=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function $(Re){for(var qe=t(h);qe!==null;){if(qe.callback===null)i(h);else if(qe.startTime<=Re)i(h),qe.sortIndex=qe.expirationTime,e(c,qe);else break;qe=t(h)}}function N(Re){if(R=!1,$(Re),!B)if(t(c)!==null)B=!0,Y||(Y=!0,be());else{var qe=t(h);qe!==null&&je(N,qe.startTime-Re)}}var Y=!1,z=-1,ne=5,ae=-1;function ve(){return F?!0:!(n.unstable_now()-ae<ne)}function pe(){if(F=!1,Y){var Re=n.unstable_now();ae=Re;var qe=!0;try{e:{B=!1,R&&(R=!1,W(z),z=-1),S=!0;var nt=x;try{t:{for($(Re),v=t(c);v!==null&&!(v.expirationTime>Re&&ve());){var ht=v.callback;if(typeof ht=="function"){v.callback=null,x=v.priorityLevel;var ke=ht(v.expirationTime<=Re);if(Re=n.unstable_now(),typeof ke=="function"){v.callback=ke,$(Re),qe=!0;break t}v===t(c)&&i(c),$(Re)}else i(c);v=t(c)}if(v!==null)qe=!0;else{var Oe=t(h);Oe!==null&&je(N,Oe.startTime-Re),qe=!1}}break e}finally{v=null,x=nt,S=!1}qe=void 0}}finally{qe?be():Y=!1}}}var be;if(typeof H=="function")be=function(){H(pe)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Te=Ee.port2;Ee.port1.onmessage=pe,be=function(){Te.postMessage(null)}}else be=function(){j(pe,0)};function je(Re,qe){z=j(function(){Re(n.unstable_now())},qe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Re){Re.callback=null},n.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Re?Math.floor(1e3/Re):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(Re){switch(x){case 1:case 2:case 3:var qe=3;break;default:qe=x}var nt=x;x=qe;try{return Re()}finally{x=nt}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Re,qe){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var nt=x;x=Re;try{return qe()}finally{x=nt}},n.unstable_scheduleCallback=function(Re,qe,nt){var ht=n.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ht+nt:ht):nt=ht,Re){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=nt+ke,Re={id:m++,callback:qe,priorityLevel:Re,startTime:nt,expirationTime:ke,sortIndex:-1},nt>ht?(Re.sortIndex=nt,e(h,Re),t(c)===null&&Re===t(h)&&(R?(W(z),z=-1):R=!0,je(N,nt-ht))):(Re.sortIndex=ke,e(c,Re),B||S||(B=!0,Y||(Y=!0,be()))),Re},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(Re){var qe=x;return function(){var nt=x;x=qe;try{return Re.apply(this,arguments)}finally{x=nt}}}})(rO)),rO}var WK;function Zae(){return WK||(WK=1,iO.exports=Hae()),iO.exports}var oO={exports:{}},zA={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QK;function Xae(){if(QK)return zA;QK=1;var n=Ba();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,h,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:c,containerInfo:h,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return zA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zA.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,m)},zA.flushSync=function(c){var h=s.T,m=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=h,i.p=m,i.d.f()}},zA.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},zA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},zA.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,S=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:S}):m==="script"&&i.d.X(c,{crossOrigin:v,integrity:x,fetchPriority:S,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},zA.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=a(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},zA.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin);i.d.L(c,m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},zA.preloadModule=function(c,h){if(typeof c=="string")if(h){var m=a(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},zA.requestFormReset=function(c){i.d.r(c)},zA.unstable_batchedUpdates=function(c,h){return c(h)},zA.useFormState=function(c,h,m){return s.H.useFormState(c,h,m)},zA.useFormStatus=function(){return s.H.useHostTransitionStatus()},zA.version="19.2.0",zA}var qK;function QD(){if(qK)return oO.exports;qK=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),oO.exports=Xae(),oO.exports}var YK;function Jae(){if(YK)return a2;YK=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Zae(),e=Ba(),t=QD();function i(A){var g="https://react.dev/errors/"+A;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function o(A){var g=A,_=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,(g.flags&4098)!==0&&(_=g.return),A=g.return;while(A)}return g.tag===3?_:null}function s(A){if(A.tag===13){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function a(A){if(A.tag===31){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function c(A){if(o(A)!==A)throw Error(i(188))}function h(A){var g=A.alternate;if(!g){if(g=o(A),g===null)throw Error(i(188));return g!==A?null:A}for(var _=A,I=g;;){var Q=_.return;if(Q===null)break;var X=Q.alternate;if(X===null){if(I=Q.return,I!==null){_=I;continue}break}if(Q.child===X.child){for(X=Q.child;X;){if(X===_)return c(Q),A;if(X===I)return c(Q),g;X=X.sibling}throw Error(i(188))}if(_.return!==I.return)_=Q,I=X;else{for(var _e=!1,Ve=Q.child;Ve;){if(Ve===_){_e=!0,_=Q,I=X;break}if(Ve===I){_e=!0,I=Q,_=X;break}Ve=Ve.sibling}if(!_e){for(Ve=X.child;Ve;){if(Ve===_){_e=!0,_=X,I=Q;break}if(Ve===I){_e=!0,I=X,_=Q;break}Ve=Ve.sibling}if(!_e)throw Error(i(189))}}if(_.alternate!==I)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?A:g}function m(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(g=m(A),g!==null)return g;A=A.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),H=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function be(A){return A===null||typeof A!="object"?null:(A=pe&&A[pe]||A["@@iterator"],typeof A=="function"?A:null)}var Ee=Symbol.for("react.client.reference");function Te(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Ee?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case R:return"Fragment";case j:return"Profiler";case F:return"StrictMode";case N:return"Suspense";case Y:return"SuspenseList";case ae:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case B:return"Portal";case H:return A.displayName||"Context";case W:return(A._context.displayName||"Context")+".Consumer";case $:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case z:return g=A.displayName||null,g!==null?g:Te(A.type)||"Memo";case ne:g=A._payload,A=A._init;try{return Te(A(g))}catch{}}return null}var je=Array.isArray,Re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},ht=[],ke=-1;function Oe(A){return{current:A}}function ze(A){0>ke||(A.current=ht[ke],ht[ke]=null,ke--)}function we(A,g){ke++,ht[ke]=A.current,A.current=g}var At=Oe(null),it=Oe(null),Ct=Oe(null),It=Oe(null);function Ke(A,g){switch(we(Ct,g),we(it,A),we(At,null),g.nodeType){case 9:case 11:A=(A=g.documentElement)&&(A=A.namespaceURI)?bg(A):0;break;default:if(A=g.tagName,g=g.namespaceURI)g=bg(g),A=Za(g,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}ze(At),we(At,A)}function Ie(){ze(At),ze(it),ze(Ct)}function Se(A){A.memoizedState!==null&&we(It,A);var g=At.current,_=Za(g,A.type);g!==_&&(we(it,A),we(At,_))}function Ge(A){it.current===A&&(ze(At),ze(it)),It.current===A&&(ze(It),Xt._currentValue=nt)}var st,ut;function ft(A){if(st===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);st=g&&g[1]||"",ut=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+A+ut}var St=!1;function kt(A,g){if(!A||St)return"";St=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(g){var gn=function(){throw Error()};if(Object.defineProperty(gn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gn,[])}catch(on){var Jt=on}Reflect.construct(A,[],gn)}else{try{gn.call()}catch(on){Jt=on}A.call(gn.prototype)}}else{try{throw Error()}catch(on){Jt=on}(gn=A())&&typeof gn.catch=="function"&&gn.catch(function(){})}}catch(on){if(on&&Jt&&typeof on.stack=="string")return[on.stack,Jt.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Q=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");Q&&Q.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=I.DetermineComponentFrameRoot(),_e=X[0],Ve=X[1];if(_e&&Ve){var Mt=_e.split(`
`),$t=Ve.split(`
`);for(Q=I=0;I<Mt.length&&!Mt[I].includes("DetermineComponentFrameRoot");)I++;for(;Q<$t.length&&!$t[Q].includes("DetermineComponentFrameRoot");)Q++;if(I===Mt.length||Q===$t.length)for(I=Mt.length-1,Q=$t.length-1;1<=I&&0<=Q&&Mt[I]!==$t[Q];)Q--;for(;1<=I&&0<=Q;I--,Q--)if(Mt[I]!==$t[Q]){if(I!==1||Q!==1)do if(I--,Q--,0>Q||Mt[I]!==$t[Q]){var un=`
`+Mt[I].replace(" at new "," at ");return A.displayName&&un.includes("<anonymous>")&&(un=un.replace("<anonymous>",A.displayName)),un}while(1<=I&&0<=Q);break}}}finally{St=!1,Error.prepareStackTrace=_}return(_=A?A.displayName||A.name:"")?ft(_):""}function en(A,g){switch(A.tag){case 26:case 27:case 5:return ft(A.type);case 16:return ft("Lazy");case 13:return A.child!==g&&g!==null?ft("Suspense Fallback"):ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return kt(A.type,!1);case 11:return kt(A.type.render,!1);case 1:return kt(A.type,!0);case 31:return ft("Activity");default:return""}}function Pn(A){try{var g="",_=null;do g+=en(A,_),_=A,A=A.return;while(A);return g}catch(I){return`
Error generating stack: `+I.message+`
`+I.stack}}var zn=Object.prototype.hasOwnProperty,si=n.unstable_scheduleCallback,xn=n.unstable_cancelCallback,Rn=n.unstable_shouldYield,pn=n.unstable_requestPaint,Hn=n.unstable_now,Un=n.unstable_getCurrentPriorityLevel,Tt=n.unstable_ImmediatePriority,Me=n.unstable_UserBlockingPriority,oe=n.unstable_NormalPriority,le=n.unstable_LowPriority,he=n.unstable_IdlePriority,se=n.log,Ae=n.unstable_setDisableYieldValue,xe=null,Ye=null;function Xe(A){if(typeof se=="function"&&Ae(A),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(xe,A)}catch{}}var fe=Math.clz32?Math.clz32:rt,De=Math.log,y=Math.LN2;function rt(A){return A>>>=0,A===0?32:31-(De(A)/y|0)|0}var Bt=256,pt=262144,Ht=4194304;function gt(A){var g=A&42;if(g!==0)return g;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function jn(A,g,_){var I=A.pendingLanes;if(I===0)return 0;var Q=0,X=A.suspendedLanes,_e=A.pingedLanes;A=A.warmLanes;var Ve=I&134217727;return Ve!==0?(I=Ve&~X,I!==0?Q=gt(I):(_e&=Ve,_e!==0?Q=gt(_e):_||(_=Ve&~A,_!==0&&(Q=gt(_))))):(Ve=I&~X,Ve!==0?Q=gt(Ve):_e!==0?Q=gt(_e):_||(_=I&~A,_!==0&&(Q=gt(_)))),Q===0?0:g!==0&&g!==Q&&(g&X)===0&&(X=Q&-Q,_=g&-g,X>=_||X===32&&(_&4194048)!==0)?g:Q}function ni(A,g){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&g)===0}function In(A,g){switch(A){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var A=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),A}function Zn(A){for(var g=[],_=0;31>_;_++)g.push(A);return g}function Xi(A,g){A.pendingLanes|=g,g!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Di(A,g,_,I,Q,X){var _e=A.pendingLanes;A.pendingLanes=_,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=_,A.entangledLanes&=_,A.errorRecoveryDisabledLanes&=_,A.shellSuspendCounter=0;var Ve=A.entanglements,Mt=A.expirationTimes,$t=A.hiddenUpdates;for(_=_e&~_;0<_;){var un=31-fe(_),gn=1<<un;Ve[un]=0,Mt[un]=-1;var Jt=$t[un];if(Jt!==null)for($t[un]=null,un=0;un<Jt.length;un++){var on=Jt[un];on!==null&&(on.lane&=-536870913)}_&=~gn}I!==0&&ur(A,I,0),X!==0&&Q===0&&A.tag!==0&&(A.suspendedLanes|=X&~(_e&~g))}function ur(A,g,_){A.pendingLanes|=g,A.suspendedLanes&=~g;var I=31-fe(g);A.entangledLanes|=g,A.entanglements[I]=A.entanglements[I]|1073741824|_&261930}function fi(A,g){var _=A.entangledLanes|=g;for(A=A.entanglements;_;){var I=31-fe(_),Q=1<<I;Q&g|A[I]&g&&(A[I]|=g),_&=~Q}}function Si(A,g){var _=g&-g;return _=(_&42)!==0?1:er(_),(_&(A.suspendedLanes|g))!==0?0:_}function er(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function nn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Ti(){var A=qe.p;return A!==0?A:(A=window.event,A===void 0?32:El(A.type))}function Io(A,g){var _=qe.p;try{return qe.p=A,g()}finally{qe.p=_}}var rs=Math.random().toString(36).slice(2),kr="__reactFiber$"+rs,hn="__reactProps$"+rs,Li="__reactContainer$"+rs,ii="__reactEvents$"+rs,Ia="__reactListeners$"+rs,tu="__reactHandles$"+rs,Xs="__reactResources$"+rs,Ei="__reactMarker$"+rs;function gl(A){delete A[kr],delete A[hn],delete A[ii],delete A[Ia],delete A[tu]}function Vr(A){var g=A[kr];if(g)return g;for(var _=A.parentNode;_;){if(g=_[Li]||_[kr]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(A=dy(A);A!==null;){if(_=A[kr])return _;A=dy(A)}return g}A=_,_=A.parentNode}return null}function ka(A){if(A=A[kr]||A[Li]){var g=A.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return A}return null}function nu(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A.stateNode;throw Error(i(33))}function fa(A){var g=A[Xs];return g||(g=A[Xs]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ho(A){A[Ei]=!0}var Rl=new Set,Zo={};function Qi(A,g){Dl(A,g),Dl(A+"Capture",g)}function Dl(A,g){for(Zo[A]=g,A=0;A<g.length;A++)Rl.add(g[A])}var os=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},iu={};function Ou(A){return zn.call(iu,A)?!0:zn.call(Pl,A)?!1:os.test(A)?iu[A]=!0:(Pl[A]=!0,!1)}function Jc(A,g,_){if(Ou(g))if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":A.removeAttribute(g);return;case"boolean":var I=g.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){A.removeAttribute(g);return}}A.setAttribute(g,""+_)}}function nc(A,g,_){if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttribute(g,""+_)}}function yl(A,g,_,I){if(I===null)A.removeAttribute(_);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(_);return}A.setAttributeNS(g,_,""+I)}}function ko(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function ic(A){var g=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ru(A,g,_){var I=Object.getOwnPropertyDescriptor(A.constructor.prototype,g);if(!A.hasOwnProperty(g)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var Q=I.get,X=I.set;return Object.defineProperty(A,g,{configurable:!0,get:function(){return Q.call(this)},set:function(_e){_=""+_e,X.call(this,_e)}}),Object.defineProperty(A,g,{enumerable:I.enumerable}),{getValue:function(){return _},setValue:function(_e){_=""+_e},stopTracking:function(){A._valueTracker=null,delete A[g]}}}}function Oc(A){if(!A._valueTracker){var g=ic(A)?"checked":"value";A._valueTracker=ru(A,g,""+A[g])}}function rc(A){if(!A)return!1;var g=A._valueTracker;if(!g)return!0;var _=g.getValue(),I="";return A&&(I=ic(A)?A.checked?"true":"false":A.value),A=I,A!==_?(g.setValue(A),!0):!1}function Bc(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Dh=/[\n"\\]/g;function pa(A){return A.replace(Dh,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function oc(A,g,_,I,Q,X,_e,Ve){A.name="",_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?A.type=_e:A.removeAttribute("type"),g!=null?_e==="number"?(g===0&&A.value===""||A.value!=g)&&(A.value=""+ko(g)):A.value!==""+ko(g)&&(A.value=""+ko(g)):_e!=="submit"&&_e!=="reset"||A.removeAttribute("value"),g!=null?eA(A,_e,ko(g)):_!=null?eA(A,_e,ko(_)):I!=null&&A.removeAttribute("value"),Q==null&&X!=null&&(A.defaultChecked=!!X),Q!=null&&(A.checked=Q&&typeof Q!="function"&&typeof Q!="symbol"),Ve!=null&&typeof Ve!="function"&&typeof Ve!="symbol"&&typeof Ve!="boolean"?A.name=""+ko(Ve):A.removeAttribute("name")}function rl(A,g,_,I,Q,X,_e,Ve){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(A.type=X),g!=null||_!=null){if(!(X!=="submit"&&X!=="reset"||g!=null)){Oc(A);return}_=_!=null?""+ko(_):"",g=g!=null?""+ko(g):_,Ve||g===A.value||(A.value=g),A.defaultValue=g}I=I??Q,I=typeof I!="function"&&typeof I!="symbol"&&!!I,A.checked=Ve?A.checked:!!I,A.defaultChecked=!!I,_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"&&(A.name=_e),Oc(A)}function eA(A,g,_){g==="number"&&Bc(A.ownerDocument)===A||A.defaultValue===""+_||(A.defaultValue=""+_)}function ou(A,g,_,I){if(A=A.options,g){g={};for(var Q=0;Q<_.length;Q++)g["$"+_[Q]]=!0;for(_=0;_<A.length;_++)Q=g.hasOwnProperty("$"+A[_].value),A[_].selected!==Q&&(A[_].selected=Q),Q&&I&&(A[_].defaultSelected=!0)}else{for(_=""+ko(_),g=null,Q=0;Q<A.length;Q++){if(A[Q].value===_){A[Q].selected=!0,I&&(A[Q].defaultSelected=!0);return}g!==null||A[Q].disabled||(g=A[Q])}g!==null&&(g.selected=!0)}}function Na(A,g,_){if(g!=null&&(g=""+ko(g),g!==A.value&&(A.value=g),_==null)){A.defaultValue!==g&&(A.defaultValue=g);return}A.defaultValue=_!=null?""+ko(_):""}function Ms(A,g,_,I){if(g==null){if(I!=null){if(_!=null)throw Error(i(92));if(je(I)){if(1<I.length)throw Error(i(93));I=I[0]}_=I}_==null&&(_=""),g=_}_=ko(g),A.defaultValue=_,I=A.textContent,I===_&&I!==""&&I!==null&&(A.value=I),Oc(A)}function To(A,g){if(g){var _=A.firstChild;if(_&&_===A.lastChild&&_.nodeType===3){_.nodeValue=g;return}}A.textContent=g}var su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(A,g,_){var I=g.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?I?A.setProperty(g,""):g==="float"?A.cssFloat="":A[g]="":I?A.setProperty(g,_):typeof _!="number"||_===0||su.has(g)?g==="float"?A.cssFloat=_:A[g]=(""+_).trim():A[g]=_+"px"}function Ls(A,g,_){if(g!=null&&typeof g!="object")throw Error(i(62));if(A=A.style,_!=null){for(var I in _)!_.hasOwnProperty(I)||g!=null&&g.hasOwnProperty(I)||(I.indexOf("--")===0?A.setProperty(I,""):I==="float"?A.cssFloat="":A[I]="");for(var Q in g)I=g[Q],g.hasOwnProperty(Q)&&_[Q]!==I&&au(A,Q,I)}else for(var X in g)g.hasOwnProperty(X)&&au(A,X,g[X])}function Ga(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gi(A){return ol.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}function Wa(){}var Xo=null;function lu(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Ko=null,so=null;function ws(A){var g=ka(A);if(g&&(A=g.stateNode)){var _=A[hn]||null;e:switch(A=g.stateNode,g.type){case"input":if(oc(A,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),g=_.name,_.type==="radio"&&g!=null){for(_=A;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+pa(""+g)+'"][type="radio"]'),g=0;g<_.length;g++){var I=_[g];if(I!==A&&I.form===A.form){var Q=I[hn]||null;if(!Q)throw Error(i(90));oc(I,Q.value,Q.defaultValue,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name)}}for(g=0;g<_.length;g++)I=_[g],I.form===A.form&&rc(I)}break e;case"textarea":Na(A,_.value,_.defaultValue);break e;case"select":g=_.value,g!=null&&ou(A,!!_.multiple,g,!1)}}}var Mo=!1;function _o(A,g,_){if(Mo)return A(g,_);Mo=!0;try{var I=A(g);return I}finally{if(Mo=!1,(Ko!==null||so!==null)&&($1(),Ko&&(g=Ko,A=so,so=Ko=null,ws(g),A)))for(g=0;g<A.length;g++)ws(A[g])}}function uu(A,g){var _=A.stateNode;if(_===null)return null;var I=_[hn]||null;if(I===null)return null;_=I[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(A=A.type,I=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!I;break e;default:A=!1}if(A)return null;if(_&&typeof _!="function")throw Error(i(231,g,typeof _));return _}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ss=!1;if(mo)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){ss=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{ss=!1}var sl=null,Ul=null,Ni=null;function Pi(){if(Ni)return Ni;var A,g=Ul,_=g.length,I,Q="value"in sl?sl.value:sl.textContent,X=Q.length;for(A=0;A<_&&g[A]===Q[A];A++);var _e=_-A;for(I=1;I<=_e&&g[_-I]===Q[X-I];I++);return Ni=Q.slice(A,1<I?1-I:void 0)}function J(A){var g=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&g===13&&(A=13)):A=g,A===10&&(A=13),32<=A||A===13?A:0}function ye(){return!0}function Qe(){return!1}function Et(A){function g(_,I,Q,X,_e){this._reactName=_,this._targetInst=Q,this.type=I,this.nativeEvent=X,this.target=_e,this.currentTarget=null;for(var Ve in A)A.hasOwnProperty(Ve)&&(_=A[Ve],this[Ve]=_?_(X):X[Ve]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?ye:Qe,this.isPropagationStopped=Qe,this}return v(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=ye)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=ye)},persist:function(){},isPersistent:ye}),g}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bn=Et(dn),ci=v({},dn,{view:0,detail:0}),Ki=Et(ci),Oi,Bi,pr,lo=v({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==pr&&(pr&&A.type==="mousemove"?(Oi=A.screenX-pr.screenX,Bi=A.screenY-pr.screenY):Bi=Oi=0,pr=A),Oi)},movementY:function(A){return"movementY"in A?A.movementY:Bi}}),br=Et(lo),yr=v({},lo,{dataTransfer:0}),to=Et(yr),Fo=v({},ci,{relatedTarget:0}),Br=Et(Fo),Ss=v({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),ZA=Et(Ss),vl=v({},dn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Tr=Et(vl),_1=v({},dn,{data:0}),cu=Et(_1),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ta={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yA(A){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(A):(A=ta[A])?!!g[A]:!1}function Ph(){return yA}var Es=v({},ci,{key:function(A){if(A.key){var g=Au[A.key]||A.key;if(g!=="Unidentified")return g}return A.type==="keypress"?(A=J(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Rm[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(A){return A.type==="keypress"?J(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?J(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Bu=Et(Es),Of=v({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=Et(Of),sc=v({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),x1=Et(sc),Dm=v({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pv=Et(Dm),Dd=v({},lo,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Bf=Et(Dd),XA=v({},dn,{newState:0,oldState:0}),h0=Et(XA),Pm=[9,13,27,32],Ll=mo&&"CompositionEvent"in window,Pd=null;mo&&"documentMode"in document&&(Pd=document.documentMode);var If=mo&&"TextEvent"in window&&!Pd,Uh=mo&&(!Ll||Pd&&8<Pd&&11>=Pd),kf=" ",Mp=!1;function Ud(A,g){switch(A){case"keyup":return Pm.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M1(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Ic=!1;function ac(A,g){switch(A){case"compositionend":return M1(g);case"keypress":return g.which!==32?null:(Mp=!0,kf);case"textInput":return A=g.data,A===kf&&Mp?null:A;default:return null}}function Um(A,g){if(Ic)return A==="compositionend"||!Ll&&Ud(A,g)?(A=Pi(),Ni=Ul=sl=null,Ic=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Uh&&g.locale!=="ko"?null:g.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g==="input"?!!Tf[A.type]:g==="textarea"}function Rf(A,g,_,I){Ko?so?so.push(I):so=[I]:Ko=I,g=mg(g,"onChange"),0<g.length&&(_=new Bn("onChange","change",null,_,I),A.push({event:_,listeners:g}))}var Df=null,Pf=null;function w1(A){wC(A,0)}function Sp(A){var g=nu(A);if(rc(g))return A}function tA(A,g){if(A==="change")return g}var Lh=!1;if(mo){var Lm;if(mo){var Ld="oninput"in document;if(!Ld){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),Ld=typeof Km.oninput=="function"}Lm=Ld}else Lm=!1;Lh=Lm&&(!document.documentMode||9<document.documentMode)}function Kh(){Df&&(Df.detachEvent("onpropertychange",vA),Pf=Df=null)}function vA(A){if(A.propertyName==="value"&&Sp(Pf)){var g=[];Rf(g,Pf,A,lu(A)),_o(w1,g)}}function Fm(A,g,_){A==="focusin"?(Kh(),Df=g,Pf=_,Df.attachEvent("onpropertychange",vA)):A==="focusout"&&Kh()}function S1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Sp(Pf)}function d0(A,g){if(A==="click")return Sp(g)}function f0(A,g){if(A==="input"||A==="change")return Sp(g)}function Fh(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}var Ks=typeof Object.is=="function"?Object.is:Fh;function JA(A,g){if(Ks(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var _=Object.keys(A),I=Object.keys(g);if(_.length!==I.length)return!1;for(I=0;I<_.length;I++){var Q=_[I];if(!zn.call(g,Q)||!Ks(A[Q],g[Q]))return!1}return!0}function nA(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function zm(A,g){var _=nA(A);A=0;for(var I;_;){if(_.nodeType===3){if(I=A+_.textContent.length,A<=g&&I>=g)return{node:_,offset:g-A};A=I}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=nA(_)}}function jm(A,g){return A&&g?A===g?!0:A&&A.nodeType===3?!1:g&&g.nodeType===3?jm(A,g.parentNode):"contains"in A?A.contains(g):A.compareDocumentPosition?!!(A.compareDocumentPosition(g)&16):!1:!1}function Nm(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var g=Bc(A.document);g instanceof A.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)A=g.contentWindow;else break;g=Bc(A.document)}return g}function Gm(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g&&(g==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||g==="textarea"||A.contentEditable==="true")}var Gr=mo&&"documentMode"in document&&11>=document.documentMode,Ut=null,sn=null,rn=null,pi=!1;function vr(A,g,_){var I=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;pi||Ut==null||Ut!==Bc(I)||(I=Ut,"selectionStart"in I&&Gm(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),rn&&JA(rn,I)||(rn=I,I=mg(sn,"onSelect"),0<I.length&&(g=new Bn("onSelect","select",null,g,_),A.push({event:g,listeners:I}),g.target=Ut)))}function Hr(A,g){var _={};return _[A.toLowerCase()]=g.toLowerCase(),_["Webkit"+A]="webkit"+g,_["Moz"+A]="moz"+g,_}var Os={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionrun:Hr("Transition","TransitionRun"),transitionstart:Hr("Transition","TransitionStart"),transitioncancel:Hr("Transition","TransitionCancel"),transitionend:Hr("Transition","TransitionEnd")},Go={},Ep={};mo&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function bA(A){if(Go[A])return Go[A];if(!Os[A])return A;var g=Os[A],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in Ep)return Go[A]=g[_];return A}var Kl=bA("animationend"),zh=bA("animationiteration"),Wm=bA("animationstart"),kc=bA("transitionrun"),jh=bA("transitionstart"),eh=bA("transitioncancel"),Rr=bA("transitionend"),p0=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function Fl(A,g){p0.set(A,g),Qi(g,[A])}var CA=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},hu=[],th=0,_A=0;function Iu(){for(var A=th,g=_A=th=0;g<A;){var _=hu[g];hu[g++]=null;var I=hu[g];hu[g++]=null;var Q=hu[g];hu[g++]=null;var X=hu[g];if(hu[g++]=null,I!==null&&Q!==null){var _e=I.pending;_e===null?Q.next=Q:(Q.next=_e.next,_e.next=Q),I.pending=Q}X!==0&&Qm(_,Q,X)}}function Nh(A,g,_,I){hu[th++]=A,hu[th++]=g,hu[th++]=_,hu[th++]=I,_A|=I,A.lanes|=I,A=A.alternate,A!==null&&(A.lanes|=I)}function nh(A,g,_,I){return Nh(A,g,_,I),Kd(A)}function du(A,g){return Nh(A,null,null,g),Kd(A)}function Qm(A,g,_){A.lanes|=_;var I=A.alternate;I!==null&&(I.lanes|=_);for(var Q=!1,X=A.return;X!==null;)X.childLanes|=_,I=X.alternate,I!==null&&(I.childLanes|=_),X.tag===22&&(A=X.stateNode,A===null||A._visibility&1||(Q=!0)),A=X,X=X.return;return A.tag===3?(X=A.stateNode,Q&&g!==null&&(Q=31-fe(_),A=X.hiddenUpdates,I=A[Q],I===null?A[Q]=[g]:I.push(g),g.lane=_|536870912),X):null}function Kd(A){if(50<aa)throw aa=0,I0=null,Error(i(185));for(var g=A.return;g!==null;)A=g,g=A.return;return A.tag===3?A.stateNode:null}var cr={};function Fd(A,g,_,I){this.tag=A,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bl(A,g,_,I){return new Fd(A,g,_,I)}function xA(A){return A=A.prototype,!(!A||!A.isReactComponent)}function zl(A,g){var _=A.alternate;return _===null?(_=bl(A.tag,g,A.key,A.mode),_.elementType=A.elementType,_.type=A.type,_.stateNode=A.stateNode,_.alternate=A,A.alternate=_):(_.pendingProps=g,_.type=A.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=A.flags&65011712,_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,g=A.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=A.sibling,_.index=A.index,_.ref=A.ref,_.refCleanup=A.refCleanup,_}function m0(A,g){A.flags&=65011714;var _=A.alternate;return _===null?(A.childLanes=0,A.lanes=g,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,g=_.dependencies,A.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A}function qm(A,g,_,I,Q,X){var _e=0;if(I=A,typeof A=="function")xA(A)&&(_e=1);else if(typeof A=="string")_e=Pe(A,_,At.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case ae:return A=bl(31,_,g,Q),A.elementType=ae,A.lanes=X,A;case R:return Gh(_.children,Q,X,g);case F:_e=8,Q|=24;break;case j:return A=bl(12,_,g,Q|2),A.elementType=j,A.lanes=X,A;case N:return A=bl(13,_,g,Q),A.elementType=N,A.lanes=X,A;case Y:return A=bl(19,_,g,Q),A.elementType=Y,A.lanes=X,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case H:_e=10;break e;case W:_e=9;break e;case $:_e=11;break e;case z:_e=14;break e;case ne:_e=16,I=null;break e}_e=29,_=Error(i(130,A===null?"null":typeof A,"")),I=null}return g=bl(_e,_,g,Q),g.elementType=A,g.type=I,g.lanes=X,g}function Gh(A,g,_,I){return A=bl(7,A,I,g),A.lanes=_,A}function ih(A,g,_){return A=bl(6,A,null,g),A.lanes=_,A}function Wh(A){var g=bl(18,null,null,0);return g.stateNode=A,g}function Qh(A,g,_){return g=bl(4,A.children!==null?A.children:[],A.key,g),g.lanes=_,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}var Bp=new WeakMap;function jl(A,g){if(typeof A=="object"&&A!==null){var _=Bp.get(A);return _!==void 0?_:(g={value:A,source:g,stack:Pn(g)},Bp.set(A,g),g)}return{value:A,source:g,stack:Pn(g)}}var qh=[],zd=0,ms=null,Fs=0,fu=[],Cl=0,Tc=null,iA=1,_l="";function lc(A,g){qh[zd++]=Fs,qh[zd++]=ms,ms=A,Fs=g}function Ip(A,g,_){fu[Cl++]=iA,fu[Cl++]=_l,fu[Cl++]=Tc,Tc=A;var I=iA;A=_l;var Q=32-fe(I)-1;I&=~(1<<Q),_+=1;var X=32-fe(g)+Q;if(30<X){var _e=Q-Q%5;X=(I&(1<<_e)-1).toString(32),I>>=_e,Q-=_e,iA=1<<32-fe(g)+Q|_<<Q|I,_l=X+A}else iA=1<<X|_<<Q|I,_l=A}function rA(A){A.return!==null&&(lc(A,1),Ip(A,1,0))}function rh(A){for(;A===ms;)ms=qh[--zd],qh[zd]=null,Fs=qh[--zd],qh[zd]=null;for(;A===Tc;)Tc=fu[--Cl],fu[Cl]=null,_l=fu[--Cl],fu[Cl]=null,iA=fu[--Cl],fu[Cl]=null}function Yh(A,g){fu[Cl++]=iA,fu[Cl++]=_l,fu[Cl++]=Tc,iA=g.id,_l=g.overflow,Tc=A}var na=null,uo=null,Wr=!1,MA=null,pu=!1,as=Error(i(519));function ku(A){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oA(jl(g,A)),as}function Nl(A){var g=A.stateNode,_=A.type,I=A.memoizedProps;switch(g[kr]=A,g[hn]=I,_){case"dialog":ho("cancel",g),ho("close",g);break;case"iframe":case"object":case"embed":ho("load",g);break;case"video":case"audio":for(_=0;_<K0.length;_++)ho(K0[_],g);break;case"source":ho("error",g);break;case"img":case"image":case"link":ho("error",g),ho("load",g);break;case"details":ho("toggle",g);break;case"input":ho("invalid",g),rl(g,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0);break;case"select":ho("invalid",g);break;case"textarea":ho("invalid",g),Ms(g,I.value,I.defaultValue,I.children)}_=I.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||g.textContent===""+_||I.suppressHydrationWarning===!0||Gv(g.textContent,_)?(I.popover!=null&&(ho("beforetoggle",g),ho("toggle",g)),I.onScroll!=null&&ho("scroll",g),I.onScrollEnd!=null&&ho("scrollend",g),I.onClick!=null&&(g.onclick=Wa),g=!0):g=!1,g||ku(A,!0)}function $h(A){for(na=A.return;na;)switch(na.tag){case 5:case 31:case 13:pu=!1;return;case 27:case 3:pu=!0;return;default:na=na.return}}function wA(A){if(A!==na)return!1;if(!Wr)return $h(A),Wr=!0,!1;var g=A.tag,_;if((_=g!==3&&g!==27)&&((_=g===5)&&(_=A.type,_=!(_!=="form"&&_!=="button")||of(A.type,A.memoizedProps)),_=!_),_&&uo&&ku(A),$h(A),g===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));uo=qv(A)}else if(g===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));uo=qv(A)}else g===27?(g=uo,or(A.type)?(A=hy,hy=null,uo=A):uo=g):uo=na?Nc(A.stateNode.nextSibling):null;return!0}function $e(){uo=na=null,Wr=!1}function uc(){var A=MA;return A!==null&&(pc===null?pc=A:pc.push.apply(pc,A),MA=null),A}function oA(A){MA===null?MA=[A]:MA.push(A)}var Qa=Oe(null),hr=null,SA=null;function EA(A,g,_){we(Qa,g._currentValue),g._currentValue=_}function sA(A){A._currentValue=Qa.current,ze(Qa)}function OA(A,g,_){for(;A!==null;){var I=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),A===_)break;A=A.return}}function kp(A,g,_,I){var Q=A.child;for(Q!==null&&(Q.return=A);Q!==null;){var X=Q.dependencies;if(X!==null){var _e=Q.child;X=X.firstContext;e:for(;X!==null;){var Ve=X;X=Q;for(var Mt=0;Mt<g.length;Mt++)if(Ve.context===g[Mt]){X.lanes|=_,Ve=X.alternate,Ve!==null&&(Ve.lanes|=_),OA(X.return,_,A),I||(_e=null);break e}X=Ve.next}}else if(Q.tag===18){if(_e=Q.return,_e===null)throw Error(i(341));_e.lanes|=_,X=_e.alternate,X!==null&&(X.lanes|=_),OA(_e,_,A),_e=null}else _e=Q.child;if(_e!==null)_e.return=Q;else for(_e=Q;_e!==null;){if(_e===A){_e=null;break}if(Q=_e.sibling,Q!==null){Q.return=_e.return,_e=Q;break}_e=_e.return}Q=_e}}function cc(A,g,_,I){A=null;for(var Q=g,X=!1;Q!==null;){if(!X){if((Q.flags&524288)!==0)X=!0;else if((Q.flags&262144)!==0)break}if(Q.tag===10){var _e=Q.alternate;if(_e===null)throw Error(i(387));if(_e=_e.memoizedProps,_e!==null){var Ve=Q.type;Ks(Q.pendingProps.value,_e.value)||(A!==null?A.push(Ve):A=[Ve])}}else if(Q===It.current){if(_e=Q.alternate,_e===null)throw Error(i(387));_e.memoizedState.memoizedState!==Q.memoizedState.memoizedState&&(A!==null?A.push(Xt):A=[Xt])}Q=Q.return}A!==null&&kp(g,A,_,I),g.flags|=262144}function oh(A){for(A=A.firstContext;A!==null;){if(!Ks(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Vh(A){hr=A,SA=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function al(A){return g0(hr,A)}function Ac(A,g){return hr===null&&Vh(A),g0(A,g)}function g0(A,g){var _=g._currentValue;if(g={context:g,memoizedValue:_,next:null},SA===null){if(A===null)throw Error(i(308));SA=g,A.dependencies={lanes:0,firstContext:g},A.flags|=524288}else SA=SA.next=g;return _}var E1=typeof AbortController<"u"?AbortController:function(){var A=[],g=this.signal={aborted:!1,addEventListener:function(_,I){A.push(I)}};this.abort=function(){g.aborted=!0,A.forEach(function(_){return _()})}},O1=n.unstable_scheduleCallback,Uf=n.unstable_NormalPriority,ls={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zs(){return{controller:new E1,data:new Map,refCount:0}}function Ta(A){A.refCount--,A.refCount===0&&O1(Uf,function(){A.controller.abort()})}var Gl=null,Ym=0,Wl=0,mu=null;function Hh(A,g){if(Gl===null){var _=Gl=[];Ym=0,Wl=$l(),mu={status:"pending",value:void 0,then:function(I){_.push(I)}}}return Ym++,g.then($m,$m),g}function $m(){if(--Ym===0&&Gl!==null){mu!==null&&(mu.status="fulfilled");var A=Gl;Gl=null,Wl=0,mu=null;for(var g=0;g<A.length;g++)(0,A[g])()}}function mv(A,g){var _=[],I={status:"pending",value:null,reason:null,then:function(Q){_.push(Q)}};return A.then(function(){I.status="fulfilled",I.value=g;for(var Q=0;Q<_.length;Q++)(0,_[Q])(g)},function(Q){for(I.status="rejected",I.reason=Q,Q=0;Q<_.length;Q++)(0,_[Q])(void 0)}),I}var Tu=Re.S;Re.S=function(A,g){yC=Hn(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Hh(A,g),Tu!==null&&Tu(A,g)};var Zh=Oe(null);function aA(){var A=Zh.current;return A!==null?A:As.pooledCache}function Rc(A,g){g===null?we(Zh,Zh.current):we(Zh,g.pool)}function Jn(){var A=aA();return A===null?null:{parent:ls._currentValue,pool:A}}var jd=Error(i(460)),BA=Error(i(474)),Lf=Error(i(542)),Xh={then:function(){}};function sh(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Kf(A,g,_){switch(_=A[_],_===void 0?A.push(g):_!==g&&(g.then(Wa,Wa),g=_),g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,Ff(A),A;default:if(typeof g.status=="string")g.then(Wa,Wa);else{if(A=As,A!==null&&100<A.shellSuspendCounter)throw Error(i(482));A=g,A.status="pending",A.then(function(I){if(g.status==="pending"){var Q=g;Q.status="fulfilled",Q.value=I}},function(I){if(g.status==="pending"){var Q=g;Q.status="rejected",Q.reason=I}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,Ff(A),A}throw gu=g,jd}}function nr(A){try{var g=A._init;return g(A._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(gu=_,jd):_}}var gu=null;function y0(){if(gu===null)throw Error(i(459));var A=gu;return gu=null,A}function Ff(A){if(A===jd||A===Lf)throw Error(i(483))}var Nd=null,Ru=0;function ah(A){var g=Ru;return Ru+=1,Nd===null&&(Nd=[]),Kf(Nd,A,g)}function Du(A,g){g=g.props.ref,A.ref=g!==void 0?g:null}function Ql(A,g){throw g.$$typeof===x?Error(i(525)):(A=Object.prototype.toString.call(g),Error(i(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A)))}function v0(A){function g(Lt,Rt){if(A){var qt=Lt.deletions;qt===null?(Lt.deletions=[Rt],Lt.flags|=16):qt.push(Rt)}}function _(Lt,Rt){if(!A)return null;for(;Rt!==null;)g(Lt,Rt),Rt=Rt.sibling;return null}function I(Lt){for(var Rt=new Map;Lt!==null;)Lt.key!==null?Rt.set(Lt.key,Lt):Rt.set(Lt.index,Lt),Lt=Lt.sibling;return Rt}function Q(Lt,Rt){return Lt=zl(Lt,Rt),Lt.index=0,Lt.sibling=null,Lt}function X(Lt,Rt,qt){return Lt.index=qt,A?(qt=Lt.alternate,qt!==null?(qt=qt.index,qt<Rt?(Lt.flags|=67108866,Rt):qt):(Lt.flags|=67108866,Rt)):(Lt.flags|=1048576,Rt)}function _e(Lt){return A&&Lt.alternate===null&&(Lt.flags|=67108866),Lt}function Ve(Lt,Rt,qt,fn){return Rt===null||Rt.tag!==6?(Rt=ih(qt,Lt.mode,fn),Rt.return=Lt,Rt):(Rt=Q(Rt,qt),Rt.return=Lt,Rt)}function Mt(Lt,Rt,qt,fn){var Ji=qt.type;return Ji===R?un(Lt,Rt,qt.props.children,fn,qt.key):Rt!==null&&(Rt.elementType===Ji||typeof Ji=="object"&&Ji!==null&&Ji.$$typeof===ne&&nr(Ji)===Rt.type)?(Rt=Q(Rt,qt.props),Du(Rt,qt),Rt.return=Lt,Rt):(Rt=qm(qt.type,qt.key,qt.props,null,Lt.mode,fn),Du(Rt,qt),Rt.return=Lt,Rt)}function $t(Lt,Rt,qt,fn){return Rt===null||Rt.tag!==4||Rt.stateNode.containerInfo!==qt.containerInfo||Rt.stateNode.implementation!==qt.implementation?(Rt=Qh(qt,Lt.mode,fn),Rt.return=Lt,Rt):(Rt=Q(Rt,qt.children||[]),Rt.return=Lt,Rt)}function un(Lt,Rt,qt,fn,Ji){return Rt===null||Rt.tag!==7?(Rt=Gh(qt,Lt.mode,fn,Ji),Rt.return=Lt,Rt):(Rt=Q(Rt,qt),Rt.return=Lt,Rt)}function gn(Lt,Rt,qt){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Rt=ih(""+Rt,Lt.mode,qt),Rt.return=Lt,Rt;if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case S:return qt=qm(Rt.type,Rt.key,Rt.props,null,Lt.mode,qt),Du(qt,Rt),qt.return=Lt,qt;case B:return Rt=Qh(Rt,Lt.mode,qt),Rt.return=Lt,Rt;case ne:return Rt=nr(Rt),gn(Lt,Rt,qt)}if(je(Rt)||be(Rt))return Rt=Gh(Rt,Lt.mode,qt,null),Rt.return=Lt,Rt;if(typeof Rt.then=="function")return gn(Lt,ah(Rt),qt);if(Rt.$$typeof===H)return gn(Lt,Ac(Lt,Rt),qt);Ql(Lt,Rt)}return null}function Jt(Lt,Rt,qt,fn){var Ji=Rt!==null?Rt.key:null;if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return Ji!==null?null:Ve(Lt,Rt,""+qt,fn);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case S:return qt.key===Ji?Mt(Lt,Rt,qt,fn):null;case B:return qt.key===Ji?$t(Lt,Rt,qt,fn):null;case ne:return qt=nr(qt),Jt(Lt,Rt,qt,fn)}if(je(qt)||be(qt))return Ji!==null?null:un(Lt,Rt,qt,fn,null);if(typeof qt.then=="function")return Jt(Lt,Rt,ah(qt),fn);if(qt.$$typeof===H)return Jt(Lt,Rt,Ac(Lt,qt),fn);Ql(Lt,qt)}return null}function on(Lt,Rt,qt,fn,Ji){if(typeof fn=="string"&&fn!==""||typeof fn=="number"||typeof fn=="bigint")return Lt=Lt.get(qt)||null,Ve(Rt,Lt,""+fn,Ji);if(typeof fn=="object"&&fn!==null){switch(fn.$$typeof){case S:return Lt=Lt.get(fn.key===null?qt:fn.key)||null,Mt(Rt,Lt,fn,Ji);case B:return Lt=Lt.get(fn.key===null?qt:fn.key)||null,$t(Rt,Lt,fn,Ji);case ne:return fn=nr(fn),on(Lt,Rt,qt,fn,Ji)}if(je(fn)||be(fn))return Lt=Lt.get(qt)||null,un(Rt,Lt,fn,Ji,null);if(typeof fn.then=="function")return on(Lt,Rt,qt,ah(fn),Ji);if(fn.$$typeof===H)return on(Lt,Rt,qt,Ac(Rt,fn),Ji);Ql(Rt,fn)}return null}function Ri(Lt,Rt,qt,fn){for(var Ji=null,jo=null,oi=Rt,rr=Rt=0,Fr=null;oi!==null&&rr<qt.length;rr++){oi.index>rr?(Fr=oi,oi=null):Fr=oi.sibling;var zr=Jt(Lt,oi,qt[rr],fn);if(zr===null){oi===null&&(oi=Fr);break}A&&oi&&zr.alternate===null&&g(Lt,oi),Rt=X(zr,Rt,rr),jo===null?Ji=zr:jo.sibling=zr,jo=zr,oi=Fr}if(rr===qt.length)return _(Lt,oi),Wr&&lc(Lt,rr),Ji;if(oi===null){for(;rr<qt.length;rr++)oi=gn(Lt,qt[rr],fn),oi!==null&&(Rt=X(oi,Rt,rr),jo===null?Ji=oi:jo.sibling=oi,jo=oi);return Wr&&lc(Lt,rr),Ji}for(oi=I(oi);rr<qt.length;rr++)Fr=on(oi,Lt,rr,qt[rr],fn),Fr!==null&&(A&&Fr.alternate!==null&&oi.delete(Fr.key===null?rr:Fr.key),Rt=X(Fr,Rt,rr),jo===null?Ji=Fr:jo.sibling=Fr,jo=Fr);return A&&oi.forEach(function(Qc){return g(Lt,Qc)}),Wr&&lc(Lt,rr),Ji}function sr(Lt,Rt,qt,fn){if(qt==null)throw Error(i(151));for(var Ji=null,jo=null,oi=Rt,rr=Rt=0,Fr=null,zr=qt.next();oi!==null&&!zr.done;rr++,zr=qt.next()){oi.index>rr?(Fr=oi,oi=null):Fr=oi.sibling;var Qc=Jt(Lt,oi,zr.value,fn);if(Qc===null){oi===null&&(oi=Fr);break}A&&oi&&Qc.alternate===null&&g(Lt,oi),Rt=X(Qc,Rt,rr),jo===null?Ji=Qc:jo.sibling=Qc,jo=Qc,oi=Fr}if(zr.done)return _(Lt,oi),Wr&&lc(Lt,rr),Ji;if(oi===null){for(;!zr.done;rr++,zr=qt.next())zr=gn(Lt,zr.value,fn),zr!==null&&(Rt=X(zr,Rt,rr),jo===null?Ji=zr:jo.sibling=zr,jo=zr);return Wr&&lc(Lt,rr),Ji}for(oi=I(oi);!zr.done;rr++,zr=qt.next())zr=on(oi,Lt,rr,zr.value,fn),zr!==null&&(A&&zr.alternate!==null&&oi.delete(zr.key===null?rr:zr.key),Rt=X(zr,Rt,rr),jo===null?Ji=zr:jo.sibling=zr,jo=zr);return A&&oi.forEach(function(pd){return g(Lt,pd)}),Wr&&lc(Lt,rr),Ji}function _s(Lt,Rt,qt,fn){if(typeof qt=="object"&&qt!==null&&qt.type===R&&qt.key===null&&(qt=qt.props.children),typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case S:e:{for(var Ji=qt.key;Rt!==null;){if(Rt.key===Ji){if(Ji=qt.type,Ji===R){if(Rt.tag===7){_(Lt,Rt.sibling),fn=Q(Rt,qt.props.children),fn.return=Lt,Lt=fn;break e}}else if(Rt.elementType===Ji||typeof Ji=="object"&&Ji!==null&&Ji.$$typeof===ne&&nr(Ji)===Rt.type){_(Lt,Rt.sibling),fn=Q(Rt,qt.props),Du(fn,qt),fn.return=Lt,Lt=fn;break e}_(Lt,Rt);break}else g(Lt,Rt);Rt=Rt.sibling}qt.type===R?(fn=Gh(qt.props.children,Lt.mode,fn,qt.key),fn.return=Lt,Lt=fn):(fn=qm(qt.type,qt.key,qt.props,null,Lt.mode,fn),Du(fn,qt),fn.return=Lt,Lt=fn)}return _e(Lt);case B:e:{for(Ji=qt.key;Rt!==null;){if(Rt.key===Ji)if(Rt.tag===4&&Rt.stateNode.containerInfo===qt.containerInfo&&Rt.stateNode.implementation===qt.implementation){_(Lt,Rt.sibling),fn=Q(Rt,qt.children||[]),fn.return=Lt,Lt=fn;break e}else{_(Lt,Rt);break}else g(Lt,Rt);Rt=Rt.sibling}fn=Qh(qt,Lt.mode,fn),fn.return=Lt,Lt=fn}return _e(Lt);case ne:return qt=nr(qt),_s(Lt,Rt,qt,fn)}if(je(qt))return Ri(Lt,Rt,qt,fn);if(be(qt)){if(Ji=be(qt),typeof Ji!="function")throw Error(i(150));return qt=Ji.call(qt),sr(Lt,Rt,qt,fn)}if(typeof qt.then=="function")return _s(Lt,Rt,ah(qt),fn);if(qt.$$typeof===H)return _s(Lt,Rt,Ac(Lt,qt),fn);Ql(Lt,qt)}return typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint"?(qt=""+qt,Rt!==null&&Rt.tag===6?(_(Lt,Rt.sibling),fn=Q(Rt,qt),fn.return=Lt,Lt=fn):(_(Lt,Rt),fn=ih(qt,Lt.mode,fn),fn.return=Lt,Lt=fn),_e(Lt)):_(Lt,Rt)}return function(Lt,Rt,qt,fn){try{Ru=0;var Ji=_s(Lt,Rt,qt,fn);return Nd=null,Ji}catch(oi){if(oi===jd||oi===Lf)throw oi;var jo=bl(29,oi,null,Lt.mode);return jo.lanes=fn,jo.return=Lt,jo}finally{}}}var lh=v0(!0),Vm=v0(!1),Dc=!1;function ll(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wo(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Jh(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Pu(A,g,_){var I=A.updateQueue;if(I===null)return null;if(I=I.shared,(xo&2)!==0){var Q=I.pending;return Q===null?g.next=g:(g.next=Q.next,Q.next=g),I.pending=g,g=Kd(A),Qm(A,null,_),g}return Nh(A,I,g,_),Kd(A)}function ed(A,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194048)!==0)){var I=g.lanes;I&=A.pendingLanes,_|=I,g.lanes=_,fi(A,_)}}function zf(A,g){var _=A.updateQueue,I=A.alternate;if(I!==null&&(I=I.updateQueue,_===I)){var Q=null,X=null;if(_=_.firstBaseUpdate,_!==null){do{var _e={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};X===null?Q=X=_e:X=X.next=_e,_=_.next}while(_!==null);X===null?Q=X=g:X=X.next=g}else Q=X=g;_={baseState:I.baseState,firstBaseUpdate:Q,lastBaseUpdate:X,shared:I.shared,callbacks:I.callbacks},A.updateQueue=_;return}A=_.lastBaseUpdate,A===null?_.firstBaseUpdate=g:A.next=g,_.lastBaseUpdate=g}var ma=!1;function uh(){if(ma){var A=mu;if(A!==null)throw A}}function ch(A,g,_,I){ma=!1;var Q=A.updateQueue;Dc=!1;var X=Q.firstBaseUpdate,_e=Q.lastBaseUpdate,Ve=Q.shared.pending;if(Ve!==null){Q.shared.pending=null;var Mt=Ve,$t=Mt.next;Mt.next=null,_e===null?X=$t:_e.next=$t,_e=Mt;var un=A.alternate;un!==null&&(un=un.updateQueue,Ve=un.lastBaseUpdate,Ve!==_e&&(Ve===null?un.firstBaseUpdate=$t:Ve.next=$t,un.lastBaseUpdate=Mt))}if(X!==null){var gn=Q.baseState;_e=0,un=$t=Mt=null,Ve=X;do{var Jt=Ve.lane&-536870913,on=Jt!==Ve.lane;if(on?(go&Jt)===Jt:(I&Jt)===Jt){Jt!==0&&Jt===Wl&&(ma=!0),un!==null&&(un=un.next={lane:0,tag:Ve.tag,payload:Ve.payload,callback:null,next:null});e:{var Ri=A,sr=Ve;Jt=g;var _s=_;switch(sr.tag){case 1:if(Ri=sr.payload,typeof Ri=="function"){gn=Ri.call(_s,gn,Jt);break e}gn=Ri;break e;case 3:Ri.flags=Ri.flags&-65537|128;case 0:if(Ri=sr.payload,Jt=typeof Ri=="function"?Ri.call(_s,gn,Jt):Ri,Jt==null)break e;gn=v({},gn,Jt);break e;case 2:Dc=!0}}Jt=Ve.callback,Jt!==null&&(A.flags|=64,on&&(A.flags|=8192),on=Q.callbacks,on===null?Q.callbacks=[Jt]:on.push(Jt))}else on={lane:Jt,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null},un===null?($t=un=on,Mt=gn):un=un.next=on,_e|=Jt;if(Ve=Ve.next,Ve===null){if(Ve=Q.shared.pending,Ve===null)break;on=Ve,Ve=on.next,on.next=null,Q.lastBaseUpdate=on,Q.shared.pending=null}}while(!0);un===null&&(Mt=gn),Q.baseState=Mt,Q.firstBaseUpdate=$t,Q.lastBaseUpdate=un,X===null&&(Q.shared.lanes=0),Vf|=_e,A.lanes=_e,A.memoizedState=gn}}function Ra(A,g){if(typeof A!="function")throw Error(i(191,A));A.call(g)}function Ah(A,g){var _=A.callbacks;if(_!==null)for(A.callbacks=null,A=0;A<_.length;A++)Ra(_[A],g)}var ri=Oe(null),_i=Oe(0);function td(A,g){A=KA,we(_i,A),we(ri,g),KA=A|g.baseLanes}function qa(){we(_i,KA),we(ri,ri.current)}function hh(){KA=_i.current,ze(ri),ze(_i)}var us=Oe(null),hc=null;function ul(A){var g=A.alternate;we(Bs,Bs.current&1),we(us,A),hc===null&&(g===null||ri.current!==null||g.memoizedState!==null)&&(hc=A)}function jf(A){we(Bs,Bs.current),we(us,A),hc===null&&(hc=A)}function B1(A){A.tag===22?(we(Bs,Bs.current),we(us,A),hc===null&&(hc=A)):xl()}function xl(){we(Bs,Bs.current),we(us,us.current)}function Uu(A){ze(us),hc===A&&(hc=null),ze(Bs)}var Bs=Oe(0);function cs(A){for(var g=A;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Ay(_)||_h(_)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var co=0,Sr=null,So=null,Ro=null,nd=!1,IA=!1,kA=!1,TA=0,id=0,dc=null,Gd=0;function gs(){throw Error(i(321))}function Wd(A,g){if(g===null)return!1;for(var _=0;_<g.length&&_<A.length;_++)if(!Ks(A[_],g[_]))return!1;return!0}function RA(A,g,_,I,Q,X){return co=X,Sr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Re.H=A===null||A.memoizedState===null?ph:lA,kA=!1,X=_(I,Q),kA=!1,IA&&(X=Qd(g,_,I,Q)),Tp(A),X}function Tp(A){Re.H=fh;var g=So!==null&&So.next!==null;if(co=0,Ro=So=Sr=null,nd=!1,id=0,dc=null,g)throw Error(i(300));A===null||sa||(A=A.dependencies,A!==null&&oh(A)&&(sa=!0))}function Qd(A,g,_,I){Sr=A;var Q=0;do{if(IA&&(dc=null),id=0,IA=!1,25<=Q)throw Error(i(301));if(Q+=1,Ro=So=null,A.updateQueue!=null){var X=A.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}Re.H=Nf,X=g(_,I)}while(IA);return X}function Hm(){var A=Re.H,g=A.useState()[0];return g=typeof g.then=="function"?T(g):g,A=A.useState()[0],(So!==null?So.memoizedState:null)!==A&&(Sr.flags|=1024),g}function qd(){var A=TA!==0;return TA=0,A}function O(A,g,_){g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~_}function l(A){if(nd){for(A=A.memoizedState;A!==null;){var g=A.queue;g!==null&&(g.pending=null),A=A.next}nd=!1}co=0,Ro=So=Sr=null,IA=!1,id=TA=0,dc=null}function p(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ro===null?Sr.memoizedState=Ro=A:Ro=Ro.next=A,Ro}function C(){if(So===null){var A=Sr.alternate;A=A!==null?A.memoizedState:null}else A=So.next;var g=Ro===null?Sr.memoizedState:Ro.next;if(g!==null)Ro=g,So=A;else{if(A===null)throw Sr.alternate===null?Error(i(467)):Error(i(310));So=A,A={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},Ro===null?Sr.memoizedState=Ro=A:Ro=Ro.next=A}return Ro}function E(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function T(A){var g=id;return id+=1,dc===null&&(dc=[]),A=Kf(dc,A,g),g=Sr,(Ro===null?g.memoizedState:Ro.next)===null&&(g=g.alternate,Re.H=g===null||g.memoizedState===null?ph:lA),A}function U(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return T(A);if(A.$$typeof===H)return al(A)}throw Error(i(438,String(A)))}function q(A){var g=null,_=Sr.updateQueue;if(_!==null&&(g=_.memoCache),g==null){var I=Sr.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(g={data:I.data.map(function(Q){return Q.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),_===null&&(_=E(),Sr.updateQueue=_),_.memoCache=g,_=g.data[g.index],_===void 0)for(_=g.data[g.index]=Array(A),I=0;I<A;I++)_[I]=ve;return g.index++,_}function Z(A,g){return typeof g=="function"?g(A):g}function re(A){var g=C();return ue(g,So,A)}function ue(A,g,_){var I=A.queue;if(I===null)throw Error(i(311));I.lastRenderedReducer=_;var Q=A.baseQueue,X=I.pending;if(X!==null){if(Q!==null){var _e=Q.next;Q.next=X.next,X.next=_e}g.baseQueue=Q=X,I.pending=null}if(X=A.baseState,Q===null)A.memoizedState=X;else{g=Q.next;var Ve=_e=null,Mt=null,$t=g,un=!1;do{var gn=$t.lane&-536870913;if(gn!==$t.lane?(go&gn)===gn:(co&gn)===gn){var Jt=$t.revertLane;if(Jt===0)Mt!==null&&(Mt=Mt.next={lane:0,revertLane:0,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),gn===Wl&&(un=!0);else if((co&Jt)===Jt){$t=$t.next,Jt===Wl&&(un=!0);continue}else gn={lane:0,revertLane:$t.revertLane,gesture:null,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},Mt===null?(Ve=Mt=gn,_e=X):Mt=Mt.next=gn,Sr.lanes|=Jt,Vf|=Jt;gn=$t.action,kA&&_(X,gn),X=$t.hasEagerState?$t.eagerState:_(X,gn)}else Jt={lane:gn,revertLane:$t.revertLane,gesture:$t.gesture,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null},Mt===null?(Ve=Mt=Jt,_e=X):Mt=Mt.next=Jt,Sr.lanes|=gn,Vf|=gn;$t=$t.next}while($t!==null&&$t!==g);if(Mt===null?_e=X:Mt.next=Ve,!Ks(X,A.memoizedState)&&(sa=!0,un&&(_=mu,_!==null)))throw _;A.memoizedState=X,A.baseState=_e,A.baseQueue=Mt,I.lastRenderedState=X}return Q===null&&(I.lanes=0),[A.memoizedState,I.dispatch]}function Ce(A){var g=C(),_=g.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=A;var I=_.dispatch,Q=_.pending,X=g.memoizedState;if(Q!==null){_.pending=null;var _e=Q=Q.next;do X=A(X,_e.action),_e=_e.next;while(_e!==Q);Ks(X,g.memoizedState)||(sa=!0),g.memoizedState=X,g.baseQueue===null&&(g.baseState=X),_.lastRenderedState=X}return[X,I]}function ge(A,g,_){var I=Sr,Q=C(),X=Wr;if(X){if(_===void 0)throw Error(i(407));_=_()}else _=g();var _e=!Ks((So||Q).memoizedState,_);if(_e&&(Q.memoizedState=_,sa=!0),Q=Q.queue,dr(Je.bind(null,I,Q,A),[A]),Q.getSnapshot!==g||_e||Ro!==null&&Ro.memoizedState.tag&1){if(I.flags|=2048,Xn(9,{destroy:void 0},We.bind(null,I,Q,_,g),null),As===null)throw Error(i(349));X||(co&127)!==0||Ue(I,g,_)}return _}function Ue(A,g,_){A.flags|=16384,A={getSnapshot:g,value:_},g=Sr.updateQueue,g===null?(g=E(),Sr.updateQueue=g,g.stores=[A]):(_=g.stores,_===null?g.stores=[A]:_.push(A))}function We(A,g,_,I){g.value=_,g.getSnapshot=I,He(g)&&tt(A)}function Je(A,g,_){return _(function(){He(g)&&tt(A)})}function He(A){var g=A.getSnapshot;A=A.value;try{var _=g();return!Ks(A,_)}catch{return!0}}function tt(A){var g=du(A,2);g!==null&&ju(g,A,2)}function at(A){var g=p();if(typeof A=="function"){var _=A;if(A=_(),kA){Xe(!0);try{_()}finally{Xe(!1)}}}return g.memoizedState=g.baseState=A,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Z,lastRenderedState:A},g}function yt(A,g,_,I){return A.baseState=_,ue(A,So,typeof I=="function"?I:Z)}function lt(A,g,_,I,Q){if(vu(A))throw Error(i(485));if(A=g.action,A!==null){var X={payload:Q,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_e){X.listeners.push(_e)}};Re.T!==null?_(!0):X.isTransition=!1,I(X),_=g.pending,_===null?(X.next=g.pending=X,vt(g,X)):(X.next=_.next,g.pending=_.next=X)}}function vt(A,g){var _=g.action,I=g.payload,Q=A.state;if(g.isTransition){var X=Re.T,_e={};Re.T=_e;try{var Ve=_(Q,I),Mt=Re.S;Mt!==null&&Mt(_e,Ve),bt(A,g,Ve)}catch($t){Ot(A,g,$t)}finally{X!==null&&_e.types!==null&&(X.types=_e.types),Re.T=X}}else try{X=_(Q,I),bt(A,g,X)}catch($t){Ot(A,g,$t)}}function bt(A,g,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(I){ct(A,g,I)},function(I){return Ot(A,g,I)}):ct(A,g,_)}function ct(A,g,_){g.status="fulfilled",g.value=_,Qt(g),A.state=_,g=A.pending,g!==null&&(_=g.next,_===g?A.pending=null:(_=_.next,g.next=_,vt(A,_)))}function Ot(A,g,_){var I=A.pending;if(A.pending=null,I!==null){I=I.next;do g.status="rejected",g.reason=_,Qt(g),g=g.next;while(g!==I)}A.action=null}function Qt(A){A=A.listeners;for(var g=0;g<A.length;g++)(0,A[g])()}function Kt(A,g){return g}function jt(A,g){if(Wr){var _=As.formState;if(_!==null){e:{var I=Sr;if(Wr){if(uo){t:{for(var Q=uo,X=pu;Q.nodeType!==8;){if(!X){Q=null;break t}if(Q=Nc(Q.nextSibling),Q===null){Q=null;break t}}X=Q.data,Q=X==="F!"||X==="F"?Q:null}if(Q){uo=Nc(Q.nextSibling),I=Q.data==="F!";break e}}ku(I)}I=!1}I&&(g=_[0])}}return _=p(),_.memoizedState=_.baseState=g,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kt,lastRenderedState:g},_.queue=I,_=Ns.bind(null,Sr,I),I.dispatch=_,I=at(!1),X=Ku.bind(null,Sr,!1,I.queue),I=p(),Q={state:g,dispatch:null,action:A,pending:null},I.queue=Q,_=lt.bind(null,Sr,Q,X,_),Q.dispatch=_,I.memoizedState=A,[g,_,!1]}function Wt(A){var g=C();return kn(g,So,A)}function kn(A,g,_){if(g=ue(A,g,Kt)[0],A=re(Z)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var I=T(g)}catch(_e){throw _e===jd?Lf:_e}else I=g;g=C();var Q=g.queue,X=Q.dispatch;return _!==g.memoizedState&&(Sr.flags|=2048,Xn(9,{destroy:void 0},Tn.bind(null,Q,_),null)),[I,X,A]}function Tn(A,g){A.action=g}function ln(A){var g=C(),_=So;if(_!==null)return kn(g,_,A);C(),g=g.memoizedState,_=C();var I=_.queue.dispatch;return _.memoizedState=A,[g,I,!1]}function Xn(A,g,_,I){return A={tag:A,create:_,deps:I,inst:g,next:null},g=Sr.updateQueue,g===null&&(g=E(),Sr.updateQueue=g),_=g.lastEffect,_===null?g.lastEffect=A.next=A:(I=_.next,_.next=A,A.next=I,g.lastEffect=A),A}function Hi(){return C().memoizedState}function Er(A,g,_,I){var Q=p();Sr.flags|=A,Q.memoizedState=Xn(1|g,{destroy:void 0},_,I===void 0?null:I)}function zo(A,g,_,I){var Q=C();I=I===void 0?null:I;var X=Q.memoizedState.inst;So!==null&&I!==null&&Wd(I,So.memoizedState.deps)?Q.memoizedState=Xn(g,X,_,I):(Sr.flags|=A,Q.memoizedState=Xn(1|g,X,_,I))}function Wo(A,g){Er(8390656,8,A,g)}function dr(A,g){zo(2048,8,A,g)}function Jo(A){Sr.flags|=4;var g=Sr.updateQueue;if(g===null)g=E(),Sr.updateQueue=g,g.events=[A];else{var _=g.events;_===null?g.events=[A]:_.push(A)}}function Da(A){var g=C().memoizedState;return Jo({ref:g,nextImpl:A}),function(){if((xo&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function Is(A,g){return zo(4,2,A,g)}function Pa(A,g){return zo(4,4,A,g)}function js(A,g){if(typeof g=="function"){A=A();var _=g(A);return function(){typeof _=="function"?_():g(null)}}if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function ia(A,g,_){_=_!=null?_.concat([A]):null,zo(4,4,js.bind(null,g,A),_)}function ga(){}function DA(A,g){var _=C();g=g===void 0?null:g;var I=_.memoizedState;return g!==null&&Wd(g,I[1])?I[0]:(_.memoizedState=[A,g],A)}function ra(A,g){var _=C();g=g===void 0?null:g;var I=_.memoizedState;if(g!==null&&Wd(g,I[1]))return I[0];if(I=A(),kA){Xe(!0);try{A()}finally{Xe(!1)}}return _.memoizedState=[I,g],I}function cl(A,g,_){return _===void 0||(co&1073741824)!==0&&(go&261930)===0?A.memoizedState=g:(A.memoizedState=_,A=kv(),Sr.lanes|=A,Vf|=A,_)}function dh(A,g,_,I){return Ks(_,g)?_:ri.current!==null?(A=cl(A,_,I),Ks(A,g)||(sa=!0),A):(co&42)===0||(co&1073741824)!==0&&(go&261930)===0?(sa=!0,A.memoizedState=_):(A=kv(),Sr.lanes|=A,Vf|=A,g)}function rd(A,g,_,I,Q){var X=qe.p;qe.p=X!==0&&8>X?X:8;var _e=Re.T,Ve={};Re.T=Ve,Ku(A,!1,g,_);try{var Mt=Q(),$t=Re.S;if($t!==null&&$t(Ve,Mt),Mt!==null&&typeof Mt=="object"&&typeof Mt.then=="function"){var un=mv(Mt,I);Uc(A,g,un,zc(A))}else Uc(A,g,I,zc(A))}catch(gn){Uc(A,g,{then:function(){},status:"rejected",reason:gn},zc())}finally{qe.p=X,_e!==null&&Ve.types!==null&&(_e.types=Ve.types),Re.T=_e}}function od(){}function yu(A,g,_,I){if(A.tag!==5)throw Error(i(476));var Q=Ml(A).queue;rd(A,Q,g,nt,_===null?od:function(){return Al(A),_(I)})}function Ml(A){var g=A.memoizedState;if(g!==null)return g;g={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Z,lastRenderedState:nt},next:null};var _={};return g.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Z,lastRenderedState:_},next:null},A.memoizedState=g,A=A.alternate,A!==null&&(A.memoizedState=g),g}function Al(A){var g=Ml(A);g.next===null&&(g=A.alternate.memoizedState),Uc(A,g.next.queue,{},zc())}function Pc(){return al(Xt)}function sd(){return C().memoizedState}function ys(){return C().memoizedState}function oa(A){for(var g=A.return;g!==null;){switch(g.tag){case 24:case 3:var _=zc();A=Jh(_);var I=Pu(g,A,_);I!==null&&(ju(I,g,_),ed(I,g,_)),g={cache:zs()},A.payload=g;return}g=g.return}}function Lu(A,g,_){var I=zc();_={lane:I,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},vu(A)?Lc(g,_):(_=nh(A,g,_,I),_!==null&&(ju(_,A,I),Rp(_,g,I)))}function Ns(A,g,_){var I=zc();Uc(A,g,_,I)}function Uc(A,g,_,I){var Q={lane:I,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(vu(A))Lc(g,Q);else{var X=A.alternate;if(A.lanes===0&&(X===null||X.lanes===0)&&(X=g.lastRenderedReducer,X!==null))try{var _e=g.lastRenderedState,Ve=X(_e,_);if(Q.hasEagerState=!0,Q.eagerState=Ve,Ks(Ve,_e))return Nh(A,g,Q,0),As===null&&Iu(),!1}catch{}finally{}if(_=nh(A,g,Q,I),_!==null)return ju(_,A,I),Rp(_,g,I),!0}return!1}function Ku(A,g,_,I){if(I={lane:2,revertLane:$l(),gesture:null,action:I,hasEagerState:!1,eagerState:null,next:null},vu(A)){if(g)throw Error(i(479))}else g=nh(A,_,I,2),g!==null&&ju(g,A,2)}function vu(A){var g=A.alternate;return A===Sr||g!==null&&g===Sr}function Lc(A,g){IA=nd=!0;var _=A.pending;_===null?g.next=g:(g.next=_.next,_.next=g),A.pending=g}function Rp(A,g,_){if((_&4194048)!==0){var I=g.lanes;I&=A.pendingLanes,_|=I,g.lanes=_,fi(A,_)}}var fh={readContext:al,use:U,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useLayoutEffect:gs,useInsertionEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useSyncExternalStore:gs,useId:gs,useHostTransitionStatus:gs,useFormState:gs,useActionState:gs,useOptimistic:gs,useMemoCache:gs,useCacheRefresh:gs};fh.useEffectEvent=gs;var ph={readContext:al,use:U,useCallback:function(A,g){return p().memoizedState=[A,g===void 0?null:g],A},useContext:al,useEffect:Wo,useImperativeHandle:function(A,g,_){_=_!=null?_.concat([A]):null,Er(4194308,4,js.bind(null,g,A),_)},useLayoutEffect:function(A,g){return Er(4194308,4,A,g)},useInsertionEffect:function(A,g){Er(4,2,A,g)},useMemo:function(A,g){var _=p();g=g===void 0?null:g;var I=A();if(kA){Xe(!0);try{A()}finally{Xe(!1)}}return _.memoizedState=[I,g],I},useReducer:function(A,g,_){var I=p();if(_!==void 0){var Q=_(g);if(kA){Xe(!0);try{_(g)}finally{Xe(!1)}}}else Q=g;return I.memoizedState=I.baseState=Q,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:Q},I.queue=A,A=A.dispatch=Lu.bind(null,Sr,A),[I.memoizedState,A]},useRef:function(A){var g=p();return A={current:A},g.memoizedState=A},useState:function(A){A=at(A);var g=A.queue,_=Ns.bind(null,Sr,g);return g.dispatch=_,[A.memoizedState,_]},useDebugValue:ga,useDeferredValue:function(A,g){var _=p();return cl(_,A,g)},useTransition:function(){var A=at(!1);return A=rd.bind(null,Sr,A.queue,!0,!1),p().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,g,_){var I=Sr,Q=p();if(Wr){if(_===void 0)throw Error(i(407));_=_()}else{if(_=g(),As===null)throw Error(i(349));(go&127)!==0||Ue(I,g,_)}Q.memoizedState=_;var X={value:_,getSnapshot:g};return Q.queue=X,Wo(Je.bind(null,I,X,A),[A]),I.flags|=2048,Xn(9,{destroy:void 0},We.bind(null,I,X,_,g),null),_},useId:function(){var A=p(),g=As.identifierPrefix;if(Wr){var _=_l,I=iA;_=(I&~(1<<32-fe(I)-1)).toString(32)+_,g="_"+g+"R_"+_,_=TA++,0<_&&(g+="H"+_.toString(32)),g+="_"}else _=Gd++,g="_"+g+"r_"+_.toString(32)+"_";return A.memoizedState=g},useHostTransitionStatus:Pc,useFormState:jt,useActionState:jt,useOptimistic:function(A){var g=p();g.memoizedState=g.baseState=A;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=_,g=Ku.bind(null,Sr,!0,_),_.dispatch=g,[A,g]},useMemoCache:q,useCacheRefresh:function(){return p().memoizedState=oa.bind(null,Sr)},useEffectEvent:function(A){var g=p(),_={impl:A};return g.memoizedState=_,function(){if((xo&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},lA={readContext:al,use:U,useCallback:DA,useContext:al,useEffect:dr,useImperativeHandle:ia,useInsertionEffect:Is,useLayoutEffect:Pa,useMemo:ra,useReducer:re,useRef:Hi,useState:function(){return re(Z)},useDebugValue:ga,useDeferredValue:function(A,g){var _=C();return dh(_,So.memoizedState,A,g)},useTransition:function(){var A=re(Z)[0],g=C().memoizedState;return[typeof A=="boolean"?A:T(A),g]},useSyncExternalStore:ge,useId:sd,useHostTransitionStatus:Pc,useFormState:Wt,useActionState:Wt,useOptimistic:function(A,g){var _=C();return yt(_,So,A,g)},useMemoCache:q,useCacheRefresh:ys};lA.useEffectEvent=Da;var Nf={readContext:al,use:U,useCallback:DA,useContext:al,useEffect:dr,useImperativeHandle:ia,useInsertionEffect:Is,useLayoutEffect:Pa,useMemo:ra,useReducer:Ce,useRef:Hi,useState:function(){return Ce(Z)},useDebugValue:ga,useDeferredValue:function(A,g){var _=C();return So===null?cl(_,A,g):dh(_,So.memoizedState,A,g)},useTransition:function(){var A=Ce(Z)[0],g=C().memoizedState;return[typeof A=="boolean"?A:T(A),g]},useSyncExternalStore:ge,useId:sd,useHostTransitionStatus:Pc,useFormState:ln,useActionState:ln,useOptimistic:function(A,g){var _=C();return So!==null?yt(_,So,A,g):(_.baseState=A,[A,_.queue.dispatch])},useMemoCache:q,useCacheRefresh:ys};Nf.useEffectEvent=Da;function Gf(A,g,_,I){g=A.memoizedState,_=_(I,g),_=_==null?g:v({},g,_),A.memoizedState=_,A.lanes===0&&(A.updateQueue.baseState=_)}var mh={enqueueSetState:function(A,g,_){A=A._reactInternals;var I=zc(),Q=Jh(I);Q.payload=g,_!=null&&(Q.callback=_),g=Pu(A,Q,I),g!==null&&(ju(g,A,I),ed(g,A,I))},enqueueReplaceState:function(A,g,_){A=A._reactInternals;var I=zc(),Q=Jh(I);Q.tag=1,Q.payload=g,_!=null&&(Q.callback=_),g=Pu(A,Q,I),g!==null&&(ju(g,A,I),ed(g,A,I))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var _=zc(),I=Jh(_);I.tag=2,g!=null&&(I.callback=g),g=Pu(A,I,_),g!==null&&(ju(g,A,_),ed(g,A,_))}};function Zm(A,g,_,I,Q,X,_e){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(I,X,_e):g.prototype&&g.prototype.isPureReactComponent?!JA(_,I)||!JA(Q,X):!0}function uA(A,g,_,I){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,I),g.state!==A&&mh.enqueueReplaceState(g,g.state,null)}function Ya(A,g){var _=g;if("ref"in g){_={};for(var I in g)I!=="ref"&&(_[I]=g[I])}if(A=A.defaultProps){_===g&&(_=v({},_));for(var Q in A)_[Q]===void 0&&(_[Q]=A[Q])}return _}function I1(A){CA(A)}function gv(A){console.error(A)}function k1(A){CA(A)}function Xm(A,g){try{var _=A.onUncaughtError;_(g.value,{componentStack:g.stack})}catch(I){setTimeout(function(){throw I})}}function b0(A,g,_){try{var I=A.onCaughtError;I(_.value,{componentStack:_.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(Q){setTimeout(function(){throw Q})}}function T1(A,g,_){return _=Jh(_),_.tag=3,_.payload={element:null},_.callback=function(){Xm(A,g)},_}function ad(A){return A=Jh(A),A.tag=3,A}function Jm(A,g,_,I){var Q=_.type.getDerivedStateFromError;if(typeof Q=="function"){var X=I.value;A.payload=function(){return Q(X)},A.callback=function(){b0(g,_,I)}}var _e=_.stateNode;_e!==null&&typeof _e.componentDidCatch=="function"&&(A.callback=function(){b0(g,_,I),typeof Q!="function"&&(Jd===null?Jd=new Set([this]):Jd.add(this));var Ve=I.stack;this.componentDidCatch(I.value,{componentStack:Ve!==null?Ve:""})})}function yv(A,g,_,I,Q){if(_.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(g=_.alternate,g!==null&&cc(g,_,Q,!0),_=us.current,_!==null){switch(_.tag){case 31:case 13:return hc===null?V1():_.alternate===null&&va===0&&(va=3),_.flags&=-257,_.flags|=65536,_.lanes=Q,I===Xh?_.flags|=16384:(g=_.updateQueue,g===null?_.updateQueue=new Set([I]):g.add(I),P0(A,I,Q)),!1;case 22:return _.flags|=65536,I===Xh?_.flags|=16384:(g=_.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([I])},_.updateQueue=g):(_=g.retryQueue,_===null?g.retryQueue=new Set([I]):_.add(I)),P0(A,I,Q)),!1}throw Error(i(435,_.tag))}return P0(A,I,Q),V1(),!1}if(Wr)return g=us.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=Q,I!==as&&(A=Error(i(422),{cause:I}),oA(jl(A,_)))):(I!==as&&(g=Error(i(423),{cause:I}),oA(jl(g,_))),A=A.current.alternate,A.flags|=65536,Q&=-Q,A.lanes|=Q,I=jl(I,_),Q=T1(A.stateNode,I,Q),zf(A,Q),va!==4&&(va=2)),!1;var X=Error(i(520),{cause:I});if(X=jl(X,_),qp===null?qp=[X]:qp.push(X),va!==4&&(va=2),g===null)return!0;I=jl(I,_),_=g;do{switch(_.tag){case 3:return _.flags|=65536,A=Q&-Q,_.lanes|=A,A=T1(_.stateNode,I,A),zf(_,A),!1;case 1:if(g=_.type,X=_.stateNode,(_.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Jd===null||!Jd.has(X))))return _.flags|=65536,Q&=-Q,_.lanes|=Q,Q=ad(Q),Jm(Q,A,_,I),zf(_,Q),!1}_=_.return}while(_!==null);return!1}var Dp=Error(i(461)),sa=!1;function ya(A,g,_,I){g.child=A===null?Vm(g,null,_,I):lh(g,A.child,_,I)}function qi(A,g,_,I,Q){_=_.render;var X=g.ref;if("ref"in I){var _e={};for(var Ve in I)Ve!=="ref"&&(_e[Ve]=I[Ve])}else _e=I;return Vh(g),I=RA(A,g,_,_e,X,Q),Ve=qd(),A!==null&&!sa?(O(A,g,Q),UA(A,g,Q)):(Wr&&Ve&&rA(g),g.flags|=1,ya(A,g,I,Q),g.child)}function C0(A,g,_,I,Q){if(A===null){var X=_.type;return typeof X=="function"&&!xA(X)&&X.defaultProps===void 0&&_.compare===null?(g.tag=15,g.type=X,Yd(A,g,X,I,Q)):(A=qm(_.type,null,I,g,g.mode,Q),A.ref=g.ref,A.return=g,g.child=A)}if(X=A.child,!U1(A,Q)){var _e=X.memoizedProps;if(_=_.compare,_=_!==null?_:JA,_(_e,I)&&A.ref===g.ref)return UA(A,g,Q)}return g.flags|=1,A=zl(X,I),A.ref=g.ref,A.return=g,g.child=A}function Yd(A,g,_,I,Q){if(A!==null){var X=A.memoizedProps;if(JA(X,I)&&A.ref===g.ref)if(sa=!1,g.pendingProps=I=X,U1(A,Q))(A.flags&131072)!==0&&(sa=!0);else return g.lanes=A.lanes,UA(A,g,Q)}return eg(A,g,_,I,Q)}function gh(A,g,_,I){var Q=I.children,X=A!==null?A.memoizedState:null;if(A===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),I.mode==="hidden"){if((g.flags&128)!==0){if(X=X!==null?X.baseLanes|_:_,A!==null){for(I=g.child=A.child,Q=0;I!==null;)Q=Q|I.lanes|I.childLanes,I=I.sibling;I=Q&~X}else I=0,g.child=null;return R1(A,g,X,_,I)}if((_&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},A!==null&&Rc(g,X!==null?X.cachePool:null),X!==null?td(g,X):qa(),B1(g);else return I=g.lanes=536870912,R1(A,g,X!==null?X.baseLanes|_:_,_,I)}else X!==null?(Rc(g,X.cachePool),td(g,X),xl(),g.memoizedState=null):(A!==null&&Rc(g,null),qa(),xl());return ya(A,g,Q,_),g.child}function Wf(A,g){return A!==null&&A.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function R1(A,g,_,I,Q){var X=aA();return X=X===null?null:{parent:ls._currentValue,pool:X},g.memoizedState={baseLanes:_,cachePool:X},A!==null&&Rc(g,null),qa(),B1(g),A!==null&&cc(A,g,I,!0),g.childLanes=Q,null}function _0(A,g){return g=M0({mode:g.mode,children:g.children},A.mode),g.ref=A.ref,A.child=g,g.return=A,g}function bu(A,g,_){return lh(g,A.child,null,_),A=_0(g,g.pendingProps),A.flags|=2,Uu(g),g.memoizedState=null,A}function Xx(A,g,_){var I=g.pendingProps,Q=(g.flags&128)!==0;if(g.flags&=-129,A===null){if(Wr){if(I.mode==="hidden")return A=_0(g,I),g.lanes=536870912,Wf(null,A);if(jf(g),(A=uo)?(A=OC(A,pu),A=A!==null&&A.data==="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:Tc!==null?{id:iA,overflow:_l}:null,retryLane:536870912,hydrationErrors:null},_=Wh(A),_.return=g,g.child=_,na=g,uo=null)):A=null,A===null)throw ku(g);return g.lanes=536870912,null}return _0(g,I)}var X=A.memoizedState;if(X!==null){var _e=X.dehydrated;if(jf(g),Q)if(g.flags&256)g.flags&=-257,g=bu(A,g,_);else if(g.memoizedState!==null)g.child=A.child,g.flags|=128,g=null;else throw Error(i(558));else if(sa||cc(A,g,_,!1),Q=(_&A.childLanes)!==0,sa||Q){if(I=As,I!==null&&(_e=Si(I,_),_e!==0&&_e!==X.retryLane))throw X.retryLane=_e,du(A,_e),ju(I,A,_e),Dp;V1(),g=bu(A,g,_)}else A=X.treeContext,uo=Nc(_e.nextSibling),na=g,Wr=!0,MA=null,pu=!1,A!==null&&Yh(g,A),g=_0(g,I),g.flags|=4096;return g}return A=zl(A.child,{mode:I.mode,children:I.children}),A.ref=g.ref,g.child=A,A.return=g,A}function x0(A,g){var _=g.ref;if(_===null)A!==null&&A.ref!==null&&(g.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(A===null||A.ref!==_)&&(g.flags|=4194816)}}function eg(A,g,_,I,Q){return Vh(g),_=RA(A,g,_,I,void 0,Q),I=qd(),A!==null&&!sa?(O(A,g,Q),UA(A,g,Q)):(Wr&&I&&rA(g),g.flags|=1,ya(A,g,_,Q),g.child)}function vv(A,g,_,I,Q,X){return Vh(g),g.updateQueue=null,_=Qd(g,I,_,Q),Tp(A),I=qd(),A!==null&&!sa?(O(A,g,X),UA(A,g,X)):(Wr&&I&&rA(g),g.flags|=1,ya(A,g,_,X),g.child)}function D1(A,g,_,I,Q){if(Vh(g),g.stateNode===null){var X=cr,_e=_.contextType;typeof _e=="object"&&_e!==null&&(X=al(_e)),X=new _(I,X),g.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=mh,g.stateNode=X,X._reactInternals=g,X=g.stateNode,X.props=I,X.state=g.memoizedState,X.refs={},ll(g),_e=_.contextType,X.context=typeof _e=="object"&&_e!==null?al(_e):cr,X.state=g.memoizedState,_e=_.getDerivedStateFromProps,typeof _e=="function"&&(Gf(g,_,_e,I),X.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(_e=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),_e!==X.state&&mh.enqueueReplaceState(X,X.state,null),ch(g,I,X,Q),uh(),X.state=g.memoizedState),typeof X.componentDidMount=="function"&&(g.flags|=4194308),I=!0}else if(A===null){X=g.stateNode;var Ve=g.memoizedProps,Mt=Ya(_,Ve);X.props=Mt;var $t=X.context,un=_.contextType;_e=cr,typeof un=="object"&&un!==null&&(_e=al(un));var gn=_.getDerivedStateFromProps;un=typeof gn=="function"||typeof X.getSnapshotBeforeUpdate=="function",Ve=g.pendingProps!==Ve,un||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(Ve||$t!==_e)&&uA(g,X,I,_e),Dc=!1;var Jt=g.memoizedState;X.state=Jt,ch(g,I,X,Q),uh(),$t=g.memoizedState,Ve||Jt!==$t||Dc?(typeof gn=="function"&&(Gf(g,_,gn,I),$t=g.memoizedState),(Mt=Dc||Zm(g,_,Mt,I,Jt,$t,_e))?(un||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(g.flags|=4194308)):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=$t),X.props=I,X.state=$t,X.context=_e,I=Mt):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{X=g.stateNode,wo(A,g),_e=g.memoizedProps,un=Ya(_,_e),X.props=un,gn=g.pendingProps,Jt=X.context,$t=_.contextType,Mt=cr,typeof $t=="object"&&$t!==null&&(Mt=al($t)),Ve=_.getDerivedStateFromProps,($t=typeof Ve=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(_e!==gn||Jt!==Mt)&&uA(g,X,I,Mt),Dc=!1,Jt=g.memoizedState,X.state=Jt,ch(g,I,X,Q),uh();var on=g.memoizedState;_e!==gn||Jt!==on||Dc||A!==null&&A.dependencies!==null&&oh(A.dependencies)?(typeof Ve=="function"&&(Gf(g,_,Ve,I),on=g.memoizedState),(un=Dc||Zm(g,_,un,I,Jt,on,Mt)||A!==null&&A.dependencies!==null&&oh(A.dependencies))?($t||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(I,on,Mt),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(I,on,Mt)),typeof X.componentDidUpdate=="function"&&(g.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof X.componentDidUpdate!="function"||_e===A.memoizedProps&&Jt===A.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||_e===A.memoizedProps&&Jt===A.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=on),X.props=I,X.state=on,X.context=Mt,I=un):(typeof X.componentDidUpdate!="function"||_e===A.memoizedProps&&Jt===A.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||_e===A.memoizedProps&&Jt===A.memoizedState||(g.flags|=1024),I=!1)}return X=I,x0(A,g),I=(g.flags&128)!==0,X||I?(X=g.stateNode,_=I&&typeof _.getDerivedStateFromError!="function"?null:X.render(),g.flags|=1,A!==null&&I?(g.child=lh(g,A.child,null,Q),g.child=lh(g,null,_,Q)):ya(A,g,_,Q),g.memoizedState=X.state,A=g.child):A=UA(A,g,Q),A}function lC(A,g,_,I){return $e(),g.flags|=256,ya(A,g,_,I),g.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function P1(A){return{baseLanes:A,cachePool:Jn()}}function PA(A,g,_){return A=A!==null?A.childLanes&~_:0,g&&(A|=cA),A}function Fu(A,g,_){var I=g.pendingProps,Q=!1,X=(g.flags&128)!==0,_e;if((_e=X)||(_e=A!==null&&A.memoizedState===null?!1:(Bs.current&2)!==0),_e&&(Q=!0,g.flags&=-129),_e=(g.flags&32)!==0,g.flags&=-33,A===null){if(Wr){if(Q?ul(g):xl(),(A=uo)?(A=OC(A,pu),A=A!==null&&A.data!=="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:Tc!==null?{id:iA,overflow:_l}:null,retryLane:536870912,hydrationErrors:null},_=Wh(A),_.return=g,g.child=_,na=g,uo=null)):A=null,A===null)throw ku(g);return _h(A)?g.lanes=32:g.lanes=536870912,null}var Ve=I.children;return I=I.fallback,Q?(xl(),Q=g.mode,Ve=M0({mode:"hidden",children:Ve},Q),I=Gh(I,Q,_,null),Ve.return=g,I.return=g,Ve.sibling=I,g.child=Ve,I=g.child,I.memoizedState=P1(_),I.childLanes=PA(A,_e,_),g.memoizedState=bv,Wf(null,I)):(ul(g),Pp(g,Ve))}var Mt=A.memoizedState;if(Mt!==null&&(Ve=Mt.dehydrated,Ve!==null)){if(X)g.flags&256?(ul(g),g.flags&=-257,g=Up(A,g,_)):g.memoizedState!==null?(xl(),g.child=A.child,g.flags|=128,g=null):(xl(),Ve=I.fallback,Q=g.mode,I=M0({mode:"visible",children:I.children},Q),Ve=Gh(Ve,Q,_,null),Ve.flags|=2,I.return=g,Ve.return=g,I.sibling=Ve,g.child=I,lh(g,A.child,null,_),I=g.child,I.memoizedState=P1(_),I.childLanes=PA(A,_e,_),g.memoizedState=bv,g=Wf(null,I));else if(ul(g),_h(Ve)){if(_e=Ve.nextSibling&&Ve.nextSibling.dataset,_e)var $t=_e.dgst;_e=$t,I=Error(i(419)),I.stack="",I.digest=_e,oA({value:I,source:null,stack:null}),g=Up(A,g,_)}else if(sa||cc(A,g,_,!1),_e=(_&A.childLanes)!==0,sa||_e){if(_e=As,_e!==null&&(I=Si(_e,_),I!==0&&I!==Mt.retryLane))throw Mt.retryLane=I,du(A,I),ju(_e,A,I),Dp;Ay(Ve)||V1(),g=Up(A,g,_)}else Ay(Ve)?(g.flags|=192,g.child=A.child,g=null):(A=Mt.treeContext,uo=Nc(Ve.nextSibling),na=g,Wr=!0,MA=null,pu=!1,A!==null&&Yh(g,A),g=Pp(g,I.children),g.flags|=4096);return g}return Q?(xl(),Ve=I.fallback,Q=g.mode,Mt=A.child,$t=Mt.sibling,I=zl(Mt,{mode:"hidden",children:I.children}),I.subtreeFlags=Mt.subtreeFlags&65011712,$t!==null?Ve=zl($t,Ve):(Ve=Gh(Ve,Q,_,null),Ve.flags|=2),Ve.return=g,I.return=g,I.sibling=Ve,g.child=I,Wf(null,I),I=g.child,Ve=A.child.memoizedState,Ve===null?Ve=P1(_):(Q=Ve.cachePool,Q!==null?(Mt=ls._currentValue,Q=Q.parent!==Mt?{parent:Mt,pool:Mt}:Q):Q=Jn(),Ve={baseLanes:Ve.baseLanes|_,cachePool:Q}),I.memoizedState=Ve,I.childLanes=PA(A,_e,_),g.memoizedState=bv,Wf(A.child,I)):(ul(g),_=A.child,A=_.sibling,_=zl(_,{mode:"visible",children:I.children}),_.return=g,_.sibling=null,A!==null&&(_e=g.deletions,_e===null?(g.deletions=[A],g.flags|=16):_e.push(A)),g.child=_,g.memoizedState=null,_)}function Pp(A,g){return g=M0({mode:"visible",children:g},A.mode),g.return=A,A.child=g}function M0(A,g){return A=bl(22,A,null,g),A.lanes=0,A}function Up(A,g,_){return lh(g,A.child,null,_),A=Pp(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function tg(A,g,_){A.lanes|=g;var I=A.alternate;I!==null&&(I.lanes|=g),OA(A.return,g,_)}function Cu(A,g,_,I,Q,X){var _e=A.memoizedState;_e===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:_,tailMode:Q,treeForkCount:X}:(_e.isBackwards=g,_e.rendering=null,_e.renderingStartTime=0,_e.last=I,_e.tail=_,_e.tailMode=Q,_e.treeForkCount=X)}function Lp(A,g,_){var I=g.pendingProps,Q=I.revealOrder,X=I.tail;I=I.children;var _e=Bs.current,Ve=(_e&2)!==0;if(Ve?(_e=_e&1|2,g.flags|=128):_e&=1,we(Bs,_e),ya(A,g,I,_),I=Wr?Fs:0,!Ve&&A!==null&&(A.flags&128)!==0)e:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&tg(A,_,g);else if(A.tag===19)tg(A,_,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break e;for(;A.sibling===null;){if(A.return===null||A.return===g)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(Q){case"forwards":for(_=g.child,Q=null;_!==null;)A=_.alternate,A!==null&&cs(A)===null&&(Q=_),_=_.sibling;_=Q,_===null?(Q=g.child,g.child=null):(Q=_.sibling,_.sibling=null),Cu(g,!1,Q,_,X,I);break;case"backwards":case"unstable_legacy-backwards":for(_=null,Q=g.child,g.child=null;Q!==null;){if(A=Q.alternate,A!==null&&cs(A)===null){g.child=Q;break}A=Q.sibling,Q.sibling=_,_=Q,Q=A}Cu(g,!0,_,null,X,I);break;case"together":Cu(g,!1,null,null,void 0,I);break;default:g.memoizedState=null}return g.child}function UA(A,g,_){if(A!==null&&(g.dependencies=A.dependencies),Vf|=g.lanes,(_&g.childLanes)===0)if(A!==null){if(cc(A,g,_,!1),(_&g.childLanes)===0)return null}else return null;if(A!==null&&g.child!==A.child)throw Error(i(153));if(g.child!==null){for(A=g.child,_=zl(A,A.pendingProps),g.child=_,_.return=g;A.sibling!==null;)A=A.sibling,_=_.sibling=zl(A,A.pendingProps),_.return=g;_.sibling=null}return g.child}function U1(A,g){return(A.lanes&g)!==0?!0:(A=A.dependencies,!!(A!==null&&oh(A)))}function uC(A,g,_){switch(g.tag){case 3:Ke(g,g.stateNode.containerInfo),EA(g,ls,A.memoizedState.cache),$e();break;case 27:case 5:Se(g);break;case 4:Ke(g,g.stateNode.containerInfo);break;case 10:EA(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,jf(g),null;break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(ul(g),g.flags|=128,null):(_&g.child.childLanes)!==0?Fu(A,g,_):(ul(g),A=UA(A,g,_),A!==null?A.sibling:null);ul(g);break;case 19:var Q=(A.flags&128)!==0;if(I=(_&g.childLanes)!==0,I||(cc(A,g,_,!1),I=(_&g.childLanes)!==0),Q){if(I)return Lp(A,g,_);g.flags|=128}if(Q=g.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),we(Bs,Bs.current),I)break;return null;case 22:return g.lanes=0,gh(A,g,_,g.pendingProps);case 24:EA(g,ls,A.memoizedState.cache)}return UA(A,g,_)}function cC(A,g,_){if(A!==null)if(A.memoizedProps!==g.pendingProps)sa=!0;else{if(!U1(A,_)&&(g.flags&128)===0)return sa=!1,uC(A,g,_);sa=(A.flags&131072)!==0}else sa=!1,Wr&&(g.flags&1048576)!==0&&Ip(g,Fs,g.index);switch(g.lanes=0,g.tag){case 16:e:{var I=g.pendingProps;if(A=nr(g.elementType),g.type=A,typeof A=="function")xA(A)?(I=Ya(A,I),g.tag=1,g=D1(null,g,A,I,_)):(g.tag=0,g=eg(null,g,A,I,_));else{if(A!=null){var Q=A.$$typeof;if(Q===$){g.tag=11,g=qi(null,g,A,I,_);break e}else if(Q===z){g.tag=14,g=C0(null,g,A,I,_);break e}}throw g=Te(A)||A,Error(i(306,g,""))}}return g;case 0:return eg(A,g,g.type,g.pendingProps,_);case 1:return I=g.type,Q=Ya(I,g.pendingProps),D1(A,g,I,Q,_);case 3:e:{if(Ke(g,g.stateNode.containerInfo),A===null)throw Error(i(387));I=g.pendingProps;var X=g.memoizedState;Q=X.element,wo(A,g),ch(g,I,null,_);var _e=g.memoizedState;if(I=_e.cache,EA(g,ls,I),I!==X.cache&&kp(g,[ls],_,!0),uh(),I=_e.element,X.isDehydrated)if(X={element:I,isDehydrated:!1,cache:_e.cache},g.updateQueue.baseState=X,g.memoizedState=X,g.flags&256){g=lC(A,g,I,_);break e}else if(I!==Q){Q=jl(Error(i(424)),g),oA(Q),g=lC(A,g,I,_);break e}else{switch(A=g.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(uo=Nc(A.firstChild),na=g,Wr=!0,MA=null,pu=!0,_=Vm(g,null,I,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if($e(),I===Q){g=UA(A,g,_);break e}ya(A,g,I,_)}g=g.child}return g;case 26:return x0(A,g),A===null?(_=TC(g.type,null,g.pendingProps,null))?g.memoizedState=_:Wr||(_=g.type,A=g.pendingProps,I=j0(Ct.current).createElement(_),I[kr]=g,I[hn]=A,Ha(I,_,A),Ho(I),g.stateNode=I):g.memoizedState=TC(g.type,A.memoizedProps,g.pendingProps,A.memoizedState),null;case 27:return Se(g),A===null&&Wr&&(I=g.stateNode=BC(g.type,g.pendingProps,Ct.current),na=g,pu=!0,Q=uo,or(g.type)?(hy=Q,uo=Nc(I.firstChild)):uo=Q),ya(A,g,g.pendingProps.children,_),x0(A,g),A===null&&(g.flags|=4194304),g.child;case 5:return A===null&&Wr&&((Q=I=uo)&&(I=cy(I,g.type,g.pendingProps,pu),I!==null?(g.stateNode=I,na=g,uo=Nc(I.firstChild),pu=!1,Q=!0):Q=!1),Q||ku(g)),Se(g),Q=g.type,X=g.pendingProps,_e=A!==null?A.memoizedProps:null,I=X.children,of(Q,X)?I=null:_e!==null&&of(Q,_e)&&(g.flags|=32),g.memoizedState!==null&&(Q=RA(A,g,Hm,null,null,_),Xt._currentValue=Q),x0(A,g),ya(A,g,I,_),g.child;case 6:return A===null&&Wr&&((A=_=uo)&&(_=ts(_,g.pendingProps,pu),_!==null?(g.stateNode=_,na=g,uo=null,A=!0):A=!1),A||ku(g)),null;case 13:return Fu(A,g,_);case 4:return Ke(g,g.stateNode.containerInfo),I=g.pendingProps,A===null?g.child=lh(g,null,I,_):ya(A,g,I,_),g.child;case 11:return qi(A,g,g.type,g.pendingProps,_);case 7:return ya(A,g,g.pendingProps,_),g.child;case 8:return ya(A,g,g.pendingProps.children,_),g.child;case 12:return ya(A,g,g.pendingProps.children,_),g.child;case 10:return I=g.pendingProps,EA(g,g.type,I.value),ya(A,g,I.children,_),g.child;case 9:return Q=g.type._context,I=g.pendingProps.children,Vh(g),Q=al(Q),I=I(Q),g.flags|=1,ya(A,g,I,_),g.child;case 14:return C0(A,g,g.type,g.pendingProps,_);case 15:return Yd(A,g,g.type,g.pendingProps,_);case 19:return Lp(A,g,_);case 31:return Xx(A,g,_);case 22:return gh(A,g,_,g.pendingProps);case 24:return Vh(g),I=al(ls),A===null?(Q=aA(),Q===null&&(Q=As,X=zs(),Q.pooledCache=X,X.refCount++,X!==null&&(Q.pooledCacheLanes|=_),Q=X),g.memoizedState={parent:I,cache:Q},ll(g),EA(g,ls,Q)):((A.lanes&_)!==0&&(wo(A,g),ch(g,null,null,_),uh()),Q=A.memoizedState,X=g.memoizedState,Q.parent!==I?(Q={parent:I,cache:I},g.memoizedState=Q,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=Q),EA(g,ls,I)):(I=X.cache,EA(g,ls,I),I!==Q.cache&&kp(g,[ls],_,!0))),ya(A,g,g.pendingProps.children,_),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function $d(A){A.flags|=4}function L1(A,g,_,I,Q){if((g=(A.mode&32)!==0)&&(g=!1),g){if(A.flags|=16777216,(Q&335544128)===Q)if(A.stateNode.complete)A.flags|=8192;else if(k0())A.flags|=8192;else throw gu=Xh,BA}else A.flags&=-16777217}function Cv(A,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!Le(g))if(k0())A.flags|=8192;else throw gu=Xh,BA}function Kp(A,g){g!==null&&(A.flags|=4),A.flags&16384&&(g=A.tag!==22?Ln():536870912,A.lanes|=g,Qp|=g)}function ng(A,g){if(!Wr)switch(A.tailMode){case"hidden":g=A.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?A.tail=null:_.sibling=null;break;case"collapsed":_=A.tail;for(var I=null;_!==null;)_.alternate!==null&&(I=_),_=_.sibling;I===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:I.sibling=null}}function vs(A){var g=A.alternate!==null&&A.alternate.child===A.child,_=0,I=0;if(g)for(var Q=A.child;Q!==null;)_|=Q.lanes|Q.childLanes,I|=Q.subtreeFlags&65011712,I|=Q.flags&65011712,Q.return=A,Q=Q.sibling;else for(Q=A.child;Q!==null;)_|=Q.lanes|Q.childLanes,I|=Q.subtreeFlags,I|=Q.flags,Q.return=A,Q=Q.sibling;return A.subtreeFlags|=I,A.childLanes=_,g}function AC(A,g,_){var I=g.pendingProps;switch(rh(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(g),null;case 1:return vs(g),null;case 3:return _=g.stateNode,I=null,A!==null&&(I=A.memoizedState.cache),g.memoizedState.cache!==I&&(g.flags|=2048),sA(ls),Ie(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(A===null||A.child===null)&&(wA(g)?$d(g):A===null||A.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,uc())),vs(g),null;case 26:var Q=g.type,X=g.memoizedState;return A===null?($d(g),X!==null?(vs(g),Cv(g,X)):(vs(g),L1(g,Q,null,I,_))):X?X!==A.memoizedState?($d(g),vs(g),Cv(g,X)):(vs(g),g.flags&=-16777217):(A=A.memoizedProps,A!==I&&$d(g),vs(g),L1(g,Q,A,I,_)),null;case 27:if(Ge(g),_=Ct.current,Q=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==I&&$d(g);else{if(!I){if(g.stateNode===null)throw Error(i(166));return vs(g),null}A=At.current,wA(g)?Nl(g):(A=BC(Q,I,_),g.stateNode=A,$d(g))}return vs(g),null;case 5:if(Ge(g),Q=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==I&&$d(g);else{if(!I){if(g.stateNode===null)throw Error(i(166));return vs(g),null}if(X=At.current,wA(g))Nl(g);else{var _e=j0(Ct.current);switch(X){case 1:X=_e.createElementNS("http://www.w3.org/2000/svg",Q);break;case 2:X=_e.createElementNS("http://www.w3.org/1998/Math/MathML",Q);break;default:switch(Q){case"svg":X=_e.createElementNS("http://www.w3.org/2000/svg",Q);break;case"math":X=_e.createElementNS("http://www.w3.org/1998/Math/MathML",Q);break;case"script":X=_e.createElement("div"),X.innerHTML="<script><\/script>",X=X.removeChild(X.firstChild);break;case"select":X=typeof I.is=="string"?_e.createElement("select",{is:I.is}):_e.createElement("select"),I.multiple?X.multiple=!0:I.size&&(X.size=I.size);break;default:X=typeof I.is=="string"?_e.createElement(Q,{is:I.is}):_e.createElement(Q)}}X[kr]=g,X[hn]=I;e:for(_e=g.child;_e!==null;){if(_e.tag===5||_e.tag===6)X.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.tag!==27&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===g)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===g)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}g.stateNode=X;e:switch(Ha(X,Q,I),Q){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}I&&$d(g)}}return vs(g),L1(g,g.type,A===null?null:A.memoizedProps,g.pendingProps,_),null;case 6:if(A&&g.stateNode!=null)A.memoizedProps!==I&&$d(g);else{if(typeof I!="string"&&g.stateNode===null)throw Error(i(166));if(A=Ct.current,wA(g)){if(A=g.stateNode,_=g.memoizedProps,I=null,Q=na,Q!==null)switch(Q.tag){case 27:case 5:I=Q.memoizedProps}A[kr]=g,A=!!(A.nodeValue===_||I!==null&&I.suppressHydrationWarning===!0||Gv(A.nodeValue,_)),A||ku(g,!0)}else A=j0(A).createTextNode(I),A[kr]=g,g.stateNode=A}return vs(g),null;case 31:if(_=g.memoizedState,A===null||A.memoizedState!==null){if(I=wA(g),_!==null){if(A===null){if(!I)throw Error(i(318));if(A=g.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(557));A[kr]=g}else $e(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vs(g),A=!1}else _=uc(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=_),A=!0;if(!A)return g.flags&256?(Uu(g),g):(Uu(g),null);if((g.flags&128)!==0)throw Error(i(558))}return vs(g),null;case 13:if(I=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(Q=wA(g),I!==null&&I.dehydrated!==null){if(A===null){if(!Q)throw Error(i(318));if(Q=g.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(i(317));Q[kr]=g}else $e(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vs(g),Q=!1}else Q=uc(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=Q),Q=!0;if(!Q)return g.flags&256?(Uu(g),g):(Uu(g),null)}return Uu(g),(g.flags&128)!==0?(g.lanes=_,g):(_=I!==null,A=A!==null&&A.memoizedState!==null,_&&(I=g.child,Q=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(Q=I.alternate.memoizedState.cachePool.pool),X=null,I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(X=I.memoizedState.cachePool.pool),X!==Q&&(I.flags|=2048)),_!==A&&_&&(g.child.flags|=8192),Kp(g,g.updateQueue),vs(g),null);case 4:return Ie(),A===null&&iy(g.stateNode.containerInfo),vs(g),null;case 10:return sA(g.type),vs(g),null;case 19:if(ze(Bs),I=g.memoizedState,I===null)return vs(g),null;if(Q=(g.flags&128)!==0,X=I.rendering,X===null)if(Q)ng(I,!1);else{if(va!==0||A!==null&&(A.flags&128)!==0)for(A=g.child;A!==null;){if(X=cs(A),X!==null){for(g.flags|=128,ng(I,!1),A=X.updateQueue,g.updateQueue=A,Kp(g,A),g.subtreeFlags=0,A=_,_=g.child;_!==null;)m0(_,A),_=_.sibling;return we(Bs,Bs.current&1|2),Wr&&lc(g,I.treeForkCount),g.child}A=A.sibling}I.tail!==null&&Hn()>ud&&(g.flags|=128,Q=!0,ng(I,!1),g.lanes=4194304)}else{if(!Q)if(A=cs(X),A!==null){if(g.flags|=128,Q=!0,A=A.updateQueue,g.updateQueue=A,Kp(g,A),ng(I,!0),I.tail===null&&I.tailMode==="hidden"&&!X.alternate&&!Wr)return vs(g),null}else 2*Hn()-I.renderingStartTime>ud&&_!==536870912&&(g.flags|=128,Q=!0,ng(I,!1),g.lanes=4194304);I.isBackwards?(X.sibling=g.child,g.child=X):(A=I.last,A!==null?A.sibling=X:g.child=X,I.last=X)}return I.tail!==null?(A=I.tail,I.rendering=A,I.tail=A.sibling,I.renderingStartTime=Hn(),A.sibling=null,_=Bs.current,we(Bs,Q?_&1|2:_&1),Wr&&lc(g,I.treeForkCount),A):(vs(g),null);case 22:case 23:return Uu(g),hh(),I=g.memoizedState!==null,A!==null?A.memoizedState!==null!==I&&(g.flags|=8192):I&&(g.flags|=8192),I?(_&536870912)!==0&&(g.flags&128)===0&&(vs(g),g.subtreeFlags&6&&(g.flags|=8192)):vs(g),_=g.updateQueue,_!==null&&Kp(g,_.retryQueue),_=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),I=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(I=g.memoizedState.cachePool.pool),I!==_&&(g.flags|=2048),A!==null&&ze(Zh),null;case 24:return _=null,A!==null&&(_=A.memoizedState.cache),g.memoizedState.cache!==_&&(g.flags|=2048),sA(ls),vs(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function w0(A,g){switch(rh(g),g.tag){case 1:return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return sA(ls),Ie(),A=g.flags,(A&65536)!==0&&(A&128)===0?(g.flags=A&-65537|128,g):null;case 26:case 27:case 5:return Ge(g),null;case 31:if(g.memoizedState!==null){if(Uu(g),g.alternate===null)throw Error(i(340));$e()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 13:if(Uu(g),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(i(340));$e()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return ze(Bs),null;case 4:return Ie(),null;case 10:return sA(g.type),null;case 22:case 23:return Uu(g),hh(),A!==null&&ze(Zh),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 24:return sA(ls),null;case 25:return null;default:return null}}function K1(A,g){switch(rh(g),g.tag){case 3:sA(ls),Ie();break;case 26:case 27:case 5:Ge(g);break;case 4:Ie();break;case 31:g.memoizedState!==null&&Uu(g);break;case 13:Uu(g);break;case 19:ze(Bs);break;case 10:sA(g.type);break;case 22:case 23:Uu(g),hh(),A!==null&&ze(Zh);break;case 24:sA(ls)}}function Vd(A,g){try{var _=g.updateQueue,I=_!==null?_.lastEffect:null;if(I!==null){var Q=I.next;_=Q;do{if((_.tag&A)===A){I=void 0;var X=_.create,_e=_.inst;I=X(),_e.destroy=I}_=_.next}while(_!==Q)}}catch(Ve){Qo(g,g.return,Ve)}}function yh(A,g,_){try{var I=g.updateQueue,Q=I!==null?I.lastEffect:null;if(Q!==null){var X=Q.next;I=X;do{if((I.tag&A)===A){var _e=I.inst,Ve=_e.destroy;if(Ve!==void 0){_e.destroy=void 0,Q=g;var Mt=_,$t=Ve;try{$t()}catch(un){Qo(Q,Mt,un)}}}I=I.next}while(I!==X)}}catch(un){Qo(g,g.return,un)}}function ig(A){var g=A.updateQueue;if(g!==null){var _=A.stateNode;try{Ah(g,_)}catch(I){Qo(A,A.return,I)}}}function Hd(A,g,_){_.props=Ya(A.type,A.memoizedProps),_.state=A.memoizedState;try{_.componentWillUnmount()}catch(I){Qo(A,g,I)}}function ql(A,g){try{var _=A.ref;if(_!==null){switch(A.tag){case 26:case 27:case 5:var I=A.stateNode;break;case 30:I=A.stateNode;break;default:I=A.stateNode}typeof _=="function"?A.refCleanup=_(I):_.current=I}}catch(Q){Qo(A,g,Q)}}function zu(A,g){var _=A.ref,I=A.refCleanup;if(_!==null)if(typeof I=="function")try{I()}catch(Q){Qo(A,g,Q)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(Q){Qo(A,g,Q)}else _.current=null}function hC(A){var g=A.type,_=A.memoizedProps,I=A.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":_.autoFocus&&I.focus();break e;case"img":_.src?I.src=_.src:_.srcSet&&(I.srcset=_.srcSet)}}catch(Q){Qo(A,A.return,Q)}}function F1(A,g,_){try{var I=A.stateNode;Hp(I,A.type,_,g),I[hn]=g}catch(Q){Qo(A,A.return,Q)}}function dC(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&or(A.type)||A.tag===4}function _v(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||dC(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&or(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function xv(A,g,_){var I=A.tag;if(I===5||I===6)A=A.stateNode,g?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(A,g):(g=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,g.appendChild(A),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=Wa));else if(I!==4&&(I===27&&or(A.type)&&(_=A.stateNode,g=null),A=A.child,A!==null))for(xv(A,g,_),A=A.sibling;A!==null;)xv(A,g,_),A=A.sibling}function z1(A,g,_){var I=A.tag;if(I===5||I===6)A=A.stateNode,g?_.insertBefore(A,g):_.appendChild(A);else if(I!==4&&(I===27&&or(A.type)&&(_=A.stateNode),A=A.child,A!==null))for(z1(A,g,_),A=A.sibling;A!==null;)z1(A,g,_),A=A.sibling}function j1(A){var g=A.stateNode,_=A.memoizedProps;try{for(var I=A.type,Q=g.attributes;Q.length;)g.removeAttributeNode(Q[0]);Ha(g,I,_),g[kr]=A,g[hn]=_}catch(X){Qo(A,A.return,X)}}var Zd=!1,$a=!1,Fp=!1,fC=typeof WeakSet=="function"?WeakSet:Set,Qr=null;function rg(A,g){if(A=A.containerInfo,vg=ji,A=Nm(A),Gm(A)){if("selectionStart"in A)var _={start:A.selectionStart,end:A.selectionEnd};else e:{_=(_=A.ownerDocument)&&_.defaultView||window;var I=_.getSelection&&_.getSelection();if(I&&I.rangeCount!==0){_=I.anchorNode;var Q=I.anchorOffset,X=I.focusNode;I=I.focusOffset;try{_.nodeType,X.nodeType}catch{_=null;break e}var _e=0,Ve=-1,Mt=-1,$t=0,un=0,gn=A,Jt=null;t:for(;;){for(var on;gn!==_||Q!==0&&gn.nodeType!==3||(Ve=_e+Q),gn!==X||I!==0&&gn.nodeType!==3||(Mt=_e+I),gn.nodeType===3&&(_e+=gn.nodeValue.length),(on=gn.firstChild)!==null;)Jt=gn,gn=on;for(;;){if(gn===A)break t;if(Jt===_&&++$t===Q&&(Ve=_e),Jt===X&&++un===I&&(Mt=_e),(on=gn.nextSibling)!==null)break;gn=Jt,Jt=gn.parentNode}gn=on}_=Ve===-1||Mt===-1?null:{start:Ve,end:Mt}}else _=null}_=_||{start:0,end:0}}else _=null;for(ay={focusedElem:A,selectionRange:_},ji=!1,Qr=g;Qr!==null;)if(g=Qr,A=g.child,(g.subtreeFlags&1028)!==0&&A!==null)A.return=g,Qr=A;else for(;Qr!==null;){switch(g=Qr,X=g.alternate,A=g.flags,g.tag){case 0:if((A&4)!==0&&(A=g.updateQueue,A=A!==null?A.events:null,A!==null))for(_=0;_<A.length;_++)Q=A[_],Q.ref.impl=Q.nextImpl;break;case 11:case 15:break;case 1:if((A&1024)!==0&&X!==null){A=void 0,_=g,Q=X.memoizedProps,X=X.memoizedState,I=_.stateNode;try{var Ri=Ya(_.type,Q);A=I.getSnapshotBeforeUpdate(Ri,X),I.__reactInternalSnapshotBeforeUpdate=A}catch(sr){Qo(_,_.return,sr)}}break;case 3:if((A&1024)!==0){if(A=g.stateNode.containerInfo,_=A.nodeType,_===9)Zp(A);else if(_===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":Zp(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(i(163))}if(A=g.sibling,A!==null){A.return=g.return,Qr=A;break}Qr=g.return}}function N1(A,g,_){var I=_.flags;switch(_.tag){case 0:case 11:case 15:Xd(A,_),I&4&&Vd(5,_);break;case 1:if(Xd(A,_),I&4)if(A=_.stateNode,g===null)try{A.componentDidMount()}catch(_e){Qo(_,_.return,_e)}else{var Q=Ya(_.type,g.memoizedProps);g=g.memoizedState;try{A.componentDidUpdate(Q,g,A.__reactInternalSnapshotBeforeUpdate)}catch(_e){Qo(_,_.return,_e)}}I&64&&ig(_),I&512&&ql(_,_.return);break;case 3:if(Xd(A,_),I&64&&(A=_.updateQueue,A!==null)){if(g=null,_.child!==null)switch(_.child.tag){case 27:case 5:g=_.child.stateNode;break;case 1:g=_.child.stateNode}try{Ah(A,g)}catch(_e){Qo(_,_.return,_e)}}break;case 27:g===null&&I&4&&j1(_);case 26:case 5:Xd(A,_),g===null&&I&4&&hC(_),I&512&&ql(_,_.return);break;case 12:Xd(A,_);break;case 31:Xd(A,_),I&4&&zp(A,_);break;case 13:Xd(A,_),I&4&&G1(A,_),I&64&&(A=_.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(_=J1.bind(null,_),Vl(A,_))));break;case 22:if(I=_.memoizedState!==null||Zd,!I){g=g!==null&&g.memoizedState!==null||$a,Q=Zd;var X=$a;Zd=I,($a=g)&&!X?Kc(A,_,(_.subtreeFlags&8772)!==0):Xd(A,_),Zd=Q,$a=X}break;case 30:break;default:Xd(A,_)}}function og(A){var g=A.alternate;g!==null&&(A.alternate=null,og(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&gl(g)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var bs=null,Yl=!1;function ld(A,g,_){for(_=_.child;_!==null;)Mv(A,g,_),_=_.sibling}function Mv(A,g,_){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(xe,_)}catch{}switch(_.tag){case 26:$a||zu(_,g),ld(A,g,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:$a||zu(_,g);var I=bs,Q=Yl;or(_.type)&&(bs=_.stateNode,Yl=!1),ld(A,g,_),Cg(_.stateNode),bs=I,Yl=Q;break;case 5:$a||zu(_,g);case 6:if(I=bs,Q=Yl,bs=null,ld(A,g,_),bs=I,Yl=Q,bs!==null)if(Yl)try{(bs.nodeType===9?bs.body:bs.nodeName==="HTML"?bs.ownerDocument.body:bs).removeChild(_.stateNode)}catch(X){Qo(_,g,X)}else try{bs.removeChild(_.stateNode)}catch(X){Qo(_,g,X)}break;case 18:bs!==null&&(Yl?(A=bs,uy(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,_.stateNode),qu(A)):uy(bs,_.stateNode));break;case 4:I=bs,Q=Yl,bs=_.stateNode.containerInfo,Yl=!0,ld(A,g,_),bs=I,Yl=Q;break;case 0:case 11:case 14:case 15:yh(2,_,g),$a||yh(4,_,g),ld(A,g,_);break;case 1:$a||(zu(_,g),I=_.stateNode,typeof I.componentWillUnmount=="function"&&Hd(_,g,I)),ld(A,g,_);break;case 21:ld(A,g,_);break;case 22:$a=(I=$a)||_.memoizedState!==null,ld(A,g,_),$a=I;break;default:ld(A,g,_)}}function zp(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{qu(A)}catch(_){Qo(g,g.return,_)}}}function G1(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{qu(A)}catch(_){Qo(g,g.return,_)}}function sg(A){switch(A.tag){case 31:case 13:case 19:var g=A.stateNode;return g===null&&(g=A.stateNode=new fC),g;case 22:return A=A.stateNode,g=A._retryCache,g===null&&(g=A._retryCache=new fC),g;default:throw Error(i(435,A.tag))}}function jp(A,g){var _=sg(A);g.forEach(function(I){if(!_.has(I)){_.add(I);var Q=n2.bind(null,A,I);I.then(Q,Q)}})}function wl(A,g){var _=g.deletions;if(_!==null)for(var I=0;I<_.length;I++){var Q=_[I],X=A,_e=g,Ve=_e;e:for(;Ve!==null;){switch(Ve.tag){case 27:if(or(Ve.type)){bs=Ve.stateNode,Yl=!1;break e}break;case 5:bs=Ve.stateNode,Yl=!1;break e;case 3:case 4:bs=Ve.stateNode.containerInfo,Yl=!0;break e}Ve=Ve.return}if(bs===null)throw Error(i(160));Mv(X,_e,Q),bs=null,Yl=!1,X=Q.alternate,X!==null&&(X.return=null),Q.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)pC(g,A),g=g.sibling}var fc=null;function pC(A,g){var _=A.alternate,I=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:wl(g,A),Gs(A),I&4&&(yh(3,A,A.return),Vd(3,A),yh(5,A,A.return));break;case 1:wl(g,A),Gs(A),I&512&&($a||_===null||zu(_,_.return)),I&64&&Zd&&(A=A.updateQueue,A!==null&&(I=A.callbacks,I!==null&&(_=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=_===null?I:_.concat(I))));break;case 26:var Q=fc;if(wl(g,A),Gs(A),I&512&&($a||_===null||zu(_,_.return)),I&4){var X=_!==null?_.memoizedState:null;if(I=A.memoizedState,_===null)if(I===null)if(A.stateNode===null){e:{I=A.type,_=A.memoizedProps,Q=Q.ownerDocument||Q;t:switch(I){case"title":X=Q.getElementsByTagName("title")[0],(!X||X[Ei]||X[kr]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=Q.createElement(I),Q.head.insertBefore(X,Q.querySelector("head > title"))),Ha(X,I,_),X[kr]=A,Ho(X),I=X;break e;case"link":var _e=ce("link","href",Q).get(I+(_.href||""));if(_e){for(var Ve=0;Ve<_e.length;Ve++)if(X=_e[Ve],X.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&X.getAttribute("rel")===(_.rel==null?null:_.rel)&&X.getAttribute("title")===(_.title==null?null:_.title)&&X.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){_e.splice(Ve,1);break t}}X=Q.createElement(I),Ha(X,I,_),Q.head.appendChild(X);break;case"meta":if(_e=ce("meta","content",Q).get(I+(_.content||""))){for(Ve=0;Ve<_e.length;Ve++)if(X=_e[Ve],X.getAttribute("content")===(_.content==null?null:""+_.content)&&X.getAttribute("name")===(_.name==null?null:_.name)&&X.getAttribute("property")===(_.property==null?null:_.property)&&X.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&X.getAttribute("charset")===(_.charSet==null?null:_.charSet)){_e.splice(Ve,1);break t}}X=Q.createElement(I),Ha(X,I,_),Q.head.appendChild(X);break;default:throw Error(i(468,I))}X[kr]=A,Ho(X),I=X}A.stateNode=I}else Be(Q,A.type,A.stateNode);else A.stateNode=P(Q,I,A.memoizedProps);else X!==I?(X===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):X.count--,I===null?Be(Q,A.type,A.stateNode):P(Q,I,A.memoizedProps)):I===null&&A.stateNode!==null&&F1(A,A.memoizedProps,_.memoizedProps)}break;case 27:wl(g,A),Gs(A),I&512&&($a||_===null||zu(_,_.return)),_!==null&&I&4&&F1(A,A.memoizedProps,_.memoizedProps);break;case 5:if(wl(g,A),Gs(A),I&512&&($a||_===null||zu(_,_.return)),A.flags&32){Q=A.stateNode;try{To(Q,"")}catch(Ri){Qo(A,A.return,Ri)}}I&4&&A.stateNode!=null&&(Q=A.memoizedProps,F1(A,Q,_!==null?_.memoizedProps:Q)),I&1024&&(Fp=!0);break;case 6:if(wl(g,A),Gs(A),I&4){if(A.stateNode===null)throw Error(i(162));I=A.memoizedProps,_=A.stateNode;try{_.nodeValue=I}catch(Ri){Qo(A,A.return,Ri)}}break;case 3:if(ie=null,Q=fc,fc=N0(g.containerInfo),wl(g,A),fc=Q,Gs(A),I&4&&_!==null&&_.memoizedState.isDehydrated)try{qu(g.containerInfo)}catch(Ri){Qo(A,A.return,Ri)}Fp&&(Fp=!1,Qf(A));break;case 4:I=fc,fc=N0(A.stateNode.containerInfo),wl(g,A),Gs(A),fc=I;break;case 12:wl(g,A),Gs(A);break;case 31:wl(g,A),Gs(A),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,jp(A,I)));break;case 13:wl(g,A),Gs(A),A.child.flags&8192&&A.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(ug=Hn()),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,jp(A,I)));break;case 22:Q=A.memoizedState!==null;var Mt=_!==null&&_.memoizedState!==null,$t=Zd,un=$a;if(Zd=$t||Q,$a=un||Mt,wl(g,A),$a=un,Zd=$t,Gs(A),I&8192)e:for(g=A.stateNode,g._visibility=Q?g._visibility&-2:g._visibility|1,Q&&(_===null||Mt||Zd||$a||qf(A)),_=null,g=A;;){if(g.tag===5||g.tag===26){if(_===null){Mt=_=g;try{if(X=Mt.stateNode,Q)_e=X.style,typeof _e.setProperty=="function"?_e.setProperty("display","none","important"):_e.display="none";else{Ve=Mt.stateNode;var gn=Mt.memoizedProps.style,Jt=gn!=null&&gn.hasOwnProperty("display")?gn.display:null;Ve.style.display=Jt==null||typeof Jt=="boolean"?"":(""+Jt).trim()}}catch(Ri){Qo(Mt,Mt.return,Ri)}}}else if(g.tag===6){if(_===null){Mt=g;try{Mt.stateNode.nodeValue=Q?"":Mt.memoizedProps}catch(Ri){Qo(Mt,Mt.return,Ri)}}}else if(g.tag===18){if(_===null){Mt=g;try{var on=Mt.stateNode;Q?Nu(on,!0):Nu(Mt.stateNode,!1)}catch(Ri){Qo(Mt,Mt.return,Ri)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===A)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break e;for(;g.sibling===null;){if(g.return===null||g.return===A)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}I&4&&(I=A.updateQueue,I!==null&&(_=I.retryQueue,_!==null&&(I.retryQueue=null,jp(A,_))));break;case 19:wl(g,A),Gs(A),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,jp(A,I)));break;case 30:break;case 21:break;default:wl(g,A),Gs(A)}}function Gs(A){var g=A.flags;if(g&2){try{for(var _,I=A.return;I!==null;){if(dC(I)){_=I;break}I=I.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var Q=_.stateNode,X=_v(A);z1(A,X,Q);break;case 5:var _e=_.stateNode;_.flags&32&&(To(_e,""),_.flags&=-33);var Ve=_v(A);z1(A,Ve,_e);break;case 3:case 4:var Mt=_.stateNode.containerInfo,$t=_v(A);xv(A,$t,Mt);break;default:throw Error(i(161))}}catch(un){Qo(A,A.return,un)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function Qf(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var g=A;Qf(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),A=A.sibling}}function Xd(A,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)N1(A,g.alternate,g),g=g.sibling}function qf(A){for(A=A.child;A!==null;){var g=A;switch(g.tag){case 0:case 11:case 14:case 15:yh(4,g,g.return),qf(g);break;case 1:zu(g,g.return);var _=g.stateNode;typeof _.componentWillUnmount=="function"&&Hd(g,g.return,_),qf(g);break;case 27:Cg(g.stateNode);case 26:case 5:zu(g,g.return),qf(g);break;case 22:g.memoizedState===null&&qf(g);break;case 30:qf(g);break;default:qf(g)}A=A.sibling}}function Kc(A,g,_){for(_=_&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var I=g.alternate,Q=A,X=g,_e=X.flags;switch(X.tag){case 0:case 11:case 15:Kc(Q,X,_),Vd(4,X);break;case 1:if(Kc(Q,X,_),I=X,Q=I.stateNode,typeof Q.componentDidMount=="function")try{Q.componentDidMount()}catch($t){Qo(I,I.return,$t)}if(I=X,Q=I.updateQueue,Q!==null){var Ve=I.stateNode;try{var Mt=Q.shared.hiddenCallbacks;if(Mt!==null)for(Q.shared.hiddenCallbacks=null,Q=0;Q<Mt.length;Q++)Ra(Mt[Q],Ve)}catch($t){Qo(I,I.return,$t)}}_&&_e&64&&ig(X),ql(X,X.return);break;case 27:j1(X);case 26:case 5:Kc(Q,X,_),_&&I===null&&_e&4&&hC(X),ql(X,X.return);break;case 12:Kc(Q,X,_);break;case 31:Kc(Q,X,_),_&&_e&4&&zp(Q,X);break;case 13:Kc(Q,X,_),_&&_e&4&&G1(Q,X);break;case 22:X.memoizedState===null&&Kc(Q,X,_),ql(X,X.return);break;case 30:break;default:Kc(Q,X,_)}g=g.sibling}}function S0(A,g){var _=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==_&&(A!=null&&A.refCount++,_!=null&&Ta(_))}function W1(A,g){A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Ta(A))}function LA(A,g,_,I){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)mC(A,g,_,I),g=g.sibling}function mC(A,g,_,I){var Q=g.flags;switch(g.tag){case 0:case 11:case 15:LA(A,g,_,I),Q&2048&&Vd(9,g);break;case 1:LA(A,g,_,I);break;case 3:LA(A,g,_,I),Q&2048&&(A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Ta(A)));break;case 12:if(Q&2048){LA(A,g,_,I),A=g.stateNode;try{var X=g.memoizedProps,_e=X.id,Ve=X.onPostCommit;typeof Ve=="function"&&Ve(_e,g.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Mt){Qo(g,g.return,Mt)}}else LA(A,g,_,I);break;case 31:LA(A,g,_,I);break;case 13:LA(A,g,_,I);break;case 23:break;case 22:X=g.stateNode,_e=g.alternate,g.memoizedState!==null?X._visibility&2?LA(A,g,_,I):E0(A,g):X._visibility&2?LA(A,g,_,I):(X._visibility|=2,Yf(A,g,_,I,(g.subtreeFlags&10256)!==0||!1)),Q&2048&&S0(_e,g);break;case 24:LA(A,g,_,I),Q&2048&&W1(g.alternate,g);break;default:LA(A,g,_,I)}}function Yf(A,g,_,I,Q){for(Q=Q&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var X=A,_e=g,Ve=_,Mt=I,$t=_e.flags;switch(_e.tag){case 0:case 11:case 15:Yf(X,_e,Ve,Mt,Q),Vd(8,_e);break;case 23:break;case 22:var un=_e.stateNode;_e.memoizedState!==null?un._visibility&2?Yf(X,_e,Ve,Mt,Q):E0(X,_e):(un._visibility|=2,Yf(X,_e,Ve,Mt,Q)),Q&&$t&2048&&S0(_e.alternate,_e);break;case 24:Yf(X,_e,Ve,Mt,Q),Q&&$t&2048&&W1(_e.alternate,_e);break;default:Yf(X,_e,Ve,Mt,Q)}g=g.sibling}}function E0(A,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var _=A,I=g,Q=I.flags;switch(I.tag){case 22:E0(_,I),Q&2048&&S0(I.alternate,I);break;case 24:E0(_,I),Q&2048&&W1(I.alternate,I);break;default:E0(_,I)}g=g.sibling}}var O0=8192;function ag(A,g,_){if(A.subtreeFlags&O0)for(A=A.child;A!==null;)Np(A,g,_),A=A.sibling}function Np(A,g,_){switch(A.tag){case 26:ag(A,g,_),A.flags&O0&&A.memoizedState!==null&&Ne(_,fc,A.memoizedState,A.memoizedProps);break;case 5:ag(A,g,_);break;case 3:case 4:var I=fc;fc=N0(A.stateNode.containerInfo),ag(A,g,_),fc=I;break;case 22:A.memoizedState===null&&(I=A.alternate,I!==null&&I.memoizedState!==null?(I=O0,O0=16777216,ag(A,g,_),O0=I):ag(A,g,_));break;default:ag(A,g,_)}}function gC(A){var g=A.alternate;if(g!==null&&(A=g.child,A!==null)){g.child=null;do g=A.sibling,A.sibling=null,A=g;while(A!==null)}}function B0(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var I=g[_];Qr=I,Sv(I,A)}gC(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)wv(A),A=A.sibling}function wv(A){switch(A.tag){case 0:case 11:case 15:B0(A),A.flags&2048&&yh(9,A,A.return);break;case 3:B0(A);break;case 12:B0(A);break;case 22:var g=A.stateNode;A.memoizedState!==null&&g._visibility&2&&(A.return===null||A.return.tag!==13)?(g._visibility&=-3,Q1(A)):B0(A);break;default:B0(A)}}function Q1(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var I=g[_];Qr=I,Sv(I,A)}gC(A)}for(A=A.child;A!==null;){switch(g=A,g.tag){case 0:case 11:case 15:yh(8,g,g.return),Q1(g);break;case 22:_=g.stateNode,_._visibility&2&&(_._visibility&=-3,Q1(g));break;default:Q1(g)}A=A.sibling}}function Sv(A,g){for(;Qr!==null;){var _=Qr;switch(_.tag){case 0:case 11:case 15:yh(8,_,g);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var I=_.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:Ta(_.memoizedState.cache)}if(I=_.child,I!==null)I.return=_,Qr=I;else e:for(_=A;Qr!==null;){I=Qr;var Q=I.sibling,X=I.return;if(og(I),I===_){Qr=null;break e}if(Q!==null){Q.return=X,Qr=Q;break e}Qr=X}}}var Jx={getCacheForType:function(A){var g=al(ls),_=g.data.get(A);return _===void 0&&(_=A(),g.data.set(A,_)),_},cacheSignal:function(){return al(ls).controller.signal}},Ev=typeof WeakMap=="function"?WeakMap:Map,xo=0,As=null,Ao=null,go=0,es=0,Fc=null,$f=!1,lg=!1,Gp=!1,KA=0,va=0,Vf=0,Wp=0,Ov=0,cA=0,Qp=0,qp=null,pc=null,q1=!1,ug=0,yC=0,ud=1/0,Y1=null,Jd=null,Sl=0,Hf=null,cg=null,cd=0,Bv=0,Iv=null,Ag=null,aa=0,I0=null;function zc(){return(xo&2)!==0&&go!==0?go&-go:Re.T!==null?$l():Ti()}function kv(){if(cA===0)if((go&536870912)===0||Wr){var A=pt;pt<<=1,(pt&3932160)===0&&(pt=262144),cA=A}else cA=536870912;return A=us.current,A!==null&&(A.flags|=32),cA}function ju(A,g,_){(A===As&&(es===2||es===9)||A.cancelPendingCommit!==null)&&(hg(A,0),ef(A,go,cA,!1)),Xi(A,_),((xo&2)===0||A!==As)&&(A===As&&((xo&2)===0&&(Wp|=_),va===4&&ef(A,go,cA,!1)),bh(A))}function Yp(A,g,_){if((xo&6)!==0)throw Error(i(327));var I=!_&&(g&127)===0&&(g&A.expiredLanes)===0||ni(A,g),Q=I?xC(A,g):Dv(A,g,!0),X=I;do{if(Q===0){lg&&!I&&ef(A,g,0,!1);break}else{if(_=A.current.alternate,X&&!vC(_)){Q=Dv(A,g,!1),X=!1;continue}if(Q===2){if(X=g,A.errorRecoveryDisabledLanes&X)var _e=0;else _e=A.pendingLanes&-536870913,_e=_e!==0?_e:_e&536870912?536870912:0;if(_e!==0){g=_e;e:{var Ve=A;Q=qp;var Mt=Ve.current.memoizedState.isDehydrated;if(Mt&&(hg(Ve,_e).flags|=256),_e=Dv(Ve,_e,!1),_e!==2){if(Gp&&!Mt){Ve.errorRecoveryDisabledLanes|=X,Wp|=X,Q=4;break e}X=pc,pc=Q,X!==null&&(pc===null?pc=X:pc.push.apply(pc,X))}Q=_e}if(X=!1,Q!==2)continue}}if(Q===1){hg(A,0),ef(A,g,0,!0);break}e:{switch(I=A,X=Q,X){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:ef(I,g,cA,!$f);break e;case 2:pc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(Q=ug+300-Hn(),10<Q)){if(ef(I,g,cA,!$f),jn(I,0,!0)!==0)break e;cd=g,I.timeoutHandle=Wv(Tv.bind(null,I,_,pc,Y1,q1,g,cA,Wp,Qp,$f,X,"Throttled",-0,0),Q);break e}Tv(I,_,pc,Y1,q1,g,cA,Wp,Qp,$f,X,null,-0,0)}}break}while(!0);bh(A)}function Tv(A,g,_,I,Q,X,_e,Ve,Mt,$t,un,gn,Jt,on){if(A.timeoutHandle=-1,gn=g.subtreeFlags,gn&8192||(gn&16785408)===16785408){gn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wa},Np(g,X,gn);var Ri=(X&62914560)===X?ug-Hn():(X&4194048)===X?yC-Hn():0;if(Ri=ot(gn,Ri),Ri!==null){cd=X,A.cancelPendingCommit=Ri(T0.bind(null,A,g,X,_,I,Q,_e,Ve,Mt,un,gn,null,Jt,on)),ef(A,X,_e,!$t);return}}T0(A,g,X,_,I,Q,_e,Ve,Mt)}function vC(A){for(var g=A;;){var _=g.tag;if((_===0||_===11||_===15)&&g.flags&16384&&(_=g.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var I=0;I<_.length;I++){var Q=_[I],X=Q.getSnapshot;Q=Q.value;try{if(!Ks(X(),Q))return!1}catch{return!1}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function ef(A,g,_,I){g&=~Ov,g&=~Wp,A.suspendedLanes|=g,A.pingedLanes&=~g,I&&(A.warmLanes|=g),I=A.expirationTimes;for(var Q=g;0<Q;){var X=31-fe(Q),_e=1<<X;I[X]=-1,Q&=~_e}_!==0&&ur(A,_,g)}function $1(){return(xo&6)===0?(Vp(0),!1):!0}function Rv(){if(Ao!==null){if(es===0)var A=Ao.return;else A=Ao,SA=hr=null,l(A),Nd=null,Ru=0,A=Ao;for(;A!==null;)K1(A.alternate,A),A=A.return;Ao=null}}function hg(A,g){var _=A.timeoutHandle;_!==-1&&(A.timeoutHandle=-1,o2(_)),_=A.cancelPendingCommit,_!==null&&(A.cancelPendingCommit=null,_()),cd=0,Rv(),As=A,Ao=_=zl(A.current,null),go=g,es=0,Fc=null,$f=!1,lg=ni(A,g),Gp=!1,Qp=cA=Ov=Wp=Vf=va=0,pc=qp=null,q1=!1,(g&8)!==0&&(g|=g&32);var I=A.entangledLanes;if(I!==0)for(A=A.entanglements,I&=g;0<I;){var Q=31-fe(I),X=1<<Q;g|=A[Q],I&=~X}return KA=g,Iu(),_}function bC(A,g){Sr=null,Re.H=fh,g===jd||g===Lf?(g=y0(),es=3):g===BA?(g=y0(),es=4):es=g===Dp?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Fc=g,Ao===null&&(va=1,Xm(A,jl(g,A.current)))}function k0(){var A=us.current;return A===null?!0:(go&4194048)===go?hc===null:(go&62914560)===go||(go&536870912)!==0?A===hc:!1}function CC(){var A=Re.H;return Re.H=fh,A===null?fh:A}function _C(){var A=Re.A;return Re.A=Jx,A}function V1(){va=4,$f||(go&4194048)!==go&&us.current!==null||(lg=!0),(Vf&134217727)===0&&(Wp&134217727)===0||As===null||ef(As,go,cA,!1)}function Dv(A,g,_){var I=xo;xo|=2;var Q=CC(),X=_C();(As!==A||go!==g)&&(Y1=null,hg(A,g)),g=!1;var _e=va;e:do try{if(es!==0&&Ao!==null){var Ve=Ao,Mt=Fc;switch(es){case 8:Rv(),_e=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(g=!0);var $t=es;if(es=0,Fc=null,Ad(A,Ve,Mt,$t),_&&lg){_e=0;break e}break;default:$t=es,es=0,Fc=null,Ad(A,Ve,Mt,$t)}}e2(),_e=va;break}catch(un){bC(A,un)}while(!0);return g&&A.shellSuspendCounter++,SA=hr=null,xo=I,Re.H=Q,Re.A=X,Ao===null&&(As=null,go=0,Iu()),_e}function e2(){for(;Ao!==null;)Uv(Ao)}function xC(A,g){var _=xo;xo|=2;var I=CC(),Q=_C();As!==A||go!==g?(Y1=null,ud=Hn()+500,hg(A,g)):lg=ni(A,g);e:do try{if(es!==0&&Ao!==null){g=Ao;var X=Fc;t:switch(es){case 1:es=0,Fc=null,Ad(A,g,X,1);break;case 2:case 9:if(sh(X)){es=0,Fc=null,tf(g);break}g=function(){es!==2&&es!==9||As!==A||(es=7),bh(A)},X.then(g,g);break e;case 3:es=7;break e;case 4:es=5;break e;case 7:sh(X)?(es=0,Fc=null,tf(g)):(es=0,Fc=null,Ad(A,g,X,7));break;case 5:var _e=null;switch(Ao.tag){case 26:_e=Ao.memoizedState;case 5:case 27:var Ve=Ao;if(_e?Le(_e):Ve.stateNode.complete){es=0,Fc=null;var Mt=Ve.sibling;if(Mt!==null)Ao=Mt;else{var $t=Ve.return;$t!==null?(Ao=$t,nf($t)):Ao=null}break t}}es=0,Fc=null,Ad(A,g,X,5);break;case 6:es=0,Fc=null,Ad(A,g,X,6);break;case 8:Rv(),va=6;break e;default:throw Error(i(462))}}Pv();break}catch(un){bC(A,un)}while(!0);return SA=hr=null,Re.H=I,Re.A=Q,xo=_,Ao!==null?0:(As=null,go=0,Iu(),va)}function Pv(){for(;Ao!==null&&!Rn();)Uv(Ao)}function Uv(A){var g=cC(A.alternate,A,KA);A.memoizedProps=A.pendingProps,g===null?nf(A):Ao=g}function tf(A){var g=A,_=g.alternate;switch(g.tag){case 15:case 0:g=vv(_,g,g.pendingProps,g.type,void 0,go);break;case 11:g=vv(_,g,g.pendingProps,g.type.render,g.ref,go);break;case 5:l(g);default:K1(_,g),g=Ao=m0(g,KA),g=cC(_,g,KA)}A.memoizedProps=A.pendingProps,g===null?nf(A):Ao=g}function Ad(A,g,_,I){SA=hr=null,l(g),Nd=null,Ru=0;var Q=g.return;try{if(yv(A,Q,g,_,go)){va=1,Xm(A,jl(_,A.current)),Ao=null;return}}catch(X){if(Q!==null)throw Ao=Q,X;va=1,Xm(A,jl(_,A.current)),Ao=null;return}g.flags&32768?(Wr||I===1?A=!0:lg||(go&536870912)!==0?A=!1:($f=A=!0,(I===2||I===9||I===3||I===6)&&(I=us.current,I!==null&&I.tag===13&&(I.flags|=16384))),Zf(g,A)):nf(g)}function nf(A){var g=A;do{if((g.flags&32768)!==0){Zf(g,$f);return}A=g.return;var _=AC(g.alternate,g,KA);if(_!==null){Ao=_;return}if(g=g.sibling,g!==null){Ao=g;return}Ao=g=A}while(g!==null);va===0&&(va=5)}function Zf(A,g){do{var _=w0(A.alternate,A);if(_!==null){_.flags&=32767,Ao=_;return}if(_=A.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!g&&(A=A.sibling,A!==null)){Ao=A;return}Ao=A=_}while(A!==null);va=6,Ao=null}function T0(A,g,_,I,Q,X,_e,Ve,Mt){A.cancelPendingCommit=null;do D0();while(Sl!==0);if((xo&6)!==0)throw Error(i(327));if(g!==null){if(g===A.current)throw Error(i(177));if(X=g.lanes|g.childLanes,X|=_A,Di(A,_,X,_e,Ve,Mt),A===As&&(Ao=As=null,go=0),cg=g,Hf=A,cd=_,Bv=X,Iv=Q,Ag=I,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,i2(oe,function(){return Z1(),null})):(A.callbackNode=null,A.callbackPriority=0),I=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||I){I=Re.T,Re.T=null,Q=qe.p,qe.p=2,_e=xo,xo|=4;try{rg(A,g,_)}finally{xo=_e,qe.p=Q,Re.T=I}}Sl=1,Lv(),Kv(),R0()}}function Lv(){if(Sl===1){Sl=0;var A=Hf,g=cg,_=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||_){_=Re.T,Re.T=null;var I=qe.p;qe.p=2;var Q=xo;xo|=4;try{pC(g,A);var X=ay,_e=Nm(A.containerInfo),Ve=X.focusedElem,Mt=X.selectionRange;if(_e!==Ve&&Ve&&Ve.ownerDocument&&jm(Ve.ownerDocument.documentElement,Ve)){if(Mt!==null&&Gm(Ve)){var $t=Mt.start,un=Mt.end;if(un===void 0&&(un=$t),"selectionStart"in Ve)Ve.selectionStart=$t,Ve.selectionEnd=Math.min(un,Ve.value.length);else{var gn=Ve.ownerDocument||document,Jt=gn&&gn.defaultView||window;if(Jt.getSelection){var on=Jt.getSelection(),Ri=Ve.textContent.length,sr=Math.min(Mt.start,Ri),_s=Mt.end===void 0?sr:Math.min(Mt.end,Ri);!on.extend&&sr>_s&&(_e=_s,_s=sr,sr=_e);var Lt=zm(Ve,sr),Rt=zm(Ve,_s);if(Lt&&Rt&&(on.rangeCount!==1||on.anchorNode!==Lt.node||on.anchorOffset!==Lt.offset||on.focusNode!==Rt.node||on.focusOffset!==Rt.offset)){var qt=gn.createRange();qt.setStart(Lt.node,Lt.offset),on.removeAllRanges(),sr>_s?(on.addRange(qt),on.extend(Rt.node,Rt.offset)):(qt.setEnd(Rt.node,Rt.offset),on.addRange(qt))}}}}for(gn=[],on=Ve;on=on.parentNode;)on.nodeType===1&&gn.push({element:on,left:on.scrollLeft,top:on.scrollTop});for(typeof Ve.focus=="function"&&Ve.focus(),Ve=0;Ve<gn.length;Ve++){var fn=gn[Ve];fn.element.scrollLeft=fn.left,fn.element.scrollTop=fn.top}}ji=!!vg,ay=vg=null}finally{xo=Q,qe.p=I,Re.T=_}}A.current=g,Sl=2}}function Kv(){if(Sl===2){Sl=0;var A=Hf,g=cg,_=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||_){_=Re.T,Re.T=null;var I=qe.p;qe.p=2;var Q=xo;xo|=4;try{N1(A,g.alternate,g)}finally{xo=Q,qe.p=I,Re.T=_}}Sl=3}}function R0(){if(Sl===4||Sl===3){Sl=0,pn();var A=Hf,g=cg,_=cd,I=Ag;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Sl=5:(Sl=0,cg=Hf=null,H1(A,A.pendingLanes));var Q=A.pendingLanes;if(Q===0&&(Jd=null),nn(_),g=g.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(xe,g,void 0,(g.current.flags&128)===128)}catch{}if(I!==null){g=Re.T,Q=qe.p,qe.p=2,Re.T=null;try{for(var X=A.onRecoverableError,_e=0;_e<I.length;_e++){var Ve=I[_e];X(Ve.value,{componentStack:Ve.stack})}}finally{Re.T=g,qe.p=Q}}(cd&3)!==0&&D0(),bh(A),Q=A.pendingLanes,(_&261930)!==0&&(Q&42)!==0?A===I0?aa++:(aa=0,I0=A):aa=0,Vp(0)}}function H1(A,g){(A.pooledCacheLanes&=g)===0&&(g=A.pooledCache,g!=null&&(A.pooledCache=null,Ta(g)))}function D0(){return Lv(),Kv(),R0(),Z1()}function Z1(){if(Sl!==5)return!1;var A=Hf,g=Bv;Bv=0;var _=nn(cd),I=Re.T,Q=qe.p;try{qe.p=32>_?32:_,Re.T=null,_=Iv,Iv=null;var X=Hf,_e=cd;if(Sl=0,cg=Hf=null,cd=0,(xo&6)!==0)throw Error(i(331));var Ve=xo;if(xo|=4,wv(X.current),mC(X,X.current,_e,_),xo=Ve,Vp(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(xe,X)}catch{}return!0}finally{qe.p=Q,Re.T=I,H1(A,g)}}function X1(A,g,_){g=jl(_,g),g=T1(A.stateNode,g,2),A=Pu(A,g,2),A!==null&&(Xi(A,2),bh(A))}function Qo(A,g,_){if(A.tag===3)X1(A,A,_);else for(;g!==null;){if(g.tag===3){X1(g,A,_);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Jd===null||!Jd.has(I))){A=jl(_,A),_=ad(2),I=Pu(g,_,2),I!==null&&(Jm(_,I,g,A),Xi(I,2),bh(I));break}}g=g.return}}function P0(A,g,_){var I=A.pingCache;if(I===null){I=A.pingCache=new Ev;var Q=new Set;I.set(g,Q)}else Q=I.get(g),Q===void 0&&(Q=new Set,I.set(g,Q));Q.has(_)||(Gp=!0,Q.add(_),A=t2.bind(null,A,g,_),g.then(A,A))}function t2(A,g,_){var I=A.pingCache;I!==null&&I.delete(g),A.pingedLanes|=A.suspendedLanes&_,A.warmLanes&=~_,As===A&&(go&_)===_&&(va===4||va===3&&(go&62914560)===go&&300>Hn()-ug?(xo&2)===0&&hg(A,0):Ov|=_,Qp===go&&(Qp=0)),bh(A)}function dg(A,g){g===0&&(g=Ln()),A=du(A,g),A!==null&&(Xi(A,g),bh(A))}function J1(A){var g=A.memoizedState,_=0;g!==null&&(_=g.retryLane),dg(A,_)}function n2(A,g){var _=0;switch(A.tag){case 31:case 13:var I=A.stateNode,Q=A.memoizedState;Q!==null&&(_=Q.retryLane);break;case 19:I=A.stateNode;break;case 22:I=A.stateNode._retryCache;break;default:throw Error(i(314))}I!==null&&I.delete(g),dg(A,_)}function i2(A,g){return si(A,g)}var fg=null,$p=null,ey=!1,U0=!1,vh=!1,mc=0;function bh(A){A!==$p&&A.next===null&&($p===null?fg=$p=A:$p=$p.next=A),U0=!0,ey||(ey=!0,Fv())}function Vp(A,g){if(!vh&&U0){vh=!0;do for(var _=!1,I=fg;I!==null;){if(A!==0){var Q=I.pendingLanes;if(Q===0)var X=0;else{var _e=I.suspendedLanes,Ve=I.pingedLanes;X=(1<<31-fe(42|A)+1)-1,X&=Q&~(_e&~Ve),X=X&201326741?X&201326741|1:X?X|2:0}X!==0&&(_=!0,ny(I,X))}else X=go,X=jn(I,I===As?X:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(X&3)===0||ni(I,X)||(_=!0,ny(I,X));I=I.next}while(_);vh=!1}}function r2(){L0()}function L0(){U0=ey=!1;var A=0;mc!==0&&SC()&&(A=mc);for(var g=Hn(),_=null,I=fg;I!==null;){var Q=I.next,X=ty(I,g);X===0?(I.next=null,_===null?fg=Q:_.next=Q,Q===null&&($p=_)):(_=I,(A!==0||(X&3)!==0)&&(U0=!0)),I=Q}Sl!==0&&Sl!==5||Vp(A),mc!==0&&(mc=0)}function ty(A,g){for(var _=A.suspendedLanes,I=A.pingedLanes,Q=A.expirationTimes,X=A.pendingLanes&-62914561;0<X;){var _e=31-fe(X),Ve=1<<_e,Mt=Q[_e];Mt===-1?((Ve&_)===0||(Ve&I)!==0)&&(Q[_e]=In(Ve,g)):Mt<=g&&(A.expiredLanes|=Ve),X&=~Ve}if(g=As,_=go,_=jn(A,A===g?_:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),I=A.callbackNode,_===0||A===g&&(es===2||es===9)||A.cancelPendingCommit!==null)return I!==null&&I!==null&&xn(I),A.callbackNode=null,A.callbackPriority=0;if((_&3)===0||ni(A,_)){if(g=_&-_,g===A.callbackPriority)return g;switch(I!==null&&xn(I),nn(_)){case 2:case 8:_=Me;break;case 32:_=oe;break;case 268435456:_=he;break;default:_=oe}return I=MC.bind(null,A),_=si(_,I),A.callbackPriority=g,A.callbackNode=_,g}return I!==null&&I!==null&&xn(I),A.callbackPriority=2,A.callbackNode=null,2}function MC(A,g){if(Sl!==0&&Sl!==5)return A.callbackNode=null,A.callbackPriority=0,null;var _=A.callbackNode;if(D0()&&A.callbackNode!==_)return null;var I=go;return I=jn(A,A===As?I:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),I===0?null:(Yp(A,I,g),ty(A,Hn()),A.callbackNode!=null&&A.callbackNode===_?MC.bind(null,A):null)}function ny(A,g){if(D0())return null;Yp(A,g,!0)}function Fv(){Qv(function(){(xo&6)!==0?si(Tt,r2):L0()})}function $l(){if(mc===0){var A=Wl;A===0&&(A=Bt,Bt<<=1,(Bt&261888)===0&&(Bt=256)),mc=A}return mc}function zv(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Gi(""+A)}function jv(A,g){var _=g.ownerDocument.createElement("input");return _.name=g.name,_.value=g.value,A.id&&_.setAttribute("form",A.id),g.parentNode.insertBefore(_,g),A=new FormData(A),_.parentNode.removeChild(_),A}function rf(A,g,_,I,Q){if(g==="submit"&&_&&_.stateNode===Q){var X=zv((Q[hn]||null).action),_e=I.submitter;_e&&(g=(g=_e[hn]||null)?zv(g.formAction):_e.getAttribute("formAction"),g!==null&&(X=g,_e=null));var Ve=new Bn("action","action",null,I,Q);A.push({event:Ve,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(mc!==0){var Mt=_e?jv(Q,_e):new FormData(Q);yu(_,{pending:!0,data:Mt,method:Q.method,action:X},null,Mt)}}else typeof X=="function"&&(Ve.preventDefault(),Mt=_e?jv(Q,_e):new FormData(Q),yu(_,{pending:!0,data:Mt,method:Q.method,action:X},X,Mt))},currentTarget:Q}]})}}for(var Cr=0;Cr<Op.length;Cr++){var pg=Op[Cr],gc=pg.toLowerCase(),Va=pg[0].toUpperCase()+pg.slice(1);Fl(gc,"on"+Va)}Fl(Kl,"onAnimationEnd"),Fl(zh,"onAnimationIteration"),Fl(Wm,"onAnimationStart"),Fl("dblclick","onDoubleClick"),Fl("focusin","onFocus"),Fl("focusout","onBlur"),Fl(kc,"onTransitionRun"),Fl(jh,"onTransitionStart"),Fl(eh,"onTransitionCancel"),Fl(Rr,"onTransitionEnd"),Dl("onMouseEnter",["mouseout","mouseover"]),Dl("onMouseLeave",["mouseout","mouseover"]),Dl("onPointerEnter",["pointerout","pointerover"]),Dl("onPointerLeave",["pointerout","pointerover"]),Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var K0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(K0));function wC(A,g){g=(g&4)!==0;for(var _=0;_<A.length;_++){var I=A[_],Q=I.event;I=I.listeners;e:{var X=void 0;if(g)for(var _e=I.length-1;0<=_e;_e--){var Ve=I[_e],Mt=Ve.instance,$t=Ve.currentTarget;if(Ve=Ve.listener,Mt!==X&&Q.isPropagationStopped())break e;X=Ve,Q.currentTarget=$t;try{X(Q)}catch(un){CA(un)}Q.currentTarget=null,X=Mt}else for(_e=0;_e<I.length;_e++){if(Ve=I[_e],Mt=Ve.instance,$t=Ve.currentTarget,Ve=Ve.listener,Mt!==X&&Q.isPropagationStopped())break e;X=Ve,Q.currentTarget=$t;try{X(Q)}catch(un){CA(un)}Q.currentTarget=null,X=Mt}}}}function ho(A,g){var _=g[ii];_===void 0&&(_=g[ii]=new Set);var I=A+"__bubble";_.has(I)||(z0(g,A,2,!1),_.add(I))}function F0(A,g,_){var I=0;g&&(I|=4),z0(_,A,I,g)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function iy(A){if(!A[Ch]){A[Ch]=!0,Rl.forEach(function(_){_!=="selectionchange"&&(Xf.has(_)||F0(_,!1,A),F0(_,!0,A))});var g=A.nodeType===9?A:A.ownerDocument;g===null||g[Ch]||(g[Ch]=!0,F0("selectionchange",!1,g))}}function z0(A,g,_,I){switch(El(g)){case 2:var Q=ir;break;case 8:Q=Ui;break;default:Q=Ai}_=Q.bind(null,g,_,A),Q=void 0,!ss||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(Q=!0),I?Q!==void 0?A.addEventListener(g,_,{capture:!0,passive:Q}):A.addEventListener(g,_,!0):Q!==void 0?A.addEventListener(g,_,{passive:Q}):A.addEventListener(g,_,!1)}function ry(A,g,_,I,Q){var X=I;if((g&1)===0&&(g&2)===0&&I!==null)e:for(;;){if(I===null)return;var _e=I.tag;if(_e===3||_e===4){var Ve=I.stateNode.containerInfo;if(Ve===Q)break;if(_e===4)for(_e=I.return;_e!==null;){var Mt=_e.tag;if((Mt===3||Mt===4)&&_e.stateNode.containerInfo===Q)return;_e=_e.return}for(;Ve!==null;){if(_e=Vr(Ve),_e===null)return;if(Mt=_e.tag,Mt===5||Mt===6||Mt===26||Mt===27){I=X=_e;continue e}Ve=Ve.parentNode}}I=I.return}_o(function(){var $t=X,un=lu(_),gn=[];e:{var Jt=p0.get(A);if(Jt!==void 0){var on=Bn,Ri=A;switch(A){case"keypress":if(J(_)===0)break e;case"keydown":case"keyup":on=Bu;break;case"focusin":Ri="focus",on=Br;break;case"focusout":Ri="blur",on=Br;break;case"beforeblur":case"afterblur":on=Br;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":on=br;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":on=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":on=x1;break;case Kl:case zh:case Wm:on=ZA;break;case Rr:on=pv;break;case"scroll":case"scrollend":on=Ki;break;case"wheel":on=Bf;break;case"copy":case"cut":case"paste":on=Tr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":on=xp;break;case"toggle":case"beforetoggle":on=h0}var sr=(g&4)!==0,_s=!sr&&(A==="scroll"||A==="scrollend"),Lt=sr?Jt!==null?Jt+"Capture":null:Jt;sr=[];for(var Rt=$t,qt;Rt!==null;){var fn=Rt;if(qt=fn.stateNode,fn=fn.tag,fn!==5&&fn!==26&&fn!==27||qt===null||Lt===null||(fn=uu(Rt,Lt),fn!=null&&sr.push(jc(Rt,fn,qt))),_s)break;Rt=Rt.return}0<sr.length&&(Jt=new on(Jt,Ri,null,_,un),gn.push({event:Jt,listeners:sr}))}}if((g&7)===0){e:{if(Jt=A==="mouseover"||A==="pointerover",on=A==="mouseout"||A==="pointerout",Jt&&_!==Xo&&(Ri=_.relatedTarget||_.fromElement)&&(Vr(Ri)||Ri[Li]))break e;if((on||Jt)&&(Jt=un.window===un?un:(Jt=un.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,on?(Ri=_.relatedTarget||_.toElement,on=$t,Ri=Ri?Vr(Ri):null,Ri!==null&&(_s=o(Ri),sr=Ri.tag,Ri!==_s||sr!==5&&sr!==27&&sr!==6)&&(Ri=null)):(on=null,Ri=$t),on!==Ri)){if(sr=br,fn="onMouseLeave",Lt="onMouseEnter",Rt="mouse",(A==="pointerout"||A==="pointerover")&&(sr=xp,fn="onPointerLeave",Lt="onPointerEnter",Rt="pointer"),_s=on==null?Jt:nu(on),qt=Ri==null?Jt:nu(Ri),Jt=new sr(fn,Rt+"leave",on,_,un),Jt.target=_s,Jt.relatedTarget=qt,fn=null,Vr(un)===$t&&(sr=new sr(Lt,Rt+"enter",Ri,_,un),sr.target=qt,sr.relatedTarget=_s,fn=sr),_s=fn,on&&Ri)t:{for(sr=gg,Lt=on,Rt=Ri,qt=0,fn=Lt;fn;fn=sr(fn))qt++;fn=0;for(var Ji=Rt;Ji;Ji=sr(Ji))fn++;for(;0<qt-fn;)Lt=sr(Lt),qt--;for(;0<fn-qt;)Rt=sr(Rt),fn--;for(;qt--;){if(Lt===Rt||Rt!==null&&Lt===Rt.alternate){sr=Lt;break t}Lt=sr(Lt),Rt=sr(Rt)}sr=null}else sr=null;on!==null&&Js(gn,Jt,on,sr,!1),Ri!==null&&_s!==null&&Js(gn,_s,Ri,sr,!0)}}e:{if(Jt=$t?nu($t):window,on=Jt.nodeName&&Jt.nodeName.toLowerCase(),on==="select"||on==="input"&&Jt.type==="file")var jo=tA;else if(wp(Jt))if(Lh)jo=f0;else{jo=S1;var oi=Fm}else on=Jt.nodeName,!on||on.toLowerCase()!=="input"||Jt.type!=="checkbox"&&Jt.type!=="radio"?$t&&Ga($t.elementType)&&(jo=tA):jo=d0;if(jo&&(jo=jo(A,$t))){Rf(gn,jo,_,un);break e}oi&&oi(A,Jt,$t),A==="focusout"&&$t&&Jt.type==="number"&&$t.memoizedProps.value!=null&&eA(Jt,"number",Jt.value)}switch(oi=$t?nu($t):window,A){case"focusin":(wp(oi)||oi.contentEditable==="true")&&(Ut=oi,sn=$t,rn=null);break;case"focusout":rn=sn=Ut=null;break;case"mousedown":pi=!0;break;case"contextmenu":case"mouseup":case"dragend":pi=!1,vr(gn,_,un);break;case"selectionchange":if(Gr)break;case"keydown":case"keyup":vr(gn,_,un)}var rr;if(Ll)e:{switch(A){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else Ic?Ud(A,_)&&(Fr="onCompositionEnd"):A==="keydown"&&_.keyCode===229&&(Fr="onCompositionStart");Fr&&(Uh&&_.locale!=="ko"&&(Ic||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&Ic&&(rr=Pi()):(sl=un,Ul="value"in sl?sl.value:sl.textContent,Ic=!0)),oi=mg($t,Fr),0<oi.length&&(Fr=new cu(Fr,A,null,_,un),gn.push({event:Fr,listeners:oi}),rr?Fr.data=rr:(rr=M1(_),rr!==null&&(Fr.data=rr)))),(rr=If?ac(A,_):Um(A,_))&&(Fr=mg($t,"onBeforeInput"),0<Fr.length&&(oi=new cu("onBeforeInput","beforeinput",null,_,un),gn.push({event:oi,listeners:Fr}),oi.data=rr)),rf(gn,A,$t,_,un)}wC(gn,g)})}function jc(A,g,_){return{instance:A,listener:g,currentTarget:_}}function mg(A,g){for(var _=g+"Capture",I=[];A!==null;){var Q=A,X=Q.stateNode;if(Q=Q.tag,Q!==5&&Q!==26&&Q!==27||X===null||(Q=uu(A,_),Q!=null&&I.unshift(jc(A,Q,X)),Q=uu(A,g),Q!=null&&I.push(jc(A,Q,X))),A.tag===3)return I;A=A.return}return[]}function gg(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function Js(A,g,_,I,Q){for(var X=g._reactName,_e=[];_!==null&&_!==I;){var Ve=_,Mt=Ve.alternate,$t=Ve.stateNode;if(Ve=Ve.tag,Mt!==null&&Mt===I)break;Ve!==5&&Ve!==26&&Ve!==27||$t===null||(Mt=$t,Q?($t=uu(_,X),$t!=null&&_e.unshift(jc(_,$t,Mt))):Q||($t=uu(_,X),$t!=null&&_e.push(jc(_,$t,Mt)))),_=_.return}_e.length!==0&&A.push({event:g,listeners:_e})}var Ws=/\r\n?/g,Nv=/\u0000|\uFFFD/g;function oy(A){return(typeof A=="string"?A:""+A).replace(Ws,`
`).replace(Nv,"")}function Gv(A,g){return g=oy(g),oy(A)===g}function qr(A,g,_,I,Q,X){switch(_){case"children":typeof I=="string"?g==="body"||g==="textarea"&&I===""||To(A,I):(typeof I=="number"||typeof I=="bigint")&&g!=="body"&&To(A,""+I);break;case"className":nc(A,"class",I);break;case"tabIndex":nc(A,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":nc(A,_,I);break;case"style":Ls(A,I,X);break;case"data":if(g!=="object"){nc(A,"data",I);break}case"src":case"href":if(I===""&&(g!=="a"||_!=="href")){A.removeAttribute(_);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){A.removeAttribute(_);break}I=Gi(""+I),A.setAttribute(_,I);break;case"action":case"formAction":if(typeof I=="function"){A.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(_==="formAction"?(g!=="input"&&qr(A,g,"name",Q.name,Q,null),qr(A,g,"formEncType",Q.formEncType,Q,null),qr(A,g,"formMethod",Q.formMethod,Q,null),qr(A,g,"formTarget",Q.formTarget,Q,null)):(qr(A,g,"encType",Q.encType,Q,null),qr(A,g,"method",Q.method,Q,null),qr(A,g,"target",Q.target,Q,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){A.removeAttribute(_);break}I=Gi(""+I),A.setAttribute(_,I);break;case"onClick":I!=null&&(A.onclick=Wa);break;case"onScroll":I!=null&&ho("scroll",A);break;case"onScrollEnd":I!=null&&ho("scrollend",A);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(i(61));if(_=I.__html,_!=null){if(Q.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"multiple":A.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":A.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){A.removeAttribute("xlink:href");break}_=Gi(""+I),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,""+I):A.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,""):A.removeAttribute(_);break;case"capture":case"download":I===!0?A.setAttribute(_,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,I):A.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?A.setAttribute(_,I):A.removeAttribute(_);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?A.removeAttribute(_):A.setAttribute(_,I);break;case"popover":ho("beforetoggle",A),ho("toggle",A),Jc(A,"popover",I);break;case"xlinkActuate":yl(A,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":yl(A,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":yl(A,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":yl(A,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":yl(A,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":yl(A,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":yl(A,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":yl(A,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":yl(A,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":Jc(A,"is",I);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=tr.get(_)||_,Jc(A,_,I))}}function Jf(A,g,_,I,Q,X){switch(_){case"style":Ls(A,I,X);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(i(61));if(_=I.__html,_!=null){if(Q.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"children":typeof I=="string"?To(A,I):(typeof I=="number"||typeof I=="bigint")&&To(A,""+I);break;case"onScroll":I!=null&&ho("scroll",A);break;case"onScrollEnd":I!=null&&ho("scrollend",A);break;case"onClick":I!=null&&(A.onclick=Wa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zo.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(Q=_.endsWith("Capture"),g=_.slice(2,Q?_.length-7:void 0),X=A[hn]||null,X=X!=null?X[_]:null,typeof X=="function"&&A.removeEventListener(g,X,Q),typeof I=="function")){typeof X!="function"&&X!==null&&(_ in A?A[_]=null:A.hasAttribute(_)&&A.removeAttribute(_)),A.addEventListener(g,I,Q);break e}_ in A?A[_]=I:I===!0?A.setAttribute(_,""):Jc(A,_,I)}}}function Ha(A,g,_){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ho("error",A),ho("load",A);var I=!1,Q=!1,X;for(X in _)if(_.hasOwnProperty(X)){var _e=_[X];if(_e!=null)switch(X){case"src":I=!0;break;case"srcSet":Q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:qr(A,g,X,_e,_,null)}}Q&&qr(A,g,"srcSet",_.srcSet,_,null),I&&qr(A,g,"src",_.src,_,null);return;case"input":ho("invalid",A);var Ve=X=_e=Q=null,Mt=null,$t=null;for(I in _)if(_.hasOwnProperty(I)){var un=_[I];if(un!=null)switch(I){case"name":Q=un;break;case"type":_e=un;break;case"checked":Mt=un;break;case"defaultChecked":$t=un;break;case"value":X=un;break;case"defaultValue":Ve=un;break;case"children":case"dangerouslySetInnerHTML":if(un!=null)throw Error(i(137,g));break;default:qr(A,g,I,un,_,null)}}rl(A,X,Ve,Mt,$t,_e,Q,!1);return;case"select":ho("invalid",A),I=_e=X=null;for(Q in _)if(_.hasOwnProperty(Q)&&(Ve=_[Q],Ve!=null))switch(Q){case"value":X=Ve;break;case"defaultValue":_e=Ve;break;case"multiple":I=Ve;default:qr(A,g,Q,Ve,_,null)}g=X,_=_e,A.multiple=!!I,g!=null?ou(A,!!I,g,!1):_!=null&&ou(A,!!I,_,!0);return;case"textarea":ho("invalid",A),X=Q=I=null;for(_e in _)if(_.hasOwnProperty(_e)&&(Ve=_[_e],Ve!=null))switch(_e){case"value":I=Ve;break;case"defaultValue":Q=Ve;break;case"children":X=Ve;break;case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(91));break;default:qr(A,g,_e,Ve,_,null)}Ms(A,I,Q,X);return;case"option":for(Mt in _)if(_.hasOwnProperty(Mt)&&(I=_[Mt],I!=null))switch(Mt){case"selected":A.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:qr(A,g,Mt,I,_,null)}return;case"dialog":ho("beforetoggle",A),ho("toggle",A),ho("cancel",A),ho("close",A);break;case"iframe":case"object":ho("load",A);break;case"video":case"audio":for(I=0;I<K0.length;I++)ho(K0[I],A);break;case"image":ho("error",A),ho("load",A);break;case"details":ho("toggle",A);break;case"embed":case"source":case"link":ho("error",A),ho("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($t in _)if(_.hasOwnProperty($t)&&(I=_[$t],I!=null))switch($t){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:qr(A,g,$t,I,_,null)}return;default:if(Ga(g)){for(un in _)_.hasOwnProperty(un)&&(I=_[un],I!==void 0&&Jf(A,g,un,I,_,void 0));return}}for(Ve in _)_.hasOwnProperty(Ve)&&(I=_[Ve],I!=null&&qr(A,g,Ve,I,_,null))}function Hp(A,g,_,I){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Q=null,X=null,_e=null,Ve=null,Mt=null,$t=null,un=null;for(on in _){var gn=_[on];if(_.hasOwnProperty(on)&&gn!=null)switch(on){case"checked":break;case"value":break;case"defaultValue":Mt=gn;default:I.hasOwnProperty(on)||qr(A,g,on,null,I,gn)}}for(var Jt in I){var on=I[Jt];if(gn=_[Jt],I.hasOwnProperty(Jt)&&(on!=null||gn!=null))switch(Jt){case"type":X=on;break;case"name":Q=on;break;case"checked":$t=on;break;case"defaultChecked":un=on;break;case"value":_e=on;break;case"defaultValue":Ve=on;break;case"children":case"dangerouslySetInnerHTML":if(on!=null)throw Error(i(137,g));break;default:on!==gn&&qr(A,g,Jt,on,I,gn)}}oc(A,_e,Ve,Mt,$t,un,X,Q);return;case"select":on=_e=Ve=Jt=null;for(X in _)if(Mt=_[X],_.hasOwnProperty(X)&&Mt!=null)switch(X){case"value":break;case"multiple":on=Mt;default:I.hasOwnProperty(X)||qr(A,g,X,null,I,Mt)}for(Q in I)if(X=I[Q],Mt=_[Q],I.hasOwnProperty(Q)&&(X!=null||Mt!=null))switch(Q){case"value":Jt=X;break;case"defaultValue":Ve=X;break;case"multiple":_e=X;default:X!==Mt&&qr(A,g,Q,X,I,Mt)}g=Ve,_=_e,I=on,Jt!=null?ou(A,!!_,Jt,!1):!!I!=!!_&&(g!=null?ou(A,!!_,g,!0):ou(A,!!_,_?[]:"",!1));return;case"textarea":on=Jt=null;for(Ve in _)if(Q=_[Ve],_.hasOwnProperty(Ve)&&Q!=null&&!I.hasOwnProperty(Ve))switch(Ve){case"value":break;case"children":break;default:qr(A,g,Ve,null,I,Q)}for(_e in I)if(Q=I[_e],X=_[_e],I.hasOwnProperty(_e)&&(Q!=null||X!=null))switch(_e){case"value":Jt=Q;break;case"defaultValue":on=Q;break;case"children":break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:Q!==X&&qr(A,g,_e,Q,I,X)}Na(A,Jt,on);return;case"option":for(var Ri in _)if(Jt=_[Ri],_.hasOwnProperty(Ri)&&Jt!=null&&!I.hasOwnProperty(Ri))switch(Ri){case"selected":A.selected=!1;break;default:qr(A,g,Ri,null,I,Jt)}for(Mt in I)if(Jt=I[Mt],on=_[Mt],I.hasOwnProperty(Mt)&&Jt!==on&&(Jt!=null||on!=null))switch(Mt){case"selected":A.selected=Jt&&typeof Jt!="function"&&typeof Jt!="symbol";break;default:qr(A,g,Mt,Jt,I,on)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sr in _)Jt=_[sr],_.hasOwnProperty(sr)&&Jt!=null&&!I.hasOwnProperty(sr)&&qr(A,g,sr,null,I,Jt);for($t in I)if(Jt=I[$t],on=_[$t],I.hasOwnProperty($t)&&Jt!==on&&(Jt!=null||on!=null))switch($t){case"children":case"dangerouslySetInnerHTML":if(Jt!=null)throw Error(i(137,g));break;default:qr(A,g,$t,Jt,I,on)}return;default:if(Ga(g)){for(var _s in _)Jt=_[_s],_.hasOwnProperty(_s)&&Jt!==void 0&&!I.hasOwnProperty(_s)&&Jf(A,g,_s,void 0,I,Jt);for(un in I)Jt=I[un],on=_[un],!I.hasOwnProperty(un)||Jt===on||Jt===void 0&&on===void 0||Jf(A,g,un,Jt,I,on);return}}for(var Lt in _)Jt=_[Lt],_.hasOwnProperty(Lt)&&Jt!=null&&!I.hasOwnProperty(Lt)&&qr(A,g,Lt,null,I,Jt);for(gn in I)Jt=I[gn],on=_[gn],!I.hasOwnProperty(gn)||Jt===on||Jt==null&&on==null||qr(A,g,gn,Jt,I,on)}function sy(A){switch(A){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yg(){if(typeof performance.getEntriesByType=="function"){for(var A=0,g=0,_=performance.getEntriesByType("resource"),I=0;I<_.length;I++){var Q=_[I],X=Q.transferSize,_e=Q.initiatorType,Ve=Q.duration;if(X&&Ve&&sy(_e)){for(_e=0,Ve=Q.responseEnd,I+=1;I<_.length;I++){var Mt=_[I],$t=Mt.startTime;if($t>Ve)break;var un=Mt.transferSize,gn=Mt.initiatorType;un&&sy(gn)&&(Mt=Mt.responseEnd,_e+=un*(Mt<Ve?1:(Ve-$t)/(Mt-$t)))}if(--I,g+=8*(X+_e)/(Q.duration/1e3),A++,10<A)break}}if(0<A)return g/A/1e6}return navigator.connection&&(A=navigator.connection.downlink,typeof A=="number")?A:5}var vg=null,ay=null;function j0(A){return A.nodeType===9?A:A.ownerDocument}function bg(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Za(A,g){if(A===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&g==="foreignObject"?0:A}function of(A,g){return A==="textarea"||A==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var ly=null;function SC(){var A=window.event;return A&&A.type==="popstate"?A===ly?!1:(ly=A,!0):(ly=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,o2=typeof clearTimeout=="function"?clearTimeout:void 0,EC=typeof Promise=="function"?Promise:void 0,Qv=typeof queueMicrotask=="function"?queueMicrotask:typeof EC<"u"?function(A){return EC.resolve(null).then(A).catch(hd)}:Wv;function hd(A){setTimeout(function(){throw A})}function or(A){return A==="head"}function uy(A,g){var _=g,I=0;do{var Q=_.nextSibling;if(A.removeChild(_),Q&&Q.nodeType===8)if(_=Q.data,_==="/$"||_==="/&"){if(I===0){A.removeChild(Q),qu(g);return}I--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")I++;else if(_==="html")Cg(A.ownerDocument.documentElement);else if(_==="head"){_=A.ownerDocument.head,Cg(_);for(var X=_.firstChild;X;){var _e=X.nextSibling,Ve=X.nodeName;X[Ei]||Ve==="SCRIPT"||Ve==="STYLE"||Ve==="LINK"&&X.rel.toLowerCase()==="stylesheet"||_.removeChild(X),X=_e}}else _==="body"&&Cg(A.ownerDocument.body);_=Q}while(_);qu(g)}function Nu(A,g){var _=A;A=0;do{var I=_.nextSibling;if(_.nodeType===1?g?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(g?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),I&&I.nodeType===8)if(_=I.data,_==="/$"){if(A===0)break;A--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||A++;_=I}while(_)}function Zp(A){var g=A.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var _=g;switch(g=g.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":Zp(_),gl(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}A.removeChild(_)}}function cy(A,g,_,I){for(;A.nodeType===1;){var Q=_;if(A.nodeName.toLowerCase()!==g.toLowerCase()){if(!I&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(I){if(!A[Ei])switch(g){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(X=A.getAttribute("rel"),X==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(X!==Q.rel||A.getAttribute("href")!==(Q.href==null||Q.href===""?null:Q.href)||A.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin)||A.getAttribute("title")!==(Q.title==null?null:Q.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(X=A.getAttribute("src"),(X!==(Q.src==null?null:Q.src)||A.getAttribute("type")!==(Q.type==null?null:Q.type)||A.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin))&&X&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(g==="input"&&A.type==="hidden"){var X=Q.name==null?null:""+Q.name;if(Q.type==="hidden"&&A.getAttribute("name")===X)return A}else return A;if(A=Nc(A.nextSibling),A===null)break}return null}function ts(A,g,_){if(g==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!_||(A=Nc(A.nextSibling),A===null))return null;return A}function OC(A,g){for(;A.nodeType!==8;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=Nc(A.nextSibling),A===null))return null;return A}function Ay(A){return A.data==="$?"||A.data==="$~"}function _h(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState!=="loading"}function Vl(A,g){var _=A.ownerDocument;if(A.data==="$~")A._reactRetry=g;else if(A.data!=="$?"||_.readyState!=="loading")g();else{var I=function(){g(),_.removeEventListener("DOMContentLoaded",I)};_.addEventListener("DOMContentLoaded",I),A._reactRetry=I}}function Nc(A){for(;A!=null;A=A.nextSibling){var g=A.nodeType;if(g===1||g===3)break;if(g===8){if(g=A.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return A}var hy=null;function qv(A){A=A.nextSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="/$"||_==="/&"){if(g===0)return Nc(A.nextSibling);g--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||g++}A=A.nextSibling}return null}function dy(A){A=A.previousSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(g===0)return A;g--}else _!=="/$"&&_!=="/&"||g++}A=A.previousSibling}return null}function BC(A,g,_){switch(g=j0(_),A){case"html":if(A=g.documentElement,!A)throw Error(i(452));return A;case"head":if(A=g.head,!A)throw Error(i(453));return A;case"body":if(A=g.body,!A)throw Error(i(454));return A;default:throw Error(i(451))}}function Cg(A){for(var g=A.attributes;g.length;)A.removeAttributeNode(g[0]);gl(A)}var AA=new Map,IC=new Set;function N0(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var xh=qe.d;qe.d={f:Yv,r:kC,D:py,C:$v,L:my,m:G0,X:Gu,S:hl,M:Vv};function Yv(){var A=xh.f(),g=$1();return A||g}function kC(A){var g=ka(A);g!==null&&g.tag===5&&g.type==="form"?Al(g):xh.r(A)}var FA=typeof document>"u"?null:document;function fy(A,g,_){var I=FA;if(I&&typeof g=="string"&&g){var Q=pa(g);Q='link[rel="'+A+'"][href="'+Q+'"]',typeof _=="string"&&(Q+='[crossorigin="'+_+'"]'),IC.has(Q)||(IC.add(Q),A={rel:A,crossOrigin:_,href:g},I.querySelector(Q)===null&&(g=I.createElement("link"),Ha(g,"link",A),Ho(g),I.head.appendChild(g)))}}function py(A){xh.D(A),fy("dns-prefetch",A,null)}function $v(A,g){xh.C(A,g),fy("preconnect",A,g)}function my(A,g,_){xh.L(A,g,_);var I=FA;if(I&&A&&g){var Q='link[rel="preload"][as="'+pa(g)+'"]';g==="image"&&_&&_.imageSrcSet?(Q+='[imagesrcset="'+pa(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(Q+='[imagesizes="'+pa(_.imageSizes)+'"]')):Q+='[href="'+pa(A)+'"]';var X=Q;switch(g){case"style":X=f(A);break;case"script":X=M(A)}AA.has(X)||(A=v({rel:"preload",href:g==="image"&&_&&_.imageSrcSet?void 0:A,as:g},_),AA.set(X,A),I.querySelector(Q)!==null||g==="style"&&I.querySelector(u(X))||g==="script"&&I.querySelector(k(X))||(g=I.createElement("link"),Ha(g,"link",A),Ho(g),I.head.appendChild(g)))}}function G0(A,g){xh.m(A,g);var _=FA;if(_&&A){var I=g&&typeof g.as=="string"?g.as:"script",Q='link[rel="modulepreload"][as="'+pa(I)+'"][href="'+pa(A)+'"]',X=Q;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=M(A)}if(!AA.has(X)&&(A=v({rel:"modulepreload",href:A},g),AA.set(X,A),_.querySelector(Q)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(k(X)))return}I=_.createElement("link"),Ha(I,"link",A),Ho(I),_.head.appendChild(I)}}}function hl(A,g,_){xh.S(A,g,_);var I=FA;if(I&&A){var Q=fa(I).hoistableStyles,X=f(A);g=g||"default";var _e=Q.get(X);if(!_e){var Ve={loading:0,preload:null};if(_e=I.querySelector(u(X)))Ve.loading=5;else{A=v({rel:"stylesheet",href:A,"data-precedence":g},_),(_=AA.get(X))&&G(A,_);var Mt=_e=I.createElement("link");Ho(Mt),Ha(Mt,"link",A),Mt._p=new Promise(function($t,un){Mt.onload=$t,Mt.onerror=un}),Mt.addEventListener("load",function(){Ve.loading|=1}),Mt.addEventListener("error",function(){Ve.loading|=2}),Ve.loading|=4,K(_e,g,I)}_e={type:"stylesheet",instance:_e,count:1,state:Ve},Q.set(X,_e)}}}function Gu(A,g){xh.X(A,g);var _=FA;if(_&&A){var I=fa(_).hoistableScripts,Q=M(A),X=I.get(Q);X||(X=_.querySelector(k(Q)),X||(A=v({src:A,async:!0},g),(g=AA.get(Q))&&ee(A,g),X=_.createElement("script"),Ho(X),Ha(X,"link",A),_.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},I.set(Q,X))}}function Vv(A,g){xh.M(A,g);var _=FA;if(_&&A){var I=fa(_).hoistableScripts,Q=M(A),X=I.get(Q);X||(X=_.querySelector(k(Q)),X||(A=v({src:A,async:!0,type:"module"},g),(g=AA.get(Q))&&ee(A,g),X=_.createElement("script"),Ho(X),Ha(X,"link",A),_.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},I.set(Q,X))}}function TC(A,g,_,I){var Q=(Q=Ct.current)?N0(Q):null;if(!Q)throw Error(i(446));switch(A){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(g=f(_.href),_=fa(Q).hoistableStyles,I=_.get(g),I||(I={type:"style",instance:null,count:0,state:null},_.set(g,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){A=f(_.href);var X=fa(Q).hoistableStyles,_e=X.get(A);if(_e||(Q=Q.ownerDocument||Q,_e={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(A,_e),(X=Q.querySelector(u(A)))&&!X._p&&(_e.instance=X,_e.state.loading=5),AA.has(A)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},AA.set(A,_),X||b(Q,A,_,_e.state))),g&&I===null)throw Error(i(528,""));return _e}if(g&&I!==null)throw Error(i(529,""));return null;case"script":return g=_.async,_=_.src,typeof _=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=M(_),_=fa(Q).hoistableScripts,I=_.get(g),I||(I={type:"script",instance:null,count:0,state:null},_.set(g,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,A))}}function f(A){return'href="'+pa(A)+'"'}function u(A){return'link[rel="stylesheet"]['+A+"]"}function d(A){return v({},A,{"data-precedence":A.precedence,precedence:null})}function b(A,g,_,I){A.querySelector('link[rel="preload"][as="style"]['+g+"]")?I.loading=1:(g=A.createElement("link"),I.preload=g,g.addEventListener("load",function(){return I.loading|=1}),g.addEventListener("error",function(){return I.loading|=2}),Ha(g,"link",_),Ho(g),A.head.appendChild(g))}function M(A){return'[src="'+pa(A)+'"]'}function k(A){return"script[async]"+A}function P(A,g,_){if(g.count++,g.instance===null)switch(g.type){case"style":var I=A.querySelector('style[data-href~="'+pa(_.href)+'"]');if(I)return g.instance=I,Ho(I),I;var Q=v({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return I=(A.ownerDocument||A).createElement("style"),Ho(I),Ha(I,"style",Q),K(I,_.precedence,A),g.instance=I;case"stylesheet":Q=f(_.href);var X=A.querySelector(u(Q));if(X)return g.state.loading|=4,g.instance=X,Ho(X),X;I=d(_),(Q=AA.get(Q))&&G(I,Q),X=(A.ownerDocument||A).createElement("link"),Ho(X);var _e=X;return _e._p=new Promise(function(Ve,Mt){_e.onload=Ve,_e.onerror=Mt}),Ha(X,"link",I),g.state.loading|=4,K(X,_.precedence,A),g.instance=X;case"script":return X=M(_.src),(Q=A.querySelector(k(X)))?(g.instance=Q,Ho(Q),Q):(I=_,(Q=AA.get(X))&&(I=v({},_),ee(I,Q)),A=A.ownerDocument||A,Q=A.createElement("script"),Ho(Q),Ha(Q,"link",I),A.head.appendChild(Q),g.instance=Q);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(I=g.instance,g.state.loading|=4,K(I,_.precedence,A));return g.instance}function K(A,g,_){for(var I=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Q=I.length?I[I.length-1]:null,X=Q,_e=0;_e<I.length;_e++){var Ve=I[_e];if(Ve.dataset.precedence===g)X=Ve;else if(X!==Q)break}X?X.parentNode.insertBefore(A,X.nextSibling):(g=_.nodeType===9?_.head:_,g.insertBefore(A,g.firstChild))}function G(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.title==null&&(A.title=g.title)}function ee(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.integrity==null&&(A.integrity=g.integrity)}var ie=null;function ce(A,g,_){if(ie===null){var I=new Map,Q=ie=new Map;Q.set(_,I)}else Q=ie,I=Q.get(_),I||(I=new Map,Q.set(_,I));if(I.has(A))return I;for(I.set(A,null),_=_.getElementsByTagName(A),Q=0;Q<_.length;Q++){var X=_[Q];if(!(X[Ei]||X[kr]||A==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var _e=X.getAttribute(g)||"";_e=A+_e;var Ve=I.get(_e);Ve?Ve.push(X):I.set(_e,[X])}}return I}function Be(A,g,_){A=A.ownerDocument||A,A.head.insertBefore(_,g==="title"?A.querySelector("head > title"):null)}function Pe(A,g,_){if(_===1||g.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return A=g.disabled,typeof g.precedence=="string"&&A==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function Le(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}function Ne(A,g,_,I){if(_.type==="stylesheet"&&(typeof I.media!="string"||matchMedia(I.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var Q=f(I.href),X=g.querySelector(u(Q));if(X){g=X._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(A.count++,A=Dt.bind(A),g.then(A,A)),_.state.loading|=4,_.instance=X,Ho(X);return}X=g.ownerDocument||g,I=d(I),(Q=AA.get(Q))&&G(I,Q),X=X.createElement("link"),Ho(X);var _e=X;_e._p=new Promise(function(Ve,Mt){_e.onload=Ve,_e.onerror=Mt}),Ha(X,"link",I),_.instance=X}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(_,g),(g=_.state.preload)&&(_.state.loading&3)===0&&(A.count++,_=Dt.bind(A),g.addEventListener("load",_),g.addEventListener("error",_))}}var Ze=0;function ot(A,g){return A.stylesheets&&A.count===0&&xt(A,A.stylesheets),0<A.count||0<A.imgCount?function(_){var I=setTimeout(function(){if(A.stylesheets&&xt(A,A.stylesheets),A.unsuspend){var X=A.unsuspend;A.unsuspend=null,X()}},6e4+g);0<A.imgBytes&&Ze===0&&(Ze=62500*yg());var Q=setTimeout(function(){if(A.waitingForImages=!1,A.count===0&&(A.stylesheets&&xt(A,A.stylesheets),A.unsuspend)){var X=A.unsuspend;A.unsuspend=null,X()}},(A.imgBytes>Ze?50:800)+g);return A.unsuspend=_,function(){A.unsuspend=null,clearTimeout(I),clearTimeout(Q)}}:null}function Dt(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xt(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var dt=null;function xt(A,g){A.stylesheets=null,A.unsuspend!==null&&(A.count++,dt=new Map,g.forEach(Nt,A),dt=null,Dt.call(A))}function Nt(A,g){if(!(g.state.loading&4)){var _=dt.get(A);if(_)var I=_.get(null);else{_=new Map,dt.set(A,_);for(var Q=A.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<Q.length;X++){var _e=Q[X];(_e.nodeName==="LINK"||_e.getAttribute("media")!=="not all")&&(_.set(_e.dataset.precedence,_e),I=_e)}I&&_.set(null,I)}Q=g.instance,_e=Q.getAttribute("data-precedence"),X=_.get(_e)||I,X===I&&_.set(null,Q),_.set(_e,Q),this.count++,I=Dt.bind(this),Q.addEventListener("load",I),Q.addEventListener("error",I),X?X.parentNode.insertBefore(Q,X.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(Q,A.firstChild)),g.state.loading|=4}}var Xt={$$typeof:H,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function mn(A,g,_,I,Q,X,_e,Ve,Mt){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zn(0),this.hiddenUpdates=Zn(null),this.identifierPrefix=I,this.onUncaughtError=Q,this.onCaughtError=X,this.onRecoverableError=_e,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Mt,this.incompleteTransitions=new Map}function Qn(A,g,_,I,Q,X,_e,Ve,Mt,$t,un,gn){return A=new mn(A,g,_,_e,Mt,$t,un,gn,Ve),g=1,X===!0&&(g|=24),X=bl(3,null,null,g),A.current=X,X.stateNode=A,g=zs(),g.refCount++,A.pooledCache=g,g.refCount++,X.memoizedState={element:I,isDehydrated:_,cache:g},ll(X),A}function Kn(A){return A?(A=cr,A):cr}function Gn(A,g,_,I,Q,X){Q=Kn(Q),I.context===null?I.context=Q:I.pendingContext=Q,I=Jh(g),I.payload={element:_},X=X===void 0?null:X,X!==null&&(I.callback=X),_=Pu(A,I,g),_!==null&&(ju(_,A,g),ed(_,A,g))}function xi(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var _=A.retryLane;A.retryLane=_!==0&&_<g?_:g}}function Nn(A,g){xi(A,g),(A=A.alternate)&&xi(A,g)}function Wn(A){if(A.tag===13||A.tag===31){var g=du(A,67108864);g!==null&&ju(g,A,67108864),Nn(A,67108864)}}function an(A){if(A.tag===13||A.tag===31){var g=zc();g=er(g);var _=du(A,g);_!==null&&ju(_,A,g),Nn(A,g)}}var ji=!0;function ir(A,g,_,I){var Q=Re.T;Re.T=null;var X=qe.p;try{qe.p=2,Ai(A,g,_,I)}finally{qe.p=X,Re.T=Q}}function Ui(A,g,_,I){var Q=Re.T;Re.T=null;var X=qe.p;try{qe.p=8,Ai(A,g,_,I)}finally{qe.p=X,Re.T=Q}}function Ai(A,g,_,I){if(ji){var Q=Dr(I);if(Q===null)ry(A,g,I,Cs,_),Gc(A,I);else if(Qu(Q,A,g,_,I))I.stopPropagation();else if(Gc(A,I),g&4&&-1<Wu.indexOf(A)){for(;Q!==null;){var X=ka(Q);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var _e=gt(X.pendingLanes);if(_e!==0){var Ve=X;for(Ve.pendingLanes|=2,Ve.entangledLanes|=2;_e;){var Mt=1<<31-fe(_e);Ve.entanglements[1]|=Mt,_e&=~Mt}bh(X),(xo&6)===0&&(ud=Hn()+500,Vp(0))}}break;case 31:case 13:Ve=du(X,2),Ve!==null&&ju(Ve,X,2),$1(),Nn(X,2)}if(X=Dr(I),X===null&&ry(A,g,I,Cs,_),X===Q)break;Q=X}Q!==null&&I.stopPropagation()}else ry(A,g,I,null,_)}}function Dr(A){return A=lu(A),ba(A)}var Cs=null;function ba(A){if(Cs=null,A=Vr(A),A!==null){var g=o(A);if(g===null)A=null;else{var _=g.tag;if(_===13){if(A=s(g),A!==null)return A;A=null}else if(_===31){if(A=a(g),A!==null)return A;A=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;A=null}else g!==A&&(A=null)}}return Cs=A,null}function El(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Un()){case Tt:return 2;case Me:return 8;case oe:case le:return 32;case he:return 268435456;default:return 32}default:return 32}}var yc=!1,Ua=null,Qs=null,Do=null,la=new Map,Ca=new Map,qs=[],Wu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gc(A,g){switch(A){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Do=null;break;case"pointerover":case"pointerout":la.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(g.pointerId)}}function Ys(A,g,_,I,Q,X){return A===null||A.nativeEvent!==X?(A={blockedOn:g,domEventName:_,eventSystemFlags:I,nativeEvent:X,targetContainers:[Q]},g!==null&&(g=ka(g),g!==null&&Wn(g)),A):(A.eventSystemFlags|=I,g=A.targetContainers,Q!==null&&g.indexOf(Q)===-1&&g.push(Q),A)}function Qu(A,g,_,I,Q){switch(g){case"focusin":return Ua=Ys(Ua,A,g,_,I,Q),!0;case"dragenter":return Qs=Ys(Qs,A,g,_,I,Q),!0;case"mouseover":return Do=Ys(Do,A,g,_,I,Q),!0;case"pointerover":var X=Q.pointerId;return la.set(X,Ys(la.get(X)||null,A,g,_,I,Q)),!0;case"gotpointercapture":return X=Q.pointerId,Ca.set(X,Ys(Ca.get(X)||null,A,g,_,I,Q)),!0}return!1}function _a(A){var g=Vr(A.target);if(g!==null){var _=o(g);if(_!==null){if(g=_.tag,g===13){if(g=s(_),g!==null){A.blockedOn=g,Io(A.priority,function(){an(_)});return}}else if(g===31){if(g=a(_),g!==null){A.blockedOn=g,Io(A.priority,function(){an(_)});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){A.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}A.blockedOn=null}function xa(A){if(A.blockedOn!==null)return!1;for(var g=A.targetContainers;0<g.length;){var _=Dr(A.nativeEvent);if(_===null){_=A.nativeEvent;var I=new _.constructor(_.type,_);Xo=I,_.target.dispatchEvent(I),Xo=null}else return g=ka(_),g!==null&&Wn(g),A.blockedOn=_,!1;g.shift()}return!0}function Xa(A,g,_){xa(A)&&_.delete(g)}function La(){yc=!1,Ua!==null&&xa(Ua)&&(Ua=null),Qs!==null&&xa(Qs)&&(Qs=null),Do!==null&&xa(Do)&&(Do=null),la.forEach(Xa),Ca.forEach(Xa)}function Po(A,g){A.blockedOn===g&&(A.blockedOn=null,yc||(yc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,La)))}var Wc=null;function Xp(A){Wc!==A&&(Wc=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wc===A&&(Wc=null);for(var g=0;g<A.length;g+=3){var _=A[g],I=A[g+1],Q=A[g+2];if(typeof I!="function"){if(ba(I||_)===null)continue;break}var X=ka(_);X!==null&&(A.splice(g,3),g-=3,yu(X,{pending:!0,data:Q,method:_.method,action:I},I,Q))}}))}function qu(A){function g(Mt){return Po(Mt,A)}Ua!==null&&Po(Ua,A),Qs!==null&&Po(Qs,A),Do!==null&&Po(Do,A),la.forEach(g),Ca.forEach(g);for(var _=0;_<qs.length;_++){var I=qs[_];I.blockedOn===A&&(I.blockedOn=null)}for(;0<qs.length&&(_=qs[0],_.blockedOn===null);)_a(_),_.blockedOn===null&&qs.shift();if(_=(A.ownerDocument||A).$$reactFormReplay,_!=null)for(I=0;I<_.length;I+=3){var Q=_[I],X=_[I+1],_e=Q[hn]||null;if(typeof X=="function")_e||Xp(_);else if(_e){var Ve=null;if(X&&X.hasAttribute("formAction")){if(Q=X,_e=X[hn]||null)Ve=_e.formAction;else if(ba(Q)!==null)continue}else Ve=_e.action;typeof Ve=="function"?_[I+1]=Ve:(_.splice(I,3),I-=3),Xp(_)}}}function vc(){function A(X){X.canIntercept&&X.info==="react-transition"&&X.intercept({handler:function(){return new Promise(function(_e){return Q=_e})},focusReset:"manual",scroll:"manual"})}function g(){Q!==null&&(Q(),Q=null),I||setTimeout(_,20)}function _(){if(!I&&!navigation.transition){var X=navigation.currentEntry;X&&X.url!=null&&navigation.navigate(X.url,{state:X.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var I=!1,Q=null;return navigation.addEventListener("navigate",A),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(_,100),function(){I=!0,navigation.removeEventListener("navigate",A),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),Q!==null&&(Q(),Q=null)}}}function dd(A){this._internalRoot=A}fd.prototype.render=dd.prototype.render=function(A){var g=this._internalRoot;if(g===null)throw Error(i(409));var _=g.current,I=zc();Gn(_,I,A,g,null,null)},fd.prototype.unmount=dd.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var g=A.containerInfo;Gn(A.current,2,null,A,null,null),$1(),g[Li]=null}};function fd(A){this._internalRoot=A}fd.prototype.unstable_scheduleHydration=function(A){if(A){var g=Ti();A={blockedOn:null,target:A,priority:g};for(var _=0;_<qs.length&&g!==0&&g<qs[_].priority;_++);qs.splice(_,0,A),_===0&&_a(A)}};var Jp=e.version;if(Jp!=="19.2.0")throw Error(i(527,Jp,"19.2.0"));qe.findDOMNode=function(A){var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(i(188)):(A=Object.keys(A).join(","),Error(i(268,A)));return A=h(g),A=A!==null?m(A):null,A=A===null?null:A.stateNode,A};var _g={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Re,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{xe=sf.inject(_g),Ye=sf}catch{}}return a2.createRoot=function(A,g){if(!r(A))throw Error(i(299));var _=!1,I="",Q=I1,X=gv,_e=k1;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(Q=g.onUncaughtError),g.onCaughtError!==void 0&&(X=g.onCaughtError),g.onRecoverableError!==void 0&&(_e=g.onRecoverableError)),g=Qn(A,1,!1,null,null,_,I,null,Q,X,_e,vc),A[Li]=g.current,iy(A),new dd(g)},a2.hydrateRoot=function(A,g,_){if(!r(A))throw Error(i(299));var I=!1,Q="",X=I1,_e=gv,Ve=k1,Mt=null;return _!=null&&(_.unstable_strictMode===!0&&(I=!0),_.identifierPrefix!==void 0&&(Q=_.identifierPrefix),_.onUncaughtError!==void 0&&(X=_.onUncaughtError),_.onCaughtError!==void 0&&(_e=_.onCaughtError),_.onRecoverableError!==void 0&&(Ve=_.onRecoverableError),_.formState!==void 0&&(Mt=_.formState)),g=Qn(A,1,!0,g,_??null,I,Q,Mt,X,_e,Ve,vc),g.context=Kn(null),_=g.current,I=zc(),I=er(I),Q=Jh(I),Q.callback=null,Pu(_,Q,I),_=I,g.current.lanes=_,Xi(g,_),bh(g),A[Li]=g.current,iy(A),new fd(g)},a2.version="19.2.0",a2}var $K;function ele(){if($K)return nO.exports;$K=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),nO.exports=Jae(),nO.exports}var rZ=ele();const tle="modulepreload",nle=function(n){return"/maputnik/"+n},VK={},RC=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var s=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=h(t.map(m=>{if(m=nle(m),m in VK)return;VK[m]=!0;const v=m.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":tle,v||(S.as="script"),S.crossOrigin="",S.href=m,c&&S.setAttribute("nonce",c),document.head.appendChild(S),v)return new Promise((B,R)=>{S.addEventListener("load",B),S.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},ile=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Nr=n=>typeof n=="string",l2=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},HK=n=>n==null?"":""+n,rle=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},ole=/###/g,ZK=n=>n&&n.indexOf("###")>-1?n.replace(ole,"."):n,XK=n=>!n||Nr(n),r3=(n,e,t)=>{const i=Nr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(XK(n))return{};const o=ZK(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return XK(n)?{}:{obj:n,k:ZK(i[r])}},JK=(n,e,t)=>{const{obj:i,k:r}=r3(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=r3(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=r3(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},sle=(n,e,t,i)=>{const{obj:r,k:o}=r3(n,e,Object);r[o]=r[o]||[],r[o].push(t)},Pw=(n,e)=>{const{obj:t,k:i}=r3(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},ale=(n,e,t)=>{const i=Pw(n,t);return i!==void 0?i:Pw(e,t)},oZ=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Nr(n[i])||n[i]instanceof String||Nr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):oZ(n[i],e[i],t):n[i]=e[i]);return n},DC=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var lle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ule=n=>Nr(n)?n.replace(/[&<>"'\/]/g,e=>lle[e]):n;class cle{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Ale=[" ",",","?","!",";"],hle=new cle(20),dle=(n,e,t)=>{e=e||"",t=t||"";const i=Ale.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=hle.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},n9=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},R3=n=>n?.replace("_","-"),fle={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Uw{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||fle,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Nr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Uw(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Uw(this.logger,e)}}var Kg=new Uw;class sE{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class eF extends sE{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Nr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=Pw(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!Nr(i)?c:n9(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),JK(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(Nr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=Pw(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?oZ(c,i,o):c={...c,...i},JK(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var sZ={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const aZ=Symbol("i18next/PATH_KEY");function ple(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===aZ?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Lw(n,e){const{[aZ]:t}=n(ple());return t.join(e?.keySeparator??".")}const tF={},sO=n=>!Nr(n)&&typeof n!="boolean"&&typeof n!="number";class Kw extends sE{constructor(e,t={}){super(),rle(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Kg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=sO(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!dle(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Nr(o)?[o]:o};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),e=h.join(r)}return{key:e,namespaces:Nr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=Lw(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),h=c[c.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const v=r.lng||this.language,x=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return x?o?{res:`${h}${m}${a}`,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${m}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:a;const S=this.resolve(e,r);let B=S?.res;const R=S?.usedKey||a,F=S?.exactUsedKey||a,j=["[object Number]","[object Function]","[object RegExp]"],W=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,H=!this.i18nFormat||this.i18nFormat.handleAsObject,$=r.count!==void 0&&!Nr(r.count),N=Kw.hasDefaultValue(r),Y=$?this.pluralResolver.getSuffix(v,r.count,r):"",z=r.ordinal&&$?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",ne=$&&!r.ordinal&&r.count===0,ae=ne&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${Y}`]||r[`defaultValue${z}`]||r.defaultValue;let ve=B;H&&!B&&N&&(ve=ae);const pe=sO(ve),be=Object.prototype.toString.apply(ve);if(H&&ve&&pe&&j.indexOf(be)<0&&!(Nr(W)&&Array.isArray(ve))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(R,ve,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(S.res=Ee,S.usedParams=this.getUsedParamsDetails(r),S):Ee}if(s){const Ee=Array.isArray(ve),Te=Ee?[]:{},je=Ee?F:R;for(const Re in ve)if(Object.prototype.hasOwnProperty.call(ve,Re)){const qe=`${je}${s}${Re}`;N&&!B?Te[Re]=this.translate(qe,{...r,defaultValue:sO(ae)?ae[Re]:void 0,joinArrays:!1,ns:c}):Te[Re]=this.translate(qe,{...r,joinArrays:!1,ns:c}),Te[Re]===qe&&(Te[Re]=ve[Re])}B=Te}}else if(H&&Nr(W)&&Array.isArray(B))B=B.join(W),B&&(B=this.extendTranslation(B,e,r,i));else{let Ee=!1,Te=!1;!this.isValidLookup(B)&&N&&(Ee=!0,B=ae),this.isValidLookup(B)||(Te=!0,B=a);const Re=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Te?void 0:B,qe=N&&ae!==B&&this.options.updateMissing;if(Te||Ee||qe){if(this.logger.log(qe?"updateKey":"missingKey",v,h,a,qe?ae:B),s){const Oe=this.resolve(a,{...r,keySeparator:!1});Oe&&Oe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let nt=[];const ht=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ht&&ht[0])for(let Oe=0;Oe<ht.length;Oe++)nt.push(ht[Oe]);else this.options.saveMissingTo==="all"?nt=this.languageUtils.toResolveHierarchy(r.lng||this.language):nt.push(r.lng||this.language);const ke=(Oe,ze,we)=>{const At=N&&we!==B?we:Re;this.options.missingKeyHandler?this.options.missingKeyHandler(Oe,h,ze,At,qe,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Oe,h,ze,At,qe,r),this.emit("missingKey",Oe,h,ze,B)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?nt.forEach(Oe=>{const ze=this.pluralResolver.getSuffixes(Oe,r);ne&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ze.indexOf(`${this.options.pluralSeparator}zero`)<0&&ze.push(`${this.options.pluralSeparator}zero`),ze.forEach(we=>{ke([Oe],a+we,r[`defaultValue${we}`]||ae)})}):ke(nt,a,ae))}B=this.extendTranslation(B,e,r,S,i),Te&&B===a&&this.options.appendNamespaceToMissingKey&&(B=`${h}${m}${a}`),(Te||Ee)&&this.options.parseMissingKeyHandler&&(B=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${a}`:a,Ee?B:void 0,r))}return o?(S.res=B,S.usedParams=this.getUsedParamsDetails(r),S):B}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Nr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const v=e.match(this.interpolator.nestingRegexp);h=v&&v.length}let m=i.replace&&!Nr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,i.lng||this.language||r.usedLng,i),c){const v=e.match(this.interpolator.nestingRegexp),x=v&&v.length;h<x&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>o?.[0]===v[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=Nr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=sZ.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return Nr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(c,t),m=h.key;r=m;let v=h.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const x=t.count!==void 0&&!Nr(t.count),S=x&&!t.ordinal&&t.count===0,B=t.context!==void 0&&(Nr(t.context)||typeof t.context=="number")&&t.context!=="",R=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(F=>{this.isValidLookup(i)||(a=F,!tF[`${R[0]}-${F}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(tF[`${R[0]}-${F}`]=!0,this.logger.warn(`key "${r}" for languages "${R.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(j=>{if(this.isValidLookup(i))return;s=j;const W=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(W,m,j,F,t);else{let $;x&&($=this.pluralResolver.getSuffix(j,t.count,t));const N=`${this.options.pluralSeparator}zero`,Y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(t.ordinal&&$.indexOf(Y)===0&&W.push(m+$.replace(Y,this.options.pluralSeparator)),W.push(m+$),S&&W.push(m+N)),B){const z=`${m}${this.options.contextSeparator||"_"}${t.context}`;W.push(z),x&&(t.ordinal&&$.indexOf(Y)===0&&W.push(z+$.replace(Y,this.options.pluralSeparator)),W.push(z+$),S&&W.push(z+N))}}let H;for(;H=W.pop();)this.isValidLookup(i)||(o=H,i=this.getResource(j,F,H,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Nr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class nF{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Kg.create("languageUtils")}getScriptPartFromCode(e){if(e=R3(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=R3(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Nr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Nr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Nr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Nr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const iF={zero:0,one:1,two:2,few:3,many:4,other:5},rF={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class mle{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Kg.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=R3(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),rF;if(!e.match(/-|_/))return rF;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>iF[r]-iF[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const oF=(n,e,t,i=".",r=!0)=>{let o=ale(n,e,t);return!o&&r&&Nr(t)&&(o=n9(n,t,i),o===void 0&&(o=n9(e,t,i))),o},aO=n=>n.replace(/\$/g,"$$$$");class gle{constructor(e={}){this.logger=Kg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:m,unescapePrefix:v,nestingPrefix:x,nestingPrefixEscaped:S,nestingSuffix:B,nestingSuffixEscaped:R,nestingOptionsSeparator:F,maxReplaces:j,alwaysFormat:W}=e.interpolation;this.escape=t!==void 0?t:ule,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?DC(o):s||"{{",this.suffix=a?DC(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=x?DC(x):S||DC("$t("),this.nestingSuffix=B?DC(B):R||DC(")"),this.nestingOptionsSeparator=F||",",this.maxReplaces=j||1e3,this.alwaysFormat=W!==void 0?W:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=S=>{if(S.indexOf(this.formatSeparator)<0){const j=oF(t,c,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(j,void 0,i,{...r,...t,interpolationkey:S}):j}const B=S.split(this.formatSeparator),R=B.shift().trim(),F=B.join(this.formatSeparator).trim();return this.format(oF(t,c,R,this.options.keySeparator,this.options.ignoreJSONStructure),F,i,{...r,...t,interpolationkey:R})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>aO(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?aO(this.escape(S)):aO(S)}].forEach(S=>{for(a=0;o=S.regex.exec(e);){const B=o[1].trim();if(s=h(B),s===void 0)if(typeof m=="function"){const F=m(e,o,r);s=Nr(F)?F:""}else if(r&&Object.prototype.hasOwnProperty.call(r,B))s="";else if(v){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${B} for interpolating ${e}`),s="";else!Nr(s)&&!this.useRawValueToEscape&&(s=HK(s));const R=S.safeValue(s);if(e=e.replace(o[0],R),v?(S.regex.lastIndex+=s.length,S.regex.lastIndex-=o[0].length):S.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,h)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const v=c.split(new RegExp(`${m}[ ]*{`));let x=`{${v[1]}`;c=v[0],x=this.interpolate(x,s);const S=x.match(/'/g),B=x.match(/"/g);((S?.length??0)%2===0&&!B||B.length%2!==0)&&(x=x.replace(/'/g,'"'));try{s=JSON.parse(x),h&&(s={...h,...s})}catch(R){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,R),`${c}${m}${x}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!Nr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(c=r[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!Nr(o))return o;Nr(o)||(o=HK(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((m,v)=>this.format(m,v,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const yle=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),m=a.trim();t[m]||(t[m]=h),h==="false"&&(t[m]=!1),h==="true"&&(t[m]=!0),isNaN(h)||(t[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},sF=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(R3(i),r),e[s]=a),a(t)}},vle=n=>(e,t,i)=>n(R3(t),i)(e);class ble{constructor(e={}){this.logger=Kg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?sF:vle;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=sF(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:h,formatOptions:m}=yle(c);if(this.formats[h]){let v=a;try{const x=r?.formatParams?.[r.interpolationkey]||{},S=x.locale||x.lng||r.locale||r.lng||i;v=this.formats[h](a,S,{...m,...r,...x})}catch(x){this.logger.warn(x)}return v}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const Cle=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class _le extends sE{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Kg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(h=>{let m=!0;t.forEach(v=>{const x=`${h}|${v}`;!i.reload&&this.store.hasResourceBundle(h,v)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?s[x]===void 0&&(s[x]=!0):(this.state[x]=1,m=!1,s[x]===void 0&&(s[x]=!0),o[x]===void 0&&(o[x]=!0),c[v]===void 0&&(c[v]=!0)))}),m||(a[h]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{sle(c.loaded,[o],s),Cle(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const m=c.loaded[h];m.length&&m.forEach(v=>{a[h][v]===void 0&&(a[h][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(h&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(h,m)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(m=>a(null,m)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Nr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Nr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(e,t,i,r,c):m=h(e,t,i,r),m&&typeof m.then=="function"?m.then(v=>a(null,v)).catch(a):a(null,m)}catch(m){a(m)}else h(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const aF=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Nr(n[1])&&(e.defaultValue=n[1]),Nr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),lF=n=>(Nr(n.ns)&&(n.ns=[n.ns]),Nr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Nr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),L5=()=>{},xle=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class D3 extends sE{constructor(e={},t){if(super(),this.options=lF(e),this.services={},this.logger=Kg,this.modules={external:[]},xle(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Nr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=aF();this.options={...i,...this.options,...lF(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Kg.init(r(this.modules.logger),this.options):Kg.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=ble;const m=new nF(this.options);this.store=new eF(this.options.resources,this.options);const v=this.services;v.logger=Kg,v.resourceStore=this.store,v.languageUtils=m,v.pluralResolver=new mle(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=r(h),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new gle(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new _le(r(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(S,...B)=>{this.emit(S,...B)}),this.modules.languageDetector&&(v.languageDetector=r(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=r(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Kw(this.services,this.options),this.translator.on("*",(S,...B)=>{this.emit(S,...B)}),this.modules.external.forEach(S=>{S.init&&S.init(this)})}if(this.format=this.options.interpolation.format,t||(t=L5),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const a=l2(),c=()=>{const h=(m,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(v),t(m,v)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=L5){let i=t;const r=Nr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=l2();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=L5),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&sZ.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=l2();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...h)=>this.t(...h)),t&&t(a,(...h)=>this.t(...h))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Nr(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Nr(a)?[a]:a);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,m=>{o(m,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const h=this.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(v=>(typeof v=="function"&&(v=Lw(v,{...this.options,...s})),`${c.keyPrefix}${h}${v}`)):(typeof o=="function"&&(o=Lw(o,{...this.options,...s})),m=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o),this.t(m,c)};return Nr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=l2();return this.options.ns?(Nr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=l2();Nr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new nF(aF());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new D3(e,t)}cloneInstance(e={},t=L5){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new D3(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((m,v)=>(m[v]={...c[h][v]},m),c[h]),c),{});o.store=new eF(a,r),o.services.resourceStore=o.store}return o.translator=new Kw(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const gA=D3.createInstance();gA.createInstance=D3.createInstance;gA.createInstance;gA.dir;gA.init;gA.loadResources;gA.reloadResources;gA.use;gA.changeLanguage;gA.getFixedT;gA.t;gA.exists;gA.setDefaultNamespace;gA.hasLoadedNamespace;gA.loadNamespaces;gA.loadLanguages;const{slice:Mle,forEach:wle}=[];function Sle(n){return wle.call(Mle.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Ele(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const uF=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ole=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!uF.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!uF.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},cF={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=Ole(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var Ble={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return cF.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&cF.create(t,n,i,r,o)}},Ile={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},kle={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let PC=null;const AF=()=>{if(PC!==null)return PC;try{if(PC=typeof window<"u"&&window.localStorage!==null,!PC)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{PC=!1}return PC};var Tle={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&AF())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&AF()&&window.localStorage.setItem(t,n)}};let UC=null;const hF=()=>{if(UC!==null)return UC;try{if(UC=typeof window<"u"&&window.sessionStorage!==null,!UC)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{UC=!1}return UC};var Rle={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&hF())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&hF()&&window.sessionStorage.setItem(t,n)}},Dle={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Ple={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Ule={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},Lle={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let lZ=!1;try{document.cookie,lZ=!0}catch{}const uZ=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];lZ||uZ.splice(1,1);const Kle=()=>({order:uZ,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class cZ{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Sle(t,this.options||{},Kle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Ble),this.addDetector(Ile),this.addDetector(Tle),this.addDetector(Rle),this.addDetector(Dle),this.addDetector(Ple),this.addDetector(Ule),this.addDetector(Lle),this.addDetector(kle)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Ele(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}cZ.type="languageDetector";var Fle=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},lO,dF;function zle(){return dF||(dF=1,lO={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),lO}var jle=zle();const Nle=eu(jle);var Gle=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function fF(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Nle[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(Gle),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var Wle=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Qle=/^\s*$/,qle=Object.create(null);function AZ(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(AZ,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Yle={parse:function(n,e){e||(e={}),e.components||(e.components=qle);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Wle,function(c,h){if(s){if(c!=="</"+t.name+">")return;s=!1}var m,v=c.charAt(1)!=="/",x=c.startsWith("<!--"),S=h+c.length,B=n.charAt(S);if(x){var R=fF(c);return o<0?(i.push(R),i):((m=r[o]).children.push(R),i)}if(v&&(o++,(t=fF(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!B||B==="<"||t.children.push({type:"text",content:n.slice(S,n.indexOf("<",S))}),o===0&&i.push(t),(m=r[o-1])&&m.children.push(t),r[o]=t),(!v||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&B!=="<"&&B)){m=o===-1?i:r[o].children;var F=n.indexOf("<",S),j=n.slice(S,F===-1?void 0:F);Qle.test(j)&&(j=" "),(F>-1&&o+m.length>=0||j!==" ")&&m.push({type:"text",content:j})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+AZ("",t)},"")}};const tw=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);wf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},pF={},aE=(n,e,t,i)=>{wf(t)&&pF[t]||(wf(t)&&(pF[t]=new Date),tw(n,e,t,i))},hZ=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},i9=(n,e,t)=>{n.loadNamespaces(e,hZ(n,t))},mF=(n,e,t,i)=>{if(wf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return i9(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,hZ(n,i))},$le=(n,e,t={})=>!e.languages||!e.languages.length?(aE(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Vle=n=>n.displayName||n.name||(wf(n)&&n.length>0?n:"Unknown"),wf=n=>typeof n=="string",Uy=n=>typeof n=="object"&&n!==null,Hle=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Zle={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Xle=n=>Zle[n],Jle=n=>n.replace(Hle,Xle);let r9={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Jle};const eue=(n={})=>{r9={...r9,...n}},dZ=()=>r9;let fZ;const tue=n=>{fZ=n},qD=()=>fZ,uO=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},cO=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?w_(e):e},nue=n=>Array.isArray(n)&&n.every(wt.isValidElement),w_=n=>Array.isArray(n)?n:[n],iue=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},pZ=(n,e,t,i)=>{if(!n)return"";let r="";const o=w_(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(wf(a)){r+=`${a}`;return}if(wt.isValidElement(a)){const{props:h,type:m}=a,v=Object.keys(h).length,x=s.indexOf(m)>-1,S=h.children;if(!S&&x&&!v){r+=`<${m}/>`;return}if(!S&&(!x||v)||h.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(x&&v===1&&wf(S)){r+=`<${m}>${S}</${m}>`;return}const B=pZ(S,e,t,i);r+=`<${c}>${B}</${c}>`;return}if(a===null){tw(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(Uy(a)){const{format:h,...m}=a,v=Object.keys(m);if(v.length===1){const x=h?`${v[0]}, ${h}`:v[0];r+=`{{${x}}}`;return}tw(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}tw(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},rue=(n,e=[],t={})=>{if(!n)return n;const i=Object.keys(t),r=[...e,...i];let o="",s=0;for(;s<n.length;)if(n[s]==="<"){let a=!1;const c=n.slice(s).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(c){const h=c[1];(/^\d+$/.test(h)||r.includes(h))&&(a=!0,o+=c[0],s+=c[0].length)}if(!a){const h=n.slice(s).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(h){const m=h[1];(/^\d+$/.test(m)||r.includes(m))&&(a=!0,o+=h[0],s+=h[0].length)}}a||(o+="&lt;",s+=1)}else o+=n[s],s+=1;return o},oue=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(W=>`<${W}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const h=e??{},m=W=>{w_(W).forEach($=>{wf($)||(uO($)?m(cO($)):Uy($)&&!wt.isValidElement($)&&Object.assign(h,$))})};m(n);const v=rue(t,a,h),x=Yle.parse(`<0>${v}</0>`),S={...h,...o},B=(W,H,$)=>{const N=cO(W),Y=F(N,H.children,$);return nue(N)&&Y.length===0||W.props?.i18nIsDynamicList?N:Y},R=(W,H,$,N,Y)=>{W.dummy?(W.children=H,$.push(wt.cloneElement(W,{key:N},Y?void 0:H))):$.push(...wt.Children.map([W],z=>{const ne={...z.props};return delete ne.i18nIsDynamicList,wt.createElement(z.type,{...ne,key:N,ref:z.props.ref??z.ref},Y?null:H)}))},F=(W,H,$)=>{const N=w_(W);return w_(H).reduce((z,ne,ae)=>{const ve=ne.children?.[0]?.content&&i.services.interpolator.interpolate(ne.children[0].content,S,i.language);if(ne.type==="tag"){let pe=N[parseInt(ne.name,10)];!pe&&e&&(pe=e[ne.name]),$.length===1&&!pe&&(pe=$[0][ne.name]),pe||(pe={});const be=Object.keys(ne.attrs).length!==0?iue({props:ne.attrs},pe):pe,Ee=wt.isValidElement(be),Te=Ee&&uO(ne,!0)&&!ne.voidElement,je=c&&Uy(be)&&be.dummy&&!Ee,Re=Uy(e)&&Object.hasOwnProperty.call(e,ne.name);if(wf(be)){const qe=i.services.interpolator.interpolate(be,S,i.language);z.push(qe)}else if(uO(be)||Te){const qe=B(be,ne,$);R(be,qe,z,ae)}else if(je){const qe=F(N,ne.children,$);R(be,qe,z,ae)}else if(Number.isNaN(parseFloat(ne.name)))if(Re){const qe=B(be,ne,$);R(be,qe,z,ae,ne.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(ne.name)>-1)if(ne.voidElement)z.push(wt.createElement(ne.name,{key:`${ne.name}-${ae}`}));else{const qe=F(N,ne.children,$);z.push(wt.createElement(ne.name,{key:`${ne.name}-${ae}`},qe))}else if(ne.voidElement)z.push(`<${ne.name} />`);else{const qe=F(N,ne.children,$);z.push(`<${ne.name}>${qe}</${ne.name}>`)}else if(Uy(be)&&!Ee){const qe=ne.children[0]?ve:null;qe&&z.push(qe)}else R(be,ve,z,ae,ne.children.length!==1||!ve)}else if(ne.type==="text"){const pe=r.transWrapTextNodes,be=s?r.unescape(i.services.interpolator.interpolate(ne.content,S,i.language)):i.services.interpolator.interpolate(ne.content,S,i.language);pe?z.push(wt.createElement(pe,{key:`${ne.name}-${ae}`},be)):z.push(be)}return z},[])},j=F([{dummy:!0,children:n||[]}],x,w_(n||[]));return cO(j[0])},mZ=(n,e,t)=>{const i=n.key||e,r=wt.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return wt.createElement(wt.Fragment,null,r)}return wt.createElement(o,{key:i})},sue=(n,e)=>n.map((t,i)=>mZ(t,i,e)),aue=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:mZ(n[i],i,e)})}),t},lue=(n,e,t,i)=>n?Array.isArray(n)?sue(n,e):Uy(n)?aue(n,e):(aE(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,uue=n=>!Uy(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function cue({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:v,shouldUnescape:x,...S}){const B=m||qD();if(!B)return aE(B,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const R=v||B.t.bind(B)||(Te=>Te),F={...dZ(),...B.options?.react};let j=h||R.ns||B.options?.defaultNS;j=wf(j)?[j]:j||["translation"];const W=pZ(n,F,B,i),H=a||o?.defaultValue||W||F.transEmptyNodeValue||(typeof i=="function"?Lw(i):i),{hashTransKey:$}=F,N=i||($?$(W||H):W||H);B.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...B.options.interpolation.defaultVariables}:{...B.options.interpolation.defaultVariables});const Y=s||e!==void 0&&!B.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},z={...o,context:r||o.context,count:e,...s,...Y,defaultValue:a||o?.defaultValue,ns:j},ne=N?R(N,z):H,ae=lue(c,ne,B,i);let ve=ae||n,pe=null;uue(ae)&&(pe=ae,ve=n);const be=oue(ve,pe,ne,B,F,z,x),Ee=t??F.defaultTransParent;return Ee?wt.createElement(Ee,S,be):be}const Aue={type:"3rdParty",init(n){eue(n.options.react),tue(n)}},gZ=wt.createContext();class hue{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function _b({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:v,shouldUnescape:x,...S}){const{i18n:B,defaultNS:R}=wt.useContext(gZ)||{},F=m||B||qD(),j=v||F?.t.bind(F);return cue({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:h||j?.ns||R||F?.options?.defaultNS,i18n:F,t:v,shouldUnescape:x,...S})}var AO={exports:{}},hO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gF;function due(){if(gF)return hO;gF=1;var n=Ba();function e(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,o=n.useLayoutEffect,s=n.useDebugValue;function a(v,x){var S=x(),B=i({inst:{value:S,getSnapshot:x}}),R=B[0].inst,F=B[1];return o(function(){R.value=S,R.getSnapshot=x,c(R)&&F({inst:R})},[v,S,x]),r(function(){return c(R)&&F({inst:R}),v(function(){c(R)&&F({inst:R})})},[v]),s(S),S}function c(v){var x=v.getSnapshot;v=v.value;try{var S=x();return!t(v,S)}catch{return!0}}function h(v,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return hO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,hO}var yF;function fue(){return yF||(yF=1,AO.exports=due()),AO.exports}var pue=fue();const mue=(n,e)=>wf(e)?e:Uy(e)&&wf(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,gue={t:mue,ready:!1},yue=()=>()=>{},vue=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=wt.useContext(gZ)||{},o=t||i||qD();o&&!o.reportNamespaces&&(o.reportNamespaces=new hue),o||aE(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=wt.useMemo(()=>({...dZ(),...o?.options?.react,...e}),[o,e]),{useSuspense:a,keyPrefix:c}=s,h=wt.useMemo(()=>{const $=r||o?.options?.defaultNS;return wf($)?[$]:$||["translation"]},[n,r,o]);o?.reportNamespaces?.addUsedNamespaces?.(h);const m=wt.useRef(0),v=wt.useCallback($=>{if(!o)return yue;const{bindI18n:N,bindI18nStore:Y}=s,z=()=>{m.current+=1,$()};return N&&o.on(N,z),Y&&o.store.on(Y,z),()=>{N&&N.split(" ").forEach(ne=>o.off(ne,z)),Y&&Y.split(" ").forEach(ne=>o.store.off(ne,z))}},[o,s]),x=wt.useRef(),S=wt.useCallback(()=>{if(!o)return gue;const $=!!(o.isInitialized||o.initializedStoreOnce)&&h.every(ve=>$le(ve,o,s)),N=e.lng||o.language,Y=m.current,z=x.current;if(z&&z.ready===$&&z.lng===N&&z.keyPrefix===c&&z.revision===Y)return z;const ae={t:o.getFixedT(N,s.nsMode==="fallback"?h:h[0],c),ready:$,lng:N,keyPrefix:c,revision:Y};return x.current=ae,ae},[o,h,c,s,e.lng]),[B,R]=wt.useState(0),{t:F,ready:j}=pue.useSyncExternalStore(v,S,S);wt.useEffect(()=>{if(o&&!j&&!a){const $=()=>R(N=>N+1);e.lng?mF(o,e.lng,h,$):i9(o,h,$)}},[o,e.lng,h,j,a,B]);const W=o||{},H=wt.useMemo(()=>{const $=[F,W,j];return $.t=F,$.i18n=W,$.ready=j,$},[F,W,j]);if(o&&a&&!j)throw new Promise($=>{const N=()=>$();e.lng?mF(o,e.lng,h,N):i9(o,h,N)});return H},No=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,h,m]=vue(n,{...a,keyPrefix:e.keyPrefix}),v={...a,t:c,i18n:h,tReady:m};return e.withRef&&s?v.ref=s:!e.withRef&&s&&(v.forwardedRef=s),wt.createElement(i,v)}r.displayName=`withI18nextTranslation(${Vle(i)})`,r.WrappedComponent=i;const o=(s,a)=>wt.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?wt.forwardRef(o):r};function ca(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ca=function(){return s},s}ca();const yZ=(ca().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});ca().s[1]++;gA.use(cZ).use(Fle((n,e)=>(ca().f[0]++,ca().s[2]++,n==="en"?(ca().b[0][0]++,ca().s[3]++,{}):(ca().b[0][1]++,ca().s[4]++,ile(Object.assign({"./locales/de/translation.json":()=>(ca().f[1]++,ca().s[5]++,RC(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(ca().f[2]++,ca().s[6]++,RC(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(ca().f[3]++,ca().s[7]++,RC(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(ca().f[4]++,ca().s[8]++,RC(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(ca().f[5]++,ca().s[9]++,RC(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/zh/translation.json":()=>(ca().f[6]++,ca().s[10]++,RC(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(Aue).init({supportedLngs:Object.keys(yZ),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(ca().f[7]++,ca().s[11]++,n[0]==="en"){ca().b[1][0]++,ca().s[12]++;return}else ca().b[1][1]++;ca().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var T2={exports:{}};T2.exports;var vF;function bue(){return vF||(vF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",m="[object Function]",v="[object GeneratorFunction]",x="[object Map]",S="[object Number]",B="[object Object]",R="[object Promise]",F="[object RegExp]",j="[object Set]",W="[object String]",H="[object Symbol]",$="[object WeakMap]",N="[object ArrayBuffer]",Y="[object DataView]",z="[object Float32Array]",ne="[object Float64Array]",ae="[object Int8Array]",ve="[object Int16Array]",pe="[object Int32Array]",be="[object Uint8Array]",Ee="[object Uint8ClampedArray]",Te="[object Uint16Array]",je="[object Uint32Array]",Re=/[\\^$.*+?()[\]{}|]/g,qe=/\w*$/,nt=/^\[object .+?Constructor\]$/,ht=/^(?:0|[1-9]\d*)$/,ke={};ke[o]=ke[s]=ke[N]=ke[Y]=ke[a]=ke[c]=ke[z]=ke[ne]=ke[ae]=ke[ve]=ke[pe]=ke[x]=ke[S]=ke[B]=ke[F]=ke[j]=ke[W]=ke[H]=ke[be]=ke[Ee]=ke[Te]=ke[je]=!0,ke[h]=ke[m]=ke[$]=!1;var Oe=typeof window=="object"&&window&&window.Object===Object&&window,ze=typeof self=="object"&&self&&self.Object===Object&&self,we=Oe||ze||Function("return this")(),At=e&&!e.nodeType&&e,it=At&&!0&&n&&!n.nodeType&&n,Ct=it&&it.exports===At;function It(J,ye){return J.set(ye[0],ye[1]),J}function Ke(J,ye){return J.add(ye),J}function Ie(J,ye){for(var Qe=-1,Et=J?J.length:0;++Qe<Et&&ye(J[Qe],Qe,J)!==!1;);return J}function Se(J,ye){for(var Qe=-1,Et=ye.length,dn=J.length;++Qe<Et;)J[dn+Qe]=ye[Qe];return J}function Ge(J,ye,Qe,Et){for(var dn=-1,Bn=J?J.length:0;++dn<Bn;)Qe=ye(Qe,J[dn],dn,J);return Qe}function st(J,ye){for(var Qe=-1,Et=Array(J);++Qe<J;)Et[Qe]=ye(Qe);return Et}function ut(J,ye){return J?.[ye]}function ft(J){var ye=!1;if(J!=null&&typeof J.toString!="function")try{ye=!!(J+"")}catch{}return ye}function St(J){var ye=-1,Qe=Array(J.size);return J.forEach(function(Et,dn){Qe[++ye]=[dn,Et]}),Qe}function kt(J,ye){return function(Qe){return J(ye(Qe))}}function en(J){var ye=-1,Qe=Array(J.size);return J.forEach(function(Et){Qe[++ye]=Et}),Qe}var Pn=Array.prototype,zn=Function.prototype,si=Object.prototype,xn=we["__core-js_shared__"],Rn=(function(){var J=/[^.]+$/.exec(xn&&xn.keys&&xn.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),pn=zn.toString,Hn=si.hasOwnProperty,Un=si.toString,Tt=RegExp("^"+pn.call(Hn).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=Ct?we.Buffer:void 0,oe=we.Symbol,le=we.Uint8Array,he=kt(Object.getPrototypeOf,Object),se=Object.create,Ae=si.propertyIsEnumerable,xe=Pn.splice,Ye=Object.getOwnPropertySymbols,Xe=Me?Me.isBuffer:void 0,fe=kt(Object.keys,Object),De=Ms(we,"DataView"),y=Ms(we,"Map"),rt=Ms(we,"Promise"),Bt=Ms(we,"Set"),pt=Ms(we,"WeakMap"),Ht=Ms(Object,"create"),gt=Xo(De),jn=Xo(y),ni=Xo(rt),In=Xo(Bt),Ln=Xo(pt),Zn=oe?oe.prototype:void 0,Xi=Zn?Zn.valueOf:void 0;function Di(J){var ye=-1,Qe=J?J.length:0;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function ur(){this.__data__=Ht?Ht(null):{}}function fi(J){return this.has(J)&&delete this.__data__[J]}function Si(J){var ye=this.__data__;if(Ht){var Qe=ye[J];return Qe===i?void 0:Qe}return Hn.call(ye,J)?ye[J]:void 0}function er(J){var ye=this.__data__;return Ht?ye[J]!==void 0:Hn.call(ye,J)}function nn(J,ye){var Qe=this.__data__;return Qe[J]=Ht&&ye===void 0?i:ye,this}Di.prototype.clear=ur,Di.prototype.delete=fi,Di.prototype.get=Si,Di.prototype.has=er,Di.prototype.set=nn;function Ti(J){var ye=-1,Qe=J?J.length:0;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function Io(){this.__data__=[]}function rs(J){var ye=this.__data__,Qe=Dl(ye,J);if(Qe<0)return!1;var Et=ye.length-1;return Qe==Et?ye.pop():xe.call(ye,Qe,1),!0}function kr(J){var ye=this.__data__,Qe=Dl(ye,J);return Qe<0?void 0:ye[Qe][1]}function hn(J){return Dl(this.__data__,J)>-1}function Li(J,ye){var Qe=this.__data__,Et=Dl(Qe,J);return Et<0?Qe.push([J,ye]):Qe[Et][1]=ye,this}Ti.prototype.clear=Io,Ti.prototype.delete=rs,Ti.prototype.get=kr,Ti.prototype.has=hn,Ti.prototype.set=Li;function ii(J){var ye=-1,Qe=J?J.length:0;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function Ia(){this.__data__={hash:new Di,map:new(y||Ti),string:new Di}}function tu(J){return Na(this,J).delete(J)}function Xs(J){return Na(this,J).get(J)}function Ei(J){return Na(this,J).has(J)}function gl(J,ye){return Na(this,J).set(J,ye),this}ii.prototype.clear=Ia,ii.prototype.delete=tu,ii.prototype.get=Xs,ii.prototype.has=Ei,ii.prototype.set=gl;function Vr(J){this.__data__=new Ti(J)}function ka(){this.__data__=new Ti}function nu(J){return this.__data__.delete(J)}function fa(J){return this.__data__.get(J)}function Ho(J){return this.__data__.has(J)}function Rl(J,ye){var Qe=this.__data__;if(Qe instanceof Ti){var Et=Qe.__data__;if(!y||Et.length<t-1)return Et.push([J,ye]),this;Qe=this.__data__=new ii(Et)}return Qe.set(J,ye),this}Vr.prototype.clear=ka,Vr.prototype.delete=nu,Vr.prototype.get=fa,Vr.prototype.has=Ho,Vr.prototype.set=Rl;function Zo(J,ye){var Qe=ws(J)||so(J)?st(J.length,String):[],Et=Qe.length,dn=!!Et;for(var Bn in J)Hn.call(J,Bn)&&!(dn&&(Bn=="length"||tr(Bn,Et)))&&Qe.push(Bn);return Qe}function Qi(J,ye,Qe){var Et=J[ye];(!(Hn.call(J,ye)&&Ko(Et,Qe))||Qe===void 0&&!(ye in J))&&(J[ye]=Qe)}function Dl(J,ye){for(var Qe=J.length;Qe--;)if(Ko(J[Qe][0],ye))return Qe;return-1}function os(J,ye){return J&&rl(ye,Ul(ye),J)}function Pl(J,ye,Qe,Et,dn,Bn,ci){var Ki;if(Et&&(Ki=Bn?Et(J,dn,Bn,ci):Et(J)),Ki!==void 0)return Ki;if(!ao(J))return J;var Oi=ws(J);if(Oi){if(Ki=au(J),!ye)return oc(J,Ki)}else{var Bi=su(J),pr=Bi==m||Bi==v;if(uu(J))return ko(J,ye);if(Bi==B||Bi==o||pr&&!Bn){if(ft(J))return Bn?J:{};if(Ki=Ls(pr?{}:J),!ye)return eA(J,os(Ki,J))}else{if(!ke[Bi])return Bn?J:{};Ki=Ga(J,Bi,Pl,ye)}}ci||(ci=new Vr);var lo=ci.get(J);if(lo)return lo;if(ci.set(J,Ki),!Oi)var br=Qe?ou(J):Ul(J);return Ie(br||J,function(yr,to){br&&(to=yr,yr=J[to]),Qi(Ki,to,Pl(yr,ye,Qe,Et,to,J,ci))}),Ki}function iu(J){return ao(J)?se(J):{}}function Ou(J,ye,Qe){var Et=ye(J);return ws(J)?Et:Se(Et,Qe(J))}function Jc(J){return Un.call(J)}function nc(J){if(!ao(J)||Gi(J))return!1;var ye=mo(J)||ft(J)?Tt:nt;return ye.test(Xo(J))}function yl(J){if(!Wa(J))return fe(J);var ye=[];for(var Qe in Object(J))Hn.call(J,Qe)&&Qe!="constructor"&&ye.push(Qe);return ye}function ko(J,ye){if(ye)return J.slice();var Qe=new J.constructor(J.length);return J.copy(Qe),Qe}function ic(J){var ye=new J.constructor(J.byteLength);return new le(ye).set(new le(J)),ye}function ru(J,ye){var Qe=ye?ic(J.buffer):J.buffer;return new J.constructor(Qe,J.byteOffset,J.byteLength)}function Oc(J,ye,Qe){var Et=ye?Qe(St(J),!0):St(J);return Ge(Et,It,new J.constructor)}function rc(J){var ye=new J.constructor(J.source,qe.exec(J));return ye.lastIndex=J.lastIndex,ye}function Bc(J,ye,Qe){var Et=ye?Qe(en(J),!0):en(J);return Ge(Et,Ke,new J.constructor)}function Dh(J){return Xi?Object(Xi.call(J)):{}}function pa(J,ye){var Qe=ye?ic(J.buffer):J.buffer;return new J.constructor(Qe,J.byteOffset,J.length)}function oc(J,ye){var Qe=-1,Et=J.length;for(ye||(ye=Array(Et));++Qe<Et;)ye[Qe]=J[Qe];return ye}function rl(J,ye,Qe,Et){Qe||(Qe={});for(var dn=-1,Bn=ye.length;++dn<Bn;){var ci=ye[dn],Ki=void 0;Qi(Qe,ci,Ki===void 0?J[ci]:Ki)}return Qe}function eA(J,ye){return rl(J,To(J),ye)}function ou(J){return Ou(J,Ul,To)}function Na(J,ye){var Qe=J.__data__;return ol(ye)?Qe[typeof ye=="string"?"string":"hash"]:Qe.map}function Ms(J,ye){var Qe=ut(J,ye);return nc(Qe)?Qe:void 0}var To=Ye?kt(Ye,Object):Ni,su=Jc;(De&&su(new De(new ArrayBuffer(1)))!=Y||y&&su(new y)!=x||rt&&su(rt.resolve())!=R||Bt&&su(new Bt)!=j||pt&&su(new pt)!=$)&&(su=function(J){var ye=Un.call(J),Qe=ye==B?J.constructor:void 0,Et=Qe?Xo(Qe):void 0;if(Et)switch(Et){case gt:return Y;case jn:return x;case ni:return R;case In:return j;case Ln:return $}return ye});function au(J){var ye=J.length,Qe=J.constructor(ye);return ye&&typeof J[0]=="string"&&Hn.call(J,"index")&&(Qe.index=J.index,Qe.input=J.input),Qe}function Ls(J){return typeof J.constructor=="function"&&!Wa(J)?iu(he(J)):{}}function Ga(J,ye,Qe,Et){var dn=J.constructor;switch(ye){case N:return ic(J);case a:case c:return new dn(+J);case Y:return ru(J,Et);case z:case ne:case ae:case ve:case pe:case be:case Ee:case Te:case je:return pa(J,Et);case x:return Oc(J,Et,Qe);case S:case W:return new dn(J);case F:return rc(J);case j:return Bc(J,Et,Qe);case H:return Dh(J)}}function tr(J,ye){return ye=ye??r,!!ye&&(typeof J=="number"||ht.test(J))&&J>-1&&J%1==0&&J<ye}function ol(J){var ye=typeof J;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?J!=="__proto__":J===null}function Gi(J){return!!Rn&&Rn in J}function Wa(J){var ye=J&&J.constructor,Qe=typeof ye=="function"&&ye.prototype||si;return J===Qe}function Xo(J){if(J!=null){try{return pn.call(J)}catch{}try{return J+""}catch{}}return""}function lu(J){return Pl(J,!0,!0)}function Ko(J,ye){return J===ye||J!==J&&ye!==ye}function so(J){return _o(J)&&Hn.call(J,"callee")&&(!Ae.call(J,"callee")||Un.call(J)==o)}var ws=Array.isArray;function Mo(J){return J!=null&&ss(J.length)&&!mo(J)}function _o(J){return sl(J)&&Mo(J)}var uu=Xe||Pi;function mo(J){var ye=ao(J)?Un.call(J):"";return ye==m||ye==v}function ss(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=r}function ao(J){var ye=typeof J;return!!J&&(ye=="object"||ye=="function")}function sl(J){return!!J&&typeof J=="object"}function Ul(J){return Mo(J)?Zo(J):yl(J)}function Ni(){return[]}function Pi(){return!1}n.exports=lu})(T2,T2.exports)),T2.exports}var Cue=bue();const bF=eu(Cue);var dO,CF;function _ue(){if(CF)return dO;CF=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function h(R,F,j){return R===R&&(j!==void 0&&(R=R<=j?R:j),F!==void 0&&(R=R>=F?R:F)),R}function m(R){var F=typeof R;return!!R&&(F=="object"||F=="function")}function v(R){return!!R&&typeof R=="object"}function x(R){return typeof R=="symbol"||v(R)&&c.call(R)==e}function S(R){if(typeof R=="number")return R;if(x(R))return n;if(m(R)){var F=typeof R.valueOf=="function"?R.valueOf():R;R=m(F)?F+"":F}if(typeof R!="string")return R===0?R:+R;R=R.replace(t,"");var j=r.test(R);return j||o.test(R)?s(R.slice(2),j?2:8):i.test(R)?n:+R}function B(R,F,j){return j===void 0&&(j=F,F=void 0),j!==void 0&&(j=S(j),j=j===j?j:0),F!==void 0&&(F=S(F),F=F===F?F:0),h(S(R),F,j)}return dO=B,dO}var xue=_ue();const _F=eu(xue);var fO={},u2={},xF;function Mue(){if(xF)return u2;xF=1,u2.byteLength=a,u2.toByteArray=h,u2.fromByteArray=x;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(S){var B=S.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=S.indexOf("=");R===-1&&(R=B);var F=R===B?0:4-R%4;return[R,F]}function a(S){var B=s(S),R=B[0],F=B[1];return(R+F)*3/4-F}function c(S,B,R){return(B+R)*3/4-R}function h(S){var B,R=s(S),F=R[0],j=R[1],W=new t(c(S,F,j)),H=0,$=j>0?F-4:F,N;for(N=0;N<$;N+=4)B=e[S.charCodeAt(N)]<<18|e[S.charCodeAt(N+1)]<<12|e[S.charCodeAt(N+2)]<<6|e[S.charCodeAt(N+3)],W[H++]=B>>16&255,W[H++]=B>>8&255,W[H++]=B&255;return j===2&&(B=e[S.charCodeAt(N)]<<2|e[S.charCodeAt(N+1)]>>4,W[H++]=B&255),j===1&&(B=e[S.charCodeAt(N)]<<10|e[S.charCodeAt(N+1)]<<4|e[S.charCodeAt(N+2)]>>2,W[H++]=B>>8&255,W[H++]=B&255),W}function m(S){return n[S>>18&63]+n[S>>12&63]+n[S>>6&63]+n[S&63]}function v(S,B,R){for(var F,j=[],W=B;W<R;W+=3)F=(S[W]<<16&16711680)+(S[W+1]<<8&65280)+(S[W+2]&255),j.push(m(F));return j.join("")}function x(S){for(var B,R=S.length,F=R%3,j=[],W=16383,H=0,$=R-F;H<$;H+=W)j.push(v(S,H,H+W>$?$:H+W));return F===1?(B=S[R-1],j.push(n[B>>2]+n[B<<4&63]+"==")):F===2&&(B=(S[R-2]<<8)+S[R-1],j.push(n[B>>10]+n[B>>4&63]+n[B<<2&63]+"=")),j.join("")}return u2}var K5={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var MF;function wue(){return MF||(MF=1,K5.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,h=c>>1,m=-7,v=t?r-1:0,x=t?-1:1,S=n[e+v];for(v+=x,o=S&(1<<-m)-1,S>>=-m,m+=a;m>0;o=o*256+n[e+v],v+=x,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=i;m>0;s=s*256+n[e+v],v+=x,m-=8);if(o===0)o=1-h;else{if(o===c)return s?NaN:(S?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-h}return(S?-1:1)*s*Math.pow(2,o-i)},K5.write=function(n,e,t,i,r,o){var s,a,c,h=o*8-r-1,m=(1<<h)-1,v=m>>1,x=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=i?0:o-1,B=i?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+v>=1?e+=x/c:e+=x*Math.pow(2,1-v),e*c>=2&&(s++,c/=2),s+v>=m?(a=0,s=m):s+v>=1?(a=(e*c-1)*Math.pow(2,r),s=s+v):(a=e*Math.pow(2,v-1)*Math.pow(2,r),s=0));r>=8;n[t+S]=a&255,S+=B,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;n[t+S]=s&255,S+=B,s/=256,h-=8);n[t+S-B]|=R*128}),K5}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var wF;function Sue(){return wF||(wF=1,(function(n){const e=Mue(),t=wue(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=W,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const Me=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(Me,oe),Me.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(Me){if(Me>r)throw new RangeError('The value "'+Me+'" is invalid for option "size"');const oe=new Uint8Array(Me);return Object.setPrototypeOf(oe,a.prototype),oe}function a(Me,oe,le){if(typeof Me=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(Me)}return c(Me,oe,le)}a.poolSize=8192;function c(Me,oe,le){if(typeof Me=="string")return x(Me,oe);if(ArrayBuffer.isView(Me))return B(Me);if(Me==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me);if(Rn(Me,ArrayBuffer)||Me&&Rn(Me.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Rn(Me,SharedArrayBuffer)||Me&&Rn(Me.buffer,SharedArrayBuffer)))return R(Me,oe,le);if(typeof Me=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=Me.valueOf&&Me.valueOf();if(he!=null&&he!==Me)return a.from(he,oe,le);const se=F(Me);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Me[Symbol.toPrimitive]=="function")return a.from(Me[Symbol.toPrimitive]("string"),oe,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me)}a.from=function(Me,oe,le){return c(Me,oe,le)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(Me){if(typeof Me!="number")throw new TypeError('"size" argument must be of type number');if(Me<0)throw new RangeError('The value "'+Me+'" is invalid for option "size"')}function m(Me,oe,le){return h(Me),Me<=0?s(Me):oe!==void 0?typeof le=="string"?s(Me).fill(oe,le):s(Me).fill(oe):s(Me)}a.alloc=function(Me,oe,le){return m(Me,oe,le)};function v(Me){return h(Me),s(Me<0?0:j(Me)|0)}a.allocUnsafe=function(Me){return v(Me)},a.allocUnsafeSlow=function(Me){return v(Me)};function x(Me,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);const le=H(Me,oe)|0;let he=s(le);const se=he.write(Me,oe);return se!==le&&(he=he.slice(0,se)),he}function S(Me){const oe=Me.length<0?0:j(Me.length)|0,le=s(oe);for(let he=0;he<oe;he+=1)le[he]=Me[he]&255;return le}function B(Me){if(Rn(Me,Uint8Array)){const oe=new Uint8Array(Me);return R(oe.buffer,oe.byteOffset,oe.byteLength)}return S(Me)}function R(Me,oe,le){if(oe<0||Me.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(Me.byteLength<oe+(le||0))throw new RangeError('"length" is outside of buffer bounds');let he;return oe===void 0&&le===void 0?he=new Uint8Array(Me):le===void 0?he=new Uint8Array(Me,oe):he=new Uint8Array(Me,oe,le),Object.setPrototypeOf(he,a.prototype),he}function F(Me){if(a.isBuffer(Me)){const oe=j(Me.length)|0,le=s(oe);return le.length===0||Me.copy(le,0,0,oe),le}if(Me.length!==void 0)return typeof Me.length!="number"||pn(Me.length)?s(0):S(Me);if(Me.type==="Buffer"&&Array.isArray(Me.data))return S(Me.data)}function j(Me){if(Me>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return Me|0}function W(Me){return+Me!=Me&&(Me=0),a.alloc(+Me)}a.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==a.prototype},a.compare=function(oe,le){if(Rn(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),Rn(le,Uint8Array)&&(le=a.from(le,le.offset,le.byteLength)),!a.isBuffer(oe)||!a.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===le)return 0;let he=oe.length,se=le.length;for(let Ae=0,xe=Math.min(he,se);Ae<xe;++Ae)if(oe[Ae]!==le[Ae]){he=oe[Ae],se=le[Ae];break}return he<se?-1:se<he?1:0},a.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(oe,le){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return a.alloc(0);let he;if(le===void 0)for(le=0,he=0;he<oe.length;++he)le+=oe[he].length;const se=a.allocUnsafe(le);let Ae=0;for(he=0;he<oe.length;++he){let xe=oe[he];if(Rn(xe,Uint8Array))Ae+xe.length>se.length?(a.isBuffer(xe)||(xe=a.from(xe)),xe.copy(se,Ae)):Uint8Array.prototype.set.call(se,xe,Ae);else if(a.isBuffer(xe))xe.copy(se,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=xe.length}return se};function H(Me,oe){if(a.isBuffer(Me))return Me.length;if(ArrayBuffer.isView(Me)||Rn(Me,ArrayBuffer))return Me.byteLength;if(typeof Me!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Me);const le=Me.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&le===0)return 0;let se=!1;for(;;)switch(oe){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return en(Me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return si(Me).length;default:if(se)return he?-1:en(Me).length;oe=(""+oe).toLowerCase(),se=!0}}a.byteLength=H;function $(Me,oe,le){let he=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,oe>>>=0,le<=oe))return"";for(Me||(Me="utf8");;)switch(Me){case"hex":return ht(this,oe,le);case"utf8":case"utf-8":return Te(this,oe,le);case"ascii":return qe(this,oe,le);case"latin1":case"binary":return nt(this,oe,le);case"base64":return Ee(this,oe,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,oe,le);default:if(he)throw new TypeError("Unknown encoding: "+Me);Me=(Me+"").toLowerCase(),he=!0}}a.prototype._isBuffer=!0;function N(Me,oe,le){const he=Me[oe];Me[oe]=Me[le],Me[le]=he}a.prototype.swap16=function(){const oe=this.length;if(oe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let le=0;le<oe;le+=2)N(this,le,le+1);return this},a.prototype.swap32=function(){const oe=this.length;if(oe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let le=0;le<oe;le+=4)N(this,le,le+3),N(this,le+1,le+2);return this},a.prototype.swap64=function(){const oe=this.length;if(oe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let le=0;le<oe;le+=8)N(this,le,le+7),N(this,le+1,le+6),N(this,le+2,le+5),N(this,le+3,le+4);return this},a.prototype.toString=function(){const oe=this.length;return oe===0?"":arguments.length===0?Te(this,0,oe):$.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(oe){if(!a.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:a.compare(this,oe)===0},a.prototype.inspect=function(){let oe="";const le=n.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(oe+=" ... "),"<Buffer "+oe+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(oe,le,he,se,Ae){if(Rn(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),!a.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(le===void 0&&(le=0),he===void 0&&(he=oe?oe.length:0),se===void 0&&(se=0),Ae===void 0&&(Ae=this.length),le<0||he>oe.length||se<0||Ae>this.length)throw new RangeError("out of range index");if(se>=Ae&&le>=he)return 0;if(se>=Ae)return-1;if(le>=he)return 1;if(le>>>=0,he>>>=0,se>>>=0,Ae>>>=0,this===oe)return 0;let xe=Ae-se,Ye=he-le;const Xe=Math.min(xe,Ye),fe=this.slice(se,Ae),De=oe.slice(le,he);for(let y=0;y<Xe;++y)if(fe[y]!==De[y]){xe=fe[y],Ye=De[y];break}return xe<Ye?-1:Ye<xe?1:0};function Y(Me,oe,le,he,se){if(Me.length===0)return-1;if(typeof le=="string"?(he=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,pn(le)&&(le=se?0:Me.length-1),le<0&&(le=Me.length+le),le>=Me.length){if(se)return-1;le=Me.length-1}else if(le<0)if(se)le=0;else return-1;if(typeof oe=="string"&&(oe=a.from(oe,he)),a.isBuffer(oe))return oe.length===0?-1:z(Me,oe,le,he,se);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(Me,oe,le):Uint8Array.prototype.lastIndexOf.call(Me,oe,le):z(Me,[oe],le,he,se);throw new TypeError("val must be string, number or Buffer")}function z(Me,oe,le,he,se){let Ae=1,xe=Me.length,Ye=oe.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(Me.length<2||oe.length<2)return-1;Ae=2,xe/=2,Ye/=2,le/=2}function Xe(De,y){return Ae===1?De[y]:De.readUInt16BE(y*Ae)}let fe;if(se){let De=-1;for(fe=le;fe<xe;fe++)if(Xe(Me,fe)===Xe(oe,De===-1?0:fe-De)){if(De===-1&&(De=fe),fe-De+1===Ye)return De*Ae}else De!==-1&&(fe-=fe-De),De=-1}else for(le+Ye>xe&&(le=xe-Ye),fe=le;fe>=0;fe--){let De=!0;for(let y=0;y<Ye;y++)if(Xe(Me,fe+y)!==Xe(oe,y)){De=!1;break}if(De)return fe}return-1}a.prototype.includes=function(oe,le,he){return this.indexOf(oe,le,he)!==-1},a.prototype.indexOf=function(oe,le,he){return Y(this,oe,le,he,!0)},a.prototype.lastIndexOf=function(oe,le,he){return Y(this,oe,le,he,!1)};function ne(Me,oe,le,he){le=Number(le)||0;const se=Me.length-le;he?(he=Number(he),he>se&&(he=se)):he=se;const Ae=oe.length;he>Ae/2&&(he=Ae/2);let xe;for(xe=0;xe<he;++xe){const Ye=parseInt(oe.substr(xe*2,2),16);if(pn(Ye))return xe;Me[le+xe]=Ye}return xe}function ae(Me,oe,le,he){return xn(en(oe,Me.length-le),Me,le,he)}function ve(Me,oe,le,he){return xn(Pn(oe),Me,le,he)}function pe(Me,oe,le,he){return xn(si(oe),Me,le,he)}function be(Me,oe,le,he){return xn(zn(oe,Me.length-le),Me,le,he)}a.prototype.write=function(oe,le,he,se){if(le===void 0)se="utf8",he=this.length,le=0;else if(he===void 0&&typeof le=="string")se=le,he=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(he)?(he=he>>>0,se===void 0&&(se="utf8")):(se=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-le;if((he===void 0||he>Ae)&&(he=Ae),oe.length>0&&(he<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let xe=!1;for(;;)switch(se){case"hex":return ne(this,oe,le,he);case"utf8":case"utf-8":return ae(this,oe,le,he);case"ascii":case"latin1":case"binary":return ve(this,oe,le,he);case"base64":return pe(this,oe,le,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,oe,le,he);default:if(xe)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),xe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(Me,oe,le){return oe===0&&le===Me.length?e.fromByteArray(Me):e.fromByteArray(Me.slice(oe,le))}function Te(Me,oe,le){le=Math.min(Me.length,le);const he=[];let se=oe;for(;se<le;){const Ae=Me[se];let xe=null,Ye=Ae>239?4:Ae>223?3:Ae>191?2:1;if(se+Ye<=le){let Xe,fe,De,y;switch(Ye){case 1:Ae<128&&(xe=Ae);break;case 2:Xe=Me[se+1],(Xe&192)===128&&(y=(Ae&31)<<6|Xe&63,y>127&&(xe=y));break;case 3:Xe=Me[se+1],fe=Me[se+2],(Xe&192)===128&&(fe&192)===128&&(y=(Ae&15)<<12|(Xe&63)<<6|fe&63,y>2047&&(y<55296||y>57343)&&(xe=y));break;case 4:Xe=Me[se+1],fe=Me[se+2],De=Me[se+3],(Xe&192)===128&&(fe&192)===128&&(De&192)===128&&(y=(Ae&15)<<18|(Xe&63)<<12|(fe&63)<<6|De&63,y>65535&&y<1114112&&(xe=y))}}xe===null?(xe=65533,Ye=1):xe>65535&&(xe-=65536,he.push(xe>>>10&1023|55296),xe=56320|xe&1023),he.push(xe),se+=Ye}return Re(he)}const je=4096;function Re(Me){const oe=Me.length;if(oe<=je)return String.fromCharCode.apply(String,Me);let le="",he=0;for(;he<oe;)le+=String.fromCharCode.apply(String,Me.slice(he,he+=je));return le}function qe(Me,oe,le){let he="";le=Math.min(Me.length,le);for(let se=oe;se<le;++se)he+=String.fromCharCode(Me[se]&127);return he}function nt(Me,oe,le){let he="";le=Math.min(Me.length,le);for(let se=oe;se<le;++se)he+=String.fromCharCode(Me[se]);return he}function ht(Me,oe,le){const he=Me.length;(!oe||oe<0)&&(oe=0),(!le||le<0||le>he)&&(le=he);let se="";for(let Ae=oe;Ae<le;++Ae)se+=Hn[Me[Ae]];return se}function ke(Me,oe,le){const he=Me.slice(oe,le);let se="";for(let Ae=0;Ae<he.length-1;Ae+=2)se+=String.fromCharCode(he[Ae]+he[Ae+1]*256);return se}a.prototype.slice=function(oe,le){const he=this.length;oe=~~oe,le=le===void 0?he:~~le,oe<0?(oe+=he,oe<0&&(oe=0)):oe>he&&(oe=he),le<0?(le+=he,le<0&&(le=0)):le>he&&(le=he),le<oe&&(le=oe);const se=this.subarray(oe,le);return Object.setPrototypeOf(se,a.prototype),se};function Oe(Me,oe,le){if(Me%1!==0||Me<0)throw new RangeError("offset is not uint");if(Me+oe>le)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(oe,le,he){oe=oe>>>0,le=le>>>0,he||Oe(oe,le,this.length);let se=this[oe],Ae=1,xe=0;for(;++xe<le&&(Ae*=256);)se+=this[oe+xe]*Ae;return se},a.prototype.readUintBE=a.prototype.readUIntBE=function(oe,le,he){oe=oe>>>0,le=le>>>0,he||Oe(oe,le,this.length);let se=this[oe+--le],Ae=1;for(;le>0&&(Ae*=256);)se+=this[oe+--le]*Ae;return se},a.prototype.readUint8=a.prototype.readUInt8=function(oe,le){return oe=oe>>>0,le||Oe(oe,1,this.length),this[oe]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(oe,le){return oe=oe>>>0,le||Oe(oe,2,this.length),this[oe]|this[oe+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(oe,le){return oe=oe>>>0,le||Oe(oe,2,this.length),this[oe]<<8|this[oe+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(oe,le){return oe=oe>>>0,le||Oe(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(oe,le){return oe=oe>>>0,le||Oe(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},a.prototype.readBigUInt64LE=Un(function(oe){oe=oe>>>0,ut(oe,"offset");const le=this[oe],he=this[oe+7];(le===void 0||he===void 0)&&ft(oe,this.length-8);const se=le+this[++oe]*2**8+this[++oe]*2**16+this[++oe]*2**24,Ae=this[++oe]+this[++oe]*2**8+this[++oe]*2**16+he*2**24;return BigInt(se)+(BigInt(Ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=Un(function(oe){oe=oe>>>0,ut(oe,"offset");const le=this[oe],he=this[oe+7];(le===void 0||he===void 0)&&ft(oe,this.length-8);const se=le*2**24+this[++oe]*2**16+this[++oe]*2**8+this[++oe],Ae=this[++oe]*2**24+this[++oe]*2**16+this[++oe]*2**8+he;return(BigInt(se)<<BigInt(32))+BigInt(Ae)}),a.prototype.readIntLE=function(oe,le,he){oe=oe>>>0,le=le>>>0,he||Oe(oe,le,this.length);let se=this[oe],Ae=1,xe=0;for(;++xe<le&&(Ae*=256);)se+=this[oe+xe]*Ae;return Ae*=128,se>=Ae&&(se-=Math.pow(2,8*le)),se},a.prototype.readIntBE=function(oe,le,he){oe=oe>>>0,le=le>>>0,he||Oe(oe,le,this.length);let se=le,Ae=1,xe=this[oe+--se];for(;se>0&&(Ae*=256);)xe+=this[oe+--se]*Ae;return Ae*=128,xe>=Ae&&(xe-=Math.pow(2,8*le)),xe},a.prototype.readInt8=function(oe,le){return oe=oe>>>0,le||Oe(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},a.prototype.readInt16LE=function(oe,le){oe=oe>>>0,le||Oe(oe,2,this.length);const he=this[oe]|this[oe+1]<<8;return he&32768?he|4294901760:he},a.prototype.readInt16BE=function(oe,le){oe=oe>>>0,le||Oe(oe,2,this.length);const he=this[oe+1]|this[oe]<<8;return he&32768?he|4294901760:he},a.prototype.readInt32LE=function(oe,le){return oe=oe>>>0,le||Oe(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},a.prototype.readInt32BE=function(oe,le){return oe=oe>>>0,le||Oe(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},a.prototype.readBigInt64LE=Un(function(oe){oe=oe>>>0,ut(oe,"offset");const le=this[oe],he=this[oe+7];(le===void 0||he===void 0)&&ft(oe,this.length-8);const se=this[oe+4]+this[oe+5]*2**8+this[oe+6]*2**16+(he<<24);return(BigInt(se)<<BigInt(32))+BigInt(le+this[++oe]*2**8+this[++oe]*2**16+this[++oe]*2**24)}),a.prototype.readBigInt64BE=Un(function(oe){oe=oe>>>0,ut(oe,"offset");const le=this[oe],he=this[oe+7];(le===void 0||he===void 0)&&ft(oe,this.length-8);const se=(le<<24)+this[++oe]*2**16+this[++oe]*2**8+this[++oe];return(BigInt(se)<<BigInt(32))+BigInt(this[++oe]*2**24+this[++oe]*2**16+this[++oe]*2**8+he)}),a.prototype.readFloatLE=function(oe,le){return oe=oe>>>0,le||Oe(oe,4,this.length),t.read(this,oe,!0,23,4)},a.prototype.readFloatBE=function(oe,le){return oe=oe>>>0,le||Oe(oe,4,this.length),t.read(this,oe,!1,23,4)},a.prototype.readDoubleLE=function(oe,le){return oe=oe>>>0,le||Oe(oe,8,this.length),t.read(this,oe,!0,52,8)},a.prototype.readDoubleBE=function(oe,le){return oe=oe>>>0,le||Oe(oe,8,this.length),t.read(this,oe,!1,52,8)};function ze(Me,oe,le,he,se,Ae){if(!a.isBuffer(Me))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>se||oe<Ae)throw new RangeError('"value" argument is out of bounds');if(le+he>Me.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(oe,le,he,se){if(oe=+oe,le=le>>>0,he=he>>>0,!se){const Ye=Math.pow(2,8*he)-1;ze(this,oe,le,he,Ye,0)}let Ae=1,xe=0;for(this[le]=oe&255;++xe<he&&(Ae*=256);)this[le+xe]=oe/Ae&255;return le+he},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(oe,le,he,se){if(oe=+oe,le=le>>>0,he=he>>>0,!se){const Ye=Math.pow(2,8*he)-1;ze(this,oe,le,he,Ye,0)}let Ae=he-1,xe=1;for(this[le+Ae]=oe&255;--Ae>=0&&(xe*=256);)this[le+Ae]=oe/xe&255;return le+he},a.prototype.writeUint8=a.prototype.writeUInt8=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,1,255,0),this[le]=oe&255,le+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,2,65535,0),this[le]=oe&255,this[le+1]=oe>>>8,le+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,2,65535,0),this[le]=oe>>>8,this[le+1]=oe&255,le+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,4,4294967295,0),this[le+3]=oe>>>24,this[le+2]=oe>>>16,this[le+1]=oe>>>8,this[le]=oe&255,le+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,4,4294967295,0),this[le]=oe>>>24,this[le+1]=oe>>>16,this[le+2]=oe>>>8,this[le+3]=oe&255,le+4};function we(Me,oe,le,he,se){st(oe,he,se,Me,le,7);let Ae=Number(oe&BigInt(4294967295));Me[le++]=Ae,Ae=Ae>>8,Me[le++]=Ae,Ae=Ae>>8,Me[le++]=Ae,Ae=Ae>>8,Me[le++]=Ae;let xe=Number(oe>>BigInt(32)&BigInt(4294967295));return Me[le++]=xe,xe=xe>>8,Me[le++]=xe,xe=xe>>8,Me[le++]=xe,xe=xe>>8,Me[le++]=xe,le}function At(Me,oe,le,he,se){st(oe,he,se,Me,le,7);let Ae=Number(oe&BigInt(4294967295));Me[le+7]=Ae,Ae=Ae>>8,Me[le+6]=Ae,Ae=Ae>>8,Me[le+5]=Ae,Ae=Ae>>8,Me[le+4]=Ae;let xe=Number(oe>>BigInt(32)&BigInt(4294967295));return Me[le+3]=xe,xe=xe>>8,Me[le+2]=xe,xe=xe>>8,Me[le+1]=xe,xe=xe>>8,Me[le]=xe,le+8}a.prototype.writeBigUInt64LE=Un(function(oe,le=0){return we(this,oe,le,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Un(function(oe,le=0){return At(this,oe,le,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(oe,le,he,se){if(oe=+oe,le=le>>>0,!se){const Xe=Math.pow(2,8*he-1);ze(this,oe,le,he,Xe-1,-Xe)}let Ae=0,xe=1,Ye=0;for(this[le]=oe&255;++Ae<he&&(xe*=256);)oe<0&&Ye===0&&this[le+Ae-1]!==0&&(Ye=1),this[le+Ae]=(oe/xe>>0)-Ye&255;return le+he},a.prototype.writeIntBE=function(oe,le,he,se){if(oe=+oe,le=le>>>0,!se){const Xe=Math.pow(2,8*he-1);ze(this,oe,le,he,Xe-1,-Xe)}let Ae=he-1,xe=1,Ye=0;for(this[le+Ae]=oe&255;--Ae>=0&&(xe*=256);)oe<0&&Ye===0&&this[le+Ae+1]!==0&&(Ye=1),this[le+Ae]=(oe/xe>>0)-Ye&255;return le+he},a.prototype.writeInt8=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,1,127,-128),oe<0&&(oe=255+oe+1),this[le]=oe&255,le+1},a.prototype.writeInt16LE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,2,32767,-32768),this[le]=oe&255,this[le+1]=oe>>>8,le+2},a.prototype.writeInt16BE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,2,32767,-32768),this[le]=oe>>>8,this[le+1]=oe&255,le+2},a.prototype.writeInt32LE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,4,2147483647,-2147483648),this[le]=oe&255,this[le+1]=oe>>>8,this[le+2]=oe>>>16,this[le+3]=oe>>>24,le+4},a.prototype.writeInt32BE=function(oe,le,he){return oe=+oe,le=le>>>0,he||ze(this,oe,le,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[le]=oe>>>24,this[le+1]=oe>>>16,this[le+2]=oe>>>8,this[le+3]=oe&255,le+4},a.prototype.writeBigInt64LE=Un(function(oe,le=0){return we(this,oe,le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Un(function(oe,le=0){return At(this,oe,le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function it(Me,oe,le,he,se,Ae){if(le+he>Me.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function Ct(Me,oe,le,he,se){return oe=+oe,le=le>>>0,se||it(Me,oe,le,4),t.write(Me,oe,le,he,23,4),le+4}a.prototype.writeFloatLE=function(oe,le,he){return Ct(this,oe,le,!0,he)},a.prototype.writeFloatBE=function(oe,le,he){return Ct(this,oe,le,!1,he)};function It(Me,oe,le,he,se){return oe=+oe,le=le>>>0,se||it(Me,oe,le,8),t.write(Me,oe,le,he,52,8),le+8}a.prototype.writeDoubleLE=function(oe,le,he){return It(this,oe,le,!0,he)},a.prototype.writeDoubleBE=function(oe,le,he){return It(this,oe,le,!1,he)},a.prototype.copy=function(oe,le,he,se){if(!a.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(he||(he=0),!se&&se!==0&&(se=this.length),le>=oe.length&&(le=oe.length),le||(le=0),se>0&&se<he&&(se=he),se===he||oe.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),oe.length-le<se-he&&(se=oe.length-le+he);const Ae=se-he;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(le,he,se):Uint8Array.prototype.set.call(oe,this.subarray(he,se),le),Ae},a.prototype.fill=function(oe,le,he,se){if(typeof oe=="string"){if(typeof le=="string"?(se=le,le=0,he=this.length):typeof he=="string"&&(se=he,he=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!a.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(oe.length===1){const xe=oe.charCodeAt(0);(se==="utf8"&&xe<128||se==="latin1")&&(oe=xe)}}else typeof oe=="number"?oe=oe&255:typeof oe=="boolean"&&(oe=Number(oe));if(le<0||this.length<le||this.length<he)throw new RangeError("Out of range index");if(he<=le)return this;le=le>>>0,he=he===void 0?this.length:he>>>0,oe||(oe=0);let Ae;if(typeof oe=="number")for(Ae=le;Ae<he;++Ae)this[Ae]=oe;else{const xe=a.isBuffer(oe)?oe:a.from(oe,se),Ye=xe.length;if(Ye===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(Ae=0;Ae<he-le;++Ae)this[Ae+le]=xe[Ae%Ye]}return this};const Ke={};function Ie(Me,oe,le){Ke[Me]=class extends le{constructor(){super(),Object.defineProperty(this,"message",{value:oe.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Me}]`,this.stack,delete this.name}get code(){return Me}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${Me}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(Me){return Me?`${Me} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(Me,oe){return`The "${Me}" argument must be of type number. Received type ${typeof oe}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(Me,oe,le){let he=`The value of "${Me}" is out of range.`,se=le;return Number.isInteger(le)&&Math.abs(le)>2**32?se=Se(String(le)):typeof le=="bigint"&&(se=String(le),(le>BigInt(2)**BigInt(32)||le<-(BigInt(2)**BigInt(32)))&&(se=Se(se)),se+="n"),he+=` It must be ${oe}. Received ${se}`,he},RangeError);function Se(Me){let oe="",le=Me.length;const he=Me[0]==="-"?1:0;for(;le>=he+4;le-=3)oe=`_${Me.slice(le-3,le)}${oe}`;return`${Me.slice(0,le)}${oe}`}function Ge(Me,oe,le){ut(oe,"offset"),(Me[oe]===void 0||Me[oe+le]===void 0)&&ft(oe,Me.length-(le+1))}function st(Me,oe,le,he,se,Ae){if(Me>le||Me<oe){const xe=typeof oe=="bigint"?"n":"";let Ye;throw oe===0||oe===BigInt(0)?Ye=`>= 0${xe} and < 2${xe} ** ${(Ae+1)*8}${xe}`:Ye=`>= -(2${xe} ** ${(Ae+1)*8-1}${xe}) and < 2 ** ${(Ae+1)*8-1}${xe}`,new Ke.ERR_OUT_OF_RANGE("value",Ye,Me)}Ge(he,se,Ae)}function ut(Me,oe){if(typeof Me!="number")throw new Ke.ERR_INVALID_ARG_TYPE(oe,"number",Me)}function ft(Me,oe,le){throw Math.floor(Me)!==Me?(ut(Me,le),new Ke.ERR_OUT_OF_RANGE("offset","an integer",Me)):oe<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${oe}`,Me)}const St=/[^+/0-9A-Za-z-_]/g;function kt(Me){if(Me=Me.split("=")[0],Me=Me.trim().replace(St,""),Me.length<2)return"";for(;Me.length%4!==0;)Me=Me+"=";return Me}function en(Me,oe){oe=oe||1/0;let le;const he=Me.length;let se=null;const Ae=[];for(let xe=0;xe<he;++xe){if(le=Me.charCodeAt(xe),le>55295&&le<57344){if(!se){if(le>56319){(oe-=3)>-1&&Ae.push(239,191,189);continue}else if(xe+1===he){(oe-=3)>-1&&Ae.push(239,191,189);continue}se=le;continue}if(le<56320){(oe-=3)>-1&&Ae.push(239,191,189),se=le;continue}le=(se-55296<<10|le-56320)+65536}else se&&(oe-=3)>-1&&Ae.push(239,191,189);if(se=null,le<128){if((oe-=1)<0)break;Ae.push(le)}else if(le<2048){if((oe-=2)<0)break;Ae.push(le>>6|192,le&63|128)}else if(le<65536){if((oe-=3)<0)break;Ae.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((oe-=4)<0)break;Ae.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return Ae}function Pn(Me){const oe=[];for(let le=0;le<Me.length;++le)oe.push(Me.charCodeAt(le)&255);return oe}function zn(Me,oe){let le,he,se;const Ae=[];for(let xe=0;xe<Me.length&&!((oe-=2)<0);++xe)le=Me.charCodeAt(xe),he=le>>8,se=le%256,Ae.push(se),Ae.push(he);return Ae}function si(Me){return e.toByteArray(kt(Me))}function xn(Me,oe,le,he){let se;for(se=0;se<he&&!(se+le>=oe.length||se>=Me.length);++se)oe[se+le]=Me[se];return se}function Rn(Me,oe){return Me instanceof oe||Me!=null&&Me.constructor!=null&&Me.constructor.name!=null&&Me.constructor.name===oe.name}function pn(Me){return Me!==Me}const Hn=(function(){const Me="0123456789abcdef",oe=new Array(256);for(let le=0;le<16;++le){const he=le*16;for(let se=0;se<16;++se)oe[he+se]=Me[le]+Me[se]}return oe})();function Un(Me){return typeof BigInt>"u"?Tt:Me}function Tt(){throw new Error("BigInt not supported")}})(fO)),fO}var Eue=Sue();const Oue=eu(Eue);var pO,SF;function Bue(){if(SF)return pO;SF=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,x=typeof window=="object"&&window&&window.Object===Object&&window,S=typeof self=="object"&&self&&self.Object===Object&&self,B=x||S||Function("return this")();function R(fe,De){return fe?.[De]}function F(fe){var De=!1;if(fe!=null&&typeof fe.toString!="function")try{De=!!(fe+"")}catch{}return De}var j=Array.prototype,W=Function.prototype,H=Object.prototype,$=B["__core-js_shared__"],N=(function(){var fe=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""})(),Y=W.toString,z=H.hasOwnProperty,ne=H.toString,ae=RegExp("^"+Y.call(z).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=B.Symbol,pe=j.splice,be=si(B,"Map"),Ee=si(Object,"create"),Te=ve?ve.prototype:void 0,je=Te?Te.toString:void 0;function Re(fe){var De=-1,y=fe?fe.length:0;for(this.clear();++De<y;){var rt=fe[De];this.set(rt[0],rt[1])}}function qe(){this.__data__=Ee?Ee(null):{}}function nt(fe){return this.has(fe)&&delete this.__data__[fe]}function ht(fe){var De=this.__data__;if(Ee){var y=De[fe];return y===e?void 0:y}return z.call(De,fe)?De[fe]:void 0}function ke(fe){var De=this.__data__;return Ee?De[fe]!==void 0:z.call(De,fe)}function Oe(fe,De){var y=this.__data__;return y[fe]=Ee&&De===void 0?e:De,this}Re.prototype.clear=qe,Re.prototype.delete=nt,Re.prototype.get=ht,Re.prototype.has=ke,Re.prototype.set=Oe;function ze(fe){var De=-1,y=fe?fe.length:0;for(this.clear();++De<y;){var rt=fe[De];this.set(rt[0],rt[1])}}function we(){this.__data__=[]}function At(fe){var De=this.__data__,y=ft(De,fe);if(y<0)return!1;var rt=De.length-1;return y==rt?De.pop():pe.call(De,y,1),!0}function it(fe){var De=this.__data__,y=ft(De,fe);return y<0?void 0:De[y][1]}function Ct(fe){return ft(this.__data__,fe)>-1}function It(fe,De){var y=this.__data__,rt=ft(y,fe);return rt<0?y.push([fe,De]):y[rt][1]=De,this}ze.prototype.clear=we,ze.prototype.delete=At,ze.prototype.get=it,ze.prototype.has=Ct,ze.prototype.set=It;function Ke(fe){var De=-1,y=fe?fe.length:0;for(this.clear();++De<y;){var rt=fe[De];this.set(rt[0],rt[1])}}function Ie(){this.__data__={hash:new Re,map:new(be||ze),string:new Re}}function Se(fe){return zn(this,fe).delete(fe)}function Ge(fe){return zn(this,fe).get(fe)}function st(fe){return zn(this,fe).has(fe)}function ut(fe,De){return zn(this,fe).set(fe,De),this}Ke.prototype.clear=Ie,Ke.prototype.delete=Se,Ke.prototype.get=Ge,Ke.prototype.has=st,Ke.prototype.set=ut;function ft(fe,De){for(var y=fe.length;y--;)if(oe(fe[y][0],De))return y;return-1}function St(fe,De){De=xn(De,fe)?[De]:Pn(De);for(var y=0,rt=De.length;fe!=null&&y<rt;)fe=fe[Un(De[y++])];return y&&y==rt?fe:void 0}function kt(fe){if(!se(fe)||pn(fe))return!1;var De=he(fe)||F(fe)?ae:v;return De.test(Tt(fe))}function en(fe){if(typeof fe=="string")return fe;if(xe(fe))return je?je.call(fe):"";var De=fe+"";return De=="0"&&1/fe==-1/0?"-0":De}function Pn(fe){return le(fe)?fe:Hn(fe)}function zn(fe,De){var y=fe.__data__;return Rn(De)?y[typeof De=="string"?"string":"hash"]:y.map}function si(fe,De){var y=R(fe,De);return kt(y)?y:void 0}function xn(fe,De){if(le(fe))return!1;var y=typeof fe;return y=="number"||y=="symbol"||y=="boolean"||fe==null||xe(fe)?!0:s.test(fe)||!o.test(fe)||De!=null&&fe in Object(De)}function Rn(fe){var De=typeof fe;return De=="string"||De=="number"||De=="symbol"||De=="boolean"?fe!=="__proto__":fe===null}function pn(fe){return!!N&&N in fe}var Hn=Me(function(fe){fe=Ye(fe);var De=[];return a.test(fe)&&De.push(""),fe.replace(c,function(y,rt,Bt,pt){De.push(Bt?pt.replace(m,"$1"):rt||y)}),De});function Un(fe){if(typeof fe=="string"||xe(fe))return fe;var De=fe+"";return De=="0"&&1/fe==-1/0?"-0":De}function Tt(fe){if(fe!=null){try{return Y.call(fe)}catch{}try{return fe+""}catch{}}return""}function Me(fe,De){if(typeof fe!="function"||De&&typeof De!="function")throw new TypeError(n);var y=function(){var rt=arguments,Bt=De?De.apply(this,rt):rt[0],pt=y.cache;if(pt.has(Bt))return pt.get(Bt);var Ht=fe.apply(this,rt);return y.cache=pt.set(Bt,Ht),Ht};return y.cache=new(Me.Cache||Ke),y}Me.Cache=Ke;function oe(fe,De){return fe===De||fe!==fe&&De!==De}var le=Array.isArray;function he(fe){var De=se(fe)?ne.call(fe):"";return De==t||De==i}function se(fe){var De=typeof fe;return!!fe&&(De=="object"||De=="function")}function Ae(fe){return!!fe&&typeof fe=="object"}function xe(fe){return typeof fe=="symbol"||Ae(fe)&&ne.call(fe)==r}function Ye(fe){return fe==null?"":en(fe)}function Xe(fe,De,y){var rt=fe==null?void 0:St(fe,De);return rt===void 0?y:rt}return pO=Xe,pO}var Iue=Bue();const kue=eu(Iue);var R2={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Tue=R2.exports,EF;function Rue(){return EF||(EF=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",v=1,x=2,S=4,B=1,R=2,F=1,j=2,W=4,H=8,$=16,N=32,Y=64,z=128,ne=256,ae=512,ve=30,pe="...",be=800,Ee=16,Te=1,je=2,Re=3,qe=1/0,nt=9007199254740991,ht=17976931348623157e292,ke=NaN,Oe=4294967295,ze=Oe-1,we=Oe>>>1,At=[["ary",z],["bind",F],["bindKey",j],["curry",H],["curryRight",$],["flip",ae],["partial",N],["partialRight",Y],["rearg",ne]],it="[object Arguments]",Ct="[object Array]",It="[object AsyncFunction]",Ke="[object Boolean]",Ie="[object Date]",Se="[object DOMException]",Ge="[object Error]",st="[object Function]",ut="[object GeneratorFunction]",ft="[object Map]",St="[object Number]",kt="[object Null]",en="[object Object]",Pn="[object Promise]",zn="[object Proxy]",si="[object RegExp]",xn="[object Set]",Rn="[object String]",pn="[object Symbol]",Hn="[object Undefined]",Un="[object WeakMap]",Tt="[object WeakSet]",Me="[object ArrayBuffer]",oe="[object DataView]",le="[object Float32Array]",he="[object Float64Array]",se="[object Int8Array]",Ae="[object Int16Array]",xe="[object Int32Array]",Ye="[object Uint8Array]",Xe="[object Uint8ClampedArray]",fe="[object Uint16Array]",De="[object Uint32Array]",y=/\b__p \+= '';/g,rt=/\b(__p \+=) '' \+/g,Bt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,Ht=/[&<>"']/g,gt=RegExp(pt.source),jn=RegExp(Ht.source),ni=/<%-([\s\S]+?)%>/g,In=/<%([\s\S]+?)%>/g,Ln=/<%=([\s\S]+?)%>/g,Zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xi=/^\w*$/,Di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ur=/[\\^$.*+?()[\]{}|]/g,fi=RegExp(ur.source),Si=/^\s+/,er=/\s/,nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ti=/\{\n\/\* \[wrapped with (.+)\] \*/,Io=/,? & /,rs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kr=/[()=,{}\[\]\/\s]/,hn=/\\(\\)?/g,Li=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ii=/\w*$/,Ia=/^[-+]0x[0-9a-f]+$/i,tu=/^0b[01]+$/i,Xs=/^\[object .+?Constructor\]$/,Ei=/^0o[0-7]+$/i,gl=/^(?:0|[1-9]\d*)$/,Vr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ka=/($^)/,nu=/['\n\r\u2028\u2029\\]/g,fa="\\ud800-\\udfff",Ho="\\u0300-\\u036f",Rl="\\ufe20-\\ufe2f",Zo="\\u20d0-\\u20ff",Qi=Ho+Rl+Zo,Dl="\\u2700-\\u27bf",os="a-z\\xdf-\\xf6\\xf8-\\xff",Pl="\\xac\\xb1\\xd7\\xf7",iu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ou="\\u2000-\\u206f",Jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nc="A-Z\\xc0-\\xd6\\xd8-\\xde",yl="\\ufe0e\\ufe0f",ko=Pl+iu+Ou+Jc,ic="[']",ru="["+fa+"]",Oc="["+ko+"]",rc="["+Qi+"]",Bc="\\d+",Dh="["+Dl+"]",pa="["+os+"]",oc="[^"+fa+ko+Bc+Dl+os+nc+"]",rl="\\ud83c[\\udffb-\\udfff]",eA="(?:"+rc+"|"+rl+")",ou="[^"+fa+"]",Na="(?:\\ud83c[\\udde6-\\uddff]){2}",Ms="[\\ud800-\\udbff][\\udc00-\\udfff]",To="["+nc+"]",su="\\u200d",au="(?:"+pa+"|"+oc+")",Ls="(?:"+To+"|"+oc+")",Ga="(?:"+ic+"(?:d|ll|m|re|s|t|ve))?",tr="(?:"+ic+"(?:D|LL|M|RE|S|T|VE))?",ol=eA+"?",Gi="["+yl+"]?",Wa="(?:"+su+"(?:"+[ou,Na,Ms].join("|")+")"+Gi+ol+")*",Xo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ko=Gi+ol+Wa,so="(?:"+[Dh,Na,Ms].join("|")+")"+Ko,ws="(?:"+[ou+rc+"?",rc,Na,Ms,ru].join("|")+")",Mo=RegExp(ic,"g"),_o=RegExp(rc,"g"),uu=RegExp(rl+"(?="+rl+")|"+ws+Ko,"g"),mo=RegExp([To+"?"+pa+"+"+Ga+"(?="+[Oc,To,"$"].join("|")+")",Ls+"+"+tr+"(?="+[Oc,To+au,"$"].join("|")+")",To+"?"+au+"+"+Ga,To+"+"+tr,lu,Xo,Bc,so].join("|"),"g"),ss=RegExp("["+su+fa+Qi+yl+"]"),ao=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ul=-1,Ni={};Ni[le]=Ni[he]=Ni[se]=Ni[Ae]=Ni[xe]=Ni[Ye]=Ni[Xe]=Ni[fe]=Ni[De]=!0,Ni[it]=Ni[Ct]=Ni[Me]=Ni[Ke]=Ni[oe]=Ni[Ie]=Ni[Ge]=Ni[st]=Ni[ft]=Ni[St]=Ni[en]=Ni[si]=Ni[xn]=Ni[Rn]=Ni[Un]=!1;var Pi={};Pi[it]=Pi[Ct]=Pi[Me]=Pi[oe]=Pi[Ke]=Pi[Ie]=Pi[le]=Pi[he]=Pi[se]=Pi[Ae]=Pi[xe]=Pi[ft]=Pi[St]=Pi[en]=Pi[si]=Pi[xn]=Pi[Rn]=Pi[pn]=Pi[Ye]=Pi[Xe]=Pi[fe]=Pi[De]=!0,Pi[Ge]=Pi[st]=Pi[Un]=!1;var J={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dn=parseFloat,Bn=parseInt,ci=typeof window=="object"&&window&&window.Object===Object&&window,Ki=typeof self=="object"&&self&&self.Object===Object&&self,Oi=ci||Ki||Function("return this")(),Bi=e&&!e.nodeType&&e,pr=Bi&&!0&&n&&!n.nodeType&&n,lo=pr&&pr.exports===Bi,br=lo&&ci.process,yr=(function(){try{var Ut=pr&&pr.require&&pr.require("util").types;return Ut||br&&br.binding&&br.binding("util")}catch{}})(),to=yr&&yr.isArrayBuffer,Fo=yr&&yr.isDate,Br=yr&&yr.isMap,Ss=yr&&yr.isRegExp,ZA=yr&&yr.isSet,vl=yr&&yr.isTypedArray;function Tr(Ut,sn,rn){switch(rn.length){case 0:return Ut.call(sn);case 1:return Ut.call(sn,rn[0]);case 2:return Ut.call(sn,rn[0],rn[1]);case 3:return Ut.call(sn,rn[0],rn[1],rn[2])}return Ut.apply(sn,rn)}function _1(Ut,sn,rn,pi){for(var vr=-1,Hr=Ut==null?0:Ut.length;++vr<Hr;){var Os=Ut[vr];sn(pi,Os,rn(Os),Ut)}return pi}function cu(Ut,sn){for(var rn=-1,pi=Ut==null?0:Ut.length;++rn<pi&&sn(Ut[rn],rn,Ut)!==!1;);return Ut}function Au(Ut,sn){for(var rn=Ut==null?0:Ut.length;rn--&&sn(Ut[rn],rn,Ut)!==!1;);return Ut}function Rm(Ut,sn){for(var rn=-1,pi=Ut==null?0:Ut.length;++rn<pi;)if(!sn(Ut[rn],rn,Ut))return!1;return!0}function ta(Ut,sn){for(var rn=-1,pi=Ut==null?0:Ut.length,vr=0,Hr=[];++rn<pi;){var Os=Ut[rn];sn(Os,rn,Ut)&&(Hr[vr++]=Os)}return Hr}function yA(Ut,sn){var rn=Ut==null?0:Ut.length;return!!rn&&XA(Ut,sn,0)>-1}function Ph(Ut,sn,rn){for(var pi=-1,vr=Ut==null?0:Ut.length;++pi<vr;)if(rn(sn,Ut[pi]))return!0;return!1}function Es(Ut,sn){for(var rn=-1,pi=Ut==null?0:Ut.length,vr=Array(pi);++rn<pi;)vr[rn]=sn(Ut[rn],rn,Ut);return vr}function Bu(Ut,sn){for(var rn=-1,pi=sn.length,vr=Ut.length;++rn<pi;)Ut[vr+rn]=sn[rn];return Ut}function Of(Ut,sn,rn,pi){var vr=-1,Hr=Ut==null?0:Ut.length;for(pi&&Hr&&(rn=Ut[++vr]);++vr<Hr;)rn=sn(rn,Ut[vr],vr,Ut);return rn}function xp(Ut,sn,rn,pi){var vr=Ut==null?0:Ut.length;for(pi&&vr&&(rn=Ut[--vr]);vr--;)rn=sn(rn,Ut[vr],vr,Ut);return rn}function sc(Ut,sn){for(var rn=-1,pi=Ut==null?0:Ut.length;++rn<pi;)if(sn(Ut[rn],rn,Ut))return!0;return!1}var x1=Pd("length");function Dm(Ut){return Ut.split("")}function pv(Ut){return Ut.match(rs)||[]}function Dd(Ut,sn,rn){var pi;return rn(Ut,function(vr,Hr,Os){if(sn(vr,Hr,Os))return pi=Hr,!1}),pi}function Bf(Ut,sn,rn,pi){for(var vr=Ut.length,Hr=rn+(pi?1:-1);pi?Hr--:++Hr<vr;)if(sn(Ut[Hr],Hr,Ut))return Hr;return-1}function XA(Ut,sn,rn){return sn===sn?d0(Ut,sn,rn):Bf(Ut,Pm,rn)}function h0(Ut,sn,rn,pi){for(var vr=rn-1,Hr=Ut.length;++vr<Hr;)if(pi(Ut[vr],sn))return vr;return-1}function Pm(Ut){return Ut!==Ut}function Ll(Ut,sn){var rn=Ut==null?0:Ut.length;return rn?Mp(Ut,sn)/rn:ke}function Pd(Ut){return function(sn){return sn==null?t:sn[Ut]}}function If(Ut){return function(sn){return Ut==null?t:Ut[sn]}}function Uh(Ut,sn,rn,pi,vr){return vr(Ut,function(Hr,Os,Go){rn=pi?(pi=!1,Hr):sn(rn,Hr,Os,Go)}),rn}function kf(Ut,sn){var rn=Ut.length;for(Ut.sort(sn);rn--;)Ut[rn]=Ut[rn].value;return Ut}function Mp(Ut,sn){for(var rn,pi=-1,vr=Ut.length;++pi<vr;){var Hr=sn(Ut[pi]);Hr!==t&&(rn=rn===t?Hr:rn+Hr)}return rn}function Ud(Ut,sn){for(var rn=-1,pi=Array(Ut);++rn<Ut;)pi[rn]=sn(rn);return pi}function M1(Ut,sn){return Es(sn,function(rn){return[rn,Ut[rn]]})}function Ic(Ut){return Ut&&Ut.slice(0,JA(Ut)+1).replace(Si,"")}function ac(Ut){return function(sn){return Ut(sn)}}function Um(Ut,sn){return Es(sn,function(rn){return Ut[rn]})}function Tf(Ut,sn){return Ut.has(sn)}function wp(Ut,sn){for(var rn=-1,pi=Ut.length;++rn<pi&&XA(sn,Ut[rn],0)>-1;);return rn}function Rf(Ut,sn){for(var rn=Ut.length;rn--&&XA(sn,Ut[rn],0)>-1;);return rn}function Df(Ut,sn){for(var rn=Ut.length,pi=0;rn--;)Ut[rn]===sn&&++pi;return pi}var Pf=If(J),w1=If(ye);function Sp(Ut){return"\\"+Et[Ut]}function tA(Ut,sn){return Ut==null?t:Ut[sn]}function Lh(Ut){return ss.test(Ut)}function Lm(Ut){return ao.test(Ut)}function Ld(Ut){for(var sn,rn=[];!(sn=Ut.next()).done;)rn.push(sn.value);return rn}function Km(Ut){var sn=-1,rn=Array(Ut.size);return Ut.forEach(function(pi,vr){rn[++sn]=[vr,pi]}),rn}function Kh(Ut,sn){return function(rn){return Ut(sn(rn))}}function vA(Ut,sn){for(var rn=-1,pi=Ut.length,vr=0,Hr=[];++rn<pi;){var Os=Ut[rn];(Os===sn||Os===m)&&(Ut[rn]=m,Hr[vr++]=rn)}return Hr}function Fm(Ut){var sn=-1,rn=Array(Ut.size);return Ut.forEach(function(pi){rn[++sn]=pi}),rn}function S1(Ut){var sn=-1,rn=Array(Ut.size);return Ut.forEach(function(pi){rn[++sn]=[pi,pi]}),rn}function d0(Ut,sn,rn){for(var pi=rn-1,vr=Ut.length;++pi<vr;)if(Ut[pi]===sn)return pi;return-1}function f0(Ut,sn,rn){for(var pi=rn+1;pi--;)if(Ut[pi]===sn)return pi;return pi}function Fh(Ut){return Lh(Ut)?zm(Ut):x1(Ut)}function Ks(Ut){return Lh(Ut)?jm(Ut):Dm(Ut)}function JA(Ut){for(var sn=Ut.length;sn--&&er.test(Ut.charAt(sn)););return sn}var nA=If(Qe);function zm(Ut){for(var sn=uu.lastIndex=0;uu.test(Ut);)++sn;return sn}function jm(Ut){return Ut.match(uu)||[]}function Nm(Ut){return Ut.match(mo)||[]}var Gm=(function Ut(sn){sn=sn==null?Oi:Gr.defaults(Oi.Object(),sn,Gr.pick(Oi,sl));var rn=sn.Array,pi=sn.Date,vr=sn.Error,Hr=sn.Function,Os=sn.Math,Go=sn.Object,Ep=sn.RegExp,bA=sn.String,Kl=sn.TypeError,zh=rn.prototype,Wm=Hr.prototype,kc=Go.prototype,jh=sn["__core-js_shared__"],eh=Wm.toString,Rr=kc.hasOwnProperty,p0=0,Op=(function(){var w=/[^.]+$/.exec(jh&&jh.keys&&jh.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Fl=kc.toString,CA=eh.call(Go),hu=Oi._,th=Ep("^"+eh.call(Rr).replace(ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_A=lo?sn.Buffer:t,Iu=sn.Symbol,Nh=sn.Uint8Array,nh=_A?_A.allocUnsafe:t,du=Kh(Go.getPrototypeOf,Go),Qm=Go.create,Kd=kc.propertyIsEnumerable,cr=zh.splice,Fd=Iu?Iu.isConcatSpreadable:t,bl=Iu?Iu.iterator:t,xA=Iu?Iu.toStringTag:t,zl=(function(){try{var w=gh(Go,"defineProperty");return w({},"",{}),w}catch{}})(),m0=sn.clearTimeout!==Oi.clearTimeout&&sn.clearTimeout,qm=pi&&pi.now!==Oi.Date.now&&pi.now,Gh=sn.setTimeout!==Oi.setTimeout&&sn.setTimeout,ih=Os.ceil,Wh=Os.floor,Qh=Go.getOwnPropertySymbols,Bp=_A?_A.isBuffer:t,jl=sn.isFinite,qh=zh.join,zd=Kh(Go.keys,Go),ms=Os.max,Fs=Os.min,fu=pi.now,Cl=sn.parseInt,Tc=Os.random,iA=zh.reverse,_l=gh(sn,"DataView"),lc=gh(sn,"Map"),Ip=gh(sn,"Promise"),rA=gh(sn,"Set"),rh=gh(sn,"WeakMap"),Yh=gh(Go,"create"),na=rh&&new rh,uo={},Wr=zu(_l),MA=zu(lc),pu=zu(Ip),as=zu(rA),ku=zu(rh),Nl=Iu?Iu.prototype:t,$h=Nl?Nl.valueOf:t,wA=Nl?Nl.toString:t;function $e(w){if(Ws(w)&&!Cr(w)&&!(w instanceof hr)){if(w instanceof Qa)return w;if(Rr.call(w,"__wrapped__"))return F1(w)}return new Qa(w)}var uc=(function(){function w(){}return function(D){if(!Js(D))return{};if(Qm)return Qm(D);w.prototype=D;var V=new w;return w.prototype=t,V}})();function oA(){}function Qa(w,D){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=t}$e.templateSettings={escape:ni,evaluate:In,interpolate:Ln,variable:"",imports:{_:$e}},$e.prototype=oA.prototype,$e.prototype.constructor=$e,Qa.prototype=uc(oA.prototype),Qa.prototype.constructor=Qa;function hr(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function SA(){var w=new hr(this.__wrapped__);return w.__actions__=ra(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=ra(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=ra(this.__views__),w}function EA(){if(this.__filtered__){var w=new hr(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function sA(){var w=this.__wrapped__.value(),D=this.__dir__,V=Cr(w),de=D<0,Fe=V?w.length:0,et=Xx(0,Fe,this.__views__),_t=et.start,Pt=et.end,zt=Pt-_t,_n=de?Pt:_t-1,Mn=this.__iteratees__,Fn=Mn.length,mi=0,Zi=Fs(zt,this.__takeCount__);if(!V||!de&&Fe==zt&&Zi==zt)return jt(w,this.__actions__);var _r=[];e:for(;zt--&&mi<Zi;){_n+=D;for(var yo=-1,xr=w[_n];++yo<Fn;){var Uo=Mn[yo],qo=Uo.iteratee,af=Uo.type,Mh=qo(xr);if(af==je)xr=Mh;else if(!Mh){if(af==Te)continue e;break e}}_r[mi++]=xr}return _r}hr.prototype=uc(oA.prototype),hr.prototype.constructor=hr;function OA(w){var D=-1,V=w==null?0:w.length;for(this.clear();++D<V;){var de=w[D];this.set(de[0],de[1])}}function kp(){this.__data__=Yh?Yh(null):{},this.size=0}function cc(w){var D=this.has(w)&&delete this.__data__[w];return this.size-=D?1:0,D}function oh(w){var D=this.__data__;if(Yh){var V=D[w];return V===c?t:V}return Rr.call(D,w)?D[w]:t}function Vh(w){var D=this.__data__;return Yh?D[w]!==t:Rr.call(D,w)}function al(w,D){var V=this.__data__;return this.size+=this.has(w)?0:1,V[w]=Yh&&D===t?c:D,this}OA.prototype.clear=kp,OA.prototype.delete=cc,OA.prototype.get=oh,OA.prototype.has=Vh,OA.prototype.set=al;function Ac(w){var D=-1,V=w==null?0:w.length;for(this.clear();++D<V;){var de=w[D];this.set(de[0],de[1])}}function g0(){this.__data__=[],this.size=0}function E1(w){var D=this.__data__,V=gu(D,w);if(V<0)return!1;var de=D.length-1;return V==de?D.pop():cr.call(D,V,1),--this.size,!0}function O1(w){var D=this.__data__,V=gu(D,w);return V<0?t:D[V][1]}function Uf(w){return gu(this.__data__,w)>-1}function ls(w,D){var V=this.__data__,de=gu(V,w);return de<0?(++this.size,V.push([w,D])):V[de][1]=D,this}Ac.prototype.clear=g0,Ac.prototype.delete=E1,Ac.prototype.get=O1,Ac.prototype.has=Uf,Ac.prototype.set=ls;function zs(w){var D=-1,V=w==null?0:w.length;for(this.clear();++D<V;){var de=w[D];this.set(de[0],de[1])}}function Ta(){this.size=0,this.__data__={hash:new OA,map:new(lc||Ac),string:new OA}}function Gl(w){var D=C0(this,w).delete(w);return this.size-=D?1:0,D}function Ym(w){return C0(this,w).get(w)}function Wl(w){return C0(this,w).has(w)}function mu(w,D){var V=C0(this,w),de=V.size;return V.set(w,D),this.size+=V.size==de?0:1,this}zs.prototype.clear=Ta,zs.prototype.delete=Gl,zs.prototype.get=Ym,zs.prototype.has=Wl,zs.prototype.set=mu;function Hh(w){var D=-1,V=w==null?0:w.length;for(this.__data__=new zs;++D<V;)this.add(w[D])}function $m(w){return this.__data__.set(w,c),this}function mv(w){return this.__data__.has(w)}Hh.prototype.add=Hh.prototype.push=$m,Hh.prototype.has=mv;function Tu(w){var D=this.__data__=new Ac(w);this.size=D.size}function Zh(){this.__data__=new Ac,this.size=0}function aA(w){var D=this.__data__,V=D.delete(w);return this.size=D.size,V}function Rc(w){return this.__data__.get(w)}function Jn(w){return this.__data__.has(w)}function jd(w,D){var V=this.__data__;if(V instanceof Ac){var de=V.__data__;if(!lc||de.length<r-1)return de.push([w,D]),this.size=++V.size,this;V=this.__data__=new zs(de)}return V.set(w,D),this.size=V.size,this}Tu.prototype.clear=Zh,Tu.prototype.delete=aA,Tu.prototype.get=Rc,Tu.prototype.has=Jn,Tu.prototype.set=jd;function BA(w,D){var V=Cr(w),de=!V&&rf(w),Fe=!V&&!de&&Xf(w),et=!V&&!de&&!Fe&&of(w),_t=V||de||Fe||et,Pt=_t?Ud(w.length,bA):[],zt=Pt.length;for(var _n in w)(D||Rr.call(w,_n))&&!(_t&&(_n=="length"||Fe&&(_n=="offset"||_n=="parent")||et&&(_n=="buffer"||_n=="byteLength"||_n=="byteOffset")||PA(_n,zt)))&&Pt.push(_n);return Pt}function Lf(w){var D=w.length;return D?w[U(0,D-1)]:t}function Xh(w,D){return ig(ra(w),Du(D,0,w.length))}function sh(w){return ig(ra(w))}function Kf(w,D,V){(V!==t&&!$l(w[D],V)||V===t&&!(D in w))&&Ru(w,D,V)}function nr(w,D,V){var de=w[D];(!(Rr.call(w,D)&&$l(de,V))||V===t&&!(D in w))&&Ru(w,D,V)}function gu(w,D){for(var V=w.length;V--;)if($l(w[V][0],D))return V;return-1}function y0(w,D,V,de){return ll(w,function(Fe,et,_t){D(de,Fe,V(Fe),_t)}),de}function Ff(w,D){return w&&cl(D,hl(D),w)}function Nd(w,D){return w&&cl(D,Gu(D),w)}function Ru(w,D,V){D=="__proto__"&&zl?zl(w,D,{configurable:!0,enumerable:!0,value:V,writable:!0}):w[D]=V}function ah(w,D){for(var V=-1,de=D.length,Fe=rn(de),et=w==null;++V<de;)Fe[V]=et?t:FA(w,D[V]);return Fe}function Du(w,D,V){return w===w&&(V!==t&&(w=w<=V?w:V),D!==t&&(w=w>=D?w:D)),w}function Ql(w,D,V,de,Fe,et){var _t,Pt=D&v,zt=D&x,_n=D&S;if(V&&(_t=Fe?V(w,de,Fe,et):V(w)),_t!==t)return _t;if(!Js(w))return w;var Mn=Cr(w);if(Mn){if(_t=vv(w),!Pt)return ra(w,_t)}else{var Fn=bu(w),mi=Fn==st||Fn==ut;if(Xf(w))return Wo(w,Pt);if(Fn==en||Fn==it||mi&&!Fe){if(_t=zt||mi?{}:D1(w),!Pt)return zt?rd(w,Nd(_t,w)):dh(w,Ff(_t,w))}else{if(!Pi[Fn])return Fe?w:{};_t=lC(w,Fn,Pt)}}et||(et=new Tu);var Zi=et.get(w);if(Zi)return Zi;et.set(w,_t),j0(w)?w.forEach(function(xr){_t.add(Ql(xr,D,V,xr,w,et))}):Nv(w)&&w.forEach(function(xr,Uo){_t.set(Uo,Ql(xr,D,V,Uo,w,et))});var _r=_n?zt?yv:Jm:zt?Gu:hl,yo=Mn?t:_r(w);return cu(yo||w,function(xr,Uo){yo&&(Uo=xr,xr=w[Uo]),nr(_t,Uo,Ql(xr,D,V,Uo,w,et))}),_t}function v0(w){var D=hl(w);return function(V){return lh(V,w,D)}}function lh(w,D,V){var de=V.length;if(w==null)return!de;for(w=Go(w);de--;){var Fe=V[de],et=D[Fe],_t=w[Fe];if(_t===t&&!(Fe in w)||!et(_t))return!1}return!0}function Vm(w,D,V){if(typeof w!="function")throw new Kl(s);return w0(function(){w.apply(t,V)},D)}function Dc(w,D,V,de){var Fe=-1,et=yA,_t=!0,Pt=w.length,zt=[],_n=D.length;if(!Pt)return zt;V&&(D=Es(D,ac(V))),de?(et=Ph,_t=!1):D.length>=r&&(et=Tf,_t=!1,D=new Hh(D));e:for(;++Fe<Pt;){var Mn=w[Fe],Fn=V==null?Mn:V(Mn);if(Mn=de||Mn!==0?Mn:0,_t&&Fn===Fn){for(var mi=_n;mi--;)if(D[mi]===Fn)continue e;zt.push(Mn)}else et(D,Fn,de)||zt.push(Mn)}return zt}var ll=Ml(Ra),wo=Ml(Ah,!0);function Jh(w,D){var V=!0;return ll(w,function(de,Fe,et){return V=!!D(de,Fe,et),V}),V}function Pu(w,D,V){for(var de=-1,Fe=w.length;++de<Fe;){var et=w[de],_t=D(et);if(_t!=null&&(Pt===t?_t===_t&&!Za(_t):V(_t,Pt)))var Pt=_t,zt=et}return zt}function ed(w,D,V,de){var Fe=w.length;for(V=or(V),V<0&&(V=-V>Fe?0:Fe+V),de=de===t||de>Fe?Fe:or(de),de<0&&(de+=Fe),de=V>de?0:uy(de);V<de;)w[V++]=D;return w}function zf(w,D){var V=[];return ll(w,function(de,Fe,et){D(de,Fe,et)&&V.push(de)}),V}function ma(w,D,V,de,Fe){var et=-1,_t=w.length;for(V||(V=P1),Fe||(Fe=[]);++et<_t;){var Pt=w[et];D>0&&V(Pt)?D>1?ma(Pt,D-1,V,de,Fe):Bu(Fe,Pt):de||(Fe[Fe.length]=Pt)}return Fe}var uh=Al(),ch=Al(!0);function Ra(w,D){return w&&uh(w,D,hl)}function Ah(w,D){return w&&ch(w,D,hl)}function ri(w,D){return ta(D,function(V){return jc(w[V])})}function _i(w,D){D=Xn(D,w);for(var V=0,de=D.length;w!=null&&V<de;)w=w[ql(D[V++])];return V&&V==de?w:t}function td(w,D,V){var de=D(w);return Cr(w)?de:Bu(de,V(w))}function qa(w){return w==null?w===t?Hn:kt:xA&&xA in Go(w)?Wf(w):L1(w)}function hh(w,D){return w>D}function us(w,D){return w!=null&&Rr.call(w,D)}function hc(w,D){return w!=null&&D in Go(w)}function ul(w,D,V){return w>=Fs(D,V)&&w<ms(D,V)}function jf(w,D,V){for(var de=V?Ph:yA,Fe=w[0].length,et=w.length,_t=et,Pt=rn(et),zt=1/0,_n=[];_t--;){var Mn=w[_t];_t&&D&&(Mn=Es(Mn,ac(D))),zt=Fs(Mn.length,zt),Pt[_t]=!V&&(D||Fe>=120&&Mn.length>=120)?new Hh(_t&&Mn):t}Mn=w[0];var Fn=-1,mi=Pt[0];e:for(;++Fn<Fe&&_n.length<zt;){var Zi=Mn[Fn],_r=D?D(Zi):Zi;if(Zi=V||Zi!==0?Zi:0,!(mi?Tf(mi,_r):de(_n,_r,V))){for(_t=et;--_t;){var yo=Pt[_t];if(!(yo?Tf(yo,_r):de(w[_t],_r,V)))continue e}mi&&mi.push(_r),_n.push(Zi)}}return _n}function B1(w,D,V,de){return Ra(w,function(Fe,et,_t){D(de,V(Fe),et,_t)}),de}function xl(w,D,V){D=Xn(D,w),w=Kp(w,D);var de=w==null?w:w[ql(Gs(D))];return de==null?t:Tr(de,w,V)}function Uu(w){return Ws(w)&&qa(w)==it}function Bs(w){return Ws(w)&&qa(w)==Me}function cs(w){return Ws(w)&&qa(w)==Ie}function co(w,D,V,de,Fe){return w===D?!0:w==null||D==null||!Ws(w)&&!Ws(D)?w!==w&&D!==D:Sr(w,D,V,de,co,Fe)}function Sr(w,D,V,de,Fe,et){var _t=Cr(w),Pt=Cr(D),zt=_t?Ct:bu(w),_n=Pt?Ct:bu(D);zt=zt==it?en:zt,_n=_n==it?en:_n;var Mn=zt==en,Fn=_n==en,mi=zt==_n;if(mi&&Xf(w)){if(!Xf(D))return!1;_t=!0,Mn=!1}if(mi&&!Mn)return et||(et=new Tu),_t||of(w)?Xm(w,D,V,de,Fe,et):b0(w,D,zt,V,de,Fe,et);if(!(V&B)){var Zi=Mn&&Rr.call(w,"__wrapped__"),_r=Fn&&Rr.call(D,"__wrapped__");if(Zi||_r){var yo=Zi?w.value():w,xr=_r?D.value():D;return et||(et=new Tu),Fe(yo,xr,V,de,et)}}return mi?(et||(et=new Tu),T1(w,D,V,de,Fe,et)):!1}function So(w){return Ws(w)&&bu(w)==ft}function Ro(w,D,V,de){var Fe=V.length,et=Fe,_t=!de;if(w==null)return!et;for(w=Go(w);Fe--;){var Pt=V[Fe];if(_t&&Pt[2]?Pt[1]!==w[Pt[0]]:!(Pt[0]in w))return!1}for(;++Fe<et;){Pt=V[Fe];var zt=Pt[0],_n=w[zt],Mn=Pt[1];if(_t&&Pt[2]){if(_n===t&&!(zt in w))return!1}else{var Fn=new Tu;if(de)var mi=de(_n,Mn,zt,w,D,Fn);if(!(mi===t?co(Mn,_n,B|R,de,Fn):mi))return!1}}return!0}function nd(w){if(!Js(w)||tg(w))return!1;var D=jc(w)?th:Xs;return D.test(zu(w))}function IA(w){return Ws(w)&&qa(w)==si}function kA(w){return Ws(w)&&bu(w)==xn}function TA(w){return Ws(w)&&gg(w.length)&&!!Ni[qa(w)]}function id(w){return typeof w=="function"?w:w==null?vc:typeof w=="object"?Cr(w)?Tp(w[0],w[1]):RA(w):Ve(w)}function dc(w){if(!Lp(w))return zd(w);var D=[];for(var V in Go(w))Rr.call(w,V)&&V!="constructor"&&D.push(V);return D}function Gd(w){if(!Js(w))return $d(w);var D=Lp(w),V=[];for(var de in w)de=="constructor"&&(D||!Rr.call(w,de))||V.push(de);return V}function gs(w,D){return w<D}function Wd(w,D){var V=-1,de=gc(w)?rn(w.length):[];return ll(w,function(Fe,et,_t){de[++V]=D(Fe,et,_t)}),de}function RA(w){var D=Yd(w);return D.length==1&&D[0][2]?U1(D[0][0],D[0][1]):function(V){return V===w||Ro(V,w,D)}}function Tp(w,D){return Pp(w)&&UA(D)?U1(ql(w),D):function(V){var de=FA(V,w);return de===t&&de===D?py(V,w):co(D,de,B|R)}}function Qd(w,D,V,de,Fe){w!==D&&uh(D,function(et,_t){if(Fe||(Fe=new Tu),Js(et))Hm(w,D,_t,V,Qd,de,Fe);else{var Pt=de?de(vs(w,_t),et,_t+"",w,D,Fe):t;Pt===t&&(Pt=et),Kf(w,_t,Pt)}},Gu)}function Hm(w,D,V,de,Fe,et,_t){var Pt=vs(w,V),zt=vs(D,V),_n=_t.get(zt);if(_n){Kf(w,V,_n);return}var Mn=et?et(Pt,zt,V+"",w,D,_t):t,Fn=Mn===t;if(Fn){var mi=Cr(zt),Zi=!mi&&Xf(zt),_r=!mi&&!Zi&&of(zt);Mn=zt,mi||Zi||_r?Cr(Pt)?Mn=Pt:Va(Pt)?Mn=ra(Pt):Zi?(Fn=!1,Mn=Wo(zt,!0)):_r?(Fn=!1,Mn=Pa(zt,!0)):Mn=[]:yg(zt)||rf(zt)?(Mn=Pt,rf(Pt)?Mn=Zp(Pt):(!Js(Pt)||jc(Pt))&&(Mn=D1(zt))):Fn=!1}Fn&&(_t.set(zt,Mn),Fe(Mn,zt,de,et,_t),_t.delete(zt)),Kf(w,V,Mn)}function qd(w,D){var V=w.length;if(V)return D+=D<0?V:0,PA(D,V)?w[D]:t}function O(w,D,V){D.length?D=Es(D,function(et){return Cr(et)?function(_t){return _i(_t,et.length===1?et[0]:et)}:et}):D=[vc];var de=-1;D=Es(D,ac(qi()));var Fe=Wd(w,function(et,_t,Pt){var zt=Es(D,function(_n){return _n(et)});return{criteria:zt,index:++de,value:et}});return kf(Fe,function(et,_t){return ia(et,_t,V)})}function l(w,D){return p(w,D,function(V,de){return py(w,de)})}function p(w,D,V){for(var de=-1,Fe=D.length,et={};++de<Fe;){var _t=D[de],Pt=_i(w,_t);V(Pt,_t)&&ge(et,Xn(_t,w),Pt)}return et}function C(w){return function(D){return _i(D,w)}}function E(w,D,V,de){var Fe=de?h0:XA,et=-1,_t=D.length,Pt=w;for(w===D&&(D=ra(D)),V&&(Pt=Es(w,ac(V)));++et<_t;)for(var zt=0,_n=D[et],Mn=V?V(_n):_n;(zt=Fe(Pt,Mn,zt,de))>-1;)Pt!==w&&cr.call(Pt,zt,1),cr.call(w,zt,1);return w}function T(w,D){for(var V=w?D.length:0,de=V-1;V--;){var Fe=D[V];if(V==de||Fe!==et){var et=Fe;PA(Fe)?cr.call(w,Fe,1):Ot(w,Fe)}}return w}function U(w,D){return w+Wh(Tc()*(D-w+1))}function q(w,D,V,de){for(var Fe=-1,et=ms(ih((D-w)/(V||1)),0),_t=rn(et);et--;)_t[de?et:++Fe]=w,w+=V;return _t}function Z(w,D){var V="";if(!w||D<1||D>nt)return V;do D%2&&(V+=w),D=Wh(D/2),D&&(w+=w);while(D);return V}function re(w,D){return K1(Cv(w,D,vc),w+"")}function ue(w){return Lf(Ne(w))}function Ce(w,D){var V=Ne(w);return ig(V,Du(D,0,V.length))}function ge(w,D,V,de){if(!Js(w))return w;D=Xn(D,w);for(var Fe=-1,et=D.length,_t=et-1,Pt=w;Pt!=null&&++Fe<et;){var zt=ql(D[Fe]),_n=V;if(zt==="__proto__"||zt==="constructor"||zt==="prototype")return w;if(Fe!=_t){var Mn=Pt[zt];_n=de?de(Mn,zt,Pt):t,_n===t&&(_n=Js(Mn)?Mn:PA(D[Fe+1])?[]:{})}nr(Pt,zt,_n),Pt=Pt[zt]}return w}var Ue=na?function(w,D){return na.set(w,D),w}:vc,We=zl?function(w,D){return zl(w,"toString",{configurable:!0,enumerable:!1,value:Po(D),writable:!0})}:vc;function Je(w){return ig(Ne(w))}function He(w,D,V){var de=-1,Fe=w.length;D<0&&(D=-D>Fe?0:Fe+D),V=V>Fe?Fe:V,V<0&&(V+=Fe),Fe=D>V?0:V-D>>>0,D>>>=0;for(var et=rn(Fe);++de<Fe;)et[de]=w[de+D];return et}function tt(w,D){var V;return ll(w,function(de,Fe,et){return V=D(de,Fe,et),!V}),!!V}function at(w,D,V){var de=0,Fe=w==null?de:w.length;if(typeof D=="number"&&D===D&&Fe<=we){for(;de<Fe;){var et=de+Fe>>>1,_t=w[et];_t!==null&&!Za(_t)&&(V?_t<=D:_t<D)?de=et+1:Fe=et}return Fe}return yt(w,D,vc,V)}function yt(w,D,V,de){var Fe=0,et=w==null?0:w.length;if(et===0)return 0;D=V(D);for(var _t=D!==D,Pt=D===null,zt=Za(D),_n=D===t;Fe<et;){var Mn=Wh((Fe+et)/2),Fn=V(w[Mn]),mi=Fn!==t,Zi=Fn===null,_r=Fn===Fn,yo=Za(Fn);if(_t)var xr=de||_r;else _n?xr=_r&&(de||mi):Pt?xr=_r&&mi&&(de||!Zi):zt?xr=_r&&mi&&!Zi&&(de||!yo):Zi||yo?xr=!1:xr=de?Fn<=D:Fn<D;xr?Fe=Mn+1:et=Mn}return Fs(et,ze)}function lt(w,D){for(var V=-1,de=w.length,Fe=0,et=[];++V<de;){var _t=w[V],Pt=D?D(_t):_t;if(!V||!$l(Pt,zt)){var zt=Pt;et[Fe++]=_t===0?0:_t}}return et}function vt(w){return typeof w=="number"?w:Za(w)?ke:+w}function bt(w){if(typeof w=="string")return w;if(Cr(w))return Es(w,bt)+"";if(Za(w))return wA?wA.call(w):"";var D=w+"";return D=="0"&&1/w==-qe?"-0":D}function ct(w,D,V){var de=-1,Fe=yA,et=w.length,_t=!0,Pt=[],zt=Pt;if(V)_t=!1,Fe=Ph;else if(et>=r){var _n=D?null:Zm(w);if(_n)return Fm(_n);_t=!1,Fe=Tf,zt=new Hh}else zt=D?[]:Pt;e:for(;++de<et;){var Mn=w[de],Fn=D?D(Mn):Mn;if(Mn=V||Mn!==0?Mn:0,_t&&Fn===Fn){for(var mi=zt.length;mi--;)if(zt[mi]===Fn)continue e;D&&zt.push(Fn),Pt.push(Mn)}else Fe(zt,Fn,V)||(zt!==Pt&&zt.push(Fn),Pt.push(Mn))}return Pt}function Ot(w,D){return D=Xn(D,w),w=Kp(w,D),w==null||delete w[ql(Gs(D))]}function Qt(w,D,V,de){return ge(w,D,V(_i(w,D)),de)}function Kt(w,D,V,de){for(var Fe=w.length,et=de?Fe:-1;(de?et--:++et<Fe)&&D(w[et],et,w););return V?He(w,de?0:et,de?et+1:Fe):He(w,de?et+1:0,de?Fe:et)}function jt(w,D){var V=w;return V instanceof hr&&(V=V.value()),Of(D,function(de,Fe){return Fe.func.apply(Fe.thisArg,Bu([de],Fe.args))},V)}function Wt(w,D,V){var de=w.length;if(de<2)return de?ct(w[0]):[];for(var Fe=-1,et=rn(de);++Fe<de;)for(var _t=w[Fe],Pt=-1;++Pt<de;)Pt!=Fe&&(et[Fe]=Dc(et[Fe]||_t,w[Pt],D,V));return ct(ma(et,1),D,V)}function kn(w,D,V){for(var de=-1,Fe=w.length,et=D.length,_t={};++de<Fe;){var Pt=de<et?D[de]:t;V(_t,w[de],Pt)}return _t}function Tn(w){return Va(w)?w:[]}function ln(w){return typeof w=="function"?w:vc}function Xn(w,D){return Cr(w)?w:Pp(w,D)?[w]:Hd(ts(w))}var Hi=re;function Er(w,D,V){var de=w.length;return V=V===t?de:V,!D&&V>=de?w:He(w,D,V)}var zo=m0||function(w){return Oi.clearTimeout(w)};function Wo(w,D){if(D)return w.slice();var V=w.length,de=nh?nh(V):new w.constructor(V);return w.copy(de),de}function dr(w){var D=new w.constructor(w.byteLength);return new Nh(D).set(new Nh(w)),D}function Jo(w,D){var V=D?dr(w.buffer):w.buffer;return new w.constructor(V,w.byteOffset,w.byteLength)}function Da(w){var D=new w.constructor(w.source,ii.exec(w));return D.lastIndex=w.lastIndex,D}function Is(w){return $h?Go($h.call(w)):{}}function Pa(w,D){var V=D?dr(w.buffer):w.buffer;return new w.constructor(V,w.byteOffset,w.length)}function js(w,D){if(w!==D){var V=w!==t,de=w===null,Fe=w===w,et=Za(w),_t=D!==t,Pt=D===null,zt=D===D,_n=Za(D);if(!Pt&&!_n&&!et&&w>D||et&&_t&&zt&&!Pt&&!_n||de&&_t&&zt||!V&&zt||!Fe)return 1;if(!de&&!et&&!_n&&w<D||_n&&V&&Fe&&!de&&!et||Pt&&V&&Fe||!_t&&Fe||!zt)return-1}return 0}function ia(w,D,V){for(var de=-1,Fe=w.criteria,et=D.criteria,_t=Fe.length,Pt=V.length;++de<_t;){var zt=js(Fe[de],et[de]);if(zt){if(de>=Pt)return zt;var _n=V[de];return zt*(_n=="desc"?-1:1)}}return w.index-D.index}function ga(w,D,V,de){for(var Fe=-1,et=w.length,_t=V.length,Pt=-1,zt=D.length,_n=ms(et-_t,0),Mn=rn(zt+_n),Fn=!de;++Pt<zt;)Mn[Pt]=D[Pt];for(;++Fe<_t;)(Fn||Fe<et)&&(Mn[V[Fe]]=w[Fe]);for(;_n--;)Mn[Pt++]=w[Fe++];return Mn}function DA(w,D,V,de){for(var Fe=-1,et=w.length,_t=-1,Pt=V.length,zt=-1,_n=D.length,Mn=ms(et-Pt,0),Fn=rn(Mn+_n),mi=!de;++Fe<Mn;)Fn[Fe]=w[Fe];for(var Zi=Fe;++zt<_n;)Fn[Zi+zt]=D[zt];for(;++_t<Pt;)(mi||Fe<et)&&(Fn[Zi+V[_t]]=w[Fe++]);return Fn}function ra(w,D){var V=-1,de=w.length;for(D||(D=rn(de));++V<de;)D[V]=w[V];return D}function cl(w,D,V,de){var Fe=!V;V||(V={});for(var et=-1,_t=D.length;++et<_t;){var Pt=D[et],zt=de?de(V[Pt],w[Pt],Pt,V,w):t;zt===t&&(zt=w[Pt]),Fe?Ru(V,Pt,zt):nr(V,Pt,zt)}return V}function dh(w,D){return cl(w,R1(w),D)}function rd(w,D){return cl(w,_0(w),D)}function od(w,D){return function(V,de){var Fe=Cr(V)?_1:y0,et=D?D():{};return Fe(V,w,qi(de,2),et)}}function yu(w){return re(function(D,V){var de=-1,Fe=V.length,et=Fe>1?V[Fe-1]:t,_t=Fe>2?V[2]:t;for(et=w.length>3&&typeof et=="function"?(Fe--,et):t,_t&&Fu(V[0],V[1],_t)&&(et=Fe<3?t:et,Fe=1),D=Go(D);++de<Fe;){var Pt=V[de];Pt&&w(D,Pt,de,et)}return D})}function Ml(w,D){return function(V,de){if(V==null)return V;if(!gc(V))return w(V,de);for(var Fe=V.length,et=D?Fe:-1,_t=Go(V);(D?et--:++et<Fe)&&de(_t[et],et,_t)!==!1;);return V}}function Al(w){return function(D,V,de){for(var Fe=-1,et=Go(D),_t=de(D),Pt=_t.length;Pt--;){var zt=_t[w?Pt:++Fe];if(V(et[zt],zt,et)===!1)break}return D}}function Pc(w,D,V){var de=D&F,Fe=oa(w);function et(){var _t=this&&this!==Oi&&this instanceof et?Fe:w;return _t.apply(de?V:this,arguments)}return et}function sd(w){return function(D){D=ts(D);var V=Lh(D)?Ks(D):t,de=V?V[0]:D.charAt(0),Fe=V?Er(V,1).join(""):D.slice(1);return de[w]()+Fe}}function ys(w){return function(D){return Of(Qu(Xt(D).replace(Mo,"")),w,"")}}function oa(w){return function(){var D=arguments;switch(D.length){case 0:return new w;case 1:return new w(D[0]);case 2:return new w(D[0],D[1]);case 3:return new w(D[0],D[1],D[2]);case 4:return new w(D[0],D[1],D[2],D[3]);case 5:return new w(D[0],D[1],D[2],D[3],D[4]);case 6:return new w(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new w(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var V=uc(w.prototype),de=w.apply(V,D);return Js(de)?de:V}}function Lu(w,D,V){var de=oa(w);function Fe(){for(var et=arguments.length,_t=rn(et),Pt=et,zt=ya(Fe);Pt--;)_t[Pt]=arguments[Pt];var _n=et<3&&_t[0]!==zt&&_t[et-1]!==zt?[]:vA(_t,zt);if(et-=_n.length,et<V)return Gf(w,D,Ku,Fe.placeholder,t,_t,_n,t,t,V-et);var Mn=this&&this!==Oi&&this instanceof Fe?de:w;return Tr(Mn,this,_t)}return Fe}function Ns(w){return function(D,V,de){var Fe=Go(D);if(!gc(D)){var et=qi(V,3);D=hl(D),V=function(Pt){return et(Fe[Pt],Pt,Fe)}}var _t=w(D,V,de);return _t>-1?Fe[et?D[_t]:_t]:t}}function Uc(w){return ad(function(D){var V=D.length,de=V,Fe=Qa.prototype.thru;for(w&&D.reverse();de--;){var et=D[de];if(typeof et!="function")throw new Kl(s);if(Fe&&!_t&&sa(et)=="wrapper")var _t=new Qa([],!0)}for(de=_t?de:V;++de<V;){et=D[de];var Pt=sa(et),zt=Pt=="wrapper"?Dp(et):t;zt&&Up(zt[0])&&zt[1]==(z|H|N|ne)&&!zt[4].length&&zt[9]==1?_t=_t[sa(zt[0])].apply(_t,zt[3]):_t=et.length==1&&Up(et)?_t[Pt]():_t.thru(et)}return function(){var _n=arguments,Mn=_n[0];if(_t&&_n.length==1&&Cr(Mn))return _t.plant(Mn).value();for(var Fn=0,mi=V?D[Fn].apply(this,_n):Mn;++Fn<V;)mi=D[Fn].call(this,mi);return mi}})}function Ku(w,D,V,de,Fe,et,_t,Pt,zt,_n){var Mn=D&z,Fn=D&F,mi=D&j,Zi=D&(H|$),_r=D&ae,yo=mi?t:oa(w);function xr(){for(var Uo=arguments.length,qo=rn(Uo),af=Uo;af--;)qo[af]=arguments[af];if(Zi)var Mh=ya(xr),lf=Df(qo,Mh);if(de&&(qo=ga(qo,de,Fe,Zi)),et&&(qo=DA(qo,et,_t,Zi)),Uo-=lf,Zi&&Uo<_n){var _u=vA(qo,Mh);return Gf(w,D,Ku,xr.placeholder,V,qo,_u,Pt,zt,_n-Uo)}var em=Fn?V:this,W0=mi?em[w]:w;return Uo=qo.length,Pt?qo=ng(qo,Pt):_r&&Uo>1&&qo.reverse(),Mn&&zt<Uo&&(qo.length=zt),this&&this!==Oi&&this instanceof xr&&(W0=yo||oa(W0)),W0.apply(em,qo)}return xr}function vu(w,D){return function(V,de){return B1(V,w,D(de),{})}}function Lc(w,D){return function(V,de){var Fe;if(V===t&&de===t)return D;if(V!==t&&(Fe=V),de!==t){if(Fe===t)return de;typeof V=="string"||typeof de=="string"?(V=bt(V),de=bt(de)):(V=vt(V),de=vt(de)),Fe=w(V,de)}return Fe}}function Rp(w){return ad(function(D){return D=Es(D,ac(qi())),re(function(V){var de=this;return w(D,function(Fe){return Tr(Fe,de,V)})})})}function fh(w,D){D=D===t?" ":bt(D);var V=D.length;if(V<2)return V?Z(D,w):D;var de=Z(D,ih(w/Fh(D)));return Lh(D)?Er(Ks(de),0,w).join(""):de.slice(0,w)}function ph(w,D,V,de){var Fe=D&F,et=oa(w);function _t(){for(var Pt=-1,zt=arguments.length,_n=-1,Mn=de.length,Fn=rn(Mn+zt),mi=this&&this!==Oi&&this instanceof _t?et:w;++_n<Mn;)Fn[_n]=de[_n];for(;zt--;)Fn[_n++]=arguments[++Pt];return Tr(mi,Fe?V:this,Fn)}return _t}function lA(w){return function(D,V,de){return de&&typeof de!="number"&&Fu(D,V,de)&&(V=de=t),D=hd(D),V===t?(V=D,D=0):V=hd(V),de=de===t?D<V?1:-1:hd(de),q(D,V,de,w)}}function Nf(w){return function(D,V){return typeof D=="string"&&typeof V=="string"||(D=Nu(D),V=Nu(V)),w(D,V)}}function Gf(w,D,V,de,Fe,et,_t,Pt,zt,_n){var Mn=D&H,Fn=Mn?_t:t,mi=Mn?t:_t,Zi=Mn?et:t,_r=Mn?t:et;D|=Mn?N:Y,D&=~(Mn?Y:N),D&W||(D&=-4);var yo=[w,D,Fe,Zi,Fn,_r,mi,Pt,zt,_n],xr=V.apply(t,yo);return Up(w)&&AC(xr,yo),xr.placeholder=de,Vd(xr,w,D)}function mh(w){var D=Os[w];return function(V,de){if(V=Nu(V),de=de==null?0:Fs(or(de),292),de&&jl(V)){var Fe=(ts(V)+"e").split("e"),et=D(Fe[0]+"e"+(+Fe[1]+de));return Fe=(ts(et)+"e").split("e"),+(Fe[0]+"e"+(+Fe[1]-de))}return D(V)}}var Zm=rA&&1/Fm(new rA([,-0]))[1]==qe?function(w){return new rA(w)}:_;function uA(w){return function(D){var V=bu(D);return V==ft?Km(D):V==xn?S1(D):M1(D,w(D))}}function Ya(w,D,V,de,Fe,et,_t,Pt){var zt=D&j;if(!zt&&typeof w!="function")throw new Kl(s);var _n=de?de.length:0;if(_n||(D&=-97,de=Fe=t),_t=_t===t?_t:ms(or(_t),0),Pt=Pt===t?Pt:or(Pt),_n-=Fe?Fe.length:0,D&Y){var Mn=de,Fn=Fe;de=Fe=t}var mi=zt?t:Dp(w),Zi=[w,D,V,de,Fe,Mn,Fn,et,_t,Pt];if(mi&&cC(Zi,mi),w=Zi[0],D=Zi[1],V=Zi[2],de=Zi[3],Fe=Zi[4],Pt=Zi[9]=Zi[9]===t?zt?0:w.length:ms(Zi[9]-_n,0),!Pt&&D&(H|$)&&(D&=-25),!D||D==F)var _r=Pc(w,D,V);else D==H||D==$?_r=Lu(w,D,Pt):(D==N||D==(F|N))&&!Fe.length?_r=ph(w,D,V,de):_r=Ku.apply(t,Zi);var yo=mi?Ue:AC;return Vd(yo(_r,Zi),w,D)}function I1(w,D,V,de){return w===t||$l(w,kc[V])&&!Rr.call(de,V)?D:w}function gv(w,D,V,de,Fe,et){return Js(w)&&Js(D)&&(et.set(D,w),Qd(w,D,t,gv,et),et.delete(D)),w}function k1(w){return yg(w)?t:w}function Xm(w,D,V,de,Fe,et){var _t=V&B,Pt=w.length,zt=D.length;if(Pt!=zt&&!(_t&&zt>Pt))return!1;var _n=et.get(w),Mn=et.get(D);if(_n&&Mn)return _n==D&&Mn==w;var Fn=-1,mi=!0,Zi=V&R?new Hh:t;for(et.set(w,D),et.set(D,w);++Fn<Pt;){var _r=w[Fn],yo=D[Fn];if(de)var xr=_t?de(yo,_r,Fn,D,w,et):de(_r,yo,Fn,w,D,et);if(xr!==t){if(xr)continue;mi=!1;break}if(Zi){if(!sc(D,function(Uo,qo){if(!Tf(Zi,qo)&&(_r===Uo||Fe(_r,Uo,V,de,et)))return Zi.push(qo)})){mi=!1;break}}else if(!(_r===yo||Fe(_r,yo,V,de,et))){mi=!1;break}}return et.delete(w),et.delete(D),mi}function b0(w,D,V,de,Fe,et,_t){switch(V){case oe:if(w.byteLength!=D.byteLength||w.byteOffset!=D.byteOffset)return!1;w=w.buffer,D=D.buffer;case Me:return!(w.byteLength!=D.byteLength||!et(new Nh(w),new Nh(D)));case Ke:case Ie:case St:return $l(+w,+D);case Ge:return w.name==D.name&&w.message==D.message;case si:case Rn:return w==D+"";case ft:var Pt=Km;case xn:var zt=de&B;if(Pt||(Pt=Fm),w.size!=D.size&&!zt)return!1;var _n=_t.get(w);if(_n)return _n==D;de|=R,_t.set(w,D);var Mn=Xm(Pt(w),Pt(D),de,Fe,et,_t);return _t.delete(w),Mn;case pn:if($h)return $h.call(w)==$h.call(D)}return!1}function T1(w,D,V,de,Fe,et){var _t=V&B,Pt=Jm(w),zt=Pt.length,_n=Jm(D),Mn=_n.length;if(zt!=Mn&&!_t)return!1;for(var Fn=zt;Fn--;){var mi=Pt[Fn];if(!(_t?mi in D:Rr.call(D,mi)))return!1}var Zi=et.get(w),_r=et.get(D);if(Zi&&_r)return Zi==D&&_r==w;var yo=!0;et.set(w,D),et.set(D,w);for(var xr=_t;++Fn<zt;){mi=Pt[Fn];var Uo=w[mi],qo=D[mi];if(de)var af=_t?de(qo,Uo,mi,D,w,et):de(Uo,qo,mi,w,D,et);if(!(af===t?Uo===qo||Fe(Uo,qo,V,de,et):af)){yo=!1;break}xr||(xr=mi=="constructor")}if(yo&&!xr){var Mh=w.constructor,lf=D.constructor;Mh!=lf&&"constructor"in w&&"constructor"in D&&!(typeof Mh=="function"&&Mh instanceof Mh&&typeof lf=="function"&&lf instanceof lf)&&(yo=!1)}return et.delete(w),et.delete(D),yo}function ad(w){return K1(Cv(w,t,bs),w+"")}function Jm(w){return td(w,hl,R1)}function yv(w){return td(w,Gu,_0)}var Dp=na?function(w){return na.get(w)}:_;function sa(w){for(var D=w.name+"",V=uo[D],de=Rr.call(uo,D)?V.length:0;de--;){var Fe=V[de],et=Fe.func;if(et==null||et==w)return Fe.name}return D}function ya(w){var D=Rr.call($e,"placeholder")?$e:w;return D.placeholder}function qi(){var w=$e.iteratee||dd;return w=w===dd?id:w,arguments.length?w(arguments[0],arguments[1]):w}function C0(w,D){var V=w.__data__;return M0(D)?V[typeof D=="string"?"string":"hash"]:V.map}function Yd(w){for(var D=hl(w),V=D.length;V--;){var de=D[V],Fe=w[de];D[V]=[de,Fe,UA(Fe)]}return D}function gh(w,D){var V=tA(w,D);return nd(V)?V:t}function Wf(w){var D=Rr.call(w,xA),V=w[xA];try{w[xA]=t;var de=!0}catch{}var Fe=Fl.call(w);return de&&(D?w[xA]=V:delete w[xA]),Fe}var R1=Qh?function(w){return w==null?[]:(w=Go(w),ta(Qh(w),function(D){return Kd.call(w,D)}))}:gn,_0=Qh?function(w){for(var D=[];w;)Bu(D,R1(w)),w=du(w);return D}:gn,bu=qa;(_l&&bu(new _l(new ArrayBuffer(1)))!=oe||lc&&bu(new lc)!=ft||Ip&&bu(Ip.resolve())!=Pn||rA&&bu(new rA)!=xn||rh&&bu(new rh)!=Un)&&(bu=function(w){var D=qa(w),V=D==en?w.constructor:t,de=V?zu(V):"";if(de)switch(de){case Wr:return oe;case MA:return ft;case pu:return Pn;case as:return xn;case ku:return Un}return D});function Xx(w,D,V){for(var de=-1,Fe=V.length;++de<Fe;){var et=V[de],_t=et.size;switch(et.type){case"drop":w+=_t;break;case"dropRight":D-=_t;break;case"take":D=Fs(D,w+_t);break;case"takeRight":w=ms(w,D-_t);break}}return{start:w,end:D}}function x0(w){var D=w.match(Ti);return D?D[1].split(Io):[]}function eg(w,D,V){D=Xn(D,w);for(var de=-1,Fe=D.length,et=!1;++de<Fe;){var _t=ql(D[de]);if(!(et=w!=null&&V(w,_t)))break;w=w[_t]}return et||++de!=Fe?et:(Fe=w==null?0:w.length,!!Fe&&gg(Fe)&&PA(_t,Fe)&&(Cr(w)||rf(w)))}function vv(w){var D=w.length,V=new w.constructor(D);return D&&typeof w[0]=="string"&&Rr.call(w,"index")&&(V.index=w.index,V.input=w.input),V}function D1(w){return typeof w.constructor=="function"&&!Lp(w)?uc(du(w)):{}}function lC(w,D,V){var de=w.constructor;switch(D){case Me:return dr(w);case Ke:case Ie:return new de(+w);case oe:return Jo(w,V);case le:case he:case se:case Ae:case xe:case Ye:case Xe:case fe:case De:return Pa(w,V);case ft:return new de;case St:case Rn:return new de(w);case si:return Da(w);case xn:return new de;case pn:return Is(w)}}function bv(w,D){var V=D.length;if(!V)return w;var de=V-1;return D[de]=(V>1?"& ":"")+D[de],D=D.join(V>2?", ":" "),w.replace(nn,`{
/* [wrapped with `+D+`] */
`)}function P1(w){return Cr(w)||rf(w)||!!(Fd&&w&&w[Fd])}function PA(w,D){var V=typeof w;return D=D??nt,!!D&&(V=="number"||V!="symbol"&&gl.test(w))&&w>-1&&w%1==0&&w<D}function Fu(w,D,V){if(!Js(V))return!1;var de=typeof D;return(de=="number"?gc(V)&&PA(D,V.length):de=="string"&&D in V)?$l(V[D],w):!1}function Pp(w,D){if(Cr(w))return!1;var V=typeof w;return V=="number"||V=="symbol"||V=="boolean"||w==null||Za(w)?!0:Xi.test(w)||!Zn.test(w)||D!=null&&w in Go(D)}function M0(w){var D=typeof w;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?w!=="__proto__":w===null}function Up(w){var D=sa(w),V=$e[D];if(typeof V!="function"||!(D in hr.prototype))return!1;if(w===V)return!0;var de=Dp(V);return!!de&&w===de[0]}function tg(w){return!!Op&&Op in w}var Cu=jh?jc:Jt;function Lp(w){var D=w&&w.constructor,V=typeof D=="function"&&D.prototype||kc;return w===V}function UA(w){return w===w&&!Js(w)}function U1(w,D){return function(V){return V==null?!1:V[w]===D&&(D!==t||w in Go(V))}}function uC(w){var D=dg(w,function(de){return V.size===h&&V.clear(),de}),V=D.cache;return D}function cC(w,D){var V=w[1],de=D[1],Fe=V|de,et=Fe<(F|j|z),_t=de==z&&V==H||de==z&&V==ne&&w[7].length<=D[8]||de==(z|ne)&&D[7].length<=D[8]&&V==H;if(!(et||_t))return w;de&F&&(w[2]=D[2],Fe|=V&F?0:W);var Pt=D[3];if(Pt){var zt=w[3];w[3]=zt?ga(zt,Pt,D[4]):Pt,w[4]=zt?vA(w[3],m):D[4]}return Pt=D[5],Pt&&(zt=w[5],w[5]=zt?DA(zt,Pt,D[6]):Pt,w[6]=zt?vA(w[5],m):D[6]),Pt=D[7],Pt&&(w[7]=Pt),de&z&&(w[8]=w[8]==null?D[8]:Fs(w[8],D[8])),w[9]==null&&(w[9]=D[9]),w[0]=D[0],w[1]=Fe,w}function $d(w){var D=[];if(w!=null)for(var V in Go(w))D.push(V);return D}function L1(w){return Fl.call(w)}function Cv(w,D,V){return D=ms(D===t?w.length-1:D,0),function(){for(var de=arguments,Fe=-1,et=ms(de.length-D,0),_t=rn(et);++Fe<et;)_t[Fe]=de[D+Fe];Fe=-1;for(var Pt=rn(D+1);++Fe<D;)Pt[Fe]=de[Fe];return Pt[D]=V(_t),Tr(w,this,Pt)}}function Kp(w,D){return D.length<2?w:_i(w,He(D,0,-1))}function ng(w,D){for(var V=w.length,de=Fs(D.length,V),Fe=ra(w);de--;){var et=D[de];w[de]=PA(et,V)?Fe[et]:t}return w}function vs(w,D){if(!(D==="constructor"&&typeof w[D]=="function")&&D!="__proto__")return w[D]}var AC=yh(Ue),w0=Gh||function(w,D){return Oi.setTimeout(w,D)},K1=yh(We);function Vd(w,D,V){var de=D+"";return K1(w,bv(de,hC(x0(de),V)))}function yh(w){var D=0,V=0;return function(){var de=fu(),Fe=Ee-(de-V);if(V=de,Fe>0){if(++D>=be)return arguments[0]}else D=0;return w.apply(t,arguments)}}function ig(w,D){var V=-1,de=w.length,Fe=de-1;for(D=D===t?de:D;++V<D;){var et=U(V,Fe),_t=w[et];w[et]=w[V],w[V]=_t}return w.length=D,w}var Hd=uC(function(w){var D=[];return w.charCodeAt(0)===46&&D.push(""),w.replace(Di,function(V,de,Fe,et){D.push(Fe?et.replace(hn,"$1"):de||V)}),D});function ql(w){if(typeof w=="string"||Za(w))return w;var D=w+"";return D=="0"&&1/w==-qe?"-0":D}function zu(w){if(w!=null){try{return eh.call(w)}catch{}try{return w+""}catch{}}return""}function hC(w,D){return cu(At,function(V){var de="_."+V[0];D&V[1]&&!yA(w,de)&&w.push(de)}),w.sort()}function F1(w){if(w instanceof hr)return w.clone();var D=new Qa(w.__wrapped__,w.__chain__);return D.__actions__=ra(w.__actions__),D.__index__=w.__index__,D.__values__=w.__values__,D}function dC(w,D,V){(V?Fu(w,D,V):D===t)?D=1:D=ms(or(D),0);var de=w==null?0:w.length;if(!de||D<1)return[];for(var Fe=0,et=0,_t=rn(ih(de/D));Fe<de;)_t[et++]=He(w,Fe,Fe+=D);return _t}function _v(w){for(var D=-1,V=w==null?0:w.length,de=0,Fe=[];++D<V;){var et=w[D];et&&(Fe[de++]=et)}return Fe}function xv(){var w=arguments.length;if(!w)return[];for(var D=rn(w-1),V=arguments[0],de=w;de--;)D[de-1]=arguments[de];return Bu(Cr(V)?ra(V):[V],ma(D,1))}var z1=re(function(w,D){return Va(w)?Dc(w,ma(D,1,Va,!0)):[]}),j1=re(function(w,D){var V=Gs(D);return Va(V)&&(V=t),Va(w)?Dc(w,ma(D,1,Va,!0),qi(V,2)):[]}),Zd=re(function(w,D){var V=Gs(D);return Va(V)&&(V=t),Va(w)?Dc(w,ma(D,1,Va,!0),t,V):[]});function $a(w,D,V){var de=w==null?0:w.length;return de?(D=V||D===t?1:or(D),He(w,D<0?0:D,de)):[]}function Fp(w,D,V){var de=w==null?0:w.length;return de?(D=V||D===t?1:or(D),D=de-D,He(w,0,D<0?0:D)):[]}function fC(w,D){return w&&w.length?Kt(w,qi(D,3),!0,!0):[]}function Qr(w,D){return w&&w.length?Kt(w,qi(D,3),!0):[]}function rg(w,D,V,de){var Fe=w==null?0:w.length;return Fe?(V&&typeof V!="number"&&Fu(w,D,V)&&(V=0,de=Fe),ed(w,D,V,de)):[]}function N1(w,D,V){var de=w==null?0:w.length;if(!de)return-1;var Fe=V==null?0:or(V);return Fe<0&&(Fe=ms(de+Fe,0)),Bf(w,qi(D,3),Fe)}function og(w,D,V){var de=w==null?0:w.length;if(!de)return-1;var Fe=de-1;return V!==t&&(Fe=or(V),Fe=V<0?ms(de+Fe,0):Fs(Fe,de-1)),Bf(w,qi(D,3),Fe,!0)}function bs(w){var D=w==null?0:w.length;return D?ma(w,1):[]}function Yl(w){var D=w==null?0:w.length;return D?ma(w,qe):[]}function ld(w,D){var V=w==null?0:w.length;return V?(D=D===t?1:or(D),ma(w,D)):[]}function Mv(w){for(var D=-1,V=w==null?0:w.length,de={};++D<V;){var Fe=w[D];de[Fe[0]]=Fe[1]}return de}function zp(w){return w&&w.length?w[0]:t}function G1(w,D,V){var de=w==null?0:w.length;if(!de)return-1;var Fe=V==null?0:or(V);return Fe<0&&(Fe=ms(de+Fe,0)),XA(w,D,Fe)}function sg(w){var D=w==null?0:w.length;return D?He(w,0,-1):[]}var jp=re(function(w){var D=Es(w,Tn);return D.length&&D[0]===w[0]?jf(D):[]}),wl=re(function(w){var D=Gs(w),V=Es(w,Tn);return D===Gs(V)?D=t:V.pop(),V.length&&V[0]===w[0]?jf(V,qi(D,2)):[]}),fc=re(function(w){var D=Gs(w),V=Es(w,Tn);return D=typeof D=="function"?D:t,D&&V.pop(),V.length&&V[0]===w[0]?jf(V,t,D):[]});function pC(w,D){return w==null?"":qh.call(w,D)}function Gs(w){var D=w==null?0:w.length;return D?w[D-1]:t}function Qf(w,D,V){var de=w==null?0:w.length;if(!de)return-1;var Fe=de;return V!==t&&(Fe=or(V),Fe=Fe<0?ms(de+Fe,0):Fs(Fe,de-1)),D===D?f0(w,D,Fe):Bf(w,Pm,Fe,!0)}function Xd(w,D){return w&&w.length?qd(w,or(D)):t}var qf=re(Kc);function Kc(w,D){return w&&w.length&&D&&D.length?E(w,D):w}function S0(w,D,V){return w&&w.length&&D&&D.length?E(w,D,qi(V,2)):w}function W1(w,D,V){return w&&w.length&&D&&D.length?E(w,D,t,V):w}var LA=ad(function(w,D){var V=w==null?0:w.length,de=ah(w,D);return T(w,Es(D,function(Fe){return PA(Fe,V)?+Fe:Fe}).sort(js)),de});function mC(w,D){var V=[];if(!(w&&w.length))return V;var de=-1,Fe=[],et=w.length;for(D=qi(D,3);++de<et;){var _t=w[de];D(_t,de,w)&&(V.push(_t),Fe.push(de))}return T(w,Fe),V}function Yf(w){return w==null?w:iA.call(w)}function E0(w,D,V){var de=w==null?0:w.length;return de?(V&&typeof V!="number"&&Fu(w,D,V)?(D=0,V=de):(D=D==null?0:or(D),V=V===t?de:or(V)),He(w,D,V)):[]}function O0(w,D){return at(w,D)}function ag(w,D,V){return yt(w,D,qi(V,2))}function Np(w,D){var V=w==null?0:w.length;if(V){var de=at(w,D);if(de<V&&$l(w[de],D))return de}return-1}function gC(w,D){return at(w,D,!0)}function B0(w,D,V){return yt(w,D,qi(V,2),!0)}function wv(w,D){var V=w==null?0:w.length;if(V){var de=at(w,D,!0)-1;if($l(w[de],D))return de}return-1}function Q1(w){return w&&w.length?lt(w):[]}function Sv(w,D){return w&&w.length?lt(w,qi(D,2)):[]}function Jx(w){var D=w==null?0:w.length;return D?He(w,1,D):[]}function Ev(w,D,V){return w&&w.length?(D=V||D===t?1:or(D),He(w,0,D<0?0:D)):[]}function xo(w,D,V){var de=w==null?0:w.length;return de?(D=V||D===t?1:or(D),D=de-D,He(w,D<0?0:D,de)):[]}function As(w,D){return w&&w.length?Kt(w,qi(D,3),!1,!0):[]}function Ao(w,D){return w&&w.length?Kt(w,qi(D,3)):[]}var go=re(function(w){return ct(ma(w,1,Va,!0))}),es=re(function(w){var D=Gs(w);return Va(D)&&(D=t),ct(ma(w,1,Va,!0),qi(D,2))}),Fc=re(function(w){var D=Gs(w);return D=typeof D=="function"?D:t,ct(ma(w,1,Va,!0),t,D)});function $f(w){return w&&w.length?ct(w):[]}function lg(w,D){return w&&w.length?ct(w,qi(D,2)):[]}function Gp(w,D){return D=typeof D=="function"?D:t,w&&w.length?ct(w,t,D):[]}function KA(w){if(!(w&&w.length))return[];var D=0;return w=ta(w,function(V){if(Va(V))return D=ms(V.length,D),!0}),Ud(D,function(V){return Es(w,Pd(V))})}function va(w,D){if(!(w&&w.length))return[];var V=KA(w);return D==null?V:Es(V,function(de){return Tr(D,t,de)})}var Vf=re(function(w,D){return Va(w)?Dc(w,D):[]}),Wp=re(function(w){return Wt(ta(w,Va))}),Ov=re(function(w){var D=Gs(w);return Va(D)&&(D=t),Wt(ta(w,Va),qi(D,2))}),cA=re(function(w){var D=Gs(w);return D=typeof D=="function"?D:t,Wt(ta(w,Va),t,D)}),Qp=re(KA);function qp(w,D){return kn(w||[],D||[],nr)}function pc(w,D){return kn(w||[],D||[],ge)}var q1=re(function(w){var D=w.length,V=D>1?w[D-1]:t;return V=typeof V=="function"?(w.pop(),V):t,va(w,V)});function ug(w){var D=$e(w);return D.__chain__=!0,D}function yC(w,D){return D(w),w}function ud(w,D){return D(w)}var Y1=ad(function(w){var D=w.length,V=D?w[0]:0,de=this.__wrapped__,Fe=function(et){return ah(et,w)};return D>1||this.__actions__.length||!(de instanceof hr)||!PA(V)?this.thru(Fe):(de=de.slice(V,+V+(D?1:0)),de.__actions__.push({func:ud,args:[Fe],thisArg:t}),new Qa(de,this.__chain__).thru(function(et){return D&&!et.length&&et.push(t),et}))});function Jd(){return ug(this)}function Sl(){return new Qa(this.value(),this.__chain__)}function Hf(){this.__values__===t&&(this.__values__=Qv(this.value()));var w=this.__index__>=this.__values__.length,D=w?t:this.__values__[this.__index__++];return{done:w,value:D}}function cg(){return this}function cd(w){for(var D,V=this;V instanceof oA;){var de=F1(V);de.__index__=0,de.__values__=t,D?Fe.__wrapped__=de:D=de;var Fe=de;V=V.__wrapped__}return Fe.__wrapped__=w,D}function Bv(){var w=this.__wrapped__;if(w instanceof hr){var D=w;return this.__actions__.length&&(D=new hr(this)),D=D.reverse(),D.__actions__.push({func:ud,args:[Yf],thisArg:t}),new Qa(D,this.__chain__)}return this.thru(Yf)}function Iv(){return jt(this.__wrapped__,this.__actions__)}var Ag=od(function(w,D,V){Rr.call(w,V)?++w[V]:Ru(w,V,1)});function aa(w,D,V){var de=Cr(w)?Rm:Jh;return V&&Fu(w,D,V)&&(D=t),de(w,qi(D,3))}function I0(w,D){var V=Cr(w)?ta:zf;return V(w,qi(D,3))}var zc=Ns(N1),kv=Ns(og);function ju(w,D){return ma(k0(w,D),1)}function Yp(w,D){return ma(k0(w,D),qe)}function Tv(w,D,V){return V=V===t?1:or(V),ma(k0(w,D),V)}function vC(w,D){var V=Cr(w)?cu:ll;return V(w,qi(D,3))}function ef(w,D){var V=Cr(w)?Au:wo;return V(w,qi(D,3))}var $1=od(function(w,D,V){Rr.call(w,V)?w[V].push(D):Ru(w,V,[D])});function Rv(w,D,V,de){w=gc(w)?w:Ne(w),V=V&&!de?or(V):0;var Fe=w.length;return V<0&&(V=ms(Fe+V,0)),bg(w)?V<=Fe&&w.indexOf(D,V)>-1:!!Fe&&XA(w,D,V)>-1}var hg=re(function(w,D,V){var de=-1,Fe=typeof D=="function",et=gc(w)?rn(w.length):[];return ll(w,function(_t){et[++de]=Fe?Tr(D,_t,V):xl(_t,D,V)}),et}),bC=od(function(w,D,V){Ru(w,V,D)});function k0(w,D){var V=Cr(w)?Es:Wd;return V(w,qi(D,3))}function CC(w,D,V,de){return w==null?[]:(Cr(D)||(D=D==null?[]:[D]),V=de?t:V,Cr(V)||(V=V==null?[]:[V]),O(w,D,V))}var _C=od(function(w,D,V){w[V?0:1].push(D)},function(){return[[],[]]});function V1(w,D,V){var de=Cr(w)?Of:Uh,Fe=arguments.length<3;return de(w,qi(D,4),V,Fe,ll)}function Dv(w,D,V){var de=Cr(w)?xp:Uh,Fe=arguments.length<3;return de(w,qi(D,4),V,Fe,wo)}function e2(w,D){var V=Cr(w)?ta:zf;return V(w,J1(qi(D,3)))}function xC(w){var D=Cr(w)?Lf:ue;return D(w)}function Pv(w,D,V){(V?Fu(w,D,V):D===t)?D=1:D=or(D);var de=Cr(w)?Xh:Ce;return de(w,D)}function Uv(w){var D=Cr(w)?sh:Je;return D(w)}function tf(w){if(w==null)return 0;if(gc(w))return bg(w)?Fh(w):w.length;var D=bu(w);return D==ft||D==xn?w.size:dc(w).length}function Ad(w,D,V){var de=Cr(w)?sc:tt;return V&&Fu(w,D,V)&&(D=t),de(w,qi(D,3))}var nf=re(function(w,D){if(w==null)return[];var V=D.length;return V>1&&Fu(w,D[0],D[1])?D=[]:V>2&&Fu(D[0],D[1],D[2])&&(D=[D[0]]),O(w,ma(D,1),[])}),Zf=qm||function(){return Oi.Date.now()};function T0(w,D){if(typeof D!="function")throw new Kl(s);return w=or(w),function(){if(--w<1)return D.apply(this,arguments)}}function Lv(w,D,V){return D=V?t:D,D=w&&D==null?w.length:D,Ya(w,z,t,t,t,t,D)}function Kv(w,D){var V;if(typeof D!="function")throw new Kl(s);return w=or(w),function(){return--w>0&&(V=D.apply(this,arguments)),w<=1&&(D=t),V}}var R0=re(function(w,D,V){var de=F;if(V.length){var Fe=vA(V,ya(R0));de|=N}return Ya(w,de,D,V,Fe)}),H1=re(function(w,D,V){var de=F|j;if(V.length){var Fe=vA(V,ya(H1));de|=N}return Ya(D,de,w,V,Fe)});function D0(w,D,V){D=V?t:D;var de=Ya(w,H,t,t,t,t,t,D);return de.placeholder=D0.placeholder,de}function Z1(w,D,V){D=V?t:D;var de=Ya(w,$,t,t,t,t,t,D);return de.placeholder=Z1.placeholder,de}function X1(w,D,V){var de,Fe,et,_t,Pt,zt,_n=0,Mn=!1,Fn=!1,mi=!0;if(typeof w!="function")throw new Kl(s);D=Nu(D)||0,Js(V)&&(Mn=!!V.leading,Fn="maxWait"in V,et=Fn?ms(Nu(V.maxWait)||0,D):et,mi="trailing"in V?!!V.trailing:mi);function Zi(_u){var em=de,W0=Fe;return de=Fe=t,_n=_u,_t=w.apply(W0,em),_t}function _r(_u){return _n=_u,Pt=w0(Uo,D),Mn?Zi(_u):_t}function yo(_u){var em=_u-zt,W0=_u-_n,LK=D-em;return Fn?Fs(LK,et-W0):LK}function xr(_u){var em=_u-zt,W0=_u-_n;return zt===t||em>=D||em<0||Fn&&W0>=et}function Uo(){var _u=Zf();if(xr(_u))return qo(_u);Pt=w0(Uo,yo(_u))}function qo(_u){return Pt=t,mi&&de?Zi(_u):(de=Fe=t,_t)}function af(){Pt!==t&&zo(Pt),_n=0,de=zt=Fe=Pt=t}function Mh(){return Pt===t?_t:qo(Zf())}function lf(){var _u=Zf(),em=xr(_u);if(de=arguments,Fe=this,zt=_u,em){if(Pt===t)return _r(zt);if(Fn)return zo(Pt),Pt=w0(Uo,D),Zi(zt)}return Pt===t&&(Pt=w0(Uo,D)),_t}return lf.cancel=af,lf.flush=Mh,lf}var Qo=re(function(w,D){return Vm(w,1,D)}),P0=re(function(w,D,V){return Vm(w,Nu(D)||0,V)});function t2(w){return Ya(w,ae)}function dg(w,D){if(typeof w!="function"||D!=null&&typeof D!="function")throw new Kl(s);var V=function(){var de=arguments,Fe=D?D.apply(this,de):de[0],et=V.cache;if(et.has(Fe))return et.get(Fe);var _t=w.apply(this,de);return V.cache=et.set(Fe,_t)||et,_t};return V.cache=new(dg.Cache||zs),V}dg.Cache=zs;function J1(w){if(typeof w!="function")throw new Kl(s);return function(){var D=arguments;switch(D.length){case 0:return!w.call(this);case 1:return!w.call(this,D[0]);case 2:return!w.call(this,D[0],D[1]);case 3:return!w.call(this,D[0],D[1],D[2])}return!w.apply(this,D)}}function n2(w){return Kv(2,w)}var i2=Hi(function(w,D){D=D.length==1&&Cr(D[0])?Es(D[0],ac(qi())):Es(ma(D,1),ac(qi()));var V=D.length;return re(function(de){for(var Fe=-1,et=Fs(de.length,V);++Fe<et;)de[Fe]=D[Fe].call(this,de[Fe]);return Tr(w,this,de)})}),fg=re(function(w,D){var V=vA(D,ya(fg));return Ya(w,N,t,D,V)}),$p=re(function(w,D){var V=vA(D,ya($p));return Ya(w,Y,t,D,V)}),ey=ad(function(w,D){return Ya(w,ne,t,t,t,D)});function U0(w,D){if(typeof w!="function")throw new Kl(s);return D=D===t?D:or(D),re(w,D)}function vh(w,D){if(typeof w!="function")throw new Kl(s);return D=D==null?0:ms(or(D),0),re(function(V){var de=V[D],Fe=Er(V,0,D);return de&&Bu(Fe,de),Tr(w,this,Fe)})}function mc(w,D,V){var de=!0,Fe=!0;if(typeof w!="function")throw new Kl(s);return Js(V)&&(de="leading"in V?!!V.leading:de,Fe="trailing"in V?!!V.trailing:Fe),X1(w,D,{leading:de,maxWait:D,trailing:Fe})}function bh(w){return Lv(w,1)}function Vp(w,D){return fg(ln(D),w)}function r2(){if(!arguments.length)return[];var w=arguments[0];return Cr(w)?w:[w]}function L0(w){return Ql(w,S)}function ty(w,D){return D=typeof D=="function"?D:t,Ql(w,S,D)}function MC(w){return Ql(w,v|S)}function ny(w,D){return D=typeof D=="function"?D:t,Ql(w,v|S,D)}function Fv(w,D){return D==null||lh(w,D,hl(D))}function $l(w,D){return w===D||w!==w&&D!==D}var zv=Nf(hh),jv=Nf(function(w,D){return w>=D}),rf=Uu((function(){return arguments})())?Uu:function(w){return Ws(w)&&Rr.call(w,"callee")&&!Kd.call(w,"callee")},Cr=rn.isArray,pg=to?ac(to):Bs;function gc(w){return w!=null&&gg(w.length)&&!jc(w)}function Va(w){return Ws(w)&&gc(w)}function K0(w){return w===!0||w===!1||Ws(w)&&qa(w)==Ke}var Xf=Bp||Jt,wC=Fo?ac(Fo):cs;function ho(w){return Ws(w)&&w.nodeType===1&&!yg(w)}function F0(w){if(w==null)return!0;if(gc(w)&&(Cr(w)||typeof w=="string"||typeof w.splice=="function"||Xf(w)||of(w)||rf(w)))return!w.length;var D=bu(w);if(D==ft||D==xn)return!w.size;if(Lp(w))return!dc(w).length;for(var V in w)if(Rr.call(w,V))return!1;return!0}function Ch(w,D){return co(w,D)}function iy(w,D,V){V=typeof V=="function"?V:t;var de=V?V(w,D):t;return de===t?co(w,D,t,V):!!de}function z0(w){if(!Ws(w))return!1;var D=qa(w);return D==Ge||D==Se||typeof w.message=="string"&&typeof w.name=="string"&&!yg(w)}function ry(w){return typeof w=="number"&&jl(w)}function jc(w){if(!Js(w))return!1;var D=qa(w);return D==st||D==ut||D==It||D==zn}function mg(w){return typeof w=="number"&&w==or(w)}function gg(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=nt}function Js(w){var D=typeof w;return w!=null&&(D=="object"||D=="function")}function Ws(w){return w!=null&&typeof w=="object"}var Nv=Br?ac(Br):So;function oy(w,D){return w===D||Ro(w,D,Yd(D))}function Gv(w,D,V){return V=typeof V=="function"?V:t,Ro(w,D,Yd(D),V)}function qr(w){return sy(w)&&w!=+w}function Jf(w){if(Cu(w))throw new vr(o);return nd(w)}function Ha(w){return w===null}function Hp(w){return w==null}function sy(w){return typeof w=="number"||Ws(w)&&qa(w)==St}function yg(w){if(!Ws(w)||qa(w)!=en)return!1;var D=du(w);if(D===null)return!0;var V=Rr.call(D,"constructor")&&D.constructor;return typeof V=="function"&&V instanceof V&&eh.call(V)==CA}var vg=Ss?ac(Ss):IA;function ay(w){return mg(w)&&w>=-nt&&w<=nt}var j0=ZA?ac(ZA):kA;function bg(w){return typeof w=="string"||!Cr(w)&&Ws(w)&&qa(w)==Rn}function Za(w){return typeof w=="symbol"||Ws(w)&&qa(w)==pn}var of=vl?ac(vl):TA;function ly(w){return w===t}function SC(w){return Ws(w)&&bu(w)==Un}function Wv(w){return Ws(w)&&qa(w)==Tt}var o2=Nf(gs),EC=Nf(function(w,D){return w<=D});function Qv(w){if(!w)return[];if(gc(w))return bg(w)?Ks(w):ra(w);if(bl&&w[bl])return Ld(w[bl]());var D=bu(w),V=D==ft?Km:D==xn?Fm:Ne;return V(w)}function hd(w){if(!w)return w===0?w:0;if(w=Nu(w),w===qe||w===-qe){var D=w<0?-1:1;return D*ht}return w===w?w:0}function or(w){var D=hd(w),V=D%1;return D===D?V?D-V:D:0}function uy(w){return w?Du(or(w),0,Oe):0}function Nu(w){if(typeof w=="number")return w;if(Za(w))return ke;if(Js(w)){var D=typeof w.valueOf=="function"?w.valueOf():w;w=Js(D)?D+"":D}if(typeof w!="string")return w===0?w:+w;w=Ic(w);var V=tu.test(w);return V||Ei.test(w)?Bn(w.slice(2),V?2:8):Ia.test(w)?ke:+w}function Zp(w){return cl(w,Gu(w))}function cy(w){return w?Du(or(w),-nt,nt):w===0?w:0}function ts(w){return w==null?"":bt(w)}var OC=yu(function(w,D){if(Lp(D)||gc(D)){cl(D,hl(D),w);return}for(var V in D)Rr.call(D,V)&&nr(w,V,D[V])}),Ay=yu(function(w,D){cl(D,Gu(D),w)}),_h=yu(function(w,D,V,de){cl(D,Gu(D),w,de)}),Vl=yu(function(w,D,V,de){cl(D,hl(D),w,de)}),Nc=ad(ah);function hy(w,D){var V=uc(w);return D==null?V:Ff(V,D)}var qv=re(function(w,D){w=Go(w);var V=-1,de=D.length,Fe=de>2?D[2]:t;for(Fe&&Fu(D[0],D[1],Fe)&&(de=1);++V<de;)for(var et=D[V],_t=Gu(et),Pt=-1,zt=_t.length;++Pt<zt;){var _n=_t[Pt],Mn=w[_n];(Mn===t||$l(Mn,kc[_n])&&!Rr.call(w,_n))&&(w[_n]=et[_n])}return w}),dy=re(function(w){return w.push(t,gv),Tr(u,t,w)});function BC(w,D){return Dd(w,qi(D,3),Ra)}function Cg(w,D){return Dd(w,qi(D,3),Ah)}function AA(w,D){return w==null?w:uh(w,qi(D,3),Gu)}function IC(w,D){return w==null?w:ch(w,qi(D,3),Gu)}function N0(w,D){return w&&Ra(w,qi(D,3))}function xh(w,D){return w&&Ah(w,qi(D,3))}function Yv(w){return w==null?[]:ri(w,hl(w))}function kC(w){return w==null?[]:ri(w,Gu(w))}function FA(w,D,V){var de=w==null?t:_i(w,D);return de===t?V:de}function fy(w,D){return w!=null&&eg(w,D,us)}function py(w,D){return w!=null&&eg(w,D,hc)}var $v=vu(function(w,D,V){D!=null&&typeof D.toString!="function"&&(D=Fl.call(D)),w[D]=V},Po(vc)),my=vu(function(w,D,V){D!=null&&typeof D.toString!="function"&&(D=Fl.call(D)),Rr.call(w,D)?w[D].push(V):w[D]=[V]},qi),G0=re(xl);function hl(w){return gc(w)?BA(w):dc(w)}function Gu(w){return gc(w)?BA(w,!0):Gd(w)}function Vv(w,D){var V={};return D=qi(D,3),Ra(w,function(de,Fe,et){Ru(V,D(de,Fe,et),de)}),V}function TC(w,D){var V={};return D=qi(D,3),Ra(w,function(de,Fe,et){Ru(V,Fe,D(de,Fe,et))}),V}var f=yu(function(w,D,V){Qd(w,D,V)}),u=yu(function(w,D,V,de){Qd(w,D,V,de)}),d=ad(function(w,D){var V={};if(w==null)return V;var de=!1;D=Es(D,function(et){return et=Xn(et,w),de||(de=et.length>1),et}),cl(w,yv(w),V),de&&(V=Ql(V,v|x|S,k1));for(var Fe=D.length;Fe--;)Ot(V,D[Fe]);return V});function b(w,D){return k(w,J1(qi(D)))}var M=ad(function(w,D){return w==null?{}:l(w,D)});function k(w,D){if(w==null)return{};var V=Es(yv(w),function(de){return[de]});return D=qi(D),p(w,V,function(de,Fe){return D(de,Fe[0])})}function P(w,D,V){D=Xn(D,w);var de=-1,Fe=D.length;for(Fe||(Fe=1,w=t);++de<Fe;){var et=w==null?t:w[ql(D[de])];et===t&&(de=Fe,et=V),w=jc(et)?et.call(w):et}return w}function K(w,D,V){return w==null?w:ge(w,D,V)}function G(w,D,V,de){return de=typeof de=="function"?de:t,w==null?w:ge(w,D,V,de)}var ee=uA(hl),ie=uA(Gu);function ce(w,D,V){var de=Cr(w),Fe=de||Xf(w)||of(w);if(D=qi(D,4),V==null){var et=w&&w.constructor;Fe?V=de?new et:[]:Js(w)?V=jc(et)?uc(du(w)):{}:V={}}return(Fe?cu:Ra)(w,function(_t,Pt,zt){return D(V,_t,Pt,zt)}),V}function Be(w,D){return w==null?!0:Ot(w,D)}function Pe(w,D,V){return w==null?w:Qt(w,D,ln(V))}function Le(w,D,V,de){return de=typeof de=="function"?de:t,w==null?w:Qt(w,D,ln(V),de)}function Ne(w){return w==null?[]:Um(w,hl(w))}function Ze(w){return w==null?[]:Um(w,Gu(w))}function ot(w,D,V){return V===t&&(V=D,D=t),V!==t&&(V=Nu(V),V=V===V?V:0),D!==t&&(D=Nu(D),D=D===D?D:0),Du(Nu(w),D,V)}function Dt(w,D,V){return D=hd(D),V===t?(V=D,D=0):V=hd(V),w=Nu(w),ul(w,D,V)}function dt(w,D,V){if(V&&typeof V!="boolean"&&Fu(w,D,V)&&(D=V=t),V===t&&(typeof D=="boolean"?(V=D,D=t):typeof w=="boolean"&&(V=w,w=t)),w===t&&D===t?(w=0,D=1):(w=hd(w),D===t?(D=w,w=0):D=hd(D)),w>D){var de=w;w=D,D=de}if(V||w%1||D%1){var Fe=Tc();return Fs(w+Fe*(D-w+dn("1e-"+((Fe+"").length-1))),D)}return U(w,D)}var xt=ys(function(w,D,V){return D=D.toLowerCase(),w+(V?Nt(D):D)});function Nt(w){return Ys(ts(w).toLowerCase())}function Xt(w){return w=ts(w),w&&w.replace(Vr,Pf).replace(_o,"")}function mn(w,D,V){w=ts(w),D=bt(D);var de=w.length;V=V===t?de:Du(or(V),0,de);var Fe=V;return V-=D.length,V>=0&&w.slice(V,Fe)==D}function Qn(w){return w=ts(w),w&&jn.test(w)?w.replace(Ht,w1):w}function Kn(w){return w=ts(w),w&&fi.test(w)?w.replace(ur,"\\$&"):w}var Gn=ys(function(w,D,V){return w+(V?"-":"")+D.toLowerCase()}),xi=ys(function(w,D,V){return w+(V?" ":"")+D.toLowerCase()}),Nn=sd("toLowerCase");function Wn(w,D,V){w=ts(w),D=or(D);var de=D?Fh(w):0;if(!D||de>=D)return w;var Fe=(D-de)/2;return fh(Wh(Fe),V)+w+fh(ih(Fe),V)}function an(w,D,V){w=ts(w),D=or(D);var de=D?Fh(w):0;return D&&de<D?w+fh(D-de,V):w}function ji(w,D,V){w=ts(w),D=or(D);var de=D?Fh(w):0;return D&&de<D?fh(D-de,V)+w:w}function ir(w,D,V){return V||D==null?D=0:D&&(D=+D),Cl(ts(w).replace(Si,""),D||0)}function Ui(w,D,V){return(V?Fu(w,D,V):D===t)?D=1:D=or(D),Z(ts(w),D)}function Ai(){var w=arguments,D=ts(w[0]);return w.length<3?D:D.replace(w[1],w[2])}var Dr=ys(function(w,D,V){return w+(V?"_":"")+D.toLowerCase()});function Cs(w,D,V){return V&&typeof V!="number"&&Fu(w,D,V)&&(D=V=t),V=V===t?Oe:V>>>0,V?(w=ts(w),w&&(typeof D=="string"||D!=null&&!vg(D))&&(D=bt(D),!D&&Lh(w))?Er(Ks(w),0,V):w.split(D,V)):[]}var ba=ys(function(w,D,V){return w+(V?" ":"")+Ys(D)});function El(w,D,V){return w=ts(w),V=V==null?0:Du(or(V),0,w.length),D=bt(D),w.slice(V,V+D.length)==D}function yc(w,D,V){var de=$e.templateSettings;V&&Fu(w,D,V)&&(D=t),w=ts(w),D=_h({},D,de,I1);var Fe=_h({},D.imports,de.imports,I1),et=hl(Fe),_t=Um(Fe,et),Pt,zt,_n=0,Mn=D.interpolate||ka,Fn="__p += '",mi=Ep((D.escape||ka).source+"|"+Mn.source+"|"+(Mn===Ln?Li:ka).source+"|"+(D.evaluate||ka).source+"|$","g"),Zi="//# sourceURL="+(Rr.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ul+"]")+`
`;w.replace(mi,function(xr,Uo,qo,af,Mh,lf){return qo||(qo=af),Fn+=w.slice(_n,lf).replace(nu,Sp),Uo&&(Pt=!0,Fn+=`' +
__e(`+Uo+`) +
'`),Mh&&(zt=!0,Fn+=`';
`+Mh+`;
__p += '`),qo&&(Fn+=`' +
((__t = (`+qo+`)) == null ? '' : __t) +
'`),_n=lf+xr.length,xr}),Fn+=`';
`;var _r=Rr.call(D,"variable")&&D.variable;if(!_r)Fn=`with (obj) {
`+Fn+`
}
`;else if(kr.test(_r))throw new vr(a);Fn=(zt?Fn.replace(y,""):Fn).replace(rt,"$1").replace(Bt,"$1;"),Fn="function("+(_r||"obj")+`) {
`+(_r?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Pt?", __e = _.escape":"")+(zt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Fn+`return __p
}`;var yo=_a(function(){return Hr(et,Zi+"return "+Fn).apply(t,_t)});if(yo.source=Fn,z0(yo))throw yo;return yo}function Ua(w){return ts(w).toLowerCase()}function Qs(w){return ts(w).toUpperCase()}function Do(w,D,V){if(w=ts(w),w&&(V||D===t))return Ic(w);if(!w||!(D=bt(D)))return w;var de=Ks(w),Fe=Ks(D),et=wp(de,Fe),_t=Rf(de,Fe)+1;return Er(de,et,_t).join("")}function la(w,D,V){if(w=ts(w),w&&(V||D===t))return w.slice(0,JA(w)+1);if(!w||!(D=bt(D)))return w;var de=Ks(w),Fe=Rf(de,Ks(D))+1;return Er(de,0,Fe).join("")}function Ca(w,D,V){if(w=ts(w),w&&(V||D===t))return w.replace(Si,"");if(!w||!(D=bt(D)))return w;var de=Ks(w),Fe=wp(de,Ks(D));return Er(de,Fe).join("")}function qs(w,D){var V=ve,de=pe;if(Js(D)){var Fe="separator"in D?D.separator:Fe;V="length"in D?or(D.length):V,de="omission"in D?bt(D.omission):de}w=ts(w);var et=w.length;if(Lh(w)){var _t=Ks(w);et=_t.length}if(V>=et)return w;var Pt=V-Fh(de);if(Pt<1)return de;var zt=_t?Er(_t,0,Pt).join(""):w.slice(0,Pt);if(Fe===t)return zt+de;if(_t&&(Pt+=zt.length-Pt),vg(Fe)){if(w.slice(Pt).search(Fe)){var _n,Mn=zt;for(Fe.global||(Fe=Ep(Fe.source,ts(ii.exec(Fe))+"g")),Fe.lastIndex=0;_n=Fe.exec(Mn);)var Fn=_n.index;zt=zt.slice(0,Fn===t?Pt:Fn)}}else if(w.indexOf(bt(Fe),Pt)!=Pt){var mi=zt.lastIndexOf(Fe);mi>-1&&(zt=zt.slice(0,mi))}return zt+de}function Wu(w){return w=ts(w),w&&gt.test(w)?w.replace(pt,nA):w}var Gc=ys(function(w,D,V){return w+(V?" ":"")+D.toUpperCase()}),Ys=sd("toUpperCase");function Qu(w,D,V){return w=ts(w),D=V?t:D,D===t?Lm(w)?Nm(w):pv(w):w.match(D)||[]}var _a=re(function(w,D){try{return Tr(w,t,D)}catch(V){return z0(V)?V:new vr(V)}}),xa=ad(function(w,D){return cu(D,function(V){V=ql(V),Ru(w,V,R0(w[V],w))}),w});function Xa(w){var D=w==null?0:w.length,V=qi();return w=D?Es(w,function(de){if(typeof de[1]!="function")throw new Kl(s);return[V(de[0]),de[1]]}):[],re(function(de){for(var Fe=-1;++Fe<D;){var et=w[Fe];if(Tr(et[0],this,de))return Tr(et[1],this,de)}})}function La(w){return v0(Ql(w,v))}function Po(w){return function(){return w}}function Wc(w,D){return w==null||w!==w?D:w}var Xp=Uc(),qu=Uc(!0);function vc(w){return w}function dd(w){return id(typeof w=="function"?w:Ql(w,v))}function fd(w){return RA(Ql(w,v))}function Jp(w,D){return Tp(w,Ql(D,v))}var _g=re(function(w,D){return function(V){return xl(V,w,D)}}),sf=re(function(w,D){return function(V){return xl(w,V,D)}});function A(w,D,V){var de=hl(D),Fe=ri(D,de);V==null&&!(Js(D)&&(Fe.length||!de.length))&&(V=D,D=w,w=this,Fe=ri(D,hl(D)));var et=!(Js(V)&&"chain"in V)||!!V.chain,_t=jc(w);return cu(Fe,function(Pt){var zt=D[Pt];w[Pt]=zt,_t&&(w.prototype[Pt]=function(){var _n=this.__chain__;if(et||_n){var Mn=w(this.__wrapped__),Fn=Mn.__actions__=ra(this.__actions__);return Fn.push({func:zt,args:arguments,thisArg:w}),Mn.__chain__=_n,Mn}return zt.apply(w,Bu([this.value()],arguments))})}),w}function g(){return Oi._===this&&(Oi._=hu),this}function _(){}function I(w){return w=or(w),re(function(D){return qd(D,w)})}var Q=Rp(Es),X=Rp(Rm),_e=Rp(sc);function Ve(w){return Pp(w)?Pd(ql(w)):C(w)}function Mt(w){return function(D){return w==null?t:_i(w,D)}}var $t=lA(),un=lA(!0);function gn(){return[]}function Jt(){return!1}function on(){return{}}function Ri(){return""}function sr(){return!0}function _s(w,D){if(w=or(w),w<1||w>nt)return[];var V=Oe,de=Fs(w,Oe);D=qi(D),w-=Oe;for(var Fe=Ud(de,D);++V<w;)D(V);return Fe}function Lt(w){return Cr(w)?Es(w,ql):Za(w)?[w]:ra(Hd(ts(w)))}function Rt(w){var D=++p0;return ts(w)+D}var qt=Lc(function(w,D){return w+D},0),fn=mh("ceil"),Ji=Lc(function(w,D){return w/D},1),jo=mh("floor");function oi(w){return w&&w.length?Pu(w,vc,hh):t}function rr(w,D){return w&&w.length?Pu(w,qi(D,2),hh):t}function Fr(w){return Ll(w,vc)}function zr(w,D){return Ll(w,qi(D,2))}function Qc(w){return w&&w.length?Pu(w,vc,gs):t}function pd(w,D){return w&&w.length?Pu(w,qi(D,2),gs):t}var Pae=Lc(function(w,D){return w*D},1),Uae=mh("round"),Lae=Lc(function(w,D){return w-D},0);function Kae(w){return w&&w.length?Mp(w,vc):0}function Fae(w,D){return w&&w.length?Mp(w,qi(D,2)):0}return $e.after=T0,$e.ary=Lv,$e.assign=OC,$e.assignIn=Ay,$e.assignInWith=_h,$e.assignWith=Vl,$e.at=Nc,$e.before=Kv,$e.bind=R0,$e.bindAll=xa,$e.bindKey=H1,$e.castArray=r2,$e.chain=ug,$e.chunk=dC,$e.compact=_v,$e.concat=xv,$e.cond=Xa,$e.conforms=La,$e.constant=Po,$e.countBy=Ag,$e.create=hy,$e.curry=D0,$e.curryRight=Z1,$e.debounce=X1,$e.defaults=qv,$e.defaultsDeep=dy,$e.defer=Qo,$e.delay=P0,$e.difference=z1,$e.differenceBy=j1,$e.differenceWith=Zd,$e.drop=$a,$e.dropRight=Fp,$e.dropRightWhile=fC,$e.dropWhile=Qr,$e.fill=rg,$e.filter=I0,$e.flatMap=ju,$e.flatMapDeep=Yp,$e.flatMapDepth=Tv,$e.flatten=bs,$e.flattenDeep=Yl,$e.flattenDepth=ld,$e.flip=t2,$e.flow=Xp,$e.flowRight=qu,$e.fromPairs=Mv,$e.functions=Yv,$e.functionsIn=kC,$e.groupBy=$1,$e.initial=sg,$e.intersection=jp,$e.intersectionBy=wl,$e.intersectionWith=fc,$e.invert=$v,$e.invertBy=my,$e.invokeMap=hg,$e.iteratee=dd,$e.keyBy=bC,$e.keys=hl,$e.keysIn=Gu,$e.map=k0,$e.mapKeys=Vv,$e.mapValues=TC,$e.matches=fd,$e.matchesProperty=Jp,$e.memoize=dg,$e.merge=f,$e.mergeWith=u,$e.method=_g,$e.methodOf=sf,$e.mixin=A,$e.negate=J1,$e.nthArg=I,$e.omit=d,$e.omitBy=b,$e.once=n2,$e.orderBy=CC,$e.over=Q,$e.overArgs=i2,$e.overEvery=X,$e.overSome=_e,$e.partial=fg,$e.partialRight=$p,$e.partition=_C,$e.pick=M,$e.pickBy=k,$e.property=Ve,$e.propertyOf=Mt,$e.pull=qf,$e.pullAll=Kc,$e.pullAllBy=S0,$e.pullAllWith=W1,$e.pullAt=LA,$e.range=$t,$e.rangeRight=un,$e.rearg=ey,$e.reject=e2,$e.remove=mC,$e.rest=U0,$e.reverse=Yf,$e.sampleSize=Pv,$e.set=K,$e.setWith=G,$e.shuffle=Uv,$e.slice=E0,$e.sortBy=nf,$e.sortedUniq=Q1,$e.sortedUniqBy=Sv,$e.split=Cs,$e.spread=vh,$e.tail=Jx,$e.take=Ev,$e.takeRight=xo,$e.takeRightWhile=As,$e.takeWhile=Ao,$e.tap=yC,$e.throttle=mc,$e.thru=ud,$e.toArray=Qv,$e.toPairs=ee,$e.toPairsIn=ie,$e.toPath=Lt,$e.toPlainObject=Zp,$e.transform=ce,$e.unary=bh,$e.union=go,$e.unionBy=es,$e.unionWith=Fc,$e.uniq=$f,$e.uniqBy=lg,$e.uniqWith=Gp,$e.unset=Be,$e.unzip=KA,$e.unzipWith=va,$e.update=Pe,$e.updateWith=Le,$e.values=Ne,$e.valuesIn=Ze,$e.without=Vf,$e.words=Qu,$e.wrap=Vp,$e.xor=Wp,$e.xorBy=Ov,$e.xorWith=cA,$e.zip=Qp,$e.zipObject=qp,$e.zipObjectDeep=pc,$e.zipWith=q1,$e.entries=ee,$e.entriesIn=ie,$e.extend=Ay,$e.extendWith=_h,A($e,$e),$e.add=qt,$e.attempt=_a,$e.camelCase=xt,$e.capitalize=Nt,$e.ceil=fn,$e.clamp=ot,$e.clone=L0,$e.cloneDeep=MC,$e.cloneDeepWith=ny,$e.cloneWith=ty,$e.conformsTo=Fv,$e.deburr=Xt,$e.defaultTo=Wc,$e.divide=Ji,$e.endsWith=mn,$e.eq=$l,$e.escape=Qn,$e.escapeRegExp=Kn,$e.every=aa,$e.find=zc,$e.findIndex=N1,$e.findKey=BC,$e.findLast=kv,$e.findLastIndex=og,$e.findLastKey=Cg,$e.floor=jo,$e.forEach=vC,$e.forEachRight=ef,$e.forIn=AA,$e.forInRight=IC,$e.forOwn=N0,$e.forOwnRight=xh,$e.get=FA,$e.gt=zv,$e.gte=jv,$e.has=fy,$e.hasIn=py,$e.head=zp,$e.identity=vc,$e.includes=Rv,$e.indexOf=G1,$e.inRange=Dt,$e.invoke=G0,$e.isArguments=rf,$e.isArray=Cr,$e.isArrayBuffer=pg,$e.isArrayLike=gc,$e.isArrayLikeObject=Va,$e.isBoolean=K0,$e.isBuffer=Xf,$e.isDate=wC,$e.isElement=ho,$e.isEmpty=F0,$e.isEqual=Ch,$e.isEqualWith=iy,$e.isError=z0,$e.isFinite=ry,$e.isFunction=jc,$e.isInteger=mg,$e.isLength=gg,$e.isMap=Nv,$e.isMatch=oy,$e.isMatchWith=Gv,$e.isNaN=qr,$e.isNative=Jf,$e.isNil=Hp,$e.isNull=Ha,$e.isNumber=sy,$e.isObject=Js,$e.isObjectLike=Ws,$e.isPlainObject=yg,$e.isRegExp=vg,$e.isSafeInteger=ay,$e.isSet=j0,$e.isString=bg,$e.isSymbol=Za,$e.isTypedArray=of,$e.isUndefined=ly,$e.isWeakMap=SC,$e.isWeakSet=Wv,$e.join=pC,$e.kebabCase=Gn,$e.last=Gs,$e.lastIndexOf=Qf,$e.lowerCase=xi,$e.lowerFirst=Nn,$e.lt=o2,$e.lte=EC,$e.max=oi,$e.maxBy=rr,$e.mean=Fr,$e.meanBy=zr,$e.min=Qc,$e.minBy=pd,$e.stubArray=gn,$e.stubFalse=Jt,$e.stubObject=on,$e.stubString=Ri,$e.stubTrue=sr,$e.multiply=Pae,$e.nth=Xd,$e.noConflict=g,$e.noop=_,$e.now=Zf,$e.pad=Wn,$e.padEnd=an,$e.padStart=ji,$e.parseInt=ir,$e.random=dt,$e.reduce=V1,$e.reduceRight=Dv,$e.repeat=Ui,$e.replace=Ai,$e.result=P,$e.round=Uae,$e.runInContext=Ut,$e.sample=xC,$e.size=tf,$e.snakeCase=Dr,$e.some=Ad,$e.sortedIndex=O0,$e.sortedIndexBy=ag,$e.sortedIndexOf=Np,$e.sortedLastIndex=gC,$e.sortedLastIndexBy=B0,$e.sortedLastIndexOf=wv,$e.startCase=ba,$e.startsWith=El,$e.subtract=Lae,$e.sum=Kae,$e.sumBy=Fae,$e.template=yc,$e.times=_s,$e.toFinite=hd,$e.toInteger=or,$e.toLength=uy,$e.toLower=Ua,$e.toNumber=Nu,$e.toSafeInteger=cy,$e.toString=ts,$e.toUpper=Qs,$e.trim=Do,$e.trimEnd=la,$e.trimStart=Ca,$e.truncate=qs,$e.unescape=Wu,$e.uniqueId=Rt,$e.upperCase=Gc,$e.upperFirst=Ys,$e.each=vC,$e.eachRight=ef,$e.first=zp,A($e,(function(){var w={};return Ra($e,function(D,V){Rr.call($e.prototype,V)||(w[V]=D)}),w})(),{chain:!1}),$e.VERSION=i,cu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){$e[w].placeholder=$e}),cu(["drop","take"],function(w,D){hr.prototype[w]=function(V){V=V===t?1:ms(or(V),0);var de=this.__filtered__&&!D?new hr(this):this.clone();return de.__filtered__?de.__takeCount__=Fs(V,de.__takeCount__):de.__views__.push({size:Fs(V,Oe),type:w+(de.__dir__<0?"Right":"")}),de},hr.prototype[w+"Right"]=function(V){return this.reverse()[w](V).reverse()}}),cu(["filter","map","takeWhile"],function(w,D){var V=D+1,de=V==Te||V==Re;hr.prototype[w]=function(Fe){var et=this.clone();return et.__iteratees__.push({iteratee:qi(Fe,3),type:V}),et.__filtered__=et.__filtered__||de,et}}),cu(["head","last"],function(w,D){var V="take"+(D?"Right":"");hr.prototype[w]=function(){return this[V](1).value()[0]}}),cu(["initial","tail"],function(w,D){var V="drop"+(D?"":"Right");hr.prototype[w]=function(){return this.__filtered__?new hr(this):this[V](1)}}),hr.prototype.compact=function(){return this.filter(vc)},hr.prototype.find=function(w){return this.filter(w).head()},hr.prototype.findLast=function(w){return this.reverse().find(w)},hr.prototype.invokeMap=re(function(w,D){return typeof w=="function"?new hr(this):this.map(function(V){return xl(V,w,D)})}),hr.prototype.reject=function(w){return this.filter(J1(qi(w)))},hr.prototype.slice=function(w,D){w=or(w);var V=this;return V.__filtered__&&(w>0||D<0)?new hr(V):(w<0?V=V.takeRight(-w):w&&(V=V.drop(w)),D!==t&&(D=or(D),V=D<0?V.dropRight(-D):V.take(D-w)),V)},hr.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},hr.prototype.toArray=function(){return this.take(Oe)},Ra(hr.prototype,function(w,D){var V=/^(?:filter|find|map|reject)|While$/.test(D),de=/^(?:head|last)$/.test(D),Fe=$e[de?"take"+(D=="last"?"Right":""):D],et=de||/^find/.test(D);Fe&&($e.prototype[D]=function(){var _t=this.__wrapped__,Pt=de?[1]:arguments,zt=_t instanceof hr,_n=Pt[0],Mn=zt||Cr(_t),Fn=function(Uo){var qo=Fe.apply($e,Bu([Uo],Pt));return de&&mi?qo[0]:qo};Mn&&V&&typeof _n=="function"&&_n.length!=1&&(zt=Mn=!1);var mi=this.__chain__,Zi=!!this.__actions__.length,_r=et&&!mi,yo=zt&&!Zi;if(!et&&Mn){_t=yo?_t:new hr(this);var xr=w.apply(_t,Pt);return xr.__actions__.push({func:ud,args:[Fn],thisArg:t}),new Qa(xr,mi)}return _r&&yo?w.apply(this,Pt):(xr=this.thru(Fn),_r?de?xr.value()[0]:xr.value():xr)})}),cu(["pop","push","shift","sort","splice","unshift"],function(w){var D=zh[w],V=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",de=/^(?:pop|shift)$/.test(w);$e.prototype[w]=function(){var Fe=arguments;if(de&&!this.__chain__){var et=this.value();return D.apply(Cr(et)?et:[],Fe)}return this[V](function(_t){return D.apply(Cr(_t)?_t:[],Fe)})}}),Ra(hr.prototype,function(w,D){var V=$e[D];if(V){var de=V.name+"";Rr.call(uo,de)||(uo[de]=[]),uo[de].push({name:D,func:V})}}),uo[Ku(t,j).name]=[{name:"wrapper",func:t}],hr.prototype.clone=SA,hr.prototype.reverse=EA,hr.prototype.value=sA,$e.prototype.at=Y1,$e.prototype.chain=Jd,$e.prototype.commit=Sl,$e.prototype.next=Hf,$e.prototype.plant=cd,$e.prototype.reverse=Bv,$e.prototype.toJSON=$e.prototype.valueOf=$e.prototype.value=Iv,$e.prototype.first=$e.prototype.head,bl&&($e.prototype[bl]=cg),$e}),Gr=Gm();pr?((pr.exports=Gr)._=Gr,Bi._=Gr):Oi._=Gr}).call(Tue)})(R2,R2.exports)),R2.exports}var q4=Rue();const o9=eu(q4);function Due(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var mO,OF;function Pue(){if(OF)return mO;OF=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return mO=n,mO}var Uue=Pue();const BF=eu(Uue);var mf=Uint8Array,S_=Uint16Array,Lue=Int32Array,vZ=new mf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bZ=new mf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Kue=new mf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CZ=function(n,e){for(var t=new S_(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Lue(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},_Z=CZ(vZ,2),xZ=_Z.b,Fue=_Z.r;xZ[28]=258,Fue[258]=28;var zue=CZ(bZ,0),jue=zue.b,s9=new S_(32768);for(var nl=0;nl<32768;++nl){var gy=(nl&43690)>>1|(nl&21845)<<1;gy=(gy&52428)>>2|(gy&13107)<<2,gy=(gy&61680)>>4|(gy&3855)<<4,s9[nl]=((gy&65280)>>8|(gy&255)<<8)>>1}var o3=(function(n,e,t){for(var i=n.length,r=0,o=new S_(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new S_(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new S_(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var h=r<<4|n[r],m=e-n[r],v=s[n[r]-1]++<<m,x=v|(1<<m)-1;v<=x;++v)a[s9[v]>>c]=h}else for(a=new S_(i),r=0;r<i;++r)n[r]&&(a[r]=s9[s[n[r]-1]++]>>15-n[r]);return a}),Y4=new mf(288);for(var nl=0;nl<144;++nl)Y4[nl]=8;for(var nl=144;nl<256;++nl)Y4[nl]=9;for(var nl=256;nl<280;++nl)Y4[nl]=7;for(var nl=280;nl<288;++nl)Y4[nl]=8;var MZ=new mf(32);for(var nl=0;nl<32;++nl)MZ[nl]=5;var Nue=o3(Y4,9,1),Gue=o3(MZ,5,1),gO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},tm=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},yO=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Wue=function(n){return(n+7)/8|0},Que=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new mf(n.subarray(e,t))},que=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],hf=function(n,e,t){var i=new Error(e||que[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,hf),!t)throw i;return i},YD=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new mf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new mf(r*3));var h=function(Ge){var st=t.length;if(Ge>st){var ut=new mf(Math.max(st*2,Ge));ut.set(t),t=ut}},m=e.f||0,v=e.p||0,x=e.b||0,S=e.l,B=e.d,R=e.m,F=e.n,j=r*8;do{if(!S){m=tm(n,v,1);var W=tm(n,v+1,3);if(v+=3,W)if(W==1)S=Nue,B=Gue,R=9,F=5;else if(W==2){var Y=tm(n,v,31)+257,z=tm(n,v+10,15)+4,ne=Y+tm(n,v+5,31)+1;v+=14;for(var ae=new mf(ne),ve=new mf(19),pe=0;pe<z;++pe)ve[Kue[pe]]=tm(n,v+pe*3,7);v+=z*3;for(var be=gO(ve),Ee=(1<<be)-1,Te=o3(ve,be,1),pe=0;pe<ne;){var je=Te[tm(n,v,Ee)];v+=je&15;var H=je>>4;if(H<16)ae[pe++]=H;else{var Re=0,qe=0;for(H==16?(qe=3+tm(n,v,3),v+=2,Re=ae[pe-1]):H==17?(qe=3+tm(n,v,7),v+=3):H==18&&(qe=11+tm(n,v,127),v+=7);qe--;)ae[pe++]=Re}}var nt=ae.subarray(0,Y),ht=ae.subarray(Y);R=gO(nt),F=gO(ht),S=o3(nt,R,1),B=o3(ht,F,1)}else hf(1);else{var H=Wue(v)+4,$=n[H-4]|n[H-3]<<8,N=H+$;if(N>r){c&&hf(0);break}a&&h(x+$),t.set(n.subarray(H,N),x),e.b=x+=$,e.p=v=N*8,e.f=m;continue}if(v>j){c&&hf(0);break}}a&&h(x+131072);for(var ke=(1<<R)-1,Oe=(1<<F)-1,ze=v;;ze=v){var Re=S[yO(n,v)&ke],we=Re>>4;if(v+=Re&15,v>j){c&&hf(0);break}if(Re||hf(2),we<256)t[x++]=we;else if(we==256){ze=v,S=null;break}else{var At=we-254;if(we>264){var pe=we-257,it=vZ[pe];At=tm(n,v,(1<<it)-1)+xZ[pe],v+=it}var Ct=B[yO(n,v)&Oe],It=Ct>>4;Ct||hf(3),v+=Ct&15;var ht=jue[It];if(It>3){var it=bZ[It];ht+=yO(n,v)&(1<<it)-1,v+=it}if(v>j){c&&hf(0);break}a&&h(x+131072);var Ke=x+At;if(x<ht){var Ie=o-ht,Se=Math.min(ht,Ke);for(Ie+x<0&&hf(3);x<Se;++x)t[x]=i[Ie+x]}for(;x<Ke;++x)t[x]=t[x-ht]}}e.l=S,e.p=ze,e.b=x,e.f=m,S&&(m=1,e.m=R,e.d=B,e.n=F)}while(!m);return x!=t.length&&s?Que(t,0,x):t.subarray(0,x)},Yue=new mf(0),$ue=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&hf(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Vue=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Hue=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&hf(6,"invalid zlib data"),(n[1]>>5&1)==1&&hf(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Zue(n,e){return YD(n,{i:2},e,e)}function Xue(n,e){var t=$ue(n);return t+8>n.length&&hf(6,"invalid gzip data"),YD(n.subarray(t,-8),{i:2},new mf(Vue(n)),e)}function Jue(n,e){return YD(n.subarray(Hue(n),-4),{i:2},e,e)}function ece(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Xue(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Zue(n,e):Jue(n,e)}var tce=typeof TextDecoder<"u"&&new TextDecoder,nce=0;try{tce.decode(Yue,{stream:!0}),nce=1}catch{}var ice=Object.defineProperty,s3=Math.pow,ha=(n,e)=>ice(n,"name",{value:e,configurable:!0}),Vc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(h){r(h)}},s=c=>{try{a(t.throw(c))}catch(h){r(h)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});ha((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:ha((o,s)=>{let a=document.createElement("img"),c=new AbortController,h=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(m=>{m.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):m.tileType===2?i="image/png":m.tileType===3?i="image/jpeg":m.tileType===4?i="image/webp":m.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,h).then(m=>{if(m){let v=new Blob([m.data],{type:i}),x=window.URL.createObjectURL(v);a.src=x,a.cancel=void 0,s(void 0,a)}}).catch(m=>{if(m.name!=="AbortError")throw m}),a},"createTile"),_removeTile:ha(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var rce=ha(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:ha(()=>i.abort(),"cancel")}},"v3compat"),wZ=class{constructor(e){this.tilev4=ha((t,i)=>Vc(this,null,function*(){if(t.type==="json"){let S=t.url.substr(10),B=this.tiles.get(S);if(B||(B=new l9(S),this.tiles.set(S,B)),this.metadata)return{data:yield B.getTileJson(t.url)};let R=yield B.getHeader();return(R.minLon>=R.maxLon||R.minLat>=R.maxLat)&&console.error(`Bounds of PMTiles archive ${R.minLon},${R.minLat},${R.maxLon},${R.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:R.minZoom,maxzoom:R.maxZoom,bounds:[R.minLon,R.minLat,R.maxLon,R.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new l9(s),this.tiles.set(s,a));let c=o[2],h=o[3],m=o[4],v=yield a.getHeader(),x=yield a?.getZxy(+c,+h,+m,i.signal);if(x)return{data:new Uint8Array(x.data),cacheControl:x.cacheControl,expires:x.expires};if(v.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=rce(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ha(wZ,"Protocol");var oce=wZ;function SZ(n,e){return(e>>>0)*4294967296+(n>>>0)}ha(SZ,"toNum");function EZ(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return SZ(n,r);throw new Error("Expected varint not more than 10 bytes")}ha(EZ,"readVarintRemainder");function h_(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,EZ(i,n))}ha(h_,"readVarint");function $D(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}ha($D,"rotate");function OZ(n,e){let t=s3(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),$D(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}ha(OZ,"idOnLevel");var sce=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function BZ(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>s3(2,n)-1||t>s3(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=sce[n],r=s3(2,n),o=0,s=0,a=0,c=[e,t],h=r/2;for(;h>0;)o=(c[0]&h)>0?1:0,s=(c[1]&h)>0?1:0,a+=h*h*(3*o^s),$D(h,c,o,s),h=h/2;return i+a}ha(BZ,"zxyToTileId");function ace(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return OZ(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}ha(ace,"tileIdToZxy");var lce=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(lce||{});function lE(n,e){return Vc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return ece(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}ha(lE,"defaultDecompress");var uce=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(uce||{});function IZ(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}ha(IZ,"tileTypeExt");var cce=127;function kZ(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}ha(kZ,"findTile");var Ace=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Vc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};ha(Ace,"FileSource");var TZ=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Vc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let h=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&h.status===416){let x=h.headers.get("Content-Range");if(!x||!x.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let S=+x.substr(8);h=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${S-1}`}})}let m=h.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),h.status===416||r&&m&&m!==r)throw this.mustReload=!0,new a9(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(h.status>=300)throw new Error(`Bad response code: ${h.status}`);let v=h.headers.get("Content-Length");if(h.status===200&&(!v||+v>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield h.arrayBuffer(),etag:m||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}})}};ha(TZ,"FetchSource");var hce=TZ;function tp(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*s3(2,32)+i}ha(tp,"getUint64");function RZ(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:tp(t,8),rootDirectoryLength:tp(t,16),jsonMetadataOffset:tp(t,24),jsonMetadataLength:tp(t,32),leafDirectoryOffset:tp(t,40),leafDirectoryLength:tp(t,48),tileDataOffset:tp(t,56),tileDataLength:tp(t,64),numAddressedTiles:tp(t,72),numTileEntries:tp(t,80),numTileContents:tp(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}ha(RZ,"bytesToHeader");function VD(n){let e={buf:new Uint8Array(n),pos:0},t=h_(e),i=[],r=0;for(let o=0;o<t;o++){let s=h_(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=h_(e);for(let o=0;o<t;o++)i[o].length=h_(e);for(let o=0;o<t;o++){let s=h_(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}ha(VD,"deserializeIndex");var DZ=class extends Error{};ha(DZ,"EtagMismatch");var a9=DZ;function HD(n,e){return Vc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,cce),r=RZ(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=VD(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}ha(HD,"getHeaderAndRoot");function ZD(n,e,t,i,r){return Vc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=VD(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}ha(ZD,"getDirectory");var dce=class{constructor(e=100,t=!0,i=lE){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Vc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield HD(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Vc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield ZD(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Vc(this,null,function*(){this.cache.delete(e.getKey())})}};ha(dce,"ResolvedValueCache");var PZ=class{constructor(e=100,t=!0,i=lE){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Vc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{HD(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Vc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,h)=>{ZD(e,this.decompress,t,i,r).then(m=>{c(m),this.prune()}).catch(m=>{h(m)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Vc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};ha(PZ,"SharedPromiseCache");var fce=PZ,UZ=class{constructor(e,t,i){typeof e=="string"?this.source=new hce(e):this.source=e,i?this.decompress=i:this.decompress=lE,t?this.cache=t:this.cache=new fce}getHeader(){return Vc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Vc(this,null,function*(){let o=BZ(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let h=0;h<=3;h++){let m=yield this.cache.getDirectory(this.source,a,c,s),v=kZ(m,o);if(v){if(v.runLength>0){let x=yield this.source.getBytes(s.tileDataOffset+v.offset,v.length,r,s.etag);return{data:yield this.decompress(x.data,s.tileCompression),cacheControl:x.cacheControl,expires:x.expires}}a=s.leafDirectoryOffset+v.offset,c=v.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Vc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof a9)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Vc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Vc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof a9)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Vc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=IZ(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};ha(UZ,"PMTiles");var l9=UZ,pce=8,mce={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},gce={"*":{type:"source"}},yce=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],vce={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},bce={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Cce={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},_ce={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},xce={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Mce={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},wce={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Sce=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Ece={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Oce={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Bce={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ice={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kce={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tce={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Dce={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Pce={type:"array",value:"*"},Uce={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Lce={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Kce={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Fce={type:"array",value:"*",minimum:1},zce={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},jce={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Nce={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Gce={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Wce=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Qce={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},qce={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Yce={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},$ce={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Vce={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Hce={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Zce={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Xce={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Jce={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},eAe={"*":{type:"string"}},ns={$version:pce,$root:mce,sources:gce,source:yce,source_vector:vce,source_raster:bce,source_raster_dem:Cce,source_geojson:_ce,source_video:xce,source_image:Mce,layer:wce,layout:Sce,layout_background:Ece,layout_fill:Oce,layout_circle:Bce,layout_heatmap:Ice,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:kce,layout_symbol:Tce,layout_raster:Rce,layout_hillshade:Dce,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Pce,filter_operator:Uce,geometry_type:Lce,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Kce,expression:Fce,light:zce,sky:jce,terrain:Nce,projection:Gce,paint:Wce,paint_fill:Qce,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:qce,paint_circle:Yce,paint_heatmap:$ce,paint_symbol:Vce,paint_raster:Hce,paint_hillshade:Zce,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Xce,transition:Jce,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:eAe};const tAe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nAe(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return tAe.forEach(i=>{i in e&&(t[i]=e[i])}),t}function iAe(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=nAe(n[t],e[n[t].ref]));return n}function Rs(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Rs(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Rs(n[i],e[i]))return!1;return!0}return n===e}function ip(n,e){n.push(e)}function LZ(n,e,t){ip(t,{command:"addSource",args:[n,e[n]]})}function KZ(n,e,t){ip(e,{command:"removeSource",args:[n]}),t[n]=!0}function rAe(n,e,t,i){KZ(n,t,i),LZ(n,e,t)}function oAe(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Rs(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Rs(n[t][i],e[t][i]))return!1;return!0}function sAe(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||KZ(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Rs(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&oAe(n,e,r)?ip(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):rAe(r,e,t,i)):LZ(r,e,t))}function F5(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(Rs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||Rs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function IF(n){return n.id}function kF(n,e){return n[e.id]=e,n}function aAe(n,e,t){n=n||[],e=e||[];const i=n.map(IF),r=e.map(IF),o=n.reduce(kF,{}),s=e.reduce(kF,{}),a=i.slice(),c=Object.create(null);let h,m,v,x,S;for(let B=0,R=0;B<i.length;B++)h=i[B],Object.prototype.hasOwnProperty.call(s,h)?R++:(ip(t,{command:"removeLayer",args:[h]}),a.splice(a.indexOf(h,R),1));for(let B=0,R=0;B<r.length;B++)h=r[r.length-1-B],a[a.length-1-B]!==h&&(Object.prototype.hasOwnProperty.call(o,h)?(ip(t,{command:"removeLayer",args:[h]}),a.splice(a.lastIndexOf(h,a.length-R),1)):R++,x=a[a.length-B],ip(t,{command:"addLayer",args:[s[h],x]}),a.splice(a.length-B,0,h),c[h]=!0);for(let B=0;B<r.length;B++)if(h=r[B],m=o[h],v=s[h],!(c[h]||Rs(m,v))){if(!Rs(m.source,v.source)||!Rs(m["source-layer"],v["source-layer"])||!Rs(m.type,v.type)){ip(t,{command:"removeLayer",args:[h]}),x=a[a.lastIndexOf(h)+1],ip(t,{command:"addLayer",args:[v,x]});continue}F5(m.layout,v.layout,t,h,null,"setLayoutProperty"),F5(m.paint,v.paint,t,h,null,"setPaintProperty"),Rs(m.filter,v.filter)||ip(t,{command:"setFilter",args:[h,v.filter]}),(!Rs(m.minzoom,v.minzoom)||!Rs(m.maxzoom,v.maxzoom))&&ip(t,{command:"setLayerZoomRange",args:[h,v.minzoom,v.maxzoom]});for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&(S==="layout"||S==="paint"||S==="filter"||S==="metadata"||S==="minzoom"||S==="maxzoom"||(S.indexOf("paint.")===0?F5(m[S],v[S],t,h,S.slice(6),"setPaintProperty"):Rs(m[S],v[S])||ip(t,{command:"setLayerProperty",args:[h,S,v[S]]})));for(S in v)!Object.prototype.hasOwnProperty.call(v,S)||Object.prototype.hasOwnProperty.call(m,S)||S==="layout"||S==="paint"||S==="filter"||S==="metadata"||S==="minzoom"||S==="maxzoom"||(S.indexOf("paint.")===0?F5(m[S],v[S],t,h,S.slice(6),"setPaintProperty"):Rs(m[S],v[S])||ip(t,{command:"setLayerProperty",args:[h,S,v[S]]}))}}function lAe(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Rs(n.version,e.version))return[{command:"setStyle",args:[e]}];Rs(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Rs(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Rs(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Rs(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Rs(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Rs(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Rs(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Rs(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Rs(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Rs(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Rs(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Rs(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Rs(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Rs(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];sAe(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),aAe(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class Yn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function sx(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let Tg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},uAe=class FZ{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new FZ(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const uE={kind:"null"},ei={kind:"number"},vo={kind:"string"},io={kind:"boolean"},qg={kind:"color"},cE={kind:"projectionDefinition"},xb={kind:"object"},Jr={kind:"value"},cAe={kind:"error"},AE={kind:"collator"},hE={kind:"formatted"},dE={kind:"padding"},P3={kind:"colorArray"},fE={kind:"numberArray"},$4={kind:"resolvedImage"},pE={kind:"variableAnchorOffsetCollection"};function gf(n,e){return{kind:"array",itemType:n,N:e}}function fl(n){if(n.kind==="array"){const e=fl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const AAe=[uE,ei,vo,io,qg,cE,hE,xb,gf(Jr),dE,fE,P3,$4,pE];function U3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!U3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of AAe)if(!U3(t,e))return null}}return`Expected ${fl(n)} but found ${fl(e)} instead.`}function XD(n,e){return e.some(t=>t.kind===n.kind)}function Mb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function yy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const zZ=.96422,jZ=1,NZ=.82521,GZ=4/29,L_=6/29,WZ=3*L_*L_,hAe=L_*L_*L_,dAe=Math.PI/180,fAe=180/Math.PI;function QZ(n){return n=n%360,n<0&&(n+=360),n}function qZ([n,e,t,i]){n=vO(n),e=vO(e),t=vO(t);let r,o;const s=bO((.2225045*n+.7168786*e+.0606169*t)/jZ);n===e&&e===t?r=o=s:(r=bO((.4360747*n+.3850649*e+.1430804*t)/zZ),o=bO((.0139322*n+.0971045*e+.7141733*t)/NZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function vO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function bO(n){return n>hAe?Math.pow(n,1/3):n/WZ+GZ}function YZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=jZ*_O(r),o=zZ*_O(o),s=NZ*_O(s),[CO(3.1338561*o-1.6168667*r-.4906146*s),CO(-.9787684*o+1.9161415*r+.033454*s),CO(.0719453*o-.2289914*r+1.4052427*s),i]}function CO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function _O(n){return n>L_?n*n*n:WZ*(n-GZ)}function pAe(n){const[e,t,i,r]=qZ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?QZ(Math.atan2(i,t)*fAe):NaN,o,e,r]}function mAe([n,e,t,i]){return n=isNaN(n)?0:n*dAe,YZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function gAe([n,e,t,i]){n=QZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const yAe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function a3(n,e){return yAe(n,e)?n[e]:void 0}function vAe(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=a3(bAe,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[z5(n.slice(s,s+=o)),z5(n.slice(s,s+=o)),z5(n.slice(s,s+=o)),z5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,v,x,S,B,R,F,j]=o,W=[h||" ",x||" ",R].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){const H=[c,v,B].join(""),$=H==="%%%"?100:H===""?255:0;if($){const N=[d_(+a/$,0,1),d_(+m/$,0,1),d_(+S/$,0,1),F?TF(+F,j):1];if(RF(N))return N}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,v,x]=i,S=[s||" ",c||" ",m].join("");if(S==="  "||S==="  /"||S===",,"||S===",,,"){const B=[+o,d_(+a,0,100),d_(+h,0,100),v?TF(+v,x):1];if(RF(B))return gAe(B)}}}function z5(n){return parseInt(n.padEnd(2,n),16)/255}function TF(n,e){return d_(e?n/100:n,0,1)}function d_(n,e,t){return Math.min(Math.max(e,n),t)}function RF(n){return!n.some(Number.isNaN)}const bAe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function $y(n,e,t){return n+t*(e-n)}function ax(n,e,t){return n.map((i,r)=>$y(i,e[r],t))}function CAe(n){return n==="rgb"||n==="hcl"||n==="lab"}let da=class f_{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof f_)return e;if(typeof e!="string")return;const t=vAe(e);if(t)return new f_(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",pAe(this.rgb))}get lab(){return this.overwriteGetter("lab",qZ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=ax(e.rgb,t.rgb,i);return new f_(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,v,x]=t.hcl;let S,B;if(!isNaN(o)&&!isNaN(h)){let H=h-o;h>o&&H>180?H-=360:h<o&&o-h>180&&(H+=360),S=o+i*H}else isNaN(o)?isNaN(h)?S=NaN:(S=h,(a===1||a===0)&&(B=m)):(S=o,(v===1||v===0)&&(B=s));const[R,F,j,W]=mAe([S,B??$y(s,m,i),$y(a,v,i),$y(c,x,i)]);return new f_(R,F,j,W,!1)}case"lab":{const[o,s,a,c]=YZ(ax(e.lab,t.lab,i));return new f_(o,s,a,c,!1)}}}};da.black=new da(0,0,0,1);da.white=new da(1,1,1,1);da.transparent=new da(0,0,0,0);da.red=new da(1,0,0,1);let JD=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const _Ae=["bottom","center","top"];let u9=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},Ix=class nw{constructor(e){this.sections=e}static fromString(e){return new nw([new u9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof nw?e:nw.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},l0=class D2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof D2)return e;if(typeof e=="number")return new D2([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new D2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new D2(ax(e.values,t.values,i))}},u0=class P2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof P2)return e;if(typeof e=="number")return new P2([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new P2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new P2(ax(e.values,t.values,i))}},pp=class U2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof U2)return e;if(typeof e=="string"){const i=da.parse(e);return i?new U2([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=da.parse(i);if(!r)return;t.push(r)}return new U2(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(da.interpolate(e.values[s],t.values[s],i,r));return new U2(o)}},Bl=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const xAe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let uv=class iw{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof iw)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!xAe.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new iw(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Bl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Bl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,v]=o[a+1];s.push([$y(c,m,i),$y(h,v,i)])}return new iw(s)}},Hb=class $Z{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new $Z({name:e,available:!1}):null}},kx=class p_{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new p_(e,t,i)}static parse(e){if(e instanceof p_)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new p_(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new p_(e.from,e.to,e.transition);if(typeof e=="string")return new p_(e,e,1)}};function VZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function L3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof kx||n instanceof da||n instanceof JD||n instanceof Ix||n instanceof l0||n instanceof u0||n instanceof pp||n instanceof uv||n instanceof Hb)return!0;if(Array.isArray(n)){for(const e of n)if(!L3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!L3(n[e]))return!1;return!0}else return!1}function Xu(n){if(n===null)return uE;if(typeof n=="string")return vo;if(typeof n=="boolean")return io;if(typeof n=="number")return ei;if(n instanceof da)return qg;if(n instanceof kx)return cE;if(n instanceof JD)return AE;if(n instanceof Ix)return hE;if(n instanceof l0)return dE;if(n instanceof u0)return fE;if(n instanceof pp)return P3;if(n instanceof uv)return pE;if(n instanceof Hb)return $4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Xu(i);if(!t)t=r;else{if(t===r)continue;t=Jr;break}}return gf(t||Jr,e)}else return xb}function l3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof da||n instanceof kx||n instanceof Ix||n instanceof l0||n instanceof u0||n instanceof pp||n instanceof uv||n instanceof Hb?n.toString():JSON.stringify(n)}let Fw=class HZ{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!L3(e[1]))return t.error("invalid value");const i=e[1];let r=Xu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new HZ(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const j5={string:vo,number:ei,boolean:io,object:xb};let e1=class ZZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in j5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=j5[h],i++}else a=Jr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=gf(a,c)}else{if(!j5[o])throw new Error(`Types doesn't contain name = ${o}`);r=j5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Jr);if(!a)return null;s.push(a)}return new ZZ(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(U3(this.type,Xu(i))){if(t===this.args.length-1)throw new Bl(`Expected value to be of type ${fl(this.type)}, but found ${fl(Xu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const DF={"to-boolean":io,"to-color":qg,"to-number":ei,"to-string":vo};let E_=class XZ{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!DF[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=DF[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Jr);if(!a)return null;o.push(a)}return new XZ(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof da)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=VZ(t[0],t[1],t[2],t[3]),!i))return new da(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Bl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=l0.parse(t);if(r)return r}throw new Bl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=u0.parse(t);if(r)return r}throw new Bl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=pp.parse(t);if(r)return r}throw new Bl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=uv.parse(t);if(r)return r}throw new Bl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Bl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ix.fromString(l3(this.args[0].evaluate(e)));case"resolvedImage":return Hb.fromString(l3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return l3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const MAe=["Unknown","Point","LineString","Polygon"];let JZ=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?MAe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=da.parse(e),this._parseColorCache.set(e,t)),t}},eX=class tX{constructor(e,t,i=[],r,o=new uAe,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new e1(o,[r]):s==="coerce"?new E_(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof Fw)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new JZ;try{s=new Fw(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new tX(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Tg(i,e))}checkSubtype(e,t){const i=U3(e,t);return i&&this.error(i),i}},nX=class iX{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new iX(i,r):null}outputDefined(){return this.result.outputDefined()}},rX=class oX{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new oX(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},wAe=class sX{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ei),r=t.parse(e[2],2,gf(t.expectedType||Jr));if(!i||!r)return null;const o=r.type;return new sX(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Bl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Bl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Bl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},SAe=class aX{constructor(e,t){this.type=io,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jr);return!i||!r?null:XD(i.type,[io,vo,ei,uE,Jr])?new aX(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${fl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Mb(t,["boolean","string","number","null"]))throw new Bl(`Expected first argument to be of type boolean, string, number or null, but found ${fl(Xu(t))} instead.`);if(!Mb(i,["string","array"]))throw new Bl(`Expected second argument to be of type array or string, but found ${fl(Xu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},EAe=class c9{constructor(e,t,i){this.type=ei,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jr);if(!i||!r)return null;if(!XD(i.type,[io,vo,ei,uE,Jr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${fl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new c9(i,r,o):null}else return new c9(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Mb(t,["boolean","string","number","null"]))throw new Bl(`Expected first argument to be of type boolean, string, number or null, but found ${fl(Xu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Mb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(Mb(i,["array"]))return i.indexOf(t,r);throw new Bl(`Expected second argument to be of type array or string, but found ${fl(Xu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},OAe=class lX{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const v=e[h+1];Array.isArray(m)||(m=[m]);const x=t.concat(h);if(m.length===0)return x.error("Expected at least one branch label.");for(const B of m){if(typeof B!="number"&&typeof B!="string")return x.error("Branch labels must be numbers or strings.");if(typeof B=="number"&&Math.abs(B)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof B=="number"&&Math.floor(B)!==B)return x.error("Numeric branch labels must be integer values.");if(!i)i=Xu(B);else if(x.checkSubtype(i,Xu(B)))return null;if(typeof o[String(B)]<"u")return x.error("Branch labels must be unique.");o[String(B)]=s.length}const S=t.parse(v,h,r);if(!S)return null;r=r||S.type,s.push(S)}const a=t.parse(e[1],1,Jr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new lX(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Xu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},BAe=class uX{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,io);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new uX(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},IAe=class A9{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,ei);if(!i||!r)return null;if(!XD(i.type,[gf(Jr),vo,Jr]))return t.error(`Expected first argument to be of type array or string, but found ${fl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new A9(i.type,i,r,o):null}else return new A9(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Mb(t,["string"]))return[...t].slice(i,r).join("");if(Mb(t,["array"]))return t.slice(i,r);throw new Bl(`Expected first argument to be of type array or string, but found ${fl(Xu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function mE(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Bl("Input is not a number.");return 0}let cX=class AX{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new AX(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=mE(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function kAe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xO,PF;function TAe(){if(PF)return xO;PF=1,xO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},xO}var RAe=TAe(),DAe=kAe(RAe);let i1=class h9{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=MO(t,e.base,i,r);else if(e.name==="linear")o=MO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new DAe(s[0],s[1],s[2],s[3]).solve(MO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ei),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=P3?c=qg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],v=s[h+1],x=h+3,S=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const B=t.parse(v,S,c);if(!B)return null;c=c||B.type,a.push([m,B])}return!yy(c,ei)&&!yy(c,cE)&&!yy(c,qg)&&!yy(c,dE)&&!yy(c,fE)&&!yy(c,P3)&&!yy(c,pE)&&!yy(c,gf(ei))?t.error(`Type ${fl(c)} is not interpolatable.`):new h9(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=mE(t,r),a=t[s],c=t[s+1],h=h9.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return $y(m,v,h);case"color":return da.interpolate(m,v,h);case"padding":return l0.interpolate(m,v,h);case"colorArray":return pp.interpolate(m,v,h);case"numberArray":return u0.interpolate(m,v,h);case"variableAnchorOffsetCollection":return uv.interpolate(m,v,h);case"array":return ax(m,v,h);case"projectionDefinition":return kx.interpolate(m,v,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return da.interpolate(m,v,h,"hcl");case"colorArray":return pp.interpolate(m,v,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return da.interpolate(m,v,h,"lab");case"colorArray":return pp.interpolate(m,v,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function MO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const PAe={color:da.interpolate,number:$y,padding:l0.interpolate,numberArray:u0.interpolate,colorArray:pp.interpolate,variableAnchorOffsetCollection:uv.interpolate,array:ax};let hX=class d9{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>U3(r,a.type))?new d9(Jr,o):new d9(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof Hb&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function UF(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function UAe(n,e,t){return e===t}function LAe(n,e,t){return e!==t}function KAe(n,e,t){return e<t}function FAe(n,e,t){return e>t}function zAe(n,e,t){return e<=t}function jAe(n,e,t){return e>=t}function dX(n,e,t,i){return i.compare(e,t)===0}function NAe(n,e,t,i){return!dX(n,e,t,i)}function GAe(n,e,t,i){return i.compare(e,t)<0}function WAe(n,e,t,i){return i.compare(e,t)>0}function QAe(n,e,t,i){return i.compare(e,t)<=0}function qAe(n,e,t,i){return i.compare(e,t)>=0}function Tx(n,e,t){const i=n!=="=="&&n!=="!=";return class fX{constructor(o,s,a){this.type=io,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Jr);if(!c)return null;if(!UF(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${fl(c.type)}'.`);let h=s.parse(o[2],2,Jr);if(!h)return null;if(!UF(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${fl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${fl(c.type)}' and '${fl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new e1(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new e1(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,AE),!m)return null}return new fX(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Bl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const YAe=Tx("==",UAe,dX),$Ae=Tx("!=",LAe,NAe),VAe=Tx("<",KAe,GAe),HAe=Tx(">",FAe,WAe),ZAe=Tx("<=",zAe,QAe),XAe=Tx(">=",jAe,qAe);let pX=class mX{constructor(e,t,i){this.type=AE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,io);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,io);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,vo),!s)?null:new mX(r,o,s)}evaluate(e){return new JD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},JAe=class gX{constructor(e,t,i,r,o){this.type=vo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,vo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,vo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ei),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ei),!c)?null:new gX(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},ehe=class yX{constructor(e){this.type=hE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ei),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,gf(vo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,qg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!_Ae.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,vo),!v)return null}const x=r[r.length-1];x.scale=c,x.font=h,x.textColor=m,x.verticalAlign=v}else{const c=t.parse(e[s],1,Jr);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new yX(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Xu(r)===$4?new u9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new u9(l3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Ix(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},the=class vX{constructor(e){this.type=$4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,vo);return i?new vX(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=Hb.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},nhe=class bX{constructor(e){this.type=ei,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${fl(i.type)} instead.`):new bX(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Bl(`Expected value to be of type string or array, but found ${fl(Xu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const Yg=8192;function ihe(n,e){const t=rhe(n[0]),i=she(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Yg),Math.round(i*r*Yg)]}function eP(n,e){const t=Math.pow(2,e.z),i=(n[0]/Yg+e.x)/t,r=(n[1]/Yg+e.y)/t;return[ohe(i),ahe(r)]}function rhe(n){return(180+n)/360}function ohe(n){return n*360-180}function she(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function ahe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function V4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function K3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function lhe(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function uhe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function gE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return dhe(o,r)===0?!1:!!(LF(n,e,t,i)&&LF(t,i,n,e))}function che(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(gE(n,e,i[r],i[r+1]))return!0;return!1}function Rx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(uhe(n,r[o],r[o+1]))return t;lhe(n,r[o],r[o+1])&&(i=!i)}return i}function Ahe(n,e){for(const t of e)if(Rx(n,t))return!0;return!1}function CX(n,e){for(const t of n)if(!Rx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(che(n[t],n[t+1],e))return!1;return!0}function hhe(n,e){for(const t of e)if(CX(n,t))return!0;return!1}function dhe(n,e){return n[0]*e[1]-n[1]*e[0]}function LF(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,v=s*h-c*a;return m>0&&v<0||m<0&&v>0}function tP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=ihe(n[r][s],t);V4(e,a),o.push(a)}i.push(o)}return i}function _X(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=tP(n[r],e,t);i.push(o)}return i}function xX(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}V4(e,n)}function fhe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function KF(n,e,t,i){const r=Math.pow(2,i.z)*Yg,o=[i.x*Yg,i.y*Yg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];xX(h,e,t,r),s.push(h)}return s}function FF(n,e,t,i){const r=Math.pow(2,i.z)*Yg,o=[i.x*Yg,i.y*Yg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];V4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){fhe(e);for(const a of s)for(const c of a)xX(c,e,t,r)}return s}function phe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=tP(e.coordinates,i,r),s=KF(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!Rx(a,o))return!1}if(e.type==="MultiPolygon"){const o=_X(e.coordinates,i,r),s=KF(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!Ahe(a,o))return!1}return!0}function mhe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=tP(e.coordinates,i,r),s=FF(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!CX(a,o))return!1}if(e.type==="MultiPolygon"){const o=_X(e.coordinates,i,r),s=FF(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!hhe(a,o))return!1}return!0}let nP=class rw{constructor(e,t){this.type=io,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(L3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new rw(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new rw(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new rw(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return phe(e,this.geometries);if(e.geometryType()==="LineString")return mhe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},MX=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function ghe(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=yhe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function yhe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const vhe=6378.137,zF=1/298.257223563,jF=zF*(2-zF),NF=Math.PI/180;let iP=class{constructor(e){const t=NF*vhe*1e3,i=Math.cos(e*NF),r=1/(1-jF*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-jF)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-h)*this.kx,x=(e[c+1][1]-m)*this.ky,S=0;(v!==0||x!==0)&&(S=(this.wrap(t[0]-h)*this.kx*v+(t[1]-m)*this.ky*x)/(v*v+x*x),S>1?(h=e[c+1][0],m=e[c+1][1]):S>0&&(h+=v/this.kx*S,m+=x/this.ky*S)),v=this.wrap(t[0]-h)*this.kx,x=(t[1]-m)*this.ky;const B=v*v+x*x;B<i&&(i=B,r=h,o=m,s=c,a=S)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const f9=100,p9=50;function wX(n,e){return e[0]-n[0]}function zw(n){return n[1]-n[0]+1}function u1(n,e){return n[1]>=n[0]&&n[1]<e}function m9(n,e){if(n[0]>n[1])return[null,null];const t=zw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function g9(n,e){if(!u1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)V4(t,n[i]);return t}function y9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)V4(e,i);return e}function GF(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function rP(n,e,t){if(!GF(n)||!GF(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function db(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function oP(n,e,t,i,r){const o=Math.min(db(n,[t,i],r),db(e,[t,i],r)),s=Math.min(db(t,[n,e],r),db(i,[n,e],r));return Math.min(o,s)}function bhe(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],x=t[m+1];if(gE(c,h,v,x))return 0;s=Math.min(s,oP(c,h,v,x,r))}}return s}function Che(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function _he(n,e,t){if(Rx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,db(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function xhe(n,e,t,i){if(!u1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Rx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,v=m-1;h<m;v=h++){const x=c[v],S=c[h];if(gE(s,a,x,S))return 0;r=Math.min(r,oP(s,a,x,S,i))}}return r}function WF(n,e){for(const t of n)for(const i of t)if(Rx(i,e,!0))return!0;return!1}function Mhe(n,e,t,i=1/0){const r=y9(n),o=y9(e);if(i!==1/0&&rP(r,o,t)>=i)return i;if(K3(r,o)){if(WF(n,e))return 0}else if(WF(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const v=a[m],x=a[c];for(const S of e)for(let B=0,R=S.length,F=R-1;B<R;F=B++){const j=S[F],W=S[B];if(gE(v,x,j,W))return 0;s=Math.min(s,oP(v,x,j,W,t))}}return s}function QF(n,e,t,i,r,o){if(!o)return;const s=rP(g9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function N5(n,e,t,i,r,o,s){if(!o||!s)return;const a=rP(g9(i,o),g9(r,s),t);a<e&&n.push([a,o,s])}function jw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new MX([[0,[0,n.length-1],[0,0]]],wX),a=y9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?p9:f9;if(zw(h)<=m){if(!u1(h,n.length))return NaN;if(e){const v=xhe(n,h,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=h[0];v<=h[1];++v){const x=_he(n[v],t,i);if(o=Math.min(o,x),o===0)return 0}}else{const v=m9(h,e);QF(s,o,i,n,a,v[0]),QF(s,o,i,n,a,v[1])}}return o}function Nw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new MX([[0,[0,n.length-1],[0,t.length-1]]],wX);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],v=e?p9:f9,x=i?p9:f9;if(zw(h)<=v&&zw(m)<=x){if(!u1(h,n.length)&&u1(m,t.length))return NaN;let S;if(e&&i)S=bhe(n,h,t,m,r),s=Math.min(s,S);else if(e&&!i){const B=n.slice(h[0],h[1]+1);for(let R=m[0];R<=m[1];++R)if(S=db(t[R],B,r),s=Math.min(s,S),s===0)return s}else if(!e&&i){const B=t.slice(m[0],m[1]+1);for(let R=h[0];R<=h[1];++R)if(S=db(n[R],B,r),s=Math.min(s,S),s===0)return s}else S=Che(n,h,t,m,r),s=Math.min(s,S)}else{const S=m9(h,e),B=m9(m,i);N5(a,s,r,n,t,S[0],B[0]),N5(a,s,r,n,t,S[0],B[1]),N5(a,s,r,n,t,S[1],B[0]),N5(a,s,r,n,t,S[1],B[1])}}return s}function whe(n,e){const t=n.geometry(),i=t.flat().map(s=>eP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new iP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Nw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Nw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,jw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function She(n,e){const t=n.geometry(),i=t.flat().map(s=>eP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new iP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Nw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Nw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,jw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Ehe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=ghe(t).map(s=>s.map(a=>a.map(c=>eP([c.x,c.y],n.canonical)))),r=new iP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,jw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,jw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Mhe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function wO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let sP=class ow{constructor(e,t){this.type=ei,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(L3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new ow(i,i.features.map(r=>wO(r.geometry)).flat());if(i.type==="Feature")return new ow(i,wO(i.geometry));if("type"in i&&"coordinates"in i)return new ow(i,wO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return whe(e,this.geometries);if(e.geometryType()==="LineString")return She(e,this.geometries);if(e.geometryType()==="Polygon")return Ehe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},aP=class SX{constructor(e){this.type=Jr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new SX(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:a3(i,this.key)}eachChild(){}outputDefined(){return!1}};const lP={"==":YAe,"!=":$Ae,">":HAe,"<":VAe,">=":XAe,"<=":ZAe,array:e1,at:wAe,boolean:e1,case:BAe,coalesce:hX,collator:pX,format:ehe,image:the,in:SAe,"index-of":EAe,interpolate:i1,"interpolate-hcl":i1,"interpolate-lab":i1,length:nhe,let:nX,literal:Fw,match:OAe,number:e1,"number-format":JAe,object:e1,slice:IAe,step:cX,string:e1,"to-boolean":E_,"to-color":E_,"to-number":E_,"to-string":E_,var:rX,within:nP,distance:sP,"global-state":aP};let Dx=class L2{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=L2.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new eX(t.registry,Gw,t.path,null,t.scope);const v=[];let x=!1;for(let S=1;S<e.length;S++){const B=e[S],R=Array.isArray(h)?h[S-1]:h.type,F=c.parse(B,1+v.length,R);if(!F){x=!0;break}v.push(F)}if(!x){if(Array.isArray(h)&&h.length!==v.length){c.error(`Expected ${h.length} arguments, but found ${v.length} instead.`);continue}for(let S=0;S<v.length;S++){const B=Array.isArray(h)?h[S]:h.type,R=v[S];c.concat(S+1).checkSubtype(B,R.type)}if(c.errors.length===0)return new L2(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([x])=>Bhe(x)).join(" | "),v=[];for(let x=1;x<e.length;x++){const S=t.parse(e[x],1+v.length);if(!S)return null;v.push(fl(S.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){L2.definitions=t;for(const i in t)e[i]=L2}};function qF(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=VZ(e,t,i,o);if(s)throw new Bl(s);return new da(e/255,t/255,i/255,o,!1)}function YF(n,e){return n in e}function SO(n,e){const t=e[n];return typeof t>"u"?null:t}function Ohe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Hv(n){return{type:n}}Dx.register(lP,{error:[cAe,[vo],(n,[e])=>{throw new Bl(e.evaluate(n))}],typeof:[vo,[Jr],(n,[e])=>fl(Xu(e.evaluate(n)))],"to-rgba":[gf(ei,4),[qg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[qg,[ei,ei,ei],qF],rgba:[qg,[ei,ei,ei,ei],qF],has:{type:io,overloads:[[[vo],(n,[e])=>YF(e.evaluate(n),n.properties())],[[vo,xb],(n,[e,t])=>YF(e.evaluate(n),t.evaluate(n))]]},get:{type:Jr,overloads:[[[vo],(n,[e])=>SO(e.evaluate(n),n.properties())],[[vo,xb],(n,[e,t])=>SO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Jr,[vo],(n,[e])=>SO(e.evaluate(n),n.featureState||{})],properties:[xb,[],n=>n.properties()],"geometry-type":[vo,[],n=>n.geometryType()],id:[Jr,[],n=>n.id()],zoom:[ei,[],n=>n.globals.zoom],"heatmap-density":[ei,[],n=>n.globals.heatmapDensity||0],elevation:[ei,[],n=>n.globals.elevation||0],"line-progress":[ei,[],n=>n.globals.lineProgress||0],accumulated:[Jr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ei,Hv(ei),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ei,Hv(ei),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ei,overloads:[[[ei,ei],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ei],(n,[e])=>-e.evaluate(n)]]},"/":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ei,[],()=>Math.LN2],pi:[ei,[],()=>Math.PI],e:[ei,[],()=>Math.E],"^":[ei,[ei,ei],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ei,[ei],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))],log2:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ei,[ei],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ei,[ei],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ei,[ei],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ei,[ei],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ei,[ei],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ei,[ei],(n,[e])=>Math.atan(e.evaluate(n))],min:[ei,Hv(ei),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ei,Hv(ei),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ei,[ei],(n,[e])=>Math.abs(e.evaluate(n))],round:[ei,[ei],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ei,[ei],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ei,[ei],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[io,[vo,Jr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[io,[Jr],(n,[e])=>n.id()===e.value],"filter-type-==":[io,[vo],(n,[e])=>n.geometryType()===e.value],"filter-<":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[io,[vo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[io,[Jr],(n,[e])=>e.value in n.properties()],"filter-has-id":[io,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[io,[gf(vo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[io,[gf(Jr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[io,[vo,gf(Jr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[io,[vo,gf(Jr)],(n,[e,t])=>Ohe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:io,overloads:[[[io,io],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Hv(io),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:io,overloads:[[[io,io],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Hv(io),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[io,[io],(n,[e])=>!e.evaluate(n)],"is-supported-script":[io,[vo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[vo,[vo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[vo,[vo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[vo,Hv(Jr),(n,e)=>e.map(t=>l3(t.evaluate(n))).join("")],"resolved-locale":[vo,[AE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Bhe(n){return Array.isArray(n)?`(${n.map(fl).join(", ")})`:`(${fl(n.type)}...)`}function Gw(n){if(n instanceof rX)return Gw(n.boundExpression);if(n instanceof Dx&&n.name==="error")return!1;if(n instanceof pX)return!1;if(n instanceof nP)return!1;if(n instanceof sP)return!1;if(n instanceof aP)return!1;const e=n instanceof E_||n instanceof e1;let t=!0;return n.eachChild(i=>{e?t=t&&Gw(i):t=t&&i instanceof Fw}),t?yE(n)&&vE(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function yE(n){if(n instanceof Dx){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof nP||n instanceof sP)return!1;let e=!0;return n.eachChild(t=>{e&&!yE(t)&&(e=!1)}),e}function F3(n){if(n instanceof Dx&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!F3(t)&&(e=!1)}),e}function vE(n,e){if(n instanceof Dx&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!vE(i,e)&&(t=!1)}),t}function v9(n){return{result:"success",value:n}}function m_(n){return{result:"error",value:n}}function Ww(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function EX(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function uP(n){return!!n.expression&&n.expression.interpolated}function Co(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function H4(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Xu(n)===xb}function Ihe(n){return n}function khe(n){switch(n.type){case"color":return da.parse;case"padding":return l0.parse;case"numberArray":return u0.parse;case"colorArray":return pp.parse;default:return null}}function The(n){switch(n){case"exponential":return OX;case"interval":return Dhe;case"categorical":return Rhe;case"identity":return Phe;default:throw new Error(`Unknown function type "${n}"`)}}function cP(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(uP(e)?"exponential":"interval"),s=khe(e);if(s&&(n=sx({},n),n.stops&&(n.stops=n.stops.map(m=>[m[0],s(m[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!CAe(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=The(o);let c,h;if(o==="categorical"){c=Object.create(null);for(const m of n.stops)c[m[0]]=m[1];h=typeof n.stops[0][0]}if(t){const m={},v=[];for(let B=0;B<n.stops.length;B++){const R=n.stops[B],F=R[0].zoom;m[F]===void 0&&(m[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},v.push(F)),m[F].stops.push([R[0].value,R[1]])}const x=[];for(const B of v)x.push([m[B].zoom,cP(m[B],e)]);const S={name:"linear"};return{kind:"composite",interpolationType:S,interpolationFactor:i1.interpolationFactor.bind(void 0,S),zoomStops:x.map(B=>B[0]),evaluate({zoom:B},R){return OX({stops:x,base:n.base},e,B).evaluate(B,R)}}}else if(r){const m=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:m,interpolationFactor:i1.interpolationFactor.bind(void 0,m),zoomStops:n.stops.map(v=>v[0]),evaluate:({zoom:v})=>a(n,e,v,c,h)}}else return{kind:"source",evaluate(m,v){const x=v&&v.properties?v.properties[n.property]:void 0;return x===void 0?Z4(n.default,e.default):a(n,e,x,c,h)}}}function Z4(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function Rhe(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return Z4(o,n.default,e.default)}function Dhe(n,e,t){if(Co(t)!=="number")return Z4(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=mE(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function OX(n,e,t){const i=n.base!==void 0?n.base:1;if(Co(t)!=="number")return Z4(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=mE(n.stops.map(m=>m[0]),t),s=Uhe(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],h=PAe[e.type]||Ihe;return typeof a.evaluate=="function"?{evaluate(...m){const v=a.evaluate.apply(void 0,m),x=c.evaluate.apply(void 0,m);if(!(v===void 0||x===void 0))return h(v,x,s,n.colorSpace)}}:h(a,c,s,n.colorSpace)}function Phe(n,e,t){switch(e.type){case"color":t=da.parse(t);break;case"formatted":t=Ix.fromString(t.toString());break;case"resolvedImage":t=Hb.fromString(t.toString());break;case"padding":t=l0.parse(t);break;case"colorArray":t=pp.parse(t);break;case"numberArray":t=u0.parse(t);break;default:Co(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return Z4(t,n.default,e.default)}function Uhe(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let BX=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new JZ,this._defaultValue=t?zhe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=lx(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Bl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function X4(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in lP}function AP(n,e,t){const i=new eX(lP,Gw,[],e?Fhe(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?v9(new BX(r,e,t)):m_(i.errors)}let b9=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!F3(t.expression),this.globalStateRefs=dP(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},C9=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!F3(t.expression),this.globalStateRefs=dP(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=lx(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?i1.interpolationFactor(this.interpolationType,e,t,i):0}};function Lhe(n){return n._styleExpression!==void 0}function hP(n,e,t){const i=AP(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=yE(r);if(!o&&!Ww(e))return m_([new Tg("","data expressions not supported")]);const s=vE(r,["zoom"]);if(!s&&!EX(e))return m_([new Tg("","zoom expressions not supported")]);const a=sw(r);if(!a&&!s)return m_([new Tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Tg)return m_([a]);if(a instanceof i1&&!uP(e))return m_([new Tg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return v9(o?new b9("constant",i.value,t):new b9("source",i.value,t));const c=a instanceof i1?a.interpolation:void 0;return v9(o?new C9("camera",i.value,a.labels,c,t):new C9("composite",i.value,a.labels,c,t))}class bE{constructor(e,t){this._parameters=e,this._specification=t,sx(this,cP(this._parameters,this._specification))}static deserialize(e){return new bE(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Khe(n,e,t){if(H4(n))return new bE(n,e);if(X4(n)){const i=hP(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=da.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=l0.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=u0.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=pp.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=uv.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=kx.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function sw(n){let e=null;if(n instanceof nX)e=sw(n.result);else if(n instanceof hX){for(const t of n.args)if(e=sw(t),e)break}else(n instanceof cX||n instanceof i1)&&n.input instanceof Dx&&n.input.name==="zoom"&&(e=n);return e instanceof Tg||n.eachChild(t=>{const i=sw(t);i instanceof Tg?e=i:!e&&i?e=new Tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Tg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function dP(n,e=new Set){return n instanceof aP&&e.add(n.key),n.eachChild(t=>{dP(t,e)}),e}function Fhe(n){const e={color:qg,string:vo,number:ei,enum:vo,boolean:io,formatted:hE,padding:dE,numberArray:fE,colorArray:P3,projectionDefinition:cE,resolvedImage:$4,variableAnchorOffsetCollection:pE};return n.type==="array"?gf(e[n.value]||Jr,n.length):e[n.type]}function zhe(n){if(n.type==="color"&&H4(n.default))return new da(0,0,0,0);switch(n.type){case"color":return da.parse(n.default)||null;case"padding":return l0.parse(n.default)||null;case"numberArray":return u0.parse(n.default)||null;case"colorArray":return pp.parse(n.default)||null;case"variableAnchorOffsetCollection":return uv.parse(n.default)||null;case"projectionDefinition":return kx.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function lx(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function CE(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!CE(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function u3(n,e={}){if(CE(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return Nhe(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=u3(s,a),h=jhe(a);return h===!0?c:["case",h,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>u3(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",u3(["any",...r],{})]}case"in":{const[,r,...o]=t;return $F(r,o)}case"!in":{const[,r,...o]=t;return $F(r,o,!0)}case"has":return VF(t[1]);case"!has":return["!",VF(t[1])];default:return!0}}function jhe(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function Nhe(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function $F(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function VF(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function z3(n){return typeof n=="object"?["literal",n]:n}function IX(n,e){let t=n.stops;if(!t)return Ghe(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],kX(s[1])]:[s[0],z3(s[1])]),i?Whe(n,e,t):o?qhe(n,e,t):_9(n,e,t)}function Ghe(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,z3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function fP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Whe(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(mP({},e)==="exponential"){const a=[fP(n),["linear"],["zoom"]];for(const c of o){const h=_9(i[c],e,r[c]);K_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=_9(i[c],e,r[c]);K_(a,c,h,!0)}return pP(a),a}}function Qhe(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function HF(n,e){const t=z3(Qhe(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function _9(n,e,t){const i=mP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(HF(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)K_(o,s[0],s[1],!1);return o.push(HF(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)K_(o,s[0],s[1],!0);return pP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,z3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[fP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)K_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,z3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function qhe(n,e,t,i=["zoom"]){const r=mP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[fP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)K_(o,a[0],a[1],s);return pP(o),o}function pP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function K_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function mP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function kX(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Yhe(n){for(let e=0;e<ns.layout.length;e++)for(const t in ns[ns.layout[e]])if(t===n)return ns[ns.layout[e]][t];for(let e=0;e<ns.paint.length;e++)for(const t in ns[ns.paint[e]])if(t===n)return ns[ns.paint[e]][t];return null}function $he(n,e){for(const t in n.sources)e(n.sources[t])}function c3(n,e){for(const t of n.layers)e(t)}function gP(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:Yhe(a),set(c){s[a]=c}})})}c3(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function TX(n){const e=n.key,t=n.value;return t?[new Yn(e,t,"constants have been deprecated as of v8")]:[]}function Xl(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Lb(n){if(Array.isArray(n))return n.map(Lb);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Lb(n[t]);return e}return Xl(n)}function cp(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const h=Co(t);if(h!=="object")return[new Yn(e,t,`object expected, ${h} found`)];for(const m in t){const v=m.split(".")[0],x=a3(i,v)||i["*"];let S;if(a3(r,v))S=r[v];else if(a3(i,v))S=a;else if(r["*"])S=r["*"];else if(i["*"])S=a;else{c.push(new Yn(e,t[m],`unknown property "${m}"`));continue}c=c.concat(S({key:(e&&`${e}.`)+m,value:t[m],valueSpec:x,style:o,styleSpec:s,object:t,objectKey:m,validateSpec:a},t))}for(const m in i)r[m]||i[m].required&&i[m].default===void 0&&t[m]===void 0&&c.push(new Yn(e,t,`missing required property "${m}"`));return c}function yP(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(Co(e)!=="array")return[new Yn(s,e,`array expected, ${Co(e)} found`)];if(t.length&&e.length!==t.length)return[new Yn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Yn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),Co(t.value)==="object"&&(c=t.value);let h=[];for(let m=0;m<e.length;m++)h=h.concat(a({array:e,arrayIndex:m,value:e[m],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${m}]`}));return h}function _E(n){const e=n.key,t=n.value,i=n.valueSpec;let r=Co(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new Yn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new Yn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new Yn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function RX(n){const e=n.valueSpec,t=Xl(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,h=Co(n.value.stops)==="array"&&Co(n.value.stops[0])==="array"&&Co(n.value.stops[0][0])==="object",m=cp({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:v,default:B}});return t==="identity"&&a&&m.push(new Yn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&m.push(new Yn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!uP(n.valueSpec)&&m.push(new Yn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!Ww(n.valueSpec)?m.push(new Yn(n.key,n.value,"property functions not supported")):a&&!EX(n.valueSpec)&&m.push(new Yn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||h)&&n.value.property===void 0&&m.push(new Yn(n.key,n.value,'"property" property is required')),m;function v(R){if(t==="identity")return[new Yn(R.key,R.value,'identity function may not have a "stops" property')];let F=[];const j=R.value;return F=F.concat(yP({key:R.key,value:j,valueSpec:R.valueSpec,validateSpec:R.validateSpec,style:R.style,styleSpec:R.styleSpec,arrayElementValidator:x})),Co(j)==="array"&&j.length===0&&F.push(new Yn(R.key,j,"array must have at least one stop")),F}function x(R){let F=[];const j=R.value,W=R.key;if(Co(j)!=="array")return[new Yn(W,j,`array expected, ${Co(j)} found`)];if(j.length!==2)return[new Yn(W,j,`array length 2 expected, length ${j.length} found`)];if(h){if(Co(j[0])!=="object")return[new Yn(W,j,`object expected, ${Co(j[0])} found`)];if(j[0].zoom===void 0)return[new Yn(W,j,"object stop key must have zoom")];if(j[0].value===void 0)return[new Yn(W,j,"object stop key must have value")];if(s&&s>Xl(j[0].zoom))return[new Yn(W,j[0].zoom,"stop zoom values must appear in ascending order")];Xl(j[0].zoom)!==s&&(s=Xl(j[0].zoom),o=void 0,r={}),F=F.concat(cp({key:`${W}[0]`,value:j[0],valueSpec:{zoom:{}},validateSpec:R.validateSpec,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{zoom:_E,value:S}}))}else F=F.concat(S({key:`${W}[0]`,value:j[0],validateSpec:R.validateSpec,style:R.style,styleSpec:R.styleSpec},j));return X4(Lb(j[1]))?F.concat([new Yn(`${W}[1]`,j[1],"expressions are not allowed in function stops.")]):F.concat(R.validateSpec({key:`${W}[1]`,value:j[1],valueSpec:e,validateSpec:R.validateSpec,style:R.style,styleSpec:R.styleSpec}))}function S(R,F){const j=Co(R.value),W=Xl(R.value),H=R.value!==null?R.value:F;if(!i)i=j;else if(j!==i)return[new Yn(R.key,H,`${j} stop domain type must match previous stop domain type ${i}`)];if(j!=="number"&&j!=="string"&&j!=="boolean")return[new Yn(R.key,H,"stop domain value must be a number, string, or boolean")];if(j!=="number"&&t!=="categorical"){let $=`number expected, ${j} found`;return Ww(e)&&t===void 0&&($+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yn(R.key,H,$)]}return t==="categorical"&&j==="number"&&(!isFinite(W)||Math.floor(W)!==W)?[new Yn(R.key,H,`integer expected, found ${W}`)]:t!=="categorical"&&j==="number"&&o!==void 0&&W<o?[new Yn(R.key,H,"stop domain values must appear in ascending order")]:(o=W,t==="categorical"&&W in r?[new Yn(R.key,H,"stop domain values must be unique")]:(r[W]=!0,[]))}function B(R){return R.validateSpec({key:R.key,value:R.value,valueSpec:e,validateSpec:R.validateSpec,style:R.style,styleSpec:R.styleSpec})}}function ux(n){const e=(n.expressionContext==="property"?hP:AP)(Lb(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new Yn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Yn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!F3(t))return[new Yn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!F3(t))return[new Yn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!vE(t,["zoom","feature-state"]))return[new Yn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!yE(t))return[new Yn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Vhe(n){const e=n.value,t=n.key,i=Co(e);return i!=="boolean"?[new Yn(t,e,`boolean expected, ${i} found`)]:[]}function x9(n){const e=n.key,t=n.value,i=Co(t);return i!=="string"?[new Yn(e,t,`color expected, ${i} found`)]:da.parse(String(t))?[]:[new Yn(e,t,`color expected, "${t}" found`)]}function j3(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Xl(t))===-1&&r.push(new Yn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Xl(t))===-1&&r.push(new Yn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function vP(n){return CE(Lb(n.value))?ux(sx({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):DX(n)}function DX(n){const e=n.value,t=n.key;if(Co(e)!=="array")return[new Yn(t,e,`array expected, ${Co(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new Yn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(j3({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Xl(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Xl(e[1])==="$type"&&o.push(new Yn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new Yn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=Co(e[1]),r!=="string"&&o.push(new Yn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=Co(e[s]),Xl(e[1])==="$type"?o=o.concat(j3({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new Yn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(DX({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=Co(e[1]),e.length!==2?o.push(new Yn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new Yn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function PX(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const h=a.match(/^(.*)-transition$/);if(e==="paint"&&h&&c[h[1]]&&c[h[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const m=n.valueSpec||c[a];if(!m)return[new Yn(t,s,`unknown property "${a}"`)];let v;if(Co(s)==="string"&&Ww(m)&&!m.tokens&&(v=/^{([^}]+)}$/.exec(s)))return[new Yn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(v[1])} }\`.`)];const x=[];return n.layerType==="symbol"&&a==="text-font"&&H4(Lb(s))&&Xl(s.type)==="identity"&&x.push(new Yn(t,s,'"text-font" does not support identity functions')),x.concat(i({key:n.key,value:s,valueSpec:m,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function UX(n){return PX(n,"paint")}function LX(n){return PX(n,"layout")}function KX(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(Co(t)!=="object")return[new Yn(i,t,`object expected, ${Co(t)} found`)];!t.type&&!t.ref&&e.push(new Yn(i,t,'either "type" or "ref" is required'));let s=Xl(t.type);const a=Xl(t.ref);if(t.id){const c=Xl(t.id);for(let h=0;h<n.arrayIndex;h++){const m=r.layers[h];Xl(m.id)===c&&e.push(new Yn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${m.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(h=>{h in t&&e.push(new Yn(i,t[h],`"${h}" is prohibited for ref layers`))});let c;r.layers.forEach(h=>{Xl(h.id)===a&&(c=h)}),c?c.ref?e.push(new Yn(i,t.ref,"ref cannot reference another ref layer")):s=Xl(c.type):e.push(new Yn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new Yn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],h=c&&Xl(c.type);c?h==="vector"&&s==="raster"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a raster source`)):h!=="raster-dem"&&s==="hillshade"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h!=="raster-dem"&&s==="color-relief"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h==="raster"&&s!=="raster"?e.push(new Yn(i,t.source,`layer "${t.id}" requires a vector source`)):h==="vector"&&!t["source-layer"]?e.push(new Yn(i,t,`layer "${t.id}" must specify a "source-layer"`)):h==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new Yn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(h!=="geojson"||!c.lineMetrics)&&e.push(new Yn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Yn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(cp({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:vP,layout(c){return cp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return LX(sx({layerType:s},h))}}})},paint(c){return cp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return UX(sx({layerType:s},h))}}})}}})),e}function Kb(n){const e=n.value,t=n.key,i=Co(e);return i!=="string"?[new Yn(t,e,`string expected, ${i} found`)]:[]}function Hhe(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=Co(i);if(i===void 0)return a;if(c!=="object")return a.push(new Yn("source_raster_dem",i,`object expected, ${c} found`)),a;const m=Xl(i.encoding)==="custom",v=["redFactor","greenFactor","blueFactor","baseShift"],x=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const S in i)!m&&v.includes(S)?a.push(new Yn(S,i[S],`In "${t}": "${S}" is only valid when "encoding" is set to "custom". ${x} encoding found`)):o[S]?a=a.concat(n.validateSpec({key:S,value:i[S],valueSpec:o[S],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new Yn(S,i[S],`unknown property "${S}"`));return a}const ZF={promoteId:Zhe};function FX(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new Yn(t,e,'"type" is required')];const s=Xl(e.type);let a;switch(s){case"vector":case"raster":return a=cp({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:ZF,validateSpec:o}),a;case"raster-dem":return a=Hhe({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=cp({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:ZF}),e.cluster)for(const c in e.clusterProperties){const[h,m]=e.clusterProperties[c],v=typeof h=="string"?[h,["accumulated"],["get",c]]:h;a.push(...ux({key:`${t}.${c}.map`,value:m,expressionContext:"cluster-map"})),a.push(...ux({key:`${t}.${c}.reduce`,value:v,expressionContext:"cluster-reduce"}))}return a;case"video":return cp({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return cp({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new Yn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return j3({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Zhe({key:n,value:e}){if(Co(e)==="string")return Kb({key:n,value:e});{const t=[];for(const i in e)t.push(...Kb({key:`${n}.${i}`,value:e[i]}));return t}}function zX(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=Co(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Yn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Yn(a,e[a],`unknown property "${a}"`)])}return o}function jX(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=Co(e);if(e===void 0)return[];if(o!=="object")return[new Yn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Yn(a,e[a],`unknown property "${a}"`)]);return s}function NX(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=Co(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Yn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Yn(a,e[a],`unknown property "${a}"`)]);return o}function Xhe(n){return Kb(n).length===0?[]:ux(n)}function Jhe(n){return Kb(n).length===0?[]:ux(n)}function ede(n){const e=n.key,t=n.value;if(Co(t)==="array"){if(t.length<1||t.length>4)return[new Yn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return _E({key:e,value:t,valueSpec:{}})}function tde(n){const e=n.key,t=n.value;if(Co(t)==="array"){const r={type:"number"};if(t.length<1)return[new Yn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return _E({key:e,value:t,valueSpec:{}})}function nde(n){const e=n.key,t=n.value;if(Co(t)==="array"){if(t.length<1)return[new Yn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(x9({key:`${e}[${o}]`,value:t[o]}));return r}else return x9({key:e,value:t})}function ide(n){const e=n.key,t=n.value,i=Co(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new Yn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(j3({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(yP({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function GX(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new Yn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new Yn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(cp({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return Kb({key:i,value:t})}function rde(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=Co(e);if(e===void 0)return[];if(o!=="object")return[new Yn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Yn(a,e[a],`unknown property "${a}"`)]);return s}function ode(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=Co(t);return i==="array"&&!ade(t)&&!sde(t)?[new Yn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new Yn(e,t,`projection expected, invalid type "${i}" found`)]}function sde(n){return!!["interpolate","step","literal"].includes(n[0])}function ade(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function lde(n){return!!n&&n.constructor===Object}function WX(n){return lde(n.value)?[]:[new Yn(n.key,n.value,`object expected, ${Co(n.value)} found`)]}const XF={"*"(){return[]},array:yP,boolean:Vhe,number:_E,color:x9,constants:TX,enum:j3,filter:vP,function:RX,layer:KX,object:cp,source:FX,light:zX,sky:jX,terrain:NX,projection:rde,projectionDefinition:ode,string:Kb,formatted:Xhe,resolvedImage:Jhe,padding:ede,numberArray:tde,colorArray:nde,variableAnchorOffsetCollection:ide,sprite:GX,state:WX};function Qw(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Qw,t.expression&&H4(Xl(e))?RX(n):t.expression&&X4(Lb(e))?ux(n):t.type&&XF[t.type]?XF[t.type](n):cp(sx({},n,{valueSpec:t.type?i[t.type]:t}))}function QX(n){const e=n.value,t=n.key,i=Kb(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new Yn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new Yn(t,e,'"glyphs" url must include a "{range}" token'))),i}function kd(n,e=ns){let t=[];return t=t.concat(Qw({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Qw,objectElementValidators:{glyphs:QX,"*"(){return[]}}})),n.constants&&(t=t.concat(TX({key:"constants",value:n.constants}))),qX(t)}kd.source=wm(Mm(FX));kd.sprite=wm(Mm(GX));kd.glyphs=wm(Mm(QX));kd.light=wm(Mm(zX));kd.sky=wm(Mm(jX));kd.terrain=wm(Mm(NX));kd.state=wm(Mm(WX));kd.layer=wm(Mm(KX));kd.filter=wm(Mm(vP));kd.paintProperty=wm(Mm(UX));kd.layoutProperty=wm(Mm(LX));function Mm(n){return function(e){return n(Object.assign({},e,{validateSpec:Qw}))}}function qX(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function wm(n){return function(...e){return qX(n.apply(this,e))}}const ude=/("(?:[^\\"]|\\.)*")|[:,]/g;function cde(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const v=h.replace(ude,(x,S)=>S||`${x} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const v=a+t,x=[];let S=0,B,R;if(Array.isArray(s)){B="[",R="]";const{length:F}=s;for(;S<F;S++)x.push(o(s[S],v,S===F-1?0:1)||"null")}else{B="{",R="}";const F=Object.keys(s),{length:j}=F;for(;S<j;S++){const W=F[S],H=`${JSON.stringify(W)}: `,$=o(s[W],v,H.length+(S===j-1?0:1));$!==void 0&&x.push(H+$)}}if(x.length>0)return[B,t+x.join(`,
${v}`),R].join(`
${a}`)}return h})(n,"",0)}function JF(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function Ade(n,e=2){return n=JF(n,ns.$root),n.layers&&(n.layers=n.layers.map(t=>JF(t,ns.layer))),cde(n,{indent:e})}function EO(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function ez(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function M9(n,e){return typeof e=="string"&&e[0]==="@"?M9(n,n.constants[e]):e}function hde(n){return Array.isArray(n.stops)}function c2(n,e,t){n[t]=n[e],delete n[e]}function dde(n){n.version=8,$he(n,r=>{r.type==="video"&&r.url!==void 0&&c2(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),c3(n,r=>{EO(r,o=>{o["symbol-min-distance"]!==void 0&&c2(o,"symbol-min-distance","symbol-spacing")}),ez(r,o=>{o["background-image"]!==void 0&&c2(o,"background-image","background-pattern"),o["line-image"]!==void 0&&c2(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&c2(o,"fill-image","fill-pattern")})}),gP(n,{paint:!0,layout:!0},r=>{const o=M9(n,r.value);hde(o)&&o.stops.forEach(s=>{s[1]=M9(n,s[1])}),r.set(o)}),delete n.constants,c3(n,r=>{EO(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),ez(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}c3(n,r=>{EO(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function fde(n){const e=[];return c3(n,t=>{t.filter&&(t.filter=u3(t.filter))}),gP(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{X4(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(IX(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(kX(r)))}),n}function pde(n){return JSON.parse(mde(JSON.stringify(n)))}function mde(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function gde(n){let e=!1;if(n.version===7&&(n=dde(n),e=!0),n.version===8&&(e=!!fde(n),e=!0),gP(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(pde(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const up=ns,yde={StyleExpression:BX,StylePropertyFunction:bE,ZoomConstantExpression:b9,ZoomDependentExpression:C9,createExpression:AP,createPropertyExpression:hP,isExpression:X4,isExpressionFilter:CE,isZoomExpression:Lhe,normalizePropertyExpression:Khe},vde={convertFunction:IX,createFunction:cP,isFunction:H4},bde=8,Cde=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),_de={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},xde=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Mde={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},wde={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Sde={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Ede={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Ode={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Bde={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Ide={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},kde=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Tde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Rde={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Dde={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Pde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Ude={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Lde=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Kde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Fde={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},zde={type:"array",value:"*",doc:"A filter selects specific features from a layer."},jde={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},Nde={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},Gde={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Wde={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Qde=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),qde={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Yde={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},$de={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Vde={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Hde=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Zde={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Xde={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Jde={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},efe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},tfe={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},nfe={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ife={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},rfe={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ofe={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},sfe={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Xr={$version:bde,$root:Cde,sources:_de,source:xde,source_vector:Mde,source_raster:wde,source_raster_dem:Sde,source_geojson:Ede,source_video:Ode,source_image:Bde,layer:Ide,layout:kde,layout_background:Tde,layout_fill:Rde,layout_circle:Dde,layout_heatmap:Pde,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:Ude,layout_symbol:Lde,layout_raster:Kde,layout_hillshade:Fde,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:zde,filter_operator:jde,geometry_type:Nde,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:Gde,expression:Wde,expression_name:Qde,light:qde,sky:Yde,terrain:$de,projection:Vde,paint:Hde,paint_fill:Zde,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Xde,paint_circle:Jde,paint_heatmap:efe,paint_symbol:tfe,paint_raster:nfe,paint_hillshade:ife,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:rfe,transition:ofe,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:sfe};var aw={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.10.0/LICENSE.txt
 */var afe=aw.exports,tz;function lfe(){return tz||(tz=1,(function(n,e){(function(t,i){n.exports=i()})(afe,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var h="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(t,m),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(f,u,d,b){return new(d||(d=Promise))((function(M,k){function P(ee){try{G(b.next(ee))}catch(ie){k(ie)}}function K(ee){try{G(b.throw(ee))}catch(ie){k(ie)}}function G(ee){var ie;ee.done?M(ee.value):(ie=ee.value,ie instanceof d?ie:new d((function(ce){ce(ie)}))).then(P,K)}G((b=b.apply(f,u||[])).next())}))}function c(f,u){this.x=f,this.y=u}function h(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,v;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,u){return this.clone()._rotateAround(f,u)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const u=f.x-this.x,d=f.y-this.y;return u*u+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult(f){const u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const u=Math.cos(f),d=Math.sin(f),b=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=b,this},_rotateAround(f,u){const d=Math.cos(f),b=Math.sin(f),M=u.y+b*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-b*(this.y-u.y),this.y=M,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(f){if(f instanceof c)return f;if(Array.isArray(f))return new c(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new c(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var x=(function(){if(v)return m;function f(u,d,b,M){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(M-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=M}return v=1,m=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,M=0;M<8;M++){var k=this.sampleCurveX(b)-u;if(Math.abs(k)<d)return b;var P=this.sampleCurveDerivativeX(b);if(Math.abs(P)<1e-6)break;b-=k/P}var K=0,G=1;for(b=u,M=0;M<20&&(k=this.sampleCurveX(b),!(Math.abs(k-u)<d));M++)u>k?K=b:G=b,b=.5*(G-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},m})(),S=h(x);let B,R;function F(){return B==null&&(B=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),B}function j(){if(R==null&&(R=!1,F())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let b=0;b<25;b++){const M=4*b;u.fillStyle=`rgb(${M},${M+1},${M+2})`,u.fillRect(b%5,Math.floor(b/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&d[b]!==b){R=!0;break}}}return R||!1}var W=1e-6,H=typeof Float32Array<"u"?Float32Array:Array;function $(){var f=new H(9);return H!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function N(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Y(){var f=new H(3);return H!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function z(f){var u=f[0],d=f[1],b=f[2];return Math.sqrt(u*u+d*d+b*b)}function ne(f,u,d){var b=new H(3);return b[0]=f,b[1]=u,b[2]=d,b}function ae(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f}function ve(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f}function pe(f,u,d){var b=u[0],M=u[1],k=u[2],P=d[0],K=d[1],G=d[2];return f[0]=M*G-k*K,f[1]=k*P-b*G,f[2]=b*K-M*P,f}var be,Ee=z;function Te(f,u,d){var b=u[0],M=u[1],k=u[2],P=u[3];return f[0]=d[0]*b+d[4]*M+d[8]*k+d[12]*P,f[1]=d[1]*b+d[5]*M+d[9]*k+d[13]*P,f[2]=d[2]*b+d[6]*M+d[10]*k+d[14]*P,f[3]=d[3]*b+d[7]*M+d[11]*k+d[15]*P,f}function je(){var f=new H(4);return H!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Re(f,u,d,b){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",k=Math.PI/360;u*=k,b*=k,d*=k;var P=Math.sin(u),K=Math.cos(u),G=Math.sin(d),ee=Math.cos(d),ie=Math.sin(b),ce=Math.cos(b);switch(M){case"xyz":f[0]=P*ee*ce+K*G*ie,f[1]=K*G*ce-P*ee*ie,f[2]=K*ee*ie+P*G*ce,f[3]=K*ee*ce-P*G*ie;break;case"xzy":f[0]=P*ee*ce-K*G*ie,f[1]=K*G*ce-P*ee*ie,f[2]=K*ee*ie+P*G*ce,f[3]=K*ee*ce+P*G*ie;break;case"yxz":f[0]=P*ee*ce+K*G*ie,f[1]=K*G*ce-P*ee*ie,f[2]=K*ee*ie-P*G*ce,f[3]=K*ee*ce+P*G*ie;break;case"yzx":f[0]=P*ee*ce+K*G*ie,f[1]=K*G*ce+P*ee*ie,f[2]=K*ee*ie-P*G*ce,f[3]=K*ee*ce-P*G*ie;break;case"zxy":f[0]=P*ee*ce-K*G*ie,f[1]=K*G*ce+P*ee*ie,f[2]=K*ee*ie+P*G*ce,f[3]=K*ee*ce-P*G*ie;break;case"zyx":f[0]=P*ee*ce-K*G*ie,f[1]=K*G*ce+P*ee*ie,f[2]=K*ee*ie-P*G*ce,f[3]=K*ee*ce+P*G*ie;break;default:throw new Error("Unknown angle order "+M)}return f}function qe(){var f=new H(2);return H!=Float32Array&&(f[0]=0,f[1]=0),f}function nt(f,u){var d=new H(2);return d[0]=f,d[1]=u,d}Y(),be=new H(4),H!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0,be[3]=0),Y(),ne(1,0,0),ne(0,1,0),je(),je(),$(),qe();const ht=8192;function ke(f,u,d){return u*(ht/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function Oe(f,u){return(f%u+u)%u}function ze(f,u,d){return f*(1-d)+u*d}function we(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function At(f,u,d,b){const M=new S(f,u,d,b);return k=>M.solve(k)}const it=At(.25,.1,.25,1);function Ct(f,u,d){return Math.min(d,Math.max(u,f))}function It(f,u,d){const b=d-u,M=((f-u)%b+b)%b+u;return M===u?d:M}function Ke(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}let Ie=1;function Se(f,u,d){const b={};for(const M in f)b[M]=u.call(this,f[M],M,f);return b}function Ge(f,u,d){const b={};for(const M in f)u.call(this,f[M],M,f)&&(b[M]=f[M]);return b}function st(f){return Array.isArray(f)?f.map(st):typeof f=="object"&&f?Se(f,st):f}const ut={};function ft(f){ut[f]||(typeof console<"u"&&console.warn(f),ut[f]=!0)}function St(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function kt(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let en=null;function Pn(f){if(en==null){const u=f.navigator?f.navigator.userAgent:null;en=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return en}function zn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const si="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function xn(f,u,d,b,M){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(f,{timestamp:0});try{const P=k?.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const K=P.startsWith("BGR"),G=new Uint8ClampedArray(b*M*4);if(yield k.copyTo(G,(function(ee,ie,ce,Be,Pe){const Le=4*Math.max(-ie,0),Ne=(Math.max(0,ce)-ce)*Be*4+Le,Ze=4*Be,ot=Math.max(0,ie),Dt=Math.max(0,ce);return{rect:{x:ot,y:Dt,width:Math.min(ee.width,ie+Be)-ot,height:Math.min(ee.height,ce+Pe)-Dt},layout:[{offset:Ne,stride:Ze}]}})(f,u,d,b,M)),K)for(let ee=0;ee<G.length;ee+=4){const ie=G[ee];G[ee]=G[ee+2],G[ee+2]=ie}return G}finally{k.close()}}))}let Rn,pn;function Hn(f,u,d,b){return f.addEventListener(u,d,b),{unsubscribe:()=>{f.removeEventListener(u,d,b)}}}function Un(f){return f*Math.PI/180}function Tt(f){return f/Math.PI*180}const Me={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},oe={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},le="AbortError";function he(){return new Error(le)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ae(f){return se.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const xe="global-dispatcher";class Ye extends Error{constructor(u,d,b,M){super(`AJAXError: ${d} (${u}): ${b}`),this.status=u,this.statusText=d,this.url=b,this.body=M}}const Xe=()=>kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,fe=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const b=Ae(f.url);if(b)return b(f,u);if(kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:xe},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(Xe())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(b,M){return a(this,void 0,void 0,(function*(){const k=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,cache:b.cache,referrer:Xe(),signal:M.signal});let P,K;b.type!=="json"||k.headers.has("Accept")||k.headers.set("Accept","application/json");try{P=yield fetch(k)}catch(ee){throw new Ye(0,ee.message,b.url,new Blob)}if(!P.ok){const ee=yield P.blob();throw new Ye(P.status,P.statusText,b.url,ee)}K=b.type==="arrayBuffer"||b.type==="image"?P.arrayBuffer():b.type==="json"?P.json():P.text();const G=yield K;if(M.signal.aborted)throw he();return{data:G,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}}))})(f,u);if(kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:xe},u)}var d;return(function(b,M){return new Promise(((k,P)=>{var K;const G=new XMLHttpRequest;G.open(b.method||"GET",b.url,!0),b.type!=="arrayBuffer"&&b.type!=="image"||(G.responseType="arraybuffer");for(const ee in b.headers)G.setRequestHeader(ee,b.headers[ee]);b.type==="json"&&(G.responseType="text",!((K=b.headers)===null||K===void 0)&&K.Accept||G.setRequestHeader("Accept","application/json")),G.withCredentials=b.credentials==="include",G.onerror=()=>{P(new Error(G.statusText))},G.onload=()=>{if(!M.signal.aborted)if((G.status>=200&&G.status<300||G.status===0)&&G.response!==null){let ee=G.response;if(b.type==="json")try{ee=JSON.parse(G.response)}catch(ie){return void P(ie)}k({data:ee,cacheControl:G.getResponseHeader("Cache-Control"),expires:G.getResponseHeader("Expires")})}else{const ee=new Blob([G.response],{type:G.getResponseHeader("Content-Type")});P(new Ye(G.status,G.statusText,b.url,ee))}},M.signal.addEventListener("abort",(()=>{G.abort(),P(he())})),G.send(b.body)}))})(f,u)};function De(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function y(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function rt(f,u,d){if(d&&d[f]){const b=d[f].indexOf(u);b!==-1&&d[f].splice(b,1)}}class Bt{constructor(u,d={}){Ke(this,d),this.type=u}}class pt extends Bt{constructor(u,d={}){super("error",Ke({error:u},d))}}class Ht{on(u,d){return this._listeners=this._listeners||{},y(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return rt(u,d,this._listeners),rt(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},y(u,d,this._oneTimeListeners),this):new Promise((b=>this.once(u,b)))}fire(u,d){typeof u=="string"&&(u=new Bt(u,d||{}));const b=u.type;if(this.listens(b)){u.target=this;const M=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const K of M)K.call(this,u);const k=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const K of k)rt(b,K,this._oneTimeListeners),K.call(this,u);const P=this._eventedParent;P&&(Ke(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(u))}else u instanceof pt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var gt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const jn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ni(f,u){const d={};for(const b in f)b!=="ref"&&(d[b]=f[b]);return jn.forEach((b=>{b in u&&(d[b]=u[b])})),d}function In(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!In(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!In(f[d],u[d]))return!1;return!0}return f===u}function Ln(f,u){f.push(u)}function Zn(f,u,d){Ln(d,{command:"addSource",args:[f,u[f]]})}function Xi(f,u,d){Ln(u,{command:"removeSource",args:[f]}),d[f]=!0}function Di(f,u,d,b){Xi(f,d,b),Zn(f,u,d)}function ur(f,u,d){let b;for(b in f[d])if(Object.prototype.hasOwnProperty.call(f[d],b)&&b!=="data"&&!In(f[d][b],u[d][b]))return!1;for(b in u[d])if(Object.prototype.hasOwnProperty.call(u[d],b)&&b!=="data"&&!In(f[d][b],u[d][b]))return!1;return!0}function fi(f,u,d,b,M,k){f=f||{},u=u||{};for(const P in f)Object.prototype.hasOwnProperty.call(f,P)&&(In(f[P],u[P])||d.push({command:k,args:[b,P,u[P],M]}));for(const P in u)Object.prototype.hasOwnProperty.call(u,P)&&!Object.prototype.hasOwnProperty.call(f,P)&&(In(f[P],u[P])||d.push({command:k,args:[b,P,u[P],M]}))}function Si(f){return f.id}function er(f,u){return f[u.id]=u,f}class nn{constructor(u,d,b,M){this.message=(u?`${u}: `:"")+b,M&&(this.identifier=M),d!=null&&d.__line__&&(this.line=d.__line__)}}function Ti(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}class Io extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class rs{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[b,M]of d)this.bindings[b]=M}concat(u){return new rs(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const kr={kind:"null"},hn={kind:"number"},Li={kind:"string"},ii={kind:"boolean"},Ia={kind:"color"},tu={kind:"projectionDefinition"},Xs={kind:"object"},Ei={kind:"value"},gl={kind:"collator"},Vr={kind:"formatted"},ka={kind:"padding"},nu={kind:"colorArray"},fa={kind:"numberArray"},Ho={kind:"resolvedImage"},Rl={kind:"variableAnchorOffsetCollection"};function Zo(f,u){return{kind:"array",itemType:f,N:u}}function Qi(f){if(f.kind==="array"){const u=Qi(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Dl=[kr,hn,Li,ii,Ia,tu,Vr,Xs,Zo(Ei),ka,fa,nu,Ho,Rl];function os(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!os(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of Dl)if(!os(d,u))return null}}return`Expected ${Qi(f)} but found ${Qi(u)} instead.`}function Pl(f,u){return u.some((d=>d.kind===f.kind))}function iu(f,u){return u.some((d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f))}function Ou(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const Jc=.96422,nc=.82521,yl=4/29,ko=6/29,ic=3*ko*ko,ru=ko*ko*ko,Oc=Math.PI/180,rc=180/Math.PI;function Bc(f){return(f%=360)<0&&(f+=360),f}function Dh([f,u,d,b]){let M,k;const P=oc((.2225045*(f=pa(f))+.7168786*(u=pa(u))+.0606169*(d=pa(d)))/1);f===u&&u===d?M=k=P:(M=oc((.4360747*f+.3850649*u+.1430804*d)/Jc),k=oc((.0139322*f+.0971045*u+.7141733*d)/nc));const K=116*P-16;return[K<0?0:K,500*(M-P),200*(P-k),b]}function pa(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function oc(f){return f>ru?Math.pow(f,1/3):f/ic+yl}function rl([f,u,d,b]){let M=(f+16)/116,k=isNaN(u)?M:M+u/500,P=isNaN(d)?M:M-d/200;return M=1*ou(M),k=Jc*ou(k),P=nc*ou(P),[eA(3.1338561*k-1.6168667*M-.4906146*P),eA(-.9787684*k+1.9161415*M+.033454*P),eA(.0719453*k-.2289914*M+1.4052427*P),b]}function eA(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function ou(f){return f>ko?f*f*f:ic*(f-yl)}const Na=Object.hasOwn||function(f,u){return Object.prototype.hasOwnProperty.call(f,u)};function Ms(f,u){return Na(f,u)?f[u]:void 0}function To(f){return parseInt(f.padEnd(2,f),16)/255}function su(f,u){return au(u?f/100:f,0,1)}function au(f,u,d){return Math.min(Math.max(u,f),d)}function Ls(f){return!f.some(Number.isNaN)}const Ga={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function tr(f,u,d){return f+d*(u-f)}function ol(f,u,d){return f.map(((b,M)=>tr(b,u[M],d)))}class Gi{constructor(u,d,b,M=1,k=!0){this.r=u,this.g=d,this.b=b,this.a=M,k||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[u,d,b,M]))}static parse(u){if(u instanceof Gi)return u;if(typeof u!="string")return;const d=(function(b){if((b=b.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=Ms(Ga,b);if(M){const[P,K,G]=M;return[P/255,K/255,G/255,1]}if(b.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(b)){const P=b.length<6?1:2;let K=1;return[To(b.slice(K,K+=P)),To(b.slice(K,K+=P)),To(b.slice(K,K+=P)),To(b.slice(K,K+P)||"ff")]}if(b.startsWith("rgb")){const P=b.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot,Dt]=P,dt=[ie||" ",Pe||" ",Ze].join("");if(dt==="  "||dt==="  /"||dt===",,"||dt===",,,"){const xt=[ee,Be,Ne].join(""),Nt=xt==="%%%"?100:xt===""?255:0;if(Nt){const Xt=[au(+G/Nt,0,1),au(+ce/Nt,0,1),au(+Le/Nt,0,1),ot?su(+ot,Dt):1];if(Ls(Xt))return Xt}}return}}const k=b.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[P,K,G,ee,ie,ce,Be,Pe,Le]=k,Ne=[G||" ",ie||" ",Be].join("");if(Ne==="  "||Ne==="  /"||Ne===",,"||Ne===",,,"){const Ze=[+K,au(+ee,0,100),au(+ce,0,100),Pe?su(+Pe,Le):1];if(Ls(Ze))return(function([ot,Dt,dt,xt]){function Nt(Xt){const mn=(Xt+ot/30)%12,Qn=Dt*Math.min(dt,1-dt);return dt-Qn*Math.max(-1,Math.min(mn-3,9-mn,1))}return ot=Bc(ot),Dt/=100,dt/=100,[Nt(0),Nt(8),Nt(4),xt]})(Ze)}}})(u);return d?new Gi(...d,!1):void 0}get rgb(){const{r:u,g:d,b,a:M}=this,k=M||1/0;return this.overwriteGetter("rgb",[u/k,d/k,b/k,M])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[d,b,M,k]=Dh(u),P=Math.sqrt(b*b+M*M);return[Math.round(1e4*P)?Bc(Math.atan2(M,b)*rc):NaN,P,d,k]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Dh(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,b,M]=this.rgb;return`rgba(${[u,d,b].map((k=>Math.round(255*k))).join(",")},${M})`}static interpolate(u,d,b,M="rgb"){switch(M){case"rgb":{const[k,P,K,G]=ol(u.rgb,d.rgb,b);return new Gi(k,P,K,G,!1)}case"hcl":{const[k,P,K,G]=u.hcl,[ee,ie,ce,Be]=d.hcl;let Pe,Le;if(isNaN(k)||isNaN(ee))isNaN(k)?isNaN(ee)?Pe=NaN:(Pe=ee,K!==1&&K!==0||(Le=ie)):(Pe=k,ce!==1&&ce!==0||(Le=P));else{let dt=ee-k;ee>k&&dt>180?dt-=360:ee<k&&k-ee>180&&(dt+=360),Pe=k+b*dt}const[Ne,Ze,ot,Dt]=(function([dt,xt,Nt,Xt]){return dt=isNaN(dt)?0:dt*Oc,rl([Nt,Math.cos(dt)*xt,Math.sin(dt)*xt,Xt])})([Pe,Le??tr(P,ie,b),tr(K,ce,b),tr(G,Be,b)]);return new Gi(Ne,Ze,ot,Dt,!1)}case"lab":{const[k,P,K,G]=rl(ol(u.lab,d.lab,b));return new Gi(k,P,K,G,!1)}}}}Gi.black=new Gi(0,0,0,1),Gi.white=new Gi(1,1,1,1),Gi.transparent=new Gi(0,0,0,0),Gi.red=new Gi(1,0,0,1);class Wa{constructor(u,d,b){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Xo=["bottom","center","top"];class lu{constructor(u,d,b,M,k,P){this.text=u,this.image=d,this.scale=b,this.fontStack=M,this.textColor=k,this.verticalAlign=P}}class Ko{constructor(u){this.sections=u}static fromString(u){return new Ko([new lu(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof Ko?u:Ko.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class so{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof so)return u;if(typeof u=="number")return new so([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new so(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new so(ol(u.values,d.values,b))}}class ws{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ws)return u;if(typeof u=="number")return new ws([u]);if(Array.isArray(u)){for(const d of u)if(typeof d!="number")return;return new ws(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new ws(ol(u.values,d.values,b))}}class Mo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Mo)return u;if(typeof u=="string"){const b=Gi.parse(u);return b?new Mo([b]):void 0}if(!Array.isArray(u))return;const d=[];for(const b of u){if(typeof b!="string")return;const M=Gi.parse(b);if(!M)return;d.push(M)}return new Mo(d)}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b,M="rgb"){const k=[];if(u.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let P=0;P<u.values.length;P++)k.push(Gi.interpolate(u.values[P],d.values[P],b,M));return new Mo(k)}}class _o extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const uu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class mo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof mo)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const b=u[d],M=u[d+1];if(typeof b!="string"||!uu.has(b)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new mo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){const M=u.values,k=d.values;if(M.length!==k.length)throw new _o(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const P=[];for(let K=0;K<M.length;K+=2){if(M[K]!==k[K])throw new _o(`Cannot interpolate values containing mismatched anchors. from[${K}]: ${M[K]}, to[${K}]: ${k[K]}`);P.push(M[K]);const[G,ee]=M[K+1],[ie,ce]=k[K+1];P.push([tr(G,ie,b),tr(ee,ce,b)])}return new mo(P)}}class ss{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new ss({name:u,available:!1}):null}}class ao{constructor(u,d,b){this.from=u,this.to=d,this.transition=b}static interpolate(u,d,b){return new ao(u,d,b)}static parse(u){return u instanceof ao?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new ao(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new ao(u.from,u.to,u.transition):typeof u=="string"?new ao(u,u,1):void 0}}function sl(f,u,d,b){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[f,u,d,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[f,u,d,b]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ul(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof ao||f instanceof Gi||f instanceof Wa||f instanceof Ko||f instanceof so||f instanceof ws||f instanceof Mo||f instanceof mo||f instanceof ss)return!0;if(Array.isArray(f)){for(const u of f)if(!Ul(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!Ul(f[u]))return!1;return!0}return!1}function Ni(f){if(f===null)return kr;if(typeof f=="string")return Li;if(typeof f=="boolean")return ii;if(typeof f=="number")return hn;if(f instanceof Gi)return Ia;if(f instanceof ao)return tu;if(f instanceof Wa)return gl;if(f instanceof Ko)return Vr;if(f instanceof so)return ka;if(f instanceof ws)return fa;if(f instanceof Mo)return nu;if(f instanceof mo)return Rl;if(f instanceof ss)return Ho;if(Array.isArray(f)){const u=f.length;let d;for(const b of f){const M=Ni(b);if(d){if(d===M)continue;d=Ei;break}d=M}return Zo(d||Ei,u)}return Xs}function Pi(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof Gi||f instanceof ao||f instanceof Ko||f instanceof so||f instanceof ws||f instanceof Mo||f instanceof mo||f instanceof ss?f.toString():JSON.stringify(f)}class J{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Ul(u[1]))return d.error("invalid value");const b=u[1];let M=Ni(b);const k=d.expectedType;return M.kind!=="array"||M.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(M=k),new J(M,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ye={string:Li,number:hn,boolean:ii,object:Xs};class Qe{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b,M=1;const k=u[0];if(k==="array"){let K,G;if(u.length>2){const ee=u[1];if(typeof ee!="string"||!(ee in ye)||ee==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);K=ye[ee],M++}else K=Ei;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);G=u[2],M++}b=Zo(K,G)}else{if(!ye[k])throw new Error(`Types doesn't contain name = ${k}`);b=ye[k]}const P=[];for(;M<u.length;M++){const K=d.parse(u[M],M,Ei);if(!K)return null;P.push(K)}return new Qe(b,P)}evaluate(u){for(let d=0;d<this.args.length;d++){const b=this.args[d].evaluate(u);if(!os(this.type,Ni(b)))return b;if(d===this.args.length-1)throw new _o(`Expected value to be of type ${Qi(this.type)}, but found ${Qi(Ni(b))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Et={"to-boolean":ii,"to-color":Ia,"to-number":hn,"to-string":Li};class dn{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[0];if(!Et[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&u.length!==2)return d.error("Expected one argument.");const M=Et[b],k=[];for(let P=1;P<u.length;P++){const K=d.parse(u[P],P,Ei);if(!K)return null;k.push(K)}return new dn(M,k)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,b;for(const M of this.args){if(d=M.evaluate(u),b=null,d instanceof Gi)return d;if(typeof d=="string"){const k=u.parseColor(d);if(k)return k}else if(Array.isArray(d)&&(b=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:sl(d[0],d[1],d[2],d[3]),!b))return new Gi(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new _o(b||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const b of this.args){d=b.evaluate(u);const M=so.parse(d);if(M)return M}throw new _o(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const b of this.args){d=b.evaluate(u);const M=ws.parse(d);if(M)return M}throw new _o(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const b of this.args){d=b.evaluate(u);const M=Mo.parse(d);if(M)return M}throw new _o(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const b of this.args){d=b.evaluate(u);const M=mo.parse(d);if(M)return M}throw new _o(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const b of this.args){if(d=b.evaluate(u),d===null)return 0;const M=Number(d);if(!isNaN(M))return M}throw new _o(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Ko.fromString(Pi(this.args[0].evaluate(u)));case"resolvedImage":return ss.fromString(Pi(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Pi(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Bn=["Unknown","Point","LineString","Polygon"];class ci{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache.get(u);return d||(d=Gi.parse(u),this._parseColorCache.set(u,d)),d}}class Ki{constructor(u,d,b=[],M,k=new rs,P=[]){this.registry=u,this.path=b,this.key=b.map((K=>`[${K}]`)).join(""),this.scope=k,this.errors=P,this.expectedType=M,this._isConstant=d}parse(u,d,b,M,k={}){return d?this.concat(d,b,M)._parse(u,k):this._parse(u,k)}_parse(u,d){function b(M,k,P){return P==="assert"?new Qe(k,[M]):P==="coerce"?new dn(k,[M]):M}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=u[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[M];if(k){let P=k.parse(u,this);if(!P)return null;if(this.expectedType){const K=this.expectedType,G=P.type;if(K.kind!=="string"&&K.kind!=="number"&&K.kind!=="boolean"&&K.kind!=="object"&&K.kind!=="array"||G.kind!=="value"){if(K.kind==="projectionDefinition"&&["string","array"].includes(G.kind)||["color","formatted","resolvedImage"].includes(K.kind)&&["value","string"].includes(G.kind)||["padding","numberArray"].includes(K.kind)&&["value","number","array"].includes(G.kind)||K.kind==="colorArray"&&["value","string","array"].includes(G.kind)||K.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(G.kind))P=b(P,K,d.typeAnnotation||"coerce");else if(this.checkSubtype(K,G))return null}else P=b(P,K,d.typeAnnotation||"assert")}if(!(P instanceof J)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const K=new ci;try{P=new J(P.type,P.evaluate(K))}catch(G){return this.error(G.message),null}}return P}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,b){const M=typeof u=="number"?this.path.concat(u):this.path,k=b?this.scope.concat(b):this.scope;return new Ki(this.registry,this._isConstant,M,d||null,k,this.errors)}error(u,...d){const b=`${this.key}${d.map((M=>`[${M}]`)).join("")}`;this.errors.push(new Io(b,u))}checkSubtype(u,d){const b=os(u,d);return b&&this.error(b),b}}class Oi{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const b=[];for(let k=1;k<u.length-1;k+=2){const P=u[k];if(typeof P!="string")return d.error(`Expected string, but found ${typeof P} instead.`,k);if(/[^a-zA-Z0-9_]/.test(P))return d.error("Variable names must contain only alphanumeric characters or '_'.",k);const K=d.parse(u[k+1],k+1);if(!K)return null;b.push([P,K])}const M=d.parse(u[u.length-1],u.length-1,d.expectedType,b);return M?new Oi(b,M):null}outputDefined(){return this.result.outputDefined()}}class Bi{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const b=u[1];return d.scope.has(b)?new Bi(b,d.scope.get(b)):d.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class pr{constructor(u,d,b){this.type=u,this.index=d,this.input=b}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,hn),M=d.parse(u[2],2,Zo(d.expectedType||Ei));return b&&M?new pr(M.type.itemType,b,M):null}evaluate(u){const d=this.index.evaluate(u),b=this.input.evaluate(u);if(d<0)throw new _o(`Array index out of bounds: ${d} < 0.`);if(d>=b.length)throw new _o(`Array index out of bounds: ${d} > ${b.length-1}.`);if(d!==Math.floor(d))throw new _o(`Array index must be an integer, but found ${d} instead.`);return b[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class lo{constructor(u,d){this.type=ii,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ei),M=d.parse(u[2],2,Ei);return b&&M?Pl(b.type,[ii,Li,hn,kr,Ei])?new lo(b,M):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qi(b.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!b)return!1;if(!iu(d,["boolean","string","number","null"]))throw new _o(`Expected first argument to be of type boolean, string, number or null, but found ${Qi(Ni(d))} instead.`);if(!iu(b,["string","array"]))throw new _o(`Expected second argument to be of type array or string, but found ${Qi(Ni(b))} instead.`);return b.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class br{constructor(u,d,b){this.type=hn,this.needle=u,this.haystack=d,this.fromIndex=b}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ei),M=d.parse(u[2],2,Ei);if(!b||!M)return null;if(!Pl(b.type,[ii,Li,hn,kr,Ei]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qi(b.type)} instead`);if(u.length===4){const k=d.parse(u[3],3,hn);return k?new br(b,M,k):null}return new br(b,M)}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!iu(d,["boolean","string","number","null"]))throw new _o(`Expected first argument to be of type boolean, string, number or null, but found ${Qi(Ni(d))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(u)),iu(b,["string"])){const k=b.indexOf(d,M);return k===-1?-1:[...b.slice(0,k)].length}if(iu(b,["array"]))return b.indexOf(d,M);throw new _o(`Expected second argument to be of type array or string, but found ${Qi(Ni(b))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class yr{constructor(u,d,b,M,k,P){this.inputType=u,this.type=d,this.input=b,this.cases=M,this.outputs=k,this.otherwise=P}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let b,M;d.expectedType&&d.expectedType.kind!=="value"&&(M=d.expectedType);const k={},P=[];for(let ee=2;ee<u.length-1;ee+=2){let ie=u[ee];const ce=u[ee+1];Array.isArray(ie)||(ie=[ie]);const Be=d.concat(ee);if(ie.length===0)return Be.error("Expected at least one branch label.");for(const Le of ie){if(typeof Le!="number"&&typeof Le!="string")return Be.error("Branch labels must be numbers or strings.");if(typeof Le=="number"&&Math.abs(Le)>Number.MAX_SAFE_INTEGER)return Be.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Le=="number"&&Math.floor(Le)!==Le)return Be.error("Numeric branch labels must be integer values.");if(b){if(Be.checkSubtype(b,Ni(Le)))return null}else b=Ni(Le);if(k[String(Le)]!==void 0)return Be.error("Branch labels must be unique.");k[String(Le)]=P.length}const Pe=d.parse(ce,ee,M);if(!Pe)return null;M=M||Pe.type,P.push(Pe)}const K=d.parse(u[1],1,Ei);if(!K)return null;const G=d.parse(u[u.length-1],u.length-1,M);return G?K.type.kind!=="value"&&d.concat(1).checkSubtype(b,K.type)?null:new yr(b,M,K,k,P,G):null}evaluate(u){const d=this.input.evaluate(u);return(Ni(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class to{constructor(u,d,b){this.type=u,this.branches=d,this.otherwise=b}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let b;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);const M=[];for(let P=1;P<u.length-1;P+=2){const K=d.parse(u[P],P,ii);if(!K)return null;const G=d.parse(u[P+1],P+1,b);if(!G)return null;M.push([K,G]),b=b||G.type}const k=d.parse(u[u.length-1],u.length-1,b);if(!k)return null;if(!b)throw new Error("Can't infer output type");return new to(b,M,k)}evaluate(u){for(const[d,b]of this.branches)if(d.evaluate(u))return b.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,b]of this.branches)u(d),u(b);u(this.otherwise)}outputDefined(){return this.branches.every((([u,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Fo{constructor(u,d,b,M){this.type=u,this.input=d,this.beginIndex=b,this.endIndex=M}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ei),M=d.parse(u[2],2,hn);if(!b||!M)return null;if(!Pl(b.type,[Zo(Ei),Li,Ei]))return d.error(`Expected first argument to be of type array or string, but found ${Qi(b.type)} instead`);if(u.length===4){const k=d.parse(u[3],3,hn);return k?new Fo(b.type,b,M,k):null}return new Fo(b.type,b,M)}evaluate(u){const d=this.input.evaluate(u),b=this.beginIndex.evaluate(u);let M;if(this.endIndex&&(M=this.endIndex.evaluate(u)),iu(d,["string"]))return[...d].slice(b,M).join("");if(iu(d,["array"]))return d.slice(b,M);throw new _o(`Expected first argument to be of type array or string, but found ${Qi(Ni(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Br(f,u){const d=f.length-1;let b,M,k=0,P=d,K=0;for(;k<=P;)if(K=Math.floor((k+P)/2),b=f[K],M=f[K+1],b<=u){if(K===d||u<M)return K;k=K+1}else{if(!(b>u))throw new _o("Input is not a number.");P=K-1}return 0}class Ss{constructor(u,d,b){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[M,k]of b)this.labels.push(M),this.outputs.push(k)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const b=d.parse(u[1],1,hn);if(!b)return null;const M=[];let k=null;d.expectedType&&d.expectedType.kind!=="value"&&(k=d.expectedType);for(let P=1;P<u.length;P+=2){const K=P===1?-1/0:u[P],G=u[P+1],ee=P,ie=P+1;if(typeof K!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(M.length&&M[M.length-1][0]>=K)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ee);const ce=d.parse(G,ie,k);if(!ce)return null;k=k||ce.type,M.push([K,ce])}return new Ss(k,b,M)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const M=this.input.evaluate(u);if(M<=d[0])return b[0].evaluate(u);const k=d.length;return M>=d[k-1]?b[k-1].evaluate(u):b[Br(d,M)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function ZA(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var vl,Tr,_1=(function(){if(Tr)return vl;function f(u,d,b,M){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(M-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=M}return Tr=1,vl=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,M=0;M<8;M++){var k=this.sampleCurveX(b)-u;if(Math.abs(k)<d)return b;var P=this.sampleCurveDerivativeX(b);if(Math.abs(P)<1e-6)break;b-=k/P}var K=0,G=1;for(b=u,M=0;M<20&&(k=this.sampleCurveX(b),!(Math.abs(k-u)<d));M++)u>k?K=b:G=b,b=.5*(G-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},vl})(),cu=ZA(_1);class Au{constructor(u,d,b,M,k){this.type=u,this.operator=d,this.interpolation=b,this.input=M,this.labels=[],this.outputs=[];for(const[P,K]of k)this.labels.push(P),this.outputs.push(K)}static interpolationFactor(u,d,b,M){let k=0;if(u.name==="exponential")k=Rm(d,u.base,b,M);else if(u.name==="linear")k=Rm(d,1,b,M);else if(u.name==="cubic-bezier"){const P=u.controlPoints;k=new cu(P[0],P[1],P[2],P[3]).solve(Rm(d,1,b,M))}return k}static parse(u,d){let[b,M,k,...P]=u;if(!Array.isArray(M)||M.length===0)return d.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const ee=M[1];if(typeof ee!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:ee}}else{if(M[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const ee=M.slice(1);if(ee.length!==4||ee.some((ie=>typeof ie!="number"||ie<0||ie>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ee}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(k=d.parse(k,2,hn),!k)return null;const K=[];let G=null;b!=="interpolate-hcl"&&b!=="interpolate-lab"||d.expectedType==nu?d.expectedType&&d.expectedType.kind!=="value"&&(G=d.expectedType):G=Ia;for(let ee=0;ee<P.length;ee+=2){const ie=P[ee],ce=P[ee+1],Be=ee+3,Pe=ee+4;if(typeof ie!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Be);if(K.length&&K[K.length-1][0]>=ie)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Be);const Le=d.parse(ce,Pe,G);if(!Le)return null;G=G||Le.type,K.push([ie,Le])}return Ou(G,hn)||Ou(G,tu)||Ou(G,Ia)||Ou(G,ka)||Ou(G,fa)||Ou(G,nu)||Ou(G,Rl)||Ou(G,Zo(hn))?new Au(G,b,M,k,K):d.error(`Type ${Qi(G)} is not interpolatable.`)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const M=this.input.evaluate(u);if(M<=d[0])return b[0].evaluate(u);const k=d.length;if(M>=d[k-1])return b[k-1].evaluate(u);const P=Br(d,M),K=Au.interpolationFactor(this.interpolation,M,d[P],d[P+1]),G=b[P].evaluate(u),ee=b[P+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return tr(G,ee,K);case"color":return Gi.interpolate(G,ee,K);case"padding":return so.interpolate(G,ee,K);case"colorArray":return Mo.interpolate(G,ee,K);case"numberArray":return ws.interpolate(G,ee,K);case"variableAnchorOffsetCollection":return mo.interpolate(G,ee,K);case"array":return ol(G,ee,K);case"projectionDefinition":return ao.interpolate(G,ee,K)}case"interpolate-hcl":switch(this.type.kind){case"color":return Gi.interpolate(G,ee,K,"hcl");case"colorArray":return Mo.interpolate(G,ee,K,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Gi.interpolate(G,ee,K,"lab");case"colorArray":return Mo.interpolate(G,ee,K,"lab")}}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Rm(f,u,d,b){const M=b-d,k=f-d;return M===0?0:u===1?k/M:(Math.pow(u,k)-1)/(Math.pow(u,M)-1)}const ta={color:Gi.interpolate,number:tr,padding:so.interpolate,numberArray:ws.interpolate,colorArray:Mo.interpolate,variableAnchorOffsetCollection:mo.interpolate,array:ol};class yA{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b=null;const M=d.expectedType;M&&M.kind!=="value"&&(b=M);const k=[];for(const K of u.slice(1)){const G=d.parse(K,1+k.length,b,void 0,{typeAnnotation:"omit"});if(!G)return null;b=b||G.type,k.push(G)}if(!b)throw new Error("No output type");const P=M&&k.some((K=>os(M,K.type)));return new yA(P?Ei:b,k)}evaluate(u){let d,b=null,M=0;for(const k of this.args)if(M++,b=k.evaluate(u),b&&b instanceof ss&&!b.available&&(d||(d=b.name),b=null,M===this.args.length&&(b=d)),b!==null)break;return b}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function Ph(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Es(f,u,d,b){return b.compare(u,d)===0}function Bu(f,u,d){const b=f!=="=="&&f!=="!=";return class YX{constructor(k,P,K){this.type=ii,this.lhs=k,this.rhs=P,this.collator=K,this.hasUntypedArgument=k.type.kind==="value"||P.type.kind==="value"}static parse(k,P){if(k.length!==3&&k.length!==4)return P.error("Expected two or three arguments.");const K=k[0];let G=P.parse(k[1],1,Ei);if(!G)return null;if(!Ph(K,G.type))return P.concat(1).error(`"${K}" comparisons are not supported for type '${Qi(G.type)}'.`);let ee=P.parse(k[2],2,Ei);if(!ee)return null;if(!Ph(K,ee.type))return P.concat(2).error(`"${K}" comparisons are not supported for type '${Qi(ee.type)}'.`);if(G.type.kind!==ee.type.kind&&G.type.kind!=="value"&&ee.type.kind!=="value")return P.error(`Cannot compare types '${Qi(G.type)}' and '${Qi(ee.type)}'.`);b&&(G.type.kind==="value"&&ee.type.kind!=="value"?G=new Qe(ee.type,[G]):G.type.kind!=="value"&&ee.type.kind==="value"&&(ee=new Qe(G.type,[ee])));let ie=null;if(k.length===4){if(G.type.kind!=="string"&&ee.type.kind!=="string"&&G.type.kind!=="value"&&ee.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(ie=P.parse(k[3],3,gl),!ie)return null}return new YX(G,ee,ie)}evaluate(k){const P=this.lhs.evaluate(k),K=this.rhs.evaluate(k);if(b&&this.hasUntypedArgument){const G=Ni(P),ee=Ni(K);if(G.kind!==ee.kind||G.kind!=="string"&&G.kind!=="number")throw new _o(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${G.kind}, ${ee.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const G=Ni(P),ee=Ni(K);if(G.kind!=="string"||ee.kind!=="string")return u(k,P,K)}return this.collator?d(k,P,K,this.collator.evaluate(k)):u(k,P,K)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const Of=Bu("==",(function(f,u,d){return u===d}),Es),xp=Bu("!=",(function(f,u,d){return u!==d}),(function(f,u,d,b){return!Es(0,u,d,b)})),sc=Bu("<",(function(f,u,d){return u<d}),(function(f,u,d,b){return b.compare(u,d)<0})),x1=Bu(">",(function(f,u,d){return u>d}),(function(f,u,d,b){return b.compare(u,d)>0})),Dm=Bu("<=",(function(f,u,d){return u<=d}),(function(f,u,d,b){return b.compare(u,d)<=0})),pv=Bu(">=",(function(f,u,d){return u>=d}),(function(f,u,d,b){return b.compare(u,d)>=0}));class Dd{constructor(u,d,b){this.type=gl,this.locale=b,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const b=u[1];if(typeof b!="object"||Array.isArray(b))return d.error("Collator options argument must be an object.");const M=d.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,ii);if(!M)return null;const k=d.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,ii);if(!k)return null;let P=null;return b.locale&&(P=d.parse(b.locale,1,Li),!P)?null:new Dd(M,k,P)}evaluate(u){return new Wa(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Bf{constructor(u,d,b,M,k){this.type=Li,this.number=u,this.locale=d,this.currency=b,this.minFractionDigits=M,this.maxFractionDigits=k}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const b=d.parse(u[1],1,hn);if(!b)return null;const M=u[2];if(typeof M!="object"||Array.isArray(M))return d.error("NumberFormat options argument must be an object.");let k=null;if(M.locale&&(k=d.parse(M.locale,1,Li),!k))return null;let P=null;if(M.currency&&(P=d.parse(M.currency,1,Li),!P))return null;let K=null;if(M["min-fraction-digits"]&&(K=d.parse(M["min-fraction-digits"],1,hn),!K))return null;let G=null;return M["max-fraction-digits"]&&(G=d.parse(M["max-fraction-digits"],1,hn),!G)?null:new Bf(b,k,P,K,G)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class XA{constructor(u){this.type=Vr,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[1];if(!Array.isArray(b)&&typeof b=="object")return d.error("First argument must be an image or text section.");const M=[];let k=!1;for(let P=1;P<=u.length-1;++P){const K=u[P];if(k&&typeof K=="object"&&!Array.isArray(K)){k=!1;let G=null;if(K["font-scale"]&&(G=d.parse(K["font-scale"],1,hn),!G))return null;let ee=null;if(K["text-font"]&&(ee=d.parse(K["text-font"],1,Zo(Li)),!ee))return null;let ie=null;if(K["text-color"]&&(ie=d.parse(K["text-color"],1,Ia),!ie))return null;let ce=null;if(K["vertical-align"]){if(typeof K["vertical-align"]=="string"&&!Xo.includes(K["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${K["vertical-align"]}' instead.`);if(ce=d.parse(K["vertical-align"],1,Li),!ce)return null}const Be=M[M.length-1];Be.scale=G,Be.font=ee,Be.textColor=ie,Be.verticalAlign=ce}else{const G=d.parse(u[P],1,Ei);if(!G)return null;const ee=G.type.kind;if(ee!=="string"&&ee!=="value"&&ee!=="null"&&ee!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,M.push({content:G,scale:null,font:null,textColor:null,verticalAlign:null})}}return new XA(M)}evaluate(u){return new Ko(this.sections.map((d=>{const b=d.content.evaluate(u);return Ni(b)===Ho?new lu("",b,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(u):null):new lu(Pi(b),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null,d.verticalAlign?d.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor),d.verticalAlign&&u(d.verticalAlign)}outputDefined(){return!1}}class h0{constructor(u){this.type=Ho,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const b=d.parse(u[1],1,Li);return b?new h0(b):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),b=ss.fromString(d);return b&&u.availableImages&&(b.available=u.availableImages.indexOf(d)>-1),b}eachChild(u){u(this.input)}outputDefined(){return!1}}class Pm{constructor(u){this.type=hn,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=d.parse(u[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Qi(b.type)} instead.`):new Pm(b):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new _o(`Expected value to be of type string or array, but found ${Qi(Ni(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Ll=8192;function Pd(f,u){const d=(180+f[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,M=Math.pow(2,u.z);return[Math.round(d*M*Ll),Math.round(b*M*Ll)]}function If(f,u){const d=Math.pow(2,u.z);return[(M=(f[0]/Ll+u.x)/d,360*M-180),(b=(f[1]/Ll+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90)];var b,M}function Uh(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function kf(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Mp(f,u,d){const b=f[0]-u[0],M=f[1]-u[1],k=f[0]-d[0],P=f[1]-d[1];return b*P-k*M==0&&b*k<=0&&M*P<=0}function Ud(f,u,d,b){return(M=[b[0]-d[0],b[1]-d[1]])[0]*(k=[u[0]-f[0],u[1]-f[1]])[1]-M[1]*k[0]!=0&&!(!wp(f,u,d,b)||!wp(d,b,f,u));var M,k}function M1(f,u,d){for(const b of d)for(let M=0;M<b.length-1;++M)if(Ud(f,u,b[M],b[M+1]))return!0;return!1}function Ic(f,u,d=!1){let b=!1;for(const K of u)for(let G=0;G<K.length-1;G++){if(Mp(f,K[G],K[G+1]))return d;(k=K[G])[1]>(M=f)[1]!=(P=K[G+1])[1]>M[1]&&M[0]<(P[0]-k[0])*(M[1]-k[1])/(P[1]-k[1])+k[0]&&(b=!b)}var M,k,P;return b}function ac(f,u){for(const d of u)if(Ic(f,d))return!0;return!1}function Um(f,u){for(const d of f)if(!Ic(d,u))return!1;for(let d=0;d<f.length-1;++d)if(M1(f[d],f[d+1],u))return!1;return!0}function Tf(f,u){for(const d of u)if(Um(f,d))return!0;return!1}function wp(f,u,d,b){const M=b[0]-d[0],k=b[1]-d[1],P=(f[0]-d[0])*k-M*(f[1]-d[1]),K=(u[0]-d[0])*k-M*(u[1]-d[1]);return P>0&&K<0||P<0&&K>0}function Rf(f,u,d){const b=[];for(let M=0;M<f.length;M++){const k=[];for(let P=0;P<f[M].length;P++){const K=Pd(f[M][P],d);Uh(u,K),k.push(K)}b.push(k)}return b}function Df(f,u,d){const b=[];for(let M=0;M<f.length;M++){const k=Rf(f[M],u,d);b.push(k)}return b}function Pf(f,u,d,b){if(f[0]<d[0]||f[0]>d[2]){const M=.5*b;let k=f[0]-d[0]>M?-b:d[0]-f[0]>M?b:0;k===0&&(k=f[0]-d[2]>M?-b:d[2]-f[0]>M?b:0),f[0]+=k}Uh(u,f)}function w1(f,u,d,b){const M=Math.pow(2,b.z)*Ll,k=[b.x*Ll,b.y*Ll],P=[];for(const K of f)for(const G of K){const ee=[G.x+k[0],G.y+k[1]];Pf(ee,u,d,M),P.push(ee)}return P}function Sp(f,u,d,b){const M=Math.pow(2,b.z)*Ll,k=[b.x*Ll,b.y*Ll],P=[];for(const G of f){const ee=[];for(const ie of G){const ce=[ie.x+k[0],ie.y+k[1]];Uh(u,ce),ee.push(ce)}P.push(ee)}if(u[2]-u[0]<=M/2){(K=u)[0]=K[1]=1/0,K[2]=K[3]=-1/0;for(const G of P)for(const ee of G)Pf(ee,u,d,M)}var K;return P}class tA{constructor(u,d){this.type=ii,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ul(u[1])){const b=u[1];if(b.type==="FeatureCollection"){const M=[];for(const k of b.features){const{type:P,coordinates:K}=k.geometry;P==="Polygon"&&M.push(K),P==="MultiPolygon"&&M.push(...K)}if(M.length)return new tA(b,{type:"MultiPolygon",coordinates:M})}else if(b.type==="Feature"){const M=b.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new tA(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new tA(b,b)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const M=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],P=d.canonicalID();if(b.type==="Polygon"){const K=Rf(b.coordinates,k,P),G=w1(d.geometry(),M,k,P);if(!kf(M,k))return!1;for(const ee of G)if(!Ic(ee,K))return!1}if(b.type==="MultiPolygon"){const K=Df(b.coordinates,k,P),G=w1(d.geometry(),M,k,P);if(!kf(M,k))return!1;for(const ee of G)if(!ac(ee,K))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const M=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],P=d.canonicalID();if(b.type==="Polygon"){const K=Rf(b.coordinates,k,P),G=Sp(d.geometry(),M,k,P);if(!kf(M,k))return!1;for(const ee of G)if(!Um(ee,K))return!1}if(b.type==="MultiPolygon"){const K=Df(b.coordinates,k,P),G=Sp(d.geometry(),M,k,P);if(!kf(M,k))return!1;for(const ee of G)if(!Tf(ee,K))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Lh=class{constructor(f=[],u=(d,b)=>d<b?-1:d>b?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,b=u[f];for(;f>0;){const M=f-1>>1,k=u[M];if(d(b,k)>=0)break;u[f]=k,f=M}u[f]=b}_down(f){const{data:u,compare:d}=this,b=this.length>>1,M=u[f];for(;f<b;){let k=1+(f<<1);const P=k+1;if(P<this.length&&d(u[P],u[k])<0&&(k=P),d(u[k],M)>=0)break;u[f]=u[k],f=k}u[f]=M}};function Lm(f,u,d=0,b=f.length-1,M=Km){for(;b>d;){if(b-d>600){const G=b-d+1,ee=u-d+1,ie=Math.log(G),ce=.5*Math.exp(2*ie/3),Be=.5*Math.sqrt(ie*ce*(G-ce)/G)*(ee-G/2<0?-1:1);Lm(f,u,Math.max(d,Math.floor(u-ee*ce/G+Be)),Math.min(b,Math.floor(u+(G-ee)*ce/G+Be)),M)}const k=f[u];let P=d,K=b;for(Ld(f,d,u),M(f[b],k)>0&&Ld(f,d,b);P<K;){for(Ld(f,P,K),P++,K--;M(f[P],k)<0;)P++;for(;M(f[K],k)>0;)K--}M(f[d],k)===0?Ld(f,d,K):(K++,Ld(f,K,b)),K<=u&&(d=K+1),u<=K&&(b=K-1)}}function Ld(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function Km(f,u){return f<u?-1:f>u?1:0}function Kh(f,u){if(f.length<=1)return[f];const d=[];let b,M;for(const k of f){const P=Fm(k);P!==0&&(k.area=Math.abs(P),M===void 0&&(M=P<0),M===P<0?(b&&d.push(b),b=[k]):b.push(k))}if(b&&d.push(b),u>1)for(let k=0;k<d.length;k++)d[k].length<=u||(Lm(d[k],u,1,d[k].length-1,vA),d[k]=d[k].slice(0,u));return d}function vA(f,u){return u.area-f.area}function Fm(f){let u=0;for(let d,b,M=0,k=f.length,P=k-1;M<k;P=M++)d=f[M],b=f[P],u+=(b.x-d.x)*(d.y+b.y);return u}const S1=1/298.257223563,d0=S1*(2-S1),f0=Math.PI/180;class Fh{constructor(u){const d=6378.137*f0*1e3,b=Math.cos(u*f0),M=1/(1-d0*(1-b*b)),k=Math.sqrt(M);this.kx=d*k*b,this.ky=d*k*M*(1-d0)}distance(u,d){const b=this.wrap(u[0]-d[0])*this.kx,M=(u[1]-d[1])*this.ky;return Math.sqrt(b*b+M*M)}pointOnLine(u,d){let b,M,k,P,K=1/0;for(let G=0;G<u.length-1;G++){let ee=u[G][0],ie=u[G][1],ce=this.wrap(u[G+1][0]-ee)*this.kx,Be=(u[G+1][1]-ie)*this.ky,Pe=0;ce===0&&Be===0||(Pe=(this.wrap(d[0]-ee)*this.kx*ce+(d[1]-ie)*this.ky*Be)/(ce*ce+Be*Be),Pe>1?(ee=u[G+1][0],ie=u[G+1][1]):Pe>0&&(ee+=ce/this.kx*Pe,ie+=Be/this.ky*Pe)),ce=this.wrap(d[0]-ee)*this.kx,Be=(d[1]-ie)*this.ky;const Le=ce*ce+Be*Be;Le<K&&(K=Le,b=ee,M=ie,k=G,P=Pe)}return{point:[b,M],index:k,t:Math.max(0,Math.min(1,P))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Ks(f,u){return u[0]-f[0]}function JA(f){return f[1]-f[0]+1}function nA(f,u){return f[1]>=f[0]&&f[1]<u}function zm(f,u){if(f[0]>f[1])return[null,null];const d=JA(f);if(u){if(d===2)return[f,null];const M=Math.floor(d/2);return[[f[0],f[0]+M],[f[0]+M,f[1]]]}if(d===1)return[f,null];const b=Math.floor(d/2)-1;return[[f[0],f[0]+b],[f[0]+b+1,f[1]]]}function jm(f,u){if(!nA(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let b=u[0];b<=u[1];++b)Uh(d,f[b]);return d}function Nm(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const b of d)Uh(u,b);return u}function Gm(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Gr(f,u,d){if(!Gm(f)||!Gm(u))return NaN;let b=0,M=0;return f[2]<u[0]&&(b=u[0]-f[2]),f[0]>u[2]&&(b=f[0]-u[2]),f[1]>u[3]&&(M=f[1]-u[3]),f[3]<u[1]&&(M=u[1]-f[3]),d.distance([0,0],[b,M])}function Ut(f,u,d){const b=d.pointOnLine(u,f);return d.distance(f,b.point)}function sn(f,u,d,b,M){const k=Math.min(Ut(f,[d,b],M),Ut(u,[d,b],M)),P=Math.min(Ut(d,[f,u],M),Ut(b,[f,u],M));return Math.min(k,P)}function rn(f,u,d,b,M){if(!nA(u,f.length)||!nA(b,d.length))return 1/0;let k=1/0;for(let P=u[0];P<u[1];++P){const K=f[P],G=f[P+1];for(let ee=b[0];ee<b[1];++ee){const ie=d[ee],ce=d[ee+1];if(Ud(K,G,ie,ce))return 0;k=Math.min(k,sn(K,G,ie,ce,M))}}return k}function pi(f,u,d,b,M){if(!nA(u,f.length)||!nA(b,d.length))return NaN;let k=1/0;for(let P=u[0];P<=u[1];++P)for(let K=b[0];K<=b[1];++K)if(k=Math.min(k,M.distance(f[P],d[K])),k===0)return k;return k}function vr(f,u,d){if(Ic(f,u,!0))return 0;let b=1/0;for(const M of u){const k=M[0],P=M[M.length-1];if(k!==P&&(b=Math.min(b,Ut(f,[P,k],d)),b===0))return b;const K=d.pointOnLine(M,f);if(b=Math.min(b,d.distance(f,K.point)),b===0)return b}return b}function Hr(f,u,d,b){if(!nA(u,f.length))return NaN;for(let k=u[0];k<=u[1];++k)if(Ic(f[k],d,!0))return 0;let M=1/0;for(let k=u[0];k<u[1];++k){const P=f[k],K=f[k+1];for(const G of d)for(let ee=0,ie=G.length,ce=ie-1;ee<ie;ce=ee++){const Be=G[ce],Pe=G[ee];if(Ud(P,K,Be,Pe))return 0;M=Math.min(M,sn(P,K,Be,Pe,b))}}return M}function Os(f,u){for(const d of f)for(const b of d)if(Ic(b,u,!0))return!0;return!1}function Go(f,u,d,b=1/0){const M=Nm(f),k=Nm(u);if(b!==1/0&&Gr(M,k,d)>=b)return b;if(kf(M,k)){if(Os(f,u))return 0}else if(Os(u,f))return 0;let P=1/0;for(const K of f)for(let G=0,ee=K.length,ie=ee-1;G<ee;ie=G++){const ce=K[ie],Be=K[G];for(const Pe of u)for(let Le=0,Ne=Pe.length,Ze=Ne-1;Le<Ne;Ze=Le++){const ot=Pe[Ze],Dt=Pe[Le];if(Ud(ce,Be,ot,Dt))return 0;P=Math.min(P,sn(ce,Be,ot,Dt,d))}}return P}function Ep(f,u,d,b,M,k){if(!k)return;const P=Gr(jm(b,k),M,d);P<u&&f.push([P,k,[0,0]])}function bA(f,u,d,b,M,k,P){if(!k||!P)return;const K=Gr(jm(b,k),jm(M,P),d);K<u&&f.push([K,k,P])}function Kl(f,u,d,b,M=1/0){let k=Math.min(b.distance(f[0],d[0][0]),M);if(k===0)return k;const P=new Lh([[0,[0,f.length-1],[0,0]]],Ks),K=Nm(d);for(;P.length>0;){const G=P.pop();if(G[0]>=k)continue;const ee=G[1],ie=u?50:100;if(JA(ee)<=ie){if(!nA(ee,f.length))return NaN;if(u){const ce=Hr(f,ee,d,b);if(isNaN(ce)||ce===0)return ce;k=Math.min(k,ce)}else for(let ce=ee[0];ce<=ee[1];++ce){const Be=vr(f[ce],d,b);if(k=Math.min(k,Be),k===0)return 0}}else{const ce=zm(ee,u);Ep(P,k,b,f,K,ce[0]),Ep(P,k,b,f,K,ce[1])}}return k}function zh(f,u,d,b,M,k=1/0){let P=Math.min(k,M.distance(f[0],d[0]));if(P===0)return P;const K=new Lh([[0,[0,f.length-1],[0,d.length-1]]],Ks);for(;K.length>0;){const G=K.pop();if(G[0]>=P)continue;const ee=G[1],ie=G[2],ce=u?50:100,Be=b?50:100;if(JA(ee)<=ce&&JA(ie)<=Be){if(!nA(ee,f.length)&&nA(ie,d.length))return NaN;let Pe;if(u&&b)Pe=rn(f,ee,d,ie,M),P=Math.min(P,Pe);else if(u&&!b){const Le=f.slice(ee[0],ee[1]+1);for(let Ne=ie[0];Ne<=ie[1];++Ne)if(Pe=Ut(d[Ne],Le,M),P=Math.min(P,Pe),P===0)return P}else if(!u&&b){const Le=d.slice(ie[0],ie[1]+1);for(let Ne=ee[0];Ne<=ee[1];++Ne)if(Pe=Ut(f[Ne],Le,M),P=Math.min(P,Pe),P===0)return P}else Pe=pi(f,ee,d,ie,M),P=Math.min(P,Pe)}else{const Pe=zm(ee,u),Le=zm(ie,b);bA(K,P,M,f,d,Pe[0],Le[0]),bA(K,P,M,f,d,Pe[0],Le[1]),bA(K,P,M,f,d,Pe[1],Le[0]),bA(K,P,M,f,d,Pe[1],Le[1])}}return P}function Wm(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class kc{constructor(u,d){this.type=hn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ul(u[1])){const b=u[1];if(b.type==="FeatureCollection")return new kc(b,b.features.map((M=>Wm(M.geometry))).flat());if(b.type==="Feature")return new kc(b,Wm(b.geometry));if("type"in b&&"coordinates"in b)return new kc(b,Wm(b))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const M=d.geometry(),k=M.flat().map((G=>If([G.x,G.y],d.canonical)));if(M.length===0)return NaN;const P=new Fh(k[0][1]);let K=1/0;for(const G of b){switch(G.type){case"Point":K=Math.min(K,zh(k,!1,[G.coordinates],!1,P,K));break;case"LineString":K=Math.min(K,zh(k,!1,G.coordinates,!0,P,K));break;case"Polygon":K=Math.min(K,Kl(k,!1,G.coordinates,P,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const M=d.geometry(),k=M.flat().map((G=>If([G.x,G.y],d.canonical)));if(M.length===0)return NaN;const P=new Fh(k[0][1]);let K=1/0;for(const G of b){switch(G.type){case"Point":K=Math.min(K,zh(k,!0,[G.coordinates],!1,P,K));break;case"LineString":K=Math.min(K,zh(k,!0,G.coordinates,!0,P,K));break;case"Polygon":K=Math.min(K,Kl(k,!0,G.coordinates,P,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(d,b){const M=d.geometry();if(M.length===0||M[0].length===0)return NaN;const k=Kh(M,0).map((G=>G.map((ee=>ee.map((ie=>If([ie.x,ie.y],d.canonical))))))),P=new Fh(k[0][0][0][1]);let K=1/0;for(const G of b)for(const ee of k){switch(G.type){case"Point":K=Math.min(K,Kl([G.coordinates],!1,ee,P,K));break;case"LineString":K=Math.min(K,Kl(G.coordinates,!0,ee,P,K));break;case"Polygon":K=Math.min(K,Go(ee,G.coordinates,P,K))}if(K===0)return K}return K})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class jh{constructor(u){this.type=Ei,this.key=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=u[1];return b==null?d.error("Global state property must be defined."):typeof b!="string"?d.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new jh(b)}evaluate(u){var d;const b=(d=u.globals)===null||d===void 0?void 0:d.globalState;return b&&Object.keys(b).length!==0?Ms(b,this.key):null}eachChild(){}outputDefined(){return!1}}const eh={"==":Of,"!=":xp,">":x1,"<":sc,">=":pv,"<=":Dm,array:Qe,at:pr,boolean:Qe,case:to,coalesce:yA,collator:Dd,format:XA,image:h0,in:lo,"index-of":br,interpolate:Au,"interpolate-hcl":Au,"interpolate-lab":Au,length:Pm,let:Oi,literal:J,match:yr,number:Qe,"number-format":Bf,object:Qe,slice:Fo,step:Ss,string:Qe,"to-boolean":dn,"to-color":dn,"to-number":dn,"to-string":dn,var:Bi,within:tA,distance:kc,"global-state":jh};class Rr{constructor(u,d,b,M){this.name=u,this.type=d,this._evaluate=b,this.args=M}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const b=u[0],M=Rr.definitions[b];if(!M)return d.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(M)?M[0]:M.type,P=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,K=P.filter((([ee])=>!Array.isArray(ee)||ee.length===u.length-1));let G=null;for(const[ee,ie]of K){G=new Ki(d.registry,hu,d.path,null,d.scope);const ce=[];let Be=!1;for(let Pe=1;Pe<u.length;Pe++){const Le=u[Pe],Ne=Array.isArray(ee)?ee[Pe-1]:ee.type,Ze=G.parse(Le,1+ce.length,Ne);if(!Ze){Be=!0;break}ce.push(Ze)}if(!Be)if(Array.isArray(ee)&&ee.length!==ce.length)G.error(`Expected ${ee.length} arguments, but found ${ce.length} instead.`);else{for(let Pe=0;Pe<ce.length;Pe++){const Le=Array.isArray(ee)?ee[Pe]:ee.type,Ne=ce[Pe];G.concat(Pe+1).checkSubtype(Le,Ne.type)}if(G.errors.length===0)return new Rr(b,k,ie,ce)}}if(K.length===1)d.errors.push(...G.errors);else{const ee=(K.length?K:P).map((([ce])=>{return Be=ce,Array.isArray(Be)?`(${Be.map(Qi).join(", ")})`:`(${Qi(Be.type)}...)`;var Be})).join(" | "),ie=[];for(let ce=1;ce<u.length;ce++){const Be=d.parse(u[ce],1+ie.length);if(!Be)return null;ie.push(Qi(Be.type))}d.error(`Expected arguments of type ${ee}, but found (${ie.join(", ")}) instead.`)}return null}static register(u,d){Rr.definitions=d;for(const b in d)u[b]=Rr}}function p0(f,[u,d,b,M]){u=u.evaluate(f),d=d.evaluate(f),b=b.evaluate(f);const k=M?M.evaluate(f):1,P=sl(u,d,b,k);if(P)throw new _o(P);return new Gi(u/255,d/255,b/255,k,!1)}function Op(f,u){return f in u}function Fl(f,u){const d=u[f];return d===void 0?null:d}function CA(f){return{type:f}}function hu(f){if(f instanceof Bi)return hu(f.boundExpression);if(f instanceof Rr&&f.name==="error"||f instanceof Dd||f instanceof tA||f instanceof kc||f instanceof jh)return!1;const u=f instanceof dn||f instanceof Qe;let d=!0;return f.eachChild((b=>{d=u?d&&hu(b):d&&b instanceof J})),!!d&&th(f)&&Iu(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function th(f){if(f instanceof Rr&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof tA||f instanceof kc)return!1;let u=!0;return f.eachChild((d=>{u&&!th(d)&&(u=!1)})),u}function _A(f){if(f instanceof Rr&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((d=>{u&&!_A(d)&&(u=!1)})),u}function Iu(f,u){if(f instanceof Rr&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild((b=>{d&&!Iu(b,u)&&(d=!1)})),d}function Nh(f){return{result:"success",value:f}}function nh(f){return{result:"error",value:f}}function du(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Qm(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Kd(f){return!!f.expression&&f.expression.interpolated}function cr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Fd(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Ni(f)===Xs}function bl(f){return f}function xA(f,u){const d=f.stops&&typeof f.stops[0][0]=="object",b=d||!(d||f.property!==void 0),M=f.type||(Kd(u)?"exponential":"interval"),k=(function(ie){switch(ie.type){case"color":return Gi.parse;case"padding":return so.parse;case"numberArray":return ws.parse;case"colorArray":return Mo.parse;default:return null}})(u);if(k&&((f=Ti({},f)).stops&&(f.stops=f.stops.map((ie=>[ie[0],k(ie[1])]))),f.default=k(f.default?f.default:u.default)),f.colorSpace&&(P=f.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var P;const K=(function(ie){switch(ie){case"exponential":return Gh;case"interval":return qm;case"categorical":return m0;case"identity":return ih;default:throw new Error(`Unknown function type "${ie}"`)}})(M);let G,ee;if(M==="categorical"){G=Object.create(null);for(const ie of f.stops)G[ie[0]]=ie[1];ee=typeof f.stops[0][0]}if(d){const ie={},ce=[];for(let Le=0;Le<f.stops.length;Le++){const Ne=f.stops[Le],Ze=Ne[0].zoom;ie[Ze]===void 0&&(ie[Ze]={zoom:Ze,type:f.type,property:f.property,default:f.default,stops:[]},ce.push(Ze)),ie[Ze].stops.push([Ne[0].value,Ne[1]])}const Be=[];for(const Le of ce)Be.push([ie[Le].zoom,xA(ie[Le],u)]);const Pe={name:"linear"};return{kind:"composite",interpolationType:Pe,interpolationFactor:Au.interpolationFactor.bind(void 0,Pe),zoomStops:Be.map((Le=>Le[0])),evaluate:({zoom:Le},Ne)=>Gh({stops:Be,base:f.base},u,Le).evaluate(Le,Ne)}}if(b){const ie=M==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ie,interpolationFactor:Au.interpolationFactor.bind(void 0,ie),zoomStops:f.stops.map((ce=>ce[0])),evaluate:({zoom:ce})=>K(f,u,ce,G,ee)}}return{kind:"source",evaluate(ie,ce){const Be=ce&&ce.properties?ce.properties[f.property]:void 0;return Be===void 0?zl(f.default,u.default):K(f,u,Be,G,ee)}}}function zl(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function m0(f,u,d,b,M){return zl(typeof d===M?b[d]:void 0,f.default,u.default)}function qm(f,u,d){if(cr(d)!=="number")return zl(f.default,u.default);const b=f.stops.length;if(b===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[b-1][0])return f.stops[b-1][1];const M=Br(f.stops.map((k=>k[0])),d);return f.stops[M][1]}function Gh(f,u,d){const b=f.base!==void 0?f.base:1;if(cr(d)!=="number")return zl(f.default,u.default);const M=f.stops.length;if(M===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[M-1][0])return f.stops[M-1][1];const k=Br(f.stops.map((ie=>ie[0])),d),P=(function(ie,ce,Be,Pe){const Le=Pe-Be,Ne=ie-Be;return Le===0?0:ce===1?Ne/Le:(Math.pow(ce,Ne)-1)/(Math.pow(ce,Le)-1)})(d,b,f.stops[k][0],f.stops[k+1][0]),K=f.stops[k][1],G=f.stops[k+1][1],ee=ta[u.type]||bl;return typeof K.evaluate=="function"?{evaluate(...ie){const ce=K.evaluate.apply(void 0,ie),Be=G.evaluate.apply(void 0,ie);if(ce!==void 0&&Be!==void 0)return ee(ce,Be,P,f.colorSpace)}}:ee(K,G,P,f.colorSpace)}function ih(f,u,d){switch(u.type){case"color":d=Gi.parse(d);break;case"formatted":d=Ko.fromString(d.toString());break;case"resolvedImage":d=ss.fromString(d.toString());break;case"padding":d=so.parse(d);break;case"colorArray":d=Mo.parse(d);break;case"numberArray":d=ws.parse(d);break;default:cr(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return zl(d,f.default,u.default)}Rr.register(eh,{error:[{kind:"error"},[Li],(f,[u])=>{throw new _o(u.evaluate(f))}],typeof:[Li,[Ei],(f,[u])=>Qi(Ni(u.evaluate(f)))],"to-rgba":[Zo(hn,4),[Ia],(f,[u])=>{const[d,b,M,k]=u.evaluate(f).rgb;return[255*d,255*b,255*M,k]}],rgb:[Ia,[hn,hn,hn],p0],rgba:[Ia,[hn,hn,hn,hn],p0],has:{type:ii,overloads:[[[Li],(f,[u])=>Op(u.evaluate(f),f.properties())],[[Li,Xs],(f,[u,d])=>Op(u.evaluate(f),d.evaluate(f))]]},get:{type:Ei,overloads:[[[Li],(f,[u])=>Fl(u.evaluate(f),f.properties())],[[Li,Xs],(f,[u,d])=>Fl(u.evaluate(f),d.evaluate(f))]]},"feature-state":[Ei,[Li],(f,[u])=>Fl(u.evaluate(f),f.featureState||{})],properties:[Xs,[],f=>f.properties()],"geometry-type":[Li,[],f=>f.geometryType()],id:[Ei,[],f=>f.id()],zoom:[hn,[],f=>f.globals.zoom],"heatmap-density":[hn,[],f=>f.globals.heatmapDensity||0],elevation:[hn,[],f=>f.globals.elevation||0],"line-progress":[hn,[],f=>f.globals.lineProgress||0],accumulated:[Ei,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[hn,CA(hn),(f,u)=>{let d=0;for(const b of u)d+=b.evaluate(f);return d}],"*":[hn,CA(hn),(f,u)=>{let d=1;for(const b of u)d*=b.evaluate(f);return d}],"-":{type:hn,overloads:[[[hn,hn],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[hn],(f,[u])=>-u.evaluate(f)]]},"/":[hn,[hn,hn],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[hn,[hn,hn],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[hn,[],()=>Math.LN2],pi:[hn,[],()=>Math.PI],e:[hn,[],()=>Math.E],"^":[hn,[hn,hn],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[hn,[hn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[hn,[hn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[hn,[hn],(f,[u])=>Math.log(u.evaluate(f))],log2:[hn,[hn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[hn,[hn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[hn,[hn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[hn,[hn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[hn,[hn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[hn,[hn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[hn,[hn],(f,[u])=>Math.atan(u.evaluate(f))],min:[hn,CA(hn),(f,u)=>Math.min(...u.map((d=>d.evaluate(f))))],max:[hn,CA(hn),(f,u)=>Math.max(...u.map((d=>d.evaluate(f))))],abs:[hn,[hn],(f,[u])=>Math.abs(u.evaluate(f))],round:[hn,[hn],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[hn,[hn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[hn,[hn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[ii,[Li,Ei],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[ii,[Ei],(f,[u])=>f.id()===u.value],"filter-type-==":[ii,[Li],(f,[u])=>f.geometryType()===u.value],"filter-<":[ii,[Li,Ei],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b<M}],"filter-id-<":[ii,[Ei],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<b}],"filter->":[ii,[Li,Ei],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b>M}],"filter-id->":[ii,[Ei],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>b}],"filter-<=":[ii,[Li,Ei],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b<=M}],"filter-id-<=":[ii,[Ei],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<=b}],"filter->=":[ii,[Li,Ei],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b>=M}],"filter-id->=":[ii,[Ei],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>=b}],"filter-has":[ii,[Ei],(f,[u])=>u.value in f.properties()],"filter-has-id":[ii,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[ii,[Zo(Li)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[ii,[Zo(Ei)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[ii,[Li,Zo(Ei)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[ii,[Li,Zo(Ei)],(f,[u,d])=>(function(b,M,k,P){for(;k<=P;){const K=k+P>>1;if(M[K]===b)return!0;M[K]>b?P=K-1:k=K+1}return!1})(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:ii,overloads:[[[ii,ii],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[CA(ii),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:ii,overloads:[[[ii,ii],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[CA(ii),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[ii,[ii],(f,[u])=>!u.evaluate(f)],"is-supported-script":[ii,[Li],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[Li,[Li],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Li,[Li],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Li,CA(Ei),(f,u)=>u.map((d=>Pi(d.evaluate(f)))).join("")],"resolved-locale":[Li,[gl],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Wh{constructor(u,d,b){this.expression=u,this._warningHistory={},this._evaluator=new ci,this._defaultValue=d?(function(M){if(M.type==="color"&&Fd(M.default))return new Gi(0,0,0,0);switch(M.type){case"color":return Gi.parse(M.default)||null;case"padding":return so.parse(M.default)||null;case"numberArray":return ws.parse(M.default)||null;case"colorArray":return Mo.parse(M.default)||null;case"variableAnchorOffsetCollection":return mo.parse(M.default)||null;case"projectionDefinition":return ao.parse(M.default)||null;default:return M.default===void 0?null:M.default}})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=b}evaluateWithoutErrorHandling(u,d,b,M,k,P){return this._globalState&&(u=Cl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=b,this._evaluator.canonical=M,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(u,d,b,M,k,P){this._globalState&&(u=Cl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=b||null,this._evaluator.canonical=M,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=P||null;try{const K=this.expression.evaluate(this._evaluator);if(K==null||typeof K=="number"&&K!=K)return this._defaultValue;if(this._enumValues&&!(K in this._enumValues))throw new _o(`Expected value to be one of ${Object.keys(this._enumValues).map((G=>JSON.stringify(G))).join(", ")}, but found ${JSON.stringify(K)} instead.`);return K}catch(K){return this._warningHistory[K.message]||(this._warningHistory[K.message]=!0,typeof console<"u"&&console.warn(K.message)),this._defaultValue}}}function Qh(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in eh}function Bp(f,u,d){const b=new Ki(eh,hu,[],u?(function(k){const P={color:Ia,string:Li,number:hn,enum:Li,boolean:ii,formatted:Vr,padding:ka,numberArray:fa,colorArray:nu,projectionDefinition:tu,resolvedImage:Ho,variableAnchorOffsetCollection:Rl};return k.type==="array"?Zo(P[k.value]||Ei,k.length):P[k.type]})(u):void 0),M=b.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return M?Nh(new Wh(M,u,d)):nh(b.errors)}class jl{constructor(u,d,b){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!_A(d.expression),this.globalStateRefs=fu(d.expression),this._globalState=b}evaluateWithoutErrorHandling(u,d,b,M,k,P){return this._globalState&&(u=Cl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,M,k,P)}evaluate(u,d,b,M,k,P){return this._globalState&&(u=Cl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,M,k,P)}}class qh{constructor(u,d,b,M,k){this.kind=u,this.zoomStops=b,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!_A(d.expression),this.globalStateRefs=fu(d.expression),this.interpolationType=M,this._globalState=k}evaluateWithoutErrorHandling(u,d,b,M,k,P){return this._globalState&&(u=Cl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,M,k,P)}evaluate(u,d,b,M,k,P){return this._globalState&&(u=Cl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,M,k,P)}interpolationFactor(u,d,b){return this.interpolationType?Au.interpolationFactor(this.interpolationType,u,d,b):0}}function zd(f,u,d){const b=Bp(f,u,d);if(b.result==="error")return b;const M=b.value.expression,k=th(M);if(!k&&!du(u))return nh([new Io("","data expressions not supported")]);const P=Iu(M,["zoom"]);if(!P&&!Qm(u))return nh([new Io("","zoom expressions not supported")]);const K=Fs(M);return K||P?K instanceof Io?nh([K]):K instanceof Au&&!Kd(u)?nh([new Io("",'"interpolate" expressions cannot be used with this property')]):Nh(K?new qh(k?"camera":"composite",b.value,K.labels,K instanceof Au?K.interpolation:void 0,d):new jl(k?"constant":"source",b.value,d)):nh([new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ms{constructor(u,d){this._parameters=u,this._specification=d,Ti(this,xA(this._parameters,this._specification))}static deserialize(u){return new ms(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Fs(f){let u=null;if(f instanceof Oi)u=Fs(f.result);else if(f instanceof yA){for(const d of f.args)if(u=Fs(d),u)break}else(f instanceof Ss||f instanceof Au)&&f.input instanceof Rr&&f.input.name==="zoom"&&(u=f);return u instanceof Io||f.eachChild((d=>{const b=Fs(d);b instanceof Io?u=b:!u&&b?u=new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&b&&u!==b&&(u=new Io("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function fu(f,u=new Set){return f instanceof jh&&u.add(f.key),f.eachChild((d=>{fu(d,u)})),u}function Cl(f,u){const{zoom:d,heatmapDensity:b,elevation:M,lineProgress:k,isSupportedScript:P,accumulated:K}=f??{};return{zoom:d,heatmapDensity:b,elevation:M,lineProgress:k,isSupportedScript:P,accumulated:K,globalState:u}}function Tc(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!Tc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const iA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _l(f,u){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Tc(f)||(f=rA(f));const d=Bp(f,iA,u);if(d.result==="error")throw new Error(d.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return{filter:(b,M,k)=>d.value.evaluate(b,M,{},k),needGeometry:Ip(f),getGlobalStateRefs:()=>fu(d.value.expression)}}function lc(f,u){return f<u?-1:f>u?1:0}function Ip(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Ip(f[u]))return!0;return!1}function rA(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?rh(f[1],f[2],"=="):u==="!="?uo(rh(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?rh(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(rA))):u==="all"?["all"].concat(f.slice(1).map(rA)):u==="none"?["all"].concat(f.slice(1).map(rA).map(uo)):u==="in"?Yh(f[1],f.slice(2)):u==="!in"?uo(Yh(f[1],f.slice(2))):u==="has"?na(f[1]):u!=="!has"||uo(na(f[1]));var d}function rh(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function Yh(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((d=>typeof d!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(lc)]]:["filter-in-small",f,["literal",u]]}}function na(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function uo(f){return["!",f]}function Wr(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let M="[";for(const k of f)M+=`${Wr(k)},`;return`${M}]`}const d=Object.keys(f).sort();let b="{";for(let M=0;M<d.length;M++)b+=`${JSON.stringify(d[M])}:${Wr(f[d[M]])},`;return`${b}}`}function MA(f){let u="";for(const d of jn)u+=`/${Wr(f[d])}`;return u}function pu(f){const u=f.value;return u?[new nn(f.key,u,"constants have been deprecated as of v8")]:[]}function as(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function ku(f){if(Array.isArray(f))return f.map(ku);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=ku(f[d]);return u}return as(f)}function Nl(f){const u=f.key,d=f.value,b=f.valueSpec||{},M=f.objectElementValidators||{},k=f.style,P=f.styleSpec,K=f.validateSpec;let G=[];const ee=cr(d);if(ee!=="object")return[new nn(u,d,`object expected, ${ee} found`)];for(const ie in d){const ce=ie.split(".")[0],Be=Ms(b,ce)||b["*"];let Pe;if(Ms(M,ce))Pe=M[ce];else if(Ms(b,ce))Pe=K;else if(M["*"])Pe=M["*"];else{if(!b["*"]){G.push(new nn(u,d[ie],`unknown property "${ie}"`));continue}Pe=K}G=G.concat(Pe({key:(u&&`${u}.`)+ie,value:d[ie],valueSpec:Be,style:k,styleSpec:P,object:d,objectKey:ie,validateSpec:K},d))}for(const ie in b)M[ie]||b[ie].required&&b[ie].default===void 0&&d[ie]===void 0&&G.push(new nn(u,d,`missing required property "${ie}"`));return G}function $h(f){const u=f.value,d=f.valueSpec,b=f.style,M=f.styleSpec,k=f.key,P=f.arrayElementValidator||f.validateSpec;if(cr(u)!=="array")return[new nn(k,u,`array expected, ${cr(u)} found`)];if(d.length&&u.length!==d.length)return[new nn(k,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new nn(k,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let K={type:d.value,values:d.values};M.$version<7&&(K.function=d.function),cr(d.value)==="object"&&(K=d.value);let G=[];for(let ee=0;ee<u.length;ee++)G=G.concat(P({array:u,arrayIndex:ee,value:u[ee],valueSpec:K,validateSpec:f.validateSpec,style:b,styleSpec:M,key:`${k}[${ee}]`}));return G}function wA(f){const u=f.key,d=f.value,b=f.valueSpec;let M=cr(d);return M==="number"&&d!=d&&(M="NaN"),M!=="number"?[new nn(u,d,`number expected, ${M} found`)]:"minimum"in b&&d<b.minimum?[new nn(u,d,`${d} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&d>b.maximum?[new nn(u,d,`${d} is greater than the maximum value ${b.maximum}`)]:[]}function $e(f){const u=f.valueSpec,d=as(f.value.type);let b,M,k,P={};const K=d!=="categorical"&&f.value.property===void 0,G=!K,ee=cr(f.value.stops)==="array"&&cr(f.value.stops[0])==="array"&&cr(f.value.stops[0][0])==="object",ie=Nl({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(Pe){if(d==="identity")return[new nn(Pe.key,Pe.value,'identity function may not have a "stops" property')];let Le=[];const Ne=Pe.value;return Le=Le.concat($h({key:Pe.key,value:Ne,valueSpec:Pe.valueSpec,validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec,arrayElementValidator:ce})),cr(Ne)==="array"&&Ne.length===0&&Le.push(new nn(Pe.key,Ne,"array must have at least one stop")),Le},default:function(Pe){return Pe.validateSpec({key:Pe.key,value:Pe.value,valueSpec:u,validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec})}}});return d==="identity"&&K&&ie.push(new nn(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||ie.push(new nn(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!Kd(f.valueSpec)&&ie.push(new nn(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(G&&!du(f.valueSpec)?ie.push(new nn(f.key,f.value,"property functions not supported")):K&&!Qm(f.valueSpec)&&ie.push(new nn(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!ee||f.value.property!==void 0||ie.push(new nn(f.key,f.value,'"property" property is required')),ie;function ce(Pe){let Le=[];const Ne=Pe.value,Ze=Pe.key;if(cr(Ne)!=="array")return[new nn(Ze,Ne,`array expected, ${cr(Ne)} found`)];if(Ne.length!==2)return[new nn(Ze,Ne,`array length 2 expected, length ${Ne.length} found`)];if(ee){if(cr(Ne[0])!=="object")return[new nn(Ze,Ne,`object expected, ${cr(Ne[0])} found`)];if(Ne[0].zoom===void 0)return[new nn(Ze,Ne,"object stop key must have zoom")];if(Ne[0].value===void 0)return[new nn(Ze,Ne,"object stop key must have value")];if(k&&k>as(Ne[0].zoom))return[new nn(Ze,Ne[0].zoom,"stop zoom values must appear in ascending order")];as(Ne[0].zoom)!==k&&(k=as(Ne[0].zoom),M=void 0,P={}),Le=Le.concat(Nl({key:`${Ze}[0]`,value:Ne[0],valueSpec:{zoom:{}},validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec,objectElementValidators:{zoom:wA,value:Be}}))}else Le=Le.concat(Be({key:`${Ze}[0]`,value:Ne[0],validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec},Ne));return Qh(ku(Ne[1]))?Le.concat([new nn(`${Ze}[1]`,Ne[1],"expressions are not allowed in function stops.")]):Le.concat(Pe.validateSpec({key:`${Ze}[1]`,value:Ne[1],valueSpec:u,validateSpec:Pe.validateSpec,style:Pe.style,styleSpec:Pe.styleSpec}))}function Be(Pe,Le){const Ne=cr(Pe.value),Ze=as(Pe.value),ot=Pe.value!==null?Pe.value:Le;if(b){if(Ne!==b)return[new nn(Pe.key,ot,`${Ne} stop domain type must match previous stop domain type ${b}`)]}else b=Ne;if(Ne!=="number"&&Ne!=="string"&&Ne!=="boolean")return[new nn(Pe.key,ot,"stop domain value must be a number, string, or boolean")];if(Ne!=="number"&&d!=="categorical"){let Dt=`number expected, ${Ne} found`;return du(u)&&d===void 0&&(Dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nn(Pe.key,ot,Dt)]}return d!=="categorical"||Ne!=="number"||isFinite(Ze)&&Math.floor(Ze)===Ze?d!=="categorical"&&Ne==="number"&&M!==void 0&&Ze<M?[new nn(Pe.key,ot,"stop domain values must appear in ascending order")]:(M=Ze,d==="categorical"&&Ze in P?[new nn(Pe.key,ot,"stop domain values must be unique")]:(P[Ze]=!0,[])):[new nn(Pe.key,ot,`integer expected, found ${Ze}`)]}}function uc(f){const u=(f.expressionContext==="property"?zd:Bp)(ku(f.value),f.valueSpec);if(u.result==="error")return u.value.map((b=>new nn(`${f.key}${b.key}`,f.value,b.message)));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new nn(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!_A(d))return[new nn(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!_A(d))return[new nn(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Iu(d,["zoom","feature-state"]))return[new nn(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!th(d))return[new nn(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oA(f){const u=f.key,d=f.value,b=cr(d);return b!=="string"?[new nn(u,d,`color expected, ${b} found`)]:Gi.parse(String(d))?[]:[new nn(u,d,`color expected, "${d}" found`)]}function Qa(f){const u=f.key,d=f.value,b=f.valueSpec,M=[];return Array.isArray(b.values)?b.values.indexOf(as(d))===-1&&M.push(new nn(u,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(b.values).indexOf(as(d))===-1&&M.push(new nn(u,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),M}function hr(f){return Tc(ku(f.value))?uc(Ti({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):SA(f)}function SA(f){const u=f.value,d=f.key;if(cr(u)!=="array")return[new nn(d,u,`array expected, ${cr(u)} found`)];const b=f.styleSpec;let M,k=[];if(u.length<1)return[new nn(d,u,"filter array must have at least 1 element")];switch(k=k.concat(Qa({key:`${d}[0]`,value:u[0],valueSpec:b.filter_operator,style:f.style,styleSpec:f.styleSpec})),as(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&as(u[1])==="$type"&&k.push(new nn(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&k.push(new nn(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(M=cr(u[1]),M!=="string"&&k.push(new nn(`${d}[1]`,u[1],`string expected, ${M} found`)));for(let P=2;P<u.length;P++)M=cr(u[P]),as(u[1])==="$type"?k=k.concat(Qa({key:`${d}[${P}]`,value:u[P],valueSpec:b.geometry_type,style:f.style,styleSpec:f.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&k.push(new nn(`${d}[${P}]`,u[P],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let P=1;P<u.length;P++)k=k.concat(SA({key:`${d}[${P}]`,value:u[P],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":M=cr(u[1]),u.length!==2?k.push(new nn(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):M!=="string"&&k.push(new nn(`${d}[1]`,u[1],`string expected, ${M} found`))}return k}function EA(f,u){const d=f.key,b=f.validateSpec,M=f.style,k=f.styleSpec,P=f.value,K=f.objectKey,G=k[`${u}_${f.layerType}`];if(!G)return[];const ee=K.match(/^(.*)-transition$/);if(u==="paint"&&ee&&G[ee[1]]&&G[ee[1]].transition)return b({key:d,value:P,valueSpec:k.transition,style:M,styleSpec:k});const ie=f.valueSpec||G[K];if(!ie)return[new nn(d,P,`unknown property "${K}"`)];let ce;if(cr(P)==="string"&&du(ie)&&!ie.tokens&&(ce=/^{([^}]+)}$/.exec(P)))return[new nn(d,P,`"${K}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ce[1])} }\`.`)];const Be=[];return f.layerType==="symbol"&&(K==="text-field"&&M&&!M.glyphs&&Be.push(new nn(d,P,'use of "text-field" requires a style "glyphs" property')),K==="text-font"&&Fd(ku(P))&&as(P.type)==="identity"&&Be.push(new nn(d,P,'"text-font" does not support identity functions'))),Be.concat(b({key:f.key,value:P,valueSpec:ie,style:M,styleSpec:k,expressionContext:"property",propertyType:u,propertyKey:K}))}function sA(f){return EA(f,"paint")}function OA(f){return EA(f,"layout")}function kp(f){let u=[];const d=f.value,b=f.key,M=f.style,k=f.styleSpec;if(cr(d)!=="object")return[new nn(b,d,`object expected, ${cr(d)} found`)];d.type||d.ref||u.push(new nn(b,d,'either "type" or "ref" is required'));let P=as(d.type);const K=as(d.ref);if(d.id){const G=as(d.id);for(let ee=0;ee<f.arrayIndex;ee++){const ie=M.layers[ee];as(ie.id)===G&&u.push(new nn(b,d.id,`duplicate layer id "${d.id}", previously used at line ${ie.id.__line__}`))}}if("ref"in d){let G;["type","source","source-layer","filter","layout"].forEach((ee=>{ee in d&&u.push(new nn(b,d[ee],`"${ee}" is prohibited for ref layers`))})),M.layers.forEach((ee=>{as(ee.id)===K&&(G=ee)})),G?G.ref?u.push(new nn(b,d.ref,"ref cannot reference another ref layer")):P=as(G.type):u.push(new nn(b,d.ref,`ref layer "${K}" not found`))}else if(P!=="background")if(d.source){const G=M.sources&&M.sources[d.source],ee=G&&as(G.type);G?ee==="vector"&&P==="raster"?u.push(new nn(b,d.source,`layer "${d.id}" requires a raster source`)):ee!=="raster-dem"&&P==="hillshade"||ee!=="raster-dem"&&P==="color-relief"?u.push(new nn(b,d.source,`layer "${d.id}" requires a raster-dem source`)):ee==="raster"&&P!=="raster"?u.push(new nn(b,d.source,`layer "${d.id}" requires a vector source`)):ee!=="vector"||d["source-layer"]?ee==="raster-dem"&&P!=="hillshade"&&P!=="color-relief"?u.push(new nn(b,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):P!=="line"||!d.paint||!d.paint["line-gradient"]||ee==="geojson"&&G.lineMetrics||u.push(new nn(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new nn(b,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new nn(b,d.source,`source "${d.source}" not found`))}else u.push(new nn(b,d,'missing required property "source"'));return u=u.concat(Nl({key:b,value:d,valueSpec:k.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${b}.type`,value:d.type,valueSpec:k.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:hr,layout:G=>Nl({layer:d,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,validateSpec:G.validateSpec,objectElementValidators:{"*":ee=>OA(Ti({layerType:P},ee))}}),paint:G=>Nl({layer:d,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,validateSpec:G.validateSpec,objectElementValidators:{"*":ee=>sA(Ti({layerType:P},ee))}})}})),u}function cc(f){const u=f.value,d=f.key,b=cr(u);return b!=="string"?[new nn(d,u,`string expected, ${b} found`)]:[]}const oh={promoteId:function({key:f,value:u}){if(cr(u)==="string")return cc({key:f,value:u});{const d=[];for(const b in u)d.push(...cc({key:`${f}.${b}`,value:u[b]}));return d}}};function Vh(f){const u=f.value,d=f.key,b=f.styleSpec,M=f.style,k=f.validateSpec;if(!u.type)return[new nn(d,u,'"type" is required')];const P=as(u.type);let K;switch(P){case"vector":case"raster":return K=Nl({key:d,value:u,valueSpec:b[`source_${P.replace("-","_")}`],style:f.style,styleSpec:b,objectElementValidators:oh,validateSpec:k}),K;case"raster-dem":return K=(function(G){var ee;const ie=(ee=G.sourceName)!==null&&ee!==void 0?ee:"",ce=G.value,Be=G.styleSpec,Pe=Be.source_raster_dem,Le=G.style;let Ne=[];const Ze=cr(ce);if(ce===void 0)return Ne;if(Ze!=="object")return Ne.push(new nn("source_raster_dem",ce,`object expected, ${Ze} found`)),Ne;const ot=as(ce.encoding)==="custom",Dt=["redFactor","greenFactor","blueFactor","baseShift"],dt=G.value.encoding?`"${G.value.encoding}"`:"Default";for(const xt in ce)!ot&&Dt.includes(xt)?Ne.push(new nn(xt,ce[xt],`In "${ie}": "${xt}" is only valid when "encoding" is set to "custom". ${dt} encoding found`)):Pe[xt]?Ne=Ne.concat(G.validateSpec({key:xt,value:ce[xt],valueSpec:Pe[xt],validateSpec:G.validateSpec,style:Le,styleSpec:Be})):Ne.push(new nn(xt,ce[xt],`unknown property "${xt}"`));return Ne})({sourceName:d,value:u,style:f.style,styleSpec:b,validateSpec:k}),K;case"geojson":if(K=Nl({key:d,value:u,valueSpec:b.source_geojson,style:M,styleSpec:b,validateSpec:k,objectElementValidators:oh}),u.cluster)for(const G in u.clusterProperties){const[ee,ie]=u.clusterProperties[G],ce=typeof ee=="string"?[ee,["accumulated"],["get",G]]:ee;K.push(...uc({key:`${d}.${G}.map`,value:ie,expressionContext:"cluster-map"})),K.push(...uc({key:`${d}.${G}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return K;case"video":return Nl({key:d,value:u,valueSpec:b.source_video,style:M,validateSpec:k,styleSpec:b});case"image":return Nl({key:d,value:u,valueSpec:b.source_image,style:M,validateSpec:k,styleSpec:b});case"canvas":return[new nn(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qa({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function al(f){const u=f.value,d=f.styleSpec,b=d.light,M=f.style;let k=[];const P=cr(u);if(u===void 0)return k;if(P!=="object")return k=k.concat([new nn("light",u,`object expected, ${P} found`)]),k;for(const K in u){const G=K.match(/^(.*)-transition$/);k=k.concat(G&&b[G[1]]&&b[G[1]].transition?f.validateSpec({key:K,value:u[K],valueSpec:d.transition,validateSpec:f.validateSpec,style:M,styleSpec:d}):b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:M,styleSpec:d}):[new nn(K,u[K],`unknown property "${K}"`)])}return k}function Ac(f){const u=f.value,d=f.styleSpec,b=d.sky,M=f.style,k=cr(u);if(u===void 0)return[];if(k!=="object")return[new nn("sky",u,`object expected, ${k} found`)];let P=[];for(const K in u)P=P.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:M,styleSpec:d}):[new nn(K,u[K],`unknown property "${K}"`)]);return P}function g0(f){const u=f.value,d=f.styleSpec,b=d.terrain,M=f.style;let k=[];const P=cr(u);if(u===void 0)return k;if(P!=="object")return k=k.concat([new nn("terrain",u,`object expected, ${P} found`)]),k;for(const K in u)k=k.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:M,styleSpec:d}):[new nn(K,u[K],`unknown property "${K}"`)]);return k}function E1(f){let u=[];const d=f.value,b=f.key;if(Array.isArray(d)){const M=[],k=[];for(const P in d)d[P].id&&M.includes(d[P].id)&&u.push(new nn(b,d,`all the sprites' ids must be unique, but ${d[P].id} is duplicated`)),M.push(d[P].id),d[P].url&&k.includes(d[P].url)&&u.push(new nn(b,d,`all the sprites' URLs must be unique, but ${d[P].url} is duplicated`)),k.push(d[P].url),u=u.concat(Nl({key:`${b}[${P}]`,value:d[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return cc({key:b,value:d})}function O1(f){return u=f.value,u&&u.constructor===Object?[]:[new nn(f.key,f.value,`object expected, ${cr(f.value)} found`)];var u}const Uf={"*":()=>[],array:$h,boolean:function(f){const u=f.value,d=f.key,b=cr(u);return b!=="boolean"?[new nn(d,u,`boolean expected, ${b} found`)]:[]},number:wA,color:oA,constants:pu,enum:Qa,filter:hr,function:$e,layer:kp,object:Nl,source:Vh,light:al,sky:Ac,terrain:g0,projection:function(f){const u=f.value,d=f.styleSpec,b=d.projection,M=f.style,k=cr(u);if(u===void 0)return[];if(k!=="object")return[new nn("projection",u,`object expected, ${k} found`)];let P=[];for(const K in u)P=P.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:M,styleSpec:d}):[new nn(K,u[K],`unknown property "${K}"`)]);return P},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const b=cr(d);return b!=="array"||(function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"})(d)||(function(M){return!!["interpolate","step","literal"].includes(M[0])})(d)?["array","string"].includes(b)?[]:[new nn(u,d,`projection expected, invalid type "${b}" found`)]:[new nn(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:cc,formatted:function(f){return cc(f).length===0?[]:uc(f)},resolvedImage:function(f){return cc(f).length===0?[]:uc(f)},padding:function(f){const u=f.key,d=f.value;if(cr(d)==="array"){if(d.length<1||d.length>4)return[new nn(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const b={type:"number"};let M=[];for(let k=0;k<d.length;k++)M=M.concat(f.validateSpec({key:`${u}[${k}]`,value:d[k],validateSpec:f.validateSpec,valueSpec:b}));return M}return wA({key:u,value:d,valueSpec:{}})},numberArray:function(f){const u=f.key,d=f.value;if(cr(d)==="array"){const b={type:"number"};if(d.length<1)return[new nn(u,d,"array length at least 1 expected, length 0 found")];let M=[];for(let k=0;k<d.length;k++)M=M.concat(f.validateSpec({key:`${u}[${k}]`,value:d[k],validateSpec:f.validateSpec,valueSpec:b}));return M}return wA({key:u,value:d,valueSpec:{}})},colorArray:function(f){const u=f.key,d=f.value;if(cr(d)==="array"){if(d.length<1)return[new nn(u,d,"array length at least 1 expected, length 0 found")];let b=[];for(let M=0;M<d.length;M++)b=b.concat(oA({key:`${u}[${M}]`,value:d[M]}));return b}return oA({key:u,value:d})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,b=cr(d),M=f.styleSpec;if(b!=="array"||d.length<1||d.length%2!=0)return[new nn(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let P=0;P<d.length;P+=2)k=k.concat(Qa({key:`${u}[${P}]`,value:d[P],valueSpec:M.layout_symbol["text-anchor"]})),k=k.concat($h({key:`${u}[${P+1}]`,value:d[P+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:M}));return k},sprite:E1,state:O1};function ls(f){const u=f.value,d=f.valueSpec,b=f.styleSpec;return f.validateSpec=ls,d.expression&&Fd(as(u))?$e(f):d.expression&&Qh(ku(u))?uc(f):d.type&&Uf[d.type]?Uf[d.type](f):Nl(Ti({},f,{valueSpec:d.type?b[d.type]:d}))}function zs(f){const u=f.value,d=f.key,b=cc(f);return b.length||(u.indexOf("{fontstack}")===-1&&b.push(new nn(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&b.push(new nn(d,u,'"glyphs" url must include a "{range}" token'))),b}function Ta(f,u=gt){let d=[];return d=d.concat(ls({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:ls,objectElementValidators:{glyphs:zs,"*":()=>[]}})),f.constants&&(d=d.concat(pu({key:"constants",value:f.constants}))),Ym(d)}function Gl(f){return function(u){return f(Object.assign({},u,{validateSpec:ls}))}}function Ym(f){return[].concat(f).sort(((u,d)=>u.line-d.line))}function Wl(f){return function(...u){return Ym(f.apply(this,u))}}Ta.source=Wl(Gl(Vh)),Ta.sprite=Wl(Gl(E1)),Ta.glyphs=Wl(Gl(zs)),Ta.light=Wl(Gl(al)),Ta.sky=Wl(Gl(Ac)),Ta.terrain=Wl(Gl(g0)),Ta.state=Wl(Gl(O1)),Ta.layer=Wl(Gl(kp)),Ta.filter=Wl(Gl(hr)),Ta.paintProperty=Wl(Gl(sA)),Ta.layoutProperty=Wl(Gl(OA));const mu=Ta,Hh=mu.light,$m=mu.sky,mv=mu.paintProperty,Tu=mu.layoutProperty;function Zh(f,u){let d=!1;if(u&&u.length)for(const b of u)f.fire(new pt(new Error(b.message))),d=!0;return d}class aA{constructor(u,d,b){const M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const P=new Int32Array(this.arrayBuffer);u=P[0],this.d=(d=P[1])+2*(b=P[2]);for(let G=0;G<this.d*this.d;G++){const ee=P[3+G],ie=P[3+G+1];M.push(ee===ie?null:P.subarray(ee,ie))}const K=P[3+M.length+1];this.keys=P.subarray(P[3+M.length],K),this.bboxes=P.subarray(K),this.insert=this._insertReadonly}else{this.d=d+2*b;for(let P=0;P<this.d*this.d;P++)M.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=b,this.scale=d/u,this.uid=0;const k=b/d*u;this.min=-k,this.max=u+k}insert(u,d,b,M,k){this._forEachCell(d,b,M,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,b,M,k,P){this.cells[k].push(P)}query(u,d,b,M,k){const P=this.min,K=this.max;if(u<=P&&d<=P&&K<=b&&K<=M&&!k)return Array.prototype.slice.call(this.keys);{const G=[];return this._forEachCell(u,d,b,M,this._queryCell,G,{},k),G}}_queryCell(u,d,b,M,k,P,K,G){const ee=this.cells[k];if(ee!==null){const ie=this.keys,ce=this.bboxes;for(let Be=0;Be<ee.length;Be++){const Pe=ee[Be];if(K[Pe]===void 0){const Le=4*Pe;(G?G(ce[Le+0],ce[Le+1],ce[Le+2],ce[Le+3]):u<=ce[Le+2]&&d<=ce[Le+3]&&b>=ce[Le+0]&&M>=ce[Le+1])?(K[Pe]=!0,P.push(ie[Pe])):K[Pe]=!1}}}}_forEachCell(u,d,b,M,k,P,K,G){const ee=this._convertToCellCoord(u),ie=this._convertToCellCoord(d),ce=this._convertToCellCoord(b),Be=this._convertToCellCoord(M);for(let Pe=ee;Pe<=ce;Pe++)for(let Le=ie;Le<=Be;Le++){const Ne=this.d*Le+Pe;if((!G||G(this._convertFromCellCoord(Pe),this._convertFromCellCoord(Le),this._convertFromCellCoord(Pe+1),this._convertFromCellCoord(Le+1)))&&k.call(this,u,d,b,M,Ne,P,K,G))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let b=0;for(let P=0;P<this.cells.length;P++)b+=this.cells[P].length;const M=new Int32Array(d+b+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let k=d;for(let P=0;P<u.length;P++){const K=u[P];M[3+P]=k,M.set(K,k),k+=K.length}return M[3+u.length]=k,M.set(this.keys,k),k+=this.keys.length,M[3+u.length+1]=k,M.set(this.bboxes,k),k+=this.bboxes.length,M.buffer}static serialize(u,d){const b=u.toArrayBuffer();return d&&d.push(b),{buffer:b}}static deserialize(u){return new aA(u.buffer)}}const Rc={};function Jn(f,u,d={}){if(Rc[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Rc[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}Jn("Object",Object),Jn("Set",Set),Jn("TransferableGridIndex",aA),Jn("Color",Gi),Jn("Error",Error),Jn("AJAXError",Ye),Jn("ResolvedImage",ss),Jn("StylePropertyFunction",ms),Jn("StyleExpression",Wh,{omit:["_evaluator"]}),Jn("ZoomDependentExpression",qh),Jn("ZoomConstantExpression",jl),Jn("CompoundExpression",Rr,{omit:["_evaluate"]});for(const f in eh)eh[f]._classRegistryKey||Jn(`Expression_${f}`,eh[f]);function jd(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function BA(f){return f.$name||f.constructor._classRegistryKey}function Lf(f){return!(function(u){if(u===null||typeof u!="object")return!1;const d=BA(u);return!(!d||d==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||jd(f)||zn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Xh(f,u){if(Lf(f))return(jd(f)||zn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const k=[];for(const P of f)k.push(Xh(P,u));return k}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=BA(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Rc[d])throw new Error(`${d} is not registered.`);const{klass:b}=Rc[d],M=b.serialize?b.serialize(f,u):{};if(b.serialize){if(u&&M===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in f){if(!f.hasOwnProperty(k)||Rc[d].omit.indexOf(k)>=0)continue;const P=f[k];M[k]=Rc[d].shallow.indexOf(k)>=0?P:Xh(P,u)}f instanceof Error&&(M.message=f.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(M.$name=d),M}function sh(f){if(Lf(f))return f;if(Array.isArray(f))return f.map(sh);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=BA(f)||"Object";if(!Rc[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=Rc[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const b=Object.create(d.prototype);for(const M of Object.keys(f)){if(M==="$name")continue;const k=f[M];b[M]=Rc[u].shallow.indexOf(M)>=0?k:sh(k)}return b}class Kf{constructor(){this.first=!0}update(u,d){const b=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=b,!0))}}const nr={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function gu(f){for(const u of f)if(Du(u.charCodeAt(0)))return!0;return!1}function y0(f){for(const u of f)if(!Ru(u.charCodeAt(0)))return!1;return!0}function Ff(f){const u=f.map((d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}})).filter((d=>d));return new RegExp(u.join("|"),"u")}const Nd=Ff(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ru(f){return!Nd.test(String.fromCodePoint(f))}const ah=Ff(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Du(f){return!(f!==746&&f!==747&&(f<4352||!(nr["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||nr["CJK Compatibility"](f)||nr["CJK Strokes"](f)||!(!nr["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||nr["Enclosed CJK Letters and Months"](f)||nr["Ideographic Description Characters"](f)||nr.Kanbun(f)||nr.Katakana(f)&&f!==12540||!(!nr["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!nr["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||nr["Vertical Forms"](f)||nr["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||ah.test(String.fromCodePoint(f)))))}function Ql(f){return!(Du(f)||(function(u){return!!(nr["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||nr["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||nr["Letterlike Symbols"](u)||nr["Number Forms"](u)||nr["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||nr["Control Pictures"](u)&&u!==9251||nr["Optical Character Recognition"](u)||nr["Enclosed Alphanumerics"](u)||nr["Geometric Shapes"](u)||nr["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||nr["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||nr["CJK Symbols and Punctuation"](u)||nr.Katakana(u)||nr["Private Use Area"](u)||nr["CJK Compatibility Forms"](u)||nr["Small Form Variants"](u)||nr["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const v0=Ff(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lh(f){return v0.test(String.fromCodePoint(f))}function Vm(f,u){return!(!u&&lh(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||nr.Khmer(f))}function Dc(f){for(const u of f)if(lh(u.charCodeAt(0)))return!0;return!1}const ll=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(ll.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,b=new Promise((k=>{this.loadScriptResolve=k}));u(d);const M=new Promise((k=>setTimeout((()=>k()),this.TIMEOUT)));if(yield Promise.race([b,M]),this.isParsed()){const k={pluginStatus:"loaded",pluginURL:d};return this.setState(k),k}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)}))}};class wo{constructor(u,d){this.isSupportedScript=Jh,this.zoom=u,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new Kf,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Kf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),b=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*d}}}function Jh(f){return(function(u,d){for(const b of u)if(!Vm(b.charCodeAt(0),d))return!1;return!0})(f,ll.getRTLTextPluginStatus()==="loaded")}class Pu{constructor(u,d,b){this.property=u,this.value=d,this.expression=(function(M,k,P){if(Fd(M))return new ms(M,k);if(Qh(M)){const K=zd(M,k,P);if(K.result==="error")throw new Error(K.value.map((G=>`${G.key}: ${G.message}`)).join(", "));return K.value}{let K=M;return k.type==="color"&&typeof M=="string"?K=Gi.parse(M):k.type!=="padding"||typeof M!="number"&&!Array.isArray(M)?k.type!=="numberArray"||typeof M!="number"&&!Array.isArray(M)?k.type!=="colorArray"||typeof M!="string"&&!Array.isArray(M)?k.type==="variableAnchorOffsetCollection"&&Array.isArray(M)?K=mo.parse(M):k.type==="projectionDefinition"&&typeof M=="string"&&(K=ao.parse(M)):K=Mo.parse(M):K=ws.parse(M):K=so.parse(M),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>K}}})(d===void 0?u.specification.default:d,u.specification,b)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,d,b){return this.property.possiblyEvaluate(this,u,d,b)}}class ed{constructor(u,d){this.property=u,this.value=new Pu(u,void 0,d)}transitioned(u,d){return new ma(this.property,this.value,d,Ke({},u.transition,this.transition),u.now)}untransitioned(){return new ma(this.property,this.value,null,{},0)}}class zf{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues),this._globalState=d}getValue(u){return st(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new ed(this._values[u].property,this._globalState)),this._values[u].value=new Pu(this._values[u].property,d===null?void 0:st(d),this._globalState)}getTransition(u){return st(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new ed(this._values[u].property,this._globalState)),this._values[u].transition=st(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b);const M=this.getTransition(d);M!==void 0&&(u[`${d}-transition`]=M)}return u}transitioned(u,d){const b=new uh(this._properties);for(const M of Object.keys(this._values))b._values[M]=this._values[M].transitioned(u,d._values[M]);return b}untransitioned(){const u=new uh(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class ma{constructor(u,d,b,M,k){this.property=u,this.value=d,this.begin=k+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=b)}possiblyEvaluate(u,d,b){const M=u.now||0,k=this.value.possiblyEvaluate(u,d,b),P=this.prior;if(P){if(M>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(M<this.begin)return P.possiblyEvaluate(u,d,b);{const K=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(u,d,b),k,we(K))}}return k}}class uh{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,b){const M=new Ah(this._properties);for(const k of Object.keys(this._values))M._values[k]=this._values[k].possiblyEvaluate(u,d,b);return M}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class ch{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState=d}hasValue(u){return this._values[u].value!==void 0}getValue(u){return st(this._values[u].value)}setValue(u,d){this._values[u]=new Pu(this._values[u].property,d===null?void 0:st(d),this._globalState)}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b)}return u}possiblyEvaluate(u,d,b){const M=new Ah(this._properties);for(const k of Object.keys(this._values))M._values[k]=this._values[k].possiblyEvaluate(u,d,b);return M}}class Ra{constructor(u,d,b){this.property=u,this.value=d,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,b,M){return this.property.evaluate(this.value,this.parameters,u,d,b,M)}}class Ah{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class ri{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,b){const M=ta[this.specification.type];return M?M(u,d,b):u}}class _i{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,b,M){return new Ra(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},b,M)}:u.expression,d)}interpolate(u,d,b){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new Ra(this,{kind:"constant",value:void 0},u.parameters);const M=ta[this.specification.type];if(M){const k=M(u.value.value,d.value.value,b);return new Ra(this,{kind:"constant",value:k},u.parameters)}return u}evaluate(u,d,b,M,k,P){return u.kind==="constant"?u.value:u.evaluate(d,b,M,k,P)}}class td extends _i{possiblyEvaluate(u,d,b,M){if(u.value===void 0)return new Ra(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const k=u.expression.evaluate(d,null,{},b,M),P=u.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,K=this._calculate(P,P,P,d);return new Ra(this,{kind:"constant",value:K},d)}if(u.expression.kind==="camera"){const k=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new Ra(this,{kind:"constant",value:k},d)}return new Ra(this,u.expression,d)}evaluate(u,d,b,M,k,P){if(u.kind==="source"){const K=u.evaluate(d,b,M,k,P);return this._calculate(K,K,K,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},b,M),u.evaluate({zoom:Math.floor(d.zoom)},b,M),u.evaluate({zoom:Math.floor(d.zoom)+1},b,M),d):u.value}_calculate(u,d,b,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class qa{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,M){if(u.value!==void 0){if(u.expression.kind==="constant"){const k=u.expression.evaluate(d,null,{},b,M);return this._calculate(k,k,k,d)}return this._calculate(u.expression.evaluate(new wo(Math.floor(d.zoom-1),d)),u.expression.evaluate(new wo(Math.floor(d.zoom),d)),u.expression.evaluate(new wo(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,b,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class hh{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,M){return!!u.expression.evaluate(d,null,{},b,M)}interpolate(){return!1}}class us{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const b=u[d];b.specification.overridable&&this.overridableProperties.push(d);const M=this.defaultPropertyValues[d]=new Pu(b,void 0,void 0),k=this.defaultTransitionablePropertyValues[d]=new ed(b,void 0);this.defaultTransitioningPropertyValues[d]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=M.possiblyEvaluate({})}}}Jn("DataDrivenProperty",_i),Jn("DataConstantProperty",ri),Jn("CrossFadedDataDrivenProperty",td),Jn("CrossFadedProperty",qa),Jn("ColorRampProperty",hh);const hc="-transition";class ul extends Ht{constructor(u,d,b){if(super(),this.id=u.id,this.type=u.type,this._globalState=b,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=_l(u.filter,b)),d.layout&&(this._unevaluatedLayout=new ch(d.layout,b)),d.paint)){this._transitionablePaint=new zf(d.paint,b);for(const M in u.paint)this.setPaintProperty(M,u.paint[M],{validate:!1});for(const M in u.layout)this.setLayoutProperty(M,u.layout[M],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ah(d.paint)}}setFilter(u){this.filter=u,this._featureFilter=_l(u,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const b=this._unevaluatedLayout._values[d];for(const M of b.getGlobalStateRefs())u.add(M)}for(const d of this._featureFilter.getGlobalStateRefs())u.add(d);return u}getPaintAffectingGlobalStateRefs(){var u;const d=new globalThis.Map;if(this._transitionablePaint)for(const b in this._transitionablePaint._values){const M=this._transitionablePaint._values[b].value;for(const k of M.getGlobalStateRefs()){const P=(u=d.get(k))!==null&&u!==void 0?u:[];P.push({name:b,value:M.value}),d.set(k,P)}}return d}setLayoutProperty(u,d,b={}){d!=null&&this._validate(Tu,`layers.${this.id}.layout.${u}`,u,d,b)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(hc)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,b={}){if(d!=null&&this._validate(mv,`layers.${this.id}.paint.${u}`,u,d,b))return!1;if(u.endsWith(hc))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const M=this._transitionablePaint._values[u],k=M.property.specification["property-type"]==="cross-faded-data-driven",P=M.value.isDataDriven(),K=M.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const G=this._transitionablePaint._values[u].value;return G.isDataDriven()||P||k||this._handleOverridablePaintPropertyUpdate(u,K,G)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,b){return!1}isHidden(u,d=!1){return!!(this.minzoom&&u<(d?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ge(u,((d,b)=>!(d===void 0||b==="layout"&&!Object.keys(d).length||b==="paint"&&!Object.keys(d).length)))}_validate(u,d,b,M,k={}){return(!k||k.validate!==!1)&&Zh(this,u.call(mu,{key:d,layerType:this.type,objectKey:b,value:M,styleSpec:gt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof Ra&&du(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}let jf;var B1={get paint(){return jf=jf||new us({"raster-opacity":new ri(gt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ri(gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ri(gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ri(gt.paint_raster["raster-brightness-max"]),"raster-saturation":new ri(gt.paint_raster["raster-saturation"]),"raster-contrast":new ri(gt.paint_raster["raster-contrast"]),"raster-resampling":new ri(gt.paint_raster["raster-resampling"]),"raster-fade-duration":new ri(gt.paint_raster["raster-fade-duration"])})}};class xl extends ul{constructor(u,d){super(u,B1,d)}}const Uu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bs{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class cs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function co(f,u=1){let d=0,b=0;return{members:f.map((M=>{const k=Uu[M.type].BYTES_PER_ELEMENT,P=d=Sr(d,Math.max(u,k)),K=M.components||1;return b=Math.max(b,k),d+=k*K,{name:M.name,type:M.type,components:K,offset:P}})),size:Sr(d,Math.max(b,u)),alignment:u}}function Sr(f,u){return Math.ceil(f/u)*u}class So extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.int16[M+0]=d,this.int16[M+1]=b,u}}So.prototype.bytesPerElement=4,Jn("StructArrayLayout2i4",So);class Ro extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.int16[k+0]=d,this.int16[k+1]=b,this.int16[k+2]=M,u}}Ro.prototype.bytesPerElement=6,Jn("StructArrayLayout3i6",Ro);class nd extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M){const k=this.length;return this.resize(k+1),this.emplace(k,u,d,b,M)}emplace(u,d,b,M,k){const P=4*u;return this.int16[P+0]=d,this.int16[P+1]=b,this.int16[P+2]=M,this.int16[P+3]=k,u}}nd.prototype.bytesPerElement=8,Jn("StructArrayLayout4i8",nd);class IA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,P)}emplace(u,d,b,M,k,P,K){const G=6*u;return this.int16[G+0]=d,this.int16[G+1]=b,this.int16[G+2]=M,this.int16[G+3]=k,this.int16[G+4]=P,this.int16[G+5]=K,u}}IA.prototype.bytesPerElement=12,Jn("StructArrayLayout2i4i12",IA);class kA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,P)}emplace(u,d,b,M,k,P,K){const G=4*u,ee=8*u;return this.int16[G+0]=d,this.int16[G+1]=b,this.uint8[ee+4]=M,this.uint8[ee+5]=k,this.uint8[ee+6]=P,this.uint8[ee+7]=K,u}}kA.prototype.bytesPerElement=8,Jn("StructArrayLayout2i4ub8",kA);class TA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.float32[M+0]=d,this.float32[M+1]=b,u}}TA.prototype.bytesPerElement=8,Jn("StructArrayLayout2f8",TA);class id extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P,K,G,ee,ie){const ce=this.length;return this.resize(ce+1),this.emplace(ce,u,d,b,M,k,P,K,G,ee,ie)}emplace(u,d,b,M,k,P,K,G,ee,ie,ce){const Be=10*u;return this.uint16[Be+0]=d,this.uint16[Be+1]=b,this.uint16[Be+2]=M,this.uint16[Be+3]=k,this.uint16[Be+4]=P,this.uint16[Be+5]=K,this.uint16[Be+6]=G,this.uint16[Be+7]=ee,this.uint16[Be+8]=ie,this.uint16[Be+9]=ce,u}}id.prototype.bytesPerElement=20,Jn("StructArrayLayout10ui20",id);class dc extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P,K,G){const ee=this.length;return this.resize(ee+1),this.emplace(ee,u,d,b,M,k,P,K,G)}emplace(u,d,b,M,k,P,K,G,ee){const ie=8*u;return this.uint16[ie+0]=d,this.uint16[ie+1]=b,this.uint16[ie+2]=M,this.uint16[ie+3]=k,this.uint16[ie+4]=P,this.uint16[ie+5]=K,this.uint16[ie+6]=G,this.uint16[ie+7]=ee,u}}dc.prototype.bytesPerElement=16,Jn("StructArrayLayout8ui16",dc);class Gd extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P,K,G,ee,ie,ce,Be){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,u,d,b,M,k,P,K,G,ee,ie,ce,Be)}emplace(u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe){const Le=12*u;return this.int16[Le+0]=d,this.int16[Le+1]=b,this.int16[Le+2]=M,this.int16[Le+3]=k,this.uint16[Le+4]=P,this.uint16[Le+5]=K,this.uint16[Le+6]=G,this.uint16[Le+7]=ee,this.int16[Le+8]=ie,this.int16[Le+9]=ce,this.int16[Le+10]=Be,this.int16[Le+11]=Pe,u}}Gd.prototype.bytesPerElement=24,Jn("StructArrayLayout4i4ui4i24",Gd);class gs extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.float32[k+0]=d,this.float32[k+1]=b,this.float32[k+2]=M,u}}gs.prototype.bytesPerElement=12,Jn("StructArrayLayout3f12",gs);class Wd extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}Wd.prototype.bytesPerElement=4,Jn("StructArrayLayout1ul4",Wd);class RA extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P,K,G,ee){const ie=this.length;return this.resize(ie+1),this.emplace(ie,u,d,b,M,k,P,K,G,ee)}emplace(u,d,b,M,k,P,K,G,ee,ie){const ce=10*u,Be=5*u;return this.int16[ce+0]=d,this.int16[ce+1]=b,this.int16[ce+2]=M,this.int16[ce+3]=k,this.int16[ce+4]=P,this.int16[ce+5]=K,this.uint32[Be+3]=G,this.uint16[ce+8]=ee,this.uint16[ce+9]=ie,u}}RA.prototype.bytesPerElement=20,Jn("StructArrayLayout6i1ul2ui20",RA);class Tp extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,P)}emplace(u,d,b,M,k,P,K){const G=6*u;return this.int16[G+0]=d,this.int16[G+1]=b,this.int16[G+2]=M,this.int16[G+3]=k,this.int16[G+4]=P,this.int16[G+5]=K,u}}Tp.prototype.bytesPerElement=12,Jn("StructArrayLayout2i2i2i12",Tp);class Qd extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k){const P=this.length;return this.resize(P+1),this.emplace(P,u,d,b,M,k)}emplace(u,d,b,M,k,P){const K=4*u,G=8*u;return this.float32[K+0]=d,this.float32[K+1]=b,this.float32[K+2]=M,this.int16[G+6]=k,this.int16[G+7]=P,u}}Qd.prototype.bytesPerElement=16,Jn("StructArrayLayout2f1f2i16",Qd);class Hm extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,P)}emplace(u,d,b,M,k,P,K){const G=16*u,ee=4*u,ie=8*u;return this.uint8[G+0]=d,this.uint8[G+1]=b,this.float32[ee+1]=M,this.float32[ee+2]=k,this.int16[ie+6]=P,this.int16[ie+7]=K,u}}Hm.prototype.bytesPerElement=16,Jn("StructArrayLayout2ub2f2i16",Hm);class qd extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.uint16[k+0]=d,this.uint16[k+1]=b,this.uint16[k+2]=M,u}}qd.prototype.bytesPerElement=6,Jn("StructArrayLayout3ui6",qd);class O extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot)}emplace(u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot,Dt){const dt=24*u,xt=12*u,Nt=48*u;return this.int16[dt+0]=d,this.int16[dt+1]=b,this.uint16[dt+2]=M,this.uint16[dt+3]=k,this.uint32[xt+2]=P,this.uint32[xt+3]=K,this.uint32[xt+4]=G,this.uint16[dt+10]=ee,this.uint16[dt+11]=ie,this.uint16[dt+12]=ce,this.float32[xt+7]=Be,this.float32[xt+8]=Pe,this.uint8[Nt+36]=Le,this.uint8[Nt+37]=Ne,this.uint8[Nt+38]=Ze,this.uint32[xt+10]=ot,this.int16[dt+22]=Dt,u}}O.prototype.bytesPerElement=48,Jn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",O);class l extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot,Dt,dt,xt,Nt,Xt,mn,Qn,Kn,Gn,xi,Nn){const Wn=this.length;return this.resize(Wn+1),this.emplace(Wn,u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot,Dt,dt,xt,Nt,Xt,mn,Qn,Kn,Gn,xi,Nn)}emplace(u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot,Dt,dt,xt,Nt,Xt,mn,Qn,Kn,Gn,xi,Nn,Wn){const an=32*u,ji=16*u;return this.int16[an+0]=d,this.int16[an+1]=b,this.int16[an+2]=M,this.int16[an+3]=k,this.int16[an+4]=P,this.int16[an+5]=K,this.int16[an+6]=G,this.int16[an+7]=ee,this.uint16[an+8]=ie,this.uint16[an+9]=ce,this.uint16[an+10]=Be,this.uint16[an+11]=Pe,this.uint16[an+12]=Le,this.uint16[an+13]=Ne,this.uint16[an+14]=Ze,this.uint16[an+15]=ot,this.uint16[an+16]=Dt,this.uint16[an+17]=dt,this.uint16[an+18]=xt,this.uint16[an+19]=Nt,this.uint16[an+20]=Xt,this.uint16[an+21]=mn,this.uint16[an+22]=Qn,this.uint32[ji+12]=Kn,this.float32[ji+13]=Gn,this.float32[ji+14]=xi,this.uint16[an+30]=Nn,this.uint16[an+31]=Wn,u}}l.prototype.bytesPerElement=64,Jn("StructArrayLayout8i15ui1ul2f2ui64",l);class p extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}p.prototype.bytesPerElement=4,Jn("StructArrayLayout1f4",p);class C extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.uint16[6*u+0]=d,this.float32[k+1]=b,this.float32[k+2]=M,u}}C.prototype.bytesPerElement=12,Jn("StructArrayLayout1ui2f12",C);class E extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=4*u;return this.uint32[2*u+0]=d,this.uint16[k+2]=b,this.uint16[k+3]=M,u}}E.prototype.bytesPerElement=8,Jn("StructArrayLayout1ul2ui8",E);class T extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.uint16[M+0]=d,this.uint16[M+1]=b,u}}T.prototype.bytesPerElement=4,Jn("StructArrayLayout2ui4",T);class U extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}U.prototype.bytesPerElement=2,Jn("StructArrayLayout1ui2",U);class q extends cs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M){const k=this.length;return this.resize(k+1),this.emplace(k,u,d,b,M)}emplace(u,d,b,M,k){const P=4*u;return this.float32[P+0]=d,this.float32[P+1]=b,this.float32[P+2]=M,this.float32[P+3]=k,u}}q.prototype.bytesPerElement=16,Jn("StructArrayLayout4f16",q);class Z extends Bs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}Z.prototype.size=20;class re extends RA{get(u){return new Z(this,u)}}Jn("CollisionBoxArray",re);class ue extends Bs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ue.prototype.size=48;class Ce extends O{get(u){return new ue(this,u)}}Jn("PlacedSymbolArray",Ce);class ge extends Bs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ge.prototype.size=64;class Ue extends l{get(u){return new ge(this,u)}}Jn("SymbolInstanceArray",Ue);class We extends p{getoffsetX(u){return this.float32[1*u+0]}}Jn("GlyphOffsetArray",We);class Je extends Ro{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Jn("SymbolLineVertexArray",Je);class He extends Bs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}He.prototype.size=12;class tt extends C{get(u){return new He(this,u)}}Jn("TextAnchorOffsetArray",tt);class at extends Bs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}at.prototype.size=8;class yt extends E{get(u){return new at(this,u)}}Jn("FeatureIndexArray",yt);class lt extends So{}class vt extends So{}class bt extends So{}class ct extends IA{}class Ot extends kA{}class Qt extends TA{}class Kt extends id{}class jt extends dc{}class Wt extends Gd{}class kn extends gs{}class Tn extends Wd{}class ln extends Tp{}class Xn extends Hm{}class Hi extends qd{}class Er extends T{}const zo=co([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wo}=zo;class dr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,b,M){const k=this.segments[this.segments.length-1];return u>dr.MAX_VERTEX_ARRAY_LENGTH&&ft(`Max vertices per segment is ${dr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${dr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!k||k.vertexLength+u>dr.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==M?this.createNewSegment(d,b,M):k}createNewSegment(u,d,b){const M={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return b!==void 0&&(M.sortKey=b),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(u,d,b){return this.prepareSegment(0,u,d,b)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,b,M){return new dr([{vertexOffset:u,primitiveOffset:d,vertexLength:b,primitiveLength:M,vaos:{},sortKey:0}])}}function Jo(f,u){return 256*(f=Ct(Math.floor(f),0,255))+Ct(Math.floor(u),0,255)}dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jn("SegmentVector",dr);const Da=co([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Is=co([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Pa,js,ia,ga={exports:{}},DA={exports:{}},ra={exports:{}},cl=(function(){if(ia)return ga.exports;ia=1;var f=(Pa||(Pa=1,DA.exports=function(d,b){var M,k,P,K,G,ee,ie,ce;for(k=d.length-(M=3&d.length),P=b,G=3432918353,ee=461845907,ce=0;ce<k;)ie=255&d.charCodeAt(ce)|(255&d.charCodeAt(++ce))<<8|(255&d.charCodeAt(++ce))<<16|(255&d.charCodeAt(++ce))<<24,++ce,P=27492+(65535&(K=5*(65535&(P=(P^=ie=(65535&(ie=(ie=(65535&ie)*G+(((ie>>>16)*G&65535)<<16)&4294967295)<<15|ie>>>17))*ee+(((ie>>>16)*ee&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(K>>>16)&65535)<<16);switch(ie=0,M){case 3:ie^=(255&d.charCodeAt(ce+2))<<16;case 2:ie^=(255&d.charCodeAt(ce+1))<<8;case 1:P^=ie=(65535&(ie=(ie=(65535&(ie^=255&d.charCodeAt(ce)))*G+(((ie>>>16)*G&65535)<<16)&4294967295)<<15|ie>>>17))*ee+(((ie>>>16)*ee&65535)<<16)&4294967295}return P^=d.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}),DA.exports),u=(js||(js=1,ra.exports=function(d,b){for(var M,k=d.length,P=b^k,K=0;k>=4;)M=1540483477*(65535&(M=255&d.charCodeAt(K)|(255&d.charCodeAt(++K))<<8|(255&d.charCodeAt(++K))<<16|(255&d.charCodeAt(++K))<<24))+((1540483477*(M>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),k-=4,++K;switch(k){case 3:P^=(255&d.charCodeAt(K+2))<<16;case 2:P^=(255&d.charCodeAt(K+1))<<8;case 1:P=1540483477*(65535&(P^=255&d.charCodeAt(K)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}),ra.exports);return ga.exports=f,ga.exports.murmur3=f,ga.exports.murmur2=u,ga.exports})(),dh=h(cl);class rd{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,b,M){this.ids.push(od(u)),this.positions.push(d,b,M)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=od(u);let b=0,M=this.ids.length-1;for(;b<M;){const P=b+M>>1;this.ids[P]>=d?M=P:b=P+1}const k=[];for(;this.ids[b]===d;)k.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return k}static serialize(u,d){const b=new Float64Array(u.ids),M=new Uint32Array(u.positions);return yu(b,M,0,b.length-1),d&&d.push(b.buffer,M.buffer),{ids:b,positions:M}}static deserialize(u){const d=new rd;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function od(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:dh(String(f))}function yu(f,u,d,b){for(;d<b;){const M=f[d+b>>1];let k=d-1,P=b+1;for(;;){do k++;while(f[k]<M);do P--;while(f[P]>M);if(k>=P)break;Ml(f,k,P),Ml(u,3*k,3*P),Ml(u,3*k+1,3*P+1),Ml(u,3*k+2,3*P+2)}P-d<b-P?(yu(f,u,d,P),d=P+1):(yu(f,u,P+1,b),b=P)}}function Ml(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}Jn("FeaturePositionMap",rd);class Al{constructor(u,d){this.gl=u.gl,this.location=d}}class Pc extends Al{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class sd extends Al{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class ys extends Al{constructor(u,d){super(u,d),this.current=Gi.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const oa=new Float32Array(16);function Lu(f){return[Jo(255*f.r,255*f.g),Jo(255*f.b,255*f.a)]}class Ns{constructor(u,d,b){this.value=u,this.uniformNames=d.map((M=>`u_${M}`)),this.type=b}setUniform(u,d,b){u.set(b.constantOr(this.value))}getBinding(u,d,b){return this.type==="color"?new ys(u,d):new Pc(u,d)}}class Uc{constructor(u,d){this.uniformNames=d.map((b=>`u_${b}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setConstantDashPositions(u,d){this.dashTo=[0,u.y,u.height,u.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(u,d,b,M){let k=null;M==="u_pattern_to"?k=this.patternTo:M==="u_pattern_from"?k=this.patternFrom:M==="u_dasharray_to"?k=this.dashTo:M==="u_dasharray_from"?k=this.dashFrom:M==="u_pixel_ratio_to"?k=this.pixelRatioTo:M==="u_pixel_ratio_from"&&(k=this.pixelRatioFrom),k!==null&&u.set(k)}getBinding(u,d,b){return b.substr(0,9)==="u_pattern"||b.substr(0,12)==="u_dasharray_"?new sd(u,d):new Pc(u,d)}}class Ku{constructor(u,d,b,M){this.expression=u,this.type=b,this.maxValue=0,this.paintVertexAttributes=d.map((k=>({name:`a_${k}`,type:"Float32",components:b==="color"?2:1,offset:0}))),this.paintVertexArray=new M}populatePaintArray(u,d,b){const M=this.paintVertexArray.length,k=this.expression.evaluate(new wo(0,b),d,{},b.canonical,[],b.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(M,u,k)}updatePaintArray(u,d,b,M,k){const P=this.expression.evaluate(new wo(0,k),b,M);this._setPaintValue(u,d,P)}_setPaintValue(u,d,b){if(this.type==="color"){const M=Lu(b);for(let k=u;k<d;k++)this.paintVertexArray.emplace(k,M[0],M[1])}else{for(let M=u;M<d;M++)this.paintVertexArray.emplace(M,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vu{constructor(u,d,b,M,k,P){this.expression=u,this.uniformNames=d.map((K=>`u_${K}_t`)),this.type=b,this.useIntegerZoom=M,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=d.map((K=>({name:`a_${K}`,type:"Float32",components:b==="color"?4:2,offset:0}))),this.paintVertexArray=new P}populatePaintArray(u,d,b){const M=this.expression.evaluate(new wo(this.zoom,b),d,{},b.canonical,[],b.formattedSection),k=this.expression.evaluate(new wo(this.zoom+1,b),d,{},b.canonical,[],b.formattedSection),P=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(P,u,M,k)}updatePaintArray(u,d,b,M,k){const P=this.expression.evaluate(new wo(this.zoom,k),b,M),K=this.expression.evaluate(new wo(this.zoom+1,k),b,M);this._setPaintValue(u,d,P,K)}_setPaintValue(u,d,b,M){if(this.type==="color"){const k=Lu(b),P=Lu(M);for(let K=u;K<d;K++)this.paintVertexArray.emplace(K,k[0],k[1],P[0],P[1])}else{for(let k=u;k<d;k++)this.paintVertexArray.emplace(k,b,M);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(M))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,M=Ct(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);u.set(M)}getBinding(u,d,b){return new Pc(u,d)}}class Lc{constructor(u,d,b,M,k,P){this.expression=u,this.type=d,this.useIntegerZoom=b,this.zoom=M,this.layerId=P,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(u,d,b){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,this.getPositionIds(d),b)}updatePaintArray(u,d,b,M,k){this._setPaintValues(u,d,this.getPositionIds(b),k)}_setPaintValues(u,d,b,M){const k=this.getPositions(M);if(!k||!b)return;const P=k[b.min],K=k[b.mid],G=k[b.max];if(P&&K&&G)for(let ee=u;ee<d;ee++)this.emplace(this.zoomInPaintVertexArray,ee,K,P),this.emplace(this.zoomOutPaintVertexArray,ee,K,G)}upload(u){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Rp extends Lc{getPositions(u){return u.imagePositions}getPositionIds(u){return u.patterns&&u.patterns[this.layerId]}getVertexAttributes(){return Da.members}emplace(u,d,b,M){u.emplace(d,b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],M.tlbr[0],M.tlbr[1],M.tlbr[2],M.tlbr[3],b.pixelRatio,M.pixelRatio)}}class fh extends Lc{getPositions(u){return u.dashPositions}getPositionIds(u){return u.dashes&&u.dashes[this.layerId]}getVertexAttributes(){return Is.members}emplace(u,d,b,M){u.emplace(d,0,b.y,b.height,b.width,0,M.y,M.height,M.width)}}class ph{constructor(u,d,b){this.binders={},this._buffers=[];const M=[];for(const k in u.paint._values){if(!b(k))continue;const P=u.paint.get(k);if(!(P instanceof Ra&&du(P.property.specification)))continue;const K=Nf(k,u.type),G=P.value,ee=P.property.specification.type,ie=P.property.useIntegerZoom,ce=P.property.specification["property-type"],Be=ce==="cross-faded"||ce==="cross-faded-data-driven";if(G.kind==="constant")this.binders[k]=Be?new Uc(G.value,K):new Ns(G.value,K,ee),M.push(`/u_${k}`);else if(G.kind==="source"||Be){const Pe=Gf(k,ee,"source");this.binders[k]=Be?k==="line-dasharray"?new fh(G,ee,ie,d,Pe,u.id):new Rp(G,ee,ie,d,Pe,u.id):new Ku(G,K,ee,Pe),M.push(`/a_${k}`)}else{const Pe=Gf(k,ee,"composite");this.binders[k]=new vu(G,K,ee,ie,d,Pe),M.push(`/z_${k}`)}}this.cacheKey=M.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof Ku||d instanceof vu?d.maxValue:0}populatePaintArrays(u,d,b){for(const M in this.binders){const k=this.binders[M];(k instanceof Ku||k instanceof vu||k instanceof Lc)&&k.populatePaintArray(u,d,b)}}setConstantPatternPositions(u,d){for(const b in this.binders){const M=this.binders[b];M instanceof Uc&&M.setConstantPatternPositions(u,d)}}setConstantDashPositions(u,d){for(const b in this.binders){const M=this.binders[b];M instanceof Uc&&M.setConstantDashPositions(u,d)}}updatePaintArrays(u,d,b,M,k){let P=!1;for(const K in u){const G=d.getPositions(K);for(const ee of G){const ie=b.feature(ee.index);for(const ce in this.binders){const Be=this.binders[ce];if((Be instanceof Ku||Be instanceof vu||Be instanceof Lc)&&Be.expression.isStateDependent===!0){const Pe=M.paint.get(ce);Be.expression=Pe.value,Be.updatePaintArray(ee.start,ee.end,ie,u[K],k),P=!0}}}}return P}defines(){const u=[];for(const d in this.binders){const b=this.binders[d];(b instanceof Ns||b instanceof Uc)&&u.push(...b.uniformNames.map((M=>`#define HAS_UNIFORM_${M}`)))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Ku||b instanceof vu)for(let M=0;M<b.paintVertexAttributes.length;M++)u.push(b.paintVertexAttributes[M].name);else if(b instanceof Lc){const M=b.getVertexAttributes();for(const k of M)u.push(k.name)}}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Ns||b instanceof Uc||b instanceof vu)for(const M of b.uniformNames)u.push(M)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const b=[];for(const M in this.binders){const k=this.binders[M];if(k instanceof Ns||k instanceof Uc||k instanceof vu){for(const P of k.uniformNames)if(d[P]){const K=k.getBinding(u,d[P],P);b.push({name:P,property:M,binding:K})}}}return b}setUniforms(u,d,b,M){for(const{name:k,property:P,binding:K}of d)this.binders[P].setUniform(K,M,b.get(P),k)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const b=this.binders[d];if(u&&b instanceof Lc){const M=u.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(b instanceof Ku||b instanceof vu)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(u){for(const d in this.binders){const b=this.binders[d];(b instanceof Ku||b instanceof vu||b instanceof Lc)&&b.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof Ku||d instanceof vu||d instanceof Lc)&&d.destroy()}}}class lA{constructor(u,d,b=()=>!0){this.programConfigurations={};for(const M of u)this.programConfigurations[M.id]=new ph(M,d,b);this.needsUpload=!1,this._featureMap=new rd,this._bufferOffset=0}populatePaintArrays(u,d,b,M){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(u,d,M);d.id!==void 0&&this._featureMap.add(d.id,b,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,b,M){for(const k of b)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(u,this._featureMap,d,k,M)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Nf(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Gf(f,u,d){const b={color:{source:TA,composite:q},number:{source:p,composite:TA}},M=(function(k){return{"line-pattern":{source:Kt,composite:Kt},"fill-pattern":{source:Kt,composite:Kt},"fill-extrusion-pattern":{source:Kt,composite:Kt},"line-dasharray":{source:jt,composite:jt}}[k]})(f);return M&&M[d]||b[u][d]}Jn("ConstantBinder",Ns),Jn("CrossFadedConstantBinder",Uc),Jn("SourceExpressionBinder",Ku),Jn("CrossFadedPatternBinder",Rp),Jn("CrossFadedDasharrayBinder",fh),Jn("CompositeExpressionBinder",vu),Jn("ProgramConfiguration",ph,{omit:["_buffers"]}),Jn("ProgramConfigurationSet",lA);const mh=Math.pow(2,14)-1,Zm=-mh-1;function uA(f){const u=ht/f.extent,d=f.loadGeometry();for(let b=0;b<d.length;b++){const M=d[b];for(let k=0;k<M.length;k++){const P=M[k],K=Math.round(P.x*u),G=Math.round(P.y*u);P.x=Ct(K,Zm,mh),P.y=Ct(G,Zm,mh),(K<P.x||K>P.x+1||G<P.y||G>P.y+1)&&ft("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Ya(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?uA(f):[]}}const I1=-32768;function gv(f,u,d,b,M){f.emplaceBack(I1+8*u+b,I1+8*d+M)}class k1{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new vt,this.indexArray=new Hi,this.segments=new dr,this.programConfigurations=new lA(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){const M=this.layers[0],k=[];let P=null,K=!1,G=M.type==="heatmap";if(M.type==="circle"){const ie=M;P=ie.layout.get("circle-sort-key"),K=!P.isConstant(),G=G||ie.paint.get("circle-pitch-alignment")==="map"}const ee=G?d.subdivisionGranularity.circle:1;for(const{feature:ie,id:ce,index:Be,sourceLayerIndex:Pe}of u){const Le=this.layers[0]._featureFilter.needGeometry,Ne=Ya(ie,Le);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),Ne,b))continue;const Ze=K?P.evaluate(Ne,{},b):void 0,ot={id:ce,properties:ie.properties,type:ie.type,sourceLayerIndex:Pe,index:Be,geometry:Le?Ne.geometry:uA(ie),patterns:{},sortKey:Ze};k.push(ot)}K&&k.sort(((ie,ce)=>ie.sortKey-ce.sortKey));for(const ie of k){const{geometry:ce,index:Be,sourceLayerIndex:Pe}=ie,Le=u[Be].feature;this.addFeature(ie,ce,Be,b,ee),d.featureIndex.insert(Le,ce,Be,Pe,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Wo),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,b,M,k=1){let P;switch(k){case 1:P=[0,7];break;case 3:P=[0,2,5,7];break;case 5:P=[0,1,3,4,6,7];break;case 7:P=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${k}; valid values are 1, 3, 5, 7.`)}const K=P.length;for(const G of d)for(const ee of G){const ie=ee.x,ce=ee.y;if(ie<0||ie>=ht||ce<0||ce>=ht)continue;const Be=this.segments.prepareSegment(K*K,this.layoutVertexArray,this.indexArray,u.sortKey),Pe=Be.vertexLength;for(let Le=0;Le<K;Le++)for(let Ne=0;Ne<K;Ne++)gv(this.layoutVertexArray,ie,ce,P[Ne],P[Le]);for(let Le=0;Le<K-1;Le++)for(let Ne=0;Ne<K-1;Ne++){const Ze=Pe+Le*K+Ne,ot=Pe+(Le+1)*K+Ne;this.indexArray.emplaceBack(Ze,ot+1,Ze+1),this.indexArray.emplaceBack(Ze,ot,ot+1)}Be.vertexLength+=K*K,Be.primitiveLength+=(K-1)*(K-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:{},canonical:M})}}function Xm(f,u){for(let d=0;d<f.length;d++)if(qi(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(qi(f,u[d]))return!0;return!!Jm(f,u)}function b0(f,u,d){return!!qi(f,u)||!!Dp(u,f,d)}function T1(f,u){if(f.length===1)return ya(u,f[0]);for(let d=0;d<u.length;d++){const b=u[d];for(let M=0;M<b.length;M++)if(qi(f,b[M]))return!0}for(let d=0;d<f.length;d++)if(ya(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Jm(f,u[d]))return!0;return!1}function ad(f,u,d){if(f.length>1){if(Jm(f,u))return!0;for(let b=0;b<u.length;b++)if(Dp(u[b],f,d))return!0}for(let b=0;b<f.length;b++)if(Dp(f[b],u,d))return!0;return!1}function Jm(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const b=f[d],M=f[d+1];for(let k=0;k<u.length-1;k++)if(yv(b,M,u[k],u[k+1]))return!0}return!1}function yv(f,u,d,b){return St(f,d,b)!==St(u,d,b)&&St(f,u,d)!==St(f,u,b)}function Dp(f,u,d){const b=d*d;if(u.length===1)return f.distSqr(u[0])<b;for(let M=1;M<u.length;M++)if(sa(f,u[M-1],u[M])<b)return!0;return!1}function sa(f,u,d){const b=u.distSqr(d);if(b===0)return f.distSqr(u);const M=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/b;return f.distSqr(M<0?u:M>1?d:d.sub(u)._mult(M)._add(u))}function ya(f,u){let d,b,M,k=!1;for(let P=0;P<f.length;P++){d=f[P];for(let K=0,G=d.length-1;K<d.length;G=K++)b=d[K],M=d[G],b.y>u.y!=M.y>u.y&&u.x<(M.x-b.x)*(u.y-b.y)/(M.y-b.y)+b.x&&(k=!k)}return k}function qi(f,u){let d=!1;for(let b=0,M=f.length-1;b<f.length;M=b++){const k=f[b],P=f[M];k.y>u.y!=P.y>u.y&&u.x<(P.x-k.x)*(u.y-k.y)/(P.y-k.y)+k.x&&(d=!d)}return d}function C0(f,u,d){const b=d[0],M=d[2];if(f.x<b.x&&u.x<b.x||f.x>M.x&&u.x>M.x||f.y<b.y&&u.y<b.y||f.y>M.y&&u.y>M.y)return!1;const k=St(f,u,d[0]);return k!==St(f,u,d[1])||k!==St(f,u,d[2])||k!==St(f,u,d[3])}function Yd(f,u,d){const b=u.paint.get(f).value;return b.kind==="constant"?b.value:d.programConfigurations.get(u.id).getMaxValue(f)}function gh(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Wf(f,u,d,b,M){if(!u[0]&&!u[1])return f;const k=c.convert(u)._mult(M);d==="viewport"&&k._rotate(-b);const P=[];for(let K=0;K<f.length;K++)P.push(f[K].sub(k));return P}function R1({queryGeometry:f,size:u},d){return b0(f,d,u)}function _0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},k){return b0(f,k,u*(d.projectTileCoordinates(k.x,k.y,b,M).signedDistanceFromCamera/d.cameraToCenterDistance))}function bu({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},k){const P=d.projectTileCoordinates(k.x,k.y,b,M).signedDistanceFromCamera,K=u*(d.cameraToCenterDistance/P);return b0(f,eg(k,d,b,M),K)}function Xx({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},k){return b0(f,eg(k,d,b,M),u)}function x0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M,pitchAlignment:k="map",pitchScale:P="map"},K){const G=k==="map"?P==="map"?R1:_0:P==="map"?bu:Xx,ee={queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M};for(const ie of K)for(const ce of ie)if(G(ee,ce))return!0;return!1}function eg(f,u,d,b){const M=u.projectTileCoordinates(f.x,f.y,d,b).point;return new c((.5*M.x+.5)*u.width,(.5*-M.y+.5)*u.height)}let vv,D1;Jn("CircleBucket",k1,{omit:["layers"]});var lC={get paint(){return D1=D1||new us({"circle-radius":new _i(gt.paint_circle["circle-radius"]),"circle-color":new _i(gt.paint_circle["circle-color"]),"circle-blur":new _i(gt.paint_circle["circle-blur"]),"circle-opacity":new _i(gt.paint_circle["circle-opacity"]),"circle-translate":new ri(gt.paint_circle["circle-translate"]),"circle-translate-anchor":new ri(gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ri(gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ri(gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _i(gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _i(gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _i(gt.paint_circle["circle-stroke-opacity"])})},get layout(){return vv=vv||new us({"circle-sort-key":new _i(gt.layout_circle["circle-sort-key"])})}};class bv extends ul{constructor(u,d){super(u,lC,d)}createBucket(u){return new k1(u)}queryRadius(u){const d=u;return Yd("circle-radius",this,d)+Yd("circle-stroke-width",this,d)+gh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:P,unwrappedTileID:K,getElevation:G}){const ee=Wf(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-k.bearingInRadians,P),ie=this.paint.get("circle-radius").evaluate(d,b)+this.paint.get("circle-stroke-width").evaluate(d,b),ce=this.paint.get("circle-pitch-scale"),Be=this.paint.get("circle-pitch-alignment");let Pe,Le;return Be==="map"?(Pe=ee,Le=ie*P):(Pe=(function(Ne,Ze,ot,Dt){return Ne.map((dt=>eg(dt,Ze,ot,Dt)))})(ee,k,K,G),Le=ie),x0({queryGeometry:Pe,size:Le,transform:k,unwrappedTileID:K,getElevation:G,pitchAlignment:Be,pitchScale:ce},M)}}class P1 extends k1{}let PA;Jn("HeatmapBucket",P1,{omit:["layers"]});var Fu={get paint(){return PA=PA||new us({"heatmap-radius":new _i(gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _i(gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ri(gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hh(gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ri(gt.paint_heatmap["heatmap-opacity"])})}};function Pp(f,{width:u,height:d},b,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==u*d*b)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${u*d*b}`)}else M=new Uint8Array(u*d*b);return f.width=u,f.height=d,f.data=M,f}function M0(f,{width:u,height:d},b){if(u===f.width&&d===f.height)return;const M=Pp({},{width:u,height:d},b);Up(f,M,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},b),f.width=u,f.height=d,f.data=M.data}function Up(f,u,d,b,M,k){if(M.width===0||M.height===0)return u;if(M.width>f.width||M.height>f.height||d.x>f.width-M.width||d.y>f.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>u.width||M.height>u.height||b.x>u.width-M.width||b.y>u.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const P=f.data,K=u.data;if(P===K)throw new Error("srcData equals dstData, so image is already copied");for(let G=0;G<M.height;G++){const ee=((d.y+G)*f.width+d.x)*k,ie=((b.y+G)*u.width+b.x)*k;for(let ce=0;ce<M.width*k;ce++)K[ie+ce]=P[ee+ce]}return u}class tg{constructor(u,d){Pp(this,u,1,d)}resize(u){M0(this,u,1)}clone(){return new tg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,M,k){Up(u,d,b,M,k,1)}}class Cu{constructor(u,d){Pp(this,u,4,d)}resize(u){M0(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Cu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,M,k){Up(u,d,b,M,k,4)}setPixel(u,d,b){const M=4*(u*this.width+d);this.data[M+0]=Math.round(255*b.r/b.a),this.data[M+1]=Math.round(255*b.g/b.a),this.data[M+2]=Math.round(255*b.b/b.a),this.data[M+3]=Math.round(255*b.a)}}function Lp(f){const u={},d=f.resolution||256,b=f.clips?f.clips.length:1,M=f.image||new Cu({width:d,height:b});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const k=(P,K,G)=>{u[f.evaluationKey]=G;const ee=f.expression.evaluate(u);M.setPixel(P/4/d,K/4,ee)};if(f.clips)for(let P=0,K=0;P<b;++P,K+=4*d)for(let G=0,ee=0;G<d;G++,ee+=4){const ie=G/(d-1),{start:ce,end:Be}=f.clips[P];k(K,ee,ce*(1-ie)+Be*ie)}else for(let P=0,K=0;P<d;P++,K+=4)k(0,K,P/(d-1));return M}Jn("AlphaImage",tg),Jn("RGBAImage",Cu);const UA="big-fb";class U1 extends ul{createBucket(u){return new P1(u)}constructor(u,d){super(u,Fu,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Lp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(UA)&&this.heatmapFbos.delete(UA)}queryRadius(u){return Yd("heatmap-radius",this,u)}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:P,unwrappedTileID:K,getElevation:G}){return x0({queryGeometry:u,size:this.paint.get("heatmap-radius").evaluate(d,b)*P,transform:k,unwrappedTileID:K,getElevation:G},M)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let uC;var cC={get paint(){return uC=uC||new us({"hillshade-illumination-direction":new ri(gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ri(gt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ri(gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ri(gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ri(gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ri(gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ri(gt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ri(gt.paint_hillshade["hillshade-method"])})}};class $d extends ul{constructor(u,d){super(u,cC,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,b=this.paint.get("hillshade-highlight-color").values,M=this.paint.get("hillshade-shadow-color").values;const k=Math.max(u.length,d.length,b.length,M.length);u=u.concat(Array(k-u.length).fill(u.at(-1))),d=d.concat(Array(k-d.length).fill(d.at(-1))),b=b.concat(Array(k-b.length).fill(b.at(-1))),M=M.concat(Array(k-M.length).fill(M.at(-1)));const P=d.map(Un);return{directionRadians:u.map(Un),altitudeRadians:P,shadowColor:M,highlightColor:b}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let L1;var Cv={get paint(){return L1=L1||new us({"color-relief-opacity":new ri(gt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new hh(gt["paint_color-relief"]["color-relief-color"])})}};class Kp{constructor(u,d,b,M){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(d,M)}update(u,d,b){const{width:M,height:k}=u,P=!(this.size&&this.size[0]===M&&this.size[1]===k||b),{context:K}=this,{gl:G}=K;if(this.useMipmap=!!(d&&d.useMipmap),G.bindTexture(G.TEXTURE_2D,this.texture),K.pixelStoreUnpackFlipY.set(!1),K.pixelStoreUnpack.set(1),K.pixelStoreUnpackPremultiplyAlpha.set(this.format===G.RGBA&&(!d||d.premultiply!==!1)),P)this.size=[M,k],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||zn(u)?G.texImage2D(G.TEXTURE_2D,0,this.format,this.format,G.UNSIGNED_BYTE,u):G.texImage2D(G.TEXTURE_2D,0,this.format,M,k,0,this.format,G.UNSIGNED_BYTE,u.data);else{const{x:ee,y:ie}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||zn(u)?G.texSubImage2D(G.TEXTURE_2D,0,ee,ie,G.RGBA,G.UNSIGNED_BYTE,u):G.texSubImage2D(G.TEXTURE_2D,0,ee,ie,M,k,G.RGBA,G.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&G.generateMipmap(G.TEXTURE_2D),K.pixelStoreUnpackFlipY.setDefault(),K.pixelStoreUnpack.setDefault(),K.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,d,b){const{context:M}=this,{gl:k}=M;k.bindTexture(k.TEXTURE_2D,this.texture),b!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=k.LINEAR),u!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,b||u),this.filter=u),d!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,d),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class ng{constructor(u,d,b,M=1,k=1,P=1,K=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))return void ft(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const G=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=k,this.blueFactor=P,this.baseShift=K;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ee=0;ee<G;ee++)this.data[this._idx(-1,ee)]=this.data[this._idx(0,ee)],this.data[this._idx(G,ee)]=this.data[this._idx(G-1,ee)],this.data[this._idx(ee,-1)]=this.data[this._idx(ee,0)],this.data[this._idx(ee,G)]=this.data[this._idx(ee,G-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(G,-1)]=this.data[this._idx(G-1,0)],this.data[this._idx(-1,G)]=this.data[this._idx(0,G-1)],this.data[this._idx(G,G)]=this.data[this._idx(G-1,G-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<G;ee++)for(let ie=0;ie<G;ie++){const ce=this.get(ee,ie);ce>this.max&&(this.max=ce),ce<this.min&&(this.min=ce)}}get(u,d){const b=new Uint8Array(this.data.buffer),M=4*this._idx(u,d);return this.unpack(b[M],b[M+1],b[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,b){return u*this.redFactor+d*this.greenFactor+b*this.blueFactor-this.baseShift}pack(u){return vs(u,this.getUnpackVector())}getPixels(){return new Cu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,b){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let M=d*this.dim,k=d*this.dim+this.dim,P=b*this.dim,K=b*this.dim+this.dim;switch(d){case-1:M=k-1;break;case 1:k=M+1}switch(b){case-1:P=K-1;break;case 1:K=P+1}const G=-d*this.dim,ee=-b*this.dim;for(let ie=P;ie<K;ie++)for(let ce=M;ce<k;ce++)this.data[this._idx(ce,ie)]=u.data[this._idx(ce+G,ie+ee)]}}function vs(f,u){const d=u[0],b=u[1],M=u[2],k=u[3],P=Math.min(d,b,M),K=Math.round((f+k)/P);return{r:Math.floor(K*P/d)%256,g:Math.floor(K*P/b)%256,b:Math.floor(K*P/M)%256}}Jn("DEMData",ng);class AC extends ul{constructor(u,d){super(u,Cv,d)}_createColorRamp(u){const d={elevationStops:[],colorStops:[]},b=this._transitionablePaint._values["color-relief-color"].value.expression;if(b instanceof jl&&b._styleExpression.expression instanceof Au){this.colorRampExpression=b;const P=b._styleExpression.expression;d.elevationStops=P.labels,d.colorStops=[];for(const K of d.elevationStops)d.colorStops.push(P.evaluate({globals:{elevation:K}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[Gi.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=u)return d;const M={elevationStops:[],colorStops:[]},k=(d.elevationStops.length-1)/(u-1);for(let P=0;P<d.elevationStops.length-.5;P+=k)M.elevationStops.push(d.elevationStops[Math.round(P)]),M.colorStops.push(d.colorStops[Math.round(P)]);return ft(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),M}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,d,b){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const M=this._createColorRamp(d),k=new Cu({width:M.colorStops.length,height:1}),P=new Cu({width:M.colorStops.length,height:1});for(let K=0;K<M.elevationStops.length;K++){const G=vs(M.elevationStops[K],b);P.setPixel(0,K,new Gi(G.r/255,G.g/255,G.b/255,1)),k.setPixel(0,K,M.colorStops[K])}return this.colorRampTextures={elevationTexture:new Kp(u,P,u.gl.RGBA),colorTexture:new Kp(u,k,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const w0=co([{name:"a_pos",components:2,type:"Int16"}],4),{members:K1}=w0;function Vd(f,u,d){const b=d.patternDependencies;let M=!1;for(const k of u){const P=k.paint.get(`${f}-pattern`);P.isConstant()||(M=!0);const K=P.constantOr(null);K&&(M=!0,b[K.to]=!0,b[K.from]=!0)}return M}function yh(f,u,d,b,M){const{zoom:k}=b,P=M.patternDependencies;for(const K of u){const G=K.paint.get(`${f}-pattern`).value;if(G.kind!=="constant"){let ee=G.evaluate({zoom:k-1},d,{},M.availableImages),ie=G.evaluate({zoom:k},d,{},M.availableImages),ce=G.evaluate({zoom:k+1},d,{},M.availableImages);ee=ee&&ee.name?ee.name:ee,ie=ie&&ie.name?ie.name:ie,ce=ce&&ce.name?ce.name:ce,P[ee]=!0,P[ie]=!0,P[ce]=!0,d.patterns[K.id]={min:ee,mid:ie,max:ce}}}return d}function ig(f,u,d,b,M){let k;if(M===(function(P,K,G,ee){let ie=0;for(let ce=K,Be=G-ee;ce<G;ce+=ee)ie+=(P[Be]-P[ce])*(P[ce+1]+P[Be+1]),Be=ce;return ie})(f,u,d,b)>0)for(let P=u;P<d;P+=b)k=Mv(P/b|0,f[P],f[P+1],k);else for(let P=d-b;P>=u;P-=b)k=Mv(P/b|0,f[P],f[P+1],k);return k&&rg(k,k.next)&&(zp(k),k=k.next),k}function Hd(f,u){if(!f)return f;u||(u=f);let d,b=f;do if(d=!1,b.steiner||!rg(b,b.next)&&Qr(b.prev,b,b.next)!==0)b=b.next;else{if(zp(b),b=u=b.prev,b===b.next)break;d=!0}while(d||b!==u);return u}function ql(f,u,d,b,M,k,P){if(!f)return;!P&&k&&(function(G,ee,ie,ce){let Be=G;do Be.z===0&&(Be.z=j1(Be.x,Be.y,ee,ie,ce)),Be.prevZ=Be.prev,Be.nextZ=Be.next,Be=Be.next;while(Be!==G);Be.prevZ.nextZ=null,Be.prevZ=null,(function(Pe){let Le,Ne=1;do{let Ze,ot=Pe;Pe=null;let Dt=null;for(Le=0;ot;){Le++;let dt=ot,xt=0;for(let Xt=0;Xt<Ne&&(xt++,dt=dt.nextZ,dt);Xt++);let Nt=Ne;for(;xt>0||Nt>0&&dt;)xt!==0&&(Nt===0||!dt||ot.z<=dt.z)?(Ze=ot,ot=ot.nextZ,xt--):(Ze=dt,dt=dt.nextZ,Nt--),Dt?Dt.nextZ=Ze:Pe=Ze,Ze.prevZ=Dt,Dt=Ze;ot=dt}Dt.nextZ=null,Ne*=2}while(Le>1)})(Be)})(f,b,M,k);let K=f;for(;f.prev!==f.next;){const G=f.prev,ee=f.next;if(k?hC(f,b,M,k):zu(f))u.push(G.i,f.i,ee.i),zp(f),f=ee.next,K=ee.next;else if((f=ee)===K){P?P===1?ql(f=F1(Hd(f),u),u,d,b,M,k,2):P===2&&dC(f,u,d,b,M,k):ql(Hd(f),u,d,b,M,k,1);break}}}function zu(f){const u=f.prev,d=f,b=f.next;if(Qr(u,d,b)>=0)return!1;const M=u.x,k=d.x,P=b.x,K=u.y,G=d.y,ee=b.y,ie=Math.min(M,k,P),ce=Math.min(K,G,ee),Be=Math.max(M,k,P),Pe=Math.max(K,G,ee);let Le=b.next;for(;Le!==u;){if(Le.x>=ie&&Le.x<=Be&&Le.y>=ce&&Le.y<=Pe&&Fp(M,K,k,G,P,ee,Le.x,Le.y)&&Qr(Le.prev,Le,Le.next)>=0)return!1;Le=Le.next}return!0}function hC(f,u,d,b){const M=f.prev,k=f,P=f.next;if(Qr(M,k,P)>=0)return!1;const K=M.x,G=k.x,ee=P.x,ie=M.y,ce=k.y,Be=P.y,Pe=Math.min(K,G,ee),Le=Math.min(ie,ce,Be),Ne=Math.max(K,G,ee),Ze=Math.max(ie,ce,Be),ot=j1(Pe,Le,u,d,b),Dt=j1(Ne,Ze,u,d,b);let dt=f.prevZ,xt=f.nextZ;for(;dt&&dt.z>=ot&&xt&&xt.z<=Dt;){if(dt.x>=Pe&&dt.x<=Ne&&dt.y>=Le&&dt.y<=Ze&&dt!==M&&dt!==P&&Fp(K,ie,G,ce,ee,Be,dt.x,dt.y)&&Qr(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,xt.x>=Pe&&xt.x<=Ne&&xt.y>=Le&&xt.y<=Ze&&xt!==M&&xt!==P&&Fp(K,ie,G,ce,ee,Be,xt.x,xt.y)&&Qr(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;dt&&dt.z>=ot;){if(dt.x>=Pe&&dt.x<=Ne&&dt.y>=Le&&dt.y<=Ze&&dt!==M&&dt!==P&&Fp(K,ie,G,ce,ee,Be,dt.x,dt.y)&&Qr(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;xt&&xt.z<=Dt;){if(xt.x>=Pe&&xt.x<=Ne&&xt.y>=Le&&xt.y<=Ze&&xt!==M&&xt!==P&&Fp(K,ie,G,ce,ee,Be,xt.x,xt.y)&&Qr(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function F1(f,u){let d=f;do{const b=d.prev,M=d.next.next;!rg(b,M)&&N1(b,d,d.next,M)&&Yl(b,M)&&Yl(M,b)&&(u.push(b.i,d.i,M.i),zp(d),zp(d.next),d=f=M),d=d.next}while(d!==f);return Hd(d)}function dC(f,u,d,b,M,k){let P=f;do{let K=P.next.next;for(;K!==P.prev;){if(P.i!==K.i&&fC(P,K)){let G=ld(P,K);return P=Hd(P,P.next),G=Hd(G,G.next),ql(P,u,d,b,M,k,0),void ql(G,u,d,b,M,k,0)}K=K.next}P=P.next}while(P!==f)}function _v(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function xv(f,u){const d=(function(M,k){let P=k;const K=M.x,G=M.y;let ee,ie=-1/0;if(rg(M,P))return P;do{if(rg(M,P.next))return P.next;if(G<=P.y&&G>=P.next.y&&P.next.y!==P.y){const Ne=P.x+(G-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(Ne<=K&&Ne>ie&&(ie=Ne,ee=P.x<P.next.x?P:P.next,Ne===K))return ee}P=P.next}while(P!==k);if(!ee)return null;const ce=ee,Be=ee.x,Pe=ee.y;let Le=1/0;P=ee;do{if(K>=P.x&&P.x>=Be&&K!==P.x&&$a(G<Pe?K:ie,G,Be,Pe,G<Pe?ie:K,G,P.x,P.y)){const Ne=Math.abs(G-P.y)/(K-P.x);Yl(P,M)&&(Ne<Le||Ne===Le&&(P.x>ee.x||P.x===ee.x&&z1(ee,P)))&&(ee=P,Le=Ne)}P=P.next}while(P!==ce);return ee})(f,u);if(!d)return u;const b=ld(d,f);return Hd(b,b.next),Hd(d,d.next)}function z1(f,u){return Qr(f.prev,f,u.prev)<0&&Qr(u.next,f,f.next)<0}function j1(f,u,d,b,M){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*M|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-b)*M|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Zd(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function $a(f,u,d,b,M,k,P,K){return(M-P)*(u-K)>=(f-P)*(k-K)&&(f-P)*(b-K)>=(d-P)*(u-K)&&(d-P)*(k-K)>=(M-P)*(b-K)}function Fp(f,u,d,b,M,k,P,K){return!(f===P&&u===K)&&$a(f,u,d,b,M,k,P,K)}function fC(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(d,b){let M=d;do{if(M.i!==d.i&&M.next.i!==d.i&&M.i!==b.i&&M.next.i!==b.i&&N1(M,M.next,d,b))return!0;M=M.next}while(M!==d);return!1})(f,u)&&(Yl(f,u)&&Yl(u,f)&&(function(d,b){let M=d,k=!1;const P=(d.x+b.x)/2,K=(d.y+b.y)/2;do M.y>K!=M.next.y>K&&M.next.y!==M.y&&P<(M.next.x-M.x)*(K-M.y)/(M.next.y-M.y)+M.x&&(k=!k),M=M.next;while(M!==d);return k})(f,u)&&(Qr(f.prev,f,u.prev)||Qr(f,u.prev,u))||rg(f,u)&&Qr(f.prev,f,f.next)>0&&Qr(u.prev,u,u.next)>0)}function Qr(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function rg(f,u){return f.x===u.x&&f.y===u.y}function N1(f,u,d,b){const M=bs(Qr(f,u,d)),k=bs(Qr(f,u,b)),P=bs(Qr(d,b,f)),K=bs(Qr(d,b,u));return M!==k&&P!==K||!(M!==0||!og(f,d,u))||!(k!==0||!og(f,b,u))||!(P!==0||!og(d,f,b))||!(K!==0||!og(d,u,b))}function og(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function bs(f){return f>0?1:f<0?-1:0}function Yl(f,u){return Qr(f.prev,f,f.next)<0?Qr(f,u,f.next)>=0&&Qr(f,f.prev,u)>=0:Qr(f,u,f.prev)<0||Qr(f,f.next,u)<0}function ld(f,u){const d=G1(f.i,f.x,f.y),b=G1(u.i,u.x,u.y),M=f.next,k=u.prev;return f.next=u,u.prev=f,d.next=M,M.prev=d,b.next=d,d.prev=b,k.next=b,b.prev=k,b}function Mv(f,u,d,b){const M=G1(f,u,d);return b?(M.next=b.next,M.prev=b,b.next.prev=M,b.next=M):(M.prev=M,M.next=M),M}function zp(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function G1(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class sg{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class jp{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}jp.noSubdivision=new jp({fill:new sg(0,0),line:new sg(0,0),tile:new sg(0,0),stencil:new sg(0,0),circle:1}),Jn("SubdivisionGranularityExpression",sg),Jn("SubdivisionGranularitySetting",jp);const wl=-32768,fc=32767;class pC{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=ht/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|d+32768}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const b=0|Math.round(u),M=0|Math.round(d),k=this._getKey(b,M);if(this._vertexDictionary.has(k))return this._vertexDictionary.get(k);const P=this._vertexBuffer.length/2;return this._vertexDictionary.set(k,P),this._vertexBuffer.push(b,M),P}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(M,k){const P=[];for(let K=0;K<k.length;K+=3){const G=k[K],ee=k[K+1],ie=k[K+2],ce=M[2*G],Be=M[2*G+1];(M[2*ee]-ce)*(M[2*ie+1]-Be)-(M[2*ee+1]-Be)*(M[2*ie]-ce)>0?(P.push(G),P.push(ie),P.push(ee)):(P.push(G),P.push(ee),P.push(ie))}return P})(this._vertexBuffer,u);const d=[],b=u.length;for(let M=0;M<b;M+=3){const k=[u[M+0],u[M+1],u[M+2]],P=[this._vertexBuffer[2*u[M+0]+0],this._vertexBuffer[2*u[M+0]+1],this._vertexBuffer[2*u[M+1]+0],this._vertexBuffer[2*u[M+1]+1],this._vertexBuffer[2*u[M+2]+0],this._vertexBuffer[2*u[M+2]+1]];let K=1/0,G=1/0,ee=-1/0,ie=-1/0;for(let Ne=0;Ne<3;Ne++){const Ze=P[2*Ne],ot=P[2*Ne+1];K=Math.min(K,Ze),ee=Math.max(ee,Ze),G=Math.min(G,ot),ie=Math.max(ie,ot)}if(K===ee||G===ie)continue;const ce=Math.floor(K/this._granularityCellSize),Be=Math.ceil(ee/this._granularityCellSize),Pe=Math.floor(G/this._granularityCellSize),Le=Math.ceil(ie/this._granularityCellSize);if(ce!==Be||Pe!==Le)for(let Ne=Pe;Ne<Le;Ne++){const Ze=this._scanlineGenerateVertexRingForCellRow(Ne,P,k);Xd(this._vertexBuffer,Ze,d)}else d.push(...k)}return d}_scanlineGenerateVertexRingForCellRow(u,d,b){const M=u*this._granularityCellSize,k=M+this._granularityCellSize,P=[];for(let K=0;K<3;K++){const G=d[2*K],ee=d[2*K+1],ie=d[2*(K+1)%6],ce=d[(2*(K+1)+1)%6],Be=d[2*(K+2)%6],Pe=d[(2*(K+2)+1)%6],Le=ie-G,Ne=ce-ee,Ze=Le===0,ot=Ne===0,Dt=(M-ee)/Ne,dt=(k-ee)/Ne,xt=Math.min(Dt,dt),Nt=Math.max(Dt,dt);if(!ot&&(xt>=1||Nt<=0)||ot&&(ee<M||ee>k)){ce>=M&&ce<=k&&P.push(b[(K+1)%3]);continue}!ot&&xt>0&&P.push(this._vertexToIndex(G+Le*xt,ee+Ne*xt));const Xt=G+Le*Math.max(xt,0),mn=G+Le*Math.min(Nt,1);Ze||this._generateIntraEdgeVertices(P,G,ee,ie,ce,Xt,mn),!ot&&Nt<1&&P.push(this._vertexToIndex(G+Le*Nt,ee+Ne*Nt)),(ot||ce>=M&&ce<=k)&&P.push(b[(K+1)%3]),!ot&&(ce<=M||ce>=k)&&this._generateInterEdgeVertices(P,G,ee,ie,ce,Be,Pe,mn,M,k)}return P}_generateIntraEdgeVertices(u,d,b,M,k,P,K){const G=M-d,ee=k-b,ie=ee===0,ce=ie?Math.min(d,M):Math.min(P,K),Be=ie?Math.max(d,M):Math.max(P,K),Pe=Math.floor(ce/this._granularityCellSize)+1,Le=Math.ceil(Be/this._granularityCellSize)-1;if(ie?d<M:P<K)for(let Ne=Pe;Ne<=Le;Ne++){const Ze=Ne*this._granularityCellSize;u.push(this._vertexToIndex(Ze,b+ee*(Ze-d)/G))}else for(let Ne=Le;Ne>=Pe;Ne--){const Ze=Ne*this._granularityCellSize;u.push(this._vertexToIndex(Ze,b+ee*(Ze-d)/G))}}_generateInterEdgeVertices(u,d,b,M,k,P,K,G,ee,ie){const ce=k-b,Be=P-M,Pe=K-k,Le=(ee-k)/Pe,Ne=(ie-k)/Pe,Ze=Math.min(Le,Ne),ot=Math.max(Le,Ne),Dt=M+Be*Ze;let dt=Math.floor(Math.min(Dt,G)/this._granularityCellSize)+1,xt=Math.ceil(Math.max(Dt,G)/this._granularityCellSize)-1,Nt=G<Dt;const Xt=Pe===0;if(Xt&&(K===ee||K===ie))return;if(Xt||Ze>=1||ot<=0){const Qn=b-K,Kn=P+(d-P)*Math.min((ee-K)/Qn,(ie-K)/Qn);dt=Math.floor(Math.min(Kn,G)/this._granularityCellSize)+1,xt=Math.ceil(Math.max(Kn,G)/this._granularityCellSize)-1,Nt=G<Kn}const mn=ce>0?ie:ee;if(Nt)for(let Qn=dt;Qn<=xt;Qn++)u.push(this._vertexToIndex(Qn*this._granularityCellSize,mn));else for(let Qn=xt;Qn>=dt;Qn--)u.push(this._vertexToIndex(Qn*this._granularityCellSize,mn))}_generateOutline(u){const d=[];for(const b of u){const M=Qf(b,this._granularity,!0),k=this._pointArrayToIndices(M),P=[];for(let K=1;K<k.length;K++)P.push(k[K-1]),P.push(k[K]);d.push(P)}return d}_handlePoles(u){let d=!1,b=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(b=!0)),(d||b)&&this._fillPoles(u,d,b)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const b=u[d+1];b===wl&&(u[d+1]=-32767),b===fc&&(u[d+1]=32766)}}_generatePoleQuad(u,d,b,M,k,P){M>k!=(P===wl)?(u.push(d),u.push(b),u.push(this._vertexToIndex(M,P)),u.push(b),u.push(this._vertexToIndex(k,P)),u.push(this._vertexToIndex(M,P))):(u.push(b),u.push(d),u.push(this._vertexToIndex(M,P)),u.push(this._vertexToIndex(k,P)),u.push(b),u.push(this._vertexToIndex(M,P)))}_fillPoles(u,d,b){const M=this._vertexBuffer,k=ht,P=u.length;for(let K=2;K<P;K+=3){const G=u[K-2],ee=u[K-1],ie=u[K],ce=M[2*G],Be=M[2*G+1],Pe=M[2*ee],Le=M[2*ee+1],Ne=M[2*ie],Ze=M[2*ie+1];d&&(Be===0&&Le===0&&this._generatePoleQuad(u,G,ee,ce,Pe,wl),Le===0&&Ze===0&&this._generatePoleQuad(u,ee,ie,Pe,Ne,wl),Ze===0&&Be===0&&this._generatePoleQuad(u,ie,G,Ne,ce,wl)),b&&(Be===k&&Le===k&&this._generatePoleQuad(u,G,ee,ce,Pe,fc),Le===k&&Ze===k&&this._generatePoleQuad(u,ee,ie,Pe,Ne,fc),Ze===k&&Be===k&&this._generatePoleQuad(u,ie,G,Ne,ce,fc))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:b,holeIndices:M}=(function(K){const G=[],ee=[];for(const ie of K)if(ie.length!==0){ie!==K[0]&&G.push(ee.length/2);for(let ce=0;ce<ie.length;ce++)ee.push(ie[ce].x),ee.push(ie[ce].y)}return{flattened:ee,holeIndices:G}})(u);let k;this._initializeVertices(b);try{const K=(function(ee,ie,ce=2){const Be=ie&&ie.length,Pe=Be?ie[0]*ce:ee.length;let Le=ig(ee,0,Pe,ce,!0);const Ne=[];if(!Le||Le.next===Le.prev)return Ne;let Ze,ot,Dt;if(Be&&(Le=(function(dt,xt,Nt,Xt){const mn=[];for(let Qn=0,Kn=xt.length;Qn<Kn;Qn++){const Gn=ig(dt,xt[Qn]*Xt,Qn<Kn-1?xt[Qn+1]*Xt:dt.length,Xt,!1);Gn===Gn.next&&(Gn.steiner=!0),mn.push(Zd(Gn))}mn.sort(_v);for(let Qn=0;Qn<mn.length;Qn++)Nt=xv(mn[Qn],Nt);return Nt})(ee,ie,Le,ce)),ee.length>80*ce){Ze=ee[0],ot=ee[1];let dt=Ze,xt=ot;for(let Nt=ce;Nt<Pe;Nt+=ce){const Xt=ee[Nt],mn=ee[Nt+1];Xt<Ze&&(Ze=Xt),mn<ot&&(ot=mn),Xt>dt&&(dt=Xt),mn>xt&&(xt=mn)}Dt=Math.max(dt-Ze,xt-ot),Dt=Dt!==0?32767/Dt:0}return ql(Le,Ne,ce,Ze,ot,Dt,0),Ne})(b,M),G=this._convertIndices(b,K);k=this._subdivideTrianglesScanline(G)}catch(K){console.error(K)}let P=[];return d&&(P=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(k),{verticesFlattened:this._vertexBuffer,indicesTriangles:k,indicesLineList:P}}_convertIndices(u,d){const b=[];for(let M=0;M<d.length;M++)b.push(this._vertexToIndex(u[2*d[M]],u[2*d[M]+1]));return b}_pointArrayToIndices(u){const d=[];for(let b=0;b<u.length;b++){const M=u[b];d.push(this._vertexToIndex(M.x,M.y))}return d}}function Gs(f,u,d,b=!0){return new pC(d,u).subdividePolygonInternal(f,b)}function Qf(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const b=f[0],M=f[f.length-1],k=d&&(b.x!==M.x||b.y!==M.y);if(u<2)return k?[...f,f[0]]:[...f];const P=Math.floor(ht/u),K=[];K.push(new c(f[0].x,f[0].y));const G=f.length,ee=k?G:G-1;for(let ie=0;ie<ee;ie++){const ce=f[ie],Be=ie<G-1?f[ie+1]:f[0],Pe=ce.x,Le=ce.y,Ne=Be.x,Ze=Be.y,ot=Pe!==Ne,Dt=Le!==Ze;if(!ot&&!Dt)continue;const dt=Ne-Pe,xt=Ze-Le,Nt=Math.abs(dt),Xt=Math.abs(xt);let mn=Pe,Qn=Le;for(;;){const Gn=dt>0?(Math.floor(mn/P)+1)*P:(Math.ceil(mn/P)-1)*P,xi=xt>0?(Math.floor(Qn/P)+1)*P:(Math.ceil(Qn/P)-1)*P,Nn=Math.abs(mn-Gn),Wn=Math.abs(Qn-xi),an=Math.abs(mn-Ne),ji=Math.abs(Qn-Ze),ir=ot?Nn/Nt:Number.POSITIVE_INFINITY,Ui=Dt?Wn/Xt:Number.POSITIVE_INFINITY;if((an<=Nn||!ot)&&(ji<=Wn||!Dt))break;if(ir<Ui&&ot||!Dt){mn=Gn,Qn+=xt*ir;const Ai=new c(mn,Math.round(Qn));K[K.length-1].x===Ai.x&&K[K.length-1].y===Ai.y||K.push(Ai)}else{mn+=dt*Ui,Qn=xi;const Ai=new c(Math.round(mn),Qn);K[K.length-1].x===Ai.x&&K[K.length-1].y===Ai.y||K.push(Ai)}}const Kn=new c(Ne,Ze);K[K.length-1].x===Kn.x&&K[K.length-1].y===Kn.y||K.push(Kn)}return K}function Xd(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let b=0,M=f[2*u[0]];for(let G=1;G<u.length;G++){const ee=f[2*u[G]];ee<M&&(M=ee,b=G)}const k=u.length;let P=b,K=(P+1)%k;for(;;){const G=P-1>=0?P-1:k-1,ee=(K+1)%k,ie=f[2*u[G]],ce=f[2*u[ee]],Be=f[2*u[P]],Pe=f[2*u[P]+1],Le=f[2*u[K]+1];let Ne=!1;if(ie<ce)Ne=!0;else if(ie>ce)Ne=!1;else{const Ze=Le-Pe,ot=-(f[2*u[K]]-Be),Dt=Pe<Le?1:-1;((ie-Be)*Ze+(f[2*u[G]+1]-Pe)*ot)*Dt>((ce-Be)*Ze+(f[2*u[ee]+1]-Pe)*ot)*Dt&&(Ne=!0)}if(Ne){const Ze=u[G],ot=u[P],Dt=u[K];Ze!==ot&&Ze!==Dt&&ot!==Dt&&d.push(Dt,ot,Ze),P--,P<0&&(P=k-1)}else{const Ze=u[ee],ot=u[P],Dt=u[K];Ze!==ot&&Ze!==Dt&&ot!==Dt&&d.push(Dt,ot,Ze),K++,K>=k&&(K=0)}if(G===ee)break}}function qf(f,u,d,b,M,k,P,K,G){const ee=M.length/2,ie=P&&K&&G;if(ee<dr.MAX_VERTEX_ARRAY_LENGTH){const ce=u.prepareSegment(ee,d,b),Be=ce.vertexLength;for(let Ne=0;Ne<k.length;Ne+=3)b.emplaceBack(Be+k[Ne],Be+k[Ne+1],Be+k[Ne+2]);let Pe,Le;ce.vertexLength+=ee,ce.primitiveLength+=k.length/3,ie&&(Le=P.prepareSegment(ee,d,K),Pe=Le.vertexLength,Le.vertexLength+=ee);for(let Ne=0;Ne<M.length;Ne+=2)f(M[Ne],M[Ne+1]);if(ie)for(let Ne=0;Ne<G.length;Ne++){const Ze=G[Ne];for(let ot=1;ot<Ze.length;ot+=2)K.emplaceBack(Pe+Ze[ot-1],Pe+Ze[ot]);Le.primitiveLength+=Ze.length/2}}else(function(ce,Be,Pe,Le,Ne,Ze){const ot=[];for(let Xt=0;Xt<Le.length/2;Xt++)ot.push(-1);const Dt={count:0};let dt=0,xt=ce.getOrCreateLatestSegment(Be,Pe),Nt=xt.vertexLength;for(let Xt=2;Xt<Ne.length;Xt+=3){const mn=Ne[Xt-2],Qn=Ne[Xt-1],Kn=Ne[Xt];let Gn=ot[mn]<dt,xi=ot[Qn]<dt,Nn=ot[Kn]<dt;xt.vertexLength+((Gn?1:0)+(xi?1:0)+(Nn?1:0))>dr.MAX_VERTEX_ARRAY_LENGTH&&(xt=ce.createNewSegment(Be,Pe),dt=Dt.count,Gn=!0,xi=!0,Nn=!0,Nt=0);const Wn=Kc(ot,Le,Ze,Dt,mn,Gn,xt),an=Kc(ot,Le,Ze,Dt,Qn,xi,xt),ji=Kc(ot,Le,Ze,Dt,Kn,Nn,xt);Pe.emplaceBack(Nt+Wn-dt,Nt+an-dt,Nt+ji-dt),xt.primitiveLength++}})(u,d,b,M,k,f),ie&&(function(ce,Be,Pe,Le,Ne,Ze){const ot=[];for(let Xt=0;Xt<Le.length/2;Xt++)ot.push(-1);const Dt={count:0};let dt=0,xt=ce.getOrCreateLatestSegment(Be,Pe),Nt=xt.vertexLength;for(let Xt=0;Xt<Ne.length;Xt++){const mn=Ne[Xt];for(let Qn=1;Qn<Ne[Xt].length;Qn+=2){const Kn=mn[Qn-1],Gn=mn[Qn];let xi=ot[Kn]<dt,Nn=ot[Gn]<dt;xt.vertexLength+((xi?1:0)+(Nn?1:0))>dr.MAX_VERTEX_ARRAY_LENGTH&&(xt=ce.createNewSegment(Be,Pe),dt=Dt.count,xi=!0,Nn=!0,Nt=0);const Wn=Kc(ot,Le,Ze,Dt,Kn,xi,xt),an=Kc(ot,Le,Ze,Dt,Gn,Nn,xt);Pe.emplaceBack(Nt+Wn-dt,Nt+an-dt),xt.primitiveLength++}}})(P,d,K,M,G,f),u.forceNewSegmentOnNextPrepare(),P?.forceNewSegmentOnNextPrepare()}function Kc(f,u,d,b,M,k,P){if(k){const K=b.count;return d(u[2*M],u[2*M+1]),f[M]=b.count,b.count++,P.vertexLength++,K}return f[M]}class S0{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new bt,this.indexArray=new Hi,this.indexArray2=new Er,this.programConfigurations=new lA(u.layers,u.zoom),this.segments=new dr,this.segments2=new dr,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=Vd("fill",this.layers,d);const M=this.layers[0].layout.get("fill-sort-key"),k=!M.isConstant(),P=[];for(const{feature:K,id:G,index:ee,sourceLayerIndex:ie}of u){const ce=this.layers[0]._featureFilter.needGeometry,Be=Ya(K,ce);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),Be,b))continue;const Pe=k?M.evaluate(Be,{},b,d.availableImages):void 0,Le={id:G,properties:K.properties,type:K.type,sourceLayerIndex:ie,index:ee,geometry:ce?Be.geometry:uA(K),patterns:{},sortKey:Pe};P.push(Le)}k&&P.sort(((K,G)=>K.sortKey-G.sortKey));for(const K of P){const{geometry:G,index:ee,sourceLayerIndex:ie}=K;if(this.hasDependencies){const ce=yh("fill",this.layers,K,{zoom:this.zoom},d);this.patternFeatures.push(ce)}else this.addFeature(K,G,ee,b,{},d.subdivisionGranularity);d.featureIndex.insert(u[ee].feature,G,ee,ie,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}addFeatures(u,d,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,d,b,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,K1),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,b,M,k,P){for(const K of Kh(d,500)){const G=Gs(K,M,P.fill.getGranularityForZoomLevel(M.z)),ee=this.layoutVertexArray;qf(((ie,ce)=>{ee.emplaceBack(ie,ce)}),this.segments,this.layoutVertexArray,this.indexArray,G.verticesFlattened,G.indicesTriangles,this.segments2,this.indexArray2,G.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,canonical:M})}}let W1,LA;Jn("FillBucket",S0,{omit:["layers","patternFeatures"]});var mC={get paint(){return LA=LA||new us({"fill-antialias":new ri(gt.paint_fill["fill-antialias"]),"fill-opacity":new _i(gt.paint_fill["fill-opacity"]),"fill-color":new _i(gt.paint_fill["fill-color"]),"fill-outline-color":new _i(gt.paint_fill["fill-outline-color"]),"fill-translate":new ri(gt.paint_fill["fill-translate"]),"fill-translate-anchor":new ri(gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new td(gt.paint_fill["fill-pattern"])})},get layout(){return W1=W1||new us({"fill-sort-key":new _i(gt.layout_fill["fill-sort-key"])})}};class Yf extends ul{constructor(u,d){super(u,mC,d)}recalculate(u,d){super.recalculate(u,d);const b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new S0(u)}queryRadius(){return gh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:b,pixelsToTileUnits:M}){return T1(Wf(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-b.bearingInRadians,M),d)}isTileClipped(){return!0}}const E0=co([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),O0=co([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ag}=E0;class Np{constructor(u,d,b,M,k){this.properties={},this.extent=b,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=M,this._values=k,u.readFields(gC,this,d)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos,b=[];let M,k=1,P=0,K=0,G=0;for(;u.pos<d;){if(P<=0){const ee=u.readVarint();k=7&ee,P=ee>>3}if(P--,k===1||k===2)K+=u.readSVarint(),G+=u.readSVarint(),k===1&&(M&&b.push(M),M=[]),M&&M.push(new c(K,G));else{if(k!==7)throw new Error(`unknown command ${k}`);M&&M.push(M[0].clone())}}return M&&b.push(M),b}bbox(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos;let b=1,M=0,k=0,P=0,K=1/0,G=-1/0,ee=1/0,ie=-1/0;for(;u.pos<d;){if(M<=0){const ce=u.readVarint();b=7&ce,M=ce>>3}if(M--,b===1||b===2)k+=u.readSVarint(),P+=u.readSVarint(),k<K&&(K=k),k>G&&(G=k),P<ee&&(ee=P),P>ie&&(ie=P);else if(b!==7)throw new Error(`unknown command ${b}`)}return[K,ee,G,ie]}toGeoJSON(u,d,b){const M=this.extent*Math.pow(2,b),k=this.extent*u,P=this.extent*d,K=this.loadGeometry();function G(Be){return[360*(Be.x+k)/M-180,360/Math.PI*Math.atan(Math.exp((1-2*(Be.y+P)/M)*Math.PI))-90]}function ee(Be){return Be.map(G)}let ie;if(this.type===1){const Be=[];for(const Le of K)Be.push(Le[0]);const Pe=ee(Be);ie=Be.length===1?{type:"Point",coordinates:Pe[0]}:{type:"MultiPoint",coordinates:Pe}}else if(this.type===2){const Be=K.map(ee);ie=Be.length===1?{type:"LineString",coordinates:Be[0]}:{type:"MultiLineString",coordinates:Be}}else{if(this.type!==3)throw new Error("unknown feature type");{const Be=(function(Le){const Ne=Le.length;if(Ne<=1)return[Le];const Ze=[];let ot,Dt;for(let dt=0;dt<Ne;dt++){const xt=B0(Le[dt]);xt!==0&&(Dt===void 0&&(Dt=xt<0),Dt===xt<0?(ot&&Ze.push(ot),ot=[Le[dt]]):ot&&ot.push(Le[dt]))}return ot&&Ze.push(ot),Ze})(K),Pe=[];for(const Le of Be)Pe.push(Le.map(ee));ie=Pe.length===1?{type:"Polygon",coordinates:Pe[0]}:{type:"MultiPolygon",coordinates:Pe}}}const ce={type:"Feature",geometry:ie,properties:this.properties};return this.id!=null&&(ce.id=this.id),ce}}function gC(f,u,d){f===1?u.id=d.readVarint():f===2?(function(b,M){const k=b.readVarint()+b.pos;for(;b.pos<k;){const P=M._keys[b.readVarint()],K=M._values[b.readVarint()];M.properties[P]=K}})(d,u):f===3?u.type=d.readVarint():f===4&&(u._geometry=d.pos)}function B0(f){let u=0;for(let d,b,M=0,k=f.length,P=k-1;M<k;P=M++)d=f[M],b=f[P],u+=(b.x-d.x)*(d.y+b.y);return u}Np.types=["Unknown","Point","LineString","Polygon"];class wv{constructor(u,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(Q1,this,d),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const d=this._pbf.readVarint()+this._pbf.pos;return new Np(this._pbf,d,this.extent,this._keys,this._values)}}function Q1(f,u,d){f===15?u.version=d.readVarint():f===1?u.name=d.readString():f===5?u.extent=d.readVarint():f===2?u._features.push(d.pos):f===3?u._keys.push(d.readString()):f===4&&u._values.push((function(b){let M=null;const k=b.readVarint()+b.pos;for(;b.pos<k;){const P=b.readVarint()>>3;M=P===1?b.readString():P===2?b.readFloat():P===3?b.readDouble():P===4?b.readVarint64():P===5?b.readVarint():P===6?b.readSVarint():P===7?b.readBoolean():null}if(M==null)throw new Error("unknown feature value");return M})(d))}class Sv{constructor(u,d){this.layers=u.readFields(Jx,{},d)}}function Jx(f,u,d){if(f===3){const b=new wv(d,d.readVarint()+d.pos);b.length&&(u[b.name]=b)}}const Ev=Math.pow(2,13);function xo(f,u,d,b,M,k,P,K){f.emplaceBack(u,d,2*Math.floor(b*Ev)+P,M*Ev*2,k*Ev*2,Math.round(K))}class As{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new ct,this.centroidVertexArray=new lt,this.indexArray=new Hi,this.programConfigurations=new lA(u.layers,u.zoom),this.segments=new dr,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.features=[],this.hasDependencies=Vd("fill-extrusion",this.layers,d);for(const{feature:M,id:k,index:P,sourceLayerIndex:K}of u){const G=this.layers[0]._featureFilter.needGeometry,ee=Ya(M,G);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),ee,b))continue;const ie={id:k,sourceLayerIndex:K,index:P,geometry:G?ee.geometry:uA(M),properties:M.properties,type:M.type,patterns:{}};this.hasDependencies?this.features.push(yh("fill-extrusion",this.layers,ie,{zoom:this.zoom},d)):this.addFeature(ie,ie.geometry,P,b,{},d.subdivisionGranularity),d.featureIndex.insert(M,ie.geometry,P,K,this.index,!0)}}addFeatures(u,d,b){for(const M of this.features){const{geometry:k}=M;this.addFeature(M,k,M.index,d,b,u.subdivisionGranularity)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ag),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,O0.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,b,M,k,P){for(const K of Kh(d,500)){const G={x:0,y:0,sampleCount:0},ee=this.layoutVertexArray.length;this.processPolygon(G,M,u,K,P);const ie=this.layoutVertexArray.length-ee,ce=Math.floor(G.x/G.sampleCount),Be=Math.floor(G.y/G.sampleCount);for(let Pe=0;Pe<ie;Pe++)this.centroidVertexArray.emplaceBack(ce,Be)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,canonical:M})}processPolygon(u,d,b,M,k){if(M.length<1||es(M[0]))return;for(const ce of M)ce.length!==0&&Ao(u,ce);const P={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},K=k.fill.getGranularityForZoomLevel(d.z),G=Np.types[b.type]==="Polygon";for(const ce of M){if(ce.length===0||es(ce))continue;const Be=Qf(ce,K,G);this._generateSideFaces(Be,P)}if(!G)return;const ee=Gs(M,d,K,!1),ie=this.layoutVertexArray;qf(((ce,Be)=>{xo(ie,ce,Be,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,ee.verticesFlattened,ee.indicesTriangles)}_generateSideFaces(u,d){let b=0;for(let M=1;M<u.length;M++){const k=u[M],P=u[M-1];if(go(k,P))continue;d.segment.vertexLength+4>dr.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const K=k.sub(P)._perp()._unit(),G=P.dist(k);b+G>32768&&(b=0),xo(this.layoutVertexArray,k.x,k.y,K.x,K.y,0,0,b),xo(this.layoutVertexArray,k.x,k.y,K.x,K.y,0,1,b),b+=G,xo(this.layoutVertexArray,P.x,P.y,K.x,K.y,0,0,b),xo(this.layoutVertexArray,P.x,P.y,K.x,K.y,0,1,b);const ee=d.segment.vertexLength;this.indexArray.emplaceBack(ee,ee+2,ee+1),this.indexArray.emplaceBack(ee+1,ee+2,ee+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function Ao(f,u){for(let d=0;d<u.length;d++){const b=u[d];d===u.length-1&&u[0].x===b.x&&u[0].y===b.y||(f.x+=b.x,f.y+=b.y,f.sampleCount++)}}function go(f,u){return f.x===u.x&&(f.x<0||f.x>ht)||f.y===u.y&&(f.y<0||f.y>ht)}function es(f){return f.every((u=>u.x<0))||f.every((u=>u.x>ht))||f.every((u=>u.y<0))||f.every((u=>u.y>ht))}let Fc;Jn("FillExtrusionBucket",As,{omit:["layers","features"]});var $f={get paint(){return Fc=Fc||new us({"fill-extrusion-opacity":new ri(gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _i(gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ri(gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ri(gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new td(gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _i(gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _i(gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ri(gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class lg extends ul{constructor(u,d){super(u,$f,d)}createBucket(u){return new As(u)}queryRadius(){return gh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:P,pixelPosMatrix:K}){const G=Wf(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-k.bearingInRadians,P),ee=this.paint.get("fill-extrusion-height").evaluate(d,b),ie=this.paint.get("fill-extrusion-base").evaluate(d,b),ce=(function(Pe,Le){const Ne=[];for(const Ze of Pe){const ot=[Ze.x,Ze.y,0,1];Te(ot,ot,Le),Ne.push(new c(ot[0]/ot[3],ot[1]/ot[3]))}return Ne})(G,K),Be=(function(Pe,Le,Ne,Ze){const ot=[],Dt=[],dt=Ze[8]*Le,xt=Ze[9]*Le,Nt=Ze[10]*Le,Xt=Ze[11]*Le,mn=Ze[8]*Ne,Qn=Ze[9]*Ne,Kn=Ze[10]*Ne,Gn=Ze[11]*Ne;for(const xi of Pe){const Nn=[],Wn=[];for(const an of xi){const ji=an.x,ir=an.y,Ui=Ze[0]*ji+Ze[4]*ir+Ze[12],Ai=Ze[1]*ji+Ze[5]*ir+Ze[13],Dr=Ze[2]*ji+Ze[6]*ir+Ze[14],Cs=Ze[3]*ji+Ze[7]*ir+Ze[15],ba=Dr+Nt,El=Cs+Xt,yc=Ui+mn,Ua=Ai+Qn,Qs=Dr+Kn,Do=Cs+Gn,la=new c((Ui+dt)/El,(Ai+xt)/El);la.z=ba/El,Nn.push(la);const Ca=new c(yc/Do,Ua/Do);Ca.z=Qs/Do,Wn.push(Ca)}ot.push(Nn),Dt.push(Wn)}return[ot,Dt]})(M,ie,ee,K);return(function(Pe,Le,Ne){let Ze=1/0;T1(Ne,Le)&&(Ze=KA(Ne,Le[0]));for(let ot=0;ot<Le.length;ot++){const Dt=Le[ot],dt=Pe[ot];for(let xt=0;xt<Dt.length-1;xt++){const Nt=Dt[xt],Xt=[Nt,Dt[xt+1],dt[xt+1],dt[xt],Nt];Xm(Ne,Xt)&&(Ze=Math.min(Ze,KA(Ne,Xt)))}}return Ze!==1/0&&Ze})(Be[0],Be[1],ce)}}function Gp(f,u){return f.x*u.x+f.y*u.y}function KA(f,u){if(f.length===1){let d=0;const b=u[d++];let M;for(;!M||b.equals(M);)if(M=u[d++],!M)return 1/0;for(;d<u.length;d++){const k=u[d],P=f[0],K=M.sub(b),G=k.sub(b),ee=P.sub(b),ie=Gp(K,K),ce=Gp(K,G),Be=Gp(G,G),Pe=Gp(ee,K),Le=Gp(ee,G),Ne=ie*Be-ce*ce,Ze=(Be*Pe-ce*Le)/Ne,ot=(ie*Le-ce*Pe)/Ne,Dt=b.z*(1-Ze-ot)+M.z*Ze+k.z*ot;if(isFinite(Dt))return Dt}return 1/0}{let d=1/0;for(const b of u)d=Math.min(d,b.z);return d}}const va=co([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vf}=va,Wp=co([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ov}=Wp,cA=Math.cos(Math.PI/180*37.5),Qp=Math.pow(2,14)/.5;class qp{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new Ot,this.layoutVertexArray2=new Qt,this.indexArray=new Hi,this.programConfigurations=new lA(u.layers,u.zoom),this.segments=new dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=Vd("line",this.layers,d)||this.hasLineDasharray(this.layers);const M=this.layers[0].layout.get("line-sort-key"),k=!M.isConstant(),P=[];for(const{feature:K,id:G,index:ee,sourceLayerIndex:ie}of u){const ce=this.layers[0]._featureFilter.needGeometry,Be=Ya(K,ce);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),Be,b))continue;const Pe=k?M.evaluate(Be,{},b):void 0,Le={id:G,properties:K.properties,type:K.type,sourceLayerIndex:ie,index:ee,geometry:ce?Be.geometry:uA(K),patterns:{},dashes:{},sortKey:Pe};P.push(Le)}k&&P.sort(((K,G)=>K.sortKey-G.sortKey));for(const K of P){const{geometry:G,index:ee,sourceLayerIndex:ie}=K;this.hasDependencies?(Vd("line",this.layers,d)?yh("line",this.layers,K,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,K,this.zoom,d),this.patternFeatures.push(K)):this.addFeature(K,G,ee,b,{},{},d.subdivisionGranularity),d.featureIndex.insert(u[ee].feature,G,ee,ie,this.index)}}update(u,d,b,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b,dashPositions:M})}addFeatures(u,d,b,M){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,d,b,M,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Ov)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Vf),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,b,M,k,P,K){const G=this.layers[0].layout,ee=G.get("line-join").evaluate(u,{}),ie=G.get("line-cap"),ce=G.get("line-miter-limit"),Be=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Pe of d)this.addLine(Pe,u,ee,ie,ce,Be,M,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,dashPositions:P,canonical:M})}addLine(u,d,b,M,k,P,K,G){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Qf(u,K?G.line.getGranularityForZoomLevel(K.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let dt=0;dt<u.length-1;dt++)this.totalDistance+=u[dt].dist(u[dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ee=Np.types[d.type]==="Polygon";let ie=u.length;for(;ie>=2&&u[ie-1].equals(u[ie-2]);)ie--;let ce=0;for(;ce<ie-1&&u[ce].equals(u[ce+1]);)ce++;if(ie<(ee?3:2))return;b==="bevel"&&(k=1.05);const Be=this.overscaling<=16?122880/(512*this.overscaling):0,Pe=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray);let Le,Ne,Ze,ot,Dt;this.e1=this.e2=-1,ee&&(Le=u[ie-2],Dt=u[ce].sub(Le)._unit()._perp());for(let dt=ce;dt<ie;dt++){if(Ze=dt===ie-1?ee?u[ce+1]:void 0:u[dt+1],Ze&&u[dt].equals(Ze))continue;Dt&&(ot=Dt),Le&&(Ne=Le),Le=u[dt],Dt=Ze?Ze.sub(Le)._unit()._perp():ot,ot=ot||Dt;let xt=ot.add(Dt);xt.x===0&&xt.y===0||xt._unit();const Nt=ot.x*Dt.x+ot.y*Dt.y,Xt=xt.x*Dt.x+xt.y*Dt.y,mn=Xt!==0?1/Xt:1/0,Qn=2*Math.sqrt(2-2*Xt),Kn=Xt<cA&&Ne&&Ze,Gn=ot.x*Dt.y-ot.y*Dt.x>0;if(Kn&&dt>ce){const Wn=Le.dist(Ne);if(Wn>2*Be){const an=Le.sub(Le.sub(Ne)._mult(Be/Wn)._round());this.updateDistance(Ne,an),this.addCurrentVertex(an,ot,0,0,Pe),Ne=an}}const xi=Ne&&Ze;let Nn=xi?b:ee?"butt":M;if(xi&&Nn==="round"&&(mn<P?Nn="miter":mn<=2&&(Nn="fakeround")),Nn==="miter"&&mn>k&&(Nn="bevel"),Nn==="bevel"&&(mn>2&&(Nn="flipbevel"),mn<k&&(Nn="miter")),Ne&&this.updateDistance(Ne,Le),Nn==="miter")xt._mult(mn),this.addCurrentVertex(Le,xt,0,0,Pe);else if(Nn==="flipbevel"){if(mn>100)xt=Dt.mult(-1);else{const Wn=mn*ot.add(Dt).mag()/ot.sub(Dt).mag();xt._perp()._mult(Wn*(Gn?-1:1))}this.addCurrentVertex(Le,xt,0,0,Pe),this.addCurrentVertex(Le,xt.mult(-1),0,0,Pe)}else if(Nn==="bevel"||Nn==="fakeround"){const Wn=-Math.sqrt(mn*mn-1),an=Gn?Wn:0,ji=Gn?0:Wn;if(Ne&&this.addCurrentVertex(Le,ot,an,ji,Pe),Nn==="fakeround"){const ir=Math.round(180*Qn/Math.PI/20);for(let Ui=1;Ui<ir;Ui++){let Ai=Ui/ir;if(Ai!==.5){const Cs=Ai-.5;Ai+=Ai*Cs*(Ai-1)*((1.0904+Nt*(Nt*(3.55645-1.43519*Nt)-3.2452))*Cs*Cs+(.848013+Nt*(.215638*Nt-1.06021)))}const Dr=Dt.sub(ot)._mult(Ai)._add(ot)._unit()._mult(Gn?-1:1);this.addHalfVertex(Le,Dr.x,Dr.y,!1,Gn,0,Pe)}}Ze&&this.addCurrentVertex(Le,Dt,-an,-ji,Pe)}else if(Nn==="butt")this.addCurrentVertex(Le,xt,0,0,Pe);else if(Nn==="square"){const Wn=Ne?1:-1;this.addCurrentVertex(Le,xt,Wn,Wn,Pe)}else Nn==="round"&&(Ne&&(this.addCurrentVertex(Le,ot,0,0,Pe),this.addCurrentVertex(Le,ot,1,1,Pe,!0)),Ze&&(this.addCurrentVertex(Le,Dt,-1,-1,Pe,!0),this.addCurrentVertex(Le,Dt,0,0,Pe)));if(Kn&&dt<ie-1){const Wn=Le.dist(Ze);if(Wn>2*Be){const an=Le.add(Ze.sub(Le)._mult(Be/Wn)._round());this.updateDistance(Le,an),this.addCurrentVertex(an,Dt,0,0,Pe),Le=an}}}}addCurrentVertex(u,d,b,M,k,P=!1){const K=d.y*M-d.x,G=-d.y-d.x*M;this.addHalfVertex(u,d.x+d.y*b,d.y-d.x*b,P,!1,b,k),this.addHalfVertex(u,K,G,P,!0,-M,k),this.distance>Qp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,b,M,k,P))}addHalfVertex({x:u,y:d},b,M,k,P,K,G){const ee=.5*(this.lineClips?this.scaledDistance*(Qp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(k?1:0),(d<<1)+(P?1:0),Math.round(63*b)+128,Math.round(63*M)+128,1+(K===0?0:K<0?-1:1)|(63&ee)<<2,ee>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ie=G.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ie,this.e2),G.primitiveLength++),P?this.e2=ie:this.e1=ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}hasLineDasharray(u){for(const d of u){const b=d.paint.get("line-dasharray");if(b&&!b.isConstant())return!0}return!1}addLineDashDependencies(u,d,b,M){for(const k of u){const P=k.paint.get("line-dasharray");if(!P||P.value.kind==="constant")continue;const K=k.layout.get("line-cap")==="round",G={dasharray:P.value.evaluate({zoom:b-1},d,{}),round:K},ee={dasharray:P.value.evaluate({zoom:b},d,{}),round:K},ie={dasharray:P.value.evaluate({zoom:b+1},d,{}),round:K},ce=`${G.dasharray.join(",")},${G.round}`,Be=`${ee.dasharray.join(",")},${ee.round}`,Pe=`${ie.dasharray.join(",")},${ie.round}`;M.dashDependencies[ce]=G,M.dashDependencies[Be]=ee,M.dashDependencies[Pe]=ie,d.dashes[k.id]={min:ce,mid:Be,max:Pe}}}}let pc,q1;Jn("LineBucket",qp,{omit:["layers","patternFeatures"]});var ug={get paint(){return q1=q1||new us({"line-opacity":new _i(gt.paint_line["line-opacity"]),"line-color":new _i(gt.paint_line["line-color"]),"line-translate":new ri(gt.paint_line["line-translate"]),"line-translate-anchor":new ri(gt.paint_line["line-translate-anchor"]),"line-width":new _i(gt.paint_line["line-width"]),"line-gap-width":new _i(gt.paint_line["line-gap-width"]),"line-offset":new _i(gt.paint_line["line-offset"]),"line-blur":new _i(gt.paint_line["line-blur"]),"line-dasharray":new td(gt.paint_line["line-dasharray"]),"line-pattern":new td(gt.paint_line["line-pattern"]),"line-gradient":new hh(gt.paint_line["line-gradient"])})},get layout(){return pc=pc||new us({"line-cap":new ri(gt.layout_line["line-cap"]),"line-join":new _i(gt.layout_line["line-join"]),"line-miter-limit":new ri(gt.layout_line["line-miter-limit"]),"line-round-limit":new ri(gt.layout_line["line-round-limit"]),"line-sort-key":new _i(gt.layout_line["line-sort-key"])})}};class yC extends _i{possiblyEvaluate(u,d){return d=new wo(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,b,M){return d=Ke({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,b,M)}}let ud;class Y1 extends ul{constructor(u,d){super(u,ug,d),this.gradientVersion=0,ud||(ud=new yC(ug.paint.properties["line-width"].specification),ud.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(b){return b._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof Ss,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=ud.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new qp(u)}queryRadius(u){const d=u,b=Jd(Yd("line-width",this,d),Yd("line-gap-width",this,d)),M=Yd("line-offset",this,d);return b/2+Math.abs(M)+gh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:P}){const K=Wf(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-k.bearingInRadians,P),G=P/2*Jd(this.paint.get("line-width").evaluate(d,b),this.paint.get("line-gap-width").evaluate(d,b)),ee=this.paint.get("line-offset").evaluate(d,b);return ee&&(M=(function(ie,ce){const Be=[];for(let Pe=0;Pe<ie.length;Pe++){const Le=ie[Pe],Ne=[];for(let Ze=0;Ze<Le.length;Ze++){const ot=Le[Ze-1],Dt=Le[Ze],dt=Le[Ze+1],xt=Ze===0?new c(0,0):Dt.sub(ot)._unit()._perp(),Nt=Ze===Le.length-1?new c(0,0):dt.sub(Dt)._unit()._perp(),Xt=xt._add(Nt)._unit(),mn=Xt.x*Nt.x+Xt.y*Nt.y;mn!==0&&Xt._mult(1/mn),Ne.push(Xt._mult(ce)._add(Dt))}Be.push(Ne)}return Be})(M,ee*P)),(function(ie,ce,Be){for(let Pe=0;Pe<ce.length;Pe++){const Le=ce[Pe];if(ie.length>=3){for(let Ne=0;Ne<Le.length;Ne++)if(qi(ie,Le[Ne]))return!0}if(ad(ie,Le,Be))return!0}return!1})(K,M,G)}isTileClipped(){return!0}}function Jd(f,u){return u>0?u+2*f:f}const Sl=co([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hf=co([{name:"a_projected_pos",components:3,type:"Float32"}],4);co([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cg=co([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);co([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cd=co([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Bv=co([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Iv(f,u,d){return f.sections.forEach((b=>{b.text=(function(M,k,P){const K=k.layout.get("text-transform").evaluate(P,{});return K==="uppercase"?M=M.toLocaleUpperCase():K==="lowercase"&&(M=M.toLocaleLowerCase()),ll.applyArabicShaping&&(M=ll.applyArabicShaping(M)),M})(b.text,u,d)})),f}co([{name:"triangle",components:3,type:"Uint16"}]),co([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),co([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),co([{type:"Float32",name:"offsetX"}]),co([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),co([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ag={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var aa=24;const I0=4294967296,zc=1/I0,kv=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class ju{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,d,b=this.length){for(;this.pos<b;){const M=this.readVarint(),k=M>>3,P=this.pos;this.type=7&M,u(k,d,this),this.pos===P&&this.skip(M)}return d}readMessage(u,d){return this.readFields(u,d,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*I0;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*I0;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const d=this.buf;let b,M;return M=d[this.pos++],b=127&M,M<128?b:(M=d[this.pos++],b|=(127&M)<<7,M<128?b:(M=d[this.pos++],b|=(127&M)<<14,M<128?b:(M=d[this.pos++],b|=(127&M)<<21,M<128?b:(M=d[this.pos],b|=(15&M)<<28,(function(k,P,K){const G=K.buf;let ee,ie;if(ie=G[K.pos++],ee=(112&ie)>>4,ie<128||(ie=G[K.pos++],ee|=(127&ie)<<3,ie<128)||(ie=G[K.pos++],ee|=(127&ie)<<10,ie<128)||(ie=G[K.pos++],ee|=(127&ie)<<17,ie<128)||(ie=G[K.pos++],ee|=(127&ie)<<24,ie<128)||(ie=G[K.pos++],ee|=(1&ie)<<31,ie<128))return Yp(k,ee,P);throw new Error("Expected varint not more than 10 bytes")})(b,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&kv?kv.decode(this.buf.subarray(d,u)):(function(b,M,k){let P="",K=M;for(;K<k;){const G=b[K];let ee,ie,ce,Be=null,Pe=G>239?4:G>223?3:G>191?2:1;if(K+Pe>k)break;Pe===1?G<128&&(Be=G):Pe===2?(ee=b[K+1],(192&ee)==128&&(Be=(31&G)<<6|63&ee,Be<=127&&(Be=null))):Pe===3?(ee=b[K+1],ie=b[K+2],(192&ee)==128&&(192&ie)==128&&(Be=(15&G)<<12|(63&ee)<<6|63&ie,(Be<=2047||Be>=55296&&Be<=57343)&&(Be=null))):Pe===4&&(ee=b[K+1],ie=b[K+2],ce=b[K+3],(192&ee)==128&&(192&ie)==128&&(192&ce)==128&&(Be=(15&G)<<18|(63&ee)<<12|(63&ie)<<6|63&ce,(Be<=65535||Be>=1114112)&&(Be=null))),Be===null?(Be=65533,Pe=1):Be>65535&&(Be-=65536,P+=String.fromCharCode(Be>>>10&1023|55296),Be=56320|1023&Be),P+=String.fromCharCode(Be),K+=Pe}return P})(this.buf,d,u)}readBytes(){const u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d}readPackedVarint(u=[],d){const b=this.readPackedEnd();for(;this.pos<b;)u.push(this.readVarint(d));return u}readPackedSVarint(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const d=7&u;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(u,d){this.writeVarint(u<<3|d)}realloc(u){let d=this.length||16;for(;d<this.pos+u;)d*=2;if(d!==this.length){const b=new Uint8Array(d);b.set(this.buf),this.buf=b,this.dataView=new DataView(b.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*zc),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*zc),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?(function(d,b){let M,k;if(d>=0?(M=d%4294967296|0,k=d/4294967296|0):(M=~(-d%4294967296),k=~(-d/4294967296),4294967295^M?M=M+1|0:(M=0,k=k+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),(function(P,K,G){G.buf[G.pos++]=127&P|128,P>>>=7,G.buf[G.pos++]=127&P|128,P>>>=7,G.buf[G.pos++]=127&P|128,P>>>=7,G.buf[G.pos++]=127&P|128,G.buf[G.pos]=127&(P>>>=7)})(M,0,b),(function(P,K){const G=(7&P)<<4;K.buf[K.pos++]|=G|((P>>>=3)?128:0),P&&(K.buf[K.pos++]=127&P|((P>>>=7)?128:0),P&&(K.buf[K.pos++]=127&P|((P>>>=7)?128:0),P&&(K.buf[K.pos++]=127&P|((P>>>=7)?128:0),P&&(K.buf[K.pos++]=127&P|((P>>>=7)?128:0),P&&(K.buf[K.pos++]=127&P)))))})(k,b)})(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const d=this.pos;this.pos=(function(M,k,P){for(let K,G,ee=0;ee<k.length;ee++){if(K=k.charCodeAt(ee),K>55295&&K<57344){if(!G){K>56319||ee+1===k.length?(M[P++]=239,M[P++]=191,M[P++]=189):G=K;continue}if(K<56320){M[P++]=239,M[P++]=191,M[P++]=189,G=K;continue}K=G-55296<<10|K-56320|65536,G=null}else G&&(M[P++]=239,M[P++]=191,M[P++]=189,G=null);K<128?M[P++]=K:(K<2048?M[P++]=K>>6|192:(K<65536?M[P++]=K>>12|224:(M[P++]=K>>18|240,M[P++]=K>>12&63|128),M[P++]=K>>6&63|128),M[P++]=63&K|128)}return P})(this.buf,u,this.pos);const b=this.pos-d;b>=128&&Tv(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const d=u.length;this.writeVarint(d),this.realloc(d);for(let b=0;b<d;b++)this.buf[this.pos++]=u[b]}writeRawMessage(u,d){this.pos++;const b=this.pos;u(d,this);const M=this.pos-b;M>=128&&Tv(b,M,this),this.pos=b-1,this.writeVarint(M),this.pos+=M}writeMessage(u,d,b){this.writeTag(u,2),this.writeRawMessage(d,b)}writePackedVarint(u,d){d.length&&this.writeMessage(u,vC,d)}writePackedSVarint(u,d){d.length&&this.writeMessage(u,ef,d)}writePackedBoolean(u,d){d.length&&this.writeMessage(u,hg,d)}writePackedFloat(u,d){d.length&&this.writeMessage(u,$1,d)}writePackedDouble(u,d){d.length&&this.writeMessage(u,Rv,d)}writePackedFixed32(u,d){d.length&&this.writeMessage(u,bC,d)}writePackedSFixed32(u,d){d.length&&this.writeMessage(u,k0,d)}writePackedFixed64(u,d){d.length&&this.writeMessage(u,CC,d)}writePackedSFixed64(u,d){d.length&&this.writeMessage(u,_C,d)}writeBytesField(u,d){this.writeTag(u,2),this.writeBytes(d)}writeFixed32Field(u,d){this.writeTag(u,5),this.writeFixed32(d)}writeSFixed32Field(u,d){this.writeTag(u,5),this.writeSFixed32(d)}writeFixed64Field(u,d){this.writeTag(u,1),this.writeFixed64(d)}writeSFixed64Field(u,d){this.writeTag(u,1),this.writeSFixed64(d)}writeVarintField(u,d){this.writeTag(u,0),this.writeVarint(d)}writeSVarintField(u,d){this.writeTag(u,0),this.writeSVarint(d)}writeStringField(u,d){this.writeTag(u,2),this.writeString(d)}writeFloatField(u,d){this.writeTag(u,5),this.writeFloat(d)}writeDoubleField(u,d){this.writeTag(u,1),this.writeDouble(d)}writeBooleanField(u,d){this.writeVarintField(u,+d)}}function Yp(f,u,d){return d?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Tv(f,u,d){const b=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(b);for(let M=d.pos-1;M>=f;M--)d.buf[M+b]=d.buf[M]}function vC(f,u){for(let d=0;d<f.length;d++)u.writeVarint(f[d])}function ef(f,u){for(let d=0;d<f.length;d++)u.writeSVarint(f[d])}function $1(f,u){for(let d=0;d<f.length;d++)u.writeFloat(f[d])}function Rv(f,u){for(let d=0;d<f.length;d++)u.writeDouble(f[d])}function hg(f,u){for(let d=0;d<f.length;d++)u.writeBoolean(f[d])}function bC(f,u){for(let d=0;d<f.length;d++)u.writeFixed32(f[d])}function k0(f,u){for(let d=0;d<f.length;d++)u.writeSFixed32(f[d])}function CC(f,u){for(let d=0;d<f.length;d++)u.writeFixed64(f[d])}function _C(f,u){for(let d=0;d<f.length;d++)u.writeSFixed64(f[d])}function V1(f,u,d){f===1&&d.readMessage(Dv,u)}function Dv(f,u,d){if(f===3){const{id:b,bitmap:M,width:k,height:P,left:K,top:G,advance:ee}=d.readMessage(e2,{});u.push({id:b,bitmap:new tg({width:k+6,height:P+6},M),metrics:{width:k,height:P,left:K,top:G,advance:ee}})}}function e2(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}function xC(f){let u=0,d=0;for(const P of f)u+=P.w*P.h,d=Math.max(d,P.w);f.sort(((P,K)=>K.h-P.h));const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let M=0,k=0;for(const P of f)for(let K=b.length-1;K>=0;K--){const G=b[K];if(!(P.w>G.w||P.h>G.h)){if(P.x=G.x,P.y=G.y,k=Math.max(k,P.y+P.h),M=Math.max(M,P.x+P.w),P.w===G.w&&P.h===G.h){const ee=b.pop();ee&&K<b.length&&(b[K]=ee)}else P.h===G.h?(G.x+=P.w,G.w-=P.w):P.w===G.w?(G.y+=P.h,G.h-=P.h):(b.push({x:G.x+P.w,y:G.y,w:G.w-P.w,h:P.h}),G.y+=P.h,G.h-=P.h);break}}return{w:M,h:k,fill:u/(M*k)||0}}class Pv{constructor(u,{pixelRatio:d,version:b,stretchX:M,stretchY:k,content:P,textFitWidth:K,textFitHeight:G}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=M,this.stretchY=k,this.content=P,this.version=b,this.textFitWidth=K,this.textFitHeight=G}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Uv{constructor(u,d){const b={},M={};this.haveRenderCallbacks=[];const k=[];this.addImages(u,b,k),this.addImages(d,M,k);const{w:P,h:K}=xC(k),G=new Cu({width:P||1,height:K||1});for(const ee in u){const ie=u[ee],ce=b[ee].paddedRect;Cu.copy(ie.data,G,{x:0,y:0},{x:ce.x+1,y:ce.y+1},ie.data)}for(const ee in d){const ie=d[ee],ce=M[ee].paddedRect,Be=ce.x+1,Pe=ce.y+1,Le=ie.data.width,Ne=ie.data.height;Cu.copy(ie.data,G,{x:0,y:0},{x:Be,y:Pe},ie.data),Cu.copy(ie.data,G,{x:0,y:Ne-1},{x:Be,y:Pe-1},{width:Le,height:1}),Cu.copy(ie.data,G,{x:0,y:0},{x:Be,y:Pe+Ne},{width:Le,height:1}),Cu.copy(ie.data,G,{x:Le-1,y:0},{x:Be-1,y:Pe},{width:1,height:Ne}),Cu.copy(ie.data,G,{x:0,y:0},{x:Be+Le,y:Pe},{width:1,height:Ne})}this.image=G,this.iconPositions=b,this.patternPositions=M}addImages(u,d,b){for(const M in u){const k=u[M],P={x:0,y:0,w:k.data.width+2,h:k.data.height+2};b.push(P),d[M]=new Pv(P,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in u.updatedImages)this.patchUpdatedImage(this.iconPositions[b],u.getImage(b),d),this.patchUpdatedImage(this.patternPositions[b],u.getImage(b),d)}patchUpdatedImage(u,d,b){if(!u||!d||u.version===d.version)return;u.version=d.version;const[M,k]=u.tl;b.update(d.data,void 0,{x:M,y:k})}}var tf;Jn("ImagePosition",Pv),Jn("ImageAtlas",Uv),s.ao=void 0,(tf=s.ao||(s.ao={}))[tf.none=0]="none",tf[tf.horizontal=1]="horizontal",tf[tf.vertical=2]="vertical",tf[tf.horizontalOnly=3]="horizontalOnly";class Ad{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,d,b){const M=new Ad;return M.scale=u||1,M.fontStack=d,M.verticalAlign=b||"bottom",M}static forImage(u,d){const b=new Ad;return b.imageName=u,b.verticalAlign=d||"bottom",b}}class nf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const b=new nf;for(let M=0;M<u.sections.length;M++){const k=u.sections[M];k.image?b.addImageSection(k):b.addTextSection(k,d)}return b}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let d="";for(let b=0;b<u.length;b++){const M=u.charCodeAt(b+1)||null,k=u.charCodeAt(b-1)||null;d+=M&&Ql(M)&&!Ag[u[b+1]]||k&&Ql(k)&&!Ag[u[b-1]]||!Ag[u[b]]?u[b]:Ag[u[b]]}return d})(this.text)}trim(){let u=0;for(let b=0;b<this.text.length&&T0[this.text.charCodeAt(b)];b++)u++;let d=this.text.length;for(let b=this.text.length-1;b>=0&&b>=u&&T0[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const b=new nf;return b.text=this.text.substring(u,d),b.sectionIndex=this.sectionIndex.slice(u,d),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,d)=>Math.max(u,this.sections[d].scale)),0)}getMaxImageSize(u){let d=0,b=0;for(let M=0;M<this.length();M++){const k=this.getSection(M);if(k.imageName){const P=u[k.imageName];if(!P)continue;const K=P.displaySize;d=Math.max(d,K[0]),b=Math.max(b,K[1])}}return{maxImageWidth:d,maxImageHeight:b}}addTextSection(u,d){this.text+=u.text,this.sections.push(Ad.forText(u.scale,u.fontStack||d,u.verticalAlign));const b=this.sections.length-1;for(let M=0;M<u.text.length;++M)this.sectionIndex.push(b)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void ft("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(Ad.forImage(d,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):ft("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zf(f,u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le){const Ne=nf.fromFeature(f,M);let Ze;ce===s.ao.vertical&&Ne.verticalizePunctuation();const{processBidirectionalText:ot,processStyledBidirectionalText:Dt}=ll;if(ot&&Ne.sections.length===1){Ze=[];const Nt=ot(Ne.toString(),Qo(Ne,ee,k,u,b,Pe));for(const Xt of Nt){const mn=new nf;mn.text=Xt,mn.sections=Ne.sections;for(let Qn=0;Qn<Xt.length;Qn++)mn.sectionIndex.push(0);Ze.push(mn)}}else if(Dt){Ze=[];const Nt=Dt(Ne.text,Ne.sectionIndex,Qo(Ne,ee,k,u,b,Pe));for(const Xt of Nt){const mn=new nf;mn.text=Xt[0],mn.sectionIndex=Xt[1],mn.sections=Ne.sections,Ze.push(mn)}}else Ze=(function(Nt,Xt){const mn=[],Qn=Nt.text;let Kn=0;for(const Gn of Xt)mn.push(Nt.substring(Kn,Gn)),Kn=Gn;return Kn<Qn.length&&mn.push(Nt.substring(Kn,Qn.length)),mn})(Ne,Qo(Ne,ee,k,u,b,Pe));const dt=[],xt={positionedLines:dt,text:Ne.toString(),top:ie[1],bottom:ie[1],left:ie[0],right:ie[0],writingMode:ce,iconsInText:!1,verticalizable:!1};return(function(Nt,Xt,mn,Qn,Kn,Gn,xi,Nn,Wn,an,ji,ir){let Ui=0,Ai=0,Dr=0,Cs=0;const ba=Nn==="right"?1:Nn==="left"?0:.5,El=aa/ir;let yc=0;for(const Do of Kn){Do.trim();const la=Do.getMaxScale(),Ca={positionedGlyphs:[],lineOffset:0};Nt.positionedLines[yc]=Ca;const qs=Ca.positionedGlyphs;let Wu=0;if(!Do.length()){Ai+=Gn,++yc;continue}const Gc=t2(Qn,Do,El);for(let Qu=0;Qu<Do.length();Qu++){const _a=Do.getSection(Qu),xa=Do.getSectionIndex(Qu),Xa=Do.getCharCode(Qu),La=J1(Wn,ji,Xa);let Po;if(_a.imageName){if(Nt.iconsInText=!0,_a.scale=_a.scale*El,Po=i2(_a,La,la,Gc,Qn),!Po)continue;Wu=Math.max(Wu,Po.imageOffset)}else if(Po=n2(_a,Xa,La,Gc,Xt,mn),!Po)continue;const{rect:Wc,metrics:Xp,baselineOffset:qu}=Po;qs.push({glyph:Xa,imageName:_a.imageName,x:Ui,y:Ai+qu+-17,vertical:La,scale:_a.scale,fontStack:_a.fontStack,sectionIndex:xa,metrics:Xp,rect:Wc}),La?(Nt.verticalizable=!0,Ui+=(_a.imageName?Xp.advance:aa)*_a.scale+an):Ui+=Xp.advance*_a.scale+an}qs.length!==0&&(Dr=Math.max(Ui-an,Dr),fg(qs,0,qs.length-1,ba)),Ui=0,Ca.lineOffset=Math.max(Wu,(la-1)*aa);const Ys=Gn*la+Wu;Ai+=Ys,Cs=Math.max(Ys,Cs),++yc}const{horizontalAlign:Ua,verticalAlign:Qs}=P0(xi);(function(Do,la,Ca,qs,Wu,Gc,Ys,Qu,_a){const xa=(la-Ca)*Wu;let Xa=0;Xa=Gc!==Ys?-Qu*qs- -17:-qs*_a*Ys+.5*Ys;for(const La of Do)for(const Po of La.positionedGlyphs)Po.x+=xa,Po.y+=Xa})(Nt.positionedLines,ba,Ua,Qs,Dr,Cs,Gn,Ai,Kn.length),Nt.top+=-Qs*Ai,Nt.bottom=Nt.top+Ai,Nt.left+=-Ua*Dr,Nt.right=Nt.left+Dr})(xt,u,d,b,Ze,P,K,G,ce,ee,Be,Le),!(function(Nt){for(const Xt of Nt)if(Xt.positionedGlyphs.length!==0)return!1;return!0})(dt)&&xt}const T0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Lv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Kv={40:!0};function R0(f,u,d,b,M,k){if(u.imageName){const P=b[u.imageName];return P?P.displaySize[0]*u.scale*aa/k+M:0}{const P=d[u.fontStack],K=P&&P[f];return K?K.metrics.advance*u.scale+M:0}}function H1(f,u,d,b){const M=Math.pow(f-u,2);return b?f<u?M/2:2*M:M+Math.abs(d)*d}function D0(f,u,d){let b=0;return f===10&&(b-=1e4),d&&(b+=150),f!==40&&f!==65288||(b+=50),u!==41&&u!==65289||(b+=50),b}function Z1(f,u,d,b,M,k){let P=null,K=H1(u,d,M,k);for(const G of b){const ee=H1(u-G.x,d,M,k)+G.badness;ee<=K&&(P=G,K=ee)}return{index:f,x:u,priorBreak:P,badness:K}}function X1(f){return f?X1(f.priorBreak).concat(f.index):[]}function Qo(f,u,d,b,M,k){if(!f)return[];const P=[],K=(function(ce,Be,Pe,Le,Ne,Ze){let ot=0;for(let Dt=0;Dt<ce.length();Dt++){const dt=ce.getSection(Dt);ot+=R0(ce.getCharCode(Dt),dt,Le,Ne,Be,Ze)}return ot/Math.max(1,Math.ceil(ot/Pe))})(f,u,d,b,M,k),G=f.text.indexOf("")>=0;let ee=0;for(let ce=0;ce<f.length();ce++){const Be=f.getSection(ce),Pe=f.getCharCode(ce);if(T0[Pe]||(ee+=R0(Pe,Be,b,M,u,k)),ce<f.length()-1){const Le=!((ie=Pe)<11904)&&(!!nr["CJK Compatibility Forms"](ie)||!!nr["CJK Compatibility"](ie)||!!nr["CJK Strokes"](ie)||!!nr["CJK Symbols and Punctuation"](ie)||!!nr["Enclosed CJK Letters and Months"](ie)||!!nr["Halfwidth and Fullwidth Forms"](ie)||!!nr["Ideographic Description Characters"](ie)||!!nr["Vertical Forms"](ie)||ah.test(String.fromCodePoint(ie)));(Lv[Pe]||Le||Be.imageName||ce!==f.length()-2&&Kv[f.getCharCode(ce+1)])&&P.push(Z1(ce+1,ee,K,P,D0(Pe,f.getCharCode(ce+1),Le&&G),!1))}}var ie;return X1(Z1(f.length(),ee,K,P,0,!0))}function P0(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function t2(f,u,d){const b=u.getMaxScale()*aa,{maxImageWidth:M,maxImageHeight:k}=u.getMaxImageSize(f),P=Math.max(b,k*d);return{verticalLineContentWidth:Math.max(b,M*d),horizontalLineContentHeight:P}}function dg(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function J1(f,u,d){return!(f===s.ao.horizontal||!u&&!Du(d)||u&&(T0[d]||(b=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(b)))));var b}function n2(f,u,d,b,M,k){const P=k[f.fontStack],K=(function(ee,ie,ce,Be){if(ee&&ee.rect)return ee;const Pe=ie[ce.fontStack],Le=Pe&&Pe[Be];return Le?{rect:null,metrics:Le.metrics}:null})(P&&P[u],M,f,u);if(K===null)return null;let G;if(d)G=b.verticalLineContentWidth-f.scale*aa;else{const ee=dg(f.verticalAlign);G=(b.horizontalLineContentHeight-f.scale*aa)*ee}return{rect:K.rect,metrics:K.metrics,baselineOffset:G}}function i2(f,u,d,b,M){const k=M[f.imageName];if(!k)return null;const P=k.paddedRect,K=k.displaySize,G={width:K[0],height:K[1],left:1,top:-3,advance:u?K[1]:K[0]};let ee;if(u)ee=b.verticalLineContentWidth-K[1]*f.scale;else{const ie=dg(f.verticalAlign);ee=(b.horizontalLineContentHeight-K[1]*f.scale)*ie}return{rect:P,metrics:G,baselineOffset:ee,imageOffset:(u?K[0]:K[1])*f.scale-aa*d}}function fg(f,u,d,b){if(b===0)return;const M=f[d],k=(f[d].x+M.metrics.advance*M.scale)*b;for(let P=u;P<=d;P++)f[P].x-=k}function $p(f,u,d){const{horizontalAlign:b,verticalAlign:M}=P0(d),k=u[0]-f.displaySize[0]*b,P=u[1]-f.displaySize[1]*M;return{image:f,top:P,bottom:P+f.displaySize[1],left:k,right:k+f.displaySize[0]}}function ey(f){var u,d;let b=f.left,M=f.top,k=f.right-b,P=f.bottom-M;const K=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",G=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",ee=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(G==="proportional"){if(K==="stretchOnly"&&k/P<ee||K==="proportional"){const ie=Math.ceil(P*ee);b*=ie/k,k=ie}}else if(K==="proportional"&&G==="stretchOnly"&&ee!==0&&k/P>ee){const ie=Math.ceil(k/ee);M*=ie/P,P=ie}return{x1:b,y1:M,x2:b+k,y2:M+P}}function U0(f,u,d,b,M,k){const P=f.image;let K;if(P.content){const Ze=P.content,ot=P.pixelRatio||1;K=[Ze[0]/ot,Ze[1]/ot,P.displaySize[0]-Ze[2]/ot,P.displaySize[1]-Ze[3]/ot]}const G=u.left*k,ee=u.right*k;let ie,ce,Be,Pe;d==="width"||d==="both"?(Pe=M[0]+G-b[3],ce=M[0]+ee+b[1]):(Pe=M[0]+(G+ee-P.displaySize[0])/2,ce=Pe+P.displaySize[0]);const Le=u.top*k,Ne=u.bottom*k;return d==="height"||d==="both"?(ie=M[1]+Le-b[0],Be=M[1]+Ne+b[2]):(ie=M[1]+(Le+Ne-P.displaySize[1])/2,Be=ie+P.displaySize[1]),{image:P,top:ie,right:ce,bottom:Be,left:Pe,collisionPadding:K}}const vh=128,mc=32640;function bh(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new wo(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:M}=d;let k=0;for(;k<b.length&&b[k]<=f;)k++;k=Math.max(0,k-1);let P=k;for(;P<b.length&&b[P]<f+1;)P++;P=Math.min(b.length-1,P);const K=b[k],G=b[P];return d.kind==="composite"?{kind:"composite",minZoom:K,maxZoom:G,interpolationType:M}:{kind:"camera",minZoom:K,maxZoom:G,minSize:d.evaluate(new wo(K)),maxSize:d.evaluate(new wo(G)),interpolationType:M}}}function Vp(f,u,d){let b="never";const M=f.get(u);return M?b=M:f.get(d)&&(b="always"),b}const r2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function L0(f,u,d,b,M,k,P,K,G,ee,ie,ce,Be){const Pe=K?Math.min(mc,Math.round(K[0])):0,Le=K?Math.min(mc,Math.round(K[1])):0;f.emplaceBack(u,d,Math.round(32*b),Math.round(32*M),k,P,(Pe<<1)+(G?1:0),Le,16*ee,16*ie,256*ce,256*Be)}function ty(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function MC(f){for(const u of f.sections)if(Dc(u.text))return!0;return!1}class ny{constructor(u){this.layoutVertexArray=new Wt,this.indexArray=new Hi,this.programConfigurations=u,this.segments=new dr,this.dynamicLayoutVertexArray=new kn,this.opacityVertexArray=new Tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ce}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,b,M){this.isEmpty()||(b&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Sl.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Hf.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,r2,!0),this.opacityVertexBuffer.itemSize=1),(b||M)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Jn("SymbolBuffers",ny);class Fv{constructor(u,d,b){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new b,this.segments=new dr,this.collisionVertexArray=new Xn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,cg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Jn("CollisionBuffers",Fv);class $l{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=Pn(globalThis)?Math.min(u.overscaling,128):u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((P=>P.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bh(this.zoom,d["text-size"]),this.iconSizeData=bh(this.zoom,d["icon-size"]);const b=this.layers[0].layout,M=b.get("symbol-sort-key"),k=b.get("symbol-z-order");this.canOverlap=Vp(b,"text-overlap","text-allow-overlap")!=="never"||Vp(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map((P=>s.ao[P]))),this.stateDependentLayerIds=this.layers.filter((P=>P.isStateDependent())).map((P=>P.id)),this.sourceID=u.sourceID}createArrays(){this.text=new ny(new lA(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new ny(new lA(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new We,this.lineVertexArray=new Je,this.symbolInstances=new Ue,this.textAnchorOffsets=new tt}calculateGlyphDependencies(u,d,b,M,k){for(let P=0;P<u.length;P++)if(d[u.charCodeAt(P)]=!0,(b||M)&&k){const K=Ag[u.charAt(P)];K&&(d[K.charCodeAt(0)]=!0)}}populate(u,d,b){const M=this.layers[0],k=M.layout,P=k.get("text-font"),K=k.get("text-field"),G=k.get("icon-image"),ee=(K.value.kind!=="constant"||K.value.value instanceof Ko&&!K.value.value.isEmpty()||K.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),ie=G.value.kind!=="constant"||!!G.value.value||Object.keys(G.parameters).length>0,ce=k.get("symbol-sort-key");if(this.features=[],!ee&&!ie)return;const Be=d.iconDependencies,Pe=d.glyphDependencies,Le=d.availableImages,Ne=new wo(this.zoom);for(const{feature:Ze,id:ot,index:Dt,sourceLayerIndex:dt}of u){const xt=M._featureFilter.needGeometry,Nt=Ya(Ze,xt);if(!M._featureFilter.filter(Ne,Nt,b))continue;let Xt,mn;if(xt||(Nt.geometry=uA(Ze)),ee){const Kn=M.getValueAndResolveTokens("text-field",Nt,b,Le),Gn=Ko.factory(Kn),xi=this.hasRTLText=this.hasRTLText||MC(Gn);(!xi||ll.getRTLTextPluginStatus()==="unavailable"||xi&&ll.isParsed())&&(Xt=Iv(Gn,M,Nt))}if(ie){const Kn=M.getValueAndResolveTokens("icon-image",Nt,b,Le);mn=Kn instanceof ss?Kn:ss.fromString(Kn)}if(!Xt&&!mn)continue;const Qn=this.sortFeaturesByKey?ce.evaluate(Nt,{},b):void 0;if(this.features.push({id:ot,text:Xt,icon:mn,index:Dt,sourceLayerIndex:dt,geometry:Nt.geometry,properties:Ze.properties,type:Np.types[Ze.type],sortKey:Qn}),mn&&(Be[mn.name]=!0),Xt){const Kn=P.evaluate(Nt,{},b).join(","),Gn=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ao.vertical)>=0;for(const xi of Xt.sections)if(xi.image)Be[xi.image.name]=!0;else{const Nn=gu(Xt.toString()),Wn=xi.fontStack||Kn,an=Pe[Wn]=Pe[Wn]||{};this.calculateGlyphDependencies(xi.text,an,Gn,this.allowVerticalPlacement,Nn)}}}k.get("symbol-placement")==="line"&&(this.features=(function(Ze){const ot={},Dt={},dt=[];let xt=0;function Nt(Kn){dt.push(Ze[Kn]),xt++}function Xt(Kn,Gn,xi){const Nn=Dt[Kn];return delete Dt[Kn],Dt[Gn]=Nn,dt[Nn].geometry[0].pop(),dt[Nn].geometry[0]=dt[Nn].geometry[0].concat(xi[0]),Nn}function mn(Kn,Gn,xi){const Nn=ot[Gn];return delete ot[Gn],ot[Kn]=Nn,dt[Nn].geometry[0].shift(),dt[Nn].geometry[0]=xi[0].concat(dt[Nn].geometry[0]),Nn}function Qn(Kn,Gn,xi){const Nn=xi?Gn[0][Gn[0].length-1]:Gn[0][0];return`${Kn}:${Nn.x}:${Nn.y}`}for(let Kn=0;Kn<Ze.length;Kn++){const Gn=Ze[Kn],xi=Gn.geometry,Nn=Gn.text?Gn.text.toString():null;if(!Nn){Nt(Kn);continue}const Wn=Qn(Nn,xi),an=Qn(Nn,xi,!0);if(Wn in Dt&&an in ot&&Dt[Wn]!==ot[an]){const ji=mn(Wn,an,xi),ir=Xt(Wn,an,dt[ji].geometry);delete ot[Wn],delete Dt[an],Dt[Qn(Nn,dt[ir].geometry,!0)]=ir,dt[ji].geometry=null}else Wn in Dt?Xt(Wn,an,xi):an in ot?mn(Wn,an,xi):(Nt(Kn),ot[Wn]=xt-1,Dt[an]=xt-1)}return dt.filter((Kn=>Kn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ze,ot)=>Ze.sortKey-ot.sortKey))}update(u,d,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const b=this.lineVertexArray.length;if(u.segment!==void 0){let M=u.dist(d[u.segment+1]),k=u.dist(d[u.segment]);const P={};for(let K=u.segment+1;K<d.length;K++)P[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:M},K<d.length-1&&(M+=d[K+1].dist(d[K]));for(let K=u.segment||0;K>=0;K--)P[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:k},K>0&&(k+=d[K-1].dist(d[K]));for(let K=0;K<d.length;K++){const G=P[K];this.lineVertexArray.emplaceBack(G.x,G.y,G.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(u,d,b,M,k,P,K,G,ee,ie,ce,Be){const Pe=u.indexArray,Le=u.layoutVertexArray,Ne=u.segments.prepareSegment(4*d.length,Le,Pe,this.canOverlap?P.sortKey:void 0),Ze=this.glyphOffsetArray.length,ot=Ne.vertexLength,Dt=this.allowVerticalPlacement&&K===s.ao.vertical?Math.PI/2:0,dt=P.text&&P.text.sections;for(let xt=0;xt<d.length;xt++){const{tl:Nt,tr:Xt,bl:mn,br:Qn,tex:Kn,pixelOffsetTL:Gn,pixelOffsetBR:xi,minFontScaleX:Nn,minFontScaleY:Wn,glyphOffset:an,isSDF:ji,sectionIndex:ir}=d[xt],Ui=Ne.vertexLength,Ai=an[1];L0(Le,G.x,G.y,Nt.x,Ai+Nt.y,Kn.x,Kn.y,b,ji,Gn.x,Gn.y,Nn,Wn),L0(Le,G.x,G.y,Xt.x,Ai+Xt.y,Kn.x+Kn.w,Kn.y,b,ji,xi.x,Gn.y,Nn,Wn),L0(Le,G.x,G.y,mn.x,Ai+mn.y,Kn.x,Kn.y+Kn.h,b,ji,Gn.x,xi.y,Nn,Wn),L0(Le,G.x,G.y,Qn.x,Ai+Qn.y,Kn.x+Kn.w,Kn.y+Kn.h,b,ji,xi.x,xi.y,Nn,Wn),ty(u.dynamicLayoutVertexArray,G,Dt),Pe.emplaceBack(Ui,Ui+2,Ui+1),Pe.emplaceBack(Ui+1,Ui+2,Ui+3),Ne.vertexLength+=4,Ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(an[0]),xt!==d.length-1&&ir===d[xt+1].sectionIndex||u.programConfigurations.populatePaintArrays(Le.length,P,P.index,{imagePositions:{},canonical:Be,formattedSection:dt&&dt[ir]})}u.placedSymbolArray.emplaceBack(G.x,G.y,Ze,this.glyphOffsetArray.length-Ze,ot,ee,ie,G.segment,b?b[0]:0,b?b[1]:0,M[0],M[1],K,0,!1,0,ce)}_addCollisionDebugVertex(u,d,b,M,k,P){return d.emplaceBack(0,0),u.emplaceBack(b.x,b.y,M,k,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(u,d,b,M,k,P,K){const G=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),ee=G.vertexLength,ie=k.layoutVertexArray,ce=k.collisionVertexArray,Be=K.anchorX,Pe=K.anchorY;this._addCollisionDebugVertex(ie,ce,P,Be,Pe,new c(u,d)),this._addCollisionDebugVertex(ie,ce,P,Be,Pe,new c(b,d)),this._addCollisionDebugVertex(ie,ce,P,Be,Pe,new c(b,M)),this._addCollisionDebugVertex(ie,ce,P,Be,Pe,new c(u,M)),G.vertexLength+=4;const Le=k.indexArray;Le.emplaceBack(ee,ee+1),Le.emplaceBack(ee+1,ee+2),Le.emplaceBack(ee+2,ee+3),Le.emplaceBack(ee+3,ee),G.primitiveLength+=4}addDebugCollisionBoxes(u,d,b,M){for(let k=u;k<d;k++){const P=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,M?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fv(ln,cd.members,Er),this.iconCollisionBox=new Fv(ln,cd.members,Er);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,b,M,k,P,K,G,ee){const ie={};for(let ce=d;ce<b;ce++){const Be=u.get(ce);ie.textBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},ie.textFeatureIndex=Be.featureIndex;break}for(let ce=M;ce<k;ce++){const Be=u.get(ce);ie.verticalTextBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},ie.verticalTextFeatureIndex=Be.featureIndex;break}for(let ce=P;ce<K;ce++){const Be=u.get(ce);ie.iconBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},ie.iconFeatureIndex=Be.featureIndex;break}for(let ce=G;ce<ee;ce++){const Be=u.get(ce);ie.verticalIconBox={x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,anchorPointX:Be.anchorPointX,anchorPointY:Be.anchorPointY},ie.verticalIconFeatureIndex=Be.featureIndex;break}return ie}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const b=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const b=u.placedSymbolArray.get(d),M=b.vertexStartIndex+4*b.numGlyphs;for(let k=b.vertexStartIndex;k<M;k+=4)u.indexArray.emplaceBack(k,k+2,k+1),u.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),b=Math.cos(u),M=[],k=[],P=[];for(let K=0;K<this.symbolInstances.length;++K){P.push(K);const G=this.symbolInstances.get(K);M.push(0|Math.round(d*G.anchorX+b*G.anchorY)),k.push(G.featureIndex)}return P.sort(((K,G)=>M[K]-M[G]||k[G]-k[K])),P}addToSortKeyRanges(u,d){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===d?b.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const b=this.symbolInstances.get(d);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(((M,k,P)=>{M>=0&&P.indexOf(M)===k&&this.addIndicesForPlacedSymbol(this.text,M)})),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let zv,jv;Jn("SymbolBucket",$l,{omit:["layers","collisionBoxArray","features","compareText"]}),$l.MAX_GLYPHS=65535,$l.addDynamicAttributes=ty;var rf={get paint(){return jv=jv||new us({"icon-opacity":new _i(gt.paint_symbol["icon-opacity"]),"icon-color":new _i(gt.paint_symbol["icon-color"]),"icon-halo-color":new _i(gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new _i(gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _i(gt.paint_symbol["icon-halo-blur"]),"icon-translate":new ri(gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ri(gt.paint_symbol["icon-translate-anchor"]),"text-opacity":new _i(gt.paint_symbol["text-opacity"]),"text-color":new _i(gt.paint_symbol["text-color"],{runtimeType:Ia,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new _i(gt.paint_symbol["text-halo-color"]),"text-halo-width":new _i(gt.paint_symbol["text-halo-width"]),"text-halo-blur":new _i(gt.paint_symbol["text-halo-blur"]),"text-translate":new ri(gt.paint_symbol["text-translate"]),"text-translate-anchor":new ri(gt.paint_symbol["text-translate-anchor"])})},get layout(){return zv=zv||new us({"symbol-placement":new ri(gt.layout_symbol["symbol-placement"]),"symbol-spacing":new ri(gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ri(gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _i(gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ri(gt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ri(gt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ri(gt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ri(gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ri(gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ri(gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new _i(gt.layout_symbol["icon-size"]),"icon-text-fit":new ri(gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ri(gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new _i(gt.layout_symbol["icon-image"]),"icon-rotate":new _i(gt.layout_symbol["icon-rotate"]),"icon-padding":new _i(gt.layout_symbol["icon-padding"]),"icon-keep-upright":new ri(gt.layout_symbol["icon-keep-upright"]),"icon-offset":new _i(gt.layout_symbol["icon-offset"]),"icon-anchor":new _i(gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ri(gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ri(gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ri(gt.layout_symbol["text-rotation-alignment"]),"text-field":new _i(gt.layout_symbol["text-field"]),"text-font":new _i(gt.layout_symbol["text-font"]),"text-size":new _i(gt.layout_symbol["text-size"]),"text-max-width":new _i(gt.layout_symbol["text-max-width"]),"text-line-height":new ri(gt.layout_symbol["text-line-height"]),"text-letter-spacing":new _i(gt.layout_symbol["text-letter-spacing"]),"text-justify":new _i(gt.layout_symbol["text-justify"]),"text-radial-offset":new _i(gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ri(gt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _i(gt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _i(gt.layout_symbol["text-anchor"]),"text-max-angle":new ri(gt.layout_symbol["text-max-angle"]),"text-writing-mode":new ri(gt.layout_symbol["text-writing-mode"]),"text-rotate":new _i(gt.layout_symbol["text-rotate"]),"text-padding":new ri(gt.layout_symbol["text-padding"]),"text-keep-upright":new ri(gt.layout_symbol["text-keep-upright"]),"text-transform":new _i(gt.layout_symbol["text-transform"]),"text-offset":new _i(gt.layout_symbol["text-offset"]),"text-allow-overlap":new ri(gt.layout_symbol["text-allow-overlap"]),"text-overlap":new ri(gt.layout_symbol["text-overlap"]),"text-ignore-placement":new ri(gt.layout_symbol["text-ignore-placement"]),"text-optional":new ri(gt.layout_symbol["text-optional"])})}};class Cr{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:kr,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jn("FormatSectionOverride",Cr,{omit:["defaultValue"]});class pg extends ul{constructor(u,d){super(u,rf,d)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const M=[];for(const k of b)M.indexOf(k)<0&&M.push(k);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,b,M){const k=this.layout.get(u).evaluate(d,{},b,M),P=this._unevaluatedLayout._values[u];return P.isDataDriven()||Qh(P.value)||!k?k:(function(K,G){return G.replace(/{([^{}]+)}/g,((ee,ie)=>K&&ie in K?String(K[ie]):""))})(d.properties,k)}createBucket(u){return new $l(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of rf.paint.overridableProperties){if(!pg.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),b=new Cr(d),M=new Wh(b,d.property.specification);let k=null;k=d.value.kind==="constant"||d.value.kind==="source"?new jl("source",M):new qh("composite",M,d.value.zoomStops),this.paint._values[u]=new Ra(d.property,k,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,b){return!(!this.layout||d.isDataDriven()||b.isDataDriven())&&pg.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const b=u.get("text-field"),M=rf.paint.properties[d];let k=!1;const P=K=>{for(const G of K)if(M.overrides&&M.overrides.hasOverride(G))return void(k=!0)};if(b.value.kind==="constant"&&b.value.value instanceof Ko)P(b.value.value.sections);else if(b.value.kind==="source"||b.value.kind==="composite"){const K=ee=>{k||(ee instanceof J&&Ni(ee.value)===Vr?P(ee.value.sections):ee instanceof XA?P(ee.sections):ee.eachChild(K))},G=b.value;G._styleExpression&&K(G._styleExpression.expression)}return k}}let gc;var Va={get paint(){return gc=gc||new us({"background-color":new ri(gt.paint_background["background-color"]),"background-pattern":new qa(gt.paint_background["background-pattern"]),"background-opacity":new ri(gt.paint_background["background-opacity"])})}};class K0 extends ul{constructor(u,d){super(u,Va,d)}}class Xf extends ul{constructor(u,d){super(u,{},d),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class wC{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const ho={once:!0},F0=63710088e-1;class Ch{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ch(It(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,b=this.lat*d,M=u.lat*d,k=Math.sin(b)*Math.sin(M)+Math.cos(b)*Math.cos(M)*Math.cos((u.lng-this.lng)*d);return F0*Math.acos(Math.min(k,1))}static convert(u){if(u instanceof Ch)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Ch(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Ch(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const iy=2*Math.PI*F0;function z0(f){return iy*Math.cos(f*Math.PI/180)}function ry(f){return(180+f)/360}function jc(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function mg(f,u){return f/z0(u)}function gg(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function Js(f,u){return f*z0(gg(u))}class Ws{constructor(u,d,b=0){this.x=+u,this.y=+d,this.z=+b}static fromLngLat(u,d=0){const b=Ch.convert(u);return new Ws(ry(b.lng),jc(b.lat),mg(d,b.lat))}toLngLat(){return new Ch(360*this.x-180,gg(this.y))}toAltitude(){return Js(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/iy*(u=gg(this.y),1/Math.cos(u*Math.PI/180));var u}}function Nv(f,u,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[f*b-2*Math.PI*6378137/2,u*b-2*Math.PI*6378137/2]}class oy{constructor(u,d,b){if(!(function(M,k,P){return!(M<0||M>25||P<0||P>=Math.pow(2,M)||k<0||k>=Math.pow(2,M))})(u,d,b))throw new Error(`x=${d}, y=${b}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=b,this.key=Jf(0,u,u,d,b)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,b){const M=(P=this.y,K=this.z,G=Nv(256*(k=this.x),256*(P=Math.pow(2,K)-P-1),K),ee=Nv(256*(k+1),256*(P+1),K),G[0]+","+G[1]+","+ee[0]+","+ee[1]);var k,P,K,G,ee;const ie=(function(ce,Be,Pe){let Le,Ne="";for(let Ze=ce;Ze>0;Ze--)Le=1<<Ze-1,Ne+=(Be&Le?1:0)+(Pe&Le?2:0);return Ne})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,ie).replace(/{bbox-epsg-3857}/g,M)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new c((u.x*d-this.x)*ht,(u.y*d-this.y)*ht)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Gv{constructor(u,d){this.wrap=u,this.canonical=d,this.key=Jf(u,d.z,d.z,d.x,d.y)}}class qr{constructor(u,d,b,M,k){if(this.terrainRttPosMatrix32f=null,u<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${b}`);this.overscaledZ=u,this.wrap=d,this.canonical=new oy(b,+M,+k),this.key=Jf(d,u,b,M,k)}clone(){return new qr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new qr(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qr(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-u;return u>this.canonical.z?Jf(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Jf(this.wrap*+d,u,u,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(u){if(u.wrap!==this.wrap||this.overscaledZ-u.overscaledZ<=0)return!1;if(u.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-u.canonical.z;return!(d<0)&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new qr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,b=2*this.canonical.x,M=2*this.canonical.y;return[new qr(d,this.wrap,d,b,M),new qr(d,this.wrap,d,b+1,M),new qr(d,this.wrap,d,b,M+1),new qr(d,this.wrap,d,b+1,M+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new qr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new qr(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Gv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Ws(u.x-this.wrap,u.y))}}function Jf(f,u,d,b,M){(f*=2)<0&&(f=-1*f-1);const k=1<<d;return(k*k*f+k*M+b).toString(36)+d.toString(36)+u.toString(36)}function Ha(f,u){return u?f.properties[u]:f.id}Jn("CanonicalTileID",oy),Jn("OverscaledTileID",qr,{omit:["terrainRttPosMatrix32f"]});class Hp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const d=new Hp;return d.extend(u(new c(this.minX,this.minY))),d.extend(u(new c(this.maxX,this.minY))),d.extend(u(new c(this.minX,this.maxY))),d.extend(u(new c(this.maxX,this.maxY))),d}static fromPoints(u){const d=new Hp;for(const b of u)d.extend(b);return d}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class sy{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const b=u[d];this._stringToNumber[b]=d,this._numberToString[d]=b}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class yg{constructor(u,d,b,M,k){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=b,u._y=M,this.properties=u.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class vg{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new aA(ht,16,0),this.grid3D=new aA(ht,16,0),this.featureIndexArray=new yt,this.promoteId=d}insert(u,d,b,M,k,P){const K=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,M,k);const G=P?this.grid3D:this.grid;for(let ee=0;ee<d.length;ee++){const ie=d[ee],ce=[1/0,1/0,-1/0,-1/0];for(let Be=0;Be<ie.length;Be++){const Pe=ie[Be];ce[0]=Math.min(ce[0],Pe.x),ce[1]=Math.min(ce[1],Pe.y),ce[2]=Math.max(ce[2],Pe.x),ce[3]=Math.max(ce[3],Pe.y)}ce[0]<ht&&ce[1]<ht&&ce[2]>=0&&ce[3]>=0&&G.insert(K,ce[0],ce[1],ce[2],ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sv(new ju(this.rawTileData)).layers,this.sourceLayerCoder=new sy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,b,M){this.loadVTLayers();const k=u.params,P=ht/u.tileSize/u.scale,K=_l(k.filter,k.globalState),G=u.queryGeometry,ee=u.queryPadding*P,ie=Hp.fromPoints(G),ce=this.grid.query(ie.minX-ee,ie.minY-ee,ie.maxX+ee,ie.maxY+ee),Be=Hp.fromPoints(u.cameraQueryGeometry).expandBy(ee),Pe=this.grid3D.query(Be.minX,Be.minY,Be.maxX,Be.maxY,((Ze,ot,Dt,dt)=>(function(xt,Nt,Xt,mn,Qn){for(const Gn of xt)if(Nt<=Gn.x&&Xt<=Gn.y&&mn>=Gn.x&&Qn>=Gn.y)return!0;const Kn=[new c(Nt,Xt),new c(Nt,Qn),new c(mn,Qn),new c(mn,Xt)];if(xt.length>2){for(const Gn of Kn)if(qi(xt,Gn))return!0}for(let Gn=0;Gn<xt.length-1;Gn++)if(C0(xt[Gn],xt[Gn+1],Kn))return!0;return!1})(u.cameraQueryGeometry,Ze-ee,ot-ee,Dt+ee,dt+ee)));for(const Ze of Pe)ce.push(Ze);ce.sort(j0);const Le={};let Ne;for(let Ze=0;Ze<ce.length;Ze++){const ot=ce[Ze];if(ot===Ne)continue;Ne=ot;const Dt=this.featureIndexArray.get(ot);let dt=null;this.loadMatchingFeature(Le,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,K,k.layers,k.availableImages,d,b,M,((xt,Nt,Xt)=>(dt||(dt=uA(xt)),Nt.queryIntersectsFeature({queryGeometry:G,feature:xt,featureState:Xt,geometry:dt,zoom:this.z,transform:u.transform,pixelsToTileUnits:P,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return Le}loadMatchingFeature(u,d,b,M,k,P,K,G,ee,ie,ce){const Be=this.bucketLayerIDs[d];if(P&&!Be.some((Ze=>P.has(Ze))))return;const Pe=this.sourceLayerCoder.decode(b),Le=this.vtLayers[Pe].feature(M);if(k.needGeometry){const Ze=Ya(Le,!0);if(!k.filter(new wo(this.tileID.overscaledZ),Ze,this.tileID.canonical))return}else if(!k.filter(new wo(this.tileID.overscaledZ),Le))return;const Ne=this.getId(Le,Pe);for(let Ze=0;Ze<Be.length;Ze++){const ot=Be[Ze];if(P&&!P.has(ot))continue;const Dt=G[ot];if(!Dt)continue;let dt={};Ne&&ie&&(dt=ie.getState(Dt.sourceLayer||"_geojsonTileLayer",Ne));const xt=Ke({},ee[ot]);xt.paint=ay(xt.paint,Dt.paint,Le,dt,K),xt.layout=ay(xt.layout,Dt.layout,Le,dt,K);const Nt=!ce||ce(Le,Dt,dt);if(!Nt)continue;const Xt=new yg(Le,this.z,this.x,this.y,Ne);Xt.layer=xt;let mn=u[ot];mn===void 0&&(mn=u[ot]=[]),mn.push({featureIndex:M,feature:Xt,intersectionZ:Nt})}}lookupSymbolFeatures(u,d,b,M,k,P,K,G){const ee={};this.loadVTLayers();const ie=_l(k.filterSpec,k.globalState);for(const ce of u)this.loadMatchingFeature(ee,b,M,ce,ie,P,K,G,d);return ee}hasLayer(u){for(const d of this.bucketLayerIDs)for(const b of d)if(u===b)return!0;return!1}getId(u,d){var b;let M=u.id;return this.promoteId&&(M=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((b=u.properties)===null||b===void 0)&&b.cluster)&&this.promoteId&&(M=Number(u.properties.cluster_id))),M}}function ay(f,u,d,b,M){return Se(f,((k,P)=>{const K=u instanceof Ah?u.get(P):null;return K&&K.evaluate?K.evaluate(d,b,M):K}))}function j0(f,u){return u-f}function bg(f,u,d,b,M){const k=[];for(let P=0;P<f.length;P++){const K=f[P];let G;for(let ee=0;ee<K.length-1;ee++){let ie=K[ee],ce=K[ee+1];ie.x<u&&ce.x<u||(ie.x<u?ie=new c(u,ie.y+(u-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round():ce.x<u&&(ce=new c(u,ie.y+(u-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round()),ie.y<d&&ce.y<d||(ie.y<d?ie=new c(ie.x+(d-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),d)._round():ce.y<d&&(ce=new c(ie.x+(d-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),d)._round()),ie.x>=b&&ce.x>=b||(ie.x>=b?ie=new c(b,ie.y+(b-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round():ce.x>=b&&(ce=new c(b,ie.y+(b-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round()),ie.y>=M&&ce.y>=M||(ie.y>=M?ie=new c(ie.x+(M-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),M)._round():ce.y>=M&&(ce=new c(ie.x+(M-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),M)._round()),G&&ie.equals(G[G.length-1])||(G=[ie],k.push(G)),G.push(ce)))))}}return k}Jn("FeatureIndex",vg,{omit:["rawTileData","sourceLayerCoder"]});class Za extends c{constructor(u,d,b,M){super(u,d),this.angle=b,M!==void 0&&(this.segment=M)}clone(){return new Za(this.x,this.y,this.angle,this.segment)}}function of(f,u,d,b,M){if(u.segment===void 0||d===0)return!0;let k=u,P=u.segment+1,K=0;for(;K>-d/2;){if(P--,P<0)return!1;K-=f[P].dist(k),k=f[P]}K+=f[P].dist(f[P+1]),P++;const G=[];let ee=0;for(;K<d/2;){const ie=f[P],ce=f[P+1];if(!ce)return!1;let Be=f[P-1].angleTo(ie)-ie.angleTo(ce);for(Be=Math.abs((Be+3*Math.PI)%(2*Math.PI)-Math.PI),G.push({distance:K,angleDelta:Be}),ee+=Be;K-G[0].distance>b;)ee-=G.shift().angleDelta;if(ee>M)return!1;P++,K+=ie.dist(ce)}return!0}function ly(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function SC(f,u,d){return f?.6*u*d:0}function Wv(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function o2(f,u,d,b,M,k){const P=SC(d,M,k),K=Wv(d,b)*k;let G=0;const ee=ly(f)/2;for(let ie=0;ie<f.length-1;ie++){const ce=f[ie],Be=f[ie+1],Pe=ce.dist(Be);if(G+Pe>ee){const Le=(ee-G)/Pe,Ne=ta.number(ce.x,Be.x,Le),Ze=ta.number(ce.y,Be.y,Le),ot=new Za(Ne,Ze,Be.angleTo(ce),ie);return ot._round(),!P||of(f,ot,K,P,u)?ot:void 0}G+=Pe}}function EC(f,u,d,b,M,k,P,K,G){const ee=SC(b,k,P),ie=Wv(b,M),ce=ie*P,Be=f[0].x===0||f[0].x===G||f[0].y===0||f[0].y===G;return u-ce<u/4&&(u=ce+u/4),Qv(f,Be?u/2*K%u:(ie/2+2*k)*P*K%u,u,ee,d,ce,Be,!1,G)}function Qv(f,u,d,b,M,k,P,K,G){const ee=k/2,ie=ly(f);let ce=0,Be=u-d,Pe=[];for(let Le=0;Le<f.length-1;Le++){const Ne=f[Le],Ze=f[Le+1],ot=Ne.dist(Ze),Dt=Ze.angleTo(Ne);for(;Be+d<ce+ot;){Be+=d;const dt=(Be-ce)/ot,xt=ta.number(Ne.x,Ze.x,dt),Nt=ta.number(Ne.y,Ze.y,dt);if(xt>=0&&xt<G&&Nt>=0&&Nt<G&&Be-ee>=0&&Be+ee<=ie){const Xt=new Za(xt,Nt,Dt,Le);Xt._round(),b&&!of(f,Xt,k,b,M)||Pe.push(Xt)}}ce+=ot}return K||Pe.length||P||(Pe=Qv(f,ce/2,d,b,M,k,P,!0,G)),Pe}function hd(f,u,d,b){const M=[],k=f.image,P=k.pixelRatio,K=k.paddedRect.w-2,G=k.paddedRect.h-2;let ee={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const ie=k.stretchX||[[0,K]],ce=k.stretchY||[[0,G]],Be=(an,ji)=>an+ji[1]-ji[0],Pe=ie.reduce(Be,0),Le=ce.reduce(Be,0),Ne=K-Pe,Ze=G-Le;let ot=0,Dt=Pe,dt=0,xt=Le,Nt=0,Xt=Ne,mn=0,Qn=Ze;if(k.content&&b){const an=k.content,ji=an[2]-an[0],ir=an[3]-an[1];(k.textFitWidth||k.textFitHeight)&&(ee=ey(f)),ot=or(ie,0,an[0]),dt=or(ce,0,an[1]),Dt=or(ie,an[0],an[2]),xt=or(ce,an[1],an[3]),Nt=an[0]-ot,mn=an[1]-dt,Xt=ji-Dt,Qn=ir-xt}const Kn=ee.x1,Gn=ee.y1,xi=ee.x2-Kn,Nn=ee.y2-Gn,Wn=(an,ji,ir,Ui)=>{const Ai=Nu(an.stretch-ot,Dt,xi,Kn),Dr=Zp(an.fixed-Nt,Xt,an.stretch,Pe),Cs=Nu(ji.stretch-dt,xt,Nn,Gn),ba=Zp(ji.fixed-mn,Qn,ji.stretch,Le),El=Nu(ir.stretch-ot,Dt,xi,Kn),yc=Zp(ir.fixed-Nt,Xt,ir.stretch,Pe),Ua=Nu(Ui.stretch-dt,xt,Nn,Gn),Qs=Zp(Ui.fixed-mn,Qn,Ui.stretch,Le),Do=new c(Ai,Cs),la=new c(El,Cs),Ca=new c(El,Ua),qs=new c(Ai,Ua),Wu=new c(Dr/P,ba/P),Gc=new c(yc/P,Qs/P),Ys=u*Math.PI/180;if(Ys){const xa=Math.sin(Ys),Xa=Math.cos(Ys),La=[Xa,-xa,xa,Xa];Do._matMult(La),la._matMult(La),qs._matMult(La),Ca._matMult(La)}const Qu=an.stretch+an.fixed,_a=ji.stretch+ji.fixed;return{tl:Do,tr:la,bl:qs,br:Ca,tex:{x:k.paddedRect.x+1+Qu,y:k.paddedRect.y+1+_a,w:ir.stretch+ir.fixed-Qu,h:Ui.stretch+Ui.fixed-_a},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wu,pixelOffsetBR:Gc,minFontScaleX:Xt/P/xi,minFontScaleY:Qn/P/Nn,isSDF:d}};if(b&&(k.stretchX||k.stretchY)){const an=uy(ie,Ne,Pe),ji=uy(ce,Ze,Le);for(let ir=0;ir<an.length-1;ir++){const Ui=an[ir],Ai=an[ir+1];for(let Dr=0;Dr<ji.length-1;Dr++)M.push(Wn(Ui,ji[Dr],Ai,ji[Dr+1]))}}else M.push(Wn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:K+1},{fixed:0,stretch:G+1}));return M}function or(f,u,d){let b=0;for(const M of f)b+=Math.max(u,Math.min(d,M[1]))-Math.max(u,Math.min(d,M[0]));return b}function uy(f,u,d){const b=[{fixed:-1,stretch:0}];for(const[M,k]of f){const P=b[b.length-1];b.push({fixed:M-P.stretch,stretch:P.stretch}),b.push({fixed:M-P.stretch,stretch:P.stretch+(k-M)})}return b.push({fixed:u+1,stretch:d}),b}function Nu(f,u,d,b){return f/u*d+b}function Zp(f,u,d,b){return f-u*d/b}Jn("Anchor",Za);class cy{constructor(u,d,b,M,k,P,K,G,ee,ie){var ce;if(this.boxStartIndex=u.length,ee){let Be=P.top,Pe=P.bottom;const Le=P.collisionPadding;Le&&(Be-=Le[1],Pe+=Le[3]);let Ne=Pe-Be;Ne>0&&(Ne=Math.max(10,Ne),this.circleDiameter=Ne)}else{const Be=!((ce=P.image)===null||ce===void 0)&&ce.content&&(P.image.textFitWidth||P.image.textFitHeight)?ey(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Be.y1=Be.y1*K-G[0],Be.y2=Be.y2*K+G[2],Be.x1=Be.x1*K-G[3],Be.x2=Be.x2*K+G[1];const Pe=P.collisionPadding;if(Pe&&(Be.x1-=Pe[0]*K,Be.y1-=Pe[1]*K,Be.x2+=Pe[2]*K,Be.y2+=Pe[3]*K),ie){const Le=new c(Be.x1,Be.y1),Ne=new c(Be.x2,Be.y1),Ze=new c(Be.x1,Be.y2),ot=new c(Be.x2,Be.y2),Dt=ie*Math.PI/180;Le._rotate(Dt),Ne._rotate(Dt),Ze._rotate(Dt),ot._rotate(Dt),Be.x1=Math.min(Le.x,Ne.x,Ze.x,ot.x),Be.x2=Math.max(Le.x,Ne.x,Ze.x,ot.x),Be.y1=Math.min(Le.y,Ne.y,Ze.y,ot.y),Be.y2=Math.max(Le.y,Ne.y,Ze.y,ot.y)}u.emplaceBack(d.x,d.y,Be.x1,Be.y1,Be.x2,Be.y2,b,M,k)}this.boxEndIndex=u.length}}class ts{constructor(u=[],d=(b,M)=>b<M?-1:b>M?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:b}=this,M=d[u];for(;u>0;){const k=u-1>>1,P=d[k];if(b(M,P)>=0)break;d[u]=P,u=k}d[u]=M}_down(u){const{data:d,compare:b}=this,M=this.length>>1,k=d[u];for(;u<M;){let P=1+(u<<1);const K=P+1;if(K<this.length&&b(d[K],d[P])<0&&(P=K),b(d[P],k)>=0)break;d[u]=d[P],u=P}d[u]=k}}function OC(f,u=1,d=!1){const b=Hp.fromPoints(f[0]),M=Math.min(b.width(),b.height());let k=M/2;const P=new ts([],Ay),{minX:K,minY:G,maxX:ee,maxY:ie}=b;if(M===0)return new c(K,G);for(let Pe=K;Pe<ee;Pe+=M)for(let Le=G;Le<ie;Le+=M)P.push(new _h(Pe+k,Le+k,k,f));let ce=(function(Pe){let Le=0,Ne=0,Ze=0;const ot=Pe[0];for(let Dt=0,dt=ot.length,xt=dt-1;Dt<dt;xt=Dt++){const Nt=ot[Dt],Xt=ot[xt],mn=Nt.x*Xt.y-Xt.x*Nt.y;Ne+=(Nt.x+Xt.x)*mn,Ze+=(Nt.y+Xt.y)*mn,Le+=3*mn}return new _h(Ne/Le,Ze/Le,0,Pe)})(f),Be=P.length;for(;P.length;){const Pe=P.pop();(Pe.d>ce.d||!ce.d)&&(ce=Pe,d&&console.log("found best %d after %d probes",Math.round(1e4*Pe.d)/1e4,Be)),Pe.max-ce.d<=u||(k=Pe.h/2,P.push(new _h(Pe.p.x-k,Pe.p.y-k,k,f)),P.push(new _h(Pe.p.x+k,Pe.p.y-k,k,f)),P.push(new _h(Pe.p.x-k,Pe.p.y+k,k,f)),P.push(new _h(Pe.p.x+k,Pe.p.y+k,k,f)),Be+=4)}return d&&(console.log(`num probes: ${Be}`),console.log(`best distance: ${ce.d}`)),ce.p}function Ay(f,u){return u.max-f.max}function _h(f,u,d,b){this.p=new c(f,u),this.h=d,this.d=(function(M,k){let P=!1,K=1/0;for(let G=0;G<k.length;G++){const ee=k[G];for(let ie=0,ce=ee.length,Be=ce-1;ie<ce;Be=ie++){const Pe=ee[ie],Le=ee[Be];Pe.y>M.y!=Le.y>M.y&&M.x<(Le.x-Pe.x)*(M.y-Pe.y)/(Le.y-Pe.y)+Pe.x&&(P=!P),K=Math.min(K,sa(M,Pe,Le))}}return(P?1:-1)*Math.sqrt(K)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}var Vl;s.aE=void 0,(Vl=s.aE||(s.aE={}))[Vl.center=1]="center",Vl[Vl.left=2]="left",Vl[Vl.right=3]="right",Vl[Vl.top=4]="top",Vl[Vl.bottom=5]="bottom",Vl[Vl["top-left"]=6]="top-left",Vl[Vl["top-right"]=7]="top-right",Vl[Vl["bottom-left"]=8]="bottom-left",Vl[Vl["bottom-right"]=9]="bottom-right";const Nc=Number.POSITIVE_INFINITY;function hy(f,u){return u[1]!==Nc?(function(d,b,M){let k=0,P=0;switch(b=Math.abs(b),M=Math.abs(M),d){case"top-right":case"top-left":case"top":P=M-7;break;case"bottom-right":case"bottom-left":case"bottom":P=7-M}switch(d){case"top-right":case"bottom-right":case"right":k=-b;break;case"top-left":case"bottom-left":case"left":k=b}return[k,P]})(f,u[0],u[1]):(function(d,b){let M=0,k=0;b<0&&(b=0);const P=b/Math.SQRT2;switch(d){case"top-right":case"top-left":k=P-7;break;case"bottom-right":case"bottom-left":k=7-P;break;case"bottom":k=7-b;break;case"top":k=b-7}switch(d){case"top-right":case"bottom-right":M=-P;break;case"top-left":case"bottom-left":M=P;break;case"left":M=b;break;case"right":M=-b}return[M,k]})(f,u[0])}function qv(f,u,d){var b;const M=f.layout,k=(b=M.get("text-variable-anchor-offset"))===null||b===void 0?void 0:b.evaluate(u,{},d);if(k){const K=k.values,G=[];for(let ee=0;ee<K.length;ee+=2){const ie=G[ee]=K[ee],ce=K[ee+1].map((Be=>Be*aa));ie.startsWith("top")?ce[1]-=7:ie.startsWith("bottom")&&(ce[1]+=7),G[ee+1]=ce}return new mo(G)}const P=M.get("text-variable-anchor");if(P){let K;K=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(u,{},d)*aa,Nc]:M.get("text-offset").evaluate(u,{},d).map((ee=>ee*aa));const G=[];for(const ee of P)G.push(ee,hy(ee,K));return new mo(G)}return null}function dy(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function BC(f,u,d,b,M,k,P,K,G,ee,ie,ce){let Be=k.textMaxSize.evaluate(u,{});Be===void 0&&(Be=P);const Pe=f.layers[0].layout,Le=Pe.get("icon-offset").evaluate(u,{},ie),Ne=AA(d.horizontal),Ze=P/24,ot=f.tilePixelRatio*Ze,Dt=f.tilePixelRatio*Be/24,dt=f.tilePixelRatio*K,xt=f.tilePixelRatio*Pe.get("symbol-spacing"),Nt=Pe.get("text-padding")*f.tilePixelRatio,Xt=(function(ir,Ui,Ai,Dr=1){const Cs=ir.get("icon-padding").evaluate(Ui,{},Ai),ba=Cs&&Cs.values;return[ba[0]*Dr,ba[1]*Dr,ba[2]*Dr,ba[3]*Dr]})(Pe,u,ie,f.tilePixelRatio),mn=Pe.get("text-max-angle")/180*Math.PI,Qn=Pe.get("text-rotation-alignment")!=="viewport"&&Pe.get("symbol-placement")!=="point",Kn=Pe.get("icon-rotation-alignment")==="map"&&Pe.get("symbol-placement")!=="point",Gn=Pe.get("symbol-placement"),xi=xt/2,Nn=Pe.get("icon-text-fit");let Wn;b&&Nn!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(Wn=U0(b,d.vertical,Nn,Pe.get("icon-text-fit-padding"),Le,Ze)),Ne&&(b=U0(b,Ne,Nn,Pe.get("icon-text-fit-padding"),Le,Ze)));const an=ie?ce.line.getGranularityForZoomLevel(ie.z):1,ji=(ir,Ui)=>{Ui.x<0||Ui.x>=ht||Ui.y<0||Ui.y>=ht||(function(Ai,Dr,Cs,ba,El,yc,Ua,Qs,Do,la,Ca,qs,Wu,Gc,Ys,Qu,_a,xa,Xa,La,Po,Wc,Xp,qu,vc){const dd=Ai.addToLineVertexArray(Dr,Cs);let fd,Jp,_g,sf,A=0,g=0,_=0,I=0,Q=-1,X=-1;const _e={};let Ve=dh("");if(Ai.allowVerticalPlacement&&ba.vertical){const oi=Qs.layout.get("text-rotate").evaluate(Po,{},qu)+90;_g=new cy(Do,Dr,la,Ca,qs,ba.vertical,Wu,Gc,Ys,oi),Ua&&(sf=new cy(Do,Dr,la,Ca,qs,Ua,_a,xa,Ys,oi))}if(El){const oi=Qs.layout.get("icon-rotate").evaluate(Po,{}),rr=Qs.layout.get("icon-text-fit")!=="none",Fr=hd(El,oi,Xp,rr),zr=Ua?hd(Ua,oi,Xp,rr):void 0;Jp=new cy(Do,Dr,la,Ca,qs,El,_a,xa,!1,oi),A=4*Fr.length;const Qc=Ai.iconSizeData;let pd=null;Qc.kind==="source"?(pd=[vh*Qs.layout.get("icon-size").evaluate(Po,{})],pd[0]>mc&&ft(`${Ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Qc.kind==="composite"&&(pd=[vh*Wc.compositeIconSizes[0].evaluate(Po,{},qu),vh*Wc.compositeIconSizes[1].evaluate(Po,{},qu)],(pd[0]>mc||pd[1]>mc)&&ft(`${Ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ai.addSymbols(Ai.icon,Fr,pd,La,Xa,Po,s.ao.none,Dr,dd.lineStartIndex,dd.lineLength,-1,qu),Q=Ai.icon.placedSymbolArray.length-1,zr&&(g=4*zr.length,Ai.addSymbols(Ai.icon,zr,pd,La,Xa,Po,s.ao.vertical,Dr,dd.lineStartIndex,dd.lineLength,-1,qu),X=Ai.icon.placedSymbolArray.length-1)}const Mt=Object.keys(ba.horizontal);for(const oi of Mt){const rr=ba.horizontal[oi];if(!fd){Ve=dh(rr.text);const zr=Qs.layout.get("text-rotate").evaluate(Po,{},qu);fd=new cy(Do,Dr,la,Ca,qs,rr,Wu,Gc,Ys,zr)}const Fr=rr.positionedLines.length===1;if(_+=Cg(Ai,Dr,rr,yc,Qs,Ys,Po,Qu,dd,ba.vertical?s.ao.horizontal:s.ao.horizontalOnly,Fr?Mt:[oi],_e,Q,Wc,qu),Fr)break}ba.vertical&&(I+=Cg(Ai,Dr,ba.vertical,yc,Qs,Ys,Po,Qu,dd,s.ao.vertical,["vertical"],_e,X,Wc,qu));const $t=fd?fd.boxStartIndex:Ai.collisionBoxArray.length,un=fd?fd.boxEndIndex:Ai.collisionBoxArray.length,gn=_g?_g.boxStartIndex:Ai.collisionBoxArray.length,Jt=_g?_g.boxEndIndex:Ai.collisionBoxArray.length,on=Jp?Jp.boxStartIndex:Ai.collisionBoxArray.length,Ri=Jp?Jp.boxEndIndex:Ai.collisionBoxArray.length,sr=sf?sf.boxStartIndex:Ai.collisionBoxArray.length,_s=sf?sf.boxEndIndex:Ai.collisionBoxArray.length;let Lt=-1;const Rt=(oi,rr)=>oi&&oi.circleDiameter?Math.max(oi.circleDiameter,rr):rr;Lt=Rt(fd,Lt),Lt=Rt(_g,Lt),Lt=Rt(Jp,Lt),Lt=Rt(sf,Lt);const qt=Lt>-1?1:0;qt&&(Lt*=vc/aa),Ai.glyphOffsetArray.length>=$l.MAX_GLYPHS&&ft("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Po.sortKey!==void 0&&Ai.addToSortKeyRanges(Ai.symbolInstances.length,Po.sortKey);const fn=qv(Qs,Po,qu),[Ji,jo]=(function(oi,rr){const Fr=oi.length,zr=rr?.values;if(zr?.length>0)for(let Qc=0;Qc<zr.length;Qc+=2){const pd=zr[Qc+1];oi.emplaceBack(s.aE[zr[Qc]],pd[0],pd[1])}return[Fr,oi.length]})(Ai.textAnchorOffsets,fn);Ai.symbolInstances.emplaceBack(Dr.x,Dr.y,_e.right>=0?_e.right:-1,_e.center>=0?_e.center:-1,_e.left>=0?_e.left:-1,_e.vertical||-1,Q,X,Ve,$t,un,gn,Jt,on,Ri,sr,_s,la,_,I,A,g,qt,0,Wu,Lt,Ji,jo)})(f,Ui,ir,d,b,M,Wn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,ot,[Nt,Nt,Nt,Nt],Qn,G,dt,Xt,Kn,Le,u,k,ee,ie,P)};if(Gn==="line")for(const ir of bg(u.geometry,0,0,ht,ht)){const Ui=Qf(ir,an),Ai=EC(Ui,xt,mn,d.vertical||Ne,b,24,Dt,f.overscaling,ht);for(const Dr of Ai)Ne&&IC(f,Ne.text,xi,Dr)||ji(Ui,Dr)}else if(Gn==="line-center"){for(const ir of u.geometry)if(ir.length>1){const Ui=Qf(ir,an),Ai=o2(Ui,mn,d.vertical||Ne,b,24,Dt);Ai&&ji(Ui,Ai)}}else if(u.type==="Polygon")for(const ir of Kh(u.geometry,0)){const Ui=OC(ir,16);ji(Qf(ir[0],an,!0),new Za(Ui.x,Ui.y,0))}else if(u.type==="LineString")for(const ir of u.geometry){const Ui=Qf(ir,an);ji(Ui,new Za(Ui[0].x,Ui[0].y,0))}else if(u.type==="Point")for(const ir of u.geometry)for(const Ui of ir)ji([Ui],new Za(Ui.x,Ui.y,0))}function Cg(f,u,d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le){const Ne=(function(Dt,dt,xt,Nt,Xt,mn,Qn,Kn){const Gn=Nt.layout.get("text-rotate").evaluate(mn,{})*Math.PI/180,xi=[];for(const Nn of dt.positionedLines)for(const Wn of Nn.positionedGlyphs){if(!Wn.rect)continue;const an=Wn.rect||{};let ji=4,ir=!0,Ui=1,Ai=0;const Dr=(Xt||Kn)&&Wn.vertical,Cs=Wn.metrics.advance*Wn.scale/2;if(Kn&&dt.verticalizable&&(Ai=Nn.lineOffset/2-(Wn.imageName?-(aa-Wn.metrics.width*Wn.scale)/2:(Wn.scale-1)*aa)),Wn.imageName){const xa=Qn[Wn.imageName];ir=xa.sdf,Ui=xa.pixelRatio,ji=1/Ui}const ba=Xt?[Wn.x+Cs,Wn.y]:[0,0];let El=Xt?[0,0]:[Wn.x+Cs+xt[0],Wn.y+xt[1]-Ai],yc=[0,0];Dr&&(yc=El,El=[0,0]);const Ua=Wn.metrics.isDoubleResolution?2:1,Qs=(Wn.metrics.left-ji)*Wn.scale-Cs+El[0],Do=(-Wn.metrics.top-ji)*Wn.scale+El[1],la=Qs+an.w/Ua*Wn.scale/Ui,Ca=Do+an.h/Ua*Wn.scale/Ui,qs=new c(Qs,Do),Wu=new c(la,Do),Gc=new c(Qs,Ca),Ys=new c(la,Ca);if(Dr){const xa=new c(-Cs,Cs- -17),Xa=-Math.PI/2,La=12-Cs,Po=new c(22-La,-(Wn.imageName?La:0)),Wc=new c(...yc);qs._rotateAround(Xa,xa)._add(Po)._add(Wc),Wu._rotateAround(Xa,xa)._add(Po)._add(Wc),Gc._rotateAround(Xa,xa)._add(Po)._add(Wc),Ys._rotateAround(Xa,xa)._add(Po)._add(Wc)}if(Gn){const xa=Math.sin(Gn),Xa=Math.cos(Gn),La=[Xa,-xa,xa,Xa];qs._matMult(La),Wu._matMult(La),Gc._matMult(La),Ys._matMult(La)}const Qu=new c(0,0),_a=new c(0,0);xi.push({tl:qs,tr:Wu,bl:Gc,br:Ys,tex:an,writingMode:dt.writingMode,glyphOffset:ba,sectionIndex:Wn.sectionIndex,isSDF:ir,pixelOffsetTL:Qu,pixelOffsetBR:_a,minFontScaleX:0,minFontScaleY:0})}return xi})(0,d,K,M,k,P,b,f.allowVerticalPlacement),Ze=f.textSizeData;let ot=null;Ze.kind==="source"?(ot=[vh*M.layout.get("text-size").evaluate(P,{})],ot[0]>mc&&ft(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ze.kind==="composite"&&(ot=[vh*Pe.compositeTextSizes[0].evaluate(P,{},Le),vh*Pe.compositeTextSizes[1].evaluate(P,{},Le)],(ot[0]>mc||ot[1]>mc)&&ft(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,Ne,ot,K,k,P,ee,u,G.lineStartIndex,G.lineLength,Be,Le);for(const Dt of ie)ce[Dt]=f.text.placedSymbolArray.length-1;return 4*Ne.length}function AA(f){for(const u in f)return f[u];return null}function IC(f,u,d,b){const M=f.compareText;if(u in M){const k=M[u];for(let P=k.length-1;P>=0;P--)if(b.dist(k[P])<d)return!0}else M[u]=[];return M[u].push(b),!1}const N0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class xh{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,b]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=b>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const k=N0[15&b];if(!k)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(u,2,1),[K]=new Uint32Array(u,4,1);return new xh(K,P,k,u)}constructor(u,d=64,b=Float64Array,M){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=b,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const k=N0.indexOf(this.ArrayType),P=2*u*this.ArrayType.BYTES_PER_ELEMENT,K=u*this.IndexArrayType.BYTES_PER_ELEMENT,G=(8-K%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${b}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+G,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+P+K+G),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+G,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=u,this.coords[this._pos++]=d,b}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Yv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,b,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:P,nodeSize:K}=this,G=[0,k.length-1,0],ee=[];for(;G.length;){const ie=G.pop()||0,ce=G.pop()||0,Be=G.pop()||0;if(ce-Be<=K){for(let Ze=Be;Ze<=ce;Ze++){const ot=P[2*Ze],Dt=P[2*Ze+1];ot>=u&&ot<=b&&Dt>=d&&Dt<=M&&ee.push(k[Ze])}continue}const Pe=Be+ce>>1,Le=P[2*Pe],Ne=P[2*Pe+1];Le>=u&&Le<=b&&Ne>=d&&Ne<=M&&ee.push(k[Pe]),(ie===0?u<=Le:d<=Ne)&&(G.push(Be),G.push(Pe-1),G.push(1-ie)),(ie===0?b>=Le:M>=Ne)&&(G.push(Pe+1),G.push(ce),G.push(1-ie))}return ee}within(u,d,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:k,nodeSize:P}=this,K=[0,M.length-1,0],G=[],ee=b*b;for(;K.length;){const ie=K.pop()||0,ce=K.pop()||0,Be=K.pop()||0;if(ce-Be<=P){for(let Ze=Be;Ze<=ce;Ze++)py(k[2*Ze],k[2*Ze+1],u,d)<=ee&&G.push(M[Ze]);continue}const Pe=Be+ce>>1,Le=k[2*Pe],Ne=k[2*Pe+1];py(Le,Ne,u,d)<=ee&&G.push(M[Pe]),(ie===0?u-b<=Le:d-b<=Ne)&&(K.push(Be),K.push(Pe-1),K.push(1-ie)),(ie===0?u+b>=Le:d+b>=Ne)&&(K.push(Pe+1),K.push(ce),K.push(1-ie))}return G}}function Yv(f,u,d,b,M,k){if(M-b<=d)return;const P=b+M>>1;kC(f,u,P,b,M,k),Yv(f,u,d,b,P-1,1-k),Yv(f,u,d,P+1,M,1-k)}function kC(f,u,d,b,M,k){for(;M>b;){if(M-b>600){const ee=M-b+1,ie=d-b+1,ce=Math.log(ee),Be=.5*Math.exp(2*ce/3),Pe=.5*Math.sqrt(ce*Be*(ee-Be)/ee)*(ie-ee/2<0?-1:1);kC(f,u,d,Math.max(b,Math.floor(d-ie*Be/ee+Pe)),Math.min(M,Math.floor(d+(ee-ie)*Be/ee+Pe)),k)}const P=u[2*d+k];let K=b,G=M;for(FA(f,u,b,d),u[2*M+k]>P&&FA(f,u,b,M);K<G;){for(FA(f,u,K,G),K++,G--;u[2*K+k]<P;)K++;for(;u[2*G+k]>P;)G--}u[2*b+k]===P?FA(f,u,b,G):(G++,FA(f,u,G,M)),G<=d&&(b=G+1),d<=G&&(M=G-1)}}function FA(f,u,d,b){fy(f,d,b),fy(u,2*d,2*b),fy(u,2*d+1,2*b+1)}function fy(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function py(f,u,d,b){const M=f-d,k=u-b;return M*M+k*k}var $v;s.cx=void 0,($v=s.cx||(s.cx={})).create="create",$v.load="load",$v.fullLoad="fullLoad";let my=null,G0=[];const hl=1e3/60,Gu="loadTime",Vv="fullLoadTime",TC={mark(f){performance.mark(f)},frame(f){const u=f;my!=null&&G0.push(u-my),my=u},clearMetrics(){my=null,G0=[],performance.clearMeasures(Gu),performance.clearMeasures(Vv);for(const f in s.cx)performance.clearMarks(s.cx[f])},getPerformanceMetrics(){performance.measure(Gu,s.cx.create,s.cx.load),performance.measure(Vv,s.cx.create,s.cx.fullLoad);const f=performance.getEntriesByName(Gu)[0].duration,u=performance.getEntriesByName(Vv)[0].duration,d=G0.length,b=1/(G0.reduce(((k,P)=>k+P),0)/d/1e3),M=G0.filter((k=>k>hl)).reduce(((k,P)=>k+(P-hl)/hl),0);return{loadTime:f,fullLoadTime:u,fps:b,percentDroppedFrames:M/(d+M)*100,totalFrames:d}}};s.$=ht,s.A=H,s.B=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},s.C=ta,s.D=ri,s.E=Ht,s.F=wo,s.G=$m,s.H=Pn,s.I=Pv,s.J=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new wC((()=>this.process())),this.subscription=Hn(this.target,"message",(d=>this.receive(d)),!1),this.globalScope=kt(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((d,b)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10),k=u?Hn(u.signal,"abort",(()=>{k?.unsubscribe(),delete this.resolveRejects[M];const G={id:M,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(G)}),ho):null;this.resolveRejects[M]={resolve:G=>{k?.unsubscribe(),d(G)},reject:G=>{k?.unsubscribe(),b(G)}};const P=[],K=Object.assign(Object.assign({},f),{id:M,sourceMapId:this.mapId,origin:location.origin,data:Xh(f.data,P)});this.target.postMessage(K,{transfer:P})}))}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const b=this.abortControllers[d];return delete this.abortControllers[d],void(b&&b.abort())}if(kt(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const M=this.resolveRejects[f];return delete this.resolveRejects[f],M?void(u.error?M.reject(sh(u.error)):M.resolve(sh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=sh(u.data),b=new AbortController;this.abortControllers[f]=b;try{const M=yield this.messageHandlers[u.type](u.sourceMapId,d,b);this.completeTask(f,null,M)}catch(M){this.completeTask(f,M)}}))}completeTask(f,u,d){const b=[];delete this.abortControllers[f];const M={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Xh(u):null,data:Xh(d,b)};this.target.postMessage(M,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.K=xe,s.L=function(){var f=new H(16);return H!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.M=function(f,u,d){var b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne=d[0],Ze=d[1],ot=d[2];return u===f?(f[12]=u[0]*Ne+u[4]*Ze+u[8]*ot+u[12],f[13]=u[1]*Ne+u[5]*Ze+u[9]*ot+u[13],f[14]=u[2]*Ne+u[6]*Ze+u[10]*ot+u[14],f[15]=u[3]*Ne+u[7]*Ze+u[11]*ot+u[15]):(M=u[1],k=u[2],P=u[3],K=u[4],G=u[5],ee=u[6],ie=u[7],ce=u[8],Be=u[9],Pe=u[10],Le=u[11],f[0]=b=u[0],f[1]=M,f[2]=k,f[3]=P,f[4]=K,f[5]=G,f[6]=ee,f[7]=ie,f[8]=ce,f[9]=Be,f[10]=Pe,f[11]=Le,f[12]=b*Ne+K*Ze+ce*ot+u[12],f[13]=M*Ne+G*Ze+Be*ot+u[13],f[14]=k*Ne+ee*Ze+Pe*ot+u[14],f[15]=P*Ne+ie*Ze+Le*ot+u[15]),f},s.N=function(f,u,d){var b=d[0],M=d[1],k=d[2];return f[0]=u[0]*b,f[1]=u[1]*b,f[2]=u[2]*b,f[3]=u[3]*b,f[4]=u[4]*M,f[5]=u[5]*M,f[6]=u[6]*M,f[7]=u[7]*M,f[8]=u[8]*k,f[9]=u[9]*k,f[10]=u[10]*k,f[11]=u[11]*k,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.O=function(f,u,d){var b=u[0],M=u[1],k=u[2],P=u[3],K=u[4],G=u[5],ee=u[6],ie=u[7],ce=u[8],Be=u[9],Pe=u[10],Le=u[11],Ne=u[12],Ze=u[13],ot=u[14],Dt=u[15],dt=d[0],xt=d[1],Nt=d[2],Xt=d[3];return f[0]=dt*b+xt*K+Nt*ce+Xt*Ne,f[1]=dt*M+xt*G+Nt*Be+Xt*Ze,f[2]=dt*k+xt*ee+Nt*Pe+Xt*ot,f[3]=dt*P+xt*ie+Nt*Le+Xt*Dt,f[4]=(dt=d[4])*b+(xt=d[5])*K+(Nt=d[6])*ce+(Xt=d[7])*Ne,f[5]=dt*M+xt*G+Nt*Be+Xt*Ze,f[6]=dt*k+xt*ee+Nt*Pe+Xt*ot,f[7]=dt*P+xt*ie+Nt*Le+Xt*Dt,f[8]=(dt=d[8])*b+(xt=d[9])*K+(Nt=d[10])*ce+(Xt=d[11])*Ne,f[9]=dt*M+xt*G+Nt*Be+Xt*Ze,f[10]=dt*k+xt*ee+Nt*Pe+Xt*ot,f[11]=dt*P+xt*ie+Nt*Le+Xt*Dt,f[12]=(dt=d[12])*b+(xt=d[13])*K+(Nt=d[14])*ce+(Xt=d[15])*Ne,f[13]=dt*M+xt*G+Nt*Be+Xt*Ze,f[14]=dt*k+xt*ee+Nt*Pe+Xt*ot,f[15]=dt*P+xt*ie+Nt*Le+Xt*Dt,f},s.P=c,s.Q=function(f,u){const d={};for(let b=0;b<u.length;b++){const M=u[b];M in f&&(d[M]=f[M])}return d},s.R=Cu,s.S=Ch,s.T=Kp,s.U=jc,s.V=ry,s.W=F,s.X=j,s.Y=xn,s.Z=qr,s._=a,s.a=se,s.a$=Ee,s.a0=function(f,u){var d,b,M,k,P;if(!f)return u??{};if(!u)return f;let K=Object.assign({},f);if(u.removeAll&&(K={removeAll:!0}),u.remove){const G=new Set(u.remove);K.add&&(K.add=K.add.filter((ie=>!G.has(ie.id)))),K.update&&(K.update=K.update.filter((ie=>!G.has(ie.id))));const ee=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map((ie=>ie.id)));u.remove=u.remove.filter((ie=>!ee.has(ie)))}if(u.remove){const G=new Set(K.remove?K.remove.concat(u.remove):u.remove);K.remove=Array.from(G.values())}if(u.add){const G=K.add?K.add.concat(u.add):u.add,ee=new Map(G.map((ie=>[ie.id,ie])));K.add=Array.from(ee.values())}if(u.update){const G=new Map((b=K.update)===null||b===void 0?void 0:b.map((ee=>[ee.id,ee])));for(const ee of u.update){const ie=(M=G.get(ee.id))!==null&&M!==void 0?M:{id:ee.id};ee.newGeometry&&(ie.newGeometry=ee.newGeometry),ee.addOrUpdateProperties&&(ie.addOrUpdateProperties=((k=ie.addOrUpdateProperties)!==null&&k!==void 0?k:[]).concat(ee.addOrUpdateProperties)),ee.removeProperties&&(ie.removeProperties=((P=ie.removeProperties)!==null&&P!==void 0?P:[]).concat(ee.removeProperties)),ee.removeAllProperties&&(ie.removeAllProperties=!0),G.set(ee.id,ie)}K.update=Array.from(G.values())}return K.remove&&K.add&&(K.remove=K.remove.filter((G=>K.add.findIndex((ee=>ee.id===G))===-1))),K},s.a1=Ws,s.a2=Hp,s.a3=25,s.a4=oy,s.a5=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((d=>{u.onloadstart=()=>{d(u)};for(const b of f){const M=window.document.createElement("source");De(b)||(u.crossOrigin="Anonymous"),M.src=b,u.appendChild(M)}}))},s.a6=nn,s.a7=function(){return Ie++},s.a8=re,s.a9=$l,s.aA=function(f){let u=1/0,d=1/0,b=-1/0,M=-1/0;for(const k of f)u=Math.min(u,k.x),d=Math.min(d,k.y),b=Math.max(b,k.x),M=Math.max(M,k.y);return[u,d,b,M]},s.aB=aa,s.aC=ke,s.aD=function(f,u,d,b,M=!1){if(!d[0]&&!d[1])return[0,0];const k=M?b==="map"?-f.bearingInRadians:0:b==="viewport"?f.bearingInRadians:0;if(k){const P=Math.sin(k),K=Math.cos(k);d=[d[0]*K-d[1]*P,d[0]*P+d[1]*K]}return[M?d[0]:ke(u,d[0],f.zoom),M?d[1]:ke(u,d[1],f.zoom)]},s.aF=Vp,s.aG=dy,s.aH=P0,s.aI=xh,s.aJ=co,s.aK=jp,s.aL=lt,s.aM=dr,s.aN=Hi,s.aO=It,s.aP=Tt,s.aQ=Js,s.aR=ve,s.aS=ae,s.aT=function(f){var u=new H(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},s.aU=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},s.aV=function(f,u){var d=u[0],b=u[1],M=u[2],k=d*d+b*b+M*M;return k>0&&(k=1/Math.sqrt(k)),f[0]=u[0]*k,f[1]=u[1]*k,f[2]=u[2]*k,f},s.aW=pe,s.aX=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},s.aY=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},s.aZ=z,s.a_=function(f,u,d){const b=u[0]*d[0]+u[1]*d[1]+u[2]*d[2];return b===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/b},s.aa=_l,s.ab=Ya,s.ac=yg,s.ad=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,b,M,k)=>{const P=M||k;return u[b]=!P||P.toLowerCase(),""})),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},s.ae=Ct,s.af=85.051129,s.ag=Un,s.ah=function(f){return Math.pow(2,f)},s.ai=N,s.aj=mg,s.ak=function(f){return Math.log(f)/Math.LN2},s.al=function(f){var u=f[0],d=f[1];return u*u+d*d},s.am=function(f){if(!f.length)return new Set;const u=Math.max(...f.map((G=>G.canonical.z)));let d=1/0,b=-1/0,M=1/0,k=-1/0;const P=[];for(const G of f){const{x:ee,y:ie,z:ce}=G.canonical,Be=Math.pow(2,u-ce),Pe=ee*Be,Le=ie*Be;P.push({id:G,x:Pe,y:Le}),Pe<d&&(d=Pe),Pe>b&&(b=Pe),Le<M&&(M=Le),Le>k&&(k=Le)}const K=new Set;for(const G of P)G.x!==d&&G.x!==b&&G.y!==M&&G.y!==k||K.add(G.id);return K},s.an=function(f,u){let d=0,b=0;if(f.kind==="constant")b=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:M,minZoom:k,maxZoom:P}=f,K=M?Ct(Au.interpolationFactor(M,u,k,P),0,1):0;f.kind==="camera"?b=ta.number(f.minSize,f.maxSize,K):d=K}return{uSizeT:d,uSize:b}},s.ap=function(f,{uSize:u,uSizeT:d},{lowerSize:b,upperSize:M}){return f.kind==="source"?b/vh:f.kind==="composite"?ta.number(b/vh,M/vh,d):u},s.aq=function(f,u){var d=u[0],b=u[1],M=u[2],k=u[3],P=u[4],K=u[5],G=u[6],ee=u[7],ie=u[8],ce=u[9],Be=u[10],Pe=u[11],Le=u[12],Ne=u[13],Ze=u[14],ot=u[15],Dt=d*K-b*P,dt=d*G-M*P,xt=d*ee-k*P,Nt=b*G-M*K,Xt=b*ee-k*K,mn=M*ee-k*G,Qn=ie*Ne-ce*Le,Kn=ie*Ze-Be*Le,Gn=ie*ot-Pe*Le,xi=ce*Ze-Be*Ne,Nn=ce*ot-Pe*Ne,Wn=Be*ot-Pe*Ze,an=Dt*Wn-dt*Nn+xt*xi+Nt*Gn-Xt*Kn+mn*Qn;return an?(f[0]=(K*Wn-G*Nn+ee*xi)*(an=1/an),f[1]=(M*Nn-b*Wn-k*xi)*an,f[2]=(Ne*mn-Ze*Xt+ot*Nt)*an,f[3]=(Be*Xt-ce*mn-Pe*Nt)*an,f[4]=(G*Gn-P*Wn-ee*Kn)*an,f[5]=(d*Wn-M*Gn+k*Kn)*an,f[6]=(Ze*xt-Le*mn-ot*dt)*an,f[7]=(ie*mn-Be*xt+Pe*dt)*an,f[8]=(P*Nn-K*Gn+ee*Qn)*an,f[9]=(b*Gn-d*Nn-k*Qn)*an,f[10]=(Le*Xt-Ne*xt+ot*Dt)*an,f[11]=(ce*xt-ie*Xt-Pe*Dt)*an,f[12]=(K*Kn-P*xi-G*Qn)*an,f[13]=(d*xi-b*Kn+M*Qn)*an,f[14]=(Ne*dt-Le*Nt-Ze*Dt)*an,f[15]=(ie*Nt-ce*dt+Be*Dt)*an,f):null},s.ar=qe,s.as=function(f){var u=f[0],d=f[1];return Math.sqrt(u*u+d*d)},s.at=function(f){return f[0]=0,f[1]=0,f},s.au=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},s.av=ty,s.aw=Te,s.ax=function(f,u,d,b){const M=u.y-f.y,k=u.x-f.x,P=b.y-d.y,K=b.x-d.x,G=P*k-K*M;if(G===0)return null;const ee=(K*(f.y-d.y)-P*(f.x-d.x))/G;return new c(f.x+ee*k,f.y+ee*M)},s.ay=bg,s.az=Xm,s.b=zn,s.b$=class extends Al{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(f);this.gl.uniform1fv(this.location,u)}}},s.b0=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f[3]=u[3]*d,f},s.b1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},s.b2=Gv,s.b3=Jf,s.b4=function(f,u,d,b,M){var k=1/Math.tan(u/2);if(f[0]=k/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=k,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,M!=null&&M!==1/0){var P=1/(b-M);f[10]=(M+b)*P,f[14]=2*M*b*P}else f[10]=-1,f[14]=-2*b;return f},s.b5=function(f){var u=new H(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.b6=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),k=u[0],P=u[1],K=u[2],G=u[3],ee=u[4],ie=u[5],ce=u[6],Be=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=k*M+ee*b,f[1]=P*M+ie*b,f[2]=K*M+ce*b,f[3]=G*M+Be*b,f[4]=ee*M-k*b,f[5]=ie*M-P*b,f[6]=ce*M-K*b,f[7]=Be*M-G*b,f},s.b7=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),k=u[4],P=u[5],K=u[6],G=u[7],ee=u[8],ie=u[9],ce=u[10],Be=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=k*M+ee*b,f[5]=P*M+ie*b,f[6]=K*M+ce*b,f[7]=G*M+Be*b,f[8]=ee*M-k*b,f[9]=ie*M-P*b,f[10]=ce*M-K*b,f[11]=Be*M-G*b,f},s.b8=function(){const f=new Float32Array(16);return N(f),f},s.b9=function(){const f=new Float64Array(16);return N(f),f},s.bA=function(f,u){const d=Oe(f,360),b=Oe(u,360),M=b-d,k=b>d?M-360:M+360;return Math.abs(M)<Math.abs(k)?M:k},s.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},s.bC=function(f,u,d,b){const M=Math.sqrt(f*f+u*u),k=Math.sqrt(d*d+b*b);f/=M,u/=M,d/=k,b/=k;const P=Math.acos(f*d+u*b);return-u*d+f*b>0?P:-P},s.bD=function(f,u){const d=Oe(f,2*Math.PI),b=Oe(u,2*Math.PI);return Math.min(Math.abs(d-b),Math.abs(d-b+2*Math.PI),Math.abs(d-b-2*Math.PI))},s.bE=function(){const f={},u=gt.$version;for(const d in gt.$root){const b=gt.$root[d];if(b.required){let M=null;M=d==="version"?u:b.type==="array"?[]:{},M!=null&&(f[d]=M)}}return f},s.bF=Kf,s.bG=Xe,s.bH=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let b=0;b<u.length;b++)if(!f(u[b],d[b]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const b in u)if(!f(u[b],d[b]))return!1;return!0}return u===d},s.bI=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=ni(f[d],u[f[d].ref]));return f},s.bJ=function(f,u){if(f.type==="custom")return new Xf(f,u);switch(f.type){case"background":return new K0(f,u);case"circle":return new bv(f,u);case"color-relief":return new AC(f,u);case"fill":return new Yf(f,u);case"fill-extrusion":return new lg(f,u);case"heatmap":return new U1(f,u);case"hillshade":return new $d(f,u);case"line":return new Y1(f,u);case"raster":return new xl(f,u);case"symbol":return new pg(f,u)}},s.bK=f=>f.type==="raster",s.bL=st,s.bM=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!In(f.version,u.version))return[{command:"setStyle",args:[u]}];In(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),In(f.state,u.state)||d.push({command:"setGlobalState",args:[u.state]}),In(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),In(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),In(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),In(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),In(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),In(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),In(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),In(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),In(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),In(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),In(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),In(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const b={},M=[];(function(P,K,G,ee){let ie;for(ie in K=K||{},P=P||{})Object.prototype.hasOwnProperty.call(P,ie)&&(Object.prototype.hasOwnProperty.call(K,ie)||Xi(ie,G,ee));for(ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&(Object.prototype.hasOwnProperty.call(P,ie)?In(P[ie],K[ie])||(P[ie].type==="geojson"&&K[ie].type==="geojson"&&ur(P,K,ie)?Ln(G,{command:"setGeoJSONSourceData",args:[ie,K[ie].data]}):Di(ie,K,G,ee)):Zn(ie,K,G))})(f.sources,u.sources,M,b);const k=[];f.layers&&f.layers.forEach((P=>{"source"in P&&b[P.source]?d.push({command:"removeLayer",args:[P.id]}):k.push(P)})),d=d.concat(M),(function(P,K,G){K=K||[];const ee=(P=P||[]).map(Si),ie=K.map(Si),ce=P.reduce(er,{}),Be=K.reduce(er,{}),Pe=ee.slice(),Le=Object.create(null);let Ne,Ze,ot,Dt,dt;for(let xt=0,Nt=0;xt<ee.length;xt++)Ne=ee[xt],Object.prototype.hasOwnProperty.call(Be,Ne)?Nt++:(Ln(G,{command:"removeLayer",args:[Ne]}),Pe.splice(Pe.indexOf(Ne,Nt),1));for(let xt=0,Nt=0;xt<ie.length;xt++)Ne=ie[ie.length-1-xt],Pe[Pe.length-1-xt]!==Ne&&(Object.prototype.hasOwnProperty.call(ce,Ne)?(Ln(G,{command:"removeLayer",args:[Ne]}),Pe.splice(Pe.lastIndexOf(Ne,Pe.length-Nt),1)):Nt++,Dt=Pe[Pe.length-xt],Ln(G,{command:"addLayer",args:[Be[Ne],Dt]}),Pe.splice(Pe.length-xt,0,Ne),Le[Ne]=!0);for(let xt=0;xt<ie.length;xt++)if(Ne=ie[xt],Ze=ce[Ne],ot=Be[Ne],!Le[Ne]&&!In(Ze,ot))if(In(Ze.source,ot.source)&&In(Ze["source-layer"],ot["source-layer"])&&In(Ze.type,ot.type)){for(dt in fi(Ze.layout,ot.layout,G,Ne,null,"setLayoutProperty"),fi(Ze.paint,ot.paint,G,Ne,null,"setPaintProperty"),In(Ze.filter,ot.filter)||Ln(G,{command:"setFilter",args:[Ne,ot.filter]}),In(Ze.minzoom,ot.minzoom)&&In(Ze.maxzoom,ot.maxzoom)||Ln(G,{command:"setLayerZoomRange",args:[Ne,ot.minzoom,ot.maxzoom]}),Ze)Object.prototype.hasOwnProperty.call(Ze,dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?fi(Ze[dt],ot[dt],G,Ne,dt.slice(6),"setPaintProperty"):In(Ze[dt],ot[dt])||Ln(G,{command:"setLayerProperty",args:[Ne,dt,ot[dt]]}));for(dt in ot)Object.prototype.hasOwnProperty.call(ot,dt)&&!Object.prototype.hasOwnProperty.call(Ze,dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?fi(Ze[dt],ot[dt],G,Ne,dt.slice(6),"setPaintProperty"):In(Ze[dt],ot[dt])||Ln(G,{command:"setLayerProperty",args:[Ne,dt,ot[dt]]}))}else Ln(G,{command:"removeLayer",args:[Ne]}),Dt=Pe[Pe.lastIndexOf(Ne)+1],Ln(G,{command:"addLayer",args:[ot,Dt]})})(k,u.layers,d)}catch(b){console.warn("Unable to compute style diff:",b),d=[{command:"setStyle",args:[u]}]}return d},s.bN=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},s.bO=Se,s.bP=Ge,s.bQ=class extends Al{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.bR=ys,s.bS=class extends Al{constructor(f,u){super(f,u),this.current=oa}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.bT=sd,s.bU=class extends Al{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.bV=class extends Al{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.bW=$,s.bX=function(f,u){var d=Math.sin(u),b=Math.cos(u);return f[0]=b,f[1]=d,f[2]=0,f[3]=-d,f[4]=b,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},s.bY=function(f,u,d){var b=u[0],M=u[1],k=u[2];return f[0]=b*d[0]+M*d[3]+k*d[6],f[1]=b*d[1]+M*d[4]+k*d[7],f[2]=b*d[2]+M*d[5]+k*d[8],f},s.bZ=function(f,u,d,b,M,k,P){var K=1/(u-d),G=1/(b-M),ee=1/(k-P);return f[0]=-2*K,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*G,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*ee,f[11]=0,f[12]=(u+d)*K,f[13]=(M+b)*G,f[14]=(P+k)*ee,f[15]=1,f},s.b_=class extends Al{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)u[4*d]=f[d].r,u[4*d+1]=f[d].g,u[4*d+2]=f[d].b,u[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,u)}}},s.ba=function(){return new Float64Array(16)},s.bb=function(f,u,d){const b=new Float64Array(4);return Re(b,f,u-90,d),b},s.bc=function(f,u,d,b){var M,k,P,K,G,ee=u[0],ie=u[1],ce=u[2],Be=u[3],Pe=d[0],Le=d[1],Ne=d[2],Ze=d[3];return(k=ee*Pe+ie*Le+ce*Ne+Be*Ze)<0&&(k=-k,Pe=-Pe,Le=-Le,Ne=-Ne,Ze=-Ze),1-k>W?(M=Math.acos(k),P=Math.sin(M),K=Math.sin((1-b)*M)/P,G=Math.sin(b*M)/P):(K=1-b,G=b),f[0]=K*ee+G*Pe,f[1]=K*ie+G*Le,f[2]=K*ce+G*Ne,f[3]=K*Be+G*Ze,f},s.bd=function(f){const u=new Float64Array(9);var d,b,M,k,P,K,G,ee,ie,ce,Be,Pe,Le,Ne,Ze,ot,Dt,dt;ce=(M=(b=f)[0])*(G=M+M),Be=(k=b[1])*G,Le=(P=b[2])*G,Ne=P*(ee=k+k),ot=(K=b[3])*G,Dt=K*ee,dt=K*(ie=P+P),(d=u)[0]=1-(Pe=k*ee)-(Ze=P*ie),d[3]=Be-dt,d[6]=Le+Dt,d[1]=Be+dt,d[4]=1-ce-Ze,d[7]=Ne-ot,d[2]=Le-Dt,d[5]=Ne+ot,d[8]=1-ce-Pe;const xt=Tt(-Math.asin(Ct(u[2],-1,1)));let Nt,Xt;return Math.hypot(u[5],u[8])<.001?(Nt=0,Xt=-Tt(Math.atan2(u[3],u[4]))):(Nt=Tt(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Xt=Tt(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:Nt,pitch:xt+90,bearing:Xt}},s.be=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},s.bf=Gi,s.bg=Pc,s.bh=wl,s.bi=fc,s.bj=sg,s.bk=ze,s.bl=we,s.bm=ao,s.bn=function(f,u,d,b,M){return ze(b,M,Ct((f-u)/(d-u),0,1))},s.bo=Oe,s.bp=function(){return new Float64Array(3)},s.bq=function(f,u,d,b){return f[0]=u[0]+d[0]*b,f[1]=u[1]+d[1]*b,f[2]=u[2]+d[2]*b,f},s.br=Re,s.bs=function(f,u,d){var b=d[0],M=d[1],k=d[2],P=d[3],K=u[0],G=u[1],ee=u[2],ie=M*ee-k*G,ce=k*K-b*ee,Be=b*G-M*K;return f[0]=K+P*(ie+=ie)+M*(Be+=Be)-k*(ce+=ce),f[1]=G+P*ce+k*ie-b*Be,f[2]=ee+P*Be+b*ce-M*ie,f},s.bt=function(f,u,d){const b=(M=[f[0],f[1],f[2],u[0],u[1],u[2],d[0],d[1],d[2]])[0]*((ie=M[8])*(P=M[4])-(K=M[5])*(ee=M[7]))+M[1]*(-ie*(k=M[3])+K*(G=M[6]))+M[2]*(ee*k-P*G);var M,k,P,K,G,ee,ie;if(b===0)return null;const ce=pe([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),Be=pe([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),Pe=pe([],[f[0],f[1],f[2]],[u[0],u[1],u[2]]),Le=ve([],ce,-f[3]);return ae(Le,Le,ve([],Be,-u[3])),ae(Le,Le,ve([],Pe,-d[3])),ve(Le,Le,1/b),Le},s.bu=F0,s.bv=function(){return new Float64Array(4)},s.bw=function(f,u,d,b){var M=[],k=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],k[0]=M[0]*Math.cos(b)-M[1]*Math.sin(b),k[1]=M[0]*Math.sin(b)+M[1]*Math.cos(b),k[2]=M[2],f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.bx=function(f,u,d,b){var M=[],k=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],k[0]=M[0],k[1]=M[1]*Math.cos(b)-M[2]*Math.sin(b),k[2]=M[1]*Math.sin(b)+M[2]*Math.cos(b),f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.by=function(f,u,d,b){var M=[],k=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],k[0]=M[2]*Math.sin(b)+M[0]*Math.cos(b),k[1]=M[1],k[2]=M[2]*Math.cos(b)-M[0]*Math.sin(b),f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.bz=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),k=u[0],P=u[1],K=u[2],G=u[3],ee=u[8],ie=u[9],ce=u[10],Be=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=k*M-ee*b,f[1]=P*M-ie*b,f[2]=K*M-ce*b,f[3]=G*M-Be*b,f[8]=k*b+ee*M,f[9]=P*b+ie*M,f[10]=K*b+ce*M,f[11]=G*b+Be*M,f},s.c=he,s.c0=class extends Qd{},s.c1=Bv,s.c2=class extends qd{},s.c3=UA,s.c4=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.c5=Lp,s.c6=function(f,u,d){var b=u[0],M=u[1],k=u[2],P=d[3]*b+d[7]*M+d[11]*k+d[15];return f[0]=(d[0]*b+d[4]*M+d[8]*k+d[12])/(P=P||1),f[1]=(d[1]*b+d[5]*M+d[9]*k+d[13])/P,f[2]=(d[2]*b+d[6]*M+d[10]*k+d[14])/P,f},s.c7=class extends nd{},s.c8=class extends U{},s.c9=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.cA=function(f,u){se.REGISTERED_PROTOCOLS[f]=u},s.cB=function(f){delete se.REGISTERED_PROTOCOLS[f]},s.cC=function(f,u){const d={};for(let M=0;M<f.length;M++){const k=u&&u[f[M].id]||MA(f[M]);u&&(u[f[M].id]=k);let P=d[k];P||(P=d[k]=[]),P.push(f[M])}const b=[];for(const M in d)b.push(d[M]);return b},s.cD=Jn,s.cE=sy,s.cF=vg,s.cG=Uv,s.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=ht/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,b=u._unevaluatedLayout._values,M={layoutIconSize:b["icon-size"].possiblyEvaluate(new wo(f.bucket.zoom+1),f.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new wo(f.bucket.zoom+1),f.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new wo(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ie}=f.bucket.textSizeData;M.compositeTextSizes=[b["text-size"].possiblyEvaluate(new wo(ee),f.canonical),b["text-size"].possiblyEvaluate(new wo(ie),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ie}=f.bucket.iconSizeData;M.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new wo(ee),f.canonical),b["icon-size"].possiblyEvaluate(new wo(ie),f.canonical)]}const k=d.get("text-line-height")*aa,P=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",K=d.get("text-keep-upright"),G=d.get("text-size");for(const ee of f.bucket.features){const ie=d.get("text-font").evaluate(ee,{},f.canonical).join(","),ce=G.evaluate(ee,{},f.canonical),Be=M.layoutTextSize.evaluate(ee,{},f.canonical),Pe=M.layoutIconSize.evaluate(ee,{},f.canonical),Le={horizontal:{},vertical:void 0},Ne=ee.text;let Ze,ot=[0,0];if(Ne){const xt=Ne.toString(),Nt=d.get("text-letter-spacing").evaluate(ee,{},f.canonical)*aa,Xt=y0(xt)?Nt:0,mn=d.get("text-anchor").evaluate(ee,{},f.canonical),Qn=qv(u,ee,f.canonical);if(!Qn){const Nn=d.get("text-radial-offset").evaluate(ee,{},f.canonical);ot=Nn?hy(mn,[Nn*aa,Nc]):d.get("text-offset").evaluate(ee,{},f.canonical).map((Wn=>Wn*aa))}let Kn=P?"center":d.get("text-justify").evaluate(ee,{},f.canonical);const Gn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(ee,{},f.canonical)*aa:1/0,xi=()=>{f.bucket.allowVerticalPlacement&&gu(xt)&&(Le.vertical=Zf(Ne,f.glyphMap,f.glyphPositions,f.imagePositions,ie,Gn,k,mn,"left",Xt,ot,s.ao.vertical,!0,Be,ce))};if(!P&&Qn){const Nn=new Set;if(Kn==="auto")for(let an=0;an<Qn.values.length;an+=2)Nn.add(dy(Qn.values[an]));else Nn.add(Kn);let Wn=!1;for(const an of Nn)if(!Le.horizontal[an])if(Wn)Le.horizontal[an]=Le.horizontal[0];else{const ji=Zf(Ne,f.glyphMap,f.glyphPositions,f.imagePositions,ie,Gn,k,"center",an,Xt,ot,s.ao.horizontal,!1,Be,ce);ji&&(Le.horizontal[an]=ji,Wn=ji.positionedLines.length===1)}xi()}else{Kn==="auto"&&(Kn=dy(mn));const Nn=Zf(Ne,f.glyphMap,f.glyphPositions,f.imagePositions,ie,Gn,k,mn,Kn,Xt,ot,s.ao.horizontal,!1,Be,ce);Nn&&(Le.horizontal[Kn]=Nn),xi(),gu(xt)&&P&&K&&(Le.vertical=Zf(Ne,f.glyphMap,f.glyphPositions,f.imagePositions,ie,Gn,k,mn,Kn,Xt,ot,s.ao.vertical,!1,Be,ce))}}let Dt=!1;if(ee.icon&&ee.icon.name){const xt=f.imageMap[ee.icon.name];xt&&(Ze=$p(f.imagePositions[ee.icon.name],d.get("icon-offset").evaluate(ee,{},f.canonical),d.get("icon-anchor").evaluate(ee,{},f.canonical)),Dt=!!xt.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Dt:f.bucket.sdfIcons!==Dt&&ft("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const dt=AA(Le.horizontal)||Le.vertical;f.bucket.iconsInText=!!dt&&dt.iconsInText,(dt||Ze)&&BC(f.bucket,ee,Le,Ze,f.imageMap,M,Be,Pe,ot,Dt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.cI=S0,s.cJ=As,s.cK=qp,s.cL=Sv,s.cM=ju,s.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.cO=function(f,u,d,b,M){return a(this,void 0,void 0,(function*(){if(j())try{return yield xn(f,u,d,b,M)}catch{}return(function(k,P,K,G,ee){const ie=k.width,ce=k.height;Rn&&pn||(Rn=new OffscreenCanvas(ie,ce),pn=Rn.getContext("2d",{willReadFrequently:!0})),Rn.width=ie,Rn.height=ce,pn.drawImage(k,0,0,ie,ce);const Be=pn.getImageData(P,K,G,ee);return pn.clearRect(0,0,ie,ce),Be.data})(f,u,d,b,M)}))},s.cP=ng,s.cQ=h,s.cR=wv,s.cS=Np,s.cT=Bp,s.cU=function(f,u){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Ha(f,u),f);else for(const b of f.features)d.set(Ha(b,u),b);return d},s.cV=function(f,u){if(f==null)return!0;if(f.type==="Feature")return Ha(f,u)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const b of f.features){const M=Ha(b,u);if(M==null||d.has(M))return!1;d.add(M)}return!0}return!1},s.cW=function(f,u,d){var b,M,k,P;if(u.removeAll&&f.clear(),u.remove)for(const K of u.remove)f.delete(K);if(u.add)for(const K of u.add){const G=Ha(K,d);G!=null&&f.set(G,K)}if(u.update)for(const K of u.update){let G=f.get(K.id);if(G==null)continue;const ee=!K.removeAllProperties&&(((b=K.removeProperties)===null||b===void 0?void 0:b.length)>0||((M=K.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0);if((K.newGeometry||K.removeAllProperties||ee)&&(G=Object.assign({},G),f.set(K.id,G),ee&&(G.properties=Object.assign({},G.properties))),K.newGeometry&&(G.geometry=K.newGeometry),K.removeAllProperties)G.properties={};else if(((k=K.removeProperties)===null||k===void 0?void 0:k.length)>0)for(const ie of K.removeProperties)Object.prototype.hasOwnProperty.call(G.properties,ie)&&delete G.properties[ie];if(((P=K.addOrUpdateProperties)===null||P===void 0?void 0:P.length)>0)for(const{key:ie,value:ce}of K.addOrUpdateProperties)G.properties[ie]=ce}},s.cX=ll,s.ca=function(f,u){var d=f[0],b=f[1],M=f[2],k=f[3],P=f[4],K=f[5],G=f[6],ee=f[7],ie=f[8],ce=f[9],Be=f[10],Pe=f[11],Le=f[12],Ne=f[13],Ze=f[14],ot=f[15],Dt=u[0],dt=u[1],xt=u[2],Nt=u[3],Xt=u[4],mn=u[5],Qn=u[6],Kn=u[7],Gn=u[8],xi=u[9],Nn=u[10],Wn=u[11],an=u[12],ji=u[13],ir=u[14],Ui=u[15];return Math.abs(d-Dt)<=W*Math.max(1,Math.abs(d),Math.abs(Dt))&&Math.abs(b-dt)<=W*Math.max(1,Math.abs(b),Math.abs(dt))&&Math.abs(M-xt)<=W*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(k-Nt)<=W*Math.max(1,Math.abs(k),Math.abs(Nt))&&Math.abs(P-Xt)<=W*Math.max(1,Math.abs(P),Math.abs(Xt))&&Math.abs(K-mn)<=W*Math.max(1,Math.abs(K),Math.abs(mn))&&Math.abs(G-Qn)<=W*Math.max(1,Math.abs(G),Math.abs(Qn))&&Math.abs(ee-Kn)<=W*Math.max(1,Math.abs(ee),Math.abs(Kn))&&Math.abs(ie-Gn)<=W*Math.max(1,Math.abs(ie),Math.abs(Gn))&&Math.abs(ce-xi)<=W*Math.max(1,Math.abs(ce),Math.abs(xi))&&Math.abs(Be-Nn)<=W*Math.max(1,Math.abs(Be),Math.abs(Nn))&&Math.abs(Pe-Wn)<=W*Math.max(1,Math.abs(Pe),Math.abs(Wn))&&Math.abs(Le-an)<=W*Math.max(1,Math.abs(Le),Math.abs(an))&&Math.abs(Ne-ji)<=W*Math.max(1,Math.abs(Ne),Math.abs(ji))&&Math.abs(Ze-ir)<=W*Math.max(1,Math.abs(Ze),Math.abs(ir))&&Math.abs(ot-Ui)<=W*Math.max(1,Math.abs(ot),Math.abs(Ui))},s.cb=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.cc=f=>f.type==="symbol",s.cd=f=>f.type==="circle",s.ce=f=>f.type==="heatmap",s.cf=f=>f.type==="line",s.cg=f=>f.type==="fill",s.ch=f=>f.type==="fill-extrusion",s.ci=f=>f.type==="hillshade",s.cj=f=>f.type==="color-relief",s.ck=f=>f.type==="background",s.cl=f=>f.type==="custom",s.cm=At,s.cn=function(f,u,d){const b=nt(u.x-d.x,u.y-d.y),M=nt(f.x-d.x,f.y-d.y);var k,P;return Tt(Math.atan2(b[0]*M[1]-b[1]*M[0],(k=b)[0]*(P=M)[0]+k[1]*P[1]))},s.co=it,s.cp=function(f,u){return oe[u]&&(f instanceof MouseEvent||f instanceof WheelEvent)},s.cq=function(f,u){return Me[u]&&"touches"in f},s.cr=function(f){return Me[f]||oe[f]},s.cs=function(f,u,d){var b=u[0],M=u[1];return f[0]=d[0]*b+d[4]*M+d[12],f[1]=d[1]*b+d[5]*M+d[13],f},s.ct=function(f,u){const{x:d,y:b}=Ws.fromLngLat(u);return!(f<0||f>25||b<0||b>=1||d<0||d>=1)},s.cu=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.cv=class extends Ro{},s.cw=TC,s.cy=function(f){return f.message===le},s.cz=Ye,s.d=De,s.e=Ke,s.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=Ae,s.h=f=>new Promise(((u,d)=>{const b=new Image;b.onload=()=>{u(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame((()=>{b.src=si}))},b.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(f)],{type:"image/png"});b.src=f.byteLength?URL.createObjectURL(M):si})),s.i=kt,s.j=(f,u)=>fe(Ke(f,{type:"json"}),u),s.k=pt,s.l=Bt,s.m=fe,s.n=(f,u)=>fe(Ke(f,{type:"arrayBuffer"}),u),s.o=function(f){return new ju(f).readFields(V1,[])},s.p=xC,s.q=tg,s.r=us,s.s=Hn,s.t=zf,s.u=nr,s.v=gt,s.w=ft,s.x=Hh,s.y=Zh,s.z=mu})),r("worker",["./shared"],(function(s){class a{constructor(se,Ae){this.keyCache={},se&&this.replace(se,Ae)}replace(se,Ae){this._layerConfigs={},this._layers={},this.update(se,[],Ae)}update(se,Ae,xe){for(const Xe of se){this._layerConfigs[Xe.id]=Xe;const fe=this._layers[Xe.id]=s.bJ(Xe,xe);fe._featureFilter=s.aa(fe.filter,xe),this.keyCache[Xe.id]&&delete this.keyCache[Xe.id]}for(const Xe of Ae)delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe];this.familiesBySource={};const Ye=s.cC(Object.values(this._layerConfigs),this.keyCache);for(const Xe of Ye){const fe=Xe.map((Ht=>this._layers[Ht.id])),De=fe[0];if(De.visibility==="none")continue;const y=De.source||"";let rt=this.familiesBySource[y];rt||(rt=this.familiesBySource[y]={});const Bt=De.sourceLayer||"_geojsonTileLayer";let pt=rt[Bt];pt||(pt=rt[Bt]=[]),pt.push(fe)}}}class c{constructor(se){const Ae={},xe=[];for(const De in se){const y=se[De],rt=Ae[De]={};for(const Bt in y){const pt=y[+Bt];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const Ht={x:0,y:0,w:pt.bitmap.width+2,h:pt.bitmap.height+2};xe.push(Ht),rt[Bt]={rect:Ht,metrics:pt.metrics}}}const{w:Ye,h:Xe}=s.p(xe),fe=new s.q({width:Ye||1,height:Xe||1});for(const De in se){const y=se[De];for(const rt in y){const Bt=y[+rt];if(!Bt||Bt.bitmap.width===0||Bt.bitmap.height===0)continue;const pt=Ae[De][rt].rect;s.q.copy(Bt.bitmap,fe,{x:0,y:0},{x:pt.x+1,y:pt.y+1},Bt.bitmap)}}this.image=fe,this.positions=Ae}}s.cD("GlyphAtlas",c);class h{constructor(se){this.tileID=new s.Z(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,Ae,xe,Ye,Xe){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new s.a8;const fe=new s.cE(Object.keys(se.layers).sort()),De=new s.cF(this.tileID,this.promoteId);De.bucketLayerIDs=[];const y={},rt={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:xe,subdivisionGranularity:Xe},Bt=Ae.familiesBySource[this.source];for(const nn in Bt){const Ti=se.layers[nn];if(!Ti)continue;Ti.version===1&&s.w(`Vector tile source "${this.source}" layer "${nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Io=fe.encode(nn),rs=[];for(let kr=0;kr<Ti.length;kr++){const hn=Ti.feature(kr),Li=De.getId(hn,nn);rs.push({feature:hn,id:Li,index:kr,sourceLayerIndex:Io})}for(const kr of Bt[nn]){const hn=kr[0];hn.source!==this.source&&s.w(`layer.source = ${hn.source} does not equal this.source = ${this.source}`),hn.isHidden(this.zoom,!0)||(m(kr,this.zoom,xe),(y[hn.id]=hn.createBucket({index:De.bucketLayerIDs.length,layers:kr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Io,sourceID:this.source})).populate(rs,rt,this.tileID.canonical),De.bucketLayerIDs.push(kr.map((Li=>Li.id))))}}const pt=s.bO(rt.glyphDependencies,(nn=>Object.keys(nn).map(Number)));this.inFlightDependencies.forEach((nn=>nn?.abort())),this.inFlightDependencies=[];let Ht=Promise.resolve({});if(Object.keys(pt).length){const nn=new AbortController;this.inFlightDependencies.push(nn),Ht=Ye.sendAsync({type:"GG",data:{stacks:pt,source:this.source,tileID:this.tileID,type:"glyphs"}},nn)}const gt=Object.keys(rt.iconDependencies);let jn=Promise.resolve({});if(gt.length){const nn=new AbortController;this.inFlightDependencies.push(nn),jn=Ye.sendAsync({type:"GI",data:{icons:gt,source:this.source,tileID:this.tileID,type:"icons"}},nn)}const ni=Object.keys(rt.patternDependencies);let In=Promise.resolve({});if(ni.length){const nn=new AbortController;this.inFlightDependencies.push(nn),In=Ye.sendAsync({type:"GI",data:{icons:ni,source:this.source,tileID:this.tileID,type:"patterns"}},nn)}const Ln=rt.dashDependencies;let Zn=Promise.resolve({});if(Object.keys(Ln).length){const nn=new AbortController;this.inFlightDependencies.push(nn),Zn=Ye.sendAsync({type:"GDA",data:{dashes:Ln}},nn)}const[Xi,Di,ur,fi]=yield Promise.all([Ht,jn,In,Zn]),Si=new c(Xi),er=new s.cG(Di,ur);for(const nn in y){const Ti=y[nn];Ti instanceof s.a9?(m(Ti.layers,this.zoom,xe),s.cH({bucket:Ti,glyphMap:Xi,glyphPositions:Si.positions,imageMap:Di,imagePositions:er.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:rt.subdivisionGranularity})):Ti.hasDependencies&&(Ti instanceof s.cI||Ti instanceof s.cJ||Ti instanceof s.cK)&&(m(Ti.layers,this.zoom,xe),Ti.addFeatures(rt,this.tileID.canonical,er.patternPositions,fi))}return this.status="done",{buckets:Object.values(y).filter((nn=>!nn.isEmpty())),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Si.image,imageAtlas:er,dashPositions:fi,glyphMap:this.returnDependencies?Xi:null,iconMap:this.returnDependencies?Di:null,glyphPositions:this.returnDependencies?Si.positions:null}}))}}function m(he,se,Ae){const xe=new s.F(se);for(const Ye of he)Ye.recalculate(xe,Ae)}class v{constructor(se,Ae,xe){this.actor=se,this.layerIndex=Ae,this.availableImages=xe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,Ae){return s._(this,void 0,void 0,(function*(){const xe=yield s.n(se.request,Ae);try{return{vectorTile:new s.cL(new s.cM(xe.data)),rawData:xe.data,cacheControl:xe.cacheControl,expires:xe.expires}}catch(Ye){const Xe=new Uint8Array(xe.data);let fe=`Unable to parse the tile at ${se.request.url}, `;throw fe+=Xe[0]===31&&Xe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ye.message}`,new Error(fe)}}))}loadTile(se){return s._(this,void 0,void 0,(function*(){const Ae=se.uid,xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new s.cN(se.request),Ye=new h(se);this.loading[Ae]=Ye;const Xe=new AbortController;Ye.abort=Xe;try{const fe=yield this.loadVectorTile(se,Xe);if(delete this.loading[Ae],!fe)return null;const De=fe.rawData,y={};fe.expires&&(y.expires=fe.expires),fe.cacheControl&&(y.cacheControl=fe.cacheControl);const rt={};if(xe){const pt=xe.finish();pt&&(rt.resourceTiming=JSON.parse(JSON.stringify(pt)))}Ye.vectorTile=fe.vectorTile;const Bt=Ye.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[Ae]=Ye,this.fetching[Ae]={rawTileData:De,cacheControl:y,resourceTiming:rt};try{const pt=yield Bt;return s.e({rawTileData:De.slice(0)},pt,y,rt)}finally{delete this.fetching[Ae]}}catch(fe){throw delete this.loading[Ae],Ye.status="done",this.loaded[Ae]=Ye,fe}}))}reloadTile(se){return s._(this,void 0,void 0,(function*(){const Ae=se.uid;if(!this.loaded||!this.loaded[Ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const xe=this.loaded[Ae];if(xe.showCollisionBoxes=se.showCollisionBoxes,xe.status==="parsing"){const Ye=yield xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let Xe;if(this.fetching[Ae]){const{rawTileData:fe,cacheControl:De,resourceTiming:y}=this.fetching[Ae];delete this.fetching[Ae],Xe=s.e({rawTileData:fe.slice(0)},Ye,De,y)}else Xe=Ye;return Xe}if(xe.status==="done"&&xe.vectorTile)return xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)}))}abortTile(se){return s._(this,void 0,void 0,(function*(){const Ae=this.loading,xe=se.uid;Ae&&Ae[xe]&&Ae[xe].abort&&(Ae[xe].abort.abort(),delete Ae[xe])}))}removeTile(se){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]}))}}class x{constructor(){this.loaded={}}loadTile(se){return s._(this,void 0,void 0,(function*(){const{uid:Ae,encoding:xe,rawImageData:Ye,redFactor:Xe,greenFactor:fe,blueFactor:De,baseShift:y}=se,rt=Ye.width+2,Bt=Ye.height+2,pt=s.b(Ye)?new s.R({width:rt,height:Bt},yield s.cO(Ye,-1,-1,rt,Bt)):Ye,Ht=new s.cP(Ae,pt,xe,Xe,fe,De,y);return this.loaded=this.loaded||{},this.loaded[Ae]=Ht,Ht}))}removeTile(se){const Ae=this.loaded,xe=se.uid;Ae&&Ae[xe]&&delete Ae[xe]}}var S,B,R=(function(){if(B)return S;function he(Ae,xe){if(Ae.length!==0){se(Ae[0],xe);for(var Ye=1;Ye<Ae.length;Ye++)se(Ae[Ye],!xe)}}function se(Ae,xe){for(var Ye=0,Xe=0,fe=0,De=Ae.length,y=De-1;fe<De;y=fe++){var rt=(Ae[fe][0]-Ae[y][0])*(Ae[y][1]+Ae[fe][1]),Bt=Ye+rt;Xe+=Math.abs(Ye)>=Math.abs(rt)?Ye-Bt+rt:rt-Bt+Ye,Ye=Bt}Ye+Xe>=0!=!!xe&&Ae.reverse()}return B=1,S=function Ae(xe,Ye){var Xe,fe=xe&&xe.type;if(fe==="FeatureCollection")for(Xe=0;Xe<xe.features.length;Xe++)Ae(xe.features[Xe],Ye);else if(fe==="GeometryCollection")for(Xe=0;Xe<xe.geometries.length;Xe++)Ae(xe.geometries[Xe],Ye);else if(fe==="Feature")Ae(xe.geometry,Ye);else if(fe==="Polygon")he(xe.coordinates,Ye);else if(fe==="MultiPolygon")for(Xe=0;Xe<xe.coordinates.length;Xe++)he(xe.coordinates[Xe],Ye);return xe}})(),F=s.cQ(R);class j extends s.cS{constructor(se,Ae){super(new s.cM,0,Ae,[],[]),this.feature=se,this.type=se.type,this.properties=se.tags?se.tags:{},"id"in se&&(typeof se.id=="string"?this.id=parseInt(se.id,10):typeof se.id!="number"||isNaN(se.id)||(this.id=se.id))}loadGeometry(){const se=[],Ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const xe of Ae){const Ye=[];for(const Xe of xe)Ye.push(new s.P(Xe[0],Xe[1]));se.push(Ye)}return se}}class W extends s.cR{constructor(se,Ae){super(new s.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=Ae?Ae.version:1,this.extent=Ae?Ae.extent:4096,this.length=se.length,this.features=se}feature(se){return new j(this.features[se],this.extent)}}function H(he,se){se.writeVarintField(15,he.version||1),se.writeStringField(1,he.name||""),se.writeVarintField(5,he.extent||4096);const Ae={keys:[],values:[],keycache:{},valuecache:{}};for(let Xe=0;Xe<he.length;Xe++)Ae.feature=he.feature(Xe),se.writeMessage(2,$,Ae);const xe=Ae.keys;for(const Xe of xe)se.writeStringField(3,Xe);const Ye=Ae.values;for(const Xe of Ye)se.writeMessage(4,ae,Xe)}function $(he,se){if(!he.feature)return;const Ae=he.feature;Ae.id!==void 0&&se.writeVarintField(1,Ae.id),se.writeMessage(2,N,he),se.writeVarintField(3,Ae.type),se.writeMessage(4,ne,Ae)}function N(he,se){for(const Ae in he.feature?.properties){let xe=he.feature.properties[Ae],Ye=he.keycache[Ae];if(xe===null)continue;Ye===void 0&&(he.keys.push(Ae),Ye=he.keys.length-1,he.keycache[Ae]=Ye),se.writeVarint(Ye),typeof xe!="string"&&typeof xe!="boolean"&&typeof xe!="number"&&(xe=JSON.stringify(xe));const Xe=typeof xe+":"+xe;let fe=he.valuecache[Xe];fe===void 0&&(he.values.push(xe),fe=he.values.length-1,he.valuecache[Xe]=fe),se.writeVarint(fe)}}function Y(he,se){return(se<<3)+(7&he)}function z(he){return he<<1^he>>31}function ne(he,se){const Ae=he.loadGeometry(),xe=he.type;let Ye=0,Xe=0;for(const fe of Ae){let De=1;xe===1&&(De=fe.length),se.writeVarint(Y(1,De));const y=xe===3?fe.length-1:fe.length;for(let rt=0;rt<y;rt++){rt===1&&xe!==1&&se.writeVarint(Y(2,y-1));const Bt=fe[rt].x-Ye,pt=fe[rt].y-Xe;se.writeVarint(z(Bt)),se.writeVarint(z(pt)),Ye+=Bt,Xe+=pt}he.type===3&&se.writeVarint(Y(7,1))}}function ae(he,se){const Ae=typeof he;Ae==="string"?se.writeStringField(1,he):Ae==="boolean"?se.writeBooleanField(7,he):Ae==="number"&&(he%1!=0?se.writeDoubleField(3,he):he<0?se.writeSVarintField(6,he):se.writeVarintField(5,he))}const ve={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},pe=Math.fround||(be=new Float32Array(1),he=>(be[0]=+he,be[0]));var be;class Ee{constructor(se){this.options=Object.assign(Object.create(ve),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:Ae,minZoom:xe,maxZoom:Ye}=this.options;Ae&&console.time("total time");const Xe=`prepare ${se.length} points`;Ae&&console.time(Xe),this.points=se;const fe=[];for(let y=0;y<se.length;y++){const rt=se[y];if(!rt.geometry)continue;const[Bt,pt]=rt.geometry.coordinates,Ht=pe(Re(Bt)),gt=pe(qe(pt));fe.push(Ht,gt,1/0,y,-1,1),this.options.reduce&&fe.push(0)}let De=this.trees[Ye+1]=this._createTree(fe);Ae&&console.timeEnd(Xe);for(let y=Ye;y>=xe;y--){const rt=+Date.now();De=this.trees[y]=this._createTree(this._cluster(De,y)),Ae&&console.log("z%d: %d clusters in %dms",y,De.numItems,+Date.now()-rt)}return Ae&&console.timeEnd("total time"),this}getClusters(se,Ae){let xe=((se[0]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,se[1]));let Xe=se[2]===180?180:((se[2]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)xe=-180,Xe=180;else if(xe>Xe){const pt=this.getClusters([xe,Ye,180,fe],Ae),Ht=this.getClusters([-180,Ye,Xe,fe],Ae);return pt.concat(Ht)}const De=this.trees[this._limitZoom(Ae)],y=De.range(Re(xe),qe(fe),Re(Xe),qe(Ye)),rt=De.data,Bt=[];for(const pt of y){const Ht=this.stride*pt;Bt.push(rt[Ht+5]>1?Te(rt,Ht,this.clusterProps):this.points[rt[Ht+3]])}return Bt}getChildren(se){const Ae=this._getOriginId(se),xe=this._getOriginZoom(se),Ye="No cluster with the specified id.",Xe=this.trees[xe];if(!Xe)throw new Error(Ye);const fe=Xe.data;if(Ae*this.stride>=fe.length)throw new Error(Ye);const De=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),y=Xe.within(fe[Ae*this.stride],fe[Ae*this.stride+1],De),rt=[];for(const Bt of y){const pt=Bt*this.stride;fe[pt+4]===se&&rt.push(fe[pt+5]>1?Te(fe,pt,this.clusterProps):this.points[fe[pt+3]])}if(rt.length===0)throw new Error(Ye);return rt}getLeaves(se,Ae,xe){const Ye=[];return this._appendLeaves(Ye,se,Ae=Ae||10,xe=xe||0,0),Ye}getTile(se,Ae,xe){const Ye=this.trees[this._limitZoom(se)],Xe=Math.pow(2,se),{extent:fe,radius:De}=this.options,y=De/fe,rt=(xe-y)/Xe,Bt=(xe+1+y)/Xe,pt={features:[]};return this._addTileFeatures(Ye.range((Ae-y)/Xe,rt,(Ae+1+y)/Xe,Bt),Ye.data,Ae,xe,Xe,pt),Ae===0&&this._addTileFeatures(Ye.range(1-y/Xe,rt,1,Bt),Ye.data,Xe,xe,Xe,pt),Ae===Xe-1&&this._addTileFeatures(Ye.range(0,rt,y/Xe,Bt),Ye.data,-1,xe,Xe,pt),pt.features.length?pt:null}getClusterExpansionZoom(se){let Ae=this._getOriginZoom(se)-1;for(;Ae<=this.options.maxZoom;){const xe=this.getChildren(se);if(Ae++,xe.length!==1)break;se=xe[0].properties.cluster_id}return Ae}_appendLeaves(se,Ae,xe,Ye,Xe){const fe=this.getChildren(Ae);for(const De of fe){const y=De.properties;if(y&&y.cluster?Xe+y.point_count<=Ye?Xe+=y.point_count:Xe=this._appendLeaves(se,y.cluster_id,xe,Ye,Xe):Xe<Ye?Xe++:se.push(De),se.length===xe)break}return Xe}_createTree(se){const Ae=new s.aI(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<se.length;xe+=this.stride)Ae.add(se[xe],se[xe+1]);return Ae.finish(),Ae.data=se,Ae}_addTileFeatures(se,Ae,xe,Ye,Xe,fe){for(const De of se){const y=De*this.stride,rt=Ae[y+5]>1;let Bt,pt,Ht;if(rt)Bt=je(Ae,y,this.clusterProps),pt=Ae[y],Ht=Ae[y+1];else{const ni=this.points[Ae[y+3]];Bt=ni.properties;const[In,Ln]=ni.geometry.coordinates;pt=Re(In),Ht=qe(Ln)}const gt={type:1,geometry:[[Math.round(this.options.extent*(pt*Xe-xe)),Math.round(this.options.extent*(Ht*Xe-Ye))]],tags:Bt};let jn;jn=rt||this.options.generateId?Ae[y+3]:this.points[Ae[y+3]].id,jn!==void 0&&(gt.id=jn),fe.features.push(gt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,Ae){const{radius:xe,extent:Ye,reduce:Xe,minPoints:fe}=this.options,De=xe/(Ye*Math.pow(2,Ae)),y=se.data,rt=[],Bt=this.stride;for(let pt=0;pt<y.length;pt+=Bt){if(y[pt+2]<=Ae)continue;y[pt+2]=Ae;const Ht=y[pt],gt=y[pt+1],jn=se.within(y[pt],y[pt+1],De),ni=y[pt+5];let In=ni;for(const Ln of jn){const Zn=Ln*Bt;y[Zn+2]>Ae&&(In+=y[Zn+5])}if(In>ni&&In>=fe){let Ln,Zn=Ht*ni,Xi=gt*ni,Di=-1;const ur=(pt/Bt<<5)+(Ae+1)+this.points.length;for(const fi of jn){const Si=fi*Bt;if(y[Si+2]<=Ae)continue;y[Si+2]=Ae;const er=y[Si+5];Zn+=y[Si]*er,Xi+=y[Si+1]*er,y[Si+4]=ur,Xe&&(Ln||(Ln=this._map(y,pt,!0),Di=this.clusterProps.length,this.clusterProps.push(Ln)),Xe(Ln,this._map(y,Si)))}y[pt+4]=ur,rt.push(Zn/In,Xi/In,1/0,ur,-1,In),Xe&&rt.push(Di)}else{for(let Ln=0;Ln<Bt;Ln++)rt.push(y[pt+Ln]);if(In>1)for(const Ln of jn){const Zn=Ln*Bt;if(!(y[Zn+2]<=Ae)){y[Zn+2]=Ae;for(let Xi=0;Xi<Bt;Xi++)rt.push(y[Zn+Xi])}}}}return rt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,Ae,xe){if(se[Ae+5]>1){const fe=this.clusterProps[se[Ae+6]];return xe?Object.assign({},fe):fe}const Ye=this.points[se[Ae+3]].properties,Xe=this.options.map(Ye);return xe&&Xe===Ye?Object.assign({},Xe):Xe}}function Te(he,se,Ae){return{type:"Feature",id:he[se+3],properties:je(he,se,Ae),geometry:{type:"Point",coordinates:[(xe=he[se],360*(xe-.5)),nt(he[se+1])]}};var xe}function je(he,se,Ae){const xe=he[se+5],Ye=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Xe=he[se+6],fe=Xe===-1?{}:Object.assign({},Ae[Xe]);return Object.assign(fe,{cluster:!0,cluster_id:he[se+3],point_count:xe,point_count_abbreviated:Ye})}function Re(he){return he/360+.5}function qe(he){const se=Math.sin(he*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function nt(he){const se=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function ht(he,se,Ae,xe){let Ye=xe;const Xe=se+(Ae-se>>1);let fe,De=Ae-se;const y=he[se],rt=he[se+1],Bt=he[Ae],pt=he[Ae+1];for(let Ht=se+3;Ht<Ae;Ht+=3){const gt=ke(he[Ht],he[Ht+1],y,rt,Bt,pt);if(gt>Ye)fe=Ht,Ye=gt;else if(gt===Ye){const jn=Math.abs(Ht-Xe);jn<De&&(fe=Ht,De=jn)}}Ye>xe&&(fe-se>3&&ht(he,se,fe,xe),he[fe+2]=Ye,Ae-fe>3&&ht(he,fe,Ae,xe))}function ke(he,se,Ae,xe,Ye,Xe){let fe=Ye-Ae,De=Xe-xe;if(fe!==0||De!==0){const y=((he-Ae)*fe+(se-xe)*De)/(fe*fe+De*De);y>1?(Ae=Ye,xe=Xe):y>0&&(Ae+=fe*y,xe+=De*y)}return fe=he-Ae,De=se-xe,fe*fe+De*De}function Oe(he,se,Ae,xe){const Ye={id:he??null,type:se,geometry:Ae,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")ze(Ye,Ae);else if(se==="Polygon")ze(Ye,Ae[0]);else if(se==="MultiLineString")for(const Xe of Ae)ze(Ye,Xe);else if(se==="MultiPolygon")for(const Xe of Ae)ze(Ye,Xe[0]);return Ye}function ze(he,se){for(let Ae=0;Ae<se.length;Ae+=3)he.minX=Math.min(he.minX,se[Ae]),he.minY=Math.min(he.minY,se[Ae+1]),he.maxX=Math.max(he.maxX,se[Ae]),he.maxY=Math.max(he.maxY,se[Ae+1])}function we(he,se,Ae,xe){if(!se.geometry)return;const Ye=se.geometry.coordinates;if(Ye&&Ye.length===0)return;const Xe=se.geometry.type,fe=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2);let De=[],y=se.id;if(Ae.promoteId?y=se.properties[Ae.promoteId]:Ae.generateId&&(y=xe||0),Xe==="Point")At(Ye,De);else if(Xe==="MultiPoint")for(const rt of Ye)At(rt,De);else if(Xe==="LineString")it(Ye,De,fe,!1);else if(Xe==="MultiLineString"){if(Ae.lineMetrics){for(const rt of Ye)De=[],it(rt,De,fe,!1),he.push(Oe(y,"LineString",De,se.properties));return}Ct(Ye,De,fe,!1)}else if(Xe==="Polygon")Ct(Ye,De,fe,!0);else{if(Xe!=="MultiPolygon"){if(Xe==="GeometryCollection"){for(const rt of se.geometry.geometries)we(he,{id:y,geometry:rt,properties:se.properties},Ae,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const rt of Ye){const Bt=[];Ct(rt,Bt,fe,!0),De.push(Bt)}}he.push(Oe(y,Xe,De,se.properties))}function At(he,se){se.push(It(he[0]),Ke(he[1]),0)}function it(he,se,Ae,xe){let Ye,Xe,fe=0;for(let y=0;y<he.length;y++){const rt=It(he[y][0]),Bt=Ke(he[y][1]);se.push(rt,Bt,0),y>0&&(fe+=xe?(Ye*Bt-rt*Xe)/2:Math.sqrt(Math.pow(rt-Ye,2)+Math.pow(Bt-Xe,2))),Ye=rt,Xe=Bt}const De=se.length-3;se[2]=1,ht(se,0,De,Ae),se[De+2]=1,se.size=Math.abs(fe),se.start=0,se.end=se.size}function Ct(he,se,Ae,xe){for(let Ye=0;Ye<he.length;Ye++){const Xe=[];it(he[Ye],Xe,Ae,xe),se.push(Xe)}}function It(he){return he/360+.5}function Ke(he){const se=Math.sin(he*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Ie(he,se,Ae,xe,Ye,Xe,fe,De){if(xe/=se,Xe>=(Ae/=se)&&fe<xe)return he;if(fe<Ae||Xe>=xe)return null;const y=[];for(const rt of he){const Bt=rt.geometry;let pt=rt.type;const Ht=Ye===0?rt.minX:rt.minY,gt=Ye===0?rt.maxX:rt.maxY;if(Ht>=Ae&&gt<xe){y.push(rt);continue}if(gt<Ae||Ht>=xe)continue;let jn=[];if(pt==="Point"||pt==="MultiPoint")Se(Bt,jn,Ae,xe,Ye);else if(pt==="LineString")Ge(Bt,jn,Ae,xe,Ye,!1,De.lineMetrics);else if(pt==="MultiLineString")ut(Bt,jn,Ae,xe,Ye,!1);else if(pt==="Polygon")ut(Bt,jn,Ae,xe,Ye,!0);else if(pt==="MultiPolygon")for(const ni of Bt){const In=[];ut(ni,In,Ae,xe,Ye,!0),In.length&&jn.push(In)}if(jn.length){if(De.lineMetrics&&pt==="LineString"){for(const ni of jn)y.push(Oe(rt.id,pt,ni,rt.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(jn.length===1?(pt="LineString",jn=jn[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=jn.length===3?"Point":"MultiPoint"),y.push(Oe(rt.id,pt,jn,rt.tags))}}return y.length?y:null}function Se(he,se,Ae,xe,Ye){for(let Xe=0;Xe<he.length;Xe+=3){const fe=he[Xe+Ye];fe>=Ae&&fe<=xe&&ft(se,he[Xe],he[Xe+1],he[Xe+2])}}function Ge(he,se,Ae,xe,Ye,Xe,fe){let De=st(he);const y=Ye===0?St:kt;let rt,Bt,pt=he.start;for(let In=0;In<he.length-3;In+=3){const Ln=he[In],Zn=he[In+1],Xi=he[In+2],Di=he[In+3],ur=he[In+4],fi=Ye===0?Ln:Zn,Si=Ye===0?Di:ur;let er=!1;fe&&(rt=Math.sqrt(Math.pow(Ln-Di,2)+Math.pow(Zn-ur,2))),fi<Ae?Si>Ae&&(Bt=y(De,Ln,Zn,Di,ur,Ae),fe&&(De.start=pt+rt*Bt)):fi>xe?Si<xe&&(Bt=y(De,Ln,Zn,Di,ur,xe),fe&&(De.start=pt+rt*Bt)):ft(De,Ln,Zn,Xi),Si<Ae&&fi>=Ae&&(Bt=y(De,Ln,Zn,Di,ur,Ae),er=!0),Si>xe&&fi<=xe&&(Bt=y(De,Ln,Zn,Di,ur,xe),er=!0),!Xe&&er&&(fe&&(De.end=pt+rt*Bt),se.push(De),De=st(he)),fe&&(pt+=rt)}let Ht=he.length-3;const gt=he[Ht],jn=he[Ht+1],ni=Ye===0?gt:jn;ni>=Ae&&ni<=xe&&ft(De,gt,jn,he[Ht+2]),Ht=De.length-3,Xe&&Ht>=3&&(De[Ht]!==De[0]||De[Ht+1]!==De[1])&&ft(De,De[0],De[1],De[2]),De.length&&se.push(De)}function st(he){const se=[];return se.size=he.size,se.start=he.start,se.end=he.end,se}function ut(he,se,Ae,xe,Ye,Xe){for(const fe of he)Ge(fe,se,Ae,xe,Ye,Xe,!1)}function ft(he,se,Ae,xe){he.push(se,Ae,xe)}function St(he,se,Ae,xe,Ye,Xe){const fe=(Xe-se)/(xe-se);return ft(he,Xe,Ae+(Ye-Ae)*fe,1),fe}function kt(he,se,Ae,xe,Ye,Xe){const fe=(Xe-Ae)/(Ye-Ae);return ft(he,se+(xe-se)*fe,Xe,1),fe}function en(he,se){const Ae=[];for(let xe=0;xe<he.length;xe++){const Ye=he[xe],Xe=Ye.type;let fe;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")fe=Pn(Ye.geometry,se);else if(Xe==="MultiLineString"||Xe==="Polygon"){fe=[];for(const De of Ye.geometry)fe.push(Pn(De,se))}else if(Xe==="MultiPolygon"){fe=[];for(const De of Ye.geometry){const y=[];for(const rt of De)y.push(Pn(rt,se));fe.push(y)}}Ae.push(Oe(Ye.id,Xe,fe,Ye.tags))}return Ae}function Pn(he,se){const Ae=[];Ae.size=he.size,he.start!==void 0&&(Ae.start=he.start,Ae.end=he.end);for(let xe=0;xe<he.length;xe+=3)Ae.push(he[xe]+se,he[xe+1],he[xe+2]);return Ae}function zn(he,se){if(he.transformed)return he;const Ae=1<<he.z,xe=he.x,Ye=he.y;for(const Xe of he.features){const fe=Xe.geometry,De=Xe.type;if(Xe.geometry=[],De===1)for(let y=0;y<fe.length;y+=2)Xe.geometry.push(si(fe[y],fe[y+1],se,Ae,xe,Ye));else for(let y=0;y<fe.length;y++){const rt=[];for(let Bt=0;Bt<fe[y].length;Bt+=2)rt.push(si(fe[y][Bt],fe[y][Bt+1],se,Ae,xe,Ye));Xe.geometry.push(rt)}}return he.transformed=!0,he}function si(he,se,Ae,xe,Ye,Xe){return[Math.round(Ae*(he*xe-Ye)),Math.round(Ae*(se*xe-Xe))]}function xn(he,se,Ae,xe,Ye){const Xe=se===Ye.maxZoom?0:Ye.tolerance/((1<<se)*Ye.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:he.length,source:null,x:Ae,y:xe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const De of he)Rn(fe,De,Xe,Ye);return fe}function Rn(he,se,Ae,xe){const Ye=se.geometry,Xe=se.type,fe=[];if(he.minX=Math.min(he.minX,se.minX),he.minY=Math.min(he.minY,se.minY),he.maxX=Math.max(he.maxX,se.maxX),he.maxY=Math.max(he.maxY,se.maxY),Xe==="Point"||Xe==="MultiPoint")for(let De=0;De<Ye.length;De+=3)fe.push(Ye[De],Ye[De+1]),he.numPoints++,he.numSimplified++;else if(Xe==="LineString")pn(fe,Ye,he,Ae,!1,!1);else if(Xe==="MultiLineString"||Xe==="Polygon")for(let De=0;De<Ye.length;De++)pn(fe,Ye[De],he,Ae,Xe==="Polygon",De===0);else if(Xe==="MultiPolygon")for(let De=0;De<Ye.length;De++){const y=Ye[De];for(let rt=0;rt<y.length;rt++)pn(fe,y[rt],he,Ae,!0,rt===0)}if(fe.length){let De=se.tags||null;if(Xe==="LineString"&&xe.lineMetrics){De={};for(const rt in se.tags)De[rt]=se.tags[rt];De.mapbox_clip_start=Ye.start/Ye.size,De.mapbox_clip_end=Ye.end/Ye.size}const y={geometry:fe,type:Xe==="Polygon"||Xe==="MultiPolygon"?3:Xe==="LineString"||Xe==="MultiLineString"?2:1,tags:De};se.id!==null&&(y.id=se.id),he.features.push(y)}}function pn(he,se,Ae,xe,Ye,Xe){const fe=xe*xe;if(xe>0&&se.size<(Ye?fe:xe))return void(Ae.numPoints+=se.length/3);const De=[];for(let y=0;y<se.length;y+=3)(xe===0||se[y+2]>fe)&&(Ae.numSimplified++,De.push(se[y],se[y+1])),Ae.numPoints++;Ye&&(function(y,rt){let Bt=0;for(let pt=0,Ht=y.length,gt=Ht-2;pt<Ht;gt=pt,pt+=2)Bt+=(y[pt]-y[gt])*(y[pt+1]+y[gt+1]);if(Bt>0===rt)for(let pt=0,Ht=y.length;pt<Ht/2;pt+=2){const gt=y[pt],jn=y[pt+1];y[pt]=y[Ht-2-pt],y[pt+1]=y[Ht-1-pt],y[Ht-2-pt]=gt,y[Ht-1-pt]=jn}})(De,Xe),he.push(De)}const Hn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Un{constructor(se,Ae){const xe=(Ae=this.options=(function(Xe,fe){for(const De in fe)Xe[De]=fe[De];return Xe})(Object.create(Hn),Ae)).debug;if(xe&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ye=(function(Xe,fe){const De=[];if(Xe.type==="FeatureCollection")for(let y=0;y<Xe.features.length;y++)we(De,Xe.features[y],fe,y);else we(De,Xe.type==="Feature"?Xe:{geometry:Xe},fe);return De})(se,Ae);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ye=(function(Xe,fe){const De=fe.buffer/fe.extent;let y=Xe;const rt=Ie(Xe,1,-1-De,De,0,-1,2,fe),Bt=Ie(Xe,1,1-De,2+De,0,-1,2,fe);return(rt||Bt)&&(y=Ie(Xe,1,-De,1+De,0,-1,2,fe)||[],rt&&(y=en(rt,1).concat(y)),Bt&&(y=y.concat(en(Bt,-1)))),y})(Ye,Ae),Ye.length&&this.splitTile(Ye,0,0,0),xe&&(Ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,Ae,xe,Ye,Xe,fe,De){const y=[se,Ae,xe,Ye],rt=this.options,Bt=rt.debug;for(;y.length;){Ye=y.pop(),xe=y.pop(),Ae=y.pop(),se=y.pop();const pt=1<<Ae,Ht=Tt(Ae,xe,Ye);let gt=this.tiles[Ht];if(!gt&&(Bt>1&&console.time("creation"),gt=this.tiles[Ht]=xn(se,Ae,xe,Ye,rt),this.tileCoords.push({z:Ae,x:xe,y:Ye}),Bt)){Bt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,xe,Ye,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));const er=`z${Ae}`;this.stats[er]=(this.stats[er]||0)+1,this.total++}if(gt.source=se,Xe==null){if(Ae===rt.indexMaxZoom||gt.numPoints<=rt.indexMaxPoints)continue}else{if(Ae===rt.maxZoom||Ae===Xe)continue;if(Xe!=null){const er=Xe-Ae;if(xe!==fe>>er||Ye!==De>>er)continue}}if(gt.source=null,se.length===0)continue;Bt>1&&console.time("clipping");const jn=.5*rt.buffer/rt.extent,ni=.5-jn,In=.5+jn,Ln=1+jn;let Zn=null,Xi=null,Di=null,ur=null,fi=Ie(se,pt,xe-jn,xe+In,0,gt.minX,gt.maxX,rt),Si=Ie(se,pt,xe+ni,xe+Ln,0,gt.minX,gt.maxX,rt);se=null,fi&&(Zn=Ie(fi,pt,Ye-jn,Ye+In,1,gt.minY,gt.maxY,rt),Xi=Ie(fi,pt,Ye+ni,Ye+Ln,1,gt.minY,gt.maxY,rt),fi=null),Si&&(Di=Ie(Si,pt,Ye-jn,Ye+In,1,gt.minY,gt.maxY,rt),ur=Ie(Si,pt,Ye+ni,Ye+Ln,1,gt.minY,gt.maxY,rt),Si=null),Bt>1&&console.timeEnd("clipping"),y.push(Zn||[],Ae+1,2*xe,2*Ye),y.push(Xi||[],Ae+1,2*xe,2*Ye+1),y.push(Di||[],Ae+1,2*xe+1,2*Ye),y.push(ur||[],Ae+1,2*xe+1,2*Ye+1)}}getTile(se,Ae,xe){se=+se,Ae=+Ae,xe=+xe;const Ye=this.options,{extent:Xe,debug:fe}=Ye;if(se<0||se>24)return null;const De=1<<se,y=Tt(se,Ae=Ae+De&De-1,xe);if(this.tiles[y])return zn(this.tiles[y],Xe);fe>1&&console.log("drilling down to z%d-%d-%d",se,Ae,xe);let rt,Bt=se,pt=Ae,Ht=xe;for(;!rt&&Bt>0;)Bt--,pt>>=1,Ht>>=1,rt=this.tiles[Tt(Bt,pt,Ht)];return rt&&rt.source?(fe>1&&(console.log("found parent tile z%d-%d-%d",Bt,pt,Ht),console.time("drilling down")),this.splitTile(rt.source,Bt,pt,Ht,se,Ae,xe),fe>1&&console.timeEnd("drilling down"),this.tiles[y]?zn(this.tiles[y],Xe):null):null}}function Tt(he,se,Ae){return 32*((1<<he)*Ae+se)+he}class Me extends v{constructor(se,Ae,xe,Ye=oe){super(se,Ae,xe),this._dataUpdateable=new Map,this._createGeoJSONIndex=Ye}loadVectorTile(se,Ae){return s._(this,void 0,void 0,(function*(){const xe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ye=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Ye)return null;const Xe=new W(Ye.features,{version:2,extent:s.$});let fe=(function(De){const y=new s.cM;return(function(rt,Bt){for(const pt in rt.layers)Bt.writeMessage(3,H,rt.layers[pt])})(De,y),y.finish()})(Xe);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:Xe,rawData:fe.buffer}}))}loadData(se){return s._(this,void 0,void 0,(function*(){var Ae;(Ae=this._pendingRequest)===null||Ae===void 0||Ae.abort();const xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new s.cN(se.request);this._pendingRequest=new AbortController;try{(!this._pendingData||se.request||se.data||se.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest));const Ye=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ye,se),this.loaded={};const Xe={data:Ye};if(xe){const fe=xe.finish();fe&&(Xe.resourceTiming={},Xe.resourceTiming[se.source]=JSON.parse(JSON.stringify(fe)))}return Xe}catch(Ye){if(delete this._pendingRequest,s.cy(Ye))return{abandoned:!0};throw Ye}}))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(se){const Ae=this.loaded;return Ae&&Ae[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,Ae){return s._(this,void 0,void 0,(function*(){let xe=yield this.loadGeoJSON(se,Ae);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(F(xe,!0),se.filter){const Ye=s.cT(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ye.result==="error")throw new Error(Ye.value.map((fe=>`${fe.key}: ${fe.message}`)).join(", "));xe={type:"FeatureCollection",features:xe.features.filter((fe=>Ye.value.evaluate({zoom:0},fe)))}}return xe}))}loadGeoJSON(se,Ae){return s._(this,void 0,void 0,(function*(){const{promoteId:xe}=se;if(se.request){const Ye=yield s.j(se.request,Ae);return this._dataUpdateable=s.cV(Ye.data,xe)?s.cU(Ye.data,xe):void 0,Ye.data}if(typeof se.data=="string")try{const Ye=JSON.parse(se.data);return this._dataUpdateable=s.cV(Ye,xe)?s.cU(Ye,xe):void 0,Ye}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return s.cW(this._dataUpdateable,se.dataDiff,xe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(se){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}function oe(he,se){return se.cluster?new Ee((function({superclusterOptions:Ae,clusterProperties:xe}){if(!xe||!Ae)return Ae;const Ye={},Xe={},fe={accumulated:null,zoom:0},De={properties:null},y=Object.keys(xe);for(const rt of y){const[Bt,pt]=xe[rt],Ht=s.cT(pt),gt=s.cT(typeof Bt=="string"?[Bt,["accumulated"],["get",rt]]:Bt);Ye[rt]=Ht.value,Xe[rt]=gt.value}return Ae.map=rt=>{De.properties=rt;const Bt={};for(const pt of y)Bt[pt]=Ye[pt].evaluate(fe,De);return Bt},Ae.reduce=(rt,Bt)=>{De.properties=Bt;for(const pt of y)fe.accumulated=rt[pt],rt[pt]=Xe[pt].evaluate(fe,De)},Ae})(se)).load(he.features):(function(Ae,xe){return new Un(Ae,xe)})(he,se.geojsonVtOptions)}class le{constructor(se){this.self=se,this.actor=new s.J(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(Ae,xe)=>{if(this.externalWorkerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.externalWorkerSourceTypes[Ae]=xe},this.self.addProtocol=s.cA,this.self.removeProtocol=s.cB,this.self.registerRTLTextPlugin=Ae=>{s.cX.setMethods(Ae)},this.actor.registerMessageHandler("LDT",((Ae,xe)=>this._getDEMWorkerSource(Ae,xe.source).loadTile(xe))),this.actor.registerMessageHandler("RDT",((Ae,xe)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Ae,xe.source).removeTile(xe)})))),this.actor.registerMessageHandler("GCEZ",((Ae,xe)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,xe.type,xe.source).getClusterExpansionZoom(xe)})))),this.actor.registerMessageHandler("GCC",((Ae,xe)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,xe.type,xe.source).getClusterChildren(xe)})))),this.actor.registerMessageHandler("GCL",((Ae,xe)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,xe.type,xe.source).getClusterLeaves(xe)})))),this.actor.registerMessageHandler("LD",((Ae,xe)=>this._getWorkerSource(Ae,xe.type,xe.source).loadData(xe))),this.actor.registerMessageHandler("GD",((Ae,xe)=>this._getWorkerSource(Ae,xe.type,xe.source).getData())),this.actor.registerMessageHandler("LT",((Ae,xe)=>this._getWorkerSource(Ae,xe.type,xe.source).loadTile(xe))),this.actor.registerMessageHandler("RT",((Ae,xe)=>this._getWorkerSource(Ae,xe.type,xe.source).reloadTile(xe))),this.actor.registerMessageHandler("AT",((Ae,xe)=>this._getWorkerSource(Ae,xe.type,xe.source).abortTile(xe))),this.actor.registerMessageHandler("RMT",((Ae,xe)=>this._getWorkerSource(Ae,xe.type,xe.source).removeTile(xe))),this.actor.registerMessageHandler("RS",((Ae,xe)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[Ae]||!this.workerSources[Ae][xe.type]||!this.workerSources[Ae][xe.type][xe.source])return;const Ye=this.workerSources[Ae][xe.type][xe.source];delete this.workerSources[Ae][xe.type][xe.source],Ye.removeSource!==void 0&&Ye.removeSource(xe)})))),this.actor.registerMessageHandler("RM",(Ae=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[Ae],delete this.availableImages[Ae],delete this.workerSources[Ae],delete this.demWorkerSources[Ae],this.globalStates.delete(Ae)})))),this.actor.registerMessageHandler("SR",((Ae,xe)=>s._(this,void 0,void 0,(function*(){this.referrer=xe})))),this.actor.registerMessageHandler("SRPS",((Ae,xe)=>this._syncRTLPluginState(Ae,xe))),this.actor.registerMessageHandler("IS",((Ae,xe)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(xe)})))),this.actor.registerMessageHandler("SI",((Ae,xe)=>this._setImages(Ae,xe))),this.actor.registerMessageHandler("UL",((Ae,xe)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(Ae).update(xe.layers,xe.removedIds,this._getGlobalState(Ae))})))),this.actor.registerMessageHandler("UGS",((Ae,xe)=>s._(this,void 0,void 0,(function*(){const Ye=this._getGlobalState(Ae);for(const Xe in xe)Ye[Xe]=xe[Xe]})))),this.actor.registerMessageHandler("SL",((Ae,xe)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(Ae).replace(xe,this._getGlobalState(Ae))}))))}_getGlobalState(se){let Ae=this.globalStates.get(se);return Ae||(Ae={},this.globalStates.set(se,Ae)),Ae}_setImages(se,Ae){return s._(this,void 0,void 0,(function*(){this.availableImages[se]=Ae;for(const xe in this.workerSources[se]){const Ye=this.workerSources[se][xe];for(const Xe in Ye)Ye[Xe].availableImages=Ae}}))}_syncRTLPluginState(se,Ae){return s._(this,void 0,void 0,(function*(){return yield s.cX.syncState(Ae,this.self.importScripts)}))}_getAvailableImages(se){let Ae=this.availableImages[se];return Ae||(Ae=[]),Ae}_getLayerIndex(se){let Ae=this.layerIndexes[se];return Ae||(Ae=this.layerIndexes[se]=new a),Ae}_getWorkerSource(se,Ae,xe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][Ae]||(this.workerSources[se][Ae]={}),!this.workerSources[se][Ae][xe]){const Ye={sendAsync:(Xe,fe)=>(Xe.targetMapId=se,this.actor.sendAsync(Xe,fe))};switch(Ae){case"vector":this.workerSources[se][Ae][xe]=new v(Ye,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][Ae][xe]=new Me(Ye,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][Ae][xe]=new this.externalWorkerSourceTypes[Ae](Ye,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][Ae][xe]}_getDEMWorkerSource(se,Ae){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][Ae]||(this.demWorkerSources[se][Ae]=new x),this.demWorkerSources[se][Ae]}}return s.i(self)&&(self.worker=new le(self)),le})),r("index",["exports","./shared"],(function(s,a){var c="5.10.0";function h(){var O=new a.A(4);return a.A!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O}let m,v;const x={frame(O,l,p){const C=requestAnimationFrame((T=>{E(),l(T)})),{unsubscribe:E}=a.s(O.signal,"abort",(()=>{E(),cancelAnimationFrame(C),p(a.c())}),!1)},frameAsync(O){return new Promise(((l,p)=>{this.frame(O,l,p)}))},getImageData(O,l=0){return this.getImageCanvasContext(O).getImageData(-l,-l,O.width+2*l,O.height+2*l)},getImageCanvasContext(O){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=O.width,l.height=O.height,p.drawImage(O,0,0,O.width,O.height),p},resolveURL:O=>(m||(m=document.createElement("a")),m.href=O,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}},S=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(O){this._frozenAt=O}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function B(){return S.getCurrentTime()}class R{static testProp(l){if(!R.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in R.docStyle)return l[p];return l[0]}static create(l,p,C){const E=window.document.createElement(l);return p!==void 0&&(E.className=p),C&&C.appendChild(E),E}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(l,p){l.style[R.transformProp]=p}static addEventListener(l,p,C,E={}){l.addEventListener(p,C,"passive"in E?E:E.capture)}static removeEventListener(l,p,C,E={}){l.removeEventListener(p,C,"passive"in E?E:E.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",R.suppressClickInternal,!0)}),0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,C){const E=p.boundingClientRect;return new a.P((C.clientX-E.left)/p.x-l.clientLeft,(C.clientY-E.top)/p.y-l.clientTop)}static mousePos(l,p){const C=R.getScale(l);return R.getPoint(l,C,p)}static touchPos(l,p){const C=[],E=R.getScale(l);for(let T=0;T<p.length;T++)C.push(R.getPoint(l,E,p[T]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const p=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=p.querySelectorAll("script");for(const E of C)E.remove();return R.clean(p),p.innerHTML}static isPossiblyDangerous(l,p){const C=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const p=l.children;for(const C of p)R.removeAttributes(C),R.clean(C)}static removeAttributes(l){for(const{name:p,value:C}of l.attributes)R.isPossiblyDangerous(p,C)&&l.removeAttribute(p)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);const F={supported:!1,testSupport:function(O){!H&&W&&($?N(O):j=O)}};let j,W,H=!1,$=!1;function N(O){const l=O.createTexture();O.bindTexture(O.TEXTURE_2D,l);try{if(O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,W),O.isContextLost())return;F.supported=!0}catch{}O.deleteTexture(l),H=!0}var Y;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{j&&N(j),j=null,$=!0},W.onerror=()=>{H=!0,j=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(O){let l,p,C,E;O.resetRequestQueue=()=>{l=[],p=0,C=0,E={}},O.addThrottleControl=Z=>{const re=C++;return E[re]=Z,re},O.removeThrottleControl=Z=>{delete E[Z],U()},O.getImage=(Z,re,ue=!0)=>new Promise(((Ce,ge)=>{F.supported&&(Z.headers||(Z.headers={}),Z.headers.accept="image/webp,*/*"),a.e(Z,{type:"image"}),l.push({abortController:re,requestParameters:Z,supportImageRefresh:ue,state:"queued",onError:Ue=>{ge(Ue)},onSuccess:Ue=>{Ce(Ue)}}),U()}));const T=Z=>a._(this,void 0,void 0,(function*(){Z.state="running";const{requestParameters:re,supportImageRefresh:ue,onError:Ce,onSuccess:ge,abortController:Ue}=Z,We=ue===!1&&!a.i(self)&&!a.g(re.url)&&(!re.headers||Object.keys(re.headers).reduce(((tt,at)=>tt&&at==="accept"),!0));p++;const Je=We?q(re,Ue):a.m(re,Ue);try{const tt=yield Je;delete Z.abortController,Z.state="completed",tt.data instanceof HTMLImageElement||a.b(tt.data)?ge(tt):tt.data&&ge({data:yield(He=tt.data,typeof createImageBitmap=="function"?a.f(He):a.h(He)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete Z.abortController,Ce(tt)}finally{p--,U()}var He})),U=()=>{const Z=(()=>{for(const re of Object.keys(E))if(E[re]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let re=p;re<Z&&l.length>0;re++){const ue=l.shift();ue.abortController.signal.aborted?re--:T(ue)}},q=(Z,re)=>new Promise(((ue,Ce)=>{const ge=new Image,Ue=Z.url,We=Z.credentials;We&&We==="include"?ge.crossOrigin="use-credentials":(We&&We==="same-origin"||!a.d(Ue))&&(ge.crossOrigin="anonymous"),re.signal.addEventListener("abort",(()=>{ge.src="",Ce(a.c())})),ge.fetchPriority="high",ge.onload=()=>{ge.onerror=ge.onload=null,ue({data:ge})},ge.onerror=()=>{ge.onerror=ge.onload=null,re.signal.aborted||Ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ge.src=Ue}))})(Y||(Y={})),Y.resetRequestQueue();class z{constructor(l){this._transformRequestFn=l??null}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function ne(O){const l=[];if(typeof O=="string")l.push({id:"default",url:O});else if(O&&O.length>0){const p=[];for(const{id:C,url:E}of O){const T=`${C}${E}`;p.indexOf(T)===-1&&(p.push(T),l.push({id:C,url:E}))}}return l}function ae(O,l,p){try{const C=new URL(O);return C.pathname+=`${l}${p}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${O}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ve(O){const{userImage:l}=O;return!!(l&&l.render&&l.render())&&(O.data.replace(new Uint8Array(l.data.buffer)),!0)}class pe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:C}of this.requestors)C(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const C=p.spriteData;p.data=new a.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let C=!0;const E=p.data||p.spriteData;return this._validateStretch(p.stretchX,E&&E.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,E&&E.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,p){if(!l)return!0;let C=0;for(const E of l){if(E[0]<C||E[1]<E[0]||p<E[1])return!1;C=E[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const C=p.spriteData,E=C&&C.width||p.data.width,T=C&&C.height||p.data.height;return!(l[0]<0||E<l[0]||l[1]<0||T<l[1]||l[2]<0||E<l[2]||l[3]<0||T<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,C=!0){const E=this.getImage(l);if(C&&(E.data.width!==p.data.width||E.data.height!==p.data.height))throw new Error(`size mismatch between old image (${E.data.width}x${E.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=E.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((p,C)=>{let E=!0;if(!this.isLoaded())for(const T of l)this.images[T]||(E=!1);this.isLoaded()||E?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})}))}_getImagesForIds(l){const p={};for(const C of l){let E=this.getImage(C);E||(this.fire(new a.l("styleimagemissing",{id:C})),E=this.getImage(C)),E?p[C]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,textFitWidth:E.textFitWidth,textFitHeight:E.textFitHeight,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:a.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],C=this.getImage(l);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const E={w:C.data.width+2,h:C.data.height+2,x:0,y:0},T=new a.I(E,C);this.patterns[l]={bin:E,position:T}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const T in this.patterns)l.push(this.patterns[T].bin);const{w:p,h:C}=a.p(l),E=this.atlasImage;E.resize({width:p||1,height:C||1});for(const T in this.patterns){const{bin:U}=this.patterns[T],q=U.x+1,Z=U.y+1,re=this.getImage(T).data,ue=re.width,Ce=re.height;a.R.copy(re,E,{x:0,y:0},{x:q,y:Z},{width:ue,height:Ce}),a.R.copy(re,E,{x:0,y:Ce-1},{x:q,y:Z-1},{width:ue,height:1}),a.R.copy(re,E,{x:0,y:0},{x:q,y:Z+Ce},{width:ue,height:1}),a.R.copy(re,E,{x:ue-1,y:0},{x:q-1,y:Z},{width:1,height:Ce}),a.R.copy(re,E,{x:0,y:0},{x:q+ue,y:Z},{width:1,height:Ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.getImage(p);C||a.w(`Image with ID: "${p}" was not found`),ve(C)&&this.updateImage(p,C)}}}const be=1e20;function Ee(O,l,p,C,E,T,U,q,Z){for(let re=l;re<l+C;re++)Te(O,p*T+re,T,E,U,q,Z);for(let re=p;re<p+E;re++)Te(O,re*T+l,1,C,U,q,Z)}function Te(O,l,p,C,E,T,U){T[0]=0,U[0]=-be,U[1]=be,E[0]=O[l];for(let q=1,Z=0,re=0;q<C;q++){E[q]=O[l+q*p];const ue=q*q;do{const Ce=T[Z];re=(E[q]-E[Ce]+ue-Ce*Ce)/(q-Ce)/2}while(re<=U[Z]&&--Z>-1);Z++,T[Z]=q,U[Z]=re,U[Z+1]=be}for(let q=0,Z=0;q<C;q++){for(;U[Z+1]<q;)Z++;const re=T[Z],ue=q-re;O[l+q*p]=E[re]+ue*ue}}class je{constructor(l,p,C){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={},this.lang=C}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const p=[];for(const T in l)for(const U of l[T])p.push(this._getAndCacheGlyphsPromise(T,U));const C=yield Promise.all(p),E={};for(const{stack:T,id:U,glyph:q}of C)E[T]||(E[T]={}),E[T][U]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return E}))}_getAndCacheGlyphsPromise(l,p){return a._(this,void 0,void 0,(function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let E=C.glyphs[p];if(E!==void 0)return{stack:l,id:p,glyph:E};if(E=this._tinySDF(C,l,p),E)return C.glyphs[p]=E,{stack:l,id:p,glyph:E};const T=Math.floor(p/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[T])return{stack:l,id:p,glyph:E};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[T]){const q=je.loadGlyphRange(l,T,this.url,this.requestManager);C.requests[T]=q}const U=yield C.requests[T];for(const q in U)this._doesCharSupportLocalGlyph(+q)||(C.glyphs[+q]=U[+q]);return C.ranges[T]=!0,{stack:l,id:p,glyph:U[p]||null}}))}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))||a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l)||a.u["CJK Symbols and Punctuation"](l)||a.u["Halfwidth and Fullwidth Forms"](l))}_tinySDF(l,p,C){const E=this.localIdeographFontFamily;if(!E||!this._doesCharSupportLocalGlyph(C))return;let T=l.tinySDF;if(!T){let q="400";/bold/i.test(p)?q="900":/medium/i.test(p)?q="500":/light/i.test(p)&&(q="200"),T=l.tinySDF=new je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:E,fontWeight:q})}const U=T.draw(String.fromCharCode(C));return{id:C,bitmap:new a.q({width:U.width||60,height:U.height||60},U.data),metrics:{width:U.glyphWidth/2||24,height:U.glyphHeight/2||24,left:U.glyphLeft/2+.5||0,top:U.glyphTop/2-27.5||-8,advance:U.glyphAdvance/2||24,isDoubleResolution:!0}}}}je.loadGlyphRange=function(O,l,p,C){return a._(this,void 0,void 0,(function*(){const E=256*l,T=E+255,U=C.transformRequest(p.replace("{fontstack}",O).replace("{range}",`${E}-${T}`),"Glyphs"),q=yield a.n(U,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${l}, ${E}-${T}`);const Z={};for(const re of a.o(q.data))Z[re.id]=re;return Z}))},je.TinySDF=class{constructor({fontSize:O=24,buffer:l=3,radius:p=8,cutoff:C=.25,fontFamily:E="sans-serif",fontWeight:T="normal",fontStyle:U="normal",lang:q=null}={}){this.buffer=l,this.cutoff=C,this.radius=p,this.lang=q;const Z=this.size=O+4*l,re=this._createCanvas(Z),ue=this.ctx=re.getContext("2d",{willReadFrequently:!0});ue.font=`${U} ${T} ${O}px ${E}`,ue.textBaseline="alphabetic",ue.textAlign="left",ue.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z)}_createCanvas(O){const l=document.createElement("canvas");return l.width=l.height=O,l}draw(O){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:E,actualBoundingBoxRight:T}=this.ctx.measureText(O),U=Math.ceil(p),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-E))),Z=Math.min(this.size-this.buffer,U+Math.ceil(C)),re=q+2*this.buffer,ue=Z+2*this.buffer,Ce=Math.max(re*ue,0),ge=new Uint8ClampedArray(Ce),Ue={data:ge,width:re,height:ue,glyphWidth:q,glyphHeight:Z,glyphTop:U,glyphLeft:0,glyphAdvance:l};if(q===0||Z===0)return Ue;const{ctx:We,buffer:Je,gridInner:He,gridOuter:tt}=this;this.lang&&(We.lang=this.lang),We.clearRect(Je,Je,q,Z),We.fillText(O,Je,Je+U);const at=We.getImageData(Je,Je,q,Z);tt.fill(be,0,Ce),He.fill(0,0,Ce);for(let yt=0;yt<Z;yt++)for(let lt=0;lt<q;lt++){const vt=at.data[4*(yt*q+lt)+3]/255;if(vt===0)continue;const bt=(yt+Je)*re+lt+Je;if(vt===1)tt[bt]=0,He[bt]=be;else{const ct=.5-vt;tt[bt]=ct>0?ct*ct:0,He[bt]=ct<0?ct*ct:0}}Ee(tt,0,0,re,ue,re,this.f,this.v,this.z),Ee(He,Je,Je,q,Z,re,this.f,this.v,this.z);for(let yt=0;yt<Ce;yt++){const lt=Math.sqrt(tt[yt])-Math.sqrt(He[yt]);ge[yt]=Math.round(255-255*(lt/this.radius+this.cutoff))}return Ue}};class Re{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,p){return a.B(l.expression.evaluate(p))}interpolate(l,p,C){return{x:a.C.number(l.x,p.x,C),y:a.C.number(l.y,p.y,C),z:a.C.number(l.z,p.z,C)}}}let qe;class nt extends a.E{constructor(l){super(),qe=qe||new a.r({anchor:new a.D(a.v.light.anchor),position:new Re,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(qe,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(a.x,l,p))for(const C in l){const E=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C){return(!C||C.validate!==!1)&&a.y(this,l.call(a.z,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const ht=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class ke extends a.E{constructor(l){super(),this._transitionable=new a.t(ht,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(l,p={}){if(!this._validate(a.G,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const E=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),E):this._transitionable.setValue(C,E)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C={}){return C?.validate!==!1&&a.y(this,l.call(a.z,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Oe{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const C=l.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,p)),this.dashEntry[C]}getDashRanges(l,p,C){const E=[];let T=l.length%2==1?-l[l.length-1]*C:0,U=l[0]*C,q=!0;E.push({left:T,right:U,isDash:q,zeroLength:l[0]===0});let Z=l[0];for(let re=1;re<l.length;re++){q=!q;const ue=l[re];T=Z*C,Z+=ue,U=Z*C,E.push({left:T,right:U,isDash:q,zeroLength:ue===0})}return E}addRoundDash(l,p,C){const E=p/2;for(let T=-C;T<=C;T++){const U=this.width*(this.nextRow+C+T);let q=0,Z=l[q];for(let re=0;re<this.width;re++){re/Z.right>1&&(Z=l[++q]);const ue=Math.abs(re-Z.left),Ce=Math.abs(re-Z.right),ge=Math.min(ue,Ce);let Ue;const We=T/C*(E+1);if(Z.isDash){const Je=E-Math.abs(We);Ue=Math.sqrt(ge*ge+Je*Je)}else Ue=E-Math.sqrt(ge*ge+We*We);this.data[U+re]=Math.max(0,Math.min(255,Ue+128))}}}addRegularDash(l){for(let q=l.length-1;q>=0;--q){const Z=l[q],re=l[q+1];Z.zeroLength?l.splice(q,1):re&&re.isDash===Z.isDash&&(re.left=Z.left,l.splice(q,1))}const p=l[0],C=l[l.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const E=this.width*this.nextRow;let T=0,U=l[T];for(let q=0;q<this.width;q++){q/U.right>1&&(U=l[++T]);const Z=Math.abs(q-U.left),re=Math.abs(q-U.right),ue=Math.min(Z,re);this.data[E+q]=Math.max(0,Math.min(255,(U.isDash?ue:-ue)+128))}}addDash(l,p){const C=p?7:0,E=2*C+1;if(this.nextRow+E>this.height)return a.w("LineAtlas out of space"),null;let T=0;for(let q=0;q<l.length;q++)T+=l[q];if(T!==0){const q=this.width/T,Z=this.getDashRanges(l,this.width,q);p?this.addRoundDash(Z,q,C):this.addRegularDash(Z)}const U={y:this.nextRow+C,height:2*C,width:T};return this.nextRow+=E,this.dirty=!0,U}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const ze="maplibre_preloaded_worker_pool";class we{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<we.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}const At=Math.floor(x.hardwareConcurrency/2);let it,Ct;function It(){return it||(it=new we),it}we.workerCount=a.H(globalThis)?Math.max(Math.min(At,3),1):1;class Ke{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const C=this.workerPool.acquire(p);for(let E=0;E<C.length;E++){const T=new a.J(C[E],p);T.name=`Worker ${E}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const C=[];for(const E of this.actors)C.push(E.sendAsync({type:l,data:p}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const C of this.actors)C.registerMessageHandler(l,p)}}function Ie(){return Ct||(Ct=new Ke(It(),a.K),Ct.registerMessageHandler("GR",((O,l,p)=>a.m(l,p)))),Ct}function Se(O,l){const p=a.L();return a.M(p,p,[1,1,0]),a.N(p,p,[.5*O.width,.5*O.height,1]),O.calculatePosMatrix?a.O(p,p,O.calculatePosMatrix(l.toUnwrapped())):p}function Ge(O,l,p,C,E,T,U){var q;const Z=(function(ge,Ue,We){if(ge)for(const Je of ge){const He=Ue[Je];if(He&&He.source===We&&He.type==="fill-extrusion")return!0}else for(const Je in Ue){const He=Ue[Je];if(He.source===We&&He.type==="fill-extrusion")return!0}return!1})((q=E?.layers)!==null&&q!==void 0?q:null,l,O.id),re=T.maxPitchScaleFactor(),ue=O.tilesIn(C,re,Z);ue.sort(st);const Ce=[];for(const ge of ue)Ce.push({wrappedTileID:ge.tileID.wrapped().key,queryResults:ge.tile.queryRenderedFeatures(l,p,O._state,ge.queryGeometry,ge.cameraQueryGeometry,ge.scale,E,T,re,Se(O.transform,ge.tileID),U?(Ue,We)=>U(ge.tileID,Ue,We):void 0)});return(function(ge,Ue){for(const We in ge)for(const Je of ge[We])ut(Je,Ue);return ge})((function(ge){const Ue={},We={};for(const Je of ge){const He=Je.queryResults,tt=Je.wrappedTileID,at=We[tt]=We[tt]||{};for(const yt in He){const lt=He[yt],vt=at[yt]=at[yt]||{},bt=Ue[yt]=Ue[yt]||[];for(const ct of lt)vt[ct.featureIndex]||(vt[ct.featureIndex]=!0,bt.push(ct))}}return Ue})(Ce),O)}function st(O,l){const p=O.tileID,C=l.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}function ut(O,l){const p=O.feature,C=l.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=C}function ft(O,l,p){return a._(this,void 0,void 0,(function*(){let C=O;if(O.url?C=(yield a.j(l.transformRequest(O.url,"Source"),p)).data:yield x.frameAsync(p),!C)return null;const E=a.Q(a.e(C,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(E.vectorLayerIds=C.vector_layers.map((T=>T.id))),E}))}class St{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}extend(l){const p=this._sw,C=this._ne;let E,T;if(l instanceof a.S)E=l,T=l;else{if(!(l instanceof St))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(St.convert(l)):this.extend(a.S.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.S.convert(l)):this;if(E=l._sw,T=l._ne,!E||!T)return this}return p||C?(p.lng=Math.min(E.lng,p.lng),p.lat=Math.min(E.lat,p.lat),C.lng=Math.max(T.lng,C.lng),C.lat=Math.max(T.lat,C.lat)):(this._sw=new a.S(E.lng,E.lat),this._ne=new a.S(T.lng,T.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:C}=a.S.convert(l);let E=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(E=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&E}static convert(l){return l instanceof St?l:l&&new St(l)}static fromLngLat(l,p=0){const C=360*p/40075017,E=C/Math.cos(Math.PI/180*l.lat);return new St(new a.S(l.lng-E,l.lat-C),new a.S(l.lng+E,l.lat+C))}adjustAntiMeridian(){const l=new a.S(this._sw.lng,this._sw.lat),p=new a.S(this._ne.lng,this._ne.lat);return new St(l,l.lng>p.lng?new a.S(p.lng+360,p.lat):p)}}class kt{constructor(l,p,C){this.bounds=St.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),C=Math.floor(a.V(this.bounds.getWest())*p),E=Math.floor(a.U(this.bounds.getNorth())*p),T=Math.ceil(a.V(this.bounds.getEast())*p),U=Math.ceil(a.U(this.bounds.getSouth())*p);return l.x>=C&&l.x<T&&l.y>=E&&l.y<U}}class en extends a.E{constructor(l,p,C,E){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new kt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let E="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((T,U)=>{l.reloadPromise={resolve:T,reject:U}}))}else l.actor=this.dispatcher.getActor(),E="LT";l.abortController=new AbortController;try{const T=yield l.actor.sendAsync({type:E,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,T)}catch(T){if(delete l.abortController,l.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(l,null)}}))}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Pn extends a.E{constructor(l,p,C,E){super(),this.id=l,this.dispatcher=C,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.Q(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new kt(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield Y.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const E=this.map.painter.context,T=E.gl,U=C.data;l.texture=this.map.painter.getTileTexture(U.width),l.texture?l.texture.update(U,{useMipmap:!0}):(l.texture=new a.T(E,U,T.RGBA,{useMipmap:!0}),l.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class zn extends Pn{constructor(l,p,C,E){super(l,p,C,E),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const E=yield Y.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(E&&E.data){const T=E.data;this.map._refreshExpiredTiles&&(E.cacheControl||E.expires)&&l.setExpiryData({cacheControl:E.cacheControl,expires:E.expires});const U=a.b(T)&&a.W()?T:yield this.readImageNow(T),q={type:this.type,uid:l.uid,source:this.id,rawImageData:U,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const Z=yield l.actor.sendAsync({type:"LDT",data:q});l.dem=Z,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(E){if(delete l.abortController,l.aborted)l.state="unloaded";else if(E)throw l.state="errored",E}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const p=l.width+2,C=l.height+2;try{return new a.R({width:p,height:C},yield a.Y(l,-1,-1,p,C))}catch{}}return x.getImageData(l,1)}))}_getNeighboringTiles(l){const p=l.canonical,C=Math.pow(2,p.z),E=(p.x-1+C)%C,T=p.x===0?l.wrap-1:l.wrap,U=(p.x+1+C)%C,q=p.x+1===C?l.wrap+1:l.wrap,Z={};return Z[new a.Z(l.overscaledZ,T,p.z,E,p.y).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,q,p.z,U,p.y).key]={backfilled:!1},p.y>0&&(Z[new a.Z(l.overscaledZ,T,p.z,E,p.y-1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,q,p.z,U,p.y-1).key]={backfilled:!1}),p.y+1<C&&(Z[new a.Z(l.overscaledZ,T,p.z,E,p.y+1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},Z[new a.Z(l.overscaledZ,q,p.z,U,p.y+1).key]={backfilled:!1}),Z}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}class si extends a.E{constructor(l,p,C,E){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=C.getActor(),this.setEventedParent(E),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(l){return l*(a.$/this.tileSize)}_getClusterMaxZoom(l){const p=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._pendingWorkerUpdate={data:l},this._updateWorkerData(),this}updateData(l){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,l),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getCoordinatesFromGeometry(l){return l.type==="GeometryCollection"?l.geometries.map((p=>p.coordinates)).flat(1/0):l.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const l=new St,p=yield this.getData();let C;switch(p.type){case"FeatureCollection":C=p.features.map((E=>this.getCoordinatesFromGeometry(E.geometry))).flat(1/0);break;case"Feature":C=this.getCoordinatesFromGeometry(p.geometry);break;default:C=this.getCoordinatesFromGeometry(p)}if(C.length==0)return l;for(let E=0;E<C.length-1;E+=2)l.extend([C[E],C[E+1]]);return l}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:C}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:l,diff:p}=this._pendingWorkerUpdate,C=a.e({type:this.type},this.workerOptions);l?(typeof l=="string"?(C.request=this.map._requestManager.transformRequest(x.resolveURL(l),"Source"),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(l),this._pendingWorkerUpdate.data=void 0):p&&(C.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const E=yield this.actor.sendAsync({type:"LD",data:C});if(this._isUpdatingWorker=!1,this._removed||E.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=E.data;let T=null;E.resourceTiming&&E.resourceTiming[this.id]&&(T=E.resourceTiming[this.id].slice(0));const U={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&a.e(U,{resourceTiming:T}),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"content"})))}catch(E){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(E))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const E=yield this.actor.sendAsync({type:p,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(E,this.map.painter,p==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class xn extends a.E{constructor(l,p,C,E){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=p}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield Y.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(a.a1.fromLngLat);var C;return this.tileID=(function(E){const T=a.a2.fromPoints(E),U=T.width(),q=T.height(),Z=Math.max(U,q),re=Math.max(0,Math.floor(-Math.log(Z)/Math.LN2)),ue=Math.pow(2,re);return new a.a4(re,Math.floor((T.minX+T.maxX)/2*ue),Math.floor((T.minY+T.maxY)/2*ue))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((E=>this.tileID.getTilePoint(E)._round())),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.texture||(this.texture=new a.T(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const T=this.tiles[E];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:p,minY:C,maxX:E,maxY:T}=a.a2.fromPoints(l),U={};for(let q=0;q<=a.a3;q++){const Z=Math.pow(2,q),re=Math.floor(p*Z),ue=Math.floor(C*Z),Ce=Math.floor(E*Z),ge=Math.floor(T*Z);U[q]={minTileX:re,minTileY:ue,maxTileX:Ce,maxTileY:ge}}return U}}class Rn extends xn{constructor(l,p,C,E){super(l,p,C,E),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a5(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const T=this.tiles[E];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pn extends xn{constructor(l,p,C,E){super(l,p,C,E),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((U=>typeof U!="number"))))||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,C.RGBA,{premultiply:!0});let E=!1;for(const T in this.tiles){const U=this.tiles[T];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,E=!0)}E&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Hn={},Un=O=>{switch(O){case"geojson":return si;case"image":return xn;case"raster":return Pn;case"raster-dem":return zn;case"vector":return en;case"video":return Rn;case"canvas":return pn}return Hn[O]},Tt="RTLPluginLoaded";class Me extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ie()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(p,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Tt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let oe=null;function le(){return oe||(oe=new Me),oe}var he,se;(function(O){O[O.Base=0]="Base",O[O.Parent=1]="Parent"})(he||(he={})),(function(O){O[O.Departing=0]="Departing",O[O.Incoming=1]="Incoming"})(se||(se={}));class Ae{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=l,this.uid=a.a7(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(l){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(l||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:l,fadingDirection:p,fadingParentID:C,fadeEndTime:E}){this.resetFadeLogic(),this.fadingRole=l,this.fadingDirection=p,this.fadingParentID=C,this.fadeEndTime=E}setSelfFadeLogic(l){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=l}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=B(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(E,T){const U={};if(!T)return U;for(const q of E){const Z=q.layerIds.map((re=>T.getLayer(re))).filter(Boolean);if(Z.length!==0){q.layers=Z,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map((re=>Z.filter((ue=>ue.id===re))[0])));for(const re of Z)U[re.id]=q}}return U})(l.buckets,p?.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const T=this.buckets[E];if(T instanceof a.a9){if(this.hasSymbolBuckets=!0,!C)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const T=this.buckets[E];if(T instanceof a.a9&&T.hasRTLText){this.hasRTLText=!0,le().lazyLoad();break}}this.queryPadding=0;for(const E in this.buckets){const T=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(E).queryRadius(T))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const E=this.buckets[C];E.uploadPending()&&E.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,C,E,T,U,q,Z,re,ue,Ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:T,scale:U,tileSize:this.tileSize,pixelPosMatrix:ue,transform:Z,params:q,queryPadding:this.queryPadding*re,getElevation:Ce},l,p,C):{}}querySourceFeatures(l,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const E=C.loadVTLayers(),T=p&&p.sourceLayer?p.sourceLayer:"",U=E._geojsonTileLayer||E[T];if(!U)return;const q=a.aa(p?.filter,p?.globalState),{z:Z,x:re,y:ue}=this.tileID.canonical,Ce={z:Z,x:re,y:ue};for(let ge=0;ge<U.length;ge++){const Ue=U.feature(ge);if(q.needGeometry){const He=a.ab(Ue,!0);if(!q.filter(new a.F(this.tileID.overscaledZ),He,this.tileID.canonical))continue}else if(!q.filter(new a.F(this.tileID.overscaledZ),Ue))continue;const We=C.getId(Ue,T),Je=new a.ac(Ue,Z,re,ue,We);Je.tile=Ce,l.push(Je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const C=a.ad(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let E=!1;if(this.expirationTime>C)E=!1;else if(p)if(this.expirationTime<p)E=!0;else{const T=this.expirationTime-p;T?this.expirationTime=C+Math.max(T,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const E in this.buckets){if(!p.style.hasLayer(E))continue;const T=this.buckets[E],U=T.layers[0].sourceLayer||"_geojsonTileLayer",q=C[U],Z=l[U];if(!q||!Z||Object.keys(Z).length===0)continue;T.update(Z,q,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const re=p&&p.style&&p.style.getLayer(E);re&&(this.queryPadding=Math.max(this.queryPadding,re.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(l){this.symbolFadeHoldUntil=B()+l}setDependencies(l,p){const C={};for(const E of p)C[E]=!0;this.dependencies[l]=C}hasDependency(l,p){for(const C of l){const E=this.dependencies[C];if(E){for(const T of p)if(E[T])return!0}}return!1}}class xe{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,C){const E=l.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const T={value:p,timeout:void 0};if(C!==void 0&&(T.timeout=setTimeout((()=>{this.remove(l,T)}),C)),this.data[E].push(T),this.order.push(E),this.order.length>this.max){const U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const C=l.wrapped().key,E=p===void 0?0:this.data[C].indexOf(p),T=this.data[C][E];return this.data[C].splice(E,1),T.timeout&&clearTimeout(T.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(T.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const C in this.data)for(const E of this.data[C])l(E.value)||p.push(E);for(const C of p)this.remove(C.value.tileID,C)}}class Ye{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,C){const E=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][E]=this.stateChanges[l][E]||{},a.e(this.stateChanges[l][E],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const T in this.state[l])T!==E&&(this.deletedStates[l][T]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][E]===null){this.deletedStates[l][E]={};for(const T in this.state[l][E])C[T]||(this.deletedStates[l][E][T]=null)}else for(const T in C)this.deletedStates[l]&&this.deletedStates[l][E]&&this.deletedStates[l][E][T]===null&&delete this.deletedStates[l][E][T]}removeFeatureState(l,p,C){if(this.deletedStates[l]===null)return;const E=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&p!==void 0)this.deletedStates[l][E]!==null&&(this.deletedStates[l][E]=this.deletedStates[l][E]||{},this.deletedStates[l][E][C]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][E])for(C in this.deletedStates[l][E]={},this.stateChanges[l][E])this.deletedStates[l][E][C]=null;else this.deletedStates[l][E]=null;else this.deletedStates[l]=null}getState(l,p){const C=String(p),E=a.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const T=this.deletedStates[l][p];if(T===null)return{};for(const U in T)delete E[U]}return E}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const C={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const T={};for(const U in this.stateChanges[E])this.state[E][U]||(this.state[E][U]={}),a.e(this.state[E][U],this.stateChanges[E][U]),T[U]=this.state[E][U];C[E]=T}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const T={};if(this.deletedStates[E]===null)for(const U in this.state[E])T[U]={},this.state[E][U]={};else for(const U in this.deletedStates[E]){if(this.deletedStates[E][U]===null)this.state[E][U]={};else for(const q of Object.keys(this.deletedStates[E][U]))delete this.state[E][U][q];T[U]=this.state[E][U]}C[E]=C[E]||{},a.e(C[E],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const E in l)l[E].setFeatureState(C,p)}}const Xe=89.25;function fe(O,l){const p=a.ae(l.lat,-a.af,a.af);return new a.P(a.V(l.lng)*O,a.U(p)*O)}function De(O,l){return new a.a1(l.x/O,l.y/O).toLngLat()}function y(O){return O.cameraToCenterDistance*Math.min(.85*Math.tan(a.ag(90-O.pitch)),Math.tan(a.ag(Xe-O.pitch)))}function rt(O,l){const p=O.canonical,C=l/a.ah(p.z),E=p.x+Math.pow(2,p.z)*O.wrap,T=a.ai(new Float64Array(16));return a.M(T,T,[E*C,p.y*C,0]),a.N(T,T,[C/a.$,C/a.$,1]),T}function Bt(O,l,p,C,E){const T=a.a1.fromLngLat(O,l),U=E*a.aj(1,O.lat),q=U*Math.cos(a.ag(p)),Z=Math.sqrt(U*U-q*q),re=Z*Math.sin(a.ag(-C)),ue=Z*Math.cos(a.ag(-C));return new a.a1(T.x+re,T.y+ue,T.z+q)}function pt(O,l,p){const C=l.intersectsFrustum(O);if(!p||C===0)return C;const E=l.intersectsPlane(p);return E===0?0:C===2&&E===2?2:1}function Ht(O,l,p){let C=0;const E=(p-l)/10;for(let T=0;T<10;T++)C+=E*Math.pow(Math.cos(l+(T+.5)/10*(p-l)),O);return C}function gt(O,l){return function(p,C,E,T,U){const q=2*((O-1)/a.ak(Math.cos(a.ag(Xe-U))/Math.cos(a.ag(Xe)))-1),Z=Math.acos(E/T),re=2*Ht(q-1,0,a.ag(U/2)),ue=Math.min(a.ag(Xe),Z+a.ag(U/2)),Ce=Ht(q-1,Math.min(ue,Z-a.ag(U/2)),ue),ge=Math.atan(C/E),Ue=Math.hypot(C,E);let We=p;return We+=a.ak(T/Ue/Math.max(.5,Math.cos(a.ag(U/2)))),We+=q*a.ak(Math.cos(ge))/2,We-=a.ak(Math.max(1,Ce/re/l))/2,We}}const jn=gt(9.314,3);function ni(O,l){const p=(l.roundZoom?Math.round:Math.floor)(O.zoom+a.ak(O.tileSize/l.tileSize));return Math.max(0,p)}function In(O,l){const p=O.getCameraFrustum(),C=O.getClippingPlane(),E=O.screenPointToMercatorCoordinate(O.getCameraPoint()),T=a.a1.fromLngLat(O.center,O.elevation);E.z=T.z+Math.cos(O.pitchInRadians)*O.cameraToCenterDistance/O.worldSize;const U=O.getCoveringTilesDetailsProvider(),q=U.allowVariableZoom(O,l),Z=ni(O,l),re=l.minzoom||0,ue=l.maxzoom!==void 0?l.maxzoom:O.maxZoom,Ce=Math.min(Math.max(0,Z),ue),ge=Math.pow(2,Ce),Ue=[ge*E.x,ge*E.y,0],We=[ge*T.x,ge*T.y,0],Je=Math.hypot(T.x-E.x,T.y-E.y),He=Math.abs(T.z-E.z),tt=Math.hypot(Je,He),at=vt=>({zoom:0,x:0,y:0,wrap:vt,fullyVisible:!1}),yt=[],lt=[];if(O.renderWorldCopies&&U.allowWorldCopies())for(let vt=1;vt<=3;vt++)yt.push(at(-vt)),yt.push(at(vt));for(yt.push(at(0));yt.length>0;){const vt=yt.pop(),bt=vt.x,ct=vt.y;let Ot=vt.fullyVisible;const Qt={x:bt,y:ct,z:vt.zoom},Kt=U.getTileBoundingVolume(Qt,vt.wrap,O.elevation,l);if(!Ot){const Tn=pt(p,Kt,C);if(Tn===0)continue;Ot=Tn===2}const jt=U.distanceToTile2d(E.x,E.y,Qt,Kt);let Wt=Z;q&&(Wt=(l.calculateTileZoom||jn)(O.zoom+a.ak(O.tileSize/l.tileSize),jt,He,tt,O.fov)),Wt=(l.roundZoom?Math.round:Math.floor)(Wt),Wt=Math.max(0,Wt);const kn=Math.min(Wt,ue);if(vt.wrap=U.getWrap(T,Qt,vt.wrap),vt.zoom>=kn){if(vt.zoom<re)continue;const Tn=Ce-vt.zoom,ln=Ue[0]-.5-(bt<<Tn),Xn=Ue[1]-.5-(ct<<Tn),Hi=l.reparseOverscaled?Math.max(vt.zoom,Wt):vt.zoom;lt.push({tileID:new a.Z(vt.zoom===ue?Hi:vt.zoom,vt.wrap,vt.zoom,bt,ct),distanceSq:a.al([We[0]-.5-bt,We[1]-.5-ct]),tileDistanceToCamera:Math.sqrt(ln*ln+Xn*Xn)})}else for(let Tn=0;Tn<4;Tn++)yt.push({zoom:vt.zoom+1,x:(bt<<1)+Tn%2,y:(ct<<1)+(Tn>>1),wrap:vt.wrap,fullyVisible:Ot})}return lt.sort(((vt,bt)=>vt.distanceSq-bt.distanceSq)).map((vt=>vt.tileID))}const Ln=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Zn extends a.E{constructor(l,p,C){super(),this.id=l,this.dispatcher=C,this.on("data",(E=>this._dataHandler(E))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((E,T,U,q)=>{const Z=new(Un(T.type))(E,T,U,q);if(Z.id!==E)throw new Error(`Expected Source id to be ${E} instead of ${Z.id}`);return Z})(l,p,C,this),this._tiles={},this._cache=new xe(0,(E=>this._unloadTile(E))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ye,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,C){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,C)}catch(E){l.state="errored",E.status!==404?this._source.fire(new a.k(E,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const C=this._tiles[p];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(Xi).map((l=>l.key))}getRenderableIds(l){const p=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&p.push(this._tiles[C]);return l?p.sort(((C,E)=>{const T=C.tileID,U=E.tileID,q=new a.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),Z=new a.P(U.canonical.x,U.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-U.overscaledZ||Z.y-q.y||Z.x-q.x})).map((C=>C.tileID.key)):p.map((C=>C.tileID)).sort(Xi).map((C=>C.key))}hasRenderableParent(l){const p=l.overscaledZ-1;if(p>=this._source.minzoom){const C=this._getLoadedTile(l.scaledTo(p));if(C)return this._isIdRenderable(C.tileID.key)}return!1}_isIdRenderable(l,p=!1){var C;return(C=this._tiles[l])===null||C===void 0?void 0:C.isRenderable(p)}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)l?this._reloadTile(p,"expired"):this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(l,p){return a._(this,void 0,void 0,(function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=p),yield this._loadTile(C,l,p))}))}_tileLoaded(l,p,C){l.timeAdded=B(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let E=0;E<p.length;E++){const T=p[E];if(l.neighboringTiles&&l.neighboringTiles[T]){const U=this.getTileByID(T);C(l,U),C(U,l)}}function C(E,T){E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let U=T.tileID.canonical.x-E.tileID.canonical.x;const q=T.tileID.canonical.y-E.tileID.canonical.y,Z=Math.pow(2,E.tileID.canonical.z),re=T.tileID.key;U===0&&q===0||Math.abs(q)>1||(Math.abs(U)>1&&(Math.abs(U+Z)===1?U+=Z:Math.abs(U-Z)===1&&(U-=Z)),T.dem&&E.dem&&(E.dem.backfillBorder(T.dem,U,q),E.neighboringTiles&&E.neighboringTiles[re]&&(E.neighboringTiles[re].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p){const C=Object.values(l),E=this._getLoadedDescendents(C),T={};for(const U of C){const q=E[U.key];if(!q?.length){T[U.key]=U;continue}const Z=U.overscaledZ+Zn.maxUnderzooming,re=q.filter((ge=>ge.tileID.overscaledZ<=Z));if(!re.length){T[U.key]=U;continue}const ue=Math.min(...re.map((ge=>ge.tileID.overscaledZ))),Ce=re.filter((ge=>ge.tileID.overscaledZ===ue)).map((ge=>ge.tileID));for(const ge of Ce)p[ge.key]=ge;this._areDescendentsComplete(Ce,ue,U.overscaledZ)||(T[U.key]=U)}return T}_getLoadedDescendents(l){var p;const C={};for(const E in this._tiles){const T=this._tiles[E];if(T.hasData())for(const U of l)T.tileID.isChildOf(U)&&(C[p=U.key]||(C[p]=[])).push(T)}return C}_areDescendentsComplete(l,p,C){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===p:Math.pow(4,p-C)===l.length}_getLoadedTile(l){const p=this._tiles[l.key];return p?.hasData()?p:null}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,E=Math.floor(p*C*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(T)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const C={};for(const E in this._tiles){const T=this._tiles[E];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+p),C[T.tileID.key]=T}this._tiles=C,this._resetTileReloadTimers()}}update(l,p){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((Z=>new a.Z(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y))):(C=In(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter((Z=>this._source.hasTile(Z))))):C=[],this.usedForTerrain&&(C=this._addTerrainIdealTiles(C));const E=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=ni(l,this._source),U=this._updateRetainedTiles(C,T),q=Di(this._source.type);q&&this._rasterFadeDuration>0&&!p&&this._updateFadingTiles(C,U),q?this._cleanUpRasterTiles(U):this._cleanUpVectorTiles(U)}_cleanUpRasterTiles(l){for(const p in this._tiles)l[p]||this._removeTile(p)}_cleanUpVectorTiles(l){for(const p in this._tiles){const C=this._tiles[p];l[p]?C.clearSymbolFadeHold():C.hasSymbolBuckets?C.holdingForSymbolFade()?C.symbolFadeFinished()&&this._removeTile(p):C.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(l){const p=[];for(const C of l)if(C.canonical.z>this._source.minzoom){const E=C.scaledTo(C.canonical.z-1);p.push(E);const T=C.scaledTo(Math.max(this._source.minzoom,Math.min(C.canonical.z,5)));p.push(T)}return l.concat(p)}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForSymbolFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var C;const E={},T={},U=Math.max(p-Zn.maxOverzooming,this._source.minzoom);let q={};for(const Z of l){const re=this._addTile(Z);E[Z.key]=Z,re.hasData()||(q[Z.key]=Z)}q=this._retainLoadedChildren(q,E);for(const Z in q){const re=q[Z];let ue=this._tiles[Z],Ce=ue?.wasRequested();for(let ge=re.overscaledZ-1;ge>=U;--ge){const Ue=re.scaledTo(ge);if(T[Ue.key])break;if(T[Ue.key]=!0,ue=this.getTile(Ue),!ue&&Ce&&(ue=this._addTile(Ue)),ue){const We=ue.hasData();if((We||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||Ce)&&(E[Ue.key]=Ue),Ce=ue.wasRequested(),We)break}}}return E}_updateFadingTiles(l,p){const C=B(),E=a.am(l);for(const T of l){const U=this._tiles[T.key];U.fadingDirection!==se.Departing&&U.fadeOpacity!==0||U.resetFadeLogic(),this._updateFadingAncestor(U,p,C)||this._updateFadingDescendents(U,p,C)||this._updateFadingEdge(U,E,C)||U.resetFadeLogic()}}_updateFadingAncestor(l,p,C){if(!l.hasData())return!1;const{tileID:E,fadingRole:T,fadingDirection:U,fadingParentID:q}=l;if(T===he.Base&&U===se.Incoming&&q)return p[q.key]=q,!0;const Z=Math.max(E.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let re=E.overscaledZ-1;re>=Z;re--){const ue=E.scaledTo(re),Ce=this._getLoadedTile(ue);if(Ce)return l.setCrossFadeLogic({fadingRole:he.Base,fadingDirection:se.Incoming,fadingParentID:Ce.tileID,fadeEndTime:C+this._rasterFadeDuration}),Ce.setCrossFadeLogic({fadingRole:he.Parent,fadingDirection:se.Departing,fadeEndTime:C+this._rasterFadeDuration}),p[ue.key]=ue,!0}return!1}_updateFadingDescendents(l,p,C){if(!l.hasData())return!1;const E=l.tileID.children(this._source.maxzoom);let T=this._updateFadingChildren(l,E,p,C);if(T)return!0;for(const U of E){const q=U.children(this._source.maxzoom);this._updateFadingChildren(l,q,p,C)&&(T=!0)}return T}_updateFadingChildren(l,p,C,E){if(p[0].overscaledZ>=this._source.maxzoom)return!1;let T=!1;for(const U of p){const q=this._getLoadedTile(U);if(!q)continue;const{fadingRole:Z,fadingDirection:re,fadingParentID:ue}=q;Z===he.Base&&re===se.Departing&&ue||(q.setCrossFadeLogic({fadingRole:he.Base,fadingDirection:se.Departing,fadingParentID:l.tileID,fadeEndTime:E+this._rasterFadeDuration}),l.setCrossFadeLogic({fadingRole:he.Parent,fadingDirection:se.Incoming,fadeEndTime:E+this._rasterFadeDuration})),C[U.key]=U,T=!0}return T}_updateFadingEdge(l,p,C){const E=l.tileID;return!!l.selfFading||!l.hasData()&&!!p.has(E)&&(l.setSelfFadeLogic(C+this._rasterFadeDuration),!0)}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(p.resetFadeLogic(),this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null));const C=p;return p||(p=new Ae(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,C||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){this._clearTileReloadTimer(l);const C=p.getExpiryTimeout();C&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),C))}_clearTileReloadTimer(l){const p=this._timers[l];p&&(clearTimeout(p),delete this._timers[l])}_resetTileReloadTimers(){for(const l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(const l in this._tiles)this._setTileReloadTimer(l,this._tiles[l])}refreshTiles(l){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&l.some((C=>C.equals(this._tiles[p].tileID.canonical)))&&this._reloadTile(p,"expired")}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._clearTileReloadTimer(l),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){l.dataType==="source"&&(l.sourceDataType!=="metadata"?l.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,C){const E=[],T=this.transform;if(!T)return E;const U=T.getCoveringTilesDetailsProvider().allowWorldCopies(),q=C?T.getCameraQueryGeometry(l):l,Z=Ue=>T.screenPointToMercatorCoordinate(Ue,this.terrain),re=this.transformBbox(l,Z,!U),ue=this.transformBbox(q,Z,!U),Ce=this.getIds(),ge=a.a2.fromPoints(ue);for(let Ue=0;Ue<Ce.length;Ue++){const We=this._tiles[Ce[Ue]];if(We.holdingForSymbolFade())continue;const Je=U?[We.tileID]:[We.tileID.unwrapTo(-1),We.tileID.unwrapTo(0)],He=Math.pow(2,T.zoom-We.tileID.overscaledZ),tt=p*We.queryPadding*a.$/We.tileSize/He;for(const at of Je){const yt=ge.map((lt=>at.getTilePoint(new a.a1(lt.x,lt.y))));if(yt.expandBy(tt),yt.intersects(Ln)){const lt=re.map((bt=>at.getTilePoint(bt))),vt=ue.map((bt=>at.getTilePoint(bt)));E.push({tile:We,tileID:U?at:at.unwrapTo(0),queryGeometry:lt,cameraQueryGeometry:vt,scale:He})}}}return E}transformBbox(l,p,C){let E=l.map(p);if(C){const T=a.a2.fromPoints(l);T.shrinkBy(.001*Math.min(T.width(),T.height()));const U=T.map(p);a.a2.fromPoints(E).covers(U)||(E=E.map((q=>q.x>.5?new a.a1(q.x-1,q.y,q.z):q)))}return E}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map((C=>this._tiles[C].tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(Di(this._source.type)&&this._rasterFadeDuration>0){const l=B();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setRasterFadeDuration(l){this._rasterFadeDuration=l}setFeatureState(l,p,C){this._state.updateState(l=l||"_geojsonTileLayer",p,C)}removeFeatureState(l,p,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,C)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,C){const E=this._tiles[l];E&&E.setDependencies(p,C)}reloadTilesForDependencies(l,p){for(const C in this._tiles)this._tiles[C].hasDependency(l,p)&&this._reloadTile(C,"reloading");this._cache.filter((C=>!C.hasDependency(l,p)))}}function Xi(O,l){const p=Math.abs(2*O.wrap)-+(O.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return O.overscaledZ-l.overscaledZ||C-p||l.canonical.y-O.canonical.y||l.canonical.x-O.canonical.x}function Di(O){return O==="raster"||O==="image"||O==="video"}Zn.maxOverzooming=10,Zn.maxUnderzooming=3;class ur{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ae(l,0,1);let p=1,C=this._distances[p];const E=l*this.paddedLength+this.padding;for(;C<E&&p<this._distances.length;)C=this._distances[++p];const T=p-1,U=this._distances[T],q=C-U,Z=q>0?(E-U)/q:0;return this.points[T].mult(1-Z).add(this.points[p].mult(Z))}}function fi(O,l){let p=!0;return O==="always"||O!=="never"&&l!=="never"||(p=!1),p}class Si{constructor(l,p,C){const E=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(p/C);for(let U=0;U<this.xCellCount*this.yCellCount;U++)E.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,C,E,T){this._forEachCell(p,C,E,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(E),this.bboxes.push(T)}insertCircle(l,p,C,E){this._forEachCell(p-E,C-E,p+E,C+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(C),this.circles.push(E)}_insertBoxCell(l,p,C,E,T,U){this.boxCells[T].push(U)}_insertCircleCell(l,p,C,E,T,U){this.circleCells[T].push(U)}_query(l,p,C,E,T,U,q){if(C<0||l>this.width||E<0||p>this.height)return[];const Z=[];if(l<=0&&p<=0&&this.width<=C&&this.height<=E){if(T)return[{key:null,x1:l,y1:p,x2:C,y2:E}];for(let re=0;re<this.boxKeys.length;re++)Z.push({key:this.boxKeys[re],x1:this.bboxes[4*re],y1:this.bboxes[4*re+1],x2:this.bboxes[4*re+2],y2:this.bboxes[4*re+3]});for(let re=0;re<this.circleKeys.length;re++){const ue=this.circles[3*re],Ce=this.circles[3*re+1],ge=this.circles[3*re+2];Z.push({key:this.circleKeys[re],x1:ue-ge,y1:Ce-ge,x2:ue+ge,y2:Ce+ge})}}else this._forEachCell(l,p,C,E,this._queryCell,Z,{hitTest:T,overlapMode:U,seenUids:{box:{},circle:{}}},q);return Z}query(l,p,C,E){return this._query(l,p,C,E,!1,null)}hitTest(l,p,C,E,T,U){return this._query(l,p,C,E,!0,T,U).length>0}hitTestCircle(l,p,C,E,T){const U=l-C,q=l+C,Z=p-C,re=p+C;if(q<0||U>this.width||re<0||Z>this.height)return!1;const ue=[];return this._forEachCell(U,Z,q,re,this._queryCellCircle,ue,{hitTest:!0,overlapMode:E,circle:{x:l,y:p,radius:C},seenUids:{box:{},circle:{}}},T),ue.length>0}_queryCell(l,p,C,E,T,U,q,Z){const{seenUids:re,hitTest:ue,overlapMode:Ce}=q,ge=this.boxCells[T];if(ge!==null){const We=this.bboxes;for(const Je of ge)if(!re.box[Je]){re.box[Je]=!0;const He=4*Je,tt=this.boxKeys[Je];if(l<=We[He+2]&&p<=We[He+3]&&C>=We[He+0]&&E>=We[He+1]&&(!Z||Z(tt))&&(!ue||!fi(Ce,tt.overlapMode))&&(U.push({key:tt,x1:We[He],y1:We[He+1],x2:We[He+2],y2:We[He+3]}),ue))return!0}}const Ue=this.circleCells[T];if(Ue!==null){const We=this.circles;for(const Je of Ue)if(!re.circle[Je]){re.circle[Je]=!0;const He=3*Je,tt=this.circleKeys[Je];if(this._circleAndRectCollide(We[He],We[He+1],We[He+2],l,p,C,E)&&(!Z||Z(tt))&&(!ue||!fi(Ce,tt.overlapMode))){const at=We[He],yt=We[He+1],lt=We[He+2];if(U.push({key:tt,x1:at-lt,y1:yt-lt,x2:at+lt,y2:yt+lt}),ue)return!0}}}return!1}_queryCellCircle(l,p,C,E,T,U,q,Z){const{circle:re,seenUids:ue,overlapMode:Ce}=q,ge=this.boxCells[T];if(ge!==null){const We=this.bboxes;for(const Je of ge)if(!ue.box[Je]){ue.box[Je]=!0;const He=4*Je,tt=this.boxKeys[Je];if(this._circleAndRectCollide(re.x,re.y,re.radius,We[He+0],We[He+1],We[He+2],We[He+3])&&(!Z||Z(tt))&&!fi(Ce,tt.overlapMode))return U.push(!0),!0}}const Ue=this.circleCells[T];if(Ue!==null){const We=this.circles;for(const Je of Ue)if(!ue.circle[Je]){ue.circle[Je]=!0;const He=3*Je,tt=this.circleKeys[Je];if(this._circlesCollide(We[He],We[He+1],We[He+2],re.x,re.y,re.radius)&&(!Z||Z(tt))&&!fi(Ce,tt.overlapMode))return U.push(!0),!0}}}_forEachCell(l,p,C,E,T,U,q,Z){const re=this._convertToXCellCoord(l),ue=this._convertToYCellCoord(p),Ce=this._convertToXCellCoord(C),ge=this._convertToYCellCoord(E);for(let Ue=re;Ue<=Ce;Ue++)for(let We=ue;We<=ge;We++)if(T.call(this,l,p,C,E,this.xCellCount*We+Ue,U,q,Z))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,C,E,T,U){const q=E-l,Z=T-p,re=C+U;return re*re>q*q+Z*Z}_circleAndRectCollide(l,p,C,E,T,U,q){const Z=(U-E)/2,re=Math.abs(l-(E+Z));if(re>Z+C)return!1;const ue=(q-T)/2,Ce=Math.abs(p-(T+ue));if(Ce>ue+C)return!1;if(re<=Z||Ce<=ue)return!0;const ge=re-Z,Ue=Ce-ue;return ge*ge+Ue*Ue<=C*C}}function er(O,l,p){const C=a.L();if(!O){const{vecSouth:Ce,vecEast:ge}=Ti(l),Ue=h();Ue[0]=ge[0],Ue[1]=ge[1],Ue[2]=Ce[0],Ue[3]=Ce[1],E=Ue,(ue=(U=(T=Ue)[0])*(re=T[3])-(Z=T[2])*(q=T[1]))&&(E[0]=re*(ue=1/ue),E[1]=-q*ue,E[2]=-Z*ue,E[3]=U*ue),C[0]=Ue[0],C[1]=Ue[1],C[4]=Ue[2],C[5]=Ue[3]}var E,T,U,q,Z,re,ue;return a.N(C,C,[1/p,1/p,1]),C}function nn(O,l,p,C){if(O){const E=a.L();if(!l){const{vecSouth:T,vecEast:U}=Ti(p);E[0]=U[0],E[1]=U[1],E[4]=T[0],E[5]=T[1]}return a.N(E,E,[C,C,1]),E}return p.pixelsToClipSpaceMatrix}function Ti(O){const l=Math.cos(O.rollInRadians),p=Math.sin(O.rollInRadians),C=Math.cos(O.pitchInRadians),E=Math.cos(O.bearingInRadians),T=Math.sin(O.bearingInRadians),U=a.ar();U[0]=-E*C*p-T*l,U[1]=-T*C*p+E*l;const q=a.as(U);q<1e-9?a.at(U):a.au(U,U,1/q);const Z=a.ar();Z[0]=E*C*l-T*p,Z[1]=T*C*l+E*p;const re=a.as(Z);return re<1e-9?a.at(Z):a.au(Z,Z,1/re),{vecEast:Z,vecSouth:U}}function Io(O,l,p,C){let E;C?(E=[O,l,C(O,l),1],a.aw(E,E,p)):(E=[O,l,0,1],Zo(E,E,p));const T=E[3];return{point:new a.P(E[0]/T,E[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function rs(O,l){return .5+O/l*.5}function kr(O,l){return O.x>=-l[0]&&O.x<=l[0]&&O.y>=-l[1]&&O.y<=l[1]}function hn(O,l,p,C,E,T,U,q,Z,re,ue,Ce,ge){const Ue=p?O.textSizeData:O.iconSizeData,We=a.an(Ue,l.transform.zoom),Je=[256/l.width*2+1,256/l.height*2+1],He=p?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;He.clear();const tt=O.lineVertexArray,at=p?O.text.placedSymbolArray:O.icon.placedSymbolArray,yt=l.transform.width/l.transform.height;let lt=!1;for(let vt=0;vt<at.length;vt++){const bt=at.get(vt);if(bt.hidden||bt.writingMode===a.ao.vertical&&!lt){Rl(bt.numGlyphs,He);continue}lt=!1;const ct=new a.P(bt.anchorX,bt.anchorY),Ot={getElevation:ge,pitchedLabelPlaneMatrix:C,lineVertexArray:tt,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:ct,unwrappedTileID:Z,width:re,height:ue,translation:Ce},Qt=Vr(bt.anchorX,bt.anchorY,Ot);if(!kr(Qt.point,Je)){Rl(bt.numGlyphs,He);continue}const Kt=rs(l.transform.cameraToCenterDistance,Qt.signedDistanceFromCamera),jt=a.ap(Ue,We,bt),Wt=T?jt*l.transform.getPitchedTextCorrection(bt.anchorX,bt.anchorY,Z)/Kt:jt*Kt,kn=Ia({projectionContext:Ot,pitchedLabelPlaneMatrixInverse:E,symbol:bt,fontSize:Wt,flip:!1,keepUpright:U,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:He,aspectRatio:yt,rotateToLine:q});lt=kn.useVertical,(kn.notEnoughRoom||lt||kn.needsFlipping&&Ia({projectionContext:Ot,pitchedLabelPlaneMatrixInverse:E,symbol:bt,fontSize:Wt,flip:!0,keepUpright:U,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:He,aspectRatio:yt,rotateToLine:q}).notEnoughRoom)&&Rl(bt.numGlyphs,He)}p?O.text.dynamicLayoutVertexBuffer.updateData(He):O.icon.dynamicLayoutVertexBuffer.updateData(He)}function Li(O,l,p,C,E,T,U,q){const Z=T.glyphStartIndex+T.numGlyphs,re=T.lineStartIndex,ue=T.lineStartIndex+T.lineLength,Ce=l.getoffsetX(T.glyphStartIndex),ge=l.getoffsetX(Z-1),Ue=fa(O*Ce,p,C,E,T.segment,re,ue,q,U);if(!Ue)return null;const We=fa(O*ge,p,C,E,T.segment,re,ue,q,U);return We?q.projectionCache.anyProjectionOccluded?null:{first:Ue,last:We}:null}function ii(O,l,p,C){return O===a.ao.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*C?{useVertical:!0}:(O===a.ao.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function Ia(O){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:p,symbol:C,fontSize:E,flip:T,keepUpright:U,glyphOffsetArray:q,dynamicLayoutVertexArray:Z,aspectRatio:re,rotateToLine:ue}=O,Ce=E/24,ge=C.lineOffsetX*Ce,Ue=C.lineOffsetY*Ce;let We;if(C.numGlyphs>1){const Je=C.glyphStartIndex+C.numGlyphs,He=C.lineStartIndex,tt=C.lineStartIndex+C.lineLength,at=Li(Ce,q,ge,Ue,T,C,ue,l);if(!at)return{notEnoughRoom:!0};const yt=gl(at.first.point.x,at.first.point.y,l,p),lt=gl(at.last.point.x,at.last.point.y,l,p);if(U&&!T){const vt=ii(C.writingMode,yt,lt,re);if(vt)return vt}We=[at.first];for(let vt=C.glyphStartIndex+1;vt<Je-1;vt++){const bt=fa(Ce*q.getoffsetX(vt),ge,Ue,T,C.segment,He,tt,l,ue);if(!bt)return{notEnoughRoom:!0};We.push(bt)}We.push(at.last)}else{if(U&&!T){const He=Ei(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,tt=C.lineStartIndex+C.segment+1,at=new a.P(l.lineVertexArray.getx(tt),l.lineVertexArray.gety(tt)),yt=Ei(at.x,at.y,l),lt=yt.signedDistanceFromCamera>0?yt.point:tu(l.tileAnchorPoint,at,He,1,l),vt=gl(He.x,He.y,l,p),bt=gl(lt.x,lt.y,l,p),ct=ii(C.writingMode,vt,bt,re);if(ct)return ct}const Je=fa(Ce*q.getoffsetX(C.glyphStartIndex),ge,Ue,T,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,ue);if(!Je||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};We=[Je]}for(const Je of We)a.av(Z,Je.point,Je.angle);return{}}function tu(O,l,p,C,E){const T=O.add(O.sub(l)._unit()),U=Ei(T.x,T.y,E).point,q=p.sub(U);return p.add(q._mult(C/q.mag()))}function Xs(O,l,p){const C=l.projectionCache;if(C.projections[O])return C.projections[O];const E=new a.P(l.lineVertexArray.getx(O),l.lineVertexArray.gety(O)),T=Ei(E.x,E.y,l);if(T.signedDistanceFromCamera>0)return C.projections[O]=T.point,C.anyProjectionOccluded=C.anyProjectionOccluded||T.isOccluded,T.point;const U=O-p.direction;return tu(p.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(U),l.lineVertexArray.gety(U)),E,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function Ei(O,l,p){const C=O+p.translation[0],E=l+p.translation[1];let T;return p.pitchWithMap?(T=Io(C,E,p.pitchedLabelPlaneMatrix,p.getElevation),T.isOccluded=!1):(T=p.transform.projectTileCoordinates(C,E,p.unwrappedTileID,p.getElevation),T.point.x=(.5*T.point.x+.5)*p.width,T.point.y=(.5*-T.point.y+.5)*p.height),T}function gl(O,l,p,C){if(p.pitchWithMap){const E=[O,l,0,1];return a.aw(E,E,C),p.transform.projectTileCoordinates(E[0]/E[3],E[1]/E[3],p.unwrappedTileID,p.getElevation).point}return{x:O/p.width*2-1,y:1-l/p.height*2}}function Vr(O,l,p){return p.transform.projectTileCoordinates(O,l,p.unwrappedTileID,p.getElevation)}function ka(O,l,p){return O._unit()._perp()._mult(l*p)}function nu(O,l,p,C,E,T,U,q,Z){if(q.projectionCache.offsets[O])return q.projectionCache.offsets[O];const re=p.add(l);if(O+Z.direction<C||O+Z.direction>=E)return q.projectionCache.offsets[O]=re,re;const ue=Xs(O+Z.direction,q,Z),Ce=ka(ue.sub(p),U,Z.direction),ge=p.add(Ce),Ue=ue.add(Ce);return q.projectionCache.offsets[O]=a.ax(T,re,ge,Ue)||re,q.projectionCache.offsets[O]}function fa(O,l,p,C,E,T,U,q,Z){const re=C?O-l:O+l;let ue=re>0?1:-1,Ce=0;C&&(ue*=-1,Ce=Math.PI),ue<0&&(Ce+=Math.PI);let ge,Ue=ue>0?T+E:T+E+1;q.projectionCache.cachedAnchorPoint?ge=q.projectionCache.cachedAnchorPoint:(ge=Ei(q.tileAnchorPoint.x,q.tileAnchorPoint.y,q).point,q.projectionCache.cachedAnchorPoint=ge);let We,Je,He=ge,tt=ge,at=0,yt=0;const lt=Math.abs(re),vt=[];let bt;for(;at+yt<=lt;){if(Ue+=ue,Ue<T||Ue>=U)return null;at+=yt,tt=He,Je=We;const Qt={absOffsetX:lt,direction:ue,distanceFromAnchor:at,previousVertex:tt};if(He=Xs(Ue,q,Qt),p===0)vt.push(tt),bt=He.sub(tt);else{let Kt;const jt=He.sub(tt);Kt=jt.mag()===0?ka(Xs(Ue+ue,q,Qt).sub(He),p,ue):ka(jt,p,ue),Je||(Je=tt.add(Kt)),We=nu(Ue,Kt,He,T,U,Je,p,q,Qt),vt.push(Je),bt=We.sub(Je)}yt=bt.mag()}const ct=bt._mult((lt-at)/yt)._add(Je||tt),Ot=Ce+Math.atan2(He.y-tt.y,He.x-tt.x);return vt.push(ct),{point:ct,angle:Z?Ot:0,path:vt}}const Ho=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rl(O,l){for(let p=0;p<O;p++){const C=l.length;l.resize(C+4),l.float32.set(Ho,3*C)}}function Zo(O,l,p){const C=l[0],E=l[1];return O[0]=p[0]*C+p[4]*E+p[12],O[1]=p[1]*C+p[5]*E+p[13],O[3]=p[3]*C+p[7]*E+p[15],O}const Qi=100;class Dl{constructor(l,p=new Si(l.width+200,l.height+200,25),C=new Si(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Qi,this.screenBottomBoundary=l.height+Qi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,C,E,T,U,q,Z,re,ue,Ce,ge){const Ue=this.projectAndGetPerspectiveRatio(l.anchorPointX+Z[0],l.anchorPointY+Z[1],T,ue,ge),We=C*Ue.perspectiveRatio;let Je;if(U||q)Je=this._projectCollisionBox(l,We,E,T,U,q,Z,Ue,ue,Ce,ge);else{const bt=Ue.x+(Ce?Ce.x*We:0),ct=Ue.y+(Ce?Ce.y*We:0);Je={allPointsOccluded:!1,box:[bt+l.x1*We,ct+l.y1*We,bt+l.x2*We,ct+l.y2*We]}}const[He,tt,at,yt]=Je.box,lt=U?Je.allPointsOccluded:Ue.isOccluded;let vt=lt;return vt||(vt=Ue.perspectiveRatio<this.perspectiveRatioCutoff),vt||(vt=!this.isInsideGrid(He,tt,at,yt)),vt||p!=="always"&&this.grid.hitTest(He,tt,at,yt,p,re)?{box:[He,tt,at,yt],placeable:!1,offscreen:!1,occluded:lt}:{box:[He,tt,at,yt],placeable:!0,offscreen:this.isOffscreen(He,tt,at,yt),occluded:lt}}placeCollisionCircles(l,p,C,E,T,U,q,Z,re,ue,Ce,ge,Ue,We){const Je=[],He=new a.P(p.anchorX,p.anchorY),tt=this.getPerspectiveRatio(He.x,He.y,U,We),at=(re?T*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,U)/tt:T*tt)/a.aB,yt={getElevation:We,pitchedLabelPlaneMatrix:q,lineVertexArray:C,pitchWithMap:re,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:He,unwrappedTileID:U,width:this.transform.width,height:this.transform.height,translation:Ue},lt=Li(at,E,p.lineOffsetX*at,p.lineOffsetY*at,!1,p,!1,yt);let vt=!1,bt=!1,ct=!0;if(lt){const Ot=.5*Ce*tt+ge,Qt=new a.P(-100,-100),Kt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),jt=new ur,Wt=lt.first,kn=lt.last;let Tn=[];for(let Hi=Wt.path.length-1;Hi>=1;Hi--)Tn.push(Wt.path[Hi]);for(let Hi=1;Hi<kn.path.length;Hi++)Tn.push(kn.path[Hi]);const ln=2.5*Ot;if(re){const Hi=this.projectPathToScreenSpace(Tn,yt);Tn=Hi.some((Er=>Er.signedDistanceFromCamera<=0))?[]:Hi.map((Er=>Er.point))}let Xn=[];if(Tn.length>0){const Hi=Tn[0].clone(),Er=Tn[0].clone();for(let zo=1;zo<Tn.length;zo++)Hi.x=Math.min(Hi.x,Tn[zo].x),Hi.y=Math.min(Hi.y,Tn[zo].y),Er.x=Math.max(Er.x,Tn[zo].x),Er.y=Math.max(Er.y,Tn[zo].y);Xn=Hi.x>=Qt.x&&Er.x<=Kt.x&&Hi.y>=Qt.y&&Er.y<=Kt.y?[Tn]:Er.x<Qt.x||Hi.x>Kt.x||Er.y<Qt.y||Hi.y>Kt.y?[]:a.ay([Tn],Qt.x,Qt.y,Kt.x,Kt.y)}for(const Hi of Xn){jt.reset(Hi,.25*Ot);let Er=0;Er=jt.length<=.5*Ot?1:Math.ceil(jt.paddedLength/ln)+1;for(let zo=0;zo<Er;zo++){const Wo=zo/Math.max(Er-1,1),dr=jt.lerp(Wo),Jo=dr.x+Qi,Da=dr.y+Qi;Je.push(Jo,Da,Ot,0);const Is=Jo-Ot,Pa=Da-Ot,js=Jo+Ot,ia=Da+Ot;if(ct=ct&&this.isOffscreen(Is,Pa,js,ia),bt=bt||this.isInsideGrid(Is,Pa,js,ia),l!=="always"&&this.grid.hitTestCircle(Jo,Da,Ot,l,ue)&&(vt=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:vt}}}}return{circles:!Z&&vt||!bt||tt<this.perspectiveRatioCutoff?[]:Je,offscreen:ct,collisionDetected:vt}}projectPathToScreenSpace(l,p){const C=(function(E,T){const U=a.L();return a.aq(U,T.pitchedLabelPlaneMatrix),E.map((q=>{const Z=Io(q.x,q.y,U,T.getElevation),re=T.transform.projectTileCoordinates(Z.point.x,Z.point.y,T.unwrappedTileID,T.getElevation);return re.point.x=(.5*re.point.x+.5)*T.width,re.point.y=(.5*-re.point.y+.5)*T.height,re}))})(l,p);return(function(E){let T=0,U=0,q=0,Z=0;for(let re=0;re<E.length;re++)E[re].isOccluded?(q=re+1,Z=0):(Z++,Z>U&&(U=Z,T=q));return E.slice(T,T+U)})(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],C=new a.a2;for(const Ce of l){const ge=new a.P(Ce.x+Qi,Ce.y+Qi);C.extend(ge),p.push(ge)}const{minX:E,minY:T,maxX:U,maxY:q}=C,Z=this.grid.query(E,T,U,q).concat(this.ignoredGrid.query(E,T,U,q)),re={},ue={};for(const Ce of Z){const ge=Ce.key;if(re[ge.bucketInstanceId]===void 0&&(re[ge.bucketInstanceId]={}),re[ge.bucketInstanceId][ge.featureIndex])continue;const Ue=[new a.P(Ce.x1,Ce.y1),new a.P(Ce.x2,Ce.y1),new a.P(Ce.x2,Ce.y2),new a.P(Ce.x1,Ce.y2)];a.az(p,Ue)&&(re[ge.bucketInstanceId][ge.featureIndex]=!0,ue[ge.bucketInstanceId]===void 0&&(ue[ge.bucketInstanceId]=[]),ue[ge.bucketInstanceId].push(ge.featureIndex))}return ue}insertCollisionBox(l,p,C,E,T,U){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:T,collisionGroupID:U,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,C,E,T,U){const q=C?this.ignoredGrid:this.grid,Z={bucketInstanceId:E,featureIndex:T,collisionGroupID:U,overlapMode:p};for(let re=0;re<l.length;re+=4)q.insertCircle(Z,l[re],l[re+1],l[re+2])}projectAndGetPerspectiveRatio(l,p,C,E,T){if(T){let U;E?(U=[l,p,E(l,p),1],a.aw(U,U,T)):(U=[l,p,0,1],Zo(U,U,T));const q=U[3];return{x:(U[0]/q+1)/2*this.transform.width+Qi,y:(-U[1]/q+1)/2*this.transform.height+Qi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/q*.5,isOccluded:!1,signedDistanceFromCamera:q}}{const U=this.transform.projectTileCoordinates(l,p,C,E);return{x:(U.point.x+1)/2*this.transform.width+Qi,y:(1-U.point.y)/2*this.transform.height+Qi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5,isOccluded:U.isOccluded,signedDistanceFromCamera:U.signedDistanceFromCamera}}}getPerspectiveRatio(l,p,C,E){const T=this.transform.projectTileCoordinates(l,p,C,E);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(l,p,C,E){return C<Qi||l>=this.screenRightBoundary||E<Qi||p>this.screenBottomBoundary}isInsideGrid(l,p,C,E){return C>=0&&l<this.gridRightBoundary&&E>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=a.ai([]);return a.M(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,C,E,T,U,q,Z,re,ue,Ce){let ge=1,Ue=0,We=0,Je=1;const He=l.anchorPointX+q[0],tt=l.anchorPointY+q[1];if(U&&!T){const Tn=this.projectAndGetPerspectiveRatio(He+1,tt,E,re,Ce),ln=Tn.x-Z.x,Xn=Math.atan((Tn.y-Z.y)/ln)+(ln<0?Math.PI:0),Hi=Math.sin(Xn),Er=Math.cos(Xn);ge=Er,Ue=Hi,We=-Hi,Je=Er}else if(!U&&T){const Tn=Ti(this.transform);ge=Tn.vecEast[0],Ue=Tn.vecEast[1],We=Tn.vecSouth[0],Je=Tn.vecSouth[1]}let at=Z.x,yt=Z.y,lt=p;T&&(at=He,yt=tt,lt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),lt*=this.transform.getPitchedTextCorrection(He,tt,E),ue||(lt*=a.ae(.5+Z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ue&&(at+=ge*ue.x*lt+We*ue.y*lt,yt+=Ue*ue.x*lt+Je*ue.y*lt);const vt=l.x1*lt,bt=l.x2*lt,ct=(vt+bt)/2,Ot=l.y1*lt,Qt=l.y2*lt,Kt=(Ot+Qt)/2,jt=[{offsetX:vt,offsetY:Ot},{offsetX:ct,offsetY:Ot},{offsetX:bt,offsetY:Ot},{offsetX:bt,offsetY:Kt},{offsetX:bt,offsetY:Qt},{offsetX:ct,offsetY:Qt},{offsetX:vt,offsetY:Qt},{offsetX:vt,offsetY:Kt}];let Wt=[];for(const{offsetX:Tn,offsetY:ln}of jt)Wt.push(new a.P(at+ge*Tn+We*ln,yt+Ue*Tn+Je*ln));let kn=!1;if(T){const Tn=Wt.map((ln=>this.projectAndGetPerspectiveRatio(ln.x,ln.y,E,re,Ce)));kn=Tn.some((ln=>!ln.isOccluded)),Wt=Tn.map((ln=>new a.P(ln.x,ln.y)))}else kn=!0;return{box:a.aA(Wt),allPointsOccluded:!kn}}}class os{constructor(l,p,C,E){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):E&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Pl{constructor(l,p,C,E,T){this.text=new os(l?l.text:null,p,C,T),this.icon=new os(l?l.icon:null,p,E,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class iu{constructor(l,p,C){this.text=l,this.icon=p,this.skipFade=C}}class Ou{constructor(l,p,C,E,T){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=E,this.tileID=T}}class Jc{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[l]}}function nc(O,l,p,C,E){const{horizontalAlign:T,verticalAlign:U}=a.aH(O);return new a.P(-(T-.5)*l+C[0]*E,-(U-.5)*p+C[1]*E)}class yl{constructor(l,p,C,E,T){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new Dl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Jc(E),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(C,E)=>p.getElevation(l,C,E):null}getBucketParts(l,p,C,E){const T=C.getBucket(p),U=C.latestFeatureIndex;if(!T||!U||p.id!==T.layerIds[0])return;const q=C.collisionBoxArray,Z=T.layers[0].layout,re=T.layers[0].paint,ue=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Ce=C.tileSize/a.$,ge=C.tileID.toUnwrapped(),Ue=Z.get("text-rotation-alignment")==="map",We=a.aC(C,1,this.transform.zoom),Je=a.aD(this.collisionIndex.transform,C,re.get("text-translate"),re.get("text-translate-anchor")),He=a.aD(this.collisionIndex.transform,C,re.get("icon-translate"),re.get("icon-translate-anchor")),tt=er(Ue,this.transform,We);this.retainedQueryData[T.bucketInstanceId]=new Ou(T.bucketInstanceId,U,T.sourceLayerIndex,T.index,C.tileID);const at={bucket:T,layout:Z,translationText:Je,translationIcon:He,unwrappedTileID:ge,pitchedLabelPlaneMatrix:tt,scale:ue,textPixelRatio:Ce,holdingForFade:C.holdingForSymbolFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:a.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(E)for(const yt of T.sortKeyRanges){const{sortKey:lt,symbolInstanceStart:vt,symbolInstanceEnd:bt}=yt;l.push({sortKey:lt,symbolInstanceStart:vt,symbolInstanceEnd:bt,parameters:at})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:at})}attemptAnchorPlacement(l,p,C,E,T,U,q,Z,re,ue,Ce,ge,Ue,We,Je,He,tt,at,yt,lt){const vt=a.aE[l.textAnchor],bt=[l.textOffset0,l.textOffset1],ct=nc(vt,C,E,bt,T),Ot=this.collisionIndex.placeCollisionBox(p,ge,Z,re,ue,q,U,He,Ce.predicate,yt,ct,lt);if((!at||this.collisionIndex.placeCollisionBox(at,ge,Z,re,ue,q,U,tt,Ce.predicate,yt,ct,lt).placeable)&&Ot.placeable){let Qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(Qt=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),Ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ue.crossTileID]={textOffset:bt,width:C,height:E,anchor:vt,textBoxScale:T,prevAnchor:Qt},this.markUsedJustification(We,vt,Ue,Je),We.allowVerticalPlacement&&(this.markUsedOrientation(We,Je,Ue),this.placedOrientations[Ue.crossTileID]=Je),{shift:ct,placedGlyphBoxes:Ot}}}placeLayerBucketPart(l,p,C){const{bucket:E,layout:T,translationText:U,translationIcon:q,unwrappedTileID:Z,pitchedLabelPlaneMatrix:re,textPixelRatio:ue,holdingForFade:Ce,collisionBoxArray:ge,partiallyEvaluatedTextSize:Ue,collisionGroup:We}=l.parameters,Je=T.get("text-optional"),He=T.get("icon-optional"),tt=a.aF(T,"text-overlap","text-allow-overlap"),at=tt==="always",yt=a.aF(T,"icon-overlap","icon-allow-overlap"),lt=yt==="always",vt=T.get("text-rotation-alignment")==="map",bt=T.get("text-pitch-alignment")==="map",ct=T.get("icon-text-fit")!=="none",Ot=T.get("symbol-z-order")==="viewport-y",Qt=at&&(lt||!E.hasIconData()||He),Kt=lt&&(at||!E.hasTextData()||Je);!E.collisionArrays&&ge&&E.deserializeCollisionBoxes(ge);const jt=this.retainedQueryData[E.bucketInstanceId].tileID,Wt=this._getTerrainElevationFunc(jt),kn=this.transform.getFastPathSimpleProjectionMatrix(jt),Tn=(ln,Xn,Hi)=>{var Er,zo;if(p[ln.crossTileID])return;if(Ce)return void(this.placements[ln.crossTileID]=new iu(!1,!1,!1));let Wo=!1,dr=!1,Jo=!0,Da=null,Is={box:null,placeable:!1,offscreen:null,occluded:!1},Pa={placeable:!1},js=null,ia=null,ga=null,DA=0,ra=0,cl=0;Xn.textFeatureIndex?DA=Xn.textFeatureIndex:ln.useRuntimeCollisionCircles&&(DA=ln.featureIndex),Xn.verticalTextFeatureIndex&&(ra=Xn.verticalTextFeatureIndex);const dh=Xn.textBox;if(dh){const Ml=ys=>{let oa=a.ao.horizontal;if(E.allowVerticalPlacement&&!ys&&this.prevPlacement){const Lu=this.prevPlacement.placedOrientations[ln.crossTileID];Lu&&(this.placedOrientations[ln.crossTileID]=Lu,oa=Lu,this.markUsedOrientation(E,oa,ln))}return oa},Al=(ys,oa)=>{if(E.allowVerticalPlacement&&ln.numVerticalGlyphVertices>0&&Xn.verticalTextBox){for(const Lu of E.writingModes)if(Lu===a.ao.vertical?(Is=oa(),Pa=Is):Is=ys(),Is&&Is.placeable)break}else Is=ys()},Pc=ln.textAnchorOffsetStartIndex,sd=ln.textAnchorOffsetEndIndex;if(sd===Pc){const ys=(oa,Lu)=>{const Ns=this.collisionIndex.placeCollisionBox(oa,tt,ue,jt,Z,bt,vt,U,We.predicate,Wt,void 0,kn);return Ns&&Ns.placeable&&(this.markUsedOrientation(E,Lu,ln),this.placedOrientations[ln.crossTileID]=Lu),Ns};Al((()=>ys(dh,a.ao.horizontal)),(()=>{const oa=Xn.verticalTextBox;return E.allowVerticalPlacement&&ln.numVerticalGlyphVertices>0&&oa?ys(oa,a.ao.vertical):{box:null,offscreen:null}})),Ml(Is&&Is.placeable)}else{let ys=a.aE[(zo=(Er=this.prevPlacement)===null||Er===void 0?void 0:Er.variableOffsets[ln.crossTileID])===null||zo===void 0?void 0:zo.anchor];const oa=(Ns,Uc,Ku)=>{const vu=Ns.x2-Ns.x1,Lc=Ns.y2-Ns.y1,Rp=ln.textBoxScale,fh=ct&&yt==="never"?Uc:null;let ph=null,lA=tt==="never"?1:2,Nf="never";ys&&lA++;for(let Gf=0;Gf<lA;Gf++){for(let mh=Pc;mh<sd;mh++){const Zm=E.textAnchorOffsets.get(mh);if(ys&&Zm.textAnchor!==ys)continue;const uA=this.attemptAnchorPlacement(Zm,Ns,vu,Lc,Rp,vt,bt,ue,jt,Z,We,Nf,ln,E,Ku,U,q,fh,Wt);if(uA&&(ph=uA.placedGlyphBoxes,ph&&ph.placeable))return Wo=!0,Da=uA.shift,ph}ys?ys=null:Nf=tt}return C&&!ph&&(ph={box:this.collisionIndex.placeCollisionBox(dh,"always",ue,jt,Z,bt,vt,U,We.predicate,Wt,void 0,kn).box,offscreen:!1,placeable:!1,occluded:!1}),ph};Al((()=>oa(dh,Xn.iconBox,a.ao.horizontal)),(()=>{const Ns=Xn.verticalTextBox;return E.allowVerticalPlacement&&(!Is||!Is.placeable)&&ln.numVerticalGlyphVertices>0&&Ns?oa(Ns,Xn.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Is&&(Wo=Is.placeable,Jo=Is.offscreen);const Lu=Ml(Is&&Is.placeable);if(!Wo&&this.prevPlacement){const Ns=this.prevPlacement.variableOffsets[ln.crossTileID];Ns&&(this.variableOffsets[ln.crossTileID]=Ns,this.markUsedJustification(E,Ns.anchor,ln,Lu))}}}if(js=Is,Wo=js&&js.placeable,Jo=js&&js.offscreen,ln.useRuntimeCollisionCircles&&ln.centerJustifiedTextSymbolIndex>=0){const Ml=E.text.placedSymbolArray.get(ln.centerJustifiedTextSymbolIndex),Al=a.ap(E.textSizeData,Ue,Ml),Pc=T.get("text-padding");ia=this.collisionIndex.placeCollisionCircles(tt,Ml,E.lineVertexArray,E.glyphOffsetArray,Al,Z,re,C,bt,We.predicate,ln.collisionCircleDiameter,Pc,U,Wt),ia.circles.length&&ia.collisionDetected&&!C&&a.w("Collisions detected, but collision boxes are not shown"),Wo=at||ia.circles.length>0&&!ia.collisionDetected,Jo=Jo&&ia.offscreen}if(Xn.iconFeatureIndex&&(cl=Xn.iconFeatureIndex),Xn.iconBox){const Ml=Al=>this.collisionIndex.placeCollisionBox(Al,yt,ue,jt,Z,bt,vt,q,We.predicate,Wt,ct&&Da?Da:void 0,kn);Pa&&Pa.placeable&&Xn.verticalIconBox?(ga=Ml(Xn.verticalIconBox),dr=ga.placeable):(ga=Ml(Xn.iconBox),dr=ga.placeable),Jo=Jo&&ga.offscreen}const rd=Je||ln.numHorizontalGlyphVertices===0&&ln.numVerticalGlyphVertices===0,od=He||ln.numIconVertices===0;rd||od?od?rd||(dr=dr&&Wo):Wo=dr&&Wo:dr=Wo=dr&&Wo;const yu=dr&&ga.placeable;if(Wo&&js.placeable&&this.collisionIndex.insertCollisionBox(js.box,tt,T.get("text-ignore-placement"),E.bucketInstanceId,Pa&&Pa.placeable&&ra?ra:DA,We.ID),yu&&this.collisionIndex.insertCollisionBox(ga.box,yt,T.get("icon-ignore-placement"),E.bucketInstanceId,cl,We.ID),ia&&Wo&&this.collisionIndex.insertCollisionCircles(ia.circles,tt,T.get("text-ignore-placement"),E.bucketInstanceId,DA,We.ID),C&&this.storeCollisionData(E.bucketInstanceId,Hi,Xn,js,ga,ia),ln.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(E.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ln.crossTileID]=new iu((Wo||Qt)&&!js?.occluded,(dr||Kt)&&!ga?.occluded,Jo||E.justReloaded),p[ln.crossTileID]=!0};if(Ot){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ln=E.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Xn=ln.length-1;Xn>=0;--Xn){const Hi=ln[Xn];Tn(E.symbolInstances.get(Hi),E.collisionArrays[Hi],Hi)}}else for(let ln=l.symbolInstanceStart;ln<l.symbolInstanceEnd;ln++)Tn(E.symbolInstances.get(ln),E.collisionArrays[ln],ln);E.justReloaded=!1}storeCollisionData(l,p,C,E,T,U){if(C.textBox||C.iconBox){let q,Z;this.collisionBoxArrays.has(l)?q=this.collisionBoxArrays.get(l):(q=new Map,this.collisionBoxArrays.set(l,q)),q.has(p)?Z=q.get(p):(Z={text:null,icon:null},q.set(p,Z)),C.textBox&&(Z.text=E.box),C.iconBox&&(Z.icon=T.box)}if(U){let q=this.collisionCircleArrays[l];q===void 0&&(q=this.collisionCircleArrays[l]=[]);for(let Z=0;Z<U.circles.length;Z+=4)q.push(U.circles[Z+0]-Qi),q.push(U.circles[Z+1]-Qi),q.push(U.circles[Z+2]),q.push(U.collisionDetected?1:0)}}markUsedJustification(l,p,C,E){let T;T=E===a.ao.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[a.aG(p)];const U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const q of U)q>=0&&(l.text.placedSymbolArray.get(q).crossTileID=T>=0&&q!==T?0:C.crossTileID)}markUsedOrientation(l,p,C){const E=p===a.ao.horizontal||p===a.ao.horizontalOnly?p:0,T=p===a.ao.vertical?p:0,U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const q of U)l.text.placedSymbolArray.get(q).placedOrientation=E;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const E=p?p.symbolFadeChange(l):1,T=p?p.opacities:{},U=p?p.variableOffsets:{},q=p?p.placedOrientations:{};for(const Z in this.placements){const re=this.placements[Z],ue=T[Z];ue?(this.opacities[Z]=new Pl(ue,E,re.text,re.icon),C=C||re.text!==ue.text.placed||re.icon!==ue.icon.placed):(this.opacities[Z]=new Pl(null,E,re.text,re.icon,re.skipFade),C=C||re.text||re.icon)}for(const Z in T){const re=T[Z];if(!this.opacities[Z]){const ue=new Pl(re,E,!1,!1);ue.isHidden()||(this.opacities[Z]=ue,C=C||re.text.placed||re.icon.placed)}}for(const Z in U)this.variableOffsets[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.variableOffsets[Z]=U[Z]);for(const Z in q)this.placedOrientations[Z]||!this.opacities[Z]||this.opacities[Z].isHidden()||(this.placedOrientations[Z]=q[Z]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const C={};for(const E of p){const T=E.getBucket(l);T&&E.latestFeatureIndex&&l.id===T.layerIds[0]&&this.updateBucketOpacities(T,E.tileID,C,E.collisionBoxArray)}}updateBucketOpacities(l,p,C,E){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const T=l.layers[0],U=T.layout,q=new Pl(null,0,!1,!1,!0),Z=U.get("text-allow-overlap"),re=U.get("icon-allow-overlap"),ue=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ce=U.get("text-rotation-alignment")==="map",ge=U.get("text-pitch-alignment")==="map",Ue=U.get("icon-text-fit")!=="none",We=new Pl(null,0,Z&&(re||!l.hasIconData()||U.get("icon-optional")),re&&(Z||!l.hasTextData()||U.get("text-optional")),!0);!l.collisionArrays&&E&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(E);const Je=(tt,at,yt)=>{for(let lt=0;lt<at/4;lt++)tt.opacityVertexArray.emplaceBack(yt);tt.hasVisibleVertices=tt.hasVisibleVertices||yt!==rl},He=this.collisionBoxArrays.get(l.bucketInstanceId);for(let tt=0;tt<l.symbolInstances.length;tt++){const at=l.symbolInstances.get(tt),{numHorizontalGlyphVertices:yt,numVerticalGlyphVertices:lt,crossTileID:vt}=at;let bt=this.opacities[vt];C[vt]?bt=q:bt||(bt=We,this.opacities[vt]=bt),C[vt]=!0;const ct=at.numIconVertices>0,Ot=this.placedOrientations[at.crossTileID],Qt=Ot===a.ao.vertical,Kt=Ot===a.ao.horizontal||Ot===a.ao.horizontalOnly;if(yt>0||lt>0){const Wt=oc(bt.text);Je(l.text,yt,Qt?rl:Wt),Je(l.text,lt,Kt?rl:Wt);const kn=bt.text.isHidden();[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach((Xn=>{Xn>=0&&(l.text.placedSymbolArray.get(Xn).hidden=kn||Qt?1:0)})),at.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(at.verticalPlacedTextSymbolIndex).hidden=kn||Kt?1:0);const Tn=this.variableOffsets[at.crossTileID];Tn&&this.markUsedJustification(l,Tn.anchor,at,Ot);const ln=this.placedOrientations[at.crossTileID];ln&&(this.markUsedJustification(l,"left",at,ln),this.markUsedOrientation(l,ln,at))}if(ct){const Wt=oc(bt.icon),kn=!(Ue&&at.verticalPlacedIconSymbolIndex&&Qt);at.placedIconSymbolIndex>=0&&(Je(l.icon,at.numIconVertices,kn?Wt:rl),l.icon.placedSymbolArray.get(at.placedIconSymbolIndex).hidden=bt.icon.isHidden()),at.verticalPlacedIconSymbolIndex>=0&&(Je(l.icon,at.numVerticalIconVertices,kn?rl:Wt),l.icon.placedSymbolArray.get(at.verticalPlacedIconSymbolIndex).hidden=bt.icon.isHidden())}const jt=He&&He.has(tt)?He.get(tt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Wt=l.collisionArrays[tt];if(Wt){let kn=new a.P(0,0);if(Wt.textBox||Wt.verticalTextBox){let Tn=!0;if(ue){const ln=this.variableOffsets[vt];ln?(kn=nc(ln.anchor,ln.width,ln.height,ln.textOffset,ln.textBoxScale),Ce&&kn._rotate(ge?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Tn=!1}if(Wt.textBox||Wt.verticalTextBox){let ln;Wt.textBox&&(ln=Qt),Wt.verticalTextBox&&(ln=Kt),ko(l.textCollisionBox.collisionVertexArray,bt.text.placed,!Tn||ln,jt.text,kn.x,kn.y)}}if(Wt.iconBox||Wt.verticalIconBox){const Tn=!!(!Kt&&Wt.verticalIconBox);let ln;Wt.iconBox&&(ln=Tn),Wt.verticalIconBox&&(ln=!Tn),ko(l.iconCollisionBox.collisionVertexArray,bt.icon.placed,ln,jt.icon,Ue?kn.x:0,Ue?kn.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function ko(O,l,p,C,E,T){C&&C.length!==0||(C=[0,0,0,0]);const U=C[0]-Qi,q=C[1]-Qi,Z=C[2]-Qi,re=C[3]-Qi;O.emplaceBack(l?1:0,p?1:0,E||0,T||0,U,q),O.emplaceBack(l?1:0,p?1:0,E||0,T||0,Z,q),O.emplaceBack(l?1:0,p?1:0,E||0,T||0,Z,re),O.emplaceBack(l?1:0,p?1:0,E||0,T||0,U,re)}const ic=Math.pow(2,25),ru=Math.pow(2,24),Oc=Math.pow(2,17),rc=Math.pow(2,16),Bc=Math.pow(2,9),Dh=Math.pow(2,8),pa=Math.pow(2,1);function oc(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const l=O.placed?1:0,p=Math.floor(127*O.opacity);return p*ic+l*ru+p*Oc+l*rc+p*Bc+l*Dh+p*pa+l}const rl=0;class eA{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,C,E,T){const U=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(U,E,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,U.sort(((q,Z)=>q.sortKey-Z.sortKey)));this._currentPartIndex<U.length;)if(p.placeLayerBucketPart(U[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,T())return!0;return!1}}class ou{constructor(l,p,C,E,T,U,q,Z){this.placement=new yl(l,p,U,q,Z),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(l,p,C){const E=B(),T=()=>!this._forceFullPlacement&&B()-E>2;for(;this._currentPlacementIndex>=0;){const U=p[l[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=q)&&(!U.maxzoom||U.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new eA(U)),this._inProgressLayer.continuePlacement(C[U.source],this.placement,this._showCollisionBoxes,U,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Na=512/a.$/2;class Ms{constructor(l,p,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const E=new Map;for(let T=0;T<p.length;T++){const U=p.get(T),q=U.key,Z=E.get(q);Z?Z.push(U):E.set(q,[U])}for(const[T,U]of E){const q={positions:U.map((Z=>({x:Math.floor(Z.anchorX*Na),y:Math.floor(Z.anchorY*Na)}))),crossTileIDs:U.map((Z=>Z.crossTileID))};if(q.positions.length>128){const Z=new a.aI(q.positions.length,16,Uint16Array);for(const{x:re,y:ue}of q.positions)Z.add(re,ue);Z.finish(),delete q.positions,q.index=Z}this._symbolsByKey[T]=q}}getScaledCoordinates(l,p){const{x:C,y:E,z:T}=this.tileID.canonical,{x:U,y:q,z:Z}=p.canonical,re=Na/Math.pow(2,Z-T),ue=(q*a.$+l.anchorY)*re,Ce=E*a.$*Na;return{x:Math.floor((U*a.$+l.anchorX)*re-C*a.$*Na),y:Math.floor(ue-Ce)}}findMatches(l,p,C){const E=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let T=0;T<l.length;T++){const U=l.get(T);if(U.crossTileID)continue;const q=this._symbolsByKey[U.key];if(!q)continue;const Z=this.getScaledCoordinates(U,p);if(q.index){const re=q.index.range(Z.x-E,Z.y-E,Z.x+E,Z.y+E).sort();for(const ue of re){const Ce=q.crossTileIDs[ue];if(!C[Ce]){C[Ce]=!0,U.crossTileID=Ce;break}}}else if(q.positions)for(let re=0;re<q.positions.length;re++){const ue=q.positions[re],Ce=q.crossTileIDs[re];if(Math.abs(ue.x-Z.x)<=E&&Math.abs(ue.y-Z.y)<=E&&!C[Ce]){C[Ce]=!0,U.crossTileID=Ce;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class To{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class su{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const C in this.indexes){const E=this.indexes[C],T={};for(const U in E){const q=E[U];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+p),T[q.tileID.key]=q}this.indexes[C]=T}this.lng=l}addBucket(l,p,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let T=0;T<p.symbolInstances.length;T++)p.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const E=this.usedCrossTileIDs[l.overscaledZ];for(const T in this.indexes){const U=this.indexes[T];if(Number(T)>l.overscaledZ)for(const q in U){const Z=U[q];Z.tileID.isChildOf(l)&&Z.findMatches(p.symbolInstances,l,E)}else{const q=U[l.scaledTo(Number(T)).key];q&&q.findMatches(p.symbolInstances,l,E)}}for(let T=0;T<p.symbolInstances.length;T++){const U=p.symbolInstances.get(T);U.crossTileID||(U.crossTileID=C.generate(),E[U.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ms(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const C of p.getCrossTileIDsLists())for(const E of C)delete this.usedCrossTileIDs[l][E]}removeStaleBuckets(l){let p=!1;for(const C in this.indexes){const E=this.indexes[C];for(const T in E)l[E[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,E[T]),delete E[T],p=!0)}return p}}class au{constructor(){this.layerIndexes={},this.crossTileIDs=new To,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,C){let E=this.layerIndexes[l.id];E===void 0&&(E=this.layerIndexes[l.id]=new su);let T=!1;const U={};E.handleWrapJump(C);for(const q of p){const Z=q.getBucket(l);Z&&l.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(q.tileID,Z,this.crossTileIDs)&&(T=!0),U[Z.bucketInstanceId]=!0)}return E.removeStaleBuckets(U)&&(T=!0),T}pruneUnusedLayers(l){const p={};l.forEach((C=>{p[C]=!0}));for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var Ls="void main() {fragColor=vec4(1.0);}";const Ga={prelude:tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:tr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:tr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:tr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tr(Ls,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:tr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:tr(Ls,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:tr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:tr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:tr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:tr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:tr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:tr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:tr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:tr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function tr(O,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),E=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=T?T.concat(E):E,q={};return{fragmentSource:O=O.replace(p,((Z,re,ue,Ce,ge)=>(q[ge]=!0,re==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
in ${ue} ${Ce} ${ge};
#else
uniform ${ue} ${Ce} u_${ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ge}
    ${ue} ${Ce} ${ge} = u_${ge};
#endif
`))),vertexSource:l=l.replace(p,((Z,re,ue,Ce,ge)=>{const Ue=Ce==="float"?"vec2":"vec4",We=ge.match(/color/)?"color":Ue;return q[ge]?re==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
in ${ue} ${Ue} a_${ge};
out ${ue} ${Ce} ${ge};
#else
uniform ${ue} ${Ce} u_${ge};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = a_${ge};
#else
    ${ue} ${Ce} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = unpack_mix_${We}(a_${ge}, u_${ge}_t);
#else
    ${ue} ${Ce} ${ge} = u_${ge};
#endif
`:re==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
in ${ue} ${Ue} a_${ge};
#else
uniform ${ue} ${Ce} u_${ge};
#endif
`:We==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ue} ${Ce} ${ge} = a_${ge};
#else
    ${ue} ${Ce} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ue} ${Ce} ${ge} = unpack_mix_${We}(a_${ge}, u_${ge}_t);
#else
    ${ue} ${Ce} ${ge} = u_${ge};
#endif
`})),staticAttributes:C,staticUniforms:U}}class ol{constructor(l,p,C){this.vertexBuffer=l,this.indexBuffer=p,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Gi=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Wa="#define PROJECTION_MERCATOR",Xo="mercator";class lu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Xo}get shaderDefine(){return Wa}get shaderPreludeCode(){return Ga.projectionMercator}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,p,C,E,T){if(this._cachedMesh)return this._cachedMesh;const U=new a.aL;U.emplaceBack(0,0),U.emplaceBack(a.$,0),U.emplaceBack(0,a.$),U.emplaceBack(a.$,a.$);const q=l.createVertexBuffer(U,Gi.members),Z=a.aM.simpleSegment(0,0,4,2),re=new a.aN;re.emplaceBack(1,0,2),re.emplaceBack(1,2,3);const ue=l.createIndexBuffer(re);return this._cachedMesh=new ol(q,ue,Z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class Ko{constructor(l=0,p=0,C=0,E=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=C,this.right=E}interpolate(l,p,C){return p.top!=null&&l.top!=null&&(this.top=a.C.number(l.top,p.top,C)),p.bottom!=null&&l.bottom!=null&&(this.bottom=a.C.number(l.bottom,p.bottom,C)),p.left!=null&&l.left!=null&&(this.left=a.C.number(l.left,p.left,C)),p.right!=null&&l.right!=null&&(this.right=a.C.number(l.right,p.right,C)),this}getCenter(l,p){const C=a.ae((this.left+l-this.right)/2,0,l),E=a.ae((this.top+p-this.bottom)/2,0,p);return new a.P(C,E)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function so(O,l){if(!O.renderWorldCopies||O.lngRange)return;const p=l.lng-O.center.lng;l.lng+=p>180?-360:p<-180?360:0}function ws(O){return Math.max(0,Math.floor(O))}class Mo{constructor(l,p){var C;this._callbacks=l,this._tileSize=512,this._renderWorldCopies=p?.renderWorldCopies===void 0||!!p?.renderWorldCopies,this._minZoom=p?.minZoom||0,this._maxZoom=p?.maxZoom||22,this._minPitch=p?.minPitch==null?0:p?.minPitch,this._maxPitch=p?.maxPitch==null?60:p?.maxPitch,this._constrain=(C=p?.constrain)!==null&&C!==void 0?C:this._callbacks.constrain,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ws(this._zoom),this._scale=a.ah(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ko,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,p,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=ws(this._zoom),this._scale=a.ah(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Ko(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,p&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get constrain(){return this._constrain}setConstrain(l){l||(l=this._callbacks.constrain),this._constrain=l,this.constrainInternal(),this._calcMatrices()}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const p=a.aO(l,-180,180)*Math.PI/180;var C,E,T,U,q,Z,re,ue,Ce;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=h(),C=this._rotationMatrix,T=-this._bearingInRadians,U=(E=this._rotationMatrix)[0],q=E[1],Z=E[2],re=E[3],ue=Math.sin(T),Ce=Math.cos(T),C[0]=U*Ce+Z*ue,C[1]=q*Ce+re*ue,C[2]=U*-ue+Z*Ce,C[3]=q*-ue+re*Ce)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const p=a.ae(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const p=l/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(l){l=a.ae(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ag(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const p=this.constrain(this._center,l).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.ah(p),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,p){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,C){this._unmodified=!1,this._edgeInsets.interpolate(l,p,C),this.constrainInternal(),this._calcMatrices()}resize(l,p,C=!0){this._width=l,this._height=p,C&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new St([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.af,a.af])}getCameraQueryGeometry(l,p){if(p.length===1)return[p[0],l];{const{minX:C,minY:E,maxX:T,maxY:U}=a.a2.fromPoints(p).extend(l);return[new a.P(C,E),new a.P(T,E),new a.P(T,U),new a.P(C,U),new a.P(C,E)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:C}=this.constrain(this.center,this.zoom);this.setCenter(p),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.ai(new Float64Array(16));a.N(l,l,[this._width/2,-this._height/2,1]),a.M(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.ai(new Float64Array(16)),a.N(l,l,[1,-1,1]),a.M(l,l,[-1,-1,0]),a.N(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,p,C,E){const T=C!==void 0?C:this.bearing,U=E=E!==void 0?E:this.pitch,q=a.a1.fromLngLat(l,p),Z=-Math.cos(a.ag(U)),re=Math.sin(a.ag(U)),ue=re*Math.sin(a.ag(T)),Ce=-re*Math.cos(a.ag(T));let ge=this.elevation;const Ue=p-ge;let We;Z*Ue>=0||Math.abs(Z)<.1?(We=1e4,ge=p+We*Z):We=-Ue/Z;let Je,He,tt=a.aQ(1,q.y),at=0;do{if(at+=1,at>10)break;He=We/tt,Je=new a.a1(q.x+ue*He,q.y+Ce*He),tt=1/Je.meterInMercatorCoordinateUnits()}while(Math.abs(We-He*tt)>1e-12);return{center:Je.toLngLat(),elevation:ge,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/He/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const p=a.aj(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/p,E=a.a1.fromLngLat(this.center,this.elevation),T=Bt(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const U=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),a.aQ(T.z,E.y),this.bearing,this.pitch);this._elevation=U.elevation,this._center=U.center,this.setZoom(U.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return Bt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const p=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/p,l.canonical.y/p,1/p/a.$,1/p/a.$]}}class _o{constructor(l,p){this.min=l,this.max=p,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],C=a.aT(this.min),E=a.aT(this.max);for(let T=0;T<p.length;T++)C[T]=p[T]?this.min[T]:this.center[T],E[T]=p[T]?this.center[T]:this.max[T];return E[2]=this.max[2],new _o(C,E)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let p=!0;for(let C=0;C<l.planes.length;C++){const E=this.intersectsPlane(l.planes[C]);if(E===0)return 0;E===1&&(p=!1)}return p?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let p=l[3],C=l[3];for(let E=0;E<3;E++)l[E]>0?(p+=l[E]*this.min[E],C+=l[E]*this.max[E]):(C+=l[E]*this.min[E],p+=l[E]*this.max[E]);return p>=0?2:C<0?0:1}}class uu{distanceToTile2d(l,p,C,E){const T=E.distanceX([l,p]),U=E.distanceY([l,p]);return Math.hypot(T,U)}getWrap(l,p,C){return C}getTileBoundingVolume(l,p,C,E){var T,U;let q=0,Z=0;if(E?.terrain){const ue=new a.Z(l.z,p,l.z,l.x,l.y),Ce=E.terrain.getMinMaxElevation(ue);q=(T=Ce.minElevation)!==null&&T!==void 0?T:Math.min(0,C),Z=(U=Ce.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}const re=1<<l.z;return new _o([p+l.x/re,l.y/re,q],[p+(l.x+1)/re,(l.y+1)/re,Z])}allowVariableZoom(l,p){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,E=a.ae(78.5-C/2,0,60);return!!p.terrain||l.pitch>E}allowWorldCopies(){return!0}prepareNextFrame(){}}class mo{constructor(l,p,C){this.points=l,this.planes=p,this.aabb=C}static fromInvProjectionMatrix(l,p=1,C=0,E,T){const U=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],q=Math.pow(2,C),Z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ge=>(function(Ue,We,Je,He){const tt=a.aw([],Ue,We),at=1/tt[3]/Je*He;return a.aY(tt,tt,[at,at,1/tt[3],at])})(ge,l,p,q)));E&&(function(ge,Ue,We,Je){const He=Je?4:0,tt=Je?0:4;let at=0;const yt=[],lt=[];for(let ct=0;ct<4;ct++){const Ot=a.aU([],ge[ct+tt],ge[ct+He]),Qt=a.aZ(Ot);a.aR(Ot,Ot,1/Qt),yt.push(Qt),lt.push(Ot)}for(let ct=0;ct<4;ct++){const Ot=a.a_(ge[ct+He],lt[ct],We);at=Ot!==null&&Ot>=0?Math.max(at,Ot):Math.max(at,yt[ct])}const vt=(function(ct,Ot){const Qt=a.aU([],ct[Ot[0]],ct[Ot[1]]),Kt=a.aU([],ct[Ot[2]],ct[Ot[1]]),jt=[0,0,0,0];return a.aV(jt,a.aW([],Qt,Kt)),jt[3]=-a.aX(jt,ct[Ot[0]]),jt})(ge,Ue),bt=(function(ct,Ot){const Qt=a.a$(ct),Kt=a.b0([],ct,1/Qt),jt=a.aU([],Ot,a.aR([],Kt,a.aX(Ot,Kt))),Wt=a.a$(jt);if(Wt>0){const kn=Math.sqrt(1-Kt[3]*Kt[3]),Tn=a.aR([],Kt,-Kt[3]),ln=a.aS([],Tn,a.aR([],jt,kn/Wt));return a.b1(Ot,ln)}return null})(We,vt);if(bt!==null){const ct=bt/a.aX(lt[0],vt);at=Math.min(at,ct)}for(let ct=0;ct<4;ct++){const Ot=Math.min(at,yt[ct]);ge[ct+tt]=[ge[ct+He][0]+lt[ct][0]*Ot,ge[ct+He][1]+lt[ct][1]*Ot,ge[ct+He][2]+lt[ct][2]*Ot,1]}})(Z,U[0],E,T);const re=U.map((ge=>{const Ue=a.aU([],Z[ge[0]],Z[ge[1]]),We=a.aU([],Z[ge[2]],Z[ge[1]]),Je=a.aV([],a.aW([],Ue,We)),He=-a.aX(Je,Z[ge[1]]);return Je.concat(He)})),ue=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ce=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ge of Z)for(let Ue=0;Ue<3;Ue++)ue[Ue]=Math.min(ue[Ue],ge[Ue]),Ce[Ue]=Math.max(Ce[Ue],ge[Ue]);return new mo(Z,re,new _o(ue,Ce))}}class ss{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,p){}constructor(l){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(p,C)=>{C=a.ae(+C,this.minZoom,this.maxZoom);const E={center:new a.S(p.lng,p.lat),zoom:C};let T=this._helper._lngRange;if(!this._helper._renderWorldCopies&&T===null){const lt=179.9999999999;T=[-lt,lt]}const U=this.tileSize*a.ah(E.zoom);let q=0,Z=U,re=0,ue=U,Ce=0,ge=0;const{x:Ue,y:We}=this.size;if(this._helper._latRange){const lt=this._helper._latRange;q=a.U(lt[1])*U,Z=a.U(lt[0])*U,Z-q<We&&(Ce=We/(Z-q))}T&&(re=a.aO(a.V(T[0])*U,0,U),ue=a.aO(a.V(T[1])*U,0,U),ue<re&&(ue+=U),ue-re<Ue&&(ge=Ue/(ue-re)));const{x:Je,y:He}=fe(U,p);let tt,at;const yt=Math.max(ge||0,Ce||0);if(yt){const lt=new a.P(ge?(ue+re)/2:Je,Ce?(Z+q)/2:He);return E.center=De(U,lt).wrap(),E.zoom+=a.ak(yt),E}if(this._helper._latRange){const lt=We/2;He-lt<q&&(at=q+lt),He+lt>Z&&(at=Z-lt)}if(T){const lt=(re+ue)/2;let vt=Je;this._helper._renderWorldCopies&&(vt=a.aO(Je,lt-U/2,lt+U/2));const bt=Ue/2;vt-bt<re&&(tt=re+bt),vt+bt>ue&&(tt=ue-bt)}if(tt!==void 0||at!==void 0){const lt=new a.P(tt??Je,at??He);E.center=De(U,lt).wrap()}return E},this._helper=new Mo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._coveringTilesDetailsProvider=new uu}clone(){const l=new ss;return l.apply(this),l}apply(l,p,C){this._helper.apply(l,p,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const p=[new a.b2(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new a.P(0,0)),E=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),U=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),q=Math.floor(Math.min(C.x,E.x,T.x,U.x)),Z=Math.floor(Math.max(C.x,E.x,T.x,U.x)),re=1;for(let ue=q-re;ue<=Z+re;ue++)ue!==0&&p.push(new a.b2(ue,l))}return p}getCameraFrustum(){return mo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const p=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,p){const C=a.aj(this.elevation,this.center.lat),E=this.screenPointToMercatorCoordinateAtZ(p,C),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),U=a.a1.fromLngLat(l),q=new a.a1(U.x-(E.x-T.x),U.y-(E.y-T.y));this.setCenter(q?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,p){return p?this.coordinatePoint(a.a1.fromLngLat(l),p.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,p){const C=p||0,E=[l.x,l.y,0,1],T=[l.x,l.y,1,1];a.aw(E,E,this._pixelMatrixInverse),a.aw(T,T,this._pixelMatrixInverse);const U=E[3],q=T[3],Z=E[1]/U,re=T[1]/q,ue=E[2]/U,Ce=T[2]/q,ge=ue===Ce?0:(C-ue)/(Ce-ue);return new a.a1(a.C.number(E[0]/U,T[0]/q,ge)/this.worldSize,a.C.number(Z,re,ge)/this.worldSize,C)}coordinatePoint(l,p=0,C=this._pixelMatrix){const E=[l.x*this.worldSize,l.y*this.worldSize,p,1];return a.aw(E,E,C),new a.P(E[0]/E[3],E[1]/E[3])}getBounds(){const l=Math.max(0,this._helper._height/2-y(this));return new St().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,p){return p?p.pointCoordinate(l)!=null:l.y>this.height/2-y(this)}calculatePosMatrix(l,p=!1,C){var E;const T=(E=l.key)!==null&&E!==void 0?E:a.b3(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),U=p?this._alignedPosMatrixCache:this._posMatrixCache;if(U.has(T)){const re=U.get(T);return C?re.f32:re.f64}const q=rt(l,this.worldSize);a.O(q,p?this._alignedProjMatrix:this._viewProjMatrix,q);const Z={f64:q,f32:new Float32Array(q)};return U.set(T,Z),C?Z.f32:Z.f64}calculateFogMatrix(l){const p=l.key,C=this._fogMatrixCacheF32;if(C.has(p))return C.get(p);const E=rt(l,this.worldSize);return a.O(E,this._fogMatrix,E),C.set(p,new Float32Array(E)),C.get(p)}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}_calculateNearFarZIfNeeded(l,p,C){if(!this._helper.autoCalculateNearFarZ)return;const E=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=l-E*this._helper._pixelPerMeter/Math.cos(p),U=E<0?T:l,q=Math.PI/2+this.pitchInRadians,Z=a.ag(this.fov)*(Math.abs(Math.cos(a.ag(this.roll)))*this.height+Math.abs(Math.sin(a.ag(this.roll)))*this.width)/this.height*(.5+C.y/this.height),re=Math.sin(Z)*U/Math.sin(a.ae(Math.PI-q-Z,.01,Math.PI-.01)),ue=y(this),Ce=Math.atan(ue/this._helper.cameraToCenterDistance),ge=a.ag(.75),Ue=Ce>ge?2*Ce*(.5+C.y/(2*ue)):ge,We=Math.sin(Ue)*U/Math.sin(a.ae(Math.PI-q-Ue,.01,Math.PI-.01)),Je=Math.min(re,We);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Je+U),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,p=fe(this.worldSize,this.center),C=p.x,E=p.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const T=a.ag(Math.min(this.pitch,Xe)),U=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let q;this._calculateNearFarZIfNeeded(U,T,l),q=new Float64Array(16),a.b4(q,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,q),q[8]=2*-l.x/this._helper._width,q[9]=2*l.y/this._helper._height,this._projectionMatrix=a.b5(q),a.N(q,q,[1,-1,1]),a.M(q,q,[0,0,-this._helper.cameraToCenterDistance]),a.b6(q,q,-this.rollInRadians),a.b7(q,q,this.pitchInRadians),a.b6(q,q,-this.bearingInRadians),a.M(q,q,[-C,-E,0]),this._mercatorMatrix=a.N([],q,[this.worldSize,this.worldSize,this.worldSize]),a.N(q,q,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,q),a.M(q,q,[0,0,-this.elevation]),this._viewProjMatrix=q,this._invViewProjMatrix=a.aq([],q);const Z=[0,0,-1,1];a.aw(Z,Z,this._invViewProjMatrix),this._cameraPosition=[Z[0]/Z[3],Z[1]/Z[3],Z[2]/Z[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,U,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-C,-E,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,q);const re=this._helper._width%2/2,ue=this._helper._height%2/2,Ce=Math.cos(this.bearingInRadians),ge=Math.sin(-this.bearingInRadians),Ue=C-Math.round(C)+Ce*re+ge*ue,We=E-Math.round(E)+Ce*ue+ge*re,Je=new Float64Array(q);if(a.M(Je,Je,[Ue>.5?Ue-1:Ue,We>.5?We-1:We,0]),this._alignedProjMatrix=Je,q=a.aq(new Float64Array(16),this._pixelMatrix),!q)throw new Error("failed to invert matrix");this._pixelMatrixInverse=q,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aw(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return Bt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,p){const C=a.a1.fromLngLat(l),E=[C.x*this.worldSize,C.y*this.worldSize,p,1];return a.aw(E,E,this._viewProjMatrix),E[2]/E[3]}getProjectionData(l){const{overscaledTileID:p,aligned:C,applyTerrainMatrix:E}=l,T=this._helper.getMercatorTileCoordinates(p),U=p?this.calculatePosMatrix(p,C,!0):null;let q;return q=p&&p.terrainRttPosMatrix32f&&E?p.terrainRttPosMatrix32f:U||a.b8(),{mainMatrix:q,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:q}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,p,C){return 1}transformLightDirection(l){return a.aT(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,p,C,E){const T=this.calculatePosMatrix(C);let U;E?(U=[l,p,E(l,p),1],a.aw(U,U,T)):(U=[l,p,0,1],Zo(U,U,T));const q=U[3];return{point:new a.P(U[0]/q,U[1]/q),signedDistanceFromCamera:q,isOccluded:!1}}populateCache(l){for(const p of l)this.calculatePosMatrix(p)}getMatrixForModel(l,p){const C=a.a1.fromLngLat(l,p),E=C.meterInMercatorCoordinateUnits(),T=a.b9();return a.M(T,T,[C.x,C.y,C.z]),a.b6(T,T,Math.PI),a.b7(T,T,Math.PI/2),a.N(T,T,[-E,E,E]),T}getProjectionDataForCustomLayer(l=!0){const p=new a.Z(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:l}),E=rt(p,this.worldSize);a.O(E,this._viewProjMatrix,E),C.tileMercatorCoords=[0,0,1,1];const T=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],U=a.ba();return a.N(U,E,T),C.fallbackMatrix=U,C.mainMatrix=U,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function ao(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function sl(O){if(O.useSlerp)if(O.k<1){const l=a.bb(O.startEulerAngles.roll,O.startEulerAngles.pitch,O.startEulerAngles.bearing),p=a.bb(O.endEulerAngles.roll,O.endEulerAngles.pitch,O.endEulerAngles.bearing),C=new Float64Array(4);a.bc(C,l,p,O.k);const E=a.bd(C);O.tr.setRoll(E.roll),O.tr.setPitch(E.pitch),O.tr.setBearing(E.bearing)}else O.tr.setRoll(O.endEulerAngles.roll),O.tr.setPitch(O.endEulerAngles.pitch),O.tr.setBearing(O.endEulerAngles.bearing);else O.tr.setRoll(a.C.number(O.startEulerAngles.roll,O.endEulerAngles.roll,O.k)),O.tr.setPitch(a.C.number(O.startEulerAngles.pitch,O.endEulerAngles.pitch,O.k)),O.tr.setBearing(a.C.number(O.startEulerAngles.bearing,O.endEulerAngles.bearing,O.k))}function Ul(O,l,p,C,E){const T=E.padding,U=fe(E.worldSize,p.getNorthWest()),q=fe(E.worldSize,p.getNorthEast()),Z=fe(E.worldSize,p.getSouthEast()),re=fe(E.worldSize,p.getSouthWest()),ue=a.ag(-C),Ce=U.rotate(ue),ge=q.rotate(ue),Ue=Z.rotate(ue),We=re.rotate(ue),Je=new a.P(Math.max(Ce.x,ge.x,We.x,Ue.x),Math.max(Ce.y,ge.y,We.y,Ue.y)),He=new a.P(Math.min(Ce.x,ge.x,We.x,Ue.x),Math.min(Ce.y,ge.y,We.y,Ue.y)),tt=Je.sub(He),at=(E.width-(T.left+T.right+l.left+l.right))/tt.x,yt=(E.height-(T.top+T.bottom+l.top+l.bottom))/tt.y;if(yt<0||at<0)return void ao();const lt=Math.min(a.ak(E.scale*Math.min(at,yt)),O.maxZoom),vt=a.P.convert(O.offset),bt=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ag(C)),ct=vt.add(bt).mult(E.scale/a.ah(lt));return{center:De(E.worldSize,U.add(Z).div(2).sub(ct)),zoom:lt,bearing:C}}class Ni{get useGlobeControls(){return!1}handlePanInertia(l,p){const C=l.mag(),E=Math.abs(y(p));return{easingOffset:l.mult(Math.min(.75*E/C,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(l,p){l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta),l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta)}handleMapControlsPan(l,p,C){l.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,p,C,E,T){return Ul(l,p,C,E,T)}handleJumpToCenterZoom(l,p){l.zoom!==(p.zoom!==void 0?+p.zoom:l.zoom)&&l.setZoom(+p.zoom),p.center!==void 0&&l.setCenter(a.S.convert(p.center))}handleEaseTo(l,p){const C=l.zoom,E=l.padding,T={roll:l.roll,pitch:l.pitch,bearing:l.bearing},U={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},q=p.zoom!==void 0,Z=!l.isPaddingEqual(p.padding);let re=!1;const ue=q?+p.zoom:l.zoom;let Ce=l.centerPoint.add(p.offsetAsPoint);const ge=l.screenPointToLocation(Ce),{center:Ue,zoom:We}=l.constrain(a.S.convert(p.center||ge),ue??C);so(l,Ue);const Je=fe(l.worldSize,ge),He=fe(l.worldSize,Ue).sub(Je),tt=a.ah(We-C);return re=We!==C,{easeFunc:at=>{if(re&&l.setZoom(a.C.number(C,We,at)),a.be(T,U)||sl({startEulerAngles:T,endEulerAngles:U,tr:l,k:at,useSlerp:T.roll!=U.roll}),Z&&(l.interpolatePadding(E,p.padding,at),Ce=l.centerPoint.add(p.offsetAsPoint)),p.around)l.setLocationAtPoint(p.around,p.aroundPoint);else{const yt=a.ah(l.zoom-C),lt=We>C?Math.min(2,tt):Math.max(.5,tt),vt=Math.pow(lt,1-at),bt=De(l.worldSize,Je.add(He.mult(at*vt)).mult(yt));l.setLocationAtPoint(l.renderWorldCopies?bt.wrap():bt,Ce)}},isZooming:re,elevationCenter:Ue}}handleFlyTo(l,p){const C=p.zoom!==void 0,E=l.zoom,T=l.constrain(a.S.convert(p.center||p.locationAtOffset),C?+p.zoom:E),U=T.center,q=T.zoom;so(l,U);const Z=fe(l.worldSize,p.locationAtOffset),re=fe(l.worldSize,U).sub(Z),ue=re.mag(),Ce=a.ah(q-E);let ge;if(p.minZoom!==void 0){const Ue=Math.min(+p.minZoom,E,q),We=l.constrain(U,Ue).zoom;ge=a.ah(We-E)}return{easeFunc:(Ue,We,Je,He)=>{l.setZoom(Ue===1?q:E+a.ak(We));const tt=Ue===1?U:De(l.worldSize,Z.add(re.mult(Je)).mult(We));l.setLocationAtPoint(l.renderWorldCopies?tt.wrap():tt,He)},scaleOfZoom:Ce,targetCenter:U,scaleOfMinZoom:ge,pixelPathLength:ue}}}class Pi{constructor(l,p,C){this.blendFunction=l,this.blendColor=p,this.mask=C}}Pi.Replace=[1,0],Pi.disabled=new Pi(Pi.Replace,a.bf.transparent,[!1,!1,!1,!1]),Pi.unblended=new Pi(Pi.Replace,a.bf.transparent,[!0,!0,!0,!0]),Pi.alphaBlended=new Pi([1,771],a.bf.transparent,[!0,!0,!0,!0]);const J=2305;class ye{constructor(l,p,C){this.enable=l,this.mode=p,this.frontFace=C}}ye.disabled=new ye(!1,1029,J),ye.backCCW=new ye(!0,1029,J),ye.frontCCW=new ye(!0,1028,J);class Qe{constructor(l,p,C){this.func=l,this.mask=p,this.range=C}}Qe.ReadOnly=!1,Qe.ReadWrite=!0,Qe.disabled=new Qe(519,Qe.ReadOnly,[0,1]);const Et=7680;class dn{constructor(l,p,C,E,T,U){this.test=l,this.ref=p,this.mask=C,this.fail=E,this.depthFail=T,this.pass=U}}dn.disabled=new dn({func:519,mask:0},0,0,Et,Et,Et);const Bn=new WeakMap;function ci(O){var l;if(Bn.has(O))return Bn.get(O);{const p=(l=O.getParameter(O.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return Bn.set(O,p),p}}class Ki{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const p=l.context,C=p.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const E=new a.aL;E.emplaceBack(-1,-1),E.emplaceBack(2,-1),E.emplaceBack(-1,2);const T=new a.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new ol(p.createVertexBuffer(E,Gi.members),p.createIndexBuffer(T),a.aM.simpleSegment(0,0,E.length,T.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(C.TEXTURE1);const U=C.createTexture();C.bindTexture(C.TEXTURE_2D,U),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(U),ci(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,p){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,p=l.gl;l.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,p){const C=this._cachedRenderContext.context,E=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,E.TRIANGLES,Qe.disabled,dn.disabled,Pi.unblended,ye.disabled,((T,U)=>({u_input:T,u_output_expected:U}))(l,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ci(E)){E.bindBuffer(E.PIXEL_PACK_BUFFER,this._pbo),E.readBuffer(E.COLOR_ATTACHMENT0),E.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),E.bindBuffer(E.PIXEL_PACK_BUFFER,null);const T=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0);E.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ci(l)){const p=l.clientWaitSync(this._readbackQueue.sync,0,0);if(p===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ki._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let p=0;return p+=l[0]/256,p+=l[1]/65536,p+=l[2]/16777216,l[3]<127&&(p=-p),p/128}}const Oi=a.$/128;function Bi(O,l){const p=O.granularity!==void 0?Math.max(O.granularity,1):1,C=p+(O.generateBorders?2:0),E=p+(O.extendToNorthPole||O.generateBorders?1:0)+(O.extendToSouthPole||O.generateBorders?1:0),T=C+1,U=E+1,q=O.generateBorders?-1:0,Z=O.generateBorders||O.extendToNorthPole?-1:0,re=p+(O.generateBorders?1:0),ue=p+(O.generateBorders||O.extendToSouthPole?1:0),Ce=T*U,ge=C*E*6,Ue=T*U>65536;if(Ue&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const We=Ue||l==="32bit",Je=new Int16Array(2*Ce);let He=0;for(let yt=Z;yt<=ue;yt++)for(let lt=q;lt<=re;lt++){let vt=lt/p*a.$;lt===-1&&(vt=-Oi),lt===p+1&&(vt=a.$+Oi);let bt=yt/p*a.$;yt===-1&&(bt=O.extendToNorthPole?a.bh:-Oi),yt===p+1&&(bt=O.extendToSouthPole?a.bi:a.$+Oi),Je[He++]=vt,Je[He++]=bt}const tt=We?new Uint32Array(ge):new Uint16Array(ge);let at=0;for(let yt=0;yt<E;yt++)for(let lt=0;lt<C;lt++){const vt=lt+1+yt*T,bt=lt+(yt+1)*T,ct=lt+1+(yt+1)*T;tt[at++]=lt+yt*T,tt[at++]=bt,tt[at++]=vt,tt[at++]=vt,tt[at++]=bt,tt[at++]=ct}return{vertices:Je.buffer.slice(0),indices:tt.buffer.slice(0),uses32bitIndices:We}}const pr=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class lo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ga.projectionGlobe}get vertexShaderPreludeCode(){return Ga.projectionMercator.vertexSource}get subdivisionGranularity(){return pr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new Ki(l));const p=a.U(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,E=this._errorMeasurement.updateErrorLoop(p,C),T=B();E!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=E,this._errorMeasurementLastChangeTime=T);const U=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(U))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,p,C,E,T){const U=(T==="stencil"?pr.stencil:pr.tile).getGranularityForZoomLevel(p.z);return this._getMesh(l,{granularity:U,generateBorders:C,extendToNorthPole:p.y===0&&E,extendToSouthPole:p.y===(1<<p.z)-1&&E})}_getMesh(l,p){const C=this._getMeshKey(p);if(C in this._tileMeshCache)return this._tileMeshCache[C];const E=(function(T,U){const q=Bi(U,"16bit"),Z=a.aL.deserialize({arrayBuffer:q.vertices,length:q.vertices.byteLength/2/2}),re=a.aN.deserialize({arrayBuffer:q.indices,length:q.indices.byteLength/2/3});return new ol(T.createVertexBuffer(Z,Gi.members),T.createIndexBuffer(re),a.aM.simpleSegment(0,0,Z.length,re.length))})(l,p);return this._tileMeshCache[C]=E,E}recalculate(l){}hasTransition(){const l=B();let p=!1;return p=p||(l-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const br=new a.r({type:new a.D(a.v.projection.type)});class yr extends a.E{constructor(l){super(),this._transitionable=new a.t(br,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new lu,this._verticalPerspectiveProjection=new lo}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bm){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,p,C,E,T){return this.currentProjection.getMeshFromTileID(l,p,C,E,T)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function to(O){const l=Ss(O.worldSize,O.center.lat);return 2*Math.PI*l}function Fo(O,l,p,C,E){const T=1/(1<<E),U=l/a.$*T+C*T,q=a.bo((O/a.$*T+p*T)*Math.PI*2+Math.PI,2*Math.PI),Z=2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI,re=Math.cos(Z),ue=new Float64Array(3);return ue[0]=Math.sin(q)*re,ue[1]=Math.sin(Z),ue[2]=Math.cos(q)*re,ue}function Br(O){return(function(l,p){const C=Math.cos(p),E=new Float64Array(3);return E[0]=Math.sin(l)*C,E[1]=Math.sin(p),E[2]=Math.cos(l)*C,E})(O.lng*Math.PI/180,O.lat*Math.PI/180)}function Ss(O,l){return O/(2*Math.PI)/Math.cos(l*Math.PI/180)}function ZA(O){const l=Math.asin(O[1])/Math.PI*180,p=Math.sqrt(O[0]*O[0]+O[2]*O[2]);if(p>1e-6){const C=O[0]/p,E=Math.acos(O[2]/p),T=(C>0?E:-E)/Math.PI*180;return new a.S(a.aO(T,-180,180),l)}return new a.S(0,l)}function vl(O){return Math.cos(O*Math.PI/180)}function Tr(O,l){const p=vl(O),C=vl(l);return a.ak(C/p)}function _1(O,l){const p=O.rotate(l.bearingInRadians),C=l.zoom+Tr(l.center.lat,0),E=a.bk(1/vl(l.center.lat),1/vl(Math.min(Math.abs(l.center.lat),60)),a.bn(C,7,3,0,1)),T=360/to({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.S(l.center.lng-p.x*T*E,a.ae(l.center.lat+p.y*T,-a.af,a.af))}function cu(O){const l=.5*O,p=Math.sin(l),C=Math.cos(l);return Math.log(p+C)-Math.log(C-p)}function Au(O,l,p,C){const E=O.lat+p*C;if(Math.abs(p)>1){const T=(Math.sign(O.lat+p)!==Math.sign(O.lat)?-Math.abs(O.lat):Math.abs(O.lat))*Math.PI/180,U=Math.abs(O.lat+p)*Math.PI/180,q=cu(T+C*(U-T)),Z=cu(T),re=cu(U);return new a.S(O.lng+l*((q-Z)/(re-Z)),E)}return new a.S(O.lng+l*C,E)}class Rm{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,p,C,E){const T=`${l.z}_${l.x}_${l.y}_${E?.terrain?"t":""}`,U=this._cache.get(T);if(U)return U;const q=this._cachePrevious.get(T);if(q)return this._cache.set(T,q),q;const Z=this._boundingVolumeFactory(l,p,C,E);return this._cache.set(T,Z),this._hadAnyChanges=!0,Z}}class ta{constructor(l,p,C,E){this.min=C,this.max=E,this.points=l,this.planes=p}static fromAabb(l,p){const C=[];for(let E=0;E<8;E++)C.push([1&~E?l[0]:p[0],(E>>1&1)==1?p[1]:l[1],(E>>2&1)==1?p[2]:l[2]]);return new ta(C,[[-1,0,0,p[0]],[1,0,0,-l[0]],[0,-1,0,p[1]],[0,1,0,-l[1]],[0,0,-1,p[2]],[0,0,1,-l[2]]],l,p)}static fromCenterSizeAngles(l,p,C){const E=a.br([],C[0],C[1],C[2]),T=a.bs([],[p[0],0,0],E),U=a.bs([],[0,p[1],0],E),q=a.bs([],[0,0,p[2]],E),Z=[...l],re=[...l];for(let Ce=0;Ce<8;Ce++)for(let ge=0;ge<3;ge++){const Ue=l[ge]+T[ge]*(1&~Ce?-1:1)+U[ge]*((Ce>>1&1)==1?1:-1)+q[ge]*((Ce>>2&1)==1?1:-1);Z[ge]=Math.min(Z[ge],Ue),re[ge]=Math.max(re[ge],Ue)}const ue=[];for(let Ce=0;Ce<8;Ce++){const ge=[...l];a.aS(ge,ge,a.aR([],T,1&~Ce?-1:1)),a.aS(ge,ge,a.aR([],U,(Ce>>1&1)==1?1:-1)),a.aS(ge,ge,a.aR([],q,(Ce>>2&1)==1?1:-1)),ue.push(ge)}return new ta(ue,[[...T,-a.aX(T,ue[0])],[...U,-a.aX(U,ue[0])],[...q,-a.aX(q,ue[0])],[-T[0],-T[1],-T[2],-a.aX(T,ue[7])],[-U[0],-U[1],-U[2],-a.aX(U,ue[7])],[-q[0],-q[1],-q[2],-a.aX(q,ue[7])]],Z,re)}intersectsFrustum(l){let p=!0;const C=this.points.length,E=this.planes.length,T=l.planes.length,U=l.points.length;for(let q=0;q<T;q++){const Z=l.planes[q];let re=0;for(let ue=0;ue<C;ue++){const Ce=this.points[ue];Z[0]*Ce[0]+Z[1]*Ce[1]+Z[2]*Ce[2]+Z[3]>=0&&re++}if(re===0)return 0;re<C&&(p=!1)}if(p)return 2;for(let q=0;q<E;q++){const Z=this.planes[q];let re=0;for(let ue=0;ue<U;ue++){const Ce=l.points[ue];Z[0]*Ce[0]+Z[1]*Ce[1]+Z[2]*Ce[2]+Z[3]>=0&&re++}if(re===0)return 0}return 1}intersectsPlane(l){const p=this.points.length;let C=0;for(let E=0;E<p;E++){const T=this.points[E];l[0]*T[0]+l[1]*T[1]+l[2]*T[2]+l[3]>=0&&C++}return C===p?2:C===0?0:1}}function yA(O,l,p){const C=O-l;return C<0?-C:Math.max(0,C-p)}function Ph(O,l,p,C,E){const T=O-p;let U;return U=T<0?Math.min(-T,1+T-E):T>1?Math.min(Math.max(T-E,0),1-T):0,Math.max(U,yA(l,C,E))}class Es{constructor(){this._boundingVolumeCache=new Rm(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,p,C,E){const T=1<<C.z,U=1/T,q=C.x/T,Z=C.y/T;let re=2;return re=Math.min(re,Ph(l,p,q,Z,U)),re=Math.min(re,Ph(l,p,q+.5,-Z-U,U)),re=Math.min(re,Ph(l,p,q+.5,2-Z-U,U)),re}getWrap(l,p,C){const E=1<<p.z,T=1/E,U=p.x/E,q=yA(l.x,U,T),Z=yA(l.x,U-1,T),re=yA(l.x,U+1,T),ue=Math.min(q,Z,re);return ue===re?1:ue===Z?-1:0}allowVariableZoom(l,p){return ni(l,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,p,C,E){return this._boundingVolumeCache.getTileBoundingVolume(l,p,C,E)}_computeTileBoundingVolume(l,p,C,E){var T,U;let q=0,Z=0;if(E?.terrain){const re=new a.Z(l.z,p,l.z,l.x,l.y),ue=E.terrain.getMinMaxElevation(re);q=(T=ue.minElevation)!==null&&T!==void 0?T:Math.min(0,C),Z=(U=ue.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}if(q/=a.bu,Z/=a.bu,q+=1,Z+=1,l.z<=0)return ta.fromAabb([-Z,-Z,-Z],[Z,Z,Z]);if(l.z===1)return ta.fromAabb([l.x===0?-Z:0,l.y===0?0:-Z,-Z],[l.x===0?0:Z,l.y===0?Z:0,Z]);{const re=[Fo(0,0,l.x,l.y,l.z),Fo(a.$,0,l.x,l.y,l.z),Fo(a.$,a.$,l.x,l.y,l.z),Fo(0,a.$,l.x,l.y,l.z)],ue=[];for(const jt of re)ue.push(a.aR([],jt,Z));if(Z!==q)for(const jt of re)ue.push(a.aR([],jt,q));l.y===0&&ue.push([0,1,0]),l.y===(1<<l.z)-1&&ue.push([0,-1,0]);const Ce=[1,1,1],ge=[-1,-1,-1];for(const jt of ue)for(let Wt=0;Wt<3;Wt++)Ce[Wt]=Math.min(Ce[Wt],jt[Wt]),ge[Wt]=Math.max(ge[Wt],jt[Wt]);const Ue=Fo(a.$/2,a.$/2,l.x,l.y,l.z),We=a.aW([],[0,1,0],Ue);a.aV(We,We);const Je=a.aW([],Ue,We);a.aV(Je,Je);const He=a.aW([],re[2],re[1]);a.aV(He,He);const tt=a.aW([],re[0],re[3]);a.aV(tt,tt),ue.push(a.aR([],Ue,Z)),l.y>=(1<<l.z)/2&&ue.push(a.aR([],Fo(a.$/2,0,l.x,l.y,l.z),Z)),l.y<(1<<l.z)/2&&ue.push(a.aR([],Fo(a.$/2,a.$,l.x,l.y,l.z),Z));const at=Bu(Ue,ue),yt=Bu(Je,ue),lt=[-Ue[0],-Ue[1],-Ue[2],at.max],vt=[Ue[0],Ue[1],Ue[2],-at.min],bt=[-Je[0],-Je[1],-Je[2],yt.max],ct=[Je[0],Je[1],Je[2],-yt.min],Ot=[...He,0],Qt=[...tt,0],Kt=[];return l.y===0?Kt.push(a.bt(Qt,Ot,lt),a.bt(Qt,Ot,vt)):Kt.push(a.bt(bt,Ot,lt),a.bt(bt,Ot,vt),a.bt(bt,Qt,lt),a.bt(bt,Qt,vt)),l.y===(1<<l.z)-1?Kt.push(a.bt(Qt,Ot,lt),a.bt(Qt,Ot,vt)):Kt.push(a.bt(ct,Ot,lt),a.bt(ct,Ot,vt),a.bt(ct,Qt,lt),a.bt(ct,Qt,vt)),new ta(Kt,[lt,vt,bt,ct,Ot,Qt],Ce,ge)}}}function Bu(O,l){let p=1/0,C=-1/0;for(const E of l){const T=a.aX(O,E);p=Math.min(p,T),C=Math.max(C,T)}return{min:p,max:C}}class Of{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p){this._helper.resize(l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(l){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(p,C)=>{const E=a.ae(p.lat,-a.af,a.af),T=a.ae(+C,this.minZoom+Tr(0,E),this.maxZoom);return{center:new a.S(p.lng,E),zoom:T}},this._helper=new Mo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._coveringTilesDetailsProvider=new Es}clone(){const l=new Of;return l.apply(this),l}apply(l,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bp();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:p,applyGlobeMatrix:C}=l,E=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:E,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const p=this.pitchInRadians,C=this.cameraToCenterDistance/l,E=Math.sin(p)*C,T=Math.cos(p)*C+1,U=1/Math.sqrt(E*E+T*T)*1;let q=-E,Z=T;const re=Math.sqrt(q*q+Z*Z);q/=re,Z/=re;const ue=[0,q,Z];a.bw(ue,ue,[0,0,0],-this.bearingInRadians),a.bx(ue,ue,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(ue,ue,[0,0,0],this.center.lng*Math.PI/180);const Ce=1/a.aZ(ue);return a.aR(ue,ue,Ce),[...ue,-U*Ce]}isLocationOccluded(l){return!this.isSurfacePointVisible(Br(l))}transformLightDirection(l){const p=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,E=Math.cos(C),T=[Math.sin(p)*E,Math.sin(C),Math.cos(p)*E],U=[T[2],0,-T[0]],q=[0,0,0];a.aW(q,U,T),a.aV(U,U),a.aV(q,q);const Z=[0,0,0];return a.aV(Z,[U[0]*l[0]+q[0]*l[1]+T[0]*l[2],U[1]*l[0]+q[1]*l[1]+T[1]*l[2],U[2]*l[0]+q[2]*l[1]+T[2]*l[2]]),Z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,p,C){const E=(function(q,Z,re){const ue=1/(1<<re.z);return new a.a1(q/a.$*ue+re.x*ue,Z/a.$*ue+re.y*ue)})(l,p,C.canonical),T=(U=E.y,[a.bo(E.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI]);var U;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(l,p,C,E){const T=C.canonical,U=Fo(l,p,T.x,T.y,T.z),q=1+(E?E(l,p):0)/a.bu,Z=[U[0]*q,U[1]*q,U[2]*q,1];a.aw(Z,Z,this._globeViewProjMatrixNoCorrection);const re=this._cachedClippingPlane,ue=re[0]*U[0]+re[1]*U[1]+re[2]*U[2]+re[3]<0;return{point:new a.P(Z[0]/Z[3],Z[1]/Z[3]),signedDistanceFromCamera:Z[3],isOccluded:ue}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=Ss(this.worldSize,this.center.lat),p=a.ba(),C=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.b4(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const E=this.centerOffset;p[8]=2*-E.x/this._helper._width,p[9]=2*E.y/this._helper._height,this._projectionMatrix=a.b5(p),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,p),a.M(p,p,[0,0,-this.cameraToCenterDistance]),a.b6(p,p,this.rollInRadians),a.b7(p,p,-this.pitchInRadians),a.b6(p,p,this.bearingInRadians),a.M(p,p,[0,0,-l]);const T=a.bp();T[0]=l,T[1]=l,T[2]=l,a.b7(C,p,this.center.lat*Math.PI/180),a.bz(C,C,-this.center.lng*Math.PI/180),a.N(C,C,T),this._globeViewProjMatrixNoCorrection=C,a.b7(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(p,p,-this.center.lng*Math.PI/180),a.N(p,p,T),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,C);const U=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bw(this._cameraPosition,this._cameraPosition,U,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,U,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,U,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,U,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,U,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const q=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(q,q,[1,1,-1]),this._cachedFrustum=mo.fromInvProjectionMatrix(q,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.ba();return a.ai(p),p}getVisibleUnwrappedCoordinates(l){return[new a.b2(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=Br(l);a.aR(C,C,1+p/a.bu);const E=a.bv();return a.aw(E,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),E[2]/E[3]}populateCache(l){}getBounds(){const l=.5*this.width,p=.5*this.height,C=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,p)],E=[];for(const Ce of C)E.push(this.unprojectScreenPoint(Ce));let T=0,U=0,q=0,Z=0;const re=this.center;for(const Ce of E){const ge=a.bA(re.lng,Ce.lng),Ue=a.bA(re.lat,Ce.lat);ge<U&&(U=ge),ge>T&&(T=ge),Ue<Z&&(Z=Ue),Ue>q&&(q=Ue)}const ue=[re.lng+U,re.lat+Z,re.lng+T,re.lat+q];return this.isSurfacePointOnScreen([0,1,0])&&(ue[3]=90,ue[0]=-180,ue[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ue[1]=-90,ue[0]=-180,ue[2]=180),new St(ue)}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}setLocationAtPoint(l,p){const C=Br(this.unprojectScreenPoint(p)),E=Br(l),T=a.bp();a.bB(T);const U=a.bp();a.by(U,C,T,-this.center.lng*Math.PI/180),a.bx(U,U,T,this.center.lat*Math.PI/180);const q=E[0]*E[0]+E[2]*E[2],Z=U[0]*U[0];if(q<Z)return;const re=Math.sqrt(q-Z),ue=-re,Ce=a.bC(E[0],E[2],U[0],re),ge=a.bC(E[0],E[2],U[0],ue),Ue=a.bp();a.by(Ue,E,T,-Ce);const We=a.bC(Ue[1],Ue[2],U[1],U[2]),Je=a.bp();a.by(Je,E,T,-ge);const He=a.bC(Je[1],Je[2],U[1],U[2]),tt=.5*Math.PI,at=We>=-tt&&We<=tt,yt=He>=-tt&&He<=tt;let lt,vt;if(at&&yt){const Qt=this.center.lng*Math.PI/180,Kt=this.center.lat*Math.PI/180;a.bD(Ce,Qt)+a.bD(We,Kt)<a.bD(ge,Qt)+a.bD(He,Kt)?(lt=Ce,vt=We):(lt=ge,vt=He)}else if(at)lt=Ce,vt=We;else{if(!yt)return;lt=ge,vt=He}const bt=lt/Math.PI*180,ct=vt/Math.PI*180,Ot=this.center.lat;this.setCenter(new a.S(bt,a.ae(ct,-90,90))),this.setZoom(this.zoom+Tr(Ot,this.center.lat))}locationToScreenPoint(l,p){const C=Br(l);if(p){const E=p.getElevationForLngLatZoom(l,this._helper._tileZoom);a.aR(C,C,1+E/a.bu)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C)return C}return a.a1.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,p){const C=this._cameraPosition,E=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,E)}getRayDirectionFromPixel(l){const p=a.bv();p[0]=l.x/this.width*2-1,p[1]=-1*(l.y/this.height*2-1),p[2]=1,p[3]=1,a.aw(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const C=a.bp();C[0]=p[0]-this._cameraPosition[0],C[1]=p[1]-this._cameraPosition[1],C[2]=p[2]-this._cameraPosition[2];const E=a.bp();return a.aV(E,C),E}isSurfacePointVisible(l){const p=this._cachedClippingPlane;return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(l,p){const C=a.aX(l,p),E=a.bp(),T=a.bp();a.aR(T,p,C),a.aU(E,l,T);const U=1-a.aX(E,E);if(U<0)return null;const q=a.aX(l,l)-1,Z=-C+(C<0?1:-1)*Math.sqrt(U),re=q/Z,ue=Z;return{tMin:Math.min(re,ue),tMax:Math.max(re,ue)}}unprojectScreenPoint(l){const p=this._cameraPosition,C=this.getRayDirectionFromPixel(l),E=this.rayPlanetIntersection(p,C);if(E){const ue=a.bp();a.aS(ue,p,[C[0]*E.tMin,C[1]*E.tMin,C[2]*E.tMin]);const Ce=a.bp();return a.aV(Ce,ue),ZA(Ce)}const T=this._cachedClippingPlane,U=T[0]*C[0]+T[1]*C[1]+T[2]*C[2],q=-a.b1(T,p)/U,Z=a.bp();if(q>0)a.aS(Z,p,[C[0]*q,C[1]*q,C[2]*q]);else{const ue=a.bp();a.aS(ue,p,[2*C[0],2*C[1],2*C[2]]);const Ce=a.b1(this._cachedClippingPlane,ue);a.aU(Z,ue,[this._cachedClippingPlane[0]*Ce,this._cachedClippingPlane[1]*Ce,this._cachedClippingPlane[2]*Ce])}const re=(function(ue){const Ce=a.bp();return Ce[0]=ue[0]*-ue[3],Ce[1]=ue[1]*-ue[3],Ce[2]=ue[2]*-ue[3],{center:Ce,radius:Math.sqrt(1-ue[3]*ue[3])}})(T);return ZA((function(ue,Ce,ge){const Ue=a.bp();a.aU(Ue,ge,ue);const We=a.bp();return a.bq(We,ue,Ue,Ce/a.a$(Ue)),We})(re.center,re.radius,Z))}getMatrixForModel(l,p){const C=a.S.convert(l),E=1/a.bu,T=a.b9();return a.bz(T,T,C.lng/180*Math.PI),a.b7(T,T,-C.lat/180*Math.PI),a.M(T,T,[0,0,1+p/a.bu]),a.b7(T,T,.5*Math.PI),a.N(T,T,[E,E,E]),T}getProjectionDataForCustomLayer(l=!0){const p=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:l});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(l){}}class xp{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,p){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(l){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(p,C)=>this.currentTransform.defaultConstrain(p,C),this._helper=new Mo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._globeness=1,this._mercatorTransform=new ss,this._verticalPerspectiveTransform=new Of}clone(){const l=new xp;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const p=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:p.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,p,C){const E=this._mercatorTransform.getPitchedTextCorrection(l,p,C),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,p,C);return a.bk(E,T,this._globeness)}projectTileCoordinates(l,p,C,E){return this.currentTransform.projectTileCoordinates(l,p,C,E)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){return this.currentTransform.lngLatToCameraDepth(l,p)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(l,p,C,E){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,E)}setLocationAtPoint(l,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,p){return this.currentTransform.locationToScreenPoint(l,p)}screenPointToMercatorCoordinate(l,p){return this.currentTransform.screenPointToMercatorCoordinate(l,p)}screenPointToLocation(l,p){return this.currentTransform.screenPointToLocation(l,p)}isPointOnMapSurface(l,p){return this.currentTransform.isPointOnMapSurface(l,p)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,p){return this.currentTransform.getMatrixForModel(l,p)}getProjectionDataForCustomLayer(l=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return p;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=p.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class sc{get useGlobeControls(){return!0}handlePanInertia(l,p){const C=_1(l,p);return Math.abs(C.lng-p.center.lng)>180&&(C.lng=p.center.lng+179.5*Math.sign(C.lng-p.center.lng)),{easingCenter:C,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,p){const C=l.around,E=p.screenPointToLocation(C);l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta);const T=p.zoom;l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta);const U=p.zoom-T;if(U===0)return;const q=a.bA(p.center.lng,E.lng),Z=q/(Math.abs(q/180)+1),re=a.bA(p.center.lat,E.lat),ue=p.getRayDirectionFromPixel(C),Ce=p.cameraPosition,ge=-1*a.aX(Ce,ue),Ue=a.bp();a.aS(Ue,Ce,[ue[0]*ge,ue[1]*ge,ue[2]*ge]);const We=a.aZ(Ue)-1,Je=Math.exp(.5*-Math.max(We-.3,0)),He=Ss(p.worldSize,p.center.lat)/Math.min(p.width,p.height),tt=a.bn(He,.9,.5,1,.25),at=(1-a.ah(-U))*Math.min(Je,tt),yt=p.center.lat,lt=p.zoom,vt=new a.S(p.center.lng+Z*at,a.ae(p.center.lat+re*at,-a.af,a.af));p.setLocationAtPoint(E,C);const bt=p.center,ct=a.bn(Math.abs(q),45,85,0,1),Ot=a.bn(He,.75,.35,0,1),Qt=Math.pow(Math.max(ct,Ot),.25),Kt=a.bA(bt.lng,vt.lng),jt=a.bA(bt.lat,vt.lat);p.setCenter(new a.S(bt.lng+Kt*Qt,bt.lat+jt*Qt).wrap()),p.setZoom(lt+Tr(yt,p.center.lat))}handleMapControlsPan(l,p,C){if(!l.panDelta)return;const E=p.center.lat,T=p.zoom;p.setCenter(_1(l.panDelta,p).wrap()),p.setZoom(T+Tr(E,p.center.lat))}cameraForBoxAndBearing(l,p,C,E,T){const U=Ul(l,p,C,E,T),q=p.left/T.width*2-1,Z=(T.width-p.right)/T.width*2-1,re=p.top/T.height*-2+1,ue=(T.height-p.bottom)/T.height*-2+1,Ce=a.bA(C.getWest(),C.getEast())<0,ge=Ce?C.getEast():C.getWest(),Ue=Ce?C.getWest():C.getEast(),We=Math.max(C.getNorth(),C.getSouth()),Je=Math.min(C.getNorth(),C.getSouth()),He=ge+.5*a.bA(ge,Ue),tt=We+.5*a.bA(We,Je),at=T.clone();at.setCenter(U.center),at.setBearing(U.bearing),at.setPitch(0),at.setRoll(0),at.setZoom(U.zoom);const yt=at.modelViewProjectionMatrix,lt=[Br(C.getNorthWest()),Br(C.getNorthEast()),Br(C.getSouthWest()),Br(C.getSouthEast()),Br(new a.S(Ue,tt)),Br(new a.S(ge,tt)),Br(new a.S(He,We)),Br(new a.S(He,Je))],vt=Br(U.center);let bt=Number.POSITIVE_INFINITY;for(const ct of lt)q<0&&(bt=sc.getLesserNonNegativeNonNull(bt,sc.solveVectorScale(ct,vt,yt,"x",q))),Z>0&&(bt=sc.getLesserNonNegativeNonNull(bt,sc.solveVectorScale(ct,vt,yt,"x",Z))),re>0&&(bt=sc.getLesserNonNegativeNonNull(bt,sc.solveVectorScale(ct,vt,yt,"y",re))),ue<0&&(bt=sc.getLesserNonNegativeNonNull(bt,sc.solveVectorScale(ct,vt,yt,"y",ue)));if(Number.isFinite(bt)&&bt!==0)return U.zoom=at.zoom+a.ak(bt),U;ao()}handleJumpToCenterZoom(l,p){const C=l.center.lat,E=l.constrain(p.center?a.S.convert(p.center):l.center,l.zoom).center;l.setCenter(E.wrap());const T=p.zoom!==void 0?+p.zoom:l.zoom+Tr(C,E.lat);l.zoom!==T&&l.setZoom(T)}handleEaseTo(l,p){const C=l.zoom,E=l.center,T=l.padding,U={roll:l.roll,pitch:l.pitch,bearing:l.bearing},q={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},Z=p.zoom!==void 0,re=!l.isPaddingEqual(p.padding);let ue=!1;const Ce=p.center?a.S.convert(p.center):E,ge=l.constrain(Ce,C).center;so(l,ge);const Ue=l.clone();Ue.setCenter(ge),Ue.setZoom(Z?+p.zoom:C+Tr(E.lat,Ce.lat)),Ue.setBearing(p.bearing);const We=new a.P(a.ae(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ae(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));Ue.setLocationAtPoint(ge,We);const Je=(p.offset&&p.offsetAsPoint.mag())>0?Ue.center:ge,He=Z?+p.zoom:C+Tr(E.lat,Je.lat),tt=C+Tr(E.lat,0),at=He+Tr(Je.lat,0),yt=a.bA(E.lng,Je.lng),lt=a.bA(E.lat,Je.lat),vt=a.ah(at-tt);return ue=He!==C,{easeFunc:bt=>{if(a.be(U,q)||sl({startEulerAngles:U,endEulerAngles:q,tr:l,k:bt,useSlerp:U.roll!=q.roll}),re&&l.interpolatePadding(T,p.padding,bt),p.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(p.around,p.aroundPoint);else{const ct=at>tt?Math.min(2,vt):Math.max(.5,vt),Ot=Math.pow(ct,1-bt),Qt=Au(E,yt,lt,bt*Ot);l.setCenter(Qt.wrap())}if(ue){const ct=a.C.number(tt,at,bt)+Tr(0,l.center.lat);l.setZoom(ct)}},isZooming:ue,elevationCenter:Je}}handleFlyTo(l,p){const C=p.zoom!==void 0,E=l.center,T=l.zoom,U=l.padding,q=!l.isPaddingEqual(p.padding),Z=l.constrain(a.S.convert(p.center||p.locationAtOffset),T).center,re=C?+p.zoom:l.zoom+Tr(l.center.lat,Z.lat),ue=l.clone();ue.setCenter(Z),ue.setZoom(re),ue.setBearing(p.bearing);const Ce=new a.P(a.ae(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ae(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));ue.setLocationAtPoint(Z,Ce);const ge=ue.center;so(l,ge);const Ue=(function(lt,vt,bt){const ct=Br(vt),Ot=Br(bt),Qt=a.aX(ct,Ot),Kt=Math.acos(Qt),jt=to(lt);return Kt/(2*Math.PI)*jt})(l,E,ge),We=T+Tr(E.lat,0),Je=re+Tr(ge.lat,0),He=a.ah(Je-We);let tt;if(typeof p.minZoom=="number"){const lt=+p.minZoom+Tr(ge.lat,0),vt=Math.min(lt,We,Je)+Tr(0,ge.lat),bt=l.constrain(ge,vt).zoom+Tr(ge.lat,0);tt=a.ah(bt-We)}const at=a.bA(E.lng,ge.lng),yt=a.bA(E.lat,ge.lat);return{easeFunc:(lt,vt,bt,ct)=>{const Ot=Au(E,at,yt,bt);q&&l.interpolatePadding(U,p.padding,lt);const Qt=lt===1?ge:Ot;l.setCenter(Qt.wrap());const Kt=We+a.ak(vt);l.setZoom(lt===1?re:Kt+Tr(0,Qt.lat))},scaleOfZoom:He,targetCenter:ge,scaleOfMinZoom:tt,pixelPathLength:Ue}}static solveVectorScale(l,p,C,E,T){const U=E==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],q=[C[3],C[7],C[11],C[15]],Z=l[0]*U[0]+l[1]*U[1]+l[2]*U[2],re=l[0]*q[0]+l[1]*q[1]+l[2]*q[2],ue=p[0]*U[0]+p[1]*U[1]+p[2]*U[2],Ce=p[0]*q[0]+p[1]*q[1]+p[2]*q[2];return ue+T*re===Z+T*Ce||q[3]*(Z-ue)+U[3]*(Ce-re)+Z*Ce==ue*re?null:(ue+U[3]-T*Ce-T*q[3])/(ue-Z-T*Ce+T*re)}static getLesserNonNegativeNonNull(l,p){return p!==null&&p>=0&&p<l?p:l}}class x1{constructor(l){this._globe=l,this._mercatorCameraHelper=new Ni,this._verticalPerspectiveCameraHelper=new sc}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,p){return this.currentHelper.handlePanInertia(l,p)}handleMapControlsRollPitchBearingZoom(l,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,p)}handleMapControlsPan(l,p,C){this.currentHelper.handleMapControlsPan(l,p,C)}cameraForBoxAndBearing(l,p,C,E,T){return this.currentHelper.cameraForBoxAndBearing(l,p,C,E,T)}handleJumpToCenterZoom(l,p){this.currentHelper.handleJumpToCenterZoom(l,p)}handleEaseTo(l,p){return this.currentHelper.handleEaseTo(l,p)}handleFlyTo(l,p){return this.currentHelper.handleFlyTo(l,p)}}const Dm=(O,l)=>a.y(O,l&&l.filter((p=>p.identifier!=="source.canvas"))),pv=a.bE();class Dd extends a.E{constructor(l,p={}){var C,E;super(),this._rtlPluginLoaded=()=>{for(const U in this.sourceCaches){const q=this.sourceCaches[U].getSource().type;q!=="vector"&&q!=="geojson"||this.sourceCaches[U].reload()}},this.map=l,this.dispatcher=new Ke(It(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((U,q)=>this.getGlyphs(U,q))),this.dispatcher.registerMessageHandler("GI",((U,q)=>this.getImages(U,q))),this.dispatcher.registerMessageHandler("GDA",((U,q)=>this.getDashes(U,q))),this.imageManager=new pe,this.imageManager.setEventedParent(this);const T=((C=l._container)===null||C===void 0?void 0:C.lang)||typeof document<"u"&&((E=document.documentElement)===null||E===void 0?void 0:E.lang)||void 0;this.glyphManager=new je(l._requestManager,p.localIdeographFontFamily,T),this.lineAtlas=new Oe(256,512),this.crossTileSymbolIndex=new au,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),le().on(Tt,this._rtlPluginLoaded),this.on("data",(U=>{if(U.dataType!=="source"||U.sourceDataType!=="metadata")return;const q=this.sourceCaches[U.sourceId];if(!q)return;const Z=q.getSource();if(Z&&Z.vectorLayerIds)for(const re in this._layers){const ue=this._layers[re];ue.source===Z.id&&this._validateLayer(ue)}}))}setGlobalStateProperty(l,p){var C,E,T;this._checkLoaded();const U=p===null?(T=(E=(C=this.stylesheet.state)===null||C===void 0?void 0:C[l])===null||E===void 0?void 0:E.default)!==null&&T!==void 0?T:null:p;if(a.bH(U,this._globalState[l]))return this;this._globalState[l]=U,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const p=[];for(const C in l)!a.bH(this._globalState[C],l[C].default)&&(p.push(C),this._globalState[C]=l[C].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(l){if(l.length===0)return;const p=new Set,C={};for(const E of l){C[E]=this._globalState[E];for(const T in this._layers){const U=this._layers[T],q=U.getLayoutAffectingGlobalStateRefs(),Z=U.getPaintAffectingGlobalStateRefs();if(q.has(E)&&p.add(U.source),Z.has(E))for(const{name:re,value:ue}of Z.get(E))this._updatePaintProperty(U,re,ue)}}this.dispatcher.broadcast("UGS",C);for(const E in this.sourceCaches)p.has(E)&&(this._reloadSource(E),this._changed=!0)}loadURL(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const E=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;a.j(E,this._loadStyleRequest).then((U=>{this._loadStyleRequest=null,this._load(U.data,p,C)})).catch((U=>{this._loadStyleRequest=null,U&&!T.signal.aborted&&this.fire(new a.k(U))}))}loadJSON(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,C)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(pv,{validate:!1})}_load(l,p,C){var E,T;let U=p.transformStyle?p.transformStyle(C,l):l;if(!p.validate||!Dm(this,a.z(U))){U=Object.assign({},U),this._loaded=!0,this.stylesheet=U;for(const q in U.sources)this.addSource(q,U.sources[q],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs),this._createLayers(),this.light=new nt(this.stylesheet.light),this._setProjectionInternal(((E=this.stylesheet.projection)===null||E===void 0?void 0:E.type)||"mercator"),this.sky=new ke(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l,p,C;const E=a.bI(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",E),this._order=E.map((T=>T.id)),this._layers={},this._serializedLayers=null;for(const T of E){const U=a.bJ(T,this._globalState);if(U.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=U,a.bK(U)&&this.sourceCaches[U.source]){const q=(C=(p=T.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&C!==void 0?C:U.paint.get("raster-fade-duration");this.sourceCaches[U.source].setRasterFadeDuration(q)}}}_loadSprite(l,p=!1,C=void 0){let E;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(T,U,q,Z){return a._(this,void 0,void 0,(function*(){const re=ne(T),ue=q>1?"@2x":"",Ce={},ge={};for(const{id:Ue,url:We}of re){const Je=U.transformRequest(ae(We,ue,".json"),"SpriteJSON");Ce[Ue]=a.j(Je,Z);const He=U.transformRequest(ae(We,ue,".png"),"SpriteImage");ge[Ue]=Y.getImage(He,Z)}return yield Promise.all([...Object.values(Ce),...Object.values(ge)]),(function(Ue,We){return a._(this,void 0,void 0,(function*(){const Je={};for(const He in Ue){Je[He]={};const tt=x.getImageCanvasContext((yield We[He]).data),at=(yield Ue[He]).data;for(const yt in at){const{width:lt,height:vt,x:bt,y:ct,sdf:Ot,pixelRatio:Qt,stretchX:Kt,stretchY:jt,content:Wt,textFitWidth:kn,textFitHeight:Tn}=at[yt];Je[He][yt]={data:null,pixelRatio:Qt,sdf:Ot,stretchX:Kt,stretchY:jt,content:Wt,textFitWidth:kn,textFitHeight:Tn,spriteData:{width:lt,height:vt,x:bt,y:ct,context:tt}}}}return Je}))})(Ce,ge)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((T=>{if(this._spriteRequest=null,T)for(const U in T){this._spritesImagesIds[U]=[];const q=this._spritesImagesIds[U]?this._spritesImagesIds[U].filter((Z=>!(Z in T))):[];for(const Z of q)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in T[U]){const re=U==="default"?Z:`${U}:${Z}`;this._spritesImagesIds[U].push(re),re in this.imageManager.images?this.imageManager.updateImage(re,T[U][Z],!1):this.imageManager.addImage(re,T[U][Z]),p&&(this._changedImages[re]=!0)}}})).catch((T=>{this._spriteRequest=null,E=T,this.fire(new a.k(E))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),C&&C(E)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const C=l.sourceLayer;if(!C)return;const E=p.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(C)===-1)&&this.fire(new a.k(new Error(`Source layer "${C}" does not exist on source "${E.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?a.bL(C):C);const E=[];for(const T of l)if(C[T]){const U=p?a.bL(C[T]):C[T];E.push(U)}return E}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const C of p){const E=this._layers[C];E.type!=="custom"&&(l[C]=E.serialize())}return l}hasTransitions(){var l,p,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const E in this.sourceCaches)if(this.sourceCaches[E].hasTransition())return!0;for(const E in this._layers)if(this._layers[E].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const E=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(E.length||T.length)&&this._updateWorkerLayers(E,T);for(const U in this._updatedSources){const q=this._updatedSources[U];if(q==="reload")this._reloadSource(U);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(U)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const U in this._updatedPaintProps)this._layers[U].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const E in this.sourceCaches){const T=this.sourceCaches[E];C[E]=T.used,T.used=!1}for(const E of this._order){const T=this._layers[E];T.recalculate(l,this._availableImages),!T.isHidden(l.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const E in C){const T=this.sourceCaches[E];!!C[E]!=!!T.used&&T.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:E}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var C;this._checkLoaded();const E=this.serialize();if(l=p.transformStyle?p.transformStyle(E,l):l,((C=p.validate)===null||C===void 0||C)&&Dm(this,a.z(l)))return!1;(l=a.bL(l)).layers=a.bI(l.layers);const T=a.bM(E,l),U=this._getOperationsToPerform(T);if(U.unimplemented.length>0)throw new Error(`Unimplemented: ${U.unimplemented.join(", ")}.`);if(U.operations.length===0)return!1;for(const q of U.operations)q();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],C=[];for(const E of l)switch(E.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,E.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,E.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,E.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,E.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,E.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,E.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,E.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,E.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,E.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,E.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,E.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,E.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,E.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,E.args)));break;case"setProjection":this.setProjection.apply(this,E.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,E.args)));break;case"setTransition":p.push((()=>{}));break;default:C.push(E.command)}return{operations:p,unimplemented:C}}addImage(l,p){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.z.source,`sources.${l}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const E=this.sourceCaches[l]=new Zn(l,p,this.dispatcher);E.style=this,E.setEventedParent(this,(()=>({isSourceLoaded:E.loaded(),source:E.serialize(),sourceId:l}))),E.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,C={}){this._checkLoaded();const E=l.id;if(this.getLayer(E))return void this.fire(new a.k(new Error(`Layer "${E}" already exists on this map.`)));let T;if(l.type==="custom"){if(Dm(this,a.bN(l)))return;T=a.bJ(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(E,l.source),l=a.bL(l),l=a.e(l,{source:E})),this._validate(a.z.layer,`layers.${E}`,l,{arrayIndex:-1},C))return;T=a.bJ(l,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:E}})}const U=p?this._order.indexOf(p):this._order.length;if(p&&U===-1)this.fire(new a.k(new Error(`Cannot add layer "${E}" before non-existing layer "${p}".`)));else{if(this._order.splice(U,0,E),this._layerOrderChanged=!0,this._layers[E]=T,this._removedLayers[E]&&T.source&&T.type!=="custom"){const q=this._removedLayers[E];delete this._removedLayers[E],q.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const C=this._order.indexOf(l);this._order.splice(C,1);const E=p?this._order.indexOf(p):this._order.length;p&&E===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(E,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,C){this._checkLoaded();const E=this.getLayer(l);E?E.minzoom===p&&E.maxzoom===C||(p!=null&&(E.minzoom=p),C!=null&&(E.maxzoom=C),this._updateLayer(E)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,C={}){this._checkLoaded();const E=this.getLayer(l);if(E){if(!a.bH(E.filter,p))return p==null?(E.setFilter(void 0),void this._updateLayer(E)):void(this._validate(a.z.filter,`layers.${E.id}.filter`,p,null,C)||(E.setFilter(a.bL(p)),this._updateLayer(E)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bL(this.getLayer(l).filter)}setLayoutProperty(l,p,C,E={}){this._checkLoaded();const T=this.getLayer(l);T?a.bH(T.getLayoutProperty(p),C)||(T.setLayoutProperty(p,C,E),this._updateLayer(T)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const C=this.getLayer(l);if(C)return C.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,C,E={}){this._checkLoaded();const T=this.getLayer(l);T?a.bH(T.getPaintProperty(p),C)||this._updatePaintProperty(T,p,C,E):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,p,C,E={}){l.setPaintProperty(p,C,E)&&this._updateLayer(l),a.bK(l)&&p==="raster-fade-duration"&&this.sourceCaches[l.source].setRasterFadeDuration(C),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const C=l.source,E=l.sourceLayer,T=this.sourceCaches[C];if(T===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const U=T.getSource().type;U==="geojson"&&E?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||E?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(E,l.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const C=l.source,E=this.sourceCaches[C];if(E===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const T=E.getSource().type,U=T==="vector"?l.sourceLayer:void 0;T!=="vector"||U?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(U,l.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,C=l.sourceLayer,E=this.sourceCaches[p];if(E!==void 0)return E.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),E.getFeatureState(C,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bO(this.sourceCaches,(T=>T.serialize())),p=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,E=this.stylesheet;return a.bP({version:E.version,name:E.name,metadata:E.metadata,light:E.light,sky:E.sky,center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,sprite:E.sprite,glyphs:E.glyphs,transition:E.transition,projection:E.projection,sources:l,layers:p,terrain:C},(T=>T!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=U=>this._layers[U].type==="fill-extrusion",C={},E=[];for(let U=this._order.length-1;U>=0;U--){const q=this._order[U];if(p(q)){C[q]=U;for(const Z of l){const re=Z[q];if(re)for(const ue of re)E.push(ue)}}}E.sort(((U,q)=>q.intersectionZ-U.intersectionZ));const T=[];for(let U=this._order.length-1;U>=0;U--){const q=this._order[U];if(p(q))for(let Z=E.length-1;Z>=0;Z--){const re=E[Z].feature;if(C[re.layer.id]<U)break;T.push(re),E.pop()}else for(const Z of l){const re=Z[q];if(re)for(const ue of re)T.push(ue.feature)}}return T}queryRenderedFeatures(l,p,C){p&&p.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",p.filter,null,p);const E={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const re of p.layers){const ue=this._layers[re];if(!ue)return this.fire(new a.k(new Error(`The layer '${re}' does not exist in the map's style and cannot be queried for features.`))),[];E[ue.source]=!0}}const T=[];p.availableImages=this._availableImages;const U=this._serializedAllLayers(),q=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,Z=Object.assign(Object.assign({},p),{layers:q,globalState:this._globalState});for(const re in this.sourceCaches)p.layers&&!E[re]||T.push(Ge(this.sourceCaches[re],this._layers,U,l,Z,C,this.map.terrain?(ue,Ce,ge)=>this.map.terrain.getElevation(ue,Ce,ge):void 0));return this.placement&&T.push((function(re,ue,Ce,ge,Ue,We,Je){const He={},tt=We.queryRenderedSymbols(ge),at=[];for(const yt of Object.keys(tt).map(Number))at.push(Je[yt]);at.sort(st);for(const yt of at){const lt=yt.featureIndex.lookupSymbolFeatures(tt[yt.bucketInstanceId],ue,yt.bucketIndex,yt.sourceLayerIndex,{filterSpec:Ue.filter,globalState:Ue.globalState},Ue.layers,Ue.availableImages,re);for(const vt in lt){const bt=He[vt]=He[vt]||[],ct=lt[vt];ct.sort(((Ot,Qt)=>{const Kt=yt.featureSortOrder;if(Kt){const jt=Kt.indexOf(Ot.featureIndex);return Kt.indexOf(Qt.featureIndex)-jt}return Qt.featureIndex-Ot.featureIndex}));for(const Ot of ct)bt.push(Ot)}}return(function(yt,lt,vt){for(const bt in yt)for(const ct of yt[bt])ut(ct,vt[lt[bt].source]);return yt})(He,re,Ce)})(this._layers,U,this.sourceCaches,l,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(l,p){p?.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.sourceCaches[l];return C?(function(E,T){const U=E.getRenderableIds().map((re=>E.getTileByID(re))),q=[],Z={};for(let re=0;re<U.length;re++){const ue=U[re],Ce=ue.tileID.canonical.key;Z[Ce]||(Z[Ce]=!0,ue.querySourceFeatures(q,T))}return q})(C,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const C=this.light.getLight();let E=!1;for(const U in l)if(!a.bH(l[U],C[U])){E=!0;break}if(!E)return;const T={now:B(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(T)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){this._checkLoaded();const C=this.getSky();let E=!1;if(!l&&!C)return;if(l&&!C)E=!0;else if(!l&&C)E=!0;else for(const U in l)if(!a.bH(l[U],C[U])){E=!0;break}if(!E)return;const T={now:B(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(T)}_setProjectionInternal(l){const p=(function(C,E){const T={constrain:E};if(Array.isArray(C)){const U=new yr({type:C});return{projection:U,transform:new xp(T),cameraHelper:new x1(U)}}switch(C){case"mercator":return{projection:new lu,transform:new ss(T),cameraHelper:new Ni};case"globe":{const U=new yr({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:U,transform:new xp(T),cameraHelper:new x1(U)}}case"vertical-perspective":return{projection:new lo,transform:new Of(T),cameraHelper:new sc};default:return a.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new lu,transform:new ss(T),cameraHelper:new Ni}}})(l,this.map.transformConstrain);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(l,p,C,E,T={}){return(!T||T.validate!==!1)&&Dm(this,l.call(a.z,a.e({key:p,style:this.serialize(),value:C,styleSpec:a.v},E)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),le().off(Tt,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const C=this.sourceCaches[p];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,C,E,T=!1){let U=!1,q=!1;const Z={};for(const re of this._order){const ue=this._layers[re];if(ue.type!=="symbol")continue;if(!Z[ue.source]){const ge=this.sourceCaches[ue.source];Z[ue.source]=ge.getRenderableIds(!0).map((Ue=>ge.getTileByID(Ue))).sort(((Ue,We)=>We.tileID.overscaledZ-Ue.tileID.overscaledZ||(Ue.tileID.isLessThan(We.tileID)?-1:1)))}const Ce=this.crossTileSymbolIndex.addLayer(ue,Z[ue.source],l.center.lng);U=U||Ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(B(),l.zoom))&&(this.pauseablePlacement=new ou(l,this.map.terrain,this._order,T,p,C,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(B()),q=!0),U&&this.pauseablePlacement.placement.setStale()),q||U)for(const re of this._order){const ue=this._layers[re];ue.type==="symbol"&&this.placement.updateLayerOpacities(ue,Z[ue.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(B())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const E=this.sourceCaches[p.source];return E&&E.setDependencies(p.tileID.key,p.type,p.icons),C}))}getGlyphs(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.glyphManager.getGlyphs(p.stacks),E=this.sourceCaches[p.source];return E&&E.setDependencies(p.tileID.key,p.type,[""]),C}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(a.z.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,p){return a._(this,void 0,void 0,(function*(){const C={};for(const[E,T]of Object.entries(p.dashes))C[E]=this.lineAtlas.getDash(T.dasharray,T.round);return C}))}addSprite(l,p,C={},E){this._checkLoaded();const T=[{id:l,url:p}],U=[...ne(this.stylesheet.sprite),...T];this._validate(a.z.sprite,"sprite",U,null,C)||(this.stylesheet.sprite=U,this._loadSprite(T,!0,E))}removeSprite(l){this._checkLoaded();const p=ne(this.stylesheet.sprite);if(p.find((C=>C.id===l))){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;p.splice(p.findIndex((C=>C.id===l)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(l,p={},C){this._checkLoaded(),l&&this._validate(a.z.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var Bf=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class XA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,C,E,T,U,q,Z,re){this.context=l;let ue=this.boundPaintVertexBuffers.length!==E.length;for(let Ce=0;!ue&&Ce<E.length;Ce++)this.boundPaintVertexBuffers[Ce]!==E[Ce]&&(ue=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==C||ue||this.boundIndexBuffer!==T||this.boundVertexOffset!==U||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==Z||this.boundDynamicVertexBuffer3!==re?this.freshBind(p,C,E,T,U,q,Z,re):(l.bindVertexArray.set(this.vao),q&&q.bind(),T&&T.dynamicDraw&&T.bind(),Z&&Z.bind(),re&&re.bind())}freshBind(l,p,C,E,T,U,q,Z){const re=l.numAttributes,ue=this.context,Ce=ue.gl;this.vao&&this.destroy(),this.vao=ue.createVertexArray(),ue.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=E,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=U,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=Z,p.enableAttributes(Ce,l);for(const ge of C)ge.enableAttributes(Ce,l);U&&U.enableAttributes(Ce,l),q&&q.enableAttributes(Ce,l),Z&&Z.enableAttributes(Ce,l),p.bind(),p.setVertexAttribPointers(Ce,l,T);for(const ge of C)ge.bind(),ge.setVertexAttribPointers(Ce,l,T);U&&(U.bind(),U.setVertexAttribPointers(Ce,l,T)),E&&E.bind(),q&&(q.bind(),q.setVertexAttribPointers(Ce,l,T)),Z&&(Z.bind(),Z.setVertexAttribPointers(Ce,l,T)),ue.currentNumAttributes=re}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const h0=(O,l,p,C,E)=>({u_texture:0,u_ele_delta:O,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:E?0:p?p.calculateFogBlendOpacity(C):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:E?1:0}),Pm={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ll(O){const l=[];for(let p=0;p<O.length;p++){if(O[p]===null)continue;const C=O[p].split(" ");l.push(C.pop())}return l}class Pd{constructor(l,p,C,E,T,U,q,Z,re=[]){const ue=l.gl;this.program=ue.createProgram();const Ce=Ll(p.staticAttributes),ge=C?C.getBinderAttributes():[],Ue=Ce.concat(ge),We=Ga.prelude.staticUniforms?Ll(Ga.prelude.staticUniforms):[],Je=q.staticUniforms?Ll(q.staticUniforms):[],He=p.staticUniforms?Ll(p.staticUniforms):[],tt=C?C.getBinderUniforms():[],at=We.concat(Je).concat(He).concat(tt),yt=[];for(const Kt of at)yt.indexOf(Kt)<0&&yt.push(Kt);const lt=C?C.defines():[];ci(ue)&&lt.unshift("#version 300 es"),T&&lt.push("#define OVERDRAW_INSPECTOR;"),U&&lt.push("#define TERRAIN3D;"),Z&&lt.push(Z),re&&lt.push(...re);let vt=lt.concat(Ga.prelude.fragmentSource,q.fragmentSource,p.fragmentSource).join(`
`),bt=lt.concat(Ga.prelude.vertexSource,q.vertexSource,p.vertexSource).join(`
`);ci(ue)||(vt=(function(Kt){return Kt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(vt),bt=(function(Kt){return Kt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(bt));const ct=ue.createShader(ue.FRAGMENT_SHADER);if(ue.isContextLost())return void(this.failedToCreate=!0);if(ue.shaderSource(ct,vt),ue.compileShader(ct),!ue.getShaderParameter(ct,ue.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ue.getShaderInfoLog(ct)}`);ue.attachShader(this.program,ct);const Ot=ue.createShader(ue.VERTEX_SHADER);if(ue.isContextLost())return void(this.failedToCreate=!0);if(ue.shaderSource(Ot,bt),ue.compileShader(Ot),!ue.getShaderParameter(Ot,ue.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ue.getShaderInfoLog(Ot)}`);ue.attachShader(this.program,Ot),this.attributes={};const Qt={};this.numAttributes=Ue.length;for(let Kt=0;Kt<this.numAttributes;Kt++)Ue[Kt]&&(ue.bindAttribLocation(this.program,Kt,Ue[Kt]),this.attributes[Ue[Kt]]=Kt);if(ue.linkProgram(this.program),!ue.getProgramParameter(this.program,ue.LINK_STATUS))throw new Error(`Program failed to link: ${ue.getProgramInfoLog(this.program)}`);ue.deleteShader(Ot),ue.deleteShader(ct);for(let Kt=0;Kt<yt.length;Kt++){const jt=yt[Kt];if(jt&&!Qt[jt]){const Wt=ue.getUniformLocation(this.program,jt);Wt&&(Qt[jt]=Wt)}}this.fixedUniforms=E(l,Qt),this.terrainUniforms=((Kt,jt)=>({u_depth:new a.bQ(Kt,jt.u_depth),u_terrain:new a.bQ(Kt,jt.u_terrain),u_terrain_dim:new a.bg(Kt,jt.u_terrain_dim),u_terrain_matrix:new a.bS(Kt,jt.u_terrain_matrix),u_terrain_unpack:new a.bT(Kt,jt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Kt,jt.u_terrain_exaggeration)}))(l,Qt),this.projectionUniforms=((Kt,jt)=>({u_projection_matrix:new a.bS(Kt,jt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bT(Kt,jt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bT(Kt,jt.u_projection_clipping_plane),u_projection_transition:new a.bg(Kt,jt.u_projection_transition),u_projection_fallback_matrix:new a.bS(Kt,jt.u_projection_fallback_matrix)}))(l,Qt),this.binderUniforms=C?C.getUniforms(l,Qt):[]}draw(l,p,C,E,T,U,q,Z,re,ue,Ce,ge,Ue,We,Je,He,tt,at,yt){const lt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(E),l.setColorMode(T),l.setCullFace(U),Z){l.activeTexture.set(lt.TEXTURE2),lt.bindTexture(lt.TEXTURE_2D,Z.depthTexture),l.activeTexture.set(lt.TEXTURE3),lt.bindTexture(lt.TEXTURE_2D,Z.texture);for(const bt in this.terrainUniforms)this.terrainUniforms[bt].set(Z[bt])}if(re)for(const bt in re)this.projectionUniforms[Pm[bt]].set(re[bt]);if(q)for(const bt in this.fixedUniforms)this.fixedUniforms[bt].set(q[bt]);He&&He.setUniforms(l,this.binderUniforms,We,{zoom:Je});let vt=0;switch(p){case lt.LINES:vt=2;break;case lt.TRIANGLES:vt=3;break;case lt.LINE_STRIP:vt=1}for(const bt of Ue.get()){const ct=bt.vaos||(bt.vaos={});(ct[ue]||(ct[ue]=new XA)).bind(l,this,Ce,He?He.getPaintVertexBuffers():[],ge,bt.vertexOffset,tt,at,yt),lt.drawElements(p,bt.primitiveLength*vt,lt.UNSIGNED_SHORT,bt.primitiveOffset*vt*2)}}}function If(O,l,p){const C=1/a.aC(p,1,l.transform.tileZoom),E=Math.pow(2,p.tileID.overscaledZ),T=p.tileSize*Math.pow(2,l.transform.tileZoom)/E,U=T*(p.tileID.canonical.x+p.tileID.wrap*E),q=T*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[U>>16,q>>16],u_pixel_coord_lower:[65535&U,65535&q]}}const Uh=(O,l,p,C)=>{const E=O.style.light,T=E.properties.get("position"),U=[T.x,T.y,T.z],q=a.bW();E.properties.get("anchor")==="viewport"&&a.bX(q,O.transform.bearingInRadians),a.bY(U,U,q);const Z=O.transform.transformLightDirection(U),re=E.properties.get("color");return{u_lightpos:U,u_lightpos_globe:Z,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[re.r,re.g,re.b],u_vertical_gradient:+l,u_opacity:p,u_fill_translate:C}},kf=(O,l,p,C,E,T,U)=>a.e(Uh(O,l,p,C),If(T,O,U),{u_height_factor:-Math.pow(2,E.overscaledZ)/U.tileSize/8}),Mp=(O,l,p,C)=>a.e(If(l,O,p),{u_fill_translate:C}),Ud=(O,l)=>({u_world:O,u_fill_translate:l}),M1=(O,l,p,C,E)=>a.e(Mp(O,l,p,E),{u_world:C}),Ic=(O,l,p,C,E)=>{const T=O.transform;let U,q,Z=0;if(p.paint.get("circle-pitch-alignment")==="map"){const re=a.aC(l,1,T.zoom);U=!0,q=[re,re],Z=re/(a.$*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*E}else U=!1,q=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+U,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:q,u_globe_extrude_scale:Z,u_translate:C}},ac=O=>({u_pixel_extrude_scale:[1/O.width,1/O.height]}),Um=O=>({u_viewport_size:[O.width,O.height]}),Tf=(O,l=1)=>({u_color:O,u_overlay:0,u_overlay_scale:l}),wp=(O,l,p,C)=>{const E=a.aC(O,1,l)/(a.$*Math.pow(2,O.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:a.aC(O,1,l),u_intensity:p,u_globe_extrude_scale:E}},Rf=(O,l,p,C)=>{const E=a.L();a.bZ(E,0,O.width,O.height,0,0,1);const T=O.context.gl;return{u_matrix:E,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:p,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},Df=(O,l,p)=>{const C=p.paint.get("hillshade-accent-color");let E;switch(p.paint.get("hillshade-method")){case"basic":E=4;break;case"combined":E=1;break;case"igor":E=2;break;case"multidirectional":E=3;break;default:E=0}const T=p.getIlluminationProperties();for(let U=0;U<T.directionRadians.length;U++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[U]+=O.transform.bearingInRadians);return{u_image:0,u_latrange:w1(0,l.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:C,u_method:E,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},Pf=(O,l)=>{const p=l.stride,C=a.L();return a.bZ(C,0,a.$,-a.$,0,0,1),a.M(C,C,[0,-a.$,0]),{u_matrix:C,u_image:1,u_dimension:[p,p],u_zoom:O.overscaledZ,u_unpack:l.getUnpackVector()}};function w1(O,l){const p=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new a.a1(0,C/p).toLngLat().lat,new a.a1(0,(C+1)/p).toLngLat().lat]}const Sp=(O,l,p=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:O.paint.get("color-relief-opacity")}),tA=(O,l,p,C)=>{const E=O.transform;return{u_translation:vA(O,l,p),u_ratio:C/a.aC(l,1,E.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Lh=(O,l,p,C,E)=>a.e(tA(O,l,p,C),{u_image:0,u_image_height:E}),Lm=(O,l,p,C,E)=>{const T=O.transform,U=Kh(l,T);return{u_translation:vA(O,l,p),u_texsize:l.imageAtlasTexture.size,u_ratio:C/a.aC(l,1,T.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[U,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Ld=(O,l,p,C,E)=>{const T=Kh(l,O.transform);return a.e(tA(O,l,p,C),{u_tileratio:T,u_crossfade_from:E.fromScale,u_crossfade_to:E.toScale,u_image:0,u_mix:E.t,u_lineatlas_width:O.lineAtlas.width,u_lineatlas_height:O.lineAtlas.height})},Km=(O,l,p,C,E,T)=>{const U=Kh(l,O.transform);return a.e(tA(O,l,p,C),{u_image:0,u_image_height:T,u_tileratio:U,u_crossfade_from:E.fromScale,u_crossfade_to:E.toScale,u_image_dash:1,u_mix:E.t,u_lineatlas_width:O.lineAtlas.width,u_lineatlas_height:O.lineAtlas.height})};function Kh(O,l){return 1/a.aC(O,1,l.tileZoom)}function vA(O,l,p){return a.aD(O.transform,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Fm=(O,l,p,C,E)=>{return{u_tl_parent:O,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(U=C.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(T=C.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:S1(C.paint.get("raster-hue-rotate")),u_coords_top:[E[0].x,E[0].y,E[1].x,E[1].y],u_coords_bottom:[E[3].x,E[3].y,E[2].x,E[2].y]};var T,U};function S1(O){O*=Math.PI/180;const l=Math.sin(O),p=Math.cos(O);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const d0=(O,l,p,C,E,T,U,q,Z,re,ue,Ce,ge)=>{const Ue=U.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Ue.cameraToCenterDistance,u_pitch:Ue.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Ue.width/Ue.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_label_plane_matrix:q,u_coord_matrix:Z,u_is_text:+ue,u_pitch_with_map:+C,u_is_along_line:E,u_is_variable_anchor:T,u_texsize:Ce,u_texture:0,u_translation:re,u_pitched_scale:ge}},f0=(O,l,p,C,E,T,U,q,Z,re,ue,Ce,ge,Ue)=>{const We=U.transform;return a.e(d0(O,l,p,C,E,T,U,q,Z,re,ue,Ce,Ue),{u_gamma_scale:C?Math.cos(We.pitch*Math.PI/180)*We.cameraToCenterDistance:1,u_device_pixel_ratio:U.pixelRatio,u_is_halo:1})},Fh=(O,l,p,C,E,T,U,q,Z,re,ue,Ce,ge)=>a.e(f0(O,l,p,C,E,T,U,q,Z,re,!0,ue,0,ge),{u_texsize_icon:Ce,u_texture_icon:1}),Ks=(O,l)=>({u_opacity:O,u_color:l}),JA=(O,l,p,C,E)=>a.e((function(T,U,q,Z){const re=q.imageManager.getPattern(T.from.toString()),ue=q.imageManager.getPattern(T.to.toString()),{width:Ce,height:ge}=q.imageManager.getPixelSize(),Ue=Math.pow(2,Z.tileID.overscaledZ),We=Z.tileSize*Math.pow(2,q.transform.tileZoom)/Ue,Je=We*(Z.tileID.canonical.x+Z.tileID.wrap*Ue),He=We*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:re.tl,u_pattern_br_a:re.br,u_pattern_tl_b:ue.tl,u_pattern_br_b:ue.br,u_texsize:[Ce,ge],u_mix:U.t,u_pattern_size_a:re.displaySize,u_pattern_size_b:ue.displaySize,u_scale_a:U.fromScale,u_scale_b:U.toScale,u_tile_units_to_pixels:1/a.aC(Z,1,q.transform.tileZoom),u_pixel_coord_upper:[Je>>16,He>>16],u_pixel_coord_lower:[65535&Je,65535&He]}})(p,E,l,C),{u_opacity:O}),nA=(O,l)=>{},zm={fillExtrusion:(O,l)=>({u_lightpos:new a.bU(O,l.u_lightpos),u_lightpos_globe:new a.bU(O,l.u_lightpos_globe),u_lightintensity:new a.bg(O,l.u_lightintensity),u_lightcolor:new a.bU(O,l.u_lightcolor),u_vertical_gradient:new a.bg(O,l.u_vertical_gradient),u_opacity:new a.bg(O,l.u_opacity),u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillExtrusionPattern:(O,l)=>({u_lightpos:new a.bU(O,l.u_lightpos),u_lightpos_globe:new a.bU(O,l.u_lightpos_globe),u_lightintensity:new a.bg(O,l.u_lightintensity),u_lightcolor:new a.bU(O,l.u_lightcolor),u_vertical_gradient:new a.bg(O,l.u_vertical_gradient),u_height_factor:new a.bg(O,l.u_height_factor),u_opacity:new a.bg(O,l.u_opacity),u_fill_translate:new a.bV(O,l.u_fill_translate),u_image:new a.bQ(O,l.u_image),u_texsize:new a.bV(O,l.u_texsize),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade)}),fill:(O,l)=>({u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillPattern:(O,l)=>({u_image:new a.bQ(O,l.u_image),u_texsize:new a.bV(O,l.u_texsize),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade),u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillOutline:(O,l)=>({u_world:new a.bV(O,l.u_world),u_fill_translate:new a.bV(O,l.u_fill_translate)}),fillOutlinePattern:(O,l)=>({u_world:new a.bV(O,l.u_world),u_image:new a.bQ(O,l.u_image),u_texsize:new a.bV(O,l.u_texsize),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade),u_fill_translate:new a.bV(O,l.u_fill_translate)}),circle:(O,l)=>({u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_scale_with_map:new a.bQ(O,l.u_scale_with_map),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_extrude_scale:new a.bV(O,l.u_extrude_scale),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(O,l.u_globe_extrude_scale),u_translate:new a.bV(O,l.u_translate)}),collisionBox:(O,l)=>({u_pixel_extrude_scale:new a.bV(O,l.u_pixel_extrude_scale)}),collisionCircle:(O,l)=>({u_viewport_size:new a.bV(O,l.u_viewport_size)}),debug:(O,l)=>({u_color:new a.bR(O,l.u_color),u_overlay:new a.bQ(O,l.u_overlay),u_overlay_scale:new a.bg(O,l.u_overlay_scale)}),depth:nA,clippingMask:nA,heatmap:(O,l)=>({u_extrude_scale:new a.bg(O,l.u_extrude_scale),u_intensity:new a.bg(O,l.u_intensity),u_globe_extrude_scale:new a.bg(O,l.u_globe_extrude_scale)}),heatmapTexture:(O,l)=>({u_matrix:new a.bS(O,l.u_matrix),u_world:new a.bV(O,l.u_world),u_image:new a.bQ(O,l.u_image),u_color_ramp:new a.bQ(O,l.u_color_ramp),u_opacity:new a.bg(O,l.u_opacity)}),hillshade:(O,l)=>({u_image:new a.bQ(O,l.u_image),u_latrange:new a.bV(O,l.u_latrange),u_exaggeration:new a.bg(O,l.u_exaggeration),u_altitudes:new a.b$(O,l.u_altitudes),u_azimuths:new a.b$(O,l.u_azimuths),u_accent:new a.bR(O,l.u_accent),u_method:new a.bQ(O,l.u_method),u_shadows:new a.b_(O,l.u_shadows),u_highlights:new a.b_(O,l.u_highlights)}),hillshadePrepare:(O,l)=>({u_matrix:new a.bS(O,l.u_matrix),u_image:new a.bQ(O,l.u_image),u_dimension:new a.bV(O,l.u_dimension),u_zoom:new a.bg(O,l.u_zoom),u_unpack:new a.bT(O,l.u_unpack)}),colorRelief:(O,l)=>({u_image:new a.bQ(O,l.u_image),u_unpack:new a.bT(O,l.u_unpack),u_dimension:new a.bV(O,l.u_dimension),u_elevation_stops:new a.bQ(O,l.u_elevation_stops),u_color_stops:new a.bQ(O,l.u_color_stops),u_color_ramp_size:new a.bQ(O,l.u_color_ramp_size),u_opacity:new a.bg(O,l.u_opacity)}),line:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels)}),lineGradient:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_image:new a.bQ(O,l.u_image),u_image_height:new a.bg(O,l.u_image_height)}),linePattern:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_texsize:new a.bV(O,l.u_texsize),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_image:new a.bQ(O,l.u_image),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_scale:new a.bU(O,l.u_scale),u_fade:new a.bg(O,l.u_fade)}),lineSDF:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_image:new a.bQ(O,l.u_image),u_mix:new a.bg(O,l.u_mix),u_tileratio:new a.bg(O,l.u_tileratio),u_crossfade_from:new a.bg(O,l.u_crossfade_from),u_crossfade_to:new a.bg(O,l.u_crossfade_to),u_lineatlas_width:new a.bg(O,l.u_lineatlas_width),u_lineatlas_height:new a.bg(O,l.u_lineatlas_height)}),lineGradientSDF:(O,l)=>({u_translation:new a.bV(O,l.u_translation),u_ratio:new a.bg(O,l.u_ratio),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(O,l.u_units_to_pixels),u_image:new a.bQ(O,l.u_image),u_image_height:new a.bg(O,l.u_image_height),u_tileratio:new a.bg(O,l.u_tileratio),u_crossfade_from:new a.bg(O,l.u_crossfade_from),u_crossfade_to:new a.bg(O,l.u_crossfade_to),u_image_dash:new a.bQ(O,l.u_image_dash),u_mix:new a.bg(O,l.u_mix),u_lineatlas_width:new a.bg(O,l.u_lineatlas_width),u_lineatlas_height:new a.bg(O,l.u_lineatlas_height)}),raster:(O,l)=>({u_tl_parent:new a.bV(O,l.u_tl_parent),u_scale_parent:new a.bg(O,l.u_scale_parent),u_buffer_scale:new a.bg(O,l.u_buffer_scale),u_fade_t:new a.bg(O,l.u_fade_t),u_opacity:new a.bg(O,l.u_opacity),u_image0:new a.bQ(O,l.u_image0),u_image1:new a.bQ(O,l.u_image1),u_brightness_low:new a.bg(O,l.u_brightness_low),u_brightness_high:new a.bg(O,l.u_brightness_high),u_saturation_factor:new a.bg(O,l.u_saturation_factor),u_contrast_factor:new a.bg(O,l.u_contrast_factor),u_spin_weights:new a.bU(O,l.u_spin_weights),u_coords_top:new a.bT(O,l.u_coords_top),u_coords_bottom:new a.bT(O,l.u_coords_bottom)}),symbolIcon:(O,l)=>({u_is_size_zoom_constant:new a.bQ(O,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(O,l.u_is_size_feature_constant),u_size_t:new a.bg(O,l.u_size_t),u_size:new a.bg(O,l.u_size),u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_pitch:new a.bg(O,l.u_pitch),u_rotate_symbol:new a.bQ(O,l.u_rotate_symbol),u_aspect_ratio:new a.bg(O,l.u_aspect_ratio),u_fade_change:new a.bg(O,l.u_fade_change),u_label_plane_matrix:new a.bS(O,l.u_label_plane_matrix),u_coord_matrix:new a.bS(O,l.u_coord_matrix),u_is_text:new a.bQ(O,l.u_is_text),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_is_along_line:new a.bQ(O,l.u_is_along_line),u_is_variable_anchor:new a.bQ(O,l.u_is_variable_anchor),u_texsize:new a.bV(O,l.u_texsize),u_texture:new a.bQ(O,l.u_texture),u_translation:new a.bV(O,l.u_translation),u_pitched_scale:new a.bg(O,l.u_pitched_scale)}),symbolSDF:(O,l)=>({u_is_size_zoom_constant:new a.bQ(O,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(O,l.u_is_size_feature_constant),u_size_t:new a.bg(O,l.u_size_t),u_size:new a.bg(O,l.u_size),u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_pitch:new a.bg(O,l.u_pitch),u_rotate_symbol:new a.bQ(O,l.u_rotate_symbol),u_aspect_ratio:new a.bg(O,l.u_aspect_ratio),u_fade_change:new a.bg(O,l.u_fade_change),u_label_plane_matrix:new a.bS(O,l.u_label_plane_matrix),u_coord_matrix:new a.bS(O,l.u_coord_matrix),u_is_text:new a.bQ(O,l.u_is_text),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_is_along_line:new a.bQ(O,l.u_is_along_line),u_is_variable_anchor:new a.bQ(O,l.u_is_variable_anchor),u_texsize:new a.bV(O,l.u_texsize),u_texture:new a.bQ(O,l.u_texture),u_gamma_scale:new a.bg(O,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_is_halo:new a.bQ(O,l.u_is_halo),u_translation:new a.bV(O,l.u_translation),u_pitched_scale:new a.bg(O,l.u_pitched_scale)}),symbolTextAndIcon:(O,l)=>({u_is_size_zoom_constant:new a.bQ(O,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(O,l.u_is_size_feature_constant),u_size_t:new a.bg(O,l.u_size_t),u_size:new a.bg(O,l.u_size),u_camera_to_center_distance:new a.bg(O,l.u_camera_to_center_distance),u_pitch:new a.bg(O,l.u_pitch),u_rotate_symbol:new a.bQ(O,l.u_rotate_symbol),u_aspect_ratio:new a.bg(O,l.u_aspect_ratio),u_fade_change:new a.bg(O,l.u_fade_change),u_label_plane_matrix:new a.bS(O,l.u_label_plane_matrix),u_coord_matrix:new a.bS(O,l.u_coord_matrix),u_is_text:new a.bQ(O,l.u_is_text),u_pitch_with_map:new a.bQ(O,l.u_pitch_with_map),u_is_along_line:new a.bQ(O,l.u_is_along_line),u_is_variable_anchor:new a.bQ(O,l.u_is_variable_anchor),u_texsize:new a.bV(O,l.u_texsize),u_texsize_icon:new a.bV(O,l.u_texsize_icon),u_texture:new a.bQ(O,l.u_texture),u_texture_icon:new a.bQ(O,l.u_texture_icon),u_gamma_scale:new a.bg(O,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(O,l.u_device_pixel_ratio),u_is_halo:new a.bQ(O,l.u_is_halo),u_translation:new a.bV(O,l.u_translation),u_pitched_scale:new a.bg(O,l.u_pitched_scale)}),background:(O,l)=>({u_opacity:new a.bg(O,l.u_opacity),u_color:new a.bR(O,l.u_color)}),backgroundPattern:(O,l)=>({u_opacity:new a.bg(O,l.u_opacity),u_image:new a.bQ(O,l.u_image),u_pattern_tl_a:new a.bV(O,l.u_pattern_tl_a),u_pattern_br_a:new a.bV(O,l.u_pattern_br_a),u_pattern_tl_b:new a.bV(O,l.u_pattern_tl_b),u_pattern_br_b:new a.bV(O,l.u_pattern_br_b),u_texsize:new a.bV(O,l.u_texsize),u_mix:new a.bg(O,l.u_mix),u_pattern_size_a:new a.bV(O,l.u_pattern_size_a),u_pattern_size_b:new a.bV(O,l.u_pattern_size_b),u_scale_a:new a.bg(O,l.u_scale_a),u_scale_b:new a.bg(O,l.u_scale_b),u_pixel_coord_upper:new a.bV(O,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(O,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(O,l.u_tile_units_to_pixels)}),terrain:(O,l)=>({u_texture:new a.bQ(O,l.u_texture),u_ele_delta:new a.bg(O,l.u_ele_delta),u_fog_matrix:new a.bS(O,l.u_fog_matrix),u_fog_color:new a.bR(O,l.u_fog_color),u_fog_ground_blend:new a.bg(O,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(O,l.u_fog_ground_blend_opacity),u_horizon_color:new a.bR(O,l.u_horizon_color),u_horizon_fog_blend:new a.bg(O,l.u_horizon_fog_blend),u_is_globe_mode:new a.bg(O,l.u_is_globe_mode)}),terrainDepth:(O,l)=>({u_ele_delta:new a.bg(O,l.u_ele_delta)}),terrainCoords:(O,l)=>({u_texture:new a.bQ(O,l.u_texture),u_terrain_coords_id:new a.bg(O,l.u_terrain_coords_id),u_ele_delta:new a.bg(O,l.u_ele_delta)}),projectionErrorMeasurement:(O,l)=>({u_input:new a.bg(O,l.u_input),u_output_expected:new a.bg(O,l.u_output_expected)}),atmosphere:(O,l)=>({u_sun_pos:new a.bU(O,l.u_sun_pos),u_atmosphere_blend:new a.bg(O,l.u_atmosphere_blend),u_globe_position:new a.bU(O,l.u_globe_position),u_globe_radius:new a.bg(O,l.u_globe_radius),u_inv_proj_matrix:new a.bS(O,l.u_inv_proj_matrix)}),sky:(O,l)=>({u_sky_color:new a.bR(O,l.u_sky_color),u_horizon_color:new a.bR(O,l.u_horizon_color),u_horizon:new a.bV(O,l.u_horizon),u_horizon_normal:new a.bV(O,l.u_horizon_normal),u_sky_horizon_blend:new a.bg(O,l.u_sky_horizon_blend),u_sky_blend:new a.bg(O,l.u_sky_blend)})};class jm{constructor(l,p,C){this.context=l;const E=l.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Gm{constructor(l,p,C,E){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=E,this.context=l;const T=l.gl;this.buffer=T.createBuffer(),l.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let C=0;C<this.attributes.length;C++){const E=p.attributes[this.attributes[C].name];E!==void 0&&l.enableVertexAttribArray(E)}}setVertexAttribPointers(l,p,C){for(let E=0;E<this.attributes.length;E++){const T=this.attributes[E],U=p.attributes[T.name];U!==void 0&&l.vertexAttribPointer(U,T.components,l[Nm[T.type]],!1,this.itemSize,T.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Gr{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ut extends Gr{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class sn extends Gr{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class rn extends Gr{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class pi extends Gr{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class vr extends Gr{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Hr extends Gr{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Os extends Gr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Go extends Gr{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ep extends Gr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class bA extends Gr{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Kl extends Gr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class zh extends Gr{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Wm extends Gr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class kc extends Gr{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class jh extends Gr{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class eh extends Gr{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Rr extends Gr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class p0 extends Gr{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Op extends Gr{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Fl extends Gr{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class CA extends Gr{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class hu extends Gr{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class th extends Gr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class _A extends Gr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Iu extends Gr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Nh extends Gr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class nh extends Gr{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class du extends Gr{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const C=this.gl;ci(C)?C.bindVertexArray(l):(p=C.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Qm extends Gr{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Kd extends Gr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class cr extends Gr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Fd extends Gr{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class bl extends Fd{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class xA extends Fd{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class zl extends Fd{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const m0="Framebuffer is not complete";class qm{constructor(l,p,C,E,T){this.context=l,this.width=p,this.height=C;const U=l.gl,q=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new bl(l,q),E)this.depthAttachment=T?new zl(l,q):new xA(l,q);else if(T)throw new Error("Stencil cannot be set without depth");if(U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error(m0)}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class Gh{constructor(l){var p,C;if(this.gl=l,this.clearColor=new Ut(this),this.clearDepth=new sn(this),this.clearStencil=new rn(this),this.colorMask=new pi(this),this.depthMask=new vr(this),this.stencilMask=new Hr(this),this.stencilFunc=new Os(this),this.stencilOp=new Go(this),this.stencilTest=new Ep(this),this.depthRange=new bA(this),this.depthTest=new Kl(this),this.depthFunc=new zh(this),this.blend=new Wm(this),this.blendFunc=new kc(this),this.blendColor=new jh(this),this.blendEquation=new eh(this),this.cullFace=new Rr(this),this.cullFaceSide=new p0(this),this.frontFace=new Op(this),this.program=new Fl(this),this.activeTexture=new CA(this),this.viewport=new hu(this),this.bindFramebuffer=new th(this),this.bindRenderbuffer=new _A(this),this.bindTexture=new Iu(this),this.bindVertexBuffer=new Nh(this),this.bindElementBuffer=new nh(this),this.bindVertexArray=new du(this),this.pixelStoreUnpack=new Qm(this),this.pixelStoreUnpackPremultiplyAlpha=new Kd(this),this.pixelStoreUnpackFlipY=new cr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),ci(l)){this.HALF_FLOAT=l.HALF_FLOAT;const E=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:E?.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:E?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const E=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=E?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new jm(this,l,p)}createVertexBuffer(l,p,C){return new Gm(this,l,p,C)}createRenderbuffer(l,p,C){const E=this.gl,T=E.createRenderbuffer();return this.bindRenderbuffer.set(T),E.renderbufferStorage(E.RENDERBUFFER,l,p,C),this.bindRenderbuffer.set(null),T}createFramebuffer(l,p,C,E){return new qm(this,l,p,C,E)}clear({color:l,depth:p,stencil:C}){const E=this.gl;let T=0;l&&(T|=E.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(T|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C!==void 0&&(T|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),E.clear(T)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bH(l.blendFunction,Pi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return ci(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return ci(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let ih;function Wh(O,l,p,C,E){const T=O.context,U=O.transform,q=T.gl,Z=O.useProgram("collisionBox"),re=[];let ue=0,Ce=0;for(let tt=0;tt<C.length;tt++){const at=C[tt],yt=l.getTile(at).getBucket(p);if(!yt)continue;const lt=E?yt.textCollisionBox:yt.iconCollisionBox,vt=yt.collisionCircleArray;vt.length>0&&(re.push({circleArray:vt,circleOffset:Ce,coord:at}),ue+=vt.length/4,Ce=ue),lt&&Z.draw(T,q.LINES,Qe.disabled,dn.disabled,O.colorModeForRenderPass(),ye.disabled,ac(O.transform),O.style.map.terrain&&O.style.map.terrain.getTerrainData(at),U.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,null,O.transform.zoom,null,null,lt.collisionVertexBuffer)}if(!E||!re.length)return;const ge=O.useProgram("collisionCircle"),Ue=new a.c0;Ue.resize(4*ue),Ue._trim();let We=0;for(const tt of re)for(let at=0;at<tt.circleArray.length/4;at++){const yt=4*at,lt=tt.circleArray[yt+0],vt=tt.circleArray[yt+1],bt=tt.circleArray[yt+2],ct=tt.circleArray[yt+3];Ue.emplace(We++,lt,vt,bt,ct,0),Ue.emplace(We++,lt,vt,bt,ct,1),Ue.emplace(We++,lt,vt,bt,ct,2),Ue.emplace(We++,lt,vt,bt,ct,3)}(!ih||ih.length<2*ue)&&(ih=(function(tt){const at=2*tt,yt=new a.c2;yt.resize(at),yt._trim();for(let lt=0;lt<at;lt++){const vt=6*lt;yt.uint16[vt+0]=4*lt+0,yt.uint16[vt+1]=4*lt+1,yt.uint16[vt+2]=4*lt+2,yt.uint16[vt+3]=4*lt+2,yt.uint16[vt+4]=4*lt+3,yt.uint16[vt+5]=4*lt+0}return yt})(ue));const Je=T.createIndexBuffer(ih,!0),He=T.createVertexBuffer(Ue,a.c1.members,!0);for(const tt of re){const at=Um(O.transform);ge.draw(T,q.TRIANGLES,Qe.disabled,dn.disabled,O.colorModeForRenderPass(),ye.disabled,at,O.style.map.terrain&&O.style.map.terrain.getTerrainData(tt.coord),null,p.id,He,Je,a.aM.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,O.transform.zoom,null,null,null)}He.destroy(),Je.destroy()}const Qh=a.ai(new Float32Array(16));function Bp(O,l,p,C,E,T){const{horizontalAlign:U,verticalAlign:q}=a.aH(O);return new a.P((-(U-.5)*l/E+C[0])*T,(-(q-.5)*p/E+C[1])*T)}function jl(O,l,p,C,E,T){const U=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let q=C.mult(T);p||(q=q.rotate(-E));const Z=U.add(q);return Io(Z.x,Z.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(p){const q=Ei(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(O),Z=Math.atan(q.y/q.x)+(q.x<0?Math.PI:0);return O.add(C.rotate(Z))}return O.add(C)}function qh(O,l,p,C,E,T,U,q,Z,re,ue,Ce){const ge=O.text.placedSymbolArray,Ue=O.text.dynamicLayoutVertexArray,We=O.icon.dynamicLayoutVertexArray,Je={};Ue.clear();for(let He=0;He<ge.length;He++){const tt=ge.get(He),at=tt.hidden||!tt.crossTileID||O.allowVerticalPlacement&&!tt.placedOrientation?null:C[tt.crossTileID];if(at){const yt=new a.P(tt.anchorX,tt.anchorY),lt={getElevation:Ce,width:E.width,height:E.height,pitchedLabelPlaneMatrix:T,pitchWithMap:p,transform:E,tileAnchorPoint:yt,translation:re,unwrappedTileID:ue},vt=p?Vr(yt.x,yt.y,lt):Ei(yt.x,yt.y,lt),bt=rs(E.cameraToCenterDistance,vt.signedDistanceFromCamera);let ct=a.ap(O.textSizeData,q,tt)*bt/a.aB;p&&(ct*=O.tilePixelRatio/U);const{width:Ot,height:Qt,anchor:Kt,textOffset:jt,textBoxScale:Wt}=at,kn=Bp(Kt,Ot,Qt,jt,Wt,ct),Tn=E.getPitchedTextCorrection(yt.x+re[0],yt.y+re[1],ue),ln=jl(vt.point,lt,l,kn,-E.bearingInRadians,Tn),Xn=O.allowVerticalPlacement&&tt.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Hi=0;Hi<tt.numGlyphs;Hi++)a.av(Ue,ln,Xn);Z&&tt.associatedIconIndex>=0&&(Je[tt.associatedIconIndex]={shiftedAnchor:ln,angle:Xn})}else Rl(tt.numGlyphs,Ue)}if(Z){We.clear();const He=O.icon.placedSymbolArray;for(let tt=0;tt<He.length;tt++){const at=He.get(tt);if(at.hidden)Rl(at.numGlyphs,We);else{const yt=Je[tt];if(yt)for(let lt=0;lt<at.numGlyphs;lt++)a.av(We,yt.shiftedAnchor,yt.angle);else Rl(at.numGlyphs,We)}}O.icon.dynamicLayoutVertexBuffer.updateData(We)}O.text.dynamicLayoutVertexBuffer.updateData(Ue)}function zd(O,l,p){return p.iconsInText&&l?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function ms(O,l,p,C,E,T,U,q,Z,re,ue,Ce,ge){const Ue=O.context,We=Ue.gl,Je=O.transform,He=q==="map",tt=Z==="map",at=q!=="viewport"&&p.layout.get("symbol-placement")!=="point",yt=He&&!tt&&!at,lt=!p.layout.get("symbol-sort-key").isConstant();let vt=!1;const bt=O.getDepthModeForSublayer(0,Qe.ReadOnly),ct=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ot=[],Qt=Je.getCircleRadiusCorrection();for(const Kt of C){const jt=l.getTile(Kt),Wt=jt.getBucket(p);if(!Wt)continue;const kn=E?Wt.text:Wt.icon;if(!kn||!kn.segments.get().length||!kn.hasVisibleVertices)continue;const Tn=kn.programConfigurations.get(p.id),ln=E||Wt.sdfIcons,Xn=E?Wt.textSizeData:Wt.iconSizeData,Hi=tt||Je.pitch!==0,Er=O.useProgram(zd(ln,E,Wt),Tn),zo=a.an(Xn,Je.zoom),Wo=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Kt);let dr,Jo,Da,Is,Pa=[0,0],js=null;if(E)Jo=jt.glyphAtlasTexture,Da=We.LINEAR,dr=jt.glyphAtlasTexture.size,Wt.iconsInText&&(Pa=jt.imageAtlasTexture.size,js=jt.imageAtlasTexture,Is=Hi||O.options.rotating||O.options.zooming||Xn.kind==="composite"||Xn.kind==="camera"?We.LINEAR:We.NEAREST);else{const ys=p.layout.get("icon-size").constantOr(0)!==1||Wt.iconsNeedLinear;Jo=jt.imageAtlasTexture,Da=ln||O.options.rotating||O.options.zooming||ys||Hi?We.LINEAR:We.NEAREST,dr=jt.imageAtlasTexture.size}const ia=a.aC(jt,1,O.transform.zoom),ga=er(He,O.transform,ia),DA=a.L();a.aq(DA,ga);const ra=nn(tt,He,O.transform,ia),cl=a.aD(Je,jt,T,U),dh=Je.getProjectionData({overscaledTileID:Kt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),rd=ct&&Wt.hasTextData(),od=p.layout.get("icon-text-fit")!=="none"&&rd&&Wt.hasIconData();if(at){const ys=O.style.map.terrain?(Lu,Ns)=>O.style.map.terrain.getElevation(Kt,Lu,Ns):null,oa=p.layout.get("text-rotation-alignment")==="map";hn(Wt,O,E,ga,DA,tt,re,oa,Kt.toUnwrapped(),Je.width,Je.height,cl,ys)}const yu=E&&ct||od,Ml=at||yu?Qh:tt?ga:O.transform.clipSpaceToPixelsMatrix,Al=ln&&p.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pc;Pc=ln?Wt.iconsInText?Fh(Xn.kind,zo,yt,tt,at,yu,O,Ml,ra,cl,dr,Pa,Qt):f0(Xn.kind,zo,yt,tt,at,yu,O,Ml,ra,cl,E,dr,0,Qt):d0(Xn.kind,zo,yt,tt,at,yu,O,Ml,ra,cl,E,dr,Qt);const sd={program:Er,buffers:kn,uniformValues:Pc,projectionData:dh,atlasTexture:Jo,atlasTextureIcon:js,atlasInterpolation:Da,atlasInterpolationIcon:Is,isSDF:ln,hasHalo:Al};if(lt&&Wt.canOverlap){vt=!0;const ys=kn.segments.get();for(const oa of ys)Ot.push({segments:new a.aM([oa]),sortKey:oa.sortKey,state:sd,terrainData:Wo})}else Ot.push({segments:kn.segments,sortKey:0,state:sd,terrainData:Wo})}vt&&Ot.sort(((Kt,jt)=>Kt.sortKey-jt.sortKey));for(const Kt of Ot){const jt=Kt.state;if(Ue.activeTexture.set(We.TEXTURE0),jt.atlasTexture.bind(jt.atlasInterpolation,We.CLAMP_TO_EDGE),jt.atlasTextureIcon&&(Ue.activeTexture.set(We.TEXTURE1),jt.atlasTextureIcon&&jt.atlasTextureIcon.bind(jt.atlasInterpolationIcon,We.CLAMP_TO_EDGE)),jt.isSDF){const Wt=jt.uniformValues;jt.hasHalo&&(Wt.u_is_halo=1,Fs(jt.buffers,Kt.segments,p,O,jt.program,bt,ue,Ce,Wt,jt.projectionData,Kt.terrainData)),Wt.u_is_halo=0}Fs(jt.buffers,Kt.segments,p,O,jt.program,bt,ue,Ce,jt.uniformValues,jt.projectionData,Kt.terrainData)}}function Fs(O,l,p,C,E,T,U,q,Z,re,ue){const Ce=C.context;E.draw(Ce,Ce.gl.TRIANGLES,T,U,q,ye.backCCW,Z,ue,re,p.id,O.layoutVertexBuffer,O.indexBuffer,l,p.paint,C.transform.zoom,O.programConfigurations.get(p.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function fu(O,l,p,C,E){const T=O.context,U=T.gl,q=dn.disabled,Z=new Pi([U.ONE,U.ONE],a.bf.transparent,[!0,!0,!0,!0]),re=l.getBucket(p);if(!re)return;const ue=C.key;let Ce=p.heatmapFbos.get(ue);Ce||(Ce=Tc(T,l.tileSize,l.tileSize),p.heatmapFbos.set(ue,Ce)),T.bindFramebuffer.set(Ce.framebuffer),T.viewport.set([0,0,l.tileSize,l.tileSize]),T.clear({color:a.bf.transparent});const ge=re.programConfigurations.get(p.id),Ue=O.useProgram("heatmap",ge,!E),We=O.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=O.style.map.terrain.getTerrainData(C);Ue.draw(T,U.TRIANGLES,Qe.disabled,q,Z,ye.disabled,wp(l,O.transform.zoom,p.paint.get("heatmap-intensity"),1),Je,We,p.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,p.paint,O.transform.zoom,ge)}function Cl(O,l,p,C,E){const T=O.context,U=T.gl,q=O.transform;T.setColorMode(O.colorModeForRenderPass());const Z=iA(T,l),re=p.key,ue=l.heatmapFbos.get(re);if(!ue)return;T.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,ue.colorAttachment.get()),T.activeTexture.set(U.TEXTURE1),Z.bind(U.LINEAR,U.CLAMP_TO_EDGE);const Ce=q.getProjectionData({overscaledTileID:p,applyTerrainMatrix:E,applyGlobeMatrix:!C});O.useProgram("heatmapTexture").draw(T,U.TRIANGLES,Qe.disabled,dn.disabled,O.colorModeForRenderPass(),ye.disabled,Rf(O,l,0,1),null,Ce,l.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments,l.paint,q.zoom),ue.destroy(),l.heatmapFbos.delete(re)}function Tc(O,l,p){var C,E;const T=O.gl,U=T.createTexture();T.bindTexture(T.TEXTURE_2D,U),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const q=(C=O.HALF_FLOAT)!==null&&C!==void 0?C:T.UNSIGNED_BYTE,Z=(E=O.RGBA16F)!==null&&E!==void 0?E:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,Z,l,p,0,T.RGBA,q,null);const re=O.createFramebuffer(l,p,!1,!1);return re.colorAttachment.set(U),re}function iA(O,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(O,l.colorRamp,O.gl.RGBA)),l.colorRampTexture}function _l(O,l,p,C,E,T,U,q){let Z=256;if(E.stepInterpolant){const re=l.getSource().maxzoom,ue=U.canonical.z===re?Math.ceil(1<<O.transform.maxZoom-U.canonical.z):1;Z=a.ae(a.c4(T.maxLineLength/a.$*1024*ue),256,p.maxTextureSize)}return q.gradient=a.c5({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Z,image:q.gradient||void 0,clips:T.lineClipsArray}),q.texture?q.texture.update(q.gradient):q.texture=new a.T(p,q.gradient,C.RGBA),q.version=E.gradientVersion,q.texture}function lc(O,l,p,C,E){O.activeTexture.set(l.TEXTURE0),p.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),C.updatePaintBuffers(E)}function Ip(O,l,p,C,E,T){(E||O.lineAtlas.dirty)&&(l.activeTexture.set(p.TEXTURE0),O.lineAtlas.bind(l)),C.updatePaintBuffers(T)}function rA(O,l,p,C,E,T,U){const q=T.gradients[E.id];let Z=q.texture;E.gradientVersion!==q.version&&(Z=_l(O,l,p,C,E,T,U,q)),p.activeTexture.set(C.TEXTURE0),Z.bind(E.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE)}function rh(O,l,p,C,E,T,U,q,Z){const re=T.gradients[E.id];let ue=re.texture;E.gradientVersion!==re.version&&(ue=_l(O,l,p,C,E,T,U,re)),p.activeTexture.set(C.TEXTURE0),ue.bind(E.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE),p.activeTexture.set(C.TEXTURE1),O.lineAtlas.bind(p),q.updatePaintBuffers(Z)}function Yh(O,l,p,C,E){if(!p||!C||!C.imageAtlas)return;const T=C.imageAtlas.patternPositions;let U=T[p.to.toString()],q=T[p.from.toString()];if(!U&&q&&(U=q),!q&&U&&(q=U),!U||!q){const Z=E.getPaintProperty(l);U=T[Z],q=T[Z]}U&&q&&O.setConstantPatternPositions(U,q)}function na(O,l,p,C,E,T,U,q){const Z=O.context.gl,re="fill-pattern",ue=p.paint.get(re),Ce=ue&&ue.constantOr(1),ge=p.getCrossfadeParameters();let Ue,We,Je,He,tt;const at=O.transform,yt=p.paint.get("fill-translate"),lt=p.paint.get("fill-translate-anchor");U?(We=Ce&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=Z.LINES):(We=Ce?"fillPattern":"fill",Ue=Z.TRIANGLES);const vt=ue.constantOr(null);for(const bt of C){const ct=l.getTile(bt);if(Ce&&!ct.patternsLoaded())continue;const Ot=ct.getBucket(p);if(!Ot)continue;const Qt=Ot.programConfigurations.get(p.id),Kt=O.useProgram(We,Qt),jt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt);Ce&&(O.context.activeTexture.set(Z.TEXTURE0),ct.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Qt.updatePaintBuffers(ge)),Yh(Qt,re,vt,ct,p);const Wt=at.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),kn=a.aD(at,ct,yt,lt);if(U){He=Ot.indexBuffer2,tt=Ot.segments2;const ln=[Z.drawingBufferWidth,Z.drawingBufferHeight];Je=We==="fillOutlinePattern"&&Ce?M1(O,ge,ct,ln,kn):Ud(ln,kn)}else He=Ot.indexBuffer,tt=Ot.segments,Je=Ce?Mp(O,ge,ct,kn):{u_fill_translate:kn};const Tn=O.stencilModeForClipping(bt);Kt.draw(O.context,Ue,E,Tn,T,ye.backCCW,Je,jt,Wt,p.id,Ot.layoutVertexBuffer,He,tt,p.paint,O.transform.zoom,Qt)}}function uo(O,l,p,C,E,T,U,q){const Z=O.context,re=Z.gl,ue="fill-extrusion-pattern",Ce=p.paint.get(ue),ge=Ce.constantOr(1),Ue=p.getCrossfadeParameters(),We=p.paint.get("fill-extrusion-opacity"),Je=Ce.constantOr(null),He=O.transform;for(const tt of C){const at=l.getTile(tt),yt=at.getBucket(p);if(!yt)continue;const lt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(tt),vt=yt.programConfigurations.get(p.id),bt=O.useProgram(ge?"fillExtrusionPattern":"fillExtrusion",vt);ge&&(O.context.activeTexture.set(re.TEXTURE0),at.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),vt.updatePaintBuffers(Ue));const ct=He.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!q,applyTerrainMatrix:!0});Yh(vt,ue,Je,at,p);const Ot=a.aD(He,at,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Qt=p.paint.get("fill-extrusion-vertical-gradient"),Kt=ge?kf(O,Qt,We,Ot,tt,Ue,at):Uh(O,Qt,We,Ot);bt.draw(Z,Z.gl.TRIANGLES,E,T,U,ye.backCCW,Kt,lt,ct,p.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,p.paint,O.transform.zoom,vt,O.style.map.terrain&&yt.centroidVertexBuffer)}}function Wr(O,l,p,C,E,T,U,q,Z){var re;const ue=O.style.projection,Ce=O.context,ge=O.transform,Ue=Ce.gl,We=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Je=O.useProgram("hillshade",null,!1,We),He=!O.options.moving;for(const tt of C){const at=l.getTile(tt),yt=at.fbo;if(!yt)continue;const lt=ue.getMeshFromTileID(Ce,tt.canonical,q,!0,"raster"),vt=(re=O.style.map.terrain)===null||re===void 0?void 0:re.getTerrainData(tt);Ce.activeTexture.set(Ue.TEXTURE0),Ue.bindTexture(Ue.TEXTURE_2D,yt.colorAttachment.get());const bt=ge.getProjectionData({overscaledTileID:tt,aligned:He,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});Je.draw(Ce,Ue.TRIANGLES,T,E[tt.overscaledZ],U,ye.backCCW,Df(O,at,p),vt,bt,p.id,lt.vertexBuffer,lt.indexBuffer,lt.segments)}}function MA(O,l,p,C,E,T,U,q,Z){var re;const ue=O.style.projection,Ce=O.context,ge=O.transform,Ue=Ce.gl,We=O.useProgram("colorRelief"),Je=!O.options.moving;let He=!0,tt=0;for(const at of C){const yt=l.getTile(at),lt=yt.dem;if(He){const Kt=Ue.getParameter(Ue.MAX_TEXTURE_SIZE),{elevationTexture:jt,colorTexture:Wt}=p.getColorRampTextures(Ce,Kt,lt.getUnpackVector());Ce.activeTexture.set(Ue.TEXTURE1),jt.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE),Ce.activeTexture.set(Ue.TEXTURE4),Wt.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),He=!1,tt=jt.size[0]}if(!lt||!lt.data)continue;const vt=lt.stride,bt=lt.getPixels();if(Ce.activeTexture.set(Ue.TEXTURE0),Ce.pixelStoreUnpackPremultiplyAlpha.set(!1),yt.demTexture=yt.demTexture||O.getTileTexture(vt),yt.demTexture){const Kt=yt.demTexture;Kt.update(bt,{premultiply:!1}),Kt.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}else yt.demTexture=new a.T(Ce,bt,Ue.RGBA,{premultiply:!1}),yt.demTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE);const ct=ue.getMeshFromTileID(Ce,at.canonical,q,!0,"raster"),Ot=(re=O.style.map.terrain)===null||re===void 0?void 0:re.getTerrainData(at),Qt=ge.getProjectionData({overscaledTileID:at,aligned:Je,applyGlobeMatrix:!Z,applyTerrainMatrix:!0});We.draw(Ce,Ue.TRIANGLES,T,E[at.overscaledZ],U,ye.backCCW,Sp(p,yt.dem,tt),Ot,Qt,p.id,ct.vertexBuffer,ct.indexBuffer,ct.segments)}}const pu=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function as(O,l,p,C,E,T,U,q,Z=!1,re=!1){const ue=C[C.length-1].overscaledZ,Ce=O.context,ge=Ce.gl,Ue=O.useProgram("raster"),We=O.transform,Je=O.style.projection,He=O.colorModeForRenderPass(),tt=!O.options.moving,at=p.paint.get("raster-opacity"),yt=p.paint.get("raster-resampling"),lt=p.paint.get("raster-fade-duration"),vt=!!O.style.map.terrain;for(const bt of C){const ct=O.getDepthModeForSublayer(bt.overscaledZ-ue,at===1?Qe.ReadWrite:Qe.ReadOnly,ge.LESS),Ot=l.getTile(bt),Qt=yt==="nearest"?ge.NEAREST:ge.LINEAR;Ce.activeTexture.set(ge.TEXTURE0),Ot.texture.bind(Qt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),Ce.activeTexture.set(ge.TEXTURE1);const{parentTile:Kt,parentScaleBy:jt,parentTopLeft:Wt,fadeValues:kn}=ku(Ot,l,lt,vt);Ot.fadeOpacity=kn.tileOpacity,Kt?(Kt.fadeOpacity=kn.parentTileOpacity,Kt.texture.bind(Qt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST)):Ot.texture.bind(Qt,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),Ot.texture.useMipmap&&Ce.extTextureFilterAnisotropic&&O.transform.pitch>20&&ge.texParameterf(ge.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax);const Tn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),ln=We.getProjectionData({overscaledTileID:bt,aligned:tt,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),Xn=Fm(Wt,jt,kn.fadeMix,p,q),Hi=Je.getMeshFromTileID(Ce,bt.canonical,T,U,"raster");Ue.draw(Ce,ge.TRIANGLES,ct,E?E[bt.overscaledZ]:dn.disabled,He,Z?ye.frontCCW:ye.backCCW,Xn,Tn,ln,p.id,Hi.vertexBuffer,Hi.indexBuffer,Hi.segments)}}function ku(O,l,p,C){const E={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||C)return E;if(O.fadingParentID){const T=l._getLoadedTile(O.fadingParentID);if(!T)return E;const U=Math.pow(2,T.tileID.overscaledZ-O.tileID.overscaledZ),q=[O.tileID.canonical.x*U%1,O.tileID.canonical.y*U%1],Z=(function(re,ue,Ce){const ge=B(),Ue=(ge-ue.timeAdded)/Ce,We=re.fadingDirection===se.Incoming,Je=a.ae((ge-re.timeAdded)/Ce,0,1),He=a.ae(1-Ue,0,1),tt=We?Je:He;return{tileOpacity:tt,parentTileOpacity:We?He:Je,fadeMix:{opacity:1,mix:1-tt}}})(O,T,p);return{parentTile:T,parentScaleBy:U,parentTopLeft:q,fadeValues:Z}}if(O.selfFading){const T=(function(U,q){const Z=(B()-U.timeAdded)/q,re=a.ae(Z,0,1);return{tileOpacity:re,fadeMix:{opacity:re,mix:0}}})(O,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return E}const Nl=new a.bf(1,0,0,1),$h=new a.bf(0,1,0,1),wA=new a.bf(0,0,1,1),$e=new a.bf(1,0,1,1),uc=new a.bf(0,1,1,1);function oA(O,l,p,C){hr(O,0,l+p/2,O.transform.width,p,C)}function Qa(O,l,p,C){hr(O,l-p/2,0,p,O.transform.height,C)}function hr(O,l,p,C,E,T){const U=O.context,q=U.gl;q.enable(q.SCISSOR_TEST),q.scissor(l*O.pixelRatio,p*O.pixelRatio,C*O.pixelRatio,E*O.pixelRatio),U.clear({color:T}),q.disable(q.SCISSOR_TEST)}function SA(O,l,p){const C=O.context,E=C.gl,T=O.useProgram("debug"),U=Qe.disabled,q=dn.disabled,Z=O.colorModeForRenderPass(),re="$debug",ue=O.style.map.terrain&&O.style.map.terrain.getTerrainData(p);C.activeTexture.set(E.TEXTURE0);const Ce=l.getTileByID(p.key).latestRawTileData,ge=Math.floor((Ce&&Ce.byteLength||0)/1024),Ue=l.getTile(p).tileSize,We=512/Math.min(Ue,512)*(p.overscaledZ/O.transform.zoom)*.5;let Je=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Je+=` => ${p.overscaledZ}`),(function(tt,at){tt.initDebugOverlayCanvas();const yt=tt.debugOverlayCanvas,lt=tt.context.gl,vt=tt.debugOverlayCanvas.getContext("2d");vt.clearRect(0,0,yt.width,yt.height),vt.shadowColor="white",vt.shadowBlur=2,vt.lineWidth=1.5,vt.strokeStyle="white",vt.textBaseline="top",vt.font="bold 36px Open Sans, sans-serif",vt.fillText(at,5,5),vt.strokeText(at,5,5),tt.debugOverlayTexture.update(yt),tt.debugOverlayTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)})(O,`${Je} ${ge}kB`);const He=O.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(C,E.TRIANGLES,U,q,Pi.alphaBlended,ye.disabled,Tf(a.bf.transparent,We),null,He,re,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),T.draw(C,E.LINE_STRIP,U,q,Z,ye.disabled,Tf(a.bf.red),ue,He,re,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function EA(O,l,p,C){const{isRenderingGlobe:E}=C,T=O.context,U=T.gl,q=O.transform,Z=O.colorModeForRenderPass(),re=O.getDepthModeFor3D(),ue=O.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,O.width,O.height]);for(const Ce of p){const ge=l.getTerrainMesh(Ce.tileID),Ue=O.renderToTexture.getTexture(Ce),We=l.getTerrainData(Ce.tileID);T.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Ue.texture);const Je=l.getMeshFrameDelta(q.zoom),He=q.calculateFogMatrix(Ce.tileID.toUnwrapped()),tt=h0(Je,He,O.style.sky,q.pitch,E),at=q.getProjectionData({overscaledTileID:Ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ue.draw(T,U.TRIANGLES,re,dn.disabled,Z,ye.backCCW,tt,We,at,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}function sA(O,l){if(!l.mesh){const p=new a.aL;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const C=new a.aN;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new ol(O.createVertexBuffer(p,Gi.members),O.createIndexBuffer(C),a.aM.simpleSegment(0,0,p.length,C.length))}return l.mesh}class OA{constructor(l,p){this.context=new Gh(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ai(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Zn.maxUnderzooming+Zn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new au}resize(l,p,C){if(this.width=Math.floor(l*C),this.height=Math.floor(p*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style._order)this.style._layers[E].resize()}setup(){const l=this.context,p=new a.aL;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.tileExtentBuffer=l.createVertexBuffer(p,Gi.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const C=new a.aL;C.emplaceBack(0,0),C.emplaceBack(a.$,0),C.emplaceBack(0,a.$),C.emplaceBack(a.$,a.$),this.debugBuffer=l.createVertexBuffer(C,Gi.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const E=new a.c7;E.emplaceBack(0,0,0,0),E.emplaceBack(a.$,0,a.$,0),E.emplaceBack(0,a.$,0,a.$),E.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=l.createVertexBuffer(E,Bf.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const T=new a.aL;T.emplaceBack(0,0),T.emplaceBack(a.$,0),T.emplaceBack(0,a.$),T.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(T,Gi.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const U=new a.aL;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(U,Gi.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const q=new a.c8;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(q);const Z=new a.aN;Z.emplaceBack(1,0,2),Z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(Z);const re=this.context.gl;this.stencilClearMode=new dn({func:re.ALWAYS,mask:0},0,255,re.ZERO,re.ZERO,re.ZERO),this.tileExtentMesh=new ol(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=a.L();a.bZ(C,0,this.width,this.height,0,0,1),a.N(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const E={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,p.TRIANGLES,Qe.disabled,this.stencilClearMode,Pi.disabled,ye.disabled,null,null,E,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source,this.nextStencilID+p.length>256&&this.clearStencil();const E=this.context;E.setColorMode(Pi.disabled),E.setDepthMode(Qe.disabled);const T={};for(const U of p)T[U.key]=this.nextStencilID++;this._renderTileMasks(T,p,C,!0),this._renderTileMasks(T,p,C,!1),this._tileClippingMaskIDs=T}_renderTileMasks(l,p,C,E){const T=this.context,U=T.gl,q=this.style.projection,Z=this.transform,re=this.useProgram("clippingMask");for(const ue of p){const Ce=l[ue.key],ge=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ue),Ue=q.getMeshFromTileID(this.context,ue.canonical,E,!0,"stencil"),We=Z.getProjectionData({overscaledTileID:ue,applyGlobeMatrix:!C,applyTerrainMatrix:!0});re.draw(T,U.TRIANGLES,Qe.disabled,new dn({func:U.ALWAYS,mask:0},Ce,255,U.KEEP,U.KEEP,U.REPLACE),Pi.disabled,C?ye.disabled:ye.backCCW,null,ge,We,"$clipping",Ue.vertexBuffer,Ue.indexBuffer,Ue.segments)}}_renderTilesDepthBuffer(){const l=this.context,p=l.gl,C=this.style.projection,E=this.transform,T=this.useProgram("depth"),U=this.getDepthModeFor3D(),q=In(E,{tileSize:E.tileSize});for(const Z of q){const re=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Z),ue=C.getMeshFromTileID(this.context,Z.canonical,!0,!0,"raster"),Ce=E.getProjectionData({overscaledTileID:Z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(l,p.TRIANGLES,U,dn.disabled,Pi.disabled,ye.backCCW,null,re,Ce,"$clipping",ue.vertexBuffer,ue.indexBuffer,ue.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new dn({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new dn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const p=this.context.gl,C=l.sort(((U,q)=>q.overscaledZ-U.overscaledZ)),E=C[C.length-1].overscaledZ,T=C[0].overscaledZ-E+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const U={};for(let q=0;q<T;q++)U[q+E]=new dn({func:p.GEQUAL,mask:255},q+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=T,[U,C]}return[{[E]:dn.disabled},C]}stencilConfigForOverlapTwoPass(l){const p=this.context.gl,C=l.sort(((U,q)=>q.overscaledZ-U.overscaledZ)),E=C[C.length-1].overscaledZ,T=C[0].overscaledZ-E+1;if(this.clearStencil(),T>1){const U={},q={};for(let Z=0;Z<T;Z++)U[Z+E]=new dn({func:p.GREATER,mask:255},T+1+Z,255,p.KEEP,p.KEEP,p.REPLACE),q[Z+E]=new dn({func:p.GREATER,mask:255},1+Z,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*T+1,[U,q,C]}return this.nextStencilID=3,[{[E]:new dn({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[E]:new dn({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Pi([l.CONSTANT_COLOR,l.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pi.unblended:Pi.alphaBlended}getDepthModeForSublayer(l,p,C){if(!this.opaquePassEnabledForLayer())return Qe.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Qe(C||this.context.gl.LEQUAL,p,[E,E])}getDepthModeFor3D(){return new Qe(this.context.gl.LEQUAL,Qe.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){var C,E;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(B()),this.imageManager.beginFrame();const T=this.style._order,U=this.style.sourceCaches,q={},Z={},re={},ue={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const ge in U){const Ue=U[ge];Ue.used&&Ue.prepare(this.context),q[ge]=Ue.getVisibleCoordinates(!1),Z[ge]=q[ge].slice().reverse(),re[ge]=Ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ge=0;ge<T.length;ge++)if(this.style._layers[T[ge]].is3D()){this.opaquePassCutoff=ge;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ge of T){const Ue=this.style._layers[ge];if(!Ue.hasOffscreenPass()||Ue.isHidden(this.transform.zoom))continue;const We=Z[Ue.source];(Ue.type==="custom"||We.length)&&this.renderLayer(this,U[Ue.source],Ue,We,ue)}if((E=this.style.projection)===null||E===void 0||E.updateGPUdependent({context:this.context,useProgram:ge=>this.useProgram(ge)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ge,Ue){const We=ge.context,Je=We.gl,He=((bt,ct,Ot)=>{const Qt=Math.cos(ct.rollInRadians),Kt=Math.sin(ct.rollInRadians),jt=y(ct),Wt=ct.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:bt.properties.get("sky-color"),u_horizon_color:bt.properties.get("horizon-color"),u_horizon:[(ct.width/2-jt*Kt)*Ot,(ct.height/2+jt*Qt)*Ot],u_horizon_normal:[-Kt,Qt],u_sky_horizon_blend:bt.properties.get("sky-horizon-blend")*ct.height/2*Ot,u_sky_blend:Wt}})(Ue,ge.style.map.transform,ge.pixelRatio),tt=new Qe(Je.LEQUAL,Qe.ReadWrite,[0,1]),at=dn.disabled,yt=ge.colorModeForRenderPass(),lt=ge.useProgram("sky"),vt=sA(We,Ue);lt.draw(We,Je.TRIANGLES,tt,at,yt,ye.disabled,He,null,void 0,"sky",vt.vertexBuffer,vt.indexBuffer,vt.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const ge=this.style._layers[T[this.currentLayer]],Ue=U[ge.source],We=q[ge.source];this._renderTileClippingMasks(ge,We,!1),this.renderLayer(this,Ue,ge,We,ue)}this.renderPass="translucent";let Ce=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const ge=this.style._layers[T[this.currentLayer]],Ue=U[ge.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ge,ue))continue;this.opaquePassEnabledForLayer()||Ce||(Ce=!0,ue.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const We=(ge.type==="symbol"?re:Z)[ge.source];this._renderTileClippingMasks(ge,q[ge.source],!!this.renderToTexture),this.renderLayer(this,Ue,ge,We,ue)}if(ue.isRenderingGlobe&&(function(ge,Ue,We){const Je=ge.context,He=Je.gl,tt=ge.useProgram("atmosphere"),at=new Qe(He.LEQUAL,Qe.ReadOnly,[0,1]),yt=ge.transform,lt=(function(Wt,kn){const Tn=Wt.properties.get("position"),ln=[-Tn.x,-Tn.y,-Tn.z],Xn=a.ai(new Float64Array(16));return Wt.properties.get("anchor")==="map"&&(a.b6(Xn,Xn,kn.rollInRadians),a.b7(Xn,Xn,-kn.pitchInRadians),a.b6(Xn,Xn,kn.bearingInRadians),a.b7(Xn,Xn,kn.center.lat*Math.PI/180),a.bz(Xn,Xn,-kn.center.lng*Math.PI/180)),a.c6(ln,ln,Xn),ln})(We,ge.transform),vt=yt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),bt=Ue.properties.get("atmosphere-blend")*vt.projectionTransition;if(bt===0)return;const ct=Ss(yt.worldSize,yt.center.lat),Ot=yt.inverseProjectionMatrix,Qt=new Float64Array(4);Qt[3]=1,a.aw(Qt,Qt,yt.modelViewProjectionMatrix),Qt[0]/=Qt[3],Qt[1]/=Qt[3],Qt[2]/=Qt[3],Qt[3]=1,a.aw(Qt,Qt,Ot),Qt[0]/=Qt[3],Qt[1]/=Qt[3],Qt[2]/=Qt[3],Qt[3]=1;const Kt=((Wt,kn,Tn,ln,Xn)=>({u_sun_pos:Wt,u_atmosphere_blend:kn,u_globe_position:Tn,u_globe_radius:ln,u_inv_proj_matrix:Xn}))(lt,bt,[Qt[0],Qt[1],Qt[2]],ct,Ot),jt=sA(Je,Ue);tt.draw(Je,He.TRIANGLES,at,dn.disabled,Pi.alphaBlended,ye.disabled,Kt,null,null,"atmosphere",jt.vertexBuffer,jt.indexBuffer,jt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ge=(function(Ue,We){let Je=null;const He=Object.values(Ue._layers).flatMap((lt=>lt.source&&!lt.isHidden(We)?[Ue.sourceCaches[lt.source]]:[])),tt=He.filter((lt=>lt.getSource().type==="vector")),at=He.filter((lt=>lt.getSource().type!=="vector")),yt=lt=>{(!Je||Je.getSource().maxzoom<lt.getSource().maxzoom)&&(Je=lt)};return tt.forEach((lt=>yt(lt))),Je||at.forEach((lt=>yt(lt))),Je})(this.style,this.transform.zoom);ge&&(function(Ue,We,Je){for(let He=0;He<Je.length;He++)SA(Ue,We,Je[He])})(this,ge,ge.getVisibleCoordinates())}this.options.showPadding&&(function(ge){const Ue=ge.transform.padding;oA(ge,ge.transform.height-(Ue.top||0),3,Nl),oA(ge,Ue.bottom||0,3,$h),Qa(ge,Ue.left||0,3,wA),Qa(ge,ge.transform.width-(Ue.right||0),3,$e);const We=ge.transform.centerPoint;(function(Je,He,tt,at){hr(Je,He-1,tt-10,2,20,at),hr(Je,He-10,tt-1,20,2,at)})(ge,We.x,ge.transform.height-We.y,uc)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let E=this.terrainFacilitator.dirty;E||(E=l?!a.c9(p,C):!a.ca(p,C)),E||(E=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),E&&(a.cb(p,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,U){const q=T.context,Z=q.gl,re=T.transform,ue=Pi.unblended,Ce=new Qe(Z.LEQUAL,Qe.ReadWrite,[0,1]),ge=U.sourceCache.getRenderableTiles(),Ue=T.useProgram("terrainDepth");q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),q.clear({color:a.bf.transparent,depth:1});for(const We of ge){const Je=U.getTerrainMesh(We.tileID),He=U.getTerrainData(We.tileID),tt=re.getProjectionData({overscaledTileID:We.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),at={u_ele_delta:U.getMeshFrameDelta(re.zoom)};Ue.draw(q,Z.TRIANGLES,Ce,dn.disabled,ue,ye.backCCW,at,He,tt,"terrain",Je.vertexBuffer,Je.indexBuffer,Je.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,U){const q=T.context,Z=q.gl,re=T.transform,ue=Pi.unblended,Ce=new Qe(Z.LEQUAL,Qe.ReadWrite,[0,1]),ge=U.getCoordsTexture(),Ue=U.sourceCache.getRenderableTiles(),We=T.useProgram("terrainCoords");q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),q.clear({color:a.bf.transparent,depth:1}),U.coordsIndex=[];for(const Je of Ue){const He=U.getTerrainMesh(Je.tileID),tt=U.getTerrainData(Je.tileID);q.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ge.texture);const at={u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(re.zoom)},yt=re.getProjectionData({overscaledTileID:Je.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});We.draw(q,Z.TRIANGLES,Ce,dn.disabled,ue,ye.backCCW,at,tt,yt,"terrain",He.vertexBuffer,He.indexBuffer,He.segments),U.coordsIndex.push(Je.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(l,p,C,E,T){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(E||[]).length)&&(this.id=C.id,a.cc(C)?(function(U,q,Z,re,ue,Ce){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=Ce,Ue=dn.disabled,We=U.colorModeForRenderPass();(Z._unevaluatedLayout.hasValue("text-variable-anchor")||Z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Je,He,tt,at,yt,lt,vt,bt,ct){const Ot=He.transform,Qt=He.style.map.terrain,Kt=yt==="map",jt=lt==="map";for(const Wt of Je){const kn=at.getTile(Wt),Tn=kn.getBucket(tt);if(!Tn||!Tn.text||!Tn.text.segments.get().length)continue;const ln=a.an(Tn.textSizeData,Ot.zoom),Xn=a.aC(kn,1,He.transform.zoom),Hi=er(Kt,He.transform,Xn),Er=tt.layout.get("icon-text-fit")!=="none"&&Tn.hasIconData();if(ln){const zo=Math.pow(2,Ot.zoom-kn.tileID.overscaledZ),Wo=Qt?(dr,Jo)=>Qt.getElevation(Wt,dr,Jo):null;qh(Tn,Kt,jt,ct,Ot,Hi,zo,ln,Er,a.aD(Ot,kn,vt,bt),Wt.toUnwrapped(),Wo)}}})(re,U,Z,q,Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),ue),Z.paint.get("icon-opacity").constantOr(1)!==0&&ms(U,q,Z,re,!1,Z.paint.get("icon-translate"),Z.paint.get("icon-translate-anchor"),Z.layout.get("icon-rotation-alignment"),Z.layout.get("icon-pitch-alignment"),Z.layout.get("icon-keep-upright"),Ue,We,ge),Z.paint.get("text-opacity").constantOr(1)!==0&&ms(U,q,Z,re,!0,Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.layout.get("text-keep-upright"),Ue,We,ge),q.map.showCollisionBoxes&&(Wh(U,q,Z,re,!0),Wh(U,q,Z,re,!1))})(l,p,C,E,this.style.placement.variableOffsets,T):a.cd(C)?(function(U,q,Z,re,ue){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ue,ge=Z.paint.get("circle-opacity"),Ue=Z.paint.get("circle-stroke-width"),We=Z.paint.get("circle-stroke-opacity"),Je=!Z.layout.get("circle-sort-key").isConstant();if(ge.constantOr(1)===0&&(Ue.constantOr(1)===0||We.constantOr(1)===0))return;const He=U.context,tt=He.gl,at=U.transform,yt=U.getDepthModeForSublayer(0,Qe.ReadOnly),lt=dn.disabled,vt=U.colorModeForRenderPass(),bt=[],ct=at.getCircleRadiusCorrection();for(let Ot=0;Ot<re.length;Ot++){const Qt=re[Ot],Kt=q.getTile(Qt),jt=Kt.getBucket(Z);if(!jt)continue;const Wt=Z.paint.get("circle-translate"),kn=Z.paint.get("circle-translate-anchor"),Tn=a.aD(at,Kt,Wt,kn),ln=jt.programConfigurations.get(Z.id),Xn=U.useProgram("circle",ln),Hi=jt.layoutVertexBuffer,Er=jt.indexBuffer,zo=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Qt),Wo={programConfiguration:ln,program:Xn,layoutVertexBuffer:Hi,indexBuffer:Er,uniformValues:Ic(U,Kt,Z,Tn,ct),terrainData:zo,projectionData:at.getProjectionData({overscaledTileID:Qt,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0})};if(Je){const dr=jt.segments.get();for(const Jo of dr)bt.push({segments:new a.aM([Jo]),sortKey:Jo.sortKey,state:Wo})}else bt.push({segments:jt.segments,sortKey:0,state:Wo})}Je&&bt.sort(((Ot,Qt)=>Ot.sortKey-Qt.sortKey));for(const Ot of bt){const{programConfiguration:Qt,program:Kt,layoutVertexBuffer:jt,indexBuffer:Wt,uniformValues:kn,terrainData:Tn,projectionData:ln}=Ot.state;Kt.draw(He,tt.TRIANGLES,yt,lt,vt,ye.backCCW,kn,Tn,ln,Z.id,jt,Wt,Ot.segments,Z.paint,U.transform.zoom,Qt)}})(l,p,C,E,T):a.ce(C)?(function(U,q,Z,re,ue){if(Z.paint.get("heatmap-opacity")===0)return;const Ce=U.context,{isRenderingToTexture:ge,isRenderingGlobe:Ue}=ue;if(U.style.map.terrain){for(const We of re){const Je=q.getTile(We);q.hasRenderableParent(We)||(U.renderPass==="offscreen"?fu(U,Je,Z,We,Ue):U.renderPass==="translucent"&&Cl(U,Z,We,ge,Ue))}Ce.viewport.set([0,0,U.width,U.height])}else U.renderPass==="offscreen"?(function(We,Je,He,tt){const at=We.context,yt=at.gl,lt=We.transform,vt=dn.disabled,bt=new Pi([yt.ONE,yt.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(ct,Ot,Qt){const Kt=ct.gl;ct.activeTexture.set(Kt.TEXTURE1),ct.viewport.set([0,0,Ot.width/4,Ot.height/4]);let jt=Qt.heatmapFbos.get(a.c3);jt?(Kt.bindTexture(Kt.TEXTURE_2D,jt.colorAttachment.get()),ct.bindFramebuffer.set(jt.framebuffer)):(jt=Tc(ct,Ot.width/4,Ot.height/4),Qt.heatmapFbos.set(a.c3,jt))})(at,We,He),at.clear({color:a.bf.transparent});for(let ct=0;ct<tt.length;ct++){const Ot=tt[ct];if(Je.hasRenderableParent(Ot))continue;const Qt=Je.getTile(Ot),Kt=Qt.getBucket(He);if(!Kt)continue;const jt=Kt.programConfigurations.get(He.id),Wt=We.useProgram("heatmap",jt),kn=lt.getProjectionData({overscaledTileID:Ot,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Tn=lt.getCircleRadiusCorrection();Wt.draw(at,yt.TRIANGLES,Qe.disabled,vt,bt,ye.backCCW,wp(Qt,lt.zoom,He.paint.get("heatmap-intensity"),Tn),null,kn,He.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,He.paint,lt.zoom,jt)}at.viewport.set([0,0,We.width,We.height])})(U,q,Z,re):U.renderPass==="translucent"&&(function(We,Je){const He=We.context,tt=He.gl;He.setColorMode(We.colorModeForRenderPass());const at=Je.heatmapFbos.get(a.c3);at&&(He.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,at.colorAttachment.get()),He.activeTexture.set(tt.TEXTURE1),iA(He,Je).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),We.useProgram("heatmapTexture").draw(He,tt.TRIANGLES,Qe.disabled,dn.disabled,We.colorModeForRenderPass(),ye.disabled,Rf(We,Je,0,1),null,null,Je.id,We.viewportBuffer,We.quadTriangleIndexBuffer,We.viewportSegments,Je.paint,We.transform.zoom))})(U,Z)})(l,p,C,E,T):a.cf(C)?(function(U,q,Z,re,ue){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ue,ge=Z.paint.get("line-opacity"),Ue=Z.paint.get("line-width");if(ge.constantOr(1)===0||Ue.constantOr(1)===0)return;const We=U.getDepthModeForSublayer(0,Qe.ReadOnly),Je=U.colorModeForRenderPass(),He=Z.paint.get("line-dasharray"),tt=He.constantOr(1),at=Z.paint.get("line-pattern"),yt=at.constantOr(1),lt=Z.paint.get("line-gradient"),vt=Z.getCrossfadeParameters();let bt;bt=yt?"linePattern":tt&&lt?"lineGradientSDF":tt?"lineSDF":lt?"lineGradient":"line";const ct=U.context,Ot=ct.gl,Qt=U.transform;let Kt=!0;for(const jt of re){const Wt=q.getTile(jt);if(yt&&!Wt.patternsLoaded())continue;const kn=Wt.getBucket(Z);if(!kn)continue;const Tn=kn.programConfigurations.get(Z.id),ln=U.context.program.get(),Xn=U.useProgram(bt,Tn),Hi=Kt||Xn.program!==ln,Er=U.style.map.terrain&&U.style.map.terrain.getTerrainData(jt),zo=at.constantOr(null),Wo=He&&He.constantOr(null);if(zo&&Wt.imageAtlas){const Pa=Wt.imageAtlas,js=Pa.patternPositions[zo.to.toString()],ia=Pa.patternPositions[zo.from.toString()];js&&ia&&Tn.setConstantPatternPositions(js,ia)}else if(Wo){const Pa=Z.layout.get("line-cap")==="round",js=U.lineAtlas.getDash(Wo.to,Pa),ia=U.lineAtlas.getDash(Wo.from,Pa);Tn.setConstantDashPositions(js,ia)}const dr=Qt.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!Ce,applyTerrainMatrix:!0}),Jo=Qt.getPixelScale();let Da;yt?(Da=Lm(U,Wt,Z,Jo,vt),lc(ct,Ot,Wt,Tn,vt)):tt&&lt?(Da=Km(U,Wt,Z,Jo,vt,kn.lineClipsArray.length),rh(U,q,ct,Ot,Z,kn,jt,Tn,vt)):tt?(Da=Ld(U,Wt,Z,Jo,vt),Ip(U,ct,Ot,Tn,Hi,vt)):lt?(Da=Lh(U,Wt,Z,Jo,kn.lineClipsArray.length),rA(U,q,ct,Ot,Z,kn,jt)):Da=tA(U,Wt,Z,Jo);const Is=U.stencilModeForClipping(jt);Xn.draw(ct,Ot.TRIANGLES,We,Is,Je,ye.disabled,Da,Er,dr,Z.id,kn.layoutVertexBuffer,kn.indexBuffer,kn.segments,Z.paint,U.transform.zoom,Tn,kn.layoutVertexBuffer2),Kt=!1}})(l,p,C,E,T):a.cg(C)?(function(U,q,Z,re,ue){const Ce=Z.paint.get("fill-color"),ge=Z.paint.get("fill-opacity");if(ge.constantOr(1)===0)return;const{isRenderingToTexture:Ue}=ue,We=U.colorModeForRenderPass(),Je=Z.paint.get("fill-pattern"),He=U.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&Ce.constantOr(a.bf.transparent).a===1&&ge.constantOr(0)===1?"opaque":"translucent";if(U.renderPass===He){const tt=U.getDepthModeForSublayer(1,U.renderPass==="opaque"?Qe.ReadWrite:Qe.ReadOnly);na(U,q,Z,re,tt,We,!1,Ue)}if(U.renderPass==="translucent"&&Z.paint.get("fill-antialias")){const tt=U.getDepthModeForSublayer(Z.getPaintProperty("fill-outline-color")?2:0,Qe.ReadOnly);na(U,q,Z,re,tt,We,!0,Ue)}})(l,p,C,E,T):a.ch(C)?(function(U,q,Z,re,ue){const Ce=Z.paint.get("fill-extrusion-opacity");if(Ce===0)return;const{isRenderingToTexture:ge}=ue;if(U.renderPass==="translucent"){const Ue=new Qe(U.context.gl.LEQUAL,Qe.ReadWrite,U.depthRangeFor3D);if(Ce!==1||Z.paint.get("fill-extrusion-pattern").constantOr(1))uo(U,q,Z,re,Ue,dn.disabled,Pi.disabled,ge),uo(U,q,Z,re,Ue,U.stencilModeFor3D(),U.colorModeForRenderPass(),ge);else{const We=U.colorModeForRenderPass();uo(U,q,Z,re,Ue,dn.disabled,We,ge)}}})(l,p,C,E,T):a.ci(C)?(function(U,q,Z,re,ue){if(U.renderPass!=="offscreen"&&U.renderPass!=="translucent")return;const{isRenderingToTexture:Ce}=ue,ge=U.context,Ue=U.style.projection.useSubdivision,We=U.getDepthModeForSublayer(0,Qe.ReadOnly),Je=U.colorModeForRenderPass();if(U.renderPass==="offscreen")(function(He,tt,at,yt,lt,vt,bt){const ct=He.context,Ot=ct.gl;for(const Qt of at){const Kt=tt.getTile(Qt),jt=Kt.dem;if(!jt||!jt.data||!Kt.needsHillshadePrepare)continue;const Wt=jt.dim,kn=jt.stride,Tn=jt.getPixels();if(ct.activeTexture.set(Ot.TEXTURE1),ct.pixelStoreUnpackPremultiplyAlpha.set(!1),Kt.demTexture=Kt.demTexture||He.getTileTexture(kn),Kt.demTexture){const Xn=Kt.demTexture;Xn.update(Tn,{premultiply:!1}),Xn.bind(Ot.NEAREST,Ot.CLAMP_TO_EDGE)}else Kt.demTexture=new a.T(ct,Tn,Ot.RGBA,{premultiply:!1}),Kt.demTexture.bind(Ot.NEAREST,Ot.CLAMP_TO_EDGE);ct.activeTexture.set(Ot.TEXTURE0);let ln=Kt.fbo;if(!ln){const Xn=new a.T(ct,{width:Wt,height:Wt,data:null},Ot.RGBA);Xn.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),ln=Kt.fbo=ct.createFramebuffer(Wt,Wt,!0,!1),ln.colorAttachment.set(Xn.texture)}ct.bindFramebuffer.set(ln.framebuffer),ct.viewport.set([0,0,Wt,Wt]),He.useProgram("hillshadePrepare").draw(ct,Ot.TRIANGLES,lt,vt,bt,ye.disabled,Pf(Kt.tileID,jt),null,null,yt.id,He.rasterBoundsBuffer,He.quadTriangleIndexBuffer,He.rasterBoundsSegments),Kt.needsHillshadePrepare=!1}})(U,q,re,Z,We,dn.disabled,Je),ge.viewport.set([0,0,U.width,U.height]);else if(U.renderPass==="translucent")if(Ue){const[He,tt,at]=U.stencilConfigForOverlapTwoPass(re);Wr(U,q,Z,at,He,We,Je,!1,Ce),Wr(U,q,Z,at,tt,We,Je,!0,Ce)}else{const[He,tt]=U.getStencilConfigForOverlapAndUpdateStencilID(re);Wr(U,q,Z,tt,He,We,Je,!1,Ce)}})(l,p,C,E,T):a.cj(C)?(function(U,q,Z,re,ue){if(U.renderPass!=="translucent"||!re.length)return;const{isRenderingToTexture:Ce}=ue,ge=U.style.projection.useSubdivision,Ue=U.getDepthModeForSublayer(0,Qe.ReadOnly),We=U.colorModeForRenderPass();if(ge){const[Je,He,tt]=U.stencilConfigForOverlapTwoPass(re);MA(U,q,Z,tt,Je,Ue,We,!1,Ce),MA(U,q,Z,tt,He,Ue,We,!0,Ce)}else{const[Je,He]=U.getStencilConfigForOverlapAndUpdateStencilID(re);MA(U,q,Z,He,Je,Ue,We,!1,Ce)}})(l,p,C,E,T):a.bK(C)?(function(U,q,Z,re,ue){if(U.renderPass!=="translucent"||Z.paint.get("raster-opacity")===0||!re.length)return;const{isRenderingToTexture:Ce}=ue,ge=q.getSource(),Ue=U.style.projection.useSubdivision;if(ge instanceof xn)as(U,q,Z,re,null,!1,!1,ge.tileCoords,ge.flippedWindingOrder,Ce);else if(Ue){const[We,Je,He]=U.stencilConfigForOverlapTwoPass(re);as(U,q,Z,He,We,!1,!0,pu,!1,Ce),as(U,q,Z,He,Je,!0,!0,pu,!1,Ce)}else{const[We,Je]=U.getStencilConfigForOverlapAndUpdateStencilID(re);as(U,q,Z,Je,We,!1,!0,pu,!1,Ce)}})(l,p,C,E,T):a.ck(C)?(function(U,q,Z,re,ue){const Ce=Z.paint.get("background-color"),ge=Z.paint.get("background-opacity");if(ge===0)return;const{isRenderingToTexture:Ue}=ue,We=U.context,Je=We.gl,He=U.style.projection,tt=U.transform,at=tt.tileSize,yt=Z.paint.get("background-pattern");if(U.isPatternMissing(yt))return;const lt=!yt&&Ce.a===1&&ge===1&&U.opaquePassEnabledForLayer()?"opaque":"translucent";if(U.renderPass!==lt)return;const vt=dn.disabled,bt=U.getDepthModeForSublayer(0,lt==="opaque"?Qe.ReadWrite:Qe.ReadOnly),ct=U.colorModeForRenderPass(),Ot=U.useProgram(yt?"backgroundPattern":"background"),Qt=re||In(tt,{tileSize:at,terrain:U.style.map.terrain});yt&&(We.activeTexture.set(Je.TEXTURE0),U.imageManager.bind(U.context));const Kt=Z.getCrossfadeParameters();for(const jt of Qt){const Wt=tt.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!Ue,applyTerrainMatrix:!0}),kn=yt?JA(ge,U,yt,{tileID:jt,tileSize:at},Kt):Ks(ge,Ce),Tn=U.style.map.terrain&&U.style.map.terrain.getTerrainData(jt),ln=He.getMeshFromTileID(We,jt.canonical,!1,!0,"raster");Ot.draw(We,Je.TRIANGLES,bt,vt,ct,ye.backCCW,kn,Tn,Wt,Z.id,ln.vertexBuffer,ln.indexBuffer,ln.segments)}})(l,0,C,E,T):a.cl(C)&&(function(U,q,Z,re){const{isRenderingGlobe:ue}=re,Ce=U.context,ge=Z.implementation,Ue=U.style.projection,We=U.transform,Je=We.getProjectionDataForCustomLayer(ue),He={farZ:We.farZ,nearZ:We.nearZ,fov:We.fov*Math.PI/180,modelViewProjectionMatrix:We.modelViewProjectionMatrix,projectionMatrix:We.projectionMatrix,shaderData:{variantName:Ue.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ue.shaderPreludeCode.vertexSource}`,define:Ue.shaderDefine},defaultProjectionData:Je},tt=ge.renderingMode?ge.renderingMode:"2d";if(U.renderPass==="offscreen"){const at=ge.prerender;at&&(U.setCustomLayerDefaults(),Ce.setColorMode(U.colorModeForRenderPass()),at.call(ge,Ce.gl,He),Ce.setDirty(),U.setBaseState())}else if(U.renderPass==="translucent"){U.setCustomLayerDefaults(),Ce.setColorMode(U.colorModeForRenderPass()),Ce.setStencilMode(dn.disabled);const at=tt==="3d"?U.getDepthModeFor3D():U.getDepthModeForSublayer(0,Qe.ReadOnly);Ce.setDepthMode(at),ge.render(Ce.gl,He),Ce.setDirty(),U.setBaseState(),Ce.bindFramebuffer.set(null)}})(l,0,C,T))}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!p||!C}useProgram(l,p,C=!1,E=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,U=this.style.projection,q=C?Ga.projectionMercator:U.shaderPreludeCode,Z=C?Wa:U.shaderDefine,re=l+(p?p.cacheKey:"")+`/${C?Xo:U.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(E?`/${E.join("/")}`:"");return this.cache[re]||(this.cache[re]=new Pd(this.context,Ga[l],p,zm[l],this._showOverdrawInspector,T,q,Z,E)),this.cache[re]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}function kp(O,l){let p,C=!1,E=null,T=null;const U=()=>{E=null,C&&(O.apply(T,p),E=setTimeout(U,l),C=!1)};return(...q)=>(C=!0,T=this,p=q,E||U(),E)}class cc{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let C;return p.split("&").map((E=>E.split("="))).forEach((E=>{E[0]===this._hashName&&(C=E)})),(C&&C[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:C,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const C=p.join("/");let E=C;E.split("&").length>0&&(E=E.split("&")[0]),this._hashName&&(E=`${this._hashName}=${C}`);let T=window.location.hash.replace(E,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let U=window.location.href.replace(/(#.+)?$/,T);U=U.replace("&&","&"),window.history.replaceState(window.history.state,null,U)},this._updateHash=kp(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,E=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,E),U=Math.round(p.lng*T)/T,q=Math.round(p.lat*T)/T,Z=this._map.getBearing(),re=this._map.getPitch();let ue="";if(ue+=l?`/${U}/${q}/${C}`:`${C}/${q}/${U}`,(Z||re)&&(ue+="/"+Math.round(10*Z)/10),re&&(ue+=`/${Math.round(re)}`),this._hashName){const Ce=this._hashName;let ge=!1;const Ue=window.location.hash.slice(1).split("&").map((We=>{const Je=We.split("=")[0];return Je===Ce?(ge=!0,`${Je}=${ue}`):We})).filter((We=>We));return ge||Ue.push(`${Ce}=${ue}`),`#${Ue.join("&")}`}return`#${ue}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.S(+l[2],+l[1])}catch{return!1}const p=+l[0],C=+(l[3]||0),E=+(l[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&C>=-180&&C<=180&&E>=this._map.getMinPitch()&&E<=this._map.getMaxPitch()}}const oh={linearity:.3,easing:a.cm(0,0,.3,1)},Vh=a.e({deceleration:2500,maxSpeed:1400},oh),al=a.e({deceleration:20,maxSpeed:1400},oh),Ac=a.e({deceleration:1e3,maxSpeed:360},oh),g0=a.e({deceleration:1e3,maxSpeed:90},oh),E1=a.e({deceleration:1e3,maxSpeed:360},oh);class O1{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:B(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=B();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,p.roll+=T.rollDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(p.pan.mag()){const T=ls(p.pan.mag(),C,a.e({},Vh,l||{})),U=p.pan.mult(T.amount/p.pan.mag()),q=this._map.cameraHelper.handlePanInertia(U,this._map.transform);E.center=q.easingCenter,E.offset=q.easingOffset,Uf(E,T)}if(p.zoom){const T=ls(p.zoom,C,al);E.zoom=this._map.transform.zoom+T.amount,Uf(E,T)}if(p.bearing){const T=ls(p.bearing,C,Ac);E.bearing=this._map.transform.bearing+a.ae(T.amount,-179,179),Uf(E,T)}if(p.pitch){const T=ls(p.pitch,C,g0);E.pitch=this._map.transform.pitch+T.amount,Uf(E,T)}if(p.roll){const T=ls(p.roll,C,E1);E.roll=this._map.transform.roll+a.ae(T.amount,-179,179),Uf(E,T)}if(E.zoom||E.bearing){const T=p.pinchAround===void 0?p.around:p.pinchAround;E.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),a.e(E,{noMoveStart:!0})}}function Uf(O,l){(!O.duration||O.duration<l.duration)&&(O.duration=l.duration,O.easing=l.easing)}function ls(O,l,p){const{maxSpeed:C,linearity:E,deceleration:T}=p,U=a.ae(O*E/(l/1e3),-C,C),q=Math.abs(U)/(T*E);return{easing:p.easing,duration:1e3*q,amount:U*(q/2)}}class zs extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C,E={}){C=C instanceof MouseEvent?C:new MouseEvent(l,C);const T=R.mousePos(p.getCanvas(),C),U=p.unproject(T);super(l,a.e({point:T,lngLat:U,originalEvent:C},E)),this._defaultPrevented=!1,this.target=p}}class Ta extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){const E=l==="touchend"?C.changedTouches:C.touches,T=R.touchPos(p.getCanvasContainer(),E),U=T.map((Z=>p.unproject(Z))),q=T.reduce(((Z,re,ue,Ce)=>Z.add(re.div(Ce.length))),new a.P(0,0));super(l,{points:T,point:q,lngLats:U,lngLat:p.unproject(q),originalEvent:C}),this._defaultPrevented=!1}}class Gl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class Ym{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Gl(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new zs(l.type,this._map,l))}mouseup(l){this._map.fire(new zs(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new zs(l.type,this._map,l))}dblclick(l){return this._firePreventable(new zs(l.type,this._map,l))}mouseover(l){this._map.fire(new zs(l.type,this._map,l))}mouseout(l){this._map.fire(new zs(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Ta(l.type,this._map,l))}touchmove(l){this._map.fire(new Ta(l.type,this._map,l))}touchend(l){this._map.fire(new Ta(l.type,this._map,l))}touchcancel(l){this._map.fire(new Ta(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wl{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new zs(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new zs(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mu{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class Hh{constructor(l,p){this._map=l,this._tr=new mu(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(R.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=C,this._box||(this._box=R.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const T=Math.min(E.x,C.x),U=Math.max(E.x,C.x),q=Math.min(E.y,C.y),Z=Math.max(E.y,C.y);R.setTransform(this._box,`translate(${T}px,${q}px)`),this._box.style.width=U-T+"px",this._box.style.height=Z-q+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const C=this._startPos,E=p;if(this.reset(),R.suppressClick(),C.x!==E.x||C.y!==E.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:T=>T.fitScreenCoordinates(C,E,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new a.l(l,{originalEvent:p}))}}function $m(O,l){if(O.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${l.length}`);const p={};for(let C=0;C<O.length;C++)p[O[C].identifier]=l[C];return p}class mv{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=(function(E){const T=new a.P(0,0);for(const U of E)T._add(U);return T.div(E.length)})(p),this.touches=$m(C,p)))}touchmove(l,p,C){if(this.aborted||!this.centroid)return;const E=$m(C,p);for(const T in this.touches){const U=E[T];(!U||U.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(l,p,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class Tu{constructor(l){this.singleTap=new mv(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,C){this.singleTap.touchstart(l,p,C)}touchmove(l,p,C){this.singleTap.touchmove(l,p,C)}touchend(l,p,C){const E=this.singleTap.touchend(l,p,C);if(E){const T=l.timeStamp-this.lastTime<500,U=!this.lastTap||this.lastTap.dist(E)<30;if(T&&U||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Zh{constructor(l){this._tr=new mu(l),this._zoomIn=new Tu({numTouches:1,numTaps:2}),this._zoomOut=new Tu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,C){this._zoomIn.touchstart(l,p,C),this._zoomOut.touchstart(l,p,C)}touchmove(l,p,C){this._zoomIn.touchmove(l,p,C),this._zoomOut.touchmove(l,p,C)}touchend(l,p,C){const E=this._zoomIn.touchend(l,p,C),T=this._zoomOut.touchend(l,p,C),U=this._tr;return E?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:U.zoom+1,around:U.unproject(E)},{originalEvent:l})}):T?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:U.zoom-1,around:U.unproject(T)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class aA{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const E=Array.isArray(p)?p[0]:p;return!this._moved&&E.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=E,this._move(C,E))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&R.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Rc=0,Jn=2,jd={[Rc]:1,[Jn]:2};class BA{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=R.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(p,C){const E=jd[C];return p.buttons===void 0||(p.buttons&E)!==E})(l,this._eventButton)}isValidEndEvent(l){return R.mouseButton(l)===this._eventButton}}class Lf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class Xh{constructor(l=new BA({checkCorrectEvent:()=>!0}),p=new Lf){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(l,p,C){return l instanceof MouseEvent?p(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const sh=O=>{O.mousedown=O.dragStart,O.mousemoveWindow=O.dragMove,O.mouseup=O.dragEnd,O.contextmenu=l=>{l.preventDefault()}};class Kf{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,C){return this._calculateTransform(l,p,C)}touchmove(l,p,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,p,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,C){this._calculateTransform(l,p,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,C){C.length>0&&(this._active=!0);const E=$m(C,p),T=new a.P(0,0),U=new a.P(0,0);let q=0;for(const re in E){const ue=E[re],Ce=this._touches[re];Ce&&(T._add(ue),U._add(ue.sub(Ce)),q++,E[re]=ue)}if(this._touches=E,this._shouldBePrevented(q)||!U.mag())return;const Z=U.div(q);return this._sum._add(Z),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(q),panDelta:Z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,C){if(!this._firstTwoTouches)return;l.preventDefault();const[E,T]=this._firstTwoTouches,U=gu(C,p,E),q=gu(C,p,T);if(!U||!q)return;const Z=this._aroundCenter?null:U.add(q).div(2);return this._move([U,q],Z,l)}touchend(l,p,C){if(!this._firstTwoTouches)return;const[E,T]=this._firstTwoTouches,U=gu(C,p,E),q=gu(C,p,T);U&&q||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function gu(O,l,p){for(let C=0;C<O.length;C++)if(O[C].identifier===p)return l[C]}function y0(O,l){return Math.log(O/l)/Math.LN2}class Ff extends nr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(y0(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:y0(this._distance,C),pinchAround:p}}}function Nd(O,l){return 180*O.angleWith(l)/Math.PI}class Ru extends nr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,C){const E=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nd(this._vector,E),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,C=Nd(l,this._startVector);return Math.abs(C)<p}}function ah(O){return Math.abs(O.y)>Math.abs(O.x)}class Du extends nr{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,C){super.touchstart(l,p,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,ah(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const E=l[0].sub(this._lastPoints[0]),T=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(E,T,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(E.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,C){if(this._valid!==void 0)return this._valid;const E=l.mag()>=2,T=p.mag()>=2;if(!E&&!T)return;if(!E||!T)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const U=l.y>0==p.y>0;return ah(l)&&ah(p)&&U}}const Ql={panStep:100,bearingStep:15,pitchStep:10};class v0{constructor(l){this._tr=new mu(l);const p=Ql;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,C=0,E=0,T=0,U=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),T=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),T=1);break;case 38:l.shiftKey?E=1:(l.preventDefault(),U=-1);break;case 40:l.shiftKey?E=-1:(l.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(C=0,E=0),{cameraAnimation:q=>{const Z=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:lh,zoom:p?Math.round(Z.zoom)+p*(l.shiftKey?2:1):Z.zoom,bearing:Z.bearing+C*this._bearingStep,pitch:Z.pitch+E*this._pitchStep,offset:[-T*this._panStep,-U*this._panStep],center:Z.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lh(O){return O*(2-O)}const Vm=4.000244140625,Dc=1/450;class ll{constructor(l,p){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new mu(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Dc}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=B(),E=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%Vm==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(E*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=R.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(a.S.convert(C.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const q=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=q),typeof this._targetZoom=="number"&&(this._targetZoom+=q)}if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Vm?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&Z!==0&&(Z=1/Z);const re=typeof this._targetZoom!="number"?l.scale:a.ah(this._targetZoom);this._targetZoom=l.constrain(l.getCameraLngLat(),a.ak(re*Z)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,E=this._easing;let T,U=!1;if(this._type==="wheel"&&C&&E){const q=B()-this._lastWheelEventTime,Z=Math.min((q+5)/200,1),re=E(Z);T=a.C.number(C,p,re),Z<1?this._frameId||(this._frameId=!0):U=!0}else T=p,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!U,zoomDelta:T-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=a.co;if(this._prevEase){const C=this._prevEase,E=(B()-C.start)/C.duration,T=C.easing(E+.01)-C.easing(E),U=.27/Math.sqrt(T*T+1e-4)*.01,q=Math.sqrt(.0729-U*U);p=a.cm(U,q,.25,1)}return this._prevEase={start:B(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class wo{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jh{constructor(l){this._tr=new mu(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pu{constructor(){this._tap=new Tu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,C){if(!this._swipePoint)if(this._tapTime){const E=p[0],T=l.timeStamp-this._tapTime<500,U=this._tapPoint.dist(E)<30;T&&U?C.length>0&&(this._swipePoint=E,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,p,C)}touchmove(l,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const E=p[0],T=E.y-this._swipePoint.y;return this._swipePoint=E,l.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(l,p,C)}touchend(l,p,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const E=this._tap.touchend(l,p,C);E&&(this._tapTime=l.timeStamp,this._tapPoint=E)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ed{constructor(l,p,C){this._el=l,this._mousePan=p,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zf{constructor(l,p,C,E){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=p,this._mousePitch=C,this._mouseRoll=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ma{constructor(l,p,C,E){this._el=l,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class uh{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=R.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),E=document.createElement("div");E.className="maplibregl-desktop-message",E.textContent=p,this._container.appendChild(E);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=C,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(R.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ch=O=>O.zoom||O.drag||O.roll||O.pitch||O.rotate;class Ra extends a.l{}function Ah(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta||O.rollDelta}class ri{constructor(l,p){this.handleWindowEvent=E=>{this.handleEvent(E,`${E.type}Window`)},this.handleEvent=(E,T)=>{if(E.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const U=E.type==="renderFrame"?void 0:E,q={needsRenderFrame:!1},Z={},re={};for(const{handlerName:ge,handler:Ue,allowed:We}of this._handlers){if(!Ue.isEnabled())continue;let Je;if(this._blockedByActive(re,We,ge))Ue.reset();else if(Ue[T||E.type]){if(a.cp(E,T||E.type)){const He=R.mousePos(this._map.getCanvas(),E);Je=Ue[T||E.type](E,He)}else if(a.cq(E,T||E.type)){const He=this._getMapTouches(E.touches),tt=R.touchPos(this._map.getCanvas(),He);Je=Ue[T||E.type](E,tt,He)}else a.cr(T||E.type)||(Je=Ue[T||E.type](E));this.mergeHandlerResult(q,Z,Je,ge,U),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()}(Je||Ue.isActive())&&(re[ge]=Ue)}const ue={};for(const ge in this._previousActiveHandlers)re[ge]||(ue[ge]=U);this._previousActiveHandlers=re,(Object.keys(ue).length||Ah(q))&&(this._changes.push([q,Z,ue]),this._triggerRenderFrame()),(Object.keys(re).length||Ah(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=q;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new O1(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,T,U]of this._listeners)R.addEventListener(E,T,E===document?this.handleWindowEvent:this.handleEvent,U)}destroy(){for(const[l,p,C]of this._listeners)R.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new Ym(p,l));const E=p.boxZoom=new Hh(p,l);this._add("boxZoom",E),l.interactive&&l.boxZoom&&E.enable();const T=p.cooperativeGestures=new uh(p,l.cooperativeGestures);this._add("cooperativeGestures",T),l.cooperativeGestures&&T.enable();const U=new Zh(p),q=new Jh(p);p.doubleClickZoom=new wo(q,U),this._add("tapZoom",U),this._add("clickZoom",q),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const Z=new Pu;this._add("tapDragZoom",Z);const re=p.touchPitch=new Du(p);this._add("touchPitch",re),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const ue=()=>p.project(p.getCenter()),Ce=(function({enable:lt,clickTolerance:vt,aroundCenter:bt=!0,minPixelCenterThreshold:ct=100,rotateDegreesPerPixelMoved:Ot=.8},Qt){const Kt=new BA({checkCorrectEvent:jt=>R.mouseButton(jt)===0&&jt.ctrlKey||R.mouseButton(jt)===2&&!jt.ctrlKey});return new aA({clickTolerance:vt,move:(jt,Wt)=>{const kn=Qt();if(bt&&Math.abs(kn.y-jt.y)>ct)return{bearingDelta:a.cn(new a.P(jt.x,Wt.y),Wt,kn)};let Tn=(Wt.x-jt.x)*Ot;return bt&&Wt.y<kn.y&&(Tn=-Tn),{bearingDelta:Tn}},moveStateManager:Kt,enable:lt,assignEvents:sh})})(l,ue),ge=(function({enable:lt,clickTolerance:vt,pitchDegreesPerPixelMoved:bt=-.5}){const ct=new BA({checkCorrectEvent:Ot=>R.mouseButton(Ot)===0&&Ot.ctrlKey||R.mouseButton(Ot)===2});return new aA({clickTolerance:vt,move:(Ot,Qt)=>({pitchDelta:(Qt.y-Ot.y)*bt}),moveStateManager:ct,enable:lt,assignEvents:sh})})(l),Ue=(function({enable:lt,clickTolerance:vt,rollDegreesPerPixelMoved:bt=.3},ct){const Ot=new BA({checkCorrectEvent:Qt=>R.mouseButton(Qt)===2&&Qt.ctrlKey});return new aA({clickTolerance:vt,move:(Qt,Kt)=>{const jt=ct();let Wt=(Kt.x-Qt.x)*bt;return Kt.y<jt.y&&(Wt=-Wt),{rollDelta:Wt}},moveStateManager:Ot,enable:lt,assignEvents:sh})})(l,ue);p.dragRotate=new zf(l,Ce,ge,Ue),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",ge,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ue,["mousePitch"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const We=(function({enable:lt,clickTolerance:vt}){const bt=new BA({checkCorrectEvent:ct=>R.mouseButton(ct)===0&&!ct.ctrlKey});return new aA({clickTolerance:vt,move:(ct,Ot)=>({around:Ot,panDelta:Ot.sub(ct)}),activateOnStart:!0,moveStateManager:bt,enable:lt,assignEvents:sh})})(l),Je=new Kf(l,p);p.dragPan=new ed(C,We,Je),this._add("mousePan",We),this._add("touchPan",Je,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const He=new Ru,tt=new Ff;p.touchZoomRotate=new ma(C,tt,He,Z),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate),this._add("blockableMapEvent",new Wl(p));const at=p.scrollZoom=new ll(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",at,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const yt=p.keyboard=new v0(p);this._add("keyboard",yt),l.interactive&&l.keyboard&&p.keyboard.enable()}_add(l,p,C){this._handlers.push({handlerName:l,handler:p,allowed:C}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ch(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,C){for(const E in l)if(E!==C&&(!p||p.indexOf(E)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const C of l)this._el.contains(C.target)&&p.push(C);return p}mergeHandlerResult(l,p,C,E,T){if(!C)return;a.e(l,C);const U={handlerName:E,originalEvent:C.originalEvent||T};C.zoomDelta!==void 0&&(p.zoom=U),C.panDelta!==void 0&&(p.drag=U),C.rollDelta!==void 0&&(p.roll=U),C.pitchDelta!==void 0&&(p.pitch=U),C.bearingDelta!==void 0&&(p.rotate=U)}_applyChanges(){const l={},p={},C={};for(const[E,T,U]of this._changes)E.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.rollDelta&&(l.rollDelta=(l.rollDelta||0)+E.rollDelta),E.around!==void 0&&(l.around=E.around),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),a.e(p,T),a.e(C,U);this._updateMapTransform(l,p,C),this._changes=[]}_updateMapTransform(l,p,C){const E=this._map,T=E._getTransformForUpdate(),U=E.terrain;if(!(Ah(l)||U&&this._terrainMovement))return this._fireEvents(p,C,!0);E._stop(!0);let{panDelta:q,zoomDelta:Z,bearingDelta:re,pitchDelta:ue,rollDelta:Ce,around:ge,pinchAround:Ue}=l;Ue!==void 0&&(ge=Ue),ge=ge||E.transform.centerPoint,U&&!T.isPointOnMapSurface(ge)&&(ge=T.centerPoint);const We={panDelta:q,zoomDelta:Z,rollDelta:Ce,pitchDelta:ue,bearingDelta:re,around:ge};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(ge)&&(ge=T.centerPoint);const Je=ge.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(q?ge.sub(q):ge);this._handleMapControls({terrain:U,tr:T,deltasForHelper:We,preZoomAroundLoc:Je,combinedEventsInProgress:p,panDelta:q}),E._applyUpdatedTransform(T),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,C,!0)}_handleMapControls({terrain:l,tr:p,deltasForHelper:C,preZoomAroundLoc:E,combinedEventsInProgress:T,panDelta:U}){const q=this._map.cameraHelper;if(q.handleMapControlsRollPitchBearingZoom(C,p),l)return q.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void q.handleMapControlsPan(C,p,E)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&U?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(U))):q.handleMapControlsPan(C,p,E)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void q.handleMapControlsPan(C,p,E));q.handleMapControlsPan(C,p,E)}_fireEvents(l,p,C){const E=ch(this._eventsInProgress),T=ch(l),U={};for(const Ce in l){const{originalEvent:ge}=l[Ce];this._eventsInProgress[Ce]||(U[`${Ce}start`]=ge),this._eventsInProgress[Ce]=l[Ce]}!E&&T&&this._fireEvent("movestart",T.originalEvent);for(const Ce in U)this._fireEvent(Ce,U[Ce]);T&&this._fireEvent("move",T.originalEvent);for(const Ce in l){const{originalEvent:ge}=l[Ce];this._fireEvent(Ce,ge)}const q={};let Z;for(const Ce in this._eventsInProgress){const{handlerName:ge,originalEvent:Ue}=this._eventsInProgress[Ce];this._handlersById[ge].isActive()||(delete this._eventsInProgress[Ce],Z=p[ge]||Ue,q[`${Ce}end`]=Z)}for(const Ce in q)this._fireEvent(Ce,q[Ce]);const re=ch(this._eventsInProgress),ue=(E||T)&&!re;if(ue&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ce=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ce.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ce)}if(C&&ue){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ge=Ue=>Ue!==0&&-this._bearingSnap<Ue&&Ue<this._bearingSnap;!Ce||!Ce.essential&&x.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:Z})),ge(this._map.getBearing())&&this._map.resetNorth()):(ge(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),Ce.freezeElevation=!0,this._map.easeTo(Ce,{originalEvent:Z})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new a.l(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new Ra("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class _i extends a.E{constructor(l,p,C){super(),this._renderFrameCallback=()=>{const E=Math.min((B()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(E)),E<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,p){l.apply(this.transform),this.transform=l,this.cameraHelper=p}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,p){return this.jumpTo({elevation:l},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,p,C){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},p),C)}panTo(l,p,C){return this.easeTo(a.e({center:l},p),C)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,C){return this.easeTo(a.e({zoom:l},p),C)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,p){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,C){return this.easeTo(a.e({bearing:l},p),C)}resetNorth(l,p){return this.rotateTo(0,a.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}getRoll(){return this.transform.roll}setRoll(l,p){return this.jumpTo({roll:l},p),this}cameraForBounds(l,p){l=St.convert(l).adjustAntiMeridian();const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,p)}_cameraForBoxAndBearing(l,p,C,E){const T={top:0,bottom:0,right:0,left:0};if(typeof(E=a.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){const re=E.padding;E.padding={top:re,bottom:re,right:re,left:re}}const U=a.e(T,E.padding);E.padding=U;const q=this.transform,Z=new St(l,p);return this.cameraHelper.cameraForBoxAndBearing(E,U,Z,C,q)}fitBounds(l,p,C){return this._fitInternal(this.cameraForBounds(l,p),p,C)}fitScreenCoordinates(l,p,C,E,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(p)),C,E),E,T)}_fitInternal(l,p,C){return l?(delete(p=a.e(l,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(l,p){this.stop();const C=this._getTransformForUpdate();let E=!1,T=!1,U=!1;const q=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const Z=C.zoom!==q;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(E=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(T=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(U=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),Z&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),E&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),T&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),U&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(l,p,C,E=0){const T=a.a1.fromLngLat(l,p),U=a.a1.fromLngLat(C,E),q=U.x-T.x,Z=U.y-T.y,re=U.z-T.z,ue=Math.hypot(q,Z,re);if(ue===0)throw new Error("Can't calculate camera options with same From and To");const Ce=Math.hypot(q,Z),ge=a.ak(this.transform.cameraToCenterDistance/ue/this.transform.tileSize),Ue=180*Math.atan2(q,-Z)/Math.PI;let We=180*Math.acos(Ce/ue)/Math.PI;return We=re<0?90-We:90+We,{center:U.toLngLat(),elevation:E,zoom:ge,pitch:We,bearing:Ue}}calculateCameraOptionsFromCameraLngLatAltRotation(l,p,C,E,T){const U=this.transform.calculateCenterFromCameraLngLatAlt(l,p,C,E);return{center:U.center,elevation:U.elevation,zoom:U.zoom,bearing:C,pitch:E,roll:T}}easeTo(l,p){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.co},l)).animate===!1||!l.essential&&x.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),E=this.getBearing(),T=C.pitch,U=C.roll,q="bearing"in l?this._normalizeBearing(l.bearing,E):E,Z="pitch"in l?+l.pitch:T,re="roll"in l?this._normalizeBearing(l.roll,U):U,ue="padding"in l?l.padding:C.padding,Ce=a.P.convert(l.offset);let ge,Ue;l.around&&(ge=a.S.convert(l.around),Ue=C.locationToScreenPoint(ge));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Je=this.cameraHelper.handleEaseTo(C,{bearing:q,pitch:Z,roll:re,padding:ue,around:ge,aroundPoint:Ue,offsetAsPoint:Ce,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||E!==q,this._pitching=this._pitching||Z!==T,this._rolling=this._rolling||re!==U,this._padding=!C.isPaddingEqual(ue),this._zooming=this._zooming||Je.isZooming,this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,We),this.terrain&&this._prepareElevation(Je.elevationCenter),this._ease((He=>{Je.easeFunc(He),this.terrain&&!l.freezeElevation&&this._updateElevation(He),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(He=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,He)}),l),this}_prepareEase(l,p,C={}){this._moving=!0,p||C.moving||this.fire(new a.l("movestart",l)),this._zooming&&!C.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(p-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const p=l.getCameraLngLat(),C=l.getCameraAltitude(),E=this.terrain?this.terrain.getElevationForLngLatZoom(p,l.zoom):0;if(C<E){const T=this.calculateCameraOptionsFromTo(p,E,l.center,l.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(p.push((E=>this._elevateCameraIfInsideTerrain(E))),this.transformCameraUpdate&&p.push((E=>this.transformCameraUpdate(E))),!p.length)return;const C=l.clone();for(const E of p){const T=C.clone(),{center:U,zoom:q,roll:Z,pitch:re,bearing:ue,elevation:Ce}=E(T);U&&T.setCenter(U),Ce!==void 0&&T.setElevation(Ce),q!==void 0&&T.setZoom(q),Z!==void 0&&T.setRoll(Z),re!==void 0&&T.setPitch(re),ue!==void 0&&T.setBearing(ue),C.apply(T)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const C=this._zooming,E=this._rotating,T=this._pitching,U=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new a.l("zoomend",l)),E&&this.fire(new a.l("rotateend",l)),T&&this.fire(new a.l("pitchend",l)),U&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,p){if(!l.essential&&x.prefersReducedMotion){const Wt=a.Q(l,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Wt,p)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},l);const C=this._getTransformForUpdate(),E=C.bearing,T=C.pitch,U=C.roll,q=C.padding,Z="bearing"in l?this._normalizeBearing(l.bearing,E):E,re="pitch"in l?+l.pitch:T,ue="roll"in l?this._normalizeBearing(l.roll,U):U,Ce="padding"in l?l.padding:C.padding,ge=a.P.convert(l.offset);let Ue=C.centerPoint.add(ge);const We=C.screenPointToLocation(Ue),Je=this.cameraHelper.handleFlyTo(C,{bearing:Z,pitch:re,roll:ue,padding:Ce,locationAtOffset:We,offsetAsPoint:ge,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let He=l.curve;const tt=Math.max(C.width,C.height),at=tt/Je.scaleOfZoom,yt=Je.pixelPathLength;typeof Je.scaleOfMinZoom=="number"&&(He=Math.sqrt(tt/Je.scaleOfMinZoom/yt*2));const lt=He*He;function vt(Wt){const kn=(at*at-tt*tt+(Wt?-1:1)*lt*lt*yt*yt)/(2*(Wt?at:tt)*lt*yt);return Math.log(Math.sqrt(kn*kn+1)-kn)}function bt(Wt){return(Math.exp(Wt)-Math.exp(-Wt))/2}function ct(Wt){return(Math.exp(Wt)+Math.exp(-Wt))/2}const Ot=vt(!1);let Qt=function(Wt){return ct(Ot)/ct(Ot+He*Wt)},Kt=function(Wt){return tt*((ct(Ot)*(bt(kn=Ot+He*Wt)/ct(kn))-bt(Ot))/lt)/yt;var kn},jt=(vt(!0)-Ot)/He;if(Math.abs(yt)<2e-6||!isFinite(jt)){if(Math.abs(tt-at)<1e-6)return this.easeTo(l,p);const Wt=at<tt?-1:1;jt=Math.abs(Math.log(at/tt))/He,Kt=()=>0,Qt=kn=>Math.exp(Wt*He*kn)}return l.duration="duration"in l?+l.duration:1e3*jt/("screenSpeed"in l?+l.screenSpeed/He:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=E!==Z,this._pitching=re!==T,this._rolling=ue!==U,this._padding=!C.isPaddingEqual(Ce),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Je.targetCenter),this._ease((Wt=>{const kn=Wt*jt,Tn=1/Qt(kn),ln=Kt(kn);this._rotating&&C.setBearing(a.C.number(E,Z,Wt)),this._pitching&&C.setPitch(a.C.number(T,re,Wt)),this._rolling&&C.setRoll(a.C.number(U,ue,Wt)),this._padding&&(C.interpolatePadding(q,Ce,Wt),Ue=C.centerPoint.add(ge)),Je.easeFunc(Wt,Tn,ln,Ue),this.terrain&&!l.freezeElevation&&this._updateElevation(Wt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const E=this._onEaseEnd;delete this._onEaseEnd,E.call(this,p)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,p,C){C.animate===!1||C.duration===0?(l(1),p()):(this._easeStart=B(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=a.aO(l,-180,180);const C=Math.abs(l-p);return Math.abs(l-360-p)<C&&(l-=360),Math.abs(l+360-p)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(l),this.transform.tileZoom):null}}const td={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class qa{constructor(l=td){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const C=this._map._getUIString(`AttributionControl.${p}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((E=>typeof E!="string"?"":E))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const p=this._map.style.sourceCaches;for(const E in p){const T=p[E];if(T.used||T.usedForTerrain){const U=T.getSource();U.attribution&&l.indexOf(U.attribution)<0&&l.push(U.attribution)}}l=l.filter((E=>String(E).trim())),l.sort(((E,T)=>E.length-T.length)),l=l.filter(((E,T)=>{for(let U=T+1;U<l.length;U++)if(l[U].indexOf(E)>=0)return!1;return!0}));const C=l.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,l.length?(this._innerContainer.innerHTML=R.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class hh{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const C=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl");const p=R.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class us{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const E of C)if(E.id===l)return void(E.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var hc=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class ul extends a.E{constructor(l){super(),this._lastTilesetChange=B(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];const C={};for(const E of In(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[E.key]=!0,this._renderableTilesKeys.push(E.key),this._tiles[E.key]||(E.terrainRttPosMatrix32f=new Float64Array(16),a.bZ(E.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[E.key]=new Ae(E,this.tileSize),this._lastTilesetChange=B());for(const E in this._tiles)C[E]||delete this._tiles[E]}freeRtt(l){for(const p in this._tiles){const C=this._tiles[p];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,p){return p?this._getTerrainCoordsForTileRanges(l,p):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const p={};for(const C of this._renderableTilesKeys){const E=this._tiles[C].tileID,T=l.clone(),U=a.ba();if(E.canonical.equals(l.canonical))a.bZ(U,0,a.$,a.$,0,0,1);else if(E.canonical.isChildOf(l.canonical)){const q=E.canonical.z-l.canonical.z,Z=E.canonical.x-(E.canonical.x>>q<<q),re=E.canonical.y-(E.canonical.y>>q<<q),ue=a.$>>q;a.bZ(U,0,ue,ue,0,0,1),a.M(U,U,[-Z*ue,-re*ue,0])}else{if(!l.canonical.isChildOf(E.canonical))continue;{const q=l.canonical.z-E.canonical.z,Z=l.canonical.x-(l.canonical.x>>q<<q),re=l.canonical.y-(l.canonical.y>>q<<q),ue=a.$>>q;a.bZ(U,0,a.$,a.$,0,0,1),a.M(U,U,[Z*ue,re*ue,0]),a.N(U,U,[1/2**q,1/2**q,0])}}T.terrainRttPosMatrix32f=new Float32Array(U),p[C]=T}return p}_getTerrainCoordsForTileRanges(l,p){const C={};for(const E of this._renderableTilesKeys){const T=this._tiles[E].tileID;if(!this._isWithinTileRanges(T,p))continue;const U=l.clone(),q=a.ba();if(T.canonical.z===l.canonical.z){const Z=l.canonical.x-T.canonical.x,re=l.canonical.y-T.canonical.y;a.bZ(q,0,a.$,a.$,0,0,1),a.M(q,q,[Z*a.$,re*a.$,0])}else if(T.canonical.z>l.canonical.z){const Z=T.canonical.z-l.canonical.z,re=T.canonical.x-(T.canonical.x>>Z<<Z),ue=T.canonical.y-(T.canonical.y>>Z<<Z),Ce=l.canonical.x-(T.canonical.x>>Z),ge=l.canonical.y-(T.canonical.y>>Z),Ue=a.$>>Z;a.bZ(q,0,Ue,Ue,0,0,1),a.M(q,q,[-re*Ue+Ce*a.$,-ue*Ue+ge*a.$,0])}else{const Z=l.canonical.z-T.canonical.z,re=l.canonical.x-(l.canonical.x>>Z<<Z),ue=l.canonical.y-(l.canonical.y>>Z<<Z),Ce=(l.canonical.x>>Z)-T.canonical.x,ge=(l.canonical.y>>Z)-T.canonical.y,Ue=a.$<<Z;a.bZ(q,0,Ue,Ue,0,0,1),a.M(q,q,[re*a.$+Ce*Ue,ue*a.$+ge*Ue,0])}U.terrainRttPosMatrix32f=new Float32Array(q),C[E]=U}return C}getSourceTile(l,p){const C=this.sourceCache._source;let E=l.overscaledZ-this.deltaZoom;if(E>C.maxzoom&&(E=C.maxzoom),E<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(E).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!T||!T.dem)&&p)for(;E>=C.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(l.scaledTo(E--).key);return T}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,p){return p[l.canonical.z]&&l.canonical.x>=p[l.canonical.z].minTileX&&l.canonical.x<=p[l.canonical.z].maxTileX&&l.canonical.y>=p[l.canonical.z].minTileY&&l.canonical.y<=p[l.canonical.z].maxTileY}}class jf{constructor(l,p,C){this._meshCache={},this.painter=l,this.sourceCache=new ul(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,C,E=a.$){var T;if(!(p>=0&&p<E&&C>=0&&C<E))return 0;const U=this.getTerrainData(l),q=(T=U.tile)===null||T===void 0?void 0:T.dem;if(!q)return 0;const Z=a.cs([],[p/E*a.$,C/E*a.$],U.u_terrain_matrix),re=[Z[0]*q.dim,Z[1]*q.dim],ue=Math.floor(re[0]),Ce=Math.floor(re[1]),ge=re[0]-ue,Ue=re[1]-Ce;return q.get(ue,Ce)*(1-ge)*(1-Ue)+q.get(ue+1,Ce)*ge*(1-Ue)+q.get(ue,Ce+1)*(1-ge)*Ue+q.get(ue+1,Ce+1)*ge*Ue}getElevationForLngLatZoom(l,p){if(!a.ct(p,l.wrap()))return 0;const{tileID:C,mercatorX:E,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(C,E%a.$,T%a.$,a.$)}getElevation(l,p,C,E=a.$){return this.getDEMElevation(l,p,C,E)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const E=this.painter.context,T=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(E,T,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(E,new a.R({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ai([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const E=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(E,p.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),p.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const E=this.sourceCache.sourceCache._source.maxzoom;let T=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=E?T=l.canonical.z-E:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const U=l.canonical.x-(l.canonical.x>>T<<T),q=l.canonical.y-(l.canonical.y>>T<<T),Z=a.cu(new Float64Array(16),[1/(a.$<<T),1/(a.$<<T),0]);a.M(Z,Z,[U*a.$,q*a.$,0]),this._demMatrixCache[l.key]={matrix:Z,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,C=p.width/devicePixelRatio,E=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===E||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:C,height:E,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:C,height:E,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,E,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,E))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,U=0;T<this._coordsTextureSize;T++)for(let q=0;q<this._coordsTextureSize;q++,U+=4)p[U+0]=255&q,p[U+1]=255&T,p[U+2]=q>>8<<4|T>>8,p[U+3]=0;const C=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),E=new a.T(l,C,l.gl.RGBA,{premultiply:!1});return E.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=E,E}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),C=this.painter.context,E=C.gl,T=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),U=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),q=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(T,q-U-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null);const Z=p[0]+(p[2]>>4<<8),re=p[1]+((15&p[2])<<8),ue=this.coordsIndex[255-p[3]],Ce=ue&&this.sourceCache.getTileByID(ue);if(!Ce)return null;const ge=this._coordsTextureSize,Ue=(1<<Ce.tileID.canonical.z)*ge;return new a.a1((Ce.tileID.canonical.x*ge+Z)/Ue+Ce.tileID.wrap,(Ce.tileID.canonical.y*ge+re)/Ue,this.getElevation(Ce.tileID,Z,re,ge))}depthAtPoint(l){const p=new Uint8Array(4),C=this.painter.context,E=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),E.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(l){var p;const C=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,E=C&&l.canonical.y===0,T=C&&l.canonical.y===(1<<l.canonical.z)-1,U=`m_${E?"n":""}_${T?"s":""}`;if(this._meshCache[U])return this._meshCache[U];const q=this.painter.context,Z=new a.cv,re=new a.aN,ue=this.meshSize,Ce=a.$/ue,ge=ue*ue;for(let ct=0;ct<=ue;ct++)for(let Ot=0;Ot<=ue;Ot++)Z.emplaceBack(Ot*Ce,ct*Ce,0);for(let ct=0;ct<ge;ct+=ue+1)for(let Ot=0;Ot<ue;Ot++)re.emplaceBack(Ot+ct,ue+Ot+ct+1,ue+Ot+ct+2),re.emplaceBack(Ot+ct,ue+Ot+ct+2,Ot+ct+1);const Ue=Z.length,We=Ue+(ue+1),Je=(ue+1)*ue,He=E?a.bh:0,tt=E?0:1,at=T?a.bi:a.$,yt=T?0:1;for(let ct=0;ct<=ue;ct++)Z.emplaceBack(ct*Ce,He,tt);for(let ct=0;ct<=ue;ct++)Z.emplaceBack(ct*Ce,at,yt);for(let ct=0;ct<ue;ct++)re.emplaceBack(Je+ct,We+ct,We+ct+1),re.emplaceBack(Je+ct,We+ct+1,Je+ct+1),re.emplaceBack(0+ct,Ue+ct+1,Ue+ct),re.emplaceBack(0+ct,0+ct+1,Ue+ct+1);const lt=Z.length,vt=lt+2*(ue+1);for(const ct of[0,1])for(let Ot=0;Ot<=ue;Ot++)for(const Qt of[0,1])Z.emplaceBack(ct*a.$,Ot*Ce,Qt);for(let ct=0;ct<2*ue;ct+=2)re.emplaceBack(lt+ct,lt+ct+1,lt+ct+3),re.emplaceBack(lt+ct,lt+ct+3,lt+ct+2),re.emplaceBack(vt+ct,vt+ct+3,vt+ct+1),re.emplaceBack(vt+ct,vt+ct+2,vt+ct+3);const bt=new ol(q.createVertexBuffer(Z,hc.members),q.createIndexBuffer(re),a.aM.simpleSegment(0,0,Z.length,re.length));return this._meshCache[U]=bt,bt}getMeshFrameDelta(l){return 2*Math.PI*a.bu/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,p){var C;const{tileID:E}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(C=this.getMinMaxElevation(E).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=p.dem.min*this.exaggeration,C.maxElevation=p.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,p){const C=a.a1.fromLngLat(l.wrap()),E=(1<<p)*a.$,T=C.x*E,U=C.y*E,q=Math.floor(T/a.$),Z=Math.floor(U/a.$);return{tileID:new a.Z(p,0,p,q,Z),mercatorX:T,mercatorY:U}}}class B1{constructor(l,p,C){this._context=l,this._size=p,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(C.texture),{id:l,fbo:p,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>l.id!==p)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const xl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Uu{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new B1(l.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter((C=>!l._layers[C].isHidden(p))),this._coordsAscending={};for(const C in l.sourceCaches){this._coordsAscending[C]={};const E=l.sourceCaches[C].getVisibleCoordinates(),T=l.sourceCaches[C].getSource(),U=T instanceof xn?T.terrainTileRanges:null;for(const q of E){const Z=this.terrain.sourceCache.getTerrainCoords(q,U);for(const re in Z)this._coordsAscending[C][re]||(this._coordsAscending[C][re]=[]),this._coordsAscending[C][re].push(Z[re])}}this._coordsAscendingStr={};for(const C of l._order){const E=l._layers[C],T=E.source;if(xl[E.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const U in this._coordsAscending[T])this._coordsAscendingStr[T][U]=this._coordsAscending[T][U].map((q=>q.key)).sort().join()}}for(const C of this._renderableTiles)for(const E in this._coordsAscendingStr){const T=this._coordsAscendingStr[E][C.tileID.key];T&&T!==C.rttCoords[E]&&(C.rtt=[])}}renderLayer(l,p){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),E=l.type,T=this.painter,U=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(xl[E]&&(this._prevType&&xl[this._prevType]||this._stacks.push([]),this._prevType=E,this._stacks[this._stacks.length-1].push(l.id),!U))return!0;if(xl[this._prevType]||xl[E]&&U){this._prevType=E;const q=this._stacks.length-1,Z=this._stacks[q]||[];for(const re of this._renderableTiles){if(this.pool.isFull()&&(EA(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(re),re.rtt[q]){const Ce=this.pool.getObjectForId(re.rtt[q].id);if(Ce.stamp===re.rtt[q].stamp){this.pool.useObject(Ce);continue}}const ue=this.pool.getOrCreateFreeObject();this.pool.useObject(ue),this.pool.stampObject(ue),re.rtt[q]={id:ue.id,stamp:ue.stamp},T.context.bindFramebuffer.set(ue.fbo.framebuffer),T.context.clear({color:a.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Ce=0;Ce<Z.length;Ce++){const ge=T.style._layers[Z[Ce]],Ue=ge.source?this._coordsAscending[ge.source][re.tileID.key]:[re.tileID];T.context.viewport.set([0,0,ue.fbo.width,ue.fbo.height]),T._renderTileClippingMasks(ge,Ue,!0),T.renderLayer(T,T.style.sourceCaches[ge.source],ge,Ue,C),ge.source&&(re.rttCoords[ge.source]=this._coordsAscendingStr[ge.source][re.tileID.key])}}return EA(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),xl[E]}return!1}}const Bs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},cs=c,co={hash:!1,interactive:!0,bearingSnap:7,attributionControl:td,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Sr={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class So{constructor(l,p,C=!1){this.mousedown=T=>{this.startMove(T,R.mousePos(this.element,T)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,R.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),R.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const E=new Xh;this._rotatePitchHandler=new aA({clickTolerance:3,move:(T,U)=>{const q=p.getBoundingClientRect(),Z=new a.P((q.bottom-q.top)/2,(q.right-q.left)/2);return{bearingDelta:a.cn(new a.P(T.x,U.y),U,Z),pitchDelta:C?-.5*(U.y-T.y):void 0}},moveStateManager:E,enable:!0,assignEvents:()=>{}}),this.map=l,R.addEventListener(p,"mousedown",this.mousedown),R.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(p,"touchcancel",this.reset)}startMove(l,p){this._rotatePitchHandler.dragStart(l,p),R.disableDrag()}move(l,p){const C=this.map,{bearingDelta:E,pitchDelta:T}=this._rotatePitchHandler.dragMove(l,p)||{};E&&C.setBearing(C.getBearing()+E),T&&C.setPitch(C.getPitch()+T)}off(){const l=this.element;R.removeEventListener(l,"mousedown",this.mousedown),R.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend),R.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend)}}let Ro;function nd(O,l,p,C=!1){if(C||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return O?.wrap();const E=new a.S(O.lng,O.lat);if(O=new a.S(O.lng,O.lat),l){const T=new a.S(O.lng-360,O.lat),U=new a.S(O.lng+360,O.lat),q=p.locationToScreenPoint(O).distSqr(l);p.locationToScreenPoint(T).distSqr(l)<q?O=T:p.locationToScreenPoint(U).distSqr(l)<q&&(O=U)}for(;Math.abs(O.lng-p.center.lng)>180;){const T=p.locationToScreenPoint(O);if(T.x>=0&&T.y>=0&&T.x<=p.width&&T.y<=p.height)break;O.lng>p.center.lng?O.lng-=360:O.lng+=360}return O.lng!==E.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(O))?O:E}const IA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kA(O,l,p){const C=O.classList;for(const E in IA)C.remove(`maplibregl-${p}-anchor-${E}`);C.add(`maplibregl-${p}-anchor-${l}`)}class TA extends a.E{constructor(l){if(super(),this._onKeyPress=p=>{const C=p.code,E=p.charCode||p.keyCode;C!=="Space"&&C!=="Enter"&&E!==32&&E!==13||this.togglePopup()},this._onMapClick=p=>{const C=p.originalEvent.target,E=this._element;this._popup&&(C===E||E.contains(C))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=nd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(E=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${IA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${E}`),x.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div");const p=R.createNS("http://www.w3.org/2000/svg","svg"),C=41,E=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${C}px`),p.setAttributeNS(null,"width",`${E}px`),p.setAttributeNS(null,"viewBox",`0 0 ${E} ${C}`);const T=R.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const U=R.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");const q=R.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of Z){const at=R.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",tt.rx),at.setAttributeNS(null,"ry",tt.ry),q.appendChild(at)}const re=R.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"fill",this._color);const ue=R.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),re.appendChild(ue);const Ce=R.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"opacity","0.25"),Ce.setAttributeNS(null,"fill","#000000");const ge=R.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ce.appendChild(ge);const Ue=R.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ue.setAttributeNS(null,"fill","#FFFFFF");const We=R.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Je=R.createNS("http://www.w3.org/2000/svg","circle");Je.setAttributeNS(null,"fill","#000000"),Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"cx","5.5"),Je.setAttributeNS(null,"cy","5.5"),Je.setAttributeNS(null,"r","5.4999962");const He=R.createNS("http://www.w3.org/2000/svg","circle");He.setAttributeNS(null,"fill","#FFFFFF"),He.setAttributeNS(null,"cx","5.5"),He.setAttributeNS(null,"cy","5.5"),He.setAttributeNS(null,"r","5.4999962"),We.appendChild(Je),We.appendChild(He),U.appendChild(q),U.appendChild(re),U.appendChild(Ce),U.appendChild(Ue),U.appendChild(We),p.appendChild(U),p.setAttributeNS(null,"height",C*this._scale+"px"),p.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),kA(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.S.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const E=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,C;const E=(p=this._map)===null||p===void 0?void 0:p.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!E||T){const Ue=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ue&&(this._element.style.opacity=Ue))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const U=this._map,q=U.terrain.depthAtPoint(this._pos),Z=U.terrain.getElevationForLngLatZoom(this._lngLat,U.transform.tileZoom);if(U.transform.lngLatToCameraDepth(this._lngLat,Z)-q<.006)return void(this._element.style.opacity=this._opacity);const re=-this._offset.y/U.transform.pixelsPerMeter,ue=Math.sin(U.getPitch()*Math.PI/180)*re,Ce=U.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ge=U.transform.lngLatToCameraDepth(this._lngLat,Z+ue)-Ce>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&ge&&this._popup.remove(),this._element.style.opacity=ge?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return(this._opacity===void 0||l===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const id={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let dc=0,Gd=!1;const gs={maxWidth:100,unit:"metric"};function Wd(O,l,p){const C=p&&p.maxWidth||100,E=O._container.clientHeight/2,T=O._container.clientWidth/2,U=O.unproject([T-C/2,E]),q=O.unproject([T+C/2,E]),Z=Math.round(O.project(q).x-O.project(U).x),re=Math.min(C,Z,O._container.clientWidth),ue=U.distanceTo(q);if(p&&p.unit==="imperial"){const Ce=3.2808*ue;Ce>5280?RA(l,re,Ce/5280,O._getUIString("ScaleControl.Miles")):RA(l,re,Ce,O._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?RA(l,re,ue/1852,O._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?RA(l,re,ue/1e3,O._getUIString("ScaleControl.Kilometers")):RA(l,re,ue,O._getUIString("ScaleControl.Meters"))}function RA(O,l,p,C){const E=(function(T){const U=Math.pow(10,`${Math.floor(T)}`.length-1);let q=T/U;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:(function(Z){const re=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*re)/re})(q),U*q})(p);O.style.width=l*(E/p)+"px",O.innerHTML=`${E}&nbsp;${C}`}const Tp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Qd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hm(O){if(O){if(typeof O=="number"){const l=Math.round(Math.abs(O)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,O),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-O),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(O,0),right:new a.P(-O,0)}}if(O instanceof a.P||Array.isArray(O)){const l=a.P.convert(O);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(O.center||[0,0]),top:a.P.convert(O.top||[0,0]),"top-left":a.P.convert(O["top-left"]||[0,0]),"top-right":a.P.convert(O["top-right"]||[0,0]),bottom:a.P.convert(O.bottom||[0,0]),"bottom-left":a.P.convert(O["bottom-left"]||[0,0]),"bottom-right":a.P.convert(O["bottom-right"]||[0,0]),left:a.P.convert(O.left||[0,0]),right:a.P.convert(O.right||[0,0])}}return Hm(new a.P(0,0))}const qd=c;s.AJAXError=a.cz,s.Event=a.l,s.Evented=a.E,s.LngLat=a.S,s.MercatorCoordinate=a.a1,s.Point=a.P,s.addProtocol=a.cA,s.config=a.a,s.removeProtocol=a.cB,s.AttributionControl=qa,s.BoxZoomHandler=Hh,s.CanvasSource=pn,s.CooperativeGesturesHandler=uh,s.DoubleClickZoomHandler=wo,s.DragPanHandler=ed,s.DragRotateHandler=zf,s.EdgeInsets=Ko,s.FullscreenControl=class extends a.E{constructor(O={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const O=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=si,s.GeolocateControl=class extends a.E{constructor(O){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new a.S(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,E=this._map.getBearing(),T=a.e({bearing:E},this.options.fitBoundsOptions),U=St.fromLngLat(p,C);this._map.fitBounds(U,T,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new a.S(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Gd)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new TA({element:this._dotElement}),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new TA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const C=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||C||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},id,O)}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(Ro!==void 0&&!l)return Ro;if(window.navigator.permissions===void 0)return Ro=!!window.navigator.geolocation,Ro;try{Ro=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ro=!!window.navigator.geolocation}return Ro}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,dc=0,Gd=!1}_isOutOfMapMaxBounds(O){const l=this._map.getMaxBounds(),p=O.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const O=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&O))return;const l=this._map.project(O),p=this._map.unproject([l.x+100,l.y]),C=O.distanceTo(p)/100,E=2*this._accuracy/C;this._circleElement.style.width=`${E.toFixed(2)}px`,this._circleElement.style.height=`${E.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":dc--,Gd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),dc++,dc>1?(O={maximumAge:6e5,timeout:0},Gd=!0):(O=this.options.positionOptions,Gd=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var O;const l=(O=this._map.getProjection())===null||O===void 0?void 0:O.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var O;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((O=this._map.getProjection())===null||O===void 0?void 0:O.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=R.create("button","maplibregl-ctrl-globe",this._container),R.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=cc,s.ImageSource=xn,s.KeyboardHandler=v0,s.LngLatBounds=St,s.LogoControl=hh,s.Map=class extends _i{constructor(O){var l,p;a.cw.mark(a.cx.create);const C=Object.assign(Object.assign(Object.assign({},co),O),{canvasContextAttributes:Object.assign(Object.assign({},co.canvasContextAttributes),O.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const E=new ss,T=new Ni;if(C.minZoom!==void 0&&E.setMinZoom(C.minZoom),C.maxZoom!==void 0&&E.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&E.setMinPitch(C.minPitch),C.maxPitch!==void 0&&E.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&E.setRenderWorldCopies(C.renderWorldCopies),C.transformConstrain!==null&&E.setConstrain(C.transformConstrain),super(E,T,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new us,this._controls=[],this._mapId=a.a7(),this._contextLost=q=>{q.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:q}))},this._contextRestored=q=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:q}))},this._onMapScroll=q=>{if(q.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Bs),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.transformConstrain=C.transformConstrain,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Y.addThrottleControl((()=>this.isMoving())),this._requestManager=new z(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let q=!1;const Z=kp((re=>{this._trackResize&&!this._removed&&(this.resize(re),this.redraw())}),50);this._resizeObserver=new ResizeObserver((re=>{q?Z(re):q=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ri(this,C),this._hash=C.hash&&new cc(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.e({},C.fitBoundsOptions,{duration:0}))));const U=typeof C.style=="string"||((p=(l=C.style)===null||l===void 0?void 0:l.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,U),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new qa(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new hh,C.logoPosition),this.on("style.load",(()=>{if(U||this._resizeTransform(),this.transform.unmodified){const q=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(q)}})),this.on("data",(q=>{this._update(q.dataType==="style"),this.fire(new a.l(`${q.dataType}data`,q))})),this.on("dataloading",(q=>{this.fire(new a.l(`${q.dataType}dataloading`,q))})),this.on("dataabort",(q=>{this.fire(new a.l("sourcedataabort",q))}))}_getMapId(){return this._mapId}setGlobalStateProperty(O,l){return this.style.setGlobalStateProperty(O,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(O,l){if(l===void 0&&(l=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=O.onAdd(this);this._controls.push(O);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(O);return l>-1&&this._controls.splice(l,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}coveringTiles(O){return In(this.transform,O)}calculateCameraOptionsFromTo(O,l,p,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(O,l,p,C)}resize(O,l=!0){const[p,C]=this._containerDimensions(),E=this._getClampedPixelRatio(p,C);if(this._resizeCanvas(p,C,E),this.painter.resize(p,C,E),this.painter.overLimit()){const U=this.painter.context.gl;this._maxCanvasSize=[U.drawingBufferWidth,U.drawingBufferHeight];const q=this._getClampedPixelRatio(p,C);this._resizeCanvas(p,C,q),this.painter.resize(p,C,q)}this._resizeTransform(l);const T=!this._moving;return T&&(this.stop(),this.fire(new a.l("movestart",O)).fire(new a.l("move",O))),this.fire(new a.l("resize",O)),T&&this.fire(new a.l("moveend",O)),this}_resizeTransform(O=!0){var l;const[p,C]=this._containerDimensions();this.transform.resize(p,C,O),(l=this._requestedCameraState)===null||l===void 0||l.resize(p,C,O)}_getClampedPixelRatio(O,l){const{0:p,1:C}=this._maxCanvasSize,E=this.getPixelRatio(),T=O*E,U=l*E;return Math.min(T>p?p/T:1,U>C?C/U:1)*E}getPixelRatio(){var O;return(O=this._overridePixelRatio)!==null&&O!==void 0?O:devicePixelRatio}setPixelRatio(O){this._overridePixelRatio=O,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(St.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.setMinZoom(O),this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.setMaxZoom(O),this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.setMinPitch(O),this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(O>=this.transform.minPitch)return this.transform.setMaxPitch(O),this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.setRenderWorldCopies(O),this._update()}setTransformConstrain(O){return this.transform.setConstrain(O),this._update()}project(O){return this.transform.locationToScreenPoint(a.S.convert(O),this.style&&this.terrain)}unproject(O){return this.transform.screenPointToLocation(a.P.convert(O),this.terrain)}isMoving(){var O;return this._moving||((O=this.handlers)===null||O===void 0?void 0:O.isMoving())}isZooming(){var O;return this._zooming||((O=this.handlers)===null||O===void 0?void 0:O.isZooming())}isRotating(){var O;return this._rotating||((O=this.handlers)===null||O===void 0?void 0:O.isRotating())}_createDelegatedListener(O,l,p){if(O==="mouseenter"||O==="mouseover"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:T=>{const U=l.filter((Z=>this.getLayer(Z))),q=U.length!==0?this.queryRenderedFeatures(T.point,{layers:U}):[];q.length?C||(C=!0,p.call(this,new zs(O,this,T.originalEvent,{features:q}))):C=!1},mouseout:()=>{C=!1}}}}if(O==="mouseleave"||O==="mouseout"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:U=>{const q=l.filter((Z=>this.getLayer(Z)));(q.length!==0?this.queryRenderedFeatures(U.point,{layers:q}):[]).length?C=!0:C&&(C=!1,p.call(this,new zs(O,this,U.originalEvent)))},mouseout:U=>{C&&(C=!1,p.call(this,new zs(O,this,U.originalEvent)))}}}}{const C=E=>{const T=l.filter((q=>this.getLayer(q))),U=T.length!==0?this.queryRenderedFeatures(E.point,{layers:T}):[];U.length&&(E.features=U,p.call(this,E),delete E.features)};return{layers:l,listener:p,delegates:{[O]:C}}}}_saveDelegatedListener(O,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(l)}_removeDelegatedListener(O,l,p){if(!this._delegatedListeners||!this._delegatedListeners[O])return;const C=this._delegatedListeners[O];for(let E=0;E<C.length;E++){const T=C[E];if(T.listener===p&&T.layers.length===l.length&&T.layers.every((U=>l.includes(U)))){for(const U in T.delegates)this.off(U,T.delegates[U]);return void C.splice(E,1)}}}on(O,l,p){if(p===void 0)return super.on(O,l);const C=typeof l=="string"?[l]:l,E=this._createDelegatedListener(O,C,p);this._saveDelegatedListener(O,E);for(const T in E.delegates)this.on(T,E.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(O,C,p)}}}once(O,l,p){if(p===void 0)return super.once(O,l);const C=typeof l=="string"?[l]:l,E=this._createDelegatedListener(O,C,p);for(const T in E.delegates){const U=E.delegates[T];E.delegates[T]=(...q)=>{this._removeDelegatedListener(O,C,p),U(...q)}}this._saveDelegatedListener(O,E);for(const T in E.delegates)this.once(T,E.delegates[T]);return this}off(O,l,p){return p===void 0?super.off(O,l):(this._removeDelegatedListener(O,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(O,l){if(!this.style)return[];let p;const C=O instanceof a.P||Array.isArray(O),E=C?O:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:O)||{},E instanceof a.P||typeof E[0]=="number")p=[a.P.convert(E)];else{const T=a.P.convert(E[0]),U=a.P.convert(E[1]);p=[T,new a.P(U.x,T.y),U,new a.P(T.x,U.y),T]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(O,l){return this.style.querySourceFeatures(O,l)}setStyle(O,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(O,l))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const l=this._locale[O];if(l==null)throw new Error(`Missing UI string '${O}'`);return l}_updateStyle(O,l){var p,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(O,l)));const E=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!O)),O?(this.style=new Dd(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O,l,E):this.style.loadJSON(O,l,E),this):((C=(p=this.style)===null||p===void 0?void 0:p.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Dd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,l){if(typeof O=="string"){const p=this._requestManager.transformRequest(O,"Style");a.j(p,new AbortController).then((C=>{this._updateDiff(C.data,l)})).catch((C=>{C&&this.fire(new a.k(C))}))}else typeof O=="object"&&this._updateDiff(O,l)}_updateDiff(O,l){try{this.style.setState(O,l)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(O,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(O,l){return this._lazyInitEmptyStyle(),this.style.addSource(O,l),this._update(!0)}isSourceLoaded(O){const l=this.style&&this.style.sourceCaches[O];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),O){const l=this.style.sourceCaches[O.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${O.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const C=this.style._layers[p];C.type==="hillshade"&&C.source===O.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),C.type==="color-relief"&&C.source===O.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new jf(this.painter,l,O),this.painter.renderToTexture=new Uu(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var C;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==O.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=p.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:O})),this}getTerrain(){var O,l;return(l=(O=this.terrain)===null||O===void 0?void 0:O.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const l in O){const p=O[l]._tiles;for(const C in p){const E=p[C];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}setSourceTileLodParams(O,l,p){if(p){const C=this.getSource(p);if(!C)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);C.calculateTileZoom=gt(Math.max(1,O),Math.max(1,l))}else for(const C in this.style.sourceCaches)this.style.sourceCaches[C].getSource().calculateTileZoom=gt(Math.max(1,O),Math.max(1,l));return this._update(!0),this}refreshTiles(O,l){const p=this.style.sourceCaches[O];if(!p)throw new Error(`There is no source cache with ID "${O}", cannot refresh tile`);l===void 0?p.reload(!0):p.refreshTiles(l.map((C=>new a.a4(C.z,C.x,C.y))))}addImage(O,l,p={}){const{pixelRatio:C=1,sdf:E=!1,stretchX:T,stretchY:U,content:q,textFitWidth:Z,textFitHeight:re}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ue,height:Ce,data:ge}=l,Ue=l;return this.style.addImage(O,{data:new a.R({width:ue,height:Ce},new Uint8Array(ge)),pixelRatio:C,stretchX:T,stretchY:U,content:q,textFitWidth:Z,textFitHeight:re,sdf:E,version:0,userImage:Ue}),Ue.onAdd&&Ue.onAdd(this,O),this}}{const{width:ue,height:Ce,data:ge}=x.getImageData(l);this.style.addImage(O,{data:new a.R({width:ue,height:Ce},ge),pixelRatio:C,stretchX:T,stretchY:U,content:q,textFitWidth:Z,textFitHeight:re,sdf:E,version:0})}}updateImage(O,l){const p=this.style.getImage(O);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||a.b(l)?x.getImageData(l):l,{width:E,height:T,data:U}=C;if(E===void 0||T===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==p.data.width||T!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const q=!(l instanceof HTMLImageElement||a.b(l));return p.data.replace(U,q),this.style.updateImage(O,p),this}getImage(O){return this.style.getImage(O)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O){return Y.getImage(this._requestManager.transformRequest(O,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(O,l){return this._lazyInitEmptyStyle(),this.style.addLayer(O,l),this._update(!0)}moveLayer(O,l){return this.style.moveLayer(O,l),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(O,l,p){return this.style.setLayerZoomRange(O,l,p),this._update(!0)}setFilter(O,l,p={}){return this.style.setFilter(O,l,p),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,l,p,C={}){return this.style.setPaintProperty(O,l,p,C),this._update(!0)}getPaintProperty(O,l){return this.style.getPaintProperty(O,l)}setLayoutProperty(O,l,p,C={}){return this.style.setLayoutProperty(O,l,p,C),this._update(!0)}getLayoutProperty(O,l){return this.style.getLayoutProperty(O,l)}setGlyphs(O,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(O,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(O,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(O,l,p,(C=>{C||this._update(!0)})),this}removeSprite(O){return this._lazyInitEmptyStyle(),this.style.removeSprite(O),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(O,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(O,l,(p=>{p||this._update(!0)})),this}setLight(O,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(O,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(O,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(O,l){return this.style.setFeatureState(O,l),this._update()}removeFeatureState(O,l){return this.style.removeFeatureState(O,l),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,l=0;return this._container&&(O=this._container.clientWidth||400,l=this._container.clientHeight||300),[O,l]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map");const l=this._canvasContainer=R.create("div","maplibregl-canvas-container",O);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),C=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],C);const E=this._controlContainer=R.create("div","maplibregl-control-container",O),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((U=>{T[U]=R.create("div",`maplibregl-ctrl-${U} `,E)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(O,l,p){this._canvas.width=Math.floor(p*O),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${O}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const O=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(C=>{l={requestedAttributes:O},C&&(l.statusMessage=C.statusMessage,l.type=C.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,O):this._canvas.getContext("webgl2",O)||this._canvas.getContext("webgl",O),!p){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new OA(p,this.transform),F.testSupport(p)}migrateProjection(O,l){super.migrateProjection(O,l),this.painter.transform=O,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){var l,p,C,E,T;const U=this._idleTriggered?this._fadeDuration:0,q=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let Z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ce=this.transform.zoom,ge=B();this.style.zoomHistory.update(Ce,ge);const Ue=new a.F(Ce,{now:ge,fadeDuration:U,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),We=Ue.crossFadingFactor();We===1&&We===this._crossFadingFactor||(Z=!0,this._crossFadingFactor=We),this.style.update(Ue)}const re=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==q;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((E=this.style.projection)===null||E===void 0?void 0:E.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||re)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,U,this._crossSourceCollisions,re),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:U,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||Z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ue=this._sourcesDirty||this._styleDirty||this._placementDirty;return ue||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ue||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var O;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Y.removeThrottleControl(this._imageQueueHandle),(O=this._resizeObserver)===null||O===void 0||O.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,(O=>{a.cw.frame(O),this._frameRequest=null;try{this._render(O)}catch(l){if(!a.cy(l)&&!(function(p){return p.message===m0})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}get version(){return cs}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(O){return this._lazyInitEmptyStyle(),this.style.setProjection(O),this._update(!0)}},s.MapMouseEvent=zs,s.MapTouchEvent=Ta,s.MapWheelEvent=Gl,s.Marker=TA,s.NavigationControl=class{constructor(O){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,p)=>{const C=this._map._getUIString(`NavigationControl.${p}`);l.title=C,l.setAttribute("aria-label",C)},this.options=a.e({},Sr,O),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),R.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),R.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=R.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new So(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,l){const p=R.create("button",O,this._container);return p.type="button",p.addEventListener("click",l),p}},s.Popup=class extends a.E{constructor(O){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=R.create("div","maplibregl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const U of this.options.className.split(" "))this._container.classList.add(U);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=nd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const p=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const E=Hm(this.options.offset);if(!C){const U=this._container.offsetWidth,q=this._container.offsetHeight;let Z;Z=p.y+E.bottom.y<q?["top"]:p.y>this._map.transform.height-q?["bottom"]:[],p.x<U/2?Z.push("left"):p.x>this._map.transform.width-U/2&&Z.push("right"),C=Z.length===0?"bottom":Z.join("-")}let T=p.add(E[C]);this.options.subpixelPositioning||(T=T.round()),R.setTransform(this._container,`${IA[C]} translate(${T.x}px,${T.y}px)`),kA(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Tp),O)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=a.S.convert(O),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const l=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=O;C=p.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var O;return(O=this._container)===null||O===void 0?void 0:O.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){return this._container&&this._container.classList.add(O),this}removeClassName(O){return this._container&&this._container.classList.remove(O),this}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}setSubpixelPositioning(O){this.options.subpixelPositioning=O}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(Qd);O&&O.focus()}},s.RasterDEMTileSource=zn,s.RasterTileSource=Pn,s.ScaleControl=class{constructor(O){this._onMove=()=>{Wd(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Wd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},gs),O)}getDefaultPosition(){return"bottom-left"}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=ll,s.Style=Dd,s.TerrainControl=class{constructor(O){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=O}onAdd(O){return this._map=O,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Du,s.TwoFingersTouchRotateHandler=Ru,s.TwoFingersTouchZoomHandler=Ff,s.TwoFingersTouchZoomRotateHandler=ma,s.VectorTileSource=en,s.VideoSource=Rn,s.addSourceType=(O,l)=>a._(void 0,void 0,void 0,(function*(){if(Un(O))throw new Error(`A source type called "${O}" already exists.`);((p,C)=>{Hn[p]=C})(O,l)})),s.clearPrewarmedResources=function(){const O=it;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(ze),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=Bi,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return le().getRTLTextPluginStatus()},s.getVersion=function(){return qd},s.getWorkerCount=function(){return we.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(O){return Ie().broadcast("IS",O)},s.isTimeFrozen=function(){return S.isFrozen()},s.prewarm=function(){It().acquire(ze)},s.restoreNow=function(){S.restoreNow()},s.setMaxParallelImageRequests=function(O){a.a.MAX_PARALLEL_IMAGE_REQUESTS=O},s.setNow=function(O){S.setNow(O)},s.setRTLTextPlugin=function(O,l){return le().setRTLTextPlugin(O,l)},s.setWorkerCount=function(O){we.workerCount=O},s.setWorkerUrl=function(O){a.a.WORKER_URL=O}}));var o=t;return o}))})(aw)),aw.exports}var ufe=lfe();const g_=eu(ufe);var G5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function $X(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var K2={exports:{}};K2.exports;var nz;function cfe(){return nz||(nz=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",x="[object Error]",S="[object Function]",B="[object GeneratorFunction]",R="[object Map]",F="[object Number]",j="[object Null]",W="[object Object]",H="[object Promise]",$="[object Proxy]",N="[object RegExp]",Y="[object Set]",z="[object String]",ne="[object Symbol]",ae="[object Undefined]",ve="[object WeakMap]",pe="[object ArrayBuffer]",be="[object DataView]",Ee="[object Float32Array]",Te="[object Float64Array]",je="[object Int8Array]",Re="[object Int16Array]",qe="[object Int32Array]",nt="[object Uint8Array]",ht="[object Uint8ClampedArray]",ke="[object Uint16Array]",Oe="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,we=/^\[object .+?Constructor\]$/,At=/^(?:0|[1-9]\d*)$/,it={};it[Ee]=it[Te]=it[je]=it[Re]=it[qe]=it[nt]=it[ht]=it[ke]=it[Oe]=!0,it[a]=it[c]=it[pe]=it[m]=it[be]=it[v]=it[x]=it[S]=it[R]=it[F]=it[W]=it[N]=it[Y]=it[z]=it[ve]=!1;var Ct=typeof G5=="object"&&G5&&G5.Object===Object&&G5,It=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Ct||It||Function("return this")(),Ie=e&&!e.nodeType&&e,Se=Ie&&!0&&n&&!n.nodeType&&n,Ge=Se&&Se.exports===Ie,st=Ge&&Ct.process,ut=(function(){try{return st&&st.binding&&st.binding("util")}catch{}})(),ft=ut&&ut.isTypedArray;function St(J,ye){for(var Qe=-1,Et=J==null?0:J.length,dn=0,Bn=[];++Qe<Et;){var ci=J[Qe];ye(ci,Qe,J)&&(Bn[dn++]=ci)}return Bn}function kt(J,ye){for(var Qe=-1,Et=ye.length,dn=J.length;++Qe<Et;)J[dn+Qe]=ye[Qe];return J}function en(J,ye){for(var Qe=-1,Et=J==null?0:J.length;++Qe<Et;)if(ye(J[Qe],Qe,J))return!0;return!1}function Pn(J,ye){for(var Qe=-1,Et=Array(J);++Qe<J;)Et[Qe]=ye(Qe);return Et}function zn(J){return function(ye){return J(ye)}}function si(J,ye){return J.has(ye)}function xn(J,ye){return J?.[ye]}function Rn(J){var ye=-1,Qe=Array(J.size);return J.forEach(function(Et,dn){Qe[++ye]=[dn,Et]}),Qe}function pn(J,ye){return function(Qe){return J(ye(Qe))}}function Hn(J){var ye=-1,Qe=Array(J.size);return J.forEach(function(Et){Qe[++ye]=Et}),Qe}var Un=Array.prototype,Tt=Function.prototype,Me=Object.prototype,oe=Ke["__core-js_shared__"],le=Tt.toString,he=Me.hasOwnProperty,se=(function(){var J=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),Ae=Me.toString,xe=RegExp("^"+le.call(he).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=Ge?Ke.Buffer:void 0,Xe=Ke.Symbol,fe=Ke.Uint8Array,De=Me.propertyIsEnumerable,y=Un.splice,rt=Xe?Xe.toStringTag:void 0,Bt=Object.getOwnPropertySymbols,pt=Ye?Ye.isBuffer:void 0,Ht=pn(Object.keys,Object),gt=To(Ke,"DataView"),jn=To(Ke,"Map"),ni=To(Ke,"Promise"),In=To(Ke,"Set"),Ln=To(Ke,"WeakMap"),Zn=To(Object,"create"),Xi=Xo(gt),Di=Xo(jn),ur=Xo(ni),fi=Xo(In),Si=Xo(Ln),er=Xe?Xe.prototype:void 0,nn=er?er.valueOf:void 0;function Ti(J){var ye=-1,Qe=J==null?0:J.length;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function Io(){this.__data__=Zn?Zn(null):{},this.size=0}function rs(J){var ye=this.has(J)&&delete this.__data__[J];return this.size-=ye?1:0,ye}function kr(J){var ye=this.__data__;if(Zn){var Qe=ye[J];return Qe===i?void 0:Qe}return he.call(ye,J)?ye[J]:void 0}function hn(J){var ye=this.__data__;return Zn?ye[J]!==void 0:he.call(ye,J)}function Li(J,ye){var Qe=this.__data__;return this.size+=this.has(J)?0:1,Qe[J]=Zn&&ye===void 0?i:ye,this}Ti.prototype.clear=Io,Ti.prototype.delete=rs,Ti.prototype.get=kr,Ti.prototype.has=hn,Ti.prototype.set=Li;function ii(J){var ye=-1,Qe=J==null?0:J.length;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function Ia(){this.__data__=[],this.size=0}function tu(J){var ye=this.__data__,Qe=ko(ye,J);if(Qe<0)return!1;var Et=ye.length-1;return Qe==Et?ye.pop():y.call(ye,Qe,1),--this.size,!0}function Xs(J){var ye=this.__data__,Qe=ko(ye,J);return Qe<0?void 0:ye[Qe][1]}function Ei(J){return ko(this.__data__,J)>-1}function gl(J,ye){var Qe=this.__data__,Et=ko(Qe,J);return Et<0?(++this.size,Qe.push([J,ye])):Qe[Et][1]=ye,this}ii.prototype.clear=Ia,ii.prototype.delete=tu,ii.prototype.get=Xs,ii.prototype.has=Ei,ii.prototype.set=gl;function Vr(J){var ye=-1,Qe=J==null?0:J.length;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function ka(){this.size=0,this.__data__={hash:new Ti,map:new(jn||ii),string:new Ti}}function nu(J){var ye=Ms(this,J).delete(J);return this.size-=ye?1:0,ye}function fa(J){return Ms(this,J).get(J)}function Ho(J){return Ms(this,J).has(J)}function Rl(J,ye){var Qe=Ms(this,J),Et=Qe.size;return Qe.set(J,ye),this.size+=Qe.size==Et?0:1,this}Vr.prototype.clear=ka,Vr.prototype.delete=nu,Vr.prototype.get=fa,Vr.prototype.has=Ho,Vr.prototype.set=Rl;function Zo(J){var ye=-1,Qe=J==null?0:J.length;for(this.__data__=new Vr;++ye<Qe;)this.add(J[ye])}function Qi(J){return this.__data__.set(J,i),this}function Dl(J){return this.__data__.has(J)}Zo.prototype.add=Zo.prototype.push=Qi,Zo.prototype.has=Dl;function os(J){var ye=this.__data__=new ii(J);this.size=ye.size}function Pl(){this.__data__=new ii,this.size=0}function iu(J){var ye=this.__data__,Qe=ye.delete(J);return this.size=ye.size,Qe}function Ou(J){return this.__data__.get(J)}function Jc(J){return this.__data__.has(J)}function nc(J,ye){var Qe=this.__data__;if(Qe instanceof ii){var Et=Qe.__data__;if(!jn||Et.length<t-1)return Et.push([J,ye]),this.size=++Qe.size,this;Qe=this.__data__=new Vr(Et)}return Qe.set(J,ye),this.size=Qe.size,this}os.prototype.clear=Pl,os.prototype.delete=iu,os.prototype.get=Ou,os.prototype.has=Jc,os.prototype.set=nc;function yl(J,ye){var Qe=so(J),Et=!Qe&&Ko(J),dn=!Qe&&!Et&&Mo(J),Bn=!Qe&&!Et&&!dn&&sl(J),ci=Qe||Et||dn||Bn,Ki=ci?Pn(J.length,String):[],Oi=Ki.length;for(var Bi in J)he.call(J,Bi)&&!(ci&&(Bi=="length"||dn&&(Bi=="offset"||Bi=="parent")||Bn&&(Bi=="buffer"||Bi=="byteLength"||Bi=="byteOffset")||Ga(Bi,Oi)))&&Ki.push(Bi);return Ki}function ko(J,ye){for(var Qe=J.length;Qe--;)if(lu(J[Qe][0],ye))return Qe;return-1}function ic(J,ye,Qe){var Et=ye(J);return so(J)?Et:kt(Et,Qe(J))}function ru(J){return J==null?J===void 0?ae:j:rt&&rt in Object(J)?su(J):Wa(J)}function Oc(J){return ao(J)&&ru(J)==a}function rc(J,ye,Qe,Et,dn){return J===ye?!0:J==null||ye==null||!ao(J)&&!ao(ye)?J!==J&&ye!==ye:Bc(J,ye,Qe,Et,rc,dn)}function Bc(J,ye,Qe,Et,dn,Bn){var ci=so(J),Ki=so(ye),Oi=ci?c:Ls(J),Bi=Ki?c:Ls(ye);Oi=Oi==a?W:Oi,Bi=Bi==a?W:Bi;var pr=Oi==W,lo=Bi==W,br=Oi==Bi;if(br&&Mo(J)){if(!Mo(ye))return!1;ci=!0,pr=!1}if(br&&!pr)return Bn||(Bn=new os),ci||sl(J)?rl(J,ye,Qe,Et,dn,Bn):eA(J,ye,Oi,Qe,Et,dn,Bn);if(!(Qe&r)){var yr=pr&&he.call(J,"__wrapped__"),to=lo&&he.call(ye,"__wrapped__");if(yr||to){var Fo=yr?J.value():J,Br=to?ye.value():ye;return Bn||(Bn=new os),dn(Fo,Br,Qe,Et,Bn)}}return br?(Bn||(Bn=new os),ou(J,ye,Qe,Et,dn,Bn)):!1}function Dh(J){if(!ss(J)||ol(J))return!1;var ye=uu(J)?xe:we;return ye.test(Xo(J))}function pa(J){return ao(J)&&mo(J.length)&&!!it[ru(J)]}function oc(J){if(!Gi(J))return Ht(J);var ye=[];for(var Qe in Object(J))he.call(J,Qe)&&Qe!="constructor"&&ye.push(Qe);return ye}function rl(J,ye,Qe,Et,dn,Bn){var ci=Qe&r,Ki=J.length,Oi=ye.length;if(Ki!=Oi&&!(ci&&Oi>Ki))return!1;var Bi=Bn.get(J);if(Bi&&Bn.get(ye))return Bi==ye;var pr=-1,lo=!0,br=Qe&o?new Zo:void 0;for(Bn.set(J,ye),Bn.set(ye,J);++pr<Ki;){var yr=J[pr],to=ye[pr];if(Et)var Fo=ci?Et(to,yr,pr,ye,J,Bn):Et(yr,to,pr,J,ye,Bn);if(Fo!==void 0){if(Fo)continue;lo=!1;break}if(br){if(!en(ye,function(Br,Ss){if(!si(br,Ss)&&(yr===Br||dn(yr,Br,Qe,Et,Bn)))return br.push(Ss)})){lo=!1;break}}else if(!(yr===to||dn(yr,to,Qe,Et,Bn))){lo=!1;break}}return Bn.delete(J),Bn.delete(ye),lo}function eA(J,ye,Qe,Et,dn,Bn,ci){switch(Qe){case be:if(J.byteLength!=ye.byteLength||J.byteOffset!=ye.byteOffset)return!1;J=J.buffer,ye=ye.buffer;case pe:return!(J.byteLength!=ye.byteLength||!Bn(new fe(J),new fe(ye)));case m:case v:case F:return lu(+J,+ye);case x:return J.name==ye.name&&J.message==ye.message;case N:case z:return J==ye+"";case R:var Ki=Rn;case Y:var Oi=Et&r;if(Ki||(Ki=Hn),J.size!=ye.size&&!Oi)return!1;var Bi=ci.get(J);if(Bi)return Bi==ye;Et|=o,ci.set(J,ye);var pr=rl(Ki(J),Ki(ye),Et,dn,Bn,ci);return ci.delete(J),pr;case ne:if(nn)return nn.call(J)==nn.call(ye)}return!1}function ou(J,ye,Qe,Et,dn,Bn){var ci=Qe&r,Ki=Na(J),Oi=Ki.length,Bi=Na(ye),pr=Bi.length;if(Oi!=pr&&!ci)return!1;for(var lo=Oi;lo--;){var br=Ki[lo];if(!(ci?br in ye:he.call(ye,br)))return!1}var yr=Bn.get(J);if(yr&&Bn.get(ye))return yr==ye;var to=!0;Bn.set(J,ye),Bn.set(ye,J);for(var Fo=ci;++lo<Oi;){br=Ki[lo];var Br=J[br],Ss=ye[br];if(Et)var ZA=ci?Et(Ss,Br,br,ye,J,Bn):Et(Br,Ss,br,J,ye,Bn);if(!(ZA===void 0?Br===Ss||dn(Br,Ss,Qe,Et,Bn):ZA)){to=!1;break}Fo||(Fo=br=="constructor")}if(to&&!Fo){var vl=J.constructor,Tr=ye.constructor;vl!=Tr&&"constructor"in J&&"constructor"in ye&&!(typeof vl=="function"&&vl instanceof vl&&typeof Tr=="function"&&Tr instanceof Tr)&&(to=!1)}return Bn.delete(J),Bn.delete(ye),to}function Na(J){return ic(J,Ul,au)}function Ms(J,ye){var Qe=J.__data__;return tr(ye)?Qe[typeof ye=="string"?"string":"hash"]:Qe.map}function To(J,ye){var Qe=xn(J,ye);return Dh(Qe)?Qe:void 0}function su(J){var ye=he.call(J,rt),Qe=J[rt];try{J[rt]=void 0;var Et=!0}catch{}var dn=Ae.call(J);return Et&&(ye?J[rt]=Qe:delete J[rt]),dn}var au=Bt?function(J){return J==null?[]:(J=Object(J),St(Bt(J),function(ye){return De.call(J,ye)}))}:Ni,Ls=ru;(gt&&Ls(new gt(new ArrayBuffer(1)))!=be||jn&&Ls(new jn)!=R||ni&&Ls(ni.resolve())!=H||In&&Ls(new In)!=Y||Ln&&Ls(new Ln)!=ve)&&(Ls=function(J){var ye=ru(J),Qe=ye==W?J.constructor:void 0,Et=Qe?Xo(Qe):"";if(Et)switch(Et){case Xi:return be;case Di:return R;case ur:return H;case fi:return Y;case Si:return ve}return ye});function Ga(J,ye){return ye=ye??s,!!ye&&(typeof J=="number"||At.test(J))&&J>-1&&J%1==0&&J<ye}function tr(J){var ye=typeof J;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?J!=="__proto__":J===null}function ol(J){return!!se&&se in J}function Gi(J){var ye=J&&J.constructor,Qe=typeof ye=="function"&&ye.prototype||Me;return J===Qe}function Wa(J){return Ae.call(J)}function Xo(J){if(J!=null){try{return le.call(J)}catch{}try{return J+""}catch{}}return""}function lu(J,ye){return J===ye||J!==J&&ye!==ye}var Ko=Oc((function(){return arguments})())?Oc:function(J){return ao(J)&&he.call(J,"callee")&&!De.call(J,"callee")},so=Array.isArray;function ws(J){return J!=null&&mo(J.length)&&!uu(J)}var Mo=pt||Pi;function _o(J,ye){return rc(J,ye)}function uu(J){if(!ss(J))return!1;var ye=ru(J);return ye==S||ye==B||ye==h||ye==$}function mo(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=s}function ss(J){var ye=typeof J;return J!=null&&(ye=="object"||ye=="function")}function ao(J){return J!=null&&typeof J=="object"}var sl=ft?zn(ft):pa;function Ul(J){return ws(J)?yl(J):oc(J)}function Ni(){return[]}function Pi(){return!1}n.exports=_o})(K2,K2.exports)),K2.exports}var Afe=cfe(),hfe=$X(Afe);function w9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function S9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function E9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function dfe(n,e){const t=[],i=[],r=[];function o(s){return{circle:e(s,.8),line:e(s,.6),polygon:e(s,.3),polygonOutline:e(s,.6),default:e(s,1)}}return Object.keys(n).forEach(s=>{const a=n[s];if(!a||a.length===0){const c=o(s);i.push(w9(c.circle,s)),r.push(E9(c.line,s)),t.push(S9(c.polygon,c.polygonOutline,s))}else a.forEach(c=>{const h=o(c);i.push(w9(h.circle,s,c)),r.push(E9(h.line,s,c)),t.push(S9(h.polygon,h.polygonOutline,s,c))})}),t.concat(r).concat(i)}function ffe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(o=>{const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}),Object.assign(n,{layers:[i].concat(e),sources:r})}var iz={polygonLayer:S9,lineLayer:E9,circleLayer:w9,generateInspectStyle:ffe,generateColoredLayers:dfe};class pfe{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function mfe(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function OO(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${mfe(e)}</div></div>`}function gfe(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function yfe(n){const e=gfe(n.layer["source-layer"]||n.layer.source),t=OO("$id",n.id),i=OO("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>OO(o,n.properties[o]));return[e,t,i].concat(r).join("")}function vfe(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${yfe(e)}</div>`).join("")}function bfe(n){return`<div class="maplibregl-inspect_popup">${vfe(n)}</div>`}var F2={exports:{}},Cfe=F2.exports,rz;function _fe(){return rz||(rz=1,(function(n,e){(function(t,i){{var r=i();n.exports&&(e=n.exports=r),e.randomColor=r}})(Cfe,function(){var t=null,i={};j();var r=[],o=function(z){if(z=z||{},z.seed!==void 0&&z.seed!==null&&z.seed===parseInt(z.seed,10))t=z.seed;else if(typeof z.seed=="string")t=N(z.seed);else{if(z.seed!==void 0&&z.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ne,ae,ve;if(z.count!==null&&z.count!==void 0){for(var pe=z.count,be=[],Ee=0;Ee<z.count;Ee++)r.push(!1);for(z.count=null;pe>be.length;){var Te=o(z);t!==null&&(z.seed=t),be.push(Te)}return z.count=pe,be}return ne=s(z),ae=a(ne,z),ve=c(ne,ae,z),h([ne,ae,ve],z)};function s(z){if(r.length>0){var ne=Y(z.hue),ae=B(ne),ve=(ne[1]-ne[0])/r.length,pe=parseInt((ae-ne[0])/ve);r[pe]===!0?pe=(pe+2)%r.length:r[pe]=!0;var be=(ne[0]+pe*ve)%359,Ee=(ne[0]+(pe+1)*ve)%359;return ne=[be,Ee],ae=B(ne),ae<0&&(ae=360+ae),ae}else{var ne=v(z.hue);return ae=B(ne),ae<0&&(ae=360+ae),ae}}function a(z,ne){if(ne.hue==="monochrome")return 0;if(ne.luminosity==="random")return B([0,100]);var ae=x(z),ve=ae[0],pe=ae[1];switch(ne.luminosity){case"bright":ve=55;break;case"dark":ve=pe-10;break;case"light":pe=55;break}return B([ve,pe])}function c(z,ne,ae){var ve=m(z,ne),pe=100;switch(ae.luminosity){case"dark":pe=ve+20;break;case"light":ve=(pe+ve)/2;break;case"random":ve=0,pe=100;break}return B([ve,pe])}function h(z,ne){switch(ne.format){case"hsvArray":return z;case"hslArray":return $(z);case"hsl":var ae=$(z);return"hsl("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%)";case"hsla":var ve=$(z),Ee=ne.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+Ee+")";case"rgbArray":return W(z);case"rgb":var pe=W(z);return"rgb("+pe.join(", ")+")";case"rgba":var be=W(z),Ee=ne.alpha||Math.random();return"rgba("+be.join(", ")+", "+Ee+")";default:return R(z)}}function m(z,ne){for(var ae=S(z).lowerBounds,ve=0;ve<ae.length-1;ve++){var pe=ae[ve][0],be=ae[ve][1],Ee=ae[ve+1][0],Te=ae[ve+1][1];if(ne>=pe&&ne<=Ee){var je=(Te-be)/(Ee-pe),Re=be-je*pe;return je*ne+Re}}return 0}function v(z){if(typeof parseInt(z)=="number"){var ne=parseInt(z);if(ne<360&&ne>0)return[ne,ne]}if(typeof z=="string"){if(i[z]){var ae=i[z];if(ae.hueRange)return ae.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=H(z)[0];return[ve,ve]}}return[0,360]}function x(z){return S(z).saturationRange}function S(z){z>=334&&z<=360&&(z-=360);for(var ne in i){var ae=i[ne];if(ae.hueRange&&z>=ae.hueRange[0]&&z<=ae.hueRange[1])return i[ne]}return"Color not found"}function B(z){if(t===null){var ne=.618033988749895,ae=Math.random();return ae+=ne,ae%=1,Math.floor(z[0]+ae*(z[1]+1-z[0]))}else{var ve=z[1]||1,pe=z[0]||0;t=(t*9301+49297)%233280;var be=t/233280;return Math.floor(pe+be*(ve-pe))}}function R(z){var ne=W(z);function ae(pe){var be=pe.toString(16);return be.length==1?"0"+be:be}var ve="#"+ae(ne[0])+ae(ne[1])+ae(ne[2]);return ve}function F(z,ne,ae){var ve=ae[0][0],pe=ae[ae.length-1][0],be=ae[ae.length-1][1],Ee=ae[0][1];i[z]={hueRange:ne,lowerBounds:ae,saturationRange:[ve,pe],brightnessRange:[be,Ee]}}function j(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function W(z){var ne=z[0];ne===0&&(ne=1),ne===360&&(ne=359),ne=ne/360;var ae=z[1]/100,ve=z[2]/100,pe=Math.floor(ne*6),be=ne*6-pe,Ee=ve*(1-ae),Te=ve*(1-be*ae),je=ve*(1-(1-be)*ae),Re=256,qe=256,nt=256;switch(pe){case 0:Re=ve,qe=je,nt=Ee;break;case 1:Re=Te,qe=ve,nt=Ee;break;case 2:Re=Ee,qe=ve,nt=je;break;case 3:Re=Ee,qe=Te,nt=ve;break;case 4:Re=je,qe=Ee,nt=ve;break;case 5:Re=ve,qe=Ee,nt=Te;break}var ht=[Math.floor(Re*255),Math.floor(qe*255),Math.floor(nt*255)];return ht}function H(z){z=z.replace(/^#/,""),z=z.length===3?z.replace(/(.)/g,"$1$1"):z;var ne=parseInt(z.substr(0,2),16)/255,ae=parseInt(z.substr(2,2),16)/255,ve=parseInt(z.substr(4,2),16)/255,pe=Math.max(ne,ae,ve),be=pe-Math.min(ne,ae,ve),Ee=pe?be/pe:0;switch(pe){case ne:return[60*((ae-ve)/be%6)||0,Ee,pe];case ae:return[60*((ve-ne)/be+2)||0,Ee,pe];case ve:return[60*((ne-ae)/be+4)||0,Ee,pe]}}function $(z){var ne=z[0],ae=z[1]/100,ve=z[2]/100,pe=(2-ae)*ve;return[ne,Math.round(ae*ve/(pe<1?pe:2-pe)*1e4)/100,pe/2*100]}function N(z){for(var ne=0,ae=0;ae!==z.length&&!(ne>=Number.MAX_SAFE_INTEGER);ae++)ne+=z.charCodeAt(ae);return ne}function Y(z){if(isNaN(z)){if(typeof z=="string"){if(i[z]){var ae=i[z];if(ae.hueRange)return ae.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=H(z)[0];return S(ve).hueRange}}}else{var ne=parseInt(z);if(ne<360&&ne>0)return S(z).hueRange}return[0,360]}return o})})(F2,F2.exports)),F2.exports}var xfe=_fe(),Mfe=$X(xfe);function wfe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Mfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var Sfe={brightColor:wfe};function Efe(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Ofe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class bP{constructor(e){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);this._setSourcesFromMap(),!hfe(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();Efe(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof bP))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:Sfe.brightColor,buildInspectStyle:iz.generateInspectStyle,renderPopup:bfe,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new pfe({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=iz.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Ofe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const i=this._map.style.sourceCaches[t]||{_source:{}},r=i._source.vectorLayerIds;r?this.sources[t]=r:i._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var z2={exports:{}},Bfe=z2.exports,oz;function Ife(){return oz||(oz=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(Bfe,function(){var t=null,i={};j();var r=[],o=function(z){if(z=z||{},z.seed!==void 0&&z.seed!==null&&z.seed===parseInt(z.seed,10))t=z.seed;else if(typeof z.seed=="string")t=N(z.seed);else{if(z.seed!==void 0&&z.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ne,ae,ve;if(z.count!==null&&z.count!==void 0){for(var pe=z.count,be=[],Ee=0;Ee<z.count;Ee++)r.push(!1);for(z.count=null;pe>be.length;){var Te=o(z);t!==null&&(z.seed=t),be.push(Te)}return z.count=pe,be}return ne=s(z),ae=a(ne,z),ve=c(ne,ae,z),h([ne,ae,ve],z)};function s(z){if(r.length>0){var ne=Y(z.hue),ae=B(ne),ve=(ne[1]-ne[0])/r.length,pe=parseInt((ae-ne[0])/ve);r[pe]===!0?pe=(pe+2)%r.length:r[pe]=!0;var be=(ne[0]+pe*ve)%359,Ee=(ne[0]+(pe+1)*ve)%359;return ne=[be,Ee],ae=B(ne),ae<0&&(ae=360+ae),ae}else{var ne=v(z.hue);return ae=B(ne),ae<0&&(ae=360+ae),ae}}function a(z,ne){if(ne.hue==="monochrome")return 0;if(ne.luminosity==="random")return B([0,100]);var ae=x(z),ve=ae[0],pe=ae[1];switch(ne.luminosity){case"bright":ve=55;break;case"dark":ve=pe-10;break;case"light":pe=55;break}return B([ve,pe])}function c(z,ne,ae){var ve=m(z,ne),pe=100;switch(ae.luminosity){case"dark":pe=ve+20;break;case"light":ve=(pe+ve)/2;break;case"random":ve=0,pe=100;break}return B([ve,pe])}function h(z,ne){switch(ne.format){case"hsvArray":return z;case"hslArray":return $(z);case"hsl":var ae=$(z);return"hsl("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%)";case"hsla":var ve=$(z),Ee=ne.alpha||Math.random();return"hsla("+ve[0]+", "+ve[1]+"%, "+ve[2]+"%, "+Ee+")";case"rgbArray":return W(z);case"rgb":var pe=W(z);return"rgb("+pe.join(", ")+")";case"rgba":var be=W(z),Ee=ne.alpha||Math.random();return"rgba("+be.join(", ")+", "+Ee+")";default:return R(z)}}function m(z,ne){for(var ae=S(z).lowerBounds,ve=0;ve<ae.length-1;ve++){var pe=ae[ve][0],be=ae[ve][1],Ee=ae[ve+1][0],Te=ae[ve+1][1];if(ne>=pe&&ne<=Ee){var je=(Te-be)/(Ee-pe),Re=be-je*pe;return je*ne+Re}}return 0}function v(z){if(typeof parseInt(z)=="number"){var ne=parseInt(z);if(ne<360&&ne>0)return[ne,ne]}if(typeof z=="string"){if(i[z]){var ae=i[z];if(ae.hueRange)return ae.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=H(z)[0];return[ve,ve]}}return[0,360]}function x(z){return S(z).saturationRange}function S(z){z>=334&&z<=360&&(z-=360);for(var ne in i){var ae=i[ne];if(ae.hueRange&&z>=ae.hueRange[0]&&z<=ae.hueRange[1])return i[ne]}return"Color not found"}function B(z){if(t===null){var ne=.618033988749895,ae=Math.random();return ae+=ne,ae%=1,Math.floor(z[0]+ae*(z[1]+1-z[0]))}else{var ve=z[1]||1,pe=z[0]||0;t=(t*9301+49297)%233280;var be=t/233280;return Math.floor(pe+be*(ve-pe))}}function R(z){var ne=W(z);function ae(pe){var be=pe.toString(16);return be.length==1?"0"+be:be}var ve="#"+ae(ne[0])+ae(ne[1])+ae(ne[2]);return ve}function F(z,ne,ae){var ve=ae[0][0],pe=ae[ae.length-1][0],be=ae[ae.length-1][1],Ee=ae[0][1];i[z]={hueRange:ne,lowerBounds:ae,saturationRange:[ve,pe],brightnessRange:[be,Ee]}}function j(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function W(z){var ne=z[0];ne===0&&(ne=1),ne===360&&(ne=359),ne=ne/360;var ae=z[1]/100,ve=z[2]/100,pe=Math.floor(ne*6),be=ne*6-pe,Ee=ve*(1-ae),Te=ve*(1-be*ae),je=ve*(1-(1-be)*ae),Re=256,qe=256,nt=256;switch(pe){case 0:Re=ve,qe=je,nt=Ee;break;case 1:Re=Te,qe=ve,nt=Ee;break;case 2:Re=Ee,qe=ve,nt=je;break;case 3:Re=Ee,qe=Te,nt=ve;break;case 4:Re=je,qe=Ee,nt=ve;break;case 5:Re=ve,qe=Ee,nt=Te;break}var ht=[Math.floor(Re*255),Math.floor(qe*255),Math.floor(nt*255)];return ht}function H(z){z=z.replace(/^#/,""),z=z.length===3?z.replace(/(.)/g,"$1$1"):z;var ne=parseInt(z.substr(0,2),16)/255,ae=parseInt(z.substr(2,2),16)/255,ve=parseInt(z.substr(4,2),16)/255,pe=Math.max(ne,ae,ve),be=pe-Math.min(ne,ae,ve),Ee=pe?be/pe:0;switch(pe){case ne:return[60*((ae-ve)/be%6)||0,Ee,pe];case ae:return[60*((ve-ne)/be+2)||0,Ee,pe];case ve:return[60*((ne-ae)/be+4)||0,Ee,pe]}}function $(z){var ne=z[0],ae=z[1]/100,ve=z[2]/100,pe=(2-ae)*ve;return[ne,Math.round(ae*ve/(pe<1?pe:2-pe)*1e4)/100,pe/2*100]}function N(z){for(var ne=0,ae=0;ae!==z.length&&!(ne>=Number.MAX_SAFE_INTEGER);ae++)ne+=z.charCodeAt(ae);return ne}function Y(z){if(isNaN(z)){if(typeof z=="string"){if(i[z]){var ae=i[z];if(ae.hueRange)return ae.hueRange}else if(z.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ve=H(z)[0];return S(ve).hueRange}}}else{var ne=parseInt(z);if(ne<360&&ne>0)return S(z).hueRange}return[0,360]}return o})})(z2,z2.exports)),z2.exports}var kfe=Ife();const Tfe=eu(kfe);function Rfe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Tfe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const VX={brightColor:Rfe};function Dfe(n){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Pfe(n){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function Ufe(n){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function Lfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function Zb(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function Kfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function Ffe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function zfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function jfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Nfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function Gfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function Wfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Qfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function qfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function HX(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Yfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function O9(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function $fe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Vfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function sz(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function Hfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function az(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function Zfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Xfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function Jfe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function epe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function tpe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function ZX(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function XX(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function npe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function ipe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function rpe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function ope(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function spe(n){return Bo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function ape(n){return Bo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function lpe(n){return Bo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function ua(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ua=function(){return s},s}ua();ua().s[0]++;const JX=n=>{ua().f[0]++;const e=(ua().s[1]++,{style:n.style});switch(ua().s[2]++,n.type){case"fill-extrusion":return ua().b[0][0]++,ua().s[3]++,te.jsx(ape,{...e});case"raster":return ua().b[0][1]++,ua().s[4]++,te.jsx(Xfe,{...e});case"hillshade":return ua().b[0][2]++,ua().s[5]++,te.jsx(Ufe,{...e});case"color-relief":return ua().b[0][3]++,ua().s[6]++,te.jsx(lpe,{...e});case"heatmap":return ua().b[0][4]++,ua().s[7]++,te.jsx(Vfe,{...e});case"fill":return ua().b[0][5]++,ua().s[8]++,te.jsx(Pfe,{...e});case"background":return ua().b[0][6]++,ua().s[9]++,te.jsx(Dfe,{...e});case"line":return ua().b[0][7]++,ua().s[10]++,te.jsx(spe,{...e});case"symbol":return ua().b[0][8]++,ua().s[11]++,te.jsx(epe,{...e});case"circle":return ua().b[0][9]++,ua().s[12]++,te.jsx(Zfe,{...e});default:return ua().b[0][10]++,ua().s[13]++,te.jsx(rpe,{...e})}};function Mi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mi=function(){return s},s}Mi();function upe(n){Mi().f[0]++;const e=(Mi().s[0]++,{}),t=(Mi().s[1]++,{});return Mi().s[2]++,n.forEach(i=>{Mi().f[1]++;const r=(Mi().s[3]++,i.layer["source-layer"]);if(Mi().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Mi().b[0][0]++,Mi().s[5]++,t[i.layer.id]++;const o=(Mi().s[6]++,e[r].find(s=>(Mi().f[2]++,Mi().s[7]++,s.layer.id===i.layer.id)));Mi().s[8]++,o.counter=t[i.layer.id]}else Mi().b[0][1]++,Mi().s[9]++,e[r]=(Mi().b[1][0]++,e[r]||(Mi().b[1][1]++,[])),Mi().s[10]++,e[r].push(i),Mi().s[11]++,t[i.layer.id]=1}),Mi().s[12]++,e}class eJ extends On.Component{_getFeatureColor(e,t){if(Mi().f[3]++,Mi().s[13]++,e.layer.paint)Mi().b[2][1]++;else{Mi().b[2][0]++,Mi().s[14]++;return}Mi().s[15]++;try{const i=(Mi().s[16]++,e.layer.paint);return Mi().s[17]++,Mi().b[4][0]++,"text-color"in i&&(Mi().b[4][1]++,i["text-color"])?(Mi().b[3][0]++,Mi().s[18]++,String(i["text-color"])):(Mi().b[3][1]++,Mi().s[19]++,Mi().b[6][0]++,"fill-color"in i&&(Mi().b[6][1]++,i["fill-color"])?(Mi().b[5][0]++,Mi().s[20]++,String(i["fill-color"])):(Mi().b[5][1]++,Mi().s[21]++,Mi().b[8][0]++,"line-color"in i&&(Mi().b[8][1]++,i["line-color"])?(Mi().b[7][0]++,Mi().s[22]++,String(i["line-color"])):(Mi().b[7][1]++,Mi().s[23]++,Mi().b[10][0]++,"fill-extrusion-color"in i&&(Mi().b[10][1]++,i["fill-extrusion-color"])?(Mi().b[9][0]++,Mi().s[24]++,String(i["fill-extrusion-color"])):(Mi().b[9][1]++,Mi().s[25]++,"black"))))}catch(i){return Mi().s[26]++,console.warn("Unable to get feature color, error:",i),Mi().s[27]++,"black"}}render(){Mi().f[4]++;const e=(Mi().s[28]++,upe(this.props.features)),t=(Mi().s[29]++,Object.keys(e).map(i=>{Mi().f[5]++;const r=(Mi().s[30]++,e[i].map((o,s)=>{Mi().f[6]++;const a=(Mi().s[31]++,this._getFeatureColor(o,this.props.zoom));return Mi().s[32]++,te.jsxs("div",{className:"maputnik-popup-layer",children:[te.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),te.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Mi().f[7]++,Mi().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(Mi().b[11][0]++,o.layer.type&&(Mi().b[11][1]++,te.jsx(JX,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(Mi().b[12][0]++,o.counter&&(Mi().b[12][1]++,te.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return Mi().s[34]++,te.jsxs("div",{children:[te.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Mi().s[35]++,te.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function gr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gr=function(){return s},s}gr();function lz(n){return gr().f[0]++,gr().s[0]++,gr().b[1][0]++,typeof n>"u"||(gr().b[1][1]++,n===null)?(gr().b[0][0]++,gr().s[1]++,n):(gr().b[0][1]++,gr().s[2]++,n instanceof Date?(gr().b[2][0]++,gr().s[3]++,n.toLocaleString()):(gr().b[2][1]++,gr().s[4]++,gr().b[4][0]++,typeof n=="object"||(gr().b[4][1]++,typeof n=="number")||(gr().b[4][2]++,typeof n=="string")?(gr().b[3][0]++,gr().s[5]++,n.toString()):(gr().b[3][1]++,gr().s[6]++,n)))}function BO(n,e){return gr().f[1]++,gr().s[7]++,te.jsxs("tr",{children:[te.jsx("td",{className:"maputnik-popup-table-cell",children:n}),te.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function cpe(n,e){return gr().f[2]++,gr().s[8]++,te.jsxs(On.Fragment,{children:[te.jsx("tr",{children:te.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(gr().b[5][0]++,n.inspectModeCounter&&(gr().b[5][1]++,te.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),BO("$type",n.geometry.type),BO("$id",lz(n.id)),Object.keys(n.properties).map(t=>{gr().f[3]++;const i=(gr().s[9]++,n.properties[t]);return gr().s[10]++,BO(t,lz(i))})]},e)}function Ape(n){gr().f[4]++;const e=(gr().s[11]++,[]);return gr().s[12]++,n.forEach(t=>{gr().f[5]++;const i=(gr().s[13]++,e.findIndex(r=>(gr().f[6]++,gr().s[14]++,gr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(gr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));gr().s[15]++,i===-1?(gr().b[7][0]++,gr().s[16]++,e.push(t)):(gr().b[7][1]++,gr().s[17]++,"inspectModeCounter"in e[i]?(gr().b[8][0]++,gr().s[18]++,e[i].inspectModeCounter++):(gr().b[8][1]++,gr().s[19]++,e[i].inspectModeCounter=2))}),gr().s[20]++,e}class hpe extends On.Component{render(){gr().f[7]++;const e=(gr().s[21]++,Ape(this.props.features));return gr().s[22]++,te.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:te.jsx("table",{className:"maputnik-popup-table",children:te.jsx("tbody",{children:e.map(cpe)})})})}}const A3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},tJ=Object.create(null);for(const n in A3)Object.hasOwn(A3,n)&&(tJ[A3[n]]=n);const wc={to:{},get:{}};wc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=wc.get.hsl(n),i="hsl";break}case"hwb":{t=wc.get.hwb(n),i="hwb";break}default:{t=wc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};wc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let s=[0,0,0,1],a,c,h;if(a=n.match(t)){for(h=a[2],a=a[1],c=0;c<3;c++){const m=c*2;s[c]=Number.parseInt(a.slice(m,m+2),16)}h&&(s[3]=Number.parseInt(h,16)/255)}else if(a=n.match(e)){for(a=a[1],h=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);h&&(s[3]=Number.parseInt(h+h,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseInt(a[c+1],10);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(A3,a[1])?(s=A3[a[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=Vy(s[c],0,255);return s[3]=Vy(s[3],0,1),s};wc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Vy(Number.parseFloat(t[2]),0,100),s=Vy(Number.parseFloat(t[3]),0,100),a=Vy(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};wc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Vy(Number.parseFloat(t[2]),0,100),s=Vy(Number.parseFloat(t[3]),0,100),a=Vy(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};wc.to.hex=function(...n){return"#"+W5(n[0])+W5(n[1])+W5(n[2])+(n[3]<1?W5(Math.round(n[3]*255)):"")};wc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};wc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};wc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};wc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};wc.to.keyword=function(...n){return tJ[n.slice(0,3)]};function Vy(n,e,t){return Math.min(Math.max(e,n),t)}function W5(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const N3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},nJ={};for(const n of Object.keys(N3))nJ[N3[n]]=n;const vi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},r1=(6/29)**3;function F_(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function z_(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(vi)){if(!("channels"in vi[n]))throw new Error("missing channels property: "+n);if(!("labels"in vi[n]))throw new Error("missing channel labels property: "+n);if(vi[n].labels.length!==vi[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=vi[n];delete vi[n].channels,delete vi[n].labels,Object.defineProperty(vi[n],"channels",{value:e}),Object.defineProperty(vi[n],"labels",{value:t})}vi.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const h=(r+o)/2;return o===r?c=0:h<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,h*100]};vi.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,h=Math.max(s,a,c),m=h-Math.min(s,a,c),v=function(x){return(h-x)/6/m+1/2};if(m===0)r=0,o=0;else{switch(o=m/h,e=v(s),t=v(a),i=v(c),h){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,h*100]};vi.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=vi.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};vi.rgb.oklab=function(n){const e=z_(n[0]/255),t=z_(n[1]/255),i=z_(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};vi.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function dpe(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}vi.rgb.keyword=function(n){const e=nJ[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(N3)){const o=N3[r],s=dpe(n,o);s<t&&(t=s,i=r)}return i};vi.keyword.rgb=function(n){return N3[n]};vi.rgb.xyz=function(n){const e=z_(n[0]/255),t=z_(n[1]/255),i=z_(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};vi.rgb.lab=function(n){const e=vi.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116,r=r>r1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};vi.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let h=0;h<3;h++)r=e+1/3*-(h-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[h]=o*255;return c};vi.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};vi.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};vi.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};vi.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let h,m,v;switch(s){default:case 6:case 0:{h=a,m=c,v=t;break}case 1:{h=c,m=a,v=t;break}case 2:{h=t,m=a,v=c;break}case 3:{h=t,m=c,v=a;break}case 4:{h=c,m=t,v=a;break}case 5:{h=a,m=t,v=c;break}}return[h*255,m*255,v*255]};vi.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};vi.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=F_(r),o=F_(o),s=F_(s),[r*255,o*255,s*255]};vi.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>r1?e**(1/3):7.787*e+16/116,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};vi.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};vi.oklab.oklch=function(n){return vi.lab.lch(n)};vi.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,h=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,h*100]};vi.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=F_(4.0767416621*r-3.3077115913*o+.2309699292*s),c=F_(-1.2684380046*r+2.6097574011*o-.3413193965*s),h=F_(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,h*255]};vi.oklch.oklab=function(n){return vi.lch.lab(n)};vi.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,h=s**3;return o=a>r1?a:(o-16/116)/7.787,r=c>r1?c:(r-16/116)/7.787,s=h>r1?h:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};vi.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};vi.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};vi.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?vi.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};vi.hsv.ansi16=function(n){return vi.rgb.ansi16(vi.hsv.rgb(n),n[2])};vi.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};vi.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};vi.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};vi.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};vi.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};vi.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};vi.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};vi.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};vi.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};vi.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};vi.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};vi.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};vi.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};vi.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};vi.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};vi.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};vi.gray.hsl=function(n){return[0,0,n[0]]};vi.gray.hsv=vi.gray.hsl;vi.gray.hwb=function(n){return[0,100,n[0]]};vi.gray.cmyk=function(n){return[0,0,0,n[0]]};vi.gray.lab=function(n){return[n[0],0,0]};vi.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};vi.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function fpe(){const n={},e=Object.keys(vi);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function ppe(n){const e=fpe(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(vi[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function mpe(n,e){return function(t){return e(n(t))}}function gpe(n,e){const t=[e[n].parent,n];let i=vi[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=mpe(vi[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function ype(n){const e=ppe(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=gpe(s,e))}return t}const Zc={},vpe=Object.keys(vi);function bpe(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Cpe(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of vpe){Zc[n]={},Object.defineProperty(Zc[n],"channels",{value:vi[n].channels}),Object.defineProperty(Zc[n],"labels",{value:vi[n].labels});const e=ype(n),t=Object.keys(e);for(const i of t){const r=e[i];Zc[n][i]=Cpe(r),Zc[n][i].raw=bpe(r)}}const iJ=["keyword","gray","hex"],B9={};for(const n of Object.keys(Zc))B9[[...Zc[n].labels].sort().join("")]=n;const I9={};function Hu(n,e){if(!(this instanceof Hu))return new Hu(n,e);if(e&&e in iJ&&(e=null),e&&!(e in Zc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Hu)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=wc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Zc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Zc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=k9(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in B9))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=B9[o];const{labels:s}=Zc[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=k9(a)}if(I9[this.model])for(i=Zc[this.model].channels,t=0;t<i;t++){const r=I9[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Hu.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in wc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return wc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return wc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Zc[this.model],{labels:t}=Zc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Hu([...this.color.map(xpe(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Hu([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Hl("rgb",0,bc(255)),green:Hl("rgb",1,bc(255)),blue:Hl("rgb",2,bc(255)),hue:Hl(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Hl("hsl",1,bc(100)),lightness:Hl("hsl",2,bc(100)),saturationv:Hl("hsv",1,bc(100)),value:Hl("hsv",2,bc(100)),chroma:Hl("hcg",1,bc(100)),gray:Hl("hcg",2,bc(100)),white:Hl("hwb",1,bc(100)),wblack:Hl("hwb",2,bc(100)),cyan:Hl("cmyk",0,bc(100)),magenta:Hl("cmyk",1,bc(100)),yellow:Hl("cmyk",2,bc(100)),black:Hl("cmyk",3,bc(100)),x:Hl("xyz",0,bc(95.047)),y:Hl("xyz",1,bc(100)),z:Hl("xyz",2,bc(108.833)),l:Hl("lab",0,bc(100)),a:Hl("lab",1),b:Hl("lab",2),keyword(n){return n!==void 0?new Hu(n):Zc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Hu(n):wc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Hu(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),wc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Hu.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return Hu.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Zc)){if(iJ.includes(n))continue;const{channels:e}=Zc[n];Hu.prototype[n]=function(...t){return this.model===n?new Hu(this):t.length>0?new Hu(t,n):new Hu([...Mpe(Zc[this.model][n].raw(this.color)),this.valpha],n)},Hu[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=k9(t,e)),new Hu(i,n)}}function _pe(n,e){return Number(n.toFixed(e))}function xpe(n){return function(e){return _pe(e,n)}}function Hl(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(I9[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function bc(n){return function(e){return Math.max(0,Math.min(n,e))}}function Mpe(n){return Array.isArray(n)?n:[n]}function k9(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function hs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hs=function(){return s},s}hs();class wpe{_map=(hs().s[0]++,void 0);_container=(hs().s[1]++,void 0);_textEl=(hs().s[2]++,null);constructor(){hs().f[0]++}onAdd(e){return hs().f[1]++,hs().s[3]++,this._map=e,hs().s[4]++,this._container=document.createElement("div"),hs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",hs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),hs().s[7]++,this.setLabel("Zoom:"),hs().s[8]++,this.addEventListeners(),hs().s[9]++,this._container}updateZoomLevel(){hs().f[2]++,hs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){hs().f[3]++,hs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,hs().s[12]++,this._textEl=this._container.querySelector("span"),hs().s[13]++,this.updateZoomLevel()}addEventListeners(){hs().f[4]++,hs().s[14]++,this._map.on("render",()=>(hs().f[5]++,hs().s[15]++,this.updateZoomLevel())),hs().s[16]++,this._map.on("zoomIn",()=>(hs().f[6]++,hs().s[17]++,this.updateZoomLevel())),hs().s[18]++,this._map.on("zoomOut",()=>(hs().f[7]++,hs().s[19]++,this.updateZoomLevel()))}onRemove(){hs().f[8]++,hs().s[20]++,this._container.parentNode.removeChild(this._container),hs().s[21]++,this._map=void 0}}function T9(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function R9(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function D9(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function Spe(n,e){const t=[],i=[],r=[];function o(s){return{circle:e(s,.8),line:e(s,.6),polygon:e(s,.3),polygonOutline:e(s,.6),default:e(s,1)}}return Object.keys(n).forEach(s=>{const a=n[s];if(!a||a.length===0){const c=o(s);i.push(T9(c.circle,s)),r.push(D9(c.line,s)),t.push(R9(c.polygon,c.polygonOutline,s))}else a.forEach(c=>{const h=o(c);i.push(T9(h.circle,s,c)),r.push(D9(h.line,s,c)),t.push(R9(h.polygon,h.polygonOutline,s,c))})}),t.concat(r).concat(i)}function Epe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(o=>{const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}),Object.assign(n,{layers:[i].concat(e),sources:r})}const IO={polygonLayer:R9,lineLayer:D9,circleLayer:T9,generateInspectStyle:Epe,generateColoredLayers:Spe};function Ur(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ur=function(){return s},s}Ur();function kO(n,e){return Ur().f[0]++,Ur().s[0]++,n.type==="circle"?(Ur().b[0][0]++,Ur().s[1]++,n.paint["circle-radius"]=3):(Ur().b[0][1]++,Ur().s[2]++,n.type==="line"?(Ur().b[1][0]++,Ur().s[3]++,n.paint["line-width"]=2):Ur().b[1][1]++),Ur().s[4]++,"filter"in e?(Ur().b[2][0]++,Ur().s[5]++,n.filter=e.filter):(Ur().b[2][1]++,Ur().s[6]++,delete n.filter),Ur().s[7]++,n.id=n.id+"_highlight",Ur().s[8]++,n}function Ope(n){if(Ur().f[1]++,Ur().s[9]++,Ur().b[4][0]++,!n||(Ur().b[4][1]++,n.type==="background")||(Ur().b[4][2]++,n.type==="raster"))return Ur().b[3][0]++,Ur().s[10]++,null;Ur().b[3][1]++;const e=(Ur().s[11]++,Ur().b[5][0]++,n["source-layer"]||(Ur().b[5][1]++,"")),t=(Ur().s[12]++,VX.brightColor(e,1));return Ur().s[13]++,Ur().b[7][0]++,n.type==="fill"||(Ur().b[7][1]++,n.type==="fill-extrusion")?(Ur().b[6][0]++,Ur().s[14]++,kO(IO.polygonLayer(t,t,n.source,n["source-layer"]),n)):(Ur().b[6][1]++,Ur().s[15]++,Ur().b[9][0]++,n.type==="symbol"||(Ur().b[9][1]++,n.type==="circle")?(Ur().b[8][0]++,Ur().s[16]++,kO(IO.circleLayer(t,n.source,n["source-layer"]),n)):(Ur().b[8][1]++,Ur().s[17]++,n.type==="line"?(Ur().b[10][0]++,Ur().s[18]++,kO(IO.lineLayer(t,n.source,n["source-layer"]),n)):(Ur().b[10][1]++,Ur().s[19]++,null)))}function CP(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return CP=function(){return s},s}CP();CP().s[0]++;g_.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function TO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(v){s(v)}}function c(m){try{h(i.throw(m))}catch(v){s(v)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,e||[])).next())})}var Q5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function xE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var RO,uz;function rJ(){if(uz)return RO;uz=1,RO=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return RO}var DO={exports:{}},cz;function Bpe(){return cz||(cz=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,h=0,m=0,v=o.pre||"",x=o.post||"",S=o.caseSensitive&&r||r.toLowerCase(),B;i=o.caseSensitive&&i||i.toLowerCase();for(var R=0;R<c;R++)B=r[R],S[R]===i[s]?(B=v+B+x,s+=1,m+=1+m):m=0,h+=m,a[a.length]=B;return s===i.length?(h=S===i?1/0:h,{rendered:a.join(""),score:h}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,h){var m=a;o.extract&&(m=o.extract(a));var v=t.match(i,m,o);return v!=null&&(s[s.length]={string:v.rendered,score:v.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(DO)),DO.exports}var PO,Az;function Ipe(){if(Az)return PO;Az=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},PO=n,PO}var UO,hz;function kpe(){if(hz)return UO;hz=1;var n=rJ(),e=Bpe(),t=Ipe(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var h=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,h)+"</strong>"+s.slice(h),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},UO=i,UO}var LO,dz;function Tpe(){if(dz)return LO;dz=1;var n=kpe();return LO=n,typeof window<"u"&&(window.Suggestions=n),LO}var Rpe=Tpe(),Dpe=xE(Rpe),lw={exports:{}},Ppe=lw.exports,fz;function Upe(){return fz||(fz=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Ppe,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(h,m){return h&&m})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,h,m){Object.defineProperty(c,h,{value:m,enumerable:!0})}function a(c,h,m){function v(x){return i(x)[c]||e}s(v,"pattern",h),s(o,m,v)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(lw)),lw.exports}var Lpe=Upe(),Kpe=xE(Lpe),KO,pz;function Fpe(){if(pz)return KO;pz=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof Q5=="object"&&Q5&&Q5.Object===Object&&Q5,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),v=Object.prototype,x=v.toString,S=Math.max,B=Math.min,R=function(){return m.Date.now()};function F(N,Y,z){var ne,ae,ve,pe,be,Ee,Te=0,je=!1,Re=!1,qe=!0;if(typeof N!="function")throw new TypeError(n);Y=$(Y)||0,j(z)&&(je=!!z.leading,Re="maxWait"in z,ve=Re?S($(z.maxWait)||0,Y):ve,qe="trailing"in z?!!z.trailing:qe);function nt(It){var Ke=ne,Ie=ae;return ne=ae=void 0,Te=It,pe=N.apply(Ie,Ke),pe}function ht(It){return Te=It,be=setTimeout(ze,Y),je?nt(It):pe}function ke(It){var Ke=It-Ee,Ie=It-Te,Se=Y-Ke;return Re?B(Se,ve-Ie):Se}function Oe(It){var Ke=It-Ee,Ie=It-Te;return Ee===void 0||Ke>=Y||Ke<0||Re&&Ie>=ve}function ze(){var It=R();if(Oe(It))return we(It);be=setTimeout(ze,ke(It))}function we(It){return be=void 0,qe&&ne?nt(It):(ne=ae=void 0,pe)}function At(){be!==void 0&&clearTimeout(be),Te=0,ne=Ee=ae=be=void 0}function it(){return be===void 0?pe:we(R())}function Ct(){var It=R(),Ke=Oe(It);if(ne=arguments,ae=this,Ee=It,Ke){if(be===void 0)return ht(Ee);if(Re)return be=setTimeout(ze,Y),nt(Ee)}return be===void 0&&(be=setTimeout(ze,Y)),pe}return Ct.cancel=At,Ct.flush=it,Ct}function j(N){var Y=typeof N;return!!N&&(Y=="object"||Y=="function")}function W(N){return!!N&&typeof N=="object"}function H(N){return typeof N=="symbol"||W(N)&&x.call(N)==t}function $(N){if(typeof N=="number")return N;if(H(N))return e;if(j(N)){var Y=typeof N.valueOf=="function"?N.valueOf():N;N=j(Y)?Y+"":Y}if(typeof N!="string")return N===0?N:+N;N=N.replace(i,"");var z=o.test(N);return z||s.test(N)?a(N.slice(2),z?2:8):r.test(N)?e:+N}return KO=F,KO}var zpe=Fpe(),jpe=xE(zpe),Npe=rJ(),nm=xE(Npe),q5={exports:{}},mz;function Gpe(){if(mz)return q5.exports;mz=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(N,Y,z){return Function.prototype.apply.call(N,Y,z)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:t=function(N){return Object.getOwnPropertyNames(N)};function i($){console&&console.warn&&console.warn($)}var r=Number.isNaN||function(N){return N!==N};function o(){o.init.call(this)}q5.exports=o,q5.exports.once=j,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function($){if(typeof $!="number"||$<0||r($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");s=$}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||r(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function c($){return $._maxListeners===void 0?o.defaultMaxListeners:$._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(N){for(var Y=[],z=1;z<arguments.length;z++)Y.push(arguments[z]);var ne=N==="error",ae=this._events;if(ae!==void 0)ne=ne&&ae.error===void 0;else if(!ne)return!1;if(ne){var ve;if(Y.length>0&&(ve=Y[0]),ve instanceof Error)throw ve;var pe=new Error("Unhandled error."+(ve?" ("+ve.message+")":""));throw pe.context=ve,pe}var be=ae[N];if(be===void 0)return!1;if(typeof be=="function")e(be,this,Y);else for(var Ee=be.length,Te=B(be,Ee),z=0;z<Ee;++z)e(Te[z],this,Y);return!0};function h($,N,Y,z){var ne,ae,ve;if(a(Y),ae=$._events,ae===void 0?(ae=$._events=Object.create(null),$._eventsCount=0):(ae.newListener!==void 0&&($.emit("newListener",N,Y.listener?Y.listener:Y),ae=$._events),ve=ae[N]),ve===void 0)ve=ae[N]=Y,++$._eventsCount;else if(typeof ve=="function"?ve=ae[N]=z?[Y,ve]:[ve,Y]:z?ve.unshift(Y):ve.push(Y),ne=c($),ne>0&&ve.length>ne&&!ve.warned){ve.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+ve.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=$,pe.type=N,pe.count=ve.length,i(pe)}return $}o.prototype.addListener=function(N,Y){return h(this,N,Y,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(N,Y){return h(this,N,Y,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v($,N,Y){var z={fired:!1,wrapFn:void 0,target:$,type:N,listener:Y},ne=m.bind(z);return ne.listener=Y,z.wrapFn=ne,ne}o.prototype.once=function(N,Y){return a(Y),this.on(N,v(this,N,Y)),this},o.prototype.prependOnceListener=function(N,Y){return a(Y),this.prependListener(N,v(this,N,Y)),this},o.prototype.removeListener=function(N,Y){var z,ne,ae,ve,pe;if(a(Y),ne=this._events,ne===void 0)return this;if(z=ne[N],z===void 0)return this;if(z===Y||z.listener===Y)--this._eventsCount===0?this._events=Object.create(null):(delete ne[N],ne.removeListener&&this.emit("removeListener",N,z.listener||Y));else if(typeof z!="function"){for(ae=-1,ve=z.length-1;ve>=0;ve--)if(z[ve]===Y||z[ve].listener===Y){pe=z[ve].listener,ae=ve;break}if(ae<0)return this;ae===0?z.shift():R(z,ae),z.length===1&&(ne[N]=z[0]),ne.removeListener!==void 0&&this.emit("removeListener",N,pe||Y)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(N){var Y,z,ne;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[N]),this;if(arguments.length===0){var ae=Object.keys(z),ve;for(ne=0;ne<ae.length;++ne)ve=ae[ne],ve!=="removeListener"&&this.removeAllListeners(ve);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Y=z[N],typeof Y=="function")this.removeListener(N,Y);else if(Y!==void 0)for(ne=Y.length-1;ne>=0;ne--)this.removeListener(N,Y[ne]);return this};function x($,N,Y){var z=$._events;if(z===void 0)return[];var ne=z[N];return ne===void 0?[]:typeof ne=="function"?Y?[ne.listener||ne]:[ne]:Y?F(ne):B(ne,ne.length)}o.prototype.listeners=function(N){return x(this,N,!0)},o.prototype.rawListeners=function(N){return x(this,N,!1)},o.listenerCount=function($,N){return typeof $.listenerCount=="function"?$.listenerCount(N):S.call($,N)},o.prototype.listenerCount=S;function S($){var N=this._events;if(N!==void 0){var Y=N[$];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function B($,N){for(var Y=new Array(N),z=0;z<N;++z)Y[z]=$[z];return Y}function R($,N){for(;N+1<$.length;N++)$[N]=$[N+1];$.pop()}function F($){for(var N=new Array($.length),Y=0;Y<N.length;++Y)N[Y]=$[Y].listener||$[Y];return N}function j($,N){return new Promise(function(Y,z){function ne(ve){$.removeListener(N,ae),z(ve)}function ae(){typeof $.removeListener=="function"&&$.removeListener("error",ne),Y([].slice.call(arguments))}H($,N,ae,{once:!0}),N!=="error"&&W($,ne,{once:!0})})}function W($,N,Y){typeof $.on=="function"&&H($,"error",N,Y)}function H($,N,Y,z){if(typeof $.on=="function")z.once?$.once(N,Y):$.on(N,Y);else if(typeof $.addEventListener=="function")$.addEventListener(N,function ne(ae){z.once&&$.removeEventListener(N,ne),Y(ae)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return q5.exports}var Wpe=Gpe();const gz={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},Qpe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},qpe={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},Ype={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var A2={placeholder:Qpe,errorNoResults:qpe,errorConnectionFailed:Ype};const $pe=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class Vpe{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const o=i.text,s=o.toLowerCase().indexOf(this.query.toLowerCase()),a=this.query.length,c=o.substring(0,s),h=o.substring(s,s+a),m=o.substring(s+a);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+c+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+h+"</span>"+m+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new Wpe.EventEmitter,this.options=nm({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",jpe(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new Dpe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=this._inputEl.value;if(!o)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&gz[e.properties.short_code])t=nm({},this.options.flyTo),this._map&&this._map.fitBounds(gz[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=nm({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=nm({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return TO(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&$pe.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return TO(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const h=yield a;s.features=s.features?h.concat(s.features):h}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return TO(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=Kpe.language(this.options.language.split(",")[0]);return this.options.language&&A2?.[e][t]?A2[e][t]:A2[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=nm({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const o of e)r.extend(o.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=nm({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const s=nm({},{},this.options.popup);r=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=nm({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=nm(i,{element:o}));const s=new this._maplibregl.Marker(nm({},i,{element:o}));let a;if(this.options.popup){const h=nm({},{},this.options.popup);a=new this._maplibregl.Popup(h).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function tn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tn=function(){return s},s}tn();function Hpe(n,e,t){tn().f[0]++;const i=(tn().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(tn().s[1]++,Ope(t));tn().s[2]++,r?(tn().b[0][0]++,tn().s[3]++,e.push(r)):tn().b[0][1]++;const o=(tn().s[4]++,{});tn().s[5]++,Object.keys(n.sources).forEach(a=>{tn().f[1]++;const c=(tn().s[6]++,n.sources[a]);tn().s[7]++,tn().b[2][0]++,c.type!=="raster"&&(tn().b[2][1]++,c.type!=="raster-dem")?(tn().b[1][0]++,tn().s[8]++,o[a]=c):tn().b[1][1]++});const s=(tn().s[9]++,{...n,sources:o,layers:[i].concat(e)});return tn().s[10]++,s}class Zpe extends On.Component{static defaultProps=(tn().s[11]++,{onMapLoaded:()=>{tn().f[2]++},onDataChange:()=>{tn().f[3]++},onLayerSelect:()=>{tn().f[4]++},onChange:()=>{tn().f[5]++},options:{}});container=(tn().s[12]++,null);constructor(e){tn().f[6]++,tn().s[13]++,super(e),tn().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},tn().s[15]++,gA.on("languageChanged",()=>{tn().f[7]++,tn().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){tn().f[8]++;let i=(tn().s[17]++,!1);tn().s[18]++;try{tn().s[19]++,i=(tn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(tn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return tn().s[20]++,i}componentDidUpdate(){tn().f[9]++;const e=(tn().s[21]++,this.state.map),t=(tn().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));tn().s[23]++,e?(tn().b[4][0]++,tn().s[24]++,e.setStyle(t,{diff:!0}),tn().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,tn().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,tn().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):tn().b[4][1]++,tn().s[28]++,tn().b[6][0]++,this.state.inspect&&(tn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(tn().b[5][0]++,tn().s[29]++,this.state.inspect.toggleInspector()):tn().b[5][1]++,tn().s[30]++,tn().b[8][0]++,this.state.inspect&&(tn().b[8][1]++,this.props.inspectModeEnabled)?(tn().b[7][0]++,tn().s[31]++,this.state.inspect.setOriginalStyle(t),tn().s[32]++,setTimeout(()=>{tn().f[10]++,tn().s[33]++,this.state.inspect.render()},500)):tn().b[7][1]++}componentDidMount(){tn().f[11]++;const e=(tn().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(tn().s[35]++,new oce({metadata:!0}));tn().s[36]++,g_.addProtocol("pmtiles",t.tile);const i=(tn().s[37]++,new g_.Map(e));tn().s[38]++;const r=()=>{tn().f[12]++;const x=(tn().s[39]++,i.getCenter()),S=(tn().s[40]++,i.getZoom());tn().s[41]++,this.props.onChange({center:x,zoom:S})};tn().s[42]++,r(),tn().s[43]++,i.showTileBoundaries=e.showTileBoundaries,tn().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,tn().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(tn().s[46]++,this.initGeocoder(i)),s=(tn().s[47]++,new wpe);tn().s[48]++,i.addControl(s,"top-right");const a=(tn().s[49]++,new g_.NavigationControl({visualizePitch:!0}));tn().s[50]++,i.addControl(a,"top-right");const c=(tn().s[51]++,document.createElement("div")),h=(tn().s[52]++,rZ.createRoot(c)),m=(tn().s[53]++,new g_.Popup({closeOnClick:!1})),v=(tn().s[54]++,new bP({popup:m,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(x,S)=>(tn().f[13]++,tn().s[55]++,Hu(VX.brightColor(x,S)).desaturate(.5).string()),buildInspectStyle:(x,S)=>(tn().f[14]++,tn().s[56]++,Hpe(x,S,this.props.highlightedLayer)),renderPopup:x=>(tn().f[15]++,tn().s[57]++,this.props.inspectModeEnabled?(tn().b[9][0]++,tn().s[58]++,m.once("open",()=>{tn().f[16]++,tn().s[59]++,h.render(te.jsx(hpe,{features:x}))}),tn().s[60]++,c):(tn().b[9][1]++,tn().s[61]++,m.once("open",()=>{tn().f[17]++,tn().s[62]++,h.render(te.jsx(eJ,{features:x,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),tn().s[63]++,c))}));tn().s[64]++,i.addControl(v),tn().s[65]++,i.on("style.load",()=>{tn().f[18]++,tn().s[66]++,this.setState({map:i,inspect:v,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),tn().s[67]++,i.on("data",x=>{if(tn().f[19]++,tn().s[68]++,x.dataType!=="tile"){tn().b[10][0]++,tn().s[69]++;return}else tn().b[10][1]++;tn().s[70]++,this.props.onDataChange({map:this.state.map})}),tn().s[71]++,i.on("error",x=>{tn().f[20]++,tn().s[72]++,console.log("ERROR",x)}),tn().s[73]++,i.on("zoom",x=>{tn().f[21]++,tn().s[74]++,this.setState({zoom:i.getZoom()})}),tn().s[75]++,i.on("dragend",r),tn().s[76]++,i.on("zoomend",r)}onLayerSelectById=(tn().s[77]++,e=>{tn().f[22]++;const t=(tn().s[78]++,this.props.mapStyle.layers.findIndex(i=>(tn().f[23]++,tn().s[79]++,i.id===e)));tn().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){tn().f[24]++;const t=(tn().s[81]++,{forwardGeocode:async r=>{tn().f[25]++;const o=(tn().s[82]++,[]);tn().s[83]++;try{const s=(tn().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(tn().s[85]++,await fetch(s)),c=(tn().s[86]++,await a.json());tn().s[87]++;for(const h of c.features){const m=(tn().s[88]++,[h.bbox[0]+(h.bbox[2]-h.bbox[0])/2,h.bbox[1]+(h.bbox[3]-h.bbox[1])/2]),v=(tn().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:m},place_name:h.properties.display_name,properties:h.properties,text:h.properties.display_name,place_type:["place"],center:m});tn().s[90]++,o.push(v)}}catch(s){tn().s[91]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return tn().s[92]++,{features:o}}}),i=(tn().s[93]++,new Vpe(t,{placeholder:this.props.t("Search"),maplibregl:g_}));return tn().s[94]++,e.addControl(i,"top-left"),tn().s[95]++,i}render(){tn().f[26]++;const e=(tn().s[96]++,this.props.t);return tn().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),tn().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),tn().s[99]++,te.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{tn().f[27]++,tn().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const Xpe=(tn().s[101]++,No()(Zpe));var Jpe=8,eme={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},tme={"*":{type:"source"}},nme=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],ime={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},rme={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ome={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},sme={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},ame={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},lme={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ume={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},cme=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Ame={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},hme={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},dme={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},fme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pme={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mme={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yme={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vme={type:"array",value:"*"},bme={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Cme={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},_me={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},xme={type:"array",value:"*",minimum:1},Mme={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},wme={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Sme={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Eme={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Ome=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Bme={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Ime={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},kme={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Tme={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Rme={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Dme={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Pme={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Ume={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Lme={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Kme={"*":{type:"string"}},Fme={$version:Jpe,$root:eme,sources:tme,source:nme,source_vector:ime,source_raster:rme,source_raster_dem:ome,source_geojson:sme,source_video:ame,source_image:lme,layer:ume,layout:cme,layout_background:Ame,layout_fill:hme,layout_circle:dme,layout_heatmap:fme,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:pme,layout_symbol:mme,layout_raster:gme,layout_hillshade:yme,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:vme,filter_operator:bme,geometry_type:Cme,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:_me,expression:xme,light:Mme,sky:wme,terrain:Sme,projection:Eme,paint:Ome,paint_fill:Bme,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Ime,paint_circle:kme,paint_heatmap:Tme,paint_symbol:Rme,paint_raster:Dme,paint_hillshade:Pme,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Ume,transition:Lme,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Kme};const zme=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function jme(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return zme.forEach(i=>{i in e&&(t[i]=e[i])}),t}function oJ(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=jme(n[t],e[n[t].ref]));return n}class Rg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class _P{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new _P(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const ME={kind:"null"},ti={kind:"number"},bo={kind:"string"},ro={kind:"boolean"},$g={kind:"color"},wE={kind:"projectionDefinition"},wb={kind:"object"},eo={kind:"value"},Nme={kind:"error"},SE={kind:"collator"},EE={kind:"formatted"},OE={kind:"padding"},G3={kind:"colorArray"},BE={kind:"numberArray"},J4={kind:"resolvedImage"},IE={kind:"variableAnchorOffsetCollection"};function yf(n,e){return{kind:"array",itemType:n,N:e}}function pl(n){if(n.kind==="array"){const e=pl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Gme=[ME,ti,bo,ro,$g,wE,EE,wb,yf(eo),OE,BE,G3,J4,IE];function W3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!W3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Gme)if(!W3(t,e))return null}}return`Expected ${pl(n)} but found ${pl(e)} instead.`}function xP(n,e){return e.some(t=>t.kind===n.kind)}function Sb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function vy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const sJ=.96422,aJ=1,lJ=.82521,uJ=4/29,j_=6/29,cJ=3*j_*j_,Wme=j_*j_*j_,Qme=Math.PI/180,qme=180/Math.PI;function AJ(n){return n=n%360,n<0&&(n+=360),n}function hJ([n,e,t,i]){n=FO(n),e=FO(e),t=FO(t);let r,o;const s=zO((.2225045*n+.7168786*e+.0606169*t)/aJ);n===e&&e===t?r=o=s:(r=zO((.4360747*n+.3850649*e+.1430804*t)/sJ),o=zO((.0139322*n+.0971045*e+.7141733*t)/lJ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function FO(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function zO(n){return n>Wme?Math.pow(n,1/3):n/cJ+uJ}function dJ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=aJ*NO(r),o=sJ*NO(o),s=lJ*NO(s),[jO(3.1338561*o-1.6168667*r-.4906146*s),jO(-.9787684*o+1.9161415*r+.033454*s),jO(.0719453*o-.2289914*r+1.4052427*s),i]}function jO(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function NO(n){return n>j_?n*n*n:cJ*(n-uJ)}function Yme(n){const[e,t,i,r]=hJ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?AJ(Math.atan2(i,t)*qme):NaN,o,e,r]}function $me([n,e,t,i]){return n=isNaN(n)?0:n*Qme,dJ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Vme([n,e,t,i]){n=AJ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Hme=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function fJ(n,e){return Hme(n,e)?n[e]:void 0}function Zme(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=fJ(Xme,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[Y5(n.slice(s,s+=o)),Y5(n.slice(s,s+=o)),Y5(n.slice(s,s+=o)),Y5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,v,x,S,B,R,F,j]=o,W=[h||" ",x||" ",R].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){const H=[c,v,B].join(""),$=H==="%%%"?100:H===""?255:0;if($){const N=[y_(+a/$,0,1),y_(+m/$,0,1),y_(+S/$,0,1),F?yz(+F,j):1];if(vz(N))return N}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,v,x]=i,S=[s||" ",c||" ",m].join("");if(S==="  "||S==="  /"||S===",,"||S===",,,"){const B=[+o,y_(+a,0,100),y_(+h,0,100),v?yz(+v,x):1];if(vz(B))return Vme(B)}}}function Y5(n){return parseInt(n.padEnd(2,n),16)/255}function yz(n,e){return y_(e?n/100:n,0,1)}function y_(n,e,t){return Math.min(Math.max(e,n),t)}function vz(n){return!n.some(Number.isNaN)}const Xme={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Eb(n,e,t){return n+t*(e-n)}function Q3(n,e,t){return n.map((i,r)=>Eb(i,e[r],t))}class Vs{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof Vs)return e;if(typeof e!="string")return;const t=Zme(e);if(t)return new Vs(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Yme(this.rgb))}get lab(){return this.overwriteGetter("lab",hJ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=Q3(e.rgb,t.rgb,i);return new Vs(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,v,x]=t.hcl;let S,B;if(!isNaN(o)&&!isNaN(h)){let H=h-o;h>o&&H>180?H-=360:h<o&&o-h>180&&(H+=360),S=o+i*H}else isNaN(o)?isNaN(h)?S=NaN:(S=h,(a===1||a===0)&&(B=m)):(S=o,(v===1||v===0)&&(B=s));const[R,F,j,W]=$me([S,B??Eb(s,m,i),Eb(a,v,i),Eb(c,x,i)]);return new Vs(R,F,j,W,!1)}case"lab":{const[o,s,a,c]=dJ(Q3(e.lab,t.lab,i));return new Vs(o,s,a,c,!1)}}}}Vs.black=new Vs(0,0,0,1);Vs.white=new Vs(1,1,1,1);Vs.transparent=new Vs(0,0,0,0);Vs.red=new Vs(1,0,0,1);class MP{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Jme=["bottom","center","top"];class P9{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class o1{constructor(e){this.sections=e}static fromString(e){return new o1([new P9(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof o1?e:o1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class fm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof fm)return e;if(typeof e=="number")return new fm([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new fm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new fm(Q3(e.values,t.values,i))}}class pm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof pm)return e;if(typeof e=="number")return new pm([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new pm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new pm(Q3(e.values,t.values,i))}}class bf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof bf)return e;if(typeof e=="string"){const i=Vs.parse(e);return i?new bf([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=Vs.parse(i);if(!r)return;t.push(r)}return new bf(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(Vs.interpolate(e.values[s],t.values[s],i,r));return new bf(o)}}class Il extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const ege=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Vg{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Vg)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!ege.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new Vg(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Il(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Il(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,v]=o[a+1];s.push([Eb(c,m,i),Eb(h,v,i)])}return new Vg(s)}}class cv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new cv({name:e,available:!1}):null}}class um{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new um(e,t,i)}static parse(e){if(e instanceof um)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new um(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new um(e.from,e.to,e.transition);if(typeof e=="string")return new um(e,e,1)}}function pJ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function q3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof um||n instanceof Vs||n instanceof MP||n instanceof o1||n instanceof fm||n instanceof pm||n instanceof bf||n instanceof Vg||n instanceof cv)return!0;if(Array.isArray(n)){for(const e of n)if(!q3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!q3(n[e]))return!1;return!0}else return!1}function Ju(n){if(n===null)return ME;if(typeof n=="string")return bo;if(typeof n=="boolean")return ro;if(typeof n=="number")return ti;if(n instanceof Vs)return $g;if(n instanceof um)return wE;if(n instanceof MP)return SE;if(n instanceof o1)return EE;if(n instanceof fm)return OE;if(n instanceof pm)return BE;if(n instanceof bf)return G3;if(n instanceof Vg)return IE;if(n instanceof cv)return J4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Ju(i);if(!t)t=r;else{if(t===r)continue;t=eo;break}}return yf(t||eo,e)}else return wb}function h3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Vs||n instanceof um||n instanceof o1||n instanceof fm||n instanceof pm||n instanceof bf||n instanceof Vg||n instanceof cv?n.toString():JSON.stringify(n)}class cx{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!q3(e[1]))return t.error("invalid value");const i=e[1];let r=Ju(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new cx(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const $5={string:bo,number:ti,boolean:ro,object:wb};class cm{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in $5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=$5[h],i++}else a=eo;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=yf(a,c)}else{if(!$5[o])throw new Error(`Types doesn't contain name = ${o}`);r=$5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,eo);if(!a)return null;s.push(a)}return new cm(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(W3(this.type,Ju(i))){if(t===this.args.length-1)throw new Il(`Expected value to be of type ${pl(this.type)}, but found ${pl(Ju(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const bz={"to-boolean":ro,"to-color":$g,"to-number":ti,"to-string":bo};class Ly{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!bz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=bz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,eo);if(!a)return null;o.push(a)}return new Ly(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof Vs)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=pJ(t[0],t[1],t[2],t[3]),!i))return new Vs(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Il(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=fm.parse(t);if(r)return r}throw new Il(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=pm.parse(t);if(r)return r}throw new Il(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=bf.parse(t);if(r)return r}throw new Il(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Vg.parse(t);if(r)return r}throw new Il(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Il(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return o1.fromString(h3(this.args[0].evaluate(e)));case"resolvedImage":return cv.fromString(h3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return h3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const tge=["Unknown","Point","LineString","Polygon"];class mJ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?tge[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Vs.parse(e),this._parseColorCache.set(e,t)),t}}class kE{constructor(e,t,i=[],r,o=new _P,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new cm(o,[r]):s==="coerce"?new Ly(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof cx)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new mJ;try{s=new cx(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new kE(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Rg(i,e))}checkSubtype(e,t){const i=W3(e,t);return i&&this.error(i),i}}class TE{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new TE(i,r):null}outputDefined(){return this.result.outputDefined()}}class RE{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new RE(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class wP{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ti),r=t.parse(e[2],2,yf(t.expectedType||eo));if(!i||!r)return null;const o=r.type;return new wP(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Il(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Il(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Il(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class SP{constructor(e,t){this.type=ro,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,eo),r=t.parse(e[2],2,eo);return!i||!r?null:xP(i.type,[ro,bo,ti,ME,eo])?new SP(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${pl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Sb(t,["boolean","string","number","null"]))throw new Il(`Expected first argument to be of type boolean, string, number or null, but found ${pl(Ju(t))} instead.`);if(!Sb(i,["string","array"]))throw new Il(`Expected second argument to be of type array or string, but found ${pl(Ju(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class qw{constructor(e,t,i){this.type=ti,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,eo),r=t.parse(e[2],2,eo);if(!i||!r)return null;if(!xP(i.type,[ro,bo,ti,ME,eo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${pl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ti);return o?new qw(i,r,o):null}else return new qw(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Sb(t,["boolean","string","number","null"]))throw new Il(`Expected first argument to be of type boolean, string, number or null, but found ${pl(Ju(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Sb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(Sb(i,["array"]))return i.indexOf(t,r);throw new Il(`Expected second argument to be of type array or string, but found ${pl(Ju(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class EP{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const v=e[h+1];Array.isArray(m)||(m=[m]);const x=t.concat(h);if(m.length===0)return x.error("Expected at least one branch label.");for(const B of m){if(typeof B!="number"&&typeof B!="string")return x.error("Branch labels must be numbers or strings.");if(typeof B=="number"&&Math.abs(B)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof B=="number"&&Math.floor(B)!==B)return x.error("Numeric branch labels must be integer values.");if(!i)i=Ju(B);else if(x.checkSubtype(i,Ju(B)))return null;if(typeof o[String(B)]<"u")return x.error("Branch labels must be unique.");o[String(B)]=s.length}const S=t.parse(v,h,r);if(!S)return null;r=r||S.type,s.push(S)}const a=t.parse(e[1],1,eo);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new EP(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Ju(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class OP{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,ro);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new OP(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Yw{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,eo),r=t.parse(e[2],2,ti);if(!i||!r)return null;if(!xP(i.type,[yf(eo),bo,eo]))return t.error(`Expected first argument to be of type array or string, but found ${pl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ti);return o?new Yw(i.type,i,r,o):null}else return new Yw(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Sb(t,["string"]))return[...t].slice(i,r).join("");if(Sb(t,["array"]))return t.slice(i,r);throw new Il(`Expected first argument to be of type array or string, but found ${pl(Ju(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function gJ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Il("Input is not a number.");return 0}class DE{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ti);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new DE(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=gJ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function nge(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var GO,Cz;function ige(){if(Cz)return GO;Cz=1,GO=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},GO}var rge=ige(),oge=nge(rge);class Hg{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=WO(t,e.base,i,r);else if(e.name==="linear")o=WO(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new oge(s[0],s[1],s[2],s[3]).solve(WO(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ti),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=G3?c=$g:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],v=s[h+1],x=h+3,S=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const B=t.parse(v,S,c);if(!B)return null;c=c||B.type,a.push([m,B])}return!vy(c,ti)&&!vy(c,wE)&&!vy(c,$g)&&!vy(c,OE)&&!vy(c,BE)&&!vy(c,G3)&&!vy(c,IE)&&!vy(c,yf(ti))?t.error(`Type ${pl(c)} is not interpolatable.`):new Hg(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=gJ(t,r),a=t[s],c=t[s+1],h=Hg.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Eb(m,v,h);case"color":return Vs.interpolate(m,v,h);case"padding":return fm.interpolate(m,v,h);case"colorArray":return bf.interpolate(m,v,h);case"numberArray":return pm.interpolate(m,v,h);case"variableAnchorOffsetCollection":return Vg.interpolate(m,v,h);case"array":return Q3(m,v,h);case"projectionDefinition":return um.interpolate(m,v,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return Vs.interpolate(m,v,h,"hcl");case"colorArray":return bf.interpolate(m,v,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Vs.interpolate(m,v,h,"lab");case"colorArray":return bf.interpolate(m,v,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function WO(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Y3{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>W3(r,a.type))?new Y3(eo,o):new Y3(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof cv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function _z(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function sge(n,e,t){return e===t}function age(n,e,t){return e!==t}function lge(n,e,t){return e<t}function uge(n,e,t){return e>t}function cge(n,e,t){return e<=t}function Age(n,e,t){return e>=t}function yJ(n,e,t,i){return i.compare(e,t)===0}function hge(n,e,t,i){return!yJ(n,e,t,i)}function dge(n,e,t,i){return i.compare(e,t)<0}function fge(n,e,t,i){return i.compare(e,t)>0}function pge(n,e,t,i){return i.compare(e,t)<=0}function mge(n,e,t,i){return i.compare(e,t)>=0}function Px(n,e,t){const i=n!=="=="&&n!=="!=";return class vJ{constructor(o,s,a){this.type=ro,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,eo);if(!c)return null;if(!_z(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${pl(c.type)}'.`);let h=s.parse(o[2],2,eo);if(!h)return null;if(!_z(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${pl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${pl(c.type)}' and '${pl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new cm(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new cm(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,SE),!m)return null}return new vJ(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Ju(s),h=Ju(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Il(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Ju(s),h=Ju(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const gge=Px("==",sge,yJ),yge=Px("!=",age,hge),vge=Px("<",lge,dge),bge=Px(">",uge,fge),Cge=Px("<=",cge,pge),_ge=Px(">=",Age,mge);class PE{constructor(e,t,i){this.type=SE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,ro);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,ro);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,bo),!s)?null:new PE(r,o,s)}evaluate(e){return new MP(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class BP{constructor(e,t,i,r,o){this.type=bo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ti);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,bo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,bo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ti),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ti),!c)?null:new BP(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class IP{constructor(e){this.type=EE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ti),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,yf(bo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,$g),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Jme.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,bo),!v)return null}const x=r[r.length-1];x.scale=c,x.font=h,x.textColor=m,x.verticalAlign=v}else{const c=t.parse(e[s],1,eo);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new IP(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Ju(r)===J4?new P9("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new P9(h3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new o1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class kP{constructor(e){this.type=J4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,bo);return i?new kP(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=cv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class TP{constructor(e){this.type=ti,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${pl(i.type)} instead.`):new TP(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Il(`Expected value to be of type string or array, but found ${pl(Ju(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Zg=8192;function xge(n,e){const t=Mge(n[0]),i=Sge(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Zg),Math.round(i*r*Zg)]}function RP(n,e){const t=Math.pow(2,e.z),i=(n[0]/Zg+e.x)/t,r=(n[1]/Zg+e.y)/t;return[wge(i),Ege(r)]}function Mge(n){return(180+n)/360}function wge(n){return n*360-180}function Sge(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Ege(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function e5(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function $3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Oge(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function Bge(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function UE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return Rge(o,r)===0?!1:!!(xz(n,e,t,i)&&xz(t,i,n,e))}function Ige(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(UE(n,e,i[r],i[r+1]))return!0;return!1}function Ux(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(Bge(n,r[o],r[o+1]))return t;Oge(n,r[o],r[o+1])&&(i=!i)}return i}function kge(n,e){for(const t of e)if(Ux(n,t))return!0;return!1}function bJ(n,e){for(const t of n)if(!Ux(t,e))return!1;for(let t=0;t<n.length-1;++t)if(Ige(n[t],n[t+1],e))return!1;return!0}function Tge(n,e){for(const t of e)if(bJ(n,t))return!0;return!1}function Rge(n,e){return n[0]*e[1]-n[1]*e[0]}function xz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,v=s*h-c*a;return m>0&&v<0||m<0&&v>0}function DP(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=xge(n[r][s],t);e5(e,a),o.push(a)}i.push(o)}return i}function CJ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=DP(n[r],e,t);i.push(o)}return i}function _J(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}e5(e,n)}function Dge(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Mz(n,e,t,i){const r=Math.pow(2,i.z)*Zg,o=[i.x*Zg,i.y*Zg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];_J(h,e,t,r),s.push(h)}return s}function wz(n,e,t,i){const r=Math.pow(2,i.z)*Zg,o=[i.x*Zg,i.y*Zg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];e5(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){Dge(e);for(const a of s)for(const c of a)_J(c,e,t,r)}return s}function Pge(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=DP(e.coordinates,i,r),s=Mz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!Ux(a,o))return!1}if(e.type==="MultiPolygon"){const o=CJ(e.coordinates,i,r),s=Mz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!kge(a,o))return!1}return!0}function Uge(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=DP(e.coordinates,i,r),s=wz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!bJ(a,o))return!1}if(e.type==="MultiPolygon"){const o=CJ(e.coordinates,i,r),s=wz(n.geometry(),t,i,r);if(!$3(t,i))return!1;for(const a of s)if(!Tge(a,o))return!1}return!0}class Ob{constructor(e,t){this.type=ro,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(q3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new Ob(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Ob(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Ob(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Pge(e,this.geometries);if(e.geometryType()==="LineString")return Uge(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class xJ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function Lge(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=Kge(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function Kge(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const Fge=6378.137,Sz=1/298.257223563,Ez=Sz*(2-Sz),Oz=Math.PI/180;class PP{constructor(e){const t=Oz*Fge*1e3,i=Math.cos(e*Oz),r=1/(1-Ez*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Ez)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-h)*this.kx,x=(e[c+1][1]-m)*this.ky,S=0;(v!==0||x!==0)&&(S=(this.wrap(t[0]-h)*this.kx*v+(t[1]-m)*this.ky*x)/(v*v+x*x),S>1?(h=e[c+1][0],m=e[c+1][1]):S>0&&(h+=v/this.kx*S,m+=x/this.ky*S)),v=this.wrap(t[0]-h)*this.kx,x=(t[1]-m)*this.ky;const B=v*v+x*x;B<i&&(i=B,r=h,o=m,s=c,a=S)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const U9=100,L9=50;function MJ(n,e){return e[0]-n[0]}function $w(n){return n[1]-n[0]+1}function c1(n,e){return n[1]>=n[0]&&n[1]<e}function K9(n,e){if(n[0]>n[1])return[null,null];const t=$w(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function F9(n,e){if(!c1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)e5(t,n[i]);return t}function z9(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)e5(e,i);return e}function Bz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function UP(n,e,t){if(!Bz(n)||!Bz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function fb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function LP(n,e,t,i,r){const o=Math.min(fb(n,[t,i],r),fb(e,[t,i],r)),s=Math.min(fb(t,[n,e],r),fb(i,[n,e],r));return Math.min(o,s)}function zge(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],x=t[m+1];if(UE(c,h,v,x))return 0;s=Math.min(s,LP(c,h,v,x,r))}}return s}function jge(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function Nge(n,e,t){if(Ux(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,fb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Gge(n,e,t,i){if(!c1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Ux(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,v=m-1;h<m;v=h++){const x=c[v],S=c[h];if(UE(s,a,x,S))return 0;r=Math.min(r,LP(s,a,x,S,i))}}return r}function Iz(n,e){for(const t of n)for(const i of t)if(Ux(i,e,!0))return!0;return!1}function Wge(n,e,t,i=1/0){const r=z9(n),o=z9(e);if(i!==1/0&&UP(r,o,t)>=i)return i;if($3(r,o)){if(Iz(n,e))return 0}else if(Iz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const v=a[m],x=a[c];for(const S of e)for(let B=0,R=S.length,F=R-1;B<R;F=B++){const j=S[F],W=S[B];if(UE(v,x,j,W))return 0;s=Math.min(s,LP(v,x,j,W,t))}}return s}function kz(n,e,t,i,r,o){if(!o)return;const s=UP(F9(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function V5(n,e,t,i,r,o,s){if(!o||!s)return;const a=UP(F9(i,o),F9(r,s),t);a<e&&n.push([a,o,s])}function Vw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new xJ([[0,[0,n.length-1],[0,0]]],MJ),a=z9(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?L9:U9;if($w(h)<=m){if(!c1(h,n.length))return NaN;if(e){const v=Gge(n,h,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=h[0];v<=h[1];++v){const x=Nge(n[v],t,i);if(o=Math.min(o,x),o===0)return 0}}else{const v=K9(h,e);kz(s,o,i,n,a,v[0]),kz(s,o,i,n,a,v[1])}}return o}function Hw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new xJ([[0,[0,n.length-1],[0,t.length-1]]],MJ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],v=e?L9:U9,x=i?L9:U9;if($w(h)<=v&&$w(m)<=x){if(!c1(h,n.length)&&c1(m,t.length))return NaN;let S;if(e&&i)S=zge(n,h,t,m,r),s=Math.min(s,S);else if(e&&!i){const B=n.slice(h[0],h[1]+1);for(let R=m[0];R<=m[1];++R)if(S=fb(t[R],B,r),s=Math.min(s,S),s===0)return s}else if(!e&&i){const B=t.slice(m[0],m[1]+1);for(let R=h[0];R<=h[1];++R)if(S=fb(n[R],B,r),s=Math.min(s,S),s===0)return s}else S=jge(n,h,t,m,r),s=Math.min(s,S)}else{const S=K9(h,e),B=K9(m,i);V5(a,s,r,n,t,S[0],B[0]),V5(a,s,r,n,t,S[0],B[1]),V5(a,s,r,n,t,S[1],B[0]),V5(a,s,r,n,t,S[1],B[1])}}return s}function Qge(n,e){const t=n.geometry(),i=t.flat().map(s=>RP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new PP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Hw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Hw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Vw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function qge(n,e){const t=n.geometry(),i=t.flat().map(s=>RP([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new PP(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Hw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Hw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Vw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Yge(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=Lge(t).map(s=>s.map(a=>a.map(c=>RP([c.x,c.y],n.canonical)))),r=new PP(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Vw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Vw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Wge(a,s.coordinates,r,o));break}if(o===0)return o}return o}function QO(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Bb{constructor(e,t){this.type=ti,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(q3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Bb(i,i.features.map(r=>QO(r.geometry)).flat());if(i.type==="Feature")return new Bb(i,QO(i.geometry));if("type"in i&&"coordinates"in i)return new Bb(i,QO(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Qge(e,this.geometries);if(e.geometryType()==="LineString")return qge(e,this.geometries);if(e.geometryType()==="Polygon")return Yge(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class t5{constructor(e){this.type=eo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new t5(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:fJ(i,this.key)}eachChild(){}outputDefined(){return!1}}const LE={"==":gge,"!=":yge,">":bge,"<":vge,">=":_ge,"<=":Cge,array:cm,at:wP,boolean:cm,case:OP,coalesce:Y3,collator:PE,format:IP,image:kP,in:SP,"index-of":qw,interpolate:Hg,"interpolate-hcl":Hg,"interpolate-lab":Hg,length:TP,let:TE,literal:cx,match:EP,number:cm,"number-format":BP,object:cm,slice:Yw,step:DE,string:cm,"to-boolean":Ly,"to-color":Ly,"to-number":Ly,"to-string":Ly,var:RE,within:Ob,distance:Bb,"global-state":t5};class Cf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=Cf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new kE(t.registry,Zw,t.path,null,t.scope);const v=[];let x=!1;for(let S=1;S<e.length;S++){const B=e[S],R=Array.isArray(h)?h[S-1]:h.type,F=c.parse(B,1+v.length,R);if(!F){x=!0;break}v.push(F)}if(!x){if(Array.isArray(h)&&h.length!==v.length){c.error(`Expected ${h.length} arguments, but found ${v.length} instead.`);continue}for(let S=0;S<v.length;S++){const B=Array.isArray(h)?h[S]:h.type,R=v[S];c.concat(S+1).checkSubtype(B,R.type)}if(c.errors.length===0)return new Cf(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([x])=>Vge(x)).join(" | "),v=[];for(let x=1;x<e.length;x++){const S=t.parse(e[x],1+v.length);if(!S)return null;v.push(pl(S.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){Cf.definitions=t;for(const i in t)e[i]=Cf}}function Tz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=pJ(e,t,i,o);if(s)throw new Il(s);return new Vs(e/255,t/255,i/255,o,!1)}function Rz(n,e){return n in e}function qO(n,e){const t=e[n];return typeof t>"u"?null:t}function $ge(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Zv(n){return{type:n}}Cf.register(LE,{error:[Nme,[bo],(n,[e])=>{throw new Il(e.evaluate(n))}],typeof:[bo,[eo],(n,[e])=>pl(Ju(e.evaluate(n)))],"to-rgba":[yf(ti,4),[$g],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[$g,[ti,ti,ti],Tz],rgba:[$g,[ti,ti,ti,ti],Tz],has:{type:ro,overloads:[[[bo],(n,[e])=>Rz(e.evaluate(n),n.properties())],[[bo,wb],(n,[e,t])=>Rz(e.evaluate(n),t.evaluate(n))]]},get:{type:eo,overloads:[[[bo],(n,[e])=>qO(e.evaluate(n),n.properties())],[[bo,wb],(n,[e,t])=>qO(e.evaluate(n),t.evaluate(n))]]},"feature-state":[eo,[bo],(n,[e])=>qO(e.evaluate(n),n.featureState||{})],properties:[wb,[],n=>n.properties()],"geometry-type":[bo,[],n=>n.geometryType()],id:[eo,[],n=>n.id()],zoom:[ti,[],n=>n.globals.zoom],"heatmap-density":[ti,[],n=>n.globals.heatmapDensity||0],elevation:[ti,[],n=>n.globals.elevation||0],"line-progress":[ti,[],n=>n.globals.lineProgress||0],accumulated:[eo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ti,Zv(ti),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ti,Zv(ti),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ti,overloads:[[[ti,ti],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ti],(n,[e])=>-e.evaluate(n)]]},"/":[ti,[ti,ti],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ti,[ti,ti],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ti,[],()=>Math.LN2],pi:[ti,[],()=>Math.PI],e:[ti,[],()=>Math.E],"^":[ti,[ti,ti],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ti,[ti],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))],log2:[ti,[ti],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ti,[ti],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ti,[ti],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ti,[ti],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ti,[ti],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ti,[ti],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ti,[ti],(n,[e])=>Math.atan(e.evaluate(n))],min:[ti,Zv(ti),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ti,Zv(ti),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ti,[ti],(n,[e])=>Math.abs(e.evaluate(n))],round:[ti,[ti],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ti,[ti],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ti,[ti],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[ro,[bo,eo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[ro,[eo],(n,[e])=>n.id()===e.value],"filter-type-==":[ro,[bo],(n,[e])=>n.geometryType()===e.value],"filter-<":[ro,[bo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[ro,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[ro,[bo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[ro,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[ro,[bo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[ro,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[ro,[bo,eo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[ro,[eo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[ro,[eo],(n,[e])=>e.value in n.properties()],"filter-has-id":[ro,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[ro,[yf(bo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[ro,[yf(eo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[ro,[bo,yf(eo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[ro,[bo,yf(eo)],(n,[e,t])=>$ge(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:ro,overloads:[[[ro,ro],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Zv(ro),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:ro,overloads:[[[ro,ro],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Zv(ro),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[ro,[ro],(n,[e])=>!e.evaluate(n)],"is-supported-script":[ro,[bo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[bo,[bo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[bo,[bo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[bo,Zv(eo),(n,e)=>e.map(t=>h3(t.evaluate(n))).join("")],"resolved-locale":[bo,[SE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Vge(n){return Array.isArray(n)?`(${n.map(pl).join(", ")})`:`(${pl(n.type)}...)`}function Zw(n){if(n instanceof RE)return Zw(n.boundExpression);if(n instanceof Cf&&n.name==="error")return!1;if(n instanceof PE)return!1;if(n instanceof Ob)return!1;if(n instanceof Bb)return!1;if(n instanceof t5)return!1;const e=n instanceof Ly||n instanceof cm;let t=!0;return n.eachChild(i=>{e?t=t&&Zw(i):t=t&&i instanceof cx}),t?KP(n)&&zP(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function KP(n){if(n instanceof Cf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Ob||n instanceof Bb)return!1;let e=!0;return n.eachChild(t=>{e&&!KP(t)&&(e=!1)}),e}function FP(n){if(n instanceof Cf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!FP(t)&&(e=!1)}),e}function zP(n,e){if(n instanceof Cf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!zP(i,e)&&(t=!1)}),t}function j9(n){return{result:"success",value:n}}function v_(n){return{result:"error",value:n}}function Hge(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Zge(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Xge(n){return!!n.expression&&n.expression.interpolated}function wJ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Ju(n)===wb}class Jge{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new mJ,this._defaultValue=t?i0e(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Il(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function e0e(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in LE}function SJ(n,e){const t=new kE(LE,Zw,[],e?n0e(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?j9(new Jge(i,e)):v_(t.errors)}class Dz{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!FP(t.expression),this.globalStateRefs=KE(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class Pz{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!FP(t.expression),this.globalStateRefs=KE(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?Hg.interpolationFactor(this.interpolationType,e,t,i):0}}function t0e(n,e){const t=SJ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=KP(i);if(!r&&!Hge(e))return v_([new Rg("","data expressions not supported")]);const o=zP(i,["zoom"]);if(!o&&!Zge(e))return v_([new Rg("","zoom expressions not supported")]);const s=uw(i);if(!s&&!o)return v_([new Rg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Rg)return v_([s]);if(s instanceof Hg&&!Xge(e))return v_([new Rg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return j9(r?new Dz("constant",t.value):new Dz("source",t.value));const a=s instanceof Hg?s.interpolation:void 0;return j9(r?new Pz("camera",t.value,s.labels,a):new Pz("composite",t.value,s.labels,a))}function uw(n){let e=null;if(n instanceof TE)e=uw(n.result);else if(n instanceof Y3){for(const t of n.args)if(e=uw(t),e)break}else(n instanceof DE||n instanceof Hg)&&n.input instanceof Cf&&n.input.name==="zoom"&&(e=n);return e instanceof Rg||n.eachChild(t=>{const i=uw(t);i instanceof Rg?e=i:!e&&i?e=new Rg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Rg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function KE(n,e=new Set){return n instanceof t5&&e.add(n.key),n.eachChild(t=>{KE(t,e)}),e}function n0e(n){const e={color:$g,string:bo,number:ti,enum:bo,boolean:ro,formatted:EE,padding:OE,numberArray:BE,colorArray:G3,projectionDefinition:wE,resolvedImage:J4,variableAnchorOffsetCollection:IE};return n.type==="array"?yf(e[n.value]||eo,n.length):e[n.type]}function i0e(n){if(n.type==="color"&&wJ(n.default))return new Vs(0,0,0,0);switch(n.type){case"color":return Vs.parse(n.default)||null;case"padding":return fm.parse(n.default)||null;case"numberArray":return pm.parse(n.default)||null;case"colorArray":return bf.parse(n.default)||null;case"variableAnchorOffsetCollection":return Vg.parse(n.default)||null;case"projectionDefinition":return um.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function EJ(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!EJ(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const r0e={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function o0e(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};EJ(n)||(n=Xw(n));const e=SJ(n,r0e);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=OJ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>KE(e.value.expression)}}}function s0e(n,e){return n<e?-1:n>e?1:0}function OJ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(OJ(n[e]))return!0;return!1}function Xw(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?YO(n[1],n[2],"=="):e==="!="?H5(YO(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?YO(n[1],n[2],e):e==="any"?a0e(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Xw)):e==="none"?["all"].concat(n.slice(1).map(Xw).map(H5)):e==="in"?Uz(n[1],n.slice(2)):e==="!in"?H5(Uz(n[1],n.slice(2))):e==="has"?Lz(n[1]):e==="!has"?H5(Lz(n[1])):!0}function YO(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function a0e(n){return["any"].concat(n.map(Xw))}function Uz(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(s0e)]]:["filter-in-small",n,["literal",e]]}}function Lz(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function H5(n){return["!",n]}function V3(n){return typeof n=="object"?["literal",n]:n}function l0e(n,e){let t=n.stops;if(!t)return u0e(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],d0e(s[1])]:[s[0],V3(s[1])]),i?c0e(n,e,t):o?h0e(n,e,t):N9(n,e,t)}function u0e(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,V3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function jP(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function c0e(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(GP({},e)==="exponential"){const a=[jP(n),["linear"],["zoom"]];for(const c of o){const h=N9(i[c],e,r[c]);N_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=N9(i[c],e,r[c]);N_(a,c,h,!0)}return NP(a),a}}function A0e(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Kz(n,e){const t=V3(A0e(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function N9(n,e,t){const i=GP(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(Kz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)N_(o,s[0],s[1],!1);return o.push(Kz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)N_(o,s[0],s[1],!0);return NP(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,V3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[jP(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)N_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,V3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function h0e(n,e,t,i=["zoom"]){const r=GP(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[jP(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)N_(o,a[0],a[1],s);return NP(o),o}function NP(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function N_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function GP(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function d0e(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const f0e=Fme;var Fz={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},h2=" ",zz=/(italic|oblique)$/i,jz={};function G9(n,e,t){var i=jz[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,h=0,m=n.length;h<m;++h){var v=n[h],x=v.split(" "),S=x[x.length-1].toLowerCase();S=="normal"||S=="italic"||S=="oblique"?(o=c?o:S,c=!0,x.pop(),S=x[x.length-1].toLowerCase()):zz.test(S)&&(S=S.replace(zz,""),o=c?o:x[x.length-1].replace(S,""),c=!0);for(var B in Fz){var R=x.length>1?x[x.length-2].toLowerCase():"";if(S==B||S==B.replace("-","")||R+"-"+S==B){r=a?r:Fz[B],x.pop(),R&&B.startsWith(R)&&x.pop();break}}!a&&typeof S=="number"&&(r=S,a=!0);var F=x.join(h2).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");F.indexOf(h2)!==-1&&(F='"'+F+'"'),s.push(F)}i=jz[n]=[o,r,s]}return i[0]+h2+i[1]+h2+e+"px"+(t?"/"+t:"")+h2+i[2]}const bd={ADD:"add",REMOVE:"remove"},Ax={PROPERTYCHANGE:"propertychange"},Ir={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class n5{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function p0e(n,e,t){let i,r;t=t||Xg;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function Xg(n,e){return n>e?1:n<e?-1:0}function m0e(n,e){return n<e?1:n>e?-1:0}function FE(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function g0e(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Jg(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Av(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function y0e(n,e,t){const i=e||Xg;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function H3(){return!0}function zE(){return!1}function Z3(){}function BJ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!Av(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function hx(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function i5(n){for(const e in n)delete n[e]}function nv(n){let e;for(e in n)return!1;return!e}class Sm{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class r5 extends n5{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Sm(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let h=0,m=r.length;h<m;++h)if("handleEvent"in r[h]?c=r[h].handleEvent(o):c=r[h].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,Z3);delete s[i]}return c}disposeInternal(){this.listeners_&&i5(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Z3,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function $o(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function Jw(n,e,t,i){return $o(n,e,t,i,!0)}function Oa(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),i5(n))}class o5 extends r5{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ir.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=$o(this,e[o],t);return r}return $o(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=Jw(this,e[o],t)}else i=Jw(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)v0e(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}o5.prototype.on;o5.prototype.once;o5.prototype.un;function v0e(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Oa(n[e]);else Oa(n)}function Lr(){throw new Error("Unimplemented abstract method.")}let b0e=0;function $r(n){return n.ol_uid||(n.ol_uid=String(++b0e))}class Nz extends Sm{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Em extends o5{constructor(e){super(),this.on,this.once,this.un,$r(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Nz(i,e,t)),i=Ax.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Nz(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],nv(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Gz={LENGTH:"length"};class Z5 extends Sm{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Fg extends Em{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Gz.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Z5(bd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Z5(bd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Z5(bd.REMOVE,r,e)),this.dispatchEvent(new Z5(bd.ADD,t,e))}updateLength_(){this.set(Gz.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class b_ extends Sm{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Ey extends b_{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Zl={SINGLECLICK:"singleclick",CLICK:Ir.CLICK,DBLCLICK:Ir.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Fb=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",C0e=Fb.includes("safari")&&!Fb.includes("chrom");C0e&&(Fb.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fb));const _0e=Fb.includes("webkit")&&!Fb.includes("edge"),IJ=Fb.includes("macintosh"),x0e=typeof devicePixelRatio<"u"?devicePixelRatio:1,WP=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,kJ=typeof Image<"u"&&Image.prototype.decode,M0e=typeof createImageBitmap=="function",TJ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),W9={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class w0e extends r5{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=$o(i,W9.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=$o(i,W9.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ir.TOUCHMOVE,this.boundHandleTouchMove_,TJ?{passive:!1}:!1)}emulateClick_(e){let t=new Ey(Zl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Ey(Zl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Ey(Zl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Zl.POINTERUP||t.type==Zl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Zl.POINTERDOWN||t.type==Zl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Ey(Zl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Oa),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Ey(Zl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push($o(i,Zl.POINTERMOVE,this.handlePointerMove_,this),$o(i,Zl.POINTERUP,this.handlePointerUp_,this),$o(this.element_,Zl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push($o(this.element_.getRootNode(),Zl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Ey(Zl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Ey(Zl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Oa(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ir.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Oa(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Oa),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Z0={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},NA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ai={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function xs(n,e){if(!n)throw new Error(e)}const eS=1/0;class S0e{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,i5(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){xs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=eS?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),m=h<r&&i[h]<i[c]?h:c;t[e]=t[m],i[e]=i[m],e=m}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==eS?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class RJ extends S0e{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ir.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ai.LOADED||i===ai.ERROR||i===ai.EMPTY){i!==ai.ERROR&&t.removeEventListener(Ir.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===ai.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function E0e(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return eS;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const dl={ANIMATING:0,INTERACTING:1},im={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function kl(n,e,t){return Math.min(Math.max(n,e),t)}function O0e(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return Ib(n,e,t,i)}function Ib(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function B0e(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let h=i;h<e+1;h++)i==h?n[a][h]=0:n[a][h]+=c*n[i][h]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Wz(n){return n*180/Math.PI}function Hy(n){return n*Math.PI/180}function kb(n,e){const t=n%e;return t*e<0?t+e:t}function ff(n,e,t){return n+t*(e-n)}function jE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function X5(n,e){return Math.floor(jE(n,e))}function Ky(n,e){return Math.ceil(jE(n,e))}function Q9(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function Qz(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,h=e?0:o[1]*r,m=a?a[0]:0,v=a?a[1]:0;let x=n[0]+c/2+m,S=n[2]-c/2+m,B=n[1]+h/2+v,R=n[3]-h/2+v;x>S&&(x=(S+x)/2,S=x),B>R&&(B=(R+B)/2,R=B);let F=kl(i[0],x,S),j=kl(i[1],B,R);if(s&&t&&r){const W=30*r;F+=-W*Math.log(1+Math.max(0,x-i[0])/W)+W*Math.log(1+Math.max(0,i[0]-S)/W),j+=-W*Math.log(1+Math.max(0,B-i[1])/W)+W*Math.log(1+Math.max(0,i[1]-R)/W)}return[F,j]})}function I0e(n){return n}const Yc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function q9(n){const e=vp();for(let t=0,i=n.length;t<i;++t)d3(e,n[t]);return e}function k0e(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return A1(i,r,o,s,t)}function Zy(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function DJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Xb(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function zb(n,e){return QP(n,e[0],e[1])}function zg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function QP(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Y9(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=Yc.UNKNOWN;return s<t?c=c|Yc.LEFT:s>r&&(c=c|Yc.RIGHT),a<i?c=c|Yc.BELOW:a>o&&(c=c|Yc.ABOVE),c===Yc.UNKNOWN&&(c=Yc.INTERSECTING),c}function vp(){return[1/0,1/0,-1/0,-1/0]}function A1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Lx(n){return A1(1/0,1/0,-1/0,-1/0,n)}function PJ(n,e){const t=n[0],i=n[1];return A1(t,i,t,i,e)}function qP(n,e,t,i,r){const o=Lx(r);return LJ(o,n,e,t,i)}function h1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function UJ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function d3(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function LJ(n,e,t,i,r){for(;t<i;t+=r)T0e(n,e[t],e[t+1]);return n}function T0e(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function KJ(n,e){let t;return t=e(NE(n)),t||(t=e(GE(n)),t)||(t=e(WE(n)),t)||(t=e(g1(n)),t)?t:!1}function $9(n){let e=0;return Jb(n)||(e=is(n)*ec(n)),e}function NE(n){return[n[0],n[1]]}function GE(n){return[n[2],n[1]]}function Sf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function R0e(n,e){let t;if(e==="bottom-left")t=NE(n);else if(e==="bottom-right")t=GE(n);else if(e==="top-left")t=g1(n);else if(e==="top-right")t=WE(n);else throw new Error("Invalid corner");return t}function tS(n,e,t,i,r){const[o,s,a,c,h,m,v,x]=FJ(n,e,t,i);return A1(Math.min(o,a,h,v),Math.min(s,c,m,x),Math.max(o,a,h,v),Math.max(s,c,m,x),r)}function FJ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,h=r*a,m=o*s,v=o*a,x=n[0],S=n[1];return[x-c+v,S-h-m,x-c-v,S-h+m,x+c-v,S+h+m,x+c+v,S+h-m,x-c+v,S-h-m]}function ec(n){return n[3]-n[1]}function ym(n,e,t){const i=t||vp();return Jl(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Lx(i),i}function g1(n){return[n[0],n[3]]}function WE(n){return[n[2],n[3]]}function is(n){return n[2]-n[0]}function Jl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Jb(n){return n[2]<n[0]||n[3]<n[1]}function D0e(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function P0e(n,e,t){let i=!1;const r=Y9(n,e),o=Y9(n,t);if(r===Yc.INTERSECTING||o===Yc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],h=n[3],m=e[0],v=e[1],x=t[0],S=t[1],B=(S-v)/(x-m);let R,F;o&Yc.ABOVE&&!(r&Yc.ABOVE)&&(R=x-(S-h)/B,i=R>=s&&R<=c),!i&&o&Yc.RIGHT&&!(r&Yc.RIGHT)&&(F=S-(x-c)*B,i=F>=a&&F<=h),!i&&o&Yc.BELOW&&!(r&Yc.BELOW)&&(R=x-(S-a)/B,i=R>=s&&R<=c),!i&&o&Yc.LEFT&&!(r&Yc.LEFT)&&(F=S-(x-s)*B,i=F>=a&&F<=h)}return i}function U0e(n,e,t,i){if(Jb(n))return Lx(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return k0e(o,s,t)}function zJ(n,e){const t=e.getExtent(),i=Sf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=is(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function jJ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];zJ(n,e);const r=is(i);if(is(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function L0e(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function nS(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function YP(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function K0e(n,e){return n[0]*=e,n[1]*=e,n}function F0e(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function z0e(n,e){return Math.sqrt(F0e(n,e))}function $P(n,e){if(e.canWrapX()){const t=is(e.getExtent()),i=j0e(n,e,t);i&&(n[0]-=i*t)}return n}function j0e(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||is(i),r=Math.floor((n[0]-i[0])/t)),r}function NJ(n){return Math.pow(n,3)}function Kx(n){return 1-NJ(1-n)}function N0e(n){return 3*n*n-2*n*n*n}function G0e(n){return n}const W0e=63710088e-1;function qz(n,e,t){t=t||W0e;const i=Hy(n[1]),r=Hy(e[1]),o=(r-i)/2,s=Hy(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function GJ(...n){console.warn(...n)}const iv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class QE{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||iv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const s5=6378137,O_=Math.PI*s5,Q0e=[-O_,-O_,O_,O_],q0e=[-180,-85,180,85],J5=s5*Math.log(Math.tan(Math.PI/2));class LC extends QE{constructor(e){super({code:e,units:"m",extent:Q0e,global:!0,worldExtent:q0e,getPointResolution:function(t,i){return t/Math.cosh(i[1]/s5)}})}}const Yz=[new LC("EPSG:3857"),new LC("EPSG:102100"),new LC("EPSG:102113"),new LC("EPSG:900913"),new LC("http://www.opengis.net/def/crs/EPSG/0/3857"),new LC("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Y0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=O_*n[o]/180;let s=s5*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>J5?s=J5:s<-J5&&(s=-J5),e[o+1]=s}return e}function $0e(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/O_,e[o+1]=360*Math.atan(Math.exp(n[o+1]/s5))/Math.PI-90;return e}const V0e=6378137,$z=[-180,-90,180,90],H0e=Math.PI*V0e/180;class Xv extends QE{constructor(e,t){super({code:e,units:"degrees",extent:$z,axisOrientation:t,global:!0,metersPerUnit:H0e,worldExtent:$z})}}const Vz=[new Xv("CRS:84"),new Xv("EPSG:4326","neu"),new Xv("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xv("urn:ogc:def:crs:OGC:2:84"),new Xv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let V9={};function Z0e(n){return V9[n]||V9[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function X0e(n,e){V9[n]=e}let G_={};function X3(n,e,t){const i=n.getCode(),r=e.getCode();i in G_||(G_[i]={}),G_[i][r]=t}function $O(n,e){return n in G_&&e in G_[n]?G_[n][e]:null}const iS=.9996,mp=.00669438,qE=mp*mp,YE=qE*mp,pb=mp/(1-mp),Hz=Math.sqrt(1-mp),dx=(1-Hz)/(1+Hz),WJ=dx*dx,VP=WJ*dx,HP=VP*dx,QJ=HP*dx,qJ=1-mp/4-3*qE/64-5*YE/256,J0e=3*mp/8+3*qE/32+45*YE/1024,e1e=15*qE/256+45*YE/1024,t1e=35*YE/3072,n1e=3/2*dx-27/32*VP+269/512*QJ,i1e=21/16*WJ-55/32*HP,r1e=151/96*VP-417/128*QJ,o1e=1097/512*HP,rS=6378137;function s1e(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/iS/(rS*qJ),a=s+n1e*Math.sin(2*s)+i1e*Math.sin(4*s)+r1e*Math.sin(6*s)+o1e*Math.sin(8*s),c=Math.sin(a),h=c*c,m=Math.cos(a),v=c/m,x=v*v,S=x*x,B=1-mp*h,R=Math.sqrt(1-mp*h),F=rS/R,j=(1-mp)/B,W=pb*m**2,H=W*W,$=i/(F*iS),N=$*$,Y=N*$,z=Y*$,ne=z*$,ae=ne*$,ve=a-v/j*(N/2-z/24*(5+3*x+10*W-4*H-9*pb))+ae/720*(61+90*x+298*W+45*S-252*pb-3*H);let pe=($-Y/6*(1+2*x+W)+ne/120*(5-2*W+28*x-3*H+8*pb+24*S))/m;return pe=Q9(pe+Hy(YJ(t.number)),-Math.PI,Math.PI),[Wz(pe),Wz(ve)]}const Zz=-80,Xz=84,a1e=-180,l1e=180;function u1e(n,e,t){n=Q9(n,a1e,l1e),e<Zz?e=Zz:e>Xz&&(e=Xz);const i=Hy(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,h=Hy(n),m=YJ(t.number),v=Hy(m),x=rS/Math.sqrt(1-mp*r**2),S=pb*o**2,B=o*Q9(h-v,-Math.PI,Math.PI),R=B*B,F=R*B,j=F*B,W=j*B,H=W*B,$=rS*(qJ*i-J0e*Math.sin(2*i)+e1e*Math.sin(4*i)-t1e*Math.sin(6*i)),N=iS*x*(B+F/6*(1-a+S)+W/120*(5-18*a+c+72*S-58*pb))+5e5;let Y=iS*($+x*s*(R/2+j/24*(5-a+9*S+4*S**2)+H/720*(61-58*a+c+600*S-330*pb)));return t.north||(Y+=1e7),[N,Y]}function YJ(n){return(n-1)*6-180+3}const c1e=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function $J(n){let e=0;for(const r of c1e){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function Jz(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],h=t[a+1],m=n(c,h,e);i[a]=m[0],i[a+1]=m[1]}return i}}function A1e(n){return $J(n)?new QE({code:n,units:"m"}):null}function h1e(n){const e=$J(n.getCode());return e?{forward:Jz(u1e,e),inverse:Jz(s1e,e)}:null}const d1e=[h1e],f1e=[A1e];let H9=!0;function VJ(n){H9=!1}function ZP(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Z9(n){X0e(n.getCode(),n),X3(n,n,ZP)}function p1e(n){n.forEach(Z9)}function Hs(n){if(typeof n!="string")return n;const e=Z0e(n);if(e)return e;for(const t of f1e){const i=t(n);if(i)return i}return null}function X9(n,e,t,i){n=Hs(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/iv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=a5(n,Hs("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=a(h,h,2);const m=qz(h.slice(0,2),h.slice(2,4)),v=qz(h.slice(4,6),h.slice(6,8));r=(m+v)/2}const c=i?iv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function ej(n){p1e(n),n.forEach(function(e){n.forEach(function(t){e!==t&&X3(e,t,ZP)})})}function m1e(n,e,t,i){n.forEach(function(r){e.forEach(function(o){X3(r,o,t),X3(o,r,i)})})}function XP(n,e){return n?typeof n=="string"?Hs(n):n:Hs(e)}function g1e(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let h=0,m=r;h<m;++h)t[s+h]=h>=c?e[s+h]:a[h]}return t})}function J9(n,e){return VJ(),$E(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function VO(n,e){const t=$E(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=kb(i+180,360)-180),t}function Xy(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||a5(n,e)===ZP)&&t}function a5(n,e){const t=n.getCode(),i=e.getCode();let r=$O(t,i);if(r)return r;let o=null,s=null;for(const c of d1e)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=HO(o.inverse,s.forward);else{const c=$O(t,a);c&&(r=HO(c,s.forward))}else{const c=$O(a,i);c&&(r=HO(o.inverse,c))}return r&&(Z9(n),Z9(e),X3(n,e,r)),r}function HO(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function J3(n,e){const t=Hs(n),i=Hs(e);return a5(t,i)}function $E(n,e,t){const i=J3(e,t);if(!i){const r=Hs(e).getCode(),o=Hs(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}let y1e=null;function v1e(){return y1e}function eR(n,e){return n}function H0(n,e){return H9&&!nS(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(H9=!1,GJ("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function JP(n,e){return n}function jg(n,e){return n}function b1e(){ej(Yz),ej(Vz),m1e(Vz,Yz,Y0e,$0e)}b1e();const HJ=new Array(6);function Ed(){return[1,0,0,1,0,0]}function tj(n){return tU(n,1,0,0,1,0,0)}function eU(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],h=e[1],m=e[2],v=e[3],x=e[4],S=e[5];return n[0]=t*c+r*h,n[1]=i*c+o*h,n[2]=t*m+r*v,n[3]=i*m+o*v,n[4]=t*x+r*S+s,n[5]=i*x+o*S+a,n}function tU(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function C1e(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Zu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function ZO(n,e,t){return eU(n,tU(HJ,e,0,0,t,0,0))}function _1e(n,e,t){return eU(n,tU(HJ,1,0,0,1,e,t))}function n0(n,e,t,i,r,o,s,a){const c=Math.sin(o),h=Math.cos(o);return n[0]=i*h,n[1]=r*c,n[2]=-i*c,n[3]=r*h,n[4]=s*i*h-a*i*c+e,n[5]=s*r*c+a*r*h+t,n}function ZJ(n,e){const t=x1e(e);xs(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function x1e(n){return n[0]*n[3]-n[1]*n[2]}const M1e=[1e5,1e5,1e5,1e5,2,2];function w1e(n){return"matrix("+n.join(", ")+")"}function nj(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function S1e(n,e){const t=nj(n),i=nj(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*M1e[r])!==0)return!1;return!0}function Jy(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const h=n[c],m=n[c+1];o[a++]=r[0]*h+r[2]*m+r[4],o[a++]=r[1]*h+r[3]*m+r[5];for(let v=2;v<s;v++)o[a++]=n[c+v]}return o&&o.length!=a&&(o.length=a),o}function XJ(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),h=o[0],m=o[1];let v=0;for(let x=e;x<t;x+=i){const S=n[x]-h,B=n[x+1]-m;s[v++]=h+S*a-B*c,s[v++]=m+S*c+B*a;for(let R=x+2;R<x+i;++R)s[v++]=n[R]}return s&&s.length!=v&&(s.length=v),s}function E1e(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],h=s[1];let m=0;for(let v=e;v<t;v+=i){const x=n[v]-c,S=n[v+1]-h;a[m++]=c+r*x,a[m++]=h+o*S;for(let B=v+2;B<v+i;++B)a[m++]=n[B]}return a&&a.length!=m&&(a.length=m),a}function O1e(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let h=c+2;h<c+i;++h)s[a++]=n[h]}return s&&s.length!=a&&(s.length=a),s}const ij=Ed(),B1e=[NaN,NaN];class JJ extends Em{constructor(){super(),this.extent_=vp(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=BJ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Lr()}closestPointXY(e,t,i,r){return Lr()}containsXY(e,t){return this.closestPointXY(e,t,B1e,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Lr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Lx(t),this.extentRevision_=this.getRevision()}return D0e(this.extent_,e)}rotate(e,t){Lr()}scale(e,t,i){Lr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Lr()}getType(){return Lr()}applyTransform(e){Lr()}intersectsExtent(e){return Lr()}translate(e,t){Lr()}transform(e,t){const i=Hs(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),h=i.getWorldExtent(),m=ec(h)/ec(c);n0(ij,h[0],h[3],m,-m,0,0,0);const v=Jy(o,0,o.length,a,ij,s),x=J3(i,t);return x?x(v,v,a):v}:J3(i,t);return this.applyTransform(r),this}}class eC extends JJ{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return qP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Lr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=rj(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Lr()}setLayout(e,t,i){let r;if(e)r=rj(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=tC(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();XJ(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Sf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();E1e(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();O1e(i,0,i.length,r,e,t,i),this.changed()}}}function tC(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function rj(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function I1e(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Jy(i,0,i.length,r,e,t)}function eee(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const h=n[e]-o,m=n[e+1]-s;r+=c*h-a*m,a=h,c=m}return r/2}function tee(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=eee(n,e,a,i),e=a}return r}function k1e(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=tee(n,e,a,i),e=a[a.length-1]}return r}function oj(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],h=n[t]-a,m=n[t+1]-c;let v;if(h===0&&m===0)v=e;else{const x=((r-a)*h+(o-c)*m)/(h*h+m*m);if(x>1)v=t;else if(x>0){for(let S=0;S<i;++S)s[S]=ff(n[e+S],n[t+S],x);s.length=i;return}else v=e}for(let x=0;x<i;++x)s[x]=n[v+x];s.length=i}function nU(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],h=Ib(o,s,a,c);h>r&&(r=h),o=a,s=c}return r}function iU(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=nU(n,e,a,i,r),e=a}return r}function T1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=iU(n,e,a,i,r),e=a[a.length-1]}return r}function rU(n,e,t,i,r,o,s,a,c,h,m){if(e==t)return h;let v,x;if(r===0){if(x=Ib(s,a,n[e],n[e+1]),x<h){for(v=0;v<i;++v)c[v]=n[e+v];return c.length=i,x}return h}m=m||[NaN,NaN];let S=e+i;for(;S<t;)if(oj(n,S-i,S,i,s,a,m),x=Ib(s,a,m[0],m[1]),x<h){for(h=x,v=0;v<i;++v)c[v]=m[v];c.length=i,S+=i}else S+=i*Math.max((Math.sqrt(x)-Math.sqrt(h))/r|0,1);if(o&&(oj(n,t-i,e,i,s,a,m),x=Ib(s,a,m[0],m[1]),x<h)){for(h=x,v=0;v<i;++v)c[v]=m[v];c.length=i}return h}function oU(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let v=0,x=t.length;v<x;++v){const S=t[v];h=rU(n,e,S,i,r,o,s,a,c,h,m),e=S}return h}function R1e(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let v=0,x=t.length;v<x;++v){const S=t[v];h=oU(n,e,S,i,r,o,s,a,c,h,m),e=S[S.length-1]}return h}function D1e(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function VE(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function l5(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=VE(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function nee(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=l5(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function Fy(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function e4(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=Fy(n,e,c,i,r[o]),e=c}return r.length=o,r}function tR(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:e4(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function HE(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const h=[e,t-i];let m=0;for(;h.length>0;){const v=h.pop(),x=h.pop();let S=0;const B=n[x],R=n[x+1],F=n[v],j=n[v+1];for(let W=x+i;W<v;W+=i){const H=n[W],$=n[W+1],N=O0e(H,$,B,R,F,j);N>S&&(m=W,S=N)}S>r&&(c[(m-e)/i]=1,x+i<m&&h.push(x,m),m+i<v&&h.push(m,v))}for(let v=0;v<a;++v)c[v]&&(o[s++]=n[e+v*i],o[s++]=n[e+v*i+1]);return s}function iee(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=HE(n,e,m,i,r,o,s),a.push(s),e=m}return s}function ob(n,e){return e*Math.round(n/e)}function P1e(n,e,t,i,r,o,s){if(e==t)return s;let a=ob(n[e],r),c=ob(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let h,m;do if(h=ob(n[e],r),m=ob(n[e+1],r),e+=i,e==t)return o[s++]=h,o[s++]=m,s;while(h==a&&m==c);for(;e<t;){const v=ob(n[e],r),x=ob(n[e+1],r);if(e+=i,v==h&&x==m)continue;const S=h-a,B=m-c,R=v-a,F=x-c;if(S*F==B*R&&(S<0&&R<S||S==R||S>0&&R>S)&&(B<0&&F<B||B==F||B>0&&F>B)){h=v,m=x;continue}o[s++]=h,o[s++]=m,a=h,c=m,h=v,m=x}return o[s++]=h,o[s++]=m,s}function sU(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=P1e(n,e,m,i,r,o,s),a.push(s),e=m}return s}function U1e(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c],v=[];s=sU(n,e,m,i,r,o,s,v),a.push(v),e=m[m.length-1]}return s}class t4 extends eC{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new t4(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<Xb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return eee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Fy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=HE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new t4(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=VE(this.flatCoordinates,0,e,this.stride),this.changed()}}class jb extends eC{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new jb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=Ib(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return PJ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return QP(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=D1e(this.flatCoordinates,0,e,this.stride),this.changed()}}function L1e(n,e,t,i,r){return!KJ(r,function(s){return!mb(n,e,t,i,s[0],s[1])})}function mb(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const h=n[e],m=n[e+1];c<=o?m>o&&(h-a)*(o-c)-(r-a)*(m-c)>0&&s++:m<=o&&(h-a)*(o-c)-(r-a)*(m-c)<0&&s--,a=h,c=m}return s!==0}function aU(n,e,t,i,r,o){if(t.length===0||!mb(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(mb(n,t[s-1],t[s],i,r,o))return!1;return!0}function K1e(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(aU(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function lU(n,e,t,i,r,o,s){let a,c,h,m,v,x,S;const B=r[o+1],R=[];for(let W=0,H=t.length;W<H;++W){const $=t[W];for(m=n[$-i],x=n[$-i+1],a=e;a<$;a+=i)v=n[a],S=n[a+1],(B<=x&&S<=B||x<=B&&B<=S)&&(h=(B-x)/(S-x)*(v-m)+m,R.push(h)),m=v,x=S}let F=NaN,j=-1/0;for(R.sort(Xg),m=R[0],a=1,c=R.length;a<c;++a){v=R[a];const W=Math.abs(v-m);W>j&&(h=(m+v)/2,aU(n,e,t,i,h,B)&&(F=h,j=W)),m=v}return isNaN(F)&&(F=r[o]),s?(s.push(F,B,j),s):[F,B,j]}function ree(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=lU(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function oee(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function ZE(n,e,t,i,r,o){return o=o??LJ(vp(),n,e,t,i),Jl(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:oee(n,e,t,i,function(s,a){return P0e(r,s,a)}):!1}function F1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if(ZE(n,e,t[o],i,r))return!0;e=t[o]}return!1}function see(n,e,t,i,r){return!!(ZE(n,e,t,i,r)||mb(n,e,t,i,r[0],r[1])||mb(n,e,t,i,r[0],r[3])||mb(n,e,t,i,r[2],r[1])||mb(n,e,t,i,r[2],r[3]))}function aee(n,e,t,i,r){if(!see(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(L1e(n,t[o-1],t[o],i,r)&&!ZE(n,t[o-1],t[o],i,r))return!1;return!0}function z1e(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(aee(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function j1e(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function uU(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function cU(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=uU(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function lee(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!cU(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function oS(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=uU(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&j1e(n,e,a,i),e=a}return e}function nR(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=oS(n,e,t[o],i,r);return e}function uee(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],h=uU(n,i,c,2);if(o===void 0&&(o=h),h===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class d1 extends eC{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Jg(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new d1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Xb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iU(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return aU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return tee(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),oS(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,e4(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Sf(this.getExtent());this.flatInteriorPoint_=lU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new jb(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new t4(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],h=new t4(t.slice(o,c),e);r.push(h),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;cU(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=oS(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=sU(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new d1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return aee(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=l5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function sj(n){if(Jb(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new d1(o,"XY",[o.length])}function AU(n,e,t,i){const r=is(e)/t[0],o=ec(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function hU(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),kl(i,t/2,e*2)}function N1e(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],h=n[n.length-1],m=t?AU(c,t,s,i):c;if(a)return e?hU(r,m,h):kl(r,h,m);const v=Math.min(m,r),x=Math.floor(FE(n,v,o));return n[x]>m&&x<n.length-1?n[x+1]:n[x]}})}function G1e(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,h){if(s!==void 0){const m=r?AU(e,r,c,o):e;if(h)return i?hU(s,m,t):kl(s,t,m);const v=1e-9,x=Math.ceil(Math.log(e/m)/Math.log(n)-v),S=-a*(.5-v)+.5,B=Math.min(m,s),R=Math.floor(Math.log(e/B)/Math.log(n)+S),F=Math.max(x,R),j=e/Math.pow(n,F);return kl(j,t,m)}})}function aj(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const h=i?AU(n,i,a,r):n;return!t||!c?kl(o,e,h):hU(o,h,e)}})}function dU(n){if(n!==void 0)return 0}function lj(n){if(n!==void 0)return n}function W1e(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function Q1e(n){const e=Hy(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const cee=42,fU=256,XO=0;class Am extends Em{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=XP(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&VJ(),e.center&&(e.center=H0(e.center,this.projection_)),e.extent&&(e.extent=jg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in im)delete t[a];this.setProperties(t,!0);const i=Y1e(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=q1e(e),o=i.constraint,s=$1e(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=H0(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=H0(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===t){i&&eM(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const h=[];for(;r<t;++r){const m=arguments[r],v={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||N0e,callback:i};if(m.center&&(v.sourceCenter=s,v.targetCenter=m.center.slice(),s=v.targetCenter),m.zoom!==void 0?(v.sourceResolution=a,v.targetResolution=this.getResolutionForZoom(m.zoom),a=v.targetResolution):m.resolution&&(v.sourceResolution=a,v.targetResolution=m.resolution,a=v.targetResolution),m.rotation!==void 0){v.sourceRotation=c;const x=kb(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=c+x,c=v.targetRotation}V1e(v)?v.complete=!0:o+=v.duration,h.push(v)}this.animations_.push(h),this.setHint(dl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[dl.ANIMATING]>0}getInteracting(){return this.hints_[dl.INTERACTING]>0}cancelAnimations(){this.setHint(dl.ANIMATING,-this.hints_[dl.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&eM(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const h=e-c.start;let m=c.duration>0?h/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;const v=c.easing(m);if(c.sourceCenter){const x=c.sourceCenter[0],S=c.sourceCenter[1],B=c.targetCenter[0],R=c.targetCenter[1];this.nextCenter_=c.targetCenter;const F=x+v*(B-x),j=S+v*(R-S);this.targetCenter_=[F,j]}if(c.sourceResolution&&c.targetResolution){const x=v===1?c.targetResolution:c.sourceResolution+v*(c.targetResolution-c.sourceResolution);if(c.anchor){const S=this.getViewportSize_(this.getRotation()),B=this.constraints_.resolution(x,0,S,!0);this.targetCenter_=this.calculateCenterZoom(B,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=x,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const x=v===1?kb(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+v*(c.targetRotation-c.sourceRotation);if(c.anchor){const S=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(S,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(dl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&eM(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],YP(i,e-this.getRotation()),L0e(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&eR(e,this.getProjection())}getCenterInternal(){return this.get(im.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return JP(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();xs(t,"The view center is not defined");const i=this.getResolution();xs(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return xs(r!==void 0,"The view rotation is not defined"),tS(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(im.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(jg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=is(e)/t[0],r=ec(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(im.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=JO(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=FE(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=kl(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,kl(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(xs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){xs(!Jb(e),"Cannot fit empty extent provided as `geometry`");const r=jg(e,this.getProjection());i=sj(r)}else if(e.getType()==="Circle"){const r=jg(e.getExtent(),this.getProjection());i=sj(r),i.rotate(this.getRotation(),Sf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let v=0,x=o.length;v<x;v+=s){const S=o[v]*i-o[v+1]*r,B=o[v]*r+o[v+1]*i;a=Math.min(a,S),c=Math.min(c,B),h=Math.max(h,S),m=Math.max(m,B)}return[a,c,h,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const h=this.getRotation(),m=Math.sin(h),v=Math.cos(h),x=Sf(a);x[0]+=(r[1]-r[3])/2*c,x[1]+=(r[0]-r[2])/2*c;const S=x[0]*v-x[1]*m,B=x[1]*v+x[0]*m,R=this.getConstrainedCenter([S,B],c),F=t.callback?t.callback:Z3;t.duration!==void 0?this.animateInternal({resolution:c,center:R,duration:t.duration,easing:t.easing},F):(this.targetResolution_=c,this.targetCenter_=R,this.applyTargetState_(!1,!0),eM(F,!0))}centerOn(e,t,i){this.centerOnInternal(H0(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(JO(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=JO(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=eR(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&H0(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=H0(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&H0(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(im.ROTATION)!==r&&this.set(im.ROTATION,r),this.get(im.RESOLUTION)!==s&&(this.set(im.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(im.CENTER)||!nS(this.get(im.CENTER),a))&&this.set(im.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!nS(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:Kx,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(dl.INTERACTING,1)}endInteraction(e,t,i){i=i&&H0(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(dl.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function eM(n,e){setTimeout(function(){n(e)},0)}function q1e(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Qz(n.extent,n.constrainOnlyCenter,t)}const e=XP(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Qz(t,!1,!1)}return I0e}function Y1e(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:XO,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,v=n.showFullExtent!==void 0?n.showFullExtent:!1,x=XP(n.projection,"EPSG:3857"),S=x.getExtent();let B=n.constrainOnlyCenter,R=n.extent;if(!h&&!R&&x.isGlobal()&&(B=!1,R=S),n.resolutions!==void 0){const F=n.resolutions;t=F[s],i=F[a]!==void 0?F[a]:F[F.length-1],n.constrainResolution?e=N1e(F,m,!B&&R,v):e=aj(t,i,m,!B&&R,v)}else{const j=(S?Math.max(is(S),ec(S)):360*iv.degrees/x.getMetersPerUnit())/fU/Math.pow(2,XO),W=j/Math.pow(2,28-XO);t=n.maxResolution,t!==void 0?s=0:t=j/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=j/Math.pow(c,a):i=W),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=G1e(c,t,i,m,!B&&R,v):e=aj(t,i,m,!B&&R,v)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function $1e(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Q1e():t===!1?lj:typeof t=="number"?W1e(t):lj}return dU}function V1e(n){return!(n.sourceCenter&&n.targetCenter&&!nS(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function JO(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const h=a*o-c*s,m=c*o+a*s;return[h,m]}const tM="ol-hidden",H1e="ol-selectable",XE="ol-unselectable",pU="ol-control",uj="ol-collapsed",Z1e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),cj=["style","variant","weight","size","lineHeight","family"],iR={normal:400,bold:700},rR=function(n){const e=n.match(Z1e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=cj.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[cj[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in iR&&(t.weight=iR[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Tl(n,e,t,i){let r;return t&&t.length?r=t.shift():WP?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let eB;function sS(){return eB||(eB=Tl(1,1)),eB}function u5(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function X1e(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function J1e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Aj(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Aee(n){for(;n.lastChild;)n.lastChild.remove()}function eye(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}class mU extends Em{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Oa(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Z3&&this.listenerKeys.push($o(e,Z0.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class tye extends mU{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Ir.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+XE+" "+pU+(this.collapsed_&&this.collapsible_?" "+uj:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=h,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>hx(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Av(t,this.renderedAttributions_)){Aee(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(uj),this.collapsed_?Aj(this.collapseLabel_,this.label_):Aj(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class nye extends mU{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Ir.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+XE+" "+pU,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(tM)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Kx}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(tM);!o&&i===0?this.element.classList.add(tM):o&&i!==0&&this.element.classList.remove(tM)}this.label_.style.transform=r}this.rotation_=i}}class iye extends mU{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof s=="string"?document.createTextNode(s):s),m.addEventListener(Ir.CLICK,this.handleClick_.bind(this,i),!1);const v=document.createElement("button");v.className=o,v.setAttribute("type","button"),v.title=h,v.appendChild(typeof a=="string"?document.createTextNode(a):a),v.addEventListener(Ir.CLICK,this.handleClick_.bind(this,-i),!1);const x=t+" "+XE+" "+pU,S=this.element;S.className=x,S.appendChild(m),S.appendChild(v),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Kx})):i.setZoom(o)}}}function rye(n){n=n||{};const e=new Fg;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new iye(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new nye(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new tye(n.attributionOptions)),e}class oye{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const hj={ACTIVE:"active"};class c5 extends Em{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(hj.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(hj.ACTIVE,e)}setMap(e){this.map_=e}}function sye(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:G0e,center:n.getConstrainedCenter(r)})}}function gU(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:Kx})}class aye extends c5{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Zl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();gU(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function oR(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const lye=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},uye=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},hee=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?uye(n):!0},cye=H3,dee=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(_0e&&IJ&&e.ctrlKey)},fee=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Aye=function(n){const e=n.originalEvent;return IJ?e.metaKey:e.ctrlKey},hye=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},pee=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},tB=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},dye=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class A5 extends c5{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Zl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Zl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Zl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Zl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function yU(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class fye extends A5{constructor(e){super({stopDown:zE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:oR(fee,dye);this.condition_=e.onFocusOnly?oR(hee,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(yU(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();K0e(o,a.getResolution()),YP(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Kx})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class pye extends A5{constructor(e){e=e||{},super({stopDown:zE}),this.condition_=e.condition?e.condition:lye,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!tB(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===dU)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return tB(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return tB(e)&&dee(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class mye extends n5{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new d1([r])}getGeometry(){return this.geometry_}}const KC={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class d2 extends Sm{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class gye extends A5{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new mye(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??dee,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new d2(KC.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new d2(t?KC.BOXEND:KC.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new d2(KC.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new d2(KC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new d2(KC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class yye extends gye{constructor(e){e=e||{};const t=e.condition?e.condition:hye;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Kx})}}const Jv={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class vye extends c5{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return fee(t)&&pee(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ir.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Jv.DOWN||r==Jv.LEFT||r==Jv.RIGHT||r==Jv.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,h=0;r==Jv.DOWN?h=-a:r==Jv.LEFT?c=-a:r==Jv.RIGHT?c=a:h=a;const m=[c,h];YP(m,s.getRotation()),sye(s,m,this.duration_),i.preventDefault(),t=!0}}return!t}}class bye extends c5{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Aye(t)&&pee(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ir.KEYDOWN||e.type==Ir.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();gU(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const Cye=40,_ye=300;class xye extends c5{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:cye;this.condition_=e.onFocusOnly?oR(hee,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ir.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=Cye;break;case WheelEvent.DOM_DELTA_PAGE:o*=_ye;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-kl(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),gU(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Mye extends A5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=zE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==dU&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(yU(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class wye extends A5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=zE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(yU(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Sye(n){n=n||{};const e=new Fg,t=new oye(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new pye),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new aye({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new fye({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new Mye),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new wye({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new vye),e.push(new bye({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new xye({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new yye({duration:n.zoomDuration})),e}const ea={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class mee extends Em{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ea.OPACITY]=e.opacity!==void 0?e.opacity:1,xs(typeof t[ea.OPACITY]=="number","Layer opacity must be a number"),t[ea.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ea.Z_INDEX]=e.zIndex,t[ea.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ea.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ea.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ea.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=kl(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Lr()}getLayerStatesArray(e){return Lr()}getExtent(){return this.get(ea.EXTENT)}getMaxResolution(){return this.get(ea.MAX_RESOLUTION)}getMinResolution(){return this.get(ea.MIN_RESOLUTION)}getMinZoom(){return this.get(ea.MIN_ZOOM)}getMaxZoom(){return this.get(ea.MAX_ZOOM)}getOpacity(){return this.get(ea.OPACITY)}getSourceState(){return Lr()}getVisible(){return this.get(ea.VISIBLE)}getZIndex(){return this.get(ea.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ea.EXTENT,e)}setMaxResolution(e){this.set(ea.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ea.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ea.MAX_ZOOM,e)}setMinZoom(e){this.set(ea.MIN_ZOOM,e)}setOpacity(e){xs(typeof e=="number","Layer opacity must be a number"),this.set(ea.OPACITY,e)}setVisible(e){this.set(ea.VISIBLE,e)}setZIndex(e){this.set(ea.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class By extends Sm{constructor(e,t){super(e),this.layer=t}}const nB={LAYERS:"layers"};class Fx extends mee{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(nB.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Fg(i.slice(),{unique:!0}):xs(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Fg(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Oa),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push($o(e,bd.ADD,this.handleLayersAdd_,this),$o(e,bd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Oa);i5(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new By("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[$o(e,Ax.PROPERTYCHANGE,this.handleLayerChange_,this),$o(e,Ir.CHANGE,this.handleLayerChange_,this)];e instanceof Fx&&t.push($o(e,"addlayer",this.handleLayerGroupAdd_,this),$o(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[$r(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new By("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new By("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new By("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=$r(t);this.listenerKeys_[i].forEach(Oa),delete this.listenerKeys_[i],this.dispatchEvent(new By("removelayer",t)),this.changed()}getLayers(){return this.get(nB.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new By("removelayer",i[r]))}this.set(nB.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=ym(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const Ap={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class zx extends mee{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ea.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ea.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Oa(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=$o(e,Ir.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Am?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return vU(r,t.viewState)&&(!o||Jl(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Am?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ea.MAP,e)}getMapInternal(){return this.get(ea.MAP)}setMap(e){this.mapPrecomposeKey_&&(Oa(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Oa(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=$o(e,Ap.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=$o(this,Ir.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);xs(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(ea.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function vU(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function gee(n,e,t=0,i=n.length-1,r=Eye){for(;i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,m=Math.log(c),v=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*v*(c-v)/c)*(h-c/2<0?-1:1),S=Math.max(t,Math.floor(e-h*v/c+x)),B=Math.min(i,Math.floor(e+(c-h)*v/c+x));gee(n,e,S,B,r)}const o=n[e];let s=t,a=i;for(f2(n,t,e),r(n[i],o)>0&&f2(n,t,i);s<a;){for(f2(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?f2(n,t,a):(a++,f2(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function f2(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function Eye(n,e){return n<e?-1:n>e?1:0}let yee=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!iM(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;iM(e,c)&&(t.leaf?i.push(a):rB(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!iM(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(iM(e,s)){if(t.leaf||rB(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=C_([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,h;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),h=!0),i.leaf){const m=Oye(e,i.children,t);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!h&&!i.leaf&&rB(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=C_(e.slice(t,i+1)),FC(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=C_([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),h=c*Math.ceil(Math.sqrt(s));dj(e,t,i,h,this.compareMinX);for(let m=t;m<=i;m+=h){const v=Math.min(m+h-1,i);dj(e,m,v,c,this.compareMinY);for(let x=m;x<=v;x+=c){const S=Math.min(x+c-1,v);a.children.push(this._build(e,x,S,r-1))}}return FC(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const h=t.children[c],m=iB(h),v=kye(e,h)-m;v<s?(s=v,o=m<o?m:o,a=h):v===s&&m<o&&(o=m,a=h)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),N2(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=C_(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,FC(i,this.toBBox),FC(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=C_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,FC(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=j2(e,0,a,this.toBBox),h=j2(e,a,i,this.toBBox),m=Tye(c,h),v=iB(c)+iB(h);m<o?(o=m,r=a,s=v<s?v:s):m===o&&v<s&&(s=v,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:Bye,o=e.leaf?this.compareMinY:Iye,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=j2(e,0,t,o),a=j2(e,i-t,i,o);let c=nM(s)+nM(a);for(let h=t;h<i-t;h++){const m=e.children[h];N2(s,e.leaf?o(m):m),c+=nM(s)}for(let h=i-t-1;h>=t;h--){const m=e.children[h];N2(a,e.leaf?o(m):m),c+=nM(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)N2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():FC(e[t],this.toBBox)}};function Oye(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function FC(n,e){j2(n,0,n.children.length,e,n)}function j2(n,e,t,i,r){r||(r=C_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];N2(r,n.leaf?i(s):s)}return r}function N2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Bye(n,e){return n.minX-e.minX}function Iye(n,e){return n.minY-e.minY}function iB(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function nM(n){return n.maxX-n.minX+(n.maxY-n.minY)}function kye(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Tye(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function rB(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function iM(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function C_(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dj(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;gee(n,s,e,t,r),o.push(e,s,s,t)}}const bU=[NaN,NaN,NaN,0];let oB;function Rye(){return oB||(oB=Tl(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),oB}const Dye=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Pye=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Uye=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Lye=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function rM(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function f3(n){throw new Error('failed to parse "'+n+'" as color')}function vee(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(Pye)||n.match(Dye)||n.match(Uye);if(o){const s=o[4],a=100/255;return[kl(rM(o[1],a)+.5|0,0,255),kl(rM(o[2],a)+.5|0,0,255),kl(rM(o[3],a)+.5|0,0,255),s!==void 0?kl(rM(s,100),0,1):1]}f3(n)}if(n.startsWith("#")){if(Lye.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,h=o.length;c<h;c+=s){let m=parseInt(o.substring(c,c+s),16);s===1&&(m+=m<<4),a[c/s]=m}return a[3]=a[3]/255,a}f3(n)}const e=Rye();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&f3(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return vee(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=jE(r[3]/255,3),r}function Kye(n){return typeof n=="string"?n:_U(n)}const Fye=1024,p2={};let sB=0;function zye(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function aB(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function lB(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function uB(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function cB(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function fj(n){const e=uB(n[0]),t=uB(n[1]),i=uB(n[2]),r=cB(e*.222488403+t*.716873169+i*.06060791),o=500*(cB(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-cB(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function jye(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=lB(e),o=lB(e+t/500*Math.cos(i)),s=lB(e-t/200*Math.sin(i)),a=aB(o*3.021973625-r*1.617392459-s*.404875592),c=aB(o*-.943766287+r*1.916279586+s*.027607165),h=aB(o*.069407491-r*.22898585+s*1.159737864);return[kl(a+.5|0,0,255),kl(c+.5|0,0,255),kl(h+.5|0,0,255),n[3]]}function CU(n){if(n==="none")return bU;if(p2.hasOwnProperty(n))return p2[n];if(sB>=Fye){let t=0;for(const i in p2)(t++&3)===0&&(delete p2[i],--sB)}const e=vee(n);e.length!==4&&f3(n);for(const t of e)isNaN(t)&&f3(n);return p2[n]=e,++sB,e}function fx(n){return Array.isArray(n)?n:CU(n)}function _U(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function pj(n){return n[0]>0&&n[1]>0}function Nye(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function YA(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let nC=0;const Oh=1<<nC++,Yo=1<<nC++,Cd=1<<nC++,hm=1<<nC++,Nb=1<<nC++,G2=1<<nC++,oM=Math.pow(2,nC)-1,xU={[Oh]:"boolean",[Yo]:"number",[Cd]:"string",[hm]:"color",[Nb]:"number[]",[G2]:"size"},Gye=Object.keys(xU).map(Number).sort(Xg);function Wye(n){return n in xU}function W2(n){const e=[];for(const t of Gye)Q2(n,t)&&e.push(xU[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Q2(n,e){return(n&e)===e}function by(n,e){return n===e}class Cc{constructor(e,t){if(!Wye(e))throw new Error(`literal expressions must have a specific type, got ${W2(e)}`);this.type=e,this.value=t}}class Qye{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function bee(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function pA(n,e,t){switch(typeof n){case"boolean":{if(by(e,Cd))return new Cc(Cd,n?"true":"false");if(!Q2(e,Oh))throw new Error(`got a boolean, but expected ${W2(e)}`);return new Cc(Oh,n)}case"number":{if(by(e,G2))return new Cc(G2,YA(n));if(by(e,Oh))return new Cc(Oh,!!n);if(by(e,Cd))return new Cc(Cd,n.toString());if(!Q2(e,Yo))throw new Error(`got a number, but expected ${W2(e)}`);return new Cc(Yo,n)}case"string":{if(by(e,hm))return new Cc(hm,CU(n));if(by(e,Oh))return new Cc(Oh,!!n);if(!Q2(e,Cd))throw new Error(`got a string, but expected ${W2(e)}`);return new Cc(Cd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return nve(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(by(e,G2)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Cc(G2,n)}if(by(e,hm)){if(n.length===3)return new Cc(hm,[...n,1]);if(n.length===4)return new Cc(hm,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Q2(e,Nb))throw new Error(`got an array of numbers, but expected ${W2(e)}`);return new Cc(Nb,n)}const yn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},qye={[yn.Get]:Pr(fo(1,1/0),mj),[yn.Var]:Pr(fo(1,1),Yye),[yn.Has]:Pr(fo(1,1/0),mj),[yn.Id]:Pr($ye,zC),[yn.Concat]:Pr(fo(2,1/0),ks(Cd)),[yn.GeometryType]:Pr(Vye,zC),[yn.LineMetric]:Pr(zC),[yn.Resolution]:Pr(AB,zC),[yn.Zoom]:Pr(AB,zC),[yn.Time]:Pr(AB,zC),[yn.Any]:Pr(fo(2,1/0),ks(Oh)),[yn.All]:Pr(fo(2,1/0),ks(Oh)),[yn.Not]:Pr(fo(1,1),ks(Oh)),[yn.Equal]:Pr(fo(2,2),ks(oM)),[yn.NotEqual]:Pr(fo(2,2),ks(oM)),[yn.GreaterThan]:Pr(fo(2,2),ks(Yo)),[yn.GreaterThanOrEqualTo]:Pr(fo(2,2),ks(Yo)),[yn.LessThan]:Pr(fo(2,2),ks(Yo)),[yn.LessThanOrEqualTo]:Pr(fo(2,2),ks(Yo)),[yn.Multiply]:Pr(fo(2,1/0),gj),[yn.Coalesce]:Pr(fo(2,1/0),gj),[yn.Divide]:Pr(fo(2,2),ks(Yo)),[yn.Add]:Pr(fo(2,1/0),ks(Yo)),[yn.Subtract]:Pr(fo(2,2),ks(Yo)),[yn.Clamp]:Pr(fo(3,3),ks(Yo)),[yn.Mod]:Pr(fo(2,2),ks(Yo)),[yn.Pow]:Pr(fo(2,2),ks(Yo)),[yn.Abs]:Pr(fo(1,1),ks(Yo)),[yn.Floor]:Pr(fo(1,1),ks(Yo)),[yn.Ceil]:Pr(fo(1,1),ks(Yo)),[yn.Round]:Pr(fo(1,1),ks(Yo)),[yn.Sin]:Pr(fo(1,1),ks(Yo)),[yn.Cos]:Pr(fo(1,1),ks(Yo)),[yn.Atan]:Pr(fo(1,2),ks(Yo)),[yn.Sqrt]:Pr(fo(1,1),ks(Yo)),[yn.Match]:Pr(fo(4,1/0),yj,Zye),[yn.Between]:Pr(fo(3,3),ks(Yo)),[yn.Interpolate]:Pr(fo(6,1/0),yj,Xye),[yn.Case]:Pr(fo(3,1/0),Hye,Jye),[yn.In]:Pr(fo(2,2),eve),[yn.Number]:Pr(fo(1,1/0),ks(oM)),[yn.String]:Pr(fo(1,1/0),ks(oM)),[yn.Array]:Pr(fo(1,1/0),ks(Yo)),[yn.Color]:Pr(fo(1,4),ks(Yo)),[yn.Band]:Pr(fo(1,3),ks(Yo)),[yn.Palette]:Pr(fo(2,2),tve),[yn.ToString]:Pr(fo(1,1),ks(Oh|Yo|Cd|hm))};function mj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new Cc(Yo,s);break}case"string":{r[o]=new Cc(Cd,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function Yye(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new Cc(Cd,i)]}function $ye(n,e,t){t.featureId=!0}function Vye(n,e,t){t.geometryType=!0}function AB(n,e,t){t.mapState=!0}function zC(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function fo(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function gj(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=pA(n[o+1],e,t);r[o]=s}return r}function ks(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=pA(e[s+1],n,i);o[s]=a}return o}}function Hye(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function yj(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function Zye(n,e,t){const i=n.length-1,r=Cd|Yo|Oh,o=pA(n[1],r,t),s=pA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const h=pA(n[c+2],o.type,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=pA(n[c+3],s.type,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[o,...a,s]}function Xye(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new Cc(Yo,r);let s;try{s=pA(n[2],Yo,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const h=pA(n[c+3],Yo,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=pA(n[c+4],e,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[o,s,...a]}function Jye(n,e,t){const i=pA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=pA(n[o+1],Oh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=pA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function eve(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Cd}else r=Yo;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=pA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[pA(n[1],r,t),...o]}function tve(n,e,t){let i;try{i=pA(n[1],Yo,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=pA(r[s],hm,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof Cc))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function Pr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new Qye(t,r,...o)}}function nve(n,e,t){const i=n[0],r=qye[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function Cee(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Cee(n.getGeometries()[0]);default:return""}}function _ee(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function y1(n,e,t){const i=pA(n,e,t);return vm(i)}function vm(n,e){if(n instanceof Cc){if(n.type===hm&&typeof n.value=="string"){const i=CU(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case yn.Number:case yn.String:case yn.Coalesce:return ive(n);case yn.Get:case yn.Var:case yn.Has:return rve(n);case yn.Id:return i=>i.featureId;case yn.GeometryType:return i=>i.geometryType;case yn.Concat:{const i=n.args.map(r=>vm(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case yn.Resolution:return i=>i.resolution;case yn.Any:case yn.All:case yn.Between:case yn.In:case yn.Not:return sve(n);case yn.Equal:case yn.NotEqual:case yn.LessThan:case yn.LessThanOrEqualTo:case yn.GreaterThan:case yn.GreaterThanOrEqualTo:return ove(n);case yn.Multiply:case yn.Divide:case yn.Add:case yn.Subtract:case yn.Clamp:case yn.Mod:case yn.Pow:case yn.Abs:case yn.Floor:case yn.Ceil:case yn.Round:case yn.Sin:case yn.Cos:case yn.Atan:case yn.Sqrt:return ave(n);case yn.Case:return lve(n);case yn.Match:return uve(n);case yn.Interpolate:return cve(n);case yn.ToString:return Ave(n);default:throw new Error(`Unsupported operator ${t}`)}}function ive(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case yn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case yn.Number:case yn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function rve(n,e){const i=n.args[0].value;switch(n.operator){case yn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;s=s[m]}return s};case yn.Var:return r=>r.variables[i];case yn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;if(!s||!Object.hasOwn(s,m))return!1;s=s[m]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function ove(n,e){const t=n.operator,i=vm(n.args[0]),r=vm(n.args[1]);switch(t){case yn.Equal:return o=>i(o)===r(o);case yn.NotEqual:return o=>i(o)!==r(o);case yn.LessThan:return o=>i(o)<r(o);case yn.LessThanOrEqualTo:return o=>i(o)<=r(o);case yn.GreaterThan:return o=>i(o)>r(o);case yn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function sve(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case yn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case yn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case yn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case yn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case yn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function ave(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case yn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case yn.Divide:return o=>r[0](o)/r[1](o);case yn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case yn.Subtract:return o=>r[0](o)-r[1](o);case yn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case yn.Mod:return o=>r[0](o)%r[1](o);case yn.Pow:return o=>Math.pow(r[0](o),r[1](o));case yn.Abs:return o=>Math.abs(r[0](o));case yn.Floor:return o=>Math.floor(r[0](o));case yn.Ceil:return o=>Math.ceil(r[0](o));case yn.Round:return o=>Math.round(r[0](o));case yn.Sin:return o=>Math.sin(r[0](o));case yn.Cos:return o=>Math.cos(r[0](o));case yn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case yn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function lve(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=vm(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function uve(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=vm(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function cve(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=vm(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let h=2;h<t;h+=2){const m=i[h](r);let v=i[h+1](r);const x=Array.isArray(v);if(x&&(v=zye(v)),m>=s)return h===2?v:x?hve(o,s,a,c,m,v):q2(o,s,a,c,m,v);a=m,c=v}return c}}function Ave(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case yn.ToString:return o=>{const s=r[0](o);return n.args[0].type===hm?_U(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function q2(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function hve(n,e,t,i,r,o){if(r-t===0)return i;const a=fj(i),c=fj(o);let h=c[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const m=[q2(n,e,t,a[0],r,c[0]),q2(n,e,t,a[1],r,c[1]),a[2]+q2(n,e,t,0,r,h),q2(n,e,t,i[3],r,o[3])];return jye(m)}const zi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class MU extends r5{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?zi.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Ir.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==zi.IDLE&&this.loader){this.state=zi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;hx(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||M0e&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=zi.LOADED}).catch(i=>{this.state=zi.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function dve(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[Jw(i,Ir.LOAD,function(){s=!0,o||e()})];return i.src&&kJ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(Jw(i,Ir.ERROR,t)),function(){r=!1,a.forEach(Oa)}}function fve(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function pve(n,e){return e&&(n.src=e),n.src&&kJ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):fve(n)}class mve{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=hB(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=hB(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=hB(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===zi.IDLE&&r.load(),r.getImageState()===zi.LOADING?r.ready().then(()=>{this.patternCache_[s]=sS().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=sS().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function hB(n,e,t){const i=t?fx(t):"null";return e+":"+n+":"+i}const hp=new mve;let m2=null;class xee extends r5{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?zi.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===zi.LOADED){m2||(m2=Tl(1,1,void 0,{willReadFrequently:!0})),m2.drawImage(this.image_,0,0);try{m2.getImageData(0,0,1,1),this.tainted_=!1}catch{m2=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ir.CHANGE)}handleImageError_(){this.imageState_=zi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=zi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Tl(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===zi.IDLE){this.image_||this.initializeImage_(),this.imageState_=zi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&pve(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==zi.LOADED)return;const t=this.image_,i=Tl(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Kye(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===zi.LOADED||this.imageState_===zi.ERROR)e();else{const t=()=>{(this.imageState_===zi.LOADED||this.imageState_===zi.ERROR)&&(this.removeEventListener(Ir.CHANGE,t),e())};this.addEventListener(Ir.CHANGE,t)}})),this.ready_}}function wU(n,e,t,i,r,o){let s=e===void 0?void 0:hp.get(e,t,r);return s||(s=new xee(n,n&&"src"in n?n.src||void 0:e,t,i,r),hp.set(e,t,r,s,o)),o&&s&&!hp.getPattern(e,t,r)&&hp.set(e,t,r,s,o),s}function Ng(n){return n?Array.isArray(n)?_U(n):typeof n=="object"&&"src"in n?gve(n):n:null}function gve(n){if(!n.offset||!n.size)return hp.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=hp.getPattern(e,void 0,n.color);if(t)return t;const i=hp.get(n.src,"anonymous",null);if(i.getImageState()!==zi.LOADED)return null;const r=Tl(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),wU(r.canvas,e,void 0,zi.LOADED,n.color,!0),hp.getPattern(e,void 0,n.color)}const Mee="10px sans-serif",_d="#000",px="round",s1=[],a1=0,mx="round",n4=10,i4="#000",r4="center",aS="middle",gb=[0,0,0,0],o4=1,lb=new Em;let g2=null,vj;const sR={},yve=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function vve(n,e,t){return`${n} ${e} 16px "${t}"`}const bve=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=rR(o),c=a.families[0].toLowerCase(),h=a.weight;return s.some(m=>{const v=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),x=iR[m.weight]||m.weight;return v===c&&m.style===a.style&&x==h})}async function r(){await t.ready;let o=!0;const s=lb.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const h=a[c];let m=s[h];m<100&&(await i(h)?(i5(sR),lb.set(h,100)):(m+=10,lb.set(h,m,!0),m<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=WP?self.fonts:document.fonts);const s=rR(o);if(!s)return;const a=s.families;let c=!1;for(const h of a){if(yve.has(h))continue;const m=vve(s.style,s.weight,h);lb.get(m)===void 0&&(lb.set(m,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),Cve=(function(){let n;return function(e){let t=sR[e];if(t==null){if(WP){const i=rR(e),r=wee(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);sR[e]=t}return t}})();function wee(n,e){return g2||(g2=Tl(1,1)),n!=vj&&(g2.font=n,vj=g2.font),g2.measureText(e)}function See(n,e){return wee(n,e).width}function bj(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,See(n,o)),0);return t[e]=i,i}function _ve(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let h=0,m=e.length;h<=m;h+=2){const v=e[h];if(v===`
`||h===m){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const x=e[h+1]||n.font,S=See(x,v);t.push(S),s+=S;const B=Cve(x);i.push(B),c=Math.max(c,B)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function xve(n,e,t,i,r,o,s,a,c,h,m){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=v=>v.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,h),n.scale(m[0],m[1]),Mve(i,n)):m[0]<0||m[1]<0?(n.translate(c,h),n.scale(m[0],m[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,h,s*m[0],a*m[1]),n.restore()}function Mve(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class JE{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=YA(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new JE({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Lr()}getImage(e){return Lr()}getHitDetectionImage(){return Lr()}getPixelRatio(e){return 1}getImageState(){return Lr()}getImageSize(){return Lr()}getOrigin(){return Lr()}getSize(){return Lr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=YA(e)}listenImageChange(e){Lr()}load(){Lr()}unlistenImageChange(e){Lr()}ready(){return Promise.resolve()}}class e6 extends JE{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?zi.LOADING:zi.LOADED,this.imageState_===zi.LOADING&&this.ready().then(()=>this.imageState_=zi.LOADED),this.render()}clone(){const e=this.getScale(),t=new e6({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=hp.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Tl(s,s);this.draw_(o,a,e),r=a.canvas,hp.set(i,null,null,new xee(r,void 0,null,zi.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const Y=r;r=o,o=Y}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),h=Math.sqrt(o*o-c*c),m=r-h,v=Math.sqrt(c*c+m*m),x=v/c;if(e==="miter"&&x<=i)return x*t;const S=t/2/x,B=t/2*(m/v),F=Math.sqrt((r+S)*(r+S)+B*B)-r;if(this.radius2_===void 0||e==="bevel")return F*2;const j=r*Math.sin(a),W=Math.sqrt(r*r-j*j),H=o-W,N=Math.sqrt(j*j+H*H)/j;if(N<=i){const Y=N*t/2-o-r;return 2*Math.max(F,Y)}return F*2}createRenderOptions(){let e=px,t=mx,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=Ng(this.stroke_.getColor()??i4),a=this.stroke_.getWidth()??o4,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??mx,e=this.stroke_.getLineCap()??px,i=this.stroke_.getMiterLimit()??n4);const c=this.calculateLineJoinSize_(t,a,i),h=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*h+c);return{strokeStyle:s,strokeWidth:a,size:m,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=_d),t.fillStyle=Ng(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=fx(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Tl(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,h=a%2===0?i:r;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=_d,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class h5 extends e6{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new h5({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class n1{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new n1({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=wU(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===zi.IDLE&&t.load(),t.getImageState()===zi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?$r(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:fx(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Cj(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class gx extends JE{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;xs(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||$r(s)),xs(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),xs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=zi.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?zi.LOADED:zi.IDLE:c=zi.LOADING:c=zi.LOADED),this.color_=e.color!==void 0?fx(e.color):null,this.iconImage_=wU(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,m;if(e.size)[h,m]=e.size;else{const v=this.getImage(1);if(v.width&&v.height)h=v.width,m=v.height;else if(v instanceof HTMLImageElement){this.initialOptions_=e;const x=()=>{if(this.unlistenImageChange(x),!this.initialOptions_)return;const S=this.iconImage_.getSize();this.setScale(Cj(S[0],S[1],e.width,e.height))};this.listenImageChange(x);return}}h!==void 0&&this.setScale(Cj(h,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new gx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==zi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==zi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ir.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ir.CHANGE,e)}ready(){return this.iconImage_.ready()}}class zy{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new zy({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class pf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=_j,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new pf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=_j,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function wve(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(xs(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let dB=null;function Eee(n,e){if(!dB){const t=new n1({color:"rgba(255,255,255,0.4)"}),i=new zy({color:"#3399CC",width:1.25});dB=[new pf({image:new h5({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return dB}function _j(n){return n.getGeometry()}const Sve="#333";let Oee=class Bee{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=YA(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new n1({color:Sve}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Bee({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=YA(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function Eve(n){return!0}function Ove(n){const e=bee(),t=Bve(n,e),i=_ee();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=Cee(r.getGeometry())),t(i)}}function xj(n){const e=bee(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=aR(n[s],e);const r=_ee(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const h=s.getId();h!==void 0?r.featureId=h:r.featureId=null}let c=0;for(let h=0;h<t;++h){const m=i[h](r);m&&(o[c]=m,c+=1)}return o.length=c,o}}function Bve(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?y1(o.filter,Oh,e):Eve;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let h=0;h<c;++h)a[h]=aR(o.style[h],e)}else a=[aR(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const h of i[a].styles){const m=h(r);m&&o.push(m)}}}return o}}function aR(n,e){const t=s4(n,"",e),i=a4(n,"",e),r=Ive(n,e),o=kve(n,e),s=wd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!nv(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new pf;return function(c){let h=!0;if(t){const m=t(c);m&&(h=!1),a.setFill(m)}if(i){const m=i(c);m&&(h=!1),a.setStroke(m)}if(r){const m=r(c);m&&(h=!1),a.setText(m)}if(o){const m=o(c);m&&(h=!1),a.setImage(m)}return s&&a.setZIndex(s(c)),h?null:a}}function s4(n,e,t){let i;if(e+"fill-pattern-src"in n)i=Pve(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=SU(n,e+"fill-color",t)}if(!i)return null;const r=new n1;return function(o){const s=i(o);return s===bU?null:(r.setColor(s),r)}}function a4(n,e,t){const i=wd(n,e+"stroke-width",t),r=SU(n,e+"stroke-color",t);if(!i&&!r)return null;const o=X0(n,e+"stroke-line-cap",t),s=X0(n,e+"stroke-line-join",t),a=Iee(n,e+"stroke-line-dash",t),c=wd(n,e+"stroke-line-dash-offset",t),h=wd(n,e+"stroke-miter-limit",t),m=new zy;return function(v){if(r){const x=r(v);if(x===bU)return null;m.setColor(x)}if(i&&m.setWidth(i(v)),o){const x=o(v);if(x!=="butt"&&x!=="round"&&x!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(x)}if(s){const x=s(v);if(x!=="bevel"&&x!=="round"&&x!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(x)}return a&&m.setLineDash(a(v)),c&&m.setLineDashOffset(c(v)),h&&m.setMiterLimit(h(v)),m}}function Ive(n,e){const t="text-",i=X0(n,t+"value",e);if(!i)return null;const r=s4(n,t,e),o=s4(n,t+"background-",e),s=a4(n,t,e),a=a4(n,t+"background-",e),c=X0(n,t+"font",e),h=wd(n,t+"max-angle",e),m=wd(n,t+"offset-x",e),v=wd(n,t+"offset-y",e),x=W_(n,t+"overflow",e),S=X0(n,t+"placement",e),B=wd(n,t+"repeat",e),R=t6(n,t+"scale",e),F=W_(n,t+"rotate-with-view",e),j=wd(n,t+"rotation",e),W=X0(n,t+"align",e),H=X0(n,t+"justify",e),$=X0(n,t+"baseline",e),N=W_(n,t+"keep-upright",e),Y=Iee(n,t+"padding",e),z=n6(n,t+"declutter-mode"),ne=new Oee({declutterMode:z});return function(ae){if(ne.setText(i(ae)),r&&ne.setFill(r(ae)),o&&ne.setBackgroundFill(o(ae)),s&&ne.setStroke(s(ae)),a&&ne.setBackgroundStroke(a(ae)),c&&ne.setFont(c(ae)),h&&ne.setMaxAngle(h(ae)),m&&ne.setOffsetX(m(ae)),v&&ne.setOffsetY(v(ae)),x&&ne.setOverflow(x(ae)),S){const ve=S(ae);if(ve!=="point"&&ve!=="line")throw new Error("Expected point or line for text-placement");ne.setPlacement(ve)}if(B&&ne.setRepeat(B(ae)),R&&ne.setScale(R(ae)),F&&ne.setRotateWithView(F(ae)),j&&ne.setRotation(j(ae)),W){const ve=W(ae);if(ve!=="left"&&ve!=="center"&&ve!=="right"&&ve!=="end"&&ve!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ne.setTextAlign(ve)}if(H){const ve=H(ae);if(ve!=="left"&&ve!=="right"&&ve!=="center")throw new Error("Expected left, right, or center for text-justify");ne.setJustify(ve)}if($){const ve=$(ae);if(ve!=="bottom"&&ve!=="top"&&ve!=="middle"&&ve!=="alphabetic"&&ve!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ne.setTextBaseline(ve)}return Y&&ne.setPadding(Y(ae)),N&&ne.setKeepUpright(N(ae)),ne}}function kve(n,e){return"icon-src"in n?Tve(n,e):"shape-points"in n?Rve(n,e):"circle-radius"in n?Dve(n,e):null}function Tve(n,e){const t="icon-",i=t+"src",r=kee(n[i],i),o=lS(n,t+"anchor",e),s=t6(n,t+"scale",e),a=wd(n,t+"opacity",e),c=lS(n,t+"displacement",e),h=wd(n,t+"rotation",e),m=W_(n,t+"rotate-with-view",e),v=wj(n,t+"anchor-origin"),x=Sj(n,t+"anchor-x-units"),S=Sj(n,t+"anchor-y-units"),B=Fve(n,t+"color"),R=Lve(n,t+"cross-origin"),F=Kve(n,t+"offset"),j=wj(n,t+"offset-origin"),W=uS(n,t+"width"),H=uS(n,t+"height"),$=Uve(n,t+"size"),N=n6(n,t+"declutter-mode"),Y=new gx({src:r,anchorOrigin:v,anchorXUnits:x,anchorYUnits:S,color:B,crossOrigin:R,offset:F,offsetOrigin:j,height:H,width:W,size:$,declutterMode:N});return function(z){return a&&Y.setOpacity(a(z)),c&&Y.setDisplacement(c(z)),h&&Y.setRotation(h(z)),m&&Y.setRotateWithView(m(z)),s&&Y.setScale(s(z)),o&&Y.setAnchor(o(z)),Y}}function Rve(n,e){const t="shape-",i=t+"points",r=t+"radius",o=lR(n[i],i),s=lR(n[r],r),a=s4(n,t,e),c=a4(n,t,e),h=t6(n,t+"scale",e),m=lS(n,t+"displacement",e),v=wd(n,t+"rotation",e),x=W_(n,t+"rotate-with-view",e),S=uS(n,t+"radius2"),B=uS(n,t+"angle"),R=n6(n,t+"declutter-mode"),F=new e6({points:o,radius:s,radius2:S,angle:B,declutterMode:R});return function(j){return a&&F.setFill(a(j)),c&&F.setStroke(c(j)),m&&F.setDisplacement(m(j)),v&&F.setRotation(v(j)),x&&F.setRotateWithView(x(j)),h&&F.setScale(h(j)),F}}function Dve(n,e){const t="circle-",i=s4(n,t,e),r=a4(n,t,e),o=wd(n,t+"radius",e),s=t6(n,t+"scale",e),a=lS(n,t+"displacement",e),c=wd(n,t+"rotation",e),h=W_(n,t+"rotate-with-view",e),m=n6(n,t+"declutter-mode"),v=new h5({radius:5,declutterMode:m});return function(x){return o&&v.setRadius(o(x)),i&&v.setFill(i(x)),r&&v.setStroke(r(x)),a&&v.setDisplacement(a(x)),c&&v.setRotation(c(x)),h&&v.setRotateWithView(h(x)),s&&v.setScale(s(x)),v}}function wd(n,e,t){if(!(e in n))return;const i=y1(n[e],Yo,t);return function(r){return lR(i(r),e)}}function X0(n,e,t){if(!(e in n))return null;const i=y1(n[e],Cd,t);return function(r){return kee(i(r),e)}}function Pve(n,e,t){const i=X0(n,e+"pattern-src",t),r=Mj(n,e+"pattern-offset",t),o=Mj(n,e+"pattern-size",t),s=SU(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function W_(n,e,t){if(!(e in n))return null;const i=y1(n[e],Oh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function SU(n,e,t){if(!(e in n))return null;const i=y1(n[e],hm,t);return function(r){return Tee(i(r),e)}}function Iee(n,e,t){if(!(e in n))return null;const i=y1(n[e],Nb,t);return function(r){return d5(i(r),e)}}function lS(n,e,t){if(!(e in n))return null;const i=y1(n[e],Nb,t);return function(r){const o=d5(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function Mj(n,e,t){if(!(e in n))return null;const i=y1(n[e],Nb,t);return function(r){return Ree(i(r),e)}}function t6(n,e,t){if(!(e in n))return null;const i=y1(n[e],Nb|Yo,t);return function(r){return zve(i(r),e)}}function uS(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Uve(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return YA(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Lve(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function wj(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Sj(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Kve(n,e){const t=n[e];if(t!==void 0)return d5(t,e)}function n6(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Fve(n,e){const t=n[e];if(t!==void 0)return Tee(t,e)}function d5(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function kee(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function lR(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function Tee(n,e){if(typeof n=="string")return n;const t=d5(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Ree(n,e){const t=d5(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function zve(n,e){return typeof n=="number"?n:Ree(n,e)}const Ej={RENDER_ORDER:"renderOrder"};class EU extends zx{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ej.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new yee(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Ej.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Eee:e;const t=jve(e);this.styleFunction_=e===null?void 0:wve(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function jve(n){if(n===void 0)return Eee;if(!n)return null;if(typeof n=="function"||n instanceof pf)return n;if(!Array.isArray(n))return xj([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof pf){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof pf))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return Ove(r)}return xj(n)}class Dee extends Sm{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class Nve extends n5{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Lr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;n0(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),ZJ(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let h;const m=t.viewState;function v($,N,Y,z){return o.call(s,N,$?Y:null,z)}const x=m.projection,S=$P(e.slice(),x),B=[[0,0]];if(x.canWrapX()&&r){const $=x.getExtent(),N=is($);B.push([-N,0],[N,0])}const R=t.layerStatesArray,F=R.length,j=[],W=[];for(let $=0;$<B.length;$++)for(let N=F-1;N>=0;--N){const Y=R[N],z=Y.layer;if(z.hasRenderer()&&vU(Y,m)&&a.call(c,z)){const ne=z.getRenderer(),ae=z.getSource();if(ne&&ae){const ve=ae.getWrapX()?S:e,pe=v.bind(null,Y.managed);W[0]=ve[0]+B[$][0],W[1]=ve[1]+B[$][1],h=ne.forEachFeatureAtCoordinate(W,t,i,pe,j)}if(h)return h}}if(j.length===0)return;const H=1/j.length;return j.forEach(($,N)=>$.distanceSq+=N*H),j.sort(($,N)=>$.distanceSq-N.distanceSq),j.some($=>h=$.callback($.feature,$.layer,$.geometry)),h}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,H3,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Lr()}scheduleExpireIconCache(e){hp.canExpireCache()&&e.postRenderFunctions.push(Gve)}}function Gve(n,e){hp.expire()}class Wve extends Nve{constructor(e){super(e),this.fontChangeListenerKey_=$o(lb,Ax.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=XE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Dee(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Oa(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ap.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,c)=>a.zIndex-c.zIndex);t.some(a=>a.layer instanceof EU&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let a=0,c=t.length;a<c;++a){const h=t[a];e.layerIndex=a;const m=h.layer,v=m.getSourceState();if(!vU(h,r)||v!="ready"&&v!="undefined"){m.unrender();continue}const x=m.render(e,s);x&&(x!==s&&(this.children_.push(x),s=x),o.push(h))}this.declutter(e,o),eye(this.element_,this.children_),this.dispatchRenderEvent(Ap.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function Pee(n){if(n instanceof zx){n.setMapInternal(null);return}n instanceof Fx&&n.getLayers().forEach(Pee)}function Uee(n,e){if(n instanceof zx){n.setMapInternal(e);return}if(n instanceof Fx){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)Uee(t[i],e)}}let i6=class extends Em{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Qve(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:x0e,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ed(),this.pixelToCoordinateTransform_=Ed(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||rye(),this.interactions=t.interactions||Sye({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new RJ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(NA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(NA.VIEW,this.handleViewChanged_),this.addChangeListener(NA.SIZE,this.handleSizeChanged_),this.addChangeListener(NA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Am)&&e.view.then(function(r){i.setView(new Am(r))}),this.controls.addEventListener(bd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(bd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(bd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(bd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(bd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(bd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Uee(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:H3,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Fx?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:H3,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(NA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return eR(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Zu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(NA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Fg){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=H0(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Zu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(NA.SIZE)}getView(){return this.get(NA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return E0e(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new Ey(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===W9.POINTERDOWN||i===Ir.WHEEL||i===Ir.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[dl.ANIMATING]||s[dl.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ap.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ap.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new b_(Z0.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new b_(Z0.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Oa(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ir.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ir.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Wve(this)),this.mapBrowserEventHandler_=new w0e(this,this.moveTolerance_);for(const o in Zl)this.mapBrowserEventHandler_.addEventListener(Zl[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ir.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ir.WHEEL,this.boundHandleBrowserEvent_,TJ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=t.getRootNode();i=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[$o(i,Ir.KEYDOWN,this.handleBrowserEvent,this),$o(i,Ir.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Oa(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Oa(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=$o(e,Ax.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=$o(e,Ir.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Oa),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new By("addlayer",e)),this.layerGroupPropertyListenerKeys_=[$o(e,Ax.PROPERTYCHANGE,this.render,this),$o(e,Ir.CHANGE,this.render,this),$o(e,"addlayer",this.handleLayerAdd_,this),$o(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Pee(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&pj(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:tS(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:$r(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=tS(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Jb(this.previousExtent_)&&!h1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new b_(Z0.MOVESTART,this,r)),this.previousExtent_=Lx(this.previousExtent_)),this.previousExtent_&&!o.viewHints[dl.ANIMATING]&&!o.viewHints[dl.INTERACTING]&&!h1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new b_(Z0.MOVEEND,this,o)),DJ(o.extent,this.previousExtent_))),this.dispatchEvent(new b_(Z0.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Z0.LOADSTART)||this.hasListener(Z0.LOADEND)||this.hasListener(Ap.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new By("removelayer",t)),this.set(NA.LAYERGROUP,e)}setSize(e){this.set(NA.SIZE,e)}setTarget(e){this.set(NA.TARGET,e)}setView(e){if(!e||e instanceof Am){this.set(NA.VIEW,e);return}this.set(NA.VIEW,new Am);const t=this;e.then(function(i){t.setView(new Am(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(t=[Math.max(0,o),Math.max(0,s)],!pj(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&GJ("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Av(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Qve(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Fx({layers:n.layers});t[NA.LAYERGROUP]=i,t[NA.TARGET]=n.target,t[NA.VIEW]=n.view instanceof Am?n.view:new Am;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Fg(n.controls.slice()):(xs(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new Fg(n.interactions.slice()):(xs(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new Fg(n.overlays.slice()):(xs(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new Fg,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class r6 extends Em{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new r6(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Oa(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=$o(e,Ir.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?qve(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function qve(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(xs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function Lee(n,e,t,i){const r=[];let o=vp();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=qP(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function cS(n,e,t,i,r,o,s){let a,c;const h=(t-e)/i;if(h===1)a=e;else if(h===2)a=e,c=r;else if(h!==0){let m=n[e],v=n[e+1],x=0;const S=[0];for(let F=e+i;F<t;F+=i){const j=n[F],W=n[F+1];x+=Math.sqrt((j-m)*(j-m)+(W-v)*(W-v)),S.push(x),m=j,v=W}const B=r*x,R=p0e(S,B);R<0?(c=(B-S[-R-2])/(S[-R-1]-S[-R-2]),a=e+(-R-2)*i):a=e+R*i}s=s>1?s:2,o=o||new Array(s);for(let m=0;m<s;++m)o[m]=a===void 0?NaN:c===void 0?n[a+m]:ff(n[a+m],n[a+i+m],c);return o}function uR(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const x=a+c>>1;r<n[(x+1)*i-1]?c=x:a=x+1}const h=n[a*i-1];if(r==h)return n.slice((a-1)*i,(a-1)*i+i);const m=n[(a+1)*i-1],v=(r-h)/(m-h);s=[];for(let x=0;x<i-1;++x)s.push(ff(n[(a-1)*i+x],n[a*i+x],v));return s.push(r),s}function Yve(n,e,t,i,r,o,s){if(s)return uR(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,h=t.length;c<h;++c){const m=t[c];if(e!=m){if(r<n[e+i-1])return null;if(r<=n[m-1])return uR(n,e,m,i,r,!1);e=m}}return null}class AS extends JJ{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Oa),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push($o(e[t],Ir.CHANGE,this.changed,this))}clone(){const e=new AS(fB(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Xb(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Lx(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)UJ(e,t[i].getExtent());return e}getGeometries(){return fB(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new AS(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Sf(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(fB(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function fB(n){return n.map(e=>e.clone())}function OU(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],h=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(h-o)*(h-o)),r=c,o=h}return s}class Gb extends eC{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Jg(this.flatCoordinates,e),this.changed()}clone(){const e=new Gb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Xb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return oee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,uR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Fy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return cS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return OU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=HE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Gb(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return ZE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=VE(this.flatCoordinates,0,e,this.stride),this.changed()}}class l4 extends eC{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,h=r.length;c<h;++c){const m=r[c];Jg(o,m.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Jg(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new l4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Xb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iU(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Yve(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return e4(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Gb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],h=new Gb(e.slice(o,c),i);r.push(h),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=OU(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],h=cS(t,i,c,o,.5);Jg(e,h),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=iee(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new l4(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return F1e(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=l5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class f5 extends eC{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Jg(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new f5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Xb(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const h=Ib(e,t,o[a],o[a+1]);if(h<r){r=h;for(let m=0;m<s;++m)i[m]=o[a+m];i.length=s}}return r}getCoordinates(){return Fy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new jb(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new jb(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(QP(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=VE(this.flatCoordinates,0,e,this.stride),this.changed()}}class u4 extends eC{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const h=r[a],m=o.length,v=h.getEnds();for(let x=0,S=v.length;x<S;++x)v[x]+=m;Jg(o,h.getFlatCoordinates()),s.push(v)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Jg(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new u4(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<Xb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(T1e(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),R1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return K1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return k1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),nR(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,tR(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Lee(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ree(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new f5(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;lee(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=nR(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=U1e(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new u4(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new d1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),h=c[c.length-1];if(o!==0)for(let v=0,x=c.length;v<x;++v)c[v]-=o;const m=new d1(t.slice(o,h),e,c);r.push(m),o=h}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return z1e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=nee(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Oj=Ed();class QA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?PJ(this.flatCoordinates_):qP(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Sf(this.getExtent());this.flatInteriorPoints_=lU(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=uee(this.flatCoordinates_,this.ends_),t=Lee(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=ree(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=cS(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=cS(e,t,s,2,.5);Jg(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Hs(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=ec(i)/ec(t);n0(Oj,i[0],i[3],r,-r,0,0,0),Jy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Oj,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new QA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=BJ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=HE(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=iee(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=sU(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new QA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}QA.prototype.getFlatCoordinates=QA.prototype.getOrientedFlatCoordinates;class Kee{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class $ve extends Kee{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?jE(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ed()}drawImages_(e,t,i,r){if(!this.image_)return;const o=Jy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let m=0,v=o.length;m<v;m+=2){const x=o[m]-this.imageAnchorX_,S=o[m+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const B=x+this.imageAnchorX_,R=S+this.imageAnchorY_;n0(a,B,R,1,1,h,-B,-R),s.save(),s.transform.apply(s,a),s.translate(B,R),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,S,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Jy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,h=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,h-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,h),this.textFillState_&&s.fillText(this.text_,c,h))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=Jy(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let h=2;h<c;h+=2)s.lineTo(a[h],a[h+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=I1e(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Jl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,h=s.length;c<h;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const h=o[a];r=this.drawRings_(i,r,h,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Av(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:r4;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Ng(i||_d)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),m=o||s1;this.strokeState_={lineCap:r!==void 0?r:px,lineDash:this.pixelRatio_===1?m:m.map(v=>v*this.pixelRatio_),lineDashOffset:(s||a1)*this.pixelRatio_,lineJoin:a!==void 0?a:mx,lineWidth:(c!==void 0?c:o4)*this.pixelRatio_,miterLimit:h!==void 0?h:n4,strokeStyle:Ng(i||i4)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const S=t.getColor();this.textFillState_={fillStyle:Ng(S||_d)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const S=i.getColor(),B=i.getLineCap(),R=i.getLineDash(),F=i.getLineDashOffset(),j=i.getLineJoin(),W=i.getWidth(),H=i.getMiterLimit();this.textStrokeState_={lineCap:B!==void 0?B:px,lineDash:R||s1,lineDashOffset:F||a1,lineJoin:j!==void 0?j:mx,lineWidth:W!==void 0?W:o4,miterLimit:H!==void 0?H:n4,strokeStyle:Ng(S||i4)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),m=e.getText(),v=e.getTextAlign(),x=e.getTextBaseline();this.textState_={font:r!==void 0?r:Mee,textAlign:v!==void 0?v:r4,textBaseline:x!==void 0?x:aS},this.text_=m!==void 0?Array.isArray(m)?m.reduce((S,B,R)=>S+=R%2?" ":B,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Vve=.5,Fee={Point:ibe,LineString:ebe,Polygon:obe,MultiPoint:rbe,MultiLineString:tbe,MultiPolygon:nbe,GeometryCollection:Jve,Circle:Zve};function Hve(n,e){return parseInt($r(n),10)-parseInt($r(e),10)}function cR(n,e){const t=zee(n,e);return t*t}function zee(n,e){return Vve*n/e}function Zve(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function hS(n,e,t,i,r,o,s,a){const c=[],h=t.getImage();if(h){let x=!0;const S=h.getImageState();S==zi.LOADED||S==zi.ERROR?x=!1:S==zi.IDLE&&h.load(),x&&c.push(h.ready())}const m=t.getFill();m&&m.loading()&&c.push(m.ready());const v=c.length>0;return v&&Promise.all(c).then(()=>r(null)),Xve(n,e,t,i,o,s,a),v}function Xve(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())jee(n,c,t,e,s);else{const m=Fee[c.getType()];m(n,c,t,e,s,o)}}function jee(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)jee(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function Jve(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const h=Fee[s[a].getType()];h(n,s[a],t,i,r,o)}}function ebe(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function tbe(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function nbe(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function ibe(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),h=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=zi.LOADED)return;const m=n.getBuilder(t.getZIndex(),"Image");m.setImageStyle(s,h),m.drawPoint(e,i,r)}if(c){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(a,h),m.drawText(e,i,r)}}function rbe(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),m=o&&a&&h?{}:void 0;if(a){if(s.getImageState()!=zi.LOADED)return;const v=n.getBuilder(t.getZIndex(),"Image");v.setImageStyle(s,m),v.drawMultiPoint(e,i,r)}if(h){const v=n.getBuilder(t.getZIndex(),"Text");v.setTextStyle(c,m),v.drawText(e,i,r)}}function obe(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let sbe=!1;function Nee(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=sbe,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const h=e.getType();try{let m;h=="text"||h=="json"?m=a.responseText:h=="xml"?m=a.responseXML||a.responseText:h=="arraybuffer"&&(m=a.response),m?o(e.readFeatures(m,{extent:t,featureProjection:r}),e.readProjection(m)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function Bj(n,e){return function(t,i,r,o,s){Nee(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function abe(n,e){return[[-1/0,-1/0,1/0,1/0]]}function lbe(n,e){return[n]}class Ij{constructor(e){this.rbush_=new yee(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[$r(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[$r(a)]=c}this.rbush_.load(i)}remove(e){const t=$r(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[$r(t)],r=[i.minX,i.minY,i.maxX,i.maxY];h1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return nv(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return A1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class jx extends Em{constructor(e){super(),this.projection=Hs(e.projection),this.attributions_=kj(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=kj(e),this.changed()}setState(e){this.state_=e,this.changed()}}function kj(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ep={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Cy extends Sm{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class cw extends jx{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Z3,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(xs(this.format_,"`format` must be set when `url` is set"),this.loader_=Bj(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:abe;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Ij:null,this.loadedExtentsRtree_=new Ij,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Fg(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=$r(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Cy(ep.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof QA||(this.featureChangeKeys_[e]=[$o(t,Ir.CHANGE,this.handleFeatureChange_,this),$o(t,Ax.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof QA){const o=this.idIndex_[r];o instanceof QA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(xs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=$r(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=$r(a);this.setupChangeEvents_(c,a);const h=a.getGeometry();if(h){const m=h.getExtent();t.push(m),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(ep.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new Cy(ep.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ep.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(ep.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(bd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(bd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Oa);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Cy(ep.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof QA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof QA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),nv(this.nullGeometryFeatures_)||Jg(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=jJ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||H3,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const m=h.getGeometry(),v=a;if(a=m instanceof QA?0:m.closestPointXY(i,r,s,a),a<v){o=h;const x=Math.sqrt(a);c[0]=i-x,c[1]=r-x,c[2]=i+x,c[3]=r+x}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=$r(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Cy(ep.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:$r(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&nv(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(m){return zg(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Cy(ep.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new Cy(ep.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Cy(ep.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(h1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=$r(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Oa),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(ep.REMOVEFEATURE)&&this.dispatchEvent(new Cy(ep.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){xs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Bj(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const fr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},sM=[fr.FILL],jy=[fr.STROKE],yb=[fr.BEGIN_PATH],Tj=[fr.CLOSE_PATH];class p5 extends Kee{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],zb(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const h=this.getBufferedMaxExtent();s&&(t+=r);let m=e[t],v=e[t+1];const x=this.tmpCoordinate_;let S=!0,B,R,F;for(B=t+r;B<i;B+=r)x[0]=e[B],x[1]=e[B+1],F=Y9(h,x),F!==R?(S&&(a[c++]=m,a[c++]=v,S=!1),a[c++]=x[0],a[c++]=x[1]):F===Yc.INTERSECTING?(a[c++]=x[0],a[c++]=x[1],S=!1):S=!0,m=x[0],v=x[1],R=F;return(o&&S||B===t+r)&&(a[c++]=m,a[c++]=v),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],h=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(h),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let h,m,v,x,S;switch(s){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),x=[];const B=e.getEndss();S=0;for(let R=0,F=B.length;R<F;++R){const j=[];S=this.drawCustomCoordinates_(h,S,B[R],a,j),x.push(j)}this.instructions.push([fr.CUSTOM,c,x,e,i,tR,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,x,e,r||i,tR,o]);break;case"Polygon":case"MultiLineString":v=[],h=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),S=this.drawCustomCoordinates_(h,0,e.getEnds(),a,v),this.instructions.push([fr.CUSTOM,c,v,e,i,e4,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,v,e,r||i,e4,o]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1),this.instructions.push([fr.CUSTOM,c,m,e,i,Fy,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,m,e,r||i,Fy,o]);break;case"MultiPoint":h=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(h,a),m>c&&(this.instructions.push([fr.CUSTOM,c,m,e,i,Fy,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,m,e,r||i,Fy,o]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),m=this.coordinates.length,this.instructions.push([fr.CUSTOM,c,m,e,i,void 0,o]),this.hitDetectionInstructions.push([fr.CUSTOM,c,m,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[fr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==fr.END_GEOMETRY?s=t:o==fr.BEGIN_GEOMETRY&&(r[2]=t,g0e(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Ng(i||_d)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Ng(i||i4);const r=e.getLineCap();t.lineCap=r!==void 0?r:px;const o=e.getLineDash();t.lineDash=o?o.slice():s1;const s=e.getLineDashOffset();t.lineDashOffset=s||a1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:mx;const c=e.getWidth();t.lineWidth=c!==void 0?c:o4;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:n4,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[fr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!Av(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=DJ(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Zy(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class ube extends p5{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!zb(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([fr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,h=r.length;c<h;c+=e.getStride())(!this.maxExtent||zb(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([fr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class cbe extends p5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[fr.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],yb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(jy),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],yb);const a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let m=0;for(let v=0,x=a.length;v<x;++v)m=this.drawFlatCoordinates_(c,m,a[v],h);this.hitDetectionInstructions.push(jy),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(jy),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(jy),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(yb)}}class Rj extends p5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(yb),this.hitDetectionInstructions.push(yb);for(let h=0;h<c;++h){const m=i[h],v=this.coordinates.length,x=this.appendFlatLineCoordinates(e,t,m,r,!0,!a),S=[fr.MOVE_TO_LINE_TO,v,x];this.instructions.push(S),this.hitDetectionInstructions.push(S),a&&(this.instructions.push(Tj),this.hitDetectionInstructions.push(Tj)),t=m}return s&&(this.instructions.push(sM),this.hitDetectionInstructions.push(sM)),a&&(this.instructions.push(jy),this.hitDetectionInstructions.push(jy)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const m=[fr.CIRCLE,h];this.instructions.push(yb,m),this.hitDetectionInstructions.push(yb,m),r.fillStyle!==void 0&&(this.instructions.push(sM),this.hitDetectionInstructions.push(sM)),r.strokeStyle!==void 0&&(this.instructions.push(jy),this.hitDetectionInstructions.push(jy)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let m=0;for(let v=0,x=a.length;v<x;++v)m=this.drawFlatCoordinatess_(c,m,a[v],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=ob(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Abe(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[h,m]=c.slice(-2),v=e[s+r],x=e[s+r+1],S=Math.sqrt((v-h)*(v-h)+(x-m)*(x-m));if(a+=S,a>=n){const B=(n-a+S)/S,R=ff(h,v,B),F=ff(m,x,B);c.push(R,F),o.push(c),c=[R,F],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const B=S-a,R=ff(h,v,B/S),F=ff(m,x,B/S);c.push(R,F),o.push(c),c=[R,F],a=0,s+=r}}return a>0&&o.push(c),o}function hbe(n,e,t,i,r){let o=t,s=t,a=0,c=0,h=t,m,v,x,S,B,R,F,j,W,H;for(v=t;v<i;v+=r){const $=e[v],N=e[v+1];B!==void 0&&(W=$-B,H=N-R,S=Math.sqrt(W*W+H*H),F!==void 0&&(c+=x,m=Math.acos((F*W+j*H)/(x*S)),m>n&&(c>a&&(a=c,o=h,s=v),c=0,h=v-r)),x=S,F=W,j=H),B=$,R=N}return c+=S,c>a?[h,v]:[o,s]}const dS={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class dbe extends p5{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[_d]={fillStyle:_d},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const h=e.getType();let m=null,v=e.getStride();if(s.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Jl(this.maxExtent,e.getExtent()))return;let x;if(m=e.getFlatCoordinates(),h=="LineString")x=[m.length];else if(h=="MultiLineString")x=e.getEnds();else if(h=="Polygon")x=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const F=e.getEndss();x=[];for(let j=0,W=F.length;j<W;++j)x.push(F[j][0])}this.beginGeometry(e,t,i);const S=s.repeat,B=S?void 0:s.textAlign;let R=0;for(let F=0,j=x.length;F<j;++F){let W;S?W=Abe(S*this.resolution,m,R,x[F],v):W=[m.slice(R,x[F])];for(let H=0,$=W.length;H<$;++H){const N=W[H];let Y=0,z=N.length;if(B==null){const ae=hbe(s.maxAngle,N,0,N.length,2);Y=ae[0],z=ae[1]}for(let ae=Y;ae<z;ae+=v)a.push(N[ae],N[ae+1]);const ne=a.length;R=x[F],this.drawChars_(c,ne),c=ne}}this.endGeometry(t)}else{let x=s.overflow?null:[];switch(h){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),v=2;break;case"Polygon":m=e.getFlatInteriorPoint(),s.overflow||x.push(m[2]/this.resolution),v=3;break;case"MultiPolygon":const $=e.getFlatInteriorPoints();m=[];for(let N=0,Y=$.length;N<Y;N+=3)s.overflow||x.push($[N+2]/this.resolution),m.push($[N],$[N+1]);if(m.length===0)return;v=2;break}const S=this.appendFlatPointCoordinates(m,v);if(S===c)return;if(x&&(S-c)/2!==m.length/v){let $=c/2;x=x.filter((N,Y)=>{const z=a[($+Y)*2]===m[Y*v]&&a[($+Y)*2+1]===m[Y*v+1];return z||--$,z})}this.saveTextStates_();const B=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,R=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let F=s.padding;if(F!=gb&&(s.scale[0]<0||s.scale[1]<0)){let $=s.padding[0],N=s.padding[1],Y=s.padding[2],z=s.padding[3];s.scale[0]<0&&(N=-N,z=-z),s.scale[1]<0&&($=-$,Y=-Y),F=[$,N,Y,z]}const j=this.pixelRatio;this.instructions.push([fr.DRAW_IMAGE,c,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,F==gb?gb:F.map(function($){return $*j}),B,R,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]);const W=1/j,H=B?B.slice(0):null;H&&(H[1]=_d),this.hitDetectionInstructions.push([fr.DRAW_IMAGE,c,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[W,W],NaN,this.declutterMode_,this.declutterImageWithText_,F,H,R,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?_d:this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||r4,justify:t.justify,textBaseline:t.textBaseline||aS,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=dS[r.textBaseline],m=this.textOffsetY_*c,v=this.text_,x=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([fr.DRAW_CHARS,e,t,h,r.overflow,a,r.maxAngle,c,m,o,x*c,v,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fr.DRAW_CHARS,e,t,h,r.overflow,a&&_d,r.maxAngle,c,m,o,x*c,v,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ng(s.getColor()||_d)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const R=a.getLineDash(),F=a.getLineDashOffset(),j=a.getWidth(),W=a.getMiterLimit();o.lineCap=a.getLineCap()||px,o.lineDash=R?R.slice():s1,o.lineDashOffset=F===void 0?a1:F,o.lineJoin=a.getLineJoin()||mx,o.lineWidth=j===void 0?o4:j,o.miterLimit=W===void 0?n4:W,o.strokeStyle=Ng(a.getColor()||i4)}i=this.textState_;const c=e.getFont()||Mee;bve(c);const h=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||aS,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||gb,i.scale=h===void 0?[1,1]:h;const m=e.getOffsetX(),v=e.getOffsetY(),x=e.getRotateWithView(),S=e.getKeepUpright(),B=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=x===void 0?!1:x,this.textKeepUpright_=S===void 0?!0:S,this.textRotation_=B===void 0?0:B,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:$r(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+$r(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const fbe={Circle:Rj,Default:p5,Image:ube,LineString:cbe,Polygon:Rj,Text:dbe};class Gee{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=fbe[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function pbe(n,e,t,i,r,o,s,a,c,h,m,v,x=!0){let S=n[e],B=n[e+1],R=0,F=0,j=0,W=0;function H(){R=S,F=B,e+=i,S=n[e],B=n[e+1],W+=j,j=Math.sqrt((S-R)*(S-R)+(B-F)*(B-F))}do H();while(e<t-i&&W+j<o);let $=j===0?0:(o-W)/j;const N=ff(R,S,$),Y=ff(F,B,$),z=e-i,ne=W,ae=o+a*c(h,r,m);for(;e<t-i&&W+j<ae;)H();$=j===0?0:(ae-W)/j;const ve=ff(R,S,$),pe=ff(F,B,$);let be=!1;if(x)if(v){const qe=[N,Y,ve,pe];XJ(qe,0,4,2,v,qe,qe),be=qe[0]>qe[2]}else be=N>ve;const Ee=Math.PI,Te=[],je=z+i===e;e=z,j=0,W=ne,S=n[e],B=n[e+1];let Re;if(je){H(),Re=Math.atan2(B-F,S-R),be&&(Re+=Re>0?-Ee:Ee);const qe=(ve+N)/2,nt=(pe+Y)/2;return Te[0]=[qe,nt,(ae-o)/2,Re,r],Te}r=r.replace(/\n/g," ");for(let qe=0,nt=r.length;qe<nt;){H();let ht=Math.atan2(B-F,S-R);if(be&&(ht+=ht>0?-Ee:Ee),Re!==void 0){let it=ht-Re;if(it+=it>Ee?-2*Ee:it<-Ee?2*Ee:0,Math.abs(it)>s)return null}Re=ht;const ke=qe;let Oe=0;for(;qe<nt;++qe){const it=be?nt-qe-1:qe,Ct=a*c(h,r[it],m);if(e+i<t&&W+j<o+Oe+Ct/2)break;Oe+=Ct}if(qe===ke)continue;const ze=be?r.substring(nt-ke,nt-qe):r.substring(ke,qe);$=j===0?0:(o+Oe/2-W)/j;const we=ff(R,S,$),At=ff(F,B,$);Te.push([we,At,Oe/2,ht,ze]),o+=Oe}return Te}class BU{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(sS(),{get:(e,t)=>{if(typeof sS()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const jC=vp(),_y=[],Q0=[],q0=[],xy=[];function Dj(n){return n[3].declutterBox}const Pj=new RegExp("[-----]");function pB(n,e){return e==="start"?e=Pj.test(n)?"right":"left":e==="end"&&(e=Pj.test(n)?"left":"right"),dS[e]}function mbe(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function gbe(n,e,t){return t%2===0&&(n+=e),n}class ybe{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ed(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new BU:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],h=this.pixelRatio,m=[c.scale[0]*h,c.scale[1]*h],v=c.justify?dS[c.justify]:pB(Array.isArray(e)?e[0]:e,c.textAlign||r4),x=r&&s.lineWidth?s.lineWidth:0,S=Array.isArray(e)?e:String(e).split(`
`).reduce(mbe,[]),{width:B,height:R,widths:F,heights:j,lineWidths:W}=_ve(c,S),H=B+x,$=[],N=(H+2)*m[0],Y=(R+x)*m[1],z={width:N<0?Math.floor(N):Math.ceil(N),height:Y<0?Math.floor(Y):Math.ceil(Y),contextInstructions:$};(m[0]!=1||m[1]!=1)&&$.push("scale",m),r&&($.push("strokeStyle",s.strokeStyle),$.push("lineWidth",x),$.push("lineCap",s.lineCap),$.push("lineJoin",s.lineJoin),$.push("miterLimit",s.miterLimit),$.push("setLineDash",[s.lineDash]),$.push("lineDashOffset",s.lineDashOffset)),i&&$.push("fillStyle",a.fillStyle),$.push("textBaseline","middle"),$.push("textAlign","center");const ne=.5-v;let ae=v*H+ne*x;const ve=[],pe=[];let be=0,Ee=0,Te=0,je=0,Re;for(let qe=0,nt=S.length;qe<nt;qe+=2){const ht=S[qe];if(ht===`
`){Ee+=be,be=0,ae=v*H+ne*x,++je;continue}const ke=S[qe+1]||c.font;ke!==Re&&(r&&ve.push("font",ke),i&&pe.push("font",ke),Re=ke),be=Math.max(be,j[Te]);const Oe=[ht,ae+ne*F[Te]+v*(F[Te]-W[je]),.5*(x+be)+Ee];ae+=F[Te],r&&ve.push("strokeText",Oe),i&&pe.push("fillText",Oe),++Te}return Array.prototype.push.apply($,ve),Array.prototype.push.apply($,pe),this.labels_[o]=z,z}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,h,m,v,x,S,B,R,F){a*=x[0],c*=x[1];let j=i-a,W=r-c;const H=o+h>e?e-h:o,$=s+m>t?t-m:s,N=B[3]+H*x[0]+B[1],Y=B[0]+$*x[1]+B[2],z=j-B[3],ne=W-B[0];(R||v!==0)&&(_y[0]=z,xy[0]=z,_y[1]=ne,Q0[1]=ne,Q0[0]=z+N,q0[0]=Q0[0],q0[1]=ne+Y,xy[1]=q0[1]);let ae;return v!==0?(ae=n0(Ed(),i,r,1,1,v,-i,-r),Zu(ae,_y),Zu(ae,Q0),Zu(ae,q0),Zu(ae,xy),A1(Math.min(_y[0],Q0[0],q0[0],xy[0]),Math.min(_y[1],Q0[1],q0[1],xy[1]),Math.max(_y[0],Q0[0],q0[0],xy[0]),Math.max(_y[1],Q0[1],q0[1],xy[1]),jC)):A1(Math.min(z,z+N),Math.min(ne,ne+Y),Math.max(z,z+N),Math.max(ne,ne+Y),jC),S&&(j=Math.round(j),W=Math.round(W)),{drawImageX:j,drawImageY:W,drawImageW:H,drawImageH:$,originX:h,originY:m,declutterBox:{minX:jC[0],minY:jC[1],maxX:jC[2],maxY:jC[3],value:F},canvasTransform:ae,scale:x}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),h=r.declutterBox,m=a?a[2]*r.scale[0]/2:0;return h.minX-m<=t[0]&&h.maxX+m>=0&&h.minY-m<=t[1]&&h.maxY+m>=0&&(c&&this.replayTextBackground_(e,_y,Q0,q0,xy,s,a),xve(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Zu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,h=pB(Array.isArray(e)?e[0]:e,o.textAlign||r4),m=dS[o.textBaseline||aS],v=a&&a.lineWidth?a.lineWidth:0,x=s.width/c-2*o.scale[0],S=h*x+2*(.5-h)*v,B=m*s.height/c+2*(.5-m)*v;return{label:s,anchorX:S,anchorY:B}}execute_(e,t,i,r,o,s,a,c){const h=this.zIndexContext_;let m;this.pixelCoordinates_&&Av(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Jy(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),C1e(this.renderedTransform_,i));let v=0;const x=r.length;let S=0,B,R,F,j,W,H,$,N,Y,z,ne,ae,ve,pe=0,be=0;const Ee=this.coordinateCache_,Te=this.viewRotation_,je=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Re={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Te},qe=this.instructions!=r||this.overlaps?0:200;let nt,ht,ke,Oe;for(;v<x;){const ze=r[v];switch(ze[0]){case fr.BEGIN_GEOMETRY:nt=ze[1],Oe=ze[3],nt.getGeometry()?a!==void 0&&!Jl(a,Oe.getExtent())?v=ze[2]+1:++v:v=ze[2],h&&(h.zIndex=ze[4]);break;case fr.BEGIN_PATH:pe>qe&&(this.fill_(e),pe=0),be>qe&&(e.stroke(),be=0),!pe&&!be&&(e.beginPath(),W=NaN,H=NaN),++v;break;case fr.CIRCLE:S=ze[1];const At=m[S],it=m[S+1],Ct=m[S+2],It=m[S+3],Ke=Ct-At,Ie=It-it,Se=Math.sqrt(Ke*Ke+Ie*Ie);e.moveTo(At+Se,it),e.arc(At,it,Se,0,2*Math.PI,!0),++v;break;case fr.CLOSE_PATH:e.closePath(),++v;break;case fr.CUSTOM:S=ze[1],B=ze[2];const Ge=ze[3],st=ze[4],ut=ze[5];Re.geometry=Ge,Re.feature=nt,v in Ee||(Ee[v]=[]);const ft=Ee[v];ut?ut(m,S,B,2,ft):(ft[0]=m[S],ft[1]=m[S+1],ft.length=2),h&&(h.zIndex=ze[6]),st(ft,Re),++v;break;case fr.DRAW_IMAGE:S=ze[1],B=ze[2],Y=ze[3],R=ze[4],F=ze[5];let St=ze[6];const kt=ze[7],en=ze[8],Pn=ze[9],zn=ze[10];let si=ze[11];const xn=ze[12];let Rn=ze[13];j=ze[14]||"declutter";const pn=ze[15];if(!Y&&ze.length>=20){z=ze[19],ne=ze[20],ae=ze[21],ve=ze[22];const ni=this.drawLabelWithPointPlacement_(z,ne,ae,ve);Y=ni.label,ze[3]=Y;const In=ze[23];R=(ni.anchorX-In)*this.pixelRatio,ze[4]=R;const Ln=ze[24];F=(ni.anchorY-Ln)*this.pixelRatio,ze[5]=F,St=Y.height,ze[6]=St,Rn=Y.width,ze[13]=Rn}let Hn;ze.length>25&&(Hn=ze[25]);let Un,Tt,Me;ze.length>17?(Un=ze[16],Tt=ze[17],Me=ze[18]):(Un=gb,Tt=null,Me=null),zn&&je?si+=Te:!zn&&!je&&(si-=Te);let oe=0;for(;S<B;S+=2){if(Hn&&Hn[oe++]<Rn/this.pixelRatio)continue;const ni=this.calculateImageOrLabelDimensions_(Y.width,Y.height,m[S],m[S+1],Rn,St,R,F,en,Pn,si,xn,o,Un,!!Tt||!!Me,nt),In=[e,t,Y,ni,kt,Tt,Me];if(c){let Ln,Zn,Xi;if(pn){const fi=B-S;if(!pn[fi]){pn[fi]={args:In,declutterMode:j};continue}const Si=pn[fi];Ln=Si.args,Zn=Si.declutterMode,delete pn[fi],Xi=Dj(Ln)}let Di,ur;if(Ln&&(Zn!=="declutter"||!c.collides(Xi))&&(Di=!0),(j!=="declutter"||!c.collides(ni.declutterBox))&&(ur=!0),Zn==="declutter"&&j==="declutter"){const fi=Di&&ur;Di=fi,ur=fi}Di&&(Zn!=="none"&&c.insert(Xi),this.replayImageOrLabel_.apply(this,Ln)),ur&&(j!=="none"&&c.insert(ni.declutterBox),this.replayImageOrLabel_.apply(this,In))}else this.replayImageOrLabel_.apply(this,In)}++v;break;case fr.DRAW_CHARS:const le=ze[1],he=ze[2],se=ze[3],Ae=ze[4];ve=ze[5];const xe=ze[6],Ye=ze[7],Xe=ze[8];ae=ze[9];const fe=ze[10];z=ze[11],Array.isArray(z)&&(z=z.reduce(gbe,"")),ne=ze[12];const De=[ze[13],ze[13]];j=ze[14]||"declutter";const y=ze[15],rt=this.textStates[ne],Bt=rt.font,pt=[rt.scale[0]*Ye,rt.scale[1]*Ye];let Ht;Bt in this.widths_?Ht=this.widths_[Bt]:(Ht={},this.widths_[Bt]=Ht);const gt=OU(m,le,he,2),jn=Math.abs(pt[0])*bj(Bt,z,Ht);if(Ae||jn<=gt){const ni=this.textStates[ne].textAlign,In=(gt-jn)*pB(z,ni),Ln=pbe(m,le,he,2,z,In,xe,Math.abs(pt[0]),bj,Bt,Ht,je?0:this.viewRotation_,y);e:if(Ln){const Zn=[];let Xi,Di,ur,fi,Si;if(ae)for(Xi=0,Di=Ln.length;Xi<Di;++Xi){Si=Ln[Xi],ur=Si[4],fi=this.createLabel(ur,ne,"",ae),R=Si[2]+(pt[0]<0?-fe:fe),F=se*fi.height+(.5-se)*2*fe*pt[1]/pt[0]-Xe;const er=this.calculateImageOrLabelDimensions_(fi.width,fi.height,Si[0],Si[1],fi.width,fi.height,R,F,0,0,Si[3],De,!1,gb,!1,nt);if(c&&j==="declutter"&&c.collides(er.declutterBox))break e;Zn.push([e,t,fi,er,1,null,null])}if(ve)for(Xi=0,Di=Ln.length;Xi<Di;++Xi){Si=Ln[Xi],ur=Si[4],fi=this.createLabel(ur,ne,ve,""),R=Si[2],F=se*fi.height-Xe;const er=this.calculateImageOrLabelDimensions_(fi.width,fi.height,Si[0],Si[1],fi.width,fi.height,R,F,0,0,Si[3],De,!1,gb,!1,nt);if(c&&j==="declutter"&&c.collides(er.declutterBox))break e;Zn.push([e,t,fi,er,1,null,null])}c&&j!=="none"&&c.load(Zn.map(Dj));for(let er=0,nn=Zn.length;er<nn;++er)this.replayImageOrLabel_.apply(this,Zn[er])}}++v;break;case fr.END_GEOMETRY:if(s!==void 0){nt=ze[1];const ni=s(nt,Oe,j);if(ni)return ni}++v;break;case fr.FILL:qe?pe++:this.fill_(e),++v;break;case fr.MOVE_TO_LINE_TO:for(S=ze[1],B=ze[2],ht=m[S],ke=m[S+1],e.moveTo(ht,ke),W=ht+.5|0,H=ke+.5|0,S+=2;S<B;S+=2)ht=m[S],ke=m[S+1],$=ht+.5|0,N=ke+.5|0,(S==B-2||$!==W||N!==H)&&(e.lineTo(ht,ke),W=$,H=N);++v;break;case fr.SET_FILL_STYLE:this.alignAndScaleFill_=ze[2],pe&&(this.fill_(e),pe=0,be&&(e.stroke(),be=0)),e.fillStyle=ze[1],++v;break;case fr.SET_STROKE_STYLE:be&&(e.stroke(),be=0),this.setStrokeStyle_(e,ze),++v;break;case fr.STROKE:qe?be++:e.stroke(),++v;break;default:++v;break}}pe&&this.fill_(e),be&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const ub=["Polygon","Circle","LineString","Image","Text","Default"],fS=["Image","Text"],vbe=ub.filter(n=>!fS.includes(n));class Wee{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ed(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new ybe(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=n0(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Tl(a,a));const m=this.hitDetectionContext_;m.canvas.width!==a||m.canvas.height!==a?(m.canvas.width=a,m.canvas.height=a):h||m.clearRect(0,0,a,a);let v;this.renderBuffer_!==void 0&&(v=vp(),d3(v,e),Zy(v,t*(this.renderBuffer_+r),v));const x=bbe(r);let S;function B(N,Y,z){const ne=m.getImageData(0,0,a,a).data;for(let ae=0,ve=x.length;ae<ve;ae++)if(ne[x[ae]]>0){if(!s||z==="none"||S!=="Image"&&S!=="Text"||s.includes(N)){const pe=(x[ae]-3)/4,be=r-pe%a,Ee=r-(pe/a|0),Te=o(N,Y,be*be+Ee*Ee);if(Te)return Te}m.clearRect(0,0,a,a);break}}const R=Object.keys(this.executorsByZIndex_).map(Number);R.sort(Xg);let F,j,W,H,$;for(F=R.length-1;F>=0;--F){const N=R[F].toString();for(W=this.executorsByZIndex_[N],j=ub.length-1;j>=0;--j)if(S=ub[j],H=W[S],H!==void 0&&($=H.executeHitDetection(m,c,i,B,v),$))return $}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return Jy(a,0,8,2,e,a),a}isEmpty(){return nv(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?m0e:Xg),s=s||ub;const h=ub.length;for(let m=0,v=c.length;m<v;++m){const x=c[m].toString(),S=this.executorsByZIndex_[x];for(let B=0,R=s.length;B<R;++B){const F=s[B],j=S[F];if(j!==void 0){const W=a===null?void 0:j.getZIndexContext(),H=W?W.getContext():e,$=this.maxExtent_&&F!=="Image"&&F!=="Text";if($&&(H.save(),this.clip(H,i)),!W||F==="Text"||F==="Image"?j.execute(H,t,i,r,o,a):W.pushFunction(N=>j.execute(N,t,i,r,o,a)),$&&H.restore(),W){W.offset();const N=c[m]*h+ub.indexOf(F);this.deferredZIndexContexts_[N]||(this.deferredZIndexContexts_[N]=[]),this.deferredZIndexContexts_[N].push(W)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Xg);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const mB={};function bbe(n){if(mB[n]!==void 0)return mB[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return mB[n]=r,r}const vf=.5;function Qee(n,e,t,i,r,o,s,a,c){const h=c?JP(r):r,m=n[0]*vf,v=n[1]*vf,x=Tl(m,v);x.imageSmoothingEnabled=!1;const S=x.canvas,B=new $ve(x,vf,r,null,s,a,c?a5(v1e(),c):null),R=t.length,F=Math.floor((256*256*256-1)/R),j={};for(let H=1;H<=R;++H){const $=t[H-1],N=$.getStyleFunction()||i;if(!N)continue;let Y=N($,o);if(!Y)continue;Array.isArray(Y)||(Y=[Y]);const ne=(H*F).toString(16).padStart(7,"#00000");for(let ae=0,ve=Y.length;ae<ve;++ae){const pe=Y[ae],be=pe.getGeometryFunction()($);if(!be||!Jl(h,be.getExtent()))continue;const Ee=pe.clone(),Te=Ee.getFill();Te&&Te.setColor(ne);const je=Ee.getStroke();je&&(je.setColor(ne),je.setLineDash(null)),Ee.setText(void 0);const Re=pe.getImage();if(Re){const ke=Re.getImageSize();if(!ke)continue;const Oe=Tl(ke[0],ke[1],void 0,{alpha:!1}),ze=Oe.canvas;Oe.fillStyle=ne,Oe.fillRect(0,0,ze.width,ze.height),Ee.setImage(new gx({img:ze,anchor:Re.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Re.getOrigin(),opacity:1,size:Re.getSize(),scale:Re.getScale(),rotation:Re.getRotation(),rotateWithView:Re.getRotateWithView()}))}const qe=Ee.getZIndex()||0;let nt=j[qe];nt||(nt={},j[qe]=nt,nt.Polygon=[],nt.Circle=[],nt.LineString=[],nt.Point=[]);const ht=be.getType();if(ht==="GeometryCollection"){const ke=be.getGeometriesArrayRecursive();for(let Oe=0,ze=ke.length;Oe<ze;++Oe){const we=ke[Oe];nt[we.getType().replace("Multi","")].push(we,Ee)}}else nt[ht.replace("Multi","")].push(be,Ee)}}const W=Object.keys(j).map(Number).sort(Xg);for(let H=0,$=W.length;H<$;++H){const N=j[W[H]];for(const Y in N){const z=N[Y];for(let ne=0,ae=z.length;ne<ae;ne+=2){B.setStyle(z[ne+1]);for(let ve=0,pe=e.length;ve<pe;++ve)B.setTransform(e[ve]),B.drawGeometry(z[ne])}}}return x.getImageData(0,0,S.width,S.height)}function qee(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*vf),o=Math.floor(Math.round(n[1])*vf),s=(kl(r,0,t.width-1)+kl(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],m=t.data[s+2]+256*(c+256*a),v=Math.floor((256*256*256-1)/e.length);m&&m%v===0&&i.push(e[m/v-1])}return i}const Cbe=5;class _be extends o5{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Cbe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Lr()}getData(e){return null}prepareFrame(e){return Lr()}renderFrame(e,t){return Lr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===zi.LOADED||t.getState()===zi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=zi.LOADED&&t!=zi.ERROR&&e.addEventListener(Ir.CHANGE,this.boundHandleImageChange_),t==zi.IDLE&&(e.load(),t=e.getState()),t==zi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Uj=[];let __=null;function xbe(){__=Tl(1,1,void 0,{willReadFrequently:!0})}class IU extends _be{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ed(),this.pixelTransform=Ed(),this.inversePixelTransform=Ed(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){__||xbe(),__.clearRect(0,0,1,1);let r;try{__.drawImage(e,t,i,1,1,0,0,1,1),r=__.getImageData(0,0,1,1).data}catch{return __=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Av(fx(e.style.backgroundColor),fx(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&S1e(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Tl();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=g1(i),o=WE(i),s=GE(i),a=NE(i);Zu(t.coordinateToPixelTransform,r),Zu(t.coordinateToPixelTransform,o),Zu(t.coordinateToPixelTransform,s),Zu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Zu(c,r),Zu(c,o),Zu(c,s),Zu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(is(i)/r*s),c=Math.round(ec(i)/r*s);n0(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),ZJ(this.inversePixelTransform,this.pixelTransform);const h=w1e(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=a||m.height!=c?(m.width=a,m.height=c):this.context.clearRect(0,0,a,c),h!==m.style.transform&&(m.style.transform=h)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new Dee(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ap.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ap.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new BU),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ap.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ap.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,h=s/2,m=r/t,v=-m,x=-e[0]+a,S=-e[1];return n0(this.tempTransform,c,h,m,v,-i,x,S)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Mbe extends IU{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=vp(),this.wrappedRenderedExtent_=vp(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,h=o.rotation,m=c.getExtent(),v=this.getLayer().getSource(),x=this.getLayer().getDeclutter(),S=t.pixelRatio,B=t.viewHints,R=!(B[dl.ANIMATING]||B[dl.INTERACTING]),F=this.context,j=Math.round(is(r)/a*S),W=Math.round(ec(r)/a*S),H=v.getWrapX()&&c.canWrapX(),$=H?is(m):null,N=H?Math.ceil((r[2]-m[2])/$)+1:1;let Y=H?Math.floor((r[0]-m[0])/$):0;do{let z=this.getRenderTransform(s,a,0,S,j,W,Y*$);t.declutter&&(z=z.slice(0)),e.execute(F,[F.canvas.width,F.canvas.height],z,h,R,i===void 0?ub:i?fS:vbe,i?x&&t.declutter[x]:void 0)}while(++Y<N)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Tl(this.context.canvas.width,this.context.canvas.height,Uj))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,u5(this.context),Uj.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Ap.PRERENDER)||this.getLayer().hasListener(Ap.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=jg(i.extent);a=Jl(c,e.extent),this.clipped_=a&&!zg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),m=[],v=i[0]*vf,x=i[1]*vf;m.push(this.getRenderTransform(r,o,s,vf,v,x,0).slice());const S=h.getSource(),B=a.getExtent();if(S.getWrapX()&&a.canWrapX()&&!zg(B,c)){let R=c[0];const F=is(B);let j=0,W;for(;R<B[0];)--j,W=F*j,m.push(this.getRenderTransform(r,o,s,vf,v,x,W).slice()),R+=F;for(j=0,R=c[2];R>B[2];)++j,W=F*j,m.push(this.getRenderTransform(r,o,s,vf,v,x,W).slice()),R-=F}this.hitDetectionImageData_=Qee(i,m,this.renderedFeatures_,h.getStyleFunction(),c,o,s,cR(o,this.renderedPixelRatio_),null)}t(qee(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),h={},m=function(x,S,B){const R=$r(x),F=h[R];if(F){if(F!==!0&&B<F.distanceSq){if(B===0)return h[R]=!0,o.splice(o.lastIndexOf(F),1),r(x,c,S);F.geometry=S,F.distanceSq=B}}else{if(B===0)return h[R]=!0,r(x,c,S);o.push(h[R]={feature:x,layer:c,geometry:S,distanceSq:B,callback:r})}},v=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,m,v?t.declutter?.[v]?.all().map(x=>x.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[dl.ANIMATING],o=e.viewHints[dl.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,m=h.projection,v=h.resolution,x=e.pixelRatio,S=t.getRevision(),B=t.getRenderBuffer();let R=t.getRenderOrder();R===void 0&&(R=Hve);const F=h.center.slice(),j=Zy(c,B*v),W=j.slice(),H=[j.slice()],$=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!zg($,e.extent)){const Te=is($),je=Math.max(is(j)/2,Te);j[0]=$[0]-je,j[2]=$[2]+je,$P(F,m);const Re=zJ(H[0],m);Re[0]<$[0]&&Re[2]<$[2]?H.push([Re[0]+Te,Re[1],Re[2]+Te,Re[3]]):Re[0]>$[0]&&Re[2]>$[2]&&H.push([Re[0]-Te,Re[1],Re[2]-Te,Re[3]])}if(this.ready&&this.renderedResolution_==v&&this.renderedRevision_==S&&this.renderedRenderOrder_==R&&this.renderedFrameDeclutter_===!!e.declutter&&zg(this.wrappedRenderedExtent_,j))return Av(this.renderedExtent_,W)||(this.hitDetectionImageData_=null,this.renderedExtent_=W),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const N=new Gee(zee(v,x),j,v,x);let Y;for(let Te=0,je=H.length;Te<je;++Te)i.loadFeatures(H[Te],v,m);const z=cR(v,x);let ne=!0;const ae=((Te,je)=>{let Re;const qe=Te.getStyleFunction()||t.getStyleFunction();if(qe&&(Re=qe(Te,v)),Re){const nt=this.renderFeature(Te,z,Re,N,Y,this.getLayer().getDeclutter(),je);ne=ne&&!nt}}),ve=JP(j),pe=i.getFeaturesInExtent(ve);R&&pe.sort(R);for(let Te=0,je=pe.length;Te<je;++Te)ae(pe[Te],Te);this.renderedFeatures_=pe,this.ready=ne;const be=N.finish(),Ee=new Wee(j,v,x,i.getOverlaps(),be,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=v,this.renderedRevision_=S,this.renderedRenderOrder_=R,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=W,this.wrappedRenderedExtent_=j,this.renderedCenter_=F,this.renderedProjection_=m,this.renderedPixelRatio_=x,this.replayGroup_=Ee,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let h=0,m=i.length;h<m;++h)c=hS(r,e,i[h],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=hS(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class kU extends EU{constructor(e){super(e)}createRenderer(){return new Mbe(this)}}class wbe extends MU{constructor(e,t,i,r,o){const s=o!==void 0?zi.IDLE:zi.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=zi.ERROR):this.state=zi.LOADED,this.changed()}load(){this.state==zi.IDLE&&(this.state=zi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class m5 extends r5{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ir.CHANGE)}release(){this.setState(ai.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ai.EMPTY){if(this.state!==ai.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Lr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:NJ(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Yee extends m5{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ai.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ai.ERROR,this.unlistenImage_(),this.image_=Sbe(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ai.LOADED:this.state=ai.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ai.ERROR&&(this.state=ai.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ai.IDLE&&(this.state=ai.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=dve(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Sbe(){const n=Tl(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const jA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Ebe extends Em{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+H1e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(jA.ELEMENT,this.handleElementChanged),this.addChangeListener(jA.MAP,this.handleMapChanged),this.addChangeListener(jA.OFFSET,this.handleOffsetChanged),this.addChangeListener(jA.POSITION,this.handlePositionChanged),this.addChangeListener(jA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(jA.ELEMENT)}getId(){return this.id}getMap(){return this.get(jA.MAP)||null}getOffset(){return this.get(jA.OFFSET)}getPosition(){return this.get(jA.POSITION)}getPositioning(){return this.get(jA.POSITIONING)}handleElementChanged(){Aee(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Oa(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=$o(e,Z0.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(jA.ELEMENT,e)}setMap(e){this.set(jA.MAP,e)}setOffset(e){this.set(jA.OFFSET,e)}setPosition(e){this.set(jA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(jA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[X1e(r),J1e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!zg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],h=o[1]-i[1],m=i[3]-o[3],v=[0,0];if(a<0?v[0]=a-s:c<0&&(v[0]=Math.abs(c)+s),h<0?v[1]=h-s:m<0&&(v[1]=Math.abs(m)+s),v[0]!==0||v[1]!==0){const x=t.getView().getCenterInternal(),S=t.getPixelFromCoordinateInternal(x);if(!S)return;const B=[S[0]+v[0],S[1]+v[1]],R=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(B),duration:R.duration,easing:R.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(jA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",h="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?h="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(h="-50%");const m=`translate(${c}, ${h}) translate(${s}, ${a})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}class TU{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function NC(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new TU(n,e,t,i)}const Lj=[];class Obe extends m5{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Tl(1,1,Lj)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=$r(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(u5(this.context_),Lj.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let $ee=class extends m5{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ai.IDLE&&(this.setState(ai.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ai.ERROR)}setFeatures(e){this.features_=e,this.setState(ai.LOADED)}setLoader(e){this.loader_=e}};const Vee="https://api.mapbox.com";function RU(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Bbe(n,e,t){if(typeof n=="string")return[{id:"default",url:Kj(n,e,t)}];for(const i of n)i.url=Kj(i.url,e,t);return n}function Kj(n,e,t){const i=RU(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${Vee}/styles/v1/${o}/sprite?access_token=${e}`}function pS(n,e){const t=RU(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${Vee}/styles/v1/${r}?&access_token=${e}`}const Ibe=["a","b","c","d"];function Aw(n,e,t,i){const r=new URL(n,i||location.href),o=RU(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return Ibe.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const dm=Object.freeze({}),Fj={},zj={};let kbe=0;function DU(n){return n.id||(n.id=kbe++),n.id}function Tbe(n,e){return DU(n)+"."+$r(e)}function Hee(n){let e=Fj[n.id];return e||(e={},Fj[DU(n)]=e),e}function Rbe(n){let e=zj[n.id];return e||(e={},zj[DU(n)]=e),e}function gB(n){return n*Math.PI/180}const e0=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function o6(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function PU(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function Y2(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const GC={};function yx(n,e,t={},i){if(e in GC)return i&&(i.url=GC[e][0].url),GC[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete GC[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete GC[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=hx(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return GC[e]=[r,a],a}function Zee(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=pS(n,e.accessToken),yx("Style",n,e);else return Promise.resolve(n)}const jj={};function Xee(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=jj[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const h=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof $ee)a.setLoader((m,v,x)=>{const S=function(B){B.arrayBuffer().then(R=>{const j=a.getFormat().readFeatures(R,{extent:m,featureProjection:x});a.setFeatures(j)})};hx(()=>h).then(B=>{if(B instanceof Response)return S(B);fetch(B).then(S).catch(R=>a.setState(ai.ERROR))}).catch(B=>a.setState(ai.ERROR))});else{const m=a.getImage();hx(()=>h).then(v=>{if(typeof v=="string"){m.src=v;return}const x=S=>S.blob().then(B=>{const R=URL.createObjectURL(B);m.addEventListener("load",()=>URL.revokeObjectURL(R)),m.addEventListener("error",()=>URL.revokeObjectURL(R)),m.src=R});if(v instanceof Response)return x(v);fetch(v).then(x).catch(S=>a.setState(ai.ERROR))}).catch(v=>a.setState(ai.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=Aw(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=yx("Source",a[0],t,c).then(function(h){return h.tiles=h.tiles.map(function(m){return h.scheme==="tms"&&(m=m.replace("{y}","{-y}")),Aw(m,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:h,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),Aw(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));jj[i]=r}return r}function Nj(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=o6(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let h=0,m=a.width;h<m;++h)for(let v=0,x=a.height;v<x;++v){const S=(v*m+h)*4;c[S+3]>0&&s.arc(h,v,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function Dbe(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function Gj(n,e,t){const i=o6(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let h=0,m=o.height;h<m;++h){const v=(h*c+a)*4,x=s[v+3]/255,S=.75,B=.1,R=Dbe(S-B,S+B,x);R>0?(s[v+0]=Math.round(255*t.r*R),s[v+1]=Math.round(255*t.g*R),s[v+2]=Math.round(255*t.b*R),s[v+3]=Math.round(255*R)):s[v+3]=0}return r.putImageData(o,0,0),i}const Pbe=Array(256).join("");function AR(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Pbe.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let yB;function Jee(){return yB||(yB=o6(1,1).getContext("2d")),yB}function eb(n,e){return Jee().measureText(n).width+(n.length-1)*e}const mS={};lb.on("propertychange",()=>{for(const n in mS)delete mS[n]});function hR(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,h=s.length;c<h;++c)a.push(hR(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=mS[r];if(!o){const s=n.split(" ");if(s.length>1){const a=Jee();a.font=e;const h=a.measureText("M").width*t;let m="";const v=[];for(let x=0,S=s.length;x<S;++x){const B=s[x],R=m+(m?" ":"")+B;eb(R,i)<=h?m=R:(m&&v.push(m),m=B)}m&&v.push(m);for(let x=0,S=v.length;x<S&&S>1;++x){const B=v[x];if(eb(B,i)<h*.35){const R=x>0?eb(v[x-1],i):1/0,F=x<S-1?eb(v[x+1],i):1/0;v.splice(x,1),S-=1,R<F?(v[x-1]+=" "+B,x-=1):v[x]=B+" "+v[x]}}for(let x=0,S=v.length-1;x<S;++x){const B=v[x],R=v[x+1];if(eb(B,i)>h*.7&&eb(R,i)<h*.6){const F=B.split(" "),j=F.pop();eb(j,i)<h*.2&&(v[x]=F.join(" "),v[x+1]=j+" "+R),S-=1}}o=v.join(`
`)}else o=n;o=AR(o,i),mS[r]=o}return o}const Ube=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],Wj={};function Lbe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in Wj)continue;Wj[o]=!0;const a=G9(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(Ube.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(m=>m.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&m.weight==a&&m.style===c)){const m=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+m+'"]')){const v=document.createElement("link");v.href=m,v.rel="stylesheet",document.head.appendChild(v)}}}})(),n}const Kbe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Fbe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},zbe=function(n,e){const t=t0e(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Mf={zoom:0,distanceFromCenter:0};Cf.register(LE,{...Cf.definitions,pitch:[{kind:"number"},[],n=>Mf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Mf.distanceFromCenter||0]});let aM,vB;function $i(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||dm)[t];const h=f0e[`${e}_${n.type}`][t];c===void 0&&(c=h.default);let m=e0e(c);if(!m&&wJ(c)&&(c=l0e(c,h),m=!0),m){const v=zbe(c,h);a[t]=v.evaluate.bind(v)}else h.type=="color"&&(c=Vs.parse(c)),a[t]=function(){return c}}return a[t](Mf,i,o)}function Qj(n,e,t,i){return $i(n,"layout",`${t}-allow-overlap`,e,i)?$i(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function jbe(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=o0e(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Mf,t)}function Oy(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Nbe=/\{[^{}}]*\}/g;function bB(n,e){return n.replace(Nbe,function(t){return e[t.slice(1,-1)]||""})}function qj(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Gbe={};function Wbe(n,e,t,i=e0,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Gbe[Tbe(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const N in o){const Y=o[N];hx(()=>Y).then(async z=>{let ne;if(typeof Image<"u"){const ae=new Image;if(typeof z=="string")ae.crossOrigin="anonymous",ae.src=z;else{let ve;z instanceof Request?ve=await fetch(z):z instanceof Response&&(ve=z);const pe=await ve.blob();ne=URL.createObjectURL(pe),ae.src=ne}ae.addEventListener("load",function ve(){ae.removeEventListener("load",ve),c[N]={image:ae,size:[ae.width,ae.height]},n.changed(),ne&&URL.revokeObjectURL(ne)}),ae.addEventListener("error",function ve(){URL.revokeObjectURL(ne),ae.removeEventListener("error",ve)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ae=self;ae.postMessage({action:"loadImage",src:z}),ae.addEventListener("message",function(pe){pe.data.action==="imageLoaded"&&pe.data.src===z&&(c[N]={image:pe.data.image,size:[pe.data.image.width,pe.data.image.height]})})}})}const h=oJ(e.layers),m={},v=[],x={},S={},B=Hee(e),R=Rbe(e);let F;for(let N=0,Y=h.length;N<Y;++N){const z=h[N],ne=z.id;if(typeof t=="string"&&z.source==t||Array.isArray(t)&&t.indexOf(ne)!==-1){const ae=z["source-layer"];if(F){if(z.source!==F)throw new Error(`Layer "${ne}" does not use source "${F}`)}else{F=z.source;const pe=e.sources[F];if(!pe)throw new Error(`Source "${F}" is not defined`);const be=pe.type;if(be!=="vector"&&be!=="geojson")throw new Error(`Source "${F}" is not of type "vector" or "geojson", but "${be}"`)}let ve=m[ae];ve||(ve=[],m[ae]=ve),ve.push({layer:z,index:N}),v.push(ne)}}const j=new zy,W=new n1,H=[],$=function(N,Y,z){const ne=n.getSource?.()?.format_?.layerName_??"mvt:layer",ae=N.getProperties(),ve=m[ae[ne]];if(!ve)return;let pe=i.indexOf(Y);pe==-1&&(pe=PU(Y,i)),Mf.zoom=pe,Mf.distanceFromCenter=0;const be=N.getGeometry(),Ee=Kbe[be.getType()],Te=n.get("map");if(Te&&Te instanceof i6&&Ee===1){const nt=Te.getSize();if(nt){const ht=Te.getView().getCenter(),ke=Sf(be.getExtent());Mf.distanceFromCenter=z0e(ht,ke)/Y/nt[1]}}const je={id:N.getId(),properties:ae,type:Ee},Re=n.get("mapbox-featurestate")[N.getId()];let qe=-1;for(let nt=0,ht=ve.length;nt<ht;++nt){const ke=ve[nt],Oe=ke.layer,ze=Oe.id;if(z!==void 0&&z!==ze)continue;const we=Oe.layout||dm,At=Oe.paint||dm;if(we.visibility==="none"||"minzoom"in Oe&&pe<Oe.minzoom||"maxzoom"in Oe&&pe>=Oe.maxzoom)continue;const it=Oe.filter;if(!it||jbe(ze,it,je,R)){let Ct,It,Ke,Ie,Se,Ge;const st=ke.index;if(Ee==3&&(Oe.type=="fill"||Oe.type=="fill-extrusion"))if(It=$i(Oe,"paint",Oe.type+"-opacity",je,B,Re),Oe.type+"-pattern"in At){const Un=$i(Oe,"paint",Oe.type+"-pattern",je,B,Re);if(Un){const Tt=typeof Un=="string"?bB(Un,ae):Un.toString(),Me=qj(Tt,c);if(r&&r[Tt]&&Me){++qe,Ge=H[qe],(!Ge||!Ge.getFill()||Ge.getStroke()||Ge.getText())&&(Ge=new pf({fill:new n1}),H[qe]=Ge),Ke=Ge.getFill(),Ge.setZIndex(st);const oe=Tt+"."+It;let le=S[oe];if(!le){const he=r[Tt],se=o6(he.width,he.height),Ae=se.getContext("2d");Ae.globalAlpha=It,Ae.drawImage(Me.image,he.x,he.y,he.width,he.height,0,0,he.width,he.height),le=Ae.createPattern(se,"repeat"),S[oe]=le}Ke.setColor(le)}}}else Ct=Oy($i(Oe,"paint",Oe.type+"-color",je,B,Re),It),Oe.type+"-outline-color"in At&&(Se=Oy($i(Oe,"paint",Oe.type+"-outline-color",je,B,Re),It)),Se||(Se=Ct),(Ct||Se)&&(++qe,Ge=H[qe],(!Ge||Ct&&!Ge.getFill()||!Ct&&Ge.getFill()||Se&&!Ge.getStroke()||!Se&&Ge.getStroke()||Ge.getText())&&(Ge=new pf({fill:Ct?new n1:void 0,stroke:Se?new zy:void 0}),H[qe]=Ge),Ct&&(Ke=Ge.getFill(),Ke.setColor(Ct)),Se&&(Ie=Ge.getStroke(),Ie.setColor(Se),Ie.setWidth(.5)),Ge.setZIndex(st));if(Ee!=1&&Oe.type=="line"){"line-pattern"in At?Ct=void 0:Ct=Oy($i(Oe,"paint","line-color",je,B,Re),$i(Oe,"paint","line-opacity",je,B,Re));const Un=$i(Oe,"paint","line-width",je,B,Re);Ct&&Un>0&&(++qe,Ge=H[qe],(!Ge||!Ge.getStroke()||Ge.getFill()||Ge.getText())&&(Ge=new pf({stroke:new zy}),H[qe]=Ge),Ie=Ge.getStroke(),Ie.setLineCap($i(Oe,"layout","line-cap",je,B,Re)),Ie.setLineJoin($i(Oe,"layout","line-join",je,B,Re)),Ie.setMiterLimit($i(Oe,"layout","line-miter-limit",je,B,Re)),Ie.setColor(Ct),Ie.setWidth(Un),Ie.setLineDash(At["line-dasharray"]?$i(Oe,"paint","line-dasharray",je,B,Re).map(function(Tt){return Tt*Un}):null),Ge.setZIndex(st))}let ut=!1,ft=null,St=0,kt,en,Pn;if((Ee==1||Ee==2)&&"icon-image"in we){const Un=$i(Oe,"layout","icon-image",je,B,Re);if(Un){kt=typeof Un=="string"?bB(Un,ae):Un.toString();let Tt;const Me=a?a(n,kt):void 0,oe=qj(kt,c);if(r&&r[kt]&&oe||Me){const le=$i(Oe,"layout","icon-rotation-alignment",je,B,Re);if(Ee==2){const he=N.getGeometry();if(he.getFlatMidpoint||he.getFlatMidpoints){const se=he.getExtent();if(Math.sqrt(Math.max(Math.pow((se[2]-se[0])/Y,2),Math.pow((se[3]-se[1])/Y,2)))>150){const xe=he.getType()==="MultiLineString"?he.getFlatMidpoints():he.getFlatMidpoint();if(vB||(aM=[NaN,NaN],vB=new QA("Point",aM,[],2,{},void 0)),Tt=vB,aM[0]=xe[0],aM[1]=xe[1],$i(Oe,"layout","symbol-placement",je,B,Re)==="line"&&le==="map"){const Xe=he.getStride(),fe=he.getFlatCoordinates();for(let De=0,y=fe.length-Xe;De<y;De+=Xe){const rt=fe[De],Bt=fe[De+1],pt=fe[De+Xe],Ht=fe[De+Xe+1],gt=Math.min(rt,pt),jn=Math.max(rt,pt),ni=xe[0],In=xe[1],Ln=(Ht-Bt)*(ni-rt)-(pt-rt)*(In-Bt);if(Math.abs(Ln)<.001&&ni<=jn&&ni>=gt){St=Math.atan2(Bt-Ht,pt-rt);break}}}}}}if(Ee!==2||Tt){const he=$i(Oe,"layout","icon-size",je,B,Re),se=At["icon-color"]!==void 0?$i(Oe,"paint","icon-color",je,B,Re):null;if(!se||se.a!==0){const Ae=$i(Oe,"paint","icon-halo-color",je,B,Re),xe=$i(Oe,"paint","icon-halo-width",je,B,Re);let Ye=`${kt}.${he}.${xe}.${Ae}`;if(se!==null&&(Ye+=`.${se}`),en=x[Ye],!en){const Xe=Qj(Oe,je,"icon",B);let fe;"icon-offset"in we&&(fe=$i(Oe,"layout","icon-offset",je,B,Re).slice(0),fe[0]*=he,fe[1]*=-he);let De=se?[se.r*255,se.g*255,se.b*255,se.a]:void 0;if(Me){const y={color:De,rotateWithView:le==="map",displacement:fe,declutterMode:Xe,scale:he};typeof Me=="string"?y.src=Me:(y.img=Me,y.imgSize=[Me.width,Me.height]),en=new gx(y)}else{const y=r[kt];let rt,Bt,pt;if(xe)y.sdf?(rt=Nj(Gj(oe.image,y,se||[0,0,0,1]),{x:0,y:0,width:y.width,height:y.height,pixelRatio:y.pixelRatio},xe,Ae),De=void 0):rt=Nj(oe.image,y,xe,Ae);else{if(y.sdf&&!oe.unSDFed){const Ht=Gj(oe.image,{x:0,y:0,width:oe.size[0],height:oe.size[1]},{r:1,g:1,b:1});oe.image=Ht,oe.unSDFed=!0}rt=oe.image,Bt=[y.width,y.height],pt=[y.x,y.y]}en=new gx({color:De,img:rt,imgSize:oe.size,size:Bt,offset:pt,rotateWithView:le==="map",scale:he/y.pixelRatio,displacement:fe,declutterMode:Xe})}x[Ye]=en}}en&&(++qe,Ge=H[qe],(!Ge||!Ge.getImage()||Ge.getFill()||Ge.getStroke())&&(Ge=new pf,H[qe]=Ge),Ge.setGeometry(Tt),en.setRotation(St+gB($i(Oe,"layout","icon-rotate",je,B,Re))),en.setOpacity($i(Oe,"paint","icon-opacity",je,B,Re)),en.setAnchor(Fbe[$i(Oe,"layout","icon-anchor",je,B,Re)]),Ge.setImage(en),ft=Ge.getText(),Ge.setText(void 0),Ge.setZIndex(st),ut=!0,Pn=!1)}else Pn=!0}}}if(Ee==1&&Oe.type==="circle"){++qe,Ge=H[qe],(!Ge||!Ge.getImage()||Ge.getFill()||Ge.getStroke())&&(Ge=new pf,H[qe]=Ge);const Un="circle-radius"in At?$i(Oe,"paint","circle-radius",je,B,Re):5,Tt=Oy($i(Oe,"paint","circle-stroke-color",je,B,Re),$i(Oe,"paint","circle-stroke-opacity",je,B,Re)),Me=$i(Oe,"paint","circle-translate",je,B,Re),oe=Oy($i(Oe,"paint","circle-color",je,B,Re),$i(Oe,"paint","circle-opacity",je,B,Re)),le=$i(Oe,"paint","circle-stroke-width",je,B,Re),he=Un+"."+Tt+"."+oe+"."+le+"."+Me[0]+"."+Me[1];en=x[he],en||(en=new h5({radius:Un,displacement:[Me[0],-Me[1]],stroke:Tt&&le>0?new zy({width:le,color:Tt}):void 0,fill:oe?new n1({color:oe}):void 0,declutterMode:"none"}),x[he]=en),Ge.setImage(en),ft=Ge.getText(),Ge.setText(void 0),Ge.setGeometry(void 0),Ge.setZIndex(st),ut=!0}let zn,si,xn,Rn,pn,Hn;if("text-field"in we){Rn=Math.round($i(Oe,"layout","text-size",je,B,Re));const Un=$i(Oe,"layout","text-font",je,B,Re);xn=$i(Oe,"layout","text-line-height",je,B,Re),si=G9(s?s(Un,e.metadata?e.metadata["ol:webfonts"]:void 0):Un,Rn,xn),si.includes("sans-serif")||(si+=",sans-serif"),pn=$i(Oe,"layout","text-letter-spacing",je,B,Re),Hn=$i(Oe,"layout","text-max-width",je,B,Re);const Tt=$i(Oe,"layout","text-field",je,B,Re);typeof Tt=="object"&&Tt.sections?Tt.sections.length===1?zn=Tt.toString():zn=Tt.sections.reduce((Me,oe,le)=>{const he=oe.fontStack?oe.fontStack.split(","):Un,se=G9(s?s(he):he,Rn*(oe.scale||1),xn);let Ae=oe.text;if(Ae===`
`)return Me.push(`
`,""),Me;if(Ee==2)return Me.push(AR(Ae,pn),se),Me;Ae=hR(Ae,se,Hn,pn).split(`
`);for(let xe=0,Ye=Ae.length;xe<Ye;++xe)xe>0&&Me.push(`
`,""),Me.push(Ae[xe],se);return Me},[]):zn=bB(Tt,ae).trim(),It=$i(Oe,"paint","text-opacity",je,B,Re)}if(zn&&It&&!Pn){ut||(++qe,Ge=H[qe],(!Ge||!Ge.getText()||Ge.getFill()||Ge.getStroke())&&(Ge=new pf,H[qe]=Ge),Ge.setImage(void 0),Ge.setGeometry(void 0));const Un=Qj(Oe,je,"text",B);Ge.getText()||Ge.setText(ft),ft=Ge.getText(),(!ft||"getDeclutterMode"in ft&&ft.getDeclutterMode()!==Un)&&(ft=new Oee({padding:[2,2,2,2],declutterMode:Un}),Ge.setText(ft));const Tt=$i(Oe,"layout","text-transform",je,B,Re);Tt=="uppercase"?zn=Array.isArray(zn)?zn.map((pt,Ht)=>Ht%2?pt:pt.toUpperCase()):zn.toUpperCase():Tt=="lowercase"&&(zn=Array.isArray(zn)?zn.map((pt,Ht)=>Ht%2?pt:pt.toLowerCase()):zn.toLowerCase());const Me=Array.isArray(zn)?zn:Ee==2?AR(zn,pn):hR(zn,si,Hn,pn);if(ft.setText(Me),ft.setFont(si),ft.setRotation(gB($i(Oe,"layout","text-rotate",je,B,Re))),typeof ft.setKeepUpright=="function"){const pt=$i(Oe,"layout","text-keep-upright",je,B,Re);ft.setKeepUpright(pt)}const oe=$i(Oe,"layout","text-anchor",je,B,Re),le=ut||Ee==1?"point":$i(Oe,"layout","symbol-placement",je,B,Re);let he;if(le==="line-center"?(ft.setPlacement("line"),he="center"):ft.setPlacement(le),le==="line"&&typeof ft.setRepeat=="function"){const pt=$i(Oe,"layout","symbol-spacing",je,B,Re);ft.setRepeat(pt*2)}ft.setOverflow(le==="point");let se=$i(Oe,"paint","text-halo-width",je,B,Re);const Ae=$i(Oe,"layout","text-offset",je,B,Re),xe=$i(Oe,"paint","text-translate",je,B,Re);let Ye=0,Xe=0;if(le=="point"){he="center",oe.indexOf("left")!==-1?(he="left",Xe=se):oe.indexOf("right")!==-1&&(he="right",Xe=-se);const pt=$i(Oe,"layout","text-rotation-alignment",je,B,Re);ft.setRotateWithView(pt=="map")}else ft.setMaxAngle(gB($i(Oe,"layout","text-max-angle",je,B,Re))*zn.length/Me.length),ft.setRotateWithView(!1);ft.setTextAlign(he);let fe="middle";oe.indexOf("bottom")==0?(fe="bottom",Ye=-se-.5*(xn-1)*Rn):oe.indexOf("top")==0&&(fe="top",Ye=se+.5*(xn-1)*Rn),ft.setTextBaseline(fe);const De=$i(Oe,"layout","text-justify",je,B,Re);ft.setJustify(De==="auto"?void 0:De),ft.setOffsetX(Ae[0]*Rn+Xe+xe[0]),ft.setOffsetY(Ae[1]*Rn+Ye+xe[1]),W.setColor(Oy($i(Oe,"paint","text-color",je,B,Re),It)),ft.setFill(W);const y=Oy($i(Oe,"paint","text-halo-color",je,B,Re),It);if(y&&se>0){j.setColor(y),se*=2;const pt=.5*Rn;j.setWidth(se<=pt?se:pt),ft.setStroke(j)}else ft.setStroke(void 0);const rt=$i(Oe,"layout","text-padding",je,B,Re),Bt=ft.getPadding();rt!==Bt[0]&&(Bt[0]=rt,Bt[1]=rt,Bt[2]=rt,Bt[3]=rt),Ge.setZIndex(st)}}}if(qe>-1)return H.length=qe+1,H};return n.setStyle($),n.set("mapbox-layers",v),n.set("mapbox-source",F),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),$}class ete{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=r6,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Hs(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Hs(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Lr()}readFeature(e,t){return Lr()}readFeatures(e,t){return Lr()}readGeometry(e,t){return Lr()}readProjection(e){return Lr()}writeFeature(e,t){return Lr()}writeFeatures(e,t){return Lr()}writeGeometry(e,t){return Lr()}}function s6(n,e,t){const i=t?Hs(t.featureProjection):null,r=t?Hs(t.dataProjection):null;let o=n;if(i&&r&&!Xy(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(J3(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let h=0,m=c.length;h<m;++h)c[h]=Math.round(c[h]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const Qbe={Point:jb,LineString:Gb,Polygon:d1,MultiPoint:f5,MultiLineString:l4,MultiPolygon:u4};function qbe(n,e,t){return Array.isArray(e[0])?(lee(n,0,e,t)||(n=n.slice(),nR(n,0,e,t)),n):(cU(n,0,e,t)||(n=n.slice(),oS(n,0,e,t)),n)}function tte(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>tte({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return s6(new QA(i,i==="Polygon"?qbe(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function UU(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>UU(r,e));return new AS(i)}const t=Qbe[n.type];return s6(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Ybe extends ete{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(lM(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(lM(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Lr()}readFeaturesFromObject(e,t){return Lr()}readGeometry(e,t){return this.readGeometryFromObject(lM(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Lr()}readProjection(e){return this.readProjectionFromObject(lM(e))}readProjectionFromObject(e){return Lr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Lr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Lr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Lr()}}function lM(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Yj extends Ybe{constructor(e){e=e||{},super(),this.dataProjection=Hs(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Hs(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=LU(i.geometry);if(this.featureClass===QA)return tte({geometry:r,id:i.id,properties:i.properties},t);const o=new r6;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(UU(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const h=this.readFeatureFromObject(s[a],t);h&&r.push(h)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return $be(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Hs(t.properties.name);else if(t.type==="EPSG")i=Hs("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=dR(s,t),delete o[e.getGeometryName()]),nv(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return dR(e,this.adaptOptions(t))}}function LU(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Hbe(n);break}case"LineString":{t=Zbe(n);break}case"Polygon":{t=tCe(n);break}case"MultiPoint":{t=Jbe(n);break}case"MultiLineString":{t=Xbe(n);break}case"MultiPolygon":{t=eCe(n);break}case"GeometryCollection":{t=Vbe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function $be(n,e){const t=LU(n);return UU(t,e)}function Vbe(n,e){return n.geometries.map(function(i){return LU(i)})}function Hbe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:tC(e.length)}}function Zbe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:tC(e[0]?.length||2)}}function Xbe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=l5(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:tC(t)}}function Jbe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:tC(e[0]?.length||2)}}function eCe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=nee(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:tC(i)}}function tCe(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=l5(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:tC(i)}}function dR(n,e){n=s6(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=aCe(n);break}case"LineString":{i=iCe(n);break}case"Polygon":{i=lCe(n,e);break}case"MultiPoint":{i=oCe(n);break}case"MultiLineString":{i=rCe(n);break}case"MultiPolygon":{i=sCe(n,e);break}case"GeometryCollection":{i=nCe(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function nCe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return dR(i,e)})}}function iCe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function rCe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function oCe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function sCe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function aCe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function lCe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const fR=65536*65536,$j=1/fR,uCe=12,Vj=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),CB=0,uM=1,y2=2,cM=5;class cCe{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*fR;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*fR;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,ACe(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=uCe&&Vj?Vj.decode(this.buf.subarray(t,e)):MCe(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===y2?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===CB)for(;this.buf[this.pos++]>127;);else if(t===y2)this.pos=this.readVarint()+this.pos;else if(t===cM)this.pos+=4;else if(t===uM)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*$j),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*$j),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){hCe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=wCe(this.buf,e,this.pos);const i=this.pos-t;i>=128&&Hj(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&Hj(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,y2),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,pCe,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,mCe,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,vCe,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,gCe,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,yCe,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,bCe,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,CCe,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,_Ce,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,xCe,t)}writeBytesField(e,t){this.writeTag(e,y2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,cM),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,cM),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,uM),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,uM),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,CB),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,CB),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,y2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,cM),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,uM),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function ACe(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return WC(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function WC(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function hCe(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),dCe(t,i,e),fCe(i,e)}function dCe(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function fCe(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function Hj(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function pCe(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function mCe(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function gCe(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function yCe(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function vCe(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function bCe(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function CCe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function _Ce(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function xCe(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function MCe(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,h,m;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],h=n[r+2],(c&192)===128&&(h&192)===128&&(s=(o&15)<<12|(c&63)<<6|h&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],h=n[r+2],m=n[r+3],(c&192)===128&&(h&192)===128&&(m&192)===128&&(s=(o&15)<<18|(c&63)<<12|(h&63)<<6|m&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function wCe(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class nte extends ete{constructor(e){super(),e=e||{},this.dataProjection=new QE({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:QA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,h=0,m=0,v=0;for(;e.pos<o;){if(!a){const x=e.readVarint();s=x&7,a=x>>3}if(a--,s===1||s===2)c+=e.readSVarint(),h+=e.readSVarint(),s===1&&m>v&&(r.push(m),v=m),i.push(c,h),m+=2;else if(s===7)m>v&&(i.push(i[v],i[v+1]),m+=2);else throw new Error("Invalid command found in the PBF")}m>v&&(r.push(m),v=m)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],h=[];this.readRawGeometry_(e,t,c,h);const m=ICe(r,h.length);if(this.featureClass===QA)o=new this.featureClass(m,c,h,2,s,a),o.transform(i.dataProjection);else{let v;if(m=="Polygon"){const B=uee(c,h);v=B.length>1?new u4(c,"XY",B):new d1(c,"XY",h)}else v=m==="Point"?new jb(c,"XY"):m==="LineString"?new Gb(c,"XY"):m==="MultiPoint"?new f5(c,"XY"):m==="MultiLineString"?new l4(c,"XY",h):null;const x=this.featureClass;o=new x,this.geometryName_&&o.setGeometryName(this.geometryName_);const S=s6(v,!1,i);o.setGeometry(S),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Hs(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new cCe(e),s=o.readFields(SCe,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const h=s[c],m=h?[0,0,h.extent,h.extent]:null;r.setExtent(m);for(let v=0,x=h.length;v<x;++v){const S=BCe(o,h,v),B=this.createFeature_(o,S,t);B!==null&&a.push(B)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function SCe(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(ECe,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function ECe(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function OCe(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function BCe(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(OCe,r,i),r}function ICe(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class kCe extends IU{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=ym(c,jg(t.extent,r.projection))),!a[dl.ANIMATING]&&!a[dl.INTERACTING]&&!Jb(c))if(s){const h=r.projection,m=s.getImage(c,o,i,h);m&&(this.loadImage(m)?this.image=m:m.getState()===zi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Zu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!zb(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=is(s),h=Math.floor(a.width*((r[0]-s[0])/c));if(h<0||h>=a.width)return null;const m=ec(s),v=Math.floor(a.height*((s[3]-r[1])/m));return v<0||v>=a.height?null:this.getImageData(a,h,v)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),h=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,v=e.viewState,x=v.center,S=v.resolution,B=m*s/(S*c),R=m*a/(S*c);this.prepareContainer(e,t);const F=this.context.canvas.width,j=this.context.canvas.height,W=this.getRenderContext(e);let H=!1,$=!0;if(h.extent){const ae=jg(h.extent,v.projection);$=Jl(ae,e.extent),H=$&&!zg(ae,e.extent),H&&this.clipUnrotated(W,e,ae)}const N=i.getImage(),Y=n0(this.tempTransform,F/2,j/2,B,R,0,c*(r[0]-x[0])/s,c*(x[1]-r[3])/a);this.renderedResolution=a*m/c;const z=N.width*Y[0],ne=N.height*Y[3];if(this.getLayer().getSource().getInterpolate()||(W.imageSmoothingEnabled=!1),this.preRender(W,e),$&&z>=.5&&ne>=.5){const ae=Y[4],ve=Y[5],pe=h.opacity;pe!==1&&(W.save(),W.globalAlpha=pe),W.drawImage(N,0,0,+N.width,+N.height,ae,ve,z,ne),pe!==1&&W.restore()}return this.postRender(this.context,e),H&&W.restore(),W.imageSmoothingEnabled=!0,this.container}}class TCe extends zx{constructor(e){e=e||{},super(e)}}class ite extends TCe{constructor(e){super(e)}createRenderer(){return new kCe(this)}getData(e){return super.getData(e)}}function pR(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const RCe=new Error("disposed"),DCe=[256,256];class Zj extends m5{constructor(e){const t=ai.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=pR(this.data_);return e?[e.width,e.height]:DCe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ai.IDLE&&this.state!==ai.ERROR)return;this.state=ai.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ai.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ai.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(RCe),this.controller_=null),super.disposeInternal()}}let _B;const Q_=[];function Xj(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function xB(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function PCe(){if(_B===void 0){const n=Tl(6,6,Q_);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Xj(n,4,5,4,0),Xj(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;_B=xB(e,0)||xB(e,4)||xB(e,8),u5(n),Q_.push(n.canvas)}return _B}function mR(n,e,t,i){const r=$E(t,e,n);let o=X9(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||zb(c,r)){const h=X9(n,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function UCe(n,e,t,i){const r=Sf(t);let o=mR(n,e,r,i);return(!isFinite(o)||o<=0)&&KJ(t,function(s){return o=mR(n,e,s,i),isFinite(o)&&o>0}),o}function rte(n,e,t,i,r,o,s,a,c,h,m,v,x,S){const B=Tl(Math.round(t*n),Math.round(t*e),Q_);if(v||(B.imageSmoothingEnabled=!1),c.length===0)return B.canvas;B.scale(t,t);function R(N){return Math.round(N*t)/t}B.globalCompositeOperation="lighter";const F=vp();c.forEach(function(N,Y,z){UJ(F,N.extent)});let j;const W=t/i,H=(v?1:1+Math.pow(2,-24))/W;(!x||c.length!==1||h!==0)&&(j=Tl(Math.round(is(F)*W),Math.round(ec(F)*W),Q_),v||(j.imageSmoothingEnabled=!1),c.forEach(function(N,Y,z){if(N.image.width>0&&N.image.height>0){if(N.clipExtent){j.save();const be=(N.clipExtent[0]-F[0])*W,Ee=-(N.clipExtent[3]-F[3])*W,Te=is(N.clipExtent)*W,je=ec(N.clipExtent)*W;j.rect(v?be:Math.round(be),v?Ee:Math.round(Ee),v?Te:Math.round(be+Te)-Math.round(be),v?je:Math.round(Ee+je)-Math.round(Ee)),j.clip()}const ne=(N.extent[0]-F[0])*W,ae=-(N.extent[3]-F[3])*W,ve=is(N.extent)*W,pe=ec(N.extent)*W;j.drawImage(N.image,h,h,N.image.width-2*h,N.image.height-2*h,v?ne:Math.round(ne),v?ae:Math.round(ae),v?ve:Math.round(ne+ve)-Math.round(ne),v?pe:Math.round(ae+pe)-Math.round(ae)),N.clipExtent&&j.restore()}}));const $=g1(s);return a.getTriangles().forEach(function(N,Y,z){const ne=N.source,ae=N.target;let ve=ne[0][0],pe=ne[0][1],be=ne[1][0],Ee=ne[1][1],Te=ne[2][0],je=ne[2][1];const Re=R((ae[0][0]-$[0])/o),qe=R(-(ae[0][1]-$[1])/o),nt=R((ae[1][0]-$[0])/o),ht=R(-(ae[1][1]-$[1])/o),ke=R((ae[2][0]-$[0])/o),Oe=R(-(ae[2][1]-$[1])/o),ze=ve,we=pe;ve=0,pe=0,be-=ze,Ee-=we,Te-=ze,je-=we;const At=[[be,Ee,0,0,nt-Re],[Te,je,0,0,ke-Re],[0,0,be,Ee,ht-qe],[0,0,Te,je,Oe-qe]],it=B0e(At);if(!it)return;if(B.save(),B.beginPath(),PCe()||!v){B.moveTo(nt,ht);const It=4,Ke=Re-nt,Ie=qe-ht;for(let Se=0;Se<It;Se++)B.lineTo(nt+R((Se+1)*Ke/It),ht+R(Se*Ie/(It-1))),Se!=It-1&&B.lineTo(nt+R((Se+1)*Ke/It),ht+R((Se+1)*Ie/(It-1)));B.lineTo(ke,Oe)}else B.moveTo(nt,ht),B.lineTo(Re,qe),B.lineTo(ke,Oe);B.clip(),B.transform(it[0],it[2],it[1],it[3],Re,qe),B.translate(F[0]-ze,F[3]-we);let Ct;if(j)Ct=j.canvas,B.scale(H,-H);else{const It=c[0],Ke=It.extent;Ct=It.image,B.scale(is(Ke)/Ct.width,-ec(Ke)/Ct.height)}B.drawImage(Ct,0,0),B.restore()}),j&&(u5(j),Q_.push(j.canvas)),m&&(B.save(),B.globalCompositeOperation="source-over",B.strokeStyle="black",B.lineWidth=1,a.getTriangles().forEach(function(N,Y,z){const ne=N.target,ae=(ne[0][0]-$[0])/o,ve=-(ne[0][1]-$[1])/o,pe=(ne[1][0]-$[0])/o,be=-(ne[1][1]-$[1])/o,Ee=(ne[2][0]-$[0])/o,Te=-(ne[2][1]-$[1])/o;B.beginPath(),B.moveTo(pe,be),B.lineTo(ae,ve),B.lineTo(Ee,Te),B.closePath(),B.stroke()}),B.restore()),B.canvas}const LCe=10,Jj=.25;class ote{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const h=a?g1e(H=>Zu(a,$E(H,this.targetProj_,this.sourceProj_))):J3(this.targetProj_,this.sourceProj_);this.transformInv_=function(H){const $=H[0]+"/"+H[1];return c[$]||(c[$]=h(H)),c[$]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&is(r)>=is(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?is(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?is(this.targetProj_.getExtent()):null;const m=g1(i),v=WE(i),x=GE(i),S=NE(i),B=this.transformInv_(m),R=this.transformInv_(v),F=this.transformInv_(x),j=this.transformInv_(S),W=LCe+(s?Math.max(0,Math.ceil(Math.log2($9(i)/(s*s*256*256)))):0);if(this.addQuad_(m,v,x,S,B,R,F,j,W),this.wrapsXInSource_){let H=1/0;this.triangles_.forEach(function($,N,Y){H=Math.min(H,$.source[0][0],$.source[1][0],$.source[2][0])}),this.triangles_.forEach($=>{if(Math.max($.source[0][0],$.source[1][0],$.source[2][0])-H>this.sourceWorldWidth_/2){const N=[[$.source[0][0],$.source[0][1]],[$.source[1][0],$.source[1][1]],[$.source[2][0],$.source[2][1]]];N[0][0]-H>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-H>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-H>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const Y=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-Y<this.sourceWorldWidth_/2&&($.source=N)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,h){const m=q9([o,s,a,c]),v=this.sourceWorldWidth_?is(m)/this.sourceWorldWidth_:null,x=this.sourceWorldWidth_,S=this.sourceProj_.canWrapX()&&v>.5&&v<1;let B=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const F=q9([e,t,i,r]);B=is(F)/this.targetWorldWidth_>Jj||B}!S&&this.sourceProj_.isGlobal()&&v&&(B=v>Jj||B)}if(!B&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Jl(m,this.maxSourceExtent_))return;let R=0;if(!B&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)B=!0;else if(R=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),R!=1&&R!=2&&R!=4&&R!=8)return}if(h>0){if(!B){const F=[(e[0]+i[0])/2,(e[1]+i[1])/2],j=this.transformInv_(F);let W;S?W=(kb(o[0],x)+kb(a[0],x))/2-kb(j[0],x):W=(o[0]+a[0])/2-j[0];const H=(o[1]+a[1])/2-j[1];B=W*W+H*H>this.errorThresholdSquared_}if(B){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const F=[(t[0]+i[0])/2,(t[1]+i[1])/2],j=this.transformInv_(F),W=[(r[0]+e[0])/2,(r[1]+e[1])/2],H=this.transformInv_(W);this.addQuad_(e,t,F,W,o,s,j,H,h-1),this.addQuad_(W,F,i,r,H,j,a,c,h-1)}else{const F=[(e[0]+t[0])/2,(e[1]+t[1])/2],j=this.transformInv_(F),W=[(i[0]+r[0])/2,(i[1]+r[1])/2],H=this.transformInv_(W);this.addQuad_(e,F,W,r,o,j,H,c,h-1),this.addQuad_(F,t,i,W,j,s,a,H,h-1)}return}}if(S){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(R&11)==0&&this.addTriangle_(e,i,r,o,a,c),(R&14)==0&&this.addTriangle_(e,i,t,o,a,s),R&&((R&13)==0&&this.addTriangle_(t,r,e,s,c,o),(R&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=vp();return this.triangles_.forEach(function(t,i,r){const o=t.source;d3(e,o[0]),d3(e,o[1]),d3(e,o[2])}),e}getTriangles(){return this.triangles_}}const ste=.5;class ate extends m5{constructor(e,t,i,r,o,s,a,c,h,m,v,x){super(o,ai.IDLE,x),this.renderEdges_=v!==void 0?v:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const S=r.getTileCoordExtent(this.wrappedTileCoord_),B=this.targetTileGrid_.getExtent();let R=this.sourceTileGrid_.getExtent();const F=B?ym(S,B):S;if($9(F)===0){this.state=ai.EMPTY;return}const j=e.getExtent();j&&(R?R=ym(R,j):R=j);const W=r.getResolution(this.wrappedTileCoord_[0]),H=UCe(e,i,F,W);if(!isFinite(H)||H<=0){this.state=ai.EMPTY;return}const $=m!==void 0?m:ste;if(this.triangulation_=new ote(e,i,F,R,H*$,W),this.triangulation_.getTriangles().length===0){this.state=ai.EMPTY;return}this.sourceZ_=t.getZForResolution(H);let N=this.triangulation_.calculateSourceExtent();if(R&&(e.canWrapX()?(N[1]=kl(N[1],R[1],R[3]),N[3]=kl(N[3],R[1],R[3])):N=ym(N,R)),!$9(N))this.state=ai.EMPTY;else{let Y=0,z=0;e.canWrapX()&&(Y=is(j),z=Math.floor((N[0]-j[0])/Y)),jJ(N.slice(),e,!0).forEach(ae=>{const ve=t.getTileRangeForExtentAndZ(ae,this.sourceZ_);for(let pe=ve.minX;pe<=ve.maxX;pe++)for(let be=ve.minY;be<=ve.maxY;be++){const Ee=h(this.sourceZ_,pe,be,a);if(Ee){const Te=z*Y;this.sourceTiles_.push({tile:Ee,offset:Te})}}++z}),this.sourceTiles_.length===0&&(this.state=ai.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ai.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ai.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=rte(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ai.LOADED}this.changed()}load(){if(this.state==ai.IDLE){this.state=ai.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ai.IDLE||i==ai.LOADING){e++;const r=$o(t,Ir.CHANGE,o=>{const s=t.getState();(s==ai.LOADED||s==ai.ERROR||s==ai.EMPTY)&&(Oa(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==ai.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Oa),this.sourcesListenerKeys_=null}release(){this.canvas_&&(u5(this.canvas_.getContext("2d")),Q_.push(this.canvas_),this.canvas_=null),super.release()}}class KCe{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof n5&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return xs(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return xs(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){xs(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function gS(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function FCe(n,e,t){return n+"/"+e+"/"+t}function zCe(n){return jCe(n[0],n[1],n[2])}function jCe(n,e,t){return(e<<n)+t}function NCe(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function MB(n,e,t,i,r){return`${$r(n)},${e},${FCe(t,i,r)}`}function wB(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function GCe(n,e,t){const i=n[t];return i?i.delete(e):!1}function eN(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=ym(e,jg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=ym(e,r))}return e}class lte extends IU{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=vp(),this.tempTileRange_=new TU(0,0,0,0),this.tempTileCoord_=gS(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new KCe(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=MB(a,a.getKey(),e,t,i);let h;if(o.containsKey(c))h=o.get(c);else{if(h=a.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!h)return null;o.set(c,h)}return h}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Zu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!zb(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(t.pixelRatio);for(let m=c.getZForResolution(s.resolution);m>=c.getMinZoom();--m){const v=c.getTileCoordForCoordAndZ(r,m),x=this.getTile(m,v[1],v[2],t);if(!x||x.getState()!==ai.LOADED)continue;const S=c.getOrigin(m),B=YA(c.getTileSize(m)),R=c.getResolution(m);let F;if(x instanceof Yee||x instanceof ate)F=x.getImage();else if(x instanceof Zj){if(F=pR(x.getData()),!F)continue}else continue;const j=Math.floor(h*((r[0]-S[0])/R-v[1]*B[0])),W=Math.floor(h*((S[1]-r[1])/R-v[2]*B[1])),H=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(F,j+H,W+H)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),h=c.getTileGridForProjection(s.projection),m=$r(c);m in e.wantedTiles||(e.wantedTiles[m]={});const v=e.wantedTiles[m],x=a.getMapInternal(),S=Math.max(i-o,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),x?x.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),B=s.rotation,R=B?FJ(s.center,s.resolution,B,e.size):void 0;for(let F=i;F>=S;--F){const j=h.getTileRangeForExtentAndZ(t,F,this.tempTileRange_),W=h.getResolution(F);for(let H=j.minX;H<=j.maxX;++H)for(let $=j.minY;$<=j.maxY;++$){if(B&&!h.tileCoordIntersectsViewport([F,H,$],R))continue;const N=this.getTile(F,H,$,e);if(!N||!wB(r,N,F))continue;const z=N.getKey();if(v[z]=!0,N.getState()===ai.IDLE&&!e.tileQueue.isKeyQueued(z)){const ne=gS(F,H,$,this.tempTileCoord_);e.tileQueue.enqueue([N,m,h.getTileCoordCenter(ne),W])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const h=MB(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(h)){const m=i.peek(h);if(m.getState()===ai.LOADED)return m.endTransition($r(this)),wB(t,m,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),h=c.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let v=o.minY;v<=o.maxY;++v){const x=MB(c,h,i,m,v);let S=!1;if(a.containsKey(x)){const B=a.peek(x);B.getState()===ai.LOADED&&(wB(r,B,i),S=!0)}S||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,h=this.getLayer(),m=h.getSource(),v=m.getTileGridForProjection(o),x=v.getZForResolution(s,m.zDirection),S=v.getResolution(x),B=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==B&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=B):this.renderedSourceKey_=B;let R=e.extent;const F=m.getTilePixelRatio(c);this.prepareContainer(e,t);const j=this.context.canvas.width,W=this.context.canvas.height,H=i.extent&&jg(i.extent);H&&(R=ym(R,jg(i.extent)));const $=S*j/2/F,N=S*W/2/F,Y=[a[0]-$,a[1]-N,a[0]+$,a[1]+N],z={};this.renderedTiles.length=0;const ne=h.getPreload();if(e.nextExtent){const nt=v.getZForResolution(r.nextResolution,m.zDirection),ht=eN(e,e.nextExtent);this.enqueueTiles(e,ht,nt,z,ne)}const ae=eN(e,R);if(this.enqueueTiles(e,ae,x,z,0),ne>0&&setTimeout(()=>{this.enqueueTiles(e,ae,x-1,z,ne-1)},0),!(x in z))return this.container;const ve=$r(this),pe=e.time;for(const nt of z[x]){const ht=nt.getState();if(ht===ai.EMPTY)continue;const ke=nt.tileCoord;if(ht===ai.LOADED&&nt.getAlpha(ve,pe)===1){nt.endTransition(ve);continue}if(ht!==ai.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ke,z)){GCe(z,nt,x),e.animate=!0;continue}if(this.findAltTiles_(v,ke,x+1,z))continue;const we=v.getMinZoom();for(let At=x-1;At>=we&&!this.findAltTiles_(v,ke,At,z);--At);}const be=S/s*c/F,Ee=this.getRenderContext(e);n0(this.tempTransform,j/2,W/2,be,be,0,-j/2,-W/2),i.extent&&this.clipUnrotated(Ee,e,H),m.getInterpolate()||(Ee.imageSmoothingEnabled=!1),this.preRender(Ee,e);const Te=Object.keys(z).map(Number);Te.sort(Xg);let je;const Re=[],qe=[];for(let nt=Te.length-1;nt>=0;--nt){const ht=Te[nt],ke=m.getTilePixelSize(ht,c,o),ze=v.getResolution(ht)/S,we=ke[0]*ze*be,At=ke[1]*ze*be,it=v.getTileCoordForCoordAndZ(g1(Y),ht),Ct=v.getTileCoordExtent(it),It=Zu(this.tempTransform,[F*(Ct[0]-Y[0])/S,F*(Y[3]-Ct[3])/S]),Ke=F*m.getGutterForProjection(o);for(const Ie of z[ht]){if(Ie.getState()!==ai.LOADED)continue;const Se=Ie.tileCoord,Ge=it[1]-Se[1],st=Math.round(It[0]-(Ge-1)*we),ut=it[2]-Se[2],ft=Math.round(It[1]-(ut-1)*At),St=Math.round(It[0]-Ge*we),kt=Math.round(It[1]-ut*At),en=st-St,Pn=ft-kt,zn=Te.length===1;let si=!1;je=[St,kt,St+en,kt,St+en,kt+Pn,St,kt+Pn];for(let xn=0,Rn=Re.length;xn<Rn;++xn)if(!zn&&ht<qe[xn]){const pn=Re[xn];Jl([St,kt,St+en,kt+Pn],[pn[0],pn[3],pn[4],pn[7]])&&(si||(Ee.save(),si=!0),Ee.beginPath(),Ee.moveTo(je[0],je[1]),Ee.lineTo(je[2],je[3]),Ee.lineTo(je[4],je[5]),Ee.lineTo(je[6],je[7]),Ee.moveTo(pn[6],pn[7]),Ee.lineTo(pn[4],pn[5]),Ee.lineTo(pn[2],pn[3]),Ee.lineTo(pn[0],pn[1]),Ee.clip())}Re.push(je),qe.push(ht),this.drawTile(Ie,e,St,kt,en,Pn,Ke,zn),si&&Ee.restore(),this.renderedTiles.unshift(Ie),this.updateUsedTiles(e.usedTiles,m,Ie)}}if(this.renderedResolution=S,this.extentChanged=!this.renderedExtent_||!h1(this.renderedExtent_,Y),this.renderedExtent_=Y,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&Ee.restore(),Ee.imageSmoothingEnabled=!0,this.renderComplete){const nt=(ht,ke)=>{const Oe=$r(m),ze=ke.wantedTiles[Oe],we=ze?Object.keys(ze).length:0;this.updateCacheSize(we),this.tileCache_.expireCache()};e.postRenderFunctions.push(nt)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let h;if(e instanceof Zj){if(h=pR(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const m=this.getRenderContext(t),v=$r(this),x=t.layerStatesArray[t.layerIndex],S=x.opacity*(c?e.getAlpha(v,t.time):1),B=S!==m.globalAlpha;B&&(m.save(),m.globalAlpha=S),m.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,r,o,s),B&&m.restore(),S!==x.opacity?t.animate=!0:c&&e.endTransition(v)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=$r(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const Ny={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class WCe extends zx{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ny.PRELOAD)}setPreload(e){this.set(Ny.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ny.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ny.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class ute extends WCe{constructor(e){super(e)}createRenderer(){return new lte(this,{cacheSize:this.getCacheSize()})}}const QCe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},tN={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class qCe extends lte{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Ed(),this.tileClipContexts_=null}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const a=r.viewState.resolution,c=r.viewHints;return(!(c[dl.ANIMATING]||c[dl.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const h=r.getSource(),m=!!r.getDeclutter(),v=h.getTileGrid(),S=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),B=h.getSourceTiles(t,i,e),R=$r(r);delete e.hitDetectionImageData[R],e.executorGroups[R]=[],c.dirty=!1;for(let F=0,j=B.length;F<j;++F){const W=B[F];if(W.getState()!=ai.LOADED)continue;const H=W.tileCoord,$=v.getTileCoordExtent(H),N=ym(S,$),Y=Zy(N,r.getRenderBuffer()*a,this.tempExtent),z=h1($,N)?null:Y,ne=new Gee(0,N,a,t),ae=cR(a,t),ve=function(je,Re){let qe;const nt=je.getStyleFunction()||r.getStyleFunction();if(nt&&(qe=nt(je,a)),qe){const ht=this.renderFeature(je,ae,qe,ne,m,Re);c.dirty=c.dirty||ht}},pe=W.getFeatures();s&&s!==c.renderedRenderOrder&&pe.sort(s);for(let je=0,Re=pe.length;je<Re;++je){const qe=pe[je];(!z||Jl(z,qe.getGeometry().getExtent()))&&ve.call(this,qe,je)}const be=ne.finish(),Ee=r.getRenderMode()!=="vector"&&m&&B.length===1?null:N,Te=new Wee(Ee,a,t,h.getOverlaps(),be,r.getRenderBuffer(),!0);e.executorGroups[R].push(Te)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),m=c.getSource().getTileGridForProjection(t.viewState.projection),v=q9([e]);Zy(v,s*i,v);const x={},S=function(H,$,N){let Y=H.getId();Y===void 0&&(Y=$r(H));const z=x[Y];if(z){if(z!==!0&&N<z.distanceSq){if(N===0)return x[Y]=!0,o.splice(o.lastIndexOf(z),1),r(H,c,$);z.geometry=$,z.distanceSq=N}}else{if(N===0)return x[Y]=!0,r(H,c,$);o.push(x[Y]={feature:H,layer:c,geometry:$,distanceSq:N,callback:r})}},B=this.renderedTiles,R=$r(c),F=c.getDeclutter(),j=F?t.declutter?.[F]?.all().map(H=>H.value):null;let W;e:for(let H=0,$=B.length;H<$;++H){const N=B[H],Y=m.getTileCoordExtent(N.wrappedTileCoord);if(!Jl(Y,v))continue;const z=N.executorGroups[R];for(let ne=0,ae=z.length;ne<ae;++ne)if(W=z[ne].forEachFeatureAtCoordinate(e,s,a,i,S,j),W)break e}return W}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(s),m=Zu(this.renderedPixelToCoordinateTransform_,e.slice()),v=h.getTileCoordForCoordAndResolution(m,c).toString(),x=this.renderedTiles.find(H=>H.tileCoord.toString()===v&&H.getState()===ai.LOADED);if(!x||x.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!zg(a,h.getTileCoordExtent(x.tileCoord))&&$P(m,s);const S=$r(r),B=h.getTileCoordExtent(x.wrappedTileCoord),R=g1(B),F=[(m[0]-R[0])/c,(R[1]-m[1])/c],j=x.getSourceTiles().reduce((H,$)=>H.concat($.getFeatures()),[]);let W=x.hitDetectionImageData[S];if(!W){const H=YA(h.getTileSize(h.getZForResolution(c,o.zDirection))),$=this.renderedRotation_,N=[this.getRenderTransform(h.getTileCoordCenter(x.wrappedTileCoord),c,0,vf,H[0]*vf,H[1]*vf,0)];W=Qee(H,N,j,r.getStyleFunction(),h.getTileCoordExtent(x.wrappedTileCoord),x.getReplayState(r).renderedResolution,$),x.hitDetectionImageData[S]=W}t(qee(F,j,W))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==ai.LOADED)return;const h=c.getSourceTiles();for(let m=0,v=h.length;m<v;++m){const x=h[m],S=x.getKey();if(S in a)continue;a[S]=!0;const B=x.tileCoord;if(Jl(e,o.getTileCoordExtent(B))){const R=x.getFeatures();if(R)for(let F=0,j=R.length;F<j;++F){const W=R[F],H=W.getGeometry();Jl(e,H.getExtent())&&t.push(W)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[dl.ANIMATING]||o[dl.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?e.declutter?.[c]:void 0,m=$r(this.getLayer()),v=this.renderedTiles;for(let x=0,S=v.length;x<S;++x){const B=v[x],R=B.executorGroups[m];if(R)for(let F=R.length-1;F>=0;--F)R[F].execute(this.context,a,this.getTileRenderTransform(B,e),e.viewState.rotation,s,fS,h)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=$r(this.getLayer()),r=t.reduce((c,h,m)=>(h.executorGroups[i].forEach(v=>c.push({executorGroup:v,index:m})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,h=r.length;c<h;++c){const m=r[c].executorGroup.getDeferredZIndexContexts();for(const v in m)s[v]=!0}Object.keys(s).map(Number).sort(Xg).forEach(c=>{o.forEach((h,m)=>{h[c]&&(h[c].forEach(v=>{const{executorGroup:x,index:S}=r[m],B=x.getRenderedContext(),R=B.globalAlpha;B.globalAlpha=this.renderedOpacity_;const F=this.tileClipContexts_[S];F&&F.draw(B),v.draw(B),F&&B.restore(),B.globalAlpha=R,v.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,h=Math.round(c[0]*i),m=Math.round(c[1]*i),x=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),S=e.tileCoord,B=x.getTileCoordExtent(e.wrappedTileCoord),R=x.getTileCoordExtent(S,this.tempExtent)[0]-B[0];return eU(ZO(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,h,m,R))}postRender(e,t){const i=t.viewHints,r=!(i[dl.ANIMATING]||i[dl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),h=c?tN[s].filter(N=>!fS.includes(N)):tN[s],m=t.viewState,v=m.rotation,x=o.getSource(),B=x.getTileGridForProjection(m.projection).getZForResolution(m.resolution,x.zDirection),R=this.renderedTiles,F=[],j=[],W=[],H=$r(o);let $=!0;for(let N=R.length-1;N>=0;--N){const Y=R[N];$=$&&!Y.getReplayState(o).dirty;const z=Y.executorGroups[H].filter(Te=>Te.hasExecutors(h));if(z.length===0)continue;const ne=this.getTileRenderTransform(Y,t),ae=Y.tileCoord[0];let ve=!1;const pe=z[0].getClipCoords(ne);let be=e,Ee;if(pe){Ee=new BU,be=Ee.getContext();for(let Te=0,je=F.length;Te<je;++Te)if(B!==ae&&ae<j[Te]){const Re=F[Te];Jl([pe[0],pe[3],pe[4],pe[7]],[Re[0],Re[3],Re[4],Re[7]])&&(ve||(be.save(),ve=!0),be.beginPath(),be.moveTo(pe[0],pe[1]),be.lineTo(pe[2],pe[3]),be.lineTo(pe[4],pe[5]),be.lineTo(pe[6],pe[7]),be.moveTo(Re[6],Re[7]),be.lineTo(Re[4],Re[5]),be.lineTo(Re[2],Re[3]),be.lineTo(Re[0],Re[1]),be.clip())}F.push(pe),j.push(ae)}for(let Te=0,je=z.length;Te<je;++Te)z[Te].execute(e,[e.canvas.width,e.canvas.height],ne,v,r,h,t.declutter?.[c]);ve&&(be===e?be.restore():W[N]=Ee)}e.globalAlpha=a,this.ready=$,this.tileClipContexts_=W,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)a=hS(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=hS(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[$r(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],h=i.getSource();let m=t.pixelRatio;const x=t.viewState.projection,S=h.getTileGridForProjection(x),B=S.getResolution(e.tileCoord[0]),R=t.pixelRatio/e.wantedResolution*B,F=S.getResolution(c),j=e.getContext();m=Math.round(Math.max(m,R/m));const W=h.getTilePixelSize(c,m,x);j.canvas.width=W[0],j.canvas.height=W[1];const H=m/R;if(H!==1){const z=tj(this.tmpTransform_);ZO(z,H,H),j.setTransform.apply(j,z)}const $=S.getTileCoordExtent(a,this.tempExtent),N=R/F,Y=tj(this.tmpTransform_);ZO(Y,N,-N),_1e(Y,-$[0],-$[3]);for(let z=0,ne=s.length;z<ne;++z)s[z].execute(j,[j.canvas.width*H,j.canvas.height*H],Y,0,!0,QCe[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class p3 extends EU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";xs(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new qCe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Ny.PRELOAD)}getUseInterimTilesOnError(){return this.get(Ny.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Ny.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Ny.USE_INTERIM_TILES_ON_ERROR,e)}}function gR(n){return Array.isArray(n)?Math.min(...n):n}class YCe extends MU{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const m=h?ym(i,h):i,v=Sf(m),x=mR(e,t,v,r),S=ste,B=new ote(e,t,m,c,x*S,r),R=B.calculateSourceExtent(),F=Jb(R)?null:s(R,x,o),j=F?zi.IDLE:zi.EMPTY,W=F?F.getPixelRatio():1;super(i,r,W,j),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=B,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=F,this.sourcePixelRatio_=W,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==zi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==zi.LOADED){const t=is(this.targetExtent_)/this.targetResolution_,i=ec(this.targetExtent_)/this.targetResolution_;this.canvas_=rte(t,i,this.sourcePixelRatio_,gR(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==zi.IDLE){this.state=zi.LOADING,this.changed();const e=this.sourceImage_.getState();e==zi.LOADED||e==zi.ERROR?this.reproject_():(this.sourceListenerKey_=$o(this.sourceImage_,Ir.CHANGE,t=>{const i=this.sourceImage_.getState();(i==zi.LOADED||i==zi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Oa(this.sourceListenerKey_),this.sourceListenerKey_=null}}const AM=4,SB={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class $Ce extends Sm{constructor(e,t){super(e),this.image=t}}class cte extends jx{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=FE(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||Xy(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Xy(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&h1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new YCe(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=VCe(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&zg(this.wantedExtent_,o)||zg(this.image.getExtent(),o))&&(this.wantedResolution_&&gR(this.wantedResolution_)===s||gR(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new MU(o,s,i,this.loader),this.image.addEventListener(Ir.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case zi.LOADING:this.loading=!0,i=SB.IMAGELOADSTART;break;case zi.LOADED:this.loading=!1,i=SB.IMAGELOADEND;break;case zi.ERROR:this.loading=!1,i=SB.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new $Ce(i,t))}}function VCe(n,e,t,i){const r=e/t,o=Sf(n),s=Ky(is(n)/r,AM),a=Ky(ec(n)/r,AM),c=Ky((i-1)*s/2,AM),h=s+2*c,m=Ky((i-1)*a/2,AM),v=a+2*m;return tS(o,r,0,[h,v])}const QC=[0,0,0],My=5;class a6{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,xs(y0e(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,xs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=g1(i)),xs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,xs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:fU,xs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new TU(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,h=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=NC(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,h,i),t(h,o))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return NC(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return NC(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),h=Math.floor(o*c),m=Math.floor(s*c);if(t<r)return NC(h,h,m,m,i);const v=Math.floor(c*(o+1))-1,x=Math.floor(c*(s+1))-1;return NC(h,v,m,x,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,QC);const r=QC[1],o=QC[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,QC);const s=QC[1],a=QC[2];return NC(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=YA(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=YA(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,h=a+o[1]*r;return A1(s,a,c,h,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),h=YA(this.getTileSize(s),this.tmpSize_);let m=a*(e-c[0])/i/h[0],v=a*(c[1]-t)/i/h[1];return r?(m=Ky(m,My)-1,v=Ky(v,My)-1):(m=X5(m,My),v=X5(v,My)),gS(s,m,v,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=YA(this.getTileSize(i),this.tmpSize_);let h=(e-s[0])/a/c[0],m=(s[1]-t)/a/c[1];return r?(h=Ky(h,My)-1,m=Ky(m,My)-1):(h=X5(h,My),m=X5(m,My)),gS(i,h,m,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=FE(this.resolutions_,e,t||0);return kl(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return see(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function Ate(n){let e=n.getDefaultTileGrid();return e||(e=XCe(n),n.setDefaultTileGrid(e)),e}function HCe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=l6(t);if(!zb(o,r)){const s=is(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function ZCe(n,e,t,i){i=i!==void 0?i:"top-left";const r=hte(n,e,t);return new a6({extent:n,origin:R0e(n,i),resolutions:r,tileSize:t})}function KU(n){const e=n||{},t=e.extent||Hs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:hte(t,e.maxZoom,e.tileSize,e.maxResolution)};return new a6(i)}function hte(n,e,t,i){e=e!==void 0?e:cee,t=YA(t!==void 0?t:fU);const r=ec(n),o=is(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function XCe(n,e,t,i){const r=l6(n);return ZCe(r,e,t,i)}function l6(n){n=Hs(n);let e=n.getExtent();if(!e){const t=180*iv.degrees/n.getMetersPerUnit();e=A1(-t,-t,t,t)}return e}class dte extends jx{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&YA(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||$r(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o){return Lr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Ate(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=YA(r.getTileSize(e),this.tmpSize);return o==1?s:Nye(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=HCe(r,e,i)),NCe(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class JCe extends Sm{constructor(e,t){super(e),this.tile=t}}function fte(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const x=new Array(a);for(let B=0;B<a;++B)x[B]=new ImageData(new Uint8ClampedArray(t[B]),o,s);return n(x,i).data.buffer}const h=new Uint8ClampedArray(c),m=new Array(a),v=new Array(a);for(let x=0;x<a;++x)m[x]=new Uint8ClampedArray(t[x]),v[x]=[0,0,0,0];for(let x=0;x<c;x+=4){for(let B=0;B<a;++B){const R=m[B];v[B][0]=R[x],v[B][1]=R[x+1],v[B][2]=R[x+2],v[B][3]=R[x+3]}const S=n(v,i);h[x]=S[0],h[x+1]=S[1],h[x+2]=S[2],h[x+3]=S[3]}return h.buffer}}function e_e(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+fte.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function t_e(n,e){const t=fte(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let n_e=class extends n5{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=e_e(e,this.onWorkerMessage_.bind(this,r));else i[0]=t_e(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const h=c*a,m=[];for(let v=0,x=r.length;v<x;++v)m.push(r[v].slice(h,h+a));this.workers_[c].postMessage({buffers:m,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},m)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,h=a*s;i.set(new Uint8ClampedArray(c),h),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const nN={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class iN extends Sm{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class pte extends cte{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=o_e(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(Ir.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new RJ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ed(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:r_e(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ed(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:$r(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof jx?a:a.getSource();if(!c)continue;const h=c.getAttributions()?.(i);typeof h=="string"?r.push(h):h!==void 0&&r.push(...h)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new n_e({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Sf(e);r.size[0]=Math.ceil(is(e)/t),r.size[1]=Math.ceil(ec(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!h1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=i_e(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new iN(nN.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!h1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(is(o)/s),h=Math.round(ec(o)/s);a=Tl(c,h),this.renderedImageCanvas_=new wbe(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new iN(nN.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}pte.prototype.dispose;let tb=null;function i_e(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!tb)tb=Tl(i,r,void 0,{willReadFrequently:!0});else{const a=tb.canvas;a.width!==i||a.height!==r?tb=Tl(i,r,void 0,{willReadFrequently:!0}):tb.clearRect(0,0,i,r)}return tb.drawImage(s,0,0,i,r),tb.getImageData(0,0,i,r)}function r_e(n){return n.map(function(e){return e.getLayerState()})}function o_e(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=s_e(n[i]);return t}function s_e(n){let e;return n instanceof jx?n instanceof dte?e=new ute({source:n}):n instanceof cte&&(e=new ite({source:n})):e=n,e}function a_e(n,e,t,i){const r=document.createElement("script"),o="olc_"+$r(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const l_e=/\{z\}/g,u_e=/\{x\}/g,c_e=/\{y\}/g,A_e=/\{-y\}/g;function h_e(n,e,t,i,r){return n.replace(l_e,e.toString()).replace(u_e,t.toString()).replace(c_e,i.toString()).replace(A_e,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function d_e(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function f_e(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return h_e(n,s,t[1],t[2],o)})}function mte(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=f_e(n[r],e);return p_e(i)}function p_e(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=zCe(e),o=kb(r,n.length);return n[o](e,t,i)})}const EB={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class u6 extends dte{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===u6.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=$r(t),r=t.getState();let o;r==ai.LOADING?(this.tileLoadingKeys_[i]=!0,o=EB.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==ai.ERROR?EB.TILELOADERROR:r==ai.LOADED?EB.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new JCe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=d_e(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(mte(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class m_e extends u6{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:g_e,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Yee,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Xy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Xy(t,e)))return this.tileGrid;const i=$r(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Ate(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),h=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(a,h!==void 0?ai.IDLE:ai.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=s,m.addEventListener(Ir.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,r,o){const s=this.getProjection();if(!s||!o||Xy(s,o))return this.getTileInternal(e,t,i,r,s||o);const a=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),v=this.getTileCoordForTileUrlFunction(a,o),x=new ate(s,h,o,m,a,v,this.getTilePixelRatio(r),this.getGutter(),(S,B,R,F)=>this.getTileInternal(S,B,R,F,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=c,x}getTileInternal(e,t,i,r,o){const s=this.getKey();return this.createTile_(e,t,i,r,o,s)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Hs(e);if(i){const r=$r(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function g_e(n,e){n.getImage().src=e}class gte extends m_e{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Hs("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)a_e(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Hs("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const h=a5(t,i);r=U0e(e.bounds,h)}const o=l6(i),s=e.minzoom||0,a=e.maxzoom||22,c=KU({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=mte(e.tiles,c),e.attribution&&!this.getAttributions()){const h=r!==void 0?r:o;this.setAttributions(function(m){return Jl(h,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class FU extends u6{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||l6(t),r=e.tileGrid||KU({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:yte,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:$ee,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===ai.IDLE){i.setState(ai.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(r),a=r[0],c=o.getResolution(a);Zy(s,-c,s);const h=this.tileGrid,m=h.getExtent();m&&ym(s,m,s);const v=h.getZForResolution(c,this.zDirection);h.forEachTileCoord(s,v,x=>{const S=this.tileUrlFunction(x,e,t);this.sourceTiles_[S]||(this.sourceTiles_[S]=new this.tileClass(x,S?ai.IDLE:ai.EMPTY,S,this.format_,this.tileLoadFunction));const B=this.sourceTiles_[S];i.sourceTiles.push(B),this.tileKeysBySourceTileUrl_[S]||(this.tileKeysBySourceTileUrl_[S]=[]),this.tileKeysBySourceTileUrl_[S].push(i.getKey());const R=B.getState();if(R<ai.LOADED){const F=j=>{this.handleTileChange(j);const W=B.getState();if(W===ai.LOADED||W===ai.ERROR){const H=B.getKey();H in i.errorTileKeys?B.getState()===ai.LOADED&&delete i.errorTileKeys[H]:i.loadingSourceTiles--,W===ai.ERROR?i.errorTileKeys[H]=!0:B.removeEventListener(Ir.CHANGE,F),i.loadingSourceTiles===0&&i.setState(nv(i.errorTileKeys)?ai.LOADED:ai.ERROR)}};B.addEventListener(Ir.CHANGE,F),i.loadingSourceTiles++}R===ai.IDLE&&(B.extent=h.getTileCoordExtent(x),B.projection=t,B.resolution=h.getResolution(x[0]),B.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(x=>x.getState()===ai.ERROR)?ai.ERROR:ai.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(a&&c){const x=h.getTileCoordExtent(a);Zy(x,-h.getResolution(e),x),Jl(c,x)||(a=null)}let m=!0;if(a!==null){const x=this.tileGrid,S=h.getResolution(e),B=x.getZForResolution(S,1),R=h.getTileCoordExtent(a);Zy(R,-S,R),x.forEachTileCoord(R,B,F=>{m=m&&!this.tileUrlFunction(F,r,o)})}const v=new Obe(s,m?ai.EMPTY:ai.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return v.key=this.getKey(),v}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();xs(r===null||Xy(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(m,v){return o.getOrigin(v)}),c=s.map(function(m,v){return o.getTileSize(v)}),h=cee+1;for(let m=s.length;m<h;++m)s.push(s[m-1]/2),a.push(a[m-1]),c.push(c[m-1]);i=new a6({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=YA(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function yte(n,e){n.setLoader(function(t,i,r){Nee(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function y_e(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,h=r-1,m=[0,0,0,0],v=2*Math.PI,x=Math.PI/2,S=Math.PI*e.sunEl/180,B=Math.PI*e.sunAz/180,R=Math.cos(S),F=Math.sin(S),j=e.highlightColor,W=e.shadowColor,H=e.accentColor,$=e.encoding;let N,Y,z,ne,ae,ve,pe,be,Ee,Te,je,Re,qe,nt,ht,ke,Oe,ze,we,At,it,Ct;function It(Ke,Ie="mapbox"){if(Ie==="mapbox")return(Ke[0]*256*256+Ke[1]*256+Ke[2])*.1-1e4;if(Ie==="terrarium")return Ke[0]*256+Ke[1]+Ke[2]/256-32768}for(Y=0;Y<=h;++Y)for(ae=Y===0?0:Y-1,ve=Y===h?h:Y+1,N=0;N<=c;++N)z=N===0?0:N-1,ne=N===c?c:N+1,pe=(Y*i+z)*4,m[0]=o[pe],m[1]=o[pe+1],m[2]=o[pe+2],m[3]=o[pe+3],be=e.vert*It(m,$),pe=(Y*i+ne)*4,m[0]=o[pe],m[1]=o[pe+1],m[2]=o[pe+2],m[3]=o[pe+3],Ee=e.vert*It(m,$),Te=(Ee-be)/a,pe=(ae*i+N)*4,m[0]=o[pe],m[1]=o[pe+1],m[2]=o[pe+2],m[3]=o[pe+3],be=e.vert*It(m,$),pe=(ve*i+N)*4,m[0]=o[pe],m[1]=o[pe+1],m[2]=o[pe+2],m[3]=o[pe+3],Ee=e.vert*It(m,$),je=(Ee-be)/a,qe=Math.atan2(je,-Te),qe<0?qe=x-qe:qe>x?qe=v-qe+x:qe=x-qe,Re=Math.atan(Math.sqrt(Te*Te+je*je)),Ct=F*Math.cos(Re)+R*Math.sin(Re)*Math.cos(B-qe),nt=Math.cos(Re),ht=255*Ct,we=Math.min(Math.max(2*e.sunEl,0),1),At=1.875-e.opacity*1.75,it=e.opacity!==.5?x*((Math.pow(At,Re)-1)/(Math.pow(At,x)-1)):Re,Oe={r:(1-nt)*H.r*we*255,g:(1-nt)*H.g*we*255,b:(1-nt)*H.b*we*255,a:(1-nt)*H.a*we*255},ke=Math.abs(((qe+B)/Math.PI+.5)%2-1),ze={r:(j.r*(1-ke)+W.r*ke)*ht,g:(j.g*(1-ke)+W.g*ke)*ht,b:(j.b*(1-ke)+W.b*ke)*ht,a:(j.a*(1-ke)+W.a*ke)*ht},pe=(Y*i+N)*4,s[pe]=Oe.r*(1-ke)+ze.r,s[pe+1]=Oe.g*(1-ke)+ze.g,s[pe+2]=Oe.b*(1-ke)+ze.b,s[pe+3]=o[pe+3]*e.opacity*we*Math.sin(it);return new ImageData(s,i,r)}function v_e(n,e=512){return n.getExtent()?KU({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():e0}function vte(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function b_e(n,e,t="",i={},r=void 0){let o,s,a,c,h=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(h=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:pS(o,a.accessToken),a=vte(o,a)),new Promise(function(m,v){Zee(e,a).then(function(x){if(x.version!=8)return v(new Error("glStyle version 8 required."));if(!(n instanceof kU||n instanceof p3))return v(new Error("Can only apply to VectorLayer or VectorTileLayer"));const S=n instanceof p3?"vector":"geojson";if(c?Array.isArray(c)?s=x.layers.find(function($){return $.id===c[0]}).source:s=c:(s=x.layers.find(function($){return $.source&&x.sources[$.source].type===S}).source,c=s),!s)return v(new Error(`No ${S} source found in the glStyle.`));function B(){if(!h)return Promise.resolve();if(n instanceof p3)return _te(x.sources[s],o,a).then(function(z){const ne=n.getSource();ne?z!==ne&&(ne.setTileUrlFunction(z.getTileUrlFunction()),typeof ne.setUrls=="function"&&typeof z.getUrls=="function"&&ne.setUrls(z.getUrls()),ne.format_||(ne.format_=z.format_),ne.getAttributions()||ne.setAttributions(z.getAttributions()),ne.getTileLoadFunction()===yte&&ne.setTileLoadFunction(z.getTileLoadFunction()),Xy(ne.getProjection(),z.getProjection())&&(ne.tileGrid=z.getTileGrid())):n.setSource(z);const ae=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ae.getMinZoom()>0&&n.setMaxResolution(Y2(Math.max(0,ae.getMinZoom()-1e-12),ae.getResolutions()))});const $=x.sources[s];let N=n.getSource();(!N||N.get("mapbox-source")!==$)&&(N=wte($,o,a));const Y=n.getSource();return Y?N!==Y&&(Y.getAttributions()||Y.setAttributions(N.getAttributions()),Y.format_||(Y.format_=N.getFormat()),Y.url_=N.getUrl()):n.setSource(N),Promise.resolve()}let R,F;const j={},W={};function H(){if(!F&&(!x.sprite||j)){if(a.projection&&!r){const z=Hs(a.projection).getUnits();z!=="m"&&(r=e0.map(ne=>ne/iv[z]))}let $;const N=n.getSource();N instanceof FU&&N.format_ instanceof nte&&($=N.format_.layerName_),F=Wbe(n,x,c,r,j,W,(Y,z=a.webfonts)=>Lbe(Y,z),a.getImage,$),n.getStyle()?B().then(m).catch(v):v(new Error(`Nothing to show for source [${s}]`))}else F?(n.setStyle(F),B().then(m).catch(v)):v(new Error("Something went wrong trying to apply style."))}if(x.sprite){const $=Bbe(x.sprite,a.accessToken,o||location.href);R=window.devicePixelRatio>=1.5?.5:1;const N=R==.5?"@2x":"";Promise.all($.map(function(Y){const z=new URL(Y.url);let ne=z.origin+z.pathname+N+".json"+z.search;return new Promise(function(ae,ve){yx("Sprite",ne,a).then(ae).catch(function(pe){ne=z.origin+z.pathname+".json"+z.search,yx("Sprite",ne,a).then(ae).catch(ve)})}).then(function(ae){ae===void 0&&v(new Error("No sprites found."));let ve;if(ve=z.origin+z.pathname+N+".png"+z.search,a.transformRequest){const pe=a.transformRequest(ve,"SpriteImage")||ve;(pe instanceof Request||pe instanceof Promise)&&(ve=pe)}W[Y.id]=ve;for(const pe in ae){const be=Y.id=="default"?pe:`${Y.id}:${pe}`;j[be]=ae[pe]}}).catch(function(ae){v(new Error(`Sprites cannot be loaded: ${ne}: ${ae.message}`))})})).then(H).catch(v)}else H()}).catch(v)})}function bte(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function C_e(n,e){const t=n.bounds;if(t){const i=J9([t[0],t[1]],e),r=J9([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Hs(e).getExtent()}function Cte(n,e,t){const i=new gte({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=Hs(t.projection||"EPSG:3857"),a=C_e(r,s),c=s.getExtent(),h=r.minzoom||0,m=r.maxzoom||22,v={attributions:i.getAttributions(),projection:s,tileGrid:new a6({origin:c?g1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:h,resolutions:v_e(s,e.tileSize).slice(0,m+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?v.urls=r.tiles:v.url=r.tiles,v}function __e(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,Mf.zoom=PU(e,t.resolutions||e0),Mf.distanceFromCenter=0;let a;const c=$i(r,"paint","background-color",dm,i);return s["background-opacity"]!==void 0&&(a=$i(r,"paint","background-opacity",dm,i)),o.visibility=="none"?void 0:Oy(c,a)}function x_e(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new zx({source:new jx({}),render(r){const o=__e(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function _te(n,e,t){return new Promise(function(i,r){Xee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=Cte(n,o,t);a.tileLoadFunction=s,a.format=new nte({layerName:"mvt:layer"});const c=new FU(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function M_e(n,e,t){const i=new p3({declutter:!0,visible:!1});return _te(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function xte(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function w_e(n,e,t){return new Promise(function(i,r){Xee(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new gte({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=Cte(n,o,t).tileGrid,t.projection&&(a.projection=Hs(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(h,m,v){const x=xte(v);let S=c(h,m,v);if(S.indexOf(x)!=-1){const B=a.getTileGrid().getTileCoordExtent(h);S=S.replace(x,B.toString())}return S}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function Mte(n,e,t){const i=new ute;return w_e(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function S_e(n,e,t){const i=Mte(n,e,t);return new ite({source:new pte({operationType:"image",operation:y_e,sources:[i]})})}function wte(n,e,t){const i=t.projection?new Yj({dataProjection:t.projection}):new Yj,r=n.data,o={};if(typeof r=="string"){const[a]=Aw(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const h=(v,x,S)=>{const B=xte(S);return a.replace(B,`${v.join(",")}`)},m=new cw({attributions:n.attribution,format:i,loader:(v,x,S,B,R)=>{const F=typeof h=="function"?h(v,x,S):h;yx("GeoJSON",F,t).then(j=>{const W=m.getFormat().readFeatures(j,{featureProjection:S});m.addFeatures(W),B(W)}).catch(j=>{m.removeLoadedExtent(v),R()})},strategy:lbe});return m.set("mapbox-source",n),m}const c=new cw({attributions:n.attribution,format:i,url:a,loader:(h,m,v,x,S)=>{yx("GeoJSON",a,t).then(B=>{const R=c.getFormat().readFeatures(B,{featureProjection:v});c.addFeatures(R),x(R)}).catch(B=>{c.removeLoadedExtent(h),S()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new cw(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function E_e(n,e,t){return new kU({declutter:!0,source:wte(n,e,t),visible:!1})}function O_e(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],B_e(n,e,i,t))}}function B_e(n,e,t,i){Mf.zoom=t,Mf.distanceFromCenter=0;const r=$i(n,"paint","raster-opacity",dm,i);e.setOpacity(r)}function I_e(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=oJ(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function k_e(n,e,t,i){const r=Hee(n),o=n.layers,s=t.type,a=t.source||bte(o,t.ref),c=n.sources[a];let h;if(s=="background")h=x_e(t,i,r);else if(c.type=="vector")h=M_e(c,e,i);else if(c.type=="raster")h=Mte(c,e,i),h.setVisible(t.layout?t.layout.visibility!=="none":!0),h.on("prerender",O_e(t,h,r));else if(c.type=="geojson")h=E_e(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const v=S_e(c,e,i);h=v,v.getSource().on("beforeoperations",function(x){const S=x.data;S.resolution=X9(i.projection||"EPSG:3857",x.resolution,Sf(x.extent),"m"),Mf.zoom=PU(x.resolution,i.resolutions||e0),Mf.distanceFromCenter=0,S.encoding=c.encoding,S.vert=5*$i(t,"paint","hillshade-exaggeration",dm,r),S.sunAz=$i(t,"paint","hillshade-illumination-direction",dm,r),S.sunEl=35,S.opacity=.3,S.highlightColor=$i(t,"paint","hillshade-highlight-color",dm,r),S.shadowColor=$i(t,"paint","hillshade-shadow-color",dm,r),S.accentColor=$i(t,"paint","hillshade-accent-color",dm,r)}),h.setVisible(t.layout?t.layout.visibility!=="none":!0)}const m=a;return h&&h.set("mapbox-source",m),h}function rN(n,e,t,i){const r=[];let o=null;if(e instanceof i6){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const v=i.projection?Hs(i.projection):o.getProjection();o=new Am(Object.assign(o.getProperties(),{maxResolution:e0[0]/iv[v.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(J9(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(e0[0]/iv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,h,m;for(let v=0,x=s.length;v<x;++v){const S=s[v],B=S.type;if(B=="heatmap"){console.debug(`layers[${v}].type "${B}" not supported`);continue}else m=S.source||bte(s,S.ref),(!m||m!=h)&&(a.length&&(r.push(oN(c,a,n,t,e,i)),a=[]),c=k_e(n,t,S,i),c instanceof kU||c instanceof p3||(a=[]),h=c.get("mapbox-source")),a.push(S.id)}return r.push(oN(c,a,n,t,e,i)),Promise.all(r)}function T_e(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new i6({target:n}):r=n,typeof e=="string"){const o=e.startsWith("data:")?location.href:pS(e,t.accessToken);t=vte(o,t),i=new Promise(function(s,a){Zee(e,t).then(function(c){rN(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){rN(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:pS(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function oN(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let h=0,m=c.length;h<m;++h){const v=c[h];e.indexOf(v.id)!==-1&&(s=Math.min("minzoom"in v?v.minzoom:0,s),a=Math.max("maxzoom"in v?v.maxzoom:24,a))}return new Promise(function(h,m){const v=function(){const S=n.getSource();if(!S||S.getState()==="error"){m(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in S){const B=S.getTileGrid();if(B){const R=B.getMinZoom();(s>0||R>0)&&n.setMaxResolution(Math.min(Y2(Math.max(0,s-1e-12),e0),Y2(Math.max(0,R-1e-12),B.getResolutions()))),a<24&&n.setMinResolution(Y2(a,e0))}}else s>0&&n.setMaxResolution(Y2(Math.max(0,s-1e-12),e0));S instanceof cw||S instanceof FU?b_e(n,t,e,Object.assign({styleUrl:i},o)).then(function(){I_e(n,r),h()}).catch(m):h()};n.set("mapbox-layers",e);const x=r.getLayers();x.getArray().indexOf(n)===-1&&x.push(n),n.getSource()?v():n.once("change:source",v)})}function Ii(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ii=function(){return s},s}Ii();function sN(n){return Ii().f[0]++,Ii().s[0]++,Ii().b[1][0]++,!n||(Ii().b[1][1]++,n.length<2)?(Ii().b[0][0]++,Ii().s[1]++,null):(Ii().b[0][1]++,Ii().s[2]++,te.jsx("span",{className:"maputnik-coords",children:n.map(e=>(Ii().f[1]++,Ii().s[3]++,String(e).padStart(7,""))).join(", ")}))}class R_e extends On.Component{static defaultProps=(Ii().s[4]++,{onMapLoaded:()=>{Ii().f[2]++},onDataChange:()=>{Ii().f[3]++},onLayerSelect:()=>{Ii().f[4]++}});updateStyle;map;container=(Ii().s[5]++,null);overlay;popupContainer=(Ii().s[6]++,null);constructor(e){Ii().f[5]++,Ii().s[7]++,super(e),Ii().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},Ii().s[9]++,this.updateStyle=q4.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(Ii().f[6]++,Ii().s[10]++,this.map)Ii().b[2][1]++;else{Ii().b[2][0]++,Ii().s[11]++;return}Ii().s[12]++,this.map.getLayers().clear(),Ii().s[13]++,T_e(this.map,e)}componentDidUpdate(e){Ii().f[7]++,Ii().s[14]++,this.props.mapStyle!==e.mapStyle?(Ii().b[3][0]++,Ii().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):Ii().b[3][1]++}componentDidMount(){Ii().f[8]++,Ii().s[16]++,this.overlay=new Ebe({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(Ii().s[17]++,new i6({target:this.container,overlays:[this.overlay],view:new Am({zoom:1,center:[180,-90]})}));Ii().s[18]++,e.on("pointermove",i=>{Ii().f[9]++;const r=(Ii().s[19]++,VO(i.coordinate));Ii().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),Ii().s[21]++;const t=()=>{Ii().f[10]++;const i=(Ii().s[22]++,e.getView().getZoom()),r=(Ii().s[23]++,VO(e.getView().getCenter()));Ii().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};Ii().s[25]++,t(),Ii().s[26]++,e.on("moveend",t),Ii().s[27]++,e.on("postrender",i=>{Ii().f[11]++;const r=(Ii().s[28]++,VO(e.getView().getCenter()));Ii().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),Ii().s[30]++,this.map=e,Ii().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(Ii().s[32]++,e=>{Ii().f[12]++,Ii().s[33]++,e.target.blur(),Ii().s[34]++,this.overlay.setPosition(void 0)});render(){Ii().f[13]++;const e=(Ii().s[35]++,this.props.t);return Ii().s[36]++,te.jsxs("div",{className:"maputnik-ol-container",children:[te.jsxs("div",{ref:t=>{Ii().f[14]++,Ii().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[te.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),te.jsx(eJ,{features:(Ii().b[4][0]++,this.state.selectedFeatures||(Ii().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),te.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(Ii().b[5][0]++,this.props.debugToolbox&&(Ii().b[5][1]++,te.jsxs("div",{className:"maputnik-ol-debug",children:[te.jsxs("div",{children:[te.jsxs("label",{children:[e("cursor:")," "]}),te.jsx("span",{children:sN(this.state.cursor)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("center:")," "]}),te.jsx("span",{children:sN(this.state.center)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("rotation:")," "]}),te.jsx("span",{children:this.state.rotation})]})]}))),te.jsx("div",{className:"maputnik-ol",ref:t=>{Ii().f[15]++,Ii().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const D_e=(Ii().s[39]++,No()(R_e));var OB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var aN;function P_e(){return aN||(aN=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(OB)),OB.exports}var U_e=P_e();const c0=eu(U_e),L_e=/("(?:[^\\"]|\\.)*")|[:,]/g;function K_e(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const v=h.replace(L_e,(x,S)=>S||`${x} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const v=a+t,x=[];let S=0,B,R;if(Array.isArray(s)){B="[",R="]";const{length:F}=s;for(;S<F;S++)x.push(o(s[S],v,S===F-1?0:1)||"null")}else{B="{",R="}";const F=Object.keys(s),{length:j}=F;for(;S<j;S++){const W=F[S],H=`${JSON.stringify(W)}: `,$=o(s[W],v,H.length+(S===j-1?0:1));$!==void 0&&x.push(H+$)}}if(x.length>0)return[B,t+x.join(`,
${v}`),R].join(`
${a}`)}return h})(n,"",0)}let yR=[],Ste=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Ste:yR).push(t=t+n[e])})();function F_e(n){if(n<768)return!1;for(let e=0,t=yR.length;;){let i=e+t>>1;if(n<yR[i])t=i;else if(n>=Ste[i])e=i+1;else return!0;if(e==t)return!1}}function lN(n){return n>=127462&&n<=127487}const uN=8205;function z_e(n,e,t=!0,i=!0){return(t?Ete:j_e)(n,e,i)}function Ete(n,e,t){if(e==n.length)return e;e&&Ote(n.charCodeAt(e))&&Bte(n.charCodeAt(e-1))&&e--;let i=BB(n,e);for(e+=cN(i);e<n.length;){let r=BB(n,e);if(i==uN||r==uN||t&&F_e(r))e+=cN(r),i=r;else if(lN(r)){let o=0,s=e-2;for(;s>=0&&lN(BB(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function j_e(n,e,t){for(;e>0;){let i=Ete(n,e-2,t);if(i<e)return i;e--}return 0}function BB(n,e){let t=n.charCodeAt(e);if(!Bte(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Ote(i)?(t-55296<<10)+(i-56320)+65536:t}function Ote(n){return n>=56320&&n<57344}function Bte(n){return n>=55296&&n<56320}function cN(n){return n<65536?1:2}class ps{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=vx(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Dg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=vx(this,e,t);let i=[];return this.decompose(e,t,i,0),Dg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new m3(this),o=new m3(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new m3(this,e)}iterRange(e,t=this.length){return new Ite(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new kte(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ps.empty:e.length<=32?new Su(e):Dg.from(Su.split(e,[]))}}class Su extends ps{constructor(e,t=N_e(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new G_e(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new Su(AN(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=hw(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new Su(a,s.length+o.length));else{let c=a.length>>1;i.push(new Su(a.slice(0,c)),new Su(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Su))return super.replace(e,t,i);[e,t]=vx(this,e,t);let r=hw(this.text,hw(i.text,AN(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new Su(r,o):Dg.from(Su.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=vx(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new Su(i,r)),i=[],r=-1);return r>-1&&t.push(new Su(i,r)),t}}class Dg extends ps{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let h=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!h?i.push(a):a.decompose(e-s,t-s,i,h)}s=c+1}}replace(e,t,i){if([e,t]=vx(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),h=this.lines-s.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let m=this.children.slice();return m[r]=c,new Dg(m,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=vx(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Dg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let S of e)i+=S.lines;if(i<32){let S=[];for(let B of e)B.flatten(S);return new Su(S,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,h=-1,m=[];function v(S){let B;if(S.lines>o&&S instanceof Dg)for(let R of S.children)v(R);else S.lines>s&&(c>s||!c)?(x(),a.push(S)):S instanceof Su&&c&&(B=m[m.length-1])instanceof Su&&S.lines+B.lines<=32?(c+=S.lines,h+=S.length+1,m[m.length-1]=new Su(B.text.concat(S.text),B.length+1+S.length)):(c+S.lines>r&&x(),c+=S.lines,h+=S.length+1,m.push(S))}function x(){c!=0&&(a.push(m.length==1?m[0]:Dg.from(m,h)),h=-1,c=m.length=0)}for(let S of e)v(S);return x(),a.length==1?a[0]:new Dg(a,t)}}ps.empty=new Su([""],0);function N_e(n){let e=-1;for(let t of n)e+=t.length+1;return e}function hw(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function AN(n,e,t){return hw(n,[""],e,t)}class m3{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Su?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof Su?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Su){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof Su?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Ite{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new m3(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class kte{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ps.prototype[Symbol.iterator]=function(){return this.iter()},m3.prototype[Symbol.iterator]=Ite.prototype[Symbol.iterator]=kte.prototype[Symbol.iterator]=function(){return this});class G_e{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function vx(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function mA(n,e,t=!0,i=!0){return z_e(n,e,t,i)}function W_e(n){return n>=56320&&n<57344}function Q_e(n){return n>=55296&&n<56320}function xd(n,e){let t=n.charCodeAt(e);if(!Q_e(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return W_e(i)?(t-55296<<10)+(i-56320)+65536:t}function zU(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Pg(n){return n<65536?1:2}const vR=/\r\n?|\n/;var Bh=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Bh||(Bh={}));class t0{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){bR(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new t0(e)}composeDesc(e){return this.empty?e:e.empty?this:Tte(this,e)}mapDesc(e,t=!1){return e.empty?this:CR(this,e,t)}mapPos(e,t=-1,i=Bh.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],h=r+a;if(c<0){if(h>e)return o+(e-r);o+=a}else{if(i!=Bh.Simple&&h>=e&&(i==Bh.TrackDel&&r<e&&h>e||i==Bh.TrackBefore&&r<e||i==Bh.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t0(e)}static create(e){return new t0(e)}}class xc extends t0{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return bR(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return CR(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(ps.empty);i.push(s?e.slice(o,o+s):ps.empty)}o+=s}return new xc(t,i)}compose(e){return this.empty?e:e.empty?this:Tte(this,e,!0)}map(e,t=!1){return e.empty?this:CR(this,e,t,!0)}iterChanges(e,t=!1){bR(this,e,t)}get desc(){return t0.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new c4(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,c-a);WA(r,m,-1);let v=o.ins==-1?-1:o.off==0?o.ins:0;WA(t,m,v),v>0&&Gy(i,t,o.text),o.forward(m),a+=m}let h=e[s++];for(;a<h;){if(o.done)break e;let m=Math.min(o.len,h-a);WA(t,m,-1),WA(r,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),a+=m}}return{changes:new xc(t,i),filtered:t0.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(m=!1){if(!m&&!r.length)return;s<t&&WA(r,t-s,-1);let v=new xc(r,o);a=a?a.compose(v.map(a)):v,r=[],o=[],s=0}function h(m){if(Array.isArray(m))for(let v of m)h(v);else if(m instanceof xc){if(m.length!=t)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${t})`);c(),a=a?a.compose(m.map(a)):m}else{let{from:v,to:x=v,insert:S}=m;if(v>x||v<0||x>t)throw new RangeError(`Invalid change range ${v} to ${x} (in doc of length ${t})`);let B=S?typeof S=="string"?ps.of(S.split(i||vR)):S:ps.empty,R=B.length;if(v==x&&R==0)return;v<s&&c(),v>s&&WA(r,v-s,-1),WA(r,x-v,R),Gy(o,r,B),s=x}}return h(e),c(!a),a}static empty(e){return new xc(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(ps.empty);i[r]=ps.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new xc(t,i)}static createSet(e,t){return new xc(e,t)}}function WA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Gy(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(ps.empty);n.push(t)}}function bR(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let h=r,m=o,v=ps.empty;for(;h+=a,m+=c,c&&i&&(v=v.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,h,o,m,v),r=h,o=m}}}function CR(n,e,t,i=!1){let r=[],o=i?[]:null,s=new c4(n),a=new c4(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let h=Math.min(s.len,a.len);WA(r,h,-1),s.forward(h),a.forward(h)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let h=a.len;for(WA(r,a.ins,-1);h;){let m=Math.min(s.len,h);s.ins>=0&&c<s.i&&s.len<=m&&(WA(r,0,s.ins),o&&Gy(o,r,s.text),c=s.i),s.forward(m),h-=m}a.next()}else if(s.ins>=0){let h=0,m=s.len;for(;m;)if(a.ins==-1){let v=Math.min(m,a.len);h+=v,m-=v,a.forward(v)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;WA(r,h,c<s.i?s.ins:0),o&&c<s.i&&Gy(o,r,s.text),c=s.i,s.forward(s.len-m)}else{if(s.done&&a.done)return o?xc.createSet(r,o):t0.create(r);throw new Error("Mismatched change set lengths")}}}function Tte(n,e,t=!1){let i=[],r=t?[]:null,o=new c4(n),s=new c4(e);for(let a=!1;;){if(o.done&&s.done)return r?xc.createSet(i,r):t0.create(i);if(o.ins==0)WA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)WA(i,0,s.ins,a),r&&Gy(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),h=i.length;if(o.ins==-1){let m=s.ins==-1?-1:s.off?0:s.ins;WA(i,c,m,a),r&&m&&Gy(r,i,s.text)}else s.ins==-1?(WA(i,o.off?0:o.len,c,a),r&&Gy(r,i,o.textBit(c))):(WA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Gy(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>h),o.forward2(c),s.forward(c)}}}}class c4{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ps.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?ps.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class vb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new vb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Sn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Sn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Sn.range(e.anchor,e.head)}static create(e,t,i){return new vb(e,t,i)}}class Sn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Sn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Sn([this.main],0)}addRange(e,t=!0){return Sn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Sn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Sn(e.ranges.map(t=>vb.fromJSON(t)),e.main)}static single(e,t=e){return new Sn([Sn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return Sn.normalized(e.slice(),t);i=o.to}return new Sn(e,t)}static cursor(e,t=0,i,r){return vb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?vb.create(t,e,48|o):vb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?Sn.range(c,a):Sn.range(a,c))}}return new Sn(e,t)}}function Rte(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let jU=0;class ki{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=jU++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ki(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:NU),!!e.static,e.enables)}of(e){return new dw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new dw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new dw(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function NU(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class dw{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=jU++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,h=!1,m=[];for(let v of this.dependencies)v=="doc"?c=!0:v=="selection"?h=!0:(((t=e[v.id])!==null&&t!==void 0?t:1)&1)==0&&m.push(e[v.id]);return{create(v){return v.values[s]=i(v),1},update(v,x){if(c&&x.docChanged||h&&(x.docChanged||x.selection)||_R(v,m)){let S=i(v);if(a?!hN(S,v.values[s],r):!r(S,v.values[s]))return v.values[s]=S,1}return 0},reconfigure:(v,x)=>{let S,B=x.config.address[o];if(B!=null){let R=vS(x,B);if(this.dependencies.every(F=>F instanceof ki?x.facet(F)===v.facet(F):F instanceof Ec?x.field(F,!1)==v.field(F,!1):!0)||(a?hN(S=i(v),R,r):r(S=i(v),R)))return v.values[s]=R,0}else S=i(v);return v.values[s]=S,1}}}}function hN(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function _R(n,e){let t=!1;for(let i of e)g3(n,i)&1&&(t=!0);return t}function q_e(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let h=[];for(let m=0;m<i.length;m++){let v=vS(c,i[m]);if(r[m]==2)for(let x of v)h.push(x);else h.push(v)}return e.combine(h)}return{create(c){for(let h of i)g3(c,h);return c.values[s]=a(c),1},update(c,h){if(!_R(c,o))return 0;let m=a(c);return e.compare(m,c.values[s])?0:(c.values[s]=m,1)},reconfigure(c,h){let m=_R(c,i),v=h.config.facets[e.id],x=h.facet(e);if(v&&!m&&NU(t,v))return c.values[s]=x,0;let S=a(c);return e.compare(S,x)?(c.values[s]=x,0):(c.values[s]=S,1)}}}const hM=ki.define({static:!0});class Ec{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Ec(jU++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(hM).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(hM),s=r.facet(hM),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,hM.of({field:this,create:e})]}get extension(){return this}}const cb={lowest:4,low:3,default:2,high:1,highest:0};function v2(n){return e=>new Dte(e,n)}const iC={highest:v2(cb.highest),high:v2(cb.high),default:v2(cb.default),low:v2(cb.low),lowest:v2(cb.lowest)};class Dte{constructor(e,t){this.inner=e,this.prec=t}}class g5{of(e){return new xR(this,e)}reconfigure(e){return g5.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class xR{constructor(e,t){this.compartment=e,this.inner=t}}class yS{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let x of Y_e(e,t,s))x instanceof Ec?r.push(x):(o[x.facet.id]||(o[x.facet.id]=[])).push(x);let a=Object.create(null),c=[],h=[];for(let x of r)a[x.id]=h.length<<1,h.push(S=>x.slot(S));let m=i?.config.facets;for(let x in o){let S=o[x],B=S[0].facet,R=m&&m[x]||[];if(S.every(F=>F.type==0))if(a[B.id]=c.length<<1|1,NU(R,S))c.push(i.facet(B));else{let F=B.combine(S.map(j=>j.value));c.push(i&&B.compare(F,i.facet(B))?i.facet(B):F)}else{for(let F of S)F.type==0?(a[F.id]=c.length<<1|1,c.push(F.value)):(a[F.id]=h.length<<1,h.push(j=>F.dynamicSlot(j)));a[B.id]=h.length<<1,h.push(F=>q_e(F,B,S))}}let v=h.map(x=>x(a));return new yS(e,s,v,a,c,o)}}function Y_e(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let h=i[c].indexOf(s);h>-1&&i[c].splice(h,1),s instanceof xR&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let h of s)o(h,a);else if(s instanceof xR){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(s.compartment)||s.inner;t.set(s.compartment,h),o(h,a)}else if(s instanceof Dte)o(s.inner,s.prec);else if(s instanceof Ec)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof dw)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,cb.default);else{let h=s.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,a)}}return o(n,cb.default),i.reduce((s,a)=>s.concat(a))}function g3(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function vS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Pte=ki.define(),MR=ki.define({combine:n=>n.some(e=>e),static:!0}),Ute=ki.define({combine:n=>n.length?n[0]:void 0,static:!0}),Lte=ki.define(),Kte=ki.define(),Fte=ki.define(),zte=ki.define({combine:n=>n.length?n[0]:!1});class v1{constructor(e,t){this.type=e,this.value=t}static define(){return new $_e}}class $_e{of(e){return new v1(this,e)}}class V_e{constructor(e){this.map=e}of(e){return new oo(this,e)}}class oo{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new oo(this.type,t)}is(e){return this.type==e}static define(e={}){return new V_e(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}oo.reconfigure=oo.define();oo.appendConfig=oo.define();class Sc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Rte(i,t.newLength),o.some(a=>a.type==Sc.time)||(this.annotations=o.concat(Sc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new Sc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Sc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Sc.time=v1.define();Sc.userEvent=v1.define();Sc.addToHistory=v1.define();Sc.remote=v1.define();function H_e(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function jte(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=xc.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:oo.mapEffects(n.effects,r).concat(oo.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function wR(n,e,t){let i=e.selection,r=q_(e.annotations);return e.userEvent&&(r=r.concat(Sc.userEvent.of(e.userEvent))),{changes:e.changes instanceof xc?e.changes:xc.of(e.changes||[],t,n.facet(Ute)),selection:i&&(i instanceof Sn?i:Sn.single(i.anchor,i.head)),effects:q_(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Nte(n,e,t){let i=wR(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=jte(i,wR(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=Sc.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return X_e(t?Z_e(r):r)}function Z_e(n){let e=n.startState,t=!0;for(let r of e.facet(Lte)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:H_e(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=xc.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=Sc.create(e,r,n.selection&&n.selection.map(o),oo.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Kte);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof Sc?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Sc?n=o[0]:n=Nte(e,q_(o),!1)}return n}function X_e(n){let e=n.startState,t=e.facet(Fte),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=jte(i,wR(e,o,n.changes.newLength),!0))}return i==n?n:Sc.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const J_e=[];function q_(n){return n==null?J_e:Array.isArray(n)?n:[n]}var ml=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(ml||(ml={}));const exe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let SR;try{SR=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function txe(n){if(SR)return SR.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||exe.test(t)))return!0}return!1}function nxe(n){return e=>{if(!/\S/.test(e))return ml.Space;if(txe(e))return ml.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ml.Word;return ml.Other}}class fs{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)g3(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return g3(this,i),vS(this,i)}update(...e){return Nte(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(g5.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,h)=>r.set(h,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(oo.reconfigure)?(t=null,i=a.value):a.is(oo.appendConfig)&&(t=null,i=q_(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=yS.resolve(i,r,this),o=new fs(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let s=e.startState.facet(MR)?e.newSelection:e.newSelection.asSingle();new fs(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Sn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=q_(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),h=this.changes(c.changes),m=h.map(r);for(let x=0;x<a;x++)o[x]=o[x].map(m);let v=r.mapDesc(h,!0);o.push(c.range.map(v)),r=r.compose(m),s=oo.mapEffects(s,m).concat(oo.mapEffects(q_(c.effects),v))}return{changes:r,selection:Sn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof xc?e:xc.of(e,this.doc.length,this.facet(fs.lineSeparator))}toText(e){return ps.of(e.split(this.facet(fs.lineSeparator)||vR))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(g3(this,t),vS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ec&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return fs.create({doc:e.doc,selection:Sn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=yS.resolve(e.extensions||[],new Map),i=e.doc instanceof ps?e.doc:ps.of((e.doc||"").split(t.staticFacet(fs.lineSeparator)||vR)),r=e.selection?e.selection instanceof Sn?e.selection:Sn.single(e.selection.anchor,e.selection.head):Sn.single(0);return Rte(r,i.length),t.staticFacet(MR)||(r=r.asSingle()),new fs(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(fs.tabSize)}get lineBreak(){return this.facet(fs.lineSeparator)||`
`}get readOnly(){return this.facet(zte)}phrase(e,...t){for(let i of this.facet(fs.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(Pte))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return nxe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=mA(t,s,!1);if(o(t.slice(c,s))!=ml.Word)break;s=c}for(;a<r;){let c=mA(t,a);if(o(t.slice(a,c))!=ml.Word)break;a=c}return s==a?null:Sn.range(s+i,a+i)}}fs.allowMultipleSelections=MR;fs.tabSize=ki.define({combine:n=>n.length?n[0]:4});fs.lineSeparator=Ute;fs.readOnly=zte;fs.phrases=ki.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});fs.languageData=Pte;fs.changeFilter=Lte;fs.transactionFilter=Kte;fs.transactionExtender=Fte;g5.reconfigure=oo.define();function Om(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Wb{eq(e){return this==e}range(e,t=e){return ER.create(e,t,this)}}Wb.prototype.startSide=Wb.prototype.endSide=0;Wb.prototype.point=!1;Wb.prototype.mapMode=Bh.TrackDel;let ER=class Gte{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Gte(e,t,i)}};function OR(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class GU{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return h>=0?s:a;h>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],m=this.from[c]+e,v=this.to[c]+e,x,S;if(m==v){let B=t.mapPos(m,h.startSide,h.mapMode);if(B==null||(x=S=B,h.startSide!=h.endSide&&(S=t.mapPos(m,h.endSide),S<x)))continue}else if(x=t.mapPos(m,h.startSide),S=t.mapPos(v,h.endSide),x>S||x==S&&h.startSide>0&&h.endSide<=0)continue;(S-x||h.endSide-h.startSide)<0||(s<0&&(s=x),h.point&&(a=Math.max(a,S-x)),i.push(h),r.push(x-s),o.push(S-s))}return{mapped:i.length?new GU(r,o,i,a):null,pos:s}}}class Vo{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Vo(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(OR)),this.isEmpty)return t.length?Vo.of(t):this;let a=new Wte(this,null,-1).goto(0),c=0,h=[],m=new f1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let v=t[c++];m.addInner(v.from,v.to,v.value)||h.push(v)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||h.push(ER.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?Vo.empty:this.nextLayer.update({add:h,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],h=e.touchesRange(a,a+c.length);if(h===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(h===!0){let{mapped:m,pos:v}=c.map(a,e);m&&(r=Math.max(r,m.maxPoint),t.push(m),i.push(v))}}let o=this.nextLayer.map(e);return t.length==0?o:new Vo(i,t,o||Vo.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return A4.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return A4.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),a=t.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),c=dN(s,a,i),h=new b2(s,c,o),m=new b2(a,c,o);i.iterGaps((v,x,S)=>fN(h,v,m,x,S,r)),i.empty&&i.length==0&&fN(h,0,m,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0),s=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=dN(o,s),c=new b2(o,a,0).goto(i),h=new b2(s,a,0).goto(i);for(;;){if(c.to!=h.to||!BR(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>r)return!0;c.next(),h.next()}}static spans(e,t,i,r,o=-1){let s=new b2(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let h=Math.min(s.to,i);if(s.point){let m=s.activeForPoint(s.to),v=s.pointFrom<t?m.length+1:s.point.startSide<0?m.length:Math.min(m.length,c);r.point(a,h,s.point,m,v,s.pointRank),c=Math.min(s.openEnd(h),m.length)}else h>a&&(r.span(a,h,s.active,c),c=s.openEnd(h));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new f1;for(let r of e instanceof ER?[e]:t?ixe(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Vo.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Vo.empty;r=r.nextLayer)t=new Vo(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Vo.empty=new Vo([],[],null,-1);function ixe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(OR(e,i)>0)return n.slice().sort(OR);e=i}return n}Vo.empty.nextLayer=Vo.empty;class f1{finishChunk(e){this.chunks.push(new GU(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new f1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Vo.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Vo.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function dN(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class Wte{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class A4{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new Wte(s,t,i,o));return r.length==1?r[0]:new A4(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)IB(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)IB(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),IB(this.heap,0)}}}function IB(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class b2{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=A4.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){dM(this.active,e),dM(this.activeTo,e),dM(this.activeRank,e),this.minActive=pN(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;fM(this.active,t,i),fM(this.activeTo,t,r),fM(this.activeRank,t,o),e&&fM(e,t,this.cursor.from),this.minActive=pN(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&dM(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function fN(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e;for(;;){let h=n.to+c-t.to,m=h||n.endSide-t.endSide,v=m<0?n.to+c:t.to,x=Math.min(v,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&BR(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,x,n.point,t.point):x>a&&!BR(n.active,t.active)&&o.compareRange(a,x,n.active,t.active),v>s)break;(h||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(v),a=v,m<=0&&n.next(),m>=0&&t.next()}}function BR(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function dM(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function fM(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function pN(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function Nx(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=mA(n,r));return i}function IR(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=mA(n,r)}return i===!0?-1:n.length}const kR="",mN=typeof Symbol>"u"?"__"+kR:Symbol.for(kR),TR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class rv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,h){let m=[],v=/^@(\w+)\b/.exec(s[0]),x=v&&v[1]=="keyframes";if(v&&a==null)return c.push(s[0]+";");for(let S in a){let B=a[S];if(/&/.test(S))o(S.split(/,\s*/).map(R=>s.map(F=>R.replace(/&/,F))).reduce((R,F)=>R.concat(F)),B,c);else if(B&&typeof B=="object"){if(!v)throw new RangeError("The value of a property ("+S+") should be a primitive value.");o(r(S),B,m,x)}else B!=null&&m.push(S.replace(/_.*/,"").replace(/[A-Z]/g,R=>"-"+R.toLowerCase())+": "+B+";")}(m.length||x)&&c.push((i&&!v&&!h?s.map(i):s).join(", ")+" {"+m.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=gN[mN]||1;return gN[mN]=e+1,kR+e.toString(36)}static mount(e,t,i){let r=e[TR],o=i&&i.nonce;r?o&&r.setNonce(o):r=new rxe(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let yN=new Map;class rxe{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=yN.get(i);if(o)return e[TR]=o;this.sheet=new r.CSSStyleSheet,yN.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[TR]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ov={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h4={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},oxe=typeof navigator<"u"&&/Mac/.test(navigator.platform),sxe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var fA=0;fA<10;fA++)ov[48+fA]=ov[96+fA]=String(fA);for(var fA=1;fA<=24;fA++)ov[fA+111]="F"+fA;for(var fA=65;fA<=90;fA++)ov[fA]=String.fromCharCode(fA+32),h4[fA]=String.fromCharCode(fA);for(var kB in ov)h4.hasOwnProperty(kB)||(h4[kB]=ov[kB]);function axe(n){var e=oxe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||sxe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?h4:ov)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Sa(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)Qte(n,arguments[e]);return n}function Qte(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Qte(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Eh=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},RR=typeof document<"u"?document:{documentElement:{style:{}}};const DR=/Edge\/(\d+)/.exec(Eh.userAgent),qte=/MSIE \d/.test(Eh.userAgent),PR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Eh.userAgent),c6=!!(qte||PR||DR),vN=!c6&&/gecko\/(\d+)/i.test(Eh.userAgent),TB=!c6&&/Chrome\/(\d+)/.exec(Eh.userAgent),lxe="webkitFontSmoothing"in RR.documentElement.style,UR=!c6&&/Apple Computer/.test(Eh.vendor),bN=UR&&(/Mobile\/\w+/.test(Eh.userAgent)||Eh.maxTouchPoints>2);var bi={mac:bN||/Mac/.test(Eh.platform),windows:/Win/.test(Eh.platform),linux:/Linux|X11/.test(Eh.platform),ie:c6,ie_version:qte?RR.documentMode||6:PR?+PR[1]:DR?+DR[1]:0,gecko:vN,gecko_version:vN?+(/Firefox\/(\d+)/.exec(Eh.userAgent)||[0,0])[1]:0,chrome:!!TB,chrome_version:TB?+TB[1]:0,ios:bN,android:/Android\b/.test(Eh.userAgent),webkit_version:lxe?+(/\bAppleWebKit\/(\d+)/.exec(Eh.userAgent)||[0,0])[1]:0,safari:UR,safari_version:UR?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Eh.userAgent)||[0,0])[1]:0,tabSize:RR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function d4(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function LR(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function fw(n,e){if(!e.anchorNode)return!1;try{return LR(n,e.anchorNode)}catch{return!1}}function f4(n){return n.nodeType==3?qb(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function y3(n,e,t,i){return t?CN(n,e,t,i,-1)||CN(n,e,t,i,1):!1}function Qb(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function bS(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function CN(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:i0(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Qb(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?i0(n):0}else return!1}}function i0(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function A6(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function uxe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Yte(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function cxe(n,e,t,i,r,o,s,a){let c=n.ownerDocument,h=c.defaultView||window;for(let m=n,v=!1;m&&!v;)if(m.nodeType==1){let x,S=m==c.body,B=1,R=1;if(S)x=uxe(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(v=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let W=m.getBoundingClientRect();({scaleX:B,scaleY:R}=Yte(m,W)),x={left:W.left,right:W.left+m.clientWidth*B,top:W.top,bottom:W.top+m.clientHeight*R}}let F=0,j=0;if(r=="nearest")e.top<x.top?(j=e.top-(x.top+s),t>0&&e.bottom>x.bottom+j&&(j=e.bottom-x.bottom+s)):e.bottom>x.bottom&&(j=e.bottom-x.bottom+s,t<0&&e.top-j<x.top&&(j=e.top-(x.top+s)));else{let W=e.bottom-e.top,H=x.bottom-x.top;j=(r=="center"&&W<=H?e.top+W/2-H/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-H+s)-x.top}if(i=="nearest"?e.left<x.left?(F=e.left-(x.left+o),t>0&&e.right>x.right+F&&(F=e.right-x.right+o)):e.right>x.right&&(F=e.right-x.right+o,t<0&&e.left<x.left+F&&(F=e.left-(x.left+o))):F=(i=="center"?e.left+(e.right-e.left)/2-(x.right-x.left)/2:i=="start"==a?e.left-o:e.right-(x.right-x.left)+o)-x.left,F||j)if(S)h.scrollBy(F,j);else{let W=0,H=0;if(j){let $=m.scrollTop;m.scrollTop+=j/R,H=(m.scrollTop-$)*R}if(F){let $=m.scrollLeft;m.scrollLeft+=F/B,W=(m.scrollLeft-$)*B}e={left:e.left-W,top:e.top-H,right:e.right-W,bottom:e.bottom-H},W&&Math.abs(W-F)<1&&(i="nearest"),H&&Math.abs(H-j)<1&&(r="nearest")}if(S)break;(e.top<x.top||e.bottom>x.bottom||e.left<x.left||e.right>x.right)&&(e={left:Math.max(e.left,x.left),right:Math.min(e.right,x.right),top:Math.max(e.top,x.top),bottom:Math.min(e.bottom,x.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function Axe(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class hxe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?i0(t):0),i,Math.min(e.focusOffset,i?i0(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let sb=null;bi.safari&&bi.safari_version>=26&&(sb=!1);function $te(n){if(n.setActive)return n.setActive();if(sb)return n.focus(sb);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(sb==null?{get preventScroll(){return sb={preventScroll:!0},!0}}:void 0),!sb){sb=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let _N;function qb(n,e,t=e){let i=_N||(_N=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Y_(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function dxe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Vte(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function fxe(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,i0(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=i0(t))}else{if(t==n)return!0;i=Qb(t),t=t.parentNode}}function Hte(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Zte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=i0(t)}else if(t.parentNode&&!bS(t))i=Qb(t),t=t.parentNode;else return null}}function Xte(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!bS(t))i=Qb(t)+1,t=t.parentNode;else return null}}class qA{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new qA(e.parentNode,Qb(e),t)}static after(e,t){return new qA(e.parentNode,Qb(e)+1,t)}}const WU=[];class Aa{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let a=Aa.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=xN(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=xN(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=i0(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Aa.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,a=-1;for(let c=0,h=i,m=i;c<this.children.length;c++){let v=this.children[c],x=h+v.length;if(h<e&&x>t)return v.domBoundsAround(e,t,h);if(x>=e&&r==-1&&(r=c,o=h),h>t&&v.dom.parentNode==this.dom){s=c,a=m;break}m=x,h=x+v.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=WU){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Jte(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Aa.prototype.breakAfter=0;function xN(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Jte{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function ene(n,e,t,i,r,o,s,a,c){let{children:h}=n,m=h.length?h[e]:null,v=o.length?o[o.length-1]:null,x=v?v.breakAfter:s;if(!(e==i&&m&&!s&&!x&&o.length<2&&m.merge(t,r,o.length?v:null,t==0,a,c))){if(i<h.length){let S=h[i];S&&(r<S.length||S.breakAfter&&v?.breakAfter)?(e==i&&(S=S.split(r),r=0),!x&&v&&S.merge(0,r,v,!0,0,c)?o[o.length-1]=S:((r||S.children.length&&!S.children[0].length)&&S.merge(0,r,null,!1,0,c),o.push(S))):S?.breakAfter&&(v?v.breakAfter=1:s=1),i++}for(m&&(m.breakAfter=s,t>0&&(!s&&o.length&&m.merge(t,m.length,o[0],!1,a,0)?m.breakAfter=o.shift().breakAfter:(t<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(t,m.length,null,!1,a,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:a;else if(h[e].become(o[0]))e++,o.shift(),a=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,a,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function tne(n,e,t,i,r,o){let s=n.childCursor(),{i:a,off:c}=s.findPos(t,1),{i:h,off:m}=s.findPos(e,-1),v=e-t;for(let x of i)v+=x.length;n.length+=v,ene(n,h,m,a,c,i,0,r,o)}const pxe=256;class bm extends Aa{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof bm)||this.length-(t-e)+i.length>pxe||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new bm(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new qA(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return mxe(this.dom,e,t)}}class p1 extends Aa{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Vte(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof p1&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(tne(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let a of this.children){let c=i+a.length;c>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=o),i=c,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new p1(this.mark,t,s)}domAtPos(e){return nne(this,e)}coordsAt(e,t){return rne(this,e,t)}}function mxe(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?bi.chrome||bi.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=qb(n,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return bi.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),s?A6(c,s<0):c||null}class Wy extends Aa{static create(e,t,i){return new Wy(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Wy.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof Wy)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Wy&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ps.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ps.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qA.before(this.dom):qA.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return A6(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bx extends Aa{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof bx&&e.side==this.side}split(){return new bx(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qA.before(this.dom):qA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ps.empty}get isHidden(){return!0}}bm.prototype.children=Wy.prototype.children=bx.prototype.children=WU;function nne(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new qA(t,0)}function ine(n,e,t){let i,{children:r}=n;t>0&&e instanceof p1&&r.length&&(i=r[r.length-1])instanceof p1&&i.mark.eq(e.mark)?ine(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function rne(n,e,t){let i=null,r=-1,o=null,s=-1;function a(h,m){for(let v=0,x=0;v<h.children.length&&x<=m;v++){let S=h.children[v],B=x+S.length;B>=m&&(S.children.length?a(S,m-x):(!o||o.isHidden&&(t>0||yxe(o,S)))&&(B>m||x==B&&S.getSide()>0)?(o=S,s=m-x):(x<m||x==B&&S.getSide()<0&&!S.isHidden)&&(i=S,r=m-x)),x=B}}a(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?r:s),t):gxe(n)}function gxe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=f4(e);return t[t.length-1]||null}function yxe(n,e){let t=n.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function KR(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const MN=Object.create(null);function CS(n,e,t){if(n==e)return!0;n||(n=MN),e||(e=MN);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function FR(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function vxe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class hv{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Th=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Th||(Th={}));class Or extends Wb{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new y5(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new sv(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=one(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new sv(e,i,r,t,e.widget||null,!0)}static line(e){return new v5(e)}static set(e,t=!1){return Vo.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Or.none=Vo.empty;class y5 extends Or{constructor(e){let{start:t,end:i}=one(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof y5&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&CS(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}y5.prototype.point=!1;class v5 extends Or{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof v5&&this.spec.class==e.spec.class&&CS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}v5.prototype.mapMode=Bh.TrackBefore;v5.prototype.point=!0;class sv extends Or{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Bh.TrackBefore:Bh.TrackAfter:Bh.TrackDel}get type(){return this.startSide!=this.endSide?Th.WidgetRange:this.startSide<=0?Th.WidgetBefore:Th.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof sv&&bxe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}sv.prototype.point=!0;function one(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function bxe(n,e){return n==e||!!(n&&e&&n.compare(e))}function pw(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Vu extends Aa{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof Vu))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),tne(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new Vu;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){CS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ine(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=KR(t,this.attrs||{})),i&&(this.attrs=KR({class:i},this.attrs||{}))}domAtPos(e){return nne(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Vte(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(FR(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Aa.get(r)instanceof p1;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Aa.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!bi.ios||!this.children.some(o=>o instanceof bm))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof bm)||/[^ -~]/.test(i.text))return null;let r=f4(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=rne(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof Vu&&this.children.length==0&&e.children.length==0&&CS(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof Vu)return o;if(s>t)break}r=s+o.breakAfter}return null}}class l1 extends Aa{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof l1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?qA.before(this.dom):qA.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new l1(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return WU}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ps.empty}domBoundsAround(){return null}become(e){return e instanceof l1&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof zR?null:A6(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class zR extends hv{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class v3{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof l1&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Vu),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(pM(new bx(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof l1)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(pM(new bm(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=r<=o?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof sv){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof sv)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new l1(i.widget||Cx.block,a,i));else{let c=Wy.create(i.widget||Cx.inline,a,a?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=r.length&&(e<t||i.startSide>0),m=!c.isEditable&&(e<t||o>r.length||i.startSide<=0),v=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(v.append(pM(new bx(1),r),o),o=r.length+Math.max(0,o-r.length)),v.append(pM(c,r),o),this.atCursorPos=m,this.pendingBuffer=m?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new v3(e,t,i,o);return s.openEnd=Vo.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function pM(n,e){for(let t of e)n=new p1(t,[n],n.length);return n}class Cx extends hv{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cx.inline=new Cx("span");Cx.block=new Cx("div");var il=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(il||(il={}));const Yb=il.LTR,QU=il.RTL;function sne(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Cxe=sne("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),_xe=sne("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jR=Object.create(null),xg=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);jR[e]=t,jR[t]=-e}function ane(n){return n<=247?Cxe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?_xe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const xxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Qy{get dir(){return this.level%2?QU:Yb}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function lne(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!lne(i.inner,r.inner))return!1}return!0}const Ea=[];function Mxe(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let h=s,m=c,v=c;h<a;h++){let x=ane(n.charCodeAt(h));x==512?x=m:x==8&&v==4&&(x=16),Ea[h]=x==4?2:x,x&7&&(v=x),m=x}for(let h=s,m=c,v=c;h<a;h++){let x=Ea[h];if(x==128)h<a-1&&m==Ea[h+1]&&m&24?x=Ea[h]=m:Ea[h]=256;else if(x==64){let S=h+1;for(;S<a&&Ea[S]==64;)S++;let B=h&&m==8||S<t&&Ea[S]==8?v==1?1:8:256;for(let R=h;R<S;R++)Ea[R]=B;h=S-1}else x==8&&v==1&&(Ea[h]=1);m=x,x&7&&(v=x)}}}function wxe(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let h=s?i[s-1].to:e,m=s<i.length?i[s].from:t;for(let v=h,x,S,B;v<m;v++)if(S=jR[x=n.charCodeAt(v)])if(S<0){for(let R=a-3;R>=0;R-=3)if(xg[R+1]==-S){let F=xg[R+2],j=F&2?r:F&4?F&1?o:r:0;j&&(Ea[v]=Ea[xg[R]]=j),a=R;break}}else{if(xg.length==189)break;xg[a++]=v,xg[a++]=x,xg[a++]=c}else if((B=Ea[v])==2||B==1){let R=B==r;c=R?0:1;for(let F=a-3;F>=0;F-=3){let j=xg[F+2];if(j&2)break;if(R)xg[F+2]|=2;else{if(j&4)break;xg[F+2]|=4}}}}}function Sxe(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let h=Ea[c];if(h==256){let m=c+1;for(;;)if(m==a){if(r==t.length)break;m=t[r++].to,a=r<t.length?t[r].from:e}else if(Ea[m]==256)m++;else break;let v=o==1,x=(m<e?Ea[m]:i)==1,S=v==x?v?1:2:i;for(let B=m,R=r,F=R?t[R-1].to:n;B>c;)B==F&&(B=t[--R].from,F=R?t[R-1].to:n),Ea[--B]=S;c=m}else o=h,c++}}}function NR(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,h=0;c<t;){let m=!0,v=!1;if(h==o.length||c<o[h].from){let R=Ea[c];R!=a&&(m=!1,v=R==16)}let x=!m&&a==1?[]:null,S=m?i:i+1,B=c;e:for(;;)if(h<o.length&&B==o[h].from){if(v)break e;let R=o[h];if(!m)for(let F=R.to,j=h+1;;){if(F==t)break e;if(j<o.length&&o[j].from==F)F=o[j++].to;else{if(Ea[F]==a)break e;break}}if(h++,x)x.push(R);else{R.from>c&&s.push(new Qy(c,R.from,S));let F=R.direction==Yb!=!(S%2);GR(n,F?i+1:i,r,R.inner,R.from,R.to,s),c=R.to}B=R.to}else{if(B==t||(m?Ea[B]!=a:Ea[B]==a))break;B++}x?NR(n,c,B,i+1,r,x,s):c<B&&s.push(new Qy(c,B,S)),c=B}else for(let c=t,h=o.length;c>e;){let m=!0,v=!1;if(!h||c>o[h-1].to){let R=Ea[c-1];R!=a&&(m=!1,v=R==16)}let x=!m&&a==1?[]:null,S=m?i:i+1,B=c;e:for(;;)if(h&&B==o[h-1].to){if(v)break e;let R=o[--h];if(!m)for(let F=R.from,j=h;;){if(F==e)break e;if(j&&o[j-1].to==F)F=o[--j].from;else{if(Ea[F-1]==a)break e;break}}if(x)x.push(R);else{R.to<c&&s.push(new Qy(R.to,c,S));let F=R.direction==Yb!=!(S%2);GR(n,F?i+1:i,r,R.inner,R.from,R.to,s),c=R.from}B=R.from}else{if(B==e||(m?Ea[B-1]!=a:Ea[B-1]==a))break;B--}x?NR(n,B,c,i+1,r,x,s):B<c&&s.push(new Qy(B,c,S)),c=B}}function GR(n,e,t,i,r,o,s){let a=e%2?2:1;Mxe(n,r,o,i,a),wxe(n,r,o,i,a),Sxe(r,o,i,a),NR(n,r,o,e,t,i,s)}function Exe(n,e,t){if(!n)return[new Qy(0,0,e==QU?1:0)];if(e==Yb&&!t.length&&!xxe.test(n))return une(n.length);if(t.length)for(;n.length>Ea.length;)Ea[Ea.length]=256;let i=[],r=e==Yb?0:1;return GR(n,r,r,t,0,n.length,i),i}function une(n){return[new Qy(0,n,0)]}let cne="";function Oxe(n,e,t,i,r){var o;let s=i.head-n.from,a=Qy.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],h=c.side(r,t);if(s==h){let x=a+=r?1:-1;if(x<0||x>=e.length)return null;c=e[a=x],s=c.side(!r,t),h=c.side(r,t)}let m=mA(n.text,s,c.forward(r,t));(m<c.from||m>c.to)&&(m=h),cne=n.text.slice(Math.min(s,m),Math.max(s,m));let v=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return v&&m==h&&v.level+(r?0:1)<c.level?Sn.cursor(v.side(!r,t)+n.from,v.forward(r,t)?1:-1,v.level):Sn.cursor(m+n.from,c.forward(r,t)?-1:1,c.level)}function Bxe(n,e,t){for(let i=e;i<t;i++){let r=ane(n.charCodeAt(i));if(r==1)return Yb;if(r==2||r==4)return QU}return Yb}const Ane=ki.define(),hne=ki.define(),dne=ki.define(),fne=ki.define(),WR=ki.define(),pne=ki.define(),mne=ki.define(),qU=ki.define(),YU=ki.define(),gne=ki.define({combine:n=>n.some(e=>e)}),yne=ki.define({combine:n=>n.some(e=>e)}),vne=ki.define();class $_{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new $_(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new $_(Sn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const mM=oo.define({map:(n,e)=>n.map(e)}),bne=oo.define();function kh(n,e,t){let i=n.facet(fne);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const t1=ki.define({combine:n=>n.length?n[0]:!0});let Ixe=0;const B_=ki.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class Eu{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(B_.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(B_.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new Eu(Ixe++,e,i,r,a=>{let c=[];return s&&c.push(p4.of(h=>{let m=h.plugin(a);return m?s(m):Or.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return Eu.define((i,r)=>new e(i,r),t)}}class RB{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(kh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){kh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){kh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Cne=ki.define(),$U=ki.define(),p4=ki.define(),_ne=ki.define(),b5=ki.define(),xne=ki.define();function wN(n,e){let t=n.state.facet(xne);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Vo.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let h=o-e.from,m=s-e.from,v=r;for(let x=a.length-1;x>=0;x--,c--){let S=a[x].spec.bidiIsolate,B;if(S==null&&(S=Bxe(e.text,h,m)),c>0&&v.length&&(B=v[v.length-1]).to==h&&B.direction==S)B.to=m,v=B.inner;else{let R={from:h,to:m,direction:S,inner:[]};v.push(R),v=R.inner}}}}),r}const Mne=ki.define();function VU(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(Mne)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const $2=ki.define();class gp{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new gp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,a=0;;r++){let c=r==e.length?null:e[r],h=s-a,m=c?c.fromB:1e9;for(;o<t.length&&t[o]<m;){let v=t[o],x=t[o+1],S=Math.max(a,v),B=Math.min(m,x);if(S<=B&&new gp(S+h,B+h,S,B).addToSet(i),x>m)break;o+=2}if(!c)return i;new gp(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),s=c.toA,a=c.toB}}}class _S{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=xc.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new gp(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new _S(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class SN extends Aa{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Or.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Vu],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new gp(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Lxe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?Txe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;i=new gp(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(bi.ie||bi.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),c=Pxe(s,a,e.changes);return i=gp.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=bi.chrome||bi.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof l1&&s.widget instanceof zR&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:c,toA:h,fromB:m,toB:v}=a,x,S,B,R;if(i&&i.range.fromB<v&&i.range.toB>m){let $=v3.build(this.view.state.doc,m,i.range.fromB,this.decorations,this.dynamicDecorationMap),N=v3.build(this.view.state.doc,i.range.toB,v,this.decorations,this.dynamicDecorationMap);S=$.breakAtStart,B=$.openStart,R=N.openEnd;let Y=this.compositionView(i);N.breakAtStart?Y.breakAfter=1:N.content.length&&Y.merge(Y.length,Y.length,N.content[0],!1,N.openStart,0)&&(Y.breakAfter=N.content[0].breakAfter,N.content.shift()),$.content.length&&Y.merge(0,0,$.content[$.content.length-1],!0,0,$.openEnd)&&$.content.pop(),x=$.content.concat(Y).concat(N.content)}else({content:x,breakAtStart:S,openStart:B,openEnd:R}=v3.build(this.view.state.doc,m,v,this.decorations,this.dynamicDecorationMap));let{i:F,off:j}=o.findPos(h,1),{i:W,off:H}=o.findPos(c,-1);ene(this,W,H,F,j,x,S,B,R)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(bne)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new bm(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new p1(r,[t],t.length);let i=new Vu;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(s);let a=Aa.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(t1)||this.dom.tabIndex>-1)&&fw(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(bi.gecko&&a.empty&&!this.hasComposition&&kxe(c)){let v=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(v,c.node.childNodes[c.offset]||null)),c=h=new qA(v,0),s=!0}let m=this.view.observer.selectionRange;(s||!m.focusNode||(!y3(c.node,c.offset,m.anchorNode,m.anchorOffset)||!y3(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,a))&&(this.view.observer.ignore(()=>{bi.android&&bi.chrome&&this.dom.contains(m.focusNode)&&Uxe(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let v=d4(this.view.root);if(v)if(a.empty){if(bi.gecko){let x=Rxe(c.node,c.offset);if(x&&x!=3){let S=(x==1?Zte:Xte)(c.node,c.offset);S&&(c=new qA(S.node,S.offset))}}v.collapse(c.node,c.offset),a.bidiLevel!=null&&v.caretBidiLevel!==void 0&&(v.caretBidiLevel=a.bidiLevel)}else if(v.extend){v.collapse(c.node,c.offset);try{v.extend(h.node,h.offset)}catch{}}else{let x=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),x.setEnd(h.node,h.offset),x.setStart(c.node,c.offset),v.removeAllRanges(),v.addRange(x)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new qA(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new qA(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&y3(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=d4(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=Vu.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let m=this.domAtPos(t.head+t.assoc);i.collapse(m.node,m.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=Aa.get(t.childNodes[r]);o instanceof Vu&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=Aa.get(t.childNodes[r]);o instanceof Vu&&(i=o.domAtPos(o.length))}return i?new qA(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Aa.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Vu)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],c=o-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!i||a instanceof Vu&&!(i instanceof Vu&&t>=0)))i=a,r=h;else if(i&&h==e&&c==e&&a instanceof l1&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(i=null)}o=h}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Vu))return null;for(;r.children.length;){let{i:a,off:c}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=c}if(!(r instanceof bm))return null;let o=mA(r.text,i);if(o==i)return null;let s=qb(r.dom,i,o).getClientRects();for(let a=0;a<s.length;a++){let c=s[a];if(a==s.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==il.LTR;for(let h=0,m=0;m<this.children.length;m++){let v=this.children[m],x=h+v.length;if(x>r)break;if(h>=i){let S=v.dom.getBoundingClientRect();if(t.push(S.height),s){let B=v.dom.lastChild,R=B?f4(B):[];if(R.length){let F=R[R.length-1],j=c?F.right-S.left:S.right-F.left;j>a&&(a=j,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=x)}}}h=x+v.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?il.RTL:il.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Vu){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=f4(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Jte(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Or.replace({widget:new zR(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return Or.set(e)}updateDeco(){let e=1,t=this.view.state.facet(p4).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(_ne).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Vo.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(vne))try{if(h(this.view,e.range,e))return!0}catch(m){kh(this.view.state,m,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=VU(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;cxe(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==il.LTR)}}function kxe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function wne(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Zte(t.focusNode,t.focusOffset),r=Xte(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Aa.get(r.node);if(!a||a instanceof bm&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=Aa.get(i.node);!c||c instanceof bm&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function Txe(n,e,t){let i=wne(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc,h=new gp(c.mapPos(o),c.mapPos(s),o,s),m=[];for(let v=r.parentNode;;v=v.parentNode){let x=Aa.get(v);if(x instanceof p1)m.push({node:v,deco:x.mark});else{if(x instanceof Vu||v.nodeName=="DIV"&&v.parentNode==n.contentDOM)return{range:h,text:r,marks:m,line:v};if(v!=n.contentDOM)m.push({node:v,deco:new y5({inclusive:!0,attributes:vxe(v),tagName:v.tagName.toLowerCase()})});else return null}}}function Rxe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let Dxe=class{constructor(){this.changes=[]}compareRange(e,t){pw(e,t,this.changes)}comparePoint(e,t){pw(e,t,this.changes)}boundChange(e){pw(e,e,this.changes)}};function Pxe(n,e,t){let i=new Dxe;return Vo.compare(n,e,t,i),i.changes}function Uxe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Lxe(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function Kxe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return Sn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=mA(r.text,o,!1):a=mA(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let h=mA(r.text,s,!1);if(i(r.text.slice(h,s))!=c)break;s=h}for(;a<r.length;){let h=mA(r.text,a);if(i(r.text.slice(a,h))!=c)break;a=h}return Sn.range(s+r.from,a+r.from)}function Fxe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function zxe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function DB(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function EN(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function ON(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function QR(n,e,t){let i,r,o,s,a=!1,c,h,m,v;for(let B=n.firstChild;B;B=B.nextSibling){let R=f4(B);for(let F=0;F<R.length;F++){let j=R[F];r&&DB(r,j)&&(j=EN(ON(j,r.bottom),r.top));let W=Fxe(e,j),H=zxe(t,j);if(W==0&&H==0)return B.nodeType==3?BN(B,e,t):QR(B,e,t);(!i||s>H||s==H&&o>W)&&(i=B,r=j,o=W,s=H,a=W?e<j.left?F>0:F<R.length-1:!0),W==0?t>j.bottom&&(!m||m.bottom<j.bottom)?(c=B,m=j):t<j.top&&(!v||v.top>j.top)&&(h=B,v=j):m&&DB(m,j)?m=ON(m,j.bottom):v&&DB(v,j)&&(v=EN(v,j.top))}}if(m&&m.bottom>=t?(i=c,r=m):v&&v.top<=t&&(i=h,r=v),!i)return{node:n,offset:0};let x=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return BN(i,x,t);if(a&&i.contentEditable!="false")return QR(i,x,t);let S=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:S}}function BN(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let c=qb(n,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let m=c[h];if(m.top==m.bottom)continue;s||(s=e-m.left);let v=(m.top>t?m.top-t:t-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&v<o){let x=e>=(m.left+m.right)/2,S=x;if((bi.chrome||bi.gecko)&&qb(n,a).getBoundingClientRect().left==m.right&&(S=!x),v<=0)return{node:n,offset:a+(S?1:0)};r=a+(S?1:0),o=v}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function Sne(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:m,y:v}=e,x=v-a;if(x<0)return 0;if(x>h)return n.state.doc.length;for(let $=n.viewState.heightOracle.textHeight/2,N=!1;c=n.elementAtHeight(x),c.type!=Th.Text;)for(;x=i>0?c.bottom+$:c.top-$,!(x>=0&&x<=h);){if(N)return t?null:0;N=!0,i=-i}v=a+x;let S=c.from;if(S<n.viewport.from)return n.viewport.from==0?0:t?null:IN(n,s,c,m,v);if(S>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:IN(n,s,c,m,v);let B=n.dom.ownerDocument,R=n.root.elementFromPoint?n.root:B,F=R.elementFromPoint(m,v);F&&!n.contentDOM.contains(F)&&(F=null),F||(m=Math.max(s.left+1,Math.min(s.right-1,m)),F=R.elementFromPoint(m,v),F&&!n.contentDOM.contains(F)&&(F=null));let j,W=-1;if(F&&((r=n.docView.nearest(F))===null||r===void 0?void 0:r.isEditable)!=!1){if(B.caretPositionFromPoint){let $=B.caretPositionFromPoint(m,v);$&&({offsetNode:j,offset:W}=$)}else if(B.caretRangeFromPoint){let $=B.caretRangeFromPoint(m,v);$&&({startContainer:j,startOffset:W}=$)}j&&(!n.contentDOM.contains(j)||bi.safari&&jxe(j,W,m)||bi.chrome&&Nxe(j,W,m))&&(j=void 0),j&&(W=Math.min(i0(j),W))}if(!j||!n.docView.dom.contains(j)){let $=Vu.find(n.docView,S);if(!$)return x>c.top+c.height/2?c.to:c.from;({node:j,offset:W}=QR($.dom,m,v))}let H=n.docView.nearest(j);if(!H)return null;if(H.isWidget&&((o=H.dom)===null||o===void 0?void 0:o.nodeType)==1){let $=H.dom.getBoundingClientRect();return e.y<$.top||e.y<=$.bottom&&e.x<=($.left+$.right)/2?H.posAtStart:H.posAtEnd}else return H.localPosFromDOM(j,W)+H.posAtStart}function IN(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+IR(s,o,n.state.tabSize)}function Ene(n,e,t){let i,r=n;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=r.parentNode;if(!s||s.nodeName=="DIV")break;r=s}}return qb(n,i-1,i).getBoundingClientRect().right>t}function jxe(n,e,t){return Ene(n,e,t)}function Nxe(n,e,t){if(e!=0)return Ene(n,e,t);for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():qb(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function qR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==Th.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function Gxe(n,e,t,i){let r=qR(n,e.head,e.assoc||-1),o=!i||r.type!=Th.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==il.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return Sn.cursor(c,t?-1:1)}return Sn.cursor(t?r.to:r.from,t?-1:1)}function kN(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let h=Oxe(r,o,s,a,t),m=cne;if(!h){if(r.number==(t?n.state.doc.lines:1))return a;m=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),h=n.visualLineSide(r,!t)}if(c){if(!c(m))return a}else{if(!i)return h;c=i(m)}a=h}}function Wxe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==ml.Space&&(r=s),r==s}}function Qxe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return Sn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,e.assoc||-1),m=n.documentTop;if(h)s==null&&(s=h.left-c.left),a=o<0?h.top:h.bottom;else{let S=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-S.from))),a=(o<0?S.top:S.bottom)+m}let v=c.left+s,x=i??n.viewState.heightOracle.textHeight>>1;for(let S=0;;S+=10){let B=a+(x+S)*o,R=Sne(n,{x:v,y:B},!1,o);if(B<c.top||B>c.bottom||(o<0?R<r:R>r)){let F=n.docView.coordsForChar(R),j=!F||B<F.top?-1:1;return Sn.cursor(R,j,void 0,s)}}}function b3(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function One(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=b3(n,r.from,0);s!=r.from&&(o=Sn.cursor(s,-1))}else{let s=b3(n,r.from,-1),a=b3(n,r.to,1);(s!=r.from||a!=r.to)&&(o=Sn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?Sn.create(t,e.mainIndex):e}function PB(n,e,t){let i=b3(n.state.facet(b5).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:Sn.cursor(i,i<t.from?1:-1)}const V2="";class qxe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(fs.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=V2}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=Aa.get(r),c=Aa.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:bS(r))||bS(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&!$xe(s,t)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=Aa.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Yxe(e,i.node,i.offset)?t:0))}}function Yxe(n,e,t){for(;;){if(!e||t<i0(e))return!1;if(e==n)return!0;t=Qb(e)+1,e=e.parentNode}}function $xe(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=Aa.get(n);if(!(i?.isWidget||n.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class TN{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Vxe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:Zxe(e),c=new qxe(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=Xxe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!LR(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!LR(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),m=e.viewport;if((bi.ios||bi.chrome)&&e.state.selection.main.empty&&c!=h&&(m.from>0||m.to<e.state.doc.length)){let v=Math.min(c,h),x=Math.max(c,h),S=m.from-v,B=m.to-x;(S==0||S==1||v==0)&&(B==0||B==-1||x==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=Sn.single(h,c)}}}function Bne(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,h=null;(o===8||bi.android&&e.text.length<a-s)&&(c=r.to,h="end");let m=Ine(n.state.doc.sliceString(s,a,V2),e.text,c-s,h);m&&(bi.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==V2+V2&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:ps.of(e.text.slice(m.from,m.toB).split(V2))})}else i&&(!n.hasFocus&&n.state.facet(t1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(bi.mac||bi.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Sn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:ps.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:bi.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Sn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:ps.of([" "])}),t)return HU(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=One(n.state.facet(b5).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function HU(n,e,t,i=-1){if(bi.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(bi.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Y_(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Y_(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Y_(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=Hxe(n,e,t));return n.state.facet(pne).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function Hxe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,h=c<0?o.from:o.to,m=b3(r.facet(b5).map(v=>v(n)),h,c);e.from==m&&(s=m)}if(s>-1)i={changes:e,selection:Sn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",h=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let c=r.changes(e),h=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let m=n.state.sliceDoc(e.from,e.to),v,x=t&&wne(n,t.main.head);if(x){let R=e.insert.length-(e.to-e.from);v={from:x.from,to:x.to-R}}else v=n.state.doc.lineAt(o.head);let S=o.to-e.to,B=o.to-o.from;i=r.changeByRange(R=>{if(R.from==o.from&&R.to==o.to)return{changes:c,range:h||R.map(c)};let F=R.to-S,j=F-m.length;if(R.to-R.from!=B||n.state.sliceDoc(j,F)!=m||R.to>=v.from&&R.from<=v.to)return{range:R};let W=r.changes({from:j,to:F,insert:e.insert}),H=R.to-o.to;return{changes:W,range:h?Sn.range(Math.max(0,h.anchor+H),Math.max(0,h.head+H)):R.map(W)}})}else i={changes:c,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Ine(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function Zxe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new TN(t,i)),(r!=t||o!=i)&&e.push(new TN(r,o))),e}function Xxe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Sn.single(t+e,i+e):null}class Jxe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,bi.safari&&e.contentDOM.addEventListener("input",()=>null),bi.gecko&&p2e(e.contentDOM.ownerDocument)}handleEvent(e){!a2e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=e2e(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Tne.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),bi.android&&bi.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return bi.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=kne.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||t2e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Y_(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:bi.safari&&!bi.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function RN(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){kh(t.state,r)}}}function e2e(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(RN(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(RN(i.value,c))}}for(let i in Cm)t(i).handlers.push(Cm[i]);for(let i in bp)t(i).observers.push(bp[i]);return e}const kne=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],t2e="dthko",Tne=[16,17,18,20,91,92,224,225],gM=6;function yM(n){return Math.max(0,n)*.7+8}function n2e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class i2e{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Axe(e.contentDOM),this.atoms=e.state.facet(b5).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(fs.allowMultipleSelections)&&r2e(e,t),this.dragging=s2e(e,t)&&Pne(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&n2e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=VU(this.view);e.clientX-c.left<=r+gM?t=-yM(r-e.clientX):e.clientX+c.right>=s-gM&&(t=yM(e.clientX-s)),e.clientY-c.top<=o+gM?i=-yM(o-e.clientY):e.clientY+c.bottom>=a-gM&&(i=yM(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=One(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function r2e(n,e){let t=n.state.facet(Ane);return t.length?t[0](e):bi.mac?e.metaKey:e.ctrlKey}function o2e(n,e){let t=n.state.facet(hne);return t.length?t[0](e):bi.mac?!e.altKey:!e.ctrlKey}function s2e(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=d4(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function a2e(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Aa.get(t))&&i.ignoreEvent(e))return!1;return!0}const Cm=Object.create(null),bp=Object.create(null),Rne=bi.ie&&bi.ie_version<15||bi.ios&&bi.webkit_version<604;function l2e(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Dne(n,t.value)},50)}function h6(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Dne(n,e){e=h6(n.state,qU,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(YR!=null&&t.selection.ranges.every(c=>c.empty)&&YR==o.toString()){let c=-1;i=t.changeByRange(h=>{let m=t.doc.lineAt(h.from);if(m.from==c)return{range:h};c=m.from;let v=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:m.from,insert:v},range:Sn.cursor(h.from+v.length)}})}else s?i=t.changeByRange(c=>{let h=o.line(r++);return{changes:{from:c.from,to:c.to,insert:h.text},range:Sn.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}bp.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Cm.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);bp.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};bp.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Cm.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(dne))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=A2e(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new i2e(n,e,t,i)),i&&n.observer.ignore(()=>{$te(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function DN(n,e,t,i){if(i==1)return Sn.cursor(e,t);if(i==2)return Kxe(n.state,e,t);{let r=Vu.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Sn.range(s,a)}}let PN=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function u2e(n,e,t,i){let r=Vu.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&PN(t,i,s))return-1;let a=r.coordsAt(o,1);return a&&PN(t,i,a)?1:s&&s.bottom>=i?-1:1}function UN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:u2e(n,t,e.clientX,e.clientY)}}const c2e=bi.ie&&bi.ie_version<=11;let LN=null,KN=0,FN=0;function Pne(n){if(!c2e)return n.detail;let e=LN,t=FN;return LN=n,FN=Date.now(),KN=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(KN+1)%3:1}function A2e(n,e){let t=UN(n,e),i=Pne(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=UN(n,o),h,m=DN(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!s){let v=DN(n,t.pos,t.bias,i),x=Math.min(v.from,m.from),S=Math.max(v.to,m.to);m=x<m.from?Sn.range(x,S):Sn.range(S,x)}return s?r.replaceRange(r.main.extend(m.from,m.to)):a&&i==1&&r.ranges.length>1&&(h=h2e(r,c.pos))?h:a?r.addRange(m):Sn.create([m])}}}function h2e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return Sn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Cm.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=Sn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",h6(n.state,YU,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Cm.dragend=n=>(n.inputState.draggedContent=null,!1);function zN(n,e,t,i){if(t=h6(n.state,qU,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&o2e(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Cm.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&zN(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zN(n,e,i,!0),!0}return!1};Cm.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Rne?null:e.clipboardData;return t?(Dne(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(l2e(n),!1)};function d2e(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function f2e(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:h6(n,YU,e.join(n.lineBreak)),ranges:t,linewise:i}}let YR=null;Cm.copy=Cm.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=f2e(n.state);if(!t&&!r)return!1;YR=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Rne?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(d2e(n,t),!1)};const Une=v1.define();function Lne(n,e){let t=[];for(let i of n.facet(mne)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:Une.of(!0)}):null}function Kne(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Lne(n.state,e);t?n.dispatch(t):n.update([])}},10)}bp.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Kne(n)};bp.blur=n=>{n.observer.clearSelectionRange(),Kne(n)};bp.compositionstart=bp.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};bp.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,bi.chrome&&bi.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};bp.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Cm.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return HU(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let r;if(bi.chrome&&bi.android&&(r=kne.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return bi.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),bi.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>bp.compositionend(n,e),20),!1};const jN=new Set;function p2e(n){jN.has(n)||(jN.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const NN=["pre-wrap","normal","pre-line","break-spaces"];let _x=!1;function GN(){_x=!1}class m2e{constructor(e){this.lineWrapping=e,this.doc=ps.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return NN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=NN.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<s.length;h++){let m=s[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return c}}class g2e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ug{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Th.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof sv?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ug(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var tl=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(tl||(tl={}));const mw=.001;class Rh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>mw&&(_x=!0),this.height=e)}replace(e,t,i){return Rh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:m,toB:v}=r[a],x=o.lineAt(c,tl.ByPosNoHeight,i.setDoc(t),0,0),S=x.to>=h?x:o.lineAt(h,tl.ByPosNoHeight,i,0,0);for(v+=S.to-h,h=S.to;a>0&&x.from<=r[a-1].toA;)c=r[a-1].fromA,m=r[a-1].fromB,a--,c<x.from&&(x=o.lineAt(c,tl.ByPosNoHeight,i,0,0));m+=x.from-c,c=x.from;let B=ZU.build(i.setDoc(s),e,m,v);o=xS(o,o.replace(c,h,B))}return o.updateHeight(i,0)}static empty(){return new df(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new y2e(Rh.of(e.slice(0,t)),s,Rh.of(e.slice(i)))}}function xS(n,e){return n==e?n:(n.constructor!=e.constructor&&(_x=!0),e)}Rh.prototype.size=1;class Fne extends Rh{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new Ug(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class df extends Fne{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new Ug(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof df||r instanceof dA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof dA?r=new df(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Rh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class dA extends Rh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),m=t.doc.lineAt(h),v=a+m.length*c,x=Math.max(i,e-v/2);return new Ug(m.from,m.length,x,v,0)}else{let h=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:m,length:v}=t.doc.line(o+h);return new Ug(m,v,i+a*h,a,0)}}lineAt(e,t,i,r,o){if(t==tl.ByHeight)return this.blockAt(e,i,r,o);if(t==tl.ByPosNoHeight){let{from:S,to:B}=i.doc.lineAt(e);return new Ug(S,B-S,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),m=a+h.length*c,v=h.number-s,x=r+a*v+c*(h.from-o-v);return new Ug(h.from,h.length,Math.max(r,Math.min(x,r+this.height-m)),m,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let m=e,v=r;m<=t;){let x=i.doc.lineAt(m);if(m==e){let B=x.number-a;v+=c*B+h*(e-o-B)}let S=c+h*x.length;s(new Ug(x.from,x.length,v,S,0)),v+=S,m=x.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof dA?i[i.length-1]=new dA(o.length+r):i.push(null,new dA(r-1))}if(e>0){let o=i[0];o instanceof dA?i[0]=new dA(e+o.length):i.unshift(new dA(e-1),null)}return Rh.of(i)}decomposeLeft(e,t){t.push(new dA(e-1),null)}decomposeRight(e,t){t.push(null,new dA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new dA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let m=e.doc.lineAt(a).length;s.length&&s.push(null);let v=r.heights[r.index++];c==-1?c=v:Math.abs(v-c)>=mw&&(c=-2);let x=new df(m,v);x.outdated=!1,s.push(x),a+=m+1}a<=o&&s.push(null,new dA(o-a).updateHeight(e,a));let h=Rh.of(s);return(c<0||Math.abs(h.height-this.height)>=mw||Math.abs(c-this.heightMetrics(e,t).perLine)>=mw)&&(_x=!0),xS(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class y2e extends Rh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==tl.ByHeight?e<s:e<a,h=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?h.to<a:h.from>a))return h;let m=t==tl.ByPosNoHeight?tl.ByPosNoHeight:tl.ByPos;return c?h.join(this.right.lineAt(a,m,i,s,a)):this.left.lineAt(a,m,i,r,o).join(h)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let h=this.lineAt(c,tl.ByPos,i,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,o,s),h.to>=e&&h.from<=t&&s(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&WN(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),WN(o,a)}return Rh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Rh.of(this.break?[e,null,t]:[e,t]):(this.left=xS(this.left,e),this.right=xS(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function WN(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof dA&&(i=n[e+1])instanceof dA&&n.splice(e-1,3,new dA(t.length+1+i.length))}const v2e=5;class ZU{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof df?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new df(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Fne(s,r,i)):(s||o||r>=v2e)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new df(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new dA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof df)return e;let t=new df(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof df)&&!this.isCovered?this.nodes.push(new df(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof df&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new ZU(i,e);return Vo.spans(t,i,r,o,0),o.finish(i)}}function b2e(n,e,t){let i=new C2e;return Vo.compare(n,e,t,i,0),i.changes}class C2e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&pw(e,t,this.changes,5)}}function _2e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let m=h,v=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&v.overflow!="visible"){let x=m.getBoundingClientRect();o=Math.max(o,x.left),s=Math.min(s,x.right),a=Math.max(a,x.top),c=Math.min(h==n.parentNode?r.innerHeight:c,x.bottom)}h=v.position=="absolute"||v.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function x2e(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function M2e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class UB{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return Or.replace({widget:new w2e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class w2e extends hv{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class QN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=qN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=il.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet($U).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new m2e(t),this.stateDeco=e.facet(p4).filter(i=>typeof i!="function"),this.heightMap=Rh.empty().applyChanges(this.stateDeco,ps.empty,this.heightOracle.setDoc(e.doc),[new gp(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Or.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new vM(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?qN:new XU(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(H2(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(p4).filter(m=>typeof m!="function");let r=e.changedRanges,o=gp.extendWithRanges(r,b2e(i,this.stateDeco,e?e.changes:xc.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);GN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||_x)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(yne)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?il.RTL:il.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,m=0;if(a.width&&a.height){let{scaleX:$,scaleY:N}=Yte(t,a);($>.005&&Math.abs(this.scaleX-$)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=$,this.scaleY=N,h|=16,s=c=!0)}let v=(parseInt(i.paddingTop)||0)*this.scaleY,x=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=x)&&(this.paddingTop=v,this.paddingBottom=x,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let S=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=S&&(this.scrollAnchorHeight=-1,this.scrollTop=S),this.scrolledToBottom=Hte(e.scrollDOM);let B=(this.printing?M2e:_2e)(t,this.paddingTop),R=B.top-this.pixelViewport.top,F=B.bottom-this.pixelViewport.bottom;this.pixelViewport=B;let j=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(j!=this.inView&&(this.inView=j,j&&(c=!0)),!this.inView&&!this.scrollTarget&&!x2e(e.dom))return 0;let W=a.width;if((this.contentDOMWidth!=W||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let $=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights($)&&(s=!0),s||r.lineWrapping&&Math.abs(W-this.contentDOMWidth)>r.charWidth){let{lineHeight:N,charWidth:Y,textHeight:z}=e.docView.measureTextSize();s=N>0&&r.refresh(o,N,Y,z,Math.max(5,W/Y),$),s&&(e.docView.minWidth=0,h|=16)}R>0&&F>0?m=Math.max(R,F):R<0&&F<0&&(m=Math.min(R,F)),GN();for(let N of this.viewports){let Y=N.from==this.viewport.from?$:e.docView.measureVisibleLineHeights(N);this.heightMap=(s?Rh.empty().applyChanges(this.stateDeco,ps.empty,this.heightOracle,[new gp(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new g2e(N.from,Y))}_x&&(h|=2)}let H=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return H&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||H)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new vM(r.lineAt(s-i*1e3,tl.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,tl.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=r.lineAt(h,tl.ByPos,o,0,0),x;t.y=="center"?x=(v.top+v.bottom)/2-m/2:t.y=="start"||t.y=="nearest"&&h<c.from?x=v.top:x=v.bottom-m,c=new vM(r.lineAt(x-1e3/2,tl.ByHeight,o,0,0).from,r.lineAt(x+m+1e3/2,tl.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new vM(this.heightMap.lineAt(i,tl.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,tl.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,tl.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,tl.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new UB(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=il.LTR&&!i)return[];let a=[],c=(m,v,x,S)=>{if(v-m<o)return;let B=this.state.selection.main,R=[B.from];B.empty||R.push(B.to);for(let j of R)if(j>m&&j<v){c(m,j-10,x,S),c(j+10,v,x,S);return}let F=E2e(e,j=>j.from>=x.from&&j.to<=x.to&&Math.abs(j.from-m)<o&&Math.abs(j.to-v)<o&&!R.some(W=>j.from<W&&j.to>W));if(!F){if(v<x.to&&t&&i&&t.visibleRanges.some(H=>H.from<=v&&H.to>=v)){let H=t.moveToLineBoundary(Sn.cursor(v),!1,!0).head;H>m&&(v=H)}let j=this.gapSize(x,m,v,S),W=i||j<2e6?j:2e6;F=new UB(m,v,j,W)}a.push(F)},h=m=>{if(m.length<s||m.type!=Th.Text)return;let v=S2e(m.from,m.to,this.stateDeco);if(v.total<s)return;let x=this.scrollTarget?this.scrollTarget.range.head:null,S,B;if(i){let R=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,F,j;if(x!=null){let W=CM(v,x),H=((this.visibleBottom-this.visibleTop)/2+R)/m.height;F=W-H,j=W+H}else F=(this.visibleTop-m.top-R)/m.height,j=(this.visibleBottom-m.top+R)/m.height;S=bM(v,F),B=bM(v,j)}else{let R=v.total*this.heightOracle.charWidth,F=r*this.heightOracle.charWidth,j=0;if(R>2e6)for(let Y of e)Y.from>=m.from&&Y.from<m.to&&Y.size!=Y.displaySize&&Y.from*this.heightOracle.charWidth+j<this.pixelViewport.left&&(j=Y.size-Y.displaySize);let W=this.pixelViewport.left+j,H=this.pixelViewport.right+j,$,N;if(x!=null){let Y=CM(v,x),z=((H-W)/2+F)/R;$=Y-z,N=Y+z}else $=(W-F)/R,N=(H+F)/R;S=bM(v,$),B=bM(v,N)}S>m.from&&c(m.from,S,m,v),B<m.to&&c(B,m.to,m,v)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return a}gapSize(e,t,i,r){let o=CM(r,i)-CM(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){UB.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Or.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Vo.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||H2(this.heightMap.lineAt(e,tl.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||H2(this.heightMap.lineAt(this.scaler.fromDOM(e),tl.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return H2(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vM{constructor(e,t){this.from=e,this.to=t}}function S2e(n,e,t){let i=[],r=n,o=0;return Vo.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function bM({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function CM(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function E2e(n,e){for(let t of n)if(e(t))return t}const qN={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class XU{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let h=t.lineAt(a,tl.ByPos,e,0,0).top,m=t.lineAt(c,tl.ByPos,e,0,0).bottom;return r+=m-h,{from:a,to:c,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof XU?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function H2(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Ug(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>H2(r,e)):n._content)}const _M=ki.define({combine:n=>n.join(" ")}),$R=ki.define({combine:n=>n.indexOf(!0)>-1}),VR=rv.newName(),zne=rv.newName(),jne=rv.newName(),Nne={"&light":"."+zne,"&dark":"."+jne};function HR(n,e,t){return new rv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const O2e=HR("."+VR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Nne),B2e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},LB=bi.ie&&bi.ie_version<=11;class I2e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new hxe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(bi.ie&&bi.ie_version<=11||bi.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&bi.android&&e.constructor.EDIT_CONTEXT!==!1&&!(bi.chrome&&bi.chrome_version<126)&&(this.editContext=new T2e(e),e.state.facet(t1)&&(e.contentDOM.editContext=this.editContext.editContext)),LB&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(t1)?i.root.activeElement!=this.dom:!fw(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(bi.ie&&bi.ie_version<=11||bi.android&&bi.chrome)&&!i.state.selection.main.empty&&r.focusNode&&y3(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=d4(e.root);if(!t)return!1;let i=bi.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&k2e(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=fw(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fxe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,B2e),LB&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),LB&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Y_(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&fw(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new Vxe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=Bne(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=YN(t,e.previousSibling||e.target.previousSibling,-1),r=YN(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(t1)!=e.state.facet(t1)&&(e.view.contentDOM.editContext=e.state.facet(t1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function YN(n,e,t){for(;e;){let i=Aa.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function $N(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return y3(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function k2e(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return $N(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?$N(n,t):null}class T2e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let h=c-a>i.text.length;a==this.from&&o<this.from?a=o:c==this.to&&o>this.to&&(c=o);let m=Ine(e.state.sliceDoc(a,c),i.text,(h?r.from:r.to)-a,h?"end":null);if(!m){let x=Sn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));x.main.eq(r)||e.dispatch({selection:x,userEvent:"select"});return}let v={from:m.from+a,to:m.toA+a,insert:ps.of(i.text.slice(m.from,m.toB).split(`
`))};if((bi.mac||bi.android)&&v.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(v={from:a,to:c,insert:ps.of([i.text.replace("."," ")])}),this.pendingContextChange=v,!e.state.readOnly){let x=this.to-this.from+(v.to-v.from+v.insert.length);HU(e,v,Sn.single(this.toEditorPos(i.selectionStart,x),this.toEditorPos(i.selectionEnd,x)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),v.from<v.to&&!v.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(c<h){let m=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(Or.mark({attributes:{style:m}}).range(c,h))}}}e.dispatch({effects:bne.of(Or.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=d4(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,h)=>{if(i)return;let m=h.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=m,this.to+=m;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),h.toString()),this.to+=m}t+=m}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class wi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||dxe(e.parent)||document,this.viewState=new QN(e.state||fs.create(e)),e.scrollTo&&e.scrollTo.is(mM)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(B_).map(r=>new RB(r));for(let r of this.plugins)r.update(this);this.observer=new I2e(this),this.inputState=new Jxe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new SN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Sc?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let x of e){if(x.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=x.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(x=>x.annotation(Une))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=Lne(o,s),c||(a=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(fs.phrases)!=this.state.facet(fs.phrases))return this.setState(o);r=_S.create(this,o,e),r.flags|=a;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let x of e){if(v&&(v=v.map(x.changes)),x.scrollIntoView){let{main:S}=x.state.selection;v=new $_(S.empty?S:Sn.cursor(S.head,S.head>S.anchor?-1:1))}for(let S of x.effects)S.is(mM)&&(v=S.value.clip(this.state))}this.viewState.update(r,v),this.bidiCache=MS.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet($2)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(x=>x.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(_M)!=r.state.facet(_M)&&(this.viewState.mustMeasureContent=!0),(t||i||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let x of this.state.facet(WR))try{x(r)}catch(S){kh(this.state,S,"update listener")}(c||m)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),m&&!Bne(this,m)&&h.force&&Y_(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new QN(e),this.plugins=e.facet(B_).map(i=>new RB(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new SN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(B_),i=e.state.facet(B_);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new RB(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){kh(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(Hte(i))o=-1,s=this.viewState.heightMap.height;else{let S=this.viewState.scrollAnchorAt(r);o=S.from,s=S.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(S=>{try{return S.read(this)}catch(B){return kh(this.state,B),VN}}),v=_S.create(this,this.state,[]),x=!1;v.flags|=c,t?t.flags|=c:t=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),x=this.docView.update(v),x&&this.docViewUpdate());for(let S=0;S<h.length;S++)if(m[S]!=VN)try{let B=h[S];B.write&&B.write(m[S],this)}catch(B){kh(this.state,B)}if(x&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let B=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(B>1||B<-1){r=r+B,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(WR))a(t)}get themeClasses(){return VR+" "+(this.state.facet($R)?jne:zne)+" "+this.state.facet(_M)}updateAttrs(){let e=HN(this,Cne,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(t1)?"true":"false",class:"cm-content",style:`${bi.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),HN(this,$U,t);let i=this.observer.ignore(()=>{let r=FR(this.contentDOM,this.contentAttrs,t),o=FR(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(wi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet($2);let e=this.state.facet(wi.cspNonce);rv.mount(this.root,this.styleModules.concat(O2e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return PB(this,e,kN(this,e,t,i))}moveByGroup(e,t){return PB(this,e,kN(this,e,t,i=>Wxe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return Sn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return Gxe(this,e,t,i)}moveVertically(e,t,i){return PB(this,e,Qxe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Sne(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Qy.find(o,e-r.from,-1,t)];return A6(i,s.dir==il.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(gne)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>R2e)return une(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||lne(o.isolates,i=wN(this,e))))return o.order;i||(i=wN(this,e));let r=Exe(e.text,t,i);return this.bidiCache.push(new MS(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||bi.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{$te(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return mM.of(new $_(typeof e=="number"?Sn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return mM.of(new $_(Sn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Eu.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Eu.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=rv.newName(),r=[_M.of(i),$2.of(HR(`.${i}`,e))];return t&&t.dark&&r.push($R.of(!0)),r}static baseTheme(e){return iC.lowest($2.of(HR("."+VR,e,Nne)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Aa.get(i)||Aa.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}wi.styleModule=$2;wi.inputHandler=pne;wi.clipboardInputFilter=qU;wi.clipboardOutputFilter=YU;wi.scrollHandler=vne;wi.focusChangeEffect=mne;wi.perLineTextDirection=gne;wi.exceptionSink=fne;wi.updateListener=WR;wi.editable=t1;wi.mouseSelectionStyle=dne;wi.dragMovesSelection=hne;wi.clickAddsSelectionRange=Ane;wi.decorations=p4;wi.outerDecorations=_ne;wi.atomicRanges=b5;wi.bidiIsolatedRanges=xne;wi.scrollMargins=Mne;wi.darkTheme=$R;wi.cspNonce=ki.define({combine:n=>n.length?n[0]:""});wi.contentAttributes=$U;wi.editorAttributes=Cne;wi.lineWrapping=wi.contentAttributes.of({class:"cm-lineWrapping"});wi.announce=oo.define();const R2e=4096,VN={};class MS{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:il.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new MS(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function HN(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&KR(s,t)}return t}const D2e=bi.mac?"mac":bi.windows?"win":bi.linux?"linux":"key";function P2e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function xM(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const U2e=iC.default(wi.domEventHandlers({keydown(n,e){return Wne(Gne(e.state),n,e,"editor")}})),JU=ki.define({enables:U2e}),ZN=new WeakMap;function Gne(n){let e=n.facet(JU),t=ZN.get(e);return t||ZN.set(e,t=F2e(e.reduce((i,r)=>i.concat(r),[]))),t}function L2e(n,e,t){return Wne(Gne(n.state),e,n,t)}let Ry=null;const K2e=4e3;function F2e(n,e=D2e){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,h,m)=>{var v,x;let S=t[s]||(t[s]=Object.create(null)),B=a.split(/ (?!$)/).map(j=>P2e(j,e));for(let j=1;j<B.length;j++){let W=B.slice(0,j).join(" ");r(W,!0),S[W]||(S[W]={preventDefault:!0,stopPropagation:!1,run:[H=>{let $=Ry={view:H,prefix:W,scope:s};return setTimeout(()=>{Ry==$&&(Ry=null)},K2e),!0}]})}let R=B.join(" ");r(R,!1);let F=S[R]||(S[R]={preventDefault:!1,stopPropagation:!1,run:((x=(v=S._any)===null||v===void 0?void 0:v.run)===null||x===void 0?void 0:x.slice())||[]});c&&F.run.push(c),h&&(F.preventDefault=!0),m&&(F.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let h of a){let m=t[h]||(t[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:v}=s;for(let x in m)m[x].run.push(S=>v(S,ZR))}let c=s[e]||s.key;if(c)for(let h of a)o(h,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(h,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let ZR=null;function Wne(n,e,t,i){ZR=e;let r=axe(e),o=xd(r,0),s=Pg(o)==r.length&&r!=" ",a="",c=!1,h=!1,m=!1;Ry&&Ry.view==t&&Ry.scope==i&&(a=Ry.prefix+" ",Tne.indexOf(e.keyCode)<0&&(h=!0,Ry=null));let v=new Set,x=F=>{if(F){for(let j of F.run)if(!v.has(j)&&(v.add(j),j(t)))return F.stopPropagation&&(m=!0),!0;F.preventDefault&&(F.stopPropagation&&(m=!0),h=!0)}return!1},S=n[i],B,R;return S&&(x(S[a+xM(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(bi.windows&&e.ctrlKey&&e.altKey)&&!(bi.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(B=ov[e.keyCode])&&B!=r?(x(S[a+xM(B,e,!0)])||e.shiftKey&&(R=h4[e.keyCode])!=r&&R!=B&&x(S[a+xM(R,e,!1)]))&&(c=!0):s&&e.shiftKey&&x(S[a+xM(r,e,!0)])&&(c=!0),!c&&x(S._any)&&(c=!0)),h&&(c=!0),c&&m&&e.stopPropagation(),ZR=null,c}class C5{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=Qne(e);return[new C5(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return z2e(e,t,i)}}function Qne(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==il.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function XN(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function z2e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==il.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=Qne(n),h=s.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),v=a.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),x=a.right-(m?parseInt(m.paddingRight):0),S=qR(n,i,1),B=qR(n,r,-1),R=S.type==Th.Text?S:null,F=B.type==Th.Text?B:null;if(R&&(n.lineWrapping||S.widgetLineBreaks)&&(R=XN(n,i,1,R)),F&&(n.lineWrapping||B.widgetLineBreaks)&&(F=XN(n,r,-1,F)),R&&F&&R.from==F.from&&R.to==F.to)return W(H(t.from,t.to,R));{let N=R?H(t.from,null,R):$(S,!1),Y=F?H(null,t.to,F):$(B,!0),z=[];return(R||S).to<(F||B).from-(R&&F?1:0)||S.widgetLineBreaks>1&&N.bottom+n.defaultLineHeight/2<Y.top?z.push(j(v,N.bottom,x,Y.top)):N.bottom<Y.top&&n.elementAtHeight((N.bottom+Y.top)/2).type==Th.Text&&(N.bottom=Y.top=(N.bottom+Y.top)/2),W(N).concat(z).concat(W(Y))}function j(N,Y,z,ne){return new C5(e,N-c.left,Y-c.top,z-N,ne-Y)}function W({top:N,bottom:Y,horizontal:z}){let ne=[];for(let ae=0;ae<z.length;ae+=2)ne.push(j(z[ae],N,z[ae+1],Y));return ne}function H(N,Y,z){let ne=1e9,ae=-1e9,ve=[];function pe(Te,je,Re,qe,nt){let ht=n.coordsAtPos(Te,Te==z.to?-2:2),ke=n.coordsAtPos(Re,Re==z.from?2:-2);!ht||!ke||(ne=Math.min(ht.top,ke.top,ne),ae=Math.max(ht.bottom,ke.bottom,ae),nt==il.LTR?ve.push(o&&je?v:ht.left,o&&qe?x:ke.right):ve.push(!o&&qe?v:ke.left,!o&&je?x:ht.right))}let be=N??z.from,Ee=Y??z.to;for(let Te of n.visibleRanges)if(Te.to>be&&Te.from<Ee)for(let je=Math.max(Te.from,be),Re=Math.min(Te.to,Ee);;){let qe=n.state.doc.lineAt(je);for(let nt of n.bidiSpans(qe)){let ht=nt.from+qe.from,ke=nt.to+qe.from;if(ht>=Re)break;ke>je&&pe(Math.max(ht,je),N==null&&ht<=be,Math.min(ke,Re),Y==null&&ke>=Ee,nt.dir)}if(je=qe.to+1,je>=Re)break}return ve.length==0&&pe(be,N==null,Ee,Y==null,n.textDirection),{top:ne,bottom:ae,horizontal:ve}}function $(N,Y){let z=a.top+(Y?N.top:N.bottom);return{top:z,bottom:z,horizontal:[]}}}function j2e(n,e){return n.constructor==e.constructor&&n.eq(e)}class N2e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(gw)!=e.state.facet(gw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(gw);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!j2e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,bi.safari&&bi.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const gw=ki.define();function qne(n){return[Eu.define(e=>new N2e(e,n)),gw.of(n)]}const m4=ki.define({combine(n){return Om(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function G2e(n={}){return[m4.of(n),W2e,Q2e,q2e,yne.of(!0)]}function Yne(n){return n.startState.facet(m4)!=n.state.facet(m4)}const W2e=qne({above:!0,markers(n){let{state:e}=n,t=e.facet(m4),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:Sn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of C5.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Yne(n);return t&&JN(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){JN(e.state,n)},class:"cm-cursorLayer"});function JN(n,e){e.style.animationDuration=n.facet(m4).cursorBlinkRate+"ms"}const Q2e=qne({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:C5.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Yne(n)},class:"cm-selectionLayer"}),q2e=iC.highest(wi.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),$ne=oo.define({map(n,e){return n==null?null:e.mapPos(n)}}),Z2=Ec.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is($ne)?i.value:t,n)}}),Y2e=Eu.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Z2);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Z2)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Z2),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Z2)!=n&&this.view.dispatch({effects:$ne.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function $2e(){return[Z2,Y2e]}function eG(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function V2e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class H2e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,h,m)=>r(m,h,h+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,h,m)=>{let v=i(a,c,h);v&&m(h,h+a[0].length,v)};else if(i)this.addMatch=(a,c,h,m)=>m(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new f1,i=t.add.bind(t);for(let{from:r,to:o}of V2e(e,this.maxLength))eG(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),h=c.to<a?e.state.doc.lineAt(a):c,m=Math.max(o.from,c.from),v=Math.min(o.to,h.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){m=s;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){v=a;break}}let x=[],S,B=(R,F,j)=>x.push(j.range(R,F));if(c==h)for(this.regexp.lastIndex=m-c.from;(S=this.regexp.exec(c.text))&&S.index<v-c.from;)this.addMatch(S,e,S.index+c.from,B);else eG(e.state.doc,this.regexp,m,v,(R,F)=>this.addMatch(F,e,R,B));t=t.update({filterFrom:m,filterTo:v,filter:(R,F)=>R<m||F>v,add:x})}}return t}}const XR=/x/.unicode!=null?"gu":"g",Z2e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,XR),X2e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let KB=null;function J2e(){var n;if(KB==null&&typeof document<"u"&&document.body){let e=document.body.style;KB=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return KB||!1}const yw=ki.define({combine(n){let e=Om(n,{render:null,specialChars:Z2e,addSpecialChars:null});return(e.replaceTabs=!J2e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,XR)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,XR)),e}});function e3e(n={}){return[yw.of(n),t3e()]}let tG=null;function t3e(){return tG||(tG=Eu.fromClass(class{constructor(n){this.view=n,this.decorations=Or.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(yw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new H2e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=xd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=Nx(s.text,a,i-s.from);return Or.replace({widget:new o3e((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Or.replace({widget:new r3e(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(yw);n.startState.facet(yw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const n3e="";function i3e(n){return n>=32?n3e:n==10?"":String.fromCharCode(9216+n)}class r3e extends hv{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=i3e(this.code),i=e.state.phrase("Control character")+" "+(X2e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class o3e extends hv{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function s3e(){return l3e}const a3e=Or.line({class:"cm-activeLine"}),l3e=Eu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(a3e.range(r.from)),e=r.from)}return Or.set(t)}},{decorations:n=>n.decorations}),JR=2e3;function u3e(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>JR||t.off>JR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let h=n.doc.line(c);h.length<=a&&o.push(Sn.range(h.from+s,h.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let h=n.doc.line(c),m=IR(h.text,s,n.tabSize,!0);if(m<0)o.push(Sn.cursor(h.to));else{let v=IR(h.text,a,n.tabSize);o.push(Sn.range(h.from+m,h.from+v))}}}return o}function c3e(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function nG(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>JR?-1:r==i.length?c3e(n,e.clientX):Nx(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function A3e(n,e){let t=nG(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=nG(n,r);if(!a)return i;let c=u3e(n.state,t,a);return c.length?s?Sn.create(c.concat(i.ranges)):Sn.create(c):i}}:null}function h3e(n){let e=(t=>t.altKey&&t.button==0);return wi.mouseSelectionStyle.of((t,i)=>e(i)?A3e(t,i):null)}const d3e={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},f3e={style:"cursor: crosshair"};function p3e(n={}){let[e,t]=d3e[n.key||"Alt"],i=Eu.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,wi.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?f3e:null})]}const C2="-10000px";class Vne{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],m=-1;if(h){for(let v=0;v<this.tooltips.length;v++){let x=this.tooltips[v];x&&x.create==h.create&&(m=v)}if(m<0)s[c]=this.createTooltipView(h,c?s[c-1]:null),a&&(a[c]=!!h.above);else{let v=s[c]=this.tooltipViews[m];a&&(a[c]=t[m]),v.update&&v.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,h)=>t[h]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function m3e(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const FB=ki.define({combine:n=>{var e,t,i;return{position:bi.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||m3e}}}),iG=new WeakMap,eL=Eu.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(FB);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Vne(n,d6,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(FB);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=C2,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(bi.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==C2&&o.style.left=="0px"){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=VU(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(FB).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:m}=h,v=n.pos[a],x=n.size[a];if(!v||c.clip!==!1&&(v.bottom<=Math.max(t.top,i.top)||v.top>=Math.min(t.bottom,i.bottom)||v.right<Math.max(t.left,i.left)-.1||v.left>Math.min(t.right,i.right)+.1)){m.style.top=C2;continue}let S=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,B=S?7:0,R=x.right-x.left,F=(e=iG.get(h))!==null&&e!==void 0?e:x.bottom-x.top,j=h.offset||y3e,W=this.view.textDirection==il.LTR,H=x.width>i.right-i.left?W?i.left:i.right-x.width:W?Math.max(i.left,Math.min(v.left-(S?14:0)+j.x,i.right-R)):Math.min(Math.max(i.left,v.left-R+(S?14:0)-j.x),i.right-R),$=this.above[a];!c.strictSide&&($?v.top-F-B-j.y<i.top:v.bottom+F+B+j.y>i.bottom)&&$==i.bottom-v.bottom>v.top-i.top&&($=this.above[a]=!$);let N=($?v.top-i.top:i.bottom-v.bottom)-B;if(N<F&&h.resize!==!1){if(N<this.view.defaultLineHeight){m.style.top=C2;continue}iG.set(h,F),m.style.height=(F=N)/o+"px"}else m.style.height&&(m.style.height="");let Y=$?v.top-F-B-j.y:v.bottom+B+j.y,z=H+R;if(h.overlap!==!0)for(let ne of s)ne.left<z&&ne.right>H&&ne.top<Y+F&&ne.bottom>Y&&(Y=$?ne.top-F-2-B:ne.bottom+B+2);if(this.position=="absolute"?(m.style.top=(Y-n.parent.top)/o+"px",rG(m,(H-n.parent.left)/r)):(m.style.top=Y/o+"px",rG(m,H/r)),S){let ne=v.left+(W?j.x:-j.x)-(H+14-7);S.style.left=ne/r+"px"}h.overlap!==!0&&s.push({left:H,top:Y,right:z,bottom:Y+F}),m.classList.toggle("cm-tooltip-above",$),m.classList.toggle("cm-tooltip-below",!$),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=C2}},{eventObservers:{scroll(){this.maybeMeasure()}}});function rG(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const g3e=wi.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),y3e={x:0,y:0},d6=ki.define({enables:[eL,g3e]}),wS=ki.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class f6{static create(e){return new f6(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Vne(e,wS,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const v3e=d6.compute([wS],n=>{let e=n.facet(wS);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:f6.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class b3e{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof Wy)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(m=>m.from<=r&&m.to>=r),h=c&&c.dir==il.RTL?-1:1;o=t.x<a.left?-h:h}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>kh(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(eL),t=e?e.manager.tooltips.findIndex(i=>i.create==f6.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!C3e(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!_3e(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const MM=4;function C3e(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-MM&&e.clientX<=i+MM&&e.clientY>=r-MM&&e.clientY<=o+MM}function _3e(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function x3e(n,e={}){let t=oo.define(),i=Ec.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Bh.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),s.push(h)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(M3e)&&(r=[]);return r},provide:r=>wS.from(r)});return{active:i,extension:[i,Eu.define(r=>new b3e(r,n,i,t,e.hoverTime||300)),v3e]}}function Hne(n,e){let t=n.plugin(eL);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const M3e=oo.define(),oG=ki.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function g4(n,e){let t=n.plugin(Zne),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Zne=Eu.fromClass(class{constructor(n){this.input=n.state.facet(y4),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(oG);this.top=new wM(n,!0,e.topContainer),this.bottom=new wM(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(oG);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new wM(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new wM(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(y4);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let h=this.specs.indexOf(c),m;h<0?(m=c(n.view),a.push(m)):(m=this.panels[h],m.update&&m.update(n)),r.push(m),(m.top?o:s).push(m)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>wi.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class wM{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=sG(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=sG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function sG(n){let e=n.nextSibling;return n.remove(),e}const y4=ki.define({enables:Zne});class r0 extends Wb{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}r0.prototype.elementClass="";r0.prototype.toDOM=void 0;r0.prototype.mapMode=Bh.TrackBefore;r0.prototype.startSide=r0.prototype.endSide=-1;r0.prototype.point=!0;const vw=ki.define(),w3e=ki.define(),S3e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Vo.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},C3=ki.define();function Xne(n){return[Jne(),C3.of({...S3e,...n})]}const aG=ki.define({combine:n=>n.some(e=>e)});function Jne(n){return[E3e]}const E3e=Eu.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(C3).map(e=>new uG(n,e)),this.fixed=!n.state.facet(aG);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(aG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Vo.iter(this.view.state.facet(vw),this.view.viewport.from),i=[],r=this.gutters.map(o=>new O3e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Th.Text&&s){eD(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==Th.Text){eD(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(C3),t=n.state.facet(C3),i=n.docChanged||n.heightChanged||n.viewportChanged||!Vo.eq(n.startState.facet(vw),n.state.facet(vw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new uG(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>wi.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==il.LTR?{left:i,right:r}:{right:i,left:r}})});function lG(n){return Array.isArray(n)?n:[n]}function eD(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class O3e{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Vo.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new eie(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];eD(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(w3e)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class uG{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=lG(t.markers(e)),t.initialSpacer&&(this.spacer=new eie(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=lG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Vo.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class eie{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),B3e(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,h=!1;if(c){let m=c.elementClass;m&&(i+=" "+m);for(let v=s;v<this.markers.length;v++)if(this.markers[v].compare(c)){a=v,h=!0;break}}else a=this.markers.length;for(;s<a;){let m=this.markers[s++];if(m.toDOM){m.destroy(r);let v=r.nextSibling;r.remove(),r=v}}if(!c)break;c.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),h&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function B3e(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const I3e=ki.define(),k3e=ki.define(),I_=ki.define({combine(n){return Om(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,h)=>o(a,c,h)||s(a,c,h):s}return i}})}});class zB extends r0{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function jB(n,e){return n.state.facet(I_).formatNumber(e,n.state)}const T3e=C3.compute([I_],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(I3e)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new zB(jB(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(k3e)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(I_)!=e.state.facet(I_),initialSpacer(e){return new zB(jB(e,cG(e.state.doc.lines)))},updateSpacer(e,t){let i=jB(t.view,cG(t.view.state.doc.lines));return i==e.number?e:new zB(i)},domEventHandlers:n.facet(I_).domEventHandlers,side:"before"}));function R3e(n={}){return[I_.of(n),Jne(),T3e]}function cG(n){let e=9;for(;e<n;)e=e*10+9;return e}const D3e=new class extends r0{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},P3e=vw.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(D3e.range(r)))}return Vo.of(e)});function U3e(){return P3e}const tie=1024;let L3e=0;class NB{constructor(e,t){this.from=e,this.to=t}}class Oo{constructor(e={}){this.id=L3e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Id.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Oo.closedBy=new Oo({deserialize:n=>n.split(" ")});Oo.openedBy=new Oo({deserialize:n=>n.split(" ")});Oo.group=new Oo({deserialize:n=>n.split(" ")});Oo.isolate=new Oo({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Oo.contextHash=new Oo({perNode:!0});Oo.lookAhead=new Oo({perNode:!0});Oo.mounted=new Oo({perNode:!0});class SS{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Oo.mounted.id]}}const K3e=Object.create(null);class Id{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):K3e,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Id(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Oo.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Oo.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}Id.none=new Id("",Object.create(null),0,8);class tL{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],c=s[0];c.combine&&c.id in r&&(a=c.combine(r[c.id],a)),r[c.id]=a}}t.push(r?new Id(i.name,r,i.id,i.flags):i)}return new tL(t)}}const SM=new WeakMap,AG=new WeakMap;var Hc;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Hc||(Hc={}));class tc{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=SS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new nD(this.topNode,e)}cursorAt(e,t=0,i=0){let r=SM.get(this)||this.topNode,o=new nD(r);return o.moveTo(e,t),SM.set(this,o._tree),o}get topNode(){return new yp(this,0,0,null)}resolve(e,t=0){let i=v4(SM.get(this)||this.topNode,e,t,!1);return SM.set(this,i),i}resolveInner(e,t=0){let i=v4(AG.get(this)||this.topNode,e,t,!0);return AG.set(this,i),i}resolveStack(e,t=0){return j3e(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&Hc.IncludeAnonymous)>0;for(let c=this.cursor(s|Hc.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:rL(Id.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new tc(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new tc(Id.none,t,i,r)))}static build(e){return N3e(e)}}tc.empty=new tc(Id.none,[],[],0);class nL{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new nL(this.buffer,this.index)}}class av{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Id.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(nie(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let h=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,h)}return new av(o,s,this.set)}}function nie(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function v4(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof yp&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:Hc.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof yp&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class iie{cursor(e=0){return new nD(this,e)}getChild(e,t=null,i=null){let r=hG(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return hG(this,e,t,i)}resolve(e,t=0){return v4(this,e,t,!1)}resolveInner(e,t=0){return v4(this,e,t,!0)}matchContext(e){return tD(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class yp extends iie{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,h=t>0?a.length:-1;e!=h;e+=t){let m=a[e],v=c[e]+s.from;if(nie(r,i,v,v+m.length)){if(m instanceof av){if(o&Hc.ExcludeBuffers)continue;let x=m.findChild(0,m.buffer.length,t,i-v,r);if(x>-1)return new qy(new F3e(s,m,e,v),null,x)}else if(o&Hc.IncludeAnonymous||!m.type.isAnonymous||iL(m)){let x;if(!(o&Hc.IgnoreMounts)&&(x=SS.get(m))&&!x.overlay)return new yp(x.tree,v,e,s);let S=new yp(m,v,e,s);return o&Hc.IncludeAnonymous||!S.type.isAnonymous?S:S.nextChild(t<0?m.children.length-1:0,t,i,r)}}}if(o&Hc.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Hc.IgnoreOverlays)&&(r=SS.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new yp(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function hG(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function tD(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class F3e{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class qy extends iie{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new qy(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Hc.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new qy(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new qy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new tc(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function rie(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof yp&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new z3e(r,t)}class z3e{constructor(e,t){this.heads=e,this.node=t}get next(){return rie(this.heads)}}function j3e(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof yp?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=SS.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new yp(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(v4(a,e,t,!1))}}return r?rie(r):i}class nD{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof yp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof yp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Hc.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Hc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Hc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&Hc.IncludeAnonymous||a instanceof av||!a.type.isAnonymous||iL(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new qy(this.buffer,t,this.stack[r]);return this.bufferNode=new qy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return tD(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return tD(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function iL(n){return n.children.some(e=>e instanceof av||!e.type.isAnonymous||iL(e))}function N3e(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=tie,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new nL(t,t.length):t,c=i.types,h=0,m=0;function v(N,Y,z,ne,ae,ve){let{id:pe,start:be,end:Ee,size:Te}=a,je=m,Re=h;if(Te<0)if(a.next(),Te==-1){let Oe=o[pe];z.push(Oe),ne.push(be-N);return}else if(Te==-3){h=pe;return}else if(Te==-4){m=pe;return}else throw new RangeError(`Unrecognized record size: ${Te}`);let qe=c[pe],nt,ht,ke=be-N;if(Ee-be<=r&&(ht=F(a.pos-Y,ae))){let Oe=new Uint16Array(ht.size-ht.skip),ze=a.pos-ht.size,we=Oe.length;for(;a.pos>ze;)we=j(ht.start,Oe,we);nt=new av(Oe,Ee-ht.start,i),ke=ht.start-N}else{let Oe=a.pos-Te;a.next();let ze=[],we=[],At=pe>=s?pe:-1,it=0,Ct=Ee;for(;a.pos>Oe;)At>=0&&a.id==At&&a.size>=0?(a.end<=Ct-r&&(B(ze,we,be,it,a.end,Ct,At,je,Re),it=ze.length,Ct=a.end),a.next()):ve>2500?x(be,Oe,ze,we):v(be,Oe,ze,we,At,ve+1);if(At>=0&&it>0&&it<ze.length&&B(ze,we,be,it,be,Ct,At,je,Re),ze.reverse(),we.reverse(),At>-1&&it>0){let It=S(qe,Re);nt=rL(qe,ze,we,0,ze.length,0,Ee-be,It,It)}else nt=R(qe,ze,we,Ee-be,je-Ee,Re)}z.push(nt),ne.push(ke)}function x(N,Y,z,ne){let ae=[],ve=0,pe=-1;for(;a.pos>Y;){let{id:be,start:Ee,end:Te,size:je}=a;if(je>4)a.next();else{if(pe>-1&&Ee<pe)break;pe<0&&(pe=Te-r),ae.push(be,Ee,Te),ve++,a.next()}}if(ve){let be=new Uint16Array(ve*4),Ee=ae[ae.length-2];for(let Te=ae.length-3,je=0;Te>=0;Te-=3)be[je++]=ae[Te],be[je++]=ae[Te+1]-Ee,be[je++]=ae[Te+2]-Ee,be[je++]=je;z.push(new av(be,ae[2]-Ee,i)),ne.push(Ee-N)}}function S(N,Y){return(z,ne,ae)=>{let ve=0,pe=z.length-1,be,Ee;if(pe>=0&&(be=z[pe])instanceof tc){if(!pe&&be.type==N&&be.length==ae)return be;(Ee=be.prop(Oo.lookAhead))&&(ve=ne[pe]+be.length+Ee)}return R(N,z,ne,ae,ve,Y)}}function B(N,Y,z,ne,ae,ve,pe,be,Ee){let Te=[],je=[];for(;N.length>ne;)Te.push(N.pop()),je.push(Y.pop()+z-ae);N.push(R(i.types[pe],Te,je,ve-ae,be-ve,Ee)),Y.push(ae-z)}function R(N,Y,z,ne,ae,ve,pe){if(ve){let be=[Oo.contextHash,ve];pe=pe?[be].concat(pe):[be]}if(ae>25){let be=[Oo.lookAhead,ae];pe=pe?[be].concat(pe):[be]}return new tc(N,Y,z,ne,pe)}function F(N,Y){let z=a.fork(),ne=0,ae=0,ve=0,pe=z.end-r,be={size:0,start:0,skip:0};e:for(let Ee=z.pos-N;z.pos>Ee;){let Te=z.size;if(z.id==Y&&Te>=0){be.size=ne,be.start=ae,be.skip=ve,ve+=4,ne+=4,z.next();continue}let je=z.pos-Te;if(Te<0||je<Ee||z.start<pe)break;let Re=z.id>=s?4:0,qe=z.start;for(z.next();z.pos>je;){if(z.size<0)if(z.size==-3)Re+=4;else break e;else z.id>=s&&(Re+=4);z.next()}ae=qe,ne+=Te,ve+=Re}return(Y<0||ne==N)&&(be.size=ne,be.start=ae,be.skip=ve),be.size>4?be:void 0}function j(N,Y,z){let{id:ne,start:ae,end:ve,size:pe}=a;if(a.next(),pe>=0&&ne<s){let be=z;if(pe>4){let Ee=a.pos-(pe-4);for(;a.pos>Ee;)z=j(N,Y,z)}Y[--z]=be,Y[--z]=ve-N,Y[--z]=ae-N,Y[--z]=ne}else pe==-3?h=ne:pe==-4&&(m=ne);return z}let W=[],H=[];for(;a.pos>0;)v(n.start||0,n.bufferStart||0,W,H,-1,0);let $=(e=n.length)!==null&&e!==void 0?e:W.length?H[0]+W[0].length:0;return new tc(c[n.topID],W.reverse(),H.reverse(),$)}const dG=new WeakMap;function bw(n,e){if(!n.isAnonymous||e instanceof av||e.type!=n)return 1;let t=dG.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof tc)){t=1;break}t+=bw(n,i)}dG.set(e,t)}return t}function rL(n,e,t,i,r,o,s,a,c){let h=0;for(let B=i;B<r;B++)h+=bw(n,e[B]);let m=Math.ceil(h*1.5/8),v=[],x=[];function S(B,R,F,j,W){for(let H=F;H<j;){let $=H,N=R[H],Y=bw(n,B[H]);for(H++;H<j;H++){let z=bw(n,B[H]);if(Y+z>=m)break;Y+=z}if(H==$+1){if(Y>m){let z=B[$];S(z.children,z.positions,0,z.children.length,R[$]+W);continue}v.push(B[$])}else{let z=R[H-1]+B[H-1].length-N;v.push(rL(n,B,R,$,H,N,z,null,c))}x.push(N+W-o)}}return S(e,t,i,r,0),(a||c)(v,x,s)}class Tb{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Tb(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let m=a<t.length?t[a]:null,v=m?m.fromA:1e9;if(v-c>=i)for(;s&&s.from<v;){let x=s;if(c>=x.from||v<=x.to||h){let S=Math.max(x.from,c)-h,B=Math.min(x.to,v)-h;x=S>=B?null:new Tb(S,B,x.tree,x.offset+h,a>0,!!m)}if(x&&r.push(x),s.to>v)break;s=o<e.length?e[o++]:null}if(!m)break;c=m.toA,h=m.toA-m.toB}return r}}class oie{startParse(e,t,i){return typeof e=="string"&&(e=new G3e(e)),i=i?i.length?i.map(r=>new NB(r.from,r.to)):[new NB(0,0)]:[new NB(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class G3e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Oo({perNode:!0});let W3e=0;class ap{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=W3e++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof ap&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new ap(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new ES(e);return i=>i.modified.indexOf(t)>-1?i:ES.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let Q3e=0;class ES{constructor(e){this.name=e,this.instances=[],this.id=Q3e++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&q3e(t,a.modified));if(i)return i;let r=[],o=new ap(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=Y3e(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(ES.get(a,c));return o}}function q3e(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Y3e(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function sie(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let v=0;;){if(a=="..."&&v>0&&v+3==r.length){s=1;break}let x=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!x)throw new RangeError("Invalid path: "+r);if(o.push(x[0]=="*"?"":x[0][0]=='"'?JSON.parse(x[0]):x[0]),v+=x[0].length,v==r.length)break;let S=r[v++];if(v==r.length&&S=="!"){s=0;break}if(S!="/")throw new RangeError("Invalid path: "+r);a=r.slice(v)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+r);let m=new b4(i,s,c>0?o.slice(0,c):null);e[h]=m.sort(e[h])}}return aie.add(e)}const aie=new Oo({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new b4(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class b4{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}b4.empty=new b4([],2,null);function lie(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let h=t[c.id];if(h){s=s?s+" "+h:h;break}}return s},scope:i}}function $3e(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function V3e(n,e,t,i=0,r=n.length){let o=new H3e(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class H3e{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(S=>!S.scope||S.scope(s)));let h=r,m=Z3e(e)||b4.empty,v=$3e(o,m.tags);if(v&&(h&&(h+=" "),h+=v,m.mode==1&&(r+=(r?" ":"")+v)),this.startSpan(Math.max(t,a),h),m.opaque)return;let x=e.tree&&e.tree.prop(Oo.mounted);if(x&&x.overlay){let S=e.node.enter(x.overlay[0].from+a,1),B=this.highlighters.filter(F=>!F.scope||F.scope(x.tree.type)),R=e.firstChild();for(let F=0,j=a;;F++){let W=F<x.overlay.length?x.overlay[F]:null,H=W?W.from+a:c,$=Math.max(t,j),N=Math.min(i,H);if($<N&&R)for(;e.from<N&&(this.highlightRange(e,$,N,r,o),this.startSpan(Math.min(N,e.to),h),!(e.to>=H||!e.nextSibling())););if(!W||H>i)break;j=W.to+a,j>t&&(this.highlightRange(S.cursor(),Math.max(t,W.from+a),Math.min(i,j),"",B),this.startSpan(Math.min(i,j),h))}R&&e.parent()}else if(e.firstChild()){x&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function Z3e(n){let e=n.type.prop(aie);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ui=ap.define,EM=ui(),Iy=ui(),fG=ui(Iy),pG=ui(Iy),ky=ui(),OM=ui(ky),GB=ui(ky),Sg=ui(),nb=ui(Sg),Mg=ui(),wg=ui(),iD=ui(),_2=ui(iD),BM=ui(),cn={comment:EM,lineComment:ui(EM),blockComment:ui(EM),docComment:ui(EM),name:Iy,variableName:ui(Iy),typeName:fG,tagName:ui(fG),propertyName:pG,attributeName:ui(pG),className:ui(Iy),labelName:ui(Iy),namespace:ui(Iy),macroName:ui(Iy),literal:ky,string:OM,docString:ui(OM),character:ui(OM),attributeValue:ui(OM),number:GB,integer:ui(GB),float:ui(GB),bool:ui(ky),regexp:ui(ky),escape:ui(ky),color:ui(ky),url:ui(ky),keyword:Mg,self:ui(Mg),null:ui(Mg),atom:ui(Mg),unit:ui(Mg),modifier:ui(Mg),operatorKeyword:ui(Mg),controlKeyword:ui(Mg),definitionKeyword:ui(Mg),moduleKeyword:ui(Mg),operator:wg,derefOperator:ui(wg),arithmeticOperator:ui(wg),logicOperator:ui(wg),bitwiseOperator:ui(wg),compareOperator:ui(wg),updateOperator:ui(wg),definitionOperator:ui(wg),typeOperator:ui(wg),controlOperator:ui(wg),punctuation:iD,separator:ui(iD),bracket:_2,angleBracket:ui(_2),squareBracket:ui(_2),paren:ui(_2),brace:ui(_2),content:Sg,heading:nb,heading1:ui(nb),heading2:ui(nb),heading3:ui(nb),heading4:ui(nb),heading5:ui(nb),heading6:ui(nb),contentSeparator:ui(Sg),list:ui(Sg),quote:ui(Sg),emphasis:ui(Sg),strong:ui(Sg),link:ui(Sg),monospace:ui(Sg),strikethrough:ui(Sg),inserted:ui(),deleted:ui(),changed:ui(),invalid:ui(),meta:BM,documentMeta:ui(BM),annotation:ui(BM),processingInstruction:ui(BM),definition:ap.defineModifier("definition"),constant:ap.defineModifier("constant"),function:ap.defineModifier("function"),standard:ap.defineModifier("standard"),local:ap.defineModifier("local"),special:ap.defineModifier("special")};for(let n in cn){let e=cn[n];e instanceof ap&&(e.name=n)}lie([{tag:cn.link,class:"tok-link"},{tag:cn.heading,class:"tok-heading"},{tag:cn.emphasis,class:"tok-emphasis"},{tag:cn.strong,class:"tok-strong"},{tag:cn.keyword,class:"tok-keyword"},{tag:cn.atom,class:"tok-atom"},{tag:cn.bool,class:"tok-bool"},{tag:cn.url,class:"tok-url"},{tag:cn.labelName,class:"tok-labelName"},{tag:cn.inserted,class:"tok-inserted"},{tag:cn.deleted,class:"tok-deleted"},{tag:cn.literal,class:"tok-literal"},{tag:cn.string,class:"tok-string"},{tag:cn.number,class:"tok-number"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],class:"tok-string2"},{tag:cn.variableName,class:"tok-variableName"},{tag:cn.local(cn.variableName),class:"tok-variableName tok-local"},{tag:cn.definition(cn.variableName),class:"tok-variableName tok-definition"},{tag:cn.special(cn.variableName),class:"tok-variableName2"},{tag:cn.definition(cn.propertyName),class:"tok-propertyName tok-definition"},{tag:cn.typeName,class:"tok-typeName"},{tag:cn.namespace,class:"tok-namespace"},{tag:cn.className,class:"tok-className"},{tag:cn.macroName,class:"tok-macroName"},{tag:cn.propertyName,class:"tok-propertyName"},{tag:cn.operator,class:"tok-operator"},{tag:cn.comment,class:"tok-comment"},{tag:cn.meta,class:"tok-meta"},{tag:cn.invalid,class:"tok-invalid"},{tag:cn.punctuation,class:"tok-punctuation"}]);var WB;const k_=new Oo;function X3e(n){return ki.define({combine:n?e=>e.concat(n):void 0})}const J3e=new Oo;class mm{constructor(e,t,i=[],r=""){this.data=e,this.name=r,fs.prototype.hasOwnProperty("tree")||Object.defineProperty(fs.prototype,"tree",{get(){return $A(this)}}),this.parser=t,this.extension=[lv.of(this),fs.languageData.of((o,s,a)=>{let c=mG(o,s,a),h=c.type.prop(k_);if(!h)return[];let m=o.facet(h),v=c.type.prop(J3e);if(v){let x=c.resolve(s-c.from,a);for(let S of v)if(S.test(x,o)){let B=o.facet(S.facet);return S.type=="replace"?B:B.concat(m)}}return m})].concat(i)}isActiveAt(e,t,i=-1){return mG(e,t,i).type.prop(k_)==this.data}findRegions(e){let t=e.facet(lv);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(k_)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(Oo.mounted);if(a){if(a.tree.prop(k_)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof tc&&r(h,o.positions[c]+s)}};return r($A(e),0),i}get allowsNesting(){return!0}}mm.setState=oo.define();function mG(n,e,t){let i=n.facet(lv),r=$A(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,Hc.ExcludeBuffers))o.type.isTop&&(r=o);return r}class OS extends mm{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=X3e(e.languageData);return new OS(t,e.parser.configure({props:[k_.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new OS(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function $A(n){let e=n.field(mm.state,!1);return e?e.tree:tc.empty}class e4e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let x2=null;class BS{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new BS(e,t,[],tc.empty,0,i,[],null)}startParse(){return this.parser.startParse(new e4e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=tc.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Tb.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Tb.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=x2;x2=this;try{return e()}finally{x2=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gG(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,m,v,x)=>c.push({fromA:h,toA:m,fromB:v,toB:x})),i=Tb.applyChanges(i,c),r=tc.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),v=e.mapPos(h.to,-1);m<v&&a.push({from:m,to:v})}}}return new BS(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=gG(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends oie{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=x2;if(c){for(let h of r)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new tc(Id.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return x2}}function gG(n,e,t){return Tb.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class xx{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new xx(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=BS.create(e.facet(lv).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new xx(i)}}mm.state=Ec.define({create:xx.init,update(n,e){for(let t of e.effects)if(t.is(mm.setState))return t.value;return e.startState.facet(lv)!=e.state.facet(lv)?xx.init(e.state):n.apply(e)}});let uie=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(uie=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const QB=typeof navigator<"u"&&(!((WB=navigator.scheduling)===null||WB===void 0)&&WB.isInputPending)?()=>navigator.scheduling.isInputPending():null,t4e=Eu.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(mm.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(mm.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=uie(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(mm.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!QB?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>QB&&QB()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:mm.setState.of(new xx(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>kh(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),lv=ki.define({combine(n){return n.length?n[0]:null},enables:n=>[mm.state,t4e,wi.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class n4e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const i4e=ki.define(),oL=ki.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function IS(n){let e=n.facet(oL);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function C4(n,e){let t="",i=n.tabSize,r=n.facet(oL)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function sL(n,e){n instanceof fs&&(n=new p6(n));for(let i of n.state.facet(i4e)){let r=i(n,e);if(r!==void 0)return r}let t=$A(n.state);return t.length>=e?r4e(n,t,e):null}class p6{constructor(e,t={}){this.state=e,this.options=t,this.unit=IS(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Nx(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const cie=new Oo;function r4e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return Aie(i,n,t)}function Aie(n,e,t){for(let i=n;i;i=i.next){let r=s4e(i.node);if(r)return r(aL.create(e,t,i))}return 0}function o4e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function s4e(n){let e=n.type.prop(cie);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Oo.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>c4e(s,!0,1,void 0,o&&!o4e(s)?r.from:void 0)}return n.parent==null?a4e:null}function a4e(){return 0}class aL extends p6{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new aL(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(l4e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Aie(this.context.next,this.base,this.pos)}}function l4e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function u4e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let h=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+h}}a=c.to}}function c4e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=u4e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function yG({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const A4e=200;function h4e(){return fs.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+A4e)return n;let o=t.sliceString(r.from,i);if(!e.some(h=>h.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:h}of s.selection.ranges){let m=s.doc.lineAt(h);if(m.from==a)continue;a=m.from;let v=sL(s,m.from);if(v==null)continue;let x=/^\s*/.exec(m.text)[0],S=C4(s,v);x!=S&&c.push({from:m.from,to:m.from+x.length,insert:S})}return c.length?[n,{changes:c,sequential:!0}]:n})}const d4e=ki.define(),hie=new Oo;function f4e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function p4e(n,e,t){let i=$A(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(hie);if(c&&(a.to<i.length-50||i.length==n.doc.length||!m4e(a))){let h=c(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function m4e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function kS(n,e,t){for(let i of n.facet(d4e)){let r=i(n,e,t);if(r)return r}return p4e(n,e,t)}function die(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const m6=oo.define({map:die}),_5=oo.define({map:die});function fie(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const $b=Ec.define({create(){return Or.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=vG(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(m6)&&!g4e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(gie),r=i?Or.replace({widget:new M4e(i(e.state,t.value))}):bG;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(_5)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=vG(n,e.selection.main.head)),n},provide:n=>wi.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(bG.range(i,r))}return Or.set(e,!0)}});function vG(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function TS(n,e,t){var i;let r=null;return(i=n.field($b,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function g4e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function pie(n,e){return n.field($b,!1)?e:e.concat(oo.appendConfig.of(yie()))}const y4e=n=>{for(let e of fie(n)){let t=kS(n.state,e.from,e.to);if(t)return n.dispatch({effects:pie(n.state,[m6.of(t),mie(n,t)])}),!0}return!1},v4e=n=>{if(!n.state.field($b,!1))return!1;let e=[];for(let t of fie(n)){let i=TS(n.state,t.from,t.to);i&&e.push(_5.of(i),mie(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function mie(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return wi.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const b4e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=kS(e,r.from,r.to);o&&t.push(m6.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:pie(n.state,t)}),!!t.length},C4e=n=>{let e=n.state.field($b,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(_5.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},_4e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:y4e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:v4e},{key:"Ctrl-Alt-[",run:b4e},{key:"Ctrl-Alt-]",run:C4e}],x4e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},gie=ki.define({combine(n){return Om(n,x4e)}});function yie(n){return[$b,E4e]}function vie(n,e){let{state:t}=n,i=t.facet(gie),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=TS(n.state,a.from,a.to);c&&n.dispatch({effects:_5.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const bG=Or.replace({widget:new class extends hv{toDOM(n){return vie(n,null)}}});class M4e extends hv{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return vie(e,this.value)}}const w4e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class qB extends r0{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function S4e(n={}){let e={...w4e,...n},t=new qB(e,!0),i=new qB(e,!1),r=Eu.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(lv)!=s.state.facet(lv)||s.startState.field($b,!1)!=s.state.field($b,!1)||$A(s.startState)!=$A(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new f1;for(let c of s.viewportLineBlocks){let h=TS(s.state,c.from,c.to)?i:kS(s.state,c.from,c.to)?t:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:o}=e;return[r,Xne({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||Vo.empty},initialSpacer(){return new qB(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let h=TS(s.state,a.from,a.to);if(h)return s.dispatch({effects:_5.of(h)}),!0;let m=kS(s.state,a.from,a.to);return m?(s.dispatch({effects:m6.of(m)}),!0):!1}}}),yie()]}const E4e=wi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class x5{constructor(e,t){this.specs=e;let i;function r(a){let c=rv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof mm?a=>a.prop(k_)==s.data:s?a=>a==s:void 0,this.style=lie(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new rv(i):null,this.themeType=t.themeType}static define(e,t){return new x5(e,t||{})}}const rD=ki.define(),bie=ki.define({combine(n){return n.length?[n[0]]:null}});function YB(n){let e=n.facet(rD);return e.length?e:n.facet(bie)}function Cie(n,e){let t=[B4e],i;return n instanceof x5&&(n.module&&t.push(wi.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(bie.of(n)):i?t.push(rD.computeN([wi.darkTheme],r=>r.facet(wi.darkTheme)==(i=="dark")?[n]:[])):t.push(rD.of(n)),t}class O4e{constructor(e){this.markCache=Object.create(null),this.tree=$A(e.state),this.decorations=this.buildDeco(e,YB(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=$A(e.state),i=YB(e.state),r=i!=YB(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Or.none;let i=new f1;for(let{from:r,to:o}of e.visibleRanges)V3e(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=Or.mark({class:c})))},r,o);return i.finish()}}const B4e=iC.high(Eu.fromClass(O4e,{decorations:n=>n.decorations})),I4e=x5.define([{tag:cn.meta,color:"#404740"},{tag:cn.link,textDecoration:"underline"},{tag:cn.heading,textDecoration:"underline",fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strong,fontWeight:"bold"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.keyword,color:"#708"},{tag:[cn.atom,cn.bool,cn.url,cn.contentSeparator,cn.labelName],color:"#219"},{tag:[cn.literal,cn.inserted],color:"#164"},{tag:[cn.string,cn.deleted],color:"#a11"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],color:"#e40"},{tag:cn.definition(cn.variableName),color:"#00f"},{tag:cn.local(cn.variableName),color:"#30a"},{tag:[cn.typeName,cn.namespace],color:"#085"},{tag:cn.className,color:"#167"},{tag:[cn.special(cn.variableName),cn.macroName],color:"#256"},{tag:cn.definition(cn.propertyName),color:"#00c"},{tag:cn.comment,color:"#940"},{tag:cn.invalid,color:"#f00"}]),k4e=wi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_ie=1e4,xie="()[]{}",Mie=ki.define({combine(n){return Om(n,{afterCursor:!0,brackets:xie,maxScanDistance:_ie,renderMatch:D4e})}}),T4e=Or.mark({class:"cm-matchingBracket"}),R4e=Or.mark({class:"cm-nonmatchingBracket"});function D4e(n){let e=[],t=n.matched?T4e:R4e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const P4e=Ec.define({create(){return Or.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Mie);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=Gg(e.state,r.head,-1,i)||r.head>0&&Gg(e.state,r.head-1,1,i)||i.afterCursor&&(Gg(e.state,r.head,1,i)||r.head<e.state.doc.length&&Gg(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Or.set(t,!0)},provide:n=>wi.decorations.from(n)}),U4e=[P4e,k4e];function L4e(n={}){return[Mie.of(n),U4e]}const K4e=new Oo;function oD(n,e,t){let i=n.prop(e<0?Oo.openedBy:Oo.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function sD(n){let e=n.type.prop(K4e);return e?e(n.node):n}function Gg(n,e,t,i={}){let r=i.maxScanDistance||_ie,o=i.brackets||xie,s=$A(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let h=oD(c.type,t,o);if(h&&c.from<c.to){let m=sD(c);if(m&&(t>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return F4e(n,e,t,c,m,h,o)}}return z4e(n,e,t,s,a.type,r,o)}function F4e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},h=0,m=a?.cursor();if(m&&(t<0?m.childBefore(i.from):m.childAfter(i.to)))do if(t<0?m.to<=i.from:m.from>=i.to){if(h==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let v=sD(m);return{start:c,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(oD(m.type,t,s))h++;else if(oD(m.type,-t,s)){if(h==0){let v=sD(m);return{start:c,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}h--}}while(t<0?m.prevSibling():m.nextSibling());return{start:c,matched:!1}}function z4e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},m=n.doc.iterRange(e,t>0?n.doc.length:0),v=0;for(let x=0;!m.next().done&&x<=o;){let S=m.value;t<0&&(x+=S.length);let B=e+x*t;for(let R=t>0?0:S.length-1,F=t>0?S.length:-1;R!=F;R+=t){let j=s.indexOf(S[R]);if(!(j<0||i.resolveInner(B+R,1).type!=r))if(j%2==0==t>0)v++;else{if(v==1)return{start:h,end:{from:B+R,to:B+R+1},matched:j>>1==c>>1};v--}}t>0&&(x+=S.length)}return m.done?{start:h,matched:!1}:null}const j4e=Object.create(null),CG=[Id.none],_G=[],xG=Object.create(null),N4e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])N4e[n]=G4e(j4e,e);function $B(n,e){_G.indexOf(n)>-1||(_G.push(n),console.warn(e))}function G4e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let m=n[h]||cn[h];m?typeof m=="function"?c.length?c=c.map(m):$B(h,`Modifier ${h} used at start of tag`):c.length?$B(h,`Tag ${h} used as modifier`):c=Array.isArray(m)?m:[m]:$B(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=xG[r];if(o)return o.id;let s=xG[r]=Id.define({id:CG.length,name:i,props:[sie({[i]:t})]});return CG.push(s),s.id}il.RTL,il.LTR;const W4e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=uL(n.state,t.from);return i.line?Q4e(n):i.block?Y4e(n):!1};function lL(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const Q4e=lL(H4e,0),q4e=lL(wie,0),Y4e=lL((n,e)=>wie(n,e,V4e(e)),0);function uL(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const M2=50;function $4e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-M2,i),s=n.sliceDoc(r,r+M2),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,h=o.length-a;if(o.slice(h-e.length,h)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let m,v;r-i<=2*M2?m=v=n.sliceDoc(i,r):(m=n.sliceDoc(i,i+M2),v=n.sliceDoc(r-M2,r));let x=/^\s*/.exec(m)[0].length,S=/\s*$/.exec(v)[0].length,B=v.length-S-t.length;return m.slice(x,x+e.length)==e&&v.slice(B,B+t.length)==t?{open:{pos:i+x+e.length,margin:/\s/.test(m.charAt(x+e.length))?1:0},close:{pos:r-S-t.length,margin:/\s/.test(v.charAt(B-1))?1:0}}:null}function V4e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function wie(n,e,t=e.selection.ranges){let i=t.map(o=>uL(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>$4e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:h,close:m}=a;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+c.close.length})}return{changes:o}}return null}function H4e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,h=uL(e,o).line;if(h){for(let m=o;m<=s;){let v=e.doc.lineAt(m);if(v.from>r&&(o==s||s>v.from)){r=v.from;let x=/^\s*/.exec(v.text)[0].length,S=x==v.length,B=v.text.slice(x,x+h.length)==h?x:-1;x<v.text.length&&x<c&&(c=x),i.push({line:v,comment:B,token:h,indent:x,empty:S,single:!1})}m=v.to+1}if(c<1e9)for(let m=a;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:h,empty:m,single:v}of i)(v||!m)&&o.push({from:a.from+h,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let h=s.from+a,m=h+c.length;s.text[m-s.from]==" "&&m++,o.push({from:h,to:m})}return{changes:o}}return null}const aD=v1.define(),Z4e=v1.define(),X4e=ki.define(),Sie=ki.define({combine(n){return Om(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),Eie=Ec.define({create(){return Wg.empty},update(n,e){let t=e.state.facet(Sie),i=e.annotation(aD);if(i){let c=Sd.fromTransaction(e,i.selection),h=i.side,m=h==0?n.undone:n.done;return c?m=RS(m,m.length,t.minDepth,c):m=Iie(m,e.startState.selection),new Wg(h==0?i.rest:m,h==0?m:i.rest)}let r=e.annotation(Z4e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Sc.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Sd.fromTransaction(e),s=e.annotation(Sc.time),a=e.annotation(Sc.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Wg(n.done.map(Sd.fromJSON),n.undone.map(Sd.fromJSON))}});function J4e(n={}){return[Eie,Sie.of(n),wi.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Oie:e.inputType=="historyRedo"?lD:null;return i?(e.preventDefault(),i(t)):!1}})]}function g6(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Eie,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const Oie=g6(0,!1),lD=g6(1,!1),e5e=g6(0,!0),t5e=g6(1,!0);class Sd{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Sd(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Sd(e.changes&&xc.fromJSON(e.changes),[],e.mapped&&t0.fromJSON(e.mapped),e.startSelection&&Sn.fromJSON(e.startSelection),e.selectionsAfter.map(Sn.fromJSON))}static fromTransaction(e,t){let i=dp;for(let r of e.startState.facet(X4e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Sd(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,dp)}static selection(e){return new Sd(void 0,dp,void 0,void 0,e)}}function RS(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function n5e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let h=t[c++],m=t[c++];a>=h&&s<=m&&(i=!0)}}),i}function i5e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Bie(n,e){return n.length?e.length?n.concat(e):n:e}const dp=[],r5e=200;function Iie(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-r5e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),RS(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Sd.selection([e])]}function o5e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function VB(n,e){if(!n.length)return n;let t=n.length,i=dp;for(;t;){let r=s5e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Sd.selection(i)]:dp}function s5e(n,e,t){let i=Bie(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):dp,t);if(!n.changes)return Sd.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Sd(r,oo.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const a5e=/^(input\.type|delete)($|\.)/;class Wg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Wg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||a5e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,n5e(a.changes,e.changes))||i=="input.type.compose")?s=RS(s,s.length-1,r.minDepth,new Sd(e.changes.compose(a.changes),Bie(oo.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,dp)):s=RS(s,s.length,r.minDepth,e),new Wg(s,dp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:dp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&i5e(o[o.length-1],e)?this:new Wg(Iie(this.done,e),this.undone,t,i)}addMapping(e){return new Wg(VB(this.done,e),VB(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:aD.of({side:e,rest:o5e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?dp:r.slice(0,r.length-1);return o.mapped&&(a=VB(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:aD.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Wg.empty=new Wg(dp,dp);const l5e=[{key:"Mod-z",run:Oie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:lD,preventDefault:!0},{linux:"Ctrl-Shift-z",run:lD,preventDefault:!0},{key:"Mod-u",run:e5e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:t5e,preventDefault:!0}];function Gx(n,e){return Sn.create(n.ranges.map(e),n.mainIndex)}function Bm(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Im({state:n,dispatch:e},t){let i=Gx(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Bm(n,i)),!0)}function y6(n,e){return Sn.cursor(e?n.to:n.from)}function kie(n,e){return Im(n,t=>t.empty?n.moveByChar(t,e):y6(t,e))}function VA(n){return n.textDirectionAt(n.state.selection.main.head)==il.LTR}const Tie=n=>kie(n,!VA(n)),Rie=n=>kie(n,VA(n));function Die(n,e){return Im(n,t=>t.empty?n.moveByGroup(t,e):y6(t,e))}const u5e=n=>Die(n,!VA(n)),c5e=n=>Die(n,VA(n));function A5e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function v6(n,e,t){let i=$A(n).resolveInner(e.head),r=t?Oo.closedBy:Oo.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;A5e(n,h,r)?i=h:c=t?h.to:h.from}let o=i.type.prop(r),s,a;return o&&(s=t?Gg(n,i.from,1):Gg(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,Sn.cursor(a,t?-1:1)}const h5e=n=>Im(n,e=>v6(n.state,e,!VA(n))),d5e=n=>Im(n,e=>v6(n.state,e,VA(n)));function Pie(n,e){return Im(n,t=>{if(!t.empty)return y6(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Uie=n=>Pie(n,!1),Lie=n=>Pie(n,!0);function Kie(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(wi.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Fie(n,e){let t=Kie(n),{state:i}=n,r=Gx(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):y6(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,h=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<h&&(o=wi.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(Bm(i,r),{effects:o}),!0}const MG=n=>Fie(n,!1),uD=n=>Fie(n,!0);function dv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=Sn.cursor(i.from+o))}return r}const f5e=n=>Im(n,e=>dv(n,e,!0)),p5e=n=>Im(n,e=>dv(n,e,!1)),m5e=n=>Im(n,e=>dv(n,e,!VA(n))),g5e=n=>Im(n,e=>dv(n,e,VA(n))),y5e=n=>Im(n,e=>Sn.cursor(n.lineBlockAt(e.head).from,1)),v5e=n=>Im(n,e=>Sn.cursor(n.lineBlockAt(e.head).to,-1));function b5e(n,e,t){let i=!1,r=Gx(n.selection,o=>{let s=Gg(n,o.head,-1)||Gg(n,o.head,1)||o.head>0&&Gg(n,o.head-1,1)||o.head<n.doc.length&&Gg(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return Sn.cursor(a)});return i?(e(Bm(n,r)),!0):!1}const C5e=({state:n,dispatch:e})=>b5e(n,e);function Cp(n,e){let t=Gx(n.state.selection,i=>{let r=e(i);return Sn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Bm(n.state,t)),!0)}function zie(n,e){return Cp(n,t=>n.moveByChar(t,e))}const jie=n=>zie(n,!VA(n)),Nie=n=>zie(n,VA(n));function Gie(n,e){return Cp(n,t=>n.moveByGroup(t,e))}const _5e=n=>Gie(n,!VA(n)),x5e=n=>Gie(n,VA(n)),M5e=n=>Cp(n,e=>v6(n.state,e,!VA(n))),w5e=n=>Cp(n,e=>v6(n.state,e,VA(n)));function Wie(n,e){return Cp(n,t=>n.moveVertically(t,e))}const Qie=n=>Wie(n,!1),qie=n=>Wie(n,!0);function Yie(n,e){return Cp(n,t=>n.moveVertically(t,e,Kie(n).height))}const wG=n=>Yie(n,!1),SG=n=>Yie(n,!0),S5e=n=>Cp(n,e=>dv(n,e,!0)),E5e=n=>Cp(n,e=>dv(n,e,!1)),O5e=n=>Cp(n,e=>dv(n,e,!VA(n))),B5e=n=>Cp(n,e=>dv(n,e,VA(n))),I5e=n=>Cp(n,e=>Sn.cursor(n.lineBlockAt(e.head).from)),k5e=n=>Cp(n,e=>Sn.cursor(n.lineBlockAt(e.head).to)),EG=({state:n,dispatch:e})=>(e(Bm(n,{anchor:0})),!0),OG=({state:n,dispatch:e})=>(e(Bm(n,{anchor:n.doc.length})),!0),BG=({state:n,dispatch:e})=>(e(Bm(n,{anchor:n.selection.main.anchor,head:0})),!0),IG=({state:n,dispatch:e})=>(e(Bm(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),T5e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),R5e=({state:n,dispatch:e})=>{let t=b6(n).map(({from:i,to:r})=>Sn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:Sn.create(t),userEvent:"select"})),!0},D5e=({state:n,dispatch:e})=>{let t=Gx(n.selection,i=>{let r=$A(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return Sn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Bm(n,t)),!0)};function $ie(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let s=t.doc.lineAt(o.head);if(e?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let c=n.moveVertically(a,e);if(c.head<s.from||c.head>s.to){r.some(h=>h.head==c.head)||r.push(c);break}else{if(c.head==a.head)break;a=c}}}return r.length==i.ranges.length?!1:(n.dispatch(Bm(t,Sn.create(r,r.length-1))),!0)}const P5e=n=>$ie(n,!1),U5e=n=>$ie(n,!0),L5e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Sn.create([t.main]):t.main.empty||(i=Sn.create([Sn.cursor(t.main.head)])),i?(e(Bm(n,i)),!0):!1};function M5(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=IM(n,c,!1)):c>s&&(t="delete.forward",c=IM(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=IM(n,s,!1),a=IM(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:Sn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?wi.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function IM(n,e,t){if(n instanceof wi)for(let i of n.state.facet(wi.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const Vie=(n,e,t)=>M5(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let h=Nx(a,o.tabSize),m=h%IS(o)||IS(o);for(let v=0;v<m&&a[a.length-1-v]==" ";v++)r--;c=r}else c=mA(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=mA(s.text,c-s.from,!1,!1)+s.from);return c}),cD=n=>Vie(n,!1,!0),Hie=n=>Vie(n,!0,!1),Zie=(n,e)=>M5(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=mA(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),m=s(h);if(a!=null&&m!=a)break;(h!=" "||i!=t.head)&&(a=m),i=c}return i}),Xie=n=>Zie(n,!1),K5e=n=>Zie(n,!0),F5e=n=>M5(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),z5e=n=>M5(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),j5e=n=>M5(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),N5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ps.of(["",""])},range:Sn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},G5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:mA(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:mA(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:Sn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function b6(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function Jie(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of b6(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(Sn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(Sn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Sn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const W5e=({state:n,dispatch:e})=>Jie(n,e,!1),Q5e=({state:n,dispatch:e})=>Jie(n,e,!0);function ere(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of b6(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const q5e=({state:n,dispatch:e})=>ere(n,e,!1),Y5e=({state:n,dispatch:e})=>ere(n,e,!0),$5e=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(b6(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Gx(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function V5e(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=$A(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(Oo.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const kG=tre(!1),H5e=tre(!0);function tre(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&V5e(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let h=new p6(e,{simulateBreak:o,simulateDoubleBreak:!!c}),m=sL(h,o);for(m==null&&(m=Nx(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let v=["",C4(e,m)];return c&&v.push(C4(e,h.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:ps.of(v)},range:Sn.cursor(o+1+v[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function cL(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:Sn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const Z5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new p6(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=cL(n,(o,s,a)=>{let c=sL(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],m=C4(n,c);(h!=m||a.from<o.from+h.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+h.length,insert:m}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},X5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(cL(n,(t,i)=>{i.push({from:t.from,insert:n.facet(oL)})}),{userEvent:"input.indent"})),!0),J5e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(cL(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=Nx(r,n.tabSize),s=0,a=C4(n,Math.max(0,o-IS(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),eMe=n=>(n.setTabFocusMode(),!0),tMe=[{key:"Ctrl-b",run:Tie,shift:jie,preventDefault:!0},{key:"Ctrl-f",run:Rie,shift:Nie},{key:"Ctrl-p",run:Uie,shift:Qie},{key:"Ctrl-n",run:Lie,shift:qie},{key:"Ctrl-a",run:y5e,shift:I5e},{key:"Ctrl-e",run:v5e,shift:k5e},{key:"Ctrl-d",run:Hie},{key:"Ctrl-h",run:cD},{key:"Ctrl-k",run:F5e},{key:"Ctrl-Alt-h",run:Xie},{key:"Ctrl-o",run:N5e},{key:"Ctrl-t",run:G5e},{key:"Ctrl-v",run:uD}],nMe=[{key:"ArrowLeft",run:Tie,shift:jie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:u5e,shift:_5e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:m5e,shift:O5e,preventDefault:!0},{key:"ArrowRight",run:Rie,shift:Nie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:c5e,shift:x5e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:g5e,shift:B5e,preventDefault:!0},{key:"ArrowUp",run:Uie,shift:Qie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:EG,shift:BG},{mac:"Ctrl-ArrowUp",run:MG,shift:wG},{key:"ArrowDown",run:Lie,shift:qie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:OG,shift:IG},{mac:"Ctrl-ArrowDown",run:uD,shift:SG},{key:"PageUp",run:MG,shift:wG},{key:"PageDown",run:uD,shift:SG},{key:"Home",run:p5e,shift:E5e,preventDefault:!0},{key:"Mod-Home",run:EG,shift:BG},{key:"End",run:f5e,shift:S5e,preventDefault:!0},{key:"Mod-End",run:OG,shift:IG},{key:"Enter",run:kG,shift:kG},{key:"Mod-a",run:T5e},{key:"Backspace",run:cD,shift:cD,preventDefault:!0},{key:"Delete",run:Hie,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Xie,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:K5e,preventDefault:!0},{mac:"Mod-Backspace",run:z5e,preventDefault:!0},{mac:"Mod-Delete",run:j5e,preventDefault:!0}].concat(tMe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),iMe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:h5e,shift:M5e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:d5e,shift:w5e},{key:"Alt-ArrowUp",run:W5e},{key:"Shift-Alt-ArrowUp",run:q5e},{key:"Alt-ArrowDown",run:Q5e},{key:"Shift-Alt-ArrowDown",run:Y5e},{key:"Mod-Alt-ArrowUp",run:P5e},{key:"Mod-Alt-ArrowDown",run:U5e},{key:"Escape",run:L5e},{key:"Mod-Enter",run:H5e},{key:"Alt-l",mac:"Ctrl-l",run:R5e},{key:"Mod-i",run:D5e,preventDefault:!0},{key:"Mod-[",run:J5e},{key:"Mod-]",run:X5e},{key:"Mod-Alt-\\",run:Z5e},{key:"Shift-Mod-k",run:$5e},{key:"Shift-Mod-\\",run:C5e},{key:"Mod-/",run:W4e},{key:"Alt-A",run:q4e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:eMe}].concat(nMe),TG=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Mx{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(TG(a)):TG,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=zU(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Pg(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Mx.prototype[Symbol.iterator]=function(){return this});const nre={from:-1,to:-1,match:/.*/.exec("")},AL="gm"+(/x/.unicode==null?"":"u");class ire{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=nre,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new rre(e,t,i,r,o);this.re=new RegExp(t,AL+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=DS(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=DS(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const HB=new WeakMap;class V_{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=HB.get(e);if(!r||r.from>=i||r.to<=t){let a=new V_(t,e.sliceString(t,i));return HB.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),HB.set(e,new V_(s,o)),new V_(t,o.slice(t-s,i-s))}}class rre{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=nre,this.matchPos=DS(e,r),this.re=new RegExp(t,AL+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=V_.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=DS(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=V_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ire.prototype[Symbol.iterator]=rre.prototype[Symbol.iterator]=function(){return this});function rMe(n){try{return new RegExp(n,AL),!0}catch{return!1}}function DS(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function AD(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Sa("input",{class:"cm-textfield",name:"line",value:e}),i=Sa("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:_3.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Sa("label",n.state.phrase("Go to line"),": ",t)," ",Sa("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Sa("button",{name:"close",onclick:()=>{n.dispatch({effects:_3.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,h,m,v]=o,x=m?+m.slice(1):0,S=h?+h:a.number;if(h&&v){let F=S/100;c&&(F=F*(c=="-"?-1:1)+a.number/s.doc.lines),S=Math.round(s.doc.lines*F)}else h&&c&&(S=S*(c=="-"?-1:1)+a.number);let B=s.doc.line(Math.max(1,Math.min(s.doc.lines,S))),R=Sn.cursor(B.from+Math.max(0,Math.min(x,B.length)));n.dispatch({effects:[_3.of(!1),wi.scrollIntoView(R.from,{y:"center"})],selection:R}),n.focus()}return{dom:i}}const _3=oo.define(),RG=Ec.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(_3)&&(n=t.value);return n},provide:n=>y4.from(n,e=>e?AD:null)}),oMe=n=>{let e=g4(n,AD);if(!e){let t=[_3.of(!0)];n.state.field(RG,!1)==null&&t.push(oo.appendConfig.of([RG,sMe])),n.dispatch({effects:t}),e=g4(n,AD)}return e&&e.dom.querySelector("input").select(),!0},sMe=wi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),aMe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},lMe=ki.define({combine(n){return Om(n,aMe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function uMe(n){return[fMe,dMe]}const cMe=Or.mark({class:"cm-selectionMatch"}),AMe=Or.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function DG(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ml.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ml.Word)}function hMe(n,e,t,i){return n(e.sliceDoc(t,t+1))==ml.Word&&n(e.sliceDoc(i-1,i))==ml.Word}const dMe=Eu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(lMe),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Or.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return Or.none;let c=t.wordAt(r.head);if(!c)return Or.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return Or.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(DG(s,t,r.from,r.to)&&hMe(s,t,r.from,r.to)))return Or.none}else if(o=t.sliceDoc(r.from,r.to),!o)return Or.none}let a=[];for(let c of n.visibleRanges){let h=new Mx(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:m,to:v}=h.value;if((!s||DG(s,t,m,v))&&(r.empty&&m<=r.from&&v>=r.to?a.push(AMe.range(m,v)):(m>=r.to||v<=r.from)&&a.push(cMe.range(m,v)),a.length>e.maxMatches))return Or.none}}return Or.set(a)}},{decorations:n=>n.decorations}),fMe=wi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),pMe=({state:n,dispatch:e})=>{let{selection:t}=n,i=Sn.create(t.ranges.map(r=>n.wordAt(r.head)||Sn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function mMe(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new Mx(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Mx(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const gMe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return pMe({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=mMe(n,i);return r?(e(n.update({selection:n.selection.addRange(Sn.range(r.from,r.to),!1),effects:wi.scrollIntoView(r.to)})),!0):!1},Wx=ki.define({combine(n){return Om(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new BMe(e),scrollToMatch:e=>wi.scrollIntoView(e)})}});class ore{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||rMe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new CMe(this):new vMe(this)}getCursor(e,t=0,i){let r=e.doc?e:fs.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?M_(this,r,t,i):x_(this,r,t,i)}}class sre{constructor(e){this.spec=e}}function x_(n,e,t,i){return new Mx(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?yMe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function yMe(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(PS(r,t-o))!=ml.Word||e(US(r,t-o))!=ml.Word)&&(e(US(r,i-o))!=ml.Word||e(PS(r,i-o))!=ml.Word))}class vMe extends sre{constructor(e){super(e)}nextMatch(e,t,i){let r=x_(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=x_(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=x_(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=x_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=x_(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function M_(n,e,t,i){return new ire(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?bMe(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function PS(n,e){return n.slice(mA(n,e,!1),e)}function US(n,e){return n.slice(e,mA(n,e))}function bMe(n){return(e,t,i)=>!i[0].length||(n(PS(i.input,i.index))!=ml.Word||n(US(i.input,i.index))!=ml.Word)&&(n(US(i.input,i.index+i[0].length))!=ml.Word||n(PS(i.input,i.index+i[0].length))!=ml.Word)}class CMe extends sre{nextMatch(e,t,i){let r=M_(this.spec,e,i,e.doc.length).next();return r.done&&(r=M_(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=M_(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=M_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=M_(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const _4=oo.define(),hL=oo.define(),ev=Ec.define({create(n){return new ZB(hD(n).create(),null)},update(n,e){for(let t of e.effects)t.is(_4)?n=new ZB(t.value.create(),n.panel):t.is(hL)&&(n=new ZB(n.query,t.value?dL:null));return n},provide:n=>y4.from(n,e=>e.panel)});class ZB{constructor(e,t){this.query=e,this.panel=t}}const _Me=Or.mark({class:"cm-searchMatch"}),xMe=Or.mark({class:"cm-searchMatch cm-searchMatch-selected"}),MMe=Eu.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ev))}update(n){let e=n.state.field(ev);(e!=n.startState.field(ev)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Or.none;let{view:t}=this,i=new f1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(h,m)=>{let v=t.state.selection.ranges.some(x=>x.from==h&&x.to==m);i.add(h,m,v?xMe:_Me)})}return i.finish()}},{decorations:n=>n.decorations});function w5(n){return e=>{let t=e.state.field(ev,!1);return t&&t.query.spec.valid?n(e,t):ure(e)}}const LS=w5((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=Sn.single(i.from,i.to),o=n.state.facet(Wx);return n.dispatch({selection:r,effects:[fL(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),lre(n),!0}),KS=w5((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=Sn.single(r.from,r.to),s=n.state.facet(Wx);return n.dispatch({selection:o,effects:[fL(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),lre(n),!0}),wMe=w5((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Sn.create(t.map(i=>Sn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),SMe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new Mx(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(Sn.range(a.value.from,a.value.to))}return e(n.update({selection:Sn.create(o,s),userEvent:"select.search.matches"})),!0},PG=w5((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,h,m=[];s.from==i&&s.to==r&&(h=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(t,s.from,s.to),m.push(wi.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let v=n.state.changes(a);return s&&(c=Sn.single(s.from,s.to).map(v),m.push(fL(n,s)),m.push(t.facet(Wx).scrollToMatch(c.main,n))),n.dispatch({changes:v,selection:c,effects:m,userEvent:"input.replace"}),!0}),EMe=w5((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:wi.announce.of(i),userEvent:"input.replace.all"}),!0});function dL(n){return n.state.facet(Wx).createPanel(n)}function hD(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=n.facet(Wx);return new ore({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:h.wholeWord})}function are(n){let e=g4(n,dL);return e&&e.dom.querySelector("[main-field]")}function lre(n){let e=are(n);e&&e==n.root.activeElement&&e.select()}const ure=n=>{let e=n.state.field(ev,!1);if(e&&e.panel){let t=are(n);if(t&&t!=n.root.activeElement){let i=hD(n.state,e.query.spec);i.valid&&n.dispatch({effects:_4.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[hL.of(!0),e?_4.of(hD(n.state,e.query.spec)):oo.appendConfig.of(kMe)]});return!0},cre=n=>{let e=n.state.field(ev,!1);if(!e||!e.panel)return!1;let t=g4(n,dL);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:hL.of(!1)}),!0},OMe=[{key:"Mod-f",run:ure,scope:"editor search-panel"},{key:"F3",run:LS,shift:KS,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:LS,shift:KS,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:cre,scope:"editor search-panel"},{key:"Mod-Shift-l",run:SMe},{key:"Mod-Alt-g",run:oMe},{key:"Mod-d",run:gMe,preventDefault:!0}];class BMe{constructor(e){this.view=e;let t=this.query=e.state.field(ev).query.spec;this.commit=this.commit.bind(this),this.searchField=Sa("input",{value:t.search,placeholder:uf(e,"Find"),"aria-label":uf(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Sa("input",{value:t.replace,placeholder:uf(e,"Replace"),"aria-label":uf(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Sa("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Sa("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Sa("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return Sa("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Sa("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>LS(e),[uf(e,"next")]),i("prev",()=>KS(e),[uf(e,"previous")]),i("select",()=>wMe(e),[uf(e,"all")]),Sa("label",null,[this.caseField,uf(e,"match case")]),Sa("label",null,[this.reField,uf(e,"regexp")]),Sa("label",null,[this.wordField,uf(e,"by word")]),...e.state.readOnly?[]:[Sa("br"),this.replaceField,i("replace",()=>PG(e),[uf(e,"replace")]),i("replaceAll",()=>EMe(e),[uf(e,"replace all")])],Sa("button",{name:"close",onclick:()=>cre(e),"aria-label":uf(e,"close"),type:"button"},[""])])}commit(){let e=new ore({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_4.of(e)}))}keydown(e){L2e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?KS:LS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),PG(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(_4)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Wx).top}}function uf(n,e){return n.state.phrase(e)}const kM=30,TM=/[\s\.,:;?!]/;function fL(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-kM),s=Math.min(r,t+kM),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<kM;c++)if(!TM.test(a[c+1])&&TM.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-kM;c--)if(!TM.test(a[c-1])&&TM.test(a[c])){a=a.slice(0,c);break}}return wi.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const IMe=wi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),kMe=[ev,iC.low(MMe),IMe];class Are{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=$A(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(hre(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function UG(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function TMe(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=UG(e)+UG(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function RMe(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:TMe(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class LG{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Rb(n){return n.selection.main.from}function hre(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const dre=v1.define();function DMe(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:Sn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const KG=new WeakMap;function PMe(n){if(!Array.isArray(n))return n;let e=KG.get(n);return e||KG.set(n,e=RMe(n)),e}const FS=oo.define(),x4=oo.define();class UMe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=xd(e,t),r=Pg(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(xd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let W=xd(e,0),H=Pg(W),$=H==e.length?0:-100;if(W!=t[0])if(W==i[0])$+=-200;else return null;return this.ret($,[0,H])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(a<0){for(let W=0,H=Math.min(e.length,200);W<H&&h<c;){let $=xd(e,W);($==t[h]||$==i[h])&&(r[h++]=W),W+=Pg($)}if(h<c)return null}let m=0,v=0,x=!1,S=0,B=-1,R=-1,F=/[a-z]/.test(e),j=!0;for(let W=0,H=Math.min(e.length,200),$=0;W<H&&v<c;){let N=xd(e,W);a<0&&(m<c&&N==t[m]&&(o[m++]=W),S<c&&(N==t[S]||N==i[S]?(S==0&&(B=W),R=W+1,S++):S=0));let Y,z=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(Y=zU(N))!=Y.toLowerCase()?1:Y!=Y.toUpperCase()?2:0;(!W||z==1&&F||$==0&&z!=0)&&(t[v]==N||i[v]==N&&(x=!0)?s[v++]=W:s.length&&(j=!1)),$=z,W+=Pg(N)}return v==c&&s[0]==0&&j?this.result(-100+(x?-200:0),s,e):S==c&&B==0?this.ret(-200-e.length+(R==e.length?0:-100),[0,R]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):S==c?this.ret(-900-e.length,[B,R]):v==c?this.result(-100+(x?-200:0)+-700+(j?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?Pg(xd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class LMe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Xc=ki.define({combine(n){return Om(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:KMe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>FG(e(i),t(i)),optionClass:(e,t)=>i=>FG(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function FG(n,e){return n?e?n+" "+e:n:e}function KMe(n,e,t,i,r,o){let s=n.textDirection==il.RTL,a=s,c=!1,h="top",m,v,x=e.left-r.left,S=r.right-e.right,B=i.right-i.left,R=i.bottom-i.top;if(a&&x<Math.min(B,S)?a=!1:!a&&S<Math.min(B,x)&&(a=!0),B<=(a?x:S))m=Math.max(r.top,Math.min(t.top,r.bottom-R))-e.top,v=Math.min(400,a?x:S);else{c=!0,v=Math.min(400,(s?e.right:r.right-e.left)-30);let W=r.bottom-e.bottom;W>=R||W>e.top?m=t.bottom-e.top:(h="bottom",m=e.bottom-t.top)}let F=(e.bottom-e.top)/o.offsetHeight,j=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${m/F}px; max-width: ${v/j}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function FMe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let m=o[h++],v=o[h++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let x=s.appendChild(document.createElement("span"));x.appendChild(document.createTextNode(a.slice(m,v))),x.className="cm-completionMatchedText",c=v}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function XB(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class zMe{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(Xc);this.optionContent=FMe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=XB(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let m=c.target,v;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<h.length){this.applyCompletion(e,h[+v[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Xc).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:x4.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=XB(o.length,s,e.state.facet(Xc).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=XB(t.options.length,t.selected,this.view.state.facet(Xc).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>kh(this.view.state,a,"completion info")):(this.addInfoPane(s,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&NMe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Xc).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:h}=a;if(h){let x=typeof h=="string"?h:h.name;if(x!=o&&(s>i.from||i.from==0))if(o=x,typeof h!="string"&&h.header)r.appendChild(h.header(h));else{let S=r.appendChild(document.createElement("completion-section"));S.textContent=x}}const m=r.appendChild(document.createElement("li"));m.id=t+"-"+s,m.setAttribute("role","option");let v=this.optionClass(a);v&&(m.className=v);for(let x of this.optionContent){let S=x(a,this.view.state,this.view,c);S&&m.appendChild(S)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function jMe(n,e){return t=>new zMe(t,n,e)}function NMe(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function zG(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function GMe(n,e){let t=[],i=null,r=null,o=m=>{t.push(m);let{section:v}=m.completion;if(v){i||(i=[]);let x=typeof v=="string"?v:v.name;i.some(S=>S.name==x)||i.push(typeof v=="string"?{name:x}:v)}},s=e.facet(Xc);for(let m of n)if(m.hasResult()){let v=m.result.getMatch;if(m.result.filter===!1)for(let x of m.result.options)o(new LG(x,m.source,v?v(x):[],1e9-t.length));else{let x=e.sliceDoc(m.from,m.to),S,B=s.filterStrict?new LMe(x):new UMe(x);for(let R of m.result.options)if(S=B.match(R.label)){let F=R.displayLabel?v?v(R,S.matched):[]:S.matched,j=S.score+(R.boost||0);if(o(new LG(R,m.source,F,j)),typeof R.section=="object"&&R.section.rank==="dynamic"){let{name:W}=R.section;r||(r=Object.create(null)),r[W]=Math.max(j,r[W]||-1e9)}}}}if(i){let m=Object.create(null),v=0,x=(S,B)=>(S.rank==="dynamic"&&B.rank==="dynamic"?r[B.name]-r[S.name]:0)||(typeof S.rank=="number"?S.rank:1e9)-(typeof B.rank=="number"?B.rank:1e9)||(S.name<B.name?-1:1);for(let S of i.sort(x))v-=1e5,m[S.name]=v;for(let S of t){let{section:B}=S.completion;B&&(S.score+=m[typeof B=="string"?B:B.name])}}let a=[],c=null,h=s.compareCompletions;for(let m of t.sort((v,x)=>x.score-v.score||h(v.completion,x.completion))){let v=m.completion;!c||c.label!=v.label||c.detail!=v.detail||c.type!=null&&v.type!=null&&c.type!=v.type||c.apply!=v.apply||c.boost!=v.boost?a.push(m):zG(m.completion)>zG(c)&&(a[a.length-1]=m),c=m.completion}return a}class T_{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new T_(this.options,jG(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(h=>h.isPending))return r.setDisabled();let a=GMe(e,t);if(!a.length)return r&&e.some(h=>h.isPending)?r.setDisabled():null;let c=t.facet(Xc).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let h=r.options[r.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){c=m;break}}return new T_(a,jG(i,c),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:VMe,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new T_(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new T_(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class zS{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new zS(YMe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Xc),o=(i.override||t.languageDataAt("autocomplete",Rb(t)).map(PMe)).map(c=>(this.active.find(m=>m.source==c)||new fp(c,this.active.some(m=>m.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(pL));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!WMe(o,this.active)||a?s=T_.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new fp(c.source,0):c));for(let c of e.effects)c.is(pre)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new zS(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?QMe:qMe}}function WMe(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const QMe={"aria-autocomplete":"list"},qMe={};function jG(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const YMe=[];function fre(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(dre);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class fp{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=fre(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new fp(r.source,0)),i&4&&r.state==0&&(r=new fp(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(FS))r=new fp(r.source,1,o.value);else if(o.is(x4))r=new fp(r.source,0);else if(o.is(pL))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Rb(e.state))}}class H_ extends fp{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Rb(e.state);if(a>s||!r||t&2&&(Rb(e.startState)==this.from||a<this.limit))return new fp(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return $Me(r.validFor,e.state,o,s)?new H_(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new Are(e.state,a,!1)))?new H_(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:Rb(e.state)):new fp(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new H_(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new fp(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function $Me(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):hre(n,!0).test(r)}const pL=oo.define({map(n,e){return n.map(t=>t.map(e))}}),pre=oo.define(),Md=Ec.define({create(){return zS.start()},update(n,e){return n.update(e)},provide:n=>[d6.from(n,e=>e.tooltip),wi.contentAttributes.from(n,e=>e.attrs)]});function mL(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Md).active.find(r=>r.source==e.source);return i instanceof H_?(typeof t=="string"?n.dispatch({...DMe(n.state,t,i.from,i.to),annotations:dre.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const VMe=jMe(Md,mL);function RM(n,e="option"){return t=>{let i=t.state.field(Md,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Xc).interactionDelay)return!1;let r=1,o;e=="page"&&(o=Hne(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:pre.of(a)}),!0}}const HMe=n=>{let e=n.state.field(Md,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Xc).interactionDelay?!1:mL(n,e.open.options[e.open.selected])},JB=n=>n.state.field(Md,!1)?(n.dispatch({effects:FS.of(!0)}),!0):!1,ZMe=n=>{let e=n.state.field(Md,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:x4.of(null)}),!0)};class XMe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const JMe=50,ewe=1e3,twe=Eu.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Md).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Md),t=n.state.facet(Xc);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Md)==e)return;let i=n.transactions.some(o=>{let s=fre(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>JMe&&Date.now()-s.time>ewe){for(let a of s.context.abortListeners)try{a()}catch(c){kh(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(FS)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Md);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Xc).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Rb(e),i=new Are(e,t,n.explicit,this.view),r=new XMe(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:x4.of(null)}),kh(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Xc).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Xc),i=this.view.state.field(Md);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=Rb(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),h=new H_(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let m of o.updates)h=h.update(m,t);if(h.hasResult()){e.push(h);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new fp(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:pL.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Md,!1);if(e&&e.tooltip&&this.view.state.facet(Xc).closeOnBlur){let t=e.open&&Hne(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:x4.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:FS.of(!1)}),20),this.composing=0}}}),nwe=typeof navigator=="object"&&/Win/.test(navigator.platform),iwe=iC.highest(wi.domEventHandlers({keydown(n,e){let t=e.state.field(Md,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(nwe&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&mL(e,i),!1}})),rwe=wi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),M4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},bb=oo.define({map(n,e){let t=e.mapPos(n,-1,Bh.TrackAfter);return t??void 0}}),gL=new class extends Wb{};gL.startSide=1;gL.endSide=-1;const mre=Ec.define({create(){return Vo.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(bb)&&(n=n.update({add:[gL.range(t.value,t.value+1)]}));return n}});function owe(){return[awe,mre]}const e8="()[]{}<>";function gre(n){for(let e=0;e<e8.length;e+=2)if(e8.charCodeAt(e)==n)return e8.charAt(e+1);return zU(n<128?n:n+1)}function yre(n,e){return n.languageDataAt("closeBrackets",e)[0]||M4}const swe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),awe=wi.inputHandler.of((n,e,t,i)=>{if((swe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Pg(xd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=cwe(n.state,i);return o?(n.dispatch(o),!0):!1}),lwe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=yre(n,n.selection.main.head).brackets||M4.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=Awe(n.doc,s.head);for(let c of i)if(c==a&&C6(n.doc,s.head)==gre(xd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:Sn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},uwe=[{key:"Backspace",run:lwe}];function cwe(n,e){let t=yre(n,n.selection.main.head),i=t.brackets||M4.brackets;for(let r of i){let o=gre(xd(r,0));if(e==r)return o==r?fwe(n,r,i.indexOf(r+r+r)>-1,t):hwe(n,r,o,t.before||M4.before);if(e==o&&vre(n,n.selection.main.from))return dwe(n,r,o)}return null}function vre(n,e){let t=!1;return n.field(mre).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function C6(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Pg(xd(t,0)))}function Awe(n,e){let t=n.sliceString(e-2,e);return Pg(xd(t,0))==t.length?t:t.slice(1)}function hwe(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:bb.of(s.to+e.length),range:Sn.range(s.anchor+e.length,s.head+e.length)};let a=C6(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:bb.of(s.head+e.length),range:Sn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function dwe(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&C6(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:Sn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function fwe(n,e,t,i){let r=i.stringPrefixes||M4.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:bb.of(a.to+e.length),range:Sn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=C6(n.doc,c),m;if(h==e){if(NG(n,c))return{changes:{insert:e+e,from:c},effects:bb.of(c+e.length),range:Sn.cursor(c+e.length)};if(vre(n,c)){let x=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+x.length,insert:x},range:Sn.cursor(c+x.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(m=GG(n,c-2*e.length,r))>-1&&NG(n,m))return{changes:{insert:e+e+e+e,from:c},effects:bb.of(c+e.length),range:Sn.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=ml.Word&&GG(n,c,r)>-1&&!pwe(n,c,e,r))return{changes:{insert:e+e,from:c},effects:bb.of(c+e.length),range:Sn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function NG(n,e){let t=$A(n).resolveInner(e+1);return t.parent&&t.from==e}function pwe(n,e,t,i){let r=$A(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let m=r.firstChild;for(;m&&m.from==r.from&&m.to-m.from>t.length+c;){if(n.sliceDoc(m.to-t.length,m.to)==t)return!1;m=m.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function GG(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ml.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=ml.Word)return o}return-1}function mwe(n={}){return[iwe,Md,Xc.of(n),twe,gwe,rwe]}const bre=[{key:"Ctrl-Space",run:JB},{mac:"Alt-`",run:JB},{mac:"Alt-i",run:JB},{key:"Escape",run:ZMe},{key:"ArrowDown",run:RM(!0)},{key:"ArrowUp",run:RM(!1)},{key:"PageDown",run:RM(!0,"page")},{key:"PageUp",run:RM(!1,"page")},{key:"Enter",run:HMe}],gwe=iC.highest(JU.computeN([Xc],n=>n.facet(Xc).defaultKeymap?[bre]:[]));class WG{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Ab{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(Qg).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((x,S)=>x.from-S.from||x.to-S.to),s=new f1,a=[],c=0,h=i.doc.iter(),m=0;for(let x=0;;){let S=x==o.length?null:o[x];if(!S&&!a.length)break;let B,R;for(a.length?(B=c,R=a.reduce((W,H)=>Math.min(W,H.to),S&&S.from>B?S.from:1e8)):(B=S.from,R=S.to,a.push(S),x++);x<o.length;){let W=o[x];if(W.from==B&&(W.to>W.from||W.to==B))a.push(W),x++,R=Math.min(W.to,R);else{R=Math.min(W.from,R);break}}let F=!1;if(a.some(W=>W.from==B&&W.to==R)&&(F=B==R,!F&&R-B<10)){let W=B-(m+h.value.length);W>0&&(h.next(W),m=B);for(let H=B;;){if(H>=R){F=!0;break}if(!h.lineBreak&&m+h.value.length>H)break;H=m+h.value.length,m+=h.value.length,h.next()}}let j=Ere(a);if(F)s.add(B,B,Or.widget({widget:new Ewe(j),diagnostics:a.slice()}));else{let W=a.reduce((H,$)=>$.markClass?H+" "+$.markClass:H,"");s.add(B,R,Or.mark({class:"cm-lintRange cm-lintRange-"+j+W,diagnostics:a.slice(),inclusiveEnd:a.some(H=>H.to>R)}))}c=R;for(let W=0;W<a.length;W++)a[W].to<=c&&a.splice(W--,1)}let v=s.finish();return new Ab(v,t,wx(v))}}function wx(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new WG(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new WG(i.from,o,i.diagnostic)}}),i}function Cre(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(Qg).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(_6))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function _re(n,e){return n.field(_f,!1)?e:e.concat(oo.appendConfig.of(Ire))}function ywe(n,e){return{effects:_re(n,[_6.of(e)])}}const _6=oo.define(),yL=oo.define(),xre=oo.define(),_f=Ec.define({create(){return new Ab(Or.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=wx(t,n.selected.diagnostic,o)||wx(t,null,o)}!t.size&&r&&e.state.facet(Qg).autoPanel&&(r=null),n=new Ab(t,r,i)}for(let t of e.effects)if(t.is(_6)){let i=e.state.facet(Qg).autoPanel?t.value.length?w4.open:null:n.panel;n=Ab.init(t.value,i,e.state)}else t.is(yL)?n=new Ab(n.diagnostics,t.value?w4.open:null,n.selected):t.is(xre)&&(n=new Ab(n.diagnostics,n.panel,t.value));return n},provide:n=>[y4.from(n,e=>e.panel),wi.decorations.from(n,e=>e.diagnostics)]}),vwe=Or.mark({class:"cm-lintRange cm-lintRange-active"});function bwe(n,e,t){let{diagnostics:i}=n.state.field(_f),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:m})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return r=m.diagnostics,o=c,s=h,!1});let a=n.state.facet(Qg).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:Mre(n,r)}}}:null}function Mre(n,e){return Sa("ul",{class:"cm-tooltip-lint"},e.map(t=>Sre(n,t,!1)))}const Cwe=n=>{let e=n.state.field(_f,!1);(!e||!e.panel)&&n.dispatch({effects:_re(n.state,[yL.of(!0)])});let t=g4(n,w4.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},QG=n=>{let e=n.state.field(_f,!1);return!e||!e.panel?!1:(n.dispatch({effects:yL.of(!1)}),!0)},_we=n=>{let e=n.state.field(_f,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},xwe=[{key:"Mod-Shift-m",run:Cwe,preventDefault:!0},{key:"F8",run:_we}],Mwe=Eu.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Qg);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Qg);t.length&&wwe(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(ywe(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{kh(this.view.state,i)})}}update(n){let e=n.state.facet(Qg);(n.docChanged||e!=n.startState.facet(Qg)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function wwe(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const Qg=ki.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Om(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:qG,tooltipFilter:qG,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function qG(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function Swe(n,e={}){return[Qg.of({source:n,config:e}),Mwe,Ire]}function wre(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Sre(n,e,t){var i;let r=t?wre(e.actions):[];return Sa("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Sa("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=S=>{if(S.preventDefault(),a)return;a=!0;let B=wx(n.state.field(_f).diagnostics,e);B&&o.apply(n,B.from,B.to)},{name:h}=o,m=r[s]?h.indexOf(r[s]):-1,v=m<0?h:[h.slice(0,m),Sa("u",h.slice(m,m+1)),h.slice(m+1)],x=o.markClass?" "+o.markClass:"";return Sa("button",{type:"button",class:"cm-diagnosticAction"+x,onclick:c,onmousedown:c,"aria-label":` Action: ${h}${m<0?"":` (access key "${r[s]})"`}.`},v)}),e.source&&Sa("div",{class:"cm-diagnosticSource"},e.source))}class Ewe extends hv{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Sa("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class YG{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Sre(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class w4{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)QG(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=wre(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=wx(this.view.state.field(_f).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Sa("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Sa("div",{class:"cm-panel-lint"},this.list,Sa("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>QG(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(_f).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(_f),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let m of h.diagnostics){if(s.has(m))continue;s.add(m);let v=-1,x;for(let S=i;S<this.items.length;S++)if(this.items[S].diagnostic==m){v=S;break}v<0?(x=new YG(this.view,m),this.items.splice(i,0,x),r=!0):(x=this.items[v],v>i&&(this.items.splice(i,v-i),r=!0)),t&&x.diagnostic==t.diagnostic?x.dom.hasAttribute("aria-selected")||(x.dom.setAttribute("aria-selected","true"),o=x):x.dom.hasAttribute("aria-selected")&&x.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new YG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(_f),i=wx(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:xre.of(i)})}static open(e){return new w4(e)}}function Cw(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function DM(n){return Cw(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Owe=wi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:DM("#d11")},".cm-lintRange-warning":{backgroundImage:DM("orange")},".cm-lintRange-info":{backgroundImage:DM("#999")},".cm-lintRange-hint":{backgroundImage:DM("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Bwe(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Ere(n){let e="hint",t=1;for(let i of n){let r=Bwe(i.severity);r>t&&(t=r,e=i.severity)}return e}class Ore extends r0{constructor(e){super(),this.diagnostics=e,this.severity=Ere(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(x6).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>kwe(e,t,i)),t}}function Iwe(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(Bre)&&n.dispatch({effects:vL.of(null)})}};window.addEventListener("mousemove",t)}function kwe(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:vL.of({pos:s.from,above:!1,clip:!1,create(){return{dom:Mre(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Iwe(n,e)}let{hoverTime:r}=n.state.facet(x6),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function Twe(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new Ore(t[r]).range(+r));return Vo.of(i,!0)}const Rwe=Xne({class:"cm-gutter-lint",markers:n=>n.state.field(dD),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(dD).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new Ore(i):null}}),dD=Ec.define({create(){return Vo.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(x6).markerFilter;for(let i of e.effects)if(i.is(_6)){let r=i.value;t&&(r=t(r||[],e.state)),n=Twe(e.state.doc,r.slice(0))}return n}}),vL=oo.define(),Bre=Ec.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=Cre(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(vL)?i.value:t,n)},provide:n=>d6.from(n)}),Dwe=wi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Cw('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Cw('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Cw('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Ire=[_f,wi.decorations.compute([_f],n=>{let{selected:e,panel:t}=n.field(_f);return!e||!t||e.from==e.to?Or.none:Or.set([vwe.range(e.from,e.to)])}),x3e(bwe,{hideOn:Cre}),Owe],x6=ki.define({combine(n){return Om(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Pwe(n={}){return[x6.of(n),dD,Rwe,Dwe,Bre]}const Uwe=[R3e(),U3e(),e3e(),J4e(),S4e(),G2e(),$2e(),fs.allowMultipleSelections.of(!0),h4e(),Cie(I4e,{fallback:!0}),L4e(),owe(),mwe(),h3e(),p3e(),s3e(),uMe(),JU.of([...uwe,...iMe,...OMe,...l5e,..._4e,...bre,...xwe])];var $G={};class jS{constructor(e,t,i,r,o,s,a,c,h,m=0,v){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=m,this.parent=v}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new jS(e,[],t,i,i,0,[],0,r?new VG(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let v=c?this.stack[c-1]:0,x=this.bufferBase+this.buffer.length-v;if(r<o.minRepeatTerm||e&131072){let S=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,S,x+4,!0)}if(e&262144)this.state=this.stack[c];else{let S=this.stack[c-3];this.state=o.getGoto(S,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new jS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Lwe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new VG(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class VG{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Lwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class NS{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new NS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new NS(this.stack,this.pos,this.index)}}function PM(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class _w{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const HG=new _w;class Kwe{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=HG,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=HG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Z_{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Fwe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Z_.prototype.contextual=Z_.prototype.fallback=Z_.prototype.extend=!1;Z_.prototype.fallback=Z_.prototype.extend=!1;function Fwe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let h=n[s+1];for(let S=s+3;S<h;S+=2)if((n[S+1]&a)>0){let B=n[S];if(c.allows(B)&&(e.token.value==-1||e.token.value==B||zwe(B,e.token.value,r,o))){e.acceptToken(B);break}}let m=e.next,v=0,x=n[s+2];if(e.next<0&&x>v&&n[h+x*3-3]==65535){s=n[h+x*3-1];continue e}for(;v<x;){let S=v+x>>1,B=h+S+(S<<1),R=n[B],F=n[B+1]||65536;if(m<R)x=S;else if(m>=F)v=S+1;else{s=n[B+2],e.advance();continue e}}break}}function ZG(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function zwe(n,e,t,i){let r=ZG(t,i,e);return r<0||ZG(t,i,n)<r}const cf=typeof process<"u"&&$G&&/\bparse\b/.test($G.LOG);let t8=null;function XG(n,e,t){let i=n.cursor(Hc.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class jwe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?XG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?XG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof tc){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(Oo.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class Nwe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new _w)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if((1<<h&s)==0)continue;let m=o[h],v=this.tokens[h];if(!(i&&!m.fallback)&&((m.contextual||v.start!=e.pos||v.mask!=s||v.context!=a)&&(this.updateCachedToken(v,m,e),v.mask=s,v.context=a),v.lookAhead>v.end+25&&(c=Math.max(v.lookAhead,c)),v.value!=0)){let x=t;if(v.extended>-1&&(t=this.addActions(e,v.extended,v.end,t)),t=this.addActions(e,v.value,v.end,t),!m.extend&&(i=v,t>x))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new _w,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new _w,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let h=s.stateSlot(o,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=J0(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(J0(a,h+2),t,i,r));break}a[h]==t&&(r=this.putAction(J0(a,h+1),t,i,r))}return r}}class Gwe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Kwe(t,r),this.tokens=new Nwe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[jS.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new jwe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&Qwe(r);if(s)return cf&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw cf&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return cf&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let h=i[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=cf?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,m=h?e.curContext.hash:0;for(let v=this.fragments.nodeAt(r);v;){let x=this.parser.nodeSet.types[v.type.id]==v.type?o.getGoto(e.state,v.type.id):-1;if(x>-1&&v.length&&(!h||(v.prop(Oo.contextHash)||0)==m))return e.useNode(v,x),cf&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(v.type.id)})`),!0;if(!(v instanceof tc)||v.children.length==0||v.positions[0]>0)break;let S=v.children[0];if(S instanceof tc&&v.positions[0]==0)v=S;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),cf&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let m=c[h++],v=c[h++],x=c[h++],S=h==c.length||!i,B=S?e:e.split(),R=this.tokens.mainToken;if(B.apply(m,v,R?R.start:B.pos,x),cf&&console.log(s+this.stackID(B)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(v)} @ ${r}${B==e?"":", split"})`),S)return!0;B.pos>r?t.push(B):i.push(B)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return JG(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],h=t[(s<<1)+1],m=cf?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),cf&&console.log(m+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let v=a.split(),x=m;for(let S=0;v.forceReduce()&&S<10&&(cf&&console.log(x+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,i));S++)cf&&(x=this.stackID(v)+" -> ");for(let S of a.recoverByInsert(c))cf&&console.log(m+this.stackID(S)+" (via recover-insert)"),this.advanceFully(S,i);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),cf&&console.log(m+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),JG(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),tc.build({buffer:NS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(t8||(t8=new WeakMap)).get(e);return t||t8.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function JG(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Wwe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class GS extends oie{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,h){r[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=Oo[c]);for(let h=1;h<a.length;){let m=a[h++];if(m>=0)o(m,c,a[h++]);else{let v=a[h+-m];for(let x=-m;x>0;x--)o(a[h++],c,v);h++}}}this.nodeSet=new tL(t.map((a,c)=>Id.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=tie;let s=PM(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(eW),this.states=PM(e.states,Uint32Array),this.data=PM(e.stateData),this.goto=PM(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Z_(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Gwe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let h=o+(s>>1);o<h;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=J0(i,o+2)];else{if(i[o+1]==2)return J0(i,o+2);break}if(s==t||s==0)return J0(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=J0(this.data,o+2);else break;r=t(J0(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=J0(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(GS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=eW(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new Wwe(e,i,r)}static deserialize(e){return new GS(e)}}function J0(n,e){return n[e]|n[e+1]<<16}function Qwe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function eW(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const qwe=sie({String:cn.string,Number:cn.number,"True False":cn.bool,PropertyName:cn.propertyName,Null:cn.null,", :":cn.separator,"[ ]":cn.squareBracket,"{ }":cn.brace}),Ywe=GS.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[qwe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),$we=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=Vwe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function Vwe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const Hwe=OS.define({name:"json",parser:Ywe.configure({props:[cie.add({Object:yG({except:/^\s*\}/}),Array:yG({except:/^\s*\]/})}),hie.add({"Object Array":f4e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Zwe(){return new n4e(Hwe)}const Xwe="#e5c07b",tW="#e06c75",Jwe="#56b6c2",eSe="#ffffff",xw="#abb2bf",fD="#7d8799",tSe="#61afef",nSe="#98c379",nW="#d19a66",iSe="#c678dd",rSe="#21252b",iW="#2c313a",rW="#282c34",n8="#353a42",oSe="#3E4451",oW="#528bff",sSe=wi.theme({"&":{color:xw,backgroundColor:rW},".cm-content":{caretColor:oW},".cm-cursor, .cm-dropCursor":{borderLeftColor:oW},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:oSe},".cm-panels":{backgroundColor:rSe,color:xw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:rW,color:fD,border:"none"},".cm-activeLineGutter":{backgroundColor:iW},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:n8},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:n8,borderBottomColor:n8},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:iW,color:xw}}},{dark:!0}),aSe=x5.define([{tag:cn.keyword,color:iSe},{tag:[cn.name,cn.deleted,cn.character,cn.propertyName,cn.macroName],color:tW},{tag:[cn.function(cn.variableName),cn.labelName],color:tSe},{tag:[cn.color,cn.constant(cn.name),cn.standard(cn.name)],color:nW},{tag:[cn.definition(cn.name),cn.separator],color:xw},{tag:[cn.typeName,cn.className,cn.number,cn.changed,cn.annotation,cn.modifier,cn.self,cn.namespace],color:Xwe},{tag:[cn.operator,cn.operatorKeyword,cn.url,cn.escape,cn.regexp,cn.link,cn.special(cn.string)],color:Jwe},{tag:[cn.meta,cn.comment],color:fD},{tag:cn.strong,fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.link,color:fD,textDecoration:"underline"},{tag:cn.heading,fontWeight:"bold",color:tW},{tag:[cn.atom,cn.bool,cn.special(cn.variableName)],color:nW},{tag:[cn.processingInstruction,cn.string,cn.inserted],color:nSe},{tag:cn.invalid,color:eSe}]),lSe=[sSe,Cie(aSe)];var Mw={exports:{}},uSe=Mw.exports,sW;function cSe(){return sW||(sW=1,(function(n,e){(function(t,i){n.exports=i()})(uSe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Ie,Se){return Se={exports:{}},Ie(Se,Se.exports),Se.exports}var r=i(function(Ie){function Se(){var Ge=0,st=1,ut=2,ft=3,St=4,kt=5,en=6,Pn=7,zn=8,si=9,xn=10,Rn=11,pn=12,Hn=13,Un=14,Tt=15,Me=16,oe=17,le=0,he=1,se=2,Ae=3,xe=4;function Ye(y,rt){return 55296<=y.charCodeAt(rt)&&y.charCodeAt(rt)<=56319&&56320<=y.charCodeAt(rt+1)&&y.charCodeAt(rt+1)<=57343}function Xe(y,rt){rt===void 0&&(rt=0);var Bt=y.charCodeAt(rt);if(55296<=Bt&&Bt<=56319&&rt<y.length-1){var pt=Bt,Ht=y.charCodeAt(rt+1);return 56320<=Ht&&Ht<=57343?(pt-55296)*1024+(Ht-56320)+65536:pt}if(56320<=Bt&&Bt<=57343&&rt>=1){var pt=y.charCodeAt(rt-1),Ht=Bt;return 55296<=pt&&pt<=56319?(pt-55296)*1024+(Ht-56320)+65536:Ht}return Bt}function fe(y,rt,Bt){var pt=[y].concat(rt).concat([Bt]),Ht=pt[pt.length-2],gt=Bt,jn=pt.lastIndexOf(Un);if(jn>1&&pt.slice(1,jn).every(function(Ln){return Ln==ft})&&[ft,Hn,oe].indexOf(y)==-1)return se;var ni=pt.lastIndexOf(St);if(ni>0&&pt.slice(1,ni).every(function(Ln){return Ln==St})&&[pn,St].indexOf(Ht)==-1)return pt.filter(function(Ln){return Ln==St}).length%2==1?Ae:xe;if(Ht==Ge&&gt==st)return le;if(Ht==ut||Ht==Ge||Ht==st)return gt==Un&&rt.every(function(Ln){return Ln==ft})?se:he;if(gt==ut||gt==Ge||gt==st)return he;if(Ht==en&&(gt==en||gt==Pn||gt==si||gt==xn))return le;if((Ht==si||Ht==Pn)&&(gt==Pn||gt==zn))return le;if((Ht==xn||Ht==zn)&&gt==zn)return le;if(gt==ft||gt==Tt)return le;if(gt==kt)return le;if(Ht==pn)return le;var In=pt.indexOf(ft)!=-1?pt.lastIndexOf(ft)-1:pt.length-2;return[Hn,oe].indexOf(pt[In])!=-1&&pt.slice(In+1,-1).every(function(Ln){return Ln==ft})&&gt==Un||Ht==Tt&&[Me,oe].indexOf(gt)!=-1?le:rt.indexOf(St)!=-1?se:Ht==St&&gt==St?le:he}this.nextBreak=function(y,rt){if(rt===void 0&&(rt=0),rt<0)return 0;if(rt>=y.length-1)return y.length;for(var Bt=De(Xe(y,rt)),pt=[],Ht=rt+1;Ht<y.length;Ht++)if(!Ye(y,Ht-1)){var gt=De(Xe(y,Ht));if(fe(Bt,pt,gt))return Ht;pt.push(gt)}return y.length},this.splitGraphemes=function(y){for(var rt=[],Bt=0,pt;(pt=this.nextBreak(y,Bt))<y.length;)rt.push(y.slice(Bt,pt)),Bt=pt;return Bt<y.length&&rt.push(y.slice(Bt)),rt},this.iterateGraphemes=function(y){var rt=0,Bt={next:(function(){var pt,Ht;return(Ht=this.nextBreak(y,rt))<y.length?(pt=y.slice(rt,Ht),rt=Ht,{value:pt,done:!1}):rt<y.length?(pt=y.slice(rt),rt=y.length,{value:pt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Bt[Symbol.iterator]=function(){return Bt}),Bt},this.countGraphemes=function(y){for(var rt=0,Bt=0,pt;(pt=this.nextBreak(y,Bt))<y.length;)Bt=pt,rt++;return Bt<y.length&&rt++,rt};function De(y){return 1536<=y&&y<=1541||y==1757||y==1807||y==2274||y==3406||y==69821||70082<=y&&y<=70083||y==72250||72326<=y&&y<=72329||y==73030?pn:y==13?Ge:y==10?st:0<=y&&y<=9||11<=y&&y<=12||14<=y&&y<=31||127<=y&&y<=159||y==173||y==1564||y==6158||y==8203||8206<=y&&y<=8207||y==8232||y==8233||8234<=y&&y<=8238||8288<=y&&y<=8292||y==8293||8294<=y&&y<=8303||55296<=y&&y<=57343||y==65279||65520<=y&&y<=65528||65529<=y&&y<=65531||113824<=y&&y<=113827||119155<=y&&y<=119162||y==917504||y==917505||917506<=y&&y<=917535||917632<=y&&y<=917759||918e3<=y&&y<=921599?ut:768<=y&&y<=879||1155<=y&&y<=1159||1160<=y&&y<=1161||1425<=y&&y<=1469||y==1471||1473<=y&&y<=1474||1476<=y&&y<=1477||y==1479||1552<=y&&y<=1562||1611<=y&&y<=1631||y==1648||1750<=y&&y<=1756||1759<=y&&y<=1764||1767<=y&&y<=1768||1770<=y&&y<=1773||y==1809||1840<=y&&y<=1866||1958<=y&&y<=1968||2027<=y&&y<=2035||2070<=y&&y<=2073||2075<=y&&y<=2083||2085<=y&&y<=2087||2089<=y&&y<=2093||2137<=y&&y<=2139||2260<=y&&y<=2273||2275<=y&&y<=2306||y==2362||y==2364||2369<=y&&y<=2376||y==2381||2385<=y&&y<=2391||2402<=y&&y<=2403||y==2433||y==2492||y==2494||2497<=y&&y<=2500||y==2509||y==2519||2530<=y&&y<=2531||2561<=y&&y<=2562||y==2620||2625<=y&&y<=2626||2631<=y&&y<=2632||2635<=y&&y<=2637||y==2641||2672<=y&&y<=2673||y==2677||2689<=y&&y<=2690||y==2748||2753<=y&&y<=2757||2759<=y&&y<=2760||y==2765||2786<=y&&y<=2787||2810<=y&&y<=2815||y==2817||y==2876||y==2878||y==2879||2881<=y&&y<=2884||y==2893||y==2902||y==2903||2914<=y&&y<=2915||y==2946||y==3006||y==3008||y==3021||y==3031||y==3072||3134<=y&&y<=3136||3142<=y&&y<=3144||3146<=y&&y<=3149||3157<=y&&y<=3158||3170<=y&&y<=3171||y==3201||y==3260||y==3263||y==3266||y==3270||3276<=y&&y<=3277||3285<=y&&y<=3286||3298<=y&&y<=3299||3328<=y&&y<=3329||3387<=y&&y<=3388||y==3390||3393<=y&&y<=3396||y==3405||y==3415||3426<=y&&y<=3427||y==3530||y==3535||3538<=y&&y<=3540||y==3542||y==3551||y==3633||3636<=y&&y<=3642||3655<=y&&y<=3662||y==3761||3764<=y&&y<=3769||3771<=y&&y<=3772||3784<=y&&y<=3789||3864<=y&&y<=3865||y==3893||y==3895||y==3897||3953<=y&&y<=3966||3968<=y&&y<=3972||3974<=y&&y<=3975||3981<=y&&y<=3991||3993<=y&&y<=4028||y==4038||4141<=y&&y<=4144||4146<=y&&y<=4151||4153<=y&&y<=4154||4157<=y&&y<=4158||4184<=y&&y<=4185||4190<=y&&y<=4192||4209<=y&&y<=4212||y==4226||4229<=y&&y<=4230||y==4237||y==4253||4957<=y&&y<=4959||5906<=y&&y<=5908||5938<=y&&y<=5940||5970<=y&&y<=5971||6002<=y&&y<=6003||6068<=y&&y<=6069||6071<=y&&y<=6077||y==6086||6089<=y&&y<=6099||y==6109||6155<=y&&y<=6157||6277<=y&&y<=6278||y==6313||6432<=y&&y<=6434||6439<=y&&y<=6440||y==6450||6457<=y&&y<=6459||6679<=y&&y<=6680||y==6683||y==6742||6744<=y&&y<=6750||y==6752||y==6754||6757<=y&&y<=6764||6771<=y&&y<=6780||y==6783||6832<=y&&y<=6845||y==6846||6912<=y&&y<=6915||y==6964||6966<=y&&y<=6970||y==6972||y==6978||7019<=y&&y<=7027||7040<=y&&y<=7041||7074<=y&&y<=7077||7080<=y&&y<=7081||7083<=y&&y<=7085||y==7142||7144<=y&&y<=7145||y==7149||7151<=y&&y<=7153||7212<=y&&y<=7219||7222<=y&&y<=7223||7376<=y&&y<=7378||7380<=y&&y<=7392||7394<=y&&y<=7400||y==7405||y==7412||7416<=y&&y<=7417||7616<=y&&y<=7673||7675<=y&&y<=7679||y==8204||8400<=y&&y<=8412||8413<=y&&y<=8416||y==8417||8418<=y&&y<=8420||8421<=y&&y<=8432||11503<=y&&y<=11505||y==11647||11744<=y&&y<=11775||12330<=y&&y<=12333||12334<=y&&y<=12335||12441<=y&&y<=12442||y==42607||42608<=y&&y<=42610||42612<=y&&y<=42621||42654<=y&&y<=42655||42736<=y&&y<=42737||y==43010||y==43014||y==43019||43045<=y&&y<=43046||43204<=y&&y<=43205||43232<=y&&y<=43249||43302<=y&&y<=43309||43335<=y&&y<=43345||43392<=y&&y<=43394||y==43443||43446<=y&&y<=43449||y==43452||y==43493||43561<=y&&y<=43566||43569<=y&&y<=43570||43573<=y&&y<=43574||y==43587||y==43596||y==43644||y==43696||43698<=y&&y<=43700||43703<=y&&y<=43704||43710<=y&&y<=43711||y==43713||43756<=y&&y<=43757||y==43766||y==44005||y==44008||y==44013||y==64286||65024<=y&&y<=65039||65056<=y&&y<=65071||65438<=y&&y<=65439||y==66045||y==66272||66422<=y&&y<=66426||68097<=y&&y<=68099||68101<=y&&y<=68102||68108<=y&&y<=68111||68152<=y&&y<=68154||y==68159||68325<=y&&y<=68326||y==69633||69688<=y&&y<=69702||69759<=y&&y<=69761||69811<=y&&y<=69814||69817<=y&&y<=69818||69888<=y&&y<=69890||69927<=y&&y<=69931||69933<=y&&y<=69940||y==70003||70016<=y&&y<=70017||70070<=y&&y<=70078||70090<=y&&y<=70092||70191<=y&&y<=70193||y==70196||70198<=y&&y<=70199||y==70206||y==70367||70371<=y&&y<=70378||70400<=y&&y<=70401||y==70460||y==70462||y==70464||y==70487||70502<=y&&y<=70508||70512<=y&&y<=70516||70712<=y&&y<=70719||70722<=y&&y<=70724||y==70726||y==70832||70835<=y&&y<=70840||y==70842||y==70845||70847<=y&&y<=70848||70850<=y&&y<=70851||y==71087||71090<=y&&y<=71093||71100<=y&&y<=71101||71103<=y&&y<=71104||71132<=y&&y<=71133||71219<=y&&y<=71226||y==71229||71231<=y&&y<=71232||y==71339||y==71341||71344<=y&&y<=71349||y==71351||71453<=y&&y<=71455||71458<=y&&y<=71461||71463<=y&&y<=71467||72193<=y&&y<=72198||72201<=y&&y<=72202||72243<=y&&y<=72248||72251<=y&&y<=72254||y==72263||72273<=y&&y<=72278||72281<=y&&y<=72283||72330<=y&&y<=72342||72344<=y&&y<=72345||72752<=y&&y<=72758||72760<=y&&y<=72765||y==72767||72850<=y&&y<=72871||72874<=y&&y<=72880||72882<=y&&y<=72883||72885<=y&&y<=72886||73009<=y&&y<=73014||y==73018||73020<=y&&y<=73021||73023<=y&&y<=73029||y==73031||92912<=y&&y<=92916||92976<=y&&y<=92982||94095<=y&&y<=94098||113821<=y&&y<=113822||y==119141||119143<=y&&y<=119145||119150<=y&&y<=119154||119163<=y&&y<=119170||119173<=y&&y<=119179||119210<=y&&y<=119213||119362<=y&&y<=119364||121344<=y&&y<=121398||121403<=y&&y<=121452||y==121461||y==121476||121499<=y&&y<=121503||121505<=y&&y<=121519||122880<=y&&y<=122886||122888<=y&&y<=122904||122907<=y&&y<=122913||122915<=y&&y<=122916||122918<=y&&y<=122922||125136<=y&&y<=125142||125252<=y&&y<=125258||917536<=y&&y<=917631||917760<=y&&y<=917999?ft:127462<=y&&y<=127487?St:y==2307||y==2363||2366<=y&&y<=2368||2377<=y&&y<=2380||2382<=y&&y<=2383||2434<=y&&y<=2435||2495<=y&&y<=2496||2503<=y&&y<=2504||2507<=y&&y<=2508||y==2563||2622<=y&&y<=2624||y==2691||2750<=y&&y<=2752||y==2761||2763<=y&&y<=2764||2818<=y&&y<=2819||y==2880||2887<=y&&y<=2888||2891<=y&&y<=2892||y==3007||3009<=y&&y<=3010||3014<=y&&y<=3016||3018<=y&&y<=3020||3073<=y&&y<=3075||3137<=y&&y<=3140||3202<=y&&y<=3203||y==3262||3264<=y&&y<=3265||3267<=y&&y<=3268||3271<=y&&y<=3272||3274<=y&&y<=3275||3330<=y&&y<=3331||3391<=y&&y<=3392||3398<=y&&y<=3400||3402<=y&&y<=3404||3458<=y&&y<=3459||3536<=y&&y<=3537||3544<=y&&y<=3550||3570<=y&&y<=3571||y==3635||y==3763||3902<=y&&y<=3903||y==3967||y==4145||4155<=y&&y<=4156||4182<=y&&y<=4183||y==4228||y==6070||6078<=y&&y<=6085||6087<=y&&y<=6088||6435<=y&&y<=6438||6441<=y&&y<=6443||6448<=y&&y<=6449||6451<=y&&y<=6456||6681<=y&&y<=6682||y==6741||y==6743||6765<=y&&y<=6770||y==6916||y==6965||y==6971||6973<=y&&y<=6977||6979<=y&&y<=6980||y==7042||y==7073||7078<=y&&y<=7079||y==7082||y==7143||7146<=y&&y<=7148||y==7150||7154<=y&&y<=7155||7204<=y&&y<=7211||7220<=y&&y<=7221||y==7393||7410<=y&&y<=7411||y==7415||43043<=y&&y<=43044||y==43047||43136<=y&&y<=43137||43188<=y&&y<=43203||43346<=y&&y<=43347||y==43395||43444<=y&&y<=43445||43450<=y&&y<=43451||43453<=y&&y<=43456||43567<=y&&y<=43568||43571<=y&&y<=43572||y==43597||y==43755||43758<=y&&y<=43759||y==43765||44003<=y&&y<=44004||44006<=y&&y<=44007||44009<=y&&y<=44010||y==44012||y==69632||y==69634||y==69762||69808<=y&&y<=69810||69815<=y&&y<=69816||y==69932||y==70018||70067<=y&&y<=70069||70079<=y&&y<=70080||70188<=y&&y<=70190||70194<=y&&y<=70195||y==70197||70368<=y&&y<=70370||70402<=y&&y<=70403||y==70463||70465<=y&&y<=70468||70471<=y&&y<=70472||70475<=y&&y<=70477||70498<=y&&y<=70499||70709<=y&&y<=70711||70720<=y&&y<=70721||y==70725||70833<=y&&y<=70834||y==70841||70843<=y&&y<=70844||y==70846||y==70849||71088<=y&&y<=71089||71096<=y&&y<=71099||y==71102||71216<=y&&y<=71218||71227<=y&&y<=71228||y==71230||y==71340||71342<=y&&y<=71343||y==71350||71456<=y&&y<=71457||y==71462||72199<=y&&y<=72200||y==72249||72279<=y&&y<=72280||y==72343||y==72751||y==72766||y==72873||y==72881||y==72884||94033<=y&&y<=94078||y==119142||y==119149?kt:4352<=y&&y<=4447||43360<=y&&y<=43388?en:4448<=y&&y<=4519||55216<=y&&y<=55238?Pn:4520<=y&&y<=4607||55243<=y&&y<=55291?zn:y==44032||y==44060||y==44088||y==44116||y==44144||y==44172||y==44200||y==44228||y==44256||y==44284||y==44312||y==44340||y==44368||y==44396||y==44424||y==44452||y==44480||y==44508||y==44536||y==44564||y==44592||y==44620||y==44648||y==44676||y==44704||y==44732||y==44760||y==44788||y==44816||y==44844||y==44872||y==44900||y==44928||y==44956||y==44984||y==45012||y==45040||y==45068||y==45096||y==45124||y==45152||y==45180||y==45208||y==45236||y==45264||y==45292||y==45320||y==45348||y==45376||y==45404||y==45432||y==45460||y==45488||y==45516||y==45544||y==45572||y==45600||y==45628||y==45656||y==45684||y==45712||y==45740||y==45768||y==45796||y==45824||y==45852||y==45880||y==45908||y==45936||y==45964||y==45992||y==46020||y==46048||y==46076||y==46104||y==46132||y==46160||y==46188||y==46216||y==46244||y==46272||y==46300||y==46328||y==46356||y==46384||y==46412||y==46440||y==46468||y==46496||y==46524||y==46552||y==46580||y==46608||y==46636||y==46664||y==46692||y==46720||y==46748||y==46776||y==46804||y==46832||y==46860||y==46888||y==46916||y==46944||y==46972||y==47e3||y==47028||y==47056||y==47084||y==47112||y==47140||y==47168||y==47196||y==47224||y==47252||y==47280||y==47308||y==47336||y==47364||y==47392||y==47420||y==47448||y==47476||y==47504||y==47532||y==47560||y==47588||y==47616||y==47644||y==47672||y==47700||y==47728||y==47756||y==47784||y==47812||y==47840||y==47868||y==47896||y==47924||y==47952||y==47980||y==48008||y==48036||y==48064||y==48092||y==48120||y==48148||y==48176||y==48204||y==48232||y==48260||y==48288||y==48316||y==48344||y==48372||y==48400||y==48428||y==48456||y==48484||y==48512||y==48540||y==48568||y==48596||y==48624||y==48652||y==48680||y==48708||y==48736||y==48764||y==48792||y==48820||y==48848||y==48876||y==48904||y==48932||y==48960||y==48988||y==49016||y==49044||y==49072||y==49100||y==49128||y==49156||y==49184||y==49212||y==49240||y==49268||y==49296||y==49324||y==49352||y==49380||y==49408||y==49436||y==49464||y==49492||y==49520||y==49548||y==49576||y==49604||y==49632||y==49660||y==49688||y==49716||y==49744||y==49772||y==49800||y==49828||y==49856||y==49884||y==49912||y==49940||y==49968||y==49996||y==50024||y==50052||y==50080||y==50108||y==50136||y==50164||y==50192||y==50220||y==50248||y==50276||y==50304||y==50332||y==50360||y==50388||y==50416||y==50444||y==50472||y==50500||y==50528||y==50556||y==50584||y==50612||y==50640||y==50668||y==50696||y==50724||y==50752||y==50780||y==50808||y==50836||y==50864||y==50892||y==50920||y==50948||y==50976||y==51004||y==51032||y==51060||y==51088||y==51116||y==51144||y==51172||y==51200||y==51228||y==51256||y==51284||y==51312||y==51340||y==51368||y==51396||y==51424||y==51452||y==51480||y==51508||y==51536||y==51564||y==51592||y==51620||y==51648||y==51676||y==51704||y==51732||y==51760||y==51788||y==51816||y==51844||y==51872||y==51900||y==51928||y==51956||y==51984||y==52012||y==52040||y==52068||y==52096||y==52124||y==52152||y==52180||y==52208||y==52236||y==52264||y==52292||y==52320||y==52348||y==52376||y==52404||y==52432||y==52460||y==52488||y==52516||y==52544||y==52572||y==52600||y==52628||y==52656||y==52684||y==52712||y==52740||y==52768||y==52796||y==52824||y==52852||y==52880||y==52908||y==52936||y==52964||y==52992||y==53020||y==53048||y==53076||y==53104||y==53132||y==53160||y==53188||y==53216||y==53244||y==53272||y==53300||y==53328||y==53356||y==53384||y==53412||y==53440||y==53468||y==53496||y==53524||y==53552||y==53580||y==53608||y==53636||y==53664||y==53692||y==53720||y==53748||y==53776||y==53804||y==53832||y==53860||y==53888||y==53916||y==53944||y==53972||y==54e3||y==54028||y==54056||y==54084||y==54112||y==54140||y==54168||y==54196||y==54224||y==54252||y==54280||y==54308||y==54336||y==54364||y==54392||y==54420||y==54448||y==54476||y==54504||y==54532||y==54560||y==54588||y==54616||y==54644||y==54672||y==54700||y==54728||y==54756||y==54784||y==54812||y==54840||y==54868||y==54896||y==54924||y==54952||y==54980||y==55008||y==55036||y==55064||y==55092||y==55120||y==55148||y==55176?si:44033<=y&&y<=44059||44061<=y&&y<=44087||44089<=y&&y<=44115||44117<=y&&y<=44143||44145<=y&&y<=44171||44173<=y&&y<=44199||44201<=y&&y<=44227||44229<=y&&y<=44255||44257<=y&&y<=44283||44285<=y&&y<=44311||44313<=y&&y<=44339||44341<=y&&y<=44367||44369<=y&&y<=44395||44397<=y&&y<=44423||44425<=y&&y<=44451||44453<=y&&y<=44479||44481<=y&&y<=44507||44509<=y&&y<=44535||44537<=y&&y<=44563||44565<=y&&y<=44591||44593<=y&&y<=44619||44621<=y&&y<=44647||44649<=y&&y<=44675||44677<=y&&y<=44703||44705<=y&&y<=44731||44733<=y&&y<=44759||44761<=y&&y<=44787||44789<=y&&y<=44815||44817<=y&&y<=44843||44845<=y&&y<=44871||44873<=y&&y<=44899||44901<=y&&y<=44927||44929<=y&&y<=44955||44957<=y&&y<=44983||44985<=y&&y<=45011||45013<=y&&y<=45039||45041<=y&&y<=45067||45069<=y&&y<=45095||45097<=y&&y<=45123||45125<=y&&y<=45151||45153<=y&&y<=45179||45181<=y&&y<=45207||45209<=y&&y<=45235||45237<=y&&y<=45263||45265<=y&&y<=45291||45293<=y&&y<=45319||45321<=y&&y<=45347||45349<=y&&y<=45375||45377<=y&&y<=45403||45405<=y&&y<=45431||45433<=y&&y<=45459||45461<=y&&y<=45487||45489<=y&&y<=45515||45517<=y&&y<=45543||45545<=y&&y<=45571||45573<=y&&y<=45599||45601<=y&&y<=45627||45629<=y&&y<=45655||45657<=y&&y<=45683||45685<=y&&y<=45711||45713<=y&&y<=45739||45741<=y&&y<=45767||45769<=y&&y<=45795||45797<=y&&y<=45823||45825<=y&&y<=45851||45853<=y&&y<=45879||45881<=y&&y<=45907||45909<=y&&y<=45935||45937<=y&&y<=45963||45965<=y&&y<=45991||45993<=y&&y<=46019||46021<=y&&y<=46047||46049<=y&&y<=46075||46077<=y&&y<=46103||46105<=y&&y<=46131||46133<=y&&y<=46159||46161<=y&&y<=46187||46189<=y&&y<=46215||46217<=y&&y<=46243||46245<=y&&y<=46271||46273<=y&&y<=46299||46301<=y&&y<=46327||46329<=y&&y<=46355||46357<=y&&y<=46383||46385<=y&&y<=46411||46413<=y&&y<=46439||46441<=y&&y<=46467||46469<=y&&y<=46495||46497<=y&&y<=46523||46525<=y&&y<=46551||46553<=y&&y<=46579||46581<=y&&y<=46607||46609<=y&&y<=46635||46637<=y&&y<=46663||46665<=y&&y<=46691||46693<=y&&y<=46719||46721<=y&&y<=46747||46749<=y&&y<=46775||46777<=y&&y<=46803||46805<=y&&y<=46831||46833<=y&&y<=46859||46861<=y&&y<=46887||46889<=y&&y<=46915||46917<=y&&y<=46943||46945<=y&&y<=46971||46973<=y&&y<=46999||47001<=y&&y<=47027||47029<=y&&y<=47055||47057<=y&&y<=47083||47085<=y&&y<=47111||47113<=y&&y<=47139||47141<=y&&y<=47167||47169<=y&&y<=47195||47197<=y&&y<=47223||47225<=y&&y<=47251||47253<=y&&y<=47279||47281<=y&&y<=47307||47309<=y&&y<=47335||47337<=y&&y<=47363||47365<=y&&y<=47391||47393<=y&&y<=47419||47421<=y&&y<=47447||47449<=y&&y<=47475||47477<=y&&y<=47503||47505<=y&&y<=47531||47533<=y&&y<=47559||47561<=y&&y<=47587||47589<=y&&y<=47615||47617<=y&&y<=47643||47645<=y&&y<=47671||47673<=y&&y<=47699||47701<=y&&y<=47727||47729<=y&&y<=47755||47757<=y&&y<=47783||47785<=y&&y<=47811||47813<=y&&y<=47839||47841<=y&&y<=47867||47869<=y&&y<=47895||47897<=y&&y<=47923||47925<=y&&y<=47951||47953<=y&&y<=47979||47981<=y&&y<=48007||48009<=y&&y<=48035||48037<=y&&y<=48063||48065<=y&&y<=48091||48093<=y&&y<=48119||48121<=y&&y<=48147||48149<=y&&y<=48175||48177<=y&&y<=48203||48205<=y&&y<=48231||48233<=y&&y<=48259||48261<=y&&y<=48287||48289<=y&&y<=48315||48317<=y&&y<=48343||48345<=y&&y<=48371||48373<=y&&y<=48399||48401<=y&&y<=48427||48429<=y&&y<=48455||48457<=y&&y<=48483||48485<=y&&y<=48511||48513<=y&&y<=48539||48541<=y&&y<=48567||48569<=y&&y<=48595||48597<=y&&y<=48623||48625<=y&&y<=48651||48653<=y&&y<=48679||48681<=y&&y<=48707||48709<=y&&y<=48735||48737<=y&&y<=48763||48765<=y&&y<=48791||48793<=y&&y<=48819||48821<=y&&y<=48847||48849<=y&&y<=48875||48877<=y&&y<=48903||48905<=y&&y<=48931||48933<=y&&y<=48959||48961<=y&&y<=48987||48989<=y&&y<=49015||49017<=y&&y<=49043||49045<=y&&y<=49071||49073<=y&&y<=49099||49101<=y&&y<=49127||49129<=y&&y<=49155||49157<=y&&y<=49183||49185<=y&&y<=49211||49213<=y&&y<=49239||49241<=y&&y<=49267||49269<=y&&y<=49295||49297<=y&&y<=49323||49325<=y&&y<=49351||49353<=y&&y<=49379||49381<=y&&y<=49407||49409<=y&&y<=49435||49437<=y&&y<=49463||49465<=y&&y<=49491||49493<=y&&y<=49519||49521<=y&&y<=49547||49549<=y&&y<=49575||49577<=y&&y<=49603||49605<=y&&y<=49631||49633<=y&&y<=49659||49661<=y&&y<=49687||49689<=y&&y<=49715||49717<=y&&y<=49743||49745<=y&&y<=49771||49773<=y&&y<=49799||49801<=y&&y<=49827||49829<=y&&y<=49855||49857<=y&&y<=49883||49885<=y&&y<=49911||49913<=y&&y<=49939||49941<=y&&y<=49967||49969<=y&&y<=49995||49997<=y&&y<=50023||50025<=y&&y<=50051||50053<=y&&y<=50079||50081<=y&&y<=50107||50109<=y&&y<=50135||50137<=y&&y<=50163||50165<=y&&y<=50191||50193<=y&&y<=50219||50221<=y&&y<=50247||50249<=y&&y<=50275||50277<=y&&y<=50303||50305<=y&&y<=50331||50333<=y&&y<=50359||50361<=y&&y<=50387||50389<=y&&y<=50415||50417<=y&&y<=50443||50445<=y&&y<=50471||50473<=y&&y<=50499||50501<=y&&y<=50527||50529<=y&&y<=50555||50557<=y&&y<=50583||50585<=y&&y<=50611||50613<=y&&y<=50639||50641<=y&&y<=50667||50669<=y&&y<=50695||50697<=y&&y<=50723||50725<=y&&y<=50751||50753<=y&&y<=50779||50781<=y&&y<=50807||50809<=y&&y<=50835||50837<=y&&y<=50863||50865<=y&&y<=50891||50893<=y&&y<=50919||50921<=y&&y<=50947||50949<=y&&y<=50975||50977<=y&&y<=51003||51005<=y&&y<=51031||51033<=y&&y<=51059||51061<=y&&y<=51087||51089<=y&&y<=51115||51117<=y&&y<=51143||51145<=y&&y<=51171||51173<=y&&y<=51199||51201<=y&&y<=51227||51229<=y&&y<=51255||51257<=y&&y<=51283||51285<=y&&y<=51311||51313<=y&&y<=51339||51341<=y&&y<=51367||51369<=y&&y<=51395||51397<=y&&y<=51423||51425<=y&&y<=51451||51453<=y&&y<=51479||51481<=y&&y<=51507||51509<=y&&y<=51535||51537<=y&&y<=51563||51565<=y&&y<=51591||51593<=y&&y<=51619||51621<=y&&y<=51647||51649<=y&&y<=51675||51677<=y&&y<=51703||51705<=y&&y<=51731||51733<=y&&y<=51759||51761<=y&&y<=51787||51789<=y&&y<=51815||51817<=y&&y<=51843||51845<=y&&y<=51871||51873<=y&&y<=51899||51901<=y&&y<=51927||51929<=y&&y<=51955||51957<=y&&y<=51983||51985<=y&&y<=52011||52013<=y&&y<=52039||52041<=y&&y<=52067||52069<=y&&y<=52095||52097<=y&&y<=52123||52125<=y&&y<=52151||52153<=y&&y<=52179||52181<=y&&y<=52207||52209<=y&&y<=52235||52237<=y&&y<=52263||52265<=y&&y<=52291||52293<=y&&y<=52319||52321<=y&&y<=52347||52349<=y&&y<=52375||52377<=y&&y<=52403||52405<=y&&y<=52431||52433<=y&&y<=52459||52461<=y&&y<=52487||52489<=y&&y<=52515||52517<=y&&y<=52543||52545<=y&&y<=52571||52573<=y&&y<=52599||52601<=y&&y<=52627||52629<=y&&y<=52655||52657<=y&&y<=52683||52685<=y&&y<=52711||52713<=y&&y<=52739||52741<=y&&y<=52767||52769<=y&&y<=52795||52797<=y&&y<=52823||52825<=y&&y<=52851||52853<=y&&y<=52879||52881<=y&&y<=52907||52909<=y&&y<=52935||52937<=y&&y<=52963||52965<=y&&y<=52991||52993<=y&&y<=53019||53021<=y&&y<=53047||53049<=y&&y<=53075||53077<=y&&y<=53103||53105<=y&&y<=53131||53133<=y&&y<=53159||53161<=y&&y<=53187||53189<=y&&y<=53215||53217<=y&&y<=53243||53245<=y&&y<=53271||53273<=y&&y<=53299||53301<=y&&y<=53327||53329<=y&&y<=53355||53357<=y&&y<=53383||53385<=y&&y<=53411||53413<=y&&y<=53439||53441<=y&&y<=53467||53469<=y&&y<=53495||53497<=y&&y<=53523||53525<=y&&y<=53551||53553<=y&&y<=53579||53581<=y&&y<=53607||53609<=y&&y<=53635||53637<=y&&y<=53663||53665<=y&&y<=53691||53693<=y&&y<=53719||53721<=y&&y<=53747||53749<=y&&y<=53775||53777<=y&&y<=53803||53805<=y&&y<=53831||53833<=y&&y<=53859||53861<=y&&y<=53887||53889<=y&&y<=53915||53917<=y&&y<=53943||53945<=y&&y<=53971||53973<=y&&y<=53999||54001<=y&&y<=54027||54029<=y&&y<=54055||54057<=y&&y<=54083||54085<=y&&y<=54111||54113<=y&&y<=54139||54141<=y&&y<=54167||54169<=y&&y<=54195||54197<=y&&y<=54223||54225<=y&&y<=54251||54253<=y&&y<=54279||54281<=y&&y<=54307||54309<=y&&y<=54335||54337<=y&&y<=54363||54365<=y&&y<=54391||54393<=y&&y<=54419||54421<=y&&y<=54447||54449<=y&&y<=54475||54477<=y&&y<=54503||54505<=y&&y<=54531||54533<=y&&y<=54559||54561<=y&&y<=54587||54589<=y&&y<=54615||54617<=y&&y<=54643||54645<=y&&y<=54671||54673<=y&&y<=54699||54701<=y&&y<=54727||54729<=y&&y<=54755||54757<=y&&y<=54783||54785<=y&&y<=54811||54813<=y&&y<=54839||54841<=y&&y<=54867||54869<=y&&y<=54895||54897<=y&&y<=54923||54925<=y&&y<=54951||54953<=y&&y<=54979||54981<=y&&y<=55007||55009<=y&&y<=55035||55037<=y&&y<=55063||55065<=y&&y<=55091||55093<=y&&y<=55119||55121<=y&&y<=55147||55149<=y&&y<=55175||55177<=y&&y<=55203?xn:y==9757||y==9977||9994<=y&&y<=9997||y==127877||127938<=y&&y<=127940||y==127943||127946<=y&&y<=127948||128066<=y&&y<=128067||128070<=y&&y<=128080||y==128110||128112<=y&&y<=128120||y==128124||128129<=y&&y<=128131||128133<=y&&y<=128135||y==128170||128372<=y&&y<=128373||y==128378||y==128400||128405<=y&&y<=128406||128581<=y&&y<=128583||128587<=y&&y<=128591||y==128675||128692<=y&&y<=128694||y==128704||y==128716||129304<=y&&y<=129308||129310<=y&&y<=129311||y==129318||129328<=y&&y<=129337||129341<=y&&y<=129342||129489<=y&&y<=129501?Hn:127995<=y&&y<=127999?Un:y==8205?Tt:y==9792||y==9794||9877<=y&&y<=9878||y==9992||y==10084||y==127752||y==127806||y==127859||y==127891||y==127908||y==127912||y==127979||y==127981||y==128139||128187<=y&&y<=128188||y==128295||y==128300||y==128488||y==128640||y==128658?Me:128102<=y&&y<=128105?oe:Rn}return this}Ie.exports&&(Ie.exports=Se)}),o=new r,s=function(Se,Ge,st){for(var ut=o.iterateGraphemes(Se.substring(Ge)),ft="",St=0;St<st-Ge;St++){var kt=ut.next();if(ft+=kt.value,kt.done)break}return ft},a=(function(Ie,Se,Ge,st,ut,ft,St){return{start:{line:Ie,column:Se,offset:Ge},end:{line:st,column:ut,offset:ft},source:St||null}}),c=i(function(Ie,Se){(function(Ge,st){Ie.exports=st()})(t,function(){var Ge="",st,ut=ft;function ft(xn,Rn){if(typeof xn!="string")throw new TypeError("expected a string");if(Rn===1)return xn;if(Rn===2)return xn+xn;var pn=xn.length*Rn;if(st!==xn||typeof st>"u")st=xn,Ge="";else if(Ge.length>=pn)return Ge.substr(0,pn);for(;pn>Ge.length&&Rn>1;)Rn&1&&(Ge+=xn),Rn>>=1,xn+=xn;return Ge+=xn,Ge=Ge.substr(0,pn),Ge}var St=function(Rn,pn,Hn){if(Rn==null||pn==null)return Rn;var Un=String(Rn),Tt=typeof pn=="number"?pn:parseInt(pn,10);if(isNaN(Tt)||!isFinite(Tt))return Un;var Me=Un.length;if(Me>=Tt)return Un;var oe=String(Hn);oe===""&&(oe=" ");for(var le=Tt-Me;oe.length<le;)oe+=oe;var he=oe.length>le?oe.substr(0,le):oe;return he+Un},kt=Object.assign||function(xn){for(var Rn=1;Rn<arguments.length;Rn++){var pn=arguments[Rn];for(var Hn in pn)Object.prototype.hasOwnProperty.call(pn,Hn)&&(xn[Hn]=pn[Hn])}return xn};function en(xn,Rn,pn,Hn){var Un=String(Rn),Tt=St(Un,pn," "),Me=ut(" ",Hn.tabSize);return Tt+" | "+xn.replace(/\t/g,Me)}function Pn(xn,Rn,pn,Hn,Un){return xn.slice(Rn,pn).map(function(Tt,Me){return en(Tt,Rn+Me+1,Hn,Un)}).join(`
`)}var zn={extraLines:2,tabSize:4},si=function(Rn,pn,Hn,Un){Un=kt({},zn,Un);var Tt=Rn.split(/\r\n?|\n|\f/),Me=Math.max(1,pn-Un.extraLines)-1,oe=Math.min(pn+Un.extraLines,Tt.length),le=String(oe).length,he=Pn(Tt,Me,pn,le,Un),se=en(Tt[pn-1].substring(0,Hn-1),pn,le,Un),Ae=ut(" ",se.length)+"^",xe=Pn(Tt,pn,oe,le,Un);return[he,Ae,xe].filter(Boolean).join(`
`)};return si})}),h=new Error().stack,m=(function(Ie){var Se=Object.create(SyntaxError.prototype);return Object.assign(Se,Ie,{name:"SyntaxError"}),Object.defineProperty(Se,"stack",{get:function(){return h?h.replace(/^(.+\n){1,3}/,String(Se)+`
`):""}}),Se}),v=(function(Ie,Se,Ge,st,ut){throw m({message:st?Ie+`
`+c(Se,st,ut):Ie,rawMessage:Ie,source:Ge,line:st,column:ut})}),x={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Se){for(var Ge=arguments.length,st=Array(Ge>1?Ge-1:0),ut=1;ut<Ge;ut++)st[ut-1]=arguments[ut];return"Unexpected token <"+Se+"> at "+st.filter(Boolean).join(":")}},S={unexpectedSymbol:function(Se){for(var Ge=arguments.length,st=Array(Ge>1?Ge-1:0),ut=1;ut<Ge;ut++)st[ut-1]=arguments[ut];return"Unexpected symbol <"+Se+"> at "+st.filter(Boolean).join(":")}},B={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},R={"{":B.LEFT_BRACE,"}":B.RIGHT_BRACE,"[":B.LEFT_BRACKET,"]":B.RIGHT_BRACKET,":":B.COLON,",":B.COMMA},F={true:B.TRUE,false:B.FALSE,null:B.NULL},j={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},W={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},H={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function $(Ie){return Ie>="1"&&Ie<="9"}function N(Ie){return Ie>="0"&&Ie<="9"}function Y(Ie){return N(Ie)||Ie>="a"&&Ie<="f"||Ie>="A"&&Ie<="F"}function z(Ie){return Ie==="e"||Ie==="E"}function ne(Ie,Se,Ge,st){var ut=Ie.charAt(Se);if(ut==="\r")Se++,Ge++,st=1,Ie.charAt(Se)===`
`&&Se++;else if(ut===`
`)Se++,Ge++,st=1;else if(ut==="	"||ut===" ")Se++,st++;else return null;return{index:Se,line:Ge,column:st}}function ae(Ie,Se,Ge,st){var ut=Ie.charAt(Se);return ut in R?{type:R[ut],line:Ge,column:st+1,index:Se+1,value:null}:null}function ve(Ie,Se,Ge,st){for(var ut in F)if(F.hasOwnProperty(ut)&&Ie.substr(Se,ut.length)===ut)return{type:F[ut],line:Ge,column:st+ut.length,index:Se+ut.length,value:ut};return null}function pe(Ie,Se,Ge,st){for(var ut=Se,ft=j._START_;Se<Ie.length;){var St=Ie.charAt(Se);switch(ft){case j._START_:{if(St==='"')Se++,ft=j.START_QUOTE_OR_CHAR;else return null;break}case j.START_QUOTE_OR_CHAR:{if(St==="\\")Se++,ft=j.ESCAPE;else{if(St==='"')return Se++,{type:B.STRING,line:Ge,column:st+Se-ut,index:Se,value:Ie.slice(ut,Se)};Se++}break}case j.ESCAPE:{if(St in W){if(Se++,St==="u")for(var kt=0;kt<4;kt++){var en=Ie.charAt(Se);if(en&&Y(en))Se++;else return null}ft=j.START_QUOTE_OR_CHAR}else return null;break}}}}function be(Ie,Se,Ge,st){var ut=Se,ft=Se,St=H._START_;e:for(;Se<Ie.length;){var kt=Ie.charAt(Se);switch(St){case H._START_:{if(kt==="-")St=H.MINUS;else if(kt==="0")ft=Se+1,St=H.ZERO;else if($(kt))ft=Se+1,St=H.DIGIT;else return null;break}case H.MINUS:{if(kt==="0")ft=Se+1,St=H.ZERO;else if($(kt))ft=Se+1,St=H.DIGIT;else return null;break}case H.ZERO:{if(kt===".")St=H.POINT;else if(z(kt))St=H.EXP;else break e;break}case H.DIGIT:{if(N(kt))ft=Se+1;else if(kt===".")St=H.POINT;else if(z(kt))St=H.EXP;else break e;break}case H.POINT:{if(N(kt))ft=Se+1,St=H.DIGIT_FRACTION;else break e;break}case H.DIGIT_FRACTION:{if(N(kt))ft=Se+1;else if(z(kt))St=H.EXP;else break e;break}case H.EXP:{if(kt==="+"||kt==="-")St=H.EXP_DIGIT_OR_SIGN;else if(N(kt))ft=Se+1,St=H.EXP_DIGIT_OR_SIGN;else break e;break}case H.EXP_DIGIT_OR_SIGN:{if(N(kt))ft=Se+1;else break e;break}}Se++}return ft>0?{type:B.NUMBER,line:Ge,column:st+ft-ut,index:ft,value:Ie.slice(ut,ft)}:null}var Ee=function(Se,Ge){for(var st=1,ut=1,ft=0,St=[];ft<Se.length;){var kt=[Se,ft,st,ut],en=ne.apply(void 0,kt);if(en){ft=en.index,st=en.line,ut=en.column;continue}var Pn=ae.apply(void 0,kt)||ve.apply(void 0,kt)||pe.apply(void 0,kt)||be.apply(void 0,kt);if(Pn){var zn={type:Pn.type,value:Pn.value,loc:a(st,ut,ft,Pn.line,Pn.column,Pn.index,Ge.source)};St.push(zn),ft=Pn.index,st=Pn.line,ut=Pn.column}else v(S.unexpectedSymbol(s(Se,ft,ft+1),Ge.source,st,ut),Se,Ge.source,st,ut)}return St},Te={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},je={_START_:0,KEY:1,COLON:2},Re={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},qe={loc:!0,source:null};function nt(Ie,Se,Ge){var st=Se.length>0?Se[Se.length-1].loc.end:{line:1,column:1};v(x.unexpectedEnd(),Ie,Ge.source,st.line,st.column)}function ht(Ie){for(var Se=0,Ge=0;Ge<4;Ge++)Se=Se*16+parseInt(Ie[Ge],16);return String.fromCharCode(Se)}var ke={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Oe=['"',"\\","/"];function ze(Ie){for(var Se="",Ge=0;Ge<Ie.length;Ge++){var st=Ie.charAt(Ge);if(st==="\\"){Ge++;var ut=Ie.charAt(Ge);if(ut==="u")Se+=ht(Ie.substr(Ge+1,4)),Ge+=4;else if(Oe.indexOf(ut)!==-1)Se+=ut;else if(ut in ke)Se+=ke[ut];else break}else Se+=st}return Se}function we(Ie,Se,Ge,st){for(var ut=void 0,ft={type:"Object",children:[]},St=Te._START_;Ge<Se.length;){var kt=Se[Ge];switch(St){case Te._START_:{if(kt.type===B.LEFT_BRACE)ut=kt,St=Te.OPEN_OBJECT,Ge++;else return null;break}case Te.OPEN_OBJECT:{if(kt.type===B.RIGHT_BRACE)return st.loc&&(ft.loc=a(ut.loc.start.line,ut.loc.start.column,ut.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,st.source)),{value:ft,index:Ge+1};var en=At(Ie,Se,Ge,st);ft.children.push(en.value),St=Te.PROPERTY,Ge=en.index;break}case Te.PROPERTY:{if(kt.type===B.RIGHT_BRACE)return st.loc&&(ft.loc=a(ut.loc.start.line,ut.loc.start.column,ut.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,st.source)),{value:ft,index:Ge+1};kt.type===B.COMMA?(St=Te.COMMA,Ge++):v(x.unexpectedToken(s(Ie,kt.loc.start.offset,kt.loc.end.offset),st.source,kt.loc.start.line,kt.loc.start.column),Ie,st.source,kt.loc.start.line,kt.loc.start.column);break}case Te.COMMA:{var Pn=At(Ie,Se,Ge,st);Pn?(Ge=Pn.index,ft.children.push(Pn.value),St=Te.PROPERTY):v(x.unexpectedToken(s(Ie,kt.loc.start.offset,kt.loc.end.offset),st.source,kt.loc.start.line,kt.loc.start.column),Ie,st.source,kt.loc.start.line,kt.loc.start.column);break}}}nt(Ie,Se,st)}function At(Ie,Se,Ge,st){for(var ut=void 0,ft={type:"Property",key:null,value:null},St=je._START_;Ge<Se.length;){var kt=Se[Ge];switch(St){case je._START_:{if(kt.type===B.STRING){var en={type:"Identifier",value:ze(Ie.slice(kt.loc.start.offset+1,kt.loc.end.offset-1)),raw:kt.value};st.loc&&(en.loc=kt.loc),ut=kt,ft.key=en,St=je.KEY,Ge++}else return null;break}case je.KEY:{kt.type===B.COLON?(St=je.COLON,Ge++):v(x.unexpectedToken(s(Ie,kt.loc.start.offset,kt.loc.end.offset),st.source,kt.loc.start.line,kt.loc.start.column),Ie,st.source,kt.loc.start.line,kt.loc.start.column);break}case je.COLON:{var Pn=It(Ie,Se,Ge,st);return ft.value=Pn.value,st.loc&&(ft.loc=a(ut.loc.start.line,ut.loc.start.column,ut.loc.start.offset,Pn.value.loc.end.line,Pn.value.loc.end.column,Pn.value.loc.end.offset,st.source)),{value:ft,index:Pn.index}}}}}function it(Ie,Se,Ge,st){for(var ut=void 0,ft={type:"Array",children:[]},St=Re._START_,kt=void 0;Ge<Se.length;)switch(kt=Se[Ge],St){case Re._START_:{if(kt.type===B.LEFT_BRACKET)ut=kt,St=Re.OPEN_ARRAY,Ge++;else return null;break}case Re.OPEN_ARRAY:{if(kt.type===B.RIGHT_BRACKET)return st.loc&&(ft.loc=a(ut.loc.start.line,ut.loc.start.column,ut.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,st.source)),{value:ft,index:Ge+1};var en=It(Ie,Se,Ge,st);Ge=en.index,ft.children.push(en.value),St=Re.VALUE;break}case Re.VALUE:{if(kt.type===B.RIGHT_BRACKET)return st.loc&&(ft.loc=a(ut.loc.start.line,ut.loc.start.column,ut.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,st.source)),{value:ft,index:Ge+1};kt.type===B.COMMA?(St=Re.COMMA,Ge++):v(x.unexpectedToken(s(Ie,kt.loc.start.offset,kt.loc.end.offset),st.source,kt.loc.start.line,kt.loc.start.column),Ie,st.source,kt.loc.start.line,kt.loc.start.column);break}case Re.COMMA:{var Pn=It(Ie,Se,Ge,st);Ge=Pn.index,ft.children.push(Pn.value),St=Re.VALUE;break}}nt(Ie,Se,st)}function Ct(Ie,Se,Ge,st){var ut=Se[Ge],ft=null;switch(ut.type){case B.STRING:{ft=ze(Ie.slice(ut.loc.start.offset+1,ut.loc.end.offset-1));break}case B.NUMBER:{ft=Number(ut.value);break}case B.TRUE:{ft=!0;break}case B.FALSE:{ft=!1;break}case B.NULL:{ft=null;break}default:return null}var St={type:"Literal",value:ft,raw:ut.value};return st.loc&&(St.loc=ut.loc),{value:St,index:Ge+1}}function It(Ie,Se,Ge,st){var ut=Se[Ge],ft=Ct.apply(void 0,arguments)||we.apply(void 0,arguments)||it.apply(void 0,arguments);if(ft)return ft;v(x.unexpectedToken(s(Ie,ut.loc.start.offset,ut.loc.end.offset),st.source,ut.loc.start.line,ut.loc.start.column),Ie,st.source,ut.loc.start.line,ut.loc.start.column)}var Ke=(function(Ie,Se){Se=Object.assign({},qe,Se);var Ge=Ee(Ie,Se);Ge.length===0&&nt(Ie,Ge,Se);var st=It(Ie,Ge,0,Se);if(st.index===Ge.length)return st.value;var ut=Ge[st.index];v(x.unexpectedToken(s(Ie,ut.loc.start.offset,ut.loc.end.offset),Se.source,ut.loc.start.line,ut.loc.start.column),Ie,Se.source,ut.loc.start.line,ut.loc.start.column)});return Ke}))})(Mw)),Mw.exports}var ASe=cSe();const bL=eu(ASe);function Ma(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ma=function(){return s},s}Ma();function pD(n,e){if(Ma().f[0]++,Ma().s[0]++,e)Ma().b[0][1]++;else{Ma().b[0][0]++,Ma().s[1]++;return}if(Ma().s[2]++,n.length<1)return Ma().b[1][0]++,Ma().s[3]++,e;if(Ma().b[1][1]++,Ma().s[4]++,"children"in e)Ma().b[2][1]++;else{Ma().b[2][0]++,Ma().s[5]++;return}const t=(Ma().s[6]++,n[0]);if(Ma().s[7]++,t.match(/^[0-9]+$/))return Ma().b[3][0]++,Ma().s[8]++,pD(n.slice(1),e.children[+n[0]]);Ma().b[3][1]++;const i=(Ma().s[9]++,e.children.find(r=>(Ma().f[1]++,Ma().s[10]++,Ma().b[4][0]++,"key"in r&&(Ma().b[4][1]++,r.key.type==="Identifier")&&(Ma().b[4][2]++,r.key.value===t))));return Ma().s[11]++,pD(n.slice(1),i?.value)}function Dn(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Dn=function(){return s},s}Dn();function CL(n,e){Dn().f[0]++;const t=(Dn().s[0]++,[]);Dn().s[1]++;for(const i of n){const{key:r,message:o}=(Dn().s[2]++,i);if(Dn().s[3]++,!r)Dn().b[0][0]++,Dn().s[4]++,t.push({from:0,to:e.loc?(Dn().b[1][0]++,e.loc.end.offset):(Dn().b[1][1]++,0),severity:"error",message:o});else{Dn().b[0][1]++;const s=(Dn().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(Dn().s[6]++,pD(s,e));if(Dn().s[7]++,a)Dn().b[2][1]++;else{Dn().b[2][0]++,Dn().s[8]++,console.warn("Something went wrong parsing error:",i),Dn().s[9]++;continue}Dn().s[10]++,a.loc?(Dn().b[3][0]++,Dn().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):Dn().b[3][1]++}}return Dn().s[12]++,t}function hSe(){return Dn().f[1]++,Dn().s[13]++,n=>{Dn().f[2]++;const e=(Dn().s[14]++,n.state.doc.toString());Dn().s[15]++;try{const t=(Dn().s[16]++,JSON.parse(e)),i=(Dn().s[17]++,bL(e)),r=(Dn().s[18]++,kd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(Dn().s[19]++,r.filter(s=>(Dn().f[3]++,Dn().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{Dn().f[4]++;const a=(Dn().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return Dn().s[22]++,{key:a[0],message:a[1]}}));return Dn().s[23]++,CL(o,i)}catch{}return Dn().s[24]++,[]}}function dSe(){return Dn().f[5]++,Dn().s[25]++,n=>{Dn().f[6]++;const e=(Dn().s[26]++,n.state.doc.toString());Dn().s[27]++;try{const t=(Dn().s[28]++,JSON.parse(e)),i=(Dn().s[29]++,bL(e)),r=(Dn().s[30]++,kd(t)),o=(Dn().s[31]++,r.map(s=>(Dn().f[7]++,Dn().s[32]++,{key:s.message.split(":")[0],message:s.message})));return Dn().s[33]++,CL(o,i)}catch{}return Dn().s[34]++,[]}}function fSe(n){return Dn().f[8]++,Dn().s[35]++,e=>{Dn().f[9]++;const t=(Dn().s[36]++,e.state.doc.toString()),i=(Dn().s[37]++,JSON.parse(t)),r=(Dn().s[38]++,bL(t)),o=(Dn().s[39]++,yde.createExpression(i,n));if(Dn().s[40]++,o?.result!=="error")return Dn().b[4][0]++,Dn().s[41]++,[];Dn().b[4][1]++;const s=(Dn().s[42]++,o.value);return Dn().s[43]++,CL(s,r)}}function pSe(n){Dn().f[10]++,Dn().s[44]++;let e=()=>(Dn().f[11]++,Dn().s[45]++,[]);switch(Dn().s[46]++,n.lintType){case"style":Dn().b[5][0]++,Dn().s[47]++,e=dSe(),Dn().s[48]++;break;case"layer":Dn().b[5][1]++,Dn().s[49]++,e=hSe(),Dn().s[50]++;break;case"expression":Dn().b[5][2]++,Dn().s[51]++,e=fSe(n.spec),Dn().s[52]++;break;case"json":Dn().b[5][3]++,Dn().s[53]++,e=()=>(Dn().f[12]++,Dn().s[54]++,[]),Dn().s[55]++;break}return Dn().s[56]++,new wi({doc:n.value,extensions:[Uwe,Zwe(),lSe,new g5().of(fs.tabSize.of(2)),wi.theme({"&":{fontSize:"9pt"}}),wi.updateListener.of(t=>{if(Dn().f[13]++,Dn().s[57]++,t.docChanged){Dn().b[6][0]++;const i=(Dn().s[58]++,t.state.doc),r=(Dn().s[59]++,i.toString());Dn().s[60]++,n.onChange(r)}else Dn().b[6][1]++;Dn().s[61]++,t.focusChanged?(Dn().b[7][0]++,Dn().s[62]++,t.view.hasFocus?(Dn().b[8][0]++,Dn().s[63]++,n.onFocus()):(Dn().b[8][1]++,Dn().s[64]++,n.onBlur())):Dn().b[7][1]++}),Pwe(),Swe(t=>{Dn().f[14]++;const i=(Dn().s[65]++,$we()(t));return Dn().s[66]++,i.length>0?(Dn().b[9][0]++,Dn().s[67]++,i):(Dn().b[9][1]++,Dn().s[68]++,e(t))})],parent:n.parent})}function Ci(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="e43efd61468be8295ce1a3716ba2dc0dff5d493c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:8},end:{line:15,column:12}},2:{start:{line:16,column:22},end:{line:16,column:27}},3:{start:{line:18,column:4},end:{line:18,column:17}},4:{start:{line:19,column:4},end:{line:22,column:6}},5:{start:{line:25,column:4},end:{line:25,column:63}},6:{start:{line:28,column:4},end:{line:36,column:7}},7:{start:{line:32,column:27},end:{line:32,column:47}},8:{start:{line:33,column:21},end:{line:33,column:35}},9:{start:{line:34,column:20},end:{line:34,column:33}},10:{start:{line:38,column:12},end:{line:43,column:3}},11:{start:{line:39,column:4},end:{line:39,column:49}},12:{start:{line:39,column:28},end:{line:39,column:49}},13:{start:{line:40,column:4},end:{line:42,column:7}},14:{start:{line:44,column:11},end:{line:49,column:3}},15:{start:{line:45,column:4},end:{line:45,column:47}},16:{start:{line:45,column:27},end:{line:45,column:47}},17:{start:{line:46,column:4},end:{line:48,column:7}},18:{start:{line:51,column:4},end:{line:60,column:5}},19:{start:{line:52,column:6},end:{line:52,column:36}},20:{start:{line:53,column:6},end:{line:59,column:9}},21:{start:{line:62,column:13},end:{line:86,column:3}},22:{start:{line:63,column:4},end:{line:69,column:5}},23:{start:{line:64,column:6},end:{line:64,column:37}},24:{start:{line:65,column:6},end:{line:67,column:9}},25:{start:{line:68,column:6},end:{line:68,column:13}},26:{start:{line:70,column:20},end:{line:70,column:51}},27:{start:{line:71,column:4},end:{line:82,column:5}},28:{start:{line:73,column:6},end:{line:78,column:7}},29:{start:{line:74,column:8},end:{line:74,column:42}},30:{start:{line:76,column:8},end:{line:76,column:19}},31:{start:{line:77,column:8},end:{line:77,column:27}},32:{start:{line:79,column:6},end:{line:81,column:7}},33:{start:{line:80,column:8},end:{line:80,column:66}},34:{start:{line:80,column:33},end:{line:80,column:66}},35:{start:{line:83,column:4},end:{line:85,column:7}},36:{start:{line:88,column:4},end:{line:96,column:9}},37:{start:{line:93,column:10},end:{line:93,column:24}},38:{start:{line:99,column:18},end:{line:99,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:23,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:22},end:{line:26,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:37,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:16},end:{line:32,column:17}},loc:{start:{line:32,column:27},end:{line:32,column:47}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:21},end:{line:33,column:35}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:33}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:12},end:{line:38,column:13}},loc:{start:{line:38,column:18},end:{line:43,column:3}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:17},end:{line:49,column:3}},line:44},10:{name:"(anonymous_10)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:32},end:{line:61,column:3}},line:50},11:{name:"(anonymous_11)",decl:{start:{line:62,column:13},end:{line:62,column:14}},loc:{start:{line:62,column:21},end:{line:86,column:3}},line:62},12:{name:"(anonymous_12)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:11},end:{line:97,column:3}},line:87},13:{name:"(anonymous_13)",decl:{start:{line:92,column:13},end:{line:92,column:14}},loc:{start:{line:92,column:21},end:{line:94,column:9}},line:92}},branchMap:{0:{loc:{start:{line:31,column:16},end:{line:31,column:46}},type:"binary-expr",locations:[{start:{line:31,column:16},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:46}}],line:31},1:{loc:{start:{line:39,column:4},end:{line:39,column:49}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:45,column:47}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:51,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},4:{loc:{start:{line:51,column:8},end:{line:51,column:69}},type:"binary-expr",locations:[{start:{line:51,column:8},end:{line:51,column:29}},{start:{line:51,column:33},end:{line:51,column:69}}],line:51},5:{loc:{start:{line:63,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},6:{loc:{start:{line:71,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:82,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},7:{loc:{start:{line:79,column:6},end:{line:81,column:7}},type:"if",locations:[{start:{line:79,column:6},end:{line:81,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},8:{loc:{start:{line:80,column:8},end:{line:80,column:66}},type:"if",locations:[{start:{line:80,column:8},end:{line:80,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAqHM;AArHN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAmB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,MAAO,SAAS;AAAA,QACnB,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA;AAAA,IAC9B,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e43efd61468be8295ce1a3716ba2dc0dff5d493c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ci=function(){return s},s}Ci();class mSe extends On.Component{static defaultProps=(Ci().s[0]++,{onFocus:()=>{Ci().f[0]++},onBlur:()=>{Ci().f[1]++}});_view;_el=(Ci().s[1]++,null);_cancelNextChange=(Ci().s[2]++,!1);constructor(e){Ci().f[2]++,Ci().s[3]++,super(e),Ci().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return Ci().f[3]++,Ci().s[5]++,K_e(e,{indent:2,maxLength:40})}componentDidMount(){Ci().f[4]++,Ci().s[6]++,this._view=pSe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(Ci().b[0][0]++,this.props.lintType||(Ci().b[0][1]++,"layer")),onChange:e=>(Ci().f[5]++,Ci().s[7]++,this.onChange(e)),onFocus:()=>(Ci().f[6]++,Ci().s[8]++,this.onFocus()),onBlur:()=>(Ci().f[7]++,Ci().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(Ci().s[10]++,()=>{Ci().f[8]++,Ci().s[11]++,this.props.onFocus?(Ci().b[1][0]++,Ci().s[12]++,this.props.onFocus()):Ci().b[1][1]++,Ci().s[13]++,this.setState({isEditing:!0})});onBlur=(Ci().s[14]++,()=>{Ci().f[9]++,Ci().s[15]++,this.props.onBlur?(Ci().b[2][0]++,Ci().s[16]++,this.props.onBlur()):Ci().b[2][1]++,Ci().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){Ci().f[10]++,Ci().s[18]++,Ci().b[4][0]++,!this.state.isEditing&&(Ci().b[4][1]++,e.value!==this.props.value)?(Ci().b[3][0]++,Ci().s[19]++,this._cancelNextChange=!0,Ci().s[20]++,this._view.dispatch({changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)}})):Ci().b[3][1]++}onChange=(Ci().s[21]++,e=>{if(Ci().f[11]++,Ci().s[22]++,this._cancelNextChange){Ci().b[5][0]++,Ci().s[23]++,this._cancelNextChange=!1,Ci().s[24]++,this.setState({prevValue:this._view.state.doc.toString()}),Ci().s[25]++;return}else Ci().b[5][1]++;const t=(Ci().s[26]++,this._view.state.doc.toString());if(Ci().s[27]++,this.state.prevValue!==t){Ci().b[6][0]++;let i,r;Ci().s[28]++;try{Ci().s[29]++,i=JSON.parse(t)}catch(o){Ci().s[30]++,r=o,Ci().s[31]++,console.warn(o)}Ci().s[32]++,r?Ci().b[7][1]++:(Ci().b[7][0]++,Ci().s[33]++,this.props.onChange?(Ci().b[8][0]++,Ci().s[34]++,this.props.onChange(i)):Ci().b[8][1]++)}else Ci().b[6][1]++;Ci().s[35]++,this.setState({prevValue:t})});render(){return Ci().f[12]++,Ci().s[36]++,te.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:te.jsx("div",{className:c0("codemirror-container",this.props.className),ref:e=>{Ci().f[13]++,Ci().s[37]++,this._el=e}})})}}const kre=(Ci().s[38]++,No()(mSe));function Sx(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="f03c466cea7ee39fb10a8d84cec1e620e7e892a5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:18,column:1}},1:{start:{line:5,column:2},end:{line:17,column:7}},2:{start:{line:19,column:19},end:{line:19,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:18,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA;AAAA,IACb;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f03c466cea7ee39fb10a8d84cec1e620e7e892a5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sx=function(){return s},s}Sx();Sx().s[0]++;const gSe=n=>(Sx().f[0]++,Sx().s[1]++,te.jsxs(te.Fragment,{children:[te.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),te.jsx(kre,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor"}),";"]})),ySe=(Sx().s[2]++,No()(gSe));var X2=QD();function vSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return wt.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const M6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qx(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function _L(n){return"nodeType"in n}function Td(n){var e,t;return n?Qx(n)?n:_L(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function xL(n){const{Document:e}=Td(n);return n instanceof e}function S5(n){return Qx(n)?!1:n instanceof Td(n).HTMLElement}function Tre(n){return n instanceof Td(n).SVGElement}function qx(n){return n?Qx(n)?n.document:_L(n)?xL(n)?n:S5(n)||Tre(n)?n.ownerDocument:document:document:document}const o0=M6?wt.useLayoutEffect:wt.useEffect;function ML(n){const e=wt.useRef(n);return o0(()=>{e.current=n}),wt.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function bSe(){const n=wt.useRef(null),e=wt.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=wt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function S4(n,e){e===void 0&&(e=[n]);const t=wt.useRef(n);return o0(()=>{t.current!==n&&(t.current=n)},e),t}function E5(n,e){const t=wt.useRef();return wt.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function WS(n){const e=ML(n),t=wt.useRef(null),i=wt.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function mD(n){const e=wt.useRef();return wt.useEffect(()=>{e.current=n},[n]),e.current}let i8={};function O5(n,e){return wt.useMemo(()=>{if(e)return e;const t=i8[n]==null?0:i8[n]+1;return i8[n]=t,n+"-"+t},[n,e])}function Rre(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,h]of a){const m=o[c];m!=null&&(o[c]=m+n*h)}return o},{...e})}}const X_=Rre(1),QS=Rre(-1);function CSe(n){return"clientX"in n&&"clientY"in n}function wL(n){if(!n)return!1;const{KeyboardEvent:e}=Td(n.target);return e&&n instanceof e}function _Se(n){if(!n)return!1;const{TouchEvent:e}=Td(n.target);return e&&n instanceof e}function gD(n){if(_Se(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return CSe(n)?{x:n.clientX,y:n.clientY}:null}const E4=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[E4.Translate.toString(n),E4.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),aW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xSe(n){return n.matches(aW)?n:n.querySelector(aW)}const MSe={display:"none"};function wSe(n){let{id:e,value:t}=n;return On.createElement("div",{id:e,style:MSe},t)}function SSe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return On.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function ESe(){const[n,e]=wt.useState("");return{announce:wt.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const Dre=wt.createContext(null);function OSe(n){const e=wt.useContext(Dre);wt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function BSe(){const[n]=wt.useState(()=>new Set),e=wt.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[wt.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const ISe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},kSe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function TSe(n){let{announcements:e=kSe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=ISe}=n;const{announce:o,announcement:s}=ESe(),a=O5("DndLiveRegion"),[c,h]=wt.useState(!1);if(wt.useEffect(()=>{h(!0)},[]),OSe(wt.useMemo(()=>({onDragStart(v){let{active:x}=v;o(e.onDragStart({active:x}))},onDragMove(v){let{active:x,over:S}=v;e.onDragMove&&o(e.onDragMove({active:x,over:S}))},onDragOver(v){let{active:x,over:S}=v;o(e.onDragOver({active:x,over:S}))},onDragEnd(v){let{active:x,over:S}=v;o(e.onDragEnd({active:x,over:S}))},onDragCancel(v){let{active:x,over:S}=v;o(e.onDragCancel({active:x,over:S}))}}),[o,e])),!c)return null;const m=On.createElement(On.Fragment,null,On.createElement(wSe,{id:i,value:r.draggable}),On.createElement(SSe,{id:a,announcement:s}));return t?X2.createPortal(m,t):m}var Mc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Mc||(Mc={}));function qS(){}function RSe(n,e){return wt.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function DSe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return wt.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const _m=Object.freeze({x:0,y:0});function PSe(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function USe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function LSe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function KSe(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function lW(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const FSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=lW(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const h=PSe(lW(c),r);o.push({id:a,data:{droppableContainer:s,value:h}})}}return o.sort(USe)};function zSe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,h=n.width*n.height,m=s*a,v=m/(c+h-m);return Number(v.toFixed(4))}return 0}const jSe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=zSe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(LSe)};function NSe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Pre(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:_m}function GSe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const WSe=GSe(1);function QSe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function qSe(n,e,t){const i=QSe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),h=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=r?n.width/r:n.width,v=o?n.height/o:n.height;return{width:m,height:v,top:h,right:c+m,bottom:h+v,left:c}}const YSe={ignoreTransform:!1};function Yx(n,e){e===void 0&&(e=YSe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:m}=Td(n).getComputedStyle(n);h&&(t=qSe(t,h,m))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function uW(n){return Yx(n,{ignoreTransform:!0})}function $Se(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function VSe(n,e){return e===void 0&&(e=Td(n).getComputedStyle(n)),e.position==="fixed"}function HSe(n,e){e===void 0&&(e=Td(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function SL(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(xL(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!S5(r)||Tre(r)||t.includes(r))return t;const o=Td(n).getComputedStyle(r);return r!==n&&HSe(r,o)&&t.push(r),VSe(r,o)?t:i(r.parentNode)}return n?i(n):t}function Ure(n){const[e]=SL(n,1);return e??null}function r8(n){return!M6||!n?null:Qx(n)?n:_L(n)?xL(n)||n===qx(n).scrollingElement?window:S5(n)?n:null:null}function Lre(n){return Qx(n)?n.scrollX:n.scrollLeft}function Kre(n){return Qx(n)?n.scrollY:n.scrollTop}function yD(n){return{x:Lre(n),y:Kre(n)}}var $c;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})($c||($c={}));function Fre(n){return!M6||!n?!1:n===document.scrollingElement}function zre(n){const e={x:0,y:0},t=Fre(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const ZSe={x:.2,y:.2};function XSe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=ZSe);const{isTop:h,isBottom:m,isLeft:v,isRight:x}=zre(n),S={x:0,y:0},B={x:0,y:0},R={height:e.height*r.y,width:e.width*r.x};return!h&&o<=e.top+R.height?(S.y=$c.Backward,B.y=i*Math.abs((e.top+R.height-o)/R.height)):!m&&c>=e.bottom-R.height&&(S.y=$c.Forward,B.y=i*Math.abs((e.bottom-R.height-c)/R.height)),!x&&a>=e.right-R.width?(S.x=$c.Forward,B.x=i*Math.abs((e.right-R.width-a)/R.width)):!v&&s<=e.left+R.width&&(S.x=$c.Backward,B.x=i*Math.abs((e.left+R.width-s)/R.width)),{direction:S,speed:B}}function JSe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function jre(n){return n.reduce((e,t)=>X_(e,yD(t)),_m)}function eEe(n){return n.reduce((e,t)=>e+Lre(t),0)}function tEe(n){return n.reduce((e,t)=>e+Kre(t),0)}function nEe(n,e){if(e===void 0&&(e=Yx),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);Ure(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const iEe=[["x",["left","right"],eEe],["y",["top","bottom"],tEe]];class EL{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=SL(t),r=jre(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of iEe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const h=a(i),m=r[o]-h;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class x3{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function rEe(n){const{EventTarget:e}=Td(n);return n instanceof e?n:qx(n)}function o8(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var sp;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(sp||(sp={}));function cW(n){n.preventDefault()}function oEe(n){n.stopPropagation()}var Ds;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ds||(Ds={}));const Nre={start:[Ds.Space,Ds.Enter],cancel:[Ds.Esc],end:[Ds.Space,Ds.Enter,Ds.Tab]},sEe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ds.Right:return{...t,x:t.x+25};case Ds.Left:return{...t,x:t.x-25};case Ds.Down:return{...t,y:t.y+25};case Ds.Up:return{...t,y:t.y-25}}};class Gre{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new x3(qx(t)),this.windowListeners=new x3(Td(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(sp.Resize,this.handleCancel),this.windowListeners.add(sp.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(sp.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&nEe(i),t(_m)}handleKeyDown(e){if(wL(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=Nre,coordinateGetter:s=sEe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:h}=i.current,m=h?{x:h.left,y:h.top}:_m;this.referenceCoordinates||(this.referenceCoordinates=m);const v=s(e,{active:t,context:i.current,currentCoordinates:m});if(v){const x=QS(v,m),S={x:0,y:0},{scrollableAncestors:B}=i.current;for(const R of B){const F=e.code,{isTop:j,isRight:W,isLeft:H,isBottom:$,maxScroll:N,minScroll:Y}=zre(R),z=JSe(R),ne={x:Math.min(F===Ds.Right?z.right-z.width/2:z.right,Math.max(F===Ds.Right?z.left:z.left+z.width/2,v.x)),y:Math.min(F===Ds.Down?z.bottom-z.height/2:z.bottom,Math.max(F===Ds.Down?z.top:z.top+z.height/2,v.y))},ae=F===Ds.Right&&!W||F===Ds.Left&&!H,ve=F===Ds.Down&&!$||F===Ds.Up&&!j;if(ae&&ne.x!==v.x){const pe=R.scrollLeft+x.x,be=F===Ds.Right&&pe<=N.x||F===Ds.Left&&pe>=Y.x;if(be&&!x.y){R.scrollTo({left:pe,behavior:a});return}be?S.x=R.scrollLeft-pe:S.x=F===Ds.Right?R.scrollLeft-N.x:R.scrollLeft-Y.x,S.x&&R.scrollBy({left:-S.x,behavior:a});break}else if(ve&&ne.y!==v.y){const pe=R.scrollTop+x.y,be=F===Ds.Down&&pe<=N.y||F===Ds.Up&&pe>=Y.y;if(be&&!x.x){R.scrollTo({top:pe,behavior:a});return}be?S.y=R.scrollTop-pe:S.y=F===Ds.Down?R.scrollTop-N.y:R.scrollTop-Y.y,S.y&&R.scrollBy({top:-S.y,behavior:a});break}}this.handleMove(e,X_(QS(v,this.referenceCoordinates),S))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Gre.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=Nre,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function AW(n){return!!(n&&"distance"in n)}function hW(n){return!!(n&&"delay"in n)}class OL{constructor(e,t,i){var r;i===void 0&&(i=rEe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=qx(s),this.documentListeners=new x3(this.document),this.listeners=new x3(i),this.windowListeners=new x3(Td(s)),this.initialCoordinates=(r=gD(o))!=null?r:_m,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(sp.Resize,this.handleCancel),this.windowListeners.add(sp.DragStart,cW),this.windowListeners.add(sp.VisibilityChange,this.handleCancel),this.windowListeners.add(sp.ContextMenu,cW),this.documentListeners.add(sp.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hW(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(AW(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(sp.Click,oEe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(sp.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=gD(e))!=null?t:_m,h=QS(r,c);if(!i&&a){if(AW(a)){if(a.tolerance!=null&&o8(h,a.tolerance))return this.handleCancel();if(o8(h,a.distance))return this.handleStart()}if(hW(a)&&o8(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ds.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const aEe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class BL extends OL{constructor(e){const{event:t}=e,i=qx(t.target);super(e,aEe,i)}}BL.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const lEe={move:{name:"mousemove"},end:{name:"mouseup"}};var vD;(function(n){n[n.RightClick=2]="RightClick"})(vD||(vD={}));class uEe extends OL{constructor(e){super(e,lEe,qx(e.event.target))}}uEe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===vD.RightClick?!1:(i?.({event:t}),!0)}}];const s8={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class cEe extends OL{constructor(e){super(e,s8)}static setup(){return window.addEventListener(s8.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(s8.move.name,e)};function e(){}}}cEe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var M3;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(M3||(M3={}));var YS;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(YS||(YS={}));function AEe(n){let{acceleration:e,activator:t=M3.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=YS.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:m,delta:v,threshold:x}=n;const S=dEe({delta:v,disabled:!o}),[B,R]=bSe(),F=wt.useRef({x:0,y:0}),j=wt.useRef({x:0,y:0}),W=wt.useMemo(()=>{switch(t){case M3.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case M3.DraggableRect:return r}},[t,r,c]),H=wt.useRef(null),$=wt.useCallback(()=>{const Y=H.current;if(!Y)return;const z=F.current.x*j.current.x,ne=F.current.y*j.current.y;Y.scrollBy(z,ne)},[]),N=wt.useMemo(()=>a===YS.TreeOrder?[...h].reverse():h,[a,h]);wt.useEffect(()=>{if(!o||!h.length||!W){R();return}for(const Y of N){if(i?.(Y)===!1)continue;const z=h.indexOf(Y),ne=m[z];if(!ne)continue;const{direction:ae,speed:ve}=XSe(Y,ne,W,e,x);for(const pe of["x","y"])S[pe][ae[pe]]||(ve[pe]=0,ae[pe]=0);if(ve.x>0||ve.y>0){R(),H.current=Y,B($,s),F.current=ve,j.current=ae;return}}F.current={x:0,y:0},j.current={x:0,y:0},R()},[e,$,i,R,o,s,JSON.stringify(W),JSON.stringify(S),B,h,N,m,JSON.stringify(x)])}const hEe={x:{[$c.Backward]:!1,[$c.Forward]:!1},y:{[$c.Backward]:!1,[$c.Forward]:!1}};function dEe(n){let{delta:e,disabled:t}=n;const i=mD(e);return E5(r=>{if(t||!i||!r)return hEe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[$c.Backward]:r.x[$c.Backward]||o.x===-1,[$c.Forward]:r.x[$c.Forward]||o.x===1},y:{[$c.Backward]:r.y[$c.Backward]||o.y===-1,[$c.Forward]:r.y[$c.Forward]||o.y===1}}},[t,e,i])}function fEe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return E5(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function pEe(n,e){return wt.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var O4;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(O4||(O4={}));var bD;(function(n){n.Optimized="optimized"})(bD||(bD={}));const dW=new Map;function mEe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=wt.useState(null),{frequency:a,measure:c,strategy:h}=r,m=wt.useRef(n),v=F(),x=S4(v),S=wt.useCallback(function(j){j===void 0&&(j=[]),!x.current&&s(W=>W===null?j:W.concat(j.filter(H=>!W.includes(H))))},[x]),B=wt.useRef(null),R=E5(j=>{if(v&&!t)return dW;if(!j||j===dW||m.current!==n||o!=null){const W=new Map;for(let H of n){if(!H)continue;if(o&&o.length>0&&!o.includes(H.id)&&H.rect.current){W.set(H.id,H.rect.current);continue}const $=H.node.current,N=$?new EL(c($),$):null;H.rect.current=N,N&&W.set(H.id,N)}return W}return j},[n,o,t,v,c]);return wt.useEffect(()=>{m.current=n},[n]),wt.useEffect(()=>{v||S()},[t,v]),wt.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),wt.useEffect(()=>{v||typeof a!="number"||B.current!==null||(B.current=setTimeout(()=>{S(),B.current=null},a))},[a,v,S,...i]),{droppableRects:R,measureDroppableContainers:S,measuringScheduled:o!=null};function F(){switch(h){case O4.Always:return!1;case O4.BeforeDragging:return t;default:return!t}}}function Wre(n,e){return E5(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function gEe(n,e){return Wre(n,e)}function yEe(n){let{callback:e,disabled:t}=n;const i=ML(e),r=wt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return wt.useEffect(()=>()=>r?.disconnect(),[r]),r}function w6(n){let{callback:e,disabled:t}=n;const i=ML(e),r=wt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return wt.useEffect(()=>()=>r?.disconnect(),[r]),r}function vEe(n){return new EL(Yx(n),n)}function fW(n,e,t){e===void 0&&(e=vEe);const[i,r]=wt.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=c??t)!=null?h:null}const m=e(n);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const s=yEe({callback(c){if(n)for(const h of c){const{type:m,target:v}=h;if(m==="childList"&&v instanceof HTMLElement&&v.contains(n)){o();break}}}}),a=w6({callback:o});return o0(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function bEe(n){const e=Wre(n);return Pre(n,e)}const pW=[];function CEe(n){const e=wt.useRef(n),t=E5(i=>n?i&&i!==pW&&n&&e.current&&n.parentNode===e.current.parentNode?i:SL(n):pW,[n]);return wt.useEffect(()=>{e.current=n},[n]),t}function _Ee(n){const[e,t]=wt.useState(null),i=wt.useRef(n),r=wt.useCallback(o=>{const s=r8(o.target);s&&t(a=>a?(a.set(s,yD(s)),new Map(a)):null)},[]);return wt.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const h=r8(c);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,yD(h)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const h=r8(c);h?.removeEventListener("scroll",r)})}},[r,n]),wt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>X_(o,s),_m):jre(n):_m,[n,e])}function mW(n,e){e===void 0&&(e=[]);const t=wt.useRef(null);return wt.useEffect(()=>{t.current=null},e),wt.useEffect(()=>{const i=n!==_m;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?QS(n,t.current):_m}function xEe(n){wt.useEffect(()=>{if(!M6)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function MEe(n,e){return wt.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function Qre(n){return wt.useMemo(()=>n?$Se(n):null,[n])}const gW=[];function wEe(n,e){e===void 0&&(e=Yx);const[t]=n,i=Qre(t?Td(t):null),[r,o]=wt.useState(gW);function s(){o(()=>n.length?n.map(c=>Fre(c)?i:new EL(e(c),c)):gW)}const a=w6({callback:s});return o0(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function SEe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return S5(e)?e:n}function EEe(n){let{measure:e}=n;const[t,i]=wt.useState(null),r=wt.useCallback(h=>{for(const{target:m}of h)if(S5(m)){i(v=>{const x=e(m);return v?{...v,width:x.width,height:x.height}:x});break}},[e]),o=w6({callback:r}),s=wt.useCallback(h=>{const m=SEe(h);o?.disconnect(),m&&o?.observe(m),i(m?e(m):null)},[e,o]),[a,c]=WS(s);return wt.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const OEe=[{sensor:BL,options:{}},{sensor:Gre,options:{}}],BEe={current:{}},ww={draggable:{measure:uW},droppable:{measure:uW,strategy:O4.WhileDragging,frequency:bD.Optimized},dragOverlay:{measure:Yx}};class w3 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const IEe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new w3,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ww,measureDroppableContainers:qS,windowRect:null,measuringScheduled:!1},kEe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qS,draggableNodes:new Map,over:null,measureDroppableContainers:qS},S6=wt.createContext(kEe),qre=wt.createContext(IEe);function TEe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new w3}}}function REe(n,e){switch(e.type){case Mc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Mc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Mc.DragEnd:case Mc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Mc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new w3(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case Mc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new w3(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case Mc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new w3(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function DEe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=wt.useContext(S6),o=mD(i),s=mD(t?.id);return wt.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!wL(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:h}=a;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[c.current,h.current]){if(!m)continue;const v=xSe(m);if(v){v.focus();break}}})}},[i,e,r,s,o]),null}function PEe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function UEe(n){return wt.useMemo(()=>({draggable:{...ww.draggable,...n?.draggable},droppable:{...ww.droppable,...n?.droppable},dragOverlay:{...ww.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function LEe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=wt.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;o0(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const m=t(h),v=Pre(m,i);if(s||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=Ure(h);x&&x.scrollBy({top:v.y,left:v.x})}},[e,s,a,i,t])}const Yre=wt.createContext({..._m,scaleX:1,scaleY:1});var Ty;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Ty||(Ty={}));const KEe=wt.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:h,sensors:m=OEe,collisionDetection:v=jSe,measuring:x,modifiers:S,...B}=e;const R=wt.useReducer(REe,void 0,TEe),[F,j]=R,[W,H]=BSe(),[$,N]=wt.useState(Ty.Uninitialized),Y=$===Ty.Initialized,{draggable:{active:z,nodes:ne,translate:ae},droppable:{containers:ve}}=F,pe=z!=null?ne.get(z):null,be=wt.useRef({initial:null,translated:null}),Ee=wt.useMemo(()=>{var Ht;return z!=null?{id:z,data:(Ht=pe?.data)!=null?Ht:BEe,rect:be}:null},[z,pe]),Te=wt.useRef(null),[je,Re]=wt.useState(null),[qe,nt]=wt.useState(null),ht=S4(B,Object.values(B)),ke=O5("DndDescribedBy",s),Oe=wt.useMemo(()=>ve.getEnabled(),[ve]),ze=UEe(x),{droppableRects:we,measureDroppableContainers:At,measuringScheduled:it}=mEe(Oe,{dragging:Y,dependencies:[ae.x,ae.y],config:ze.droppable}),Ct=fEe(ne,z),It=wt.useMemo(()=>qe?gD(qe):null,[qe]),Ke=pt(),Ie=gEe(Ct,ze.draggable.measure);LEe({activeNode:z!=null?ne.get(z):null,config:Ke.layoutShiftCompensation,initialRect:Ie,measure:ze.draggable.measure});const Se=fW(Ct,ze.draggable.measure,Ie),Ge=fW(Ct?Ct.parentElement:null),st=wt.useRef({activatorEvent:null,active:null,activeNode:Ct,collisionRect:null,collisions:null,droppableRects:we,draggableNodes:ne,draggingNode:null,draggingNodeRect:null,droppableContainers:ve,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ut=ve.getNodeFor((t=st.current.over)==null?void 0:t.id),ft=EEe({measure:ze.dragOverlay.measure}),St=(i=ft.nodeRef.current)!=null?i:Ct,kt=Y?(r=ft.rect)!=null?r:Se:null,en=!!(ft.nodeRef.current&&ft.rect),Pn=bEe(en?null:Se),zn=Qre(St?Td(St):null),si=CEe(Y?ut??Ct:null),xn=wEe(si),Rn=PEe(S,{transform:{x:ae.x-Pn.x,y:ae.y-Pn.y,scaleX:1,scaleY:1},activatorEvent:qe,active:Ee,activeNodeRect:Se,containerNodeRect:Ge,draggingNodeRect:kt,over:st.current.over,overlayNodeRect:ft.rect,scrollableAncestors:si,scrollableAncestorRects:xn,windowRect:zn}),pn=It?X_(It,ae):null,Hn=_Ee(si),Un=mW(Hn),Tt=mW(Hn,[Se]),Me=X_(Rn,Un),oe=kt?WSe(kt,Rn):null,le=Ee&&oe?v({active:Ee,collisionRect:oe,droppableRects:we,droppableContainers:Oe,pointerCoordinates:pn}):null,he=KSe(le,"id"),[se,Ae]=wt.useState(null),xe=en?Rn:X_(Rn,Tt),Ye=NSe(xe,(o=se?.rect)!=null?o:null,Se),Xe=wt.useRef(null),fe=wt.useCallback((Ht,gt)=>{let{sensor:jn,options:ni}=gt;if(Te.current==null)return;const In=ne.get(Te.current);if(!In)return;const Ln=Ht.nativeEvent,Zn=new jn({active:Te.current,activeNode:In,event:Ln,options:ni,context:st,onAbort(Di){if(!ne.get(Di))return;const{onDragAbort:fi}=ht.current,Si={id:Di};fi?.(Si),W({type:"onDragAbort",event:Si})},onPending(Di,ur,fi,Si){if(!ne.get(Di))return;const{onDragPending:nn}=ht.current,Ti={id:Di,constraint:ur,initialCoordinates:fi,offset:Si};nn?.(Ti),W({type:"onDragPending",event:Ti})},onStart(Di){const ur=Te.current;if(ur==null)return;const fi=ne.get(ur);if(!fi)return;const{onDragStart:Si}=ht.current,er={activatorEvent:Ln,active:{id:ur,data:fi.data,rect:be}};X2.unstable_batchedUpdates(()=>{Si?.(er),N(Ty.Initializing),j({type:Mc.DragStart,initialCoordinates:Di,active:ur}),W({type:"onDragStart",event:er}),Re(Xe.current),nt(Ln)})},onMove(Di){j({type:Mc.DragMove,coordinates:Di})},onEnd:Xi(Mc.DragEnd),onCancel:Xi(Mc.DragCancel)});Xe.current=Zn;function Xi(Di){return async function(){const{active:fi,collisions:Si,over:er,scrollAdjustedTranslate:nn}=st.current;let Ti=null;if(fi&&nn){const{cancelDrop:Io}=ht.current;Ti={activatorEvent:Ln,active:fi,collisions:Si,delta:nn,over:er},Di===Mc.DragEnd&&typeof Io=="function"&&await Promise.resolve(Io(Ti))&&(Di=Mc.DragCancel)}Te.current=null,X2.unstable_batchedUpdates(()=>{j({type:Di}),N(Ty.Uninitialized),Ae(null),Re(null),nt(null),Xe.current=null;const Io=Di===Mc.DragEnd?"onDragEnd":"onDragCancel";if(Ti){const rs=ht.current[Io];rs?.(Ti),W({type:Io,event:Ti})}})}}},[ne]),De=wt.useCallback((Ht,gt)=>(jn,ni)=>{const In=jn.nativeEvent,Ln=ne.get(ni);if(Te.current!==null||!Ln||In.dndKit||In.defaultPrevented)return;const Zn={active:Ln};Ht(jn,gt.options,Zn)===!0&&(In.dndKit={capturedBy:gt.sensor},Te.current=ni,fe(jn,gt))},[ne,fe]),y=pEe(m,De);xEe(m),o0(()=>{Se&&$===Ty.Initializing&&N(Ty.Initialized)},[Se,$]),wt.useEffect(()=>{const{onDragMove:Ht}=ht.current,{active:gt,activatorEvent:jn,collisions:ni,over:In}=st.current;if(!gt||!jn)return;const Ln={active:gt,activatorEvent:jn,collisions:ni,delta:{x:Me.x,y:Me.y},over:In};X2.unstable_batchedUpdates(()=>{Ht?.(Ln),W({type:"onDragMove",event:Ln})})},[Me.x,Me.y]),wt.useEffect(()=>{const{active:Ht,activatorEvent:gt,collisions:jn,droppableContainers:ni,scrollAdjustedTranslate:In}=st.current;if(!Ht||Te.current==null||!gt||!In)return;const{onDragOver:Ln}=ht.current,Zn=ni.get(he),Xi=Zn&&Zn.rect.current?{id:Zn.id,rect:Zn.rect.current,data:Zn.data,disabled:Zn.disabled}:null,Di={active:Ht,activatorEvent:gt,collisions:jn,delta:{x:In.x,y:In.y},over:Xi};X2.unstable_batchedUpdates(()=>{Ae(Xi),Ln?.(Di),W({type:"onDragOver",event:Di})})},[he]),o0(()=>{st.current={activatorEvent:qe,active:Ee,activeNode:Ct,collisionRect:oe,collisions:le,droppableRects:we,draggableNodes:ne,draggingNode:St,draggingNodeRect:kt,droppableContainers:ve,over:se,scrollableAncestors:si,scrollAdjustedTranslate:Me},be.current={initial:kt,translated:oe}},[Ee,Ct,le,oe,ne,St,kt,we,ve,se,si,Me]),AEe({...Ke,delta:ae,draggingRect:oe,pointerCoordinates:pn,scrollableAncestors:si,scrollableAncestorRects:xn});const rt=wt.useMemo(()=>({active:Ee,activeNode:Ct,activeNodeRect:Se,activatorEvent:qe,collisions:le,containerNodeRect:Ge,dragOverlay:ft,draggableNodes:ne,droppableContainers:ve,droppableRects:we,over:se,measureDroppableContainers:At,scrollableAncestors:si,scrollableAncestorRects:xn,measuringConfiguration:ze,measuringScheduled:it,windowRect:zn}),[Ee,Ct,Se,qe,le,Ge,ft,ne,ve,we,se,At,si,xn,ze,it,zn]),Bt=wt.useMemo(()=>({activatorEvent:qe,activators:y,active:Ee,activeNodeRect:Se,ariaDescribedById:{draggable:ke},dispatch:j,draggableNodes:ne,over:se,measureDroppableContainers:At}),[qe,y,Ee,Se,j,ke,ne,se,At]);return On.createElement(Dre.Provider,{value:H},On.createElement(S6.Provider,{value:Bt},On.createElement(qre.Provider,{value:rt},On.createElement(Yre.Provider,{value:Ye},h)),On.createElement(DEe,{disabled:a?.restoreFocus===!1})),On.createElement(TSe,{...a,hiddenTextDescribedById:ke}));function pt(){const Ht=je?.autoScrollEnabled===!1,gt=typeof c=="object"?c.enabled===!1:c===!1,jn=Y&&!Ht&&!gt;return typeof c=="object"?{...c,enabled:jn}:{enabled:jn}}}),FEe=wt.createContext(null),yW="button",zEe="Draggable";function jEe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=O5(zEe),{activators:s,activatorEvent:a,active:c,activeNodeRect:h,ariaDescribedById:m,draggableNodes:v,over:x}=wt.useContext(S6),{role:S=yW,roleDescription:B="draggable",tabIndex:R=0}=r??{},F=c?.id===e,j=wt.useContext(F?Yre:FEe),[W,H]=WS(),[$,N]=WS(),Y=MEe(s,e),z=S4(t);o0(()=>(v.set(e,{id:e,key:o,node:W,activatorNode:$,data:z}),()=>{const ae=v.get(e);ae&&ae.key===o&&v.delete(e)}),[v,e]);const ne=wt.useMemo(()=>({role:S,tabIndex:R,"aria-disabled":i,"aria-pressed":F&&S===yW?!0:void 0,"aria-roledescription":B,"aria-describedby":m.draggable}),[i,S,R,F,B,m.draggable]);return{active:c,activatorEvent:a,activeNodeRect:h,attributes:ne,isDragging:F,listeners:i?void 0:Y,node:W,over:x,setNodeRef:H,setActivatorNodeRef:N,transform:j}}function NEe(){return wt.useContext(qre)}const GEe="Droppable",WEe={timeout:25};function QEe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=O5(GEe),{active:s,dispatch:a,over:c,measureDroppableContainers:h}=wt.useContext(S6),m=wt.useRef({disabled:t}),v=wt.useRef(!1),x=wt.useRef(null),S=wt.useRef(null),{disabled:B,updateMeasurementsFor:R,timeout:F}={...WEe,...r},j=S4(R??i),W=wt.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{h(Array.isArray(j.current)?j.current:[j.current]),S.current=null},F)},[F]),H=w6({callback:W,disabled:B||!s}),$=wt.useCallback((ne,ae)=>{H&&(ae&&(H.unobserve(ae),v.current=!1),ne&&H.observe(ne))},[H]),[N,Y]=WS($),z=S4(e);return wt.useEffect(()=>{!H||!N.current||(H.disconnect(),v.current=!1,H.observe(N.current))},[N,H]),wt.useEffect(()=>(a({type:Mc.RegisterDroppable,element:{id:i,key:o,disabled:t,node:N,rect:x,data:z}}),()=>a({type:Mc.UnregisterDroppable,key:o,id:i})),[i]),wt.useEffect(()=>{t!==m.current.disabled&&(a({type:Mc.SetDroppableDisabled,id:i,key:o,disabled:t}),m.current.disabled=t)},[i,o,t,a]),{active:s,rect:x,isOver:c?.id===i,node:N,over:c,setNodeRef:Y}}function $re(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function qEe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function UM(n){return n!==null&&n>=0}function YEe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function $Ee(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Vre=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=$re(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},LM={scaleX:1,scaleY:1},VEe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const h=o[s];return h?{x:0,y:t<s?h.top+h.height-(a.top+a.height):h.top-a.top,...LM}:null}const c=HEe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...LM}:r<t&&r>=s?{x:0,y:a.height+c,...LM}:{x:0,y:0,...LM}};function HEe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const Hre="Sortable",Zre=On.createContext({activeIndex:-1,containerId:Hre,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Vre,disabled:{draggable:!1,droppable:!1}});function ZEe(n){let{children:e,id:t,items:i,strategy:r=Vre,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:h,measureDroppableContainers:m}=NEe(),v=O5(Hre,t),x=a.rect!==null,S=wt.useMemo(()=>i.map(Y=>typeof Y=="object"&&"id"in Y?Y.id:Y),[i]),B=s!=null,R=s?S.indexOf(s.id):-1,F=h?S.indexOf(h.id):-1,j=wt.useRef(S),W=!YEe(S,j.current),H=F!==-1&&R===-1||W,$=$Ee(o);o0(()=>{W&&B&&m(S)},[W,S,B,m]),wt.useEffect(()=>{j.current=S},[S]);const N=wt.useMemo(()=>({activeIndex:R,containerId:v,disabled:$,disableTransforms:H,items:S,overIndex:F,useDragOverlay:x,sortedRects:qEe(S,c),strategy:r}),[R,v,$.draggable,$.droppable,H,S,F,c,x,r]);return On.createElement(Zre.Provider,{value:N},e)}const XEe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return $re(t,i,r).indexOf(e)},JEe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:h}=n;return!h||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},e6e={duration:200,easing:"ease"},Xre="transform",t6e=E4.Transition.toString({property:Xre,duration:0,easing:"linear"}),n6e={roleDescription:"sortable"};function i6e(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=wt.useState(null),a=wt.useRef(t);return o0(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const h=Yx(i.current,{ignoreTransform:!0}),m={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(m.x||m.y)&&s(m)}}t!==a.current&&(a.current=t)},[e,t,i,r]),wt.useEffect(()=>{o&&s(null)},[o]),o}function r6e(n){let{animateLayoutChanges:e=JEe,attributes:t,disabled:i,data:r,getNewIndex:o=XEe,id:s,strategy:a,resizeObserverConfig:c,transition:h=e6e}=n;const{items:m,containerId:v,activeIndex:x,disabled:S,disableTransforms:B,sortedRects:R,overIndex:F,useDragOverlay:j,strategy:W}=wt.useContext(Zre),H=o6e(i,S),$=m.indexOf(s),N=wt.useMemo(()=>({sortable:{containerId:v,index:$,items:m},...r}),[v,r,$,m]),Y=wt.useMemo(()=>m.slice(m.indexOf(s)),[m,s]),{rect:z,node:ne,isOver:ae,setNodeRef:ve}=QEe({id:s,data:N,disabled:H.droppable,resizeObserverConfig:{updateMeasurementsFor:Y,...c}}),{active:pe,activatorEvent:be,activeNodeRect:Ee,attributes:Te,setNodeRef:je,listeners:Re,isDragging:qe,over:nt,setActivatorNodeRef:ht,transform:ke}=jEe({id:s,data:N,attributes:{...n6e,...t},disabled:H.draggable}),Oe=vSe(ve,je),ze=!!pe,we=ze&&!B&&UM(x)&&UM(F),At=!j&&qe,it=At&&we?ke:null,It=we?it??(a??W)({rects:R,activeNodeRect:Ee,activeIndex:x,overIndex:F,index:$}):null,Ke=UM(x)&&UM(F)?o({id:s,items:m,activeIndex:x,overIndex:F}):$,Ie=pe?.id,Se=wt.useRef({activeId:Ie,items:m,newIndex:Ke,containerId:v}),Ge=m!==Se.current.items,st=e({active:pe,containerId:v,isDragging:qe,isSorting:ze,id:s,index:$,items:m,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:h,wasDragging:Se.current.activeId!=null}),ut=i6e({disabled:!st,index:$,node:ne,rect:z});return wt.useEffect(()=>{ze&&Se.current.newIndex!==Ke&&(Se.current.newIndex=Ke),v!==Se.current.containerId&&(Se.current.containerId=v),m!==Se.current.items&&(Se.current.items=m)},[ze,Ke,v,m]),wt.useEffect(()=>{if(Ie===Se.current.activeId)return;if(Ie!=null&&Se.current.activeId==null){Se.current.activeId=Ie;return}const St=setTimeout(()=>{Se.current.activeId=Ie},50);return()=>clearTimeout(St)},[Ie]),{active:pe,activeIndex:x,attributes:Te,data:N,rect:z,index:$,newIndex:Ke,items:m,isOver:ae,isSorting:ze,isDragging:qe,listeners:Re,node:ne,overIndex:F,over:nt,setNodeRef:Oe,setActivatorNodeRef:ht,setDroppableNodeRef:ve,setDraggableNodeRef:je,transform:ut??It,transition:ft()};function ft(){if(ut||Ge&&Se.current.newIndex===$)return t6e;if(!(At&&!wL(be)||!h)&&(ze||st))return E4.Transition.toString({...h,property:Xre})}}function o6e(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ds.Down,Ds.Right,Ds.Up,Ds.Left;function hb(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hb=function(){return s},s}hb();class s6e extends On.Component{render(){hb().f[0]++;const e=(hb().s[0]++,{width:20,height:20,...this.props.style});return hb().s[1]++,this.props.isCollapsed?(hb().b[0][0]++,te.jsx(XX,{style:e})):(hb().b[0][1]++,te.jsx(ZX,{style:e}))}}function R_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R_=function(){return s},s}R_();class a6e extends On.Component{render(){return R_().f[0]++,R_().s[0]++,te.jsx("li",{className:"maputnik-layer-list-group",children:te.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(R_().f[1]++,R_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[te.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(s6e,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wi=function(){return s},s}Wi();Wi().s[0]++;const l6e=n=>{Wi().f[0]++;const{dragAttributes:e,dragListeners:t}=(Wi().s[1]++,n);return Wi().s[2]++,te.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[te.jsx(JX,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),te.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class a8 extends On.Component{renderIcon(){switch(Wi().f[1]++,Wi().s[3]++,this.props.action){case"duplicate":return Wi().b[0][0]++,Wi().s[4]++,te.jsx(Yfe,{});case"show":return Wi().b[0][1]++,Wi().s[5]++,te.jsx(qfe,{});case"hide":return Wi().b[0][2]++,Wi().s[6]++,te.jsx(Qfe,{});case"delete":return Wi().b[0][3]++,Wi().s[7]++,te.jsx(Zb,{})}}render(){Wi().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Wi().s[8]++,this.props);let i=(Wi().s[9]++,"");return Wi().s[10]++,e?(Wi().b[1][0]++,Wi().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,Wi().s[12]++,t?(Wi().b[2][0]++,Wi().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):Wi().b[2][1]++):Wi().b[1][1]++,Wi().s[14]++,te.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const u6e=(Wi().s[15]++,On.forwardRef((n,e)=>{Wi().f[3]++;const{isSelected:t=(Wi().b[3][0]++,!1),visibility:i=(Wi().b[4][0]++,"visible"),onLayerCopy:r=(Wi().b[5][0]++,()=>{Wi().f[4]++}),onLayerDestroy:o=(Wi().b[6][0]++,()=>{Wi().f[5]++}),onLayerVisibilityToggle:s=(Wi().b[7][0]++,()=>{Wi().f[6]++})}=(Wi().s[16]++,n),{attributes:a,listeners:c,setNodeRef:h,transform:m,transition:v,isDragging:x}=(Wi().s[17]++,r6e({id:n.layerId})),S=(Wi().s[18]++,{transform:E4.Transform.toString(m),transition:v,opacity:x?(Wi().b[8][0]++,.5):(Wi().b[8][1]++,1)}),B=(Wi().s[19]++,i==="visible"?(Wi().b[9][0]++,"show"):(Wi().b[9][1]++,"hide")),R=(Wi().s[20]++,e);return Wi().s[21]++,te.jsx(ox.Provider,{value:{size:"14px"},children:te.jsxs("li",{ref:F=>{Wi().f[7]++,Wi().s[22]++,h(F),Wi().s[23]++,R?(Wi().b[10][0]++,Wi().s[24]++,R.current=F):Wi().b[10][1]++},style:S,id:n.id,onClick:F=>(Wi().f[8]++,Wi().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:c0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[te.jsx(l6e,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),te.jsx("span",{style:{flexGrow:1}}),te.jsx(a8,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:F=>(Wi().f[9]++,Wi().s[26]++,o(n.layerIndex))}),te.jsx(a8,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:F=>(Wi().f[10]++,Wi().s[27]++,r(n.layerIndex))}),te.jsx(a8,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:B,classBlockName:"visibility",classBlockModifier:B,onClick:F=>(Wi().f[11]++,Wi().s[28]++,s(n.layerIndex))})]})})}));function $S(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $S=function(){return s},s}$S();class Zs extends On.Component{render(){return $S().f[0]++,$S().s[0]++,te.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:c0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var l8={exports:{}},u8,vW;function c6e(){if(vW)return u8;vW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u8=n,u8}var c8,bW;function A6e(){if(bW)return c8;bW=1;var n=c6e();function e(){}function t(){}return t.resetWarningCache=e,c8=function(){function i(s,a,c,h,m,v){if(v!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},c8}var CW;function b1(){return CW||(CW=1,l8.exports=A6e()()),l8.exports}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Jre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],VS=Jre.join(","),eoe=typeof Element>"u",Vb=eoe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,HS=!eoe&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},B4=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&B4(e.parentNode);return s},h6e=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},toe=function(e,t,i){if(B4(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(VS));return t&&Vb.call(e,VS)&&r.unshift(e),r=r.filter(i),r},ZS=function(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!B4(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,h=ZS(c,!0,i);i.flatten?r.push.apply(r,h):r.push({scopeParent:s,candidates:h})}else{var m=Vb.call(s,VS);m&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var v=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),x=!B4(v,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(v&&x){var S=ZS(v===!0?s.children:v.children,!0,i);i.flatten?r.push.apply(r,S):r.push({scopeParent:s,candidates:S})}else o.unshift.apply(o,s.children)}}return r},noe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Dy=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||h6e(e))&&!noe(e)?0:e.tabIndex},d6e=function(e,t){var i=Dy(e);return i<0&&t&&!noe(e)?0:i},f6e=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},ioe=function(e){return e.tagName==="INPUT"},p6e=function(e){return ioe(e)&&e.type==="hidden"},m6e=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},g6e=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},y6e=function(e){if(!e.name)return!0;var t=e.form||HS(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=g6e(r,e.form);return!o||o===e},v6e=function(e){return ioe(e)&&e.type==="radio"},b6e=function(e){return v6e(e)&&!y6e(e)},C6e=function(e){var t,i=e&&HS(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var h,m,v;i=HS(r),r=(h=i)===null||h===void 0?void 0:h.host,o=!!((m=r)!==null&&m!==void 0&&(v=m.ownerDocument)!==null&&v!==void 0&&v.contains(r))}}return o},_W=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},_6e=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var o=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(e).visibility==="hidden")return!0;var s=Vb.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Vb.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var h=e.parentElement,m=HS(e);if(h&&!h.shadowRoot&&r(h)===!0)return _W(e);e.assignedSlot?e=e.assignedSlot:!h&&m!==e.ownerDocument?e=m.host:e=h}e=c}if(C6e(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return _W(e);return!1},x6e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return Vb.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},XS=function(e,t){return!(t.disabled||B4(t)||p6e(t)||_6e(t,e)||m6e(t)||x6e(t))},CD=function(e,t){return!(b6e(t)||Dy(t)<0||!XS(e,t))},M6e=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},roe=function(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=d6e(a,s),h=s?roe(r.candidates):a;c===0?s?t.push.apply(t,h):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:h})}),i.sort(f6e).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},ooe=function(e,t){t=t||{};var i;return t.getShadowRoot?i=ZS([e],t.includeContainer,{filter:CD.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:M6e}):i=toe(e,t.includeContainer,CD.bind(null,t)),roe(i)},soe=function(e,t){t=t||{};var i;return t.getShadowRoot?i=ZS([e],t.includeContainer,{filter:XS.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=toe(e,t.includeContainer,XS.bind(null,t)),i},ab=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Vb.call(e,VS)===!1?!1:CD(t,e)},w6e=Jre.concat("iframe").join(","),Sw=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Vb.call(e,w6e)===!1?!1:XS(t,e)};const S6e=Object.freeze(Object.defineProperty({__proto__:null,focusable:soe,getTabIndex:Dy,isFocusable:Sw,isTabbable:ab,tabbable:ooe},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function _D(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function E6e(n){if(Array.isArray(n))return _D(n)}function O6e(n,e,t){return(e=R6e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B6e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function I6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function MW(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xW(Object(t),!0).forEach(function(i){O6e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xW(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function k6e(n){return E6e(n)||B6e(n)||D6e(n)||I6e()}function T6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function R6e(n){var e=T6e(n,"string");return typeof e=="symbol"?e:e+""}function D6e(n,e){if(n){if(typeof n=="string")return _D(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_D(n,e):void 0}}var wW={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},P6e=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},U6e=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},S3=function(e){return e?.key==="Tab"||e?.keyCode===9},L6e=function(e){return S3(e)&&!e.shiftKey},K6e=function(e){return S3(e)&&e.shiftKey},SW=function(e){return setTimeout(e,0)},w2=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},KM=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},F6e=[],z6e=function(e,t){var i=t?.document||document,r=t?.trapStack||F6e,o=MW({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:L6e,isKeyBackward:K6e},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(Ee,Te,je){return Ee&&Ee[Te]!==void 0?Ee[Te]:o[je||Te]},h=function(Ee,Te){var je=typeof Te?.composedPath=="function"?Te.composedPath():void 0;return s.containerGroups.findIndex(function(Re){var qe=Re.container,nt=Re.tabbableNodes;return qe.contains(Ee)||je?.includes(qe)||nt.find(function(ht){return ht===Ee})})},m=function(Ee){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=Te.hasFallback,Re=je===void 0?!1:je,qe=Te.params,nt=qe===void 0?[]:qe,ht=o[Ee];if(typeof ht=="function"&&(ht=ht.apply(void 0,k6e(nt))),ht===!0&&(ht=void 0),!ht){if(ht===void 0||ht===!1)return ht;throw new Error("`".concat(Ee,"` was specified but was not a node, or did not return a node"))}var ke=ht;if(typeof ht=="string"){try{ke=i.querySelector(ht)}catch(Oe){throw new Error("`".concat(Ee,'` appears to be an invalid selector; error="').concat(Oe.message,'"'))}if(!ke&&!Re)throw new Error("`".concat(Ee,"` as selector refers to no known node"))}return ke},v=function(){var Ee=m("initialFocus",{hasFallback:!0});if(Ee===!1)return!1;if(Ee===void 0||Ee&&!Sw(Ee,o.tabbableOptions))if(h(i.activeElement)>=0)Ee=i.activeElement;else{var Te=s.tabbableGroups[0],je=Te&&Te.firstTabbableNode;Ee=je||m("fallbackFocus")}else Ee===null&&(Ee=m("fallbackFocus"));if(!Ee)throw new Error("Your focus-trap needs to have at least one focusable element");return Ee},x=function(){if(s.containerGroups=s.containers.map(function(Ee){var Te=ooe(Ee,o.tabbableOptions),je=soe(Ee,o.tabbableOptions),Re=Te.length>0?Te[0]:void 0,qe=Te.length>0?Te[Te.length-1]:void 0,nt=je.find(function(Oe){return ab(Oe)}),ht=je.slice().reverse().find(function(Oe){return ab(Oe)}),ke=!!Te.find(function(Oe){return Dy(Oe)>0});return{container:Ee,tabbableNodes:Te,focusableNodes:je,posTabIndexesFound:ke,firstTabbableNode:Re,lastTabbableNode:qe,firstDomTabbableNode:nt,lastDomTabbableNode:ht,nextTabbableNode:function(ze){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,At=Te.indexOf(ze);return At<0?we?je.slice(je.indexOf(ze)+1).find(function(it){return ab(it)}):je.slice(0,je.indexOf(ze)).reverse().find(function(it){return ab(it)}):Te[At+(we?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(Ee){return Ee.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(Ee){return Ee.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},S=function(Ee){var Te=Ee.activeElement;if(Te)return Te.shadowRoot&&Te.shadowRoot.activeElement!==null?S(Te.shadowRoot):Te},B=function(Ee){if(Ee!==!1&&Ee!==S(document)){if(!Ee||!Ee.focus){B(v());return}Ee.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=Ee,P6e(Ee)&&Ee.select()}},R=function(Ee){var Te=m("setReturnFocus",{params:[Ee]});return Te||(Te===!1?!1:Ee)},F=function(Ee){var Te=Ee.target,je=Ee.event,Re=Ee.isBackward,qe=Re===void 0?!1:Re;Te=Te||KM(je),x();var nt=null;if(s.tabbableGroups.length>0){var ht=h(Te,je),ke=ht>=0?s.containerGroups[ht]:void 0;if(ht<0)qe?nt=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:nt=s.tabbableGroups[0].firstTabbableNode;else if(qe){var Oe=s.tabbableGroups.findIndex(function(It){var Ke=It.firstTabbableNode;return Te===Ke});if(Oe<0&&(ke.container===Te||Sw(Te,o.tabbableOptions)&&!ab(Te,o.tabbableOptions)&&!ke.nextTabbableNode(Te,!1))&&(Oe=ht),Oe>=0){var ze=Oe===0?s.tabbableGroups.length-1:Oe-1,we=s.tabbableGroups[ze];nt=Dy(Te)>=0?we.lastTabbableNode:we.lastDomTabbableNode}else S3(je)||(nt=ke.nextTabbableNode(Te,!1))}else{var At=s.tabbableGroups.findIndex(function(It){var Ke=It.lastTabbableNode;return Te===Ke});if(At<0&&(ke.container===Te||Sw(Te,o.tabbableOptions)&&!ab(Te,o.tabbableOptions)&&!ke.nextTabbableNode(Te))&&(At=ht),At>=0){var it=At===s.tabbableGroups.length-1?0:At+1,Ct=s.tabbableGroups[it];nt=Dy(Te)>=0?Ct.firstTabbableNode:Ct.firstDomTabbableNode}else S3(je)||(nt=ke.nextTabbableNode(Te))}}else nt=m("fallbackFocus");return nt},j=function(Ee){var Te=KM(Ee);if(!(h(Te,Ee)>=0)){if(w2(o.clickOutsideDeactivates,Ee)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}w2(o.allowOutsideClick,Ee)||Ee.preventDefault()}},W=function(Ee){var Te=KM(Ee),je=h(Te,Ee)>=0;if(je||Te instanceof Document)je&&(s.mostRecentlyFocusedNode=Te);else{Ee.stopImmediatePropagation();var Re,qe=!0;if(s.mostRecentlyFocusedNode)if(Dy(s.mostRecentlyFocusedNode)>0){var nt=h(s.mostRecentlyFocusedNode),ht=s.containerGroups[nt].tabbableNodes;if(ht.length>0){var ke=ht.findIndex(function(Oe){return Oe===s.mostRecentlyFocusedNode});ke>=0&&(o.isKeyForward(s.recentNavEvent)?ke+1<ht.length&&(Re=ht[ke+1],qe=!1):ke-1>=0&&(Re=ht[ke-1],qe=!1))}}else s.containerGroups.some(function(Oe){return Oe.tabbableNodes.some(function(ze){return Dy(ze)>0})})||(qe=!1);else qe=!1;qe&&(Re=F({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),B(Re||s.mostRecentlyFocusedNode||v())}s.recentNavEvent=void 0},H=function(Ee){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=Ee;var je=F({event:Ee,isBackward:Te});je&&(S3(Ee)&&Ee.preventDefault(),B(je))},$=function(Ee){(o.isKeyForward(Ee)||o.isKeyBackward(Ee))&&H(Ee,o.isKeyBackward(Ee))},N=function(Ee){U6e(Ee)&&w2(o.escapeDeactivates,Ee)!==!1&&(Ee.preventDefault(),a.deactivate())},Y=function(Ee){var Te=KM(Ee);h(Te,Ee)>=0||w2(o.clickOutsideDeactivates,Ee)||w2(o.allowOutsideClick,Ee)||(Ee.preventDefault(),Ee.stopImmediatePropagation())},z=function(){if(s.active)return wW.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?SW(function(){B(v())}):B(v()),i.addEventListener("focusin",W,!0),i.addEventListener("mousedown",j,{capture:!0,passive:!1}),i.addEventListener("touchstart",j,{capture:!0,passive:!1}),i.addEventListener("click",Y,{capture:!0,passive:!1}),i.addEventListener("keydown",$,{capture:!0,passive:!1}),i.addEventListener("keydown",N),a},ne=function(){if(s.active)return i.removeEventListener("focusin",W,!0),i.removeEventListener("mousedown",j,!0),i.removeEventListener("touchstart",j,!0),i.removeEventListener("click",Y,!0),i.removeEventListener("keydown",$,!0),i.removeEventListener("keydown",N),a},ae=function(Ee){var Te=Ee.some(function(je){var Re=Array.from(je.removedNodes);return Re.some(function(qe){return qe===s.mostRecentlyFocusedNode})});Te&&B(v())},ve=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ae):void 0,pe=function(){ve&&(ve.disconnect(),s.active&&!s.paused&&s.containers.map(function(Ee){ve.observe(Ee,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(Ee){if(s.active)return this;var Te=c(Ee,"onActivate"),je=c(Ee,"onPostActivate"),Re=c(Ee,"checkCanFocusTrap");Re||x(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=S(i),Te?.();var qe=function(){Re&&x(),z(),pe(),je?.()};return Re?(Re(s.containers.concat()).then(qe,qe),this):(qe(),this)},deactivate:function(Ee){if(!s.active)return this;var Te=MW({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},Ee);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,ne(),s.active=!1,s.paused=!1,pe(),wW.deactivateTrap(r,a);var je=c(Te,"onDeactivate"),Re=c(Te,"onPostDeactivate"),qe=c(Te,"checkCanReturnFocus"),nt=c(Te,"returnFocus","returnFocusOnDeactivate");je?.();var ht=function(){SW(function(){nt&&B(R(s.nodeFocusedBeforeActivation)),Re?.()})};return nt&&qe?(qe(R(s.nodeFocusedBeforeActivation)).then(ht,ht),this):(ht(),this)},pause:function(Ee){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,Ee)):this},unpause:function(Ee){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,Ee)):this},updateContainerElements:function(Ee){var Te=[].concat(Ee).filter(Boolean);return s.containers=Te.map(function(je){return typeof je=="string"?i.querySelector(je):je}),s.active&&x(),pe(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(Ee,Te){if(s.paused===Ee)return this;if(s.paused=Ee,Ee){var je=c(Te,"onPause"),Re=c(Te,"onPostPause");je?.(),ne(),pe(),Re?.()}else{var qe=c(Te,"onUnpause"),nt=c(Te,"onPostUnpause");qe?.(),x(),z(),pe(),nt?.()}return this}}}),a.updateContainerElements(e),a};const j6e=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:z6e},Symbol.toStringTag,{value:"Module"})),N6e=WD(j6e),G6e=WD(S6e);var A8,EW;function W6e(){if(EW)return A8;EW=1;function n(Y){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(Y)}function e(Y,z){if(!(Y instanceof z))throw new TypeError("Cannot call a class as a function")}function t(Y,z){for(var ne=0;ne<z.length;ne++){var ae=z[ne];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(Y,x(ae.key),ae)}}function i(Y,z,ne){return z&&t(Y.prototype,z),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function r(Y,z,ne){return z=c(z),o(Y,a()?Reflect.construct(z,ne||[],c(Y).constructor):z.apply(Y,ne))}function o(Y,z){if(z&&(n(z)=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(Y)}function s(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function a(){try{var Y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!Y})()}function c(Y){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},c(Y)}function h(Y,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(z&&z.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Object.defineProperty(Y,"prototype",{writable:!1}),z&&m(Y,z)}function m(Y,z){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,ae){return ne.__proto__=ae,ne},m(Y,z)}function v(Y,z,ne){return(z=x(z))in Y?Object.defineProperty(Y,z,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Y[z]=ne,Y}function x(Y){var z=S(Y,"string");return n(z)=="symbol"?z:z+""}function S(Y,z){if(n(Y)!="object"||!Y)return Y;var ne=Y[Symbol.toPrimitive];if(ne!==void 0){var ae=ne.call(Y,z);if(n(ae)!="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(Y)}var B=Ba(),R=b1(),F=N6e,j=F.createFocusTrap,W=G6e,H=W.isFocusable,$=(function(Y){function z(ne){var ae;e(this,z),ae=r(this,z,[ne]),v(ae,"getNodeForOption",function(be){var Ee,Te=(Ee=this.internalOptions[be])!==null&&Ee!==void 0?Ee:this.originalOptions[be];if(typeof Te=="function"){for(var je=arguments.length,Re=new Array(je>1?je-1:0),qe=1;qe<je;qe++)Re[qe-1]=arguments[qe];Te=Te.apply(void 0,Re)}if(Te===!0&&(Te=void 0),!Te){if(Te===void 0||Te===!1)return Te;throw new Error("`".concat(be,"` was specified but was not a node, or did not return a node"))}var nt=Te;if(typeof Te=="string"){var ht;if(nt=(ht=this.getDocument())===null||ht===void 0?void 0:ht.querySelector(Te),!nt)throw new Error("`".concat(be,"` as selector refers to no known node"))}return nt}),ae.handleDeactivate=ae.handleDeactivate.bind(ae),ae.handlePostDeactivate=ae.handlePostDeactivate.bind(ae),ae.handleClickOutsideDeactivates=ae.handleClickOutsideDeactivates.bind(ae),ae.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ae.handleDeactivate,onPostDeactivate:ae.handlePostDeactivate,clickOutsideDeactivates:ae.handleClickOutsideDeactivates},ae.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var ve=ne.focusTrapOptions;for(var pe in ve)if(Object.prototype.hasOwnProperty.call(ve,pe)){if(pe==="returnFocusOnDeactivate"||pe==="onDeactivate"||pe==="onPostDeactivate"||pe==="checkCanReturnFocus"||pe==="clickOutsideDeactivates"){ae.originalOptions[pe]=ve[pe];continue}ae.internalOptions[pe]=ve[pe]}return ae.outsideClick=null,ae.focusTrapElements=ne.containerElements||[],ae.updatePreviousElement(),ae}return h(z,Y),i(z,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ae=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ae||(ae===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ae=this.getDocument();ae&&(this.previouslyFocusedElement=ae.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ae){var ve=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ae):this.originalOptions.clickOutsideDeactivates;return ve&&(this.outsideClick={target:ae.target,allowDeactivation:ve}),ve}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ae=this,ve=function(){var be=ae.getReturnFocusNode(),Ee=!!(ae.originalOptions.returnFocusOnDeactivate&&be!==null&&be!==void 0&&be.focus&&(!ae.outsideClick||ae.outsideClick.allowDeactivation&&!H(ae.outsideClick.target,ae.internalOptions.tabbableOptions))),Te=ae.internalOptions.preventScroll,je=Te===void 0?!1:Te;Ee&&be.focus({preventScroll:je}),ae.originalOptions.onPostDeactivate&&ae.originalOptions.onPostDeactivate.call(null),ae.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(ve,ve):ve()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ae=this.focusTrapElements.some(Boolean);ae&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ae){if(this.focusTrap){ae.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var ve=!ae.active&&this.props.active,pe=ae.active&&!this.props.active,be=!ae.paused&&this.props.paused,Ee=ae.paused&&!this.props.paused;if(ve&&(this.updatePreviousElement(),this.focusTrap.activate()),pe){this.deactivateTrap();return}be&&this.focusTrap.pause(),Ee&&this.focusTrap.unpause()}else ae.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ae=this,ve=this.props.children?B.Children.only(this.props.children):void 0;if(ve){if(ve.type&&ve.type===B.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var pe=function(Te){var je=ae.props.containerElements;ve&&(typeof ve.ref=="function"?ve.ref(Te):ve.ref&&(ve.ref.current=Te)),ae.focusTrapElements=je||[Te]},be=B.cloneElement(ve,{ref:pe});return be}return null}}])})(B.Component),N=typeof Element>"u"?Function:Element;return $.propTypes={active:R.bool,paused:R.bool,focusTrapOptions:R.shape({document:R.object,onActivate:R.func,onPostActivate:R.func,checkCanFocusTrap:R.func,onPause:R.func,onPostPause:R.func,onUnpause:R.func,onPostUnpause:R.func,onDeactivate:R.func,onPostDeactivate:R.func,checkCanReturnFocus:R.func,initialFocus:R.oneOfType([R.instanceOf(N),R.string,R.bool,R.func]),fallbackFocus:R.oneOfType([R.instanceOf(N),R.string,R.func]),escapeDeactivates:R.oneOfType([R.bool,R.func]),clickOutsideDeactivates:R.oneOfType([R.bool,R.func]),returnFocusOnDeactivate:R.bool,setReturnFocus:R.oneOfType([R.instanceOf(N),R.string,R.bool,R.func]),allowOutsideClick:R.oneOfType([R.bool,R.func]),preventScroll:R.bool,tabbableOptions:R.shape({displayCheck:R.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:R.oneOfType([R.bool,R.func])}),trapStack:R.array,isKeyForward:R.func,isKeyBackward:R.func}),containerElements:R.arrayOf(R.instanceOf(N)),children:R.oneOfType([R.element,R.instanceOf(N)])},$.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:j},A8=$,A8}var h8={exports:{}},OW;function Q6e(){return OW||(OW=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var v=document.documentElement,x=document.createElement("div");return x.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),v.appendChild(x),i=x.offsetWidth-x.clientWidth,v.removeChild(x),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(v){if(!(typeof document>"u"||t)){var x=document.documentElement;r=window.pageYOffset,s()?x.style.width="calc(100% - "+o()+"px)":x.style.width="100%",x.style.position="fixed",x.style.top=-r+"px",x.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var v=document.documentElement;v.style.width="",v.style.position="",v.style.top="",v.style.overflow="",window.scroll(0,r),t=!1}}function h(){if(t){c();return}a()}var m={on:a,off:c,toggle:h};n.exports=m})()})(h8)),h8.exports}var d8,BW;function q6e(){if(BW)return d8;BW=1;function n(H){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},n(H)}function e(H,$){if(!(H instanceof $))throw new TypeError("Cannot call a class as a function")}function t(H,$){for(var N=0;N<$.length;N++){var Y=$[N];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(H,Y.key,Y)}}function i(H,$,N){return $&&t(H.prototype,$),Object.defineProperty(H,"prototype",{writable:!1}),H}function r(H,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create($&&$.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),$&&o(H,$)}function o(H,$){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,z){return Y.__proto__=z,Y},o(H,$)}function s(H){var $=h();return function(){var Y=m(H),z;if($){var ne=m(this).constructor;z=Reflect.construct(Y,arguments,ne)}else z=Y.apply(this,arguments);return a(this,z)}}function a(H,$){if($&&(n($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(H)}function c(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(H){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},m(H)}function v(H,$,N){return $ in H?Object.defineProperty(H,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):H[$]=N,H}var x=Ba(),S=QD(),B=W6e(),R=Q6e(),F=(function(H){r(N,H);var $=s(N);function N(Y){var z;if(e(this,N),z=$.call(this,Y),v(c(z),"getApplicationNode",function(){return z.props.getApplicationNode?z.props.getApplicationNode():z.props.applicationNode}),v(c(z),"checkUnderlayClick",function(ne){z.dialogNode&&z.dialogNode.contains(ne.target)||ne.pageX>ne.target.ownerDocument.documentElement.offsetWidth||ne.pageY>ne.target.ownerDocument.documentElement.offsetHeight||z.exit(ne)}),v(c(z),"checkDocumentKeyDown",function(ne){z.props.escapeExits&&(ne.key==="Escape"||ne.key==="Esc"||ne.keyCode===27)&&z.exit(ne)}),v(c(z),"exit",function(ne){z.props.onExit&&z.props.onExit(ne)}),!Y.titleText&&!Y.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return z}return i(N,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var z=this.getApplicationNode();setTimeout(function(){z&&z.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&R.on()}},{key:"componentDidUpdate",value:function(z){z.scrollDisabled&&!this.props.scrollDisabled?R.off():!z.scrollDisabled&&this.props.scrollDisabled&&R.on(),this.props.escapeExits&&!z.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&z.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&R.off();var z=this.getApplicationNode();z&&z.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var z=this;setTimeout(function(){document.addEventListener("keydown",z.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var z=this;setTimeout(function(){document.removeEventListener("keydown",z.checkDocumentKeyDown)})}},{key:"render",value:function(){var z=this.props,ne={};if(z.includeDefaultStyles&&(ne={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},z.underlayColor&&(ne.background=z.underlayColor),z.underlayClickExits&&(ne.cursor="pointer")),z.underlayStyle)for(var ae in z.underlayStyle)z.underlayStyle.hasOwnProperty(ae)&&(ne[ae]=z.underlayStyle[ae]);var ve={className:z.underlayClass,style:ne};z.underlayClickExits&&(ve.onMouseDown=this.checkUnderlayClick);for(var pe in this.props.underlayProps)ve[pe]=this.props.underlayProps[pe];var be={};z.includeDefaultStyles&&(be={display:"inline-block",height:"100%",verticalAlign:"middle"});var Ee={key:"a",style:be},Te={};if(z.includeDefaultStyles&&(Te={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:z.focusDialog?0:null},z.verticallyCenter&&(Te.verticalAlign="middle",Te.top=0)),z.dialogStyle)for(var je in z.dialogStyle)z.dialogStyle.hasOwnProperty(je)&&(Te[je]=z.dialogStyle[je]);var Re={key:"b",ref:(function(ke){this.dialogNode=ke}).bind(this),role:z.alert?"alertdialog":"dialog",id:z.dialogId,className:z.dialogClass,style:Te};z.titleId?Re["aria-labelledby"]=z.titleId:z.titleText&&(Re["aria-label"]=z.titleText),z.focusDialog&&(Re.tabIndex="-1");for(var qe in z)/^(data-|aria-)/.test(qe)&&(Re[qe]=z[qe]);var nt=[x.createElement("div",Re,z.children)];z.verticallyCenter&&nt.unshift(x.createElement("div",Ee));var ht=z.focusTrapOptions||{};return(z.focusDialog||z.initialFocus)&&(ht.initialFocus=z.focusDialog?"#".concat(this.props.dialogId):z.initialFocus),ht.escapeDeactivates=z.escapeExits,x.createElement(B,{focusTrapOptions:ht,paused:z.focusTrapPaused},x.createElement("div",ve,nt))}}]),N})(x.Component);v(F,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function j(H,$){if(!window.document)return function(){return null};$=$||{};var N=(function(Y){r(ne,Y);var z=s(ne);function ne(){var ae;e(this,ne);for(var ve=arguments.length,pe=new Array(ve),be=0;be<ve;be++)pe[be]=arguments[be];return ae=z.call.apply(z,[this].concat(pe)),v(c(ae),"container",null),ae}return i(ne,[{key:"componentDidMount",value:function(){$.renderTo?this.container=typeof $.renderTo=="string"?document.querySelector($.renderTo):$.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){$.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:S.createPortal(x.createElement(H,this.props,this.props.children),this.container)}}]),ne})(x.Component);return v(N,"defaultProps",{mounted:!0}),N}var W=j(F);return W.renderTo=function(H){return j(F,{renderTo:H})},d8=W,d8}var Y6e=q6e();const $6e=eu(Y6e);function Yu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yu=function(){return s},s}Yu();class V6e extends On.Component{static defaultProps=(Yu().s[0]++,{underlayClickExits:!0});onClose=(Yu().s[1]++,()=>{Yu().f[0]++,Yu().s[2]++,document.activeElement?(Yu().b[0][0]++,Yu().s[3]++,document.activeElement.blur()):Yu().b[0][1]++,Yu().s[4]++,setTimeout(()=>{Yu().f[1]++,Yu().s[5]++,this.props.onOpenToggle()},0)});render(){Yu().f[2]++;const e=(Yu().s[6]++,this.props.t);return Yu().s[7]++,this.props.isOpen?(Yu().b[1][0]++,Yu().s[8]++,te.jsx($6e,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:te.jsxs("div",{className:c0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[te.jsxs("header",{className:"maputnik-modal-header",children:[te.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:te.jsx(npe,{})})]}),te.jsx("div",{className:"maputnik-modal-scroller",children:te.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Yu().b[1][1]++,Yu().s[9]++,!1)}}const C1=(Yu().s[10]++,No()(V6e));function ds(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ds=function(){return s},s}ds();ds().s[0]++;const IL=n=>{ds().f[0]++;const[e,t]=(ds().s[1]++,On.useState(!1));ds().s[2]++;const i=a=>{ds().f[1]++,ds().s[3]++,t(a),ds().s[4]++,n.onToggleDoc?(ds().b[0][0]++,ds().s[5]++,n.onToggleDoc(a)):ds().b[0][1]++},{label:r,fieldSpec:o}=(ds().s[6]++,n),{doc:s}=(ds().s[7]++,ds().b[1][0]++,o||(ds().b[1][1]++,{}));return ds().s[8]++,s?(ds().b[2][0]++,ds().s[9]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsxs("div",{className:"maputnik-doc-target",children:[r,"",te.jsx("button",{"aria-label":e?(ds().b[3][0]++,"close property documentation"):(ds().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(ds().b[4][0]++,"open"):(ds().b[4][1]++,"closed")}`,onClick:()=>(ds().f[2]++,ds().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(ds().b[5][0]++,te.jsx(zfe,{})):(ds().b[5][1]++,te.jsx(jfe,{}))})]})})):(ds().b[2][1]++,ds().s[11]++,r?(ds().b[6][0]++,ds().s[12]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsx("div",{className:"maputnik-doc-target",children:r})})):(ds().b[6][1]++,ds().s[13]++,te.jsx("div",{})))};function H6e(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const Z6e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,X6e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,J6e={};function IW(n,e){return(J6e.jsx?X6e:Z6e).test(n)}const eOe=/[ \t\n\f\r]/g;function tOe(n){return typeof n=="object"?n.type==="text"?kW(n.value):!1:kW(n)}function kW(n){return n.replace(eOe,"")===""}class B5{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}B5.prototype.normal={};B5.prototype.property={};B5.prototype.space=void 0;function aoe(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new B5(t,i,e)}function xD(n){return n.toLowerCase()}class Rd{constructor(e,t){this.attribute=t,this.property=e}}Rd.prototype.attribute="";Rd.prototype.booleanish=!1;Rd.prototype.boolean=!1;Rd.prototype.commaOrSpaceSeparated=!1;Rd.prototype.commaSeparated=!1;Rd.prototype.defined=!1;Rd.prototype.mustUseProperty=!1;Rd.prototype.number=!1;Rd.prototype.overloadedBoolean=!1;Rd.prototype.property="";Rd.prototype.spaceSeparated=!1;Rd.prototype.space=void 0;let nOe=0;const po=rC(),$u=rC(),MD=rC(),Vn=rC(),za=rC(),J_=rC(),Af=rC();function rC(){return 2**++nOe}const wD=Object.freeze(Object.defineProperty({__proto__:null,boolean:po,booleanish:$u,commaOrSpaceSeparated:Af,commaSeparated:J_,number:Vn,overloadedBoolean:MD,spaceSeparated:za},Symbol.toStringTag,{value:"Module"})),f8=Object.keys(wD);class kL extends Rd{constructor(e,t,i,r){let o=-1;if(super(e,t),TW(this,"space",r),typeof i=="number")for(;++o<f8.length;){const s=f8[o];TW(this,f8[o],(i&wD[s])===wD[s])}}}kL.prototype.defined=!0;function TW(n,e,t){t&&(n[e]=t)}function $x(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new kL(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[xD(i)]=i,t[xD(o.attribute)]=i}return new B5(e,t,n.space)}const loe=$x({properties:{ariaActiveDescendant:null,ariaAtomic:$u,ariaAutoComplete:null,ariaBusy:$u,ariaChecked:$u,ariaColCount:Vn,ariaColIndex:Vn,ariaColSpan:Vn,ariaControls:za,ariaCurrent:null,ariaDescribedBy:za,ariaDetails:null,ariaDisabled:$u,ariaDropEffect:za,ariaErrorMessage:null,ariaExpanded:$u,ariaFlowTo:za,ariaGrabbed:$u,ariaHasPopup:null,ariaHidden:$u,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:za,ariaLevel:Vn,ariaLive:null,ariaModal:$u,ariaMultiLine:$u,ariaMultiSelectable:$u,ariaOrientation:null,ariaOwns:za,ariaPlaceholder:null,ariaPosInSet:Vn,ariaPressed:$u,ariaReadOnly:$u,ariaRelevant:null,ariaRequired:$u,ariaRoleDescription:za,ariaRowCount:Vn,ariaRowIndex:Vn,ariaRowSpan:Vn,ariaSelected:$u,ariaSetSize:Vn,ariaSort:null,ariaValueMax:Vn,ariaValueMin:Vn,ariaValueNow:Vn,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function uoe(n,e){return e in n?n[e]:e}function coe(n,e){return uoe(n,e.toLowerCase())}const iOe=$x({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:J_,acceptCharset:za,accessKey:za,action:null,allow:null,allowFullScreen:po,allowPaymentRequest:po,allowUserMedia:po,alt:null,as:null,async:po,autoCapitalize:null,autoComplete:za,autoFocus:po,autoPlay:po,blocking:za,capture:null,charSet:null,checked:po,cite:null,className:za,cols:Vn,colSpan:null,content:null,contentEditable:$u,controls:po,controlsList:za,coords:Vn|J_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:po,defer:po,dir:null,dirName:null,disabled:po,download:MD,draggable:$u,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:po,formTarget:null,headers:za,height:Vn,hidden:MD,high:Vn,href:null,hrefLang:null,htmlFor:za,httpEquiv:za,id:null,imageSizes:null,imageSrcSet:null,inert:po,inputMode:null,integrity:null,is:null,isMap:po,itemId:null,itemProp:za,itemRef:za,itemScope:po,itemType:za,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:po,low:Vn,manifest:null,max:null,maxLength:Vn,media:null,method:null,min:null,minLength:Vn,multiple:po,muted:po,name:null,nonce:null,noModule:po,noValidate:po,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:po,optimum:Vn,pattern:null,ping:za,placeholder:null,playsInline:po,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:po,referrerPolicy:null,rel:za,required:po,reversed:po,rows:Vn,rowSpan:Vn,sandbox:za,scope:null,scoped:po,seamless:po,selected:po,shadowRootClonable:po,shadowRootDelegatesFocus:po,shadowRootMode:null,shape:null,size:Vn,sizes:null,slot:null,span:Vn,spellCheck:$u,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Vn,step:null,style:null,tabIndex:Vn,target:null,title:null,translate:null,type:null,typeMustMatch:po,useMap:null,value:$u,width:Vn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:za,axis:null,background:null,bgColor:null,border:Vn,borderColor:null,bottomMargin:Vn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:po,declare:po,event:null,face:null,frame:null,frameBorder:null,hSpace:Vn,leftMargin:Vn,link:null,longDesc:null,lowSrc:null,marginHeight:Vn,marginWidth:Vn,noResize:po,noHref:po,noShade:po,noWrap:po,object:null,profile:null,prompt:null,rev:null,rightMargin:Vn,rules:null,scheme:null,scrolling:$u,standby:null,summary:null,text:null,topMargin:Vn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Vn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:po,disableRemotePlayback:po,prefix:null,property:null,results:Vn,security:null,unselectable:null},space:"html",transform:coe}),rOe=$x({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Af,accentHeight:Vn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Vn,amplitude:Vn,arabicForm:null,ascent:Vn,attributeName:null,attributeType:null,azimuth:Vn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Vn,by:null,calcMode:null,capHeight:Vn,className:za,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Vn,diffuseConstant:Vn,direction:null,display:null,dur:null,divisor:Vn,dominantBaseline:null,download:po,dx:null,dy:null,edgeMode:null,editable:null,elevation:Vn,enableBackground:null,end:null,event:null,exponent:Vn,externalResourcesRequired:null,fill:null,fillOpacity:Vn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:J_,g2:J_,glyphName:J_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Vn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Vn,horizOriginX:Vn,horizOriginY:Vn,id:null,ideographic:Vn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Vn,k:Vn,k1:Vn,k2:Vn,k3:Vn,k4:Vn,kernelMatrix:Af,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Vn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Vn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Vn,overlineThickness:Vn,paintOrder:null,panose1:null,path:null,pathLength:Vn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:za,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Vn,pointsAtY:Vn,pointsAtZ:Vn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Af,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Af,rev:Af,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Af,requiredFeatures:Af,requiredFonts:Af,requiredFormats:Af,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Vn,specularExponent:Vn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Vn,strikethroughThickness:Vn,string:null,stroke:null,strokeDashArray:Af,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Vn,strokeOpacity:Vn,strokeWidth:null,style:null,surfaceScale:Vn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Af,tabIndex:Vn,tableValues:null,target:null,targetX:Vn,targetY:Vn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Af,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Vn,underlineThickness:Vn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Vn,values:null,vAlphabetic:Vn,vMathematical:Vn,vectorEffect:null,vHanging:Vn,vIdeographic:Vn,version:null,vertAdvY:Vn,vertOriginX:Vn,vertOriginY:Vn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Vn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:uoe}),Aoe=$x({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),hoe=$x({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:coe}),doe=$x({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),oOe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},sOe=/[A-Z]/g,RW=/-[a-z]/g,aOe=/^data[-\w.:]+$/i;function lOe(n,e){const t=xD(e);let i=e,r=Rd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&aOe.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(RW,cOe);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!RW.test(o)){let s=o.replace(sOe,uOe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=kL}return new r(i,e)}function uOe(n){return"-"+n.toLowerCase()}function cOe(n){return n.charAt(1).toUpperCase()}const AOe=aoe([loe,iOe,Aoe,hoe,doe],"html"),TL=aoe([loe,rOe,Aoe,hoe,doe],"svg");function hOe(n){return n.join(" ").trim()}var qC={},p8,DW;function dOe(){if(DW)return p8;DW=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",m="*",v="",x="comment",S="declaration";p8=function(R,F){if(typeof R!="string")throw new TypeError("First argument must be a string");if(!R)return[];F=F||{};var j=1,W=1;function H(Ee){var Te=Ee.match(e);Te&&(j+=Te.length);var je=Ee.lastIndexOf(c);W=~je?Ee.length-je:W+Ee.length}function $(){var Ee={line:j,column:W};return function(Te){return Te.position=new N(Ee),ne(),Te}}function N(Ee){this.start=Ee,this.end={line:j,column:W},this.source=F.source}N.prototype.content=R;function Y(Ee){var Te=new Error(F.source+":"+j+":"+W+": "+Ee);if(Te.reason=Ee,Te.filename=F.source,Te.line=j,Te.column=W,Te.source=R,!F.silent)throw Te}function z(Ee){var Te=Ee.exec(R);if(Te){var je=Te[0];return H(je),R=R.slice(je.length),Te}}function ne(){z(t)}function ae(Ee){var Te;for(Ee=Ee||[];Te=ve();)Te!==!1&&Ee.push(Te);return Ee}function ve(){var Ee=$();if(!(h!=R.charAt(0)||m!=R.charAt(1))){for(var Te=2;v!=R.charAt(Te)&&(m!=R.charAt(Te)||h!=R.charAt(Te+1));)++Te;if(Te+=2,v===R.charAt(Te-1))return Y("End of comment missing");var je=R.slice(2,Te-2);return W+=2,H(je),R=R.slice(Te),W+=2,Ee({type:x,comment:je})}}function pe(){var Ee=$(),Te=z(i);if(Te){if(ve(),!z(r))return Y("property missing ':'");var je=z(o),Re=Ee({type:S,property:B(Te[0].replace(n,v)),value:je?B(je[0].replace(n,v)):v});return z(s),Re}}function be(){var Ee=[];ae(Ee);for(var Te;Te=pe();)Te!==!1&&(Ee.push(Te),ae(Ee));return Ee}return ne(),be()};function B(R){return R?R.replace(a,v):v}return p8}var PW;function fOe(){if(PW)return qC;PW=1;var n=qC&&qC.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qC,"__esModule",{value:!0}),qC.default=t;const e=n(dOe());function t(i,r){let o=null;if(!i||typeof i!="string")return o;const s=(0,e.default)(i),a=typeof r=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:h,value:m}=c;a?r(h,m,c):m&&(o=o||{},o[h]=m)}),o}return qC}var S2={},UW;function pOe(){if(UW)return S2;UW=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},a=function(h,m){return"".concat(m,"-")},c=function(h,m){return m===void 0&&(m={}),o(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,a):h=h.replace(i,a),h.replace(e,s))};return S2.camelCase=c,S2}var E2,LW;function mOe(){if(LW)return E2;LW=1;var n=E2&&E2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(fOe()),t=pOe();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,E2=i,E2}var gOe=mOe();const yOe=eu(gOe),foe=poe("end"),RL=poe("start");function poe(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function vOe(n){const e=RL(n),t=foe(n);if(e&&t)return{start:e,end:t}}function E3(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?KW(n.position):"start"in n||"end"in n?KW(n):"line"in n||"column"in n?SD(n):""}function SD(n){return FW(n&&n.line)+":"+FW(n&&n.column)}function KW(n){return SD(n&&n.start)+"-"+SD(n&&n.end)}function FW(n){return n&&typeof n=="number"?n:1}class HA extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=E3(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}HA.prototype.file="";HA.prototype.name="";HA.prototype.reason="";HA.prototype.message="";HA.prototype.stack="";HA.prototype.column=void 0;HA.prototype.line=void 0;HA.prototype.ancestors=void 0;HA.prototype.cause=void 0;HA.prototype.fatal=void 0;HA.prototype.place=void 0;HA.prototype.ruleId=void 0;HA.prototype.source=void 0;const DL={}.hasOwnProperty,bOe=new Map,COe=/[A-Z]/g,_Oe=new Set(["table","tbody","thead","tfoot","tr"]),xOe=new Set(["td","th"]),moe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function MOe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=TOe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=kOe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?TL:AOe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=goe(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function goe(n,e,t){if(e.type==="element")return wOe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return SOe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return OOe(n,e,t);if(e.type==="mdxjsEsm")return EOe(n,e);if(e.type==="root")return BOe(n,e,t);if(e.type==="text")return IOe(n,e)}function wOe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=TL,n.schema=r),n.ancestors.push(e);const o=voe(n,e.tagName,!1),s=ROe(n,e);let a=UL(n,e);return _Oe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!tOe(c):!0})),yoe(n,s,o,e),PL(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function SOe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}I4(n,e.position)}function EOe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);I4(n,e.position)}function OOe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=TL,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:voe(n,e.name,!0),s=DOe(n,e),a=UL(n,e);return yoe(n,s,o,e),PL(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function BOe(n,e,t){const i={};return PL(i,UL(n,e)),n.create(e,n.Fragment,i,t)}function IOe(n,e){return e.value}function yoe(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function PL(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function kOe(n,e,t){return i;function i(r,o,s,a){const h=Array.isArray(s.children)?t:e;return a?h(o,s,a):h(o,s)}}function TOe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=RL(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function ROe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&DL.call(e.properties,r)){const o=POe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&xOe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function DOe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else I4(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else I4(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function UL(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:bOe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const h=r.get(c)||0;s=c+"-"+h,r.set(c,h+1)}}const a=goe(n,o,s);a!==void 0&&t.push(a)}return t}function POe(n,e,t){const i=lOe(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?H6e(t):hOe(t)),i.property==="style"){let r=typeof t=="object"?t:UOe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=LOe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?oOe[i.property]||i.property:i.attribute,t]}}function UOe(n,e){try{return yOe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new HA("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=moe+"#cannot-parse-style-attribute",r}}function voe(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=IW(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=IW(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return DL.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);I4(n)}function I4(n,e){const t=new HA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=moe+"#cannot-handle-mdx-estrees-without-createevaluater",t}function LOe(n){const e={};let t;for(t in n)DL.call(n,t)&&(e[KOe(t)]=n[t]);return e}function KOe(n){let e=n.replace(COe,FOe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function FOe(n){return"-"+n.toLowerCase()}const m8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},zOe={};function jOe(n,e){const t=zOe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return boe(n,i,r)}function boe(n,e,t){if(NOe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return zW(n.children,e,t)}return Array.isArray(n)?zW(n,e,t):""}function zW(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=boe(n[r],e,t);return i.join("")}function NOe(n){return!!(n&&typeof n=="object")}const jW=document.createElement("i");function LL(n){const e="&"+n+";";jW.innerHTML=e;const t=jW.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function s0(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function lp(n,e){return n.length>0?(s0(n,n.length,0,e),n):e}const NW={}.hasOwnProperty;function GOe(n){const e={};let t=-1;for(;++t<n.length;)WOe(e,n[t]);return e}function WOe(n,e){let t;for(t in e){const r=(NW.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){NW.call(r,s)||(r[s]=[]);const a=o[s];QOe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function QOe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);s0(n,0,0,i)}function Coe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function ex(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Lg=fv(/[A-Za-z]/),xf=fv(/[\dA-Za-z]/),qOe=fv(/[#-'*+\--9=?A-Z^-~]/);function ED(n){return n!==null&&(n<32||n===127)}const OD=fv(/\d/),YOe=fv(/[\dA-Fa-f]/),$Oe=fv(/[!-/:-@[-`{-~]/);function Kr(n){return n!==null&&n<-2}function Od(n){return n!==null&&(n<0||n===32)}function Us(n){return n===-2||n===-1||n===32}const VOe=fv(new RegExp("\\p{P}|\\p{S}","u")),HOe=fv(/\s/);function fv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Vx(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&xf(n.charCodeAt(t+1))&&xf(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function ja(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Us(c)?(n.enter(t),a(c)):e(c)}function a(c){return Us(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const ZOe={tokenize:XOe};function XOe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),ja(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Kr(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const JOe={tokenize:eBe},GW={tokenize:tBe};function eBe(n){const e=this,t=[];let i=0,r,o,s;return a;function a(H){if(i<t.length){const $=t[i];return e.containerState=$[1],n.attempt($[0].continuation,c,h)(H)}return h(H)}function c(H){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&W();const $=e.events.length;let N=$,Y;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){Y=e.events[N][1].end;break}j(i);let z=$;for(;z<e.events.length;)e.events[z][1].end={...Y},z++;return s0(e.events,N+1,0,e.events.slice($)),e.events.length=z,h(H)}return a(H)}function h(H){if(i===t.length){if(!r)return x(H);if(r.currentConstruct&&r.currentConstruct.concrete)return B(H);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(GW,m,v)(H)}function m(H){return r&&W(),j(i),x(H)}function v(H){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,B(H)}function x(H){return e.containerState={},n.attempt(GW,S,B)(H)}function S(H){return i++,t.push([e.currentConstruct,e.containerState]),x(H)}function B(H){if(H===null){r&&W(),j(0),n.consume(H);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),R(H)}function R(H){if(H===null){F(n.exit("chunkFlow"),!0),j(0),n.consume(H);return}return Kr(H)?(n.consume(H),F(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(H),R)}function F(H,$){const N=e.sliceStream(H);if($&&N.push(null),H.previous=o,o&&(o.next=H),o=H,r.defineSkip(H.start),r.write(N),e.parser.lazy[H.start.line]){let Y=r.events.length;for(;Y--;)if(r.events[Y][1].start.offset<s&&(!r.events[Y][1].end||r.events[Y][1].end.offset>s))return;const z=e.events.length;let ne=z,ae,ve;for(;ne--;)if(e.events[ne][0]==="exit"&&e.events[ne][1].type==="chunkFlow"){if(ae){ve=e.events[ne][1].end;break}ae=!0}for(j(i),Y=z;Y<e.events.length;)e.events[Y][1].end={...ve},Y++;s0(e.events,ne+1,0,e.events.slice(z)),e.events.length=Y}}function j(H){let $=t.length;for(;$-- >H;){const N=t[$];e.containerState=N[1],N[0].exit.call(e,n)}t.length=H}function W(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function tBe(n,e,t){return ja(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function WW(n){if(n===null||Od(n)||HOe(n))return 1;if(VOe(n))return 2}function KL(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const BD={name:"attention",resolveAll:nBe,tokenize:iBe};function nBe(n,e){let t=-1,i,r,o,s,a,c,h,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const v={...n[i][1].end},x={...n[t][1].start};QW(v,-c),QW(x,c),s={type:c>1?"strongSequence":"emphasisSequence",start:v,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:x},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},h=[],n[i][1].end.offset-n[i][1].start.offset&&(h=lp(h,[["enter",n[i][1],e],["exit",n[i][1],e]])),h=lp(h,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),h=lp(h,KL(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),h=lp(h,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,h=lp(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,s0(n,i-1,t-i+3,h),t=i+h.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function iBe(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=WW(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const h=n.exit("attentionSequence"),m=WW(c),v=!m||m===2&&r||t.includes(c),x=!r||r===2&&m||t.includes(i);return h._open=!!(o===42?v:v&&(r||!x)),h._close=!!(o===42?x:x&&(m||!v)),e(c)}}function QW(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const rBe={name:"autolink",tokenize:oBe};function oBe(n,e,t){let i=0;return r;function r(S){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(S),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(S){return Lg(S)?(n.consume(S),s):S===64?t(S):h(S)}function s(S){return S===43||S===45||S===46||xf(S)?(i=1,a(S)):h(S)}function a(S){return S===58?(n.consume(S),i=0,c):(S===43||S===45||S===46||xf(S))&&i++<32?(n.consume(S),a):(i=0,h(S))}function c(S){return S===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(S),n.exit("autolinkMarker"),n.exit("autolink"),e):S===null||S===32||S===60||ED(S)?t(S):(n.consume(S),c)}function h(S){return S===64?(n.consume(S),m):qOe(S)?(n.consume(S),h):t(S)}function m(S){return xf(S)?v(S):t(S)}function v(S){return S===46?(n.consume(S),i=0,m):S===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(S),n.exit("autolinkMarker"),n.exit("autolink"),e):x(S)}function x(S){if((S===45||xf(S))&&i++<63){const B=S===45?x:v;return n.consume(S),B}return t(S)}}const E6={partial:!0,tokenize:sBe};function sBe(n,e,t){return i;function i(o){return Us(o)?ja(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||Kr(o)?e(o):t(o)}}const _oe={continuation:{tokenize:lBe},exit:uBe,name:"blockQuote",tokenize:aBe};function aBe(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return Us(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function lBe(n,e,t){const i=this;return r;function r(s){return Us(s)?ja(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(_oe,e,t)(s)}}function uBe(n){n.exit("blockQuote")}const xoe={name:"characterEscape",tokenize:cBe};function cBe(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return $Oe(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const Moe={name:"characterReference",tokenize:ABe};function ABe(n,e,t){const i=this;let r=0,o,s;return a;function a(v){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),c}function c(v){return v===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(v),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),o=31,s=xf,m(v))}function h(v){return v===88||v===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(v),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=YOe,m):(n.enter("characterReferenceValue"),o=7,s=OD,m(v))}function m(v){if(v===59&&r){const x=n.exit("characterReferenceValue");return s===xf&&!LL(i.sliceSerialize(x))?t(v):(n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(v)&&r++<o?(n.consume(v),m):t(v)}}const qW={partial:!0,tokenize:dBe},YW={concrete:!0,name:"codeFenced",tokenize:hBe};function hBe(n,e,t){const i=this,r={partial:!0,tokenize:N};let o=0,s=0,a;return c;function c(Y){return h(Y)}function h(Y){const z=i.events[i.events.length-1];return o=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,a=Y,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(Y)}function m(Y){return Y===a?(s++,n.consume(Y),m):s<3?t(Y):(n.exit("codeFencedFenceSequence"),Us(Y)?ja(n,v,"whitespace")(Y):v(Y))}function v(Y){return Y===null||Kr(Y)?(n.exit("codeFencedFence"),i.interrupt?e(Y):n.check(qW,R,$)(Y)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),x(Y))}function x(Y){return Y===null||Kr(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),v(Y)):Us(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),ja(n,S,"whitespace")(Y)):Y===96&&Y===a?t(Y):(n.consume(Y),x)}function S(Y){return Y===null||Kr(Y)?v(Y):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),B(Y))}function B(Y){return Y===null||Kr(Y)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),v(Y)):Y===96&&Y===a?t(Y):(n.consume(Y),B)}function R(Y){return n.attempt(r,$,F)(Y)}function F(Y){return n.enter("lineEnding"),n.consume(Y),n.exit("lineEnding"),j}function j(Y){return o>0&&Us(Y)?ja(n,W,"linePrefix",o+1)(Y):W(Y)}function W(Y){return Y===null||Kr(Y)?n.check(qW,R,$)(Y):(n.enter("codeFlowValue"),H(Y))}function H(Y){return Y===null||Kr(Y)?(n.exit("codeFlowValue"),W(Y)):(n.consume(Y),H)}function $(Y){return n.exit("codeFenced"),e(Y)}function N(Y,z,ne){let ae=0;return ve;function ve(je){return Y.enter("lineEnding"),Y.consume(je),Y.exit("lineEnding"),pe}function pe(je){return Y.enter("codeFencedFence"),Us(je)?ja(Y,be,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):be(je)}function be(je){return je===a?(Y.enter("codeFencedFenceSequence"),Ee(je)):ne(je)}function Ee(je){return je===a?(ae++,Y.consume(je),Ee):ae>=s?(Y.exit("codeFencedFenceSequence"),Us(je)?ja(Y,Te,"whitespace")(je):Te(je)):ne(je)}function Te(je){return je===null||Kr(je)?(Y.exit("codeFencedFence"),z(je)):ne(je)}}}function dBe(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const g8={name:"codeIndented",tokenize:pBe},fBe={partial:!0,tokenize:mBe};function pBe(n,e,t){const i=this;return r;function r(h){return n.enter("codeIndented"),ja(n,o,"linePrefix",5)(h)}function o(h){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(h):t(h)}function s(h){return h===null?c(h):Kr(h)?n.attempt(fBe,s,c)(h):(n.enter("codeFlowValue"),a(h))}function a(h){return h===null||Kr(h)?(n.exit("codeFlowValue"),s(h)):(n.consume(h),a)}function c(h){return n.exit("codeIndented"),e(h)}}function mBe(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):Kr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):ja(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):Kr(s)?r(s):t(s)}}const gBe={name:"codeText",previous:vBe,resolve:yBe,tokenize:bBe};function yBe(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function vBe(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bBe(n,e,t){let i=0,r,o;return s;function s(v){return n.enter("codeText"),n.enter("codeTextSequence"),a(v)}function a(v){return v===96?(n.consume(v),i++,a):(n.exit("codeTextSequence"),c(v))}function c(v){return v===null?t(v):v===32?(n.enter("space"),n.consume(v),n.exit("space"),c):v===96?(o=n.enter("codeTextSequence"),r=0,m(v)):Kr(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(v))}function h(v){return v===null||v===32||v===96||Kr(v)?(n.exit("codeTextData"),c(v)):(n.consume(v),h)}function m(v){return v===96?(n.consume(v),r++,m):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(v)):(o.type="codeTextData",h(v))}}class CBe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&O2(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),O2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),O2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);O2(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);O2(this.left,t.reverse())}}}function O2(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function woe(n){const e={};let t=-1,i,r,o,s,a,c,h;const m=new CBe(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(i=m.get(t),t&&i[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,_Be(m,t)),t=e[t],h=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=m.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},a=m.slice(r,t),a.unshift(i),m.splice(r,t-r+1,a))}}return s0(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function _Be(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],h={};let m,v,x=-1,S=t,B=0,R=0;const F=[R];for(;S;){for(;n.get(++r)[1]!==S;);o.push(r),S._tokenizer||(m=i.sliceStream(S),S.next||m.push(null),v&&s.defineSkip(S.start),S._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),S._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),v=S,S=S.next}for(S=t;++x<a.length;)a[x][0]==="exit"&&a[x-1][0]==="enter"&&a[x][1].type===a[x-1][1].type&&a[x][1].start.line!==a[x][1].end.line&&(R=x+1,F.push(R),S._tokenizer=void 0,S.previous=void 0,S=S.next);for(s.events=[],S?(S._tokenizer=void 0,S.previous=void 0):F.pop(),x=F.length;x--;){const j=a.slice(F[x],F[x+1]),W=o.pop();c.push([W,W+j.length-1]),n.splice(W,2,j)}for(c.reverse(),x=-1;++x<c.length;)h[B+c[x][0]]=B+c[x][1],B+=c[x][1]-c[x][0]-1;return h}const xBe={resolve:wBe,tokenize:SBe},MBe={partial:!0,tokenize:EBe};function wBe(n){return woe(n),n}function SBe(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):Kr(a)?n.check(MBe,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function EBe(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),ja(n,o,"linePrefix")}function o(s){if(s===null||Kr(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function Soe(n,e,t,i,r,o,s,a,c){const h=c||Number.POSITIVE_INFINITY;let m=0;return v;function v(j){return j===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(j),n.exit(o),x):j===null||j===32||j===41||ED(j)?t(j):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),R(j))}function x(j){return j===62?(n.enter(o),n.consume(j),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),S(j))}function S(j){return j===62?(n.exit("chunkString"),n.exit(a),x(j)):j===null||j===60||Kr(j)?t(j):(n.consume(j),j===92?B:S)}function B(j){return j===60||j===62||j===92?(n.consume(j),S):S(j)}function R(j){return!m&&(j===null||j===41||Od(j))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(j)):m<h&&j===40?(n.consume(j),m++,R):j===41?(n.consume(j),m--,R):j===null||j===32||j===40||ED(j)?t(j):(n.consume(j),j===92?F:R)}function F(j){return j===40||j===41||j===92?(n.consume(j),R):R(j)}}function Eoe(n,e,t,i,r,o){const s=this;let a=0,c;return h;function h(S){return n.enter(i),n.enter(r),n.consume(S),n.exit(r),n.enter(o),m}function m(S){return a>999||S===null||S===91||S===93&&!c||S===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(S):S===93?(n.exit(o),n.enter(r),n.consume(S),n.exit(r),n.exit(i),e):Kr(S)?(n.enter("lineEnding"),n.consume(S),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),v(S))}function v(S){return S===null||S===91||S===93||Kr(S)||a++>999?(n.exit("chunkString"),m(S)):(n.consume(S),c||(c=!Us(S)),S===92?x:v)}function x(S){return S===91||S===92||S===93?(n.consume(S),a++,v):v(S)}}function Ooe(n,e,t,i,r,o){let s;return a;function a(x){return x===34||x===39||x===40?(n.enter(i),n.enter(r),n.consume(x),n.exit(r),s=x===40?41:x,c):t(x)}function c(x){return x===s?(n.enter(r),n.consume(x),n.exit(r),n.exit(i),e):(n.enter(o),h(x))}function h(x){return x===s?(n.exit(o),c(s)):x===null?t(x):Kr(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),ja(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===s||x===null||Kr(x)?(n.exit("chunkString"),h(x)):(n.consume(x),x===92?v:m)}function v(x){return x===s||x===92?(n.consume(x),m):m(x)}}function O3(n,e){let t;return i;function i(r){return Kr(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Us(r)?ja(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const OBe={name:"definition",tokenize:IBe},BBe={partial:!0,tokenize:kBe};function IBe(n,e,t){const i=this;let r;return o;function o(S){return n.enter("definition"),s(S)}function s(S){return Eoe.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(S)}function a(S){return r=ex(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),S===58?(n.enter("definitionMarker"),n.consume(S),n.exit("definitionMarker"),c):t(S)}function c(S){return Od(S)?O3(n,h)(S):h(S)}function h(S){return Soe(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(S)}function m(S){return n.attempt(BBe,v,v)(S)}function v(S){return Us(S)?ja(n,x,"whitespace")(S):x(S)}function x(S){return S===null||Kr(S)?(n.exit("definition"),i.parser.defined.push(r),e(S)):t(S)}}function kBe(n,e,t){return i;function i(a){return Od(a)?O3(n,r)(a):t(a)}function r(a){return Ooe(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Us(a)?ja(n,s,"whitespace")(a):s(a)}function s(a){return a===null||Kr(a)?e(a):t(a)}}const TBe={name:"hardBreakEscape",tokenize:RBe};function RBe(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return Kr(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const DBe={name:"headingAtx",resolve:PBe,tokenize:UBe};function PBe(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},s0(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function UBe(n,e,t){let i=0;return r;function r(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&i++<6?(n.consume(m),s):m===null||Od(m)?(n.exit("atxHeadingSequence"),a(m)):t(m)}function a(m){return m===35?(n.enter("atxHeadingSequence"),c(m)):m===null||Kr(m)?(n.exit("atxHeading"),e(m)):Us(m)?ja(n,a,"whitespace")(m):(n.enter("atxHeadingText"),h(m))}function c(m){return m===35?(n.consume(m),c):(n.exit("atxHeadingSequence"),a(m))}function h(m){return m===null||m===35||Od(m)?(n.exit("atxHeadingText"),a(m)):(n.consume(m),h)}}const LBe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$W=["pre","script","style","textarea"],KBe={concrete:!0,name:"htmlFlow",resolveTo:jBe,tokenize:NBe},FBe={partial:!0,tokenize:WBe},zBe={partial:!0,tokenize:GBe};function jBe(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function NBe(n,e,t){const i=this;let r,o,s,a,c;return h;function h(we){return m(we)}function m(we){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(we),v}function v(we){return we===33?(n.consume(we),x):we===47?(n.consume(we),o=!0,R):we===63?(n.consume(we),r=3,i.interrupt?e:ke):Lg(we)?(n.consume(we),s=String.fromCharCode(we),F):t(we)}function x(we){return we===45?(n.consume(we),r=2,S):we===91?(n.consume(we),r=5,a=0,B):Lg(we)?(n.consume(we),r=4,i.interrupt?e:ke):t(we)}function S(we){return we===45?(n.consume(we),i.interrupt?e:ke):t(we)}function B(we){const At="CDATA[";return we===At.charCodeAt(a++)?(n.consume(we),a===At.length?i.interrupt?e:be:B):t(we)}function R(we){return Lg(we)?(n.consume(we),s=String.fromCharCode(we),F):t(we)}function F(we){if(we===null||we===47||we===62||Od(we)){const At=we===47,it=s.toLowerCase();return!At&&!o&&$W.includes(it)?(r=1,i.interrupt?e(we):be(we)):LBe.includes(s.toLowerCase())?(r=6,At?(n.consume(we),j):i.interrupt?e(we):be(we)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(we):o?W(we):H(we))}return we===45||xf(we)?(n.consume(we),s+=String.fromCharCode(we),F):t(we)}function j(we){return we===62?(n.consume(we),i.interrupt?e:be):t(we)}function W(we){return Us(we)?(n.consume(we),W):ve(we)}function H(we){return we===47?(n.consume(we),ve):we===58||we===95||Lg(we)?(n.consume(we),$):Us(we)?(n.consume(we),H):ve(we)}function $(we){return we===45||we===46||we===58||we===95||xf(we)?(n.consume(we),$):N(we)}function N(we){return we===61?(n.consume(we),Y):Us(we)?(n.consume(we),N):H(we)}function Y(we){return we===null||we===60||we===61||we===62||we===96?t(we):we===34||we===39?(n.consume(we),c=we,z):Us(we)?(n.consume(we),Y):ne(we)}function z(we){return we===c?(n.consume(we),c=null,ae):we===null||Kr(we)?t(we):(n.consume(we),z)}function ne(we){return we===null||we===34||we===39||we===47||we===60||we===61||we===62||we===96||Od(we)?N(we):(n.consume(we),ne)}function ae(we){return we===47||we===62||Us(we)?H(we):t(we)}function ve(we){return we===62?(n.consume(we),pe):t(we)}function pe(we){return we===null||Kr(we)?be(we):Us(we)?(n.consume(we),pe):t(we)}function be(we){return we===45&&r===2?(n.consume(we),Re):we===60&&r===1?(n.consume(we),qe):we===62&&r===4?(n.consume(we),Oe):we===63&&r===3?(n.consume(we),ke):we===93&&r===5?(n.consume(we),ht):Kr(we)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(FBe,ze,Ee)(we)):we===null||Kr(we)?(n.exit("htmlFlowData"),Ee(we)):(n.consume(we),be)}function Ee(we){return n.check(zBe,Te,ze)(we)}function Te(we){return n.enter("lineEnding"),n.consume(we),n.exit("lineEnding"),je}function je(we){return we===null||Kr(we)?Ee(we):(n.enter("htmlFlowData"),be(we))}function Re(we){return we===45?(n.consume(we),ke):be(we)}function qe(we){return we===47?(n.consume(we),s="",nt):be(we)}function nt(we){if(we===62){const At=s.toLowerCase();return $W.includes(At)?(n.consume(we),Oe):be(we)}return Lg(we)&&s.length<8?(n.consume(we),s+=String.fromCharCode(we),nt):be(we)}function ht(we){return we===93?(n.consume(we),ke):be(we)}function ke(we){return we===62?(n.consume(we),Oe):we===45&&r===2?(n.consume(we),ke):be(we)}function Oe(we){return we===null||Kr(we)?(n.exit("htmlFlowData"),ze(we)):(n.consume(we),Oe)}function ze(we){return n.exit("htmlFlow"),e(we)}}function GBe(n,e,t){const i=this;return r;function r(s){return Kr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function WBe(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(E6,e,t)}}const QBe={name:"htmlText",tokenize:qBe};function qBe(n,e,t){const i=this;let r,o,s;return a;function a(ke){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(ke),c}function c(ke){return ke===33?(n.consume(ke),h):ke===47?(n.consume(ke),N):ke===63?(n.consume(ke),H):Lg(ke)?(n.consume(ke),ne):t(ke)}function h(ke){return ke===45?(n.consume(ke),m):ke===91?(n.consume(ke),o=0,B):Lg(ke)?(n.consume(ke),W):t(ke)}function m(ke){return ke===45?(n.consume(ke),S):t(ke)}function v(ke){return ke===null?t(ke):ke===45?(n.consume(ke),x):Kr(ke)?(s=v,qe(ke)):(n.consume(ke),v)}function x(ke){return ke===45?(n.consume(ke),S):v(ke)}function S(ke){return ke===62?Re(ke):ke===45?x(ke):v(ke)}function B(ke){const Oe="CDATA[";return ke===Oe.charCodeAt(o++)?(n.consume(ke),o===Oe.length?R:B):t(ke)}function R(ke){return ke===null?t(ke):ke===93?(n.consume(ke),F):Kr(ke)?(s=R,qe(ke)):(n.consume(ke),R)}function F(ke){return ke===93?(n.consume(ke),j):R(ke)}function j(ke){return ke===62?Re(ke):ke===93?(n.consume(ke),j):R(ke)}function W(ke){return ke===null||ke===62?Re(ke):Kr(ke)?(s=W,qe(ke)):(n.consume(ke),W)}function H(ke){return ke===null?t(ke):ke===63?(n.consume(ke),$):Kr(ke)?(s=H,qe(ke)):(n.consume(ke),H)}function $(ke){return ke===62?Re(ke):H(ke)}function N(ke){return Lg(ke)?(n.consume(ke),Y):t(ke)}function Y(ke){return ke===45||xf(ke)?(n.consume(ke),Y):z(ke)}function z(ke){return Kr(ke)?(s=z,qe(ke)):Us(ke)?(n.consume(ke),z):Re(ke)}function ne(ke){return ke===45||xf(ke)?(n.consume(ke),ne):ke===47||ke===62||Od(ke)?ae(ke):t(ke)}function ae(ke){return ke===47?(n.consume(ke),Re):ke===58||ke===95||Lg(ke)?(n.consume(ke),ve):Kr(ke)?(s=ae,qe(ke)):Us(ke)?(n.consume(ke),ae):Re(ke)}function ve(ke){return ke===45||ke===46||ke===58||ke===95||xf(ke)?(n.consume(ke),ve):pe(ke)}function pe(ke){return ke===61?(n.consume(ke),be):Kr(ke)?(s=pe,qe(ke)):Us(ke)?(n.consume(ke),pe):ae(ke)}function be(ke){return ke===null||ke===60||ke===61||ke===62||ke===96?t(ke):ke===34||ke===39?(n.consume(ke),r=ke,Ee):Kr(ke)?(s=be,qe(ke)):Us(ke)?(n.consume(ke),be):(n.consume(ke),Te)}function Ee(ke){return ke===r?(n.consume(ke),r=void 0,je):ke===null?t(ke):Kr(ke)?(s=Ee,qe(ke)):(n.consume(ke),Ee)}function Te(ke){return ke===null||ke===34||ke===39||ke===60||ke===61||ke===96?t(ke):ke===47||ke===62||Od(ke)?ae(ke):(n.consume(ke),Te)}function je(ke){return ke===47||ke===62||Od(ke)?ae(ke):t(ke)}function Re(ke){return ke===62?(n.consume(ke),n.exit("htmlTextData"),n.exit("htmlText"),e):t(ke)}function qe(ke){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(ke),n.exit("lineEnding"),nt}function nt(ke){return Us(ke)?ja(n,ht,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ke):ht(ke)}function ht(ke){return n.enter("htmlTextData"),s(ke)}}const FL={name:"labelEnd",resolveAll:HBe,resolveTo:ZBe,tokenize:XBe},YBe={tokenize:JBe},$Be={tokenize:e8e},VBe={tokenize:t8e};function HBe(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&s0(n,0,n.length,t),n}function ZBe(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},m={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=lp(a,n.slice(o+1,o+i+3)),a=lp(a,[["enter",m,e]]),a=lp(a,KL(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=lp(a,[["exit",m,e],n[s-2],n[s-1],["exit",h,e]]),a=lp(a,n.slice(s+1)),a=lp(a,[["exit",c,e]]),s0(n,o,n.length,a),n}function XBe(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(x){return o?o._inactive?v(x):(s=i.parser.defined.includes(ex(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(x),n.exit("labelMarker"),n.exit("labelEnd"),c):t(x)}function c(x){return x===40?n.attempt(YBe,m,s?m:v)(x):x===91?n.attempt($Be,m,s?h:v)(x):s?m(x):v(x)}function h(x){return n.attempt(VBe,m,v)(x)}function m(x){return e(x)}function v(x){return o._balanced=!0,t(x)}}function JBe(n,e,t){return i;function i(v){return n.enter("resource"),n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),r}function r(v){return Od(v)?O3(n,o)(v):o(v)}function o(v){return v===41?m(v):Soe(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function s(v){return Od(v)?O3(n,c)(v):m(v)}function a(v){return t(v)}function c(v){return v===34||v===39||v===40?Ooe(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):m(v)}function h(v){return Od(v)?O3(n,m)(v):m(v)}function m(v){return v===41?(n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),n.exit("resource"),e):t(v)}}function e8e(n,e,t){const i=this;return r;function r(a){return Eoe.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(ex(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function t8e(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const n8e={name:"labelStartImage",resolveAll:FL.resolveAll,tokenize:i8e};function i8e(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const r8e={name:"labelStartLink",resolveAll:FL.resolveAll,tokenize:o8e};function o8e(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const y8={name:"lineEnding",tokenize:s8e};function s8e(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),ja(n,e,"linePrefix")}}const Ew={name:"thematicBreak",tokenize:a8e};function a8e(n,e,t){let i=0,r;return o;function o(h){return n.enter("thematicBreak"),s(h)}function s(h){return r=h,a(h)}function a(h){return h===r?(n.enter("thematicBreakSequence"),c(h)):i>=3&&(h===null||Kr(h))?(n.exit("thematicBreak"),e(h)):t(h)}function c(h){return h===r?(n.consume(h),i++,c):(n.exit("thematicBreakSequence"),Us(h)?ja(n,a,"whitespace")(h):a(h))}}const gd={continuation:{tokenize:A8e},exit:d8e,name:"list",tokenize:c8e},l8e={partial:!0,tokenize:f8e},u8e={partial:!0,tokenize:h8e};function c8e(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(S){const B=i.containerState.type||(S===42||S===43||S===45?"listUnordered":"listOrdered");if(B==="listUnordered"?!i.containerState.marker||S===i.containerState.marker:OD(S)){if(i.containerState.type||(i.containerState.type=B,n.enter(B,{_container:!0})),B==="listUnordered")return n.enter("listItemPrefix"),S===42||S===45?n.check(Ew,t,h)(S):h(S);if(!i.interrupt||S===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(S)}return t(S)}function c(S){return OD(S)&&++s<10?(n.consume(S),c):(!i.interrupt||s<2)&&(i.containerState.marker?S===i.containerState.marker:S===41||S===46)?(n.exit("listItemValue"),h(S)):t(S)}function h(S){return n.enter("listItemMarker"),n.consume(S),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||S,n.check(E6,i.interrupt?t:m,n.attempt(l8e,x,v))}function m(S){return i.containerState.initialBlankLine=!0,o++,x(S)}function v(S){return Us(S)?(n.enter("listItemPrefixWhitespace"),n.consume(S),n.exit("listItemPrefixWhitespace"),x):t(S)}function x(S){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(S)}}function A8e(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(E6,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ja(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Us(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(u8e,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,ja(n,n.attempt(gd,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function h8e(n,e,t){const i=this;return ja(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function d8e(n){n.exit(this.containerState.type)}function f8e(n,e,t){const i=this;return ja(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Us(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const VW={name:"setextUnderline",resolveTo:p8e,tokenize:m8e};function p8e(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function m8e(n,e,t){const i=this;let r;return o;function o(h){let m=i.events.length,v;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){v=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||v)?(n.enter("setextHeadingLine"),r=h,s(h)):t(h)}function s(h){return n.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===r?(n.consume(h),a):(n.exit("setextHeadingLineSequence"),Us(h)?ja(n,c,"lineSuffix")(h):c(h))}function c(h){return h===null||Kr(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const g8e={tokenize:y8e};function y8e(n){const e=this,t=n.attempt(E6,i,n.attempt(this.parser.constructs.flowInitial,r,ja(n,n.attempt(this.parser.constructs.flow,r,n.attempt(xBe,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const v8e={resolveAll:Ioe()},b8e=Boe("string"),C8e=Boe("text");function Boe(n){return{resolveAll:Ioe(n==="text"?_8e:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(m){return h(m)?o(m):a(m)}function a(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),c}function c(m){return h(m)?(t.exit("data"),o(m)):(t.consume(m),c)}function h(m){if(m===null)return!0;const v=r[m];let x=-1;if(v)for(;++x<v.length;){const S=v[x];if(!S.previous||S.previous.call(i,i.previous))return!0}return!1}}}function Ioe(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function _8e(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const h=r[o];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(h===-2)c=!0,a++;else if(h!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const h={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const x8e={42:gd,43:gd,45:gd,48:gd,49:gd,50:gd,51:gd,52:gd,53:gd,54:gd,55:gd,56:gd,57:gd,62:_oe},M8e={91:OBe},w8e={[-2]:g8,[-1]:g8,32:g8},S8e={35:DBe,42:Ew,45:[VW,Ew],60:KBe,61:VW,95:Ew,96:YW,126:YW},E8e={38:Moe,92:xoe},O8e={[-5]:y8,[-4]:y8,[-3]:y8,33:n8e,38:Moe,42:BD,60:[rBe,QBe],91:r8e,92:[TBe,xoe],93:FL,95:BD,96:gBe},B8e={null:[BD,v8e]},I8e={null:[42,95]},k8e={null:[]},T8e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:I8e,contentInitial:M8e,disable:k8e,document:x8e,flow:S8e,flowInitial:w8e,insideSpan:B8e,string:E8e,text:O8e},Symbol.toStringTag,{value:"Module"}));function R8e(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:z(N),check:z(Y),consume:W,enter:H,exit:$,interrupt:z(Y,{interrupt:!0})},h={code:null,containerState:{},defineSkip:R,events:[],now:B,parser:n,previous:null,sliceSerialize:x,sliceStream:S,write:v};let m=e.tokenize.call(h,c);return e.resolveAll&&o.push(e),h;function v(pe){return s=lp(s,pe),F(),s[s.length-1]!==null?[]:(ne(e,0),h.events=KL(o,h.events,h),h.events)}function x(pe,be){return P8e(S(pe),be)}function S(pe){return D8e(s,pe)}function B(){const{_bufferIndex:pe,_index:be,line:Ee,column:Te,offset:je}=i;return{_bufferIndex:pe,_index:be,line:Ee,column:Te,offset:je}}function R(pe){r[pe.line]=pe.column,ve()}function F(){let pe;for(;i._index<s.length;){const be=s[i._index];if(typeof be=="string")for(pe=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===pe&&i._bufferIndex<be.length;)j(be.charCodeAt(i._bufferIndex));else j(be)}}function j(pe){m=m(pe)}function W(pe){Kr(pe)?(i.line++,i.column=1,i.offset+=pe===-3?2:1,ve()):pe!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=pe}function H(pe,be){const Ee=be||{};return Ee.type=pe,Ee.start=B(),h.events.push(["enter",Ee,h]),a.push(Ee),Ee}function $(pe){const be=a.pop();return be.end=B(),h.events.push(["exit",be,h]),be}function N(pe,be){ne(pe,be.from)}function Y(pe,be){be.restore()}function z(pe,be){return Ee;function Ee(Te,je,Re){let qe,nt,ht,ke;return Array.isArray(Te)?ze(Te):"tokenize"in Te?ze([Te]):Oe(Te);function Oe(Ct){return It;function It(Ke){const Ie=Ke!==null&&Ct[Ke],Se=Ke!==null&&Ct.null,Ge=[...Array.isArray(Ie)?Ie:Ie?[Ie]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return ze(Ge)(Ke)}}function ze(Ct){return qe=Ct,nt=0,Ct.length===0?Re:we(Ct[nt])}function we(Ct){return It;function It(Ke){return ke=ae(),ht=Ct,Ct.partial||(h.currentConstruct=Ct),Ct.name&&h.parser.constructs.disable.null.includes(Ct.name)?it():Ct.tokenize.call(be?Object.assign(Object.create(h),be):h,c,At,it)(Ke)}}function At(Ct){return pe(ht,ke),je}function it(Ct){return ke.restore(),++nt<qe.length?we(qe[nt]):Re}}}function ne(pe,be){pe.resolveAll&&!o.includes(pe)&&o.push(pe),pe.resolve&&s0(h.events,be,h.events.length-be,pe.resolve(h.events.slice(be),h)),pe.resolveTo&&(h.events=pe.resolveTo(h.events,h))}function ae(){const pe=B(),be=h.previous,Ee=h.currentConstruct,Te=h.events.length,je=Array.from(a);return{from:Te,restore:Re};function Re(){i=pe,h.previous=be,h.currentConstruct=Ee,h.events.length=Te,a=je,ve()}}function ve(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function D8e(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function P8e(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function U8e(n){const i={constructs:GOe([T8e,...(n||{}).extensions||[]]),content:r(ZOe),defined:[],document:r(JOe),flow:r(g8e),lazy:{},string:r(b8e),text:r(C8e)};return i;function r(o){return s;function s(a){return R8e(i,o,a)}}}function L8e(n){for(;!woe(n););return n}const HW=/[\0\t\n\r]/g;function K8e(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let h,m,v,x,S;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),v=0,e="",t&&(o.charCodeAt(0)===65279&&v++,t=void 0);v<o.length;){if(HW.lastIndex=v,h=HW.exec(o),x=h&&h.index!==void 0?h.index:o.length,S=o.charCodeAt(x),!h){e=o.slice(v);break}if(S===10&&v===x&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),v<x&&(c.push(o.slice(v,x)),n+=x-v),S){case 0:{c.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,c.push(-2);n++<m;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}v=x+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const F8e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function z8e(n){return n.replace(F8e,j8e)}function j8e(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return Coe(t.slice(o?2:1),o?16:10)}return LL(t)||n}const koe={}.hasOwnProperty;function N8e(n,e,t){return typeof e!="string"&&(t=e,e=void 0),G8e(t)(L8e(U8e(t).document().write(K8e()(n,e,!0))))}function G8e(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(zn),autolinkProtocol:ae,autolinkEmail:ae,atxHeading:o(St),blockQuote:o(Se),characterEscape:ae,characterReference:ae,codeFenced:o(Ge),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ge,s),codeText:o(st,s),codeTextData:ae,data:ae,codeFlowValue:ae,definition:o(ut),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(ft),hardBreakEscape:o(kt),hardBreakTrailing:o(kt),htmlFlow:o(en,s),htmlFlowData:ae,htmlText:o(en,s),htmlTextData:ae,image:o(Pn),label:s,link:o(zn),listItem:o(xn),listItemValue:x,listOrdered:o(si,v),listUnordered:o(si),paragraph:o(Rn),reference:we,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(St),strong:o(pn),thematicBreak:o(Un)},exit:{atxHeading:c(),atxHeadingSequence:N,autolink:c(),autolinkEmail:Ie,autolinkProtocol:Ke,blockQuote:c(),characterEscapeValue:ve,characterReferenceMarkerHexadecimal:it,characterReferenceMarkerNumeric:it,characterReferenceValue:Ct,characterReference:It,codeFenced:c(F),codeFencedFence:R,codeFencedFenceInfo:S,codeFencedFenceMeta:B,codeFlowValue:ve,codeIndented:c(j),codeText:c(je),codeTextData:ve,data:ve,definition:c(),definitionDestinationString:$,definitionLabelString:W,definitionTitleString:H,emphasis:c(),hardBreakEscape:c(be),hardBreakTrailing:c(be),htmlFlow:c(Ee),htmlFlowData:ve,htmlText:c(Te),htmlTextData:ve,image:c(qe),label:ht,labelText:nt,lineEnding:pe,link:c(Re),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:At,resourceDestinationString:ke,resourceTitleString:Oe,resource:ze,setextHeading:c(ne),setextHeadingLineSequence:z,setextHeadingText:Y,strong:c(),thematicBreak:c()}};Toe(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(Tt){let Me={type:"root",children:[]};const oe={stack:[Me],tokenStack:[],config:e,enter:a,exit:h,buffer:s,resume:m,data:t},le=[];let he=-1;for(;++he<Tt.length;)if(Tt[he][1].type==="listOrdered"||Tt[he][1].type==="listUnordered")if(Tt[he][0]==="enter")le.push(he);else{const se=le.pop();he=r(Tt,se,he)}for(he=-1;++he<Tt.length;){const se=e[Tt[he][0]];koe.call(se,Tt[he][1].type)&&se[Tt[he][1].type].call(Object.assign({sliceSerialize:Tt[he][2].sliceSerialize},oe),Tt[he][1])}if(oe.tokenStack.length>0){const se=oe.tokenStack[oe.tokenStack.length-1];(se[1]||ZW).call(oe,void 0,se[0])}for(Me.position={start:wy(Tt.length>0?Tt[0][1].start:{line:1,column:1,offset:0}),end:wy(Tt.length>0?Tt[Tt.length-2][1].end:{line:1,column:1,offset:0})},he=-1;++he<e.transforms.length;)Me=e.transforms[he](Me)||Me;return Me}function r(Tt,Me,oe){let le=Me-1,he=-1,se=!1,Ae,xe,Ye,Xe;for(;++le<=oe;){const fe=Tt[le];switch(fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{fe[0]==="enter"?he++:he--,Xe=void 0;break}case"lineEndingBlank":{fe[0]==="enter"&&(Ae&&!Xe&&!he&&!Ye&&(Ye=le),Xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xe=void 0}if(!he&&fe[0]==="enter"&&fe[1].type==="listItemPrefix"||he===-1&&fe[0]==="exit"&&(fe[1].type==="listUnordered"||fe[1].type==="listOrdered")){if(Ae){let De=le;for(xe=void 0;De--;){const y=Tt[De];if(y[1].type==="lineEnding"||y[1].type==="lineEndingBlank"){if(y[0]==="exit")continue;xe&&(Tt[xe][1].type="lineEndingBlank",se=!0),y[1].type="lineEnding",xe=De}else if(!(y[1].type==="linePrefix"||y[1].type==="blockQuotePrefix"||y[1].type==="blockQuotePrefixWhitespace"||y[1].type==="blockQuoteMarker"||y[1].type==="listItemIndent"))break}Ye&&(!xe||Ye<xe)&&(Ae._spread=!0),Ae.end=Object.assign({},xe?Tt[xe][1].start:fe[1].end),Tt.splice(xe||le,0,["exit",Ae,fe[2]]),le++,oe++}if(fe[1].type==="listItemPrefix"){const De={type:"listItem",_spread:!1,start:Object.assign({},fe[1].start),end:void 0};Ae=De,Tt.splice(le,0,["enter",De,fe[2]]),le++,oe++,Ye=void 0,Xe=!0}}}return Tt[Me][1]._spread=se,oe}function o(Tt,Me){return oe;function oe(le){a.call(this,Tt(le),le),Me&&Me.call(this,le)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(Tt,Me,oe){this.stack[this.stack.length-1].children.push(Tt),this.stack.push(Tt),this.tokenStack.push([Me,oe||void 0]),Tt.position={start:wy(Me.start),end:void 0}}function c(Tt){return Me;function Me(oe){Tt&&Tt.call(this,oe),h.call(this,oe)}}function h(Tt,Me){const oe=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==Tt.type&&(Me?Me.call(this,Tt,le[0]):(le[1]||ZW).call(this,Tt,le[0]));else throw new Error("Cannot close `"+Tt.type+"` ("+E3({start:Tt.start,end:Tt.end})+"): its not open");oe.position.end=wy(Tt.end)}function m(){return jOe(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function x(Tt){if(this.data.expectingFirstListItemValue){const Me=this.stack[this.stack.length-2];Me.start=Number.parseInt(this.sliceSerialize(Tt),10),this.data.expectingFirstListItemValue=void 0}}function S(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.lang=Tt}function B(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.meta=Tt}function R(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.value=Tt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.value=Tt.replace(/(\r?\n|\r)$/g,"")}function W(Tt){const Me=this.resume(),oe=this.stack[this.stack.length-1];oe.label=Me,oe.identifier=ex(this.sliceSerialize(Tt)).toLowerCase()}function H(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.title=Tt}function $(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.url=Tt}function N(Tt){const Me=this.stack[this.stack.length-1];if(!Me.depth){const oe=this.sliceSerialize(Tt).length;Me.depth=oe}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function z(Tt){const Me=this.stack[this.stack.length-1];Me.depth=this.sliceSerialize(Tt).codePointAt(0)===61?1:2}function ne(){this.data.setextHeadingSlurpLineEnding=void 0}function ae(Tt){const oe=this.stack[this.stack.length-1].children;let le=oe[oe.length-1];(!le||le.type!=="text")&&(le=Hn(),le.position={start:wy(Tt.start),end:void 0},oe.push(le)),this.stack.push(le)}function ve(Tt){const Me=this.stack.pop();Me.value+=this.sliceSerialize(Tt),Me.position.end=wy(Tt.end)}function pe(Tt){const Me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const oe=Me.children[Me.children.length-1];oe.position.end=wy(Tt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Me.type)&&(ae.call(this,Tt),ve.call(this,Tt))}function be(){this.data.atHardBreak=!0}function Ee(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.value=Tt}function Te(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.value=Tt}function je(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.value=Tt}function Re(){const Tt=this.stack[this.stack.length-1];if(this.data.inReference){const Me=this.data.referenceType||"shortcut";Tt.type+="Reference",Tt.referenceType=Me,delete Tt.url,delete Tt.title}else delete Tt.identifier,delete Tt.label;this.data.referenceType=void 0}function qe(){const Tt=this.stack[this.stack.length-1];if(this.data.inReference){const Me=this.data.referenceType||"shortcut";Tt.type+="Reference",Tt.referenceType=Me,delete Tt.url,delete Tt.title}else delete Tt.identifier,delete Tt.label;this.data.referenceType=void 0}function nt(Tt){const Me=this.sliceSerialize(Tt),oe=this.stack[this.stack.length-2];oe.label=z8e(Me),oe.identifier=ex(Me).toLowerCase()}function ht(){const Tt=this.stack[this.stack.length-1],Me=this.resume(),oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,oe.type==="link"){const le=Tt.children;oe.children=le}else oe.alt=Me}function ke(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.url=Tt}function Oe(){const Tt=this.resume(),Me=this.stack[this.stack.length-1];Me.title=Tt}function ze(){this.data.inReference=void 0}function we(){this.data.referenceType="collapsed"}function At(Tt){const Me=this.resume(),oe=this.stack[this.stack.length-1];oe.label=Me,oe.identifier=ex(this.sliceSerialize(Tt)).toLowerCase(),this.data.referenceType="full"}function it(Tt){this.data.characterReferenceType=Tt.type}function Ct(Tt){const Me=this.sliceSerialize(Tt),oe=this.data.characterReferenceType;let le;oe?(le=Coe(Me,oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=LL(Me);const he=this.stack[this.stack.length-1];he.value+=le}function It(Tt){const Me=this.stack.pop();Me.position.end=wy(Tt.end)}function Ke(Tt){ve.call(this,Tt);const Me=this.stack[this.stack.length-1];Me.url=this.sliceSerialize(Tt)}function Ie(Tt){ve.call(this,Tt);const Me=this.stack[this.stack.length-1];Me.url="mailto:"+this.sliceSerialize(Tt)}function Se(){return{type:"blockquote",children:[]}}function Ge(){return{type:"code",lang:null,meta:null,value:""}}function st(){return{type:"inlineCode",value:""}}function ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ft(){return{type:"emphasis",children:[]}}function St(){return{type:"heading",depth:0,children:[]}}function kt(){return{type:"break"}}function en(){return{type:"html",value:""}}function Pn(){return{type:"image",title:null,url:"",alt:null}}function zn(){return{type:"link",title:null,url:"",children:[]}}function si(Tt){return{type:"list",ordered:Tt.type==="listOrdered",start:null,spread:Tt._spread,children:[]}}function xn(Tt){return{type:"listItem",spread:Tt._spread,checked:null,children:[]}}function Rn(){return{type:"paragraph",children:[]}}function pn(){return{type:"strong",children:[]}}function Hn(){return{type:"text",value:""}}function Un(){return{type:"thematicBreak"}}}function wy(n){return{line:n.line,column:n.column,offset:n.offset}}function Toe(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Toe(n,i):W8e(n,i)}}function W8e(n,e){let t;for(t in e)if(koe.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function ZW(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+E3({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+E3({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+E3({start:e.start,end:e.end})+") is still open")}function Q8e(n){const e=this;e.parser=t;function t(i){return N8e(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function q8e(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function Y8e(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function $8e(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function V8e(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function H8e(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Z8e(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Vx(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,h),n.applyData(e,h)}function X8e(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function J8e(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Roe(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function e7e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Roe(n,e);const r={src:Vx(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function t7e(n,e){const t={src:Vx(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function n7e(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function i7e(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Roe(n,e);const r={href:Vx(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function r7e(n,e){const t={href:Vx(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function o7e(n,e,t){const i=n.all(e),r=t?s7e(t):Doe(e),o={},s=[];if(typeof e.checked=="boolean"){const m=i[0];let v;m&&m.type==="element"&&m.tagName==="p"?v=m:(v={type:"element",tagName:"p",properties:{},children:[]},i.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const m=i[a];(r||a!==0||m.type!=="element"||m.tagName!=="p")&&s.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?s.push(...m.children):s.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,h),n.applyData(e,h)}function s7e(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=Doe(t[i])}return e}function Doe(n){const e=n.spread;return e??n.children.length>1}function a7e(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function l7e(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function u7e(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function c7e(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function A7e(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=RL(e.children[1]),c=foe(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function h7e(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const v=e.children[c],x={},S=s?s[c]:void 0;S&&(x.align=S);let B={type:"element",tagName:o,properties:x,children:[]};v&&(B.children=n.all(v),n.patch(v,B),B=n.applyData(v,B)),h.push(B)}const m={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,m),n.applyData(e,m)}function d7e(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const XW=9,JW=32;function f7e(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push(eQ(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push(eQ(e.slice(r),r>0,!1)),o.join("")}function eQ(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===XW||o===JW;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===XW||o===JW;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function p7e(n,e){const t={type:"text",value:f7e(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function m7e(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const g7e={blockquote:q8e,break:Y8e,code:$8e,delete:V8e,emphasis:H8e,footnoteReference:Z8e,heading:X8e,html:J8e,imageReference:e7e,image:t7e,inlineCode:n7e,linkReference:i7e,link:r7e,listItem:o7e,list:a7e,paragraph:l7e,root:u7e,strong:c7e,table:A7e,tableCell:d7e,tableRow:h7e,text:p7e,thematicBreak:m7e,toml:FM,yaml:FM,definition:FM,footnoteDefinition:FM};function FM(){}const Poe=-1,O6=0,B3=1,JS=2,zL=3,jL=4,NL=5,GL=6,Uoe=7,Loe=8,tQ=typeof self=="object"?self:globalThis,y7e=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case O6:case Poe:return t(s,r);case B3:{const a=t([],r);for(const c of s)a.push(i(c));return a}case JS:{const a=t({},r);for(const[c,h]of s)a[i(c)]=i(h);return a}case zL:return t(new Date(s),r);case jL:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case NL:{const a=t(new Map,r);for(const[c,h]of s)a.set(i(c),i(h));return a}case GL:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case Uoe:{const{name:a,message:c}=s;return t(new tQ[a](c),r)}case Loe:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new tQ[o](s),r)};return i},nQ=n=>y7e(new Map,n)(0),YC="",{toString:v7e}={},{keys:b7e}=Object,B2=n=>{const e=typeof n;if(e!=="object"||!n)return[O6,e];const t=v7e.call(n).slice(8,-1);switch(t){case"Array":return[B3,YC];case"Object":return[JS,YC];case"Date":return[zL,YC];case"RegExp":return[jL,YC];case"Map":return[NL,YC];case"Set":return[GL,YC];case"DataView":return[B3,t]}return t.includes("Array")?[B3,t]:t.includes("Error")?[Uoe,t]:[JS,t]},zM=([n,e])=>n===O6&&(e==="function"||e==="symbol"),C7e=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=B2(s);switch(a){case O6:{let m=s;switch(c){case"bigint":a=Loe,m=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([Poe],s)}return r([a,m],s)}case B3:{if(c){let x=s;return c==="DataView"?x=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(x=new Uint8Array(s)),r([c,[...x]],s)}const m=[],v=r([a,m],s);for(const x of s)m.push(o(x));return v}case JS:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const m=[],v=r([a,m],s);for(const x of b7e(s))(n||!zM(B2(s[x])))&&m.push([o(x),o(s[x])]);return v}case zL:return r([a,s.toISOString()],s);case jL:{const{source:m,flags:v}=s;return r([a,{source:m,flags:v}],s)}case NL:{const m=[],v=r([a,m],s);for(const[x,S]of s)(n||!(zM(B2(x))||zM(B2(S))))&&m.push([o(x),o(S)]);return v}case GL:{const m=[],v=r([a,m],s);for(const x of s)(n||!zM(B2(x)))&&m.push(o(x));return v}}const{message:h}=s;return r([a,{name:c,message:h}],s)};return o},iQ=(n,{json:e,lossy:t}={})=>{const i=[];return C7e(!(e||t),!!e,new Map,i)(n),i},eE=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?nQ(iQ(n,e)):structuredClone(n):(n,e)=>nQ(iQ(n,e));function _7e(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function x7e(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function M7e(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||_7e,i=n.options.footnoteBackLabel||x7e,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[c]);if(!h)continue;const m=n.all(h),v=String(h.identifier).toUpperCase(),x=Vx(v.toLowerCase());let S=0;const B=[],R=n.footnoteCounts.get(v);for(;R!==void 0&&++S<=R;){B.length>0&&B.push({type:"text",value:" "});let W=typeof t=="string"?t:t(c,S);typeof W=="string"&&(W={type:"text",value:W}),B.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+x+(S>1?"-"+S:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,S),className:["data-footnote-backref"]},children:Array.isArray(W)?W:[W]})}const F=m[m.length-1];if(F&&F.type==="element"&&F.tagName==="p"){const W=F.children[F.children.length-1];W&&W.type==="text"?W.value+=" ":F.children.push({type:"text",value:" "}),F.children.push(...B)}else m.push(...B);const j={type:"element",tagName:"li",properties:{id:e+"fn-"+x},children:n.wrap(m,!0)};n.patch(h,j),a.push(j)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...eE(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const Koe=(function(n){if(n==null)return O7e;if(typeof n=="function")return B6(n);if(typeof n=="object")return Array.isArray(n)?w7e(n):S7e(n);if(typeof n=="string")return E7e(n);throw new Error("Expected function, string, or object as test")});function w7e(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Koe(n[t]);return B6(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function S7e(n){const e=n;return B6(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function E7e(n){return B6(e);function e(t){return t&&t.type===n}}function B6(n){return e;function e(t,i,r){return!!(B7e(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function O7e(){return!0}function B7e(n){return n!==null&&typeof n=="object"&&"type"in n}const Foe=[],I7e=!0,rQ=!1,k7e="skip";function T7e(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=Koe(r),s=i?-1:1;a(n,void 0,[])();function a(c,h,m){const v=c&&typeof c=="object"?c:{};if(typeof v.type=="string"){const S=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(c.type+(S?"<"+S+">":""))+")"})}return x;function x(){let S=Foe,B,R,F;if((!e||o(c,h,m[m.length-1]||void 0))&&(S=R7e(t(c,m)),S[0]===rQ))return S;if("children"in c&&c.children){const j=c;if(j.children&&S[0]!==k7e)for(R=(i?j.children.length:-1)+s,F=m.concat(j);R>-1&&R<j.children.length;){const W=j.children[R];if(B=a(W,R,F)(),B[0]===rQ)return B;R=typeof B[1]=="number"?B[1]:R+s}}return S}}}function R7e(n){return Array.isArray(n)?n:typeof n=="number"?[I7e,n]:n==null?Foe:[n]}function zoe(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),T7e(n,o,a,r);function a(c,h){const m=h[h.length-1],v=m?m.children.indexOf(c):void 0;return s(c,v,m)}}const ID={}.hasOwnProperty,D7e={};function P7e(n,e){const t=e||D7e,i=new Map,r=new Map,o=new Map,s={...g7e,...t.handlers},a={all:h,applyData:L7e,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:U7e,wrap:F7e};return zoe(n,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const v=m.type==="definition"?i:r,x=String(m.identifier).toUpperCase();v.has(x)||v.set(x,m)}}),a;function c(m,v){const x=m.type,S=a.handlers[x];if(ID.call(a.handlers,x)&&S)return S(a,m,v);if(a.options.passThrough&&a.options.passThrough.includes(x)){if("children"in m){const{children:R,...F}=m,j=eE(F);return j.children=a.all(m),j}return eE(m)}return(a.options.unknownHandler||K7e)(a,m,v)}function h(m){const v=[];if("children"in m){const x=m.children;let S=-1;for(;++S<x.length;){const B=a.one(x[S],m);if(B){if(S&&x[S-1].type==="break"&&(!Array.isArray(B)&&B.type==="text"&&(B.value=oQ(B.value)),!Array.isArray(B)&&B.type==="element")){const R=B.children[0];R&&R.type==="text"&&(R.value=oQ(R.value))}Array.isArray(B)?v.push(...B):v.push(B)}}}return v}}function U7e(n,e){n.position&&(e.position=vOe(n))}function L7e(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,eE(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function K7e(n,e){const t=e.data||{},i="value"in e&&!(ID.call(t,"hProperties")||ID.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function F7e(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function oQ(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function sQ(n,e){const t=P7e(n,e),i=t.one(n,void 0),r=M7e(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function z7e(n,e){return n&&"run"in n?async function(t,i){const r=sQ(t,{file:i,...e});await n.run(r,i)}:function(t,i){return sQ(t,{file:i,...n||e})}}function aQ(n){if(n)throw n}var v8,lQ;function j7e(){if(lQ)return v8;lQ=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},o=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=n.call(h,"constructor"),v=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!v)return!1;var x;for(x in h);return typeof x>"u"||n.call(h,x)},s=function(h,m){t&&m.name==="__proto__"?t(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},a=function(h,m){if(m==="__proto__")if(n.call(h,m)){if(i)return i(h,m).value}else return;return h[m]};return v8=function c(){var h,m,v,x,S,B,R=arguments[0],F=1,j=arguments.length,W=!1;for(typeof R=="boolean"&&(W=R,R=arguments[1]||{},F=2),(R==null||typeof R!="object"&&typeof R!="function")&&(R={});F<j;++F)if(h=arguments[F],h!=null)for(m in h)v=a(R,m),x=a(h,m),R!==x&&(W&&x&&(o(x)||(S=r(x)))?(S?(S=!1,B=v&&r(v)?v:[]):B=v&&o(v)?v:{},s(R,{name:m,newValue:c(W,B,x)})):typeof x<"u"&&s(R,{name:m,newValue:x}));return R},v8}var N7e=j7e();const b8=eu(N7e);function kD(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function G7e(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...h){const m=n[++o];let v=-1;if(c){s(c);return}for(;++v<r.length;)(h[v]===null||h[v]===void 0)&&(h[v]=r[v]);r=h,m?W7e(m,a)(...h):s(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function W7e(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(h){const m=h;if(a&&t)throw m;return r(m)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const Eg={basename:Q7e,dirname:q7e,extname:Y7e,join:$7e,sep:"/"};function Q7e(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');I5(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function q7e(n){if(I5(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function Y7e(n){I5(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function $7e(...n){let e=-1,t;for(;++e<n.length;)I5(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":V7e(t)}function V7e(n){I5(n);const e=n.codePointAt(0)===47;let t=H7e(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function H7e(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function I5(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const Z7e={cwd:X7e};function X7e(){return"/"}function TD(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function J7e(n){if(typeof n=="string")n=new URL(n);else if(!TD(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return eIe(n)}function eIe(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const C8=["history","path","basename","stem","extname","dirname"];class joe{constructor(e){let t;e?TD(e)?t={path:e}:typeof e=="string"||tIe(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":Z7e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<C8.length;){const o=C8[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)C8.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?Eg.basename(this.path):void 0}set basename(e){x8(e,"basename"),_8(e,"basename"),this.path=Eg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Eg.dirname(this.path):void 0}set dirname(e){uQ(this.basename,"dirname"),this.path=Eg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Eg.extname(this.path):void 0}set extname(e){if(_8(e,"extname"),uQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Eg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){TD(e)&&(e=J7e(e)),x8(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Eg.basename(this.path,this.extname):void 0}set stem(e){x8(e,"stem"),_8(e,"stem"),this.path=Eg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new HA(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function _8(n,e){if(n&&n.includes(Eg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Eg.sep+"`")}function x8(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function uQ(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function tIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const nIe=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),iIe={}.hasOwnProperty;class WL extends nIe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=G7e()}copy(){const e=new WL;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(b8(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(S8("data",this.frozen),this.namespace[e]=t,this):iIe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(S8("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=jM(e),i=this.parser||this.Parser;return M8("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),M8("process",this.parser||this.Parser),w8("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=jM(e),c=i.parse(a);i.run(c,a,function(m,v,x){if(m||!v||!x)return h(m);const S=v,B=i.stringify(S,x);sIe(B)?x.value=B:x.result=B,h(m,x)});function h(m,v){m||!v?s(m):o?o(v):t(void 0,v)}}}processSync(e){let t=!1,i;return this.freeze(),M8("processSync",this.parser||this.Parser),w8("processSync",this.compiler||this.Compiler),this.process(e,r),AQ("processSync","process",t),i;function r(o,s){t=!0,aQ(o),i=s}}run(e,t,i){cQ(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=jM(t);r.run(e,c,h);function h(m,v,x){const S=v||e;m?a(m):s?s(S):i(void 0,S,x)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),AQ("runSync","run",i),r;function o(s,a){aQ(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=jM(t),r=this.compiler||this.Compiler;return w8("stringify",r),cQ(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(S8("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...v]=h;c(m,v)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(r.settings=b8(!0,r.settings,h.settings))}function a(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const v=h[m];o(v)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,m){let v=-1,x=-1;for(;++v<i.length;)if(i[v][0]===h){x=v;break}if(x===-1)i.push([h,...m]);else if(m.length>0){let[S,...B]=m;const R=i[x][1];kD(R)&&kD(S)&&(S=b8(!0,R,S)),i[x]=[h,S,...B]}}}}const rIe=new WL().freeze();function M8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function w8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function S8(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function cQ(n){if(!kD(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function AQ(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function jM(n){return oIe(n)?n:new joe(n)}function oIe(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function sIe(n){return typeof n=="string"||aIe(n)}function aIe(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const lIe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",hQ=[],dQ={allowDangerousHtml:!0},uIe=/^(https?|ircs?|mailto|xmpp)$/i,cIe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function AIe(n){const e=hIe(n),t=dIe(n);return fIe(e.runSync(e.parse(t),t),n)}function hIe(n){const e=n.rehypePlugins||hQ,t=n.remarkPlugins||hQ,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...dQ}:dQ;return rIe().use(Q8e).use(t).use(z7e,i).use(e)}function dIe(n){const e=n.children||"",t=new joe;return typeof e=="string"&&(t.value=e),t}function fIe(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||pIe;for(const m of cIe)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+lIe+m.id,void 0);return zoe(n,h),MOe(n,{Fragment:te.Fragment,components:r,ignoreInvalidStyle:!0,jsx:te.jsx,jsxs:te.jsxs,passKeys:!0,passNode:!0});function h(m,v,x){if(m.type==="raw"&&x&&typeof v=="number")return s?x.children.splice(v,1):x.children[v]={type:"text",value:m.value},v;if(m.type==="element"){let S;for(S in m8)if(Object.hasOwn(m8,S)&&Object.hasOwn(m.properties,S)){const B=m.properties[S],R=m8[S];(R===null||R.includes(m.tagName))&&(m.properties[S]=c(String(B||""),S,m))}}if(m.type==="element"){let S=t?!t.includes(m.tagName):o?o.includes(m.tagName):!1;if(!S&&i&&typeof v=="number"&&(S=!i(m,v,x)),S&&x&&typeof v=="number")return a&&m.children?x.children.splice(v,1,...m.children):x.children.splice(v,1),v}}}function pIe(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||uIe.test(n.slice(0,e))?n:""}function no(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return no=function(){return s},s}no();const fQ=(no().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class I6 extends On.Component{render(){no().f[0]++;const{fieldSpec:e}=(no().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(no().s[2]++,e),s=(no().s[3]++,e["sdk-support"]),a=(no().s[4]++,no().b[0][0]++,!!i&&(no().b[0][1]++,!Array.isArray(i)));no().s[5]++;const c=h=>{no().f[1]++;const m=(no().s[6]++,h.toLowerCase());return no().s[7]++,m.startsWith("https://")?(no().b[1][0]++,no().s[8]++,te.jsx("a",{href:m,target:"_blank",rel:"noreferrer",children:"#"+m.split("/").pop()})):(no().b[1][1]++,no().s[9]++,h)};return no().s[10]++,te.jsxs(te.Fragment,{children:[(no().b[2][0]++,t&&(no().b[2][1]++,te.jsxs("div",{className:"SpecDoc",children:[te.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:te.jsx(AIe,{components:{a:({node:h,href:m,children:v,...x})=>(no().f[2]++,no().s[11]++,te.jsx("a",{href:m,target:"_blank",...x,children:v}))},children:t})}),(no().b[3][0]++,a&&(no().b[3][1]++,te.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([h,m])=>(no().f[3]++,no().s[12]++,te.jsxs("li",{children:[te.jsx("code",{children:JSON.stringify(h)}),te.jsx("div",{children:m.doc})]},h)))})))]}))),(no().b[4][0]++,s&&(no().b[4][1]++,te.jsx("div",{className:"SpecDoc__sdk-support",children:te.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{}),Object.values(fQ).map(h=>(no().f[4]++,no().s[13]++,te.jsx("th",{children:h},h)))]})}),te.jsx("tbody",{children:Object.entries(s).map(([h,m])=>(no().f[5]++,no().s[14]++,te.jsxs("tr",{children:[te.jsx("td",{children:h}),Object.keys(fQ).map(v=>(no().f[6]++,no().s[15]++,Object.prototype.hasOwnProperty.call(m,v)?(no().b[5][0]++,no().s[16]++,te.jsx("td",{children:c(m[v])},v)):(no().b[5][1]++,no().s[17]++,te.jsx("td",{children:"no"},v))))]},h)))})]})}))),(no().b[6][0]++,r&&(no().b[6][1]++,o)&&(no().b[6][2]++,te.jsx("div",{className:"SpecDoc__learn-more",children:te.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Zr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zr=function(){return s},s}Zr();class Ps extends On.Component{_blockEl=(Zr().s[0]++,null);constructor(e){Zr().f[0]++,Zr().s[1]++,super(e),Zr().s[2]++,this.state={showDoc:!1}}onChange(e){Zr().f[1]++;const t=(Zr().s[3]++,e.target.value);if(Zr().s[4]++,this.props.onChange)return Zr().b[0][0]++,Zr().s[5]++,this.props.onChange(t===""?(Zr().b[1][0]++,void 0):(Zr().b[1][1]++,t));Zr().b[0][1]++}onToggleDoc=(Zr().s[6]++,e=>{Zr().f[2]++,Zr().s[7]++,this.setState({showDoc:e})});onLabelClick=(Zr().s[8]++,e=>{Zr().f[3]++;const t=(Zr().s[9]++,e.nativeEvent.target),i=(Zr().s[10]++,this._blockEl?.contains(t));Zr().s[11]++,Zr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Zr().b[3][1]++,!i)?(Zr().b[2][0]++,Zr().s[12]++,e.stopPropagation()):Zr().b[2][1]++,Zr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Zr().b[4][0]++,Zr().s[14]++,e.preventDefault()):Zr().b[4][1]++});render(){return Zr().f[4]++,Zr().s[15]++,te.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:c0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Zr().b[5][0]++,this.props.fieldSpec&&(Zr().b[5][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(IL,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Zr().b[6][0]++,!this.props.fieldSpec&&(Zr().b[6][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),te.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Zr().f[5]++,Zr().s[16]++,this._blockEl=e},children:this.props.children}),(Zr().b[7][0]++,this.props.fieldSpec&&(Zr().b[7][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Zr().b[8][0]++,""):(Zr().b[8][1]++,"none")},children:te.jsx(I6,{fieldSpec:this.props.fieldSpec})})))]})}}function hA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hA=function(){return s},s}hA();class oC extends On.Component{render(){hA().f[0]++;let e=(hA().s[0]++,this.props.options);return hA().s[1]++,hA().b[1][0]++,e.length>0&&(hA().b[1][1]++,!Array.isArray(e[0]))?(hA().b[0][0]++,hA().s[2]++,e=e.map(t=>(hA().f[1]++,hA().s[3]++,[t,t]))):hA().b[0][1]++,hA().s[4]++,te.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(hA().f[2]++,hA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(hA().f[3]++,hA().s[6]++,te.jsx("option",{value:t,children:i},t)))})}}function ar(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ar=function(){return s},s}ar();class xm extends On.Component{static defaultProps=(ar().s[0]++,{onInput:()=>{ar().f[0]++}});constructor(e){ar().f[1]++,ar().s[1]++,super(e),ar().s[2]++,this.state={editing:!1,value:(ar().b[0][0]++,e.value||(ar().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(ar().f[2]++,ar().s[3]++,t.editing)ar().b[1][1]++;else return ar().b[1][0]++,ar().s[4]++,{value:e.value};return ar().s[5]++,{}}render(){ar().f[3]++;let e,t;return ar().s[6]++,this.props.multi?(ar().b[2][0]++,ar().s[7]++,e="textarea",ar().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(ar().b[2][1]++,ar().s[9]++,e="input",ar().s[10]++,t=["maputnik-string"]),ar().s[11]++,this.props.disabled?(ar().b[3][0]++,ar().s[12]++,t.push("maputnik-string--disabled")):ar().b[3][1]++,ar().s[13]++,On.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(ar().b[4][0]++,this.props.spellCheck):(ar().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(ar().b[5][0]++,""):(ar().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{ar().f[4]++,ar().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{ar().f[5]++,ar().s[15]++,this.props.onInput?(ar().b[6][0]++,ar().s[16]++,this.props.onInput(this.state.value)):ar().b[6][1]++})},onBlur:()=>{ar().f[6]++,ar().s[17]++,this.state.value!==this.props.value?(ar().b[7][0]++,ar().s[18]++,this.setState({editing:!1}),ar().s[19]++,this.props.onChange?(ar().b[8][0]++,ar().s[20]++,this.props.onChange(this.state.value)):ar().b[8][1]++):ar().b[7][1]++},onKeyDown:i=>{ar().f[7]++,ar().s[21]++,ar().b[10][0]++,i.keyCode===13&&(ar().b[10][1]++,this.props.onChange)?(ar().b[9][0]++,ar().s[22]++,this.props.onChange(this.state.value)):ar().b[9][1]++},required:this.props.required})}}function GA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return GA=function(){return s},s}GA();GA().s[0]++;const mIe=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(GA().b[0][0]++,!1)})=>{GA().f[0]++;const s=(GA().s[1]++,Object.keys((GA().b[1][0]++,up.layer.type.values||(GA().b[1][1]++,{}))).map(a=>(GA().f[1]++,GA().s[2]++,[a,q4.startCase(a.replace(/-/g," "))])));return GA().s[3]++,te.jsxs(Ps,{label:n("Type"),fieldSpec:up.layer.type,"data-wd-key":t,error:r,children:[(GA().b[2][0]++,o&&(GA().b[2][1]++,te.jsx(xm,{value:e,disabled:!0}))),(GA().b[3][0]++,!o&&(GA().b[3][1]++,te.jsx(oC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},Noe=(GA().s[4]++,No()(mIe));function k4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return k4=function(){return s},s}k4();k4().s[0]++;const Goe=n=>(k4().f[0]++,k4().s[1]++,te.jsx(Ps,{label:"ID",fieldSpec:Xr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:te.jsx(xm,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function NM(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Ol(){return Ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ol.apply(null,arguments)}var gIe=b1();const mr=eu(gIe);var E8={exports:{}},$s={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pQ;function yIe(){if(pQ)return $s;pQ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),B;B=Symbol.for("react.module.reference");function R(F){if(typeof F=="object"&&F!==null){var j=F.$$typeof;switch(j){case n:switch(F=F.type,F){case t:case r:case i:case h:case m:return F;default:switch(F=F&&F.$$typeof,F){case a:case s:case c:case x:case v:case o:return F;default:return j}}case e:return j}}}return $s.ContextConsumer=s,$s.ContextProvider=o,$s.Element=n,$s.ForwardRef=c,$s.Fragment=t,$s.Lazy=x,$s.Memo=v,$s.Portal=e,$s.Profiler=r,$s.StrictMode=i,$s.Suspense=h,$s.SuspenseList=m,$s.isAsyncMode=function(){return!1},$s.isConcurrentMode=function(){return!1},$s.isContextConsumer=function(F){return R(F)===s},$s.isContextProvider=function(F){return R(F)===o},$s.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===n},$s.isForwardRef=function(F){return R(F)===c},$s.isFragment=function(F){return R(F)===t},$s.isLazy=function(F){return R(F)===x},$s.isMemo=function(F){return R(F)===v},$s.isPortal=function(F){return R(F)===e},$s.isProfiler=function(F){return R(F)===r},$s.isStrictMode=function(F){return R(F)===i},$s.isSuspense=function(F){return R(F)===h},$s.isSuspenseList=function(F){return R(F)===m},$s.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===t||F===r||F===i||F===h||F===m||F===S||typeof F=="object"&&F!==null&&(F.$$typeof===x||F.$$typeof===v||F.$$typeof===o||F.$$typeof===s||F.$$typeof===c||F.$$typeof===B||F.getModuleId!==void 0)},$s.typeOf=R,$s}var mQ;function vIe(){return mQ||(mQ=1,E8.exports=yIe()),E8.exports}vIe();const gQ=n=>typeof n=="object"&&n!=null&&n.nodeType===1,yQ=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",GM=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return yQ(t.overflowY,e)||yQ(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},WM=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,bIe=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},CIe=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,h=typeof a=="function"?a:Ee=>Ee!==a;if(!gQ(n))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,v=[];let x=n;for(;gQ(x)&&h(x);){if(x=bIe(x),x===m){v.push(x);break}x!=null&&x===document.body&&GM(x)&&!GM(document.documentElement)||x!=null&&GM(x,c)&&v.push(x)}const S=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,B=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:R,scrollY:F}=window,{height:j,width:W,top:H,right:$,bottom:N,left:Y}=n.getBoundingClientRect(),{top:z,right:ne,left:ae}=(Ee=>{const Te=window.getComputedStyle(Ee);return{top:parseFloat(Te.scrollMarginTop)||0,right:parseFloat(Te.scrollMarginRight)||0,bottom:parseFloat(Te.scrollMarginBottom)||0,left:parseFloat(Te.scrollMarginLeft)||0}})(n);let ve=H-z,pe=s==="center"?Y+W/2-ae+ne:s==="end"?$+ne:Y-ae;const be=[];for(let Ee=0;Ee<v.length;Ee++){const Te=v[Ee],{height:je,width:Re,top:qe,right:nt,bottom:ht,left:ke}=Te.getBoundingClientRect();if(H>=0&&Y>=0&&N<=B&&$<=S&&(Te===m&&!GM(Te)||H>=qe&&N<=ht&&Y>=ke&&$<=nt))return be;const Oe=getComputedStyle(Te),ze=parseInt(Oe.borderLeftWidth,10),we=parseInt(Oe.borderTopWidth,10),At=parseInt(Oe.borderRightWidth,10),it=parseInt(Oe.borderBottomWidth,10);let Ct=0,It=0;const Ke="offsetWidth"in Te?Te.offsetWidth-Te.clientWidth-ze-At:0,Ie="offsetHeight"in Te?Te.offsetHeight-Te.clientHeight-we-it:0,Se="offsetWidth"in Te?Te.offsetWidth===0?0:Re/Te.offsetWidth:0,Ge="offsetHeight"in Te?Te.offsetHeight===0?0:je/Te.offsetHeight:0;if(m===Te)Ct=WM(F,F+B,B,we,it,F+ve,F+ve+j,j),It=s==="start"?pe:s==="center"?pe-S/2:s==="end"?pe-S:WM(R,R+S,S,ze,At,R+pe,R+pe+W,W),Ct=Math.max(0,Ct+F),It=Math.max(0,It+R);else{Ct=WM(qe,ht,je,we,it+Ie,ve,ve+j,j),It=s==="start"?pe-ke-ze:s==="center"?pe-(ke+Re/2)+Ke/2:s==="end"?pe-nt+At+Ke:WM(ke,nt,Re,ze,At+Ke,pe,pe+W,W);const{scrollLeft:st,scrollTop:ut}=Te;Ct=Ge===0?0:Math.max(0,Math.min(ut+Ct/Ge,Te.scrollHeight-je/Ge+Ie)),It=Se===0?0:Math.max(0,Math.min(st+It/Se,Te.scrollWidth-Re/Se+Ke)),ve+=ut-Ct,pe+=st-It}be.push({el:Te,top:Ct,left:It})}return be};var Ex=function(){return Ex=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ex.apply(this,arguments)};var _Ie=0;function Woe(){}function xIe(n,e){if(n){var t=CIe(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function vQ(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function Qoe(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function Y0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function QM(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function MIe(){return String(_Ie++)}function RD(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=qoe(e,i)?e[i]:n[i],t},{})}function qoe(n,e){return n[e]!==void 0}function wIe(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function qM(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=tE(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function tE(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?tE(e?o-1:0,e,t,i):-1}function bQ(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(vQ(r,n,t)||i&&vQ(r,t.document.activeElement,t))})}var SIe=Qoe(function(n){Yoe(n).textContent=""},500);function Yoe(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function EIe(n,e){if(!(!n||!e)){var t=Yoe(e);t.textContent=n,SIe(e)}}function OIe(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var $oe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function BIe(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){IIe(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(Ol({type:r},o))}function IIe(n,e,t,i){var r=e.props,o=e.type,s="on"+QL(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](Ol({type:o},i))}function kIe(n,e){return e.changes}var CQ=Qoe(function(n,e){EIe(n,e)},200),TIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?wt.useLayoutEffect:wt.useEffect,RIe="useId"in On?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+On.useId();t||(t=c);var h=wt.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(m){return t+"-item-"+m},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"});return h.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+MIe():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,h=wt.useRef({labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(m){return i+"-item-"+m},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"});return h.current};function DIe(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function QL(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function Voe(n){var e=wt.useRef(n);return e.current=n,e}function PIe(n,e,t,i){var r=wt.useRef(),o=wt.useRef(),s=wt.useCallback(function(S,B){o.current=B,S=RD(S,B.props);var R=n(S,B),F=B.props.stateReducer(S,Ol({},B,{changes:R}));return F},[n]),a=wt.useReducer(s,e,t),c=a[0],h=a[1],m=Voe(e),v=wt.useCallback(function(S){return h(Ol({props:m.current},S))},[m]),x=o.current;return wt.useEffect(function(){var S=RD(r.current,x?.props),B=x&&r.current&&!i(S,c);B&&BIe(x,S,c),r.current=c},[c,x,i]),[c,v]}var I3={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:kIe,scrollIntoView:xIe,environment:typeof window>"u"?void 0:window};function tv(n,e,t){t===void 0&&(t=$oe);var i=n["default"+QL(e)];return i!==void 0?i:t[e]}function k3(n,e,t){t===void 0&&(t=$oe);var i=n[e];if(i!==void 0)return i;var r=n["initial"+QL(e)];return r!==void 0?r:tv(n,e,t)}function UIe(n){var e=k3(n,"selectedItem"),t=k3(n,"isOpen"),i=NIe(n),r=k3(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function T3(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,h=e.highlightedIndex;return i.length===0?-1:r!==void 0&&h===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(m){return a(c)===a(m)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function LIe(n,e,t){var i=wt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return wt.useEffect(function(){if(!n)return Woe;var r=t.map(function(m){return m.current});function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(m){i.current.isMouseDown=!1,bQ(m.target,r,n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function h(m){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!bQ(m.target,r,n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",h),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",h)}},[t,n,e]),i.current}var KIe=function(){return Woe};function FIe(n,e,t,i){i===void 0&&(i={});var r=i.document,o=qL();wt.useEffect(function(){if(!(!n||o||!r)){var s=n(e);CQ(s,r)}},t),wt.useEffect(function(){return function(){CQ.cancel(),OIe(r)}},[r])}function zIe(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=wt.useRef(!0);return TIe(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function _Q(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return Ol({isOpen:!1,highlightedIndex:-1},r&&Ol({selectedItem:n.items[e],isOpen:tv(n,"isOpen"),highlightedIndex:tv(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function jIe(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function qL(){var n=On.useRef(!0);return On.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function DD(n){var e=tv(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function NIe(n){var e=k3(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var Ow={environment:mr.shape({addEventListener:mr.func.isRequired,removeEventListener:mr.func.isRequired,document:mr.shape({createElement:mr.func.isRequired,getElementById:mr.func.isRequired,activeElement:mr.any.isRequired,body:mr.any.isRequired}).isRequired,Node:mr.func.isRequired}),itemToString:mr.func,itemToKey:mr.func,stateReducer:mr.func},Hoe=Ol({},Ow,{getA11yStatusMessage:mr.func,highlightedIndex:mr.number,defaultHighlightedIndex:mr.number,initialHighlightedIndex:mr.number,isOpen:mr.bool,defaultIsOpen:mr.bool,initialIsOpen:mr.bool,selectedItem:mr.any,initialSelectedItem:mr.any,defaultSelectedItem:mr.any,id:mr.string,labelId:mr.string,menuId:mr.string,getItemId:mr.func,toggleButtonId:mr.string,onSelectedItemChange:mr.func,onHighlightedIndexChange:mr.func,onStateChange:mr.func,onIsOpenChange:mr.func,scrollIntoView:mr.func});function GIe(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:T3(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:T3(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:DD(r),isOpen:tv(r,"isOpen"),selectedItem:tv(r,"selectedItem"),inputValue:tv(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Ol({},n,o)}Ex(Ex({},Hoe),{items:mr.array.isRequired,isItemDisabled:mr.func});Ex(Ex({},I3),{isItemDisabled:function(){return!1}});var YL=0,$L=1,VL=2,HL=3,ZL=4,XL=5,JL=6,eK=7,tK=8,nE=9,nK=10,Zoe=11,Xoe=12,iK=13,Joe=14,ese=15,tse=16,nse=17,ise=18,rK=19,rse=20,ose=21,oK=22,sse=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:oK,FunctionCloseMenu:nse,FunctionOpenMenu:tse,FunctionReset:ose,FunctionSelectItem:rK,FunctionSetHighlightedIndex:ise,FunctionSetInputValue:rse,FunctionToggleMenu:ese,InputBlur:nE,InputChange:tK,InputClick:nK,InputKeyDownArrowDown:YL,InputKeyDownArrowUp:$L,InputKeyDownEnd:ZL,InputKeyDownEnter:eK,InputKeyDownEscape:VL,InputKeyDownHome:HL,InputKeyDownPageDown:JL,InputKeyDownPageUp:XL,ItemClick:iK,ItemMouseMove:Xoe,MenuMouseLeave:Zoe,ToggleButtonClick:Joe});function WIe(n){var e=UIe(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),Ol({},e,{inputValue:i})}Ol({},Hoe,{items:mr.array.isRequired,isItemDisabled:mr.func,inputValue:mr.string,defaultInputValue:mr.string,initialInputValue:mr.string,inputId:mr.string,onInputValueChange:mr.func});function QIe(n,e,t,i){var r=wt.useRef(),o=PIe(n,e,t,i),s=o[0],a=o[1],c=qL();return wt.useEffect(function(){if(qoe(e,"selectedItem")){if(!c){var h=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);h&&a({type:oK,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[RD(s,e),a]}var qIe=Ol({},I3,{isItemDisabled:function(){return!1}});function YIe(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case iK:s={isOpen:tv(r,"isOpen"),highlightedIndex:DD(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case YL:n.isOpen?s={highlightedIndex:qM(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:T3(r,n,1),isOpen:r.items.length>=0};break;case $L:n.isOpen?o?s=_Q(r,n.highlightedIndex):s={highlightedIndex:qM(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:T3(r,n,-1),isOpen:r.items.length>=0};break;case eK:s=_Q(r,n.highlightedIndex);break;case VL:s=Ol({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case XL:s={highlightedIndex:qM(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case JL:s={highlightedIndex:qM(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case HL:s={highlightedIndex:tE(0,!1,r.items,r.isItemDisabled)};break;case ZL:s={highlightedIndex:tE(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case nE:s=Ol({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case tK:s={isOpen:!0,highlightedIndex:DD(r),inputValue:e.inputValue};break;case nK:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:T3(r,n,0)};break;case rK:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case oK:s={inputValue:e.inputValue};break;default:return GIe(n,e,sse)}return Ol({},n,s)}var $Ie=["onMouseLeave","refKey","ref"],VIe=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],HIe=["onClick","onPress","refKey","ref"],ZIe=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];PD.stateChangeTypes=sse;function PD(n){n===void 0&&(n={});var e=Ol({},qIe,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=QIe(YIe,e,WIe,jIe),a=s[0],c=s[1],h=a.isOpen,m=a.highlightedIndex,v=a.selectedItem,x=a.inputValue,S=wt.useRef(null),B=wt.useRef({}),R=wt.useRef(null),F=wt.useRef(null),j=qL(),W=RIe(e),H=wt.useRef(),$=Voe({state:a,props:e}),N=wt.useCallback(function(ze){return B.current[W.getItemId(ze)]},[W]);FIe(o,a,[h,m,v,x],r);var Y=zIe({menuElement:S.current,highlightedIndex:m,isOpen:h,itemRefs:B,scrollIntoView:i,getItemNodeFromIndex:N});wt.useEffect(function(){var ze=k3(e,"isOpen");ze&&R.current&&R.current.focus()},[]),wt.useEffect(function(){j||(H.current=t.length)});var z=LIe(r,wt.useCallback(function(){$.current.state.isOpen&&c({type:nE,selectItem:!1})},[c,$]),wt.useMemo(function(){return[S,F,R]},[S.current,F.current,R.current])),ne=KIe();wt.useEffect(function(){h||(B.current={})},[h]),wt.useEffect(function(){var ze;!h||!(r!=null&&r.document)||!(R!=null&&(ze=R.current)!=null&&ze.focus)||r.document.activeElement!==R.current&&R.current.focus()},[h,r]);var ae=wt.useMemo(function(){return{ArrowDown:function(we){we.preventDefault(),c({type:YL,altKey:we.altKey})},ArrowUp:function(we){we.preventDefault(),c({type:$L,altKey:we.altKey})},Home:function(we){$.current.state.isOpen&&(we.preventDefault(),c({type:HL}))},End:function(we){$.current.state.isOpen&&(we.preventDefault(),c({type:ZL}))},Escape:function(we){var At=$.current.state;(At.isOpen||At.inputValue||At.selectedItem||At.highlightedIndex>-1)&&(we.preventDefault(),c({type:VL}))},Enter:function(we){var At=$.current.state;!At.isOpen||we.which===229||(we.preventDefault(),c({type:eK}))},PageUp:function(we){$.current.state.isOpen&&(we.preventDefault(),c({type:XL}))},PageDown:function(we){$.current.state.isOpen&&(we.preventDefault(),c({type:JL}))}}},[c,$]),ve=wt.useCallback(function(ze){return Ol({id:W.labelId,htmlFor:W.inputId},ze)},[W]),pe=wt.useCallback(function(ze,we){var At,it=ze===void 0?{}:ze,Ct=it.onMouseLeave,It=it.refKey,Ke=It===void 0?"ref":It,Ie=it.ref,Se=NM(it,$Ie),Ge=we===void 0?{}:we;return Ge.suppressRefError,Ol((At={},At[Ke]=QM(Ie,function(st){S.current=st}),At.id=W.menuId,At.role="listbox",At["aria-labelledby"]=Se&&Se["aria-label"]?void 0:""+W.labelId,At.onMouseLeave=Y0(Ct,function(){c({type:Zoe})}),At),Se)},[c,ne,W]),be=wt.useCallback(function(ze){var we,At,it=ze===void 0?{}:ze,Ct=it.item,It=it.index,Ke=it.refKey,Ie=Ke===void 0?"ref":Ke,Se=it.ref,Ge=it.onMouseMove,st=it.onMouseDown,ut=it.onClick;it.onPress;var ft=it.disabled,St=NM(it,VIe);ft!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var kt=$.current,en=kt.props,Pn=kt.state,zn=DIe(Ct,It,en.items,"Pass either item or index to getItemProps!"),si=zn[0],xn=zn[1],Rn=en.isItemDisabled(si,xn),pn="onClick",Hn=ut,Un=function(){z.isTouchEnd||xn===Pn.highlightedIndex||(Y.current=!1,c({type:Xoe,index:xn,disabled:Rn}))},Tt=function(){c({type:iK,index:xn})},Me=function(le){return le.preventDefault()};return Ol((we={},we[Ie]=QM(Se,function(oe){oe&&(B.current[W.getItemId(xn)]=oe)}),we["aria-disabled"]=Rn,we["aria-selected"]=xn===Pn.highlightedIndex,we.id=W.getItemId(xn),we.role="option",we),!Rn&&(At={},At[pn]=Y0(Hn,Tt),At),{onMouseMove:Y0(Ge,Un),onMouseDown:Y0(st,Me)},St)},[c,W,$,z,Y]),Ee=wt.useCallback(function(ze){var we,At=ze===void 0?{}:ze,it=At.onClick;At.onPress;var Ct=At.refKey,It=Ct===void 0?"ref":Ct,Ke=At.ref,Ie=NM(At,HIe),Se=$.current.state,Ge=function(){c({type:Joe})};return Ol((we={},we[It]=QM(Ke,function(st){F.current=st}),we["aria-controls"]=W.menuId,we["aria-expanded"]=Se.isOpen,we.id=W.toggleButtonId,we.tabIndex=-1,we),!Ie.disabled&&Ol({},{onClick:Y0(it,Ge)}),Ie)},[c,$,W]),Te=wt.useCallback(function(ze,we){var At,it=ze===void 0?{}:ze,Ct=it.onKeyDown,It=it.onChange,Ke=it.onInput,Ie=it.onBlur;it.onChangeText;var Se=it.onClick,Ge=it.refKey,st=Ge===void 0?"ref":Ge,ut=it.ref,ft=NM(it,ZIe),St=we===void 0?{}:we;St.suppressRefError;var kt=$.current.state,en=function(Un){var Tt=wIe(Un);Tt&&ae[Tt]&&ae[Tt](Un)},Pn=function(Un){c({type:tK,inputValue:Un.target.value})},zn=function(Un){if(r!=null&&r.document&&kt.isOpen&&!z.isMouseDown){var Tt=Un.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:nE,selectItem:!Tt})}},si=function(){c({type:nK})},xn="onChange",Rn={};if(!ft.disabled){var pn;Rn=(pn={},pn[xn]=Y0(It,Ke,Pn),pn.onKeyDown=Y0(Ct,en),pn.onBlur=Y0(Ie,zn),pn.onClick=Y0(Se,si),pn)}return Ol((At={},At[st]=QM(ut,function(Hn){R.current=Hn}),At["aria-activedescendant"]=kt.isOpen&&kt.highlightedIndex>-1?W.getItemId(kt.highlightedIndex):"",At["aria-autocomplete"]="list",At["aria-controls"]=W.menuId,At["aria-expanded"]=kt.isOpen,At["aria-labelledby"]=ft&&ft["aria-label"]?void 0:W.labelId,At.autoComplete="off",At.id=W.inputId,At.role="combobox",At.value=kt.inputValue,At),Rn,ft)},[c,W,r,ae,$,z,ne]),je=wt.useCallback(function(){c({type:ese})},[c]),Re=wt.useCallback(function(){c({type:nse})},[c]),qe=wt.useCallback(function(){c({type:tse})},[c]),nt=wt.useCallback(function(ze){c({type:ise,highlightedIndex:ze})},[c]),ht=wt.useCallback(function(ze){c({type:rK,selectedItem:ze})},[c]),ke=wt.useCallback(function(ze){c({type:rse,inputValue:ze})},[c]),Oe=wt.useCallback(function(){c({type:ose})},[c]);return{getItemProps:be,getLabelProps:ve,getMenuProps:pe,getInputProps:Te,getToggleButtonProps:Ee,toggleMenu:je,openMenu:qe,closeMenu:Re,setHighlightedIndex:nt,setInputValue:ke,selectItem:ht,reset:Oe,highlightedIndex:m,isOpen:h,selectedItem:v,inputValue:x}}Ow.stateReducer,Ow.itemToKey,Ow.environment,mr.array,mr.array,mr.array,mr.func,mr.number,mr.number,mr.number,mr.func,mr.func,mr.string,mr.string;I3.itemToKey,I3.stateReducer,I3.environment;function hi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hi=function(){return s},s}hi();const xQ=(hi().s[0]++,140);function k5({value:n,options:e=(hi().b[0][0]++,[]),onChange:t=(hi().b[1][0]++,()=>{hi().f[1]++}),"aria-label":i}){hi().f[0]++;const[r,o]=(hi().s[1]++,On.useState((hi().b[2][0]++,n||(hi().b[2][1]++,"")))),s=(hi().s[2]++,On.useRef(null)),[a,c]=(hi().s[3]++,On.useState(xQ)),h=(hi().s[4]++,On.useMemo(()=>{hi().f[2]++;const j=(hi().s[5]++,r.toLowerCase());return hi().s[6]++,e.filter(W=>(hi().f[3]++,hi().s[7]++,W[0].toLowerCase().includes(j)))},[e,r])),m=(hi().s[8]++,On.useCallback(()=>{if(hi().f[4]++,hi().s[9]++,s.current){hi().b[3][0]++;const j=(hi().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);hi().s[11]++,c(Math.min(j,xQ))}else hi().b[3][1]++},[])),{isOpen:v,getMenuProps:x,getInputProps:S,getItemProps:B,highlightedIndex:R,openMenu:F}=(hi().s[12]++,PD({items:h,inputValue:r,itemToString:j=>(hi().f[5]++,hi().s[13]++,j?(hi().b[4][0]++,j[0]):(hi().b[4][1]++,"")),stateReducer:(j,W)=>(hi().f[6]++,hi().s[14]++,W.type===PD.stateChangeTypes.InputClick?(hi().b[5][0]++,hi().s[15]++,{...W.changes,isOpen:!0}):(hi().b[5][1]++,hi().s[16]++,W.changes)),onSelectedItemChange:({selectedItem:j})=>{hi().f[7]++;const W=(hi().s[17]++,j?(hi().b[6][0]++,j[0]):(hi().b[6][1]++,""));hi().s[18]++,o(W),hi().s[19]++,t(j?(hi().b[7][0]++,j[0]):(hi().b[7][1]++,void 0))},onInputValueChange:({inputValue:j})=>{hi().f[8]++,hi().s[20]++,typeof j=="string"?(hi().b[8][0]++,hi().s[21]++,o(j),hi().s[22]++,t(j===""?(hi().b[9][0]++,void 0):(hi().b[9][1]++,j)),hi().s[23]++,F()):hi().b[8][1]++}}));return hi().s[24]++,On.useEffect(()=>{hi().f[9]++,hi().s[25]++,v?(hi().b[10][0]++,hi().s[26]++,m()):hi().b[10][1]++},[v,m]),hi().s[27]++,On.useEffect(()=>(hi().f[10]++,hi().s[28]++,window.addEventListener("resize",m),hi().s[29]++,()=>(hi().f[11]++,hi().s[30]++,window.removeEventListener("resize",m))),[m]),hi().s[31]++,On.useEffect(()=>{hi().f[12]++,hi().s[32]++,o((hi().b[11][0]++,n||(hi().b[11][1]++,"")))},[n]),hi().s[33]++,te.jsxs("div",{className:"maputnik-autocomplete",children:[te.jsx("input",{...S({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(hi().f[13]++,hi().s[34]++,F())})}),te.jsx("div",{...x({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(hi().b[12][0]++,v&&(hi().b[12][1]++,h.map((j,W)=>(hi().f[14]++,hi().s[35]++,te.jsx("div",{...B({item:j,index:W,className:c0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":R===W})}),children:j[1]},j[0])))))})]})}function om(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return om=function(){return s},s}om();om().s[0]++;const XIe=({onChange:n=(om().b[0][0]++,()=>{om().f[1]++}),sourceIds:e=(om().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(om().f[0]++,om().s[1]++,te.jsx(Ps,{label:o("Source"),fieldSpec:Xr.layer.source,error:r,"data-wd-key":t,children:te.jsx(k5,{value:i,onChange:n,options:e?.map(s=>(om().f[2]++,om().s[2]++,[s,s]))})})),ase=(om().s[3]++,No()(XIe));function sm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sm=function(){return s},s}sm();sm().s[0]++;const JIe=({onChange:n=(sm().b[0][0]++,()=>{sm().f[1]++}),sourceLayerIds:e=(sm().b[1][0]++,[]),value:t,error:i,t:r})=>(sm().f[0]++,sm().s[1]++,te.jsx(Ps,{label:r("Source Layer"),fieldSpec:ns.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:te.jsx(k5,{value:t,onChange:n,options:e?.map(o=>(sm().f[2]++,sm().s[2]++,[o,o]))})})),lse=(sm().s[3]++,No()(JIe));function sK(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sK=function(){return s},s}sK();const UD=(sK().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vn=function(){return s},s}vn();class eke extends On.Component{addLayer=(vn().s[0]++,()=>{if(vn().f[0]++,vn().s[1]++,this.props.layers.some(i=>(vn().f[1]++,vn().s[2]++,i.id===this.state.id))){vn().b[0][0]++,vn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),vn().s[4]++;return}else vn().b[0][1]++;const e=(vn().s[5]++,this.props.layers.slice(0)),t=(vn().s[6]++,{id:this.state.id,type:this.state.type});vn().s[7]++,this.state.type!=="background"?(vn().b[1][0]++,vn().s[8]++,t.source=this.state.source,vn().s[9]++,vn().b[3][0]++,!UD.includes(this.state.type)&&(vn().b[3][1]++,this.state["source-layer"])?(vn().b[2][0]++,vn().s[10]++,t["source-layer"]=this.state["source-layer"]):vn().b[2][1]++):vn().b[1][1]++,vn().s[11]++,e.push(t),vn().s[12]++,this.setState({error:null},()=>{vn().f[2]++,vn().s[13]++,this.props.onLayersChange(e),vn().s[14]++,this.props.onOpenToggle()})});constructor(e){vn().f[3]++,vn().s[15]++,super(e);const t=(vn().s[16]++,{type:"fill",id:"",error:null});if(vn().s[17]++,Object.keys(e.sources).length>0){vn().b[4][0]++,vn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(vn().s[19]++,vn().b[5][0]++,this.props.sources[t.source].layers||(vn().b[5][1]++,[]));vn().s[20]++,i.length>0?(vn().b[6][0]++,vn().s[21]++,t["source-layer"]=i[0]):vn().b[6][1]++}else vn().b[4][1]++;vn().s[22]++,this.state=t}componentDidUpdate(e,t){vn().f[4]++;const i=(vn().s[23]++,t.type),r=(vn().s[24]++,this.state.type),o=(vn().s[25]++,this.getSources(i)),s=(vn().s[26]++,this.getSources(r));vn().s[27]++,vn().b[8][0]++,i!==r&&(vn().b[8][1]++,t.source!=="")&&(vn().b[8][2]++,o.indexOf(t.source)>-1)&&(vn().b[8][3]++,s.indexOf(this.state.source)<0)?(vn().b[7][0]++,vn().s[28]++,this.setState({source:""})):vn().b[7][1]++}getLayersForSource(e){vn().f[5]++;const t=(vn().s[29]++,vn().b[9][0]++,this.props.sources[e]||(vn().b[9][1]++,{}));return vn().s[30]++,vn().b[10][0]++,t.layers||(vn().b[10][1]++,[])}getSources(e){switch(vn().f[6]++,vn().s[31]++,e){case"background":return vn().b[11][0]++,vn().s[32]++,[];case"hillshade":vn().b[11][1]++;case"color-relief":return vn().b[11][2]++,vn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(vn().f[7]++,vn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(vn().f[8]++,vn().s[35]++,t));case"raster":return vn().b[11][3]++,vn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(vn().f[9]++,vn().s[37]++,i.type==="raster")).map(([t,i])=>(vn().f[10]++,vn().s[38]++,t));case"heatmap":vn().b[11][4]++;case"circle":vn().b[11][5]++;case"fill":vn().b[11][6]++;case"fill-extrusion":vn().b[11][7]++;case"line":vn().b[11][8]++;case"symbol":return vn().b[11][9]++,vn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(vn().f[11]++,vn().s[40]++,vn().b[12][0]++,i.type==="vector"||(vn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(vn().f[12]++,vn().s[41]++,t));default:return vn().b[11][10]++,vn().s[42]++,[]}}render(){vn().f[13]++;const e=(vn().s[43]++,this.props.t),t=(vn().s[44]++,this.getSources(this.state.type)),i=(vn().s[45]++,this.getLayersForSource(this.state.source));let r;return vn().s[46]++,this.state.error?(vn().b[13][0]++,vn().s[47]++,r=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(vn().f[14]++,vn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):vn().b[13][1]++,vn().s[49]++,te.jsxs(C1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,te.jsxs("div",{className:"maputnik-add-layer",children:[te.jsx(Goe,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{vn().f[15]++,vn().s[50]++,this.setState({id:o,error:null})}}),te.jsx(Noe,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(vn().f[16]++,vn().s[51]++,this.setState({type:o}))}),(vn().b[14][0]++,this.state.type!=="background"&&(vn().b[14][1]++,te.jsx(ase,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(vn().f[17]++,vn().s[52]++,this.setState({source:o}))}))),(vn().b[15][0]++,!UD.includes(this.state.type)&&(vn().b[15][1]++,te.jsx(lse,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(vn().f[18]++,vn().s[53]++,this.setState({"source-layer":o}))}))),te.jsx(Zs,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const tke=(vn().s[54]++,No()(eke));function Cb(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cb=function(){return s},s}Cb();let MQ=(Cb().s[0]++,0);function Ox(n=(Cb().b[0][0]++,"")){return Cb().f[0]++,Cb().s[1]++,MQ++,Cb().s[2]++,n+MQ}function Ar(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ar=function(){return s},s}Ar();function nke(n,e){Ar().f[0]++;const t=(Ar().s[0]++,{...n.paint});Ar().s[1]++,Object.keys(t).forEach(r=>{Ar().f[1]++,Ar().s[2]++,r in ns["paint_"+e]?Ar().b[0][1]++:(Ar().b[0][0]++,Ar().s[3]++,delete t[r])});const i=(Ar().s[4]++,{...n.layout});return Ar().s[5]++,Object.keys(i).forEach(r=>{Ar().f[2]++,Ar().s[6]++,r in ns["layout_"+e]?Ar().b[1][1]++:(Ar().b[1][0]++,Ar().s[7]++,delete i[r])}),Ar().s[8]++,{...n,paint:t,layout:i,type:e}}function ike(n,e,t,i){if(Ar().f[3]++,Ar().s[9]++,i===void 0)if(Ar().b[2][0]++,Ar().s[10]++,e){Ar().b[3][0]++;const r=(Ar().s[11]++,{...n,[e]:{...n[e]}});return Ar().s[12]++,delete r[e][t],Ar().s[13]++,Object.keys(r[e]).length<1?(Ar().b[4][0]++,Ar().s[14]++,delete r[e]):Ar().b[4][1]++,Ar().s[15]++,r}else{Ar().b[3][1]++;const r=(Ar().s[16]++,{...n});return Ar().s[17]++,delete r[t],Ar().s[18]++,r}else return Ar().b[2][1]++,Ar().s[19]++,e?(Ar().b[5][0]++,Ar().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(Ar().b[5][1]++,Ar().s[21]++,{...n,[t]:i})}function D_(n){return Ar().f[4]++,Ar().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function rke(n,e){Ar().f[5]++;const t=(Ar().s[23]++,D_(n[e].id));let i=(Ar().s[24]++,e);Ar().s[25]++;for(let r=(Ar().s[26]++,e);r>0;r--){const o=(Ar().s[27]++,D_(n[r-1].id));if(Ar().s[28]++,o===t)Ar().b[6][0]++,Ar().s[29]++,i=r-1;else return Ar().b[6][1]++,Ar().s[30]++,i}return Ar().s[31]++,i}function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="f68294db07afb93676beed55b7a9de47e3a7c779",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f68294db07afb93676beed55b7a9de47e3a7c779"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ft=function(){return s},s}Ft();class oke extends On.Component{static defaultProps=(Ft().s[0]++,{onLayerSelect:()=>{Ft().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){Ft().f[1]++,Ft().s[1]++,super(e),Ft().s[2]++,this.selectedItemRef=On.createRef(),Ft().s[3]++,this.scrollContainerRef=On.createRef(),Ft().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ox()},isOpen:{add:!1}}}toggleModal(e){Ft().f[2]++,Ft().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Ox()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(Ft().s[6]++,()=>{Ft().f[3]++;let e=(Ft().s[7]++,0);const t=(Ft().s[8]++,{});Ft().s[9]++,this.groupedLayers().forEach(i=>{Ft().f[4]++;const r=(Ft().s[10]++,D_(i[0].id)),o=(Ft().s[11]++,[r,e].join("-"));Ft().s[12]++,i.length>1?(Ft().b[0][0]++,Ft().s[13]++,t[o]=this.state.areAllGroupsExpanded):Ft().b[0][1]++,Ft().s[14]++,i.forEach(s=>{Ft().f[5]++,Ft().s[15]++,e+=1})}),Ft().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){Ft().f[6]++;const e=(Ft().s[17]++,[]),t=(Ft().s[18]++,new Map);Ft().s[19]++;for(let i=(Ft().s[20]++,0);i<this.props.layers.length;i++){const r=(Ft().s[21]++,this.props.layers[i]),o=(Ft().s[22]++,this.props.layers[i-1]);Ft().s[23]++,t.set(r.id,t.has(r.id)?(Ft().b[1][0]++,t.get(r.id)+1):(Ft().b[1][1]++,0));const s=(Ft().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(Ft().s[25]++,Ft().b[3][0]++,o&&(Ft().b[3][1]++,D_(o.id)==D_(s.id))){Ft().b[2][0]++;const a=(Ft().s[26]++,e[e.length-1]);Ft().s[27]++,a.push(s)}else Ft().b[2][1]++,Ft().s[28]++,e.push([s])}return Ft().s[29]++,e}toggleLayerGroup(e,t){Ft().f[7]++;const i=(Ft().s[30]++,[e,t].join("-")),r=(Ft().s[31]++,{...this.state.collapsedGroups});Ft().s[32]++,i in this.state.collapsedGroups?(Ft().b[4][0]++,Ft().s[33]++,r[i]=!this.state.collapsedGroups[i]):(Ft().b[4][1]++,Ft().s[34]++,r[i]=!1),Ft().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){Ft().f[8]++;const i=(Ft().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return Ft().s[37]++,i===void 0?(Ft().b[5][0]++,!0):(Ft().b[5][1]++,i)}shouldComponentUpdate(e,t){if(Ft().f[9]++,Ft().s[38]++,this.state!==t)return Ft().b[6][0]++,Ft().s[39]++,!0;Ft().b[6][1]++;function i(c){Ft().f[10]++;const h=(Ft().s[40]++,{id:c.id});return Ft().s[41]++,c.layout?(Ft().b[7][0]++,Ft().s[42]++,h.layout={visibility:c.layout.visibility}):Ft().b[7][1]++,Ft().s[43]++,h}const r=(Ft().s[44]++,o9.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){Ft().f[11]++;const h=(Ft().s[45]++,{...c});return Ft().s[46]++,delete h.layers,Ft().s[47]++,h}const s=(Ft().s[48]++,o9.isEqual(o(this.props),o(e))),a=(Ft().s[49]++,Ft().b[8][0]++,!(r&&(Ft().b[8][1]++,s)));return Ft().s[50]++,a}componentDidUpdate(e){if(Ft().f[12]++,Ft().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){Ft().b[9][0]++;const t=(Ft().s[52]++,this.selectedItemRef.current);if(Ft().s[53]++,Ft().b[11][0]++,t&&(Ft().b[11][1]++,t.node)){Ft().b[10][0]++;const i=(Ft().s[54]++,t.node),r=(Ft().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(Ft().s[56]++,new IntersectionObserver(s=>{Ft().f[13]++,Ft().s[57]++,o.unobserve(i),Ft().s[58]++,Ft().b[13][0]++,s.length>0&&(Ft().b[13][1]++,s[0].intersectionRatio<1)?(Ft().b[12][0]++,Ft().s[59]++,i.scrollIntoView()):Ft().b[12][1]++},r));Ft().s[60]++,o.observe(i)}else Ft().b[10][1]++}else Ft().b[9][1]++}render(){Ft().f[14]++;const e=(Ft().s[61]++,[]);let t=(Ft().s[62]++,0);const i=(Ft().s[63]++,this.groupedLayers());Ft().s[64]++,i.forEach(o=>{Ft().f[15]++;const s=(Ft().s[65]++,D_(o[0].id));if(Ft().s[66]++,o.length>1){Ft().b[14][0]++;const a=(Ft().s[67]++,te.jsx(a6e,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(Ft().f[16]++,Ft().s[68]++,c.key)).join(" "),title:s,isActive:(Ft().b[15][0]++,!this.isCollapsed(s,t)||(Ft().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));Ft().s[69]++,e.push(a)}else Ft().b[14][1]++;Ft().s[70]++,o.forEach((a,c)=>{Ft().f[17]++;const h=(Ft().s[71]++,rke(this.props.layers,t)),m=(Ft().s[72]++,this.props.errors.find(S=>(Ft().f[18]++,Ft().s[73]++,Ft().b[16][0]++,S.parsed&&(Ft().b[16][1]++,S.parsed.type==="layer")&&(Ft().b[16][2]++,S.parsed.data.index==t)))),v=(Ft().s[74]++,{});Ft().s[75]++,t===this.props.selectedLayerIndex?(Ft().b[17][0]++,Ft().s[76]++,v.ref=this.selectedItemRef):Ft().b[17][1]++;const x=(Ft().s[77]++,te.jsx(u6e,{className:c0({"maputnik-layer-list-item-collapsed":(Ft().b[18][0]++,o.length>1&&(Ft().b[18][1]++,this.isCollapsed(s,h))&&(Ft().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(Ft().b[19][0]++,c==o.length-1&&(Ft().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!m}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(Ft().b[20][0]++,a.layout||(Ft().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...v},a.key));Ft().s[78]++,e.push(x),Ft().s[79]++,t+=1})});const r=(Ft().s[80]++,this.props.t);return Ft().s[81]++,te.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[te.jsx(tke,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),te.jsxs("header",{className:"maputnik-layer-list-header",children:[te.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),te.jsx("span",{className:"maputnik-space"}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(Ft().b[21][0]++,r("Collapse")):(Ft().b[21][1]++,r("Expand"))})})}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),te.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:te.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const ske=(Ft().s[82]++,No()(oke));Ft().s[83]++;const ake=n=>{Ft().f[19]++;const e=(Ft().s[84]++,DSe(RSe(BL,{activationConstraint:{distance:5}})));Ft().s[85]++;const t=r=>{Ft().f[20]++;const{active:o,over:s}=(Ft().s[86]++,r);if(Ft().s[87]++,s)Ft().b[22][1]++;else{Ft().b[22][0]++,Ft().s[88]++;return}const a=(Ft().s[89]++,n.layers.findIndex(h=>(Ft().f[21]++,Ft().s[90]++,h.id===o.id))),c=(Ft().s[91]++,n.layers.findIndex(h=>(Ft().f[22]++,Ft().s[92]++,h.id===s.id)));Ft().s[93]++,Ft().b[24][0]++,a!==-1&&(Ft().b[24][1]++,c!==-1)&&(Ft().b[24][2]++,a!==c)?(Ft().b[23][0]++,Ft().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):Ft().b[23][1]++},i=(Ft().s[95]++,n.layers.map(r=>(Ft().f[23]++,Ft().s[96]++,r.id)));return Ft().s[97]++,te.jsx(KEe,{sensors:e,collisionDetection:FSe,onDragEnd:t,children:te.jsx(ZEe,{items:i,strategy:VEe,children:te.jsx(ske,{...n})})})};var O8,wQ;function use(){if(wQ)return O8;wQ=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return O8={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},O8}var B8,SQ;function lke(){if(SQ)return B8;SQ=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),h={node:s,text:c};return o!=null?this._members.splice(o,0,h):this._members.push(h),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return B8=function(o){return new n(o)},B8}var I8,EQ;function uke(){if(EQ)return I8;EQ=1;var n=lke(),e=use(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var h=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),h&&h.id&&h.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var h=this;this.moveFocusTimer=setTimeout(function(){h.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,h){c=c||{},h=h||{},this.isOpen?this.closeMenu(c):this.openMenu(h)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var h=c.ownerDocument.activeElement;if(!(c&&h===c)){var m=a.menu.ref.current;if(m===h){a.focusItem(0);return}m&&m.contains(h)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return I8=function(a){var c=Object.create(i);return c.init(a),c},I8}var k8,OQ;function k6(){if(OQ)return k8;OQ=1;var n=Ba(),e=n.createContext();return k8=e,k8}var T8,BQ;function T6(){if(BQ)return T8;BQ=1;var n=b1();return T8={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},T8}var R8,IQ;function R6(){return IQ||(IQ=1,R8=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),R8}var D8,kQ;function cke(){if(kQ)return D8;kQ=1;function n(S,B){if(!(S instanceof B))throw new TypeError("Cannot call a class as a function")}function e(S,B){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:S}function t(S,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);S.prototype=Object.create(B&&B.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(S,B):S.__proto__=B)}var i=Ba(),r=b1(),o=uke(),s=k6(),a=T6(),c=a.refType,h=R6(),m={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},v=function(B){return{onMenuToggle:B.onMenuToggle,onSelection:B.onSelection,closeOnSelection:B.closeOnSelection,closeOnBlur:B.closeOnBlur,id:B.id}},x=(function(S){t(B,S);function B(R){n(this,B);var F=e(this,S.call(this,R));return F.manager=o(v(R)),F}return B.prototype.componentDidUpdate=function(){this.manager.updateOptions(v(this.props))},B.prototype.render=function(){var F={};return h(F,this.props,m),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,F,this.props.children))},B})(i.Component);return x.propTypes=m,x.defaultProps={tag:"div"},D8=i.forwardRef(function(S,B){var R={forwardedRef:B};return h(R,S,{children:m.children,forwardedRef:m.forwardedRef}),h(R,{forwardedRef:B}),i.createElement(x,R,S.children)}),D8}var P8,TQ;function Ake(){if(TQ)return P8;TQ=1;function n(x,S){if(!(x instanceof S))throw new TypeError("Cannot call a class as a function")}function e(x,S){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:x}function t(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);x.prototype=Object.create(S&&S.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(x,S):x.__proto__=S)}var i=Ba(),r=b1(),o=k6(),s=T6(),a=s.refType,c=R6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},m=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},v=(function(x){t(S,x);function S(){var B,R,F;n(this,S);for(var j=arguments.length,W=Array(j),H=0;H<j;H++)W[H]=arguments[H];return F=(B=(R=e(this,x.call.apply(x,[this].concat(W))),R),R.ref=i.createRef(),R.handleKeyDown=function($){if(!R.props.disabled){var N=R.props.ambManager;switch($.key){case"ArrowDown":$.preventDefault(),N.isOpen?N.focusItem(0):N.openMenu();break;case"Enter":case" ":$.preventDefault(),N.toggleMenu();break;case"Escape":N.handleMenuKey($);break;default:N.handleButtonNonArrowKey($)}}},R.handleClick=function(){R.props.disabled||R.props.ambManager.toggleMenu({},{focusMenu:!1})},R.setRef=function($){R.ref.current=$,typeof R.props.forwardedRef=="function"?R.props.forwardedRef($):R.props.forwardedRef&&(R.props.forwardedRef.current=$)},B),e(R,F)}return S.prototype.componentDidMount=function(){this.props.ambManager.button=this},S.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},S.prototype.render=function(){var R=this.props,F=this.props.ambManager,j={role:"button",tabIndex:R.disabled?"":"0","aria-haspopup":!0,"aria-expanded":F.isOpen,"aria-disabled":R.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},W={};return c(W,h),m().indexOf(R.tag)>=0&&delete W.disabled,F.options.closeOnBlur&&(j.onBlur=F.handleBlur),c(j,R,W),c(j,{ref:this.setRef}),i.createElement(R.tag,j,R.children)},S})(i.Component);return v.propTypes=h,v.defaultProps={tag:"span"},P8=i.forwardRef(function(x,S){return i.createElement(o.Consumer,null,function(B){var R={ambManager:B,forwardedRef:S};return c(R,x,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(v,R,x.children)})}),P8}var U8,RQ;function hke(){return RQ||(RQ=1,U8=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",h,i),e.addEventListener("touchstart",m,i);function h(F){c||t(F)}function m(F){c=!0,!s&&(s=!0,e.addEventListener("touchmove",v,i),e.addEventListener("touchend",x,i),e.addEventListener("touchcancel",S,i),a=!1,r=F.touches[0].clientX,o=F.touches[0].clientY)}function v(F){a||Math.abs(F.touches[0].clientX-r)<=10&&Math.abs(F.touches[0].clientY-o)<=10||(a=!0)}function x(F){s=!1,B(),a||t(F)}function S(){s=!1,a=!1,r=0,o=0}function B(){e.removeEventListener("touchmove",v,i),e.removeEventListener("touchend",x,i),e.removeEventListener("touchcancel",S,i)}function R(){e.removeEventListener("click",h,i),e.removeEventListener("touchstart",m,i),B()}return{remove:R}}),U8}var L8,DQ;function dke(){if(DQ)return L8;DQ=1;function n(x,S){if(!(x instanceof S))throw new TypeError("Cannot call a class as a function")}function e(x,S){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:x}function t(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);x.prototype=Object.create(S&&S.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(x,S):x.__proto__=S)}var i=Ba(),r=b1(),o=hke(),s=k6(),a=T6(),c=a.refType,h=R6(),m={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},v=(function(x){t(S,x);function S(){var B,R,F;n(this,S);for(var j=arguments.length,W=Array(j),H=0;H<j;H++)W[H]=arguments[H];return F=(B=(R=e(this,x.call.apply(x,[this].concat(W))),R),R.ref=i.createRef(),R.addTapListener=function(){var $=R.ref.current;if($){var N=$.ownerDocument;N&&(R.tapListener=o(N.documentElement,R.handleTap))}},R.handleTap=function($){R.ref.current.contains($.target)||R.props.ambManager.button.ref.current.contains($.target)||R.props.ambManager.closeMenu()},R.setRef=function($){R.ref.current=$,typeof R.props.forwardedRef=="function"?R.props.forwardedRef($):R.props.forwardedRef&&(R.props.forwardedRef.current=$)},B),e(R,F)}return S.prototype.componentDidMount=function(){this.props.ambManager.menu=this},S.prototype.componentDidUpdate=function(){var R=this.props.ambManager;R.options.closeOnBlur&&(R.isOpen&&!this.tapListener?this.addTapListener():!R.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),R.isOpen||R.clearItems())},S.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},S.prototype.render=function(){var R=this.props,F=this.props.ambManager,j=(function(){return typeof R.children=="function"?R.children({isOpen:F.isOpen}):F.isOpen?R.children:!1})();if(!j)return!1;var W={onKeyDown:F.handleMenuKey,role:"menu",tabIndex:-1};return F.options.closeOnBlur&&(W.onBlur=F.handleBlur),h(W,R,m),h(W,{ref:this.setRef}),i.createElement(R.tag,W,j)},S})(i.Component);return v.propTypes=m,v.defaultProps={tag:"div"},L8=i.forwardRef(function(x,S){return i.createElement(s.Consumer,null,function(B){var R={ambManager:B,forwardedRef:S};return h(R,x,{ambManager:m.ambManager,children:m.children,forwardedRef:m.forwardedRef}),i.createElement(v,R,x.children)})}),L8}var K8,PQ;function fke(){if(PQ)return K8;PQ=1;function n(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function e(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function t(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var i=Ba(),r=b1(),o=k6(),s=T6(),a=s.refType,c=R6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},m=(function(v){t(x,v);function x(){var S,B,R;n(this,x);for(var F=arguments.length,j=Array(F),W=0;W<F;W++)j[W]=arguments[W];return R=(S=(B=e(this,v.call.apply(v,[this].concat(j))),B),B.ref=i.createRef(),B.handleKeyDown=function(H){H.key!=="Enter"&&H.key!==" "||B.props.tag==="a"&&B.props.href||(H.preventDefault(),B.selectItem(H))},B.selectItem=function(H){var $=typeof B.props.value<"u"?B.props.value:B.props.children;B.props.ambManager.handleSelection($,H)},B.setRef=function(H){B.ref.current=H,typeof B.props.forwardedRef=="function"?B.props.forwardedRef(H):B.props.forwardedRef&&(B.props.forwardedRef.current=H)},S),e(B,R)}return x.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},x.prototype.render=function(){var B={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(B,this.props,h),i.createElement(this.props.tag,B,this.props.children)},x})(i.Component);return m.propTypes=h,m.defaultProps={tag:"div"},K8=i.forwardRef(function(v,x){return i.createElement(o.Consumer,null,function(S){var B={ambManager:S,forwardedRef:x};return c(B,v,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(m,B,v.children)})}),K8}var F8,UQ;function pke(){if(UQ)return F8;UQ=1;var n=use();return F8={Wrapper:cke(),Button:Ake(),Menu:dke(),MenuItem:fke(),openMenu:n.openMenu,closeMenu:n.closeMenu},F8}var YM=pke();function LQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function LD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LQ(Object(t),!0).forEach(function(i){el(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function D6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function KQ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function P6(n,e,t){return e&&KQ(n.prototype,e),t&&KQ(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function el(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a0(){return a0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},a0.apply(this,arguments)}function aK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&KD(n,e)}function iE(n){return iE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iE(n)}function KD(n,e){return KD=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},KD(n,e)}function mke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gke(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function U6(n,e){if(n==null)return{};var t=gke(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function am(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function yke(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return am(n)}function lK(n){var e=mke();return function(){var i=iE(n),r;if(e){var o=iE(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return yke(this,r)}}function vke(n,e){return _ke(n)||Mke(n,e)||cse(n,e)||Ske()}function bke(n){return Cke(n)||xke(n)||cse(n)||wke()}function Cke(n){if(Array.isArray(n))return FD(n)}function _ke(n){if(Array.isArray(n))return n}function xke(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Mke(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function cse(n,e){if(n){if(typeof n=="string")return FD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FD(n,e)}}function FD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function wke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ske(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Eke=P6(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;D6(this,n),el(this,"expanded",void 0),el(this,"allowMultipleExpanded",void 0),el(this,"allowZeroExpanded",void 0),el(this,"toggleExpanded",function(h){if(t.isItemDisabled(h))return t;var m=t.isItemExpanded(h);return m?t.augment({expanded:t.expanded.filter(function(v){return v!==h})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(bke(t.expanded),[h]):[h]})}),el(this,"isItemDisabled",function(h){var m=t.isItemExpanded(h),v=t.expanded.length===1;return!!(m&&!t.allowZeroExpanded&&v)}),el(this,"isItemExpanded",function(h){return t.expanded.indexOf(h)!==-1}),el(this,"getPanelAttributes",function(h,m){var v=m??t.isItemExpanded(h);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!v:void 0,"aria-labelledby":t.getButtonId(h),id:t.getPanelId(h),hidden:v?void 0:!0}}),el(this,"getHeadingAttributes",function(){return{role:"heading"}}),el(this,"getButtonAttributes",function(h,m){var v=m??t.isItemExpanded(h),x=t.isItemDisabled(h);return{id:t.getButtonId(h),"aria-disabled":x,"aria-expanded":v,"aria-controls":t.getPanelId(h),role:"button",tabIndex:0}}),el(this,"getPanelId",function(h){return"accordion__panel-".concat(h)}),el(this,"getButtonId",function(h){return"accordion__heading-".concat(h)}),el(this,"augment",function(h){return new n(LD({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},h))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),Ase=wt.createContext(null),hse=(function(n){aK(t,n);var e=lK(t);function t(){var i;D6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),el(am(i),"state",new Eke({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),el(am(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),el(am(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),el(am(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),el(am(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),el(am(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),el(am(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return P6(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return wt.createElement(Ase.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(wt.PureComponent);el(hse,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var dse=(function(n){aK(t,n);var e=lK(t);function t(){var i;D6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),el(am(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return P6(t,[{key:"render",value:function(){return wt.createElement(Ase.Consumer,null,this.renderChildren)}}]),t})(wt.PureComponent),Oke=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Bke=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=U6(e,Oke);return wt.createElement(hse,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},wt.createElement("div",a0({"data-accordion-component":"Accordion",className:i},c)))},zD;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(zD||(zD={}));var fse=zD,z8=0;function Ike(){var n=z8;return z8=z8+1,"raa-".concat(n)}var kke=wt.useId||Ike,Tke=/[\u0009\u000a\u000c\u000d\u0020]/g;function T4(n){return n===""||Tke.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var pse=wt.createContext(null),Rke=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(h){var m=o??h.isItemExpanded(i),v=h.isItemDisabled(i),x=h.getPanelAttributes(i,o),S=h.getHeadingAttributes(i),B=h.getButtonAttributes(i,o);return wt.createElement(pse.Provider,{value:{uuid:i,expanded:m,disabled:v,toggleExpanded:s,panelAttributes:x,headingAttributes:S,buttonAttributes:B}},t)};return wt.createElement(dse,null,a)},Dke=function(e){return wt.createElement(dse,null,function(t){return wt.createElement(Rke,a0({},e,{accordionContext:t}))})},L6=function(e){var t=e.children,i=function(o){return o?t(o):null};return wt.createElement(pse.Consumer,null,i)},Pke=["uuid","dangerouslySetExpanded","className","activeClassName"],mse=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=U6(e,Pke),c=wt.useState(kke()),h=vke(c,1),m=h[0],v=t??m,x=function(B){var R=B.expanded,F=R&&s?s:o;return wt.createElement("div",a0({"data-accordion-component":"AccordionItem",className:F},a))};return T4(v.toString()),a.id&&T4(a.id),wt.createElement(Dke,{uuid:v,dangerouslySetExpanded:i},wt.createElement(L6,null,x))};mse.displayName=fse.AccordionItem;function gse(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:gse(n.parentElement))}function K6(n){var e=gse(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Uke(n){var e=K6(n)||[],t=e[0];t&&t.focus()}function Lke(n){var e=K6(n)||[],t=e[e.length-1];t&&t.focus()}function Kke(n){var e=K6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function Fke(n){var e=K6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var $0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},zke=["toggleExpanded","className"],jke=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=U6(e,zke),s=function(c){var h=c.key;if((h===$0.ENTER||h===$0.SPACE||h===$0.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(h){case $0.HOME:{c.preventDefault(),Uke(c.target);break}case $0.END:{c.preventDefault(),Lke(c.target);break}case $0.LEFT:case $0.UP:{c.preventDefault(),Fke(c.target);break}case $0.RIGHT:case $0.DOWN:{c.preventDefault(),Kke(c.target);break}}};return o.id&&T4(o.id),wt.createElement("div",a0({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},Nke=function(e){return wt.createElement(L6,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return wt.createElement(jke,a0({toggleExpanded:i},e,r))})},Gke={className:"accordion__heading","aria-level":3},Wke=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,yse=(function(n){aK(t,n);var e=lK(t);function t(){var i;D6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),el(am(i),"ref",void 0),el(am(i),"setRef",function(a){i.ref=a}),i}return P6(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return wt.createElement("div",a0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Wke)}}]),t})(wt.PureComponent);el(yse,"defaultProps",Gke);var vse=function(e){return wt.createElement(L6,null,function(t){var i=t.headingAttributes;return e.id&&T4(e.id),wt.createElement(yse,a0({},e,i))})};vse.displayName=fse.AccordionItemHeading;var Qke=["className","region","id"],qke=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=U6(e,Qke),a=function(h){var m=h.panelAttributes;o&&T4(o);var v=LD(LD({},m),{},{"aria-labelledby":r?m["aria-labelledby"]:void 0});return wt.createElement("div",a0({"data-accordion-component":"AccordionItemPanel",className:i},s,v,{role:r?"region":void 0}))};return wt.createElement(L6,null,a)};function R4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R4=function(){return s},s}R4();R4().s[0]++;const uK=n=>(R4().f[0]++,R4().s[1]++,te.jsx(kre,{...n}));function D4(n){return Bo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function F6(n){return Bo({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function Db(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Db=function(){return s},s}Db();const cK=(Db().s[0]++,["all","any","none"]);Db().s[1]++;const Yke=(Db().s[2]++,Object.keys(Xr.filter_operator.values).filter(n=>(Db().f[0]++,Db().s[3]++,cK.indexOf(n)<0)));function Vi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vi=function(){return s},s}Vi();function $ke(n){return Vi().f[0]++,Vi().s[0]++,n===""?(Vi().b[0][0]++,Vi().s[1]++,n):(Vi().b[0][1]++,Vi().s[2]++,isNaN(n)?(Vi().b[1][0]++,Vi().s[3]++,n):(Vi().b[1][1]++,Vi().s[4]++,parseFloat(n)))}function Vke(n){Vi().f[1]++;const e=(Vi().s[5]++,typeof n=="string");if(Vi().s[6]++,e)Vi().b[2][1]++;else return Vi().b[2][0]++,Vi().s[7]++,n;return Vi().s[8]++,n.match(/^\s*true\s*$/)?(Vi().b[3][0]++,Vi().s[9]++,!0):(Vi().b[3][1]++,Vi().s[10]++,n.match(/^\s*false\s*$/)?(Vi().b[4][0]++,Vi().s[11]++,!1):(Vi().b[4][1]++,Vi().s[12]++,n))}function Hke(n){return Vi().f[2]++,Vi().s[13]++,n=$ke(n),Vi().s[14]++,n=Vke(n),Vi().s[15]++,n}class Zke extends On.Component{static defaultProps=(Vi().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){Vi().f[3]++;let r=(Vi().s[17]++,[e,t,...i.map(Hke)]);Vi().s[18]++,Vi().b[6][0]++,e==="has"||(Vi().b[6][1]++,e==="!has")?(Vi().b[5][0]++,Vi().s[19]++,r=[e,t]):(Vi().b[5][1]++,Vi().s[20]++,i.length===0?(Vi().b[7][0]++,Vi().s[21]++,r=[e,t,""]):Vi().b[7][1]++),Vi().s[22]++,this.props.onChange(r)}render(){Vi().f[4]++;const e=(Vi().s[23]++,this.props.filter),t=(Vi().s[24]++,e[0]),i=(Vi().s[25]++,e[1]),r=(Vi().s[26]++,e.slice(2));return Vi().s[27]++,te.jsxs("div",{className:"maputnik-filter-editor-single",children:[te.jsx("div",{className:"maputnik-filter-editor-property",children:te.jsx(k5,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>(Vi().f[5]++,Vi().s[28]++,[o,o])),onChange:o=>(Vi().f[6]++,Vi().s[29]++,this.onFilterPartChanged(t,o,r))})}),te.jsx("div",{className:"maputnik-filter-editor-operator",children:te.jsx(oC,{"aria-label":"function",value:t,onChange:o=>(Vi().f[7]++,Vi().s[30]++,this.onFilterPartChanged(o,i,r)),options:Yke})}),(Vi().b[8][0]++,r.length>0&&(Vi().b[8][1]++,te.jsx("div",{className:"maputnik-filter-editor-args",children:te.jsx(xm,{"aria-label":"value",value:r.join(","),onChange:o=>(Vi().f[8]++,Vi().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function tx(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tx=function(){return s},s}tx();class Xke extends On.Component{render(){tx().f[0]++;const e=(tx().s[0]++,this.props.t);return tx().s[1]++,te.jsxs("div",{className:"maputnik-filter-editor-block",children:[te.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),te.jsx("div",{className:"maputnik-filter-editor-block-action",children:te.jsx(Zs,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:te.jsx(Zb,{})})})]})}}const Jke=(tx().s[2]++,No()(Xke));var j8,FQ;function eTe(){if(FQ)return j8;FQ=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",h="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",S=c+"?",B="["+r+"]?",R="(?:"+x+"(?:"+[h,m,v].join("|")+")"+B+S+")*",F=B+S+R,j="(?:"+[h+s+"?",s,m,v,o].join("|")+")",W=RegExp(a+"(?="+a+")|"+j+F,"g"),H=RegExp("["+x+e+t+i+r+"]"),$=typeof window=="object"&&window&&window.Object===Object&&window,N=typeof self=="object"&&self&&self.Object===Object&&self,Y=$||N||Function("return this")();function z(it){return it.split("")}function ne(it){return H.test(it)}function ae(it){return ne(it)?ve(it):z(it)}function ve(it){return it.match(W)||[]}var pe=Object.prototype,be=pe.toString,Ee=Y.Symbol,Te=Ee?Ee.prototype:void 0,je=Te?Te.toString:void 0;function Re(it,Ct,It){var Ke=-1,Ie=it.length;Ct<0&&(Ct=-Ct>Ie?0:Ie+Ct),It=It>Ie?Ie:It,It<0&&(It+=Ie),Ie=Ct>It?0:It-Ct>>>0,Ct>>>=0;for(var Se=Array(Ie);++Ke<Ie;)Se[Ke]=it[Ke+Ct];return Se}function qe(it){if(typeof it=="string")return it;if(Oe(it))return je?je.call(it):"";var Ct=it+"";return Ct=="0"&&1/it==-1/0?"-0":Ct}function nt(it,Ct,It){var Ke=it.length;return It=It===void 0?Ke:It,!Ct&&It>=Ke?it:Re(it,Ct,It)}function ht(it){return function(Ct){Ct=ze(Ct);var It=ne(Ct)?ae(Ct):void 0,Ke=It?It[0]:Ct.charAt(0),Ie=It?nt(It,1).join(""):Ct.slice(1);return Ke[it]()+Ie}}function ke(it){return!!it&&typeof it=="object"}function Oe(it){return typeof it=="symbol"||ke(it)&&be.call(it)==n}function ze(it){return it==null?"":qe(it)}function we(it){return At(ze(it).toLowerCase())}var At=ht("toUpperCase");return j8=we,j8}var tTe=eTe();const AK=eu(tTe);function Og(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Og=function(){return s},s}Og();function z6(n){Og().f[0]++;let e;const t=(Og().s[0]++,n.split("-"));return Og().s[1]++,t.length>1?(Og().b[0][0]++,Og().s[2]++,e=n.split("-").slice(1).join(" ")):(Og().b[0][1]++,Og().s[3]++,e=n),Og().s[4]++,AK(e)}function Fa(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="421a194a894795caa98e9aaeb6be503f0178c030",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:75,column:6}},11:{start:{line:78,column:27},end:{line:78,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:76,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"421a194a894795caa98e9aaeb6be503f0178c030"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fa=function(){return s},s}Fa();class nTe extends On.Component{static defaultProps=(Fa().s[0]++,{errors:{},onFocus:()=>{Fa().f[0]++},onBlur:()=>{Fa().f[1]++}});constructor(e){Fa().f[2]++,Fa().s[1]++,super(e),Fa().s[2]++,this.state={jsonError:!1}}render(){Fa().f[3]++;const{t:e,value:t,canUndo:i}=(Fa().s[3]++,this.props),r=(Fa().s[4]++,i?(Fa().b[0][0]++,!i()):(Fa().b[0][1]++,!0)),o=(Fa().s[5]++,te.jsxs(te.Fragment,{children:[(Fa().b[1][0]++,this.props.onUndo&&(Fa().b[1][1]++,te.jsx(Zs,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:te.jsx($fe,{})},"undo_action"))),te.jsx(Zs,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:te.jsx(Zb,{})},"delete_action")]}));let s=(Fa().s[6]++,void 0);if(Fa().s[7]++,this.props.errors){Fa().b[2][0]++;const a=(Fa().s[8]++,this.props.fieldType?(Fa().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(Fa().b[3][1]++,this.props.fieldName));Fa().s[9]++,s=this.props.errors[a]}else Fa().b[2][1]++;return Fa().s[10]++,te.jsx(Ps,{fieldSpec:this.props.fieldSpec,label:e(z6(this.props.fieldName)),action:o,wideMode:!0,error:s,children:te.jsx(uK,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,onChange:this.props.onChange})})}}const bse=(Fa().s[11]++,No()(nTe));function An(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return An=function(){return s},s}An();function Sy(n){An().f[0]++;const e=(An().s[0]++,An().b[0][0]++,n.filter||(An().b[0][1]++,["all"]));if(An().s[1]++,Array.isArray(e))An().b[1][1]++;else return An().b[1][0]++,An().s[2]++,e;let t=(An().s[3]++,e[0]),i=(An().s[4]++,e.slice(1));return An().s[5]++,cK.indexOf(t)<0?(An().b[2][0]++,An().s[6]++,t="all",An().s[7]++,i=[e.slice(0)]):An().b[2][1]++,An().s[8]++,[t,...i]}function iTe(n){return An().f[1]++,An().s[9]++,gde(rTe(n)).layers[0].filter}function rTe(n){return An().f[2]++,An().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const oTe=(An().s[11]++,["all","any","none"]);function zQ(n){if(An().f[3]++,An().s[12]++,An().b[4][0]++,n.length===1&&(An().b[4][1]++,oTe.includes(n[0])))return An().b[3][0]++,An().s[13]++,!0;An().b[3][1]++;const e=(An().s[14]++,u3(n));return An().s[15]++,!q4.isEqual(e,n)}function jQ(n){return An().f[4]++,An().s[16]++,cK.indexOf(n[0])>=0}function sTe(n){return An().f[5]++,An().s[17]++,jQ(n)?(An().b[5][0]++,An().s[18]++,n.slice(1).map(e=>(An().f[6]++,An().s[19]++,jQ(e))).filter(e=>(An().f[7]++,An().s[20]++,e==!0)).length>0):(An().b[5][1]++,An().s[21]++,!1)}class aTe extends On.Component{static defaultProps=(An().s[22]++,{filter:["all"]});constructor(e){An().f[8]++,An().s[23]++,super(e),An().s[24]++,this.state={showDoc:!1,displaySimpleFilter:zQ(Sy(e))}}onFilterPartChanged(e,t){An().f[9]++;const i=(An().s[25]++,Sy(this.props).slice(0));An().s[26]++,i[e]=t,An().s[27]++,this.props.onChange(i)}deleteFilterItem(e){An().f[10]++;const t=(An().s[28]++,Sy(this.props).slice(0));An().s[29]++,t.splice(e+1,1),An().s[30]++,this.props.onChange(t)}addFilterItem=(An().s[31]++,()=>{An().f[11]++;const e=(An().s[32]++,Sy(this.props).slice(0));An().s[33]++,e.push(["==","name",""]),An().s[34]++,this.props.onChange(e)});onToggleDoc=(An().s[35]++,e=>{An().f[12]++,An().s[36]++,this.setState({showDoc:e})});makeFilter=(An().s[37]++,()=>{An().f[13]++,An().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(An().s[39]++,()=>{An().f[14]++;const e=(An().s[40]++,Sy(this.props));An().s[41]++,this.props.onChange(iTe(e)),An().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){An().f[15]++;const i=(An().s[43]++,zQ(Sy(e)));return An().s[44]++,An().b[7][0]++,!i&&(An().b[7][1]++,t.displaySimpleFilter===!0)?(An().b[6][0]++,An().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(An().b[6][1]++,An().s[46]++,An().b[9][0]++,i&&(An().b[9][1]++,t.displaySimpleFilter===!1)?(An().b[8][0]++,An().s[47]++,{valueIsSimpleFilter:!0}):(An().b[8][1]++,An().s[48]++,{valueIsSimpleFilter:!1}))}render(){An().f[16]++;const{errors:e,t}=(An().s[49]++,this.props),{displaySimpleFilter:i}=(An().s[50]++,this.state),r=(An().s[51]++,{doc:Xr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(An().s[52]++,["all"]),s=(An().s[53]++,An().b[10][0]++,i&&(An().b[10][1]++,sTe(Sy(this.props))));if(An().s[54]++,s)return An().b[11][0]++,An().s[55]++,te.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[te.jsx("p",{children:t("Nested filters are not supported.")}),te.jsxs(Zs,{onClick:this.makeExpression,title:t("Convert to expression"),children:[te.jsx(D4,{}),t("Upgrade to expression")]})]});if(An().b[11][1]++,An().s[56]++,i){An().b[12][0]++;const a=(An().s[57]++,Sy(this.props)),c=(An().s[58]++,a[0]),h=(An().s[59]++,a.slice(1)),m=(An().s[60]++,te.jsx("div",{children:te.jsx(Zs,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:te.jsx(D4,{})})})),v=(An().s[61]++,h.map((x,S)=>{An().f[17]++;const B=(An().s[62]++,e[`filter[${S+1}]`]);return An().s[63]++,te.jsxs("div",{children:[te.jsx(Jke,{onDelete:this.deleteFilterItem.bind(this,S),children:te.jsx(Zke,{properties:this.props.properties,filter:x,onChange:this.onFilterPartChanged.bind(this,S+1)})},S),(An().b[13][0]++,B&&(An().b[13][1]++,te.jsx("div",{className:"maputnik-inline-error",children:B.message},"error")))]},`block-${S}`)}));return An().s[64]++,te.jsxs(te.Fragment,{children:[te.jsx(Ps,{fieldSpec:r,label:t("Filter"),action:m,children:te.jsx(oC,{value:c,onChange:x=>(An().f[18]++,An().s[65]++,this.onFilterPartChanged(0,x)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),v,te.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:te.jsxs(Zs,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[te.jsx(F6,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(An().b[14][0]++,""):(An().b[14][1]++,"none")},children:te.jsx(I6,{fieldSpec:r})},"doc")]})}else{An().b[12][1]++;const{filter:a}=(An().s[66]++,this.props);return An().s[67]++,te.jsxs(te.Fragment,{children:[te.jsx(bse,{onDelete:()=>{An().f[19]++,An().s[68]++,this.setState({displaySimpleFilter:!0}),An().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(An().b[15][0]++,this.state.valueIsSimpleFilter&&(An().b[15][1]++,te.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",te.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const lTe=(An().s[70]++,No()(aTe));var $C={},md={},VC={},N8,NQ;function Cse(){if(NQ)return N8;NQ=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return N8=n,N8}var G8,GQ;function km(){if(GQ)return G8;GQ=1;var n=Cse(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return G8=t,G8}var W8,WQ;function T5(){if(WQ)return W8;WQ=1;var n=km(),e=n.Symbol;return W8=e,W8}var Q8,QQ;function uTe(){if(QQ)return Q8;QQ=1;var n=T5(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var h=!0}catch{}var m=i.call(s);return h&&(a?s[r]=c:delete s[r]),m}return Q8=o,Q8}var q8,qQ;function cTe(){if(qQ)return q8;qQ=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return q8=t,q8}var Y8,YQ;function sC(){if(YQ)return Y8;YQ=1;var n=T5(),e=uTe(),t=cTe(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return Y8=s,Y8}var $8,$Q;function Ef(){if($Q)return $8;$Q=1;var n=Array.isArray;return $8=n,$8}var V8,VQ;function A0(){if(VQ)return V8;VQ=1;function n(e){return e!=null&&typeof e=="object"}return V8=n,V8}var H8,HQ;function ATe(){if(HQ)return H8;HQ=1;var n=sC(),e=Ef(),t=A0(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return H8=r,H8}var Z8,ZQ;function hTe(){if(ZQ)return Z8;ZQ=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var h=a[e?c:++o];if(i(s[h],h,s)===!1)break}return t}}return Z8=n,Z8}var X8,XQ;function _se(){if(XQ)return X8;XQ=1;var n=hTe(),e=n();return X8=e,X8}var J8,JQ;function dTe(){if(JQ)return J8;JQ=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return J8=n,J8}var e7,eq;function fTe(){if(eq)return e7;eq=1;var n=sC(),e=A0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return e7=i,e7}var t7,tq;function hK(){if(tq)return t7;tq=1;var n=fTe(),e=A0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return t7=o,t7}var J2={exports:{}},n7,nq;function pTe(){if(nq)return n7;nq=1;function n(){return!1}return n7=n,n7}J2.exports;var iq;function j6(){return iq||(iq=1,(function(n,e){var t=km(),i=pTe(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||i;n.exports=h})(J2,J2.exports)),J2.exports}var i7,rq;function dK(){if(rq)return i7;rq=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return i7=t,i7}var r7,oq;function fK(){if(oq)return r7;oq=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return r7=e,r7}var o7,sq;function mTe(){if(sq)return o7;sq=1;var n=sC(),e=fK(),t=A0(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",m="[object Number]",v="[object Object]",x="[object RegExp]",S="[object Set]",B="[object String]",R="[object WeakMap]",F="[object ArrayBuffer]",j="[object DataView]",W="[object Float32Array]",H="[object Float64Array]",$="[object Int8Array]",N="[object Int16Array]",Y="[object Int32Array]",z="[object Uint8Array]",ne="[object Uint8ClampedArray]",ae="[object Uint16Array]",ve="[object Uint32Array]",pe={};pe[W]=pe[H]=pe[$]=pe[N]=pe[Y]=pe[z]=pe[ne]=pe[ae]=pe[ve]=!0,pe[i]=pe[r]=pe[F]=pe[o]=pe[j]=pe[s]=pe[a]=pe[c]=pe[h]=pe[m]=pe[v]=pe[x]=pe[S]=pe[B]=pe[R]=!1;function be(Ee){return t(Ee)&&e(Ee.length)&&!!pe[n(Ee)]}return o7=be,o7}var s7,aq;function pK(){if(aq)return s7;aq=1;function n(e){return function(t){return e(t)}}return s7=n,s7}var e3={exports:{}};e3.exports;var lq;function mK(){return lq||(lq=1,(function(n,e){var t=Cse(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(e3,e3.exports)),e3.exports}var a7,uq;function gK(){if(uq)return a7;uq=1;var n=mTe(),e=pK(),t=mK(),i=t&&t.isTypedArray,r=i?e(i):n;return a7=r,a7}var l7,cq;function xse(){if(cq)return l7;cq=1;var n=dTe(),e=hK(),t=Ef(),i=j6(),r=dK(),o=gK(),s=Object.prototype,a=s.hasOwnProperty;function c(h,m){var v=t(h),x=!v&&e(h),S=!v&&!x&&i(h),B=!v&&!x&&!S&&o(h),R=v||x||S||B,F=R?n(h.length,String):[],j=F.length;for(var W in h)(m||a.call(h,W))&&!(R&&(W=="length"||S&&(W=="offset"||W=="parent")||B&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||r(W,j)))&&F.push(W);return F}return l7=c,l7}var u7,Aq;function yK(){if(Aq)return u7;Aq=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return u7=e,u7}var c7,hq;function Mse(){if(hq)return c7;hq=1;function n(e,t){return function(i){return e(t(i))}}return c7=n,c7}var A7,dq;function gTe(){if(dq)return A7;dq=1;var n=Mse(),e=n(Object.keys,Object);return A7=e,A7}var h7,fq;function yTe(){if(fq)return h7;fq=1;var n=yK(),e=gTe(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return h7=r,h7}var d7,pq;function _p(){if(pq)return d7;pq=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return d7=n,d7}var f7,mq;function vK(){if(mq)return f7;mq=1;var n=sC(),e=_p(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return f7=s,f7}var p7,gq;function Hx(){if(gq)return p7;gq=1;var n=vK(),e=fK();function t(i){return i!=null&&e(i.length)&&!n(i)}return p7=t,p7}var m7,yq;function R5(){if(yq)return m7;yq=1;var n=xse(),e=yTe(),t=Hx();function i(r){return t(r)?n(r):e(r)}return m7=i,m7}var g7,vq;function wse(){if(vq)return g7;vq=1;var n=_se(),e=R5();function t(i,r){return i&&n(i,r,e)}return g7=t,g7}var y7,bq;function N6(){if(bq)return y7;bq=1;function n(e){return e}return y7=n,y7}var v7,Cq;function Sse(){if(Cq)return v7;Cq=1;var n=N6();function e(t){return typeof t=="function"?t:n}return v7=e,v7}var b7,_q;function bK(){if(_q)return b7;_q=1;var n=wse(),e=Sse();function t(i,r){return i&&n(i,e(r))}return b7=t,b7}var C7,xq;function CK(){if(xq)return C7;xq=1;var n=Mse(),e=n(Object.getPrototypeOf,Object);return C7=e,C7}var _7,Mq;function Ese(){if(Mq)return _7;Mq=1;var n=sC(),e=CK(),t=A0(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function h(m){if(!t(m)||n(m)!=i)return!1;var v=e(m);if(v===null)return!0;var x=a.call(v,"constructor")&&v.constructor;return typeof x=="function"&&x instanceof x&&s.call(x)==c}return _7=h,_7}var x7,wq;function Ose(){if(wq)return x7;wq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return x7=n,x7}var M7,Sq;function vTe(){if(Sq)return M7;Sq=1;function n(){this.__data__=[],this.size=0}return M7=n,M7}var w7,Eq;function D5(){if(Eq)return w7;Eq=1;function n(e,t){return e===t||e!==e&&t!==t}return w7=n,w7}var S7,Oq;function G6(){if(Oq)return S7;Oq=1;var n=D5();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return S7=e,S7}var E7,Bq;function bTe(){if(Bq)return E7;Bq=1;var n=G6(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return E7=i,E7}var O7,Iq;function CTe(){if(Iq)return O7;Iq=1;var n=G6();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return O7=e,O7}var B7,kq;function _Te(){if(kq)return B7;kq=1;var n=G6();function e(t){return n(this.__data__,t)>-1}return B7=e,B7}var I7,Tq;function xTe(){if(Tq)return I7;Tq=1;var n=G6();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return I7=e,I7}var k7,Rq;function W6(){if(Rq)return k7;Rq=1;var n=vTe(),e=bTe(),t=CTe(),i=_Te(),r=xTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,k7=o,k7}var T7,Dq;function MTe(){if(Dq)return T7;Dq=1;var n=W6();function e(){this.__data__=new n,this.size=0}return T7=e,T7}var R7,Pq;function wTe(){if(Pq)return R7;Pq=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return R7=n,R7}var D7,Uq;function STe(){if(Uq)return D7;Uq=1;function n(e){return this.__data__.get(e)}return D7=n,D7}var P7,Lq;function ETe(){if(Lq)return P7;Lq=1;function n(e){return this.__data__.has(e)}return P7=n,P7}var U7,Kq;function OTe(){if(Kq)return U7;Kq=1;var n=km(),e=n["__core-js_shared__"];return U7=e,U7}var L7,Fq;function BTe(){if(Fq)return L7;Fq=1;var n=OTe(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return L7=t,L7}var K7,zq;function Bse(){if(zq)return K7;zq=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return K7=t,K7}var F7,jq;function ITe(){if(jq)return F7;jq=1;var n=vK(),e=BTe(),t=_p(),i=Bse(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,m=RegExp("^"+c.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(x){if(!t(x)||e(x))return!1;var S=n(x)?m:o;return S.test(i(x))}return F7=v,F7}var z7,Nq;function kTe(){if(Nq)return z7;Nq=1;function n(e,t){return e?.[t]}return z7=n,z7}var j7,Gq;function aC(){if(Gq)return j7;Gq=1;var n=ITe(),e=kTe();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return j7=t,j7}var N7,Wq;function _K(){if(Wq)return N7;Wq=1;var n=aC(),e=km(),t=n(e,"Map");return N7=t,N7}var G7,Qq;function Q6(){if(Qq)return G7;Qq=1;var n=aC(),e=n(Object,"create");return G7=e,G7}var W7,qq;function TTe(){if(qq)return W7;qq=1;var n=Q6();function e(){this.__data__=n?n(null):{},this.size=0}return W7=e,W7}var Q7,Yq;function RTe(){if(Yq)return Q7;Yq=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Q7=n,Q7}var q7,$q;function DTe(){if($q)return q7;$q=1;var n=Q6(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return q7=r,q7}var Y7,Vq;function PTe(){if(Vq)return Y7;Vq=1;var n=Q6(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return Y7=i,Y7}var $7,Hq;function UTe(){if(Hq)return $7;Hq=1;var n=Q6(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return $7=t,$7}var V7,Zq;function LTe(){if(Zq)return V7;Zq=1;var n=TTe(),e=RTe(),t=DTe(),i=PTe(),r=UTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,V7=o,V7}var H7,Xq;function KTe(){if(Xq)return H7;Xq=1;var n=LTe(),e=W6(),t=_K();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return H7=i,H7}var Z7,Jq;function FTe(){if(Jq)return Z7;Jq=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Z7=n,Z7}var X7,eY;function q6(){if(eY)return X7;eY=1;var n=FTe();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return X7=e,X7}var J7,tY;function zTe(){if(tY)return J7;tY=1;var n=q6();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return J7=e,J7}var eI,nY;function jTe(){if(nY)return eI;nY=1;var n=q6();function e(t){return n(this,t).get(t)}return eI=e,eI}var tI,iY;function NTe(){if(iY)return tI;iY=1;var n=q6();function e(t){return n(this,t).has(t)}return tI=e,tI}var nI,rY;function GTe(){if(rY)return nI;rY=1;var n=q6();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return nI=e,nI}var iI,oY;function xK(){if(oY)return iI;oY=1;var n=KTe(),e=zTe(),t=jTe(),i=NTe(),r=GTe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,iI=o,iI}var rI,sY;function WTe(){if(sY)return rI;sY=1;var n=W6(),e=_K(),t=xK(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return rI=r,rI}var oI,aY;function Y6(){if(aY)return oI;aY=1;var n=W6(),e=MTe(),t=wTe(),i=STe(),r=ETe(),o=WTe();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,oI=s,oI}var sI,lY;function QTe(){if(lY)return sI;lY=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return sI=e,sI}var aI,uY;function qTe(){if(uY)return aI;uY=1;function n(e){return this.__data__.has(e)}return aI=n,aI}var lI,cY;function YTe(){if(cY)return lI;cY=1;var n=xK(),e=QTe(),t=qTe();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,lI=i,lI}var uI,AY;function $Te(){if(AY)return uI;AY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return uI=n,uI}var cI,hY;function VTe(){if(hY)return cI;hY=1;function n(e,t){return e.has(t)}return cI=n,cI}var AI,dY;function Ise(){if(dY)return AI;dY=1;var n=YTe(),e=$Te(),t=VTe(),i=1,r=2;function o(s,a,c,h,m,v){var x=c&i,S=s.length,B=a.length;if(S!=B&&!(x&&B>S))return!1;var R=v.get(s),F=v.get(a);if(R&&F)return R==a&&F==s;var j=-1,W=!0,H=c&r?new n:void 0;for(v.set(s,a),v.set(a,s);++j<S;){var $=s[j],N=a[j];if(h)var Y=x?h(N,$,j,a,s,v):h($,N,j,s,a,v);if(Y!==void 0){if(Y)continue;W=!1;break}if(H){if(!e(a,function(z,ne){if(!t(H,ne)&&($===z||m($,z,c,h,v)))return H.push(ne)})){W=!1;break}}else if(!($===N||m($,N,c,h,v))){W=!1;break}}return v.delete(s),v.delete(a),W}return AI=o,AI}var hI,fY;function kse(){if(fY)return hI;fY=1;var n=km(),e=n.Uint8Array;return hI=e,hI}var dI,pY;function HTe(){if(pY)return dI;pY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return dI=n,dI}var fI,mY;function ZTe(){if(mY)return fI;mY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return fI=n,fI}var pI,gY;function XTe(){if(gY)return pI;gY=1;var n=T5(),e=kse(),t=D5(),i=Ise(),r=HTe(),o=ZTe(),s=1,a=2,c="[object Boolean]",h="[object Date]",m="[object Error]",v="[object Map]",x="[object Number]",S="[object RegExp]",B="[object Set]",R="[object String]",F="[object Symbol]",j="[object ArrayBuffer]",W="[object DataView]",H=n?n.prototype:void 0,$=H?H.valueOf:void 0;function N(Y,z,ne,ae,ve,pe,be){switch(ne){case W:if(Y.byteLength!=z.byteLength||Y.byteOffset!=z.byteOffset)return!1;Y=Y.buffer,z=z.buffer;case j:return!(Y.byteLength!=z.byteLength||!pe(new e(Y),new e(z)));case c:case h:case x:return t(+Y,+z);case m:return Y.name==z.name&&Y.message==z.message;case S:case R:return Y==z+"";case v:var Ee=r;case B:var Te=ae&s;if(Ee||(Ee=o),Y.size!=z.size&&!Te)return!1;var je=be.get(Y);if(je)return je==z;ae|=a,be.set(Y,z);var Re=i(Ee(Y),Ee(z),ae,ve,pe,be);return be.delete(Y),Re;case F:if($)return $.call(Y)==$.call(z)}return!1}return pI=N,pI}var mI,yY;function Tse(){if(yY)return mI;yY=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return mI=n,mI}var gI,vY;function Rse(){if(vY)return gI;vY=1;var n=Tse(),e=Ef();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return gI=t,gI}var yI,bY;function JTe(){if(bY)return yI;bY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return yI=n,yI}var vI,CY;function Dse(){if(CY)return vI;CY=1;function n(){return[]}return vI=n,vI}var bI,_Y;function MK(){if(_Y)return bI;_Y=1;var n=JTe(),e=Dse(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return bI=o,bI}var CI,xY;function Pse(){if(xY)return CI;xY=1;var n=Rse(),e=MK(),t=R5();function i(r){return n(r,t,e)}return CI=i,CI}var _I,MY;function e9e(){if(MY)return _I;MY=1;var n=Pse(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,h,m){var v=a&e,x=n(o),S=x.length,B=n(s),R=B.length;if(S!=R&&!v)return!1;for(var F=S;F--;){var j=x[F];if(!(v?j in s:i.call(s,j)))return!1}var W=m.get(o),H=m.get(s);if(W&&H)return W==s&&H==o;var $=!0;m.set(o,s),m.set(s,o);for(var N=v;++F<S;){j=x[F];var Y=o[j],z=s[j];if(c)var ne=v?c(z,Y,j,s,o,m):c(Y,z,j,o,s,m);if(!(ne===void 0?Y===z||h(Y,z,a,c,m):ne)){$=!1;break}N||(N=j=="constructor")}if($&&!N){var ae=o.constructor,ve=s.constructor;ae!=ve&&"constructor"in o&&"constructor"in s&&!(typeof ae=="function"&&ae instanceof ae&&typeof ve=="function"&&ve instanceof ve)&&($=!1)}return m.delete(o),m.delete(s),$}return _I=r,_I}var xI,wY;function t9e(){if(wY)return xI;wY=1;var n=aC(),e=km(),t=n(e,"DataView");return xI=t,xI}var MI,SY;function n9e(){if(SY)return MI;SY=1;var n=aC(),e=km(),t=n(e,"Promise");return MI=t,MI}var wI,EY;function i9e(){if(EY)return wI;EY=1;var n=aC(),e=km(),t=n(e,"Set");return wI=t,wI}var SI,OY;function r9e(){if(OY)return SI;OY=1;var n=aC(),e=km(),t=n(e,"WeakMap");return SI=t,SI}var EI,BY;function $6(){if(BY)return EI;BY=1;var n=t9e(),e=_K(),t=n9e(),i=i9e(),r=r9e(),o=sC(),s=Bse(),a="[object Map]",c="[object Object]",h="[object Promise]",m="[object Set]",v="[object WeakMap]",x="[object DataView]",S=s(n),B=s(e),R=s(t),F=s(i),j=s(r),W=o;return(n&&W(new n(new ArrayBuffer(1)))!=x||e&&W(new e)!=a||t&&W(t.resolve())!=h||i&&W(new i)!=m||r&&W(new r)!=v)&&(W=function(H){var $=o(H),N=$==c?H.constructor:void 0,Y=N?s(N):"";if(Y)switch(Y){case S:return x;case B:return a;case R:return h;case F:return m;case j:return v}return $}),EI=W,EI}var OI,IY;function o9e(){if(IY)return OI;IY=1;var n=Y6(),e=Ise(),t=XTe(),i=e9e(),r=$6(),o=Ef(),s=j6(),a=gK(),c=1,h="[object Arguments]",m="[object Array]",v="[object Object]",x=Object.prototype,S=x.hasOwnProperty;function B(R,F,j,W,H,$){var N=o(R),Y=o(F),z=N?m:r(R),ne=Y?m:r(F);z=z==h?v:z,ne=ne==h?v:ne;var ae=z==v,ve=ne==v,pe=z==ne;if(pe&&s(R)){if(!s(F))return!1;N=!0,ae=!1}if(pe&&!ae)return $||($=new n),N||a(R)?e(R,F,j,W,H,$):t(R,F,z,j,W,H,$);if(!(j&c)){var be=ae&&S.call(R,"__wrapped__"),Ee=ve&&S.call(F,"__wrapped__");if(be||Ee){var Te=be?R.value():R,je=Ee?F.value():F;return $||($=new n),H(Te,je,j,W,$)}}return pe?($||($=new n),i(R,F,j,W,H,$)):!1}return OI=B,OI}var BI,kY;function Use(){if(kY)return BI;kY=1;var n=o9e(),e=A0();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return BI=t,BI}var II,TY;function s9e(){if(TY)return II;TY=1;var n=Y6(),e=Use(),t=1,i=2;function r(o,s,a,c){var h=a.length,m=h,v=!c;if(o==null)return!m;for(o=Object(o);h--;){var x=a[h];if(v&&x[2]?x[1]!==o[x[0]]:!(x[0]in o))return!1}for(;++h<m;){x=a[h];var S=x[0],B=o[S],R=x[1];if(v&&x[2]){if(B===void 0&&!(S in o))return!1}else{var F=new n;if(c)var j=c(B,R,S,o,s,F);if(!(j===void 0?e(R,B,t|i,c,F):j))return!1}}return!0}return II=r,II}var kI,RY;function Lse(){if(RY)return kI;RY=1;var n=_p();function e(t){return t===t&&!n(t)}return kI=e,kI}var TI,DY;function a9e(){if(DY)return TI;DY=1;var n=Lse(),e=R5();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return TI=t,TI}var RI,PY;function Kse(){if(PY)return RI;PY=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return RI=n,RI}var DI,UY;function l9e(){if(UY)return DI;UY=1;var n=s9e(),e=a9e(),t=Kse();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return DI=i,DI}var PI,LY;function V6(){if(LY)return PI;LY=1;var n=sC(),e=A0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return PI=i,PI}var UI,KY;function wK(){if(KY)return UI;KY=1;var n=Ef(),e=V6(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return UI=r,UI}var LI,FY;function u9e(){if(FY)return LI;FY=1;var n=xK(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var h=i.apply(this,s);return o.cache=c.set(a,h)||c,h};return o.cache=new(t.Cache||n),o}return t.Cache=n,LI=t,LI}var KI,zY;function c9e(){if(zY)return KI;zY=1;var n=u9e(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return KI=t,KI}var FI,jY;function A9e(){if(jY)return FI;jY=1;var n=c9e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,h){o.push(c?h.replace(t,"$1"):a||s)}),o});return FI=i,FI}var zI,NY;function h9e(){if(NY)return zI;NY=1;var n=T5(),e=Ose(),t=Ef(),i=V6(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return zI=s,zI}var jI,GY;function d9e(){if(GY)return jI;GY=1;var n=h9e();function e(t){return t==null?"":n(t)}return jI=e,jI}var NI,WY;function Fse(){if(WY)return NI;WY=1;var n=Ef(),e=wK(),t=A9e(),i=d9e();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return NI=r,NI}var GI,QY;function H6(){if(QY)return GI;QY=1;var n=V6();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return GI=e,GI}var WI,qY;function zse(){if(qY)return WI;qY=1;var n=Fse(),e=H6();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return WI=t,WI}var QI,YY;function f9e(){if(YY)return QI;YY=1;var n=zse();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return QI=e,QI}var qI,$Y;function p9e(){if($Y)return qI;$Y=1;function n(e,t){return e!=null&&t in Object(e)}return qI=n,qI}var YI,VY;function m9e(){if(VY)return YI;VY=1;var n=Fse(),e=hK(),t=Ef(),i=dK(),r=fK(),o=H6();function s(a,c,h){c=n(c,a);for(var m=-1,v=c.length,x=!1;++m<v;){var S=o(c[m]);if(!(x=a!=null&&h(a,S)))break;a=a[S]}return x||++m!=v?x:(v=a==null?0:a.length,!!v&&r(v)&&i(S,v)&&(t(a)||e(a)))}return YI=s,YI}var $I,HY;function g9e(){if(HY)return $I;HY=1;var n=p9e(),e=m9e();function t(i,r){return i!=null&&e(i,r,n)}return $I=t,$I}var VI,ZY;function y9e(){if(ZY)return VI;ZY=1;var n=Use(),e=f9e(),t=g9e(),i=wK(),r=Lse(),o=Kse(),s=H6(),a=1,c=2;function h(m,v){return i(m)&&r(v)?o(s(m),v):function(x){var S=e(x,m);return S===void 0&&S===v?t(x,m):n(v,S,a|c)}}return VI=h,VI}var HI,XY;function v9e(){if(XY)return HI;XY=1;function n(e){return function(t){return t?.[e]}}return HI=n,HI}var ZI,JY;function b9e(){if(JY)return ZI;JY=1;var n=zse();function e(t){return function(i){return n(i,t)}}return ZI=e,ZI}var XI,e$;function C9e(){if(e$)return XI;e$=1;var n=v9e(),e=b9e(),t=wK(),i=H6();function r(o){return t(o)?n(i(o)):e(o)}return XI=r,XI}var JI,t$;function _9e(){if(t$)return JI;t$=1;var n=l9e(),e=y9e(),t=N6(),i=Ef(),r=C9e();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return JI=o,JI}var ek,n$;function x9e(){if(n$)return ek;n$=1;var n=Hx();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return ek=e,ek}var tk,i$;function jse(){if(i$)return tk;i$=1;var n=wse(),e=x9e(),t=e(n);return tk=t,tk}var nk,r$;function M9e(){if(r$)return nk;r$=1;var n=jse(),e=Hx();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,h){s[++o]=r(a,c,h)}),s}return nk=t,nk}var ik,o$;function w9e(){if(o$)return ik;o$=1;var n=Ose(),e=_9e(),t=M9e(),i=Ef();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return ik=r,ik}var s$;function S9e(){if(s$)return VC;s$=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.flattenNames=void 0;var n=ATe(),e=c(n),t=bK(),i=c(t),r=Ese(),o=c(r),s=w9e(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=VC.flattenNames=function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=[];return(0,a.default)(v,function(S){Array.isArray(S)?m(S).map(function(B){return x.push(B)}):(0,o.default)(S)?(0,i.default)(S,function(B,R){B===!0&&x.push(R),x.push(R+"-"+B)}):(0,e.default)(S)&&x.push(S)}),x};return VC.default=h,VC}var HC={},rk,a$;function Nse(){if(a$)return rk;a$=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return rk=n,rk}var ok,l$;function Gse(){if(l$)return ok;l$=1;var n=aC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return ok=e,ok}var sk,u$;function SK(){if(u$)return sk;u$=1;var n=Gse();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return sk=e,sk}var ak,c$;function Wse(){if(c$)return ak;c$=1;var n=SK(),e=D5(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return ak=r,ak}var lk,A$;function P5(){if(A$)return lk;A$=1;var n=Wse(),e=SK();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,h=r.length;++c<h;){var m=r[c],v=s?s(o[m],i[m],m,o,i):void 0;v===void 0&&(v=i[m]),a?e(o,m,v):n(o,m,v)}return o}return lk=t,lk}var uk,h$;function E9e(){if(h$)return uk;h$=1;var n=P5(),e=R5();function t(i,r){return i&&n(r,e(r),i)}return uk=t,uk}var ck,d$;function O9e(){if(d$)return ck;d$=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return ck=n,ck}var Ak,f$;function B9e(){if(f$)return Ak;f$=1;var n=_p(),e=yK(),t=O9e(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var h in s)h=="constructor"&&(a||!r.call(s,h))||c.push(h);return c}return Ak=o,Ak}var hk,p$;function U5(){if(p$)return hk;p$=1;var n=xse(),e=B9e(),t=Hx();function i(r){return t(r)?n(r,!0):e(r)}return hk=i,hk}var dk,m$;function I9e(){if(m$)return dk;m$=1;var n=P5(),e=U5();function t(i,r){return i&&n(r,e(r),i)}return dk=t,dk}var t3={exports:{}};t3.exports;var g$;function Qse(){return g$||(g$=1,(function(n,e){var t=km(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(h,m){if(m)return h.slice();var v=h.length,x=a?a(v):new h.constructor(v);return h.copy(x),x}n.exports=c})(t3,t3.exports)),t3.exports}var fk,y$;function qse(){if(y$)return fk;y$=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return fk=n,fk}var pk,v$;function k9e(){if(v$)return pk;v$=1;var n=P5(),e=MK();function t(i,r){return n(i,e(i),r)}return pk=t,pk}var mk,b$;function Yse(){if(b$)return mk;b$=1;var n=Tse(),e=CK(),t=MK(),i=Dse(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return mk=o,mk}var gk,C$;function T9e(){if(C$)return gk;C$=1;var n=P5(),e=Yse();function t(i,r){return n(i,e(i),r)}return gk=t,gk}var yk,_$;function R9e(){if(_$)return yk;_$=1;var n=Rse(),e=Yse(),t=U5();function i(r){return n(r,t,e)}return yk=i,yk}var vk,x$;function D9e(){if(x$)return vk;x$=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return vk=t,vk}var bk,M$;function EK(){if(M$)return bk;M$=1;var n=kse();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return bk=e,bk}var Ck,w$;function P9e(){if(w$)return Ck;w$=1;var n=EK();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return Ck=e,Ck}var _k,S$;function U9e(){if(S$)return _k;S$=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return _k=e,_k}var xk,E$;function L9e(){if(E$)return xk;E$=1;var n=T5(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return xk=i,xk}var Mk,O$;function $se(){if(O$)return Mk;O$=1;var n=EK();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return Mk=e,Mk}var wk,B$;function K9e(){if(B$)return wk;B$=1;var n=EK(),e=P9e(),t=U9e(),i=L9e(),r=$se(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",m="[object Set]",v="[object String]",x="[object Symbol]",S="[object ArrayBuffer]",B="[object DataView]",R="[object Float32Array]",F="[object Float64Array]",j="[object Int8Array]",W="[object Int16Array]",H="[object Int32Array]",$="[object Uint8Array]",N="[object Uint8ClampedArray]",Y="[object Uint16Array]",z="[object Uint32Array]";function ne(ae,ve,pe){var be=ae.constructor;switch(ve){case S:return n(ae);case o:case s:return new be(+ae);case B:return e(ae,pe);case R:case F:case j:case W:case H:case $:case N:case Y:case z:return r(ae,pe);case a:return new be;case c:case v:return new be(ae);case h:return t(ae);case m:return new be;case x:return i(ae)}}return wk=ne,wk}var Sk,I$;function F9e(){if(I$)return Sk;I$=1;var n=_p(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return Sk=t,Sk}var Ek,k$;function Vse(){if(k$)return Ek;k$=1;var n=F9e(),e=CK(),t=yK();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return Ek=i,Ek}var Ok,T$;function z9e(){if(T$)return Ok;T$=1;var n=$6(),e=A0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return Ok=i,Ok}var Bk,R$;function j9e(){if(R$)return Bk;R$=1;var n=z9e(),e=pK(),t=mK(),i=t&&t.isMap,r=i?e(i):n;return Bk=r,Bk}var Ik,D$;function N9e(){if(D$)return Ik;D$=1;var n=$6(),e=A0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return Ik=i,Ik}var kk,P$;function G9e(){if(P$)return kk;P$=1;var n=N9e(),e=pK(),t=mK(),i=t&&t.isSet,r=i?e(i):n;return kk=r,kk}var Tk,U$;function W9e(){if(U$)return Tk;U$=1;var n=Y6(),e=Nse(),t=Wse(),i=E9e(),r=I9e(),o=Qse(),s=qse(),a=k9e(),c=T9e(),h=Pse(),m=R9e(),v=$6(),x=D9e(),S=K9e(),B=Vse(),R=Ef(),F=j6(),j=j9e(),W=_p(),H=G9e(),$=R5(),N=U5(),Y=1,z=2,ne=4,ae="[object Arguments]",ve="[object Array]",pe="[object Boolean]",be="[object Date]",Ee="[object Error]",Te="[object Function]",je="[object GeneratorFunction]",Re="[object Map]",qe="[object Number]",nt="[object Object]",ht="[object RegExp]",ke="[object Set]",Oe="[object String]",ze="[object Symbol]",we="[object WeakMap]",At="[object ArrayBuffer]",it="[object DataView]",Ct="[object Float32Array]",It="[object Float64Array]",Ke="[object Int8Array]",Ie="[object Int16Array]",Se="[object Int32Array]",Ge="[object Uint8Array]",st="[object Uint8ClampedArray]",ut="[object Uint16Array]",ft="[object Uint32Array]",St={};St[ae]=St[ve]=St[At]=St[it]=St[pe]=St[be]=St[Ct]=St[It]=St[Ke]=St[Ie]=St[Se]=St[Re]=St[qe]=St[nt]=St[ht]=St[ke]=St[Oe]=St[ze]=St[Ge]=St[st]=St[ut]=St[ft]=!0,St[Ee]=St[Te]=St[we]=!1;function kt(en,Pn,zn,si,xn,Rn){var pn,Hn=Pn&Y,Un=Pn&z,Tt=Pn&ne;if(zn&&(pn=xn?zn(en,si,xn,Rn):zn(en)),pn!==void 0)return pn;if(!W(en))return en;var Me=R(en);if(Me){if(pn=x(en),!Hn)return s(en,pn)}else{var oe=v(en),le=oe==Te||oe==je;if(F(en))return o(en,Hn);if(oe==nt||oe==ae||le&&!xn){if(pn=Un||le?{}:B(en),!Hn)return Un?c(en,r(pn,en)):a(en,i(pn,en))}else{if(!St[oe])return xn?en:{};pn=S(en,oe,Hn)}}Rn||(Rn=new n);var he=Rn.get(en);if(he)return he;Rn.set(en,pn),H(en)?en.forEach(function(xe){pn.add(kt(xe,Pn,zn,xe,en,Rn))}):j(en)&&en.forEach(function(xe,Ye){pn.set(Ye,kt(xe,Pn,zn,Ye,en,Rn))});var se=Tt?Un?m:h:Un?N:$,Ae=Me?void 0:se(en);return e(Ae||en,function(xe,Ye){Ae&&(Ye=xe,xe=en[Ye]),t(pn,Ye,kt(xe,Pn,zn,Ye,en,Rn))}),pn}return Tk=kt,Tk}var Rk,L$;function Q9e(){if(L$)return Rk;L$=1;var n=W9e(),e=1,t=4;function i(r){return n(r,e|t)}return Rk=i,Rk}var K$;function q9e(){if(K$)return HC;K$=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.mergeClasses=void 0;var n=bK(),e=o(n),t=Q9e(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(a[m]=h[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=HC.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=c.default&&(0,i.default)(c.default)||{};return h.map(function(v){var x=c[v];return x&&(0,e.default)(x,function(S,B){m[B]||(m[B]={}),m[B]=r({},m[B],x[B])}),v}),m};return HC.default=s,HC}var ZC={},F$;function Y9e(){if(F$)return ZC;F$=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.autoprefix=void 0;var n=bK(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=ZC.autoprefix=function(a){var c={};return(0,e.default)(a,function(h,m){var v={};(0,e.default)(h,function(x,S){var B=r[S];B?v=t({},v,B(x)):v[S]=x}),c[m]=v}),c};return ZC.default=o,ZC}var XC={},z$;function $9e(){if(z$)return XC;z$=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.hover=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=Ba(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=XC.hover=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(x,v);function x(){var S,B,R,F;r(this,x);for(var j=arguments.length,W=Array(j),H=0;H<j;H++)W[H]=arguments[H];return F=(B=(R=o(this,(S=x.__proto__||Object.getPrototypeOf(x)).call.apply(S,[this].concat(W))),R),R.state={hover:!1},R.handleMouseOver=function(){return R.setState({hover:!0})},R.handleMouseOut=function(){return R.setState({hover:!1})},R.render=function(){return t.default.createElement(m,{onMouseOver:R.handleMouseOver,onMouseOut:R.handleMouseOut},t.default.createElement(h,n({},R.props,R.state)))},B),o(R,F)}return x})(t.default.Component)};return XC.default=a,XC}var JC={},j$;function V9e(){if(j$)return JC;j$=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.active=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=Ba(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=JC.active=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(x,v);function x(){var S,B,R,F;r(this,x);for(var j=arguments.length,W=Array(j),H=0;H<j;H++)W[H]=arguments[H];return F=(B=(R=o(this,(S=x.__proto__||Object.getPrototypeOf(x)).call.apply(S,[this].concat(W))),R),R.state={active:!1},R.handleMouseDown=function(){return R.setState({active:!0})},R.handleMouseUp=function(){return R.setState({active:!1})},R.render=function(){return t.default.createElement(m,{onMouseDown:R.handleMouseDown,onMouseUp:R.handleMouseUp},t.default.createElement(h,n({},R.props,R.state)))},B),o(R,F)}return x})(t.default.Component)};return JC.default=a,JC}var $M={},N$;function H9e(){if(N$)return $M;N$=1,Object.defineProperty($M,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return $M.default=n,$M}var G$;function Tm(){if(G$)return md;G$=1,Object.defineProperty(md,"__esModule",{value:!0}),md.ReactCSS=md.loop=md.handleActive=md.handleHover=md.hover=void 0;var n=S9e(),e=x(n),t=q9e(),i=x(t),r=Y9e(),o=x(r),s=$9e(),a=x(s),c=V9e(),h=x(c),m=H9e(),v=x(m);function x(B){return B&&B.__esModule?B:{default:B}}md.hover=a.default,md.handleHover=a.default,md.handleActive=h.default,md.loop=v.default;var S=md.ReactCSS=function(R){for(var F=arguments.length,j=Array(F>1?F-1:0),W=1;W<F;W++)j[W-1]=arguments[W];var H=(0,e.default)(j),$=(0,i.default)(R,H);return(0,o.default)($)};return md.default=S,md}var Dk,W$;function Hse(){if(W$)return Dk;W$=1;var n=SK(),e=D5();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Dk=t,Dk}var Pk,Q$;function Z9e(){if(Q$)return Pk;Q$=1;var n=Hx(),e=A0();function t(i){return e(i)&&n(i)}return Pk=t,Pk}var Uk,q$;function Zse(){if(q$)return Uk;q$=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Uk=n,Uk}var Lk,Y$;function X9e(){if(Y$)return Lk;Y$=1;var n=P5(),e=U5();function t(i){return n(i,e(i))}return Lk=t,Lk}var Kk,$$;function J9e(){if($$)return Kk;$$=1;var n=Hse(),e=Qse(),t=$se(),i=qse(),r=Vse(),o=hK(),s=Ef(),a=Z9e(),c=j6(),h=vK(),m=_p(),v=Ese(),x=gK(),S=Zse(),B=X9e();function R(F,j,W,H,$,N,Y){var z=S(F,W),ne=S(j,W),ae=Y.get(ne);if(ae){n(F,W,ae);return}var ve=N?N(z,ne,W+"",F,j,Y):void 0,pe=ve===void 0;if(pe){var be=s(ne),Ee=!be&&c(ne),Te=!be&&!Ee&&x(ne);ve=ne,be||Ee||Te?s(z)?ve=z:a(z)?ve=i(z):Ee?(pe=!1,ve=e(ne,!0)):Te?(pe=!1,ve=t(ne,!0)):ve=[]:v(ne)||o(ne)?(ve=z,o(z)?ve=B(z):(!m(z)||h(z))&&(ve=r(ne))):pe=!1}pe&&(Y.set(ne,ve),$(ve,ne,H,N,Y),Y.delete(ne)),n(F,W,ve)}return Kk=R,Kk}var Fk,V$;function eRe(){if(V$)return Fk;V$=1;var n=Y6(),e=Hse(),t=_se(),i=J9e(),r=_p(),o=U5(),s=Zse();function a(c,h,m,v,x){c!==h&&t(h,function(S,B){if(x||(x=new n),r(S))i(c,h,B,m,a,v,x);else{var R=v?v(s(c,B),S,B+"",c,h,x):void 0;R===void 0&&(R=S),e(c,B,R)}},o)}return Fk=a,Fk}var zk,H$;function tRe(){if(H$)return zk;H$=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return zk=n,zk}var jk,Z$;function nRe(){if(Z$)return jk;Z$=1;var n=tRe(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),h=Array(c);++a<c;)h[a]=s[r+a];a=-1;for(var m=Array(r+1);++a<r;)m[a]=s[a];return m[r]=o(h),n(i,this,m)}}return jk=t,jk}var Nk,X$;function iRe(){if(X$)return Nk;X$=1;function n(e){return function(){return e}}return Nk=n,Nk}var Gk,J$;function rRe(){if(J$)return Gk;J$=1;var n=iRe(),e=Gse(),t=N6(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return Gk=i,Gk}var Wk,eV;function oRe(){if(eV)return Wk;eV=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return Wk=i,Wk}var Qk,tV;function sRe(){if(tV)return Qk;tV=1;var n=rRe(),e=oRe(),t=e(n);return Qk=t,Qk}var qk,nV;function aRe(){if(nV)return qk;nV=1;var n=N6(),e=nRe(),t=sRe();function i(r,o){return t(e(r,o,n),r+"")}return qk=i,qk}var Yk,iV;function lRe(){if(iV)return Yk;iV=1;var n=D5(),e=Hx(),t=dK(),i=_p();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return Yk=r,Yk}var $k,rV;function uRe(){if(rV)return $k;rV=1;var n=aRe(),e=lRe();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,h=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,h&&e(o[0],o[1],h)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var m=o[s];m&&i(r,m,s,c)}return r})}return $k=t,$k}var Vk,oV;function Xse(){if(oV)return Vk;oV=1;var n=eRe(),e=uRe(),t=e(function(i,r,o){n(i,r,o)});return Vk=t,Vk}var Hk={},e_={},VM={},sV;function cRe(){return sV||(sV=1,Object.defineProperty(VM,"__esModule",{value:!0}),VM.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),v=h-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var x=void 0;if(v<0?x=0:v>a?x=1:x=Math.round(v*100/a)/100,t.a!==x)return{h:t.h,s:t.s,l:t.l,a:x,source:"rgb"}}else{var S=void 0;if(m<0?S=0:m>s?S=1:S=Math.round(m*100/s)/100,r!==S)return{h:t.h,s:t.s,l:t.l,a:S,source:"rgb"}}return null}),VM}var t_={},I2={},aV;function ARe(){if(aV)return I2;aV=1,Object.defineProperty(I2,"__esModule",{value:!0});var n={},e=I2.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return I2.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},I2}var lV;function OK(){if(lV)return t_;lV=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.Checkboard=void 0;var n=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(m[S]=x[S])}return m},e=Ba(),t=c(e),i=Tm(),r=c(i),o=ARe(),s=a(o);function a(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(v[x]=m[x]);return v.default=m,v}function c(m){return m&&m.__esModule?m:{default:m}}var h=t_.Checkboard=function(v){var x=v.white,S=v.grey,B=v.size,R=v.renderers,F=v.borderRadius,j=v.boxShadow,W=v.children,H=(0,r.default)({default:{grid:{borderRadius:F,boxShadow:j,absolute:"0px 0px 0px 0px",background:"url("+s.get(x,S,B,R.canvas)+") center left"}}});return(0,e.isValidElement)(W)?t.default.cloneElement(W,n({},W.props,{style:n({},W.props.style,H.grid)})):t.default.createElement("div",{style:H.grid})};return h.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t_.default=h,t_}var uV;function hRe(){if(uV)return e_;uV=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.Alpha=void 0;var n=Object.assign||function(F){for(var j=1;j<arguments.length;j++){var W=arguments[j];for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(F[H]=W[H])}return F},e=(function(){function F(j,W){for(var H=0;H<W.length;H++){var $=W[H];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(j,$.key,$)}}return function(j,W,H){return W&&F(j.prototype,W),H&&F(j,H),j}})(),t=Ba(),i=v(t),r=Tm(),o=v(r),s=cRe(),a=m(s),c=OK(),h=v(c);function m(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(j[W]=F[W]);return j.default=F,j}function v(F){return F&&F.__esModule?F:{default:F}}function x(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}function S(F,j){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:F}function B(F,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);F.prototype=Object.create(j&&j.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(F,j):F.__proto__=j)}var R=e_.Alpha=(function(F){B(j,F);function j(){var W,H,$,N;x(this,j);for(var Y=arguments.length,z=Array(Y),ne=0;ne<Y;ne++)z[ne]=arguments[ne];return N=(H=($=S(this,(W=j.__proto__||Object.getPrototypeOf(j)).call.apply(W,[this].concat(z))),$),$.handleChange=function(ae){var ve=a.calculateChange(ae,$.props.hsl,$.props.direction,$.props.a,$.container);ve&&typeof $.props.onChange=="function"&&$.props.onChange(ve,ae)},$.handleMouseDown=function(ae){$.handleChange(ae),window.addEventListener("mousemove",$.handleChange),window.addEventListener("mouseup",$.handleMouseUp)},$.handleMouseUp=function(){$.unbindEventListeners()},$.unbindEventListeners=function(){window.removeEventListener("mousemove",$.handleChange),window.removeEventListener("mouseup",$.handleMouseUp)},H),S($,N)}return e(j,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var H=this,$=this.props.rgb,N=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+$.r+","+$.g+","+$.b+`, 0) 0%,
           rgba(`+$.r+","+$.g+","+$.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:$.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+$.r+","+$.g+","+$.b+`, 0) 0%,
           rgba(`+$.r+","+$.g+","+$.b+", 1) 100%)"},pointer:{left:0,top:$.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:N.alpha},i.default.createElement("div",{style:N.checkboard},i.default.createElement(h.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:N.gradient}),i.default.createElement("div",{style:N.container,ref:function(z){return H.container=z},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:N.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:N.slider}))))}}]),j})(t.PureComponent||t.Component);return e_.default=R,e_}var n_={},cV;function dRe(){if(cV)return n_;cV=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.EditableInput=void 0;var n=(function(){function W(H,$){for(var N=0;N<$.length;N++){var Y=$[N];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(H,Y.key,Y)}}return function(H,$,N){return $&&W(H.prototype,$),N&&W(H,N),H}})(),e=Ba(),t=o(e),i=Tm(),r=o(i);function o(W){return W&&W.__esModule?W:{default:W}}function s(W,H,$){return H in W?Object.defineProperty(W,H,{value:$,enumerable:!0,configurable:!0,writable:!0}):W[H]=$,W}function a(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")}function c(W,H){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:W}function h(W,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);W.prototype=Object.create(H&&H.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(W,H):W.__proto__=H)}var m=1,v=38,x=40,S=[v,x],B=function(H){return S.indexOf(H)>-1},R=function(H){return Number(String(H).replace(/%/g,""))},F=1,j=n_.EditableInput=(function(W){h(H,W);function H($){a(this,H);var N=c(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return N.handleBlur=function(){N.state.blurValue&&N.setState({value:N.state.blurValue,blurValue:null})},N.handleChange=function(Y){N.setUpdatedValue(Y.target.value,Y)},N.handleKeyDown=function(Y){var z=R(Y.target.value);if(!isNaN(z)&&B(Y.keyCode)){var ne=N.getArrowOffset(),ae=Y.keyCode===v?z+ne:z-ne;N.setUpdatedValue(ae,Y)}},N.handleDrag=function(Y){if(N.props.dragLabel){var z=Math.round(N.props.value+Y.movementX);z>=0&&z<=N.props.dragMax&&N.props.onChange&&N.props.onChange(N.getValueObjectWithLabel(z),Y)}},N.handleMouseDown=function(Y){N.props.dragLabel&&(Y.preventDefault(),N.handleDrag(Y),window.addEventListener("mousemove",N.handleDrag),window.addEventListener("mouseup",N.handleMouseUp))},N.handleMouseUp=function(){N.unbindEventListeners()},N.unbindEventListeners=function(){window.removeEventListener("mousemove",N.handleDrag),window.removeEventListener("mouseup",N.handleMouseUp)},N.state={value:String($.value).toUpperCase(),blurValue:String($.value).toUpperCase()},N.inputId="rc-editable-input-"+F++,N}return n(H,[{key:"componentDidUpdate",value:function(N,Y){this.props.value!==this.state.value&&(N.value!==this.props.value||Y.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(N){return s({},this.props.label,N)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||m}},{key:"setUpdatedValue",value:function(N,Y){var z=this.props.label?this.getValueObjectWithLabel(N):N;this.props.onChange&&this.props.onChange(z,Y),this.setState({value:N})}},{key:"render",value:function(){var N=this,Y=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:Y.wrap},t.default.createElement("input",{id:this.inputId,style:Y.input,ref:function(ne){return N.input=ne},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:Y.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),H})(e.PureComponent||e.Component);return n_.default=j,n_}var i_={},HM={},AV;function fRe(){return AV||(AV=1,Object.defineProperty(HM,"__esModule",{value:!0}),HM.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(r.getBoundingClientRect().left+window.pageXOffset),m=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var v=void 0;if(m<0)v=359;else if(m>s)v=0;else{var x=-(m*100/s)+100;v=360*x/100}if(i.h!==v)return{h:v,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var S=void 0;if(h<0)S=0;else if(h>o)S=359;else{var B=h*100/o;S=360*B/100}if(i.h!==S)return{h:S,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),HM}var hV;function pRe(){if(hV)return i_;hV=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.Hue=void 0;var n=(function(){function S(B,R){for(var F=0;F<R.length;F++){var j=R[F];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(B,j.key,j)}}return function(B,R,F){return R&&S(B.prototype,R),F&&S(B,F),B}})(),e=Ba(),t=c(e),i=Tm(),r=c(i),o=fRe(),s=a(o);function a(S){if(S&&S.__esModule)return S;var B={};if(S!=null)for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R]);return B.default=S,B}function c(S){return S&&S.__esModule?S:{default:S}}function h(S,B){if(!(S instanceof B))throw new TypeError("Cannot call a class as a function")}function m(S,B){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:S}function v(S,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);S.prototype=Object.create(B&&B.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(S,B):S.__proto__=B)}var x=i_.Hue=(function(S){v(B,S);function B(){var R,F,j,W;h(this,B);for(var H=arguments.length,$=Array(H),N=0;N<H;N++)$[N]=arguments[N];return W=(F=(j=m(this,(R=B.__proto__||Object.getPrototypeOf(B)).call.apply(R,[this].concat($))),j),j.handleChange=function(Y){var z=s.calculateChange(Y,j.props.direction,j.props.hsl,j.container);z&&typeof j.props.onChange=="function"&&j.props.onChange(z,Y)},j.handleMouseDown=function(Y){j.handleChange(Y),window.addEventListener("mousemove",j.handleChange),window.addEventListener("mouseup",j.handleMouseUp)},j.handleMouseUp=function(){j.unbindEventListeners()},F),m(j,W)}return n(B,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var F=this,j=this.props.direction,W=j===void 0?"horizontal":j,H=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:W==="vertical"});return t.default.createElement("div",{style:H.hue},t.default.createElement("div",{className:"hue-"+W,style:H.container,ref:function(N){return F.container=N},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:H.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:H.slider}))))}}]),B})(e.PureComponent||e.Component);return i_.default=x,i_}var r_={},dV;function mRe(){if(dV)return r_;dV=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.Raised=void 0;var n=Ba(),e=c(n),t=b1(),i=c(t),r=Tm(),o=c(r),s=Xse(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=r_.Raised=function(v){var x=v.zDepth,S=v.radius,B=v.background,R=v.children,F=v.styles,j=F===void 0?{}:F,W=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+x+"px "+x*4+"px rgba(0,0,0,.24)",borderRadius:S,background:B}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},j),{"zDepth-1":x===1});return e.default.createElement("div",{style:W.wrap},e.default.createElement("div",{style:W.bg}),e.default.createElement("div",{style:W.content},R))};return h.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},h.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},r_.default=h,r_}var o_={},Zk,fV;function gRe(){if(fV)return Zk;fV=1;var n=km(),e=function(){return n.Date.now()};return Zk=e,Zk}var Xk,pV;function yRe(){if(pV)return Xk;pV=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return Xk=e,Xk}var Jk,mV;function vRe(){if(mV)return Jk;mV=1;var n=yRe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return Jk=t,Jk}var eT,gV;function bRe(){if(gV)return eT;gV=1;var n=vRe(),e=_p(),t=V6(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(h){if(typeof h=="number")return h;if(t(h))return i;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=n(h);var v=o.test(h);return v||s.test(h)?a(h.slice(2),v?2:8):r.test(h)?i:+h}return eT=c,eT}var tT,yV;function Jse(){if(yV)return tT;yV=1;var n=_p(),e=gRe(),t=bRe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,h){var m,v,x,S,B,R,F=0,j=!1,W=!1,H=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(h)&&(j=!!h.leading,W="maxWait"in h,x=W?r(t(h.maxWait)||0,c):x,H="trailing"in h?!!h.trailing:H);function $(Ee){var Te=m,je=v;return m=v=void 0,F=Ee,S=a.apply(je,Te),S}function N(Ee){return F=Ee,B=setTimeout(ne,c),j?$(Ee):S}function Y(Ee){var Te=Ee-R,je=Ee-F,Re=c-Te;return W?o(Re,x-je):Re}function z(Ee){var Te=Ee-R,je=Ee-F;return R===void 0||Te>=c||Te<0||W&&je>=x}function ne(){var Ee=e();if(z(Ee))return ae(Ee);B=setTimeout(ne,Y(Ee))}function ae(Ee){return B=void 0,H&&m?$(Ee):(m=v=void 0,S)}function ve(){B!==void 0&&clearTimeout(B),F=0,m=R=v=B=void 0}function pe(){return B===void 0?S:ae(e())}function be(){var Ee=e(),Te=z(Ee);if(m=arguments,v=this,R=Ee,Te){if(B===void 0)return N(R);if(W)return clearTimeout(B),B=setTimeout(ne,c),$(R)}return B===void 0&&(B=setTimeout(ne,c)),S}return be.cancel=ve,be.flush=pe,be}return tT=s,tT}var nT,vV;function CRe(){if(vV)return nT;vV=1;var n=Jse(),e=_p(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return nT=i,nT}var ZM={},bV;function _Re(){return bV||(bV=1,Object.defineProperty(ZM,"__esModule",{value:!0}),ZM.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),m=c-(i.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),m<0?m=0:m>s&&(m=s);var v=h/o,x=1-m/s;return{h:t.h,s:v,v:x,a:t.a,source:"hsv"}}),ZM}var CV;function xRe(){if(CV)return o_;CV=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.Saturation=void 0;var n=(function(){function R(F,j){for(var W=0;W<j.length;W++){var H=j[W];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(F,H.key,H)}}return function(F,j,W){return j&&R(F.prototype,j),W&&R(F,W),F}})(),e=Ba(),t=m(e),i=Tm(),r=m(i),o=CRe(),s=m(o),a=_Re(),c=h(a);function h(R){if(R&&R.__esModule)return R;var F={};if(R!=null)for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(F[j]=R[j]);return F.default=R,F}function m(R){return R&&R.__esModule?R:{default:R}}function v(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}function x(R,F){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:R}function S(R,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);R.prototype=Object.create(F&&F.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(R,F):R.__proto__=F)}var B=o_.Saturation=(function(R){S(F,R);function F(j){v(this,F);var W=x(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,j));return W.handleChange=function(H){typeof W.props.onChange=="function"&&W.throttle(W.props.onChange,c.calculateChange(H,W.props.hsl,W.container),H)},W.handleMouseDown=function(H){W.handleChange(H);var $=W.getContainerRenderWindow();$.addEventListener("mousemove",W.handleChange),$.addEventListener("mouseup",W.handleMouseUp)},W.handleMouseUp=function(){W.unbindEventListeners()},W.throttle=(0,s.default)(function(H,$,N){H($,N)},50),W}return n(F,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var W=this.container,H=window;!H.document.contains(W)&&H.parent!==H;)H=H.parent;return H}},{key:"unbindEventListeners",value:function(){var W=this.getContainerRenderWindow();W.removeEventListener("mousemove",this.handleChange),W.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var W=this,H=this.props.style||{},$=H.color,N=H.white,Y=H.black,z=H.pointer,ne=H.circle,ae=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:$,white:N,black:Y,pointer:z,circle:ne}},{custom:!!this.props.style});return t.default.createElement("div",{style:ae.color,ref:function(pe){return W.container=pe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ae.white,className:"saturation-white"},t.default.createElement("div",{style:ae.black,className:"saturation-black"}),t.default.createElement("div",{style:ae.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ae.circle}))))}}]),F})(e.PureComponent||e.Component);return o_.default=B,o_}var s_={},wh={},iT,_V;function MRe(){if(_V)return iT;_V=1;var n=Nse(),e=jse(),t=Sse(),i=Ef();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return iT=r,iT}var rT,xV;function wRe(){return xV||(xV=1,rT=MRe()),rT}var Bw={exports:{}},SRe=Bw.exports,MV;function ERe(){return MV||(MV=1,(function(n,e){(function(t,i){n.exports=i()})(SRe,(function(){function t(Ke){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},t(Ke)}var i=/^\s+/,r=/\s+$/;function o(Ke,Ie){if(Ke=Ke||"",Ie=Ie||{},Ke instanceof o)return Ke;if(!(this instanceof o))return new o(Ke,Ie);var Se=s(Ke);this._originalInput=Ke,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=Math.round(100*this._a)/100,this._format=Ie.format||Se.format,this._gradientType=Ie.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Se.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Ie=this.toRgb();return(Ie.r*299+Ie.g*587+Ie.b*114)/1e3},getLuminance:function(){var Ie=this.toRgb(),Se,Ge,st,ut,ft,St;return Se=Ie.r/255,Ge=Ie.g/255,st=Ie.b/255,Se<=.03928?ut=Se/12.92:ut=Math.pow((Se+.055)/1.055,2.4),Ge<=.03928?ft=Ge/12.92:ft=Math.pow((Ge+.055)/1.055,2.4),st<=.03928?St=st/12.92:St=Math.pow((st+.055)/1.055,2.4),.2126*ut+.7152*ft+.0722*St},setAlpha:function(Ie){return this._a=Te(Ie),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Ie=m(this._r,this._g,this._b);return{h:Ie.h*360,s:Ie.s,v:Ie.v,a:this._a}},toHsvString:function(){var Ie=m(this._r,this._g,this._b),Se=Math.round(Ie.h*360),Ge=Math.round(Ie.s*100),st=Math.round(Ie.v*100);return this._a==1?"hsv("+Se+", "+Ge+"%, "+st+"%)":"hsva("+Se+", "+Ge+"%, "+st+"%, "+this._roundA+")"},toHsl:function(){var Ie=c(this._r,this._g,this._b);return{h:Ie.h*360,s:Ie.s,l:Ie.l,a:this._a}},toHslString:function(){var Ie=c(this._r,this._g,this._b),Se=Math.round(Ie.h*360),Ge=Math.round(Ie.s*100),st=Math.round(Ie.l*100);return this._a==1?"hsl("+Se+", "+Ge+"%, "+st+"%)":"hsla("+Se+", "+Ge+"%, "+st+"%, "+this._roundA+")"},toHex:function(Ie){return x(this._r,this._g,this._b,Ie)},toHexString:function(Ie){return"#"+this.toHex(Ie)},toHex8:function(Ie){return S(this._r,this._g,this._b,this._a,Ie)},toHex8String:function(Ie){return"#"+this.toHex8(Ie)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(je(this._r,255)*100)+"%",g:Math.round(je(this._g,255)*100)+"%",b:Math.round(je(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%)":"rgba("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:be[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(Ie){var Se="#"+B(this._r,this._g,this._b,this._a),Ge=Se,st=this._gradientType?"GradientType = 1, ":"";if(Ie){var ut=o(Ie);Ge="#"+B(ut._r,ut._g,ut._b,ut._a)}return"progid:DXImageTransform.Microsoft.gradient("+st+"startColorstr="+Se+",endColorstr="+Ge+")"},toString:function(Ie){var Se=!!Ie;Ie=Ie||this._format;var Ge=!1,st=this._a<1&&this._a>=0,ut=!Se&&st&&(Ie==="hex"||Ie==="hex6"||Ie==="hex3"||Ie==="hex4"||Ie==="hex8"||Ie==="name");return ut?Ie==="name"&&this._a===0?this.toName():this.toRgbString():(Ie==="rgb"&&(Ge=this.toRgbString()),Ie==="prgb"&&(Ge=this.toPercentageRgbString()),(Ie==="hex"||Ie==="hex6")&&(Ge=this.toHexString()),Ie==="hex3"&&(Ge=this.toHexString(!0)),Ie==="hex4"&&(Ge=this.toHex8String(!0)),Ie==="hex8"&&(Ge=this.toHex8String()),Ie==="name"&&(Ge=this.toName()),Ie==="hsl"&&(Ge=this.toHslString()),Ie==="hsv"&&(Ge=this.toHsvString()),Ge||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Ie,Se){var Ge=Ie.apply(null,[this].concat([].slice.call(Se)));return this._r=Ge._r,this._g=Ge._g,this._b=Ge._b,this.setAlpha(Ge._a),this},lighten:function(){return this._applyModification(W,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification($,arguments)},desaturate:function(){return this._applyModification(R,arguments)},saturate:function(){return this._applyModification(F,arguments)},greyscale:function(){return this._applyModification(j,arguments)},spin:function(){return this._applyModification(N,arguments)},_applyCombination:function(Ie,Se){return Ie.apply(null,[this].concat([].slice.call(Se)))},analogous:function(){return this._applyCombination(ae,arguments)},complement:function(){return this._applyCombination(Y,arguments)},monochromatic:function(){return this._applyCombination(ve,arguments)},splitcomplement:function(){return this._applyCombination(ne,arguments)},triad:function(){return this._applyCombination(z,[3])},tetrad:function(){return this._applyCombination(z,[4])}},o.fromRatio=function(Ke,Ie){if(t(Ke)=="object"){var Se={};for(var Ge in Ke)Ke.hasOwnProperty(Ge)&&(Ge==="a"?Se[Ge]=Ke[Ge]:Se[Ge]=Oe(Ke[Ge]));Ke=Se}return o(Ke,Ie)};function s(Ke){var Ie={r:0,g:0,b:0},Se=1,Ge=null,st=null,ut=null,ft=!1,St=!1;return typeof Ke=="string"&&(Ke=Ct(Ke)),t(Ke)=="object"&&(it(Ke.r)&&it(Ke.g)&&it(Ke.b)?(Ie=a(Ke.r,Ke.g,Ke.b),ft=!0,St=String(Ke.r).substr(-1)==="%"?"prgb":"rgb"):it(Ke.h)&&it(Ke.s)&&it(Ke.v)?(Ge=Oe(Ke.s),st=Oe(Ke.v),Ie=v(Ke.h,Ge,st),ft=!0,St="hsv"):it(Ke.h)&&it(Ke.s)&&it(Ke.l)&&(Ge=Oe(Ke.s),ut=Oe(Ke.l),Ie=h(Ke.h,Ge,ut),ft=!0,St="hsl"),Ke.hasOwnProperty("a")&&(Se=Ke.a)),Se=Te(Se),{ok:ft,format:Ke.format||St,r:Math.min(255,Math.max(Ie.r,0)),g:Math.min(255,Math.max(Ie.g,0)),b:Math.min(255,Math.max(Ie.b,0)),a:Se}}function a(Ke,Ie,Se){return{r:je(Ke,255)*255,g:je(Ie,255)*255,b:je(Se,255)*255}}function c(Ke,Ie,Se){Ke=je(Ke,255),Ie=je(Ie,255),Se=je(Se,255);var Ge=Math.max(Ke,Ie,Se),st=Math.min(Ke,Ie,Se),ut,ft,St=(Ge+st)/2;if(Ge==st)ut=ft=0;else{var kt=Ge-st;switch(ft=St>.5?kt/(2-Ge-st):kt/(Ge+st),Ge){case Ke:ut=(Ie-Se)/kt+(Ie<Se?6:0);break;case Ie:ut=(Se-Ke)/kt+2;break;case Se:ut=(Ke-Ie)/kt+4;break}ut/=6}return{h:ut,s:ft,l:St}}function h(Ke,Ie,Se){var Ge,st,ut;Ke=je(Ke,360),Ie=je(Ie,100),Se=je(Se,100);function ft(en,Pn,zn){return zn<0&&(zn+=1),zn>1&&(zn-=1),zn<1/6?en+(Pn-en)*6*zn:zn<1/2?Pn:zn<2/3?en+(Pn-en)*(2/3-zn)*6:en}if(Ie===0)Ge=st=ut=Se;else{var St=Se<.5?Se*(1+Ie):Se+Ie-Se*Ie,kt=2*Se-St;Ge=ft(kt,St,Ke+1/3),st=ft(kt,St,Ke),ut=ft(kt,St,Ke-1/3)}return{r:Ge*255,g:st*255,b:ut*255}}function m(Ke,Ie,Se){Ke=je(Ke,255),Ie=je(Ie,255),Se=je(Se,255);var Ge=Math.max(Ke,Ie,Se),st=Math.min(Ke,Ie,Se),ut,ft,St=Ge,kt=Ge-st;if(ft=Ge===0?0:kt/Ge,Ge==st)ut=0;else{switch(Ge){case Ke:ut=(Ie-Se)/kt+(Ie<Se?6:0);break;case Ie:ut=(Se-Ke)/kt+2;break;case Se:ut=(Ke-Ie)/kt+4;break}ut/=6}return{h:ut,s:ft,v:St}}function v(Ke,Ie,Se){Ke=je(Ke,360)*6,Ie=je(Ie,100),Se=je(Se,100);var Ge=Math.floor(Ke),st=Ke-Ge,ut=Se*(1-Ie),ft=Se*(1-st*Ie),St=Se*(1-(1-st)*Ie),kt=Ge%6,en=[Se,ft,ut,ut,St,Se][kt],Pn=[St,Se,Se,ft,ut,ut][kt],zn=[ut,ut,St,Se,Se,ft][kt];return{r:en*255,g:Pn*255,b:zn*255}}function x(Ke,Ie,Se,Ge){var st=[ke(Math.round(Ke).toString(16)),ke(Math.round(Ie).toString(16)),ke(Math.round(Se).toString(16))];return Ge&&st[0].charAt(0)==st[0].charAt(1)&&st[1].charAt(0)==st[1].charAt(1)&&st[2].charAt(0)==st[2].charAt(1)?st[0].charAt(0)+st[1].charAt(0)+st[2].charAt(0):st.join("")}function S(Ke,Ie,Se,Ge,st){var ut=[ke(Math.round(Ke).toString(16)),ke(Math.round(Ie).toString(16)),ke(Math.round(Se).toString(16)),ke(ze(Ge))];return st&&ut[0].charAt(0)==ut[0].charAt(1)&&ut[1].charAt(0)==ut[1].charAt(1)&&ut[2].charAt(0)==ut[2].charAt(1)&&ut[3].charAt(0)==ut[3].charAt(1)?ut[0].charAt(0)+ut[1].charAt(0)+ut[2].charAt(0)+ut[3].charAt(0):ut.join("")}function B(Ke,Ie,Se,Ge){var st=[ke(ze(Ge)),ke(Math.round(Ke).toString(16)),ke(Math.round(Ie).toString(16)),ke(Math.round(Se).toString(16))];return st.join("")}o.equals=function(Ke,Ie){return!Ke||!Ie?!1:o(Ke).toRgbString()==o(Ie).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function R(Ke,Ie){Ie=Ie===0?0:Ie||10;var Se=o(Ke).toHsl();return Se.s-=Ie/100,Se.s=Re(Se.s),o(Se)}function F(Ke,Ie){Ie=Ie===0?0:Ie||10;var Se=o(Ke).toHsl();return Se.s+=Ie/100,Se.s=Re(Se.s),o(Se)}function j(Ke){return o(Ke).desaturate(100)}function W(Ke,Ie){Ie=Ie===0?0:Ie||10;var Se=o(Ke).toHsl();return Se.l+=Ie/100,Se.l=Re(Se.l),o(Se)}function H(Ke,Ie){Ie=Ie===0?0:Ie||10;var Se=o(Ke).toRgb();return Se.r=Math.max(0,Math.min(255,Se.r-Math.round(255*-(Ie/100)))),Se.g=Math.max(0,Math.min(255,Se.g-Math.round(255*-(Ie/100)))),Se.b=Math.max(0,Math.min(255,Se.b-Math.round(255*-(Ie/100)))),o(Se)}function $(Ke,Ie){Ie=Ie===0?0:Ie||10;var Se=o(Ke).toHsl();return Se.l-=Ie/100,Se.l=Re(Se.l),o(Se)}function N(Ke,Ie){var Se=o(Ke).toHsl(),Ge=(Se.h+Ie)%360;return Se.h=Ge<0?360+Ge:Ge,o(Se)}function Y(Ke){var Ie=o(Ke).toHsl();return Ie.h=(Ie.h+180)%360,o(Ie)}function z(Ke,Ie){if(isNaN(Ie)||Ie<=0)throw new Error("Argument to polyad must be a positive number");for(var Se=o(Ke).toHsl(),Ge=[o(Ke)],st=360/Ie,ut=1;ut<Ie;ut++)Ge.push(o({h:(Se.h+ut*st)%360,s:Se.s,l:Se.l}));return Ge}function ne(Ke){var Ie=o(Ke).toHsl(),Se=Ie.h;return[o(Ke),o({h:(Se+72)%360,s:Ie.s,l:Ie.l}),o({h:(Se+216)%360,s:Ie.s,l:Ie.l})]}function ae(Ke,Ie,Se){Ie=Ie||6,Se=Se||30;var Ge=o(Ke).toHsl(),st=360/Se,ut=[o(Ke)];for(Ge.h=(Ge.h-(st*Ie>>1)+720)%360;--Ie;)Ge.h=(Ge.h+st)%360,ut.push(o(Ge));return ut}function ve(Ke,Ie){Ie=Ie||6;for(var Se=o(Ke).toHsv(),Ge=Se.h,st=Se.s,ut=Se.v,ft=[],St=1/Ie;Ie--;)ft.push(o({h:Ge,s:st,v:ut})),ut=(ut+St)%1;return ft}o.mix=function(Ke,Ie,Se){Se=Se===0?0:Se||50;var Ge=o(Ke).toRgb(),st=o(Ie).toRgb(),ut=Se/100,ft={r:(st.r-Ge.r)*ut+Ge.r,g:(st.g-Ge.g)*ut+Ge.g,b:(st.b-Ge.b)*ut+Ge.b,a:(st.a-Ge.a)*ut+Ge.a};return o(ft)},o.readability=function(Ke,Ie){var Se=o(Ke),Ge=o(Ie);return(Math.max(Se.getLuminance(),Ge.getLuminance())+.05)/(Math.min(Se.getLuminance(),Ge.getLuminance())+.05)},o.isReadable=function(Ke,Ie,Se){var Ge=o.readability(Ke,Ie),st,ut;switch(ut=!1,st=It(Se),st.level+st.size){case"AAsmall":case"AAAlarge":ut=Ge>=4.5;break;case"AAlarge":ut=Ge>=3;break;case"AAAsmall":ut=Ge>=7;break}return ut},o.mostReadable=function(Ke,Ie,Se){var Ge=null,st=0,ut,ft,St,kt;Se=Se||{},ft=Se.includeFallbackColors,St=Se.level,kt=Se.size;for(var en=0;en<Ie.length;en++)ut=o.readability(Ke,Ie[en]),ut>st&&(st=ut,Ge=o(Ie[en]));return o.isReadable(Ke,Ge,{level:St,size:kt})||!ft?Ge:(Se.includeFallbackColors=!1,o.mostReadable(Ke,["#fff","#000"],Se))};var pe=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},be=o.hexNames=Ee(pe);function Ee(Ke){var Ie={};for(var Se in Ke)Ke.hasOwnProperty(Se)&&(Ie[Ke[Se]]=Se);return Ie}function Te(Ke){return Ke=parseFloat(Ke),(isNaN(Ke)||Ke<0||Ke>1)&&(Ke=1),Ke}function je(Ke,Ie){nt(Ke)&&(Ke="100%");var Se=ht(Ke);return Ke=Math.min(Ie,Math.max(0,parseFloat(Ke))),Se&&(Ke=parseInt(Ke*Ie,10)/100),Math.abs(Ke-Ie)<1e-6?1:Ke%Ie/parseFloat(Ie)}function Re(Ke){return Math.min(1,Math.max(0,Ke))}function qe(Ke){return parseInt(Ke,16)}function nt(Ke){return typeof Ke=="string"&&Ke.indexOf(".")!=-1&&parseFloat(Ke)===1}function ht(Ke){return typeof Ke=="string"&&Ke.indexOf("%")!=-1}function ke(Ke){return Ke.length==1?"0"+Ke:""+Ke}function Oe(Ke){return Ke<=1&&(Ke=Ke*100+"%"),Ke}function ze(Ke){return Math.round(parseFloat(Ke)*255).toString(16)}function we(Ke){return qe(Ke)/255}var At=(function(){var Ke="[-\\+]?\\d+%?",Ie="[-\\+]?\\d*\\.\\d+%?",Se="(?:"+Ie+")|(?:"+Ke+")",Ge="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",st="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?";return{CSS_UNIT:new RegExp(Se),rgb:new RegExp("rgb"+Ge),rgba:new RegExp("rgba"+st),hsl:new RegExp("hsl"+Ge),hsla:new RegExp("hsla"+st),hsv:new RegExp("hsv"+Ge),hsva:new RegExp("hsva"+st),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function it(Ke){return!!At.CSS_UNIT.exec(Ke)}function Ct(Ke){Ke=Ke.replace(i,"").replace(r,"").toLowerCase();var Ie=!1;if(pe[Ke])Ke=pe[Ke],Ie=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Se;return(Se=At.rgb.exec(Ke))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=At.rgba.exec(Ke))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=At.hsl.exec(Ke))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=At.hsla.exec(Ke))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=At.hsv.exec(Ke))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=At.hsva.exec(Ke))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=At.hex8.exec(Ke))?{r:qe(Se[1]),g:qe(Se[2]),b:qe(Se[3]),a:we(Se[4]),format:Ie?"name":"hex8"}:(Se=At.hex6.exec(Ke))?{r:qe(Se[1]),g:qe(Se[2]),b:qe(Se[3]),format:Ie?"name":"hex"}:(Se=At.hex4.exec(Ke))?{r:qe(Se[1]+""+Se[1]),g:qe(Se[2]+""+Se[2]),b:qe(Se[3]+""+Se[3]),a:we(Se[4]+""+Se[4]),format:Ie?"name":"hex8"}:(Se=At.hex3.exec(Ke))?{r:qe(Se[1]+""+Se[1]),g:qe(Se[2]+""+Se[2]),b:qe(Se[3]+""+Se[3]),format:Ie?"name":"hex"}:!1}function It(Ke){var Ie,Se;return Ke=Ke||{level:"AA",size:"small"},Ie=(Ke.level||"AA").toUpperCase(),Se=(Ke.size||"small").toLowerCase(),Ie!=="AA"&&Ie!=="AAA"&&(Ie="AA"),Se!=="small"&&Se!=="large"&&(Se="small"),{level:Ie,size:Se}}return o}))})(Bw)),Bw.exports}var wV;function eae(){if(wV)return wh;wV=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.isvalidColorString=wh.red=wh.getContrastingColor=wh.isValidHex=wh.toState=wh.simpleCheckForValidColor=void 0;var n=wRe(),e=r(n),t=ERe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}wh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],h=0,m=0;return(0,e.default)(c,function(v){if(a[v]&&(h+=1,isNaN(a[v])||(m+=1),v==="s"||v==="l")){var x=/^\d+%$/;x.test(a[v])&&(m+=1)}}),h===m?a:!1};var o=wh.toState=function(a,c){var h=a.hex?(0,i.default)(a.hex):(0,i.default)(a),m=h.toHsl(),v=h.toHsv(),x=h.toRgb(),S=h.toHex();m.s===0&&(m.h=c||0,v.h=c||0);var B=S==="000000"&&x.a===0;return{hsl:m,hex:B?"transparent":"#"+S,rgb:x,hsv:v,oldHue:a.h||c||m.h,source:a.source}};return wh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},wh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var h=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return h>=128?"#000":"#fff"},wh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},wh.isvalidColorString=function(a,c){var h=a.replace("","");return(0,i.default)(c+" ("+h+")")._ok},wh}var SV;function ORe(){if(SV)return s_;SV=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.ColorWrap=void 0;var n=Object.assign||function(B){for(var R=1;R<arguments.length;R++){var F=arguments[R];for(var j in F)Object.prototype.hasOwnProperty.call(F,j)&&(B[j]=F[j])}return B},e=(function(){function B(R,F){for(var j=0;j<F.length;j++){var W=F[j];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(R,W.key,W)}}return function(R,F,j){return F&&B(R.prototype,F),j&&B(R,j),R}})(),t=Ba(),i=h(t),r=Jse(),o=h(r),s=eae(),a=c(s);function c(B){if(B&&B.__esModule)return B;var R={};if(B!=null)for(var F in B)Object.prototype.hasOwnProperty.call(B,F)&&(R[F]=B[F]);return R.default=B,R}function h(B){return B&&B.__esModule?B:{default:B}}function m(B,R){if(!(B instanceof R))throw new TypeError("Cannot call a class as a function")}function v(B,R){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:B}function x(B,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);B.prototype=Object.create(R&&R.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(B,R):B.__proto__=R)}var S=s_.ColorWrap=function(R){var F=(function(j){x(W,j);function W(H){m(this,W);var $=v(this,(W.__proto__||Object.getPrototypeOf(W)).call(this));return $.handleChange=function(N,Y){var z=a.simpleCheckForValidColor(N);if(z){var ne=a.toState(N,N.h||$.state.oldHue);$.setState(ne),$.props.onChangeComplete&&$.debounce($.props.onChangeComplete,ne,Y),$.props.onChange&&$.props.onChange(ne,Y)}},$.handleSwatchHover=function(N,Y){var z=a.simpleCheckForValidColor(N);if(z){var ne=a.toState(N,N.h||$.state.oldHue);$.props.onSwatchHover&&$.props.onSwatchHover(ne,Y)}},$.state=n({},a.toState(H.color,0)),$.debounce=(0,o.default)(function(N,Y,z){N(Y,z)},100),$}return e(W,[{key:"render",value:function(){var $={};return this.props.onSwatchHover&&($.onSwatchHover=this.handleSwatchHover),i.default.createElement(R,n({},this.props,this.state,{onChange:this.handleChange},$))}}],[{key:"getDerivedStateFromProps",value:function($,N){return n({},a.toState($.color,N.oldHue))}}]),W})(t.PureComponent||t.Component);return F.propTypes=n({},R.propTypes),F.defaultProps=n({},R.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),F};return s_.default=S,s_}var a_={},k2={},EV;function BRe(){if(EV)return k2;EV=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.handleFocus=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=(function(){function c(h,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}return function(h,m,v){return m&&c(h.prototype,m),v&&c(h,v),h}})(),t=Ba(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function s(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function a(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}return k2.handleFocus=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){a(x,v);function x(){var S,B,R,F;o(this,x);for(var j=arguments.length,W=Array(j),H=0;H<j;H++)W[H]=arguments[H];return F=(B=(R=s(this,(S=x.__proto__||Object.getPrototypeOf(x)).call.apply(S,[this].concat(W))),R),R.state={focus:!1},R.handleFocus=function(){return R.setState({focus:!0})},R.handleBlur=function(){return R.setState({focus:!1})},B),s(R,F)}return e(x,[{key:"render",value:function(){return i.default.createElement(m,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(h,n({},this.props,this.state)))}}]),x})(i.default.Component)},k2}var OV;function IRe(){if(OV)return a_;OV=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.Swatch=void 0;var n=Object.assign||function(v){for(var x=1;x<arguments.length;x++){var S=arguments[x];for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&(v[B]=S[B])}return v},e=Ba(),t=c(e),i=Tm(),r=c(i),o=BRe(),s=OK(),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var h=13,m=a_.Swatch=function(x){var S=x.color,B=x.style,R=x.onClick,F=R===void 0?function(){}:R,j=x.onHover,W=x.title,H=W===void 0?S:W,$=x.children,N=x.focus,Y=x.focusStyle,z=Y===void 0?{}:Y,ne=S==="transparent",ae=(0,r.default)({default:{swatch:n({background:S,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},B,N?z:{})}}),ve=function(je){return F(S,je)},pe=function(je){return je.keyCode===h&&F(S,je)},be=function(je){return j(S,je)},Ee={};return j&&(Ee.onMouseOver=be),t.default.createElement("div",n({style:ae.swatch,onClick:ve,title:H,tabIndex:0,onKeyDown:pe},Ee),$,ne&&t.default.createElement(a.default,{borderRadius:ae.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return a_.default=(0,o.handleFocus)(m),a_}var BV;function tae(){return BV||(BV=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=hRe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return h(e).default}});var t=OK();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return h(t).default}});var i=dRe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return h(i).default}});var r=pRe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return h(r).default}});var o=mRe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return h(o).default}});var s=xRe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return h(s).default}});var a=ORe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return h(a).default}});var c=IRe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return h(c).default}});function h(m){return m&&m.__esModule?m:{default:m}}})(Hk)),Hk}var l_={},oT,IV;function kRe(){if(IV)return oT;IV=1;function n(e){return e===void 0}return oT=n,oT}var XM={},kV;function TRe(){if(kV)return XM;kV=1,Object.defineProperty(XM,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=Ba(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return XM.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,m=h===void 0?o:h,v=s.height,x=v===void 0?o:v,S=s.style,B=S===void 0?{}:S,R=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:m,height:x},B)},R),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},XM}var TV;function RRe(){if(TV)return l_;TV=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.ChromeFields=void 0;var n=(function(){function W(H,$){for(var N=0;N<$.length;N++){var Y=$[N];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(H,Y.key,Y)}}return function(H,$,N){return $&&W(H.prototype,$),N&&W(H,N),H}})(),e=Ba(),t=S(e),i=Tm(),r=S(i),o=eae(),s=x(o),a=kRe(),c=S(a),h=tae(),m=TRe(),v=S(m);function x(W){if(W&&W.__esModule)return W;var H={};if(W!=null)for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(H[$]=W[$]);return H.default=W,H}function S(W){return W&&W.__esModule?W:{default:W}}function B(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")}function R(W,H){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:W}function F(W,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);W.prototype=Object.create(H&&H.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(W,H):W.__proto__=H)}var j=l_.ChromeFields=(function(W){F(H,W);function H($){B(this,H);var N=R(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return N.toggleViews=function(){N.state.view==="hex"?N.setState({view:"rgb"}):N.state.view==="rgb"?N.setState({view:"hsl"}):N.state.view==="hsl"&&(N.props.hsl.a===1?N.setState({view:"hex"}):N.setState({view:"rgb"}))},N.handleChange=function(Y,z){Y.hex?s.isValidHex(Y.hex)&&N.props.onChange({hex:Y.hex,source:"hex"},z):Y.r||Y.g||Y.b?N.props.onChange({r:Y.r||N.props.rgb.r,g:Y.g||N.props.rgb.g,b:Y.b||N.props.rgb.b,source:"rgb"},z):Y.a?(Y.a<0?Y.a=0:Y.a>1&&(Y.a=1),N.props.onChange({h:N.props.hsl.h,s:N.props.hsl.s,l:N.props.hsl.l,a:Math.round(Y.a*100)/100,source:"rgb"},z)):(Y.h||Y.s||Y.l)&&(typeof Y.s=="string"&&Y.s.includes("%")&&(Y.s=Y.s.replace("%","")),typeof Y.l=="string"&&Y.l.includes("%")&&(Y.l=Y.l.replace("%","")),Y.s==1?Y.s=.01:Y.l==1&&(Y.l=.01),N.props.onChange({h:Y.h||N.props.hsl.h,s:Number((0,c.default)(Y.s)?N.props.hsl.s:Y.s),l:Number((0,c.default)(Y.l)?N.props.hsl.l:Y.l),source:"hsl"},z))},N.showHighlight=function(Y){Y.currentTarget.style.background="#eee"},N.hideHighlight=function(Y){Y.currentTarget.style.background="transparent"},$.hsl.a!==1&&$.view==="hex"?N.state={view:"rgb"}:N.state={view:$.view},N}return n(H,[{key:"render",value:function(){var N=this,Y=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),z=void 0;return this.state.view==="hex"?z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:Y.alpha},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(z=t.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Y.field},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Y.alpha},t.default.createElement(h.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:Y.wrap,className:"flexbox-fix"},z,t.default.createElement("div",{style:Y.toggle},t.default.createElement("div",{style:Y.icon,onClick:this.toggleViews,ref:function(ae){return N.icon=ae}},t.default.createElement(v.default,{style:Y.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(N,Y){return N.hsl.a!==1&&Y.view==="hex"?{view:"rgb"}:null}}]),H})(t.default.Component);return j.defaultProps={view:"hex"},l_.default=j,l_}var u_={},RV;function DRe(){if(RV)return u_;RV=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ChromePointer=void 0;var n=Ba(),e=r(n),t=Tm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=u_.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return u_.default=o,u_}var c_={},DV;function PRe(){if(DV)return c_;DV=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.ChromePointerCircle=void 0;var n=Ba(),e=r(n),t=Tm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=c_.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return c_.default=o,c_}var PV;function URe(){if(PV)return $C;PV=1,Object.defineProperty($C,"__esModule",{value:!0}),$C.Chrome=void 0;var n=Ba(),e=R(n),t=b1(),i=R(t),r=Tm(),o=R(r),s=Xse(),a=R(s),c=tae(),h=RRe(),m=R(h),v=DRe(),x=R(v),S=PRe(),B=R(S);function R(j){return j&&j.__esModule?j:{default:j}}var F=$C.Chrome=function(W){var H=W.width,$=W.onChange,N=W.disableAlpha,Y=W.rgb,z=W.hsl,ne=W.hsv,ae=W.hex,ve=W.renderers,pe=W.styles,be=pe===void 0?{}:pe,Ee=W.className,Te=Ee===void 0?"":Ee,je=W.defaultView,Re=(0,o.default)((0,a.default)({default:{picker:{width:H,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+Y.r+", "+Y.g+", "+Y.b+", "+Y.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},be),{disableAlpha:N});return e.default.createElement("div",{style:Re.picker,className:"chrome-picker "+Te},e.default.createElement("div",{style:Re.saturation},e.default.createElement(c.Saturation,{style:Re.Saturation,hsl:z,hsv:ne,pointer:B.default,onChange:$})),e.default.createElement("div",{style:Re.body},e.default.createElement("div",{style:Re.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Re.color},e.default.createElement("div",{style:Re.swatch},e.default.createElement("div",{style:Re.active}),e.default.createElement(c.Checkboard,{renderers:ve}))),e.default.createElement("div",{style:Re.toggles},e.default.createElement("div",{style:Re.hue},e.default.createElement(c.Hue,{style:Re.Hue,hsl:z,pointer:x.default,onChange:$})),e.default.createElement("div",{style:Re.alpha},e.default.createElement(c.Alpha,{style:Re.Alpha,rgb:Y,hsl:z,pointer:x.default,renderers:ve,onChange:$})))),e.default.createElement(m.default,{rgb:Y,hsl:z,hex:ae,view:je,onChange:$,disableAlpha:N})))};return F.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},F.defaultProps={width:225,disableAlpha:!1,styles:{}},$C.default=(0,c.ColorWrap)(F),$C}var LRe=URe();const KRe=eu(LRe);function Mr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mr=function(){return s},s}Mr();function FRe(n){Mr().f[0]++;const e=(Mr().s[0]++,n.rgb);return Mr().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class BK extends On.Component{state=(Mr().s[2]++,{pickerOpened:!1});colorInput=(Mr().s[3]++,null);constructor(e){Mr().f[1]++,Mr().s[4]++,super(e),Mr().s[5]++,this.onChangeNoCheck=o9.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){Mr().f[2]++,Mr().s[6]++,this.props.onChange(e)}calcPickerOffset=(Mr().s[7]++,()=>{Mr().f[3]++;const e=(Mr().s[8]++,this.colorInput);if(Mr().s[9]++,e){Mr().b[0][0]++;const t=(Mr().s[10]++,e.getBoundingClientRect());return Mr().s[11]++,{top:t.top,left:t.left+196}}else return Mr().b[0][1]++,Mr().s[12]++,{top:160,left:555}});togglePicker=(Mr().s[13]++,()=>{Mr().f[4]++,Mr().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){Mr().f[5]++,Mr().s[15]++;try{return Mr().s[16]++,Hu(this.props.value).rgb()}catch(e){return Mr().s[17]++,console.warn("Error parsing color: ",e),Mr().s[18]++,Hu("rgb(255,255,255)")}}onChange(e){Mr().f[6]++,Mr().s[19]++,this.props.onChange(e===""?(Mr().b[1][0]++,void 0):(Mr().b[1][1]++,e))}render(){Mr().f[7]++;const e=(Mr().s[20]++,this.calcPickerOffset()),t=(Mr().s[21]++,this.color.object()),i=(Mr().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(Mr().s[23]++,te.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[te.jsx(KRe,{color:i,onChange:s=>(Mr().f[8]++,Mr().s[24]++,this.onChangeNoCheck(FRe(s)))}),te.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(Mr().s[25]++,{backgroundColor:this.props.value});return Mr().s[26]++,te.jsxs("div",{className:"maputnik-color-wrapper",children:[(Mr().b[2][0]++,this.state.pickerOpened&&(Mr().b[2][1]++,r)),te.jsx("div",{className:"maputnik-color-swatch",style:o}),te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{Mr().f[9]++,Mr().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(Mr().b[3][0]++,this.props.value):(Mr().b[3][1]++,""),onChange:s=>(Mr().f[10]++,Mr().s[28]++,this.onChange(s.target.value))})]})}}function Zt(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zt=function(){return s},s}Zt();class m1 extends On.Component{static defaultProps=(Zt().s[0]++,{rangeStep:1});_keyboardEvent=(Zt().s[1]++,!1);constructor(e){Zt().f[0]++,Zt().s[2]++,super(e),Zt().s[3]++,this.state={uuid:+Ox(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Zt().f[1]++,Zt().s[4]++,Zt().b[1][0]++,!t.editing&&(Zt().b[1][1]++,e.value!==t.value)?(Zt().b[0][0]++,Zt().s[5]++,{value:e.value,dirtyValue:e.value}):(Zt().b[0][1]++,Zt().s[6]++,null)}changeValue(e){Zt().f[2]++;const t=(Zt().s[7]++,Zt().b[3][0]++,e===""||(Zt().b[3][1]++,e===void 0)?(Zt().b[2][0]++,void 0):(Zt().b[2][1]++,+e)),i=(Zt().s[8]++,this.props.value!==t);Zt().s[9]++,Zt().b[5][0]++,this.isValid(t)&&(Zt().b[5][1]++,i)?(Zt().b[4][0]++,Zt().s[10]++,this.props.onChange?(Zt().b[6][0]++,Zt().s[11]++,this.props.onChange(t)):Zt().b[6][1]++,Zt().s[12]++,this.setState({value:t})):(Zt().b[4][1]++,Zt().s[13]++,Zt().b[8][0]++,!this.isValid(t)&&(Zt().b[8][1]++,i)?(Zt().b[7][0]++,Zt().s[14]++,this.setState({value:void 0})):Zt().b[7][1]++),Zt().s[15]++,this.setState({dirtyValue:e===""?(Zt().b[9][0]++,void 0):(Zt().b[9][1]++,e)})}isValid(e){if(Zt().f[3]++,Zt().s[16]++,e===void 0)return Zt().b[10][0]++,Zt().s[17]++,!0;Zt().b[10][1]++;const t=(Zt().s[18]++,+e);return Zt().s[19]++,isNaN(t)?(Zt().b[11][0]++,Zt().s[20]++,!1):(Zt().b[11][1]++,Zt().s[21]++,Zt().b[13][0]++,!isNaN(this.props.min)&&(Zt().b[13][1]++,t<this.props.min)?(Zt().b[12][0]++,Zt().s[22]++,!1):(Zt().b[12][1]++,Zt().s[23]++,Zt().b[15][0]++,!isNaN(this.props.max)&&(Zt().b[15][1]++,t>this.props.max)?(Zt().b[14][0]++,Zt().s[24]++,!1):(Zt().b[14][1]++,Zt().s[25]++,!0)))}resetValue=(Zt().s[26]++,()=>{if(Zt().f[4]++,Zt().s[27]++,this.setState({editing:!1}),Zt().s[28]++,this.state.value)Zt().b[16][1]++;else{Zt().b[16][0]++,Zt().s[29]++;return}Zt().s[30]++,this.isValid(this.state.value)?Zt().b[17][1]++:(Zt().b[17][0]++,Zt().s[31]++,this.isValid(this.props.value)?(Zt().b[18][0]++,Zt().s[32]++,this.changeValue(this.props.value),Zt().s[33]++,this.setState({dirtyValue:this.props.value})):(Zt().b[18][1]++,Zt().s[34]++,this.changeValue(void 0),Zt().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Zt().s[36]++,e=>{Zt().f[5]++;let t=(Zt().s[37]++,parseFloat(e.target.value));const i=(Zt().s[38]++,this.props.rangeStep);let r=(Zt().s[39]++,t);if(Zt().s[40]++,i){Zt().b[19][0]++;const o=(Zt().s[41]++,t%i);Zt().s[42]++,this._keyboardEvent?(Zt().b[20][0]++,Zt().s[43]++,t<+this.state.dirtyValue?(Zt().b[21][0]++,Zt().s[44]++,t=this.state.value-i):(Zt().b[21][1]++,Zt().s[45]++,t=this.state.value+i),Zt().s[46]++,r=t):(Zt().b[20][1]++,Zt().s[47]++,o<i/2?(Zt().b[22][0]++,Zt().s[48]++,t=t-o):(Zt().b[22][1]++,Zt().s[49]++,t=t+(i-o)))}else Zt().b[19][1]++;Zt().s[50]++,this._keyboardEvent=!1,Zt().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Zt().s[52]++,this.setState({value:t,dirtyValue:r}),Zt().s[53]++,this.props.onChange?(Zt().b[23][0]++,Zt().s[54]++,this.props.onChange(t)):Zt().b[23][1]++});render(){if(Zt().f[6]++,Zt().s[55]++,Zt().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Zt().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Zt().b[25][2]++,this.props.min!==void 0)&&(Zt().b[25][3]++,this.props.max!==void 0)&&(Zt().b[25][4]++,this.props.allowRange)){Zt().b[24][0]++;const e=(Zt().s[56]++,this.state.editing?(Zt().b[26][0]++,this.state.dirtyValue):(Zt().b[26][1]++,this.state.value)),t=(Zt().s[57]++,this.props.default===void 0?(Zt().b[27][0]++,""):(Zt().b[27][1]++,this.props.default));let i;return Zt().s[58]++,this.state.editingRange?(Zt().b[28][0]++,Zt().s[59]++,i=this.state.value):(Zt().b[28][1]++,Zt().s[60]++,i=e),Zt().s[61]++,te.jsxs("div",{className:"maputnik-number-container",children:[te.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Zt().b[29][0]++,t):(Zt().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Zt().f[7]++,Zt().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Zt().f[8]++,Zt().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Zt().f[9]++,Zt().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Zt().f[10]++,Zt().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),te.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Zt().b[30][0]++,""):(Zt().b[30][1]++,i),onFocus:r=>{Zt().f[11]++,Zt().s[66]++,this.setState({editing:!0})},onChange:r=>{Zt().f[12]++,Zt().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Zt().f[13]++,Zt().s[68]++,this.setState({editing:!1}),Zt().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Zt().b[24][1]++;const e=(Zt().s[70]++,this.state.editing?(Zt().b[31][0]++,this.state.dirtyValue):(Zt().b[31][1]++,this.state.value));return Zt().s[71]++,te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Zt().b[32][0]++,""):(Zt().b[32][1]++,e),onChange:t=>(Zt().f[14]++,Zt().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Zt().f[15]++,Zt().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Bg(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bg=function(){return s},s}Bg();class nae extends On.Component{static defaultProps=(Bg().s[0]++,{value:!1});onChange=(Bg().s[1]++,()=>{Bg().f[0]++,Bg().s[2]++,this.props.onChange(!this.props.value)});render(){return Bg().f[1]++,Bg().s[3]++,te.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[te.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),te.jsx("div",{className:"maputnik-checkbox-box",children:te.jsx("svg",{style:{display:this.props.value?(Bg().b[0][0]++,"inline"):(Bg().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:te.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function gi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gi=function(){return s},s}gi();class jD extends On.Component{static defaultProps=(gi().s[0]++,{value:[],default:[]});constructor(e){gi().f[0]++,gi().s[1]++,super(e),gi().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){gi().f[1]++;const i=(gi().s[3]++,[]),r=(gi().s[4]++,t.initialPropsValue.slice(0));return gi().s[5]++,Array(e.length).fill(null).map((o,s)=>{gi().f[2]++,gi().s[6]++,e.value[s]===t.initialPropsValue[s]?(gi().b[0][0]++,gi().s[7]++,i[s]=t.value[s]):(gi().b[0][1]++,gi().s[8]++,i[s]=t.value[s],gi().s[9]++,r[s]=t.value[s])}),gi().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return gi().f[3]++,gi().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{gi().f[4]++;const r=(gi().s[12]++,e[i]);return gi().s[13]++,gi().b[1][0]++,!(r===void 0||(gi().b[1][1]++,r===""))})}changeValue(e,t){gi().f[5]++;const i=(gi().s[14]++,this.state.value.slice(0));gi().s[15]++,i[e]=t,gi().s[16]++,this.setState({value:i},()=>{gi().f[6]++,gi().s[17]++,gi().b[3][0]++,this.isComplete(i)&&(gi().b[3][1]++,this.props.onChange)?(gi().b[2][0]++,gi().s[18]++,this.props.onChange(i)):(gi().b[2][1]++,gi().s[19]++,this.props.onChange?(gi().b[4][0]++,gi().s[20]++,this.props.onChange(void 0)):gi().b[4][1]++)})}render(){gi().f[7]++;const{value:e}=(gi().s[21]++,this.state),t=(gi().s[22]++,gi().b[5][0]++,e.length>0&&(gi().b[5][1]++,!e.every(r=>(gi().f[8]++,gi().s[23]++,gi().b[6][0]++,r===""||(gi().b[6][1]++,r===void 0))))),i=(gi().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(gi().f[9]++,gi().s[25]++,this.props.type==="number"?(gi().b[7][0]++,gi().s[26]++,te.jsx(m1,{default:(gi().b[9][0]++,t||(gi().b[9][1]++,!this.props.default)?(gi().b[8][0]++,void 0):(gi().b[8][1]++,this.props.default[o])),value:e[o],required:t?(gi().b[10][0]++,!0):(gi().b[10][1]++,!1),onChange:s=>(gi().f[10]++,gi().s[27]++,this.changeValue(o,s)),"aria-label":(gi().b[11][0]++,this.props["aria-label"]||(gi().b[11][1]++,this.props.label))},o)):(gi().b[7][1]++,gi().s[28]++,te.jsx(xm,{default:(gi().b[13][0]++,t||(gi().b[13][1]++,!this.props.default)?(gi().b[12][0]++,void 0):(gi().b[12][1]++,this.props.default[o])),value:e[o],required:t?(gi().b[14][0]++,!0):(gi().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(gi().b[15][0]++,this.props["aria-label"]||(gi().b[15][1]++,this.props.label))},o)))));return gi().s[29]++,te.jsx("div",{className:"maputnik-array",children:i})}}function xu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xu=function(){return s},s}xu();class zRe extends On.Component{render(){xu().f[0]++;let e=(xu().s[0]++,this.props.options);xu().s[1]++,xu().b[1][0]++,e.length>0&&(xu().b[1][1]++,!Array.isArray(e[0]))?(xu().b[0][0]++,xu().s[2]++,e=e.map(r=>(xu().f[1]++,xu().s[3]++,[r,r]))):xu().b[0][1]++;const t=(xu().s[4]++,xu().b[2][0]++,this.props.value||(xu().b[2][1]++,e[0][0])),i=(xu().s[5]++,e.map(([r,o])=>(xu().f[2]++,xu().s[6]++,te.jsxs("label",{className:c0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[te.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(xu().f[3]++,xu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return xu().s[8]++,te.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function Ja(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ja=function(){return s},s}Ja();function jRe(n){Ja().f[0]++;let e=(Ja().s[0]++,0);return Ja().s[1]++,n.forEach(([t,i])=>{Ja().f[1]++,Ja().s[2]++,e+=i.length}),Ja().s[3]++,e}class IK extends On.Component{render(){Ja().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(Ja().s[4]++,this.props);return Ja().s[5]++,Ja().b[1][0]++,e.length<=3&&(Ja().b[1][1]++,jRe(e)<=20)?(Ja().b[0][0]++,Ja().s[6]++,te.jsx(zRe,{name:r,options:e,value:(Ja().b[2][0]++,t||(Ja().b[2][1]++,this.props.default)),onChange:i,"aria-label":(Ja().b[3][0]++,this.props["aria-label"]||(Ja().b[3][1]++,o))})):(Ja().b[0][1]++,Ja().s[7]++,te.jsx(oC,{options:e,value:(Ja().b[4][0]++,t||(Ja().b[4][1]++,this.props.default)),onChange:i,"aria-label":(Ja().b[5][0]++,this.props["aria-label"]||(Ja().b[5][1]++,o))}))}}function nx(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return nx=function(){return s},s}nx();class NRe extends On.Component{render(){nx().f[0]++;const e=(nx().s[0]++,this.props.t);return nx().s[1]++,te.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const sT=(nx().s[2]++,No()(NRe));function wr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="447f54dcea7174dfde20df5fd4ad658ec6e8baa0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAG7D,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"447f54dcea7174dfde20df5fd4ad658ec6e8baa0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wr=function(){return s},s}wr();function aT(n,e){if(wr().f[0]++,wr().s[0]++,n===""){wr().b[0][0]++,wr().s[1]++;return}else wr().b[0][1]++;let t;wr().s[2]++;const i=s=>{wr().f[1]++,wr().s[3]++;try{const a=(wr().s[4]++,new URL(s));return wr().s[5]++,a.protocol}catch{wr().s[6]++;return}},r=(wr().s[7]++,i(n)),o=(wr().s[8]++,window.location.protocol==="https:");return wr().s[9]++,r?(wr().b[1][1]++,wr().s[13]++,wr().b[4][0]++,r&&(wr().b[4][1]++,r==="http:")&&(wr().b[4][2]++,window.location.protocol==="https:")?(wr().b[3][0]++,wr().s[14]++,t=te.jsx(sT,{children:te.jsxs(_b,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",te.jsx("code",{children:"https://"})," domain"]})})):wr().b[3][1]++):(wr().b[1][0]++,wr().s[10]++,o?(wr().b[2][0]++,wr().s[11]++,t=te.jsx(sT,{children:te.jsxs(_b,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"https://"})]})})):(wr().b[2][1]++,wr().s[12]++,t=te.jsx(sT,{children:te.jsxs(_b,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"http://"})," or ",te.jsx("code",{children:"https://"})]})}))),wr().s[15]++,t}class GRe extends On.Component{static defaultProps=(wr().s[16]++,{onInput:()=>{wr().f[2]++}});constructor(e){wr().f[3]++,wr().s[17]++,super(e),wr().s[18]++,this.state={error:aT(e.value,e.t)}}onInput=(wr().s[19]++,e=>{wr().f[4]++,wr().s[20]++,this.setState({error:aT(e,this.props.t)}),wr().s[21]++,this.props.onInput?(wr().b[5][0]++,wr().s[22]++,this.props.onInput(e)):wr().b[5][1]++});onChange=(wr().s[23]++,e=>{wr().f[5]++,wr().s[24]++,this.setState({error:aT(e,this.props.t)}),wr().s[25]++,this.props.onChange(e)});render(){return wr().f[6]++,wr().s[26]++,te.jsxs("div",{children:[te.jsx(xm,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const kK=(wr().s[27]++,No()(GRe));function $n(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $n=function(){return s},s}$n();class WRe extends On.Component{changeValue(e,t){$n().f[0]++;const i=($n().s[0]++,this.values.slice(0));$n().s[1]++,i[e]=t,$n().s[2]++,this.props.onChange?($n().b[0][0]++,$n().s[3]++,this.props.onChange(i)):$n().b[0][1]++}get values(){return $n().f[1]++,$n().s[4]++,$n().b[1][0]++,this.props.value||($n().b[1][1]++,this.props.default)||($n().b[1][2]++,[])}addValue=($n().s[5]++,()=>{$n().f[2]++;const e=($n().s[6]++,this.values.slice(0));if($n().s[7]++,this.props.type==="number")$n().b[2][0]++,$n().s[8]++,e.push(0);else if($n().b[2][1]++,$n().s[9]++,this.props.type==="url")$n().b[3][0]++,$n().s[10]++,e.push("");else if($n().b[3][1]++,$n().s[11]++,this.props.type==="enum"){$n().b[4][0]++;const{fieldSpec:t}=($n().s[12]++,this.props),i=($n().s[13]++,Object.keys(t.values)[0]);$n().s[14]++,e.push(i)}else $n().b[4][1]++,$n().s[15]++,this.props.type==="color"?($n().b[5][0]++,$n().s[16]++,e.push("#000000")):($n().b[5][1]++,$n().s[17]++,e.push(""));$n().s[18]++,this.props.onChange?($n().b[6][0]++,$n().s[19]++,this.props.onChange(e)):$n().b[6][1]++});deleteValue(e){$n().f[3]++;const t=($n().s[20]++,this.values.slice(0));$n().s[21]++,t.splice(e,1),$n().s[22]++,this.props.onChange?($n().b[7][0]++,$n().s[23]++,this.props.onChange(t.length>0?($n().b[8][0]++,t):($n().b[8][1]++,void 0))):$n().b[7][1]++}render(){$n().f[4]++;const e=($n().s[24]++,this.props.t),t=($n().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=($n().s[26]++,this.values.map((r,o)=>{$n().f[5]++;const s=($n().s[27]++,te.jsx(QRe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if($n().s[28]++,this.props.type==="url")$n().b[9][0]++,$n().s[29]++,a=te.jsx(kK,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":($n().b[10][0]++,this.props["aria-label"]||($n().b[10][1]++,this.props.label))});else if($n().b[9][1]++,$n().s[30]++,this.props.type==="number")$n().b[11][0]++,$n().s[31]++,a=te.jsx(m1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":($n().b[12][0]++,this.props["aria-label"]||($n().b[12][1]++,this.props.label))});else if($n().b[11][1]++,$n().s[32]++,this.props.type==="enum"){$n().b[13][0]++;const c=($n().s[33]++,Object.keys(this.props.fieldSpec?.values).map(h=>($n().f[6]++,$n().s[34]++,[h,AK(h)])));$n().s[35]++,a=te.jsx(IK,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":($n().b[14][0]++,this.props["aria-label"]||($n().b[14][1]++,this.props.label))})}else $n().b[13][1]++,$n().s[36]++,this.props.type==="color"?($n().b[15][0]++,$n().s[37]++,a=te.jsx(BK,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":($n().b[16][0]++,this.props["aria-label"]||($n().b[16][1]++,this.props.label))})):($n().b[15][1]++,$n().s[38]++,a=te.jsx(xm,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":($n().b[17][0]++,this.props["aria-label"]||($n().b[17][1]++,this.props.label))}));return $n().s[39]++,te.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[te.jsx("div",{className:"maputnik-array-block-action",children:s}),te.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return $n().s[40]++,te.jsxs("div",{className:"maputnik-array",children:[i,te.jsx(Zs,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const Iw=($n().s[41]++,No()(WRe));class QRe extends On.Component{render(){$n().f[7]++;const e=($n().s[42]++,this.props.t);return $n().s[43]++,te.jsx(Zs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:te.jsx(IL,{label:te.jsx(Zb,{})})})}}function Ts(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ts=function(){return s},s}Ts();class qRe extends On.Component{static defaultProps=(Ts().s[0]++,{fonts:[]});get values(){Ts().f[0]++;const e=(Ts().s[1]++,Ts().b[0][0]++,this.props.value||(Ts().b[0][1]++,this.props.default)||(Ts().b[0][2]++,[]));return Ts().s[2]++,e[e.length-1]!==""?(Ts().b[1][0]++,Ts().s[3]++,e.concat("")):(Ts().b[1][1]++,Ts().s[4]++,e)}changeFont(e,t){Ts().f[1]++;const i=(Ts().s[5]++,this.values.slice(0));Ts().s[6]++,i[e]=t;const r=(Ts().s[7]++,i.filter(o=>(Ts().f[2]++,Ts().s[8]++,o!==void 0)).filter(o=>(Ts().f[3]++,Ts().s[9]++,o!=="")));Ts().s[10]++,this.props.onChange(r)}render(){Ts().f[4]++;const e=(Ts().s[11]++,this.values.map((t,i)=>(Ts().f[5]++,Ts().s[12]++,te.jsx("li",{children:te.jsx(k5,{"aria-label":(Ts().b[2][0]++,this.props["aria-label"]||(Ts().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Ts().f[6]++,Ts().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Ts().s[14]++,te.jsx("ul",{className:"maputnik-font",children:e})}}function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yi=function(){return s},s}Yi();const YRe=(Yi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class ix extends On.Component{childNodes(){Yi().f[0]++;const e=(Yi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Yi().f[1]++,Yi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Yi().s[3]++,this.props.fieldSpec?.type){case"number":return Yi().b[0][0]++,Yi().s[4]++,te.jsx(m1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Yi().b[0][1]++;{const t=(Yi().s[5]++,Object.keys((Yi().b[1][0]++,this.props.fieldSpec.values||(Yi().b[1][1]++,[]))).map(i=>(Yi().f[2]++,Yi().s[6]++,[i,AK(i)])));return Yi().s[7]++,te.jsx(IK,{...e,options:t})}case"resolvedImage":Yi().b[0][2]++;case"formatted":Yi().b[0][3]++;case"string":if(Yi().b[0][4]++,Yi().s[8]++,YRe.indexOf(this.props.fieldName)>=0){Yi().b[2][0]++;const t=(Yi().s[9]++,Yi().b[3][0]++,this.props.fieldSpec.values||(Yi().b[3][1]++,[]));return Yi().s[10]++,te.jsx(k5,{...e,options:t.map(i=>(Yi().f[3]++,Yi().s[11]++,[i,i]))})}else return Yi().b[2][1]++,Yi().s[12]++,te.jsx(xm,{...e});case"color":return Yi().b[0][5]++,Yi().s[13]++,te.jsx(BK,{...e});case"boolean":return Yi().b[0][6]++,Yi().s[14]++,te.jsx(nae,{...e});case"array":return Yi().b[0][7]++,Yi().s[15]++,this.props.fieldName==="text-font"?(Yi().b[4][0]++,Yi().s[16]++,te.jsx(qRe,{...e,fonts:this.props.fieldSpec.values})):(Yi().b[4][1]++,Yi().s[17]++,this.props.fieldSpec.length?(Yi().b[5][0]++,Yi().s[18]++,te.jsx(jD,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Yi().b[5][1]++,Yi().s[19]++,te.jsx(Iw,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Yi().b[0][8]++,Yi().s[20]++,te.jsx(Iw,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Yi().b[6][0]++,this.props.value):(Yi().b[6][1]++,[this.props.value])});case"colorArray":return Yi().b[0][9]++,Yi().s[21]++,te.jsx(Iw,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Yi().b[7][0]++,this.props.value):(Yi().b[7][1]++,[this.props.value])});case"padding":return Yi().b[0][10]++,Yi().s[22]++,te.jsx(jD,{...e,type:"number",value:Array.isArray(this.props.value)?(Yi().b[8][0]++,this.props.value):(Yi().b[8][1]++,[this.props.value]),length:4});default:return Yi().b[0][11]++,Yi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Yi().s[24]++,null}}render(){return Yi().f[4]++,Yi().s[25]++,te.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function qc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qc=function(){return s},s}qc();qc().s[0]++;const Py=n=>{qc().f[0]++;const[e,t]=(qc().s[1]++,On.useState(!1)),i=(qc().s[2]++,On.useRef(Ox("fieldset_label_")));qc().s[3]++;const r=o=>{qc().f[1]++,qc().s[4]++,t(o)};return qc().s[5]++,te.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(qc().b[0][0]++,n.fieldSpec&&(qc().b[0][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(IL,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(qc().b[1][0]++,!n.fieldSpec&&(qc().b[1][1]++,te.jsx("div",{className:c0({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:n.action}),te.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(qc().b[2][0]++,n.fieldSpec&&(qc().b[2][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(qc().b[3][0]++,""):(qc().b[3][1]++,"none")},children:te.jsx(I6,{fieldSpec:n.fieldSpec})})))]})};function Lo(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Lo=function(){return s},s}Lo();function $Re(n){switch(Lo().f[0]++,Lo().s[0]++,n.type){case"color":return Lo().b[0][0]++,Lo().s[1]++,Ps;case"enum":return Lo().b[0][1]++,Lo().s[2]++,Object.keys(n.values).length<=3?(Lo().b[1][0]++,Py):(Lo().b[1][1]++,Ps);case"boolean":return Lo().b[0][2]++,Lo().s[3]++,Ps;case"array":return Lo().b[0][3]++,Lo().s[4]++,Py;case"resolvedImage":return Lo().b[0][4]++,Lo().s[5]++,Ps;case"number":return Lo().b[0][5]++,Lo().s[6]++,Ps;case"string":return Lo().b[0][6]++,Lo().s[7]++,Ps;case"formatted":return Lo().b[0][7]++,Lo().s[8]++,Ps;case"padding":return Lo().b[0][8]++,Lo().s[9]++,Ps;case"numberArray":return Lo().b[0][9]++,Lo().s[10]++,Py;case"colorArray":return Lo().b[0][10]++,Lo().s[11]++,Py;case"variableAnchorOffsetCollection":return Lo().b[0][11]++,Lo().s[12]++,Py;default:return Lo().b[0][12]++,Lo().s[13]++,console.warn("No such type for: "+n.type),Lo().s[14]++,Ps}}Lo().s[15]++;const VRe=n=>{Lo().f[1]++;const e=(Lo().s[16]++,$Re(n.fieldSpec));return Lo().s[17]++,te.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:te.jsx(ix,{...n})})};function Mu(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mu=function(){return s},s}Mu();class HRe extends On.Component{render(){Mu().f[0]++;const e=(Mu().s[0]++,this.props.t);if(Mu().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){Mu().b[0][0]++;const t=(Mu().s[2]++,te.jsx(Zs,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:te.jsx(D4,{})})),i=(Mu().s[3]++,te.jsx(Zs,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:te.jsx(sz,{})}));let r;return Mu().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(Mu().b[1][0]++,Mu().s[5]++,r=te.jsx(Zs,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:te.jsx(Hfe,{})})):Mu().b[1][1]++,Mu().s[6]++,te.jsxs("div",{children:[t,r,i]})}else if(Mu().b[0][1]++,Mu().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){Mu().b[2][0]++;const t=(Mu().s[8]++,te.jsx(Zs,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:te.jsx(sz,{})}));return Mu().s[9]++,te.jsx("div",{children:t})}else return Mu().b[2][1]++,Mu().s[10]++,te.jsx("div",{})}}const ZRe=(Mu().s[11]++,No()(HRe));function Ig(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ig=function(){return s},s}Ig();class XRe extends On.Component{static defaultProps=(Ig().s[0]++,{errors:{}});render(){Ig().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Ig().s[1]++,this.props),r=(Ig().s[2]++,te.jsx(ZRe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(Ig().s[3]++,e[i+"."+t]);return Ig().s[4]++,te.jsx(VRe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:z6((Ig().b[0][0]++,this.props.fieldName||(Ig().b[0][1]++,""))),action:r})}}function yd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yd=function(){return s},s}yd();function iae(n,e){yd().f[0]++;const t=(yd().s[0]++,+n),i=(yd().s[1]++,+e);return yd().s[2]++,t<i?(yd().b[0][0]++,yd().s[3]++,-1):(yd().b[0][1]++,yd().s[4]++,t>i?(yd().b[1][0]++,yd().s[5]++,1):(yd().b[1][1]++,yd().s[6]++,0))}function rm(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rm=function(){return s},s}rm();function np(n){if(rm().f[0]++,rm().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return rm().b[0][0]++,rm().s[1]++,n.default;rm().b[0][1]++;const e=(rm().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return rm().s[3]++,rm().b[1][0]++,e[n.type]||(rm().b[1][1]++,"")}function rx(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rx=function(){return s},s}rx();class JRe extends On.Component{render(){rx().f[0]++;const e=(rx().s[0]++,this.props.t);return rx().s[1]++,te.jsx(Zs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:te.jsx(Zb,{})})}}const rae=(rx().s[2]++,No()(JRe));function Vt(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vt=function(){return s},s}Vt();function UV(n,e){Vt().f[0]++;let t;return Vt().s[0]++,Vt().b[1][0]++,n.value&&(Vt().b[1][1]++,n.value.stops)?(Vt().b[0][0]++,Vt().s[1]++,n.value.stops.forEach((i,r)=>{Vt().f[1]++,Vt().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?Vt().b[2][1]++:(Vt().b[2][0]++,Vt().s[3]++,t?Vt().b[3][1]++:(Vt().b[3][0]++,Vt().s[4]++,t={...e}),Vt().s[5]++,t[r]=Ox("stop-"))})):Vt().b[0][1]++,Vt().s[6]++,t}class eDe extends On.Component{state=(Vt().s[7]++,{refs:{}});componentDidMount(){Vt().f[2]++;const e=(Vt().s[8]++,UV(this.props,this.state));Vt().s[9]++,e?(Vt().b[4][0]++,Vt().s[10]++,this.setState({refs:e})):Vt().b[4][1]++}static getDerivedStateFromProps(e,t){Vt().f[3]++;const i=(Vt().s[11]++,UV(e,t));return Vt().s[12]++,i?(Vt().b[5][0]++,Vt().s[13]++,{refs:i}):(Vt().b[5][1]++,Vt().s[14]++,null)}getFieldFunctionType(e){return Vt().f[4]++,Vt().s[15]++,e.expression.interpolated?(Vt().b[6][0]++,Vt().s[16]++,"exponential"):(Vt().b[6][1]++,Vt().s[17]++,e.type==="number"?(Vt().b[7][0]++,Vt().s[18]++,"interval"):(Vt().b[7][1]++,Vt().s[19]++,"categorical"))}getDataFunctionTypes(e){return Vt().f[5]++,Vt().s[20]++,e.expression.interpolated?(Vt().b[8][0]++,Vt().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(Vt().b[8][1]++,Vt().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){Vt().f[6]++;const t=(Vt().s[23]++,e.map((r,o)=>(Vt().f[7]++,Vt().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Vt().f[8]++,Vt().s[25]++,iae(r.data[0].zoom,o.data[0].zoom)))),i=(Vt().s[26]++,{});return Vt().s[27]++,t.forEach((r,o)=>{Vt().f[9]++,Vt().s[28]++,i[o]=r.ref}),Vt().s[29]++,this.setState({refs:i}),Vt().s[30]++,t.map(r=>(Vt().f[10]++,Vt().s[31]++,r.data))}onChange=(Vt().s[32]++,(e,t)=>{if(Vt().f[11]++,Vt().s[33]++,t.type==="identity")Vt().b[9][0]++,Vt().s[34]++,t={type:t.type,property:t.property};else{Vt().b[9][1]++;const i=(Vt().s[35]++,t.type==="categorical"?(Vt().b[10][0]++,""):(Vt().b[10][1]++,0));Vt().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},np(this.props.fieldSpec)],[{zoom:10,value:i},np(this.props.fieldSpec)]],...t}}Vt().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){Vt().f[12]++;const r=(Vt().s[38]++,Vt().b[11][0]++,this.props.value?.stops.slice(0)||(Vt().b[11][1]++,[]));Vt().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(Vt().b[12][0]++,0):(Vt().b[12][1]++,t.zoom)},i];const o=(Vt().s[40]++,this.orderStopsByZoom(r)),s=(Vt().s[41]++,{...this.props.value,stops:o});Vt().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){Vt().f[13]++;const t=(Vt().s[43]++,{...this.props.value,base:e});Vt().s[44]++,t.base===void 0?(Vt().b[13][0]++,Vt().s[45]++,delete t.base):Vt().b[13][1]++,Vt().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){Vt().f[14]++,Vt().s[47]++,Vt().b[15][0]++,e==="interpolate"&&(Vt().b[15][1]++,this.props.onChangeToZoomFunction)?(Vt().b[14][0]++,Vt().s[48]++,this.props.onChangeToZoomFunction()):(Vt().b[14][1]++,Vt().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){Vt().f[15]++,Vt().s[50]++,t?(Vt().b[16][0]++,Vt().s[51]++,this.props.value[e]=t):(Vt().b[16][1]++,Vt().s[52]++,delete this.props.value[e]),Vt().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){Vt().f[16]++;const e=(Vt().s[54]++,this.props.t);Vt().s[55]++,typeof this.props.value?.type>"u"?(Vt().b[17][0]++,Vt().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):Vt().b[17][1]++;let t;return Vt().s[57]++,this.props.value?.stops?(Vt().b[18][0]++,Vt().s[58]++,t=this.props.value.stops.map((i,r)=>{Vt().f[17]++;const o=(Vt().s[59]++,typeof i[0]=="object"?(Vt().b[19][0]++,i[0].zoom):(Vt().b[19][1]++,void 0)),s=(Vt().s[60]++,this.state.refs[r]),a=(Vt().s[61]++,typeof i[0]=="object"?(Vt().b[20][0]++,i[0].value):(Vt().b[20][1]++,i[0])),c=(Vt().s[62]++,i[1]),h=(Vt().s[63]++,te.jsx(rae,{onClick:this.props.onDeleteStop?.bind(this,r)})),m=(Vt().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:S=>(Vt().f[18]++,Vt().s[65]++,this.changeStop(r,{zoom:o,value:S},c))});let v;Vt().s[66]++,this.props.value?.type==="categorical"?(Vt().b[21][0]++,Vt().s[67]++,v=te.jsx(xm,{...m})):(Vt().b[21][1]++,Vt().s[68]++,v=te.jsx(m1,{...m}));let x=(Vt().s[69]++,null);return Vt().s[70]++,o!==void 0?(Vt().b[22][0]++,Vt().s[71]++,x=te.jsx("div",{children:te.jsx(m1,{"aria-label":"Zoom",value:o,onChange:S=>(Vt().f[19]++,Vt().s[72]++,this.changeStop(r,{zoom:S,value:a},c)),min:0,max:22})})):Vt().b[22][1]++,Vt().s[73]++,te.jsxs("tr",{children:[te.jsx("td",{children:x}),te.jsx("td",{children:v}),te.jsx("td",{children:te.jsx(ix,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(S,B)=>(Vt().f[20]++,Vt().s[74]++,this.changeStop(r,{zoom:o,value:a},B))})}),te.jsx("td",{children:h})]},s)})):Vt().b[18][1]++,Vt().s[75]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:z6(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(Ps,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(oC,{value:this.props.value.type,onChange:i=>(Vt().f[21]++,Vt().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(Vt().b[23][0]++,this.props.value?.type!=="identity"&&(Vt().b[23][1]++,te.jsx(Ps,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(ix,{fieldName:"base",fieldSpec:Xr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Vt().f[22]++,Vt().s[77]++,this.changeBase(r))})})},"base"))),te.jsx(Ps,{label:"Property",children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(xm,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(Vt().f[23]++,Vt().s[78]++,this.changeDataProperty("property",i))})})},"property"),(Vt().b[24][0]++,t&&(Vt().b[24][1]++,te.jsx(Ps,{label:e("Default"),children:te.jsx(ix,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(Vt().f[24]++,Vt().s[79]++,this.changeDataProperty("default",r))})},"default"))),(Vt().b[25][0]++,t&&(Vt().b[25][1]++,te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{children:e("Input value")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}))),te.jsxs("div",{className:"maputnik-toolbox",children:[(Vt().b[26][0]++,t&&(Vt().b[26][1]++,te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(F6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(D4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const tDe=(Vt().s[80]++,No()(eDe));function qn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qn=function(){return s},s}qn();function LV(n,e){qn().f[0]++;let t=(qn().s[0]++,{});return qn().s[1]++,qn().b[1][0]++,n.value&&(qn().b[1][1]++,n.value.stops)?(qn().b[0][0]++,qn().s[2]++,n.value.stops.forEach((i,r)=>{qn().f[1]++,qn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(qn().b[2][0]++,qn().s[4]++,t?qn().b[3][1]++:(qn().b[3][0]++,qn().s[5]++,t={...e}),qn().s[6]++,t[r]=Ox("stop-")):(qn().b[2][1]++,qn().s[7]++,t[r]=e.refs[r])})):qn().b[0][1]++,qn().s[8]++,t}class nDe extends On.Component{static defaultProps=(qn().s[9]++,{errors:{}});state=(qn().s[10]++,{refs:{}});componentDidMount(){qn().f[2]++;const e=(qn().s[11]++,LV(this.props,this.state));qn().s[12]++,e?(qn().b[4][0]++,qn().s[13]++,this.setState({refs:e})):qn().b[4][1]++}static getDerivedStateFromProps(e,t){qn().f[3]++;const i=(qn().s[14]++,LV(e,t));return qn().s[15]++,i?(qn().b[5][0]++,qn().s[16]++,{refs:i}):(qn().b[5][1]++,qn().s[17]++,null)}orderStopsByZoom(e){qn().f[4]++;const t=(qn().s[18]++,e.map((r,o)=>(qn().f[5]++,qn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(qn().f[6]++,qn().s[20]++,iae(r.data[0],o.data[0])))),i=(qn().s[21]++,{});return qn().s[22]++,t.forEach((r,o)=>{qn().f[7]++,qn().s[23]++,i[o]=r.ref}),qn().s[24]++,this.setState({refs:i}),qn().s[25]++,t.map(r=>(qn().f[8]++,qn().s[26]++,r.data))}changeZoomStop(e,t,i){qn().f[9]++;const r=(qn().s[27]++,this.props.value.stops.slice(0));qn().s[28]++,r[e]=[t,i];const o=(qn().s[29]++,this.orderStopsByZoom(r)),s=(qn().s[30]++,{...this.props.value,stops:o});qn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){qn().f[10]++;const t=(qn().s[32]++,{...this.props.value,base:e});qn().s[33]++,t.base===void 0?(qn().b[6][0]++,qn().s[34]++,delete t.base):qn().b[6][1]++,qn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(qn().s[36]++,e=>{qn().f[11]++,qn().s[37]++,qn().b[8][0]++,e!=="interpolate"&&(qn().b[8][1]++,this.props.onChangeToDataFunction)?(qn().b[7][0]++,qn().s[38]++,this.props.onChangeToDataFunction(e)):qn().b[7][1]++});render(){qn().f[12]++;const e=(qn().s[39]++,this.props.t),t=(qn().s[40]++,this.props.value?.stops.map((i,r)=>{qn().f[13]++;const o=(qn().s[41]++,i[0]),s=(qn().s[42]++,i[1]),a=(qn().s[43]++,te.jsx(rae,{onClick:this.props.onDeleteStop?.bind(this,r)}));return qn().s[44]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(m1,{"aria-label":e("Zoom"),value:o,onChange:c=>(qn().f[14]++,qn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),te.jsx("td",{children:te.jsx(ix,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,h)=>(qn().f[15]++,qn().s[46]++,this.changeZoomStop(r,o,h))})}),te.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return qn().s[47]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:z6(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(Ps,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(oC,{value:"interpolate",onChange:i=>(qn().f[16]++,qn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),te.jsx(Ps,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(ix,{fieldName:"base",fieldSpec:Xr.function.base,value:this.props.value?.base,onChange:(i,r)=>(qn().f[17]++,qn().s[49]++,this.changeBase(r))})})}),te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}),te.jsxs("div",{className:"maputnik-toolbox",children:[te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(F6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(D4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return qn().f[18]++,qn().s[50]++,e["property-type"]==="data-driven"?(qn().b[9][0]++,qn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(qn().b[9][1]++,qn().s[52]++,["interpolate"])}}const iDe=(qn().s[53]++,No()(nDe));function mt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mt=function(){return s},s}mt();function KV(n){return mt().f[0]++,mt().s[0]++,mt().b[0][0]++,Array.isArray(n)&&(mt().b[0][1]++,n.length===2)&&(mt().b[0][2]++,n[0]==="literal")}function FV(n){return mt().f[1]++,mt().s[1]++,mt().b[1][0]++,Array.isArray(n)&&(mt().b[1][1]++,n.length===2)&&(mt().b[1][2]++,n[0]==="get")}function rDe(n){return mt().f[2]++,mt().s[2]++,mt().b[2][0]++,typeof n=="object"&&(mt().b[2][1]++,n.stops)&&(mt().b[2][2]++,typeof n.property>"u")&&(mt().b[2][3]++,Array.isArray(n.stops))&&(mt().b[2][4]++,n.stops.length>1)&&(mt().b[2][5]++,n.stops.every(e=>(mt().f[3]++,mt().s[3]++,mt().b[3][0]++,Array.isArray(e)&&(mt().b[3][1]++,e.length===2))))}function oae(n){return mt().f[4]++,mt().s[4]++,mt().b[4][0]++,typeof n=="object"&&(mt().b[4][1]++,n.type==="identity")&&(mt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function oDe(n){return mt().f[5]++,mt().s[5]++,mt().b[5][0]++,typeof n=="object"&&(mt().b[5][1]++,n.stops)&&(mt().b[5][2]++,typeof n.property<"u")&&(mt().b[5][3]++,n.stops.length>1)&&(mt().b[5][4]++,Array.isArray(n.stops))&&(mt().b[5][5]++,n.stops.every(e=>(mt().f[6]++,mt().s[6]++,mt().b[6][0]++,Array.isArray(e)&&(mt().b[6][1]++,e.length===2)&&(mt().b[6][2]++,typeof e[0]=="object"))))}function sDe(n){return mt().f[7]++,mt().s[7]++,mt().b[7][0]++,oae(n)||(mt().b[7][1]++,oDe(n))}function TK(n){mt().f[8]++;const e=(mt().s[8]++,["string","boolean","number"]);return mt().s[9]++,e.includes(typeof n)}function zV(n){return mt().f[9]++,mt().s[10]++,Array.isArray(n)?(mt().b[8][0]++,mt().s[11]++,n.every(TK)):(mt().b[8][1]++,mt().s[12]++,!1)}function jV(n,e=(mt().b[9][0]++,{})){return mt().f[10]++,mt().s[13]++,n===void 0?(mt().b[10][0]++,mt().s[14]++,"value"):(mt().b[10][1]++,mt().s[15]++,TK(n)?(mt().b[11][0]++,mt().s[16]++,"value"):(mt().b[11][1]++,mt().s[17]++,mt().b[13][0]++,e.type==="array"&&(mt().b[13][1]++,zV(n))?(mt().b[12][0]++,mt().s[18]++,"value"):(mt().b[12][1]++,mt().s[19]++,mt().b[15][0]++,e.type==="numberArray"&&(mt().b[15][1]++,zV(n))?(mt().b[14][0]++,mt().s[20]++,"value"):(mt().b[14][1]++,mt().s[21]++,e.type==="colorArray"?(mt().b[16][0]++,mt().s[22]++,"value"):(mt().b[16][1]++,mt().s[23]++,e.type==="padding"?(mt().b[17][0]++,mt().s[24]++,"value"):(mt().b[17][1]++,mt().s[25]++,e.type==="variableAnchorOffsetCollection"?(mt().b[18][0]++,mt().s[26]++,"value"):(mt().b[18][1]++,mt().s[27]++,rDe(n)?(mt().b[19][0]++,mt().s[28]++,"zoom_function"):(mt().b[19][1]++,mt().s[29]++,sDe(n)?(mt().b[20][0]++,mt().s[30]++,"data_function"):(mt().b[20][1]++,mt().s[31]++,"expression")))))))))}mt().s[32]++;const aDe=n=>{mt().f[11]++;const[e,t]=(mt().s[33]++,On.useState(jV(n.value,n.fieldSpec))),[i,r]=(mt().s[34]++,On.useState(!1));mt().s[35]++,On.useEffect(()=>{mt().f[12]++,mt().s[36]++,i?mt().b[21][1]++:(mt().b[21][0]++,mt().s[37]++,t(jV(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),mt().s[38]++;const o=H=>(mt().f[13]++,mt().s[39]++,H.expression.interpolated?(mt().b[22][0]++,mt().s[40]++,"exponential"):(mt().b[22][1]++,mt().s[41]++,H.type==="number"?(mt().b[23][0]++,mt().s[42]++,"interval"):(mt().b[23][1]++,mt().s[43]++,"categorical")));mt().s[44]++;const s=()=>{mt().f[14]++;const H=(mt().s[45]++,n.value.stops.slice(0)),$=(mt().s[46]++,H[H.length-1]);mt().s[47]++,typeof $[0]=="object"?(mt().b[24][0]++,mt().s[48]++,H.push([{zoom:$[0].zoom+1,value:$[0].value},$[1]])):(mt().b[24][1]++,mt().s[49]++,H.push([$[0]+1,$[1]]));const N=(mt().s[50]++,{...n.value,stops:H});mt().s[51]++,n.onChange(n.fieldName,N)};mt().s[52]++;const a=()=>{mt().f[15]++;const{fieldSpec:H,fieldName:$}=(mt().s[53]++,n);mt().s[54]++,n.onChange($,H.default),mt().s[55]++,t("value")};mt().s[56]++;const c=H=>{mt().f[16]++;const $=(mt().s[57]++,n.value.stops.slice(0));mt().s[58]++,$.splice(H,1);let N=(mt().s[59]++,{...n.value,stops:$});mt().s[60]++,$.length===1?(mt().b[25][0]++,mt().s[61]++,N=$[0][1]):mt().b[25][1]++,mt().s[62]++,n.onChange(n.fieldName,N)};mt().s[63]++;const h=()=>{mt().f[17]++;const{value:H}=(mt().s[64]++,n);let $;mt().s[65]++,typeof H=="object"?(mt().b[26][0]++,mt().s[66]++,H.stops?(mt().b[27][0]++,mt().s[67]++,$={base:H.base,stops:H.stops.map(N=>(mt().f[18]++,mt().s[68]++,[N[0].zoom,(mt().b[28][0]++,N[1]||(mt().b[28][1]++,np(n.fieldSpec)))]))}):(mt().b[27][1]++,mt().s[69]++,$={base:H.base,stops:[[6,np(n.fieldSpec)],[10,np(n.fieldSpec)]]})):(mt().b[26][1]++,mt().s[70]++,$={stops:[[6,(mt().b[29][0]++,H||(mt().b[29][1]++,np(n.fieldSpec)))],[10,(mt().b[30][0]++,H||(mt().b[30][1]++,np(n.fieldSpec)))]]}),mt().s[71]++,n.onChange(n.fieldName,$)};mt().s[72]++;const m=()=>{mt().f[19]++;const{value:H,fieldName:$}=(mt().s[73]++,n);mt().s[74]++,FV(H)?(mt().b[31][0]++,mt().s[75]++,n.onChange($,{type:"identity",property:H[1]}),mt().s[76]++,t("value")):(mt().b[31][1]++,mt().s[77]++,KV(H)?(mt().b[32][0]++,mt().s[78]++,n.onChange($,H[1]),mt().s[79]++,t("value")):mt().b[32][1]++)};mt().s[80]++;const v=()=>{mt().f[20]++;const{value:H,fieldSpec:$}=(mt().s[81]++,n);return mt().s[82]++,mt().b[33][0]++,FV(H)||(mt().b[33][1]++,KV(H))||(mt().b[33][2]++,TK(H))||(mt().b[33][3]++,Array.isArray(H)&&(mt().b[33][4]++,$.type==="array"))};mt().s[83]++;const x=()=>{mt().f[21]++;const{value:H,fieldSpec:$}=(mt().s[84]++,n);let N;mt().s[85]++,mt().b[35][0]++,typeof H=="object"&&(mt().b[35][1]++,"stops"in H)?(mt().b[34][0]++,mt().s[86]++,N=vde.convertFunction(H,$)):(mt().b[34][1]++,mt().s[87]++,oae(H)?(mt().b[36][0]++,mt().s[88]++,N=["get",H.property]):(mt().b[36][1]++,mt().s[89]++,N=["literal",(mt().b[37][0]++,H||(mt().b[37][1]++,n.fieldSpec.default))])),mt().s[90]++,n.onChange(n.fieldName,N)};mt().s[91]++;const S=()=>{mt().f[22]++;const H=(mt().s[92]++,o(n.fieldSpec)),$=(mt().s[93]++,H==="categorical"?(mt().b[38][0]++,""):(mt().b[38][1]++,0)),{value:N}=(mt().s[94]++,n);let Y;mt().s[95]++,typeof N=="object"?(mt().b[39][0]++,mt().s[96]++,N.stops?(mt().b[40][0]++,mt().s[97]++,Y={property:"",type:H,base:N.base,stops:N.stops.map(z=>(mt().f[23]++,mt().s[98]++,[{zoom:z[0],value:$},(mt().b[41][0]++,z[1]||(mt().b[41][1]++,np(n.fieldSpec)))]))}):(mt().b[40][1]++,mt().s[99]++,Y={property:"",type:H,base:N.base,stops:[[{zoom:6,value:$},np(n.fieldSpec)],[{zoom:10,value:$},np(n.fieldSpec)]]})):(mt().b[39][1]++,mt().s[100]++,Y={property:"",type:H,base:N.base,stops:[[{zoom:6,value:$},(mt().b[42][0]++,n.value||(mt().b[42][1]++,np(n.fieldSpec)))],[{zoom:10,value:$},(mt().b[43][0]++,n.value||(mt().b[43][1]++,np(n.fieldSpec)))]]}),mt().s[101]++,n.onChange(n.fieldName,Y)};mt().s[102]++;const B=()=>{mt().f[24]++;const H=(mt().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);mt().s[104]++,n.onChange(n.fieldName,H)};mt().s[105]++;const R=()=>{mt().f[25]++,mt().s[106]++,r(!0)};mt().s[107]++;const F=()=>{mt().f[26]++,mt().s[108]++,r(!1)},j=(mt().s[109]++,n.fieldSpec.default===n.value?(mt().b[44][0]++,"maputnik-default-property"):(mt().b[44][1]++,"maputnik-modified-property"));let W;return mt().s[110]++,e==="expression"?(mt().b[45][0]++,mt().s[111]++,W=te.jsx(bse,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:v,onUndo:m,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:R,onBlur:F})):(mt().b[45][1]++,mt().s[112]++,e==="zoom_function"?(mt().b[46][0]++,mt().s[113]++,W=te.jsx(iDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:S,onExpressionClick:x})):(mt().b[46][1]++,mt().s[114]++,e==="data_function"?(mt().b[47][0]++,mt().s[115]++,W=te.jsx(tDe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:h,onExpressionClick:x})):(mt().b[47][1]++,mt().s[116]++,W=te.jsx(XRe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:h,onDataClick:S,onExpressionClick:x,onElevationClick:B})))),mt().s[117]++,te.jsx("div",{className:j,"data-wd-key":"spec-field-container:"+n.fieldName,children:W})};function jr(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return jr=function(){return s},s}jr();const lDe=(jr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function uDe(n,e,t){jr().f[0]++;const i=(jr().s[1]++,sae(n,e,t)),r=(jr().s[2]++,n[i+"_"+e]),o=(jr().s[3]++,r[t]);return jr().s[4]++,lDe.indexOf(t)>=0?(jr().b[0][0]++,jr().s[5]++,{...o,values:n.$root.sprite.values}):(jr().b[0][1]++,jr().s[6]++,t==="text-font"?(jr().b[1][0]++,jr().s[7]++,{...o,values:n.$root.glyphs.values}):(jr().b[1][1]++,jr().s[8]++,o))}function sae(n,e,t){jr().f[1]++;const i=(jr().s[9]++,jr().b[2][0]++,n["paint_"+e]||(jr().b[2][1]++,{}));return jr().s[10]++,t in i?(jr().b[3][0]++,"paint"):(jr().b[3][1]++,"layout")}class cDe extends On.Component{onPropertyChange=(jr().s[11]++,(e,t)=>{jr().f[2]++;const i=(jr().s[12]++,sae(this.props.spec,this.props.layer.type,e));jr().s[13]++,this.props.onChange(i,e,t)});render(){jr().f[3]++;const{errors:e}=(jr().s[14]++,this.props),t=(jr().s[15]++,this.props.groupFields.map(i=>{jr().f[4]++;const r=(jr().s[16]++,uDe(this.props.spec,this.props.layer.type,i)),o=(jr().s[17]++,jr().b[4][0]++,this.props.layer.paint||(jr().b[4][1]++,{})),s=(jr().s[18]++,jr().b[5][0]++,this.props.layer.layout||(jr().b[5][1]++,{})),a=(jr().s[19]++,i in o?(jr().b[6][0]++,o[i]):(jr().b[6][1]++,s[i])),c=(jr().s[20]++,i in o?(jr().b[7][0]++,"paint"):(jr().b[7][1]++,"layout"));return jr().s[21]++,te.jsx(aDe,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return jr().s[22]++,te.jsx("div",{className:"maputnik-property-group",children:t})}}function P_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P_=function(){return s},s}P_();class ADe extends On.Component{render(){return P_().f[0]++,P_().s[0]++,te.jsxs(mse,{uuid:this.props.id,children:[te.jsx(vse,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(P_().f[1]++,P_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:te.jsxs(Nke,{className:"maputnik-layer-editor-group__button",children:[te.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),te.jsx(XX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),te.jsx(ZX,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),te.jsx(qke,{children:this.props.children})]})}}function Pb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pb=function(){return s},s}Pb();Pb().s[0]++;const hDe=n=>{Pb().f[0]++;const e=(Pb().s[1]++,n.t);return Pb().s[2]++,te.jsx(Ps,{label:e("Min Zoom"),fieldSpec:Xr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:te.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Xr.layer.minzoom.minimum,max:Xr.layer.minzoom.maximum,default:Xr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},dDe=(Pb().s[3]++,No()(hDe));function Ub(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ub=function(){return s},s}Ub();Ub().s[0]++;const fDe=n=>{Ub().f[0]++;const e=(Ub().s[1]++,n.t);return Ub().s[2]++,te.jsx(Ps,{label:e("Max Zoom"),fieldSpec:Xr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:te.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Xr.layer.maxzoom.minimum,max:Xr.layer.maxzoom.maximum,default:Xr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},pDe=(Ub().s[3]++,No()(fDe));function Yy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yy=function(){return s},s}Yy();Yy().s[0]++;const mDe=n=>{Yy().f[0]++;const e=(Yy().s[1]++,n.t),t=(Yy().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Yy().s[3]++,te.jsx(Ps,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:te.jsx(xm,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},gDe=(Yy().s[4]++,No()(mDe));function U_(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U_=function(){return s},s}U_();function aae(n){return U_().f[0]++,U_().s[0]++,n===""?(U_().b[0][0]++,"[empty_string]"):(U_().b[0][1]++,`'${n}'`)}function Yt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="73c13e8dcd00ff99dc188c9ddae5c660be7ade84",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73c13e8dcd00ff99dc188c9ddae5c660be7ade84"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yt=function(){return s},s}Yt();function yDe(n){Yt().f[0]++;const e=(Yt().s[0]++,[]);return Yt().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(up.layout_symbol).filter(t=>(Yt().f[1]++,Yt().s[2]++,t.startsWith("symbol-")))}),Yt().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(up.layout_symbol).filter(t=>(Yt().f[2]++,Yt().s[4]++,t.startsWith("text-")))}),Yt().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(up.layout_symbol).filter(t=>(Yt().f[3]++,Yt().s[6]++,t.startsWith("icon-")))}),Yt().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(up.paint_symbol).filter(t=>(Yt().f[4]++,Yt().s[8]++,t.startsWith("text-")))}),Yt().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(up.paint_symbol).filter(t=>(Yt().f[5]++,Yt().s[10]++,t.startsWith("icon-")))}),Yt().s[11]++,e}function lae(n,e){if(Yt().f[6]++,Yt().s[12]++,Object.keys(up.layer.type.values).indexOf(n)<0)return Yt().b[0][0]++,Yt().s[13]++,[];if(Yt().b[0][1]++,Yt().s[14]++,n==="symbol")return Yt().b[1][0]++,Yt().s[15]++,yDe(e);Yt().b[1][1]++;const t=(Yt().s[16]++,[]);return Yt().s[17]++,Object.keys(up["paint_"+n]).length>0?(Yt().b[2][0]++,Yt().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(up["paint_"+n])})):Yt().b[2][1]++,Yt().s[19]++,Object.keys(up["layout_"+n]).length>0?(Yt().b[3][0]++,Yt().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(up["layout_"+n])})):Yt().b[3][1]++,Yt().s[21]++,t}function NV(n,e){Yt().f[7]++;const t=(Yt().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Yt().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Yt().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Yt().s[25]++,[t,i].concat(lae(n,e)).concat([r])}class vDe extends On.Component{static defaultProps=(Yt().s[26]++,{onLayerChanged:()=>{Yt().f[8]++},onLayerIdChange:()=>{Yt().f[9]++},onLayerDestroyed:()=>{Yt().f[10]++}});constructor(e){Yt().f[11]++,Yt().s[27]++,super(e);const t=(Yt().s[28]++,{});Yt().s[29]++;for(const i of NV(this.props.layer.type,e.t))Yt().s[30]++,t[i.title]=!0;Yt().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Yt().f[12]++;const i=(Yt().s[32]++,{...t.editorGroups});Yt().s[33]++;for(const r of lae(e.layer.type,e.t))Yt().s[34]++,r.title in i?Yt().b[4][1]++:(Yt().b[4][0]++,Yt().s[35]++,i[r.title]=!0);return Yt().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Yt().f[13]++,Yt().s[37]++,this.props.onLayerChanged(this.props.layerIndex,ike(this.props.layer,e,t,i))}onGroupToggle(e,t){Yt().f[14]++;const i=(Yt().s[38]++,{...this.state.editorGroups,[e]:t});Yt().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Yt().f[15]++;let i=(Yt().s[40]++,"");Yt().s[41]++,this.props.layer.metadata?(Yt().b[5][0]++,Yt().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Yt().b[5][1]++;const{errors:r,layerIndex:o}=(Yt().s[43]++,this.props),s=(Yt().s[44]++,{});Yt().s[45]++,r.forEach(h=>{Yt().f[16]++,Yt().s[46]++,Yt().b[7][0]++,h.parsed&&(Yt().b[7][1]++,h.parsed.type==="layer")&&(Yt().b[7][2]++,h.parsed.data.index==o)?(Yt().b[6][0]++,Yt().s[47]++,s[h.parsed.data.key]={message:h.parsed.data.message}):Yt().b[6][1]++});let a;const c=(Yt().s[48]++,this.props.layer);switch(Yt().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Yt().b[8][0]++,Yt().s[50]++,a=this.props.sources[c.source].layers):Yt().b[8][1]++,Yt().s[51]++,e){case"layer":return Yt().b[9][0]++,Yt().s[52]++,te.jsxs("div",{children:[te.jsx(Goe,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:h=>(Yt().f[17]++,Yt().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,h))}),te.jsx(Noe,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:h=>(Yt().f[18]++,Yt().s[54]++,this.props.onLayerChanged(this.props.layerIndex,nke(this.props.layer,h)))}),(Yt().b[10][0]++,this.props.layer.type!=="background"&&(Yt().b[10][1]++,te.jsx(ase,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:h=>(Yt().f[19]++,Yt().s[55]++,this.changeProperty(null,"source",h))}))),(Yt().b[11][0]++,!UD.includes(this.props.layer.type)&&(Yt().b[11][1]++,te.jsx(lse,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:h=>(Yt().f[20]++,Yt().s[56]++,this.changeProperty(null,"source-layer",h))}))),te.jsx(dDe,{error:s.minzoom,value:this.props.layer.minzoom,onChange:h=>(Yt().f[21]++,Yt().s[57]++,this.changeProperty(null,"minzoom",h))}),te.jsx(pDe,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:h=>(Yt().f[22]++,Yt().s[58]++,this.changeProperty(null,"maxzoom",h))}),te.jsx(gDe,{error:s.comment,value:i,onChange:h=>(Yt().f[23]++,Yt().s[59]++,this.changeProperty("metadata","maputnik:comment",h==""?(Yt().b[12][0]++,void 0):(Yt().b[12][1]++,h)))})]});case"filter":return Yt().b[9][1]++,Yt().s[60]++,te.jsx("div",{children:te.jsx("div",{className:"maputnik-filter-editor-wrapper",children:te.jsx(lTe,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:h=>(Yt().f[24]++,Yt().s[61]++,this.changeProperty(null,"filter",h))})})});case"properties":return Yt().b[9][2]++,Yt().s[62]++,te.jsx(cDe,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Yt().b[9][3]++,Yt().s[63]++,te.jsx(uK,{lintType:"layer",value:this.props.layer,onChange:h=>{Yt().f[25]++,Yt().s[64]++,this.props.onLayerChanged(this.props.layerIndex,h)}});default:return Yt().b[9][4]++,Yt().s[65]++,te.jsx(te.Fragment,{})}}moveLayer(e){Yt().f[26]++,Yt().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Yt().f[27]++;const e=(Yt().s[67]++,this.props.t),t=(Yt().s[68]++,[]),i=(Yt().s[69]++,this.props.layer.type),r=(Yt().s[70]++,NV(i,e).filter(c=>(Yt().f[28]++,Yt().s[71]++,Yt().b[13][0]++,!(i==="background"&&(Yt().b[13][1]++,c.type==="source")))).map(c=>{Yt().f[29]++;const h=(Yt().s[72]++,c.id);return Yt().s[73]++,t.push(h),Yt().s[74]++,te.jsx(ADe,{"data-wd-key":c.title,id:h,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},h)})),o=(Yt().s[75]++,Yt().b[14][0]++,this.props.layer.layout||(Yt().b[14][1]++,{})),s=(Yt().s[76]++,{delete:{text:e("Delete"),handler:()=>(Yt().f[30]++,Yt().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Yt().f[31]++,Yt().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Yt().b[15][0]++,e("Show")):(Yt().b[15][1]++,e("Hide")),handler:()=>(Yt().f[32]++,Yt().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Yt().f[33]++,Yt().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Yt().f[34]++,Yt().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,h){Yt().f[35]++,Yt().s[82]++,h.stopPropagation(),Yt().s[83]++,s[c].handler()}return Yt().s[84]++,te.jsx(ox.Provider,{value:{size:"14px",color:"#8e8e8e"},children:te.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[te.jsx("header",{children:te.jsxs("div",{className:"layer-header",children:[te.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:aae(this.props.layer.id)})}),te.jsx("div",{className:"layer-header__info",children:te.jsxs(YM.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[te.jsx(YM.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:te.jsx(ipe,{className:"more-menu__button__svg"})}),te.jsx(YM.Menu,{children:te.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Yt().f[36]++;const h=(Yt().s[85]++,s[c]);return Yt().s[86]++,te.jsx("li",{children:te.jsx(YM.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":h.wdKey,children:h.text})},c)})})})]})})]})}),te.jsx(Bke,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const bDe=(Yt().s[87]++,No()(vDe));var GV=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},CDe=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),_De=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),xDe=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),MDe=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),wDe=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),SDe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,EDe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,WV=3,ODe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SDe]],QV=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function BDe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new wDe:typeof navigator<"u"?kDe(navigator.userAgent):RDe()}function IDe(n){return n!==""&&ODe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function kDe(n){var e=IDe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new MDe;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<WV&&(r=GV(GV([],r,!0),DDe(WV-r.length),!0)):r=[];var o=r.join("."),s=TDe(n),a=EDe.exec(n);return a&&a[1]?new xDe(t,o,s,a[1]):new CDe(t,o,s)}function TDe(n){for(var e=0,t=QV.length;e<t;e++){var i=QV[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function RDe(){var n=typeof process<"u"&&process.version;return n?new _De(process.version.slice(1)):null}function DDe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const PDe="maputnik",UDe="3.0.0",qV={name:PDe,version:UDe},LDe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Fi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fi=function(){return s},s}Fi();const KDe=(Fi().s[0]++,BDe()),JM=(Fi().s[1]++,["chrome","firefox"].indexOf(KDe.name)>-1);class V0 extends On.Component{render(){return Fi().f[0]++,Fi().s[2]++,te.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class FDe extends On.Component{render(){return Fi().f[1]++,Fi().s[3]++,te.jsx("a",{className:c0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class YV extends On.Component{render(){return Fi().f[2]++,Fi().s[4]++,te.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class A_ extends On.Component{render(){return Fi().f[3]++,Fi().s[5]++,te.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class zDe extends On.Component{state=(Fi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Fi().f[4]++,Fi().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Fi().f[5]++,Fi().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Fi().s[9]++,e=>{if(Fi().f[6]++,Fi().s[10]++,e==="map")Fi().b[0][0]++,Fi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Fi().b[0][1]++;const t=(Fi().s[12]++,document.querySelector("#skip-target-"+e));Fi().s[13]++,t.focus()}});render(){Fi().f[7]++;const e=(Fi().s[14]++,this.props.t),t=(Fi().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!JM},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!JM},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!JM},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!JM}]),i=(Fi().s[16]++,t.find(r=>(Fi().f[8]++,Fi().s[17]++,r.id===this.props.mapState)));return Fi().s[18]++,te.jsx("nav",{className:"maputnik-toolbar",children:te.jsxs("div",{className:"maputnik-toolbar__inner",children:[te.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[te.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Fi().f[9]++,Fi().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),te.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Fi().f[10]++,Fi().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),te.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Fi().f[11]++,Fi().s[21]++,this.onSkip("map")),children:e("Map view")}),te.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[te.jsx("img",{src:LDe,alt:e("Maputnik on GitHub")}),te.jsxs("h1",{children:[te.jsx("span",{className:"maputnik-toolbar-name",children:qV.name}),te.jsxs("span",{className:"maputnik-toolbar-version",children:["v",qV.version]})]})]})]}),te.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[te.jsxs(A_,{wdKey:"nav:open",onClick:()=>(Fi().f[12]++,Fi().s[22]++,this.props.onToggleModal("open")),children:[te.jsx(Gfe,{}),te.jsx(V0,{children:e("Open")})]}),te.jsxs(A_,{wdKey:"nav:export",onClick:()=>(Fi().f[13]++,Fi().s[23]++,this.props.onToggleModal("export")),children:[te.jsx(O9,{}),te.jsx(V0,{children:e("Save")})]}),te.jsxs(A_,{wdKey:"nav:code-editor",onClick:()=>(Fi().f[14]++,Fi().s[24]++,this.props.onToggleModal("codeEditor")),children:[te.jsx(Lfe,{}),te.jsx(V0,{children:e("Code Editor")})]}),te.jsxs(A_,{wdKey:"nav:sources",onClick:()=>(Fi().f[15]++,Fi().s[25]++,this.props.onToggleModal("sources")),children:[te.jsx(Jfe,{}),te.jsx(V0,{children:e("Data Sources")})]}),te.jsxs(A_,{wdKey:"nav:settings",onClick:()=>(Fi().f[16]++,Fi().s[26]++,this.props.onToggleModal("settings")),children:[te.jsx(Wfe,{}),te.jsx(V0,{children:e("Style Settings")})]}),te.jsxs(A_,{wdKey:"nav:global-state",onClick:()=>(Fi().f[17]++,Fi().s[27]++,this.props.onToggleModal("globalState")),children:[te.jsx(ope,{}),te.jsx(V0,{children:e("Global State")})]}),te.jsxs(YV,{wdKey:"nav:inspect",children:[te.jsx(Kfe,{}),te.jsxs(V0,{children:[e("View"),te.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Fi().f[18]++,Fi().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Fi().f[19]++,Fi().s[29]++,r.group==="general")).map(r=>(Fi().f[20]++,Fi().s[30]++,te.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),te.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Fi().f[21]++,Fi().s[31]++,r.group==="color-accessibility")).map(r=>(Fi().f[22]++,Fi().s[32]++,te.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),te.jsxs(YV,{wdKey:"nav:language",children:[te.jsx(Nfe,{}),te.jsxs(V0,{children:["Language",te.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Fi().f[23]++,Fi().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(yZ).map(([r,o])=>(Fi().f[24]++,Fi().s[34]++,te.jsx("option",{value:r,children:o},r)))})]})]}),te.jsxs(FDe,{href:"https://github.com/maplibre/maputnik/wiki",children:[te.jsx(Ffe,{}),te.jsx(V0,{children:e("Help")})]})]})]})})}}const jDe=(Fi().s[35]++,No()(zDe));function rE(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rE=function(){return s},s}rE();class $V extends On.Component{render(){return rE().f[0]++,rE().s[0]++,te.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function rp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rp=function(){return s},s}rp();class NDe extends On.Component{render(){return rp().f[0]++,rp().s[0]++,document.body.dir=this.props.i18n.dir(),rp().s[1]++,te.jsx(ox.Provider,{value:{size:"14px"},children:te.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,te.jsxs("div",{className:"maputnik-layout-main",children:[(rp().b[0][0]++,this.props.codeEditor&&(rp().b[0][1]++,te.jsx("div",{className:"maputnik-layout-code-editor",children:te.jsx($V,{children:this.props.codeEditor})}))),(rp().b[1][0]++,!this.props.codeEditor&&(rp().b[1][1]++,te.jsxs(te.Fragment,{children:[te.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),te.jsx("div",{className:"maputnik-layout-drawer",children:te.jsx($V,{children:this.props.layerEditor})})]}))),this.props.map]}),(rp().b[2][0]++,this.props.bottom&&(rp().b[2][1]++,te.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const GDe=(rp().s[2]++,No()(NDe));function wa(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wa=function(){return s},s}wa();class WDe extends On.Component{static defaultProps=(wa().s[0]++,{onLayerSelect:()=>{wa().f[0]++}});render(){wa().f[1]++;const{t:e,selectedLayerIndex:t}=(wa().s[1]++,this.props),i=(wa().s[2]++,this.props.errors?.map((o,s)=>{wa().f[2]++;let a;if(wa().s[3]++,wa().b[1][0]++,o.parsed&&(wa().b[1][1]++,o.parsed.type==="layer")){wa().b[0][0]++;const{parsed:c}=(wa().s[4]++,o),h=(wa().s[5]++,this.props.mapStyle?.layers[c.data.index].id);wa().s[6]++,a=te.jsxs(te.Fragment,{children:[te.jsxs(_b,{t:e,children:["Layer ",te.jsx("span",{children:aae(h)}),": ",c.data.message]}),(wa().b[2][0]++,t!==c.data.index&&(wa().b[2][1]++,te.jsxs(te.Fragment,{children:["",te.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(wa().f[3]++,wa().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else wa().b[0][1]++,wa().s[8]++,a=o.message;return wa().s[9]++,te.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(wa().s[10]++,this.props.infos?.map((o,s)=>(wa().f[4]++,wa().s[11]++,te.jsx("p",{children:o},"info-"+s))));return wa().s[12]++,te.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const QDe=(wa().s[13]++,No()(WDe));function P4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P4=function(){return s},s}P4();P4().s[0]++;const oE=n=>(P4().f[0]++,P4().s[1]++,te.jsx(Py,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(jD,{...n})}));function U4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U4=function(){return s},s}U4();U4().s[0]++;const lm=n=>(U4().f[0]++,U4().s[1]++,te.jsx(Ps,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(m1,{...n})}));function L4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return L4=function(){return s},s}L4();L4().s[0]++;const vd=n=>(L4().f[0]++,L4().s[1]++,te.jsx(Ps,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(xm,{...n})}));function K4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return K4=function(){return s},s}K4();K4().s[0]++;const Bx=n=>(K4().f[0]++,K4().s[1]++,te.jsx(Ps,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(kK,{...n})}));function F4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F4=function(){return s},s}F4();F4().s[0]++;const z4=n=>(F4().f[0]++,F4().s[1]++,te.jsx(Ps,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(oC,{...n})}));function j4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j4=function(){return s},s}j4();j4().s[0]++;const qDe=n=>(j4().f[0]++,j4().s[1]++,te.jsx(Py,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(IK,{...n})}));function N4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return N4=function(){return s},s}N4();N4().s[0]++;const YDe=n=>(N4().f[0]++,N4().s[1]++,te.jsx(Ps,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(BK,{...n})}));function G4(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return G4=function(){return s},s}G4();G4().s[0]++;const uae=n=>(G4().f[0]++,G4().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function En(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="99e5ed3645da84d03156e916f41e6bd97a8da4f4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:23},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:29}},18:{start:{line:64,column:6},end:{line:64,column:30}},19:{start:{line:66,column:4},end:{line:69,column:7}},20:{start:{line:72,column:25},end:{line:74,column:5}},21:{start:{line:75,column:4},end:{line:79,column:5}},22:{start:{line:76,column:6},end:{line:76,column:36}},23:{start:{line:78,column:6},end:{line:78,column:37}},24:{start:{line:80,column:4},end:{line:80,column:44}},25:{start:{line:83,column:21},end:{line:83,column:55}},26:{start:{line:84,column:54},end:{line:84,column:64}},27:{start:{line:85,column:16},end:{line:85,column:38}},28:{start:{line:86,column:18},end:{line:86,column:49}},29:{start:{line:87,column:23},end:{line:87,column:59}},30:{start:{line:88,column:20},end:{line:88,column:53}},31:{start:{line:89,column:23},end:{line:89,column:59}},32:{start:{line:90,column:4},end:{line:335,column:6}},33:{start:{line:105,column:35},end:{line:105,column:74}},34:{start:{line:115,column:35},end:{line:115,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:30},end:{line:70,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:39},end:{line:81,column:3}},line:71},5:{name:"(anonymous_5)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:11},end:{line:336,column:3}},line:82},6:{name:"(anonymous_6)",decl:{start:{line:105,column:24},end:{line:105,column:25}},loc:{start:{line:105,column:35},end:{line:105,column:74}},line:105},7:{name:"(anonymous_7)",decl:{start:{line:115,column:24},end:{line:115,column:25}},loc:{start:{line:115,column:35},end:{line:115,column:75}},line:115},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:75,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:79,column:5}},{start:{line:77,column:11},end:{line:79,column:5}}],line:75},5:{loc:{start:{line:83,column:21},end:{line:83,column:55}},type:"binary-expr",locations:[{start:{line:83,column:21},end:{line:83,column:49}},{start:{line:83,column:53},end:{line:83,column:55}}],line:83},6:{loc:{start:{line:86,column:18},end:{line:86,column:49}},type:"binary-expr",locations:[{start:{line:86,column:18},end:{line:86,column:43}},{start:{line:86,column:47},end:{line:86,column:49}}],line:86},7:{loc:{start:{line:87,column:23},end:{line:87,column:59}},type:"binary-expr",locations:[{start:{line:87,column:23},end:{line:87,column:53}},{start:{line:87,column:57},end:{line:87,column:59}}],line:87},8:{loc:{start:{line:88,column:20},end:{line:88,column:53}},type:"binary-expr",locations:[{start:{line:88,column:20},end:{line:88,column:47}},{start:{line:88,column:51},end:{line:88,column:53}}],line:88},9:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAmIM,SACE,KADF;AAnIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99e5ed3645da84d03156e916f41e6bd97a8da4f4"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return En=function(){return s},s}En();class $De extends On.Component{changeTransitionProperty(e,t){En().f[0]++;const i=(En().s[0]++,{...this.props.mapStyle.transition});En().s[1]++,t===void 0?(En().b[0][0]++,En().s[2]++,delete i[e]):(En().b[0][1]++,En().s[3]++,i[e]=t),En().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){En().f[1]++;const i=(En().s[5]++,{...this.props.mapStyle.light});En().s[6]++,t===void 0?(En().b[1][0]++,En().s[7]++,delete i[e]):(En().b[1][1]++,En().s[8]++,i[e]=t),En().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){En().f[2]++;const i=(En().s[10]++,{...this.props.mapStyle.terrain});En().s[11]++,t===void 0?(En().b[2][0]++,En().s[12]++,delete i[e]):(En().b[2][1]++,En().s[13]++,i[e]=t),En().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){En().f[3]++;const t=(En().s[15]++,{...this.props.mapStyle.projection});En().s[16]++,e===void 0?(En().b[3][0]++,En().s[17]++,delete t.type):(En().b[3][1]++,En().s[18]++,t.type=e),En().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){En().f[4]++;const i=(En().s[20]++,{...this.props.mapStyle});En().s[21]++,t===void 0?(En().b[4][0]++,En().s[22]++,delete i[e]):(En().b[4][1]++,En().s[23]++,i[e]=t),En().s[24]++,this.props.onStyleChanged(i)}render(){En().f[5]++;const e=(En().s[25]++,En().b[5][0]++,this.props.mapStyle.metadata||(En().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(En().s[26]++,this.props),o=(En().s[27]++,uae(t)),s=(En().s[28]++,En().b[6][0]++,this.props.mapStyle.light||(En().b[6][1]++,{})),a=(En().s[29]++,En().b[7][0]++,this.props.mapStyle.transition||(En().b[7][1]++,{})),c=(En().s[30]++,En().b[8][0]++,this.props.mapStyle.terrain||(En().b[8][1]++,{})),h=(En().s[31]++,En().b[9][0]++,this.props.mapStyle.projection||(En().b[9][1]++,{}));return En().s[32]++,te.jsx(C1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:te.jsxs("div",{className:"modal:settings",children:[te.jsx(vd,{label:t("Name"),fieldSpec:Xr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:m=>(En().f[6]++,En().s[33]++,this.changeStyleProperty("name",m))}),te.jsx(vd,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:m=>(En().f[7]++,En().s[34]++,this.changeStyleProperty("owner",m))}),te.jsx(Bx,{fieldSpec:Xr.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:m=>(En().f[8]++,En().s[35]++,this.changeStyleProperty("sprite",m))}),te.jsx(Bx,{label:t("Glyphs URL"),fieldSpec:Xr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:m=>(En().f[9]++,En().s[36]++,this.changeStyleProperty("glyphs",m))}),te.jsx(vd,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:m=>(En().f[10]++,En().s[37]++,i("maputnik:openmaptiles_access_token",m))}),te.jsx(vd,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:m=>(En().f[11]++,En().s[38]++,i("maputnik:thunderforest_access_token",m))}),te.jsx(vd,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:m=>(En().f[12]++,En().s[39]++,i("maputnik:stadia_access_token",m))}),te.jsx(vd,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:m=>(En().f[13]++,En().s[40]++,i("maputnik:locationiq_access_token",m))}),te.jsx(oE,{label:t("Center"),fieldSpec:Xr.$root.center,length:2,type:"number",value:(En().b[10][0]++,r.center||(En().b[10][1]++,[])),default:[0,0],onChange:m=>(En().f[14]++,En().s[41]++,this.changeStyleProperty("center",m))}),te.jsx(lm,{label:t("Zoom"),fieldSpec:Xr.$root.zoom,value:r.zoom,default:0,onChange:m=>(En().f[15]++,En().s[42]++,this.changeStyleProperty("zoom",m))}),te.jsx(lm,{label:t("Bearing"),fieldSpec:Xr.$root.bearing,value:r.bearing,default:Xr.$root.bearing.default,onChange:m=>(En().f[16]++,En().s[43]++,this.changeStyleProperty("bearing",m))}),te.jsx(lm,{label:t("Pitch"),fieldSpec:Xr.$root.pitch,value:r.pitch,default:Xr.$root.pitch.default,onChange:m=>(En().f[17]++,En().s[44]++,this.changeStyleProperty("pitch",m))}),te.jsx(qDe,{label:t("Light anchor"),fieldSpec:Xr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Xr.light.anchor.values),default:Xr.light.anchor.default,onChange:m=>(En().f[18]++,En().s[45]++,this.changeLightProperty("anchor",m))}),te.jsx(YDe,{label:t("Light color"),fieldSpec:Xr.light.color,value:s.color,default:Xr.light.color.default,onChange:m=>(En().f[19]++,En().s[46]++,this.changeLightProperty("color",m))}),te.jsx(lm,{label:t("Light intensity"),fieldSpec:Xr.light.intensity,value:s.intensity,default:Xr.light.intensity.default,onChange:m=>(En().f[20]++,En().s[47]++,this.changeLightProperty("intensity",m))}),te.jsx(oE,{label:t("Light position"),fieldSpec:Xr.light.position,type:"number",length:Xr.light.position.length,value:s.position,default:Xr.light.position.default,onChange:m=>(En().f[21]++,En().s[48]++,this.changeLightProperty("position",m))}),te.jsx(vd,{label:t("Terrain source"),fieldSpec:Xr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:m=>(En().f[22]++,En().s[49]++,this.changeTerrainProperty("source",m))}),te.jsx(lm,{label:t("Terrain exaggeration"),fieldSpec:Xr.terrain.exaggeration,value:c.exaggeration,default:Xr.terrain.exaggeration.default,onChange:m=>(En().f[23]++,En().s[50]++,this.changeTerrainProperty("exaggeration",m))}),te.jsx(lm,{label:t("Transition delay"),fieldSpec:Xr.transition.delay,value:a.delay,default:Xr.transition.delay.default,onChange:m=>(En().f[24]++,En().s[51]++,this.changeTransitionProperty("delay",m))}),te.jsx(lm,{label:t("Transition duration"),fieldSpec:Xr.transition.duration,value:a.duration,default:Xr.transition.duration.default,onChange:m=>(En().f[25]++,En().s[52]++,this.changeTransitionProperty("duration",m))}),te.jsx(z4,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(En().b[11][0]++,h?.type?.toString()||(En().b[11][1]++,"")),onChange:m=>(En().f[26]++,En().s[53]++,this.changeProjectionType(m))}),te.jsx(z4,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(En().b[12][0]++,e["maputnik:renderer"]||(En().b[12][1]++,"mlgljs")),onChange:m=>(En().f[27]++,En().s[54]++,i("maputnik:renderer",m))})]})})}}const VDe=(En().s[55]++,No()($De));var kw={exports:{}},HDe=kw.exports,VV;function ZDe(){return VV||(VV=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",HDe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,h=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(v,x){var S=a[x];return S===void 0&&(S=t[x]),S===void 0&&(S=x),S===c&&(S=" "),v+S.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),h&&(m=m.trim()),m=m.replace(/\s+/g,c),s.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(t,o)},r})})(kw)),kw.exports}var XDe=ZDe();const JDe=eu(XDe);var Tw={exports:{}},ePe=Tw.exports,HV;function tPe(){return HV||(HV=1,(function(n,e){(function(t,i){i()})(ePe,function(){function t(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,m,v){var x=new XMLHttpRequest;x.open("GET",h),x.responseType="blob",x.onload=function(){c(x.response,m,v)},x.onerror=function(){console.error("could not download file")},x.send()}function r(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,m,v){var x=s.URL||s.webkitURL,S=document.createElement("a");m=m||h.name||"download",S.download=m,S.rel="noopener",typeof h=="string"?(S.href=h,S.origin===location.origin?o(S):r(S.href)?i(h,m,v):o(S,S.target="_blank")):(S.href=x.createObjectURL(h),setTimeout(function(){x.revokeObjectURL(S.href)},4e4),setTimeout(function(){o(S)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,v){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,v),m);else if(r(h))i(h,m,v);else{var x=document.createElement("a");x.href=h,x.target="_blank",setTimeout(function(){o(x)})}}:function(h,m,v,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof h=="string")return i(h,m,v);var S=h.type==="application/octet-stream",B=/constructor/i.test(s.HTMLElement)||s.safari,R=/CriOS\/[\d]+/.test(navigator.userAgent);if((R||S&&B||a)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var H=F.result;H=R?H:H.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=H:location=H,x=null},F.readAsDataURL(h)}else{var j=s.URL||s.webkitURL,W=j.createObjectURL(h);x?x.location=W:location.href=W,x=null,setTimeout(function(){j.revokeObjectURL(W)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(Tw)),Tw.exports}var ZV=tPe();const nPe="5.10.0",iPe="get_your_own_OpIi9ZULNHzrESv6T2vL",rPe="b71f7f0ba4064f5eb9e903859a9cf5c6",oPe="pk.put_your_api_key_here7bb23dffeb4",cae={openmaptiles:iPe,thunderforest:rPe,locationiq:oPe};function wn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wn=function(){return s},s}wn();const sPe=(wn().s[0]++,hae({version:8,sources:{},layers:[]}));function Aae(){return wn().f[0]++,wn().s[1]++,Math.random().toString(36).substring(2,9)}function aPe(n){return wn().f[1]++,wn().s[2]++,wn().b[1][0]++,!("id"in n)||(wn().b[1][1]++,!n.id)?(wn().b[0][0]++,wn().s[3]++,n.id=Aae()):wn().b[0][1]++,wn().s[4]++,n}function lPe(n){wn().f[2]++;const e=(wn().s[5]++,n.layers.map(t=>{wn().f[3]++;const i=(wn().s[6]++,{...t});return wn().s[7]++,delete i.interactive,wn().s[8]++,i}));return wn().s[9]++,{...n,layers:e}}function uPe(n){return wn().f[4]++,wn().s[10]++,{...n,layers:iAe(n.layers)}}function hae(n){return wn().f[5]++,wn().s[11]++,lPe(uPe(aPe(n)))}function cPe(n,e){wn().f[6]++,wn().s[12]++;for(let t=(wn().s[13]++,0);t<n.length;t++){if(wn().s[14]++,n[t].id===e)return wn().b[2][0]++,wn().s[15]++,t;wn().b[2][1]++}return wn().s[16]++,null}function RK(n,e,t){wn().f[7]++;const i=(wn().s[17]++,wn().b[3][0]++,e.metadata||(wn().b[3][1]++,{}));let r=(wn().s[18]++,i[`maputnik:${n}_access_token`]);return wn().s[19]++,wn().b[5][0]++,t.allowFallback&&(wn().b[5][1]++,!r)?(wn().b[4][0]++,wn().s[20]++,r=cae[n]):wn().b[4][1]++,wn().s[21]++,r}function APe(n,e,t=(wn().b[6][0]++,{})){wn().f[8]++;const i=(wn().s[22]++,n.sources[e]);if(wn().s[23]++,i)wn().b[7][1]++;else return wn().b[7][0]++,wn().s[24]++,n;if(wn().s[25]++,wn().b[9][0]++,!("url"in i)||(wn().b[9][1]++,!i.url))return wn().b[8][0]++,wn().s[26]++,n;wn().b[8][1]++;let r=(wn().s[27]++,e);wn().s[28]++,wn().b[11][0]++,e==="thunderforest_transport"||(wn().b[11][1]++,e==="thunderforest_outdoors")?(wn().b[10][0]++,wn().s[29]++,r="thunderforest"):(wn().b[10][1]++,wn().s[30]++,wn().b[13][0]++,"url"in i&&(wn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(wn().b[12][0]++,wn().s[31]++,r="stadia"):(wn().b[12][1]++,wn().s[32]++,wn().b[15][0]++,"url"in i&&(wn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(wn().b[14][0]++,wn().s[33]++,r="locationiq"):wn().b[14][1]++));const o=(wn().s[34]++,RK(r,n,t));if(wn().s[35]++,o)wn().b[16][1]++;else return wn().b[16][0]++,wn().s[36]++,n;let s;wn().s[37]++,r=="stadia"?(wn().b[17][0]++,wn().s[38]++,s=`${i.url}?api_key=${o}`):(wn().b[17][1]++,wn().s[39]++,s=i.url.replace("{key}",o));const a=(wn().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(wn().s[41]++,{...n,sources:a});return wn().s[42]++,c}function hPe(n,e=(wn().b[18][0]++,{})){wn().f[9]++;let t=(wn().s[43]++,n);if(wn().s[44]++,Object.keys(n.sources).forEach(i=>{wn().f[10]++,wn().s[45]++,t=APe(t,i,e)}),wn().s[46]++,wn().b[20][0]++,n.glyphs&&(wn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(wn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){wn().b[19][0]++;const i=(wn().s[47]++,RK("openmaptiles",n,e));wn().s[48]++,i?(wn().b[21][0]++,wn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):wn().b[21][1]++}else wn().b[19][1]++;return wn().s[50]++,t}function dPe(n){wn().f[11]++;const e=(wn().s[51]++,{...n.metadata});return wn().s[52]++,delete e["maputnik:openmaptiles_access_token"],wn().s[53]++,delete e["maputnik:thunderforest_access_token"],wn().s[54]++,delete e["maputnik:stadia_access_token"],wn().s[55]++,delete e["maputnik:locationiq_access_token"],wn().s[56]++,{...n,metadata:e}}const Bd={ensureStyleValidity:hae,emptyStyle:sPe,indexOfLayer:cPe,generateId:Aae,getAccessToken:RK,replaceAccessTokens:hPe,stripAccessTokens:dPe};function li(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return li=function(){return s},s}li();const XV=(li().s[0]++,nPe),JV=(li().s[1]++,typeof window.showSaveFilePicker=="function");class fPe extends On.Component{tokenizedStyle(){return li().f[0]++,li().s[2]++,Ade(Bd.stripAccessTokens(Bd.replaceAccessTokens(this.props.mapStyle)))}exportName(){return li().f[1]++,li().s[3]++,this.props.mapStyle.name?(li().b[0][0]++,li().s[4]++,JDe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(li().b[0][1]++,li().s[5]++,this.props.mapStyle.id)}createHtml(){li().f[2]++;const e=(li().s[6]++,this.tokenizedStyle()),t=(li().s[7]++,li().b[1][0]++,this.props.mapStyle.name||(li().b[1][1]++,this.props.t("Map"))),i=(li().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${XV}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${XV}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(li().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(li().s[10]++,this.exportName());li().s[11]++,ZV.saveAs(r,o+".html")}async saveStyle(){li().f[3]++;const e=(li().s[12]++,this.tokenizedStyle());if(li().s[13]++,JV)li().b[2][1]++;else{li().b[2][0]++;const r=(li().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(li().s[15]++,this.exportName());li().s[16]++,ZV.saveAs(r,o+".json"),li().s[17]++;return}let t=(li().s[18]++,this.props.fileHandle);if(li().s[19]++,t==null)if(li().b[3][0]++,li().s[20]++,t=await this.createFileHandle(),li().s[21]++,this.props.onSetFileHandle(t),li().s[22]++,t==null){li().b[4][0]++,li().s[23]++;return}else li().b[4][1]++;else li().b[3][1]++;const i=(li().s[24]++,await t.createWritable());li().s[25]++,await i.write(e),li().s[26]++,await i.close(),li().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){li().f[4]++;const e=(li().s[28]++,this.tokenizedStyle()),t=(li().s[29]++,await this.createFileHandle());if(li().s[30]++,this.props.onSetFileHandle(t),li().s[31]++,t==null){li().b[5][0]++,li().s[32]++;return}else li().b[5][1]++;const i=(li().s[33]++,await t.createWritable());li().s[34]++,await i.write(e),li().s[35]++,await i.close(),li().s[36]++,this.props.onOpenToggle()}async createFileHandle(){li().f[5]++;const e=(li().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(li().s[38]++,await window.showSaveFilePicker(e));return li().s[39]++,this.props.onSetFileHandle(t),li().s[40]++,t}changeMetadataProperty(e,t){li().f[6]++;const i=(li().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});li().s[42]++,this.props.onStyleChanged(i)}render(){li().f[7]++;const e=(li().s[43]++,this.props.t),t=(li().s[44]++,uae(e));return li().s[45]++,te.jsx(C1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Save Style")}),te.jsx("p",{children:e("Save the JSON style to your computer.")}),te.jsxs("div",{children:[te.jsx(vd,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(li().b[6][0]++,this.props.mapStyle.metadata||(li().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),te.jsx(vd,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(li().b[7][0]++,this.props.mapStyle.metadata||(li().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),te.jsx(vd,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(li().b[8][0]++,this.props.mapStyle.metadata||(li().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),te.jsx(vd,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(li().b[9][0]++,this.props.mapStyle.metadata||(li().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),te.jsxs("div",{className:"maputnik-modal-export-buttons",children:[te.jsxs(Zs,{onClick:this.saveStyle.bind(this),children:[te.jsx(O9,{}),e("Save")]}),(li().b[10][0]++,JV&&(li().b[10][1]++,te.jsxs(Zs,{onClick:this.saveStyleAs.bind(this),children:[te.jsx(O9,{}),e("Save as")]}))),te.jsxs(Zs,{onClick:this.createHtml.bind(this),children:[te.jsx(tpe,{}),e("Create HTML")]})]})]})})}}const pPe=(li().s[46]++,No()(fPe));function W4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return W4=function(){return s},s}W4();W4().s[0]++;const dae=n=>(W4().f[0]++,W4().s[1]++,te.jsx(Py,{label:n.label,children:te.jsx(Iw,{...n})}));function Q4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Q4=function(){return s},s}Q4();Q4().s[0]++;const mPe=n=>(Q4().f[0]++,Q4().s[1]++,te.jsx(Ps,{label:n.label,children:te.jsx(nae,{...n})}));function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="18323b845fc84e69550b153f838c0967a64d83cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:242,column:9}},37:{start:{line:222,column:12},end:{line:225,column:15}},38:{start:{line:235,column:12},end:{line:238,column:15}},39:{start:{line:247,column:14},end:{line:247,column:26}},40:{start:{line:248,column:4},end:{line:263,column:9}},41:{start:{line:256,column:29},end:{line:259,column:12}},42:{start:{line:268,column:14},end:{line:268,column:26}},43:{start:{line:269,column:24},end:{line:275,column:5}},44:{start:{line:276,column:4},end:{line:340,column:5}},45:{start:{line:278,column:8},end:{line:278,column:79}},46:{start:{line:280,column:8},end:{line:280,column:85}},47:{start:{line:282,column:8},end:{line:282,column:77}},48:{start:{line:284,column:8},end:{line:284,column:76}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:300,column:13}},51:{start:{line:293,column:36},end:{line:296,column:14}},52:{start:{line:302,column:8},end:{line:302,column:77}},53:{start:{line:304,column:8},end:{line:331,column:13}},54:{start:{line:310,column:38},end:{line:313,column:16}},55:{start:{line:324,column:38},end:{line:327,column:16}},56:{start:{line:333,column:8},end:{line:333,column:76}},57:{start:{line:335,column:8},end:{line:335,column:74}},58:{start:{line:337,column:8},end:{line:337,column:74}},59:{start:{line:339,column:8},end:{line:339,column:20}},60:{start:{line:343,column:31},end:{line:343,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:243,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:221,column:20},end:{line:221,column:21}},loc:{start:{line:221,column:30},end:{line:226,column:11}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:234,column:20},end:{line:234,column:21}},loc:{start:{line:234,column:33},end:{line:239,column:11}},line:234},24:{name:"(anonymous_24)",decl:{start:{line:246,column:2},end:{line:246,column:3}},loc:{start:{line:246,column:11},end:{line:264,column:3}},line:246},25:{name:"(anonymous_25)",decl:{start:{line:256,column:20},end:{line:256,column:21}},loc:{start:{line:256,column:29},end:{line:259,column:12}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:267,column:2},end:{line:267,column:3}},loc:{start:{line:267,column:11},end:{line:341,column:3}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:293,column:22},end:{line:293,column:23}},loc:{start:{line:293,column:36},end:{line:296,column:14}},line:293},28:{name:"(anonymous_28)",decl:{start:{line:310,column:24},end:{line:310,column:25}},loc:{start:{line:310,column:38},end:{line:313,column:16}},line:310},29:{name:"(anonymous_29)",decl:{start:{line:324,column:24},end:{line:324,column:25}},loc:{start:{line:324,column:38},end:{line:327,column:16}},line:324}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:258,column:17},end:{line:258,column:72}},type:"cond-expr",locations:[{start:{line:258,column:48},end:{line:258,column:51}},{start:{line:258,column:54},end:{line:258,column:72}}],line:258},4:{loc:{start:{line:276,column:4},end:{line:340,column:5}},type:"switch",locations:[{start:{line:277,column:6},end:{line:278,column:79}},{start:{line:279,column:6},end:{line:280,column:85}},{start:{line:281,column:6},end:{line:282,column:77}},{start:{line:283,column:6},end:{line:284,column:76}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:300,column:13}},{start:{line:301,column:6},end:{line:302,column:77}},{start:{line:303,column:6},end:{line:331,column:13}},{start:{line:332,column:6},end:{line:333,column:76}},{start:{line:334,column:6},end:{line:335,column:74}},{start:{line:336,column:6},end:{line:337,column:74}},{start:{line:338,column:6},end:{line:339,column:20}}],line:276},5:{loc:{start:{line:297,column:19},end:{line:297,column:86}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:86}}],line:297},6:{loc:{start:{line:314,column:21},end:{line:314,column:92}},type:"binary-expr",locations:[{start:{line:314,column:21},end:{line:314,column:47}},{start:{line:314,column:51},end:{line:314,column:92}}],line:314},7:{loc:{start:{line:328,column:21},end:{line:328,column:92}},type:"binary-expr",locations:[{start:{line:328,column:21},end:{line:328,column:47}},{start:{line:328,column:51},end:{line:328,column:92}}],line:328}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18323b845fc84e69550b153f838c0967a64d83cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bn=function(){return s},s}bn();class lT extends On.Component{render(){bn().f[0]++;const e=(bn().s[0]++,this.props.t);return bn().s[1]++,te.jsxs("div",{children:[te.jsx(Bx,{label:e("TileJSON URL"),fieldSpec:ns.source_vector.url,value:this.props.source.url,onChange:t=>(bn().f[1]++,bn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class uT extends On.Component{changeTileUrls(e){bn().f[2]++,bn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){bn().f[3]++;const e=(bn().s[4]++,bn().b[0][0]++,this.props.source.tiles||(bn().b[0][1]++,[]));return bn().s[5]++,te.jsx(dae,{label:this.props.t("Tile URL"),fieldSpec:ns.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){bn().f[4]++;const e=(bn().s[6]++,this.props.t);return bn().s[7]++,te.jsxs("div",{children:[this.renderTileUrls(),te.jsx(z4,{label:e("Scheme Type"),fieldSpec:ns.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(bn().f[5]++,bn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),te.jsx(lm,{label:e("Min Zoom"),fieldSpec:ns.source_vector.minzoom,value:(bn().b[1][0]++,this.props.source.minzoom||(bn().b[1][1]++,0)),onChange:t=>(bn().f[6]++,bn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),te.jsx(lm,{label:e("Max Zoom"),fieldSpec:ns.source_vector.maxzoom,value:(bn().b[2][0]++,this.props.source.maxzoom||(bn().b[2][1]++,22)),onChange:t=>(bn().f[7]++,bn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}bn().s[11]++;const fae=n=>(bn().f[8]++,bn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class gPe extends On.Component{render(){bn().f[9]++;const e=(bn().s[13]++,this.props.t);bn().s[14]++;const t=(i,r)=>{bn().f[10]++;const o=(bn().s[15]++,this.props.source.coordinates.slice(0));bn().s[16]++,o[i]=r,bn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return bn().s[18]++,te.jsxs("div",{children:[te.jsx(Bx,{label:e("Image URL"),fieldSpec:ns.source_image.url,value:this.props.source.url,onChange:i=>(bn().f[11]++,bn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),fae(e).map(({label:i,key:r},o)=>(bn().f[12]++,bn().s[20]++,te.jsx(oE,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(bn().f[13]++,bn().s[21]++,t(o,s))},r)))]})}}class yPe extends On.Component{render(){bn().f[14]++;const e=(bn().s[22]++,this.props.t);bn().s[23]++;const t=(r,o)=>{bn().f[15]++;const s=(bn().s[24]++,this.props.source.coordinates.slice(0));bn().s[25]++,s[r]=o,bn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};bn().s[27]++;const i=r=>{bn().f[16]++,bn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return bn().s[29]++,te.jsxs("div",{children:[te.jsx(dae,{label:e("Video URL"),fieldSpec:ns.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),fae(e).map(({label:r,key:o},s)=>(bn().f[17]++,bn().s[30]++,te.jsx(oE,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(bn().f[18]++,bn().s[31]++,t(s,a))},o)))]})}}class vPe extends On.Component{render(){bn().f[19]++;const e=(bn().s[32]++,this.props.t);return bn().s[33]++,te.jsx(Bx,{label:e("GeoJSON URL"),fieldSpec:ns.source_geojson.data,value:this.props.source.data,onChange:t=>(bn().f[20]++,bn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class bPe extends On.Component{render(){bn().f[21]++;const e=(bn().s[35]++,this.props.t);return bn().s[36]++,te.jsxs("div",{children:[te.jsx(Ps,{label:e("GeoJSON"),fieldSpec:ns.source_geojson.data,children:te.jsx(uK,{value:this.props.source.data,lintType:"json",onChange:t=>{bn().f[22]++,bn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),te.jsx(mPe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{bn().f[23]++,bn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class CPe extends On.Component{render(){bn().f[24]++;const e=(bn().s[39]++,this.props.t);return bn().s[40]++,te.jsxs("div",{children:[te.jsx(Bx,{label:e("PMTiles URL"),fieldSpec:ns.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(bn().f[25]++,bn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(bn().b[3][0]++,t):(bn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class _Pe extends On.Component{render(){bn().f[26]++;const e=(bn().s[42]++,this.props.t),t=(bn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(bn().s[44]++,this.props.mode){case"geojson_url":return bn().b[4][0]++,bn().s[45]++,te.jsx(vPe,{...t});case"geojson_json":return bn().b[4][1]++,bn().s[46]++,te.jsx(bPe,{...t});case"tilejson_vector":return bn().b[4][2]++,bn().s[47]++,te.jsx(lT,{...t});case"tile_vector":return bn().b[4][3]++,bn().s[48]++,te.jsx(uT,{...t});case"tilejson_raster":return bn().b[4][4]++,bn().s[49]++,te.jsx(lT,{...t});case"tile_raster":return bn().b[4][5]++,bn().s[50]++,te.jsx(uT,{...t,children:te.jsx(lm,{label:e("Tile Size"),fieldSpec:ns.source_raster.tileSize,onChange:i=>(bn().f[27]++,bn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(bn().b[5][0]++,this.props.source.tileSize||(bn().b[5][1]++,ns.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return bn().b[4][6]++,bn().s[52]++,te.jsx(lT,{...t});case"tilexyz_raster-dem":return bn().b[4][7]++,bn().s[53]++,te.jsxs(uT,{...t,children:[te.jsx(lm,{label:e("Tile Size"),fieldSpec:ns.source_raster_dem.tileSize,onChange:i=>(bn().f[28]++,bn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(bn().b[6][0]++,this.props.source.tileSize||(bn().b[6][1]++,ns.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),te.jsx(z4,{label:e("Encoding"),fieldSpec:ns.source_raster_dem.encoding,options:Object.keys(ns.source_raster_dem.encoding.values),onChange:i=>(bn().f[29]++,bn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(bn().b[7][0]++,this.props.source.encoding||(bn().b[7][1]++,ns.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return bn().b[4][8]++,bn().s[56]++,te.jsx(CPe,{...t});case"image":return bn().b[4][9]++,bn().s[57]++,te.jsx(gPe,{...t});case"video":return bn().b[4][10]++,bn().s[58]++,te.jsx(yPe,{...t});default:return bn().b[4][11]++,bn().s[59]++,null}}}const pae=(bn().s[60]++,No()(_Pe));function gm(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gm=function(){return s},s}gm();function xPe(n,e){gm().f[0]++;const t=(gm().s[0]++,{...n.sources});return gm().s[1]++,delete t[e],gm().s[2]++,{...n,sources:t}}function eH(n,e,t){return gm().f[1]++,gm().s[3]++,mae(n,e,t)}function mae(n,e,t){gm().f[2]++;const i=(gm().s[4]++,{...n.sources,[e]:t});return gm().s[5]++,{...n,sources:i}}const MPe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},wPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},SPe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},EPe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},OPe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},tH={openmaptiles:MPe,thunderforest_transport:wPe,thunderforest_outdoors:SPe,open_zoomstack:EPe,locationiq:OPe};function Gt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gt=function(){return s},s}Gt();class BPe extends On.Component{render(){return Gt().f[0]++,Gt().s[0]++,te.jsx("div",{className:"maputnik-public-source",children:te.jsxs(Zs,{className:"maputnik-public-source-select",onClick:()=>(Gt().f[1]++,Gt().s[1]++,this.props.onSelect(this.props.id)),children:[te.jsxs("div",{className:"maputnik-public-source-info",children:[te.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),te.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(HX,{})]})})}}function IPe(n){return Gt().f[2]++,Gt().s[2]++,n.type==="raster"?(Gt().b[0][0]++,Gt().s[3]++,n.tiles?(Gt().b[1][0]++,Gt().s[4]++,"tile_raster"):(Gt().b[1][1]++,Gt().s[5]++,"tilejson_raster")):(Gt().b[0][1]++,Gt().s[6]++,n.type==="raster-dem"?(Gt().b[2][0]++,Gt().s[7]++,n.tiles?(Gt().b[3][0]++,Gt().s[8]++,"tilexyz_raster-dem"):(Gt().b[3][1]++,Gt().s[9]++,"tilejson_raster-dem")):(Gt().b[2][1]++,Gt().s[10]++,n.type==="vector"?(Gt().b[4][0]++,Gt().s[11]++,n.tiles?(Gt().b[5][0]++,Gt().s[12]++,"tile_vector"):(Gt().b[5][1]++,Gt().s[13]++,Gt().b[7][0]++,n.url&&(Gt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Gt().b[6][0]++,Gt().s[14]++,"pmtiles_vector"):(Gt().b[6][1]++,Gt().s[15]++,"tilejson_vector"))):(Gt().b[4][1]++,Gt().s[16]++,n.type==="geojson"?(Gt().b[8][0]++,Gt().s[17]++,typeof n.data=="string"?(Gt().b[9][0]++,Gt().s[18]++,"geojson_url"):(Gt().b[9][1]++,Gt().s[19]++,"geojson_json")):(Gt().b[8][1]++,Gt().s[20]++,n.type==="image"?(Gt().b[10][0]++,Gt().s[21]++,"image"):(Gt().b[10][1]++,Gt().s[22]++,n.type==="video"?(Gt().b[11][0]++,Gt().s[23]++,"video"):(Gt().b[11][1]++,Gt().s[24]++,null))))))}class kPe extends On.Component{render(){Gt().f[3]++;const e=(Gt().s[25]++,this.props.t);return Gt().s[26]++,te.jsxs("div",{className:"maputnik-active-source-type-editor",children:[te.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[te.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(Zs,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Gt().f[4]++,Gt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:te.jsx(Zb,{})})]}),te.jsx("div",{className:"maputnik-active-source-type-editor-content",children:te.jsx(pae,{onChange:this.props.onChange,mode:IPe(this.props.source),source:this.props.source})})]})}}class TPe extends On.Component{constructor(e){Gt().f[5]++,Gt().s[28]++,super(e),Gt().s[29]++,this.state={mode:"tilejson_vector",sourceId:Bd.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Gt().f[6]++;const t=(Gt().s[30]++,Gt().b[12][0]++,(Gt().b[13][0]++,this.state||(Gt().b[13][1]++,{})).source||(Gt().b[12][1]++,{})),{protocol:i}=(Gt().s[31]++,window.location);switch(Gt().s[32]++,e){case"pmtiles_vector":return Gt().b[14][0]++,Gt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Gt().b[14][1]++,Gt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Gt().b[14][2]++,Gt().s[35]++,{type:"geojson",cluster:(Gt().b[15][0]++,t.cluster||(Gt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Gt().b[14][3]++,Gt().s[36]++,{type:"vector",url:(Gt().b[16][0]++,t.url||(Gt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Gt().b[14][4]++,Gt().s[37]++,{type:"vector",tiles:(Gt().b[17][0]++,t.tiles||(Gt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Gt().b[18][0]++,t.minzoom||(Gt().b[18][1]++,0)),maxzoom:(Gt().b[19][0]++,t.maxzoom||(Gt().b[19][1]++,14)),scheme:(Gt().b[20][0]++,t.scheme||(Gt().b[20][1]++,"xyz"))};case"tilejson_raster":return Gt().b[14][5]++,Gt().s[38]++,{type:"raster",url:(Gt().b[21][0]++,t.url||(Gt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Gt().b[14][6]++,Gt().s[39]++,{type:"raster",tiles:(Gt().b[22][0]++,t.tiles||(Gt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Gt().b[23][0]++,t.minzoom||(Gt().b[23][1]++,0)),maxzoom:(Gt().b[24][0]++,t.maxzoom||(Gt().b[24][1]++,14)),scheme:(Gt().b[25][0]++,t.scheme||(Gt().b[25][1]++,"xyz")),tileSize:(Gt().b[26][0]++,t.tileSize||(Gt().b[26][1]++,512))};case"tilejson_raster-dem":return Gt().b[14][7]++,Gt().s[40]++,{type:"raster-dem",url:(Gt().b[27][0]++,t.url||(Gt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Gt().b[14][8]++,Gt().s[41]++,{type:"raster-dem",tiles:(Gt().b[28][0]++,t.tiles||(Gt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Gt().b[29][0]++,t.minzoom||(Gt().b[29][1]++,0)),maxzoom:(Gt().b[30][0]++,t.maxzoom||(Gt().b[30][1]++,14)),tileSize:(Gt().b[31][0]++,t.tileSize||(Gt().b[31][1]++,512))};case"image":return Gt().b[14][9]++,Gt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Gt().b[14][10]++,Gt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Gt().b[14][11]++,Gt().s[44]++,{}}}onAdd=(Gt().s[45]++,()=>{Gt().f[7]++;const{source:e,sourceId:t}=(Gt().s[46]++,this.state);Gt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Gt().s[48]++,e=>{Gt().f[8]++,Gt().s[49]++,this.setState({source:e})});render(){Gt().f[9]++;const e=(Gt().s[50]++,this.props.t),t=(Gt().s[51]++,{doc:Xr.source_vector.type.doc});return Gt().s[52]++,te.jsxs("div",{className:"maputnik-add-source",children:[te.jsx(vd,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Gt().f[10]++,Gt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),te.jsx(z4,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Gt().f[11]++,Gt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),te.jsx(pae,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),te.jsx(Zs,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class RPe extends On.Component{stripTitle(e){Gt().f[12]++;const t=(Gt().s[55]++,{...e});return Gt().s[56]++,delete t.title,Gt().s[57]++,t}render(){Gt().f[13]++;const{t:e,mapStyle:t}=(Gt().s[58]++,this.props),i=(Gt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Gt().s[60]++,Object.keys(t.sources).map(s=>{Gt().f[14]++;const a=(Gt().s[61]++,t.sources[s]);return Gt().s[62]++,te.jsx(kPe,{sourceId:s,source:a,onChange:c=>(Gt().f[15]++,Gt().s[63]++,this.props.onStyleChanged(mae(t,s,c))),onDelete:()=>(Gt().f[16]++,Gt().s[64]++,this.props.onStyleChanged(xPe(t,s))),...i},s)})),o=(Gt().s[65]++,Object.keys(tH).filter(s=>(Gt().f[17]++,Gt().s[66]++,!(s in t.sources))).map(s=>{Gt().f[18]++;const a=(Gt().s[67]++,tH[s]);return Gt().s[68]++,te.jsx(BPe,{id:s,type:a.type,title:a.title,onSelect:()=>(Gt().f[19]++,Gt().s[69]++,this.props.onStyleChanged(eH(t,s,this.stripTitle(a))))},s)}));return Gt().s[70]++,te.jsxs(C1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Active Sources")}),r]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Choose Public Source")}),te.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),te.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Add New Source")}),te.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),te.jsx(TPe,{onAdd:(s,a)=>(Gt().f[20]++,Gt().s[71]++,this.props.onStyleChanged(eH(t,s,a))),...i})]})]})}}const DPe=(Gt().s[72]++,No()(RPe));function kg(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kg=function(){return s},s}kg();class PPe extends On.Component{render(){kg().f[0]++;const e=(kg().s[0]++,this.props.t);return kg().s[1]++,te.jsxs(C1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(kg().f[1]++,kg().s[2]++,this.props.onCancel()),children:[te.jsx("p",{children:this.props.message}),te.jsx("p",{className:"maputnik-dialog__buttons",children:te.jsx(Zs,{onClick:t=>(kg().f[2]++,kg().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const UPe=(kg().s[4]++,No()(PPe)),gae=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function Cn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cn=function(){return s},s}Cn();class LPe extends On.Component{render(){return Cn().f[0]++,Cn().s[0]++,te.jsx("div",{className:"maputnik-public-style",children:te.jsxs(Zs,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(Cn().f[1]++,Cn().s[1]++,this.props.onSelect(this.props.url)),children:[te.jsxs("div",{className:"maputnik-public-style-header",children:[te.jsx("div",{children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(HX,{})]}),te.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class KPe extends On.Component{constructor(e){Cn().f[2]++,Cn().s[2]++,super(e),Cn().s[3]++,this.state={styleUrl:""}}clearError(){Cn().f[3]++,Cn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){Cn().f[4]++,Cn().s[5]++,e?(Cn().b[0][0]++,Cn().s[6]++,e.stopPropagation()):Cn().b[0][1]++,Cn().s[7]++,this.state.activeRequest?(Cn().b[1][0]++,Cn().s[8]++,this.state.activeRequest.abort(),Cn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):Cn().b[1][1]++}onStyleSelect=(Cn().s[10]++,e=>{Cn().f[5]++,Cn().s[11]++,this.clearError();let t=(Cn().s[12]++,!1);Cn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return Cn().f[6]++,Cn().s[14]++,i.json()}).then(i=>{if(Cn().f[7]++,Cn().s[15]++,t){Cn().b[2][0]++,Cn().s[16]++;return}else Cn().b[2][1]++;Cn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(Cn().s[18]++,Bd.ensureStyleValidity(i));Cn().s[19]++,console.log("Loaded style ",r.id),Cn().s[20]++,this.props.onStyleOpen(r),Cn().s[21]++,this.onOpenToggle()}).catch(i=>{Cn().f[8]++,Cn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),Cn().s[23]++,console.error(i),Cn().s[24]++,console.warn("Could not open the style URL",e)}),Cn().s[25]++,this.setState({activeRequest:{abort:function(){Cn().f[9]++,Cn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(Cn().s[27]++,e=>{Cn().f[10]++,Cn().s[28]++,e.preventDefault(),Cn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(Cn().s[30]++,async()=>{Cn().f[11]++,Cn().s[31]++,this.clearError();const e=(Cn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(Cn().s[33]++,await window.showOpenFilePicker(e)),i=(Cn().s[34]++,await t.getFile()),r=(Cn().s[35]++,await i.text());let o;Cn().s[36]++;try{Cn().s[37]++,o=JSON.parse(r)}catch(s){Cn().s[38]++,this.setState({error:s.toString()}),Cn().s[39]++;return}return Cn().s[40]++,o=Bd.ensureStyleValidity(o),Cn().s[41]++,this.props.onStyleOpen(o,t),Cn().s[42]++,this.onOpenToggle(),Cn().s[43]++,i});onFileChanged=(Cn().s[44]++,e=>{if(Cn().f[12]++,Cn().s[45]++,e)Cn().b[3][1]++;else{Cn().b[3][0]++,Cn().s[46]++;return}if(Cn().s[47]++,e.length===0){Cn().b[4][0]++,Cn().s[48]++;return}else Cn().b[4][1]++;const t=(Cn().s[49]++,e[0]),i=(Cn().s[50]++,new FileReader);Cn().s[51]++,this.clearError(),Cn().s[52]++,i.readAsText(t,"UTF-8"),Cn().s[53]++,i.onload=r=>{Cn().f[13]++;let o;Cn().s[54]++;try{Cn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){Cn().s[56]++,this.setState({error:s.toString()}),Cn().s[57]++;return}Cn().s[58]++,o=Bd.ensureStyleValidity(o),Cn().s[59]++,this.props.onStyleOpen(o),Cn().s[60]++,this.onOpenToggle()},Cn().s[61]++,i.onerror=r=>(Cn().f[14]++,Cn().s[62]++,console.log(r.target))});onOpenToggle(){Cn().f[15]++,Cn().s[63]++,this.setState({styleUrl:""}),Cn().s[64]++,this.clearError(),Cn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(Cn().s[66]++,e=>{Cn().f[16]++,Cn().s[67]++,this.setState({styleUrl:e})});render(){Cn().f[17]++;const e=(Cn().s[68]++,this.props.t),t=(Cn().s[69]++,gae.map(r=>(Cn().f[18]++,Cn().s[70]++,te.jsx(LPe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return Cn().s[71]++,this.state.error?(Cn().b[5][0]++,Cn().s[72]++,i=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(Cn().f[19]++,Cn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):Cn().b[5][1]++,Cn().s[74]++,te.jsxs("div",{children:[te.jsxs(C1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(Cn().f[20]++,Cn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Open local Style")}),te.jsx("p",{children:e("Open a local JSON style from your computer.")}),te.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(Cn().b[6][0]++,te.jsxs(Zs,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[te.jsx(az,{})," ",e("Open Style")]})):(Cn().b[6][1]++,te.jsxs("label",{children:[te.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[te.jsx(az,{})," ",e("Open Style")]}),te.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(Cn().f[21]++,Cn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),te.jsx("section",{className:"maputnik-modal-section",children:te.jsxs("form",{onSubmit:this.onSubmitUrl,children:[te.jsx("h1",{children:e("Load from URL")}),te.jsx("p",{children:te.jsxs(_b,{t:e,children:["Load from a URL. Note that the URL must have ",te.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),te.jsx(kK,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),te.jsx("div",{children:te.jsx(Zs,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[te.jsx("h1",{children:e("Gallery Styles")}),te.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),te.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),te.jsx(UPe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(Cn().f[22]++,Cn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const FPe=(Cn().s[78]++,No()(KPe));function op(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return op=function(){return s},s}op();class zPe extends On.Component{render(){op().f[0]++;const e=(op().s[0]++,this.props.t),t=(op().s[1]++,[{key:te.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:te.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:te.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:te.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:te.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:te.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:te.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:te.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(op().s[2]++,[{key:te.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:te.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:te.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:te.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:te.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:te.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return op().s[3]++,te.jsx(C1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("p",{children:te.jsxs(_b,{t:e,children:["Press ",te.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),te.jsx("dl",{children:t.map((r,o)=>(op().f[1]++,op().s[4]++,te.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[te.jsx("dt",{children:r.key},"dt"+o),te.jsx("dd",{children:r.text},"dd"+o)]},o)))}),te.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),te.jsx("ul",{children:i.map((r,o)=>(op().f[2]++,op().s[5]++,te.jsxs("li",{children:[te.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const jPe=(op().s[6]++,No()(zPe));function wu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wu=function(){return s},s}wu();class NPe extends On.Component{render(){wu().f[0]++;const{t:e,mapView:t}=(wu().s[0]++,this.props),i=(wu().s[1]++,Math.round(t.zoom)+1),r=(wu().s[2]++,+t.center.lng.toFixed(5)),o=(wu().s[3]++,+t.center.lat.toFixed(5));return wu().s[4]++,te.jsxs(C1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("h1",{children:e("Options")}),(wu().b[0][0]++,this.props.renderer==="mlgljs"&&(wu().b[0][1]++,te.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(wu().f[1]++,wu().s[5]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(wu().f[2]++,wu().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(wu().b[1][0]++,this.props.renderer==="ol"&&(wu().b[1][1]++,te.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(wu().f[3]++,wu().s[7]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(wu().f[4]++,wu().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Links")}),te.jsx("p",{children:te.jsxs(_b,{t:e,children:[te.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const GPe=(wu().s[9]++,No()(NPe));function yi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yi=function(){return s},s}yi();yi().s[0]++;const WPe=n=>{yi().f[0]++,yi().s[1]++;const e=()=>{yi().f[1]++;const h=(yi().s[2]++,n.mapStyle),m=(yi().s[3]++,yi().b[0][0]++,h.state||(yi().b[0][1]++,{}));return yi().s[4]++,Object.entries(m).map(([v,x])=>(yi().f[2]++,yi().s[5]++,{key:v,value:x.default}))};yi().s[6]++;const t=h=>{yi().f[3]++;const m=(yi().s[7]++,{...n.mapStyle}),v=(yi().s[8]++,{});yi().s[9]++;for(const x of h)yi().s[10]++,x.key.trim()!==""?(yi().b[1][0]++,yi().s[11]++,v[x.key]={default:x.value}):yi().b[1][1]++;yi().s[12]++,m.state=Object.keys(v).length>0?(yi().b[2][0]++,v):(yi().b[2][1]++,void 0),yi().s[13]++,n.onStyleChanged(m)};yi().s[14]++;const i=()=>{yi().f[4]++;const h=(yi().s[15]++,e());let m=(yi().s[16]++,1);for(yi().s[17]++;h.find(v=>(yi().f[5]++,yi().s[18]++,v.key===`key${m}`));)yi().s[19]++,m++;yi().s[20]++,h.push({key:`key${m}`,value:"value"}),yi().s[21]++,t(h)};yi().s[22]++;const r=h=>{yi().f[6]++;const m=(yi().s[23]++,e());yi().s[24]++,m.splice(h,1),yi().s[25]++,t(m)};yi().s[26]++;const o=(h,m)=>{yi().f[7]++;const v=(yi().s[27]++,e());yi().s[28]++,v[h].key=(yi().b[3][0]++,m||(yi().b[3][1]++,"")),yi().s[29]++,t(v)};yi().s[30]++;const s=(h,m)=>{yi().f[8]++;const v=(yi().s[31]++,e());yi().s[32]++,v[h].value=(yi().b[4][0]++,m||(yi().b[4][1]++,"")),yi().s[33]++,t(v)},a=(yi().s[34]++,e()),c=(yi().s[35]++,a.map((h,m)=>(yi().f[9]++,yi().s[36]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(vd,{label:n.t("Key"),value:h.key,onChange:v=>(yi().f[10]++,yi().s[37]++,o(m,(yi().b[5][0]++,v||(yi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+m})}),te.jsx("td",{children:te.jsx(vd,{label:n.t("Value"),value:h.value,onChange:v=>(yi().f[11]++,yi().s[38]++,s(m,(yi().b[6][0]++,v||(yi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+m})}),te.jsx("td",{style:{verticalAlign:"middle"},children:te.jsx(Zs,{onClick:()=>(yi().f[12]++,yi().s[39]++,r(m)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:te.jsx(Zb,{})})})]},m))));return yi().s[40]++,te.jsxs(C1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(yi().b[7][0]++,a.length===0&&(yi().b[7][1]++,te.jsxs("div",{children:[te.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),te.jsx("div",{className:"maputnik-doc-inline",children:te.jsx(I6,{fieldSpec:Xr.$root.state})},"doc")]}))),(yi().b[8][0]++,a.length>0&&(yi().b[8][1]++,te.jsxs("table",{children:[te.jsx("thead",{}),te.jsx("tbody",{children:c})]}))),te.jsx("div",{children:te.jsxs(Zs,{onClick:i,"data-wd-key":"global-state-add-variable",children:[te.jsx(F6,{}),n.t("Add Variable")]})})]})},QPe=(yi().s[41]++,No()(WPe));var ib={},n3={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var qPe=n3.exports,nH;function YPe(){return nH||(nH=1,(function(n,e){(function(t){var i=e&&!e.nodeType&&e,r=n&&!n.nodeType&&n,o=typeof window=="object"&&window;(o.global===o||o.window===o||o.self===o)&&(t=o);var s,a=2147483647,c=36,h=1,m=26,v=38,x=700,S=72,B=128,R="-",F=/^xn--/,j=/[^\x20-\x7E]/,W=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=c-h,N=Math.floor,Y=String.fromCharCode,z;function ne(ke){throw new RangeError(H[ke])}function ae(ke,Oe){for(var ze=ke.length,we=[];ze--;)we[ze]=Oe(ke[ze]);return we}function ve(ke,Oe){var ze=ke.split("@"),we="";ze.length>1&&(we=ze[0]+"@",ke=ze[1]),ke=ke.replace(W,".");var At=ke.split("."),it=ae(At,Oe).join(".");return we+it}function pe(ke){for(var Oe=[],ze=0,we=ke.length,At,it;ze<we;)At=ke.charCodeAt(ze++),At>=55296&&At<=56319&&ze<we?(it=ke.charCodeAt(ze++),(it&64512)==56320?Oe.push(((At&1023)<<10)+(it&1023)+65536):(Oe.push(At),ze--)):Oe.push(At);return Oe}function be(ke){return ae(ke,function(Oe){var ze="";return Oe>65535&&(Oe-=65536,ze+=Y(Oe>>>10&1023|55296),Oe=56320|Oe&1023),ze+=Y(Oe),ze}).join("")}function Ee(ke){return ke-48<10?ke-22:ke-65<26?ke-65:ke-97<26?ke-97:c}function Te(ke,Oe){return ke+22+75*(ke<26)-((Oe!=0)<<5)}function je(ke,Oe,ze){var we=0;for(ke=ze?N(ke/x):ke>>1,ke+=N(ke/Oe);ke>$*m>>1;we+=c)ke=N(ke/$);return N(we+($+1)*ke/(ke+v))}function Re(ke){var Oe=[],ze=ke.length,we,At=0,it=B,Ct=S,It,Ke,Ie,Se,Ge,st,ut,ft,St;for(It=ke.lastIndexOf(R),It<0&&(It=0),Ke=0;Ke<It;++Ke)ke.charCodeAt(Ke)>=128&&ne("not-basic"),Oe.push(ke.charCodeAt(Ke));for(Ie=It>0?It+1:0;Ie<ze;){for(Se=At,Ge=1,st=c;Ie>=ze&&ne("invalid-input"),ut=Ee(ke.charCodeAt(Ie++)),(ut>=c||ut>N((a-At)/Ge))&&ne("overflow"),At+=ut*Ge,ft=st<=Ct?h:st>=Ct+m?m:st-Ct,!(ut<ft);st+=c)St=c-ft,Ge>N(a/St)&&ne("overflow"),Ge*=St;we=Oe.length+1,Ct=je(At-Se,we,Se==0),N(At/we)>a-it&&ne("overflow"),it+=N(At/we),At%=we,Oe.splice(At++,0,it)}return be(Oe)}function qe(ke){var Oe,ze,we,At,it,Ct,It,Ke,Ie,Se,Ge,st=[],ut,ft,St,kt;for(ke=pe(ke),ut=ke.length,Oe=B,ze=0,it=S,Ct=0;Ct<ut;++Ct)Ge=ke[Ct],Ge<128&&st.push(Y(Ge));for(we=At=st.length,At&&st.push(R);we<ut;){for(It=a,Ct=0;Ct<ut;++Ct)Ge=ke[Ct],Ge>=Oe&&Ge<It&&(It=Ge);for(ft=we+1,It-Oe>N((a-ze)/ft)&&ne("overflow"),ze+=(It-Oe)*ft,Oe=It,Ct=0;Ct<ut;++Ct)if(Ge=ke[Ct],Ge<Oe&&++ze>a&&ne("overflow"),Ge==Oe){for(Ke=ze,Ie=c;Se=Ie<=it?h:Ie>=it+m?m:Ie-it,!(Ke<Se);Ie+=c)kt=Ke-Se,St=c-Se,st.push(Y(Te(Se+kt%St,0))),Ke=N(kt/St);st.push(Y(Te(Ke,0))),it=je(ze,ft,we==At),ze=0,++we}++ze,++Oe}return st.join("")}function nt(ke){return ve(ke,function(Oe){return F.test(Oe)?Re(Oe.slice(4).toLowerCase()):Oe})}function ht(ke){return ve(ke,function(Oe){return j.test(Oe)?"xn--"+qe(Oe):Oe})}if(s={version:"1.4.1",ucs2:{decode:pe,encode:be},decode:Re,encode:qe,toASCII:ht,toUnicode:nt},i&&r)if(n.exports==i)r.exports=s;else for(z in s)s.hasOwnProperty(z)&&(i[z]=s[z]);else t.punycode=s})(qPe)})(n3,n3.exports)),n3.exports}var cT,iH;function Zx(){return iH||(iH=1,cT=TypeError),cT}const $Pe={},VPe=Object.freeze(Object.defineProperty({__proto__:null,default:$Pe},Symbol.toStringTag,{value:"Module"})),HPe=WD(VPe);var AT,rH;function Z6(){if(rH)return AT;rH=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,i=n&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=r&&o&&typeof o.get=="function"?o.get:null,a=r&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,h=c?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,v=m?WeakSet.prototype.has:null,x=typeof WeakRef=="function"&&WeakRef.prototype,S=x?WeakRef.prototype.deref:null,B=Boolean.prototype.valueOf,R=Object.prototype.toString,F=Function.prototype.toString,j=String.prototype.match,W=String.prototype.slice,H=String.prototype.replace,$=String.prototype.toUpperCase,N=String.prototype.toLowerCase,Y=RegExp.prototype.test,z=Array.prototype.concat,ne=Array.prototype.join,ae=Array.prototype.slice,ve=Math.floor,pe=typeof BigInt=="function"?BigInt.prototype.valueOf:null,be=Object.getOwnPropertySymbols,Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Te=typeof Symbol=="function"&&typeof Symbol.iterator=="object",je=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Te||!0)?Symbol.toStringTag:null,Re=Object.prototype.propertyIsEnumerable,qe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(fe){return fe.__proto__}:null);function nt(fe,De){if(fe===1/0||fe===-1/0||fe!==fe||fe&&fe>-1e3&&fe<1e3||Y.call(/e/,De))return De;var y=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof fe=="number"){var rt=fe<0?-ve(-fe):ve(fe);if(rt!==fe){var Bt=String(rt),pt=W.call(De,Bt.length+1);return H.call(Bt,y,"$&_")+"."+H.call(H.call(pt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return H.call(De,y,"$&_")}var ht=HPe,ke=ht.custom,Oe=ft(ke)?ke:null,ze={__proto__:null,double:'"',single:"'"},we={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};AT=function fe(De,y,rt,Bt){var pt=y||{};if(en(pt,"quoteStyle")&&!en(ze,pt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(en(pt,"maxStringLength")&&(typeof pt.maxStringLength=="number"?pt.maxStringLength<0&&pt.maxStringLength!==1/0:pt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ht=en(pt,"customInspect")?pt.customInspect:!0;if(typeof Ht!="boolean"&&Ht!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(en(pt,"indent")&&pt.indent!==null&&pt.indent!=="	"&&!(parseInt(pt.indent,10)===pt.indent&&pt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(en(pt,"numericSeparator")&&typeof pt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var gt=pt.numericSeparator;if(typeof De>"u")return"undefined";if(De===null)return"null";if(typeof De=="boolean")return De?"true":"false";if(typeof De=="string")return Me(De,pt);if(typeof De=="number"){if(De===0)return 1/0/De>0?"0":"-0";var jn=String(De);return gt?nt(De,jn):jn}if(typeof De=="bigint"){var ni=String(De)+"n";return gt?nt(De,ni):ni}var In=typeof pt.depth>"u"?5:pt.depth;if(typeof rt>"u"&&(rt=0),rt>=In&&In>0&&typeof De=="object")return It(De)?"[Array]":"[Object]";var Ln=xe(pt,rt);if(typeof Bt>"u")Bt=[];else if(si(Bt,De)>=0)return"[Circular]";function Zn(Xs,Ei,gl){if(Ei&&(Bt=ae.call(Bt),Bt.push(Ei)),gl){var Vr={depth:pt.depth};return en(pt,"quoteStyle")&&(Vr.quoteStyle=pt.quoteStyle),fe(Xs,Vr,rt+1,Bt)}return fe(Xs,pt,rt+1,Bt)}if(typeof De=="function"&&!Ie(De)){var Xi=zn(De),Di=Xe(De,Zn);return"[Function"+(Xi?": "+Xi:" (anonymous)")+"]"+(Di.length>0?" { "+ne.call(Di,", ")+" }":"")}if(ft(De)){var ur=Te?H.call(String(De),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ee.call(De);return typeof De=="object"&&!Te?le(ur):ur}if(Tt(De)){for(var fi="<"+N.call(String(De.nodeName)),Si=De.attributes||[],er=0;er<Si.length;er++)fi+=" "+Si[er].name+"="+At(it(Si[er].value),"double",pt);return fi+=">",De.childNodes&&De.childNodes.length&&(fi+="..."),fi+="</"+N.call(String(De.nodeName))+">",fi}if(It(De)){if(De.length===0)return"[]";var nn=Xe(De,Zn);return Ln&&!Ae(nn)?"["+Ye(nn,Ln)+"]":"[ "+ne.call(nn,", ")+" ]"}if(Se(De)){var Ti=Xe(De,Zn);return!("cause"in Error.prototype)&&"cause"in De&&!Re.call(De,"cause")?"{ ["+String(De)+"] "+ne.call(z.call("[cause]: "+Zn(De.cause),Ti),", ")+" }":Ti.length===0?"["+String(De)+"]":"{ ["+String(De)+"] "+ne.call(Ti,", ")+" }"}if(typeof De=="object"&&Ht){if(Oe&&typeof De[Oe]=="function"&&ht)return ht(De,{depth:In-rt});if(Ht!=="symbol"&&typeof De.inspect=="function")return De.inspect()}if(xn(De)){var Io=[];return i&&i.call(De,function(Xs,Ei){Io.push(Zn(Ei,De,!0)+" => "+Zn(Xs,De))}),se("Map",t.call(De),Io,Ln)}if(Hn(De)){var rs=[];return a&&a.call(De,function(Xs){rs.push(Zn(Xs,De))}),se("Set",s.call(De),rs,Ln)}if(Rn(De))return he("WeakMap");if(Un(De))return he("WeakSet");if(pn(De))return he("WeakRef");if(st(De))return le(Zn(Number(De)));if(St(De))return le(Zn(pe.call(De)));if(ut(De))return le(B.call(De));if(Ge(De))return le(Zn(String(De)));if(typeof window<"u"&&De===window)return"{ [object Window] }";if(typeof globalThis<"u"&&De===globalThis||typeof window<"u"&&De===window)return"{ [object globalThis] }";if(!Ke(De)&&!Ie(De)){var kr=Xe(De,Zn),hn=qe?qe(De)===Object.prototype:De instanceof Object||De.constructor===Object,Li=De instanceof Object?"":"null prototype",ii=!hn&&je&&Object(De)===De&&je in De?W.call(Pn(De),8,-1):Li?"Object":"",Ia=hn||typeof De.constructor!="function"?"":De.constructor.name?De.constructor.name+" ":"",tu=Ia+(ii||Li?"["+ne.call(z.call([],ii||[],Li||[]),": ")+"] ":"");return kr.length===0?tu+"{}":Ln?tu+"{"+Ye(kr,Ln)+"}":tu+"{ "+ne.call(kr,", ")+" }"}return String(De)};function At(fe,De,y){var rt=y.quoteStyle||De,Bt=ze[rt];return Bt+fe+Bt}function it(fe){return H.call(String(fe),/"/g,"&quot;")}function Ct(fe){return!je||!(typeof fe=="object"&&(je in fe||typeof fe[je]<"u"))}function It(fe){return Pn(fe)==="[object Array]"&&Ct(fe)}function Ke(fe){return Pn(fe)==="[object Date]"&&Ct(fe)}function Ie(fe){return Pn(fe)==="[object RegExp]"&&Ct(fe)}function Se(fe){return Pn(fe)==="[object Error]"&&Ct(fe)}function Ge(fe){return Pn(fe)==="[object String]"&&Ct(fe)}function st(fe){return Pn(fe)==="[object Number]"&&Ct(fe)}function ut(fe){return Pn(fe)==="[object Boolean]"&&Ct(fe)}function ft(fe){if(Te)return fe&&typeof fe=="object"&&fe instanceof Symbol;if(typeof fe=="symbol")return!0;if(!fe||typeof fe!="object"||!Ee)return!1;try{return Ee.call(fe),!0}catch{}return!1}function St(fe){if(!fe||typeof fe!="object"||!pe)return!1;try{return pe.call(fe),!0}catch{}return!1}var kt=Object.prototype.hasOwnProperty||function(fe){return fe in this};function en(fe,De){return kt.call(fe,De)}function Pn(fe){return R.call(fe)}function zn(fe){if(fe.name)return fe.name;var De=j.call(F.call(fe),/^function\s*([\w$]+)/);return De?De[1]:null}function si(fe,De){if(fe.indexOf)return fe.indexOf(De);for(var y=0,rt=fe.length;y<rt;y++)if(fe[y]===De)return y;return-1}function xn(fe){if(!t||!fe||typeof fe!="object")return!1;try{t.call(fe);try{s.call(fe)}catch{return!0}return fe instanceof Map}catch{}return!1}function Rn(fe){if(!h||!fe||typeof fe!="object")return!1;try{h.call(fe,h);try{v.call(fe,v)}catch{return!0}return fe instanceof WeakMap}catch{}return!1}function pn(fe){if(!S||!fe||typeof fe!="object")return!1;try{return S.call(fe),!0}catch{}return!1}function Hn(fe){if(!s||!fe||typeof fe!="object")return!1;try{s.call(fe);try{t.call(fe)}catch{return!0}return fe instanceof Set}catch{}return!1}function Un(fe){if(!v||!fe||typeof fe!="object")return!1;try{v.call(fe,v);try{h.call(fe,h)}catch{return!0}return fe instanceof WeakSet}catch{}return!1}function Tt(fe){return!fe||typeof fe!="object"?!1:typeof HTMLElement<"u"&&fe instanceof HTMLElement?!0:typeof fe.nodeName=="string"&&typeof fe.getAttribute=="function"}function Me(fe,De){if(fe.length>De.maxStringLength){var y=fe.length-De.maxStringLength,rt="... "+y+" more character"+(y>1?"s":"");return Me(W.call(fe,0,De.maxStringLength),De)+rt}var Bt=we[De.quoteStyle||"single"];Bt.lastIndex=0;var pt=H.call(H.call(fe,Bt,"\\$1"),/[\x00-\x1f]/g,oe);return At(pt,"single",De)}function oe(fe){var De=fe.charCodeAt(0),y={8:"b",9:"t",10:"n",12:"f",13:"r"}[De];return y?"\\"+y:"\\x"+(De<16?"0":"")+$.call(De.toString(16))}function le(fe){return"Object("+fe+")"}function he(fe){return fe+" { ? }"}function se(fe,De,y,rt){var Bt=rt?Ye(y,rt):ne.call(y,", ");return fe+" ("+De+") {"+Bt+"}"}function Ae(fe){for(var De=0;De<fe.length;De++)if(si(fe[De],`
`)>=0)return!1;return!0}function xe(fe,De){var y;if(fe.indent==="	")y="	";else if(typeof fe.indent=="number"&&fe.indent>0)y=ne.call(Array(fe.indent+1)," ");else return null;return{base:y,prev:ne.call(Array(De+1),y)}}function Ye(fe,De){if(fe.length===0)return"";var y=`
`+De.prev+De.base;return y+ne.call(fe,","+y)+`
`+De.prev}function Xe(fe,De){var y=It(fe),rt=[];if(y){rt.length=fe.length;for(var Bt=0;Bt<fe.length;Bt++)rt[Bt]=en(fe,Bt)?De(fe[Bt],fe):""}var pt=typeof be=="function"?be(fe):[],Ht;if(Te){Ht={};for(var gt=0;gt<pt.length;gt++)Ht["$"+pt[gt]]=pt[gt]}for(var jn in fe)en(fe,jn)&&(y&&String(Number(jn))===jn&&jn<fe.length||Te&&Ht["$"+jn]instanceof Symbol||(Y.call(/[^\w$]/,jn)?rt.push(De(jn,fe)+": "+De(fe[jn],fe)):rt.push(jn+": "+De(fe[jn],fe))));if(typeof be=="function")for(var ni=0;ni<pt.length;ni++)Re.call(fe,pt[ni])&&rt.push("["+De(pt[ni])+"]: "+De(fe[pt[ni]],fe));return rt}return AT}var hT,oH;function ZPe(){if(oH)return hT;oH=1;var n=Z6(),e=Zx(),t=function(a,c,h){for(var m=a,v;(v=m.next)!=null;m=v)if(v.key===c)return m.next=v.next,h||(v.next=a.next,a.next=v),v},i=function(a,c){if(a){var h=t(a,c);return h&&h.value}},r=function(a,c,h){var m=t(a,c);m?m.value=h:a.next={key:c,next:a.next,value:h}},o=function(a,c){return a?!!t(a,c):!1},s=function(a,c){if(a)return t(a,c,!0)};return hT=function(){var c,h={assert:function(m){if(!h.has(m))throw new e("Side channel does not contain "+n(m))},delete:function(m){var v=c&&c.next,x=s(c,m);return x&&v&&v===x&&(c=void 0),!!x},get:function(m){return i(c,m)},has:function(m){return o(c,m)},set:function(m,v){c||(c={next:void 0}),r(c,m,v)}};return h},hT}var dT,sH;function yae(){return sH||(sH=1,dT=Object),dT}var fT,aH;function XPe(){return aH||(aH=1,fT=Error),fT}var pT,lH;function JPe(){return lH||(lH=1,pT=EvalError),pT}var mT,uH;function eUe(){return uH||(uH=1,mT=RangeError),mT}var gT,cH;function tUe(){return cH||(cH=1,gT=ReferenceError),gT}var yT,AH;function nUe(){return AH||(AH=1,yT=SyntaxError),yT}var vT,hH;function iUe(){return hH||(hH=1,vT=URIError),vT}var bT,dH;function rUe(){return dH||(dH=1,bT=Math.abs),bT}var CT,fH;function oUe(){return fH||(fH=1,CT=Math.floor),CT}var _T,pH;function sUe(){return pH||(pH=1,_T=Math.max),_T}var xT,mH;function aUe(){return mH||(mH=1,xT=Math.min),xT}var MT,gH;function lUe(){return gH||(gH=1,MT=Math.pow),MT}var wT,yH;function uUe(){return yH||(yH=1,wT=Math.round),wT}var ST,vH;function cUe(){return vH||(vH=1,ST=Number.isNaN||function(e){return e!==e}),ST}var ET,bH;function AUe(){if(bH)return ET;bH=1;var n=cUe();return ET=function(t){return n(t)||t===0?t:t<0?-1:1},ET}var OT,CH;function hUe(){return CH||(CH=1,OT=Object.getOwnPropertyDescriptor),OT}var BT,_H;function vae(){if(_H)return BT;_H=1;var n=hUe();if(n)try{n([],"length")}catch{n=null}return BT=n,BT}var IT,xH;function dUe(){if(xH)return IT;xH=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return IT=n,IT}var kT,MH;function fUe(){return MH||(MH=1,kT=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==r||a.enumerable!==!0)return!1}return!0}),kT}var TT,wH;function pUe(){if(wH)return TT;wH=1;var n=typeof Symbol<"u"&&Symbol,e=fUe();return TT=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},TT}var RT,SH;function bae(){return SH||(SH=1,RT=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),RT}var DT,EH;function Cae(){if(EH)return DT;EH=1;var n=yae();return DT=n.getPrototypeOf||null,DT}var PT,OH;function mUe(){if(OH)return PT;OH=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",r=function(c,h){for(var m=[],v=0;v<c.length;v+=1)m[v]=c[v];for(var x=0;x<h.length;x+=1)m[x+c.length]=h[x];return m},o=function(c,h){for(var m=[],v=h,x=0;v<c.length;v+=1,x+=1)m[x]=c[v];return m},s=function(a,c){for(var h="",m=0;m<a.length;m+=1)h+=a[m],m+1<a.length&&(h+=c);return h};return PT=function(c){var h=this;if(typeof h!="function"||e.apply(h)!==i)throw new TypeError(n+h);for(var m=o(arguments,1),v,x=function(){if(this instanceof v){var j=h.apply(this,r(m,arguments));return Object(j)===j?j:this}return h.apply(c,r(m,arguments))},S=t(0,h.length-m.length),B=[],R=0;R<S;R++)B[R]="$"+R;if(v=Function("binder","return function ("+s(B,",")+"){ return binder.apply(this,arguments); }")(x),h.prototype){var F=function(){};F.prototype=h.prototype,v.prototype=new F,F.prototype=null}return v},PT}var UT,BH;function X6(){if(BH)return UT;BH=1;var n=mUe();return UT=Function.prototype.bind||n,UT}var LT,IH;function DK(){return IH||(IH=1,LT=Function.prototype.call),LT}var KT,kH;function _ae(){return kH||(kH=1,KT=Function.prototype.apply),KT}var FT,TH;function gUe(){return TH||(TH=1,FT=typeof Reflect<"u"&&Reflect&&Reflect.apply),FT}var zT,RH;function yUe(){if(RH)return zT;RH=1;var n=X6(),e=_ae(),t=DK(),i=gUe();return zT=i||n.call(t,e),zT}var jT,DH;function xae(){if(DH)return jT;DH=1;var n=X6(),e=Zx(),t=DK(),i=yUe();return jT=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return i(n,t,o)},jT}var NT,PH;function vUe(){if(PH)return NT;PH=1;var n=xae(),e=vae(),t;try{t=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var i=!!t&&e&&e(Object.prototype,"__proto__"),r=Object,o=r.getPrototypeOf;return NT=i&&typeof i.get=="function"?n([i.get]):typeof o=="function"?function(a){return o(a==null?a:r(a))}:!1,NT}var GT,UH;function bUe(){if(UH)return GT;UH=1;var n=bae(),e=Cae(),t=vUe();return GT=n?function(r){return n(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:t?function(r){return t(r)}:null,GT}var WT,LH;function CUe(){if(LH)return WT;LH=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=X6();return WT=t.call(n,e),WT}var QT,KH;function PK(){if(KH)return QT;KH=1;var n,e=yae(),t=XPe(),i=JPe(),r=eUe(),o=tUe(),s=nUe(),a=Zx(),c=iUe(),h=rUe(),m=oUe(),v=sUe(),x=aUe(),S=lUe(),B=uUe(),R=AUe(),F=Function,j=function(Ie){try{return F('"use strict"; return ('+Ie+").constructor;")()}catch{}},W=vae(),H=dUe(),$=function(){throw new a},N=W?(function(){try{return arguments.callee,$}catch{try{return W(arguments,"callee").get}catch{return $}}})():$,Y=pUe()(),z=bUe(),ne=Cae(),ae=bae(),ve=_ae(),pe=DK(),be={},Ee=typeof Uint8Array>"u"||!z?n:z(Uint8Array),Te={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":Y&&z?z([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":be,"%AsyncGenerator%":be,"%AsyncGeneratorFunction%":be,"%AsyncIteratorPrototype%":be,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":F,"%GeneratorFunction%":be,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Y&&z?z(z([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Y||!z?n:z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":W,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Y||!z?n:z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Y&&z?z(""[Symbol.iterator]()):n,"%Symbol%":Y?Symbol:n,"%SyntaxError%":s,"%ThrowTypeError%":N,"%TypedArray%":Ee,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":pe,"%Function.prototype.apply%":ve,"%Object.defineProperty%":H,"%Object.getPrototypeOf%":ne,"%Math.abs%":h,"%Math.floor%":m,"%Math.max%":v,"%Math.min%":x,"%Math.pow%":S,"%Math.round%":B,"%Math.sign%":R,"%Reflect.getPrototypeOf%":ae};if(z)try{null.error}catch(Ie){var je=z(z(Ie));Te["%Error.prototype%"]=je}var Re=function Ie(Se){var Ge;if(Se==="%AsyncFunction%")Ge=j("async function () {}");else if(Se==="%GeneratorFunction%")Ge=j("function* () {}");else if(Se==="%AsyncGeneratorFunction%")Ge=j("async function* () {}");else if(Se==="%AsyncGenerator%"){var st=Ie("%AsyncGeneratorFunction%");st&&(Ge=st.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var ut=Ie("%AsyncGenerator%");ut&&z&&(Ge=z(ut.prototype))}return Te[Se]=Ge,Ge},qe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},nt=X6(),ht=CUe(),ke=nt.call(pe,Array.prototype.concat),Oe=nt.call(ve,Array.prototype.splice),ze=nt.call(pe,String.prototype.replace),we=nt.call(pe,String.prototype.slice),At=nt.call(pe,RegExp.prototype.exec),it=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ct=/\\(\\)?/g,It=function(Se){var Ge=we(Se,0,1),st=we(Se,-1);if(Ge==="%"&&st!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(st==="%"&&Ge!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var ut=[];return ze(Se,it,function(ft,St,kt,en){ut[ut.length]=kt?ze(en,Ct,"$1"):St||ft}),ut},Ke=function(Se,Ge){var st=Se,ut;if(ht(qe,st)&&(ut=qe[st],st="%"+ut[0]+"%"),ht(Te,st)){var ft=Te[st];if(ft===be&&(ft=Re(st)),typeof ft>"u"&&!Ge)throw new a("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:ut,name:st,value:ft}}throw new s("intrinsic "+Se+" does not exist!")};return QT=function(Se,Ge){if(typeof Se!="string"||Se.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ge!="boolean")throw new a('"allowMissing" argument must be a boolean');if(At(/^%?[^%]*%?$/,Se)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var st=It(Se),ut=st.length>0?st[0]:"",ft=Ke("%"+ut+"%",Ge),St=ft.name,kt=ft.value,en=!1,Pn=ft.alias;Pn&&(ut=Pn[0],Oe(st,ke([0,1],Pn)));for(var zn=1,si=!0;zn<st.length;zn+=1){var xn=st[zn],Rn=we(xn,0,1),pn=we(xn,-1);if((Rn==='"'||Rn==="'"||Rn==="`"||pn==='"'||pn==="'"||pn==="`")&&Rn!==pn)throw new s("property names with quotes must have matching quotes");if((xn==="constructor"||!si)&&(en=!0),ut+="."+xn,St="%"+ut+"%",ht(Te,St))kt=Te[St];else if(kt!=null){if(!(xn in kt)){if(!Ge)throw new a("base intrinsic for "+Se+" exists, but the property is not available.");return}if(W&&zn+1>=st.length){var Hn=W(kt,xn);si=!!Hn,si&&"get"in Hn&&!("originalValue"in Hn.get)?kt=Hn.get:kt=kt[xn]}else si=ht(kt,xn),kt=kt[xn];si&&!en&&(Te[St]=kt)}}return kt},QT}var qT,FH;function Mae(){if(FH)return qT;FH=1;var n=PK(),e=xae(),t=e([n("%String.prototype.indexOf%")]);return qT=function(r,o){var s=n(r,!!o);return typeof s=="function"&&t(r,".prototype.")>-1?e([s]):s},qT}var YT,zH;function wae(){if(zH)return YT;zH=1;var n=PK(),e=Mae(),t=Z6(),i=Zx(),r=n("%Map%",!0),o=e("Map.prototype.get",!0),s=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),h=e("Map.prototype.size",!0);return YT=!!r&&function(){var v,x={assert:function(S){if(!x.has(S))throw new i("Side channel does not contain "+t(S))},delete:function(S){if(v){var B=c(v,S);return h(v)===0&&(v=void 0),B}return!1},get:function(S){if(v)return o(v,S)},has:function(S){return v?a(v,S):!1},set:function(S,B){v||(v=new r),s(v,S,B)}};return x},YT}var $T,jH;function _Ue(){if(jH)return $T;jH=1;var n=PK(),e=Mae(),t=Z6(),i=wae(),r=Zx(),o=n("%WeakMap%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),h=e("WeakMap.prototype.delete",!0);return $T=o?function(){var v,x,S={assert:function(B){if(!S.has(B))throw new r("Side channel does not contain "+t(B))},delete:function(B){if(o&&B&&(typeof B=="object"||typeof B=="function")){if(v)return h(v,B)}else if(i&&x)return x.delete(B);return!1},get:function(B){return o&&B&&(typeof B=="object"||typeof B=="function")&&v?s(v,B):x&&x.get(B)},has:function(B){return o&&B&&(typeof B=="object"||typeof B=="function")&&v?c(v,B):!!x&&x.has(B)},set:function(B,R){o&&B&&(typeof B=="object"||typeof B=="function")?(v||(v=new o),a(v,B,R)):i&&(x||(x=i()),x.set(B,R))}};return S}:i,$T}var VT,NH;function xUe(){if(NH)return VT;NH=1;var n=Zx(),e=Z6(),t=ZPe(),i=wae(),r=_Ue(),o=r||i||t;return VT=function(){var a,c={assert:function(h){if(!c.has(h))throw new n("Side channel does not contain "+e(h))},delete:function(h){return!!a&&a.delete(h)},get:function(h){return a&&a.get(h)},has:function(h){return!!a&&a.has(h)},set:function(h,m){a||(a=o()),a.set(h,m)}};return c},VT}var HT,GH;function UK(){if(GH)return HT;GH=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return HT={default:t.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},HT}var ZT,WH;function Sae(){if(WH)return ZT;WH=1;var n=UK(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=(function(){for(var F=[],j=0;j<256;++j)F.push("%"+((j<16?"0":"")+j.toString(16)).toUpperCase());return F})(),r=function(j){for(;j.length>1;){var W=j.pop(),H=W.obj[W.prop];if(t(H)){for(var $=[],N=0;N<H.length;++N)typeof H[N]<"u"&&$.push(H[N]);W.obj[W.prop]=$}}},o=function(j,W){for(var H=W&&W.plainObjects?{__proto__:null}:{},$=0;$<j.length;++$)typeof j[$]<"u"&&(H[$]=j[$]);return H},s=function F(j,W,H){if(!W)return j;if(typeof W!="object"&&typeof W!="function"){if(t(j))j.push(W);else if(j&&typeof j=="object")(H&&(H.plainObjects||H.allowPrototypes)||!e.call(Object.prototype,W))&&(j[W]=!0);else return[j,W];return j}if(!j||typeof j!="object")return[j].concat(W);var $=j;return t(j)&&!t(W)&&($=o(j,H)),t(j)&&t(W)?(W.forEach(function(N,Y){if(e.call(j,Y)){var z=j[Y];z&&typeof z=="object"&&N&&typeof N=="object"?j[Y]=F(z,N,H):j.push(N)}else j[Y]=N}),j):Object.keys(W).reduce(function(N,Y){var z=W[Y];return e.call(N,Y)?N[Y]=F(N[Y],z,H):N[Y]=z,N},$)},a=function(j,W){return Object.keys(W).reduce(function(H,$){return H[$]=W[$],H},j)},c=function(F,j,W){var H=F.replace(/\+/g," ");if(W==="iso-8859-1")return H.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(H)}catch{return H}},h=1024,m=function(j,W,H,$,N){if(j.length===0)return j;var Y=j;if(typeof j=="symbol"?Y=Symbol.prototype.toString.call(j):typeof j!="string"&&(Y=String(j)),H==="iso-8859-1")return escape(Y).replace(/%u[0-9a-f]{4}/gi,function(Ee){return"%26%23"+parseInt(Ee.slice(2),16)+"%3B"});for(var z="",ne=0;ne<Y.length;ne+=h){for(var ae=Y.length>=h?Y.slice(ne,ne+h):Y,ve=[],pe=0;pe<ae.length;++pe){var be=ae.charCodeAt(pe);if(be===45||be===46||be===95||be===126||be>=48&&be<=57||be>=65&&be<=90||be>=97&&be<=122||N===n.RFC1738&&(be===40||be===41)){ve[ve.length]=ae.charAt(pe);continue}if(be<128){ve[ve.length]=i[be];continue}if(be<2048){ve[ve.length]=i[192|be>>6]+i[128|be&63];continue}if(be<55296||be>=57344){ve[ve.length]=i[224|be>>12]+i[128|be>>6&63]+i[128|be&63];continue}pe+=1,be=65536+((be&1023)<<10|ae.charCodeAt(pe)&1023),ve[ve.length]=i[240|be>>18]+i[128|be>>12&63]+i[128|be>>6&63]+i[128|be&63]}z+=ve.join("")}return z},v=function(j){for(var W=[{obj:{o:j},prop:"o"}],H=[],$=0;$<W.length;++$)for(var N=W[$],Y=N.obj[N.prop],z=Object.keys(Y),ne=0;ne<z.length;++ne){var ae=z[ne],ve=Y[ae];typeof ve=="object"&&ve!==null&&H.indexOf(ve)===-1&&(W.push({obj:Y,prop:ae}),H.push(ve))}return r(W),j},x=function(j){return Object.prototype.toString.call(j)==="[object RegExp]"},S=function(j){return!j||typeof j!="object"?!1:!!(j.constructor&&j.constructor.isBuffer&&j.constructor.isBuffer(j))},B=function(j,W){return[].concat(j,W)},R=function(j,W){if(t(j)){for(var H=[],$=0;$<j.length;$+=1)H.push(W(j[$]));return H}return W(j)};return ZT={arrayToObject:o,assign:a,combine:B,compact:v,decode:c,encode:m,isBuffer:S,isRegExp:x,maybeMap:R,merge:s},ZT}var XT,QH;function MUe(){if(QH)return XT;QH=1;var n=xUe(),e=Sae(),t=UK(),i=Object.prototype.hasOwnProperty,r={brackets:function(F){return F+"[]"},comma:"comma",indices:function(F,j){return F+"["+j+"]"},repeat:function(F){return F}},o=Array.isArray,s=Array.prototype.push,a=function(R,F){s.apply(R,o(F)?F:[F])},c=Date.prototype.toISOString,h=t.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:h,formatter:t.formatters[h],indices:!1,serializeDate:function(F){return c.call(F)},skipNulls:!1,strictNullHandling:!1},v=function(F){return typeof F=="string"||typeof F=="number"||typeof F=="boolean"||typeof F=="symbol"||typeof F=="bigint"},x={},S=function R(F,j,W,H,$,N,Y,z,ne,ae,ve,pe,be,Ee,Te,je,Re,qe){for(var nt=F,ht=qe,ke=0,Oe=!1;(ht=ht.get(x))!==void 0&&!Oe;){var ze=ht.get(F);if(ke+=1,typeof ze<"u"){if(ze===ke)throw new RangeError("Cyclic object value");Oe=!0}typeof ht.get(x)>"u"&&(ke=0)}if(typeof ae=="function"?nt=ae(j,nt):nt instanceof Date?nt=be(nt):W==="comma"&&o(nt)&&(nt=e.maybeMap(nt,function(St){return St instanceof Date?be(St):St})),nt===null){if(N)return ne&&!je?ne(j,m.encoder,Re,"key",Ee):j;nt=""}if(v(nt)||e.isBuffer(nt)){if(ne){var we=je?j:ne(j,m.encoder,Re,"key",Ee);return[Te(we)+"="+Te(ne(nt,m.encoder,Re,"value",Ee))]}return[Te(j)+"="+Te(String(nt))]}var At=[];if(typeof nt>"u")return At;var it;if(W==="comma"&&o(nt))je&&ne&&(nt=e.maybeMap(nt,ne)),it=[{value:nt.length>0?nt.join(",")||null:void 0}];else if(o(ae))it=ae;else{var Ct=Object.keys(nt);it=ve?Ct.sort(ve):Ct}var It=z?String(j).replace(/\./g,"%2E"):String(j),Ke=H&&o(nt)&&nt.length===1?It+"[]":It;if($&&o(nt)&&nt.length===0)return Ke+"[]";for(var Ie=0;Ie<it.length;++Ie){var Se=it[Ie],Ge=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:nt[Se];if(!(Y&&Ge===null)){var st=pe&&z?String(Se).replace(/\./g,"%2E"):String(Se),ut=o(nt)?typeof W=="function"?W(Ke,st):Ke:Ke+(pe?"."+st:"["+st+"]");qe.set(F,ke);var ft=n();ft.set(x,qe),a(At,R(Ge,ut,W,H,$,N,Y,z,W==="comma"&&je&&o(nt)?null:ne,ae,ve,pe,be,Ee,Te,je,Re,ft))}}return At},B=function(F){if(!F)return m;if(typeof F.allowEmptyArrays<"u"&&typeof F.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof F.encodeDotInKeys<"u"&&typeof F.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(F.encoder!==null&&typeof F.encoder<"u"&&typeof F.encoder!="function")throw new TypeError("Encoder has to be a function.");var j=F.charset||m.charset;if(typeof F.charset<"u"&&F.charset!=="utf-8"&&F.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var W=t.default;if(typeof F.format<"u"){if(!i.call(t.formatters,F.format))throw new TypeError("Unknown format option provided.");W=F.format}var H=t.formatters[W],$=m.filter;(typeof F.filter=="function"||o(F.filter))&&($=F.filter);var N;if(F.arrayFormat in r?N=F.arrayFormat:"indices"in F?N=F.indices?"indices":"repeat":N=m.arrayFormat,"commaRoundTrip"in F&&typeof F.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Y=typeof F.allowDots>"u"?F.encodeDotInKeys===!0?!0:m.allowDots:!!F.allowDots;return{addQueryPrefix:typeof F.addQueryPrefix=="boolean"?F.addQueryPrefix:m.addQueryPrefix,allowDots:Y,allowEmptyArrays:typeof F.allowEmptyArrays=="boolean"?!!F.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:N,charset:j,charsetSentinel:typeof F.charsetSentinel=="boolean"?F.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!F.commaRoundTrip,delimiter:typeof F.delimiter>"u"?m.delimiter:F.delimiter,encode:typeof F.encode=="boolean"?F.encode:m.encode,encodeDotInKeys:typeof F.encodeDotInKeys=="boolean"?F.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof F.encoder=="function"?F.encoder:m.encoder,encodeValuesOnly:typeof F.encodeValuesOnly=="boolean"?F.encodeValuesOnly:m.encodeValuesOnly,filter:$,format:W,formatter:H,serializeDate:typeof F.serializeDate=="function"?F.serializeDate:m.serializeDate,skipNulls:typeof F.skipNulls=="boolean"?F.skipNulls:m.skipNulls,sort:typeof F.sort=="function"?F.sort:null,strictNullHandling:typeof F.strictNullHandling=="boolean"?F.strictNullHandling:m.strictNullHandling}};return XT=function(R,F){var j=R,W=B(F),H,$;typeof W.filter=="function"?($=W.filter,j=$("",j)):o(W.filter)&&($=W.filter,H=$);var N=[];if(typeof j!="object"||j===null)return"";var Y=r[W.arrayFormat],z=Y==="comma"&&W.commaRoundTrip;H||(H=Object.keys(j)),W.sort&&H.sort(W.sort);for(var ne=n(),ae=0;ae<H.length;++ae){var ve=H[ae],pe=j[ve];W.skipNulls&&pe===null||a(N,S(pe,ve,Y,z,W.allowEmptyArrays,W.strictNullHandling,W.skipNulls,W.encodeDotInKeys,W.encode?W.encoder:null,W.filter,W.sort,W.allowDots,W.serializeDate,W.format,W.formatter,W.encodeValuesOnly,W.charset,ne))}var be=N.join(W.delimiter),Ee=W.addQueryPrefix===!0?"?":"";return W.charsetSentinel&&(W.charset==="iso-8859-1"?Ee+="utf8=%26%2310003%3B&":Ee+="utf8=%E2%9C%93&"),be.length>0?Ee+be:""},XT}var JT,qH;function wUe(){if(qH)return JT;qH=1;var n=Sae(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},r=function(x){return x.replace(/&#(\d+);/g,function(S,B){return String.fromCharCode(parseInt(B,10))})},o=function(x,S,B){if(x&&typeof x=="string"&&S.comma&&x.indexOf(",")>-1)return x.split(",");if(S.throwOnLimitExceeded&&B>=S.arrayLimit)throw new RangeError("Array limit exceeded. Only "+S.arrayLimit+" element"+(S.arrayLimit===1?"":"s")+" allowed in an array.");return x},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",c=function(S,B){var R={__proto__:null},F=B.ignoreQueryPrefix?S.replace(/^\?/,""):S;F=F.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var j=B.parameterLimit===1/0?void 0:B.parameterLimit,W=F.split(B.delimiter,B.throwOnLimitExceeded?j+1:j);if(B.throwOnLimitExceeded&&W.length>j)throw new RangeError("Parameter limit exceeded. Only "+j+" parameter"+(j===1?"":"s")+" allowed.");var H=-1,$,N=B.charset;if(B.charsetSentinel)for($=0;$<W.length;++$)W[$].indexOf("utf8=")===0&&(W[$]===a?N="utf-8":W[$]===s&&(N="iso-8859-1"),H=$,$=W.length);for($=0;$<W.length;++$)if($!==H){var Y=W[$],z=Y.indexOf("]="),ne=z===-1?Y.indexOf("="):z+1,ae,ve;ne===-1?(ae=B.decoder(Y,i.decoder,N,"key"),ve=B.strictNullHandling?null:""):(ae=B.decoder(Y.slice(0,ne),i.decoder,N,"key"),ve=n.maybeMap(o(Y.slice(ne+1),B,t(R[ae])?R[ae].length:0),function(be){return B.decoder(be,i.decoder,N,"value")})),ve&&B.interpretNumericEntities&&N==="iso-8859-1"&&(ve=r(String(ve))),Y.indexOf("[]=")>-1&&(ve=t(ve)?[ve]:ve);var pe=e.call(R,ae);pe&&B.duplicates==="combine"?R[ae]=n.combine(R[ae],ve):(!pe||B.duplicates==="last")&&(R[ae]=ve)}return R},h=function(x,S,B,R){var F=0;if(x.length>0&&x[x.length-1]==="[]"){var j=x.slice(0,-1).join("");F=Array.isArray(S)&&S[j]?S[j].length:0}for(var W=R?S:o(S,B,F),H=x.length-1;H>=0;--H){var $,N=x[H];if(N==="[]"&&B.parseArrays)$=B.allowEmptyArrays&&(W===""||B.strictNullHandling&&W===null)?[]:n.combine([],W);else{$=B.plainObjects?{__proto__:null}:{};var Y=N.charAt(0)==="["&&N.charAt(N.length-1)==="]"?N.slice(1,-1):N,z=B.decodeDotInKeys?Y.replace(/%2E/g,"."):Y,ne=parseInt(z,10);!B.parseArrays&&z===""?$={0:W}:!isNaN(ne)&&N!==z&&String(ne)===z&&ne>=0&&B.parseArrays&&ne<=B.arrayLimit?($=[],$[ne]=W):z!=="__proto__"&&($[z]=W)}W=$}return W},m=function(S,B,R,F){if(S){var j=R.allowDots?S.replace(/\.([^.[]+)/g,"[$1]"):S,W=/(\[[^[\]]*])/,H=/(\[[^[\]]*])/g,$=R.depth>0&&W.exec(j),N=$?j.slice(0,$.index):j,Y=[];if(N){if(!R.plainObjects&&e.call(Object.prototype,N)&&!R.allowPrototypes)return;Y.push(N)}for(var z=0;R.depth>0&&($=H.exec(j))!==null&&z<R.depth;){if(z+=1,!R.plainObjects&&e.call(Object.prototype,$[1].slice(1,-1))&&!R.allowPrototypes)return;Y.push($[1])}if($){if(R.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+R.depth+" and strictDepth is true");Y.push("["+j.slice($.index)+"]")}return h(Y,B,R,F)}},v=function(S){if(!S)return i;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.decodeDotInKeys<"u"&&typeof S.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(S.decoder!==null&&typeof S.decoder<"u"&&typeof S.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof S.throwOnLimitExceeded<"u"&&typeof S.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var B=typeof S.charset>"u"?i.charset:S.charset,R=typeof S.duplicates>"u"?i.duplicates:S.duplicates;if(R!=="combine"&&R!=="first"&&R!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var F=typeof S.allowDots>"u"?S.decodeDotInKeys===!0?!0:i.allowDots:!!S.allowDots;return{allowDots:F,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof S.allowPrototypes=="boolean"?S.allowPrototypes:i.allowPrototypes,allowSparse:typeof S.allowSparse=="boolean"?S.allowSparse:i.allowSparse,arrayLimit:typeof S.arrayLimit=="number"?S.arrayLimit:i.arrayLimit,charset:B,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:i.charsetSentinel,comma:typeof S.comma=="boolean"?S.comma:i.comma,decodeDotInKeys:typeof S.decodeDotInKeys=="boolean"?S.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof S.decoder=="function"?S.decoder:i.decoder,delimiter:typeof S.delimiter=="string"||n.isRegExp(S.delimiter)?S.delimiter:i.delimiter,depth:typeof S.depth=="number"||S.depth===!1?+S.depth:i.depth,duplicates:R,ignoreQueryPrefix:S.ignoreQueryPrefix===!0,interpretNumericEntities:typeof S.interpretNumericEntities=="boolean"?S.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof S.parameterLimit=="number"?S.parameterLimit:i.parameterLimit,parseArrays:S.parseArrays!==!1,plainObjects:typeof S.plainObjects=="boolean"?S.plainObjects:i.plainObjects,strictDepth:typeof S.strictDepth=="boolean"?!!S.strictDepth:i.strictDepth,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof S.throwOnLimitExceeded=="boolean"?S.throwOnLimitExceeded:!1}};return JT=function(x,S){var B=v(S);if(x===""||x===null||typeof x>"u")return B.plainObjects?{__proto__:null}:{};for(var R=typeof x=="string"?c(x,B):x,F=B.plainObjects?{__proto__:null}:{},j=Object.keys(R),W=0;W<j.length;++W){var H=j[W],$=m(H,R[H],B,typeof x=="string");F=n.merge(F,$,B)}return B.allowSparse===!0?F:n.compact(F)},JT}var e9,YH;function SUe(){if(YH)return e9;YH=1;var n=MUe(),e=wUe(),t=UK();return e9={formats:t,parse:e,stringify:n},e9}var $H;function EUe(){if($H)return ib;$H=1;var n=YPe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),c=["%","/","?",";","#"].concat(a),h=["/","?","#"],m=255,v=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},R={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},F=SUe();function j(N,Y,z){if(N&&typeof N=="object"&&N instanceof e)return N;var ne=new e;return ne.parse(N,Y,z),ne}e.prototype.parse=function(N,Y,z){if(typeof N!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof N);var ne=N.indexOf("?"),ae=ne!==-1&&ne<N.indexOf("#")?"?":"#",ve=N.split(ae),pe=/\\/g;ve[0]=ve[0].replace(pe,"/"),N=ve.join(ae);var be=N;if(be=be.trim(),!z&&N.split("#").length===1){var Ee=r.exec(be);if(Ee)return this.path=be,this.href=be,this.pathname=Ee[1],Ee[2]?(this.search=Ee[2],Y?this.query=F.parse(this.search.substr(1)):this.query=this.search.substr(1)):Y&&(this.search="",this.query={}),this}var Te=t.exec(be);if(Te){Te=Te[0];var je=Te.toLowerCase();this.protocol=je,be=be.substr(Te.length)}if(z||Te||be.match(/^\/\/[^@/]+@[^@/]+/)){var Re=be.substr(0,2)==="//";Re&&!(Te&&B[Te])&&(be=be.substr(2),this.slashes=!0)}if(!B[Te]&&(Re||Te&&!R[Te])){for(var qe=-1,nt=0;nt<h.length;nt++){var ht=be.indexOf(h[nt]);ht!==-1&&(qe===-1||ht<qe)&&(qe=ht)}var ke,Oe;qe===-1?Oe=be.lastIndexOf("@"):Oe=be.lastIndexOf("@",qe),Oe!==-1&&(ke=be.slice(0,Oe),be=be.slice(Oe+1),this.auth=decodeURIComponent(ke)),qe=-1;for(var nt=0;nt<c.length;nt++){var ht=be.indexOf(c[nt]);ht!==-1&&(qe===-1||ht<qe)&&(qe=ht)}qe===-1&&(qe=be.length),this.host=be.slice(0,qe),be=be.slice(qe),this.parseHost(),this.hostname=this.hostname||"";var ze=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ze)for(var we=this.hostname.split(/\./),nt=0,At=we.length;nt<At;nt++){var it=we[nt];if(it&&!it.match(v)){for(var Ct="",It=0,Ke=it.length;It<Ke;It++)it.charCodeAt(It)>127?Ct+="x":Ct+=it[It];if(!Ct.match(v)){var Ie=we.slice(0,nt),Se=we.slice(nt+1),Ge=it.match(x);Ge&&(Ie.push(Ge[1]),Se.unshift(Ge[2])),Se.length&&(be="/"+Se.join(".")+be),this.hostname=Ie.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),ze||(this.hostname=n.toASCII(this.hostname));var st=this.port?":"+this.port:"",ut=this.hostname||"";this.host=ut+st,this.href+=this.host,ze&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),be[0]!=="/"&&(be="/"+be))}if(!S[je])for(var nt=0,At=a.length;nt<At;nt++){var ft=a[nt];if(be.indexOf(ft)!==-1){var St=encodeURIComponent(ft);St===ft&&(St=escape(ft)),be=be.split(ft).join(St)}}var kt=be.indexOf("#");kt!==-1&&(this.hash=be.substr(kt),be=be.slice(0,kt));var en=be.indexOf("?");if(en!==-1?(this.search=be.substr(en),this.query=be.substr(en+1),Y&&(this.query=F.parse(this.query)),be=be.slice(0,en)):Y&&(this.search="",this.query={}),be&&(this.pathname=be),R[je]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var st=this.pathname||"",Pn=this.search||"";this.path=st+Pn}return this.href=this.format(),this};function W(N){return typeof N=="string"&&(N=j(N)),N instanceof e?N.format():e.prototype.format.call(N)}e.prototype.format=function(){var N=this.auth||"";N&&(N=encodeURIComponent(N),N=N.replace(/%3A/i,":"),N+="@");var Y=this.protocol||"",z=this.pathname||"",ne=this.hash||"",ae=!1,ve="";this.host?ae=N+this.host:this.hostname&&(ae=N+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ae+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ve=F.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var pe=this.search||ve&&"?"+ve||"";return Y&&Y.substr(-1)!==":"&&(Y+=":"),this.slashes||(!Y||R[Y])&&ae!==!1?(ae="//"+(ae||""),z&&z.charAt(0)!=="/"&&(z="/"+z)):ae||(ae=""),ne&&ne.charAt(0)!=="#"&&(ne="#"+ne),pe&&pe.charAt(0)!=="?"&&(pe="?"+pe),z=z.replace(/[?#]/g,function(be){return encodeURIComponent(be)}),pe=pe.replace("#","%23"),Y+ae+z+pe+ne};function H(N,Y){return j(N,!1,!0).resolve(Y)}e.prototype.resolve=function(N){return this.resolveObject(j(N,!1,!0)).format()};function $(N,Y){return N?j(N,!1,!0).resolveObject(Y):Y}return e.prototype.resolveObject=function(N){if(typeof N=="string"){var Y=new e;Y.parse(N,!1,!0),N=Y}for(var z=new e,ne=Object.keys(this),ae=0;ae<ne.length;ae++){var ve=ne[ae];z[ve]=this[ve]}if(z.hash=N.hash,N.href==="")return z.href=z.format(),z;if(N.slashes&&!N.protocol){for(var pe=Object.keys(N),be=0;be<pe.length;be++){var Ee=pe[be];Ee!=="protocol"&&(z[Ee]=N[Ee])}return R[z.protocol]&&z.hostname&&!z.pathname&&(z.pathname="/",z.path=z.pathname),z.href=z.format(),z}if(N.protocol&&N.protocol!==z.protocol){if(!R[N.protocol]){for(var Te=Object.keys(N),je=0;je<Te.length;je++){var Re=Te[je];z[Re]=N[Re]}return z.href=z.format(),z}if(z.protocol=N.protocol,!N.host&&!B[N.protocol]){for(var At=(N.pathname||"").split("/");At.length&&!(N.host=At.shift()););N.host||(N.host=""),N.hostname||(N.hostname=""),At[0]!==""&&At.unshift(""),At.length<2&&At.unshift(""),z.pathname=At.join("/")}else z.pathname=N.pathname;if(z.search=N.search,z.query=N.query,z.host=N.host||"",z.auth=N.auth,z.hostname=N.hostname||N.host,z.port=N.port,z.pathname||z.search){var qe=z.pathname||"",nt=z.search||"";z.path=qe+nt}return z.slashes=z.slashes||N.slashes,z.href=z.format(),z}var ht=z.pathname&&z.pathname.charAt(0)==="/",ke=N.host||N.pathname&&N.pathname.charAt(0)==="/",Oe=ke||ht||z.host&&N.pathname,ze=Oe,we=z.pathname&&z.pathname.split("/")||[],At=N.pathname&&N.pathname.split("/")||[],it=z.protocol&&!R[z.protocol];if(it&&(z.hostname="",z.port=null,z.host&&(we[0]===""?we[0]=z.host:we.unshift(z.host)),z.host="",N.protocol&&(N.hostname=null,N.port=null,N.host&&(At[0]===""?At[0]=N.host:At.unshift(N.host)),N.host=null),Oe=Oe&&(At[0]===""||we[0]==="")),ke)z.host=N.host||N.host===""?N.host:z.host,z.hostname=N.hostname||N.hostname===""?N.hostname:z.hostname,z.search=N.search,z.query=N.query,we=At;else if(At.length)we||(we=[]),we.pop(),we=we.concat(At),z.search=N.search,z.query=N.query;else if(N.search!=null){if(it){z.host=we.shift(),z.hostname=z.host;var Ct=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;Ct&&(z.auth=Ct.shift(),z.hostname=Ct.shift(),z.host=z.hostname)}return z.search=N.search,z.query=N.query,(z.pathname!==null||z.search!==null)&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.href=z.format(),z}if(!we.length)return z.pathname=null,z.search?z.path="/"+z.search:z.path=null,z.href=z.format(),z;for(var It=we.slice(-1)[0],Ke=(z.host||N.host||we.length>1)&&(It==="."||It==="..")||It==="",Ie=0,Se=we.length;Se>=0;Se--)It=we[Se],It==="."?we.splice(Se,1):It===".."?(we.splice(Se,1),Ie++):Ie&&(we.splice(Se,1),Ie--);if(!Oe&&!ze)for(;Ie--;Ie)we.unshift("..");Oe&&we[0]!==""&&(!we[0]||we[0].charAt(0)!=="/")&&we.unshift(""),Ke&&we.join("/").substr(-1)!=="/"&&we.push("");var Ge=we[0]===""||we[0]&&we[0].charAt(0)==="/";if(it){z.hostname=Ge?"":we.length?we.shift():"",z.host=z.hostname;var Ct=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;Ct&&(z.auth=Ct.shift(),z.hostname=Ct.shift(),z.host=z.hostname)}return Oe=Oe||z.host&&we.length,Oe&&!Ge&&we.unshift(""),we.length>0?z.pathname=we.join("/"):(z.pathname=null,z.path=null),(z.pathname!==null||z.search!==null)&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.auth=N.auth||z.auth,z.slashes=z.slashes||N.slashes,z.href=z.format(),z},e.prototype.parseHost=function(){var N=this.host,Y=i.exec(N);Y&&(Y=Y[0],Y!==":"&&(this.port=Y.substr(1)),N=N.substr(0,N.length-Y.length)),N&&(this.hostname=N)},ib.parse=j,ib.resolve=H,ib.resolveObject=$,ib.format=W,ib.Url=e,ib}var OUe=EUe();const VH=eu(OUe);function Eo(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Eo=function(){return s},s}Eo();function Eae(n,e,t){Eo().f[0]++,Eo().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(i=>{if(Eo().f[1]++,Eo().s[1]++,i.ok)Eo().b[0][1]++;else throw Eo().b[0][0]++,Eo().s[2]++,new Error("Failed to load metadata for "+n);return Eo().s[3]++,i.json()}).then(i=>{Eo().f[2]++,Eo().s[4]++,t(i)}).catch(()=>{Eo().f[3]++,Eo().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Eo().s[6]++,t(e)})}function BUe(n,e){if(Eo().f[4]++,Eo().s[7]++,n)Eo().b[1][1]++;else return Eo().b[1][0]++,Eo().s[8]++,e([]);const t=(Eo().s[9]++,VH.parse(n)),i=(Eo().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");Eo().s[11]++,t.pathname===i?(Eo().b[2][0]++,Eo().s[12]++,t.pathname="/fontstacks.json"):(Eo().b[2][1]++,Eo().s[13]++,t.pathname=t.pathname.replace(i,".json"));const r=(Eo().s[14]++,VH.format(t));Eo().s[15]++,Eae(r,[],e)}function IUe(n,e){if(Eo().f[5]++,Eo().s[16]++,n)Eo().b[3][1]++;else return Eo().b[3][0]++,Eo().s[17]++,e([]);const t=(Eo().s[18]++,n+".json");Eo().s[19]++,Eae(t,{},i=>(Eo().f[6]++,Eo().s[20]++,e(Object.keys(i))))}function Ih(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ih=function(){return s},s}Ih();function Oae(n,e){Ih().f[0]++;const t=(Ih().s[0]++,lAe(n,e));return Ih().s[1]++,t.map(i=>(Ih().f[1]++,Ih().s[2]++,i.command+" "+i.args.join(" ")))}function kUe(n,e){return Ih().f[2]++,Ih().s[3]++,Oae(n,e).map(t=>(Ih().f[3]++,Ih().s[4]++,"Undo "+t))}function TUe(n,e){return Ih().f[4]++,Ih().s[5]++,Oae(n,e).map(t=>(Ih().f[5]++,Ih().s[6]++,"Redo "+t))}function _c(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _c=function(){return s},s}_c();function RUe(){_c().f[0]++;const n=(_c().s[0]++,new URL(window.location.href)),e=(_c().s[1]++,n.searchParams.get("style"));return _c().s[2]++,e?(_c().b[0][0]++,_c().s[3]++,n.searchParams.delete("style"),_c().s[4]++,window.history.replaceState({},document.title,n.toString())):_c().b[0][1]++,_c().s[5]++,e}async function Bae(n){_c().f[1]++,_c().s[6]++,console.log("Loading style",n),_c().s[7]++;try{const e=(_c().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(_c().s[9]++,await e.json());return _c().s[10]++,Bd.ensureStyleValidity(t)}catch{return _c().s[11]++,console.warn("Could not fetch default style: "+n),_c().s[12]++,Bd.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ND=function(n,e){return ND=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},ND(n,e)};function Iae(n,e){ND(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function DUe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function PUe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function UUe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(PUe(arguments[e]));return n}var kae=(function(){function n(e,t){this.target=t,this.type=e}return n})(),LUe=(function(n){Iae(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(kae),KUe=(function(n){Iae(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(kae);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var FUe=function(){if(typeof WebSocket<"u")return WebSocket},zUe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},rb={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?rb.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?rb.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=DUe(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,UUe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?rb.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?rb.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?rb.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?rb.maxRetries:i,o=t.connectionTimeout,s=o===void 0?rb.connectionTimeout:o,a=t.WebSocket,c=a===void 0?FUe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!zUe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(h){e._closeCalled||(e._debug("connect",{url:h,protocols:e._protocols}),e._ws=e._protocols?new c(h,e._protocols):new c(h),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new LUe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new KUe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Tae(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Tae=function(){return s},s}Tae();function di(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return di=function(){return s},s}di();const J6=(di().s[0]++,"maputnik"),Rae=(di().s[1]++,"style"),HH=(di().s[2]++,{latest:[J6,"latest_style"].join(":")}),jUe=(di().s[3]++,gae[0].url);function ZH(){return di().f[0]++,di().s[4]++,Bae(jUe)}function NUe(){di().f[1]++;const n=(di().s[5]++,[]);di().s[6]++;for(let e=(di().s[7]++,0);e<window.localStorage.length;e++){const t=(di().s[8]++,window.localStorage.key(e));di().s[9]++,Dae(t)?(di().b[0][0]++,di().s[10]++,n.push(GUe(t))):di().b[0][1]++}return di().s[11]++,n}function Dae(n){di().f[2]++;const e=(di().s[12]++,n.split(":"));return di().s[13]++,di().b[1][0]++,e.length===3&&(di().b[1][1]++,e[0]===J6)&&(di().b[1][2]++,e[1]===Rae)}function GUe(n){if(di().f[3]++,di().s[14]++,Dae(n))di().b[2][1]++;else throw di().b[2][0]++,di().s[15]++,"Key is not a valid style key";const e=(di().s[16]++,n.split(":")),t=(di().s[17]++,e[2]);return di().s[18]++,t}function XH(n){return di().f[4]++,di().s[19]++,[J6,Rae,n].join(":")}class WUe{mapStyles;constructor(){di().f[5]++,di().s[20]++,this.mapStyles=NUe()}purge(){di().f[6]++,di().s[21]++;for(let e=(di().s[22]++,0);e<window.localStorage.length;e++){const t=(di().s[23]++,window.localStorage.key(e));di().s[24]++,t.startsWith(J6)?(di().b[3][0]++,di().s[25]++,window.localStorage.removeItem(t)):di().b[3][1]++}}async getLatestStyle(){if(di().f[7]++,di().s[26]++,this.mapStyles.length===0)return di().b[4][0]++,di().s[27]++,ZH();di().b[4][1]++;const e=(di().s[28]++,window.localStorage.getItem(HH.latest)),t=(di().s[29]++,window.localStorage.getItem(XH(e)));return di().s[30]++,t?(di().b[5][0]++,di().s[31]++,JSON.parse(t)):(di().b[5][1]++,di().s[32]++,ZH())}save(e){di().f[8]++,di().s[33]++,e=Bd.ensureStyleValidity(e);const t=(di().s[34]++,XH(e.id));di().s[35]++;const i=()=>{di().f[9]++,di().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),di().s[37]++,window.localStorage.setItem(HH.latest,e.id)};di().s[38]++;try{di().s[39]++,i()}catch(r){if(di().s[40]++,di().b[7][0]++,r instanceof DOMException&&(di().b[7][1]++,r.code===22||(di().b[7][2]++,r.code===1014)||(di().b[7][3]++,r.name==="QuotaExceededError")||(di().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))di().b[6][0]++,di().s[41]++,this.purge(),di().s[42]++,i();else throw di().b[6][1]++,di().s[43]++,r}return di().s[44]++,e}}function Sh(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sh=function(){return s},s}Sh();async function QUe(n){Sh().f[0]++;const e=(Sh().s[0]++,RUe()),t=(Sh().s[1]++,Sh().b[0][0]++,e&&(Sh().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Sh().s[2]++,Sh().b[1][1]++,Sh().s[9]++,i=new WUe;const r=(Sh().s[10]++,t?(Sh().b[2][0]++,await Bae(e)):(Sh().b[2][1]++,await i.getLatestStyle()));return Sh().s[11]++,n(r,{initialLoad:!0,save:!1}),Sh().s[12]++,i}function Ka(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ka=function(){return s},s}Ka();class qUe{revisions;currentIdx;constructor(e=(Ka().b[0][0]++,[])){Ka().f[0]++,Ka().s[0]++,this.revisions=e,Ka().s[1]++,this.currentIdx=e.length-1}get latest(){return Ka().f[1]++,Ka().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ka().f[2]++,Ka().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ka().f[3]++,Ka().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ka().s[5]++,this.revisions.push(e),Ka().s[6]++,this.currentIdx++}undo(){return Ka().f[4]++,Ka().s[7]++,this.currentIdx>0?(Ka().b[1][0]++,Ka().s[8]++,this.currentIdx--):Ka().b[1][1]++,Ka().s[9]++,this.current}redo(){return Ka().f[5]++,Ka().s[10]++,this.currentIdx<this.revisions.length-1?(Ka().b[2][0]++,Ka().s[11]++,this.currentIdx++):Ka().b[2][1]++,Ka().s[12]++,this.current}}var t9,JH;function YUe(){if(JH)return t9;JH=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),v=Object.prototype,x=v.toString,S=Math.max,B=Math.min,R=function(){return m.Date.now()};function F(Y,z,ne){var ae,ve,pe,be,Ee,Te,je=0,Re=!1,qe=!1,nt=!0;if(typeof Y!="function")throw new TypeError(n);z=N(z)||0,W(ne)&&(Re=!!ne.leading,qe="maxWait"in ne,pe=qe?S(N(ne.maxWait)||0,z):pe,nt="trailing"in ne?!!ne.trailing:nt);function ht(Ke){var Ie=ae,Se=ve;return ae=ve=void 0,je=Ke,be=Y.apply(Se,Ie),be}function ke(Ke){return je=Ke,Ee=setTimeout(we,z),Re?ht(Ke):be}function Oe(Ke){var Ie=Ke-Te,Se=Ke-je,Ge=z-Ie;return qe?B(Ge,pe-Se):Ge}function ze(Ke){var Ie=Ke-Te,Se=Ke-je;return Te===void 0||Ie>=z||Ie<0||qe&&Se>=pe}function we(){var Ke=R();if(ze(Ke))return At(Ke);Ee=setTimeout(we,Oe(Ke))}function At(Ke){return Ee=void 0,nt&&ae?ht(Ke):(ae=ve=void 0,be)}function it(){Ee!==void 0&&clearTimeout(Ee),je=0,ae=Te=ve=Ee=void 0}function Ct(){return Ee===void 0?be:At(R())}function It(){var Ke=R(),Ie=ze(Ke);if(ae=arguments,ve=this,Te=Ke,Ie){if(Ee===void 0)return ke(Te);if(qe)return Ee=setTimeout(we,z),ht(Te)}return Ee===void 0&&(Ee=setTimeout(we,z)),be}return It.cancel=it,It.flush=Ct,It}function j(Y,z,ne){var ae=!0,ve=!0;if(typeof Y!="function")throw new TypeError(n);return W(ne)&&(ae="leading"in ne?!!ne.leading:ae,ve="trailing"in ne?!!ne.trailing:ve),F(Y,z,{leading:ae,maxWait:z,trailing:ve})}function W(Y){var z=typeof Y;return!!Y&&(z=="object"||z=="function")}function H(Y){return!!Y&&typeof Y=="object"}function $(Y){return typeof Y=="symbol"||H(Y)&&x.call(Y)==t}function N(Y){if(typeof Y=="number")return Y;if($(Y))return e;if(W(Y)){var z=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=W(z)?z+"":z}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(i,"");var ne=o.test(Y);return ne||s.test(Y)?a(Y.slice(2),ne?2:8):r.test(Y)?e:+Y}return t9=j,t9}var $Ue=YUe();const VUe=eu($Ue);var i3={exports:{}};i3.exports;var eZ;function HUe(){return eZ||(eZ=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",x="[object Error]",S="[object Function]",B="[object GeneratorFunction]",R="[object Map]",F="[object Number]",j="[object Null]",W="[object Object]",H="[object Promise]",$="[object Proxy]",N="[object RegExp]",Y="[object Set]",z="[object String]",ne="[object Symbol]",ae="[object Undefined]",ve="[object WeakMap]",pe="[object ArrayBuffer]",be="[object DataView]",Ee="[object Float32Array]",Te="[object Float64Array]",je="[object Int8Array]",Re="[object Int16Array]",qe="[object Int32Array]",nt="[object Uint8Array]",ht="[object Uint8ClampedArray]",ke="[object Uint16Array]",Oe="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,we=/^\[object .+?Constructor\]$/,At=/^(?:0|[1-9]\d*)$/,it={};it[Ee]=it[Te]=it[je]=it[Re]=it[qe]=it[nt]=it[ht]=it[ke]=it[Oe]=!0,it[a]=it[c]=it[pe]=it[m]=it[be]=it[v]=it[x]=it[S]=it[R]=it[F]=it[W]=it[N]=it[Y]=it[z]=it[ve]=!1;var Ct=typeof window=="object"&&window&&window.Object===Object&&window,It=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Ct||It||Function("return this")(),Ie=e&&!e.nodeType&&e,Se=Ie&&!0&&n&&!n.nodeType&&n,Ge=Se&&Se.exports===Ie,st=Ge&&Ct.process,ut=(function(){try{return st&&st.binding&&st.binding("util")}catch{}})(),ft=ut&&ut.isTypedArray;function St(J,ye){for(var Qe=-1,Et=J==null?0:J.length,dn=0,Bn=[];++Qe<Et;){var ci=J[Qe];ye(ci,Qe,J)&&(Bn[dn++]=ci)}return Bn}function kt(J,ye){for(var Qe=-1,Et=ye.length,dn=J.length;++Qe<Et;)J[dn+Qe]=ye[Qe];return J}function en(J,ye){for(var Qe=-1,Et=J==null?0:J.length;++Qe<Et;)if(ye(J[Qe],Qe,J))return!0;return!1}function Pn(J,ye){for(var Qe=-1,Et=Array(J);++Qe<J;)Et[Qe]=ye(Qe);return Et}function zn(J){return function(ye){return J(ye)}}function si(J,ye){return J.has(ye)}function xn(J,ye){return J?.[ye]}function Rn(J){var ye=-1,Qe=Array(J.size);return J.forEach(function(Et,dn){Qe[++ye]=[dn,Et]}),Qe}function pn(J,ye){return function(Qe){return J(ye(Qe))}}function Hn(J){var ye=-1,Qe=Array(J.size);return J.forEach(function(Et){Qe[++ye]=Et}),Qe}var Un=Array.prototype,Tt=Function.prototype,Me=Object.prototype,oe=Ke["__core-js_shared__"],le=Tt.toString,he=Me.hasOwnProperty,se=(function(){var J=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),Ae=Me.toString,xe=RegExp("^"+le.call(he).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=Ge?Ke.Buffer:void 0,Xe=Ke.Symbol,fe=Ke.Uint8Array,De=Me.propertyIsEnumerable,y=Un.splice,rt=Xe?Xe.toStringTag:void 0,Bt=Object.getOwnPropertySymbols,pt=Ye?Ye.isBuffer:void 0,Ht=pn(Object.keys,Object),gt=To(Ke,"DataView"),jn=To(Ke,"Map"),ni=To(Ke,"Promise"),In=To(Ke,"Set"),Ln=To(Ke,"WeakMap"),Zn=To(Object,"create"),Xi=Xo(gt),Di=Xo(jn),ur=Xo(ni),fi=Xo(In),Si=Xo(Ln),er=Xe?Xe.prototype:void 0,nn=er?er.valueOf:void 0;function Ti(J){var ye=-1,Qe=J==null?0:J.length;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function Io(){this.__data__=Zn?Zn(null):{},this.size=0}function rs(J){var ye=this.has(J)&&delete this.__data__[J];return this.size-=ye?1:0,ye}function kr(J){var ye=this.__data__;if(Zn){var Qe=ye[J];return Qe===i?void 0:Qe}return he.call(ye,J)?ye[J]:void 0}function hn(J){var ye=this.__data__;return Zn?ye[J]!==void 0:he.call(ye,J)}function Li(J,ye){var Qe=this.__data__;return this.size+=this.has(J)?0:1,Qe[J]=Zn&&ye===void 0?i:ye,this}Ti.prototype.clear=Io,Ti.prototype.delete=rs,Ti.prototype.get=kr,Ti.prototype.has=hn,Ti.prototype.set=Li;function ii(J){var ye=-1,Qe=J==null?0:J.length;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function Ia(){this.__data__=[],this.size=0}function tu(J){var ye=this.__data__,Qe=ko(ye,J);if(Qe<0)return!1;var Et=ye.length-1;return Qe==Et?ye.pop():y.call(ye,Qe,1),--this.size,!0}function Xs(J){var ye=this.__data__,Qe=ko(ye,J);return Qe<0?void 0:ye[Qe][1]}function Ei(J){return ko(this.__data__,J)>-1}function gl(J,ye){var Qe=this.__data__,Et=ko(Qe,J);return Et<0?(++this.size,Qe.push([J,ye])):Qe[Et][1]=ye,this}ii.prototype.clear=Ia,ii.prototype.delete=tu,ii.prototype.get=Xs,ii.prototype.has=Ei,ii.prototype.set=gl;function Vr(J){var ye=-1,Qe=J==null?0:J.length;for(this.clear();++ye<Qe;){var Et=J[ye];this.set(Et[0],Et[1])}}function ka(){this.size=0,this.__data__={hash:new Ti,map:new(jn||ii),string:new Ti}}function nu(J){var ye=Ms(this,J).delete(J);return this.size-=ye?1:0,ye}function fa(J){return Ms(this,J).get(J)}function Ho(J){return Ms(this,J).has(J)}function Rl(J,ye){var Qe=Ms(this,J),Et=Qe.size;return Qe.set(J,ye),this.size+=Qe.size==Et?0:1,this}Vr.prototype.clear=ka,Vr.prototype.delete=nu,Vr.prototype.get=fa,Vr.prototype.has=Ho,Vr.prototype.set=Rl;function Zo(J){var ye=-1,Qe=J==null?0:J.length;for(this.__data__=new Vr;++ye<Qe;)this.add(J[ye])}function Qi(J){return this.__data__.set(J,i),this}function Dl(J){return this.__data__.has(J)}Zo.prototype.add=Zo.prototype.push=Qi,Zo.prototype.has=Dl;function os(J){var ye=this.__data__=new ii(J);this.size=ye.size}function Pl(){this.__data__=new ii,this.size=0}function iu(J){var ye=this.__data__,Qe=ye.delete(J);return this.size=ye.size,Qe}function Ou(J){return this.__data__.get(J)}function Jc(J){return this.__data__.has(J)}function nc(J,ye){var Qe=this.__data__;if(Qe instanceof ii){var Et=Qe.__data__;if(!jn||Et.length<t-1)return Et.push([J,ye]),this.size=++Qe.size,this;Qe=this.__data__=new Vr(Et)}return Qe.set(J,ye),this.size=Qe.size,this}os.prototype.clear=Pl,os.prototype.delete=iu,os.prototype.get=Ou,os.prototype.has=Jc,os.prototype.set=nc;function yl(J,ye){var Qe=so(J),Et=!Qe&&Ko(J),dn=!Qe&&!Et&&Mo(J),Bn=!Qe&&!Et&&!dn&&sl(J),ci=Qe||Et||dn||Bn,Ki=ci?Pn(J.length,String):[],Oi=Ki.length;for(var Bi in J)he.call(J,Bi)&&!(ci&&(Bi=="length"||dn&&(Bi=="offset"||Bi=="parent")||Bn&&(Bi=="buffer"||Bi=="byteLength"||Bi=="byteOffset")||Ga(Bi,Oi)))&&Ki.push(Bi);return Ki}function ko(J,ye){for(var Qe=J.length;Qe--;)if(lu(J[Qe][0],ye))return Qe;return-1}function ic(J,ye,Qe){var Et=ye(J);return so(J)?Et:kt(Et,Qe(J))}function ru(J){return J==null?J===void 0?ae:j:rt&&rt in Object(J)?su(J):Wa(J)}function Oc(J){return ao(J)&&ru(J)==a}function rc(J,ye,Qe,Et,dn){return J===ye?!0:J==null||ye==null||!ao(J)&&!ao(ye)?J!==J&&ye!==ye:Bc(J,ye,Qe,Et,rc,dn)}function Bc(J,ye,Qe,Et,dn,Bn){var ci=so(J),Ki=so(ye),Oi=ci?c:Ls(J),Bi=Ki?c:Ls(ye);Oi=Oi==a?W:Oi,Bi=Bi==a?W:Bi;var pr=Oi==W,lo=Bi==W,br=Oi==Bi;if(br&&Mo(J)){if(!Mo(ye))return!1;ci=!0,pr=!1}if(br&&!pr)return Bn||(Bn=new os),ci||sl(J)?rl(J,ye,Qe,Et,dn,Bn):eA(J,ye,Oi,Qe,Et,dn,Bn);if(!(Qe&r)){var yr=pr&&he.call(J,"__wrapped__"),to=lo&&he.call(ye,"__wrapped__");if(yr||to){var Fo=yr?J.value():J,Br=to?ye.value():ye;return Bn||(Bn=new os),dn(Fo,Br,Qe,Et,Bn)}}return br?(Bn||(Bn=new os),ou(J,ye,Qe,Et,dn,Bn)):!1}function Dh(J){if(!ss(J)||ol(J))return!1;var ye=uu(J)?xe:we;return ye.test(Xo(J))}function pa(J){return ao(J)&&mo(J.length)&&!!it[ru(J)]}function oc(J){if(!Gi(J))return Ht(J);var ye=[];for(var Qe in Object(J))he.call(J,Qe)&&Qe!="constructor"&&ye.push(Qe);return ye}function rl(J,ye,Qe,Et,dn,Bn){var ci=Qe&r,Ki=J.length,Oi=ye.length;if(Ki!=Oi&&!(ci&&Oi>Ki))return!1;var Bi=Bn.get(J);if(Bi&&Bn.get(ye))return Bi==ye;var pr=-1,lo=!0,br=Qe&o?new Zo:void 0;for(Bn.set(J,ye),Bn.set(ye,J);++pr<Ki;){var yr=J[pr],to=ye[pr];if(Et)var Fo=ci?Et(to,yr,pr,ye,J,Bn):Et(yr,to,pr,J,ye,Bn);if(Fo!==void 0){if(Fo)continue;lo=!1;break}if(br){if(!en(ye,function(Br,Ss){if(!si(br,Ss)&&(yr===Br||dn(yr,Br,Qe,Et,Bn)))return br.push(Ss)})){lo=!1;break}}else if(!(yr===to||dn(yr,to,Qe,Et,Bn))){lo=!1;break}}return Bn.delete(J),Bn.delete(ye),lo}function eA(J,ye,Qe,Et,dn,Bn,ci){switch(Qe){case be:if(J.byteLength!=ye.byteLength||J.byteOffset!=ye.byteOffset)return!1;J=J.buffer,ye=ye.buffer;case pe:return!(J.byteLength!=ye.byteLength||!Bn(new fe(J),new fe(ye)));case m:case v:case F:return lu(+J,+ye);case x:return J.name==ye.name&&J.message==ye.message;case N:case z:return J==ye+"";case R:var Ki=Rn;case Y:var Oi=Et&r;if(Ki||(Ki=Hn),J.size!=ye.size&&!Oi)return!1;var Bi=ci.get(J);if(Bi)return Bi==ye;Et|=o,ci.set(J,ye);var pr=rl(Ki(J),Ki(ye),Et,dn,Bn,ci);return ci.delete(J),pr;case ne:if(nn)return nn.call(J)==nn.call(ye)}return!1}function ou(J,ye,Qe,Et,dn,Bn){var ci=Qe&r,Ki=Na(J),Oi=Ki.length,Bi=Na(ye),pr=Bi.length;if(Oi!=pr&&!ci)return!1;for(var lo=Oi;lo--;){var br=Ki[lo];if(!(ci?br in ye:he.call(ye,br)))return!1}var yr=Bn.get(J);if(yr&&Bn.get(ye))return yr==ye;var to=!0;Bn.set(J,ye),Bn.set(ye,J);for(var Fo=ci;++lo<Oi;){br=Ki[lo];var Br=J[br],Ss=ye[br];if(Et)var ZA=ci?Et(Ss,Br,br,ye,J,Bn):Et(Br,Ss,br,J,ye,Bn);if(!(ZA===void 0?Br===Ss||dn(Br,Ss,Qe,Et,Bn):ZA)){to=!1;break}Fo||(Fo=br=="constructor")}if(to&&!Fo){var vl=J.constructor,Tr=ye.constructor;vl!=Tr&&"constructor"in J&&"constructor"in ye&&!(typeof vl=="function"&&vl instanceof vl&&typeof Tr=="function"&&Tr instanceof Tr)&&(to=!1)}return Bn.delete(J),Bn.delete(ye),to}function Na(J){return ic(J,Ul,au)}function Ms(J,ye){var Qe=J.__data__;return tr(ye)?Qe[typeof ye=="string"?"string":"hash"]:Qe.map}function To(J,ye){var Qe=xn(J,ye);return Dh(Qe)?Qe:void 0}function su(J){var ye=he.call(J,rt),Qe=J[rt];try{J[rt]=void 0;var Et=!0}catch{}var dn=Ae.call(J);return Et&&(ye?J[rt]=Qe:delete J[rt]),dn}var au=Bt?function(J){return J==null?[]:(J=Object(J),St(Bt(J),function(ye){return De.call(J,ye)}))}:Ni,Ls=ru;(gt&&Ls(new gt(new ArrayBuffer(1)))!=be||jn&&Ls(new jn)!=R||ni&&Ls(ni.resolve())!=H||In&&Ls(new In)!=Y||Ln&&Ls(new Ln)!=ve)&&(Ls=function(J){var ye=ru(J),Qe=ye==W?J.constructor:void 0,Et=Qe?Xo(Qe):"";if(Et)switch(Et){case Xi:return be;case Di:return R;case ur:return H;case fi:return Y;case Si:return ve}return ye});function Ga(J,ye){return ye=ye??s,!!ye&&(typeof J=="number"||At.test(J))&&J>-1&&J%1==0&&J<ye}function tr(J){var ye=typeof J;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?J!=="__proto__":J===null}function ol(J){return!!se&&se in J}function Gi(J){var ye=J&&J.constructor,Qe=typeof ye=="function"&&ye.prototype||Me;return J===Qe}function Wa(J){return Ae.call(J)}function Xo(J){if(J!=null){try{return le.call(J)}catch{}try{return J+""}catch{}}return""}function lu(J,ye){return J===ye||J!==J&&ye!==ye}var Ko=Oc((function(){return arguments})())?Oc:function(J){return ao(J)&&he.call(J,"callee")&&!De.call(J,"callee")},so=Array.isArray;function ws(J){return J!=null&&mo(J.length)&&!uu(J)}var Mo=pt||Pi;function _o(J,ye){return rc(J,ye)}function uu(J){if(!ss(J))return!1;var ye=ru(J);return ye==S||ye==B||ye==h||ye==$}function mo(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=s}function ss(J){var ye=typeof J;return J!=null&&(ye=="object"||ye=="function")}function ao(J){return J!=null&&typeof J=="object"}var sl=ft?zn(ft):pa;function Ul(J){return ws(J)?yl(J):oc(J)}function Ni(){return[]}function Pi(){return!1}n.exports=_o})(i3,i3.exports)),i3.exports}var ZUe=HUe();const GD=eu(ZUe);function lr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return lr=function(){return s},s}lr();class XUe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(lr().b[0][0]++,{})){lr().f[0]++,lr().s[0]++,this.onSourcesChange=(lr().b[1][0]++,e.onSourcesChange||(lr().b[1][1]++,()=>{lr().f[1]++})),lr().s[1]++,this.onVectorLayersChange=(lr().b[2][0]++,e.onVectorLayersChange||(lr().b[2][1]++,()=>{lr().f[2]++})),lr().s[2]++,this._sources={},lr().s[3]++,this._vectorLayers={},lr().s[4]++,this.throttledAnalyzeVectorLayerFields=VUe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){lr().f[3]++;const t=(lr().s[5]++,{...this._sources});lr().s[6]++,Object.keys(e.style.sourceCaches).forEach(i=>{lr().f[4]++,lr().s[7]++,this._sources[i]=e.style.sourceCaches[i]._source.vectorLayerIds}),lr().s[8]++,GD(t,this._sources)?lr().b[3][1]++:(lr().b[3][0]++,lr().s[9]++,this.onSourcesChange(this._sources)),lr().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){lr().f[5]++;const t=(lr().s[11]++,{...this._vectorLayers});lr().s[12]++,Object.keys(this._sources).forEach(i=>{lr().f[6]++,lr().s[13]++,(lr().b[4][0]++,this._sources[i]||(lr().b[4][1]++,[])).forEach(r=>{lr().f[7]++;const o=(lr().s[14]++,lr().b[5][0]++,this._vectorLayers[r]||(lr().b[5][1]++,{})),s=(lr().s[15]++,{sourceLayer:r});lr().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{lr().f[8]++,lr().s[17]++,Object.keys(a.properties).forEach(c=>{lr().f[9]++;const h=(lr().s[18]++,lr().b[6][0]++,o[c]||(lr().b[6][1]++,{}));lr().s[19]++,h[a.properties[c]]={},lr().s[20]++,o[c]=h})}),lr().s[21]++,this._vectorLayers[r]=o})}),lr().s[22]++,GD(t,this._vectorLayers)?lr().b[7][1]++:(lr().b[7][0]++,lr().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return lr().f[10]++,lr().s[24]++,this._sources}get vectorLayers(){return lr().f[11]++,lr().s[25]++,this._vectorLayers}}function me(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="3ada5d61e06df3b0198ab7e31ce0b9225ca7364f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:37},end:{line:228,column:38}},loc:{start:{line:228,column:48},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:36},end:{line:233,column:37}},loc:{start:{line:233,column:47},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3ada5d61e06df3b0198ab7e31ce0b9225ca7364f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return me=function(){return s},s}me();me().s[0]++;window.Buffer=Oue.Buffer;function ew(n,e){me().f[0]++;const t=(me().s[1]++,n.match(/\.tilehosting\.com/)),i=(me().s[2]++,n.match(/\.maptiler\.com/)),r=(me().s[3]++,n.match(/\.thunderforest\.com/)),o=(me().s[4]++,n.match(/\.locationiq\.com/));if(me().s[5]++,me().b[1][0]++,t||(me().b[1][1]++,i)){me().b[0][0]++;const s=(me().s[6]++,Bd.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(me().s[7]++,s)return me().b[2][0]++,me().s[8]++,n.replace("{key}",s);me().b[2][1]++}else if(me().b[0][1]++,me().s[9]++,r){me().b[3][0]++;const s=(me().s[10]++,Bd.getAccessToken("thunderforest",e,{allowFallback:!0}));if(me().s[11]++,s)return me().b[4][0]++,me().s[12]++,n.replace("{key}",s);me().b[4][1]++}else if(me().b[3][1]++,me().s[13]++,o){me().b[5][0]++;const s=(me().s[14]++,Bd.getAccessToken("locationiq",e,{allowFallback:!0}));if(me().s[15]++,s)return me().b[6][0]++,me().s[16]++,n.replace("{key}",s);me().b[6][1]++}else return me().b[5][1]++,me().s[17]++,n}function tZ(n,e,t){return me().f[1]++,me().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class JUe extends On.Component{revisionStore;styleStore=(me().s[19]++,null);layerWatcher;constructor(e){me().f[2]++,me().s[20]++,super(e),me().s[21]++,this.revisionStore=new qUe,me().s[22]++,this.configureKeyboardShortcuts(),me().s[23]++,this.state={errors:[],infos:[],mapStyle:Bd.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Xr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},me().s[24]++,this.layerWatcher=new XUe({onVectorLayersChange:t=>(me().f[3]++,me().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(me().s[26]++,()=>{me().f[4]++;const e=(me().s[27]++,[{key:"?",handler:()=>{me().f[5]++,me().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{me().f[6]++,me().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{me().f[7]++,me().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{me().f[8]++,me().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{me().f[9]++,me().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{me().f[10]++,me().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{me().f[11]++,me().s[34]++,this.setMapState(this.state.mapState==="map"?(me().b[7][0]++,"inspect"):(me().b[7][1]++,"map"))}},{key:"m",handler:()=>{me().f[12]++,me().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{me().f[13]++,me().s[36]++,this.toggleModal("debug")}}]);me().s[37]++,document.body.addEventListener("keyup",t=>{if(me().f[14]++,me().s[38]++,t.key==="Escape")me().b[8][0]++,me().s[39]++,t.target.blur(),me().s[40]++,document.body.focus();else if(me().b[8][1]++,me().s[41]++,me().b[10][0]++,this.state.isOpen.shortcuts||(me().b[10][1]++,document.activeElement===document.body)){me().b[9][0]++;const i=(me().s[42]++,e.find(r=>(me().f[15]++,me().s[43]++,r.key===t.key)));me().s[44]++,i?(me().b[11][0]++,me().s[45]++,this.setModal("shortcuts",!1),me().s[46]++,i.handler()):me().b[11][1]++}else me().b[9][1]++})});handleKeyPress=(me().s[47]++,e=>{me().f[16]++,me().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(me().b[12][0]++,me().s[49]++,me().b[14][0]++,e.metaKey&&(me().b[14][1]++,e.shiftKey)&&(me().b[14][2]++,e.keyCode===90)?(me().b[13][0]++,me().s[50]++,e.preventDefault(),me().s[51]++,this.onRedo()):(me().b[13][1]++,me().s[52]++,me().b[16][0]++,e.metaKey&&(me().b[16][1]++,e.keyCode===90)?(me().b[15][0]++,me().s[53]++,e.preventDefault(),me().s[54]++,this.onUndo()):me().b[15][1]++)):(me().b[12][1]++,me().s[55]++,me().b[18][0]++,e.ctrlKey&&(me().b[18][1]++,e.keyCode===90)?(me().b[17][0]++,me().s[56]++,e.preventDefault(),me().s[57]++,this.onUndo()):(me().b[17][1]++,me().s[58]++,me().b[20][0]++,e.ctrlKey&&(me().b[20][1]++,e.keyCode===89)?(me().b[19][0]++,me().s[59]++,e.preventDefault(),me().s[60]++,this.onRedo()):me().b[19][1]++))});async componentDidMount(){me().f[17]++,me().s[61]++,this.styleStore=await QUe((e,t)=>(me().f[18]++,me().s[62]++,this.onStyleChanged(e,t))),me().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){me().f[19]++,me().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){me().f[20]++,me().s[65]++,this.styleStore?.save(e)}updateFonts(e){me().f[21]++;const t=(me().s[66]++,me().b[21][0]++,this.state.mapStyle.metadata||(me().b[21][1]++,{})),i=(me().s[67]++,me().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(me().b[22][1]++,cae.openmaptiles)),r=(me().s[68]++,typeof e=="string"?(me().b[23][0]++,e.replace("{key}",i)):(me().b[23][1]++,e));me().s[69]++,BUe(r,o=>{me().f[22]++,me().s[70]++,this.setState({spec:tZ(this.state.spec,"glyphs",o)})})}updateIcons(e){me().f[23]++,me().s[71]++,IUe(e,t=>{me().f[24]++,me().s[72]++,this.setState({spec:tZ(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(me().s[73]++,(e,t)=>{me().f[25]++,me().s[74]++,me().b[25][0]++,e==="maputnik:renderer"&&(me().b[25][1]++,t!==kue(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(me().b[24][0]++,me().s[75]++,this.setState({mapState:"map"})):me().b[24][1]++;const i=(me().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});me().s[77]++,this.onStyleChanged(i)});onStyleChanged=(me().s[78]++,(e,t=(me().b[26][0]++,{}))=>{me().f[26]++,me().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},me().s[80]++,me().b[28][0]++,e.glyphs&&(me().b[28][1]++,typeof e.glyphs=="string")?(me().b[27][0]++,me().s[81]++,e.glyphs=ew(e.glyphs,e)):me().b[27][1]++,me().s[82]++,me().b[30][0]++,e.sprite&&(me().b[30][1]++,typeof e.sprite=="string")?(me().b[29][0]++,me().s[83]++,e.sprite=ew(e.sprite,e)):me().b[29][1]++,me().s[84]++;for(const[a,c]of Object.entries(e.sources))me().s[85]++,me().b[32][0]++,c&&(me().b[32][1]++,"url"in c)&&(me().b[32][2]++,typeof c.url=="string")?(me().b[31][0]++,me().s[86]++,c.url=ew(c.url,e)):me().b[31][1]++;me().s[87]++,t.initialLoad?(me().b[33][0]++,me().s[88]++,this.getInitialStateFromUrl(e)):me().b[33][1]++;const i=(me().s[89]++,me().b[34][0]++,kd(e)||(me().b[34][1]++,[])),r=(me().s[90]++,[]);if(me().s[91]++,me().b[36][0]++,e&&(me().b[36][1]++,e.layers)){me().b[35][0]++;const a=(me().s[92]++,new window.Map);me().s[93]++,e.layers.forEach((c,h)=>{if(me().f[27]++,me().s[94]++,me().b[38][0]++,c.id===""&&(me().b[38][1]++,a.has(c.id))){me().b[37][0]++;const m=(me().s[95]++,new Error(`layers[${h}]: duplicate layer id [empty_string], previously used`));me().s[96]++,r.push(m)}else me().b[37][1]++;me().s[97]++,a.set(c.id,!0)})}else me().b[35][1]++;const o=(me().s[98]++,r.concat(i).map(a=>{me().f[28]++;const c=(me().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(me().s[100]++,c){me().b[39][0]++;const[,v,x]=(me().s[101]++,c);return me().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"id",message:x}}}}else me().b[39][1]++;const h=(me().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(me().s[104]++,h){me().b[40][0]++;const[,v,x]=(me().s[105]++,h);return me().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"source",message:x}}}}else me().b[40][1]++;const m=(me().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(me().s[108]++,m){me().b[41][0]++;const[,v,x,S,B]=(me().s[109]++,m),R=(me().s[110]++,me().b[43][0]++,x&&(me().b[43][1]++,S)?(me().b[42][0]++,[x,S].join(".")):(me().b[42][1]++,S));return me().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:R,message:B}}}}else return me().b[41][1]++,me().s[112]++,{message:a.message}}));let s=(me().s[113]++,void 0);if(me().s[114]++,i.length>0){me().b[44][0]++,me().s[115]++,s=bF(e),me().s[116]++;for(const a of i){const{message:c}=(me().s[117]++,a);if(me().s[118]++,c){me().b[45][0]++,me().s[119]++;try{const h=(me().s[120]++,c.split(":")[0]),m=(me().s[121]++,h.match(/^\S+?\[\d+\]\.[^[]+/)[0]);me().s[122]++,q4.unset(s,m)}catch(h){me().s[123]++,console.warn(c+" "+h)}}else me().b[45][1]++}}else me().b[44][1]++;me().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(me().b[46][0]++,me().s[125]++,this.updateFonts(e.glyphs)):me().b[46][1]++,me().s[126]++,e.sprite!==this.state.mapStyle.sprite?(me().b[47][0]++,me().s[127]++,this.updateIcons(e.sprite)):me().b[47][1]++,me().s[128]++,t.addRevision?(me().b[48][0]++,me().s[129]++,this.revisionStore.addRevision(e)):me().b[48][1]++,me().s[130]++,t.save?(me().b[49][0]++,me().s[131]++,this.saveStyle(e)):me().b[49][1]++,me().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{me().f[29]++,me().s[133]++,this.fetchSources(),me().s[134]++,this.setStateInUrl()})});onUndo=(me().s[135]++,()=>{me().f[30]++;const e=(me().s[136]++,this.revisionStore.undo()),t=(me().s[137]++,kUe(this.state.mapStyle,e));me().s[138]++,this.onStyleChanged(e,{addRevision:!1}),me().s[139]++,this.setState({infos:t})});onRedo=(me().s[140]++,()=>{me().f[31]++;const e=(me().s[141]++,this.revisionStore.redo()),t=(me().s[142]++,TUe(this.state.mapStyle,e));me().s[143]++,this.onStyleChanged(e,{addRevision:!1}),me().s[144]++,this.setState({infos:t})});onMoveLayer=(me().s[145]++,e=>{me().f[32]++;let{oldIndex:t,newIndex:i}=(me().s[146]++,e),r=(me().s[147]++,this.state.mapStyle.layers);if(me().s[148]++,t=_F(t,0,r.length-1),me().s[149]++,i=_F(i,0,r.length-1),me().s[150]++,t===i){me().b[50][0]++,me().s[151]++;return}else me().b[50][1]++;me().s[152]++,t===this.state.selectedLayerIndex?(me().b[51][0]++,me().s[153]++,this.setState({selectedLayerIndex:i})):me().b[51][1]++,me().s[154]++,r=r.slice(0),me().s[155]++,Due(r,t,i),me().s[156]++,this.onLayersChange(r)});onLayersChange=(me().s[157]++,e=>{me().f[33]++;const t=(me().s[158]++,{...this.state.mapStyle,layers:e});me().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(me().s[160]++,e=>{me().f[34]++;const t=(me().s[161]++,this.state.mapStyle.layers),i=(me().s[162]++,t.slice(0));me().s[163]++,i.splice(e,1),me().s[164]++,this.onLayersChange(i)});onLayerCopy=(me().s[165]++,e=>{me().f[35]++;const t=(me().s[166]++,this.state.mapStyle.layers),i=(me().s[167]++,t.slice(0)),r=(me().s[168]++,bF(i[e]));me().s[169]++,r.id=r.id+"-copy",me().s[170]++,i.splice(e,0,r),me().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(me().s[172]++,e=>{me().f[36]++;const t=(me().s[173]++,this.state.mapStyle.layers),i=(me().s[174]++,t.slice(0)),r=(me().s[175]++,{...i[e]}),o=(me().s[176]++,"layout"in r?(me().b[52][0]++,{...r.layout}):(me().b[52][1]++,{}));me().s[177]++,o.visibility=o.visibility==="none"?(me().b[53][0]++,"visible"):(me().b[53][1]++,"none"),me().s[178]++,r.layout=o,me().s[179]++,i[e]=r,me().s[180]++,this.onLayersChange(i)});onLayerIdChange=(me().s[181]++,(e,t,i)=>{me().f[37]++;const r=(me().s[182]++,this.state.mapStyle.layers.slice(0));me().s[183]++,r[e]={...r[e],id:i},me().s[184]++,this.onLayersChange(r)});onLayerChanged=(me().s[185]++,(e,t)=>{me().f[38]++;const i=(me().s[186]++,this.state.mapStyle.layers.slice(0));me().s[187]++,i[e]=t,me().s[188]++,this.onLayersChange(i)});setMapState=(me().s[189]++,e=>{me().f[39]++,me().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(me().s[191]++,e=>{me().f[40]++;const t=(me().s[192]++,me().b[54][0]++,e.metadata||(me().b[54][1]++,{}));if(me().s[193]++,t["maputnik:renderer"]===void 0){me().b[55][0]++;const i=(me().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return me().s[195]++,i}else return me().b[55][1]++,me().s[196]++,e});openStyle=(me().s[197]++,(e,t)=>{me().f[41]++,me().s[198]++,this.setState({fileHandle:t}),me().s[199]++,e=this.setDefaultValues(e),me().s[200]++,this.onStyleChanged(e)});async fetchSources(){me().f[42]++;const e=(me().s[201]++,{});me().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(me().s[203]++,this.state.mapStyle.sources[t]);if(me().s[204]++,me().b[57][0]++,i.type!=="vector"||(me().b[57][1]++,!("url"in i)))me().b[56][0]++,me().s[205]++,e[t]=(me().b[58][0]++,this.state.sources[t]||(me().b[58][1]++,{...this.state.mapStyle.sources[t]})),me().s[206]++,e[t].layers===void 0?(me().b[59][0]++,me().s[207]++,e[t].layers=[]):me().b[59][1]++;else{me().b[56][1]++,me().s[208]++,e[t]={type:i.type,layers:[]};let r=(me().s[209]++,i.url);me().s[210]++;try{me().s[211]++,r=ew(r,this.state.mapStyle)}catch(s){me().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}me().s[213]++;const o=s=>{if(me().f[43]++,me().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))me().b[60][1]++;else{me().b[60][0]++,me().s[215]++;return}me().s[216]++;for(const a of s.vector_layers)me().s[217]++,e[t].layers.push(a.id)};me().s[218]++;try{if(me().s[219]++,r.startsWith("pmtiles://")){me().b[61][0]++;const s=(me().s[220]++,await new l9(r.substring(10)).getTileJson(""));me().s[221]++,o(s)}else{me().b[61][1]++;const s=(me().s[222]++,await fetch(r,{mode:"cors"})),a=(me().s[223]++,await s.json());me().s[224]++,o(a)}}catch(s){me().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}me().s[226]++,GD(this.state.sources,e)?me().b[62][1]++:(me().b[62][0]++,me().s[227]++,console.debug("Setting sources",e),me().s[228]++,this.setState({sources:e}))}_getRenderer(){me().f[44]++;const e=(me().s[229]++,me().b[63][0]++,this.state.mapStyle.metadata||(me().b[63][1]++,{}));return me().s[230]++,me().b[64][0]++,e["maputnik:renderer"]||(me().b[64][1]++,"mlgljs")}onMapChange=(me().s[231]++,e=>{me().f[45]++,me().s[232]++,this.setState({mapView:e})});mapRenderer(){me().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(me().s[233]++,this.state),i=(me().s[234]++,{mapStyle:(me().b[65][0]++,t||(me().b[65][1]++,e)),replaceAccessTokens:c=>(me().f[47]++,me().s[235]++,Bd.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{me().f[48]++,me().s[236]++,this.layerWatcher.analyzeMap(c.map),me().s[237]++,this.fetchSources()}}),r=(me().s[238]++,this._getRenderer());let o;me().s[239]++,r==="ol"?(me().b[66][0]++,me().s[240]++,o=te.jsx(D_e,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(me().f[49]++,me().s[241]++,this.onLayerSelect(+c))})):(me().b[66][1]++,me().s[242]++,o=te.jsx(Xpe,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;me().s[243]++,this.state.mapState.match(/^filter-/)?(me().b[67][0]++,me().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):me().b[67][1]++;const a=(me().s[245]++,{});return me().s[246]++,s?(me().b[68][0]++,me().s[247]++,a.filter=`url('#${s}')`):me().b[68][1]++,me().s[248]++,te.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(me().s[249]++,()=>{me().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(me().s[250]++,this.state),{selectedLayerIndex:r}=(me().s[251]++,this.state),o=(me().s[252]++,new URL(location.href)),s=(me().s[253]++,BF(JSON.stringify(t)));me().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(me().s[255]++,Object.entries(i).map(([c,h])=>(me().f[51]++,me().s[256]++,h===!0?(me().b[69][0]++,c):(me().b[69][1]++,null))).filter(c=>(me().f[52]++,me().s[257]++,c!==null)));me().s[258]++,a.length>0?(me().b[70][0]++,me().s[259]++,o.searchParams.set("modal",a.join(","))):(me().b[70][1]++,me().s[260]++,o.searchParams.delete("modal")),me().s[261]++,e==="map"?(me().b[71][0]++,me().s[262]++,o.searchParams.delete("view")):(me().b[71][1]++,me().s[263]++,e==="inspect"?(me().b[72][0]++,me().s[264]++,o.searchParams.set("view","inspect")):me().b[72][1]++),me().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(me().s[266]++,e=>{me().f[53]++;const t=(me().s[267]++,new URL(location.href)),i=(me().s[268]++,t.searchParams.get("modal"));if(me().s[269]++,me().b[74][0]++,i&&(me().b[74][1]++,i!=="")){me().b[73][0]++;const s=(me().s[270]++,i.split(",")),a=(me().s[271]++,{});me().s[272]++,s.forEach(c=>{me().f[54]++,me().s[273]++,a[c]=!0}),me().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else me().b[73][1]++;const r=(me().s[275]++,t.searchParams.get("view"));me().s[276]++,me().b[76][0]++,r&&(me().b[76][1]++,r!=="")?(me().b[75][0]++,me().s[277]++,this.setMapState(r)):me().b[75][1]++;const o=(me().s[278]++,t.searchParams.get("layer"));if(me().s[279]++,o){me().b[77][0]++,me().s[280]++;try{const s=(me().s[281]++,o.split("~")),[a,c]=(me().s[282]++,[s[0],parseInt(s[1],10)]);let h=(me().s[283]++,!0);if(me().s[284]++,a!=="-"){me().b[78][0]++;const m=(me().s[285]++,BF(JSON.stringify(e)));me().s[286]++,m!==parseInt(a,10)?(me().b[79][0]++,me().s[287]++,h=!1):me().b[79][1]++}else me().b[78][1]++;me().s[288]++,h?(me().b[80][0]++,me().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):me().b[80][1]++}catch(s){me().s[290]++,console.warn(s)}}else me().b[77][1]++});onLayerSelect=(me().s[291]++,e=>{me().f[55]++,me().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){me().f[56]++,me().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){me().f[57]++,me().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(me().s[295]++,e=>{me().f[58]++,me().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(me().s[297]++,(e,t)=>{me().f[59]++,me().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(me().s[299]++,(e,t)=>{me().f[60]++,me().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){me().f[61]++;const e=(me().s[301]++,me().b[81][0]++,this.state.mapStyle.layers||(me().b[81][1]++,[])),t=(me().s[302]++,e.length>0?(me().b[82][0]++,e[this.state.selectedLayerIndex]):(me().b[82][1]++,void 0)),i=(me().s[303]++,te.jsx(jDe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:h=>(me().f[62]++,me().s[304]++,this.toggleModal(h))})),r=(me().s[305]++,this.state.isOpen.codeEditor?(me().b[83][0]++,te.jsx(ySe,{value:this.state.mapStyle,onChange:h=>(me().f[63]++,me().s[306]++,this.onStyleChanged(h)),onClose:()=>(me().f[64]++,me().s[307]++,this.setModal("codeEditor",!1))})):(me().b[83][1]++,void 0)),o=(me().s[308]++,te.jsx(ake,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(me().s[309]++,t?(me().b[84][0]++,te.jsx(bDe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(me().b[84][1]++,void 0)),a=(me().s[310]++,this.state.errors.length+this.state.infos.length>0?(me().b[85][0]++,te.jsx(QDe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(me().b[85][1]++,void 0)),c=(me().s[311]++,te.jsxs("div",{children:[te.jsx(GPe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(me().f[65]++,me().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),te.jsx(jPe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(me().f[66]++,me().s[313]++,this.toggleModal("shortcuts"))}),te.jsx(VDe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(me().f[67]++,me().s[314]++,this.toggleModal("settings"))}),te.jsx(pPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(me().f[68]++,me().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),te.jsx(FPe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(me().f[69]++,me().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),te.jsx(DPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(me().f[70]++,me().s[317]++,this.toggleModal("sources"))}),te.jsx(QPe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(me().f[71]++,me().s[318]++,this.toggleModal("globalState"))})]}));return me().s[319]++,te.jsx(GDe,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const eLe=rZ.createRoot(document.querySelector("#app"));eLe.render(te.jsx(ox.Provider,{value:{className:"react-icons"},children:te.jsx(JUe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Cik8Ni7N.js.map
