(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Gl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function fB(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var $3={exports:{}},xv={},V3={exports:{}},hs={},jI;function Cj(){if(jI)return hs;jI=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.iterator;function R(Ie){return Ie===null||typeof Ie!="object"?null:(Ie=B&&Ie[B]||Ie["@@iterator"],typeof Ie=="function"?Ie:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,N={};function W(Ie,$e,gt){this.props=Ie,this.context=$e,this.refs=N,this.updater=gt||P}W.prototype.isReactComponent={},W.prototype.setState=function(Ie,$e){if(typeof Ie!="object"&&typeof Ie!="function"&&Ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ie,$e,"setState")},W.prototype.forceUpdate=function(Ie){this.updater.enqueueForceUpdate(this,Ie,"forceUpdate")};function X(){}X.prototype=W.prototype;function $(Ie,$e,gt){this.props=Ie,this.context=$e,this.refs=N,this.updater=gt||P}var re=$.prototype=new X;re.constructor=$,U(re,W.prototype),re.isPureReactComponent=!0;var te=Array.isArray,V=Object.prototype.hasOwnProperty,ne={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function le(Ie,$e,gt){var Dt,ut={},Rt=null,St=null;if($e!=null)for(Dt in $e.ref!==void 0&&(St=$e.ref),$e.key!==void 0&&(Rt=""+$e.key),$e)V.call($e,Dt)&&!G.hasOwnProperty(Dt)&&(ut[Dt]=$e[Dt]);var Ke=arguments.length-2;if(Ke===1)ut.children=gt;else if(1<Ke){for(var Pe=Array(Ke),Re=0;Re<Ke;Re++)Pe[Re]=arguments[Re+2];ut.children=Pe}if(Ie&&Ie.defaultProps)for(Dt in Ke=Ie.defaultProps,Ke)ut[Dt]===void 0&&(ut[Dt]=Ke[Dt]);return{$$typeof:n,type:Ie,key:Rt,ref:St,props:ut,_owner:ne.current}}function fe(Ie,$e){return{$$typeof:n,type:Ie.type,key:$e,ref:Ie.ref,props:Ie.props,_owner:Ie._owner}}function pe(Ie){return typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===n}function we(Ie){var $e={"=":"=0",":":"=2"};return"$"+Ie.replace(/[=:]/g,function(gt){return $e[gt]})}var Se=/\/+/g;function xe(Ie,$e){return typeof Ie=="object"&&Ie!==null&&Ie.key!=null?we(""+Ie.key):$e.toString(36)}function je(Ie,$e,gt,Dt,ut){var Rt=typeof Ie;(Rt==="undefined"||Rt==="boolean")&&(Ie=null);var St=!1;if(Ie===null)St=!0;else switch(Rt){case"string":case"number":St=!0;break;case"object":switch(Ie.$$typeof){case n:case e:St=!0}}if(St)return St=Ie,ut=ut(St),Ie=Dt===""?"."+xe(St,0):Dt,te(ut)?(gt="",Ie!=null&&(gt=Ie.replace(Se,"$&/")+"/"),je(ut,$e,gt,"",function(Re){return Re})):ut!=null&&(pe(ut)&&(ut=fe(ut,gt+(!ut.key||St&&St.key===ut.key?"":(""+ut.key).replace(Se,"$&/")+"/")+Ie)),$e.push(ut)),1;if(St=0,Dt=Dt===""?".":Dt+":",te(Ie))for(var Ke=0;Ke<Ie.length;Ke++){Rt=Ie[Ke];var Pe=Dt+xe(Rt,Ke);St+=je(Rt,$e,gt,Pe,ut)}else if(Pe=R(Ie),typeof Pe=="function")for(Ie=Pe.call(Ie),Ke=0;!(Rt=Ie.next()).done;)Rt=Rt.value,Pe=Dt+xe(Rt,Ke++),St+=je(Rt,$e,gt,Pe,ut);else if(Rt==="object")throw $e=String(Ie),Error("Objects are not valid as a React child (found: "+($e==="[object Object]"?"object with keys {"+Object.keys(Ie).join(", ")+"}":$e)+"). If you meant to render a collection of children, use an array instead.");return St}function Me(Ie,$e,gt){if(Ie==null)return Ie;var Dt=[],ut=0;return je(Ie,Dt,"","",function(Rt){return $e.call(gt,Rt,ut++)}),Dt}function rt(Ie){if(Ie._status===-1){var $e=Ie._result;$e=$e(),$e.then(function(gt){(Ie._status===0||Ie._status===-1)&&(Ie._status=1,Ie._result=gt)},function(gt){(Ie._status===0||Ie._status===-1)&&(Ie._status=2,Ie._result=gt)}),Ie._status===-1&&(Ie._status=0,Ie._result=$e)}if(Ie._status===1)return Ie._result.default;throw Ie._result}var Ct={current:null},it={transition:null},nt={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:it,ReactCurrentOwner:ne};function Ge(){throw Error("act(...) is not supported in production builds of React.")}return hs.Children={map:Me,forEach:function(Ie,$e,gt){Me(Ie,function(){$e.apply(this,arguments)},gt)},count:function(Ie){var $e=0;return Me(Ie,function(){$e++}),$e},toArray:function(Ie){return Me(Ie,function($e){return $e})||[]},only:function(Ie){if(!pe(Ie))throw Error("React.Children.only expected to receive a single React element child.");return Ie}},hs.Component=W,hs.Fragment=t,hs.Profiler=i,hs.PureComponent=$,hs.StrictMode=r,hs.Suspense=f,hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nt,hs.act=Ge,hs.cloneElement=function(Ie,$e,gt){if(Ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ie+".");var Dt=U({},Ie.props),ut=Ie.key,Rt=Ie.ref,St=Ie._owner;if($e!=null){if($e.ref!==void 0&&(Rt=$e.ref,St=ne.current),$e.key!==void 0&&(ut=""+$e.key),Ie.type&&Ie.type.defaultProps)var Ke=Ie.type.defaultProps;for(Pe in $e)V.call($e,Pe)&&!G.hasOwnProperty(Pe)&&(Dt[Pe]=$e[Pe]===void 0&&Ke!==void 0?Ke[Pe]:$e[Pe])}var Pe=arguments.length-2;if(Pe===1)Dt.children=gt;else if(1<Pe){Ke=Array(Pe);for(var Re=0;Re<Pe;Re++)Ke[Re]=arguments[Re+2];Dt.children=Ke}return{$$typeof:n,type:Ie.type,key:ut,ref:Rt,props:Dt,_owner:St}},hs.createContext=function(Ie){return Ie={$$typeof:l,_currentValue:Ie,_currentValue2:Ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ie.Provider={$$typeof:s,_context:Ie},Ie.Consumer=Ie},hs.createElement=le,hs.createFactory=function(Ie){var $e=le.bind(null,Ie);return $e.type=Ie,$e},hs.createRef=function(){return{current:null}},hs.forwardRef=function(Ie){return{$$typeof:o,render:Ie}},hs.isValidElement=pe,hs.lazy=function(Ie){return{$$typeof:x,_payload:{_status:-1,_result:Ie},_init:rt}},hs.memo=function(Ie,$e){return{$$typeof:C,type:Ie,compare:$e===void 0?null:$e}},hs.startTransition=function(Ie){var $e=it.transition;it.transition={};try{Ie()}finally{it.transition=$e}},hs.unstable_act=Ge,hs.useCallback=function(Ie,$e){return Ct.current.useCallback(Ie,$e)},hs.useContext=function(Ie){return Ct.current.useContext(Ie)},hs.useDebugValue=function(){},hs.useDeferredValue=function(Ie){return Ct.current.useDeferredValue(Ie)},hs.useEffect=function(Ie,$e){return Ct.current.useEffect(Ie,$e)},hs.useId=function(){return Ct.current.useId()},hs.useImperativeHandle=function(Ie,$e,gt){return Ct.current.useImperativeHandle(Ie,$e,gt)},hs.useInsertionEffect=function(Ie,$e){return Ct.current.useInsertionEffect(Ie,$e)},hs.useLayoutEffect=function(Ie,$e){return Ct.current.useLayoutEffect(Ie,$e)},hs.useMemo=function(Ie,$e){return Ct.current.useMemo(Ie,$e)},hs.useReducer=function(Ie,$e,gt){return Ct.current.useReducer(Ie,$e,gt)},hs.useRef=function(Ie){return Ct.current.useRef(Ie)},hs.useState=function(Ie){return Ct.current.useState(Ie)},hs.useSyncExternalStore=function(Ie,$e,gt){return Ct.current.useSyncExternalStore(Ie,$e,gt)},hs.useTransition=function(){return Ct.current.useTransition()},hs.version="18.3.1",hs}var WI;function tl(){return WI||(WI=1,V3.exports=Cj()),V3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI;function _j(){if(QI)return xv;QI=1;var n=tl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(o,f,C){var x,B={},R=null,P=null;C!==void 0&&(R=""+C),f.key!==void 0&&(R=""+f.key),f.ref!==void 0&&(P=f.ref);for(x in f)r.call(f,x)&&!s.hasOwnProperty(x)&&(B[x]=f[x]);if(o&&o.defaultProps)for(x in f=o.defaultProps,f)B[x]===void 0&&(B[x]=f[x]);return{$$typeof:e,type:o,key:R,ref:P,props:B,_owner:i.current}}return xv.Fragment=t,xv.jsx=l,xv.jsxs=l,xv}var YI;function bj(){return YI||(YI=1,$3.exports=_j()),$3.exports}var oe=bj(),nr=tl();const ur=Gl(nr);var uF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ey=ur.createContext&&ur.createContext(uF),xj=["attr","size","title"];function Mj(n,e){if(n==null)return{};var t=wj(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function wj(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function d2(){return d2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d2.apply(this,arguments)}function qI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function f2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(t),!0).forEach(function(r){Sj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Sj(n,e,t){return e=Ej(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ej(n){var e=Bj(n,"string");return typeof e=="symbol"?e:e+""}function Bj(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cF(n){return n&&n.map((e,t)=>ur.createElement(e.tag,f2({key:t},e.attr),cF(e.child)))}function rA(n){return e=>ur.createElement(Oj,d2({attr:f2({},n.attr)},e),cF(n.child))}function Oj(n){var e=t=>{var{attr:r,size:i,title:s}=n,l=Mj(n,xj),o=i||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),ur.createElement("svg",d2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:f,style:f2(f2({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&ur.createElement("title",null,s),n.children)};return Ey!==void 0?ur.createElement(Ey.Consumer,null,t=>e(t)):e(uF)}var sb={},H3={exports:{}},ad={},Z3={exports:{}},X3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I;function Ij(){return $I||($I=1,function(n){function e(it,nt){var Ge=it.length;it.push(nt);e:for(;0<Ge;){var Ie=Ge-1>>>1,$e=it[Ie];if(0<i($e,nt))it[Ie]=nt,it[Ge]=$e,Ge=Ie;else break e}}function t(it){return it.length===0?null:it[0]}function r(it){if(it.length===0)return null;var nt=it[0],Ge=it.pop();if(Ge!==nt){it[0]=Ge;e:for(var Ie=0,$e=it.length,gt=$e>>>1;Ie<gt;){var Dt=2*(Ie+1)-1,ut=it[Dt],Rt=Dt+1,St=it[Rt];if(0>i(ut,Ge))Rt<$e&&0>i(St,ut)?(it[Ie]=St,it[Rt]=Ge,Ie=Rt):(it[Ie]=ut,it[Dt]=Ge,Ie=Dt);else if(Rt<$e&&0>i(St,Ge))it[Ie]=St,it[Rt]=Ge,Ie=Rt;else break e}}return nt}function i(it,nt){var Ge=it.sortIndex-nt.sortIndex;return Ge!==0?Ge:it.id-nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var f=[],C=[],x=1,B=null,R=3,P=!1,U=!1,N=!1,W=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(it){for(var nt=t(C);nt!==null;){if(nt.callback===null)r(C);else if(nt.startTime<=it)r(C),nt.sortIndex=nt.expirationTime,e(f,nt);else break;nt=t(C)}}function te(it){if(N=!1,re(it),!U)if(t(f)!==null)U=!0,rt(V);else{var nt=t(C);nt!==null&&Ct(te,nt.startTime-it)}}function V(it,nt){U=!1,N&&(N=!1,X(le),le=-1),P=!0;var Ge=R;try{for(re(nt),B=t(f);B!==null&&(!(B.expirationTime>nt)||it&&!we());){var Ie=B.callback;if(typeof Ie=="function"){B.callback=null,R=B.priorityLevel;var $e=Ie(B.expirationTime<=nt);nt=n.unstable_now(),typeof $e=="function"?B.callback=$e:B===t(f)&&r(f),re(nt)}else r(f);B=t(f)}if(B!==null)var gt=!0;else{var Dt=t(C);Dt!==null&&Ct(te,Dt.startTime-nt),gt=!1}return gt}finally{B=null,R=Ge,P=!1}}var ne=!1,G=null,le=-1,fe=5,pe=-1;function we(){return!(n.unstable_now()-pe<fe)}function Se(){if(G!==null){var it=n.unstable_now();pe=it;var nt=!0;try{nt=G(!0,it)}finally{nt?xe():(ne=!1,G=null)}}else ne=!1}var xe;if(typeof $=="function")xe=function(){$(Se)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Me=je.port2;je.port1.onmessage=Se,xe=function(){Me.postMessage(null)}}else xe=function(){W(Se,0)};function rt(it){G=it,ne||(ne=!0,xe())}function Ct(it,nt){le=W(function(){it(n.unstable_now())},nt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(it){it.callback=null},n.unstable_continueExecution=function(){U||P||(U=!0,rt(V))},n.unstable_forceFrameRate=function(it){0>it||125<it?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<it?Math.floor(1e3/it):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(it){switch(R){case 1:case 2:case 3:var nt=3;break;default:nt=R}var Ge=R;R=nt;try{return it()}finally{R=Ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(it,nt){switch(it){case 1:case 2:case 3:case 4:case 5:break;default:it=3}var Ge=R;R=it;try{return nt()}finally{R=Ge}},n.unstable_scheduleCallback=function(it,nt,Ge){var Ie=n.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?Ie+Ge:Ie):Ge=Ie,it){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Ge+$e,it={id:x++,callback:nt,priorityLevel:it,startTime:Ge,expirationTime:$e,sortIndex:-1},Ge>Ie?(it.sortIndex=Ge,e(C,it),t(f)===null&&it===t(C)&&(N?(X(le),le=-1):N=!0,Ct(te,Ge-Ie))):(it.sortIndex=$e,e(f,it),U||P||(U=!0,rt(V))),it},n.unstable_shouldYield=we,n.unstable_wrapCallback=function(it){var nt=R;return function(){var Ge=R;R=nt;try{return it.apply(this,arguments)}finally{R=Ge}}}}(X3)),X3}var VI;function Tj(){return VI||(VI=1,Z3.exports=Ij()),Z3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HI;function kj(){if(HI)return ad;HI=1;var n=tl(),e=Tj();function t(m){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+m,K=1;K<arguments.length;K++)_+="&args[]="+encodeURIComponent(arguments[K]);return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,_){l(m,_),l(m+"Capture",_)}function l(m,_){for(i[m]=_,m=0;m<_.length;m++)r.add(_[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},B={};function R(m){return f.call(B,m)?!0:f.call(x,m)?!1:C.test(m)?B[m]=!0:(x[m]=!0,!1)}function P(m,_,K,Q){if(K!==null&&K.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return Q?!1:K!==null?!K.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function U(m,_,K,Q){if(_===null||typeof _>"u"||P(m,_,K,Q))return!0;if(Q)return!1;if(K!==null)switch(K.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function N(m,_,K,Q,se,ye,tt){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=Q,this.attributeNamespace=se,this.mustUseProperty=K,this.propertyName=m,this.type=_,this.sanitizeURL=ye,this.removeEmptyString=tt}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){W[m]=new N(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var _=m[0];W[_]=new N(_,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){W[m]=new N(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){W[m]=new N(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){W[m]=new N(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){W[m]=new N(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){W[m]=new N(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){W[m]=new N(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){W[m]=new N(m,5,!1,m.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function $(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var _=m.replace(X,$);W[_]=new N(_,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var _=m.replace(X,$);W[_]=new N(_,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var _=m.replace(X,$);W[_]=new N(_,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){W[m]=new N(m,1,!1,m.toLowerCase(),null,!1,!1)}),W.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){W[m]=new N(m,1,!1,m.toLowerCase(),null,!0,!0)});function re(m,_,K,Q){var se=W.hasOwnProperty(_)?W[_]:null;(se!==null?se.type!==0:Q||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(U(_,K,se,Q)&&(K=null),Q||se===null?R(_)&&(K===null?m.removeAttribute(_):m.setAttribute(_,""+K)):se.mustUseProperty?m[se.propertyName]=K===null?se.type===3?!1:"":K:(_=se.attributeName,Q=se.attributeNamespace,K===null?m.removeAttribute(_):(se=se.type,K=se===3||se===4&&K===!0?"":""+K,Q?m.setAttributeNS(Q,_,K):m.setAttribute(_,K))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),ne=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),we=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Ct=Symbol.for("react.offscreen"),it=Symbol.iterator;function nt(m){return m===null||typeof m!="object"?null:(m=it&&m[it]||m["@@iterator"],typeof m=="function"?m:null)}var Ge=Object.assign,Ie;function $e(m){if(Ie===void 0)try{throw Error()}catch(K){var _=K.stack.trim().match(/\n( *(at )?)/);Ie=_&&_[1]||""}return`
`+Ie+m}var gt=!1;function Dt(m,_){if(!m||gt)return"";gt=!0;var K=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Mn){var Q=Mn}Reflect.construct(m,[],_)}else{try{_.call()}catch(Mn){Q=Mn}m.call(_.prototype)}else{try{throw Error()}catch(Mn){Q=Mn}m()}}catch(Mn){if(Mn&&Q&&typeof Mn.stack=="string"){for(var se=Mn.stack.split(`
`),ye=Q.stack.split(`
`),tt=se.length-1,Ot=ye.length-1;1<=tt&&0<=Ot&&se[tt]!==ye[Ot];)Ot--;for(;1<=tt&&0<=Ot;tt--,Ot--)if(se[tt]!==ye[Ot]){if(tt!==1||Ot!==1)do if(tt--,Ot--,0>Ot||se[tt]!==ye[Ot]){var Qt=`
`+se[tt].replace(" at new "," at ");return m.displayName&&Qt.includes("<anonymous>")&&(Qt=Qt.replace("<anonymous>",m.displayName)),Qt}while(1<=tt&&0<=Ot);break}}}finally{gt=!1,Error.prepareStackTrace=K}return(m=m?m.displayName||m.name:"")?$e(m):""}function ut(m){switch(m.tag){case 5:return $e(m.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 2:case 15:return m=Dt(m.type,!1),m;case 11:return m=Dt(m.type.render,!1),m;case 1:return m=Dt(m.type,!0),m;default:return""}}function Rt(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case G:return"Fragment";case ne:return"Portal";case fe:return"Profiler";case le:return"StrictMode";case xe:return"Suspense";case je:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case we:return(m.displayName||"Context")+".Consumer";case pe:return(m._context.displayName||"Context")+".Provider";case Se:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Me:return _=m.displayName||null,_!==null?_:Rt(m.type)||"Memo";case rt:_=m._payload,m=m._init;try{return Rt(m(_))}catch{}}return null}function St(m){var _=m.type;switch(m.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=_.render,m=m.displayName||m.name||"",_.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rt(_);case 8:return _===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Ke(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Pe(m){var _=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Re(m){var _=Pe(m)?"checked":"value",K=Object.getOwnPropertyDescriptor(m.constructor.prototype,_),Q=""+m[_];if(!m.hasOwnProperty(_)&&typeof K<"u"&&typeof K.get=="function"&&typeof K.set=="function"){var se=K.get,ye=K.set;return Object.defineProperty(m,_,{configurable:!0,get:function(){return se.call(this)},set:function(tt){Q=""+tt,ye.call(this,tt)}}),Object.defineProperty(m,_,{enumerable:K.enumerable}),{getValue:function(){return Q},setValue:function(tt){Q=""+tt},stopTracking:function(){m._valueTracker=null,delete m[_]}}}}function Ye(m){m._valueTracker||(m._valueTracker=Re(m))}function vt(m){if(!m)return!1;var _=m._valueTracker;if(!_)return!0;var K=_.getValue(),Q="";return m&&(Q=Pe(m)?m.checked?"true":"false":m.value),m=Q,m!==K?(_.setValue(m),!0):!1}function yt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Et(m,_){var K=_.checked;return Ge({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:K??m._wrapperState.initialChecked})}function Zt(m,_){var K=_.defaultValue==null?"":_.defaultValue,Q=_.checked!=null?_.checked:_.defaultChecked;K=Ke(_.value!=null?_.value:K),m._wrapperState={initialChecked:Q,initialValue:K,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function Ut(m,_){_=_.checked,_!=null&&re(m,"checked",_,!1)}function An(m,_){Ut(m,_);var K=Ke(_.value),Q=_.type;if(K!=null)Q==="number"?(K===0&&m.value===""||m.value!=K)&&(m.value=""+K):m.value!==""+K&&(m.value=""+K);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}_.hasOwnProperty("value")?Vt(m,_.type,K):_.hasOwnProperty("defaultValue")&&Vt(m,_.type,Ke(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(m.defaultChecked=!!_.defaultChecked)}function hr(m,_,K){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var Q=_.type;if(!(Q!=="submit"&&Q!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+m._wrapperState.initialValue,K||_===m.value||(m.value=_),m.defaultValue=_}K=m.name,K!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,K!==""&&(m.name=K)}function Vt(m,_,K){(_!=="number"||yt(m.ownerDocument)!==m)&&(K==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+K&&(m.defaultValue=""+K))}var Vn=Array.isArray;function Pn(m,_,K,Q){if(m=m.options,_){_={};for(var se=0;se<K.length;se++)_["$"+K[se]]=!0;for(K=0;K<m.length;K++)se=_.hasOwnProperty("$"+m[K].value),m[K].selected!==se&&(m[K].selected=se),se&&Q&&(m[K].defaultSelected=!0)}else{for(K=""+Ke(K),_=null,se=0;se<m.length;se++){if(m[se].value===K){m[se].selected=!0,Q&&(m[se].defaultSelected=!0);return}_!==null||m[se].disabled||(_=m[se])}_!==null&&(_.selected=!0)}}function Dn(m,_){if(_.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ge({},_,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Ln(m,_){var K=_.value;if(K==null){if(K=_.children,_=_.defaultValue,K!=null){if(_!=null)throw Error(t(92));if(Vn(K)){if(1<K.length)throw Error(t(93));K=K[0]}_=K}_==null&&(_=""),K=_}m._wrapperState={initialValue:Ke(K)}}function Ir(m,_){var K=Ke(_.value),Q=Ke(_.defaultValue);K!=null&&(K=""+K,K!==m.value&&(m.value=K),_.defaultValue==null&&m.defaultValue!==K&&(m.defaultValue=K)),Q!=null&&(m.defaultValue=""+Q)}function rr(m){var _=m.textContent;_===m._wrapperState.initialValue&&_!==""&&_!==null&&(m.value=_)}function Yn(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function We(m,_){return m==null||m==="http://www.w3.org/1999/xhtml"?Yn(_):m==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var he,me=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,K,Q,se){MSApp.execUnsafeLocalFunction(function(){return m(_,K,Q,se)})}:m}(function(m,_){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=_;else{for(he=he||document.createElement("div"),he.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=he.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;_.firstChild;)m.appendChild(_.firstChild)}});function et(m,_){if(_){var K=m.firstChild;if(K&&K===m.lastChild&&K.nodeType===3){K.nodeValue=_;return}}m.textContent=_}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yt=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(m){Yt.forEach(function(_){_=_+m.charAt(0).toUpperCase()+m.substring(1),bt[_]=bt[m]})});function Jt(m,_,K){return _==null||typeof _=="boolean"||_===""?"":K||typeof _!="number"||_===0||bt.hasOwnProperty(m)&&bt[m]?(""+_).trim():_+"px"}function ir(m,_){m=m.style;for(var K in _)if(_.hasOwnProperty(K)){var Q=K.indexOf("--")===0,se=Jt(K,_[K],Q);K==="float"&&(K="cssFloat"),Q?m.setProperty(K,se):m[K]=se}}var Xe=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ae(m,_){if(_){if(Xe[m]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(t(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(t(61))}if(_.style!=null&&typeof _.style!="object")throw Error(t(62))}}function ve(m,_){if(m.indexOf("-")===-1)return typeof _.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function Ne(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ve=null,Te=null,lt=null;function ct(m){if(m=Ro(m)){if(typeof Ve!="function")throw Error(t(280));var _=m.stateNode;_&&(_=Bs(_),Ve(m.stateNode,m.type,_))}}function Ft(m){Te?lt?lt.push(m):lt=[m]:Te=m}function jt(){if(Te){var m=Te,_=lt;if(lt=Te=null,ct(m),_)for(m=0;m<_.length;m++)ct(_[m])}}function Gt(m,_){return m(_)}function nn(){}var On=!1;function Rn(m,_,K){if(On)return m(_,K);On=!0;try{return Gt(m,_,K)}finally{On=!1,(Te!==null||lt!==null)&&(nn(),jt())}}function dr(m,_){var K=m.stateNode;if(K===null)return null;var Q=Bs(K);if(Q===null)return null;K=Q[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(K&&typeof K!="function")throw Error(t(231,_,typeof K));return K}var Tr=!1;if(o)try{var or={};Object.defineProperty(or,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Tr=!1}function on(m,_,K,Q,se,ye,tt,Ot,Qt){var Mn=Array.prototype.slice.call(arguments,3);try{_.apply(K,Mn)}catch(sr){this.onError(sr)}}var ti=!1,li=null,jr=!1,Fr=null,wn={onError:function(m){ti=!0,li=m}};function Dr(m,_,K,Q,se,ye,tt,Ot,Qt){ti=!1,li=null,on.apply(wn,arguments)}function ui(m,_,K,Q,se,ye,tt,Ot,Qt){if(Dr.apply(this,arguments),ti){if(ti){var Mn=li;ti=!1,li=null}else throw Error(t(198));jr||(jr=!0,Fr=Mn)}}function Pi(m){var _=m,K=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,(_.flags&4098)!==0&&(K=_.return),m=_.return;while(m)}return _.tag===3?K:null}function yi(m){if(m.tag===13){var _=m.memoizedState;if(_===null&&(m=m.alternate,m!==null&&(_=m.memoizedState)),_!==null)return _.dehydrated}return null}function As(m){if(Pi(m)!==m)throw Error(t(188))}function qr(m){var _=m.alternate;if(!_){if(_=Pi(m),_===null)throw Error(t(188));return _!==m?null:m}for(var K=m,Q=_;;){var se=K.return;if(se===null)break;var ye=se.alternate;if(ye===null){if(Q=se.return,Q!==null){K=Q;continue}break}if(se.child===ye.child){for(ye=se.child;ye;){if(ye===K)return As(se),m;if(ye===Q)return As(se),_;ye=ye.sibling}throw Error(t(188))}if(K.return!==Q.return)K=se,Q=ye;else{for(var tt=!1,Ot=se.child;Ot;){if(Ot===K){tt=!0,K=se,Q=ye;break}if(Ot===Q){tt=!0,Q=se,K=ye;break}Ot=Ot.sibling}if(!tt){for(Ot=ye.child;Ot;){if(Ot===K){tt=!0,K=ye,Q=se;break}if(Ot===Q){tt=!0,Q=ye,K=se;break}Ot=Ot.sibling}if(!tt)throw Error(t(189))}}if(K.alternate!==Q)throw Error(t(190))}if(K.tag!==3)throw Error(t(188));return K.stateNode.current===K?m:_}function _s(m){return m=qr(m),m!==null?La(m):null}function La(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var _=La(m);if(_!==null)return _;m=m.sibling}return null}var da=e.unstable_scheduleCallback,No=e.unstable_cancelCallback,zs=e.unstable_shouldYield,hl=e.unstable_requestPaint,ci=e.unstable_now,oa=e.unstable_getCurrentPriorityLevel,bo=e.unstable_ImmediatePriority,lo=e.unstable_UserBlockingPriority,Er=e.unstable_NormalPriority,wa=e.unstable_LowPriority,qo=e.unstable_IdlePriority,Jo=null,qe=null;function xt(m){if(qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Jo,m,void 0,(m.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:gr,jn=Math.log,fn=Math.LN2;function gr(m){return m>>>=0,m===0?32:31-(jn(m)/fn|0)|0}var Qi=64,Io=4194304;function fs(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function fa(m,_){var K=m.pendingLanes;if(K===0)return 0;var Q=0,se=m.suspendedLanes,ye=m.pingedLanes,tt=K&268435455;if(tt!==0){var Ot=tt&~se;Ot!==0?Q=fs(Ot):(ye&=tt,ye!==0&&(Q=fs(ye)))}else tt=K&~se,tt!==0?Q=fs(tt):ye!==0&&(Q=fs(ye));if(Q===0)return 0;if(_!==0&&_!==Q&&(_&se)===0&&(se=Q&-Q,ye=_&-_,se>=ye||se===16&&(ye&4194240)!==0))return _;if((Q&4)!==0&&(Q|=K&16),_=m.entangledLanes,_!==0)for(m=m.entanglements,_&=Q;0<_;)K=31-_n(_),se=1<<K,Q|=m[K],_&=~se;return Q}function iA(m,_){switch(m){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vi(m,_){for(var K=m.suspendedLanes,Q=m.pingedLanes,se=m.expirationTimes,ye=m.pendingLanes;0<ye;){var tt=31-_n(ye),Ot=1<<tt,Qt=se[tt];Qt===-1?((Ot&K)===0||(Ot&Q)!==0)&&(se[tt]=iA(Ot,_)):Qt<=_&&(m.expiredLanes|=Ot),ye&=~Ot}}function zu(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function jl(){var m=Qi;return Qi<<=1,(Qi&4194240)===0&&(Qi=64),m}function nl(m){for(var _=[],K=0;31>K;K++)_.push(m);return _}function Ua(m,_,K){m.pendingLanes|=_,_!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,_=31-_n(_),m[_]=K}function JA(m,_){var K=m.pendingLanes&~_;m.pendingLanes=_,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=_,m.mutableReadLanes&=_,m.entangledLanes&=_,_=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<K;){var se=31-_n(K),ye=1<<se;_[se]=0,Q[se]=-1,m[se]=-1,K&=~ye}}function Sa(m,_){var K=m.entangledLanes|=_;for(m=m.entanglements;K;){var Q=31-_n(K),se=1<<Q;se&_|m[Q]&_&&(m[Q]|=_),K&=~se}}var bi=0;function Ao(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var Oi,xl,Oo,Wl,Di,oA=!1,sA=[],za=null,Ni=null,uo=null,$o=new Map,Vo=new Map,Hi=[],Ea="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pa(m,_){switch(m){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":$o.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(_.pointerId)}}function Ss(m,_,K,Q,se,ye){return m===null||m.nativeEvent!==ye?(m={blockedOn:_,domEventName:K,eventSystemFlags:Q,nativeEvent:ye,targetContainers:[se]},_!==null&&(_=Ro(_),_!==null&&xl(_)),m):(m.eventSystemFlags|=Q,_=m.targetContainers,se!==null&&_.indexOf(se)===-1&&_.push(se),m)}function sa(m,_,K,Q,se){switch(_){case"focusin":return za=Ss(za,m,_,K,Q,se),!0;case"dragenter":return Ni=Ss(Ni,m,_,K,Q,se),!0;case"mouseover":return uo=Ss(uo,m,_,K,Q,se),!0;case"pointerover":var ye=se.pointerId;return $o.set(ye,Ss($o.get(ye)||null,m,_,K,Q,se)),!0;case"gotpointercapture":return ye=se.pointerId,Vo.set(ye,Ss(Vo.get(ye)||null,m,_,K,Q,se)),!0}return!1}function EA(m){var _=Xs(m.target);if(_!==null){var K=Pi(_);if(K!==null){if(_=K.tag,_===13){if(_=yi(K),_!==null){m.blockedOn=_,Di(m.priority,function(){Oo(K)});return}}else if(_===3&&K.stateNode.current.memoizedState.isDehydrated){m.blockedOn=K.tag===3?K.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ii(m){if(m.blockedOn!==null)return!1;for(var _=m.targetContainers;0<_.length;){var K=Zr(m.domEventName,m.eventSystemFlags,_[0],m.nativeEvent);if(K===null){K=m.nativeEvent;var Q=new K.constructor(K.type,K);p=Q,K.target.dispatchEvent(Q),p=null}else return _=Ro(K),_!==null&&xl(_),m.blockedOn=K,!1;_.shift()}return!0}function Ho(m,_,K){Ii(m)&&K.delete(_)}function Gi(){oA=!1,za!==null&&Ii(za)&&(za=null),Ni!==null&&Ii(Ni)&&(Ni=null),uo!==null&&Ii(uo)&&(uo=null),$o.forEach(Ho),Vo.forEach(Ho)}function Sr(m,_){m.blockedOn===_&&(m.blockedOn=null,oA||(oA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gi)))}function to(m){function _(se){return Sr(se,m)}if(0<sA.length){Sr(sA[0],m);for(var K=1;K<sA.length;K++){var Q=sA[K];Q.blockedOn===m&&(Q.blockedOn=null)}}for(za!==null&&Sr(za,m),Ni!==null&&Sr(Ni,m),uo!==null&&Sr(uo,m),$o.forEach(_),Vo.forEach(_),K=0;K<Hi.length;K++)Q=Hi[K],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<Hi.length&&(K=Hi[0],K.blockedOn===null);)EA(K),K.blockedOn===null&&Hi.shift()}var J=te.ReactCurrentBatchConfig,Ee=!0;function st(m,_,K,Q){var se=bi,ye=J.transition;J.transition=null;try{bi=1,kr(m,_,K,Q)}finally{bi=se,J.transition=ye}}function Ht(m,_,K,Q){var se=bi,ye=J.transition;J.transition=null;try{bi=4,kr(m,_,K,Q)}finally{bi=se,J.transition=ye}}function kr(m,_,K,Q){if(Ee){var se=Zr(m,_,K,Q);if(se===null)Jh(m,_,Q,Qn,K),pa(m,Q);else if(sa(se,m,_,K,Q))Q.stopPropagation();else if(pa(m,Q),_&4&&-1<Ea.indexOf(m)){for(;se!==null;){var ye=Ro(se);if(ye!==null&&Oi(ye),ye=Zr(m,_,K,Q),ye===null&&Jh(m,_,Q,Qn,K),ye===se)break;se=ye}se!==null&&Q.stopPropagation()}else Jh(m,_,Q,null,K)}}var Qn=null;function Zr(m,_,K,Q){if(Qn=null,m=Ne(Q),m=Xs(m),m!==null)if(_=Pi(m),_===null)m=null;else if(K=_.tag,K===13){if(m=yi(_),m!==null)return m;m=null}else if(K===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;m=null}else _!==m&&(m=null);return Qn=m,null}function Ai(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oa()){case bo:return 1;case lo:return 4;case Er:case wa:return 16;case qo:return 536870912;default:return 16}default:return 16}}var Rr=null,ni=null,Yi=null;function xo(){if(Yi)return Yi;var m,_=ni,K=_.length,Q,se="value"in Rr?Rr.value:Rr.textContent,ye=se.length;for(m=0;m<K&&_[m]===se[m];m++);var tt=K-m;for(Q=1;Q<=tt&&_[K-Q]===se[ye-Q];Q++);return Yi=se.slice(m,1<Q?1-Q:void 0)}function si(m){var _=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&_===13&&(m=13)):m=_,m===10&&(m=13),32<=m||m===13?m:0}function fi(){return!0}function co(){return!1}function Ki(m){function _(K,Q,se,ye,tt){this._reactName=K,this._targetInst=se,this.type=Q,this.nativeEvent=ye,this.target=tt,this.currentTarget=null;for(var Ot in m)m.hasOwnProperty(Ot)&&(K=m[Ot],this[Ot]=K?K(ye):ye[Ot]);return this.isDefaultPrevented=(ye.defaultPrevented!=null?ye.defaultPrevented:ye.returnValue===!1)?fi:co,this.isPropagationStopped=co,this}return Ge(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var K=this.nativeEvent;K&&(K.preventDefault?K.preventDefault():typeof K.returnValue!="unknown"&&(K.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var K=this.nativeEvent;K&&(K.stopPropagation?K.stopPropagation():typeof K.cancelBubble!="unknown"&&(K.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),_}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ns=Ki(Fi),Na=Ge({},Fi,{view:0,detail:0}),eu=Ki(Na),Gs,dl,Ga,BA=Ge({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Ga&&(Ga&&m.type==="mousemove"?(Gs=m.screenX-Ga.screenX,dl=m.screenY-Ga.screenY):dl=Gs=0,Ga=m),Gs)},movementY:function(m){return"movementY"in m?m.movementY:dl}}),uc=Ki(BA),mu=Ge({},BA,{dataTransfer:0}),aA=Ki(mu),Ic=Ge({},Na,{relatedTarget:0}),ps=Ki(Ic),Tc=Ge({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),md=Ki(Tc),Pp=Ge({},Fi,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),qh=Ki(Pp),$h=Ge({},Fi,{data:0}),gd=Ki($h),Vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Es(m){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(m):(m=Nu[m])?!!_[m]:!1}function gu(){return Es}var uf=Ge({},Na,{key:function(m){if(m.key){var _=Vh[m.key]||m.key;if(_!=="Unidentified")return _}return m.type==="keypress"?(m=si(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?yd[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(m){return m.type==="keypress"?si(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?si(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),nh=Ki(uf),_h=Ge({},BA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kc=Ki(_h),Rp=Ge({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),Hh=Ki(Rp),vd=Ge({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pc=Ki(vd),Dp=Ge({},BA,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),cf=Ki(Dp),OA=[9,13,27,32],Zh=o&&"CompositionEvent"in window,Ml=null;o&&"documentMode"in document&&(Ml=document.documentMode);var Gu=o&&"TextEvent"in window&&!Ml,bh=o&&(!Zh||Ml&&8<Ml&&11>=Ml),Cd=" ",_d=!1;function fl(m,_){switch(m){case"keyup":return OA.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rc(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Dc=!1;function ju(m,_){switch(m){case"compositionend":return Rc(_);case"keypress":return _.which!==32?null:(_d=!0,Cd);case"textInput":return m=_.data,m===Cd&&_d?null:m;default:return null}}function qf(m,_){if(Dc)return m==="compositionend"||!Zh&&fl(m,_)?(m=xo(),Yi=ni=Rr=null,Dc=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return bh&&_.locale!=="ko"?null:_.data;default:return null}}var hf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _==="input"?!!hf[m.type]:_==="textarea"}function xd(m,_,K,Q){Ft(Q),_=fc(_,"onChange"),0<_.length&&(K=new Ns("onChange","change",null,K,Q),m.push({event:K,listeners:_}))}var rl=null,pl=null;function $f(m){Sd(m,0)}function xh(m){var _=ai(m);if(vt(_))return m}function Kp(m,_){if(m==="change")return _}var so=!1;if(o){var Ba;if(o){var Mh="oninput"in document;if(!Mh){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),Mh=typeof Md.oninput=="function"}Ba=Mh}else Ba=!1;so=Ba&&(!document.documentMode||9<document.documentMode)}function rh(){rl&&(rl.detachEvent("onpropertychange",df),pl=rl=null)}function df(m){if(m.propertyName==="value"&&xh(pl)){var _=[];xd(_,pl,m,Ne(m)),Rn($f,_)}}function ff(m,_,K){m==="focusin"?(rh(),rl=_,pl=K,rl.attachEvent("onpropertychange",df)):m==="focusout"&&rh()}function Kc(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return xh(pl)}function Wu(m,_){if(m==="click")return xh(_)}function rn(m,_){if(m==="input"||m==="change")return xh(_)}function In(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var dn=typeof Object.is=="function"?Object.is:In;function Lr(m,_){if(dn(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var K=Object.keys(m),Q=Object.keys(_);if(K.length!==Q.length)return!1;for(Q=0;Q<K.length;Q++){var se=K[Q];if(!f.call(_,se)||!dn(m[se],_[se]))return!1}return!0}function Ri(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Go(m,_){var K=Ri(m);m=0;for(var Q;K;){if(K.nodeType===3){if(Q=m+K.textContent.length,m<=_&&Q>=_)return{node:K,offset:_-m};m=Q}e:{for(;K;){if(K.nextSibling){K=K.nextSibling;break e}K=K.parentNode}K=void 0}K=Ri(K)}}function ma(m,_){return m&&_?m===_?!0:m&&m.nodeType===3?!1:_&&_.nodeType===3?ma(m,_.parentNode):"contains"in m?m.contains(_):m.compareDocumentPosition?!!(m.compareDocumentPosition(_)&16):!1:!1}function es(){for(var m=window,_=yt();_ instanceof m.HTMLIFrameElement;){try{var K=typeof _.contentWindow.location.href=="string"}catch{K=!1}if(K)m=_.contentWindow;else break;_=yt(m.document)}return _}function cc(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _&&(_==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||_==="textarea"||m.contentEditable==="true")}function pf(m){var _=es(),K=m.focusedElem,Q=m.selectionRange;if(_!==K&&K&&K.ownerDocument&&ma(K.ownerDocument.documentElement,K)){if(Q!==null&&cc(K)){if(_=Q.start,m=Q.end,m===void 0&&(m=_),"selectionStart"in K)K.selectionStart=_,K.selectionEnd=Math.min(m,K.value.length);else if(m=(_=K.ownerDocument||document)&&_.defaultView||window,m.getSelection){m=m.getSelection();var se=K.textContent.length,ye=Math.min(Q.start,se);Q=Q.end===void 0?ye:Math.min(Q.end,se),!m.extend&&ye>Q&&(se=Q,Q=ye,ye=se),se=Go(K,ye);var tt=Go(K,Q);se&&tt&&(m.rangeCount!==1||m.anchorNode!==se.node||m.anchorOffset!==se.offset||m.focusNode!==tt.node||m.focusOffset!==tt.offset)&&(_=_.createRange(),_.setStart(se.node,se.offset),m.removeAllRanges(),ye>Q?(m.addRange(_),m.extend(tt.node,tt.offset)):(_.setEnd(tt.node,tt.offset),m.addRange(_)))}}for(_=[],m=K;m=m.parentNode;)m.nodeType===1&&_.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<_.length;K++)m=_[K],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var IA=o&&"documentMode"in document&&11>=document.documentMode,lA=null,yu=null,ja=null,ga=!1;function ih(m,_,K){var Q=K.window===K?K.document:K.nodeType===9?K:K.ownerDocument;ga||lA==null||lA!==yt(Q)||(Q=lA,"selectionStart"in Q&&cc(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),ja&&Lr(ja,Q)||(ja=Q,Q=fc(yu,"onSelect"),0<Q.length&&(_=new Ns("onSelect","select",null,_,K),m.push({event:_,listeners:Q}),_.target=lA)))}function Po(m,_){var K={};return K[m.toLowerCase()]=_.toLowerCase(),K["Webkit"+m]="webkit"+_,K["Moz"+m]="moz"+_,K}var Fc={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionend:Po("Transition","TransitionEnd")},vu={},TA={};o&&(TA=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function tu(m){if(vu[m])return vu[m];if(!Fc[m])return m;var _=Fc[m],K;for(K in _)if(_.hasOwnProperty(K)&&K in TA)return vu[m]=_[K];return m}var Wa=tu("animationend"),Cu=tu("animationiteration"),AA=tu("animationstart"),wl=tu("transitionend"),hc=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ml(m,_){hc.set(m,_),s(_,[m])}for(var Zi=0;Zi<wd.length;Zi++){var Lc=wd[Zi],dc=Lc.toLowerCase(),mf=Lc[0].toUpperCase()+Lc.slice(1);ml(dc,"on"+mf)}ml(Wa,"onAnimationEnd"),ml(Cu,"onAnimationIteration"),ml(AA,"onAnimationStart"),ml("dblclick","onDoubleClick"),ml("focusin","onFocus"),ml("focusout","onBlur"),ml(wl,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oh=new Set("cancel close invalid load scroll toggle".split(" ").concat(uA));function wh(m,_,K){var Q=m.type||"unknown-event";m.currentTarget=K,ui(Q,_,void 0,m),m.currentTarget=null}function Sd(m,_){_=(_&4)!==0;for(var K=0;K<m.length;K++){var Q=m[K],se=Q.event;Q=Q.listeners;e:{var ye=void 0;if(_)for(var tt=Q.length-1;0<=tt;tt--){var Ot=Q[tt],Qt=Ot.instance,Mn=Ot.currentTarget;if(Ot=Ot.listener,Qt!==ye&&se.isPropagationStopped())break e;wh(se,Ot,Mn),ye=Qt}else for(tt=0;tt<Q.length;tt++){if(Ot=Q[tt],Qt=Ot.instance,Mn=Ot.currentTarget,Ot=Ot.listener,Qt!==ye&&se.isPropagationStopped())break e;wh(se,Ot,Mn),ye=Qt}}}if(jr)throw m=Fr,jr=!1,Fr=null,m}function us(m,_){var K=_[Ah];K===void 0&&(K=_[Ah]=new Set);var Q=m+"__bubble";K.has(Q)||(Xh(_,m,2,!1),K.add(Q))}function Uc(m,_,K){var Q=0;_&&(Q|=4),Xh(K,m,Q,_)}var _u="_reactListening"+Math.random().toString(36).slice(2);function kA(m){if(!m[_u]){m[_u]=!0,r.forEach(function(K){K!=="selectionchange"&&(oh.has(K)||Uc(K,!1,m),Uc(K,!0,m))});var _=m.nodeType===9?m:m.ownerDocument;_===null||_[_u]||(_[_u]=!0,Uc("selectionchange",!1,_))}}function Xh(m,_,K,Q){switch(Ai(_)){case 1:var se=st;break;case 4:se=Ht;break;default:se=kr}K=se.bind(null,_,K,m),se=void 0,!Tr||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(se=!0),Q?se!==void 0?m.addEventListener(_,K,{capture:!0,passive:se}):m.addEventListener(_,K,!0):se!==void 0?m.addEventListener(_,K,{passive:se}):m.addEventListener(_,K,!1)}function Jh(m,_,K,Q,se){var ye=Q;if((_&1)===0&&(_&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var tt=Q.tag;if(tt===3||tt===4){var Ot=Q.stateNode.containerInfo;if(Ot===se||Ot.nodeType===8&&Ot.parentNode===se)break;if(tt===4)for(tt=Q.return;tt!==null;){var Qt=tt.tag;if((Qt===3||Qt===4)&&(Qt=tt.stateNode.containerInfo,Qt===se||Qt.nodeType===8&&Qt.parentNode===se))return;tt=tt.return}for(;Ot!==null;){if(tt=Xs(Ot),tt===null)return;if(Qt=tt.tag,Qt===5||Qt===6){Q=ye=tt;continue e}Ot=Ot.parentNode}}Q=Q.return}Rn(function(){var Mn=ye,sr=Ne(K),yr=[];e:{var ar=hc.get(m);if(ar!==void 0){var Wr=Ns,ii=m;switch(m){case"keypress":if(si(K)===0)break e;case"keydown":case"keyup":Wr=nh;break;case"focusin":ii="focus",Wr=ps;break;case"focusout":ii="blur",Wr=ps;break;case"beforeblur":case"afterblur":Wr=ps;break;case"click":if(K.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Wr=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Wr=aA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Wr=Hh;break;case Wa:case Cu:case AA:Wr=md;break;case wl:Wr=Pc;break;case"scroll":Wr=eu;break;case"wheel":Wr=cf;break;case"copy":case"cut":case"paste":Wr=qh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Wr=kc}var hi=(_&4)!==0,Al=!hi&&m==="scroll",un=hi?ar!==null?ar+"Capture":null:ar;hi=[];for(var Xt=Mn,pn;Xt!==null;){pn=Xt;var Cr=pn.stateNode;if(pn.tag===5&&Cr!==null&&(pn=Cr,un!==null&&(Cr=dr(Xt,un),Cr!=null&&hi.push(sh(Xt,Cr,pn)))),Al)break;Xt=Xt.return}0<hi.length&&(ar=new Wr(ar,ii,null,K,sr),yr.push({event:ar,listeners:hi}))}}if((_&7)===0){e:{if(ar=m==="mouseover"||m==="pointerover",Wr=m==="mouseout"||m==="pointerout",ar&&K!==p&&(ii=K.relatedTarget||K.fromElement)&&(Xs(ii)||ii[cA]))break e;if((Wr||ar)&&(ar=sr.window===sr?sr:(ar=sr.ownerDocument)?ar.defaultView||ar.parentWindow:window,Wr?(ii=K.relatedTarget||K.toElement,Wr=Mn,ii=ii?Xs(ii):null,ii!==null&&(Al=Pi(ii),ii!==Al||ii.tag!==5&&ii.tag!==6)&&(ii=null)):(Wr=null,ii=Mn),Wr!==ii)){if(hi=uc,Cr="onMouseLeave",un="onMouseEnter",Xt="mouse",(m==="pointerout"||m==="pointerover")&&(hi=kc,Cr="onPointerLeave",un="onPointerEnter",Xt="pointer"),Al=Wr==null?ar:ai(Wr),pn=ii==null?ar:ai(ii),ar=new hi(Cr,Xt+"leave",Wr,K,sr),ar.target=Al,ar.relatedTarget=pn,Cr=null,Xs(sr)===Mn&&(hi=new hi(un,Xt+"enter",ii,K,sr),hi.target=pn,hi.relatedTarget=Al,Cr=hi),Al=Cr,Wr&&ii)t:{for(hi=Wr,un=ii,Xt=0,pn=hi;pn;pn=bu(pn))Xt++;for(pn=0,Cr=un;Cr;Cr=bu(Cr))pn++;for(;0<Xt-pn;)hi=bu(hi),Xt--;for(;0<pn-Xt;)un=bu(un),pn--;for(;Xt--;){if(hi===un||un!==null&&hi===un.alternate)break t;hi=bu(hi),un=bu(un)}hi=null}else hi=null;Wr!==null&&ms(yr,ar,Wr,hi,!1),ii!==null&&Al!==null&&ms(yr,Al,ii,hi,!0)}}e:{if(ar=Mn?ai(Mn):window,Wr=ar.nodeName&&ar.nodeName.toLowerCase(),Wr==="select"||Wr==="input"&&ar.type==="file")var pi=Kp;else if(bd(ar))if(so)pi=rn;else{pi=Kc;var ki=ff}else(Wr=ar.nodeName)&&Wr.toLowerCase()==="input"&&(ar.type==="checkbox"||ar.type==="radio")&&(pi=Wu);if(pi&&(pi=pi(m,Mn))){xd(yr,pi,K,sr);break e}ki&&ki(m,ar,Mn),m==="focusout"&&(ki=ar._wrapperState)&&ki.controlled&&ar.type==="number"&&Vt(ar,"number",ar.value)}switch(ki=Mn?ai(Mn):window,m){case"focusin":(bd(ki)||ki.contentEditable==="true")&&(lA=ki,yu=Mn,ja=null);break;case"focusout":ja=yu=lA=null;break;case"mousedown":ga=!0;break;case"contextmenu":case"mouseup":case"dragend":ga=!1,ih(yr,K,sr);break;case"selectionchange":if(IA)break;case"keydown":case"keyup":ih(yr,K,sr)}var wi;if(Zh)e:{switch(m){case"compositionstart":var qi="onCompositionStart";break e;case"compositionend":qi="onCompositionEnd";break e;case"compositionupdate":qi="onCompositionUpdate";break e}qi=void 0}else Dc?fl(m,K)&&(qi="onCompositionEnd"):m==="keydown"&&K.keyCode===229&&(qi="onCompositionStart");qi&&(bh&&K.locale!=="ko"&&(Dc||qi!=="onCompositionStart"?qi==="onCompositionEnd"&&Dc&&(wi=xo()):(Rr=sr,ni="value"in Rr?Rr.value:Rr.textContent,Dc=!0)),ki=fc(Mn,qi),0<ki.length&&(qi=new gd(qi,m,null,K,sr),yr.push({event:qi,listeners:ki}),wi?qi.data=wi:(wi=Rc(K),wi!==null&&(qi.data=wi)))),(wi=Gu?ju(m,K):qf(m,K))&&(Mn=fc(Mn,"onBeforeInput"),0<Mn.length&&(sr=new gd("onBeforeInput","beforeinput",null,K,sr),yr.push({event:sr,listeners:Mn}),sr.data=wi))}Sd(yr,_)})}function sh(m,_,K){return{instance:m,listener:_,currentTarget:K}}function fc(m,_){for(var K=_+"Capture",Q=[];m!==null;){var se=m,ye=se.stateNode;se.tag===5&&ye!==null&&(se=ye,ye=dr(m,K),ye!=null&&Q.unshift(sh(m,ye,se)),ye=dr(m,_),ye!=null&&Q.push(sh(m,ye,se))),m=m.return}return Q}function bu(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function ms(m,_,K,Q,se){for(var ye=_._reactName,tt=[];K!==null&&K!==Q;){var Ot=K,Qt=Ot.alternate,Mn=Ot.stateNode;if(Qt!==null&&Qt===Q)break;Ot.tag===5&&Mn!==null&&(Ot=Mn,se?(Qt=dr(K,ye),Qt!=null&&tt.unshift(sh(K,Qt,Ot))):se||(Qt=dr(K,ye),Qt!=null&&tt.push(sh(K,Qt,Ot)))),K=K.return}tt.length!==0&&m.push({event:_,listeners:tt})}var ya=/\r\n?/g,Ed=/\u0000|\uFFFD/g;function ah(m){return(typeof m=="string"?m:""+m).replace(ya,`
`).replace(Ed,"")}function Sh(m,_,K){if(_=ah(_),ah(m)!==_&&K)throw Error(t(425))}function Qu(){}var lh=null,PA=null;function pc(m,_){return m==="textarea"||m==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Sl=typeof setTimeout=="function"?setTimeout:void 0,xu=typeof clearTimeout=="function"?clearTimeout:void 0,Mu=typeof Promise=="function"?Promise:void 0,zc=typeof queueMicrotask=="function"?queueMicrotask:typeof Mu<"u"?function(m){return Mu.resolve(null).then(m).catch(bs)}:Sl;function bs(m){setTimeout(function(){throw m})}function Yu(m,_){var K=_,Q=0;do{var se=K.nextSibling;if(m.removeChild(K),se&&se.nodeType===8)if(K=se.data,K==="/$"){if(Q===0){m.removeChild(se),to(_);return}Q--}else K!=="$"&&K!=="$?"&&K!=="$!"||Q++;K=se}while(K);to(_)}function Qa(m){for(;m!=null;m=m.nextSibling){var _=m.nodeType;if(_===1||_===3)break;if(_===8){if(_=m.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return m}function mc(m){m=m.previousSibling;for(var _=0;m;){if(m.nodeType===8){var K=m.data;if(K==="$"||K==="$!"||K==="$?"){if(_===0)return m;_--}else K==="/$"&&_++}m=m.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),wu="__reactFiber$"+Ql,El="__reactProps$"+Ql,cA="__reactContainer$"+Ql,Ah="__reactEvents$"+Ql,ot="__reactListeners$"+Ql,Eh="__reactHandles$"+Ql;function Xs(m){var _=m[wu];if(_)return _;for(var K=m.parentNode;K;){if(_=K[cA]||K[wu]){if(K=_.alternate,_.child!==null||K!==null&&K.child!==null)for(m=mc(m);m!==null;){if(K=m[wu])return K;m=mc(m)}return _}m=K,K=m.parentNode}return null}function Ro(m){return m=m[wu]||m[cA],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function ai(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function Bs(m){return m[El]||null}var js=[],qu=-1;function il(m){return{current:m}}function Ps(m){0>qu||(m.current=js[qu],js[qu]=null,qu--)}function Os(m,_){qu++,js[qu]=m.current,m.current=_}var nu={},Ya=il(nu),gl=il(!1),yl=nu;function $u(m,_){var K=m.type.contextTypes;if(!K)return nu;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===_)return Q.__reactInternalMemoizedMaskedChildContext;var se={},ye;for(ye in K)se[ye]=_[ye];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=_,m.__reactInternalMemoizedMaskedChildContext=se),se}function Bl(m){return m=m.childContextTypes,m!=null}function Oa(){Ps(gl),Ps(Ya)}function ru(m,_,K){if(Ya.current!==nu)throw Error(t(168));Os(Ya,_),Os(gl,K)}function uh(m,_,K){var Q=m.stateNode;if(_=_.childContextTypes,typeof Q.getChildContext!="function")return K;Q=Q.getChildContext();for(var se in Q)if(!(se in _))throw Error(t(108,St(m)||"Unknown",se));return Ge({},K,Q)}function Js(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||nu,yl=Ya.current,Os(Ya,m),Os(gl,gl.current),!0}function ch(m,_,K){var Q=m.stateNode;if(!Q)throw Error(t(169));K?(m=uh(m,_,yl),Q.__reactInternalMemoizedMergedChildContext=m,Ps(gl),Ps(Ya),Os(Ya,m)):Ps(gl),Os(gl,K)}var Yl=null,gf=!1,hh=!1;function iu(m){Yl===null?Yl=[m]:Yl.push(m)}function gc(m){gf=!0,iu(m)}function ou(){if(!hh&&Yl!==null){hh=!0;var m=0,_=bi;try{var K=Yl;for(bi=1;m<K.length;m++){var Q=K[m];do Q=Q(!0);while(Q!==null)}Yl=null,gf=!1}catch(se){throw Yl!==null&&(Yl=Yl.slice(m+1)),da(bo,ou),se}finally{bi=_,hh=!1}}return null}var ql=[],Xn=0,Mo=null,Ol=0,qa=[],ea=0,Su=null,RA=1,Ti="";function yc(m,_){ql[Xn++]=Ol,ql[Xn++]=Mo,Mo=m,Ol=_}function yf(m,_,K){qa[ea++]=RA,qa[ea++]=Ti,qa[ea++]=Su,Su=m;var Q=RA;m=Ti;var se=32-_n(Q)-1;Q&=~(1<<se),K+=1;var ye=32-_n(_)+se;if(30<ye){var tt=se-se%5;ye=(Q&(1<<tt)-1).toString(32),Q>>=tt,se-=tt,RA=1<<32-_n(_)+se|K<<se|Q,Ti=ye+m}else RA=1<<ye|K<<se|Q,Ti=m}function Vu(m){m.return!==null&&(yc(m,1),yf(m,1,0))}function Nc(m){for(;m===Mo;)Mo=ql[--Xn],ql[Xn]=null,Ol=ql[--Xn],ql[Xn]=null;for(;m===Su;)Su=qa[--ea],qa[ea]=null,Ti=qa[--ea],qa[ea]=null,RA=qa[--ea],qa[ea]=null}var ol=null,va=null,gs=!1,$l=null;function vc(m,_){var K=Mc(5,null,null,0);K.elementType="DELETED",K.stateNode=_,K.return=m,_=m.deletions,_===null?(m.deletions=[K],m.flags|=16):_.push(K)}function Cc(m,_){switch(m.tag){case 5:var K=m.type;return _=_.nodeType!==1||K.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(m.stateNode=_,ol=m,va=Qa(_.firstChild),!0):!1;case 6:return _=m.pendingProps===""||_.nodeType!==3?null:_,_!==null?(m.stateNode=_,ol=m,va=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(K=Su!==null?{id:RA,overflow:Ti}:null,m.memoizedState={dehydrated:_,treeContext:K,retryLane:1073741824},K=Mc(18,null,null,0),K.stateNode=_,K.return=m,m.child=K,ol=m,va=null,!0):!1;default:return!1}}function Hu(m){return(m.mode&1)!==0&&(m.flags&128)===0}function hA(m){if(gs){var _=va;if(_){var K=_;if(!Cc(m,_)){if(Hu(m))throw Error(t(418));_=Qa(K.nextSibling);var Q=ol;_&&Cc(m,_)?vc(Q,K):(m.flags=m.flags&-4097|2,gs=!1,ol=m)}}else{if(Hu(m))throw Error(t(418));m.flags=m.flags&-4097|2,gs=!1,ol=m}}}function _c(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ol=m}function os(m){if(m!==ol)return!1;if(!gs)return _c(m),gs=!0,!1;var _;if((_=m.tag!==3)&&!(_=m.tag!==5)&&(_=m.type,_=_!=="head"&&_!=="body"&&!pc(m.type,m.memoizedProps)),_&&(_=va)){if(Hu(m))throw Bh(),Error(t(418));for(;_;)vc(m,_),_=Qa(_.nextSibling)}if(_c(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,_=0;m;){if(m.nodeType===8){var K=m.data;if(K==="/$"){if(_===0){va=Qa(m.nextSibling);break e}_--}else K!=="$"&&K!=="$!"&&K!=="$?"||_++}m=m.nextSibling}va=null}}else va=ol?Qa(m.stateNode.nextSibling):null;return!0}function Bh(){for(var m=va;m;)m=Qa(m.nextSibling)}function Eu(){va=ol=null,gs=!1}function DA(m){$l===null?$l=[m]:$l.push(m)}var vf=te.ReactCurrentBatchConfig;function ed(m,_,K){if(m=K.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(K._owner){if(K=K._owner,K){if(K.tag!==1)throw Error(t(309));var Q=K.stateNode}if(!Q)throw Error(t(147,m));var se=Q,ye=""+m;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ye?_.ref:(_=function(tt){var Ot=se.refs;tt===null?delete Ot[ye]:Ot[ye]=tt},_._stringRef=ye,_)}if(typeof m!="string")throw Error(t(284));if(!K._owner)throw Error(t(290,m))}return m}function Oh(m,_){throw m=Object.prototype.toString.call(_),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m))}function Il(m){var _=m._init;return _(m._payload)}function Zu(m){function _(un,Xt){if(m){var pn=un.deletions;pn===null?(un.deletions=[Xt],un.flags|=16):pn.push(Xt)}}function K(un,Xt){if(!m)return null;for(;Xt!==null;)_(un,Xt),Xt=Xt.sibling;return null}function Q(un,Xt){for(un=new Map;Xt!==null;)Xt.key!==null?un.set(Xt.key,Xt):un.set(Xt.index,Xt),Xt=Xt.sibling;return un}function se(un,Xt){return un=qc(un,Xt),un.index=0,un.sibling=null,un}function ye(un,Xt,pn){return un.index=pn,m?(pn=un.alternate,pn!==null?(pn=pn.index,pn<Xt?(un.flags|=2,Xt):pn):(un.flags|=2,Xt)):(un.flags|=1048576,Xt)}function tt(un){return m&&un.alternate===null&&(un.flags|=2),un}function Ot(un,Xt,pn,Cr){return Xt===null||Xt.tag!==6?(Xt=r1(pn,un.mode,Cr),Xt.return=un,Xt):(Xt=se(Xt,pn),Xt.return=un,Xt)}function Qt(un,Xt,pn,Cr){var pi=pn.type;return pi===G?sr(un,Xt,pn.props.children,Cr,pn.key):Xt!==null&&(Xt.elementType===pi||typeof pi=="object"&&pi!==null&&pi.$$typeof===rt&&Il(pi)===Xt.type)?(Cr=se(Xt,pn.props),Cr.ref=ed(un,Xt,pn),Cr.return=un,Cr):(Cr=Wp(pn.type,pn.key,pn.props,null,un.mode,Cr),Cr.ref=ed(un,Xt,pn),Cr.return=un,Cr)}function Mn(un,Xt,pn,Cr){return Xt===null||Xt.tag!==4||Xt.stateNode.containerInfo!==pn.containerInfo||Xt.stateNode.implementation!==pn.implementation?(Xt=i1(pn,un.mode,Cr),Xt.return=un,Xt):(Xt=se(Xt,pn.children||[]),Xt.return=un,Xt)}function sr(un,Xt,pn,Cr,pi){return Xt===null||Xt.tag!==7?(Xt=np(pn,un.mode,Cr,pi),Xt.return=un,Xt):(Xt=se(Xt,pn),Xt.return=un,Xt)}function yr(un,Xt,pn){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Xt=r1(""+Xt,un.mode,pn),Xt.return=un,Xt;if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case V:return pn=Wp(Xt.type,Xt.key,Xt.props,null,un.mode,pn),pn.ref=ed(un,null,Xt),pn.return=un,pn;case ne:return Xt=i1(Xt,un.mode,pn),Xt.return=un,Xt;case rt:var Cr=Xt._init;return yr(un,Cr(Xt._payload),pn)}if(Vn(Xt)||nt(Xt))return Xt=np(Xt,un.mode,pn,null),Xt.return=un,Xt;Oh(un,Xt)}return null}function ar(un,Xt,pn,Cr){var pi=Xt!==null?Xt.key:null;if(typeof pn=="string"&&pn!==""||typeof pn=="number")return pi!==null?null:Ot(un,Xt,""+pn,Cr);if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case V:return pn.key===pi?Qt(un,Xt,pn,Cr):null;case ne:return pn.key===pi?Mn(un,Xt,pn,Cr):null;case rt:return pi=pn._init,ar(un,Xt,pi(pn._payload),Cr)}if(Vn(pn)||nt(pn))return pi!==null?null:sr(un,Xt,pn,Cr,null);Oh(un,pn)}return null}function Wr(un,Xt,pn,Cr,pi){if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return un=un.get(pn)||null,Ot(Xt,un,""+Cr,pi);if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case V:return un=un.get(Cr.key===null?pn:Cr.key)||null,Qt(Xt,un,Cr,pi);case ne:return un=un.get(Cr.key===null?pn:Cr.key)||null,Mn(Xt,un,Cr,pi);case rt:var ki=Cr._init;return Wr(un,Xt,pn,ki(Cr._payload),pi)}if(Vn(Cr)||nt(Cr))return un=un.get(pn)||null,sr(Xt,un,Cr,pi,null);Oh(Xt,Cr)}return null}function ii(un,Xt,pn,Cr){for(var pi=null,ki=null,wi=Xt,qi=Xt=0,jA=null;wi!==null&&qi<pn.length;qi++){wi.index>qi?(jA=wi,wi=null):jA=wi.sibling;var Ms=ar(un,wi,pn[qi],Cr);if(Ms===null){wi===null&&(wi=jA);break}m&&wi&&Ms.alternate===null&&_(un,wi),Xt=ye(Ms,Xt,qi),ki===null?pi=Ms:ki.sibling=Ms,ki=Ms,wi=jA}if(qi===pn.length)return K(un,wi),gs&&yc(un,qi),pi;if(wi===null){for(;qi<pn.length;qi++)wi=yr(un,pn[qi],Cr),wi!==null&&(Xt=ye(wi,Xt,qi),ki===null?pi=wi:ki.sibling=wi,ki=wi);return gs&&yc(un,qi),pi}for(wi=Q(un,wi);qi<pn.length;qi++)jA=Wr(wi,un,qi,pn[qi],Cr),jA!==null&&(m&&jA.alternate!==null&&wi.delete(jA.key===null?qi:jA.key),Xt=ye(jA,Xt,qi),ki===null?pi=jA:ki.sibling=jA,ki=jA);return m&&wi.forEach(function(jd){return _(un,jd)}),gs&&yc(un,qi),pi}function hi(un,Xt,pn,Cr){var pi=nt(pn);if(typeof pi!="function")throw Error(t(150));if(pn=pi.call(pn),pn==null)throw Error(t(151));for(var ki=pi=null,wi=Xt,qi=Xt=0,jA=null,Ms=pn.next();wi!==null&&!Ms.done;qi++,Ms=pn.next()){wi.index>qi?(jA=wi,wi=null):jA=wi.sibling;var jd=ar(un,wi,Ms.value,Cr);if(jd===null){wi===null&&(wi=jA);break}m&&wi&&jd.alternate===null&&_(un,wi),Xt=ye(jd,Xt,qi),ki===null?pi=jd:ki.sibling=jd,ki=jd,wi=jA}if(Ms.done)return K(un,wi),gs&&yc(un,qi),pi;if(wi===null){for(;!Ms.done;qi++,Ms=pn.next())Ms=yr(un,Ms.value,Cr),Ms!==null&&(Xt=ye(Ms,Xt,qi),ki===null?pi=Ms:ki.sibling=Ms,ki=Ms);return gs&&yc(un,qi),pi}for(wi=Q(un,wi);!Ms.done;qi++,Ms=pn.next())Ms=Wr(wi,un,qi,Ms.value,Cr),Ms!==null&&(m&&Ms.alternate!==null&&wi.delete(Ms.key===null?qi:Ms.key),Xt=ye(Ms,Xt,qi),ki===null?pi=Ms:ki.sibling=Ms,ki=Ms);return m&&wi.forEach(function(iv){return _(un,iv)}),gs&&yc(un,qi),pi}function Al(un,Xt,pn,Cr){if(typeof pn=="object"&&pn!==null&&pn.type===G&&pn.key===null&&(pn=pn.props.children),typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case V:e:{for(var pi=pn.key,ki=Xt;ki!==null;){if(ki.key===pi){if(pi=pn.type,pi===G){if(ki.tag===7){K(un,ki.sibling),Xt=se(ki,pn.props.children),Xt.return=un,un=Xt;break e}}else if(ki.elementType===pi||typeof pi=="object"&&pi!==null&&pi.$$typeof===rt&&Il(pi)===ki.type){K(un,ki.sibling),Xt=se(ki,pn.props),Xt.ref=ed(un,ki,pn),Xt.return=un,un=Xt;break e}K(un,ki);break}else _(un,ki);ki=ki.sibling}pn.type===G?(Xt=np(pn.props.children,un.mode,Cr,pn.key),Xt.return=un,un=Xt):(Cr=Wp(pn.type,pn.key,pn.props,null,un.mode,Cr),Cr.ref=ed(un,Xt,pn),Cr.return=un,un=Cr)}return tt(un);case ne:e:{for(ki=pn.key;Xt!==null;){if(Xt.key===ki)if(Xt.tag===4&&Xt.stateNode.containerInfo===pn.containerInfo&&Xt.stateNode.implementation===pn.implementation){K(un,Xt.sibling),Xt=se(Xt,pn.children||[]),Xt.return=un,un=Xt;break e}else{K(un,Xt);break}else _(un,Xt);Xt=Xt.sibling}Xt=i1(pn,un.mode,Cr),Xt.return=un,un=Xt}return tt(un);case rt:return ki=pn._init,Al(un,Xt,ki(pn._payload),Cr)}if(Vn(pn))return ii(un,Xt,pn,Cr);if(nt(pn))return hi(un,Xt,pn,Cr);Oh(un,pn)}return typeof pn=="string"&&pn!==""||typeof pn=="number"?(pn=""+pn,Xt!==null&&Xt.tag===6?(K(un,Xt.sibling),Xt=se(Xt,pn),Xt.return=un,un=Xt):(K(un,Xt),Xt=r1(pn,un.mode,Cr),Xt.return=un,un=Xt),tt(un)):K(un,Xt)}return Al}var vr=Zu(!0),ri=Zu(!1),bc=il(null),Tl=null,Xu=null,Ws=null;function Bu(){Ws=Xu=Tl=null}function ss(m){var _=bc.current;Ps(bc),m._currentValue=_}function Ia(m,_,K){for(;m!==null;){var Q=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,Q!==null&&(Q.childLanes|=_)):Q!==null&&(Q.childLanes&_)!==_&&(Q.childLanes|=_),m===K)break;m=m.return}}function dA(m,_){Tl=m,Ws=Xu=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&_)!==0&&(Jl=!0),m.firstContext=null)}function Do(m){var _=m._currentValue;if(Ws!==m)if(m={context:m,memoizedValue:_,next:null},Xu===null){if(Tl===null)throw Error(t(308));Xu=m,Tl.dependencies={lanes:0,firstContext:m}}else Xu=Xu.next=m;return _}var as=null;function su(m){as===null?as=[m]:as.push(m)}function Ju(m,_,K,Q){var se=_.interleaved;return se===null?(K.next=K,su(_)):(K.next=se.next,se.next=K),_.interleaved=K,KA(m,Q)}function KA(m,_){m.lanes|=_;var K=m.alternate;for(K!==null&&(K.lanes|=_),K=m,m=m.return;m!==null;)m.childLanes|=_,K=m.alternate,K!==null&&(K.childLanes|=_),K=m,m=m.return;return K.tag===3?K.stateNode:null}var sl=!1;function Ih(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gc(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function fA(m,_){return{eventTime:m,lane:_,tag:0,payload:null,callback:null,next:null}}function kl(m,_,K){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,(xi&2)!==0){var se=Q.pending;return se===null?_.next=_:(_.next=se.next,se.next=_),Q.pending=_,KA(m,K)}return se=Q.interleaved,se===null?(_.next=_,su(Q)):(_.next=se.next,se.next=_),Q.interleaved=_,KA(m,K)}function O(m,_,K){if(_=_.updateQueue,_!==null&&(_=_.shared,(K&4194240)!==0)){var Q=_.lanes;Q&=m.pendingLanes,K|=Q,_.lanes=K,Sa(m,K)}}function a(m,_){var K=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,K===Q)){var se=null,ye=null;if(K=K.firstBaseUpdate,K!==null){do{var tt={eventTime:K.eventTime,lane:K.lane,tag:K.tag,payload:K.payload,callback:K.callback,next:null};ye===null?se=ye=tt:ye=ye.next=tt,K=K.next}while(K!==null);ye===null?se=ye=_:ye=ye.next=_}else se=ye=_;K={baseState:Q.baseState,firstBaseUpdate:se,lastBaseUpdate:ye,shared:Q.shared,effects:Q.effects},m.updateQueue=K;return}m=K.lastBaseUpdate,m===null?K.firstBaseUpdate=_:m.next=_,K.lastBaseUpdate=_}function c(m,_,K,Q){var se=m.updateQueue;sl=!1;var ye=se.firstBaseUpdate,tt=se.lastBaseUpdate,Ot=se.shared.pending;if(Ot!==null){se.shared.pending=null;var Qt=Ot,Mn=Qt.next;Qt.next=null,tt===null?ye=Mn:tt.next=Mn,tt=Qt;var sr=m.alternate;sr!==null&&(sr=sr.updateQueue,Ot=sr.lastBaseUpdate,Ot!==tt&&(Ot===null?sr.firstBaseUpdate=Mn:Ot.next=Mn,sr.lastBaseUpdate=Qt))}if(ye!==null){var yr=se.baseState;tt=0,sr=Mn=Qt=null,Ot=ye;do{var ar=Ot.lane,Wr=Ot.eventTime;if((Q&ar)===ar){sr!==null&&(sr=sr.next={eventTime:Wr,lane:0,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null});e:{var ii=m,hi=Ot;switch(ar=_,Wr=K,hi.tag){case 1:if(ii=hi.payload,typeof ii=="function"){yr=ii.call(Wr,yr,ar);break e}yr=ii;break e;case 3:ii.flags=ii.flags&-65537|128;case 0:if(ii=hi.payload,ar=typeof ii=="function"?ii.call(Wr,yr,ar):ii,ar==null)break e;yr=Ge({},yr,ar);break e;case 2:sl=!0}}Ot.callback!==null&&Ot.lane!==0&&(m.flags|=64,ar=se.effects,ar===null?se.effects=[Ot]:ar.push(Ot))}else Wr={eventTime:Wr,lane:ar,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null},sr===null?(Mn=sr=Wr,Qt=yr):sr=sr.next=Wr,tt|=ar;if(Ot=Ot.next,Ot===null){if(Ot=se.shared.pending,Ot===null)break;ar=Ot,Ot=ar.next,ar.next=null,se.lastBaseUpdate=ar,se.shared.pending=null}}while(!0);if(sr===null&&(Qt=yr),se.baseState=Qt,se.firstBaseUpdate=Mn,se.lastBaseUpdate=sr,_=se.shared.interleaved,_!==null){se=_;do tt|=se.lane,se=se.next;while(se!==_)}else ye===null&&(se.shared.lanes=0);GA|=tt,m.lanes=tt,m.memoizedState=yr}}function v(m,_,K){if(m=_.effects,_.effects=null,m!==null)for(_=0;_<m.length;_++){var Q=m[_],se=Q.callback;if(se!==null){if(Q.callback=null,Q=K,typeof se!="function")throw Error(t(191,se));se.call(Q)}}}var M={},I=il(M),z=il(M),Y=il(M);function ee(m){if(m===M)throw Error(t(174));return m}function Ae(m,_){switch(Os(Y,_),Os(z,m),Os(I,M),m=_.nodeType,m){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:We(null,"");break;default:m=m===8?_.parentNode:_,_=m.namespaceURI||null,m=m.tagName,_=We(_,m)}Ps(I),Os(I,_)}function de(){Ps(I),Ps(z),Ps(Y)}function Oe(m){ee(Y.current);var _=ee(I.current),K=We(_,m.type);_!==K&&(Os(z,m),Os(I,K))}function Be(m){z.current===m&&(Ps(I),Ps(z))}var ze=il(0);function He(m){for(var _=m;_!==null;){if(_.tag===13){var K=_.memoizedState;if(K!==null&&(K=K.dehydrated,K===null||K.data==="$?"||K.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var ft=[];function dt(){for(var m=0;m<ft.length;m++)ft[m]._workInProgressVersionPrimary=null;ft.length=0}var pt=te.ReactCurrentDispatcher,wt=te.ReactCurrentBatchConfig,Tt=0,Mt=null,kt=null,Kt=null,zt=!1,sn=!1,bn=0,en=0;function ln(){throw Error(t(321))}function Cn(m,_){if(_===null)return!1;for(var K=0;K<_.length&&K<m.length;K++)if(!dn(m[K],_[K]))return!1;return!0}function Ar(m,_,K,Q,se,ye){if(Tt=ye,Mt=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,pt.current=m===null||m.memoizedState===null?Iu:yA,m=K(Q,se),sn){ye=0;do{if(sn=!1,bn=0,25<=ye)throw Error(t(301));ye+=1,Kt=kt=null,_.updateQueue=null,pt.current=Pa,m=K(Q,se)}while(sn)}if(pt.current=Wc,_=kt!==null&&kt.next!==null,Tt=0,Kt=kt=Mt=null,zt=!1,_)throw Error(t(300));return m}function cr(){var m=bn!==0;return bn=0,m}function kn(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Mt.memoizedState=Kt=m:Kt=Kt.next=m,Kt}function Br(){if(kt===null){var m=Mt.alternate;m=m!==null?m.memoizedState:null}else m=kt.next;var _=Kt===null?Mt.memoizedState:Kt.next;if(_!==null)Kt=_,kt=m;else{if(m===null)throw Error(t(310));kt=m,m={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Kt===null?Mt.memoizedState=Kt=m:Kt=Kt.next=m}return Kt}function Hr(m,_){return typeof _=="function"?_(m):_}function Xi(m){var _=Br(),K=_.queue;if(K===null)throw Error(t(311));K.lastRenderedReducer=m;var Q=kt,se=Q.baseQueue,ye=K.pending;if(ye!==null){if(se!==null){var tt=se.next;se.next=ye.next,ye.next=tt}Q.baseQueue=se=ye,K.pending=null}if(se!==null){ye=se.next,Q=Q.baseState;var Ot=tt=null,Qt=null,Mn=ye;do{var sr=Mn.lane;if((Tt&sr)===sr)Qt!==null&&(Qt=Qt.next={lane:0,action:Mn.action,hasEagerState:Mn.hasEagerState,eagerState:Mn.eagerState,next:null}),Q=Mn.hasEagerState?Mn.eagerState:m(Q,Mn.action);else{var yr={lane:sr,action:Mn.action,hasEagerState:Mn.hasEagerState,eagerState:Mn.eagerState,next:null};Qt===null?(Ot=Qt=yr,tt=Q):Qt=Qt.next=yr,Mt.lanes|=sr,GA|=sr}Mn=Mn.next}while(Mn!==null&&Mn!==ye);Qt===null?tt=Q:Qt.next=Ot,dn(Q,_.memoizedState)||(Jl=!0),_.memoizedState=Q,_.baseState=tt,_.baseQueue=Qt,K.lastRenderedState=Q}if(m=K.interleaved,m!==null){se=m;do ye=se.lane,Mt.lanes|=ye,GA|=ye,se=se.next;while(se!==m)}else se===null&&(K.lanes=0);return[_.memoizedState,K.dispatch]}function ts(m){var _=Br(),K=_.queue;if(K===null)throw Error(t(311));K.lastRenderedReducer=m;var Q=K.dispatch,se=K.pending,ye=_.memoizedState;if(se!==null){K.pending=null;var tt=se=se.next;do ye=m(ye,tt.action),tt=tt.next;while(tt!==se);dn(ye,_.memoizedState)||(Jl=!0),_.memoizedState=ye,_.baseQueue===null&&(_.baseState=ye),K.lastRenderedState=ye}return[ye,Q]}function Ko(){}function jo(m,_){var K=Mt,Q=Br(),se=_(),ye=!dn(Q.memoizedState,se);if(ye&&(Q.memoizedState=se,Jl=!0),Q=Q.queue,FA(ji.bind(null,K,Q,m),[m]),Q.getSnapshot!==_||ye||Kt!==null&&Kt.memoizedState.tag&1){if(K.flags|=2048,ao(9,ho.bind(null,K,Q,se,_),void 0,null),Qo===null)throw Error(t(349));(Tt&30)!==0||Rs(K,_,se)}return se}function Rs(m,_,K){m.flags|=16384,m={getSnapshot:_,value:K},_=Mt.updateQueue,_===null?(_={lastEffect:null,stores:null},Mt.updateQueue=_,_.stores=[m]):(K=_.stores,K===null?_.stores=[m]:K.push(m))}function ho(m,_,K,Q){_.value=K,_.getSnapshot=Q,aa(_)&&Ta(m)}function ji(m,_,K){return K(function(){aa(_)&&Ta(m)})}function aa(m){var _=m.getSnapshot;m=m.value;try{var K=_();return!dn(m,K)}catch{return!0}}function Ta(m){var _=KA(m,1);_!==null&&ph(_,m,1,-1)}function Ca(m){var _=kn();return typeof m=="function"&&(m=m()),_.memoizedState=_.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:m},_.queue=m,m=m.dispatch=Bd.bind(null,Mt,m),[_.memoizedState,m]}function ao(m,_,K,Q){return m={tag:m,create:_,destroy:K,deps:Q,next:null},_=Mt.updateQueue,_===null?(_={lastEffect:null,stores:null},Mt.updateQueue=_,_.lastEffect=m.next=m):(K=_.lastEffect,K===null?_.lastEffect=m.next=m:(Q=K.next,K.next=m,m.next=Q,_.lastEffect=m)),m}function Vl(){return Br().memoizedState}function Hl(m,_,K,Q){var se=kn();Mt.flags|=m,se.memoizedState=ao(1|_,K,void 0,Q===void 0?null:Q)}function pA(m,_,K,Q){var se=Br();Q=Q===void 0?null:Q;var ye=void 0;if(kt!==null){var tt=kt.memoizedState;if(ye=tt.destroy,Q!==null&&Cn(Q,tt.deps)){se.memoizedState=ao(_,K,ye,Q);return}}Mt.flags|=m,se.memoizedState=ao(1|_,K,ye,Q)}function Ou(m,_){return Hl(8390656,8,m,_)}function FA(m,_){return pA(2048,8,m,_)}function au(m,_){return pA(4,2,m,_)}function Zl(m,_){return pA(4,4,m,_)}function mA(m,_){if(typeof _=="function")return m=m(),_(m),function(){_(null)};if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function ec(m,_,K){return K=K!=null?K.concat([m]):null,pA(4,4,mA.bind(null,_,m),K)}function Xl(){}function jc(m,_){var K=Br();_=_===void 0?null:_;var Q=K.memoizedState;return Q!==null&&_!==null&&Cn(_,Q[1])?Q[0]:(K.memoizedState=[m,_],m)}function ka(m,_){var K=Br();_=_===void 0?null:_;var Q=K.memoizedState;return Q!==null&&_!==null&&Cn(_,Q[1])?Q[0]:(m=m(),K.memoizedState=[m,_],m)}function Qs(m,_,K){return(Tt&21)===0?(m.baseState&&(m.baseState=!1,Jl=!0),m.memoizedState=K):(dn(K,_)||(K=jl(),Mt.lanes|=K,GA|=K,m.baseState=!0),_)}function Pl(m,_){var K=bi;bi=K!==0&&4>K?K:4,m(!0);var Q=wt.transition;wt.transition={};try{m(!1),_()}finally{bi=K,wt.transition=Q}}function ys(){return Br().memoizedState}function Cf(m,_,K){var Q=Sf(m);if(K={lane:Q,action:K,hasEagerState:!1,eagerState:null,next:null},Od(m))gA(_,K);else if(K=Ju(m,_,K,Q),K!==null){var se=nc();ph(K,m,Q,se),LA(K,_,Q)}}function Bd(m,_,K){var Q=Sf(m),se={lane:Q,action:K,hasEagerState:!1,eagerState:null,next:null};if(Od(m))gA(_,se);else{var ye=m.alternate;if(m.lanes===0&&(ye===null||ye.lanes===0)&&(ye=_.lastRenderedReducer,ye!==null))try{var tt=_.lastRenderedState,Ot=ye(tt,K);if(se.hasEagerState=!0,se.eagerState=Ot,dn(Ot,tt)){var Qt=_.interleaved;Qt===null?(se.next=se,su(_)):(se.next=Qt.next,Qt.next=se),_.interleaved=se;return}}catch{}finally{}K=Ju(m,_,se,Q),K!==null&&(se=nc(),ph(K,m,Q,se),LA(K,_,Q))}}function Od(m){var _=m.alternate;return m===Mt||_!==null&&_===Mt}function gA(m,_){sn=zt=!0;var K=m.pending;K===null?_.next=_:(_.next=K.next,K.next=_),m.pending=_}function LA(m,_,K){if((K&4194240)!==0){var Q=_.lanes;Q&=m.pendingLanes,K|=Q,_.lanes=K,Sa(m,K)}}var Wc={readContext:Do,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},Iu={readContext:Do,useCallback:function(m,_){return kn().memoizedState=[m,_===void 0?null:_],m},useContext:Do,useEffect:Ou,useImperativeHandle:function(m,_,K){return K=K!=null?K.concat([m]):null,Hl(4194308,4,mA.bind(null,_,m),K)},useLayoutEffect:function(m,_){return Hl(4194308,4,m,_)},useInsertionEffect:function(m,_){return Hl(4,2,m,_)},useMemo:function(m,_){var K=kn();return _=_===void 0?null:_,m=m(),K.memoizedState=[m,_],m},useReducer:function(m,_,K){var Q=kn();return _=K!==void 0?K(_):_,Q.memoizedState=Q.baseState=_,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:_},Q.queue=m,m=m.dispatch=Cf.bind(null,Mt,m),[Q.memoizedState,m]},useRef:function(m){var _=kn();return m={current:m},_.memoizedState=m},useState:Ca,useDebugValue:Xl,useDeferredValue:function(m){return kn().memoizedState=m},useTransition:function(){var m=Ca(!1),_=m[0];return m=Pl.bind(null,m[1]),kn().memoizedState=m,[_,m]},useMutableSource:function(){},useSyncExternalStore:function(m,_,K){var Q=Mt,se=kn();if(gs){if(K===void 0)throw Error(t(407));K=K()}else{if(K=_(),Qo===null)throw Error(t(349));(Tt&30)!==0||Rs(Q,_,K)}se.memoizedState=K;var ye={value:K,getSnapshot:_};return se.queue=ye,Ou(ji.bind(null,Q,ye,m),[m]),Q.flags|=2048,ao(9,ho.bind(null,Q,ye,K,_),void 0,null),K},useId:function(){var m=kn(),_=Qo.identifierPrefix;if(gs){var K=Ti,Q=RA;K=(Q&~(1<<32-_n(Q)-1)).toString(32)+K,_=":"+_+"R"+K,K=bn++,0<K&&(_+="H"+K.toString(32)),_+=":"}else K=en++,_=":"+_+"r"+K.toString(32)+":";return m.memoizedState=_},unstable_isNewReconciler:!1},yA={readContext:Do,useCallback:jc,useContext:Do,useEffect:FA,useImperativeHandle:ec,useInsertionEffect:au,useLayoutEffect:Zl,useMemo:ka,useReducer:Xi,useRef:Vl,useState:function(){return Xi(Hr)},useDebugValue:Xl,useDeferredValue:function(m){var _=Br();return Qs(_,kt.memoizedState,m)},useTransition:function(){var m=Xi(Hr)[0],_=Br().memoizedState;return[m,_]},useMutableSource:Ko,useSyncExternalStore:jo,useId:ys,unstable_isNewReconciler:!1},Pa={readContext:Do,useCallback:jc,useContext:Do,useEffect:FA,useImperativeHandle:ec,useInsertionEffect:au,useLayoutEffect:Zl,useMemo:ka,useReducer:ts,useRef:Vl,useState:function(){return ts(Hr)},useDebugValue:Xl,useDeferredValue:function(m){var _=Br();return kt===null?_.memoizedState=m:Qs(_,kt.memoizedState,m)},useTransition:function(){var m=ts(Hr)[0],_=Br().memoizedState;return[m,_]},useMutableSource:Ko,useSyncExternalStore:jo,useId:ys,unstable_isNewReconciler:!1};function ta(m,_){if(m&&m.defaultProps){_=Ge({},_),m=m.defaultProps;for(var K in m)_[K]===void 0&&(_[K]=m[K]);return _}return _}function Th(m,_,K,Q){_=m.memoizedState,K=K(Q,_),K=K==null?_:Ge({},_,K),m.memoizedState=K,m.lanes===0&&(m.updateQueue.baseState=K)}var Tu={isMounted:function(m){return(m=m._reactInternals)?Pi(m)===m:!1},enqueueSetState:function(m,_,K){m=m._reactInternals;var Q=nc(),se=Sf(m),ye=fA(Q,se);ye.payload=_,K!=null&&(ye.callback=K),_=kl(m,ye,se),_!==null&&(ph(_,m,se,Q),O(_,m,se))},enqueueReplaceState:function(m,_,K){m=m._reactInternals;var Q=nc(),se=Sf(m),ye=fA(Q,se);ye.tag=1,ye.payload=_,K!=null&&(ye.callback=K),_=kl(m,ye,se),_!==null&&(ph(_,m,se,Q),O(_,m,se))},enqueueForceUpdate:function(m,_){m=m._reactInternals;var K=nc(),Q=Sf(m),se=fA(K,Q);se.tag=2,_!=null&&(se.callback=_),_=kl(m,se,Q),_!==null&&(ph(_,m,Q,K),O(_,m,Q))}};function Id(m,_,K,Q,se,ye,tt){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ye,tt):_.prototype&&_.prototype.isPureReactComponent?!Lr(K,Q)||!Lr(se,ye):!0}function td(m,_,K){var Q=!1,se=nu,ye=_.contextType;return typeof ye=="object"&&ye!==null?ye=Do(ye):(se=Bl(_)?yl:Ya.current,Q=_.contextTypes,ye=(Q=Q!=null)?$u(m,se):nu),_=new _(K,ye),m.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Tu,m.stateNode=_,_._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=se,m.__reactInternalMemoizedMaskedChildContext=ye),_}function nd(m,_,K,Q){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(K,Q),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(K,Q),_.state!==m&&Tu.enqueueReplaceState(_,_.state,null)}function Fp(m,_,K,Q){var se=m.stateNode;se.props=K,se.state=m.memoizedState,se.refs={},Ih(m);var ye=_.contextType;typeof ye=="object"&&ye!==null?se.context=Do(ye):(ye=Bl(_)?yl:Ya.current,se.context=$u(m,ye)),se.state=m.memoizedState,ye=_.getDerivedStateFromProps,typeof ye=="function"&&(Th(m,_,ye,K),se.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(_=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),_!==se.state&&Tu.enqueueReplaceState(se,se.state,null),c(m,K,se,Q),se.state=m.memoizedState),typeof se.componentDidMount=="function"&&(m.flags|=4194308)}function ku(m,_){try{var K="",Q=_;do K+=ut(Q),Q=Q.return;while(Q);var se=K}catch(ye){se=`
Error generating stack: `+ye.message+`
`+ye.stack}return{value:m,source:_,stack:se,digest:null}}function dh(m,_,K){return{value:m,source:null,stack:K??null,digest:_??null}}function Td(m,_){try{console.error(_.value)}catch(K){setTimeout(function(){throw K})}}var gm=typeof WeakMap=="function"?WeakMap:Map;function kh(m,_,K){K=fA(-1,K),K.tag=3,K.payload={element:null};var Q=_.value;return K.callback=function(){_m||(_m=!0,Gp=Q),Td(m,_)},K}function _f(m,_,K){K=fA(-1,K),K.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var se=_.value;K.payload=function(){return Q(se)},K.callback=function(){Td(m,_)}}var ye=m.stateNode;return ye!==null&&typeof ye.componentDidCatch=="function"&&(K.callback=function(){Td(m,_),typeof Q!="function"&&(Ud===null?Ud=new Set([this]):Ud.add(this));var tt=_.stack;this.componentDidCatch(_.value,{componentStack:tt!==null?tt:""})}),K}function Vf(m,_,K){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new gm;var se=new Set;Q.set(_,se)}else se=Q.get(_),se===void 0&&(se=new Set,Q.set(_,se));se.has(K)||(se.add(K),m=rv.bind(null,m,_,K),_.then(m,m))}function Lp(m){do{var _;if((_=m.tag===13)&&(_=m.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return m;m=m.return}while(m!==null);return null}function rd(m,_,K,Q,se){return(m.mode&1)===0?(m===_?m.flags|=65536:(m.flags|=128,K.flags|=131072,K.flags&=-52805,K.tag===1&&(K.alternate===null?K.tag=17:(_=fA(-1,1),_.tag=2,kl(K,_,1))),K.lanes|=1),m):(m.flags|=65536,m.lanes=se,m)}var kd=te.ReactCurrentOwner,Jl=!1;function Rl(m,_,K,Q){_.child=m===null?ri(_,null,K,Q):vr(_,m.child,K,Q)}function ym(m,_,K,Q,se){K=K.render;var ye=_.ref;return dA(_,se),Q=Ar(m,_,K,Q,ye,se),K=cr(),m!==null&&!Jl?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~se,vA(m,_,se)):(gs&&K&&Vu(_),_.flags|=1,Rl(m,_,Q,se),_.child)}function Up(m,_,K,Q,se){if(m===null){var ye=K.type;return typeof ye=="function"&&!r0(ye)&&ye.defaultProps===void 0&&K.compare===null&&K.defaultProps===void 0?(_.tag=15,_.type=ye,wo(m,_,ye,Q,se)):(m=Wp(K.type,null,Q,_,_.mode,se),m.ref=_.ref,m.return=_,_.child=m)}if(ye=m.child,(m.lanes&se)===0){var tt=ye.memoizedProps;if(K=K.compare,K=K!==null?K:Lr,K(tt,Q)&&m.ref===_.ref)return vA(m,_,se)}return _.flags|=1,m=qc(ye,Q),m.ref=_.ref,m.return=_,_.child=m}function wo(m,_,K,Q,se){if(m!==null){var ye=m.memoizedProps;if(Lr(ye,Q)&&m.ref===_.ref)if(Jl=!1,_.pendingProps=Q=ye,(m.lanes&se)!==0)(m.flags&131072)!==0&&(Jl=!0);else return _.lanes=m.lanes,vA(m,_,se)}return fh(m,_,K,Q,se)}function vm(m,_,K){var Q=_.pendingProps,se=Q.children,ye=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(lu,xs),xs|=K;else{if((K&1073741824)===0)return m=ye!==null?ye.baseLanes|K:K,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:m,cachePool:null,transitions:null},_.updateQueue=null,Os(lu,xs),xs|=m,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ye!==null?ye.baseLanes:K,Os(lu,xs),xs|=Q}else ye!==null?(Q=ye.baseLanes|K,_.memoizedState=null):Q=K,Os(lu,xs),xs|=Q;return Rl(m,_,se,K),_.child}function Ph(m,_){var K=_.ref;(m===null&&K!==null||m!==null&&m.ref!==K)&&(_.flags|=512,_.flags|=2097152)}function fh(m,_,K,Q,se){var ye=Bl(K)?yl:Ya.current;return ye=$u(_,ye),dA(_,se),K=Ar(m,_,K,Q,ye,se),Q=cr(),m!==null&&!Jl?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~se,vA(m,_,se)):(gs&&Q&&Vu(_),_.flags|=1,Rl(m,_,K,se),_.child)}function UA(m,_,K,Q,se){if(Bl(K)){var ye=!0;Js(_)}else ye=!1;if(dA(_,se),_.stateNode===null)zA(m,_),td(_,K,Q),Fp(_,K,Q,se),Q=!0;else if(m===null){var tt=_.stateNode,Ot=_.memoizedProps;tt.props=Ot;var Qt=tt.context,Mn=K.contextType;typeof Mn=="object"&&Mn!==null?Mn=Do(Mn):(Mn=Bl(K)?yl:Ya.current,Mn=$u(_,Mn));var sr=K.getDerivedStateFromProps,yr=typeof sr=="function"||typeof tt.getSnapshotBeforeUpdate=="function";yr||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Ot!==Q||Qt!==Mn)&&nd(_,tt,Q,Mn),sl=!1;var ar=_.memoizedState;tt.state=ar,c(_,Q,tt,se),Qt=_.memoizedState,Ot!==Q||ar!==Qt||gl.current||sl?(typeof sr=="function"&&(Th(_,K,sr,Q),Qt=_.memoizedState),(Ot=sl||Id(_,K,Ot,Q,ar,Qt,Mn))?(yr||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(_.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=Q,_.memoizedState=Qt),tt.props=Q,tt.state=Qt,tt.context=Mn,Q=Ot):(typeof tt.componentDidMount=="function"&&(_.flags|=4194308),Q=!1)}else{tt=_.stateNode,Gc(m,_),Ot=_.memoizedProps,Mn=_.type===_.elementType?Ot:ta(_.type,Ot),tt.props=Mn,yr=_.pendingProps,ar=tt.context,Qt=K.contextType,typeof Qt=="object"&&Qt!==null?Qt=Do(Qt):(Qt=Bl(K)?yl:Ya.current,Qt=$u(_,Qt));var Wr=K.getDerivedStateFromProps;(sr=typeof Wr=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Ot!==yr||ar!==Qt)&&nd(_,tt,Q,Qt),sl=!1,ar=_.memoizedState,tt.state=ar,c(_,Q,tt,se);var ii=_.memoizedState;Ot!==yr||ar!==ii||gl.current||sl?(typeof Wr=="function"&&(Th(_,K,Wr,Q),ii=_.memoizedState),(Mn=sl||Id(_,K,Mn,Q,ar,ii,Qt)||!1)?(sr||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(Q,ii,Qt),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(Q,ii,Qt)),typeof tt.componentDidUpdate=="function"&&(_.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof tt.componentDidUpdate!="function"||Ot===m.memoizedProps&&ar===m.memoizedState||(_.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&ar===m.memoizedState||(_.flags|=1024),_.memoizedProps=Q,_.memoizedState=ii),tt.props=Q,tt.state=ii,tt.context=Qt,Q=Mn):(typeof tt.componentDidUpdate!="function"||Ot===m.memoizedProps&&ar===m.memoizedState||(_.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&ar===m.memoizedState||(_.flags|=1024),Q=!1)}return Pd(m,_,K,Q,ye,se)}function Pd(m,_,K,Q,se,ye){Ph(m,_);var tt=(_.flags&128)!==0;if(!Q&&!tt)return se&&ch(_,K,!1),vA(m,_,ye);Q=_.stateNode,kd.current=_;var Ot=tt&&typeof K.getDerivedStateFromError!="function"?null:Q.render();return _.flags|=1,m!==null&&tt?(_.child=vr(_,m.child,null,ye),_.child=vr(_,null,Ot,ye)):Rl(m,_,Ot,ye),_.memoizedState=Q.state,se&&ch(_,K,!0),_.child}function Hf(m){var _=m.stateNode;_.pendingContext?ru(m,_.pendingContext,_.pendingContext!==_.context):_.context&&ru(m,_.context,!1),Ae(m,_.containerInfo)}function Qc(m,_,K,Q,se){return Eu(),DA(se),_.flags|=256,Rl(m,_,K,Q),_.child}var bf={dehydrated:null,treeContext:null,retryLane:0};function Rd(m){return{baseLanes:m,cachePool:null,transitions:null}}function Dd(m,_,K){var Q=_.pendingProps,se=ze.current,ye=!1,tt=(_.flags&128)!==0,Ot;if((Ot=tt)||(Ot=m!==null&&m.memoizedState===null?!1:(se&2)!==0),Ot?(ye=!0,_.flags&=-129):(m===null||m.memoizedState!==null)&&(se|=1),Os(ze,se&1),m===null)return hA(_),m=_.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((_.mode&1)===0?_.lanes=1:m.data==="$!"?_.lanes=8:_.lanes=1073741824,null):(tt=Q.children,m=Q.fallback,ye?(Q=_.mode,ye=_.child,tt={mode:"hidden",children:tt},(Q&1)===0&&ye!==null?(ye.childLanes=0,ye.pendingProps=tt):ye=i0(tt,Q,0,null),m=np(m,Q,K,null),ye.return=_,m.return=_,ye.sibling=m,_.child=ye,_.child.memoizedState=Rd(K),_.memoizedState=bf,m):id(_,tt));if(se=m.memoizedState,se!==null&&(Ot=se.dehydrated,Ot!==null))return Mi(m,_,tt,Q,Ot,se,K);if(ye){ye=Q.fallback,tt=_.mode,se=m.child,Ot=se.sibling;var Qt={mode:"hidden",children:Q.children};return(tt&1)===0&&_.child!==se?(Q=_.child,Q.childLanes=0,Q.pendingProps=Qt,_.deletions=null):(Q=qc(se,Qt),Q.subtreeFlags=se.subtreeFlags&14680064),Ot!==null?ye=qc(Ot,ye):(ye=np(ye,tt,K,null),ye.flags|=2),ye.return=_,Q.return=_,Q.sibling=ye,_.child=Q,Q=ye,ye=_.child,tt=m.child.memoizedState,tt=tt===null?Rd(K):{baseLanes:tt.baseLanes|K,cachePool:null,transitions:tt.transitions},ye.memoizedState=tt,ye.childLanes=m.childLanes&~K,_.memoizedState=bf,Q}return ye=m.child,m=ye.sibling,Q=qc(ye,{mode:"visible",children:Q.children}),(_.mode&1)===0&&(Q.lanes=K),Q.return=_,Q.sibling=null,m!==null&&(K=_.deletions,K===null?(_.deletions=[m],_.flags|=16):K.push(m)),_.child=Q,_.memoizedState=null,Q}function id(m,_){return _=i0({mode:"visible",children:_},m.mode,0,null),_.return=m,m.child=_}function Rh(m,_,K,Q){return Q!==null&&DA(Q),vr(_,m.child,null,K),m=id(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function Mi(m,_,K,Q,se,ye,tt){if(K)return _.flags&256?(_.flags&=-257,Q=dh(Error(t(422))),Rh(m,_,tt,Q)):_.memoizedState!==null?(_.child=m.child,_.flags|=128,null):(ye=Q.fallback,se=_.mode,Q=i0({mode:"visible",children:Q.children},se,0,null),ye=np(ye,se,tt,null),ye.flags|=2,Q.return=_,ye.return=_,Q.sibling=ye,_.child=Q,(_.mode&1)!==0&&vr(_,m.child,null,tt),_.child.memoizedState=Rd(tt),_.memoizedState=bf,ye);if((_.mode&1)===0)return Rh(m,_,tt,null);if(se.data==="$!"){if(Q=se.nextSibling&&se.nextSibling.dataset,Q)var Ot=Q.dgst;return Q=Ot,ye=Error(t(419)),Q=dh(ye,Q,void 0),Rh(m,_,tt,Q)}if(Ot=(tt&m.childLanes)!==0,Jl||Ot){if(Q=Qo,Q!==null){switch(tt&-tt){case 4:se=2;break;case 16:se=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:se=32;break;case 536870912:se=268435456;break;default:se=0}se=(se&(Q.suspendedLanes|tt))!==0?0:se,se!==0&&se!==ye.retryLane&&(ye.retryLane=se,KA(m,se),ph(Q,m,se,-1))}return e0(),Q=dh(Error(t(421))),Rh(m,_,tt,Q)}return se.data==="$?"?(_.flags|=128,_.child=m.child,_=Em.bind(null,m),se._reactRetry=_,null):(m=ye.treeContext,va=Qa(se.nextSibling),ol=_,gs=!0,$l=null,m!==null&&(qa[ea++]=RA,qa[ea++]=Ti,qa[ea++]=Su,RA=m.id,Ti=m.overflow,Su=_),_=id(_,Q.children),_.flags|=4096,_)}function Kd(m,_,K){m.lanes|=_;var Q=m.alternate;Q!==null&&(Q.lanes|=_),Ia(m.return,_,K)}function Wo(m,_,K,Q,se){var ye=m.memoizedState;ye===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:Q,tail:K,tailMode:se}:(ye.isBackwards=_,ye.rendering=null,ye.renderingStartTime=0,ye.last=Q,ye.tail=K,ye.tailMode=se)}function tc(m,_,K){var Q=_.pendingProps,se=Q.revealOrder,ye=Q.tail;if(Rl(m,_,Q.children,K),Q=ze.current,(Q&2)!==0)Q=Q&1|2,_.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Kd(m,K,_);else if(m.tag===19)Kd(m,K,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(Os(ze,Q),(_.mode&1)===0)_.memoizedState=null;else switch(se){case"forwards":for(K=_.child,se=null;K!==null;)m=K.alternate,m!==null&&He(m)===null&&(se=K),K=K.sibling;K=se,K===null?(se=_.child,_.child=null):(se=K.sibling,K.sibling=null),Wo(_,!1,se,K,ye);break;case"backwards":for(K=null,se=_.child,_.child=null;se!==null;){if(m=se.alternate,m!==null&&He(m)===null){_.child=se;break}m=se.sibling,se.sibling=K,K=se,se=m}Wo(_,!0,K,null,ye);break;case"together":Wo(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function zA(m,_){(_.mode&1)===0&&m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2)}function vA(m,_,K){if(m!==null&&(_.dependencies=m.dependencies),GA|=_.lanes,(K&_.childLanes)===0)return null;if(m!==null&&_.child!==m.child)throw Error(t(153));if(_.child!==null){for(m=_.child,K=qc(m,m.pendingProps),_.child=K,K.return=_;m.sibling!==null;)m=m.sibling,K=K.sibling=qc(m,m.pendingProps),K.return=_;K.sibling=null}return _.child}function zp(m,_,K){switch(_.tag){case 3:Hf(_),Eu();break;case 5:Oe(_);break;case 1:Bl(_.type)&&Js(_);break;case 4:Ae(_,_.stateNode.containerInfo);break;case 10:var Q=_.type._context,se=_.memoizedProps.value;Os(bc,Q._currentValue),Q._currentValue=se;break;case 13:if(Q=_.memoizedState,Q!==null)return Q.dehydrated!==null?(Os(ze,ze.current&1),_.flags|=128,null):(K&_.child.childLanes)!==0?Dd(m,_,K):(Os(ze,ze.current&1),m=vA(m,_,K),m!==null?m.sibling:null);Os(ze,ze.current&1);break;case 19:if(Q=(K&_.childLanes)!==0,(m.flags&128)!==0){if(Q)return tc(m,_,K);_.flags|=128}if(se=_.memoizedState,se!==null&&(se.rendering=null,se.tail=null,se.lastEffect=null),Os(ze,ze.current),Q)break;return null;case 22:case 23:return _.lanes=0,vm(m,_,K)}return vA(m,_,K)}var vl,Np,Ra,Cm;vl=function(m,_){for(var K=_.child;K!==null;){if(K.tag===5||K.tag===6)m.appendChild(K.stateNode);else if(K.tag!==4&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===_)break;for(;K.sibling===null;){if(K.return===null||K.return===_)return;K=K.return}K.sibling.return=K.return,K=K.sibling}},Np=function(){},Ra=function(m,_,K,Q){var se=m.memoizedProps;if(se!==Q){m=_.stateNode,ee(I.current);var ye=null;switch(K){case"input":se=Et(m,se),Q=Et(m,Q),ye=[];break;case"select":se=Ge({},se,{value:void 0}),Q=Ge({},Q,{value:void 0}),ye=[];break;case"textarea":se=Dn(m,se),Q=Dn(m,Q),ye=[];break;default:typeof se.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=Qu)}ae(K,Q);var tt;K=null;for(Mn in se)if(!Q.hasOwnProperty(Mn)&&se.hasOwnProperty(Mn)&&se[Mn]!=null)if(Mn==="style"){var Ot=se[Mn];for(tt in Ot)Ot.hasOwnProperty(tt)&&(K||(K={}),K[tt]="")}else Mn!=="dangerouslySetInnerHTML"&&Mn!=="children"&&Mn!=="suppressContentEditableWarning"&&Mn!=="suppressHydrationWarning"&&Mn!=="autoFocus"&&(i.hasOwnProperty(Mn)?ye||(ye=[]):(ye=ye||[]).push(Mn,null));for(Mn in Q){var Qt=Q[Mn];if(Ot=se?.[Mn],Q.hasOwnProperty(Mn)&&Qt!==Ot&&(Qt!=null||Ot!=null))if(Mn==="style")if(Ot){for(tt in Ot)!Ot.hasOwnProperty(tt)||Qt&&Qt.hasOwnProperty(tt)||(K||(K={}),K[tt]="");for(tt in Qt)Qt.hasOwnProperty(tt)&&Ot[tt]!==Qt[tt]&&(K||(K={}),K[tt]=Qt[tt])}else K||(ye||(ye=[]),ye.push(Mn,K)),K=Qt;else Mn==="dangerouslySetInnerHTML"?(Qt=Qt?Qt.__html:void 0,Ot=Ot?Ot.__html:void 0,Qt!=null&&Ot!==Qt&&(ye=ye||[]).push(Mn,Qt)):Mn==="children"?typeof Qt!="string"&&typeof Qt!="number"||(ye=ye||[]).push(Mn,""+Qt):Mn!=="suppressContentEditableWarning"&&Mn!=="suppressHydrationWarning"&&(i.hasOwnProperty(Mn)?(Qt!=null&&Mn==="onScroll"&&us("scroll",m),ye||Ot===Qt||(ye=[])):(ye=ye||[]).push(Mn,Qt))}K&&(ye=ye||[]).push("style",K);var Mn=ye;(_.updateQueue=Mn)&&(_.flags|=4)}},Cm=function(m,_,K,Q){K!==Q&&(_.flags|=4)};function Zf(m,_){if(!gs)switch(m.tailMode){case"hidden":_=m.tail;for(var K=null;_!==null;)_.alternate!==null&&(K=_),_=_.sibling;K===null?m.tail=null:K.sibling=null;break;case"collapsed":K=m.tail;for(var Q=null;K!==null;)K.alternate!==null&&(Q=K),K=K.sibling;Q===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function CA(m){var _=m.alternate!==null&&m.alternate.child===m.child,K=0,Q=0;if(_)for(var se=m.child;se!==null;)K|=se.lanes|se.childLanes,Q|=se.subtreeFlags&14680064,Q|=se.flags&14680064,se.return=m,se=se.sibling;else for(se=m.child;se!==null;)K|=se.lanes|se.childLanes,Q|=se.subtreeFlags,Q|=se.flags,se.return=m,se=se.sibling;return m.subtreeFlags|=Q,m.childLanes=K,_}function xf(m,_,K){var Q=_.pendingProps;switch(Nc(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return CA(_),null;case 1:return Bl(_.type)&&Oa(),CA(_),null;case 3:return Q=_.stateNode,de(),Ps(gl),Ps(Ya),dt(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(os(_)?_.flags|=4:m===null||m.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,$l!==null&&(Jf($l),$l=null))),Np(m,_),CA(_),null;case 5:Be(_);var se=ee(Y.current);if(K=_.type,m!==null&&_.stateNode!=null)Ra(m,_,K,Q,se),m.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!Q){if(_.stateNode===null)throw Error(t(166));return CA(_),null}if(m=ee(I.current),os(_)){Q=_.stateNode,K=_.type;var ye=_.memoizedProps;switch(Q[wu]=_,Q[El]=ye,m=(_.mode&1)!==0,K){case"dialog":us("cancel",Q),us("close",Q);break;case"iframe":case"object":case"embed":us("load",Q);break;case"video":case"audio":for(se=0;se<uA.length;se++)us(uA[se],Q);break;case"source":us("error",Q);break;case"img":case"image":case"link":us("error",Q),us("load",Q);break;case"details":us("toggle",Q);break;case"input":Zt(Q,ye),us("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ye.multiple},us("invalid",Q);break;case"textarea":Ln(Q,ye),us("invalid",Q)}ae(K,ye),se=null;for(var tt in ye)if(ye.hasOwnProperty(tt)){var Ot=ye[tt];tt==="children"?typeof Ot=="string"?Q.textContent!==Ot&&(ye.suppressHydrationWarning!==!0&&Sh(Q.textContent,Ot,m),se=["children",Ot]):typeof Ot=="number"&&Q.textContent!==""+Ot&&(ye.suppressHydrationWarning!==!0&&Sh(Q.textContent,Ot,m),se=["children",""+Ot]):i.hasOwnProperty(tt)&&Ot!=null&&tt==="onScroll"&&us("scroll",Q)}switch(K){case"input":Ye(Q),hr(Q,ye,!0);break;case"textarea":Ye(Q),rr(Q);break;case"select":case"option":break;default:typeof ye.onClick=="function"&&(Q.onclick=Qu)}Q=se,_.updateQueue=Q,Q!==null&&(_.flags|=4)}else{tt=se.nodeType===9?se:se.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Yn(K)),m==="http://www.w3.org/1999/xhtml"?K==="script"?(m=tt.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=tt.createElement(K,{is:Q.is}):(m=tt.createElement(K),K==="select"&&(tt=m,Q.multiple?tt.multiple=!0:Q.size&&(tt.size=Q.size))):m=tt.createElementNS(m,K),m[wu]=_,m[El]=Q,vl(m,_,!1,!1),_.stateNode=m;e:{switch(tt=ve(K,Q),K){case"dialog":us("cancel",m),us("close",m),se=Q;break;case"iframe":case"object":case"embed":us("load",m),se=Q;break;case"video":case"audio":for(se=0;se<uA.length;se++)us(uA[se],m);se=Q;break;case"source":us("error",m),se=Q;break;case"img":case"image":case"link":us("error",m),us("load",m),se=Q;break;case"details":us("toggle",m),se=Q;break;case"input":Zt(m,Q),se=Et(m,Q),us("invalid",m);break;case"option":se=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},se=Ge({},Q,{value:void 0}),us("invalid",m);break;case"textarea":Ln(m,Q),se=Dn(m,Q),us("invalid",m);break;default:se=Q}ae(K,se),Ot=se;for(ye in Ot)if(Ot.hasOwnProperty(ye)){var Qt=Ot[ye];ye==="style"?ir(m,Qt):ye==="dangerouslySetInnerHTML"?(Qt=Qt?Qt.__html:void 0,Qt!=null&&me(m,Qt)):ye==="children"?typeof Qt=="string"?(K!=="textarea"||Qt!=="")&&et(m,Qt):typeof Qt=="number"&&et(m,""+Qt):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(i.hasOwnProperty(ye)?Qt!=null&&ye==="onScroll"&&us("scroll",m):Qt!=null&&re(m,ye,Qt,tt))}switch(K){case"input":Ye(m),hr(m,Q,!1);break;case"textarea":Ye(m),rr(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Ke(Q.value));break;case"select":m.multiple=!!Q.multiple,ye=Q.value,ye!=null?Pn(m,!!Q.multiple,ye,!1):Q.defaultValue!=null&&Pn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof se.onClick=="function"&&(m.onclick=Qu)}switch(K){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return CA(_),null;case 6:if(m&&_.stateNode!=null)Cm(m,_,m.memoizedProps,Q);else{if(typeof Q!="string"&&_.stateNode===null)throw Error(t(166));if(K=ee(Y.current),ee(I.current),os(_)){if(Q=_.stateNode,K=_.memoizedProps,Q[wu]=_,(ye=Q.nodeValue!==K)&&(m=ol,m!==null))switch(m.tag){case 3:Sh(Q.nodeValue,K,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Sh(Q.nodeValue,K,(m.mode&1)!==0)}ye&&(_.flags|=4)}else Q=(K.nodeType===9?K:K.ownerDocument).createTextNode(Q),Q[wu]=_,_.stateNode=Q}return CA(_),null;case 13:if(Ps(ze),Q=_.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(gs&&va!==null&&(_.mode&1)!==0&&(_.flags&128)===0)Bh(),Eu(),_.flags|=98560,ye=!1;else if(ye=os(_),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ye)throw Error(t(318));if(ye=_.memoizedState,ye=ye!==null?ye.dehydrated:null,!ye)throw Error(t(317));ye[wu]=_}else Eu(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;CA(_),ye=!1}else $l!==null&&(Jf($l),$l=null),ye=!0;if(!ye)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=K,_):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(_.child.flags|=8192,(_.mode&1)!==0&&(m===null||(ze.current&1)!==0?Fo===0&&(Fo=3):e0())),_.updateQueue!==null&&(_.flags|=4),CA(_),null);case 4:return de(),Np(m,_),m===null&&kA(_.stateNode.containerInfo),CA(_),null;case 10:return ss(_.type._context),CA(_),null;case 17:return Bl(_.type)&&Oa(),CA(_),null;case 19:if(Ps(ze),ye=_.memoizedState,ye===null)return CA(_),null;if(Q=(_.flags&128)!==0,tt=ye.rendering,tt===null)if(Q)Zf(ye,!1);else{if(Fo!==0||m!==null&&(m.flags&128)!==0)for(m=_.child;m!==null;){if(tt=He(m),tt!==null){for(_.flags|=128,Zf(ye,!1),Q=tt.updateQueue,Q!==null&&(_.updateQueue=Q,_.flags|=4),_.subtreeFlags=0,Q=K,K=_.child;K!==null;)ye=K,m=Q,ye.flags&=14680066,tt=ye.alternate,tt===null?(ye.childLanes=0,ye.lanes=m,ye.child=null,ye.subtreeFlags=0,ye.memoizedProps=null,ye.memoizedState=null,ye.updateQueue=null,ye.dependencies=null,ye.stateNode=null):(ye.childLanes=tt.childLanes,ye.lanes=tt.lanes,ye.child=tt.child,ye.subtreeFlags=0,ye.deletions=null,ye.memoizedProps=tt.memoizedProps,ye.memoizedState=tt.memoizedState,ye.updateQueue=tt.updateQueue,ye.type=tt.type,m=tt.dependencies,ye.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),K=K.sibling;return Os(ze,ze.current&1|2),_.child}m=m.sibling}ye.tail!==null&&ci()>Ld&&(_.flags|=128,Q=!0,Zf(ye,!1),_.lanes=4194304)}else{if(!Q)if(m=He(tt),m!==null){if(_.flags|=128,Q=!0,K=m.updateQueue,K!==null&&(_.updateQueue=K,_.flags|=4),Zf(ye,!0),ye.tail===null&&ye.tailMode==="hidden"&&!tt.alternate&&!gs)return CA(_),null}else 2*ci()-ye.renderingStartTime>Ld&&K!==1073741824&&(_.flags|=128,Q=!0,Zf(ye,!1),_.lanes=4194304);ye.isBackwards?(tt.sibling=_.child,_.child=tt):(K=ye.last,K!==null?K.sibling=tt:_.child=tt,ye.last=tt)}return ye.tail!==null?(_=ye.tail,ye.rendering=_,ye.tail=_.sibling,ye.renderingStartTime=ci(),_.sibling=null,K=ze.current,Os(ze,Q?K&1|2:K&1),_):(CA(_),null);case 22:case 23:return e1(),Q=_.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(_.flags|=8192),Q&&(_.mode&1)!==0?(xs&1073741824)!==0&&(CA(_),_.subtreeFlags&6&&(_.flags|=8192)):CA(_),null;case 24:return null;case 25:return null}throw Error(t(156,_.tag))}function u(m,_){switch(Nc(_),_.tag){case 1:return Bl(_.type)&&Oa(),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return de(),Ps(gl),Ps(Ya),dt(),m=_.flags,(m&65536)!==0&&(m&128)===0?(_.flags=m&-65537|128,_):null;case 5:return Be(_),null;case 13:if(Ps(ze),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(t(340));Eu()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return Ps(ze),null;case 4:return de(),null;case 10:return ss(_.type._context),null;case 22:case 23:return e1(),null;case 24:return null;default:return null}}var g=!1,E=!1,S=typeof WeakSet=="function"?WeakSet:Set,D=null;function H(m,_){var K=m.ref;if(K!==null)if(typeof K=="function")try{K(null)}catch(Q){Va(m,_,Q)}else K.current=null}function ce(m,_,K){try{K()}catch(Q){Va(m,_,Q)}}var _e=!1;function ke(m,_){if(lh=Ee,m=es(),cc(m)){if("selectionStart"in m)var K={start:m.selectionStart,end:m.selectionEnd};else e:{K=(K=m.ownerDocument)&&K.defaultView||window;var Q=K.getSelection&&K.getSelection();if(Q&&Q.rangeCount!==0){K=Q.anchorNode;var se=Q.anchorOffset,ye=Q.focusNode;Q=Q.focusOffset;try{K.nodeType,ye.nodeType}catch{K=null;break e}var tt=0,Ot=-1,Qt=-1,Mn=0,sr=0,yr=m,ar=null;t:for(;;){for(var Wr;yr!==K||se!==0&&yr.nodeType!==3||(Ot=tt+se),yr!==ye||Q!==0&&yr.nodeType!==3||(Qt=tt+Q),yr.nodeType===3&&(tt+=yr.nodeValue.length),(Wr=yr.firstChild)!==null;)ar=yr,yr=Wr;for(;;){if(yr===m)break t;if(ar===K&&++Mn===se&&(Ot=tt),ar===ye&&++sr===Q&&(Qt=tt),(Wr=yr.nextSibling)!==null)break;yr=ar,ar=yr.parentNode}yr=Wr}K=Ot===-1||Qt===-1?null:{start:Ot,end:Qt}}else K=null}K=K||{start:0,end:0}}else K=null;for(PA={focusedElem:m,selectionRange:K},Ee=!1,D=_;D!==null;)if(_=D,m=_.child,(_.subtreeFlags&1028)!==0&&m!==null)m.return=_,D=m;else for(;D!==null;){_=D;try{var ii=_.alternate;if((_.flags&1024)!==0)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ii!==null){var hi=ii.memoizedProps,Al=ii.memoizedState,un=_.stateNode,Xt=un.getSnapshotBeforeUpdate(_.elementType===_.type?hi:ta(_.type,hi),Al);un.__reactInternalSnapshotBeforeUpdate=Xt}break;case 3:var pn=_.stateNode.containerInfo;pn.nodeType===1?pn.textContent="":pn.nodeType===9&&pn.documentElement&&pn.removeChild(pn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Cr){Va(_,_.return,Cr)}if(m=_.sibling,m!==null){m.return=_.return,D=m;break}D=_.return}return ii=_e,_e=!1,ii}function Ue(m,_,K){var Q=_.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var se=Q=Q.next;do{if((se.tag&m)===m){var ye=se.destroy;se.destroy=void 0,ye!==void 0&&ce(_,K,ye)}se=se.next}while(se!==Q)}}function mt(m,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var K=_=_.next;do{if((K.tag&m)===m){var Q=K.create;K.destroy=Q()}K=K.next}while(K!==_)}}function Bt(m){var _=m.ref;if(_!==null){var K=m.stateNode;switch(m.tag){case 5:m=K;break;default:m=K}typeof _=="function"?_(m):_.current=m}}function tn(m){var _=m.alternate;_!==null&&(m.alternate=null,tn(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&(delete _[wu],delete _[El],delete _[Ah],delete _[ot],delete _[Eh])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function qt(m){return m.tag===5||m.tag===3||m.tag===4}function xn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||qt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Fn(m,_,K){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,_?K.nodeType===8?K.parentNode.insertBefore(m,_):K.insertBefore(m,_):(K.nodeType===8?(_=K.parentNode,_.insertBefore(m,K)):(_=K,_.appendChild(m)),K=K._reactRootContainer,K!=null||_.onclick!==null||(_.onclick=Qu));else if(Q!==4&&(m=m.child,m!==null))for(Fn(m,_,K),m=m.sibling;m!==null;)Fn(m,_,K),m=m.sibling}function Kn(m,_,K){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,_?K.insertBefore(m,_):K.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(Kn(m,_,K),m=m.sibling;m!==null;)Kn(m,_,K),m=m.sibling}var Hn=null,br=!1;function fr(m,_,K){for(K=K.child;K!==null;)Pr(m,_,K),K=K.sibling}function Pr(m,_,K){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Jo,K)}catch{}switch(K.tag){case 5:E||H(K,_);case 6:var Q=Hn,se=br;Hn=null,fr(m,_,K),Hn=Q,br=se,Hn!==null&&(br?(m=Hn,K=K.stateNode,m.nodeType===8?m.parentNode.removeChild(K):m.removeChild(K)):Hn.removeChild(K.stateNode));break;case 18:Hn!==null&&(br?(m=Hn,K=K.stateNode,m.nodeType===8?Yu(m.parentNode,K):m.nodeType===1&&Yu(m,K),to(m)):Yu(Hn,K.stateNode));break;case 4:Q=Hn,se=br,Hn=K.stateNode.containerInfo,br=!0,fr(m,_,K),Hn=Q,br=se;break;case 0:case 11:case 14:case 15:if(!E&&(Q=K.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){se=Q=Q.next;do{var ye=se,tt=ye.destroy;ye=ye.tag,tt!==void 0&&((ye&2)!==0||(ye&4)!==0)&&ce(K,_,tt),se=se.next}while(se!==Q)}fr(m,_,K);break;case 1:if(!E&&(H(K,_),Q=K.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=K.memoizedProps,Q.state=K.memoizedState,Q.componentWillUnmount()}catch(Ot){Va(K,_,Ot)}fr(m,_,K);break;case 21:fr(m,_,K);break;case 22:K.mode&1?(E=(Q=E)||K.memoizedState!==null,fr(m,_,K),E=Q):fr(m,_,K);break;default:fr(m,_,K)}}function Jr(m){var _=m.updateQueue;if(_!==null){m.updateQueue=null;var K=m.stateNode;K===null&&(K=m.stateNode=new S),_.forEach(function(Q){var se=fg.bind(null,m,Q);K.has(Q)||(K.add(Q),Q.then(se,se))})}}function zr(m,_){var K=_.deletions;if(K!==null)for(var Q=0;Q<K.length;Q++){var se=K[Q];try{var ye=m,tt=_,Ot=tt;e:for(;Ot!==null;){switch(Ot.tag){case 5:Hn=Ot.stateNode,br=!1;break e;case 3:Hn=Ot.stateNode.containerInfo,br=!0;break e;case 4:Hn=Ot.stateNode.containerInfo,br=!0;break e}Ot=Ot.return}if(Hn===null)throw Error(t(160));Pr(ye,tt,se),Hn=null,br=!1;var Qt=se.alternate;Qt!==null&&(Qt.return=null),se.return=null}catch(Mn){Va(se,_,Mn)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)eo(_,m),_=_.sibling}function eo(m,_){var K=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(zr(_,m),fo(m),Q&4){try{Ue(3,m,m.return),mt(3,m)}catch(hi){Va(m,m.return,hi)}try{Ue(5,m,m.return)}catch(hi){Va(m,m.return,hi)}}break;case 1:zr(_,m),fo(m),Q&512&&K!==null&&H(K,K.return);break;case 5:if(zr(_,m),fo(m),Q&512&&K!==null&&H(K,K.return),m.flags&32){var se=m.stateNode;try{et(se,"")}catch(hi){Va(m,m.return,hi)}}if(Q&4&&(se=m.stateNode,se!=null)){var ye=m.memoizedProps,tt=K!==null?K.memoizedProps:ye,Ot=m.type,Qt=m.updateQueue;if(m.updateQueue=null,Qt!==null)try{Ot==="input"&&ye.type==="radio"&&ye.name!=null&&Ut(se,ye),ve(Ot,tt);var Mn=ve(Ot,ye);for(tt=0;tt<Qt.length;tt+=2){var sr=Qt[tt],yr=Qt[tt+1];sr==="style"?ir(se,yr):sr==="dangerouslySetInnerHTML"?me(se,yr):sr==="children"?et(se,yr):re(se,sr,yr,Mn)}switch(Ot){case"input":An(se,ye);break;case"textarea":Ir(se,ye);break;case"select":var ar=se._wrapperState.wasMultiple;se._wrapperState.wasMultiple=!!ye.multiple;var Wr=ye.value;Wr!=null?Pn(se,!!ye.multiple,Wr,!1):ar!==!!ye.multiple&&(ye.defaultValue!=null?Pn(se,!!ye.multiple,ye.defaultValue,!0):Pn(se,!!ye.multiple,ye.multiple?[]:"",!1))}se[El]=ye}catch(hi){Va(m,m.return,hi)}}break;case 6:if(zr(_,m),fo(m),Q&4){if(m.stateNode===null)throw Error(t(162));se=m.stateNode,ye=m.memoizedProps;try{se.nodeValue=ye}catch(hi){Va(m,m.return,hi)}}break;case 3:if(zr(_,m),fo(m),Q&4&&K!==null&&K.memoizedState.isDehydrated)try{to(_.containerInfo)}catch(hi){Va(m,m.return,hi)}break;case 4:zr(_,m),fo(m);break;case 13:zr(_,m),fo(m),se=m.child,se.flags&8192&&(ye=se.memoizedState!==null,se.stateNode.isHidden=ye,!ye||se.alternate!==null&&se.alternate.memoizedState!==null||(Mf=ci())),Q&4&&Jr(m);break;case 22:if(sr=K!==null&&K.memoizedState!==null,m.mode&1?(E=(Mn=E)||sr,zr(_,m),E=Mn):zr(_,m),fo(m),Q&8192){if(Mn=m.memoizedState!==null,(m.stateNode.isHidden=Mn)&&!sr&&(m.mode&1)!==0)for(D=m,sr=m.child;sr!==null;){for(yr=D=sr;D!==null;){switch(ar=D,Wr=ar.child,ar.tag){case 0:case 11:case 14:case 15:Ue(4,ar,ar.return);break;case 1:H(ar,ar.return);var ii=ar.stateNode;if(typeof ii.componentWillUnmount=="function"){Q=ar,K=ar.return;try{_=Q,ii.props=_.memoizedProps,ii.state=_.memoizedState,ii.componentWillUnmount()}catch(hi){Va(Q,K,hi)}}break;case 5:H(ar,ar.return);break;case 22:if(ar.memoizedState!==null){qs(yr);continue}}Wr!==null?(Wr.return=ar,D=Wr):qs(yr)}sr=sr.sibling}e:for(sr=null,yr=m;;){if(yr.tag===5){if(sr===null){sr=yr;try{se=yr.stateNode,Mn?(ye=se.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none"):(Ot=yr.stateNode,Qt=yr.memoizedProps.style,tt=Qt!=null&&Qt.hasOwnProperty("display")?Qt.display:null,Ot.style.display=Jt("display",tt))}catch(hi){Va(m,m.return,hi)}}}else if(yr.tag===6){if(sr===null)try{yr.stateNode.nodeValue=Mn?"":yr.memoizedProps}catch(hi){Va(m,m.return,hi)}}else if((yr.tag!==22&&yr.tag!==23||yr.memoizedState===null||yr===m)&&yr.child!==null){yr.child.return=yr,yr=yr.child;continue}if(yr===m)break e;for(;yr.sibling===null;){if(yr.return===null||yr.return===m)break e;sr===yr&&(sr=null),yr=yr.return}sr===yr&&(sr=null),yr.sibling.return=yr.return,yr=yr.sibling}}break;case 19:zr(_,m),fo(m),Q&4&&Jr(m);break;case 21:break;default:zr(_,m),fo(m)}}function fo(m){var _=m.flags;if(_&2){try{e:{for(var K=m.return;K!==null;){if(qt(K)){var Q=K;break e}K=K.return}throw Error(t(160))}switch(Q.tag){case 5:var se=Q.stateNode;Q.flags&32&&(et(se,""),Q.flags&=-33);var ye=xn(m);Kn(m,ye,se);break;case 3:case 4:var tt=Q.stateNode.containerInfo,Ot=xn(m);Fn(m,Ot,tt);break;default:throw Error(t(161))}}catch(Qt){Va(m,m.return,Qt)}m.flags&=-3}_&4096&&(m.flags&=-4097)}function _a(m,_,K){D=m,vs(m)}function vs(m,_,K){for(var Q=(m.mode&1)!==0;D!==null;){var se=D,ye=se.child;if(se.tag===22&&Q){var tt=se.memoizedState!==null||g;if(!tt){var Ot=se.alternate,Qt=Ot!==null&&Ot.memoizedState!==null||E;Ot=g;var Mn=E;if(g=tt,(E=Qt)&&!Mn)for(D=se;D!==null;)tt=D,Qt=tt.child,tt.tag===22&&tt.memoizedState!==null?na(se):Qt!==null?(Qt.return=tt,D=Qt):na(se);for(;ye!==null;)D=ye,vs(ye),ye=ye.sibling;D=se,g=Ot,E=Mn}Ys(m)}else(se.subtreeFlags&8772)!==0&&ye!==null?(ye.return=se,D=ye):Ys(m)}}function Ys(m){for(;D!==null;){var _=D;if((_.flags&8772)!==0){var K=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:E||mt(5,_);break;case 1:var Q=_.stateNode;if(_.flags&4&&!E)if(K===null)Q.componentDidMount();else{var se=_.elementType===_.type?K.memoizedProps:ta(_.type,K.memoizedProps);Q.componentDidUpdate(se,K.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ye=_.updateQueue;ye!==null&&v(_,ye,Q);break;case 3:var tt=_.updateQueue;if(tt!==null){if(K=null,_.child!==null)switch(_.child.tag){case 5:K=_.child.stateNode;break;case 1:K=_.child.stateNode}v(_,tt,K)}break;case 5:var Ot=_.stateNode;if(K===null&&_.flags&4){K=Ot;var Qt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Qt.autoFocus&&K.focus();break;case"img":Qt.src&&(K.src=Qt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Mn=_.alternate;if(Mn!==null){var sr=Mn.memoizedState;if(sr!==null){var yr=sr.dehydrated;yr!==null&&to(yr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}E||_.flags&512&&Bt(_)}catch(ar){Va(_,_.return,ar)}}if(_===m){D=null;break}if(K=_.sibling,K!==null){K.return=_.return,D=K;break}D=_.return}}function qs(m){for(;D!==null;){var _=D;if(_===m){D=null;break}var K=_.sibling;if(K!==null){K.return=_.return,D=K;break}D=_.return}}function na(m){for(;D!==null;){var _=D;try{switch(_.tag){case 0:case 11:case 15:var K=_.return;try{mt(4,_)}catch(Qt){Va(_,K,Qt)}break;case 1:var Q=_.stateNode;if(typeof Q.componentDidMount=="function"){var se=_.return;try{Q.componentDidMount()}catch(Qt){Va(_,se,Qt)}}var ye=_.return;try{Bt(_)}catch(Qt){Va(_,ye,Qt)}break;case 5:var tt=_.return;try{Bt(_)}catch(Qt){Va(_,tt,Qt)}}}catch(Qt){Va(_,_.return,Qt)}if(_===m){D=null;break}var Ot=_.sibling;if(Ot!==null){Ot.return=_.return,D=Ot;break}D=_.return}}var NA=Math.ceil,$a=te.ReactCurrentDispatcher,Ds=te.ReactCurrentOwner,cs=te.ReactCurrentBatchConfig,xi=0,Qo=null,$s=null,la=0,xs=0,lu=il(0),Fo=0,Fd=null,GA=0,Yc=0,xc=0,al=null,ll=null,Mf=0,Ld=1/0,od=null,_m=!1,Gp=null,Ud=null,bm=!1,zd=null,_A=0,xm=0,Mm=null,wf=-1,Xf=0;function nc(){return(xi&6)!==0?ci():wf!==-1?wf:wf=ci()}function Sf(m){return(m.mode&1)===0?1:(xi&2)!==0&&la!==0?la&-la:vf.transition!==null?(Xf===0&&(Xf=jl()),Xf):(m=bi,m!==0||(m=window.event,m=m===void 0?16:Ai(m.type)),m)}function ph(m,_,K,Q){if(50<xm)throw xm=0,Mm=null,Error(t(185));Ua(m,K,Q),((xi&2)===0||m!==Qo)&&(m===Qo&&((xi&2)===0&&(Yc|=K),Fo===4&&Ef(m,la)),rc(m,Q),K===1&&xi===0&&(_.mode&1)===0&&(Ld=ci()+500,gf&&ou()))}function rc(m,_){var K=m.callbackNode;vi(m,_);var Q=fa(m,m===Qo?la:0);if(Q===0)K!==null&&No(K),m.callbackNode=null,m.callbackPriority=0;else if(_=Q&-Q,m.callbackPriority!==_){if(K!=null&&No(K),_===1)m.tag===0?gc(ug.bind(null,m)):iu(ug.bind(null,m)),zc(function(){(xi&6)===0&&ou()}),K=null;else{switch(Ao(Q)){case 1:K=bo;break;case 4:K=lo;break;case 16:K=Er;break;case 536870912:K=qo;break;default:K=Er}K=n1(K,Xm.bind(null,m))}m.callbackPriority=_,m.callbackNode=K}}function Xm(m,_){if(wf=-1,Xf=0,(xi&6)!==0)throw Error(t(327));var K=m.callbackNode;if(jp()&&m.callbackNode!==K)return null;var Q=fa(m,m===Qo?la:0);if(Q===0)return null;if((Q&30)!==0||(Q&m.expiredLanes)!==0||_)_=wm(m,Q);else{_=Q;var se=xi;xi|=2;var ye=Jm();(Qo!==m||la!==_)&&(od=null,Ld=ci()+500,tp(m,_));do try{tv();break}catch(Ot){t1(m,Ot)}while(!0);Bu(),$a.current=ye,xi=se,$s!==null?_=0:(Qo=null,la=0,_=Fo)}if(_!==0){if(_===2&&(se=zu(m),se!==0&&(Q=se,_=X0(m,se))),_===1)throw K=Fd,tp(m,0),Ef(m,Q),rc(m,ci()),K;if(_===6)Ef(m,Q);else{if(se=m.current.alternate,(Q&30)===0&&!Ag(se)&&(_=wm(m,Q),_===2&&(ye=zu(m),ye!==0&&(Q=ye,_=X0(m,ye))),_===1))throw K=Fd,tp(m,0),Ef(m,Q),rc(m,ci()),K;switch(m.finishedWork=se,m.finishedLanes=Q,_){case 0:case 1:throw Error(t(345));case 2:Bf(m,ll,od);break;case 3:if(Ef(m,Q),(Q&130023424)===Q&&(_=Mf+500-ci(),10<_)){if(fa(m,0)!==0)break;if(se=m.suspendedLanes,(se&Q)!==Q){nc(),m.pingedLanes|=m.suspendedLanes&se;break}m.timeoutHandle=Sl(Bf.bind(null,m,ll,od),_);break}Bf(m,ll,od);break;case 4:if(Ef(m,Q),(Q&4194240)===Q)break;for(_=m.eventTimes,se=-1;0<Q;){var tt=31-_n(Q);ye=1<<tt,tt=_[tt],tt>se&&(se=tt),Q&=~ye}if(Q=se,Q=ci()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*NA(Q/1960))-Q,10<Q){m.timeoutHandle=Sl(Bf.bind(null,m,ll,od),Q);break}Bf(m,ll,od);break;case 5:Bf(m,ll,od);break;default:throw Error(t(329))}}}return rc(m,ci()),m.callbackNode===K?Xm.bind(null,m):null}function X0(m,_){var K=al;return m.current.memoizedState.isDehydrated&&(tp(m,_).flags|=256),m=wm(m,_),m!==2&&(_=ll,ll=K,_!==null&&Jf(_)),m}function Jf(m){ll===null?ll=m:ll.push.apply(ll,m)}function Ag(m){for(var _=m;;){if(_.flags&16384){var K=_.updateQueue;if(K!==null&&(K=K.stores,K!==null))for(var Q=0;Q<K.length;Q++){var se=K[Q],ye=se.getSnapshot;se=se.value;try{if(!dn(ye(),se))return!1}catch{return!1}}}if(K=_.child,_.subtreeFlags&16384&&K!==null)K.return=_,_=K;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Ef(m,_){for(_&=~xc,_&=~Yc,m.suspendedLanes|=_,m.pingedLanes&=~_,m=m.expirationTimes;0<_;){var K=31-_n(_),Q=1<<K;m[K]=-1,_&=~Q}}function ug(m){if((xi&6)!==0)throw Error(t(327));jp();var _=fa(m,0);if((_&1)===0)return rc(m,ci()),null;var K=wm(m,_);if(m.tag!==0&&K===2){var Q=zu(m);Q!==0&&(_=Q,K=X0(m,Q))}if(K===1)throw K=Fd,tp(m,0),Ef(m,_),rc(m,ci()),K;if(K===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=_,Bf(m,ll,od),rc(m,ci()),null}function J0(m,_){var K=xi;xi|=1;try{return m(_)}finally{xi=K,xi===0&&(Ld=ci()+500,gf&&ou())}}function ep(m){zd!==null&&zd.tag===0&&(xi&6)===0&&jp();var _=xi;xi|=1;var K=cs.transition,Q=bi;try{if(cs.transition=null,bi=1,m)return m()}finally{bi=Q,cs.transition=K,xi=_,(xi&6)===0&&ou()}}function e1(){xs=lu.current,Ps(lu)}function tp(m,_){m.finishedWork=null,m.finishedLanes=0;var K=m.timeoutHandle;if(K!==-1&&(m.timeoutHandle=-1,xu(K)),$s!==null)for(K=$s.return;K!==null;){var Q=K;switch(Nc(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&Oa();break;case 3:de(),Ps(gl),Ps(Ya),dt();break;case 5:Be(Q);break;case 4:de();break;case 13:Ps(ze);break;case 19:Ps(ze);break;case 10:ss(Q.type._context);break;case 22:case 23:e1()}K=K.return}if(Qo=m,$s=m=qc(m.current,null),la=xs=_,Fo=0,Fd=null,xc=Yc=GA=0,ll=al=null,as!==null){for(_=0;_<as.length;_++)if(K=as[_],Q=K.interleaved,Q!==null){K.interleaved=null;var se=Q.next,ye=K.pending;if(ye!==null){var tt=ye.next;ye.next=se,Q.next=tt}K.pending=Q}as=null}return m}function t1(m,_){do{var K=$s;try{if(Bu(),pt.current=Wc,zt){for(var Q=Mt.memoizedState;Q!==null;){var se=Q.queue;se!==null&&(se.pending=null),Q=Q.next}zt=!1}if(Tt=0,Kt=kt=Mt=null,sn=!1,bn=0,Ds.current=null,K===null||K.return===null){Fo=1,Fd=_,$s=null;break}e:{var ye=m,tt=K.return,Ot=K,Qt=_;if(_=la,Ot.flags|=32768,Qt!==null&&typeof Qt=="object"&&typeof Qt.then=="function"){var Mn=Qt,sr=Ot,yr=sr.tag;if((sr.mode&1)===0&&(yr===0||yr===11||yr===15)){var ar=sr.alternate;ar?(sr.updateQueue=ar.updateQueue,sr.memoizedState=ar.memoizedState,sr.lanes=ar.lanes):(sr.updateQueue=null,sr.memoizedState=null)}var Wr=Lp(tt);if(Wr!==null){Wr.flags&=-257,rd(Wr,tt,Ot,ye,_),Wr.mode&1&&Vf(ye,Mn,_),_=Wr,Qt=Mn;var ii=_.updateQueue;if(ii===null){var hi=new Set;hi.add(Qt),_.updateQueue=hi}else ii.add(Qt);break e}else{if((_&1)===0){Vf(ye,Mn,_),e0();break e}Qt=Error(t(426))}}else if(gs&&Ot.mode&1){var Al=Lp(tt);if(Al!==null){(Al.flags&65536)===0&&(Al.flags|=256),rd(Al,tt,Ot,ye,_),DA(ku(Qt,Ot));break e}}ye=Qt=ku(Qt,Ot),Fo!==4&&(Fo=2),al===null?al=[ye]:al.push(ye),ye=tt;do{switch(ye.tag){case 3:ye.flags|=65536,_&=-_,ye.lanes|=_;var un=kh(ye,Qt,_);a(ye,un);break e;case 1:Ot=Qt;var Xt=ye.type,pn=ye.stateNode;if((ye.flags&128)===0&&(typeof Xt.getDerivedStateFromError=="function"||pn!==null&&typeof pn.componentDidCatch=="function"&&(Ud===null||!Ud.has(pn)))){ye.flags|=65536,_&=-_,ye.lanes|=_;var Cr=_f(ye,Ot,_);a(ye,Cr);break e}}ye=ye.return}while(ye!==null)}hg(K)}catch(pi){_=pi,$s===K&&K!==null&&($s=K=K.return);continue}break}while(!0)}function Jm(){var m=$a.current;return $a.current=Wc,m===null?Wc:m}function e0(){(Fo===0||Fo===3||Fo===2)&&(Fo=4),Qo===null||(GA&268435455)===0&&(Yc&268435455)===0||Ef(Qo,la)}function wm(m,_){var K=xi;xi|=2;var Q=Jm();(Qo!==m||la!==_)&&(od=null,tp(m,_));do try{cg();break}catch(se){t1(m,se)}while(!0);if(Bu(),xi=K,$a.current=Q,$s!==null)throw Error(t(261));return Qo=null,la=0,Fo}function cg(){for(;$s!==null;)Sm($s)}function tv(){for(;$s!==null&&!zs();)Sm($s)}function Sm(m){var _=n0(m.alternate,m,xs);m.memoizedProps=m.pendingProps,_===null?hg(m):$s=_,Ds.current=null}function hg(m){var _=m;do{var K=_.alternate;if(m=_.return,(_.flags&32768)===0){if(K=xf(K,_,xs),K!==null){$s=K;return}}else{if(K=u(K,_),K!==null){K.flags&=32767,$s=K;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Fo=6,$s=null;return}}if(_=_.sibling,_!==null){$s=_;return}$s=_=m}while(_!==null);Fo===0&&(Fo=5)}function Bf(m,_,K){var Q=bi,se=cs.transition;try{cs.transition=null,bi=1,nv(m,_,K,Q)}finally{cs.transition=se,bi=Q}return null}function nv(m,_,K,Q){do jp();while(zd!==null);if((xi&6)!==0)throw Error(t(327));K=m.finishedWork;var se=m.finishedLanes;if(K===null)return null;if(m.finishedWork=null,m.finishedLanes=0,K===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ye=K.lanes|K.childLanes;if(JA(m,ye),m===Qo&&($s=Qo=null,la=0),(K.subtreeFlags&2064)===0&&(K.flags&2064)===0||bm||(bm=!0,n1(Er,function(){return jp(),null})),ye=(K.flags&15990)!==0,(K.subtreeFlags&15990)!==0||ye){ye=cs.transition,cs.transition=null;var tt=bi;bi=1;var Ot=xi;xi|=4,Ds.current=null,ke(m,K),eo(K,m),pf(PA),Ee=!!lh,PA=lh=null,m.current=K,_a(K),hl(),xi=Ot,bi=tt,cs.transition=ye}else m.current=K;if(bm&&(bm=!1,zd=m,_A=se),ye=m.pendingLanes,ye===0&&(Ud=null),xt(K.stateNode),rc(m,ci()),_!==null)for(Q=m.onRecoverableError,K=0;K<_.length;K++)se=_[K],Q(se.value,{componentStack:se.stack,digest:se.digest});if(_m)throw _m=!1,m=Gp,Gp=null,m;return(_A&1)!==0&&m.tag!==0&&jp(),ye=m.pendingLanes,(ye&1)!==0?m===Mm?xm++:(xm=0,Mm=m):xm=0,ou(),null}function jp(){if(zd!==null){var m=Ao(_A),_=cs.transition,K=bi;try{if(cs.transition=null,bi=16>m?16:m,zd===null)var Q=!1;else{if(m=zd,zd=null,_A=0,(xi&6)!==0)throw Error(t(331));var se=xi;for(xi|=4,D=m.current;D!==null;){var ye=D,tt=ye.child;if((D.flags&16)!==0){var Ot=ye.deletions;if(Ot!==null){for(var Qt=0;Qt<Ot.length;Qt++){var Mn=Ot[Qt];for(D=Mn;D!==null;){var sr=D;switch(sr.tag){case 0:case 11:case 15:Ue(8,sr,ye)}var yr=sr.child;if(yr!==null)yr.return=sr,D=yr;else for(;D!==null;){sr=D;var ar=sr.sibling,Wr=sr.return;if(tn(sr),sr===Mn){D=null;break}if(ar!==null){ar.return=Wr,D=ar;break}D=Wr}}}var ii=ye.alternate;if(ii!==null){var hi=ii.child;if(hi!==null){ii.child=null;do{var Al=hi.sibling;hi.sibling=null,hi=Al}while(hi!==null)}}D=ye}}if((ye.subtreeFlags&2064)!==0&&tt!==null)tt.return=ye,D=tt;else e:for(;D!==null;){if(ye=D,(ye.flags&2048)!==0)switch(ye.tag){case 0:case 11:case 15:Ue(9,ye,ye.return)}var un=ye.sibling;if(un!==null){un.return=ye.return,D=un;break e}D=ye.return}}var Xt=m.current;for(D=Xt;D!==null;){tt=D;var pn=tt.child;if((tt.subtreeFlags&2064)!==0&&pn!==null)pn.return=tt,D=pn;else e:for(tt=Xt;D!==null;){if(Ot=D,(Ot.flags&2048)!==0)try{switch(Ot.tag){case 0:case 11:case 15:mt(9,Ot)}}catch(pi){Va(Ot,Ot.return,pi)}if(Ot===tt){D=null;break e}var Cr=Ot.sibling;if(Cr!==null){Cr.return=Ot.return,D=Cr;break e}D=Ot.return}}if(xi=se,ou(),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Jo,m)}catch{}Q=!0}return Q}finally{bi=K,cs.transition=_}}return!1}function t0(m,_,K){_=ku(K,_),_=kh(m,_,1),m=kl(m,_,1),_=nc(),m!==null&&(Ua(m,1,_),rc(m,_))}function Va(m,_,K){if(m.tag===3)t0(m,m,K);else for(;_!==null;){if(_.tag===3){t0(_,m,K);break}else if(_.tag===1){var Q=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Ud===null||!Ud.has(Q))){m=ku(K,m),m=_f(_,m,1),_=kl(_,m,1),m=nc(),_!==null&&(Ua(_,1,m),rc(_,m));break}}_=_.return}}function rv(m,_,K){var Q=m.pingCache;Q!==null&&Q.delete(_),_=nc(),m.pingedLanes|=m.suspendedLanes&K,Qo===m&&(la&K)===K&&(Fo===4||Fo===3&&(la&130023424)===la&&500>ci()-Mf?tp(m,0):xc|=K),rc(m,_)}function dg(m,_){_===0&&((m.mode&1)===0?_=1:(_=Io,Io<<=1,(Io&130023424)===0&&(Io=4194304)));var K=nc();m=KA(m,_),m!==null&&(Ua(m,_,K),rc(m,K))}function Em(m){var _=m.memoizedState,K=0;_!==null&&(K=_.retryLane),dg(m,K)}function fg(m,_){var K=0;switch(m.tag){case 13:var Q=m.stateNode,se=m.memoizedState;se!==null&&(K=se.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(_),dg(m,K)}var n0;n0=function(m,_,K){if(m!==null)if(m.memoizedProps!==_.pendingProps||gl.current)Jl=!0;else{if((m.lanes&K)===0&&(_.flags&128)===0)return Jl=!1,zp(m,_,K);Jl=(m.flags&131072)!==0}else Jl=!1,gs&&(_.flags&1048576)!==0&&yf(_,Ol,_.index);switch(_.lanes=0,_.tag){case 2:var Q=_.type;zA(m,_),m=_.pendingProps;var se=$u(_,Ya.current);dA(_,K),se=Ar(null,_,Q,m,se,K);var ye=cr();return _.flags|=1,typeof se=="object"&&se!==null&&typeof se.render=="function"&&se.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Bl(Q)?(ye=!0,Js(_)):ye=!1,_.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,Ih(_),se.updater=Tu,_.stateNode=se,se._reactInternals=_,Fp(_,Q,m,K),_=Pd(null,_,Q,!0,ye,K)):(_.tag=0,gs&&ye&&Vu(_),Rl(null,_,se,K),_=_.child),_;case 16:Q=_.elementType;e:{switch(zA(m,_),m=_.pendingProps,se=Q._init,Q=se(Q._payload),_.type=Q,se=_.tag=pg(Q),m=ta(Q,m),se){case 0:_=fh(null,_,Q,m,K);break e;case 1:_=UA(null,_,Q,m,K);break e;case 11:_=ym(null,_,Q,m,K);break e;case 14:_=Up(null,_,Q,ta(Q.type,m),K);break e}throw Error(t(306,Q,""))}return _;case 0:return Q=_.type,se=_.pendingProps,se=_.elementType===Q?se:ta(Q,se),fh(m,_,Q,se,K);case 1:return Q=_.type,se=_.pendingProps,se=_.elementType===Q?se:ta(Q,se),UA(m,_,Q,se,K);case 3:e:{if(Hf(_),m===null)throw Error(t(387));Q=_.pendingProps,ye=_.memoizedState,se=ye.element,Gc(m,_),c(_,Q,null,K);var tt=_.memoizedState;if(Q=tt.element,ye.isDehydrated)if(ye={element:Q,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},_.updateQueue.baseState=ye,_.memoizedState=ye,_.flags&256){se=ku(Error(t(423)),_),_=Qc(m,_,Q,K,se);break e}else if(Q!==se){se=ku(Error(t(424)),_),_=Qc(m,_,Q,K,se);break e}else for(va=Qa(_.stateNode.containerInfo.firstChild),ol=_,gs=!0,$l=null,K=ri(_,null,Q,K),_.child=K;K;)K.flags=K.flags&-3|4096,K=K.sibling;else{if(Eu(),Q===se){_=vA(m,_,K);break e}Rl(m,_,Q,K)}_=_.child}return _;case 5:return Oe(_),m===null&&hA(_),Q=_.type,se=_.pendingProps,ye=m!==null?m.memoizedProps:null,tt=se.children,pc(Q,se)?tt=null:ye!==null&&pc(Q,ye)&&(_.flags|=32),Ph(m,_),Rl(m,_,tt,K),_.child;case 6:return m===null&&hA(_),null;case 13:return Dd(m,_,K);case 4:return Ae(_,_.stateNode.containerInfo),Q=_.pendingProps,m===null?_.child=vr(_,null,Q,K):Rl(m,_,Q,K),_.child;case 11:return Q=_.type,se=_.pendingProps,se=_.elementType===Q?se:ta(Q,se),ym(m,_,Q,se,K);case 7:return Rl(m,_,_.pendingProps,K),_.child;case 8:return Rl(m,_,_.pendingProps.children,K),_.child;case 12:return Rl(m,_,_.pendingProps.children,K),_.child;case 10:e:{if(Q=_.type._context,se=_.pendingProps,ye=_.memoizedProps,tt=se.value,Os(bc,Q._currentValue),Q._currentValue=tt,ye!==null)if(dn(ye.value,tt)){if(ye.children===se.children&&!gl.current){_=vA(m,_,K);break e}}else for(ye=_.child,ye!==null&&(ye.return=_);ye!==null;){var Ot=ye.dependencies;if(Ot!==null){tt=ye.child;for(var Qt=Ot.firstContext;Qt!==null;){if(Qt.context===Q){if(ye.tag===1){Qt=fA(-1,K&-K),Qt.tag=2;var Mn=ye.updateQueue;if(Mn!==null){Mn=Mn.shared;var sr=Mn.pending;sr===null?Qt.next=Qt:(Qt.next=sr.next,sr.next=Qt),Mn.pending=Qt}}ye.lanes|=K,Qt=ye.alternate,Qt!==null&&(Qt.lanes|=K),Ia(ye.return,K,_),Ot.lanes|=K;break}Qt=Qt.next}}else if(ye.tag===10)tt=ye.type===_.type?null:ye.child;else if(ye.tag===18){if(tt=ye.return,tt===null)throw Error(t(341));tt.lanes|=K,Ot=tt.alternate,Ot!==null&&(Ot.lanes|=K),Ia(tt,K,_),tt=ye.sibling}else tt=ye.child;if(tt!==null)tt.return=ye;else for(tt=ye;tt!==null;){if(tt===_){tt=null;break}if(ye=tt.sibling,ye!==null){ye.return=tt.return,tt=ye;break}tt=tt.return}ye=tt}Rl(m,_,se.children,K),_=_.child}return _;case 9:return se=_.type,Q=_.pendingProps.children,dA(_,K),se=Do(se),Q=Q(se),_.flags|=1,Rl(m,_,Q,K),_.child;case 14:return Q=_.type,se=ta(Q,_.pendingProps),se=ta(Q.type,se),Up(m,_,Q,se,K);case 15:return wo(m,_,_.type,_.pendingProps,K);case 17:return Q=_.type,se=_.pendingProps,se=_.elementType===Q?se:ta(Q,se),zA(m,_),_.tag=1,Bl(Q)?(m=!0,Js(_)):m=!1,dA(_,K),td(_,Q,se),Fp(_,Q,se,K),Pd(null,_,Q,!0,m,K);case 19:return tc(m,_,K);case 22:return vm(m,_,K)}throw Error(t(156,_.tag))};function n1(m,_){return da(m,_)}function Dl(m,_,K,Q){this.tag=m,this.key=K,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(m,_,K,Q){return new Dl(m,_,K,Q)}function r0(m){return m=m.prototype,!(!m||!m.isReactComponent)}function pg(m){if(typeof m=="function")return r0(m)?1:0;if(m!=null){if(m=m.$$typeof,m===Se)return 11;if(m===Me)return 14}return 2}function qc(m,_){var K=m.alternate;return K===null?(K=Mc(m.tag,_,m.key,m.mode),K.elementType=m.elementType,K.type=m.type,K.stateNode=m.stateNode,K.alternate=m,m.alternate=K):(K.pendingProps=_,K.type=m.type,K.flags=0,K.subtreeFlags=0,K.deletions=null),K.flags=m.flags&14680064,K.childLanes=m.childLanes,K.lanes=m.lanes,K.child=m.child,K.memoizedProps=m.memoizedProps,K.memoizedState=m.memoizedState,K.updateQueue=m.updateQueue,_=m.dependencies,K.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},K.sibling=m.sibling,K.index=m.index,K.ref=m.ref,K}function Wp(m,_,K,Q,se,ye){var tt=2;if(Q=m,typeof m=="function")r0(m)&&(tt=1);else if(typeof m=="string")tt=5;else e:switch(m){case G:return np(K.children,se,ye,_);case le:tt=8,se|=8;break;case fe:return m=Mc(12,K,_,se|2),m.elementType=fe,m.lanes=ye,m;case xe:return m=Mc(13,K,_,se),m.elementType=xe,m.lanes=ye,m;case je:return m=Mc(19,K,_,se),m.elementType=je,m.lanes=ye,m;case Ct:return i0(K,se,ye,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case pe:tt=10;break e;case we:tt=9;break e;case Se:tt=11;break e;case Me:tt=14;break e;case rt:tt=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return _=Mc(tt,K,_,se),_.elementType=m,_.type=Q,_.lanes=ye,_}function np(m,_,K,Q){return m=Mc(7,m,Q,_),m.lanes=K,m}function i0(m,_,K,Q){return m=Mc(22,m,Q,_),m.elementType=Ct,m.lanes=K,m.stateNode={isHidden:!1},m}function r1(m,_,K){return m=Mc(6,m,null,_),m.lanes=K,m}function i1(m,_,K){return _=Mc(4,m.children!==null?m.children:[],m.key,_),_.lanes=K,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function mg(m,_,K,Q,se){this.tag=_,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=Q,this.onRecoverableError=se,this.mutableSourceEagerHydrationData=null}function Au(m,_,K,Q,se,ye,tt,Ot,Qt){return m=new mg(m,_,K,Ot,Qt),_===1?(_=1,ye===!0&&(_|=8)):_=0,ye=Mc(3,null,null,_),m.current=ye,ye.stateNode=m,ye.memoizedState={element:Q,isDehydrated:K,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ih(ye),m}function o1(m,_,K){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:Q==null?null:""+Q,children:m,containerInfo:_,implementation:K}}function s1(m){if(!m)return nu;m=m._reactInternals;e:{if(Pi(m)!==m||m.tag!==1)throw Error(t(170));var _=m;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Bl(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(t(171))}if(m.tag===1){var K=m.type;if(Bl(K))return uh(m,K,_)}return _}function Nd(m,_,K,Q,se,ye,tt,Ot,Qt){return m=Au(K,Q,!0,m,se,ye,tt,Ot,Qt),m.context=s1(null),K=m.current,Q=nc(),se=Sf(K),ye=fA(Q,se),ye.callback=_??null,kl(K,ye,se),m.current.lanes=se,Ua(m,se,Q),rc(m,Q),m}function rp(m,_,K,Q){var se=_.current,ye=nc(),tt=Sf(se);return K=s1(K),_.context===null?_.context=K:_.pendingContext=K,_=fA(ye,tt),_.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(_.callback=Q),m=kl(se,_,tt),m!==null&&(ph(m,se,tt,ye),O(m,se,tt)),tt}function Of(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function ip(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var K=m.retryLane;m.retryLane=K!==0&&K<_?K:_}}function Qp(m,_){ip(m,_),(m=m.alternate)&&ip(m,_)}function o0(){return null}var gg=typeof reportError=="function"?reportError:function(m){console.error(m)};function s0(m){this._internalRoot=m}Yp.prototype.render=s0.prototype.render=function(m){var _=this._internalRoot;if(_===null)throw Error(t(409));rp(m,_,null,null)},Yp.prototype.unmount=s0.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var _=m.containerInfo;ep(function(){rp(null,m,null,null)}),_[cA]=null}};function Yp(m){this._internalRoot=m}Yp.prototype.unstable_scheduleHydration=function(m){if(m){var _=Wl();m={blockedOn:null,target:m,priority:_};for(var K=0;K<Hi.length&&_!==0&&_<Hi[K].priority;K++);Hi.splice(K,0,m),K===0&&EA(m)}};function a0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function l0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function a1(){}function yg(m,_,K,Q,se){if(se){if(typeof Q=="function"){var ye=Q;Q=function(){var Mn=Of(tt);ye.call(Mn)}}var tt=Nd(_,Q,m,0,null,!1,!1,"",a1);return m._reactRootContainer=tt,m[cA]=tt.current,kA(m.nodeType===8?m.parentNode:m),ep(),tt}for(;se=m.lastChild;)m.removeChild(se);if(typeof Q=="function"){var Ot=Q;Q=function(){var Mn=Of(Qt);Ot.call(Mn)}}var Qt=Au(m,0,!1,null,null,!1,!1,"",a1);return m._reactRootContainer=Qt,m[cA]=Qt.current,kA(m.nodeType===8?m.parentNode:m),ep(function(){rp(_,Qt,K,Q)}),Qt}function Gd(m,_,K,Q,se){var ye=K._reactRootContainer;if(ye){var tt=ye;if(typeof se=="function"){var Ot=se;se=function(){var Qt=Of(tt);Ot.call(Qt)}}rp(_,tt,m,se)}else tt=yg(K,_,m,se,Q);return Of(tt)}Oi=function(m){switch(m.tag){case 3:var _=m.stateNode;if(_.current.memoizedState.isDehydrated){var K=fs(_.pendingLanes);K!==0&&(Sa(_,K|1),rc(_,ci()),(xi&6)===0&&(Ld=ci()+500,ou()))}break;case 13:ep(function(){var Q=KA(m,1);if(Q!==null){var se=nc();ph(Q,m,1,se)}}),Qp(m,1)}},xl=function(m){if(m.tag===13){var _=KA(m,134217728);if(_!==null){var K=nc();ph(_,m,134217728,K)}Qp(m,134217728)}},Oo=function(m){if(m.tag===13){var _=Sf(m),K=KA(m,_);if(K!==null){var Q=nc();ph(K,m,_,Q)}Qp(m,_)}},Wl=function(){return bi},Di=function(m,_){var K=bi;try{return bi=m,_()}finally{bi=K}},Ve=function(m,_,K){switch(_){case"input":if(An(m,K),_=K.name,K.type==="radio"&&_!=null){for(K=m;K.parentNode;)K=K.parentNode;for(K=K.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<K.length;_++){var Q=K[_];if(Q!==m&&Q.form===m.form){var se=Bs(Q);if(!se)throw Error(t(90));vt(Q),An(Q,se)}}}break;case"textarea":Ir(m,K);break;case"select":_=K.value,_!=null&&Pn(m,!!K.multiple,_,!1)}},Gt=J0,nn=ep;var l1={usingClientEntryPoint:!1,Events:[Ro,ai,Bs,Ft,jt,J0]},Bm={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vg={bundleType:Bm.bundleType,version:Bm.version,rendererPackageName:Bm.rendererPackageName,rendererConfig:Bm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=_s(m),m===null?null:m.stateNode},findFiberByHostInstance:Bm.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var A0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!A0.isDisabled&&A0.supportsFiber)try{Jo=A0.inject(vg),qe=A0}catch{}}return ad.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l1,ad.createPortal=function(m,_){var K=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a0(_))throw Error(t(200));return o1(m,_,null,K)},ad.createRoot=function(m,_){if(!a0(m))throw Error(t(299));var K=!1,Q="",se=gg;return _!=null&&(_.unstable_strictMode===!0&&(K=!0),_.identifierPrefix!==void 0&&(Q=_.identifierPrefix),_.onRecoverableError!==void 0&&(se=_.onRecoverableError)),_=Au(m,1,!1,null,null,K,!1,Q,se),m[cA]=_.current,kA(m.nodeType===8?m.parentNode:m),new s0(_)},ad.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=_s(_),m=m===null?null:m.stateNode,m},ad.flushSync=function(m){return ep(m)},ad.hydrate=function(m,_,K){if(!l0(_))throw Error(t(200));return Gd(null,m,_,!0,K)},ad.hydrateRoot=function(m,_,K){if(!a0(m))throw Error(t(405));var Q=K!=null&&K.hydratedSources||null,se=!1,ye="",tt=gg;if(K!=null&&(K.unstable_strictMode===!0&&(se=!0),K.identifierPrefix!==void 0&&(ye=K.identifierPrefix),K.onRecoverableError!==void 0&&(tt=K.onRecoverableError)),_=Nd(_,null,m,1,K??null,se,!1,ye,tt),m[cA]=_.current,kA(m),Q)for(m=0;m<Q.length;m++)K=Q[m],se=K._getVersion,se=se(K._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[K,se]:_.mutableSourceEagerHydrationData.push(K,se);return new Yp(_)},ad.render=function(m,_,K){if(!l0(_))throw Error(t(200));return Gd(null,m,_,!1,K)},ad.unmountComponentAtNode=function(m){if(!l0(m))throw Error(t(40));return m._reactRootContainer?(ep(function(){Gd(null,null,m,!1,function(){m._reactRootContainer=null,m[cA]=null})}),!0):!1},ad.unstable_batchedUpdates=J0,ad.unstable_renderSubtreeIntoContainer=function(m,_,K,Q){if(!l0(K))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return Gd(m,_,K,!1,Q)},ad.version="18.3.1-next-f1338f8080-20240426",ad}var ZI;function Ax(){if(ZI)return H3.exports;ZI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),H3.exports=kj(),H3.exports}var XI;function Pj(){if(XI)return sb;XI=1;var n=Ax();return sb.createRoot=n.createRoot,sb.hydrateRoot=n.hydrateRoot,sb}var Rj=Pj();const Dj="modulepreload",Kj=function(n){return"/maputnik/"+n},JI={},wg=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let C=function(x){return Promise.all(x.map(B=>Promise.resolve(B).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};var l=C;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),f=o?.nonce||o?.getAttribute("nonce");i=C(t.map(x=>{if(x=Kj(x),x in JI)return;JI[x]=!0;const B=x.endsWith(".css"),R=B?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${R}`))return;const P=document.createElement("link");if(P.rel=B?"stylesheet":Dj,B||(P.as="script"),P.crossOrigin="",P.href=x,f&&P.setAttribute("nonce",f),document.head.appendChild(P),B)return new Promise((U,N)=>{P.addEventListener("load",U),P.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${x}`)))})}))}function s(o){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=o,window.dispatchEvent(f),!f.defaultPrevented)throw o}return i.then(o=>{for(const f of o||[])f.status==="rejected"&&s(f.reason);return e().catch(s)})},Fj=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Bo=n=>typeof n=="string",Mv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},e8=n=>n==null?"":""+n,Lj=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},Uj=/###/g,t8=n=>n&&n.indexOf("###")>-1?n.replace(Uj,"."):n,n8=n=>!n||Bo(n),iC=(n,e,t)=>{const r=Bo(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(n8(n))return{};const s=t8(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return n8(n)?{}:{obj:n,k:t8(r[i])}},r8=(n,e,t)=>{const{obj:r,k:i}=iC(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],l=e.slice(0,e.length-1),o=iC(n,l,Object);for(;o.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),o=iC(n,l,Object),o?.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},zj=(n,e,t,r)=>{const{obj:i,k:s}=iC(n,e,Object);i[s]=i[s]||[],i[s].push(t)},p2=(n,e)=>{const{obj:t,k:r}=iC(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},Nj=(n,e,t)=>{const r=p2(n,t);return r!==void 0?r:p2(e,t)},hF=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Bo(n[r])||n[r]instanceof String||Bo(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):hF(n[r],e[r],t):n[r]=e[r]);return n},Sg=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Gj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jj=n=>Bo(n)?n.replace(/[&<>"'\/]/g,e=>Gj[e]):n;class Wj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Qj=[" ",",","?","!",";"],Yj=new Wj(20),qj=(n,e,t)=>{e=e||"",t=t||"";const r=Qj.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(r.length===0)return!0;const i=Yj.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!i.test(n);if(!s){const l=n.indexOf(t);l>0&&!i.test(n.substring(0,l))&&(s=!0)}return s},XE=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let l,o="";for(let f=s;f<r.length;++f)if(f!==s&&(o+=t),o+=r[f],l=i[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&f<r.length-1)continue;s+=f-s+1;break}i=l}return i},CC=n=>n?.replace("_","-"),$j={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class m2{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||$j,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(Bo(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new m2(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new m2(this.logger,e)}}var tm=new m2;class ux{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let l=0;l<s;l++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let l=0;l<s;l++)i.apply(i,[e,...t])})}}class i8 extends ux{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Bo(r)&&s?o.push(...r.split(s)):o.push(r)));const f=p2(this.data,o);return!f&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),f||!l||!Bo(r)?f:XE(this.data?.[e]?.[t],r,s)}addResource(e,t,r,i,s={silent:!1}){const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),r8(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const s in r)(Bo(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s,l={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let f=p2(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?hF(f,r,s):f={...f,...r},r8(this.data,o,f),l.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var dF={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{e=this.processors[s]?.process(e,t,r,i)??e}),e}};const o8={},s8=n=>!Bo(n)&&typeof n!="boolean"&&typeof n!="number";class g2 extends ux{constructor(e,t={}){super(),Lj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=tm.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!qj(e,r,i);if(l&&!o){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:Bo(s)?[s]:s};const C=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(C[0])>-1)&&(s=C.shift()),e=C.join(i)}return{key:e,namespaces:Bo(s)?[s]:s}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:o,namespaces:f}=this.extractFromKey(e[e.length-1],i),C=f[f.length-1];let x=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;x===void 0&&(x=":");const B=i.lng||this.language,R=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(B?.toLowerCase()==="cimode")return R?s?{res:`${C}${x}${o}`,usedKey:o,exactUsedKey:o,usedLng:B,usedNS:C,usedParams:this.getUsedParamsDetails(i)}:`${C}${x}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:B,usedNS:C,usedParams:this.getUsedParamsDetails(i)}:o;const P=this.resolve(e,i);let U=P?.res;const N=P?.usedKey||o,W=P?.exactUsedKey||o,X=["[object Number]","[object Function]","[object RegExp]"],$=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,re=!this.i18nFormat||this.i18nFormat.handleAsObject,te=i.count!==void 0&&!Bo(i.count),V=g2.hasDefaultValue(i),ne=te?this.pluralResolver.getSuffix(B,i.count,i):"",G=i.ordinal&&te?this.pluralResolver.getSuffix(B,i.count,{ordinal:!1}):"",le=te&&!i.ordinal&&i.count===0,fe=le&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${ne}`]||i[`defaultValue${G}`]||i.defaultValue;let pe=U;re&&!U&&V&&(pe=fe);const we=s8(pe),Se=Object.prototype.toString.apply(pe);if(re&&pe&&we&&X.indexOf(Se)<0&&!(Bo($)&&Array.isArray(pe))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const xe=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,pe,{...i,ns:f}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(P.res=xe,P.usedParams=this.getUsedParamsDetails(i),P):xe}if(l){const xe=Array.isArray(pe),je=xe?[]:{},Me=xe?W:N;for(const rt in pe)if(Object.prototype.hasOwnProperty.call(pe,rt)){const Ct=`${Me}${l}${rt}`;V&&!U?je[rt]=this.translate(Ct,{...i,defaultValue:s8(fe)?fe[rt]:void 0,joinArrays:!1,ns:f}):je[rt]=this.translate(Ct,{...i,joinArrays:!1,ns:f}),je[rt]===Ct&&(je[rt]=pe[rt])}U=je}}else if(re&&Bo($)&&Array.isArray(U))U=U.join($),U&&(U=this.extendTranslation(U,e,i,r));else{let xe=!1,je=!1;!this.isValidLookup(U)&&V&&(xe=!0,U=fe),this.isValidLookup(U)||(je=!0,U=o);const rt=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&je?void 0:U,Ct=V&&fe!==U&&this.options.updateMissing;if(je||xe||Ct){if(this.logger.log(Ct?"updateKey":"missingKey",B,C,o,Ct?fe:U),l){const Ie=this.resolve(o,{...i,keySeparator:!1});Ie&&Ie.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let it=[];const nt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&nt&&nt[0])for(let Ie=0;Ie<nt.length;Ie++)it.push(nt[Ie]);else this.options.saveMissingTo==="all"?it=this.languageUtils.toResolveHierarchy(i.lng||this.language):it.push(i.lng||this.language);const Ge=(Ie,$e,gt)=>{const Dt=V&&gt!==U?gt:rt;this.options.missingKeyHandler?this.options.missingKeyHandler(Ie,C,$e,Dt,Ct,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Ie,C,$e,Dt,Ct,i),this.emit("missingKey",Ie,C,$e,U)};this.options.saveMissing&&(this.options.saveMissingPlurals&&te?it.forEach(Ie=>{const $e=this.pluralResolver.getSuffixes(Ie,i);le&&i[`defaultValue${this.options.pluralSeparator}zero`]&&$e.indexOf(`${this.options.pluralSeparator}zero`)<0&&$e.push(`${this.options.pluralSeparator}zero`),$e.forEach(gt=>{Ge([Ie],o+gt,i[`defaultValue${gt}`]||fe)})}):Ge(it,o,fe))}U=this.extendTranslation(U,e,i,P,r),je&&U===o&&this.options.appendNamespaceToMissingKey&&(U=`${C}${x}${o}`),(je||xe)&&this.options.parseMissingKeyHandler&&(U=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${C}${x}${o}`:o,xe?U:void 0,i))}return s?(P.res=U,P.usedParams=this.getUsedParamsDetails(i),P):U}extendTranslation(e,t,r,i,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=Bo(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let C;if(f){const B=e.match(this.interpolator.nestingRegexp);C=B&&B.length}let x=r.replace&&!Bo(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),e=this.interpolator.interpolate(e,x,r.lng||this.language||i.usedLng,r),f){const B=e.match(this.interpolator.nestingRegexp),R=B&&B.length;C<R&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...B)=>s?.[0]===B[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${B[0]} in key: ${t[0]}`),null):this.translate(...B,t),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,o=Bo(l)?[l]:l;return e!=null&&o?.length&&r.applyPostProcessor!==!1&&(e=dF.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,s,l,o;return Bo(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const C=this.extractFromKey(f,t),x=C.key;i=x;let B=C.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const R=t.count!==void 0&&!Bo(t.count),P=R&&!t.ordinal&&t.count===0,U=t.context!==void 0&&(Bo(t.context)||typeof t.context=="number")&&t.context!=="",N=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(W=>{this.isValidLookup(r)||(o=W,!o8[`${N[0]}-${W}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(o8[`${N[0]}-${W}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(X=>{if(this.isValidLookup(r))return;l=X;const $=[x];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys($,x,X,W,t);else{let te;R&&(te=this.pluralResolver.getSuffix(X,t.count,t));const V=`${this.options.pluralSeparator}zero`,ne=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(R&&(t.ordinal&&te.indexOf(ne)===0&&$.push(x+te.replace(ne,this.options.pluralSeparator)),$.push(x+te),P&&$.push(x+V)),U){const G=`${x}${this.options.contextSeparator||"_"}${t.context}`;$.push(G),R&&(t.ordinal&&te.indexOf(ne)===0&&$.push(G+te.replace(ne,this.options.pluralSeparator)),$.push(G+te),P&&$.push(G+V))}}let re;for(;re=$.pop();)this.isValidLookup(r)||(s=re,r=this.getResource(X,W,re,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Bo(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class a8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=tm.create("languageUtils")}getScriptPartFromCode(e){if(e=CC(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=CC(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Bo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(l=>{if(l===s)return l;if(!(l.indexOf("-")<0&&s.indexOf("-")<0)&&(l.indexOf("-")>0&&s.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===s||l.indexOf(s)===0&&s.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Bo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],s=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Bo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Bo(e)&&s(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&s(this.formatLanguageCode(l))}),i}}const l8={zero:0,one:1,two:2,few:3,many:4,other:5},A8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Vj{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=tm.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=CC(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let l;try{l=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),A8;if(!e.match(/-|_/))return A8;const f=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(f,t)}return this.pluralRulesCache[s]=l,l}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>l8[i]-l8[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const u8=(n,e,t,r=".",i=!0)=>{let s=Nj(n,e,t);return!s&&i&&Bo(t)&&(s=XE(n,t,r),s===void 0&&(s=XE(e,t,r))),s},J3=n=>n.replace(/\$/g,"$$$$");class Hj{constructor(e={}){this.logger=tm.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:l,suffix:o,suffixEscaped:f,formatSeparator:C,unescapeSuffix:x,unescapePrefix:B,nestingPrefix:R,nestingPrefixEscaped:P,nestingSuffix:U,nestingSuffixEscaped:N,nestingOptionsSeparator:W,maxReplaces:X,alwaysFormat:$}=e.interpolation;this.escape=t!==void 0?t:jj,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Sg(s):l||"{{",this.suffix=o?Sg(o):f||"}}",this.formatSeparator=C||",",this.unescapePrefix=x?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=R?Sg(R):P||Sg("$t("),this.nestingSuffix=U?Sg(U):N||Sg(")"),this.nestingOptionsSeparator=W||",",this.maxReplaces=X||1e3,this.alwaysFormat=$!==void 0?$:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let s,l,o;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},C=P=>{if(P.indexOf(this.formatSeparator)<0){const X=u8(t,f,P,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(X,void 0,r,{...i,...t,interpolationkey:P}):X}const U=P.split(this.formatSeparator),N=U.shift().trim(),W=U.join(this.formatSeparator).trim();return this.format(u8(t,f,N,this.options.keySeparator,this.options.ignoreJSONStructure),W,r,{...i,...t,interpolationkey:N})};this.resetRegExp();const x=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,B=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:P=>J3(P)},{regex:this.regexp,safeValue:P=>this.escapeValue?J3(this.escape(P)):J3(P)}].forEach(P=>{for(o=0;s=P.regex.exec(e);){const U=s[1].trim();if(l=C(U),l===void 0)if(typeof x=="function"){const W=x(e,s,i);l=Bo(W)?W:""}else if(i&&Object.prototype.hasOwnProperty.call(i,U))l="";else if(B){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${U} for interpolating ${e}`),l="";else!Bo(l)&&!this.useRawValueToEscape&&(l=e8(l));const N=P.safeValue(l);if(e=e.replace(s[0],N),B?(P.regex.lastIndex+=l.length,P.regex.lastIndex-=s[0].length):P.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,s,l;const o=(f,C)=>{const x=this.nestingOptionsSeparator;if(f.indexOf(x)<0)return f;const B=f.split(new RegExp(`${x}[ ]*{`));let R=`{${B[1]}`;f=B[0],R=this.interpolate(R,l);const P=R.match(/'/g),U=R.match(/"/g);((P?.length??0)%2===0&&!U||U.length%2!==0)&&(R=R.replace(/'/g,'"'));try{l=JSON.parse(R),C&&(l={...C,...l})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,N),`${f}${x}${R}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,f};for(;i=this.nestingRegexp.exec(e);){let f=[];l={...r},l=l.replace&&!Bo(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const C=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(C!==-1&&(f=i[1].slice(C).split(this.formatSeparator).map(x=>x.trim()).filter(Boolean),i[1]=i[1].slice(0,C)),s=t(o.call(this,i[1].trim(),l),l),s&&i[0]===e&&!Bo(s))return s;Bo(s)||(s=e8(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),f.length&&(s=f.reduce((x,B)=>this.format(x,B,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const Zj=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[o,...f]=l.split(":"),C=f.join(":").trim().replace(/^'+|'+$/g,""),x=o.trim();t[x]||(t[x]=C),C==="false"&&(t[x]=!1),C==="true"&&(t[x]=!0),isNaN(C)||(t[x]=parseInt(C,10))}})}return{formatName:e,formatOptions:t}},c8=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const l=r+JSON.stringify(s);let o=e[l];return o||(o=n(CC(r),i),e[l]=o),o(t)}},Xj=n=>(e,t,r)=>n(CC(t),r)(e);class Jj{constructor(e={}){this.logger=tm.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?c8:Xj;this.formats={number:r((i,s)=>{const l=new Intl.NumberFormat(i,{...s});return o=>l.format(o)}),currency:r((i,s)=>{const l=new Intl.NumberFormat(i,{...s,style:"currency"});return o=>l.format(o)}),datetime:r((i,s)=>{const l=new Intl.DateTimeFormat(i,{...s});return o=>l.format(o)}),relativetime:r((i,s)=>{const l=new Intl.RelativeTimeFormat(i,{...s});return o=>l.format(o,s.range||"day")}),list:r((i,s)=>{const l=new Intl.ListFormat(i,{...s});return o=>l.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=c8(t)}format(e,t,r,i={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(f=>f.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,f)=>{const{formatName:C,formatOptions:x}=Zj(f);if(this.formats[C]){let B=o;try{const R=i?.formatParams?.[i.interpolationkey]||{},P=R.locale||R.lng||i.locale||i.lng||r;B=this.formats[C](o,P,{...x,...i,...R})}catch(R){this.logger.warn(R)}return B}else this.logger.warn(`there was no format function for ${C}`);return o},e)}}const eW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class tW extends ux{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=tm.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const s={},l={},o={},f={};return e.forEach(C=>{let x=!0;t.forEach(B=>{const R=`${C}|${B}`;!r.reload&&this.store.hasResourceBundle(C,B)?this.state[R]=2:this.state[R]<0||(this.state[R]===1?l[R]===void 0&&(l[R]=!0):(this.state[R]=1,x=!1,l[R]===void 0&&(l[R]=!0),s[R]===void 0&&(s[R]=!0),f[B]===void 0&&(f[B]=!0)))}),x||(o[C]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(f)}}loaded(e,t,r){const i=e.split("|"),s=i[0],l=i[1];t&&this.emit("failedLoading",s,l,t),!t&&r&&this.store.addResourceBundle(s,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(f=>{zj(f.loaded,[s],l),eW(f,e),t&&f.errors.push(t),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(C=>{o[C]||(o[C]={});const x=f.loaded[C];x.length&&x.forEach(B=>{o[C][B]===void 0&&(o[C][B]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(f=>!f.done)}read(e,t,r,i=0,s=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:l});return}this.readingCalls++;const o=(C,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(C&&x&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,l)},s);return}l(C,x)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const C=f(e,t);C&&typeof C.then=="function"?C.then(x=>o(null,x)).catch(o):o(null,C)}catch(C){o(C)}return}return f(e,t,o)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Bo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Bo(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,l,o)})}saveMissing(e,t,r,i,s,l={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const f={...l,isUpdate:s},C=this.backend.create.bind(this.backend);if(C.length<6)try{let x;C.length===5?x=C(e,t,r,i,f):x=C(e,t,r,i),x&&typeof x.then=="function"?x.then(B=>o(null,B)).catch(o):o(null,x)}catch(x){o(x)}else C(e,t,r,i,o,f)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const h8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Bo(n[1])&&(e.defaultValue=n[1]),Bo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),d8=n=>(Bo(n.ns)&&(n.ns=[n.ns]),Bo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Bo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),ab=()=>{},nW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class _C extends ux{constructor(e={},t){if(super(),this.options=d8(e),this.services={},this.logger=tm,this.modules={external:[]},nW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Bo(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=h8();this.options={...r,...this.options,...d8(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=C=>C?typeof C=="function"?new C:C:null;if(!this.options.isClone){this.modules.logger?tm.init(i(this.modules.logger),this.options):tm.init(null,this.options);let C;this.modules.formatter?C=this.modules.formatter:C=Jj;const x=new a8(this.options);this.store=new i8(this.options.resources,this.options);const B=this.services;B.logger=tm,B.resourceStore=this.store,B.languageUtils=x,B.pluralResolver=new Vj(x,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),C&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(B.formatter=i(C),B.formatter.init&&B.formatter.init(B,this.options),this.options.interpolation.format=B.formatter.format.bind(B.formatter)),B.interpolator=new Hj(this.options),B.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},B.backendConnector=new tW(i(this.modules.backend),B.resourceStore,B,this.options),B.backendConnector.on("*",(P,...U)=>{this.emit(P,...U)}),this.modules.languageDetector&&(B.languageDetector=i(this.modules.languageDetector),B.languageDetector.init&&B.languageDetector.init(B,this.options.detection,this.options)),this.modules.i18nFormat&&(B.i18nFormat=i(this.modules.i18nFormat),B.i18nFormat.init&&B.i18nFormat.init(this)),this.translator=new g2(this.services,this.options),this.translator.on("*",(P,...U)=>{this.emit(P,...U)}),this.modules.external.forEach(P=>{P.init&&P.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ab),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const C=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);C.length>0&&C[0]!=="dev"&&(this.options.lng=C[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(C=>{this[C]=(...x)=>this.store[C](...x)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(C=>{this[C]=(...x)=>(this.store[C](...x),this)});const o=Mv(),f=()=>{const C=(x,B)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(B),t(x,B)};if(this.languages&&!this.isInitialized)return C(null,this.t.bind(this));this.changeLanguage(this.options.lng,C)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),o}loadResources(e,t=ab){let r=t;const i=Bo(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(C=>{C!=="cimode"&&s.indexOf(C)<0&&s.push(C)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>l(f)),this.options.preload?.forEach?.(o=>l(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(e,t,r){const i=Mv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=ab),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&dF.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Mv();this.emit("languageChanging",e);const i=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},s=(o,f)=>{f?this.isLanguageChangingTo===e&&(i(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,r.resolve((...C)=>this.t(...C)),t&&t(o,(...C)=>this.t(...C))},l=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const f=Bo(o)?o:o&&o[0],C=this.store.hasLanguageSomeTranslations(f)?f:this.services.languageUtils.getBestMatchFromCodes(Bo(o)?[o]:o);C&&(this.language||i(C),this.translator.language||this.translator.changeLanguage(C),this.services.languageDetector?.cacheUserLanguage?.(C)),this.loadResources(C,x=>{s(x,C)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,t,r){const i=(s,l,...o)=>{let f;typeof l!="object"?f=this.options.overloadTranslationOptionHandler([s,l].concat(o)):f={...l},f.lng=f.lng||i.lng,f.lngs=f.lngs||i.lngs,f.ns=f.ns||i.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||i.keyPrefix);const C=this.options.keySeparator||".";let x;return f.keyPrefix&&Array.isArray(s)?x=s.map(B=>`${f.keyPrefix}${C}${B}`):x=f.keyPrefix?`${f.keyPrefix}${C}${s}`:s,this.t(x,f)};return Bo(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,f)=>{const C=this.services.backendConnector.state[`${o}|${f}`];return C===-1||C===0||C===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(s,e)))}loadNamespaces(e,t){const r=Mv();return this.options.ns?(Bo(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Mv();Bo(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=i.concat(s),this.loadResources(l=>{r.resolve(),t&&t(l)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const s=i.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new a8(h8());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new _C(e,t)}cloneInstance(e={},t=ab){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new _C(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((f,C)=>(f[C]={...this.store.data[C]},f[C]=Object.keys(f[C]).reduce((x,B)=>(x[B]={...f[C][B]},x),f[C]),f),{});s.store=new i8(o,i),s.services.resourceStore=s.store}return s.translator=new g2(s.services,i),s.translator.on("*",(o,...f)=>{s.emit(o,...f)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const th=_C.createInstance();th.createInstance=_C.createInstance;th.createInstance;th.dir;th.init;th.loadResources;th.reloadResources;th.use;th.changeLanguage;th.getFixedT;th.t;th.exists;th.setDefaultNamespace;th.hasLoadedNamespace;th.loadNamespaces;th.loadLanguages;const{slice:rW,forEach:iW}=[];function oW(n){return iW.call(rW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function sW(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const f8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,aW=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!f8.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!f8.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},p8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=aW(n,e,i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var lW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return p8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&p8.create(t,n,r,i,s)}},AW={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const s=r.substring(1).split("&");for(let l=0;l<s.length;l++){const o=s[l].indexOf("=");o>0&&s[l].substring(0,o)===e&&(t=s[l].substring(o+1))}}return t}},uW={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const s=i.substring(1);if(e){const l=s.split("&");for(let o=0;o<l.length;o++){const f=l[o].indexOf("=");f>0&&l[o].substring(0,f)===e&&(r=l[o].substring(f+1))}}if(r)return r;if(!r&&t>-1){const l=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return r}};let Eg=null;const m8=()=>{if(Eg!==null)return Eg;try{if(Eg=typeof window<"u"&&window.localStorage!==null,!Eg)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Eg=!1}return Eg};var cW={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&m8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&m8()&&window.localStorage.setItem(t,n)}};let Bg=null;const g8=()=>{if(Bg!==null)return Bg;try{if(Bg=typeof window<"u"&&window.sessionStorage!==null,!Bg)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Bg=!1}return Bg};var hW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&g8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&g8()&&window.sessionStorage.setItem(t,n)}},dW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},fW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},pW={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},mW={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};let fF=!1;try{document.cookie,fF=!0}catch{}const pF=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];fF||pF.splice(1,1);const gW=()=>({order:pF,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class mF{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=oW(t,this.options||{},gW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(lW),this.addDetector(AW),this.addDetector(cW),this.addDetector(hW),this.addDetector(dW),this.addDetector(fW),this.addDetector(pW),this.addDetector(mW),this.addDetector(uW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.filter(r=>r!=null&&!sW(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}mF.type="languageDetector";var yW=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var l=e(r,i);l&&typeof l.then=="function"?l.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,l)}catch(o){s(o)}return}e(r,i,s);return}s(null,e&&e[r]&&e[r][i])}}},e4,y8;function vW(){return y8||(y8=1,e4={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),e4}var CW=vW();const _W=Gl(CW);var bW=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function v8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(_W[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(bW),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var xW=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,MW=/^\s*$/,wW=Object.create(null);function gF(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(gF,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var SW={parse:function(n,e){e||(e={}),e.components||(e.components=wW);var t,r=[],i=[],s=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(xW,function(f,C){if(l){if(f!=="</"+t.name+">")return;l=!1}var x,B=f.charAt(1)!=="/",R=f.startsWith("<!--"),P=C+f.length,U=n.charAt(P);if(R){var N=v8(f);return s<0?(r.push(N),r):((x=i[s]).children.push(N),r)}if(B&&(s++,(t=v8(f)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!U||U==="<"||t.children.push({type:"text",content:n.slice(P,n.indexOf("<",P))}),s===0&&r.push(t),(x=i[s-1])&&x.children.push(t),i[s]=t),(!B||t.voidElement)&&(s>-1&&(t.voidElement||t.name===f.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!l&&U!=="<"&&U)){x=s===-1?r:i[s].children;var W=n.indexOf("<",P),X=n.slice(P,W===-1?void 0:W);MW.test(X)&&(X=" "),(W>-1&&s+x.length>=0||X!==" ")&&x.push({type:"text",content:X})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+gF("",t)},"")}};const Jb=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);of(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},C8={},bC=(n,e,t,r)=>{of(t)&&C8[t]||(of(t)&&(C8[t]=new Date),Jb(n,e,t,r))},yF=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},JE=(n,e,t)=>{n.loadNamespaces(e,yF(n,t))},_8=(n,e,t,r)=>{if(of(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return JE(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,yF(n,r))},EW=(n,e,t={})=>!e.languages||!e.languages.length?(bC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),BW=n=>n.displayName||n.name||(of(n)&&n.length>0?n:"Unknown"),of=n=>typeof n=="string",T0=n=>typeof n=="object"&&n!==null,OW=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,IW={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},TW=n=>IW[n],kW=n=>n.replace(OW,TW);let e6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:kW};const PW=(n={})=>{e6={...e6,...n}},vF=()=>e6;let CF;const RW=n=>{CF=n},pB=()=>CF,t4=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},n4=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?uy(e):e},DW=n=>Array.isArray(n)&&n.every(nr.isValidElement),uy=n=>Array.isArray(n)?n:[n],KW=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},_F=(n,e,t,r)=>{if(!n)return"";let i="";const s=uy(n),l=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,f)=>{if(of(o)){i+=`${o}`;return}if(nr.isValidElement(o)){const{props:C,type:x}=o,B=Object.keys(C).length,R=l.indexOf(x)>-1,P=C.children;if(!P&&R&&!B){i+=`<${x}/>`;return}if(!P&&(!R||B)||C.i18nIsDynamicList){i+=`<${f}></${f}>`;return}if(R&&B===1&&of(P)){i+=`<${x}>${P}</${x}>`;return}const U=_F(P,e,t,r);i+=`<${f}>${U}</${f}>`;return}if(o===null){Jb(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(T0(o)){const{format:C,...x}=o,B=Object.keys(x);if(B.length===1){const R=C?`${B[0]}, ${C}`:B[0];i+=`{{${R}}}`;return}Jb(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}Jb(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},FW=(n,e,t,r,i,s,l)=>{if(t==="")return[];const o=i.transKeepBasicHtmlNodesFor||[],f=t&&new RegExp(o.map(X=>`<${X}`).join("|")).test(t);if(!n&&!e&&!f&&!l)return[t];const C=e??{},x=X=>{uy(X).forEach(re=>{of(re)||(t4(re)?x(n4(re)):T0(re)&&!nr.isValidElement(re)&&Object.assign(C,re))})};x(n);const B=SW.parse(`<0>${t}</0>`),R={...C,...s},P=(X,$,re)=>{const te=n4(X),V=N(te,$.children,re);return DW(te)&&V.length===0||X.props?.i18nIsDynamicList?te:V},U=(X,$,re,te,V)=>{X.dummy?(X.children=$,re.push(nr.cloneElement(X,{key:te},V?void 0:$))):re.push(...nr.Children.map([X],ne=>{const G={...ne.props};return delete G.i18nIsDynamicList,nr.createElement(ne.type,{...G,key:te,ref:ne.props.ref??ne.ref},V?null:$)}))},N=(X,$,re)=>{const te=uy(X);return uy($).reduce((ne,G,le)=>{const fe=G.children?.[0]?.content&&r.services.interpolator.interpolate(G.children[0].content,R,r.language);if(G.type==="tag"){let pe=te[parseInt(G.name,10)];!pe&&e&&(pe=e[G.name]),re.length===1&&!pe&&(pe=re[0][G.name]),pe||(pe={});const we=Object.keys(G.attrs).length!==0?KW({props:G.attrs},pe):pe,Se=nr.isValidElement(we),xe=Se&&t4(G,!0)&&!G.voidElement,je=f&&T0(we)&&we.dummy&&!Se,Me=T0(e)&&Object.hasOwnProperty.call(e,G.name);if(of(we)){const rt=r.services.interpolator.interpolate(we,R,r.language);ne.push(rt)}else if(t4(we)||xe){const rt=P(we,G,re);U(we,rt,ne,le)}else if(je){const rt=N(te,G.children,re);U(we,rt,ne,le)}else if(Number.isNaN(parseFloat(G.name)))if(Me){const rt=P(we,G,re);U(we,rt,ne,le,G.voidElement)}else if(i.transSupportBasicHtmlNodes&&o.indexOf(G.name)>-1)if(G.voidElement)ne.push(nr.createElement(G.name,{key:`${G.name}-${le}`}));else{const rt=N(te,G.children,re);ne.push(nr.createElement(G.name,{key:`${G.name}-${le}`},rt))}else if(G.voidElement)ne.push(`<${G.name} />`);else{const rt=N(te,G.children,re);ne.push(`<${G.name}>${rt}</${G.name}>`)}else if(T0(we)&&!Se){const rt=G.children[0]?fe:null;rt&&ne.push(rt)}else U(we,fe,ne,le,G.children.length!==1||!fe)}else if(G.type==="text"){const pe=i.transWrapTextNodes,we=l?i.unescape(r.services.interpolator.interpolate(G.content,R,r.language)):r.services.interpolator.interpolate(G.content,R,r.language);pe?ne.push(nr.createElement(pe,{key:`${G.name}-${le}`},we)):ne.push(we)}return ne},[])},W=N([{dummy:!0,children:n||[]}],B,uy(n||[]));return n4(W[0])},bF=(n,e,t)=>{const r=n.key||e,i=nr.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return nr.createElement(nr.Fragment,null,i)}return nr.createElement(s,{key:r})},LW=(n,e)=>n.map((t,r)=>bF(t,r,e)),UW=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:bF(n[r],r,e)})}),t},zW=(n,e,t,r)=>n?Array.isArray(n)?LW(n,e):T0(n)?UW(n,e):(bC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,NW=n=>!T0(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function GW({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:f,ns:C,i18n:x,t:B,shouldUnescape:R,...P}){const U=x||pB();if(!U)return bC(U,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const N=B||U.t.bind(U)||(je=>je),W={...vF(),...U.options?.react};let X=C||N.ns||U.options?.defaultNS;X=of(X)?[X]:X||["translation"];const $=_F(n,W,U,r),re=o||$||W.transEmptyNodeValue||r,{hashTransKey:te}=W,V=r||(te?te($||re):$||re);U.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...U.options.interpolation.defaultVariables}:{...U.options.interpolation.defaultVariables});const ne=l||e!==void 0&&!U.options?.interpolation?.alwaysFormat||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},G={...s,context:i||s.context,count:e,...l,...ne,defaultValue:re,ns:X},le=V?N(V,G):re,fe=zW(f,le,U,r);let pe=fe||n,we=null;NW(fe)&&(we=fe,pe=n);const Se=FW(pe,we,le,U,W,G,R),xe=t??W.defaultTransParent;return xe?nr.createElement(xe,P,Se):Se}const jW={type:"3rdParty",init(n){PW(n.options.react),RW(n)}},xF=nr.createContext();class WW{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function U0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:f,ns:C,i18n:x,t:B,shouldUnescape:R,...P}){const{i18n:U,defaultNS:N}=nr.useContext(xF)||{},W=x||U||pB(),X=B||W?.t.bind(W);return GW({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:f,ns:C||X?.ns||N||W?.options?.defaultNS,i18n:W,t:B,shouldUnescape:R,...P})}const QW=(n,e)=>{const t=nr.useRef();return nr.useEffect(()=>{t.current=n},[n,e]),t.current},MF=(n,e,t,r)=>n.getFixedT(e,t,r),YW=(n,e,t,r)=>nr.useCallback(MF(n,e,t,r),[n,e,t,r]),qW=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=nr.useContext(xF)||{},s=t||r||pB();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new WW),!s){bC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const te=(ne,G)=>of(G)?G:T0(G)&&of(G.defaultValue)?G.defaultValue:Array.isArray(ne)?ne[ne.length-1]:ne,V=[te,{},!1];return V.t=te,V.i18n={},V.ready=!1,V}s.options.react?.wait&&bC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...vF(),...s.options.react,...e},{useSuspense:o,keyPrefix:f}=l;let C=i||s.options?.defaultNS;C=of(C)?[C]:C||["translation"],s.reportNamespaces.addUsedNamespaces?.(C);const x=(s.isInitialized||s.initializedStoreOnce)&&C.every(te=>EW(te,s,l)),B=YW(s,e.lng||null,l.nsMode==="fallback"?C:C[0],f),R=()=>B,P=()=>MF(s,e.lng||null,l.nsMode==="fallback"?C:C[0],f),[U,N]=nr.useState(R);let W=C.join();e.lng&&(W=`${e.lng}${W}`);const X=QW(W),$=nr.useRef(!0);nr.useEffect(()=>{const{bindI18n:te,bindI18nStore:V}=l;$.current=!0,!x&&!o&&(e.lng?_8(s,e.lng,C,()=>{$.current&&N(P)}):JE(s,C,()=>{$.current&&N(P)})),x&&X&&X!==W&&$.current&&N(P);const ne=()=>{$.current&&N(P)};return te&&s?.on(te,ne),V&&s?.store.on(V,ne),()=>{$.current=!1,s&&te&&te?.split(" ").forEach(G=>s.off(G,ne)),V&&s&&V.split(" ").forEach(G=>s.store.off(G,ne))}},[s,W]),nr.useEffect(()=>{$.current&&x&&N(R)},[s,f,x]);const re=[U,s,x];if(re.t=U,re.i18n=s,re.ready=x,x||!x&&!o)return re;throw new Promise(te=>{e.lng?_8(s,e.lng,C,()=>te()):JE(s,C,()=>te())})},Us=(n,e={})=>function(r){function i({forwardedRef:l,...o}){const[f,C,x]=qW(n,{...o,keyPrefix:e.keyPrefix}),B={...o,t:f,i18n:C,tReady:x};return e.withRef&&l?B.ref=l:!e.withRef&&l&&(B.forwardedRef=l),nr.createElement(r,B)}i.displayName=`withI18nextTranslation(${BW(r)})`,i.WrappedComponent=r;const s=(l,o)=>nr.createElement(i,Object.assign({},l,{forwardedRef:o}));return e.withRef?nr.forwardRef(s):i};function Xa(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xa=function(){return l},l}Xa();const wF=(Xa().s[0]++,{de:"Deutsch",en:"English",fr:"Français",he:"עברית",it:"Italiano",ja:"日本語",zh:"简体中文"});Xa().s[1]++;th.use(mF).use(yW((n,e)=>(Xa().f[0]++,Xa().s[2]++,n==="en"?(Xa().b[0][0]++,Xa().s[3]++,{}):(Xa().b[0][1]++,Xa().s[4]++,Fj(Object.assign({"./locales/de/translation.json":()=>(Xa().f[1]++,Xa().s[5]++,wg(()=>import("./translation-CaB-Jdko.js"),[])),"./locales/fr/translation.json":()=>(Xa().f[2]++,Xa().s[6]++,wg(()=>import("./translation-BJ5cSZoo.js"),[])),"./locales/he/translation.json":()=>(Xa().f[3]++,Xa().s[7]++,wg(()=>import("./translation-VlVlGlnr.js"),[])),"./locales/it/translation.json":()=>(Xa().f[4]++,Xa().s[8]++,wg(()=>import("./translation-BYOLCo4p.js"),[])),"./locales/ja/translation.json":()=>(Xa().f[5]++,Xa().s[9]++,wg(()=>import("./translation-J5Mg3mnT.js"),[])),"./locales/zh/translation.json":()=>(Xa().f[6]++,Xa().s[10]++,wg(()=>import("./translation-xuFaS6_2.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(jW).init({supportedLngs:Object.keys(wF),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Xa().f[7]++,Xa().s[11]++,n[0]==="en"){Xa().b[1][0]++,Xa().s[12]++;return}else Xa().b[1][1]++;Xa().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var Uv={exports:{}};Uv.exports;var b8;function $W(){return b8||(b8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",l="[object Array]",o="[object Boolean]",f="[object Date]",C="[object Error]",x="[object Function]",B="[object GeneratorFunction]",R="[object Map]",P="[object Number]",U="[object Object]",N="[object Promise]",W="[object RegExp]",X="[object Set]",$="[object String]",re="[object Symbol]",te="[object WeakMap]",V="[object ArrayBuffer]",ne="[object DataView]",G="[object Float32Array]",le="[object Float64Array]",fe="[object Int8Array]",pe="[object Int16Array]",we="[object Int32Array]",Se="[object Uint8Array]",xe="[object Uint8ClampedArray]",je="[object Uint16Array]",Me="[object Uint32Array]",rt=/[\\^$.*+?()[\]{}|]/g,Ct=/\w*$/,it=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,Ge={};Ge[s]=Ge[l]=Ge[V]=Ge[ne]=Ge[o]=Ge[f]=Ge[G]=Ge[le]=Ge[fe]=Ge[pe]=Ge[we]=Ge[R]=Ge[P]=Ge[U]=Ge[W]=Ge[X]=Ge[$]=Ge[re]=Ge[Se]=Ge[xe]=Ge[je]=Ge[Me]=!0,Ge[C]=Ge[x]=Ge[te]=!1;var Ie=typeof window=="object"&&window&&window.Object===Object&&window,$e=typeof self=="object"&&self&&self.Object===Object&&self,gt=Ie||$e||Function("return this")(),Dt=e&&!e.nodeType&&e,ut=Dt&&!0&&n&&!n.nodeType&&n,Rt=ut&&ut.exports===Dt;function St(J,Ee){return J.set(Ee[0],Ee[1]),J}function Ke(J,Ee){return J.add(Ee),J}function Pe(J,Ee){for(var st=-1,Ht=J?J.length:0;++st<Ht&&Ee(J[st],st,J)!==!1;);return J}function Re(J,Ee){for(var st=-1,Ht=Ee.length,kr=J.length;++st<Ht;)J[kr+st]=Ee[st];return J}function Ye(J,Ee,st,Ht){for(var kr=-1,Qn=J?J.length:0;++kr<Qn;)st=Ee(st,J[kr],kr,J);return st}function vt(J,Ee){for(var st=-1,Ht=Array(J);++st<J;)Ht[st]=Ee(st);return Ht}function yt(J,Ee){return J?.[Ee]}function Et(J){var Ee=!1;if(J!=null&&typeof J.toString!="function")try{Ee=!!(J+"")}catch{}return Ee}function Zt(J){var Ee=-1,st=Array(J.size);return J.forEach(function(Ht,kr){st[++Ee]=[kr,Ht]}),st}function Ut(J,Ee){return function(st){return J(Ee(st))}}function An(J){var Ee=-1,st=Array(J.size);return J.forEach(function(Ht){st[++Ee]=Ht}),st}var hr=Array.prototype,Vt=Function.prototype,Vn=Object.prototype,Pn=gt["__core-js_shared__"],Dn=function(){var J=/[^.]+$/.exec(Pn&&Pn.keys&&Pn.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ln=Vt.toString,Ir=Vn.hasOwnProperty,rr=Vn.toString,Yn=RegExp("^"+Ln.call(Ir).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Rt?gt.Buffer:void 0,he=gt.Symbol,me=gt.Uint8Array,et=Ut(Object.getPrototypeOf,Object),bt=Object.create,Yt=Vn.propertyIsEnumerable,Jt=hr.splice,ir=Object.getOwnPropertySymbols,Xe=We?We.isBuffer:void 0,ae=Ut(Object.keys,Object),ve=bi(gt,"DataView"),p=bi(gt,"Map"),Ne=bi(gt,"Promise"),Ve=bi(gt,"Set"),Te=bi(gt,"WeakMap"),lt=bi(Object,"create"),ct=Ni(ve),Ft=Ni(p),jt=Ni(Ne),Gt=Ni(Ve),nn=Ni(Te),On=he?he.prototype:void 0,Rn=On?On.valueOf:void 0;function dr(J){var Ee=-1,st=J?J.length:0;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function Tr(){this.__data__=lt?lt(null):{}}function or(J){return this.has(J)&&delete this.__data__[J]}function on(J){var Ee=this.__data__;if(lt){var st=Ee[J];return st===r?void 0:st}return Ir.call(Ee,J)?Ee[J]:void 0}function ti(J){var Ee=this.__data__;return lt?Ee[J]!==void 0:Ir.call(Ee,J)}function li(J,Ee){var st=this.__data__;return st[J]=lt&&Ee===void 0?r:Ee,this}dr.prototype.clear=Tr,dr.prototype.delete=or,dr.prototype.get=on,dr.prototype.has=ti,dr.prototype.set=li;function jr(J){var Ee=-1,st=J?J.length:0;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function Fr(){this.__data__=[]}function wn(J){var Ee=this.__data__,st=wa(Ee,J);if(st<0)return!1;var Ht=Ee.length-1;return st==Ht?Ee.pop():Jt.call(Ee,st,1),!0}function Dr(J){var Ee=this.__data__,st=wa(Ee,J);return st<0?void 0:Ee[st][1]}function ui(J){return wa(this.__data__,J)>-1}function Pi(J,Ee){var st=this.__data__,Ht=wa(st,J);return Ht<0?st.push([J,Ee]):st[Ht][1]=Ee,this}jr.prototype.clear=Fr,jr.prototype.delete=wn,jr.prototype.get=Dr,jr.prototype.has=ui,jr.prototype.set=Pi;function yi(J){var Ee=-1,st=J?J.length:0;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function As(){this.__data__={hash:new dr,map:new(p||jr),string:new dr}}function qr(J){return Sa(this,J).delete(J)}function _s(J){return Sa(this,J).get(J)}function La(J){return Sa(this,J).has(J)}function da(J,Ee){return Sa(this,J).set(J,Ee),this}yi.prototype.clear=As,yi.prototype.delete=qr,yi.prototype.get=_s,yi.prototype.has=La,yi.prototype.set=da;function No(J){this.__data__=new jr(J)}function zs(){this.__data__=new jr}function hl(J){return this.__data__.delete(J)}function ci(J){return this.__data__.get(J)}function oa(J){return this.__data__.has(J)}function bo(J,Ee){var st=this.__data__;if(st instanceof jr){var Ht=st.__data__;if(!p||Ht.length<t-1)return Ht.push([J,Ee]),this;st=this.__data__=new yi(Ht)}return st.set(J,Ee),this}No.prototype.clear=zs,No.prototype.delete=hl,No.prototype.get=ci,No.prototype.has=oa,No.prototype.set=bo;function lo(J,Ee){var st=Hi(J)||Vo(J)?vt(J.length,String):[],Ht=st.length,kr=!!Ht;for(var Qn in J)Ir.call(J,Qn)&&!(kr&&(Qn=="length"||Di(Qn,Ht)))&&st.push(Qn);return st}function Er(J,Ee,st){var Ht=J[Ee];(!(Ir.call(J,Ee)&&$o(Ht,st))||st===void 0&&!(Ee in J))&&(J[Ee]=st)}function wa(J,Ee){for(var st=J.length;st--;)if($o(J[st][0],Ee))return st;return-1}function qo(J,Ee){return J&&nl(Ee,Gi(Ee),J)}function Jo(J,Ee,st,Ht,kr,Qn,Zr){var Ai;if(Ht&&(Ai=Qn?Ht(J,kr,Qn,Zr):Ht(J)),Ai!==void 0)return Ai;if(!Ii(J))return J;var Rr=Hi(J);if(Rr){if(Ai=xl(J),!Ee)return jl(J,Ai)}else{var ni=Oi(J),Yi=ni==x||ni==B;if(Ss(J))return gr(J,Ee);if(ni==U||ni==s||Yi&&!Qn){if(Et(J))return Qn?J:{};if(Ai=Oo(Yi?{}:J),!Ee)return Ua(J,qo(Ai,J))}else{if(!Ge[ni])return Qn?J:{};Ai=Wl(J,ni,Jo,Ee)}}Zr||(Zr=new No);var xo=Zr.get(J);if(xo)return xo;if(Zr.set(J,Ai),!Rr)var si=st?JA(J):Gi(J);return Pe(si||J,function(fi,co){si&&(co=fi,fi=J[co]),Er(Ai,co,Jo(fi,Ee,st,Ht,co,J,Zr))}),Ai}function qe(J){return Ii(J)?bt(J):{}}function xt(J,Ee,st){var Ht=Ee(J);return Hi(J)?Ht:Re(Ht,st(J))}function _n(J){return rr.call(J)}function jn(J){if(!Ii(J)||sA(J))return!1;var Ee=sa(J)||Et(J)?Yn:it;return Ee.test(Ni(J))}function fn(J){if(!za(J))return ae(J);var Ee=[];for(var st in Object(J))Ir.call(J,st)&&st!="constructor"&&Ee.push(st);return Ee}function gr(J,Ee){if(Ee)return J.slice();var st=new J.constructor(J.length);return J.copy(st),st}function Qi(J){var Ee=new J.constructor(J.byteLength);return new me(Ee).set(new me(J)),Ee}function Io(J,Ee){var st=Ee?Qi(J.buffer):J.buffer;return new J.constructor(st,J.byteOffset,J.byteLength)}function fs(J,Ee,st){var Ht=Ee?st(Zt(J),!0):Zt(J);return Ye(Ht,St,new J.constructor)}function fa(J){var Ee=new J.constructor(J.source,Ct.exec(J));return Ee.lastIndex=J.lastIndex,Ee}function iA(J,Ee,st){var Ht=Ee?st(An(J),!0):An(J);return Ye(Ht,Ke,new J.constructor)}function vi(J){return Rn?Object(Rn.call(J)):{}}function zu(J,Ee){var st=Ee?Qi(J.buffer):J.buffer;return new J.constructor(st,J.byteOffset,J.length)}function jl(J,Ee){var st=-1,Ht=J.length;for(Ee||(Ee=Array(Ht));++st<Ht;)Ee[st]=J[st];return Ee}function nl(J,Ee,st,Ht){st||(st={});for(var kr=-1,Qn=Ee.length;++kr<Qn;){var Zr=Ee[kr],Ai=void 0;Er(st,Zr,Ai===void 0?J[Zr]:Ai)}return st}function Ua(J,Ee){return nl(J,Ao(J),Ee)}function JA(J){return xt(J,Gi,Ao)}function Sa(J,Ee){var st=J.__data__;return oA(Ee)?st[typeof Ee=="string"?"string":"hash"]:st.map}function bi(J,Ee){var st=yt(J,Ee);return jn(st)?st:void 0}var Ao=ir?Ut(ir,Object):Sr,Oi=_n;(ve&&Oi(new ve(new ArrayBuffer(1)))!=ne||p&&Oi(new p)!=R||Ne&&Oi(Ne.resolve())!=N||Ve&&Oi(new Ve)!=X||Te&&Oi(new Te)!=te)&&(Oi=function(J){var Ee=rr.call(J),st=Ee==U?J.constructor:void 0,Ht=st?Ni(st):void 0;if(Ht)switch(Ht){case ct:return ne;case Ft:return R;case jt:return N;case Gt:return X;case nn:return te}return Ee});function xl(J){var Ee=J.length,st=J.constructor(Ee);return Ee&&typeof J[0]=="string"&&Ir.call(J,"index")&&(st.index=J.index,st.input=J.input),st}function Oo(J){return typeof J.constructor=="function"&&!za(J)?qe(et(J)):{}}function Wl(J,Ee,st,Ht){var kr=J.constructor;switch(Ee){case V:return Qi(J);case o:case f:return new kr(+J);case ne:return Io(J,Ht);case G:case le:case fe:case pe:case we:case Se:case xe:case je:case Me:return zu(J,Ht);case R:return fs(J,Ht,st);case P:case $:return new kr(J);case W:return fa(J);case X:return iA(J,Ht,st);case re:return vi(J)}}function Di(J,Ee){return Ee=Ee??i,!!Ee&&(typeof J=="number"||nt.test(J))&&J>-1&&J%1==0&&J<Ee}function oA(J){var Ee=typeof J;return Ee=="string"||Ee=="number"||Ee=="symbol"||Ee=="boolean"?J!=="__proto__":J===null}function sA(J){return!!Dn&&Dn in J}function za(J){var Ee=J&&J.constructor,st=typeof Ee=="function"&&Ee.prototype||Vn;return J===st}function Ni(J){if(J!=null){try{return Ln.call(J)}catch{}try{return J+""}catch{}}return""}function uo(J){return Jo(J,!0,!0)}function $o(J,Ee){return J===Ee||J!==J&&Ee!==Ee}function Vo(J){return pa(J)&&Ir.call(J,"callee")&&(!Yt.call(J,"callee")||rr.call(J)==s)}var Hi=Array.isArray;function Ea(J){return J!=null&&EA(J.length)&&!sa(J)}function pa(J){return Ho(J)&&Ea(J)}var Ss=Xe||to;function sa(J){var Ee=Ii(J)?rr.call(J):"";return Ee==x||Ee==B}function EA(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=i}function Ii(J){var Ee=typeof J;return!!J&&(Ee=="object"||Ee=="function")}function Ho(J){return!!J&&typeof J=="object"}function Gi(J){return Ea(J)?lo(J):fn(J)}function Sr(){return[]}function to(){return!1}n.exports=uo}(Uv,Uv.exports)),Uv.exports}var VW=$W();const x8=Gl(VW);var r4,M8;function HW(){if(M8)return r4;M8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,f=o.toString;function C(N,W,X){return N===N&&(X!==void 0&&(N=N<=X?N:X),W!==void 0&&(N=N>=W?N:W)),N}function x(N){var W=typeof N;return!!N&&(W=="object"||W=="function")}function B(N){return!!N&&typeof N=="object"}function R(N){return typeof N=="symbol"||B(N)&&f.call(N)==e}function P(N){if(typeof N=="number")return N;if(R(N))return n;if(x(N)){var W=typeof N.valueOf=="function"?N.valueOf():N;N=x(W)?W+"":W}if(typeof N!="string")return N===0?N:+N;N=N.replace(t,"");var X=i.test(N);return X||s.test(N)?l(N.slice(2),X?2:8):r.test(N)?n:+N}function U(N,W,X){return X===void 0&&(X=W,W=void 0),X!==void 0&&(X=P(X),X=X===X?X:0),W!==void 0&&(W=P(W),W=W===W?W:0),C(P(N),W,X)}return r4=U,r4}var ZW=HW();const w8=Gl(ZW);var i4={},wv={},S8;function XW(){if(S8)return wv;S8=1,wv.byteLength=o,wv.toByteArray=C,wv.fromByteArray=R;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(P){var U=P.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=P.indexOf("=");N===-1&&(N=U);var W=N===U?0:4-N%4;return[N,W]}function o(P){var U=l(P),N=U[0],W=U[1];return(N+W)*3/4-W}function f(P,U,N){return(U+N)*3/4-N}function C(P){var U,N=l(P),W=N[0],X=N[1],$=new t(f(P,W,X)),re=0,te=X>0?W-4:W,V;for(V=0;V<te;V+=4)U=e[P.charCodeAt(V)]<<18|e[P.charCodeAt(V+1)]<<12|e[P.charCodeAt(V+2)]<<6|e[P.charCodeAt(V+3)],$[re++]=U>>16&255,$[re++]=U>>8&255,$[re++]=U&255;return X===2&&(U=e[P.charCodeAt(V)]<<2|e[P.charCodeAt(V+1)]>>4,$[re++]=U&255),X===1&&(U=e[P.charCodeAt(V)]<<10|e[P.charCodeAt(V+1)]<<4|e[P.charCodeAt(V+2)]>>2,$[re++]=U>>8&255,$[re++]=U&255),$}function x(P){return n[P>>18&63]+n[P>>12&63]+n[P>>6&63]+n[P&63]}function B(P,U,N){for(var W,X=[],$=U;$<N;$+=3)W=(P[$]<<16&16711680)+(P[$+1]<<8&65280)+(P[$+2]&255),X.push(x(W));return X.join("")}function R(P){for(var U,N=P.length,W=N%3,X=[],$=16383,re=0,te=N-W;re<te;re+=$)X.push(B(P,re,re+$>te?te:re+$));return W===1?(U=P[N-1],X.push(n[U>>2]+n[U<<4&63]+"==")):W===2&&(U=(P[N-2]<<8)+P[N-1],X.push(n[U>>10]+n[U>>4&63]+n[U<<2&63]+"=")),X.join("")}return wv}var lb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var E8;function JW(){return E8||(E8=1,lb.read=function(n,e,t,r,i){var s,l,o=i*8-r-1,f=(1<<o)-1,C=f>>1,x=-7,B=t?i-1:0,R=t?-1:1,P=n[e+B];for(B+=R,s=P&(1<<-x)-1,P>>=-x,x+=o;x>0;s=s*256+n[e+B],B+=R,x-=8);for(l=s&(1<<-x)-1,s>>=-x,x+=r;x>0;l=l*256+n[e+B],B+=R,x-=8);if(s===0)s=1-C;else{if(s===f)return l?NaN:(P?-1:1)*(1/0);l=l+Math.pow(2,r),s=s-C}return(P?-1:1)*l*Math.pow(2,s-r)},lb.write=function(n,e,t,r,i,s){var l,o,f,C=s*8-i-1,x=(1<<C)-1,B=x>>1,R=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=r?0:s-1,U=r?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=x):(l=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+B>=1?e+=R/f:e+=R*Math.pow(2,1-B),e*f>=2&&(l++,f/=2),l+B>=x?(o=0,l=x):l+B>=1?(o=(e*f-1)*Math.pow(2,i),l=l+B):(o=e*Math.pow(2,B-1)*Math.pow(2,i),l=0));i>=8;n[t+P]=o&255,P+=U,o/=256,i-=8);for(l=l<<i|o,C+=i;C>0;n[t+P]=l&255,P+=U,l/=256,C-=8);n[t+P-U]|=N*128}),lb}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var B8;function eQ(){return B8||(B8=1,function(n){const e=XW(),t=JW(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=$,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const We=new Uint8Array(1),he={foo:function(){return 42}};return Object.setPrototypeOf(he,Uint8Array.prototype),Object.setPrototypeOf(We,he),We.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(We){if(We>i)throw new RangeError('The value "'+We+'" is invalid for option "size"');const he=new Uint8Array(We);return Object.setPrototypeOf(he,o.prototype),he}function o(We,he,me){if(typeof We=="number"){if(typeof he=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(We)}return f(We,he,me)}o.poolSize=8192;function f(We,he,me){if(typeof We=="string")return R(We,he);if(ArrayBuffer.isView(We))return U(We);if(We==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof We);if(Dn(We,ArrayBuffer)||We&&Dn(We.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Dn(We,SharedArrayBuffer)||We&&Dn(We.buffer,SharedArrayBuffer)))return N(We,he,me);if(typeof We=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const et=We.valueOf&&We.valueOf();if(et!=null&&et!==We)return o.from(et,he,me);const bt=W(We);if(bt)return bt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof We[Symbol.toPrimitive]=="function")return o.from(We[Symbol.toPrimitive]("string"),he,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof We)}o.from=function(We,he,me){return f(We,he,me)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function C(We){if(typeof We!="number")throw new TypeError('"size" argument must be of type number');if(We<0)throw new RangeError('The value "'+We+'" is invalid for option "size"')}function x(We,he,me){return C(We),We<=0?l(We):he!==void 0?typeof me=="string"?l(We).fill(he,me):l(We).fill(he):l(We)}o.alloc=function(We,he,me){return x(We,he,me)};function B(We){return C(We),l(We<0?0:X(We)|0)}o.allocUnsafe=function(We){return B(We)},o.allocUnsafeSlow=function(We){return B(We)};function R(We,he){if((typeof he!="string"||he==="")&&(he="utf8"),!o.isEncoding(he))throw new TypeError("Unknown encoding: "+he);const me=re(We,he)|0;let et=l(me);const bt=et.write(We,he);return bt!==me&&(et=et.slice(0,bt)),et}function P(We){const he=We.length<0?0:X(We.length)|0,me=l(he);for(let et=0;et<he;et+=1)me[et]=We[et]&255;return me}function U(We){if(Dn(We,Uint8Array)){const he=new Uint8Array(We);return N(he.buffer,he.byteOffset,he.byteLength)}return P(We)}function N(We,he,me){if(he<0||We.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(We.byteLength<he+(me||0))throw new RangeError('"length" is outside of buffer bounds');let et;return he===void 0&&me===void 0?et=new Uint8Array(We):me===void 0?et=new Uint8Array(We,he):et=new Uint8Array(We,he,me),Object.setPrototypeOf(et,o.prototype),et}function W(We){if(o.isBuffer(We)){const he=X(We.length)|0,me=l(he);return me.length===0||We.copy(me,0,0,he),me}if(We.length!==void 0)return typeof We.length!="number"||Ln(We.length)?l(0):P(We);if(We.type==="Buffer"&&Array.isArray(We.data))return P(We.data)}function X(We){if(We>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return We|0}function $(We){return+We!=We&&(We=0),o.alloc(+We)}o.isBuffer=function(he){return he!=null&&he._isBuffer===!0&&he!==o.prototype},o.compare=function(he,me){if(Dn(he,Uint8Array)&&(he=o.from(he,he.offset,he.byteLength)),Dn(me,Uint8Array)&&(me=o.from(me,me.offset,me.byteLength)),!o.isBuffer(he)||!o.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===me)return 0;let et=he.length,bt=me.length;for(let Yt=0,Jt=Math.min(et,bt);Yt<Jt;++Yt)if(he[Yt]!==me[Yt]){et=he[Yt],bt=me[Yt];break}return et<bt?-1:bt<et?1:0},o.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(he,me){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(he.length===0)return o.alloc(0);let et;if(me===void 0)for(me=0,et=0;et<he.length;++et)me+=he[et].length;const bt=o.allocUnsafe(me);let Yt=0;for(et=0;et<he.length;++et){let Jt=he[et];if(Dn(Jt,Uint8Array))Yt+Jt.length>bt.length?(o.isBuffer(Jt)||(Jt=o.from(Jt)),Jt.copy(bt,Yt)):Uint8Array.prototype.set.call(bt,Jt,Yt);else if(o.isBuffer(Jt))Jt.copy(bt,Yt);else throw new TypeError('"list" argument must be an Array of Buffers');Yt+=Jt.length}return bt};function re(We,he){if(o.isBuffer(We))return We.length;if(ArrayBuffer.isView(We)||Dn(We,ArrayBuffer))return We.byteLength;if(typeof We!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof We);const me=We.length,et=arguments.length>2&&arguments[2]===!0;if(!et&&me===0)return 0;let bt=!1;for(;;)switch(he){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return An(We).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me*2;case"hex":return me>>>1;case"base64":return Vn(We).length;default:if(bt)return et?-1:An(We).length;he=(""+he).toLowerCase(),bt=!0}}o.byteLength=re;function te(We,he,me){let et=!1;if((he===void 0||he<0)&&(he=0),he>this.length||((me===void 0||me>this.length)&&(me=this.length),me<=0)||(me>>>=0,he>>>=0,me<=he))return"";for(We||(We="utf8");;)switch(We){case"hex":return nt(this,he,me);case"utf8":case"utf-8":return je(this,he,me);case"ascii":return Ct(this,he,me);case"latin1":case"binary":return it(this,he,me);case"base64":return xe(this,he,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,he,me);default:if(et)throw new TypeError("Unknown encoding: "+We);We=(We+"").toLowerCase(),et=!0}}o.prototype._isBuffer=!0;function V(We,he,me){const et=We[he];We[he]=We[me],We[me]=et}o.prototype.swap16=function(){const he=this.length;if(he%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let me=0;me<he;me+=2)V(this,me,me+1);return this},o.prototype.swap32=function(){const he=this.length;if(he%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let me=0;me<he;me+=4)V(this,me,me+3),V(this,me+1,me+2);return this},o.prototype.swap64=function(){const he=this.length;if(he%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let me=0;me<he;me+=8)V(this,me,me+7),V(this,me+1,me+6),V(this,me+2,me+5),V(this,me+3,me+4);return this},o.prototype.toString=function(){const he=this.length;return he===0?"":arguments.length===0?je(this,0,he):te.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(he){if(!o.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he?!0:o.compare(this,he)===0},o.prototype.inspect=function(){let he="";const me=n.INSPECT_MAX_BYTES;return he=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(he+=" ... "),"<Buffer "+he+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(he,me,et,bt,Yt){if(Dn(he,Uint8Array)&&(he=o.from(he,he.offset,he.byteLength)),!o.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof he);if(me===void 0&&(me=0),et===void 0&&(et=he?he.length:0),bt===void 0&&(bt=0),Yt===void 0&&(Yt=this.length),me<0||et>he.length||bt<0||Yt>this.length)throw new RangeError("out of range index");if(bt>=Yt&&me>=et)return 0;if(bt>=Yt)return-1;if(me>=et)return 1;if(me>>>=0,et>>>=0,bt>>>=0,Yt>>>=0,this===he)return 0;let Jt=Yt-bt,ir=et-me;const Xe=Math.min(Jt,ir),ae=this.slice(bt,Yt),ve=he.slice(me,et);for(let p=0;p<Xe;++p)if(ae[p]!==ve[p]){Jt=ae[p],ir=ve[p];break}return Jt<ir?-1:ir<Jt?1:0};function ne(We,he,me,et,bt){if(We.length===0)return-1;if(typeof me=="string"?(et=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),me=+me,Ln(me)&&(me=bt?0:We.length-1),me<0&&(me=We.length+me),me>=We.length){if(bt)return-1;me=We.length-1}else if(me<0)if(bt)me=0;else return-1;if(typeof he=="string"&&(he=o.from(he,et)),o.isBuffer(he))return he.length===0?-1:G(We,he,me,et,bt);if(typeof he=="number")return he=he&255,typeof Uint8Array.prototype.indexOf=="function"?bt?Uint8Array.prototype.indexOf.call(We,he,me):Uint8Array.prototype.lastIndexOf.call(We,he,me):G(We,[he],me,et,bt);throw new TypeError("val must be string, number or Buffer")}function G(We,he,me,et,bt){let Yt=1,Jt=We.length,ir=he.length;if(et!==void 0&&(et=String(et).toLowerCase(),et==="ucs2"||et==="ucs-2"||et==="utf16le"||et==="utf-16le")){if(We.length<2||he.length<2)return-1;Yt=2,Jt/=2,ir/=2,me/=2}function Xe(ve,p){return Yt===1?ve[p]:ve.readUInt16BE(p*Yt)}let ae;if(bt){let ve=-1;for(ae=me;ae<Jt;ae++)if(Xe(We,ae)===Xe(he,ve===-1?0:ae-ve)){if(ve===-1&&(ve=ae),ae-ve+1===ir)return ve*Yt}else ve!==-1&&(ae-=ae-ve),ve=-1}else for(me+ir>Jt&&(me=Jt-ir),ae=me;ae>=0;ae--){let ve=!0;for(let p=0;p<ir;p++)if(Xe(We,ae+p)!==Xe(he,p)){ve=!1;break}if(ve)return ae}return-1}o.prototype.includes=function(he,me,et){return this.indexOf(he,me,et)!==-1},o.prototype.indexOf=function(he,me,et){return ne(this,he,me,et,!0)},o.prototype.lastIndexOf=function(he,me,et){return ne(this,he,me,et,!1)};function le(We,he,me,et){me=Number(me)||0;const bt=We.length-me;et?(et=Number(et),et>bt&&(et=bt)):et=bt;const Yt=he.length;et>Yt/2&&(et=Yt/2);let Jt;for(Jt=0;Jt<et;++Jt){const ir=parseInt(he.substr(Jt*2,2),16);if(Ln(ir))return Jt;We[me+Jt]=ir}return Jt}function fe(We,he,me,et){return Pn(An(he,We.length-me),We,me,et)}function pe(We,he,me,et){return Pn(hr(he),We,me,et)}function we(We,he,me,et){return Pn(Vn(he),We,me,et)}function Se(We,he,me,et){return Pn(Vt(he,We.length-me),We,me,et)}o.prototype.write=function(he,me,et,bt){if(me===void 0)bt="utf8",et=this.length,me=0;else if(et===void 0&&typeof me=="string")bt=me,et=this.length,me=0;else if(isFinite(me))me=me>>>0,isFinite(et)?(et=et>>>0,bt===void 0&&(bt="utf8")):(bt=et,et=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Yt=this.length-me;if((et===void 0||et>Yt)&&(et=Yt),he.length>0&&(et<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");bt||(bt="utf8");let Jt=!1;for(;;)switch(bt){case"hex":return le(this,he,me,et);case"utf8":case"utf-8":return fe(this,he,me,et);case"ascii":case"latin1":case"binary":return pe(this,he,me,et);case"base64":return we(this,he,me,et);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,he,me,et);default:if(Jt)throw new TypeError("Unknown encoding: "+bt);bt=(""+bt).toLowerCase(),Jt=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(We,he,me){return he===0&&me===We.length?e.fromByteArray(We):e.fromByteArray(We.slice(he,me))}function je(We,he,me){me=Math.min(We.length,me);const et=[];let bt=he;for(;bt<me;){const Yt=We[bt];let Jt=null,ir=Yt>239?4:Yt>223?3:Yt>191?2:1;if(bt+ir<=me){let Xe,ae,ve,p;switch(ir){case 1:Yt<128&&(Jt=Yt);break;case 2:Xe=We[bt+1],(Xe&192)===128&&(p=(Yt&31)<<6|Xe&63,p>127&&(Jt=p));break;case 3:Xe=We[bt+1],ae=We[bt+2],(Xe&192)===128&&(ae&192)===128&&(p=(Yt&15)<<12|(Xe&63)<<6|ae&63,p>2047&&(p<55296||p>57343)&&(Jt=p));break;case 4:Xe=We[bt+1],ae=We[bt+2],ve=We[bt+3],(Xe&192)===128&&(ae&192)===128&&(ve&192)===128&&(p=(Yt&15)<<18|(Xe&63)<<12|(ae&63)<<6|ve&63,p>65535&&p<1114112&&(Jt=p))}}Jt===null?(Jt=65533,ir=1):Jt>65535&&(Jt-=65536,et.push(Jt>>>10&1023|55296),Jt=56320|Jt&1023),et.push(Jt),bt+=ir}return rt(et)}const Me=4096;function rt(We){const he=We.length;if(he<=Me)return String.fromCharCode.apply(String,We);let me="",et=0;for(;et<he;)me+=String.fromCharCode.apply(String,We.slice(et,et+=Me));return me}function Ct(We,he,me){let et="";me=Math.min(We.length,me);for(let bt=he;bt<me;++bt)et+=String.fromCharCode(We[bt]&127);return et}function it(We,he,me){let et="";me=Math.min(We.length,me);for(let bt=he;bt<me;++bt)et+=String.fromCharCode(We[bt]);return et}function nt(We,he,me){const et=We.length;(!he||he<0)&&(he=0),(!me||me<0||me>et)&&(me=et);let bt="";for(let Yt=he;Yt<me;++Yt)bt+=Ir[We[Yt]];return bt}function Ge(We,he,me){const et=We.slice(he,me);let bt="";for(let Yt=0;Yt<et.length-1;Yt+=2)bt+=String.fromCharCode(et[Yt]+et[Yt+1]*256);return bt}o.prototype.slice=function(he,me){const et=this.length;he=~~he,me=me===void 0?et:~~me,he<0?(he+=et,he<0&&(he=0)):he>et&&(he=et),me<0?(me+=et,me<0&&(me=0)):me>et&&(me=et),me<he&&(me=he);const bt=this.subarray(he,me);return Object.setPrototypeOf(bt,o.prototype),bt};function Ie(We,he,me){if(We%1!==0||We<0)throw new RangeError("offset is not uint");if(We+he>me)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(he,me,et){he=he>>>0,me=me>>>0,et||Ie(he,me,this.length);let bt=this[he],Yt=1,Jt=0;for(;++Jt<me&&(Yt*=256);)bt+=this[he+Jt]*Yt;return bt},o.prototype.readUintBE=o.prototype.readUIntBE=function(he,me,et){he=he>>>0,me=me>>>0,et||Ie(he,me,this.length);let bt=this[he+--me],Yt=1;for(;me>0&&(Yt*=256);)bt+=this[he+--me]*Yt;return bt},o.prototype.readUint8=o.prototype.readUInt8=function(he,me){return he=he>>>0,me||Ie(he,1,this.length),this[he]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(he,me){return he=he>>>0,me||Ie(he,2,this.length),this[he]|this[he+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(he,me){return he=he>>>0,me||Ie(he,2,this.length),this[he]<<8|this[he+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(he,me){return he=he>>>0,me||Ie(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+this[he+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(he,me){return he=he>>>0,me||Ie(he,4,this.length),this[he]*16777216+(this[he+1]<<16|this[he+2]<<8|this[he+3])},o.prototype.readBigUInt64LE=rr(function(he){he=he>>>0,yt(he,"offset");const me=this[he],et=this[he+7];(me===void 0||et===void 0)&&Et(he,this.length-8);const bt=me+this[++he]*2**8+this[++he]*2**16+this[++he]*2**24,Yt=this[++he]+this[++he]*2**8+this[++he]*2**16+et*2**24;return BigInt(bt)+(BigInt(Yt)<<BigInt(32))}),o.prototype.readBigUInt64BE=rr(function(he){he=he>>>0,yt(he,"offset");const me=this[he],et=this[he+7];(me===void 0||et===void 0)&&Et(he,this.length-8);const bt=me*2**24+this[++he]*2**16+this[++he]*2**8+this[++he],Yt=this[++he]*2**24+this[++he]*2**16+this[++he]*2**8+et;return(BigInt(bt)<<BigInt(32))+BigInt(Yt)}),o.prototype.readIntLE=function(he,me,et){he=he>>>0,me=me>>>0,et||Ie(he,me,this.length);let bt=this[he],Yt=1,Jt=0;for(;++Jt<me&&(Yt*=256);)bt+=this[he+Jt]*Yt;return Yt*=128,bt>=Yt&&(bt-=Math.pow(2,8*me)),bt},o.prototype.readIntBE=function(he,me,et){he=he>>>0,me=me>>>0,et||Ie(he,me,this.length);let bt=me,Yt=1,Jt=this[he+--bt];for(;bt>0&&(Yt*=256);)Jt+=this[he+--bt]*Yt;return Yt*=128,Jt>=Yt&&(Jt-=Math.pow(2,8*me)),Jt},o.prototype.readInt8=function(he,me){return he=he>>>0,me||Ie(he,1,this.length),this[he]&128?(255-this[he]+1)*-1:this[he]},o.prototype.readInt16LE=function(he,me){he=he>>>0,me||Ie(he,2,this.length);const et=this[he]|this[he+1]<<8;return et&32768?et|4294901760:et},o.prototype.readInt16BE=function(he,me){he=he>>>0,me||Ie(he,2,this.length);const et=this[he+1]|this[he]<<8;return et&32768?et|4294901760:et},o.prototype.readInt32LE=function(he,me){return he=he>>>0,me||Ie(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},o.prototype.readInt32BE=function(he,me){return he=he>>>0,me||Ie(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},o.prototype.readBigInt64LE=rr(function(he){he=he>>>0,yt(he,"offset");const me=this[he],et=this[he+7];(me===void 0||et===void 0)&&Et(he,this.length-8);const bt=this[he+4]+this[he+5]*2**8+this[he+6]*2**16+(et<<24);return(BigInt(bt)<<BigInt(32))+BigInt(me+this[++he]*2**8+this[++he]*2**16+this[++he]*2**24)}),o.prototype.readBigInt64BE=rr(function(he){he=he>>>0,yt(he,"offset");const me=this[he],et=this[he+7];(me===void 0||et===void 0)&&Et(he,this.length-8);const bt=(me<<24)+this[++he]*2**16+this[++he]*2**8+this[++he];return(BigInt(bt)<<BigInt(32))+BigInt(this[++he]*2**24+this[++he]*2**16+this[++he]*2**8+et)}),o.prototype.readFloatLE=function(he,me){return he=he>>>0,me||Ie(he,4,this.length),t.read(this,he,!0,23,4)},o.prototype.readFloatBE=function(he,me){return he=he>>>0,me||Ie(he,4,this.length),t.read(this,he,!1,23,4)},o.prototype.readDoubleLE=function(he,me){return he=he>>>0,me||Ie(he,8,this.length),t.read(this,he,!0,52,8)},o.prototype.readDoubleBE=function(he,me){return he=he>>>0,me||Ie(he,8,this.length),t.read(this,he,!1,52,8)};function $e(We,he,me,et,bt,Yt){if(!o.isBuffer(We))throw new TypeError('"buffer" argument must be a Buffer instance');if(he>bt||he<Yt)throw new RangeError('"value" argument is out of bounds');if(me+et>We.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(he,me,et,bt){if(he=+he,me=me>>>0,et=et>>>0,!bt){const ir=Math.pow(2,8*et)-1;$e(this,he,me,et,ir,0)}let Yt=1,Jt=0;for(this[me]=he&255;++Jt<et&&(Yt*=256);)this[me+Jt]=he/Yt&255;return me+et},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(he,me,et,bt){if(he=+he,me=me>>>0,et=et>>>0,!bt){const ir=Math.pow(2,8*et)-1;$e(this,he,me,et,ir,0)}let Yt=et-1,Jt=1;for(this[me+Yt]=he&255;--Yt>=0&&(Jt*=256);)this[me+Yt]=he/Jt&255;return me+et},o.prototype.writeUint8=o.prototype.writeUInt8=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,1,255,0),this[me]=he&255,me+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,2,65535,0),this[me]=he&255,this[me+1]=he>>>8,me+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,2,65535,0),this[me]=he>>>8,this[me+1]=he&255,me+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,4,4294967295,0),this[me+3]=he>>>24,this[me+2]=he>>>16,this[me+1]=he>>>8,this[me]=he&255,me+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,4,4294967295,0),this[me]=he>>>24,this[me+1]=he>>>16,this[me+2]=he>>>8,this[me+3]=he&255,me+4};function gt(We,he,me,et,bt){vt(he,et,bt,We,me,7);let Yt=Number(he&BigInt(4294967295));We[me++]=Yt,Yt=Yt>>8,We[me++]=Yt,Yt=Yt>>8,We[me++]=Yt,Yt=Yt>>8,We[me++]=Yt;let Jt=Number(he>>BigInt(32)&BigInt(4294967295));return We[me++]=Jt,Jt=Jt>>8,We[me++]=Jt,Jt=Jt>>8,We[me++]=Jt,Jt=Jt>>8,We[me++]=Jt,me}function Dt(We,he,me,et,bt){vt(he,et,bt,We,me,7);let Yt=Number(he&BigInt(4294967295));We[me+7]=Yt,Yt=Yt>>8,We[me+6]=Yt,Yt=Yt>>8,We[me+5]=Yt,Yt=Yt>>8,We[me+4]=Yt;let Jt=Number(he>>BigInt(32)&BigInt(4294967295));return We[me+3]=Jt,Jt=Jt>>8,We[me+2]=Jt,Jt=Jt>>8,We[me+1]=Jt,Jt=Jt>>8,We[me]=Jt,me+8}o.prototype.writeBigUInt64LE=rr(function(he,me=0){return gt(this,he,me,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=rr(function(he,me=0){return Dt(this,he,me,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(he,me,et,bt){if(he=+he,me=me>>>0,!bt){const Xe=Math.pow(2,8*et-1);$e(this,he,me,et,Xe-1,-Xe)}let Yt=0,Jt=1,ir=0;for(this[me]=he&255;++Yt<et&&(Jt*=256);)he<0&&ir===0&&this[me+Yt-1]!==0&&(ir=1),this[me+Yt]=(he/Jt>>0)-ir&255;return me+et},o.prototype.writeIntBE=function(he,me,et,bt){if(he=+he,me=me>>>0,!bt){const Xe=Math.pow(2,8*et-1);$e(this,he,me,et,Xe-1,-Xe)}let Yt=et-1,Jt=1,ir=0;for(this[me+Yt]=he&255;--Yt>=0&&(Jt*=256);)he<0&&ir===0&&this[me+Yt+1]!==0&&(ir=1),this[me+Yt]=(he/Jt>>0)-ir&255;return me+et},o.prototype.writeInt8=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,1,127,-128),he<0&&(he=255+he+1),this[me]=he&255,me+1},o.prototype.writeInt16LE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,2,32767,-32768),this[me]=he&255,this[me+1]=he>>>8,me+2},o.prototype.writeInt16BE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,2,32767,-32768),this[me]=he>>>8,this[me+1]=he&255,me+2},o.prototype.writeInt32LE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,4,2147483647,-2147483648),this[me]=he&255,this[me+1]=he>>>8,this[me+2]=he>>>16,this[me+3]=he>>>24,me+4},o.prototype.writeInt32BE=function(he,me,et){return he=+he,me=me>>>0,et||$e(this,he,me,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[me]=he>>>24,this[me+1]=he>>>16,this[me+2]=he>>>8,this[me+3]=he&255,me+4},o.prototype.writeBigInt64LE=rr(function(he,me=0){return gt(this,he,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=rr(function(he,me=0){return Dt(this,he,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ut(We,he,me,et,bt,Yt){if(me+et>We.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function Rt(We,he,me,et,bt){return he=+he,me=me>>>0,bt||ut(We,he,me,4),t.write(We,he,me,et,23,4),me+4}o.prototype.writeFloatLE=function(he,me,et){return Rt(this,he,me,!0,et)},o.prototype.writeFloatBE=function(he,me,et){return Rt(this,he,me,!1,et)};function St(We,he,me,et,bt){return he=+he,me=me>>>0,bt||ut(We,he,me,8),t.write(We,he,me,et,52,8),me+8}o.prototype.writeDoubleLE=function(he,me,et){return St(this,he,me,!0,et)},o.prototype.writeDoubleBE=function(he,me,et){return St(this,he,me,!1,et)},o.prototype.copy=function(he,me,et,bt){if(!o.isBuffer(he))throw new TypeError("argument should be a Buffer");if(et||(et=0),!bt&&bt!==0&&(bt=this.length),me>=he.length&&(me=he.length),me||(me=0),bt>0&&bt<et&&(bt=et),bt===et||he.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(et<0||et>=this.length)throw new RangeError("Index out of range");if(bt<0)throw new RangeError("sourceEnd out of bounds");bt>this.length&&(bt=this.length),he.length-me<bt-et&&(bt=he.length-me+et);const Yt=bt-et;return this===he&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(me,et,bt):Uint8Array.prototype.set.call(he,this.subarray(et,bt),me),Yt},o.prototype.fill=function(he,me,et,bt){if(typeof he=="string"){if(typeof me=="string"?(bt=me,me=0,et=this.length):typeof et=="string"&&(bt=et,et=this.length),bt!==void 0&&typeof bt!="string")throw new TypeError("encoding must be a string");if(typeof bt=="string"&&!o.isEncoding(bt))throw new TypeError("Unknown encoding: "+bt);if(he.length===1){const Jt=he.charCodeAt(0);(bt==="utf8"&&Jt<128||bt==="latin1")&&(he=Jt)}}else typeof he=="number"?he=he&255:typeof he=="boolean"&&(he=Number(he));if(me<0||this.length<me||this.length<et)throw new RangeError("Out of range index");if(et<=me)return this;me=me>>>0,et=et===void 0?this.length:et>>>0,he||(he=0);let Yt;if(typeof he=="number")for(Yt=me;Yt<et;++Yt)this[Yt]=he;else{const Jt=o.isBuffer(he)?he:o.from(he,bt),ir=Jt.length;if(ir===0)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Yt=0;Yt<et-me;++Yt)this[Yt+me]=Jt[Yt%ir]}return this};const Ke={};function Pe(We,he,me){Ke[We]=class extends me{constructor(){super(),Object.defineProperty(this,"message",{value:he.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${We}]`,this.stack,delete this.name}get code(){return We}set code(bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:bt,writable:!0})}toString(){return`${this.name} [${We}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(We){return We?`${We} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(We,he){return`The "${We}" argument must be of type number. Received type ${typeof he}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(We,he,me){let et=`The value of "${We}" is out of range.`,bt=me;return Number.isInteger(me)&&Math.abs(me)>2**32?bt=Re(String(me)):typeof me=="bigint"&&(bt=String(me),(me>BigInt(2)**BigInt(32)||me<-(BigInt(2)**BigInt(32)))&&(bt=Re(bt)),bt+="n"),et+=` It must be ${he}. Received ${bt}`,et},RangeError);function Re(We){let he="",me=We.length;const et=We[0]==="-"?1:0;for(;me>=et+4;me-=3)he=`_${We.slice(me-3,me)}${he}`;return`${We.slice(0,me)}${he}`}function Ye(We,he,me){yt(he,"offset"),(We[he]===void 0||We[he+me]===void 0)&&Et(he,We.length-(me+1))}function vt(We,he,me,et,bt,Yt){if(We>me||We<he){const Jt=typeof he=="bigint"?"n":"";let ir;throw he===0||he===BigInt(0)?ir=`>= 0${Jt} and < 2${Jt} ** ${(Yt+1)*8}${Jt}`:ir=`>= -(2${Jt} ** ${(Yt+1)*8-1}${Jt}) and < 2 ** ${(Yt+1)*8-1}${Jt}`,new Ke.ERR_OUT_OF_RANGE("value",ir,We)}Ye(et,bt,Yt)}function yt(We,he){if(typeof We!="number")throw new Ke.ERR_INVALID_ARG_TYPE(he,"number",We)}function Et(We,he,me){throw Math.floor(We)!==We?(yt(We,me),new Ke.ERR_OUT_OF_RANGE("offset","an integer",We)):he<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${he}`,We)}const Zt=/[^+/0-9A-Za-z-_]/g;function Ut(We){if(We=We.split("=")[0],We=We.trim().replace(Zt,""),We.length<2)return"";for(;We.length%4!==0;)We=We+"=";return We}function An(We,he){he=he||1/0;let me;const et=We.length;let bt=null;const Yt=[];for(let Jt=0;Jt<et;++Jt){if(me=We.charCodeAt(Jt),me>55295&&me<57344){if(!bt){if(me>56319){(he-=3)>-1&&Yt.push(239,191,189);continue}else if(Jt+1===et){(he-=3)>-1&&Yt.push(239,191,189);continue}bt=me;continue}if(me<56320){(he-=3)>-1&&Yt.push(239,191,189),bt=me;continue}me=(bt-55296<<10|me-56320)+65536}else bt&&(he-=3)>-1&&Yt.push(239,191,189);if(bt=null,me<128){if((he-=1)<0)break;Yt.push(me)}else if(me<2048){if((he-=2)<0)break;Yt.push(me>>6|192,me&63|128)}else if(me<65536){if((he-=3)<0)break;Yt.push(me>>12|224,me>>6&63|128,me&63|128)}else if(me<1114112){if((he-=4)<0)break;Yt.push(me>>18|240,me>>12&63|128,me>>6&63|128,me&63|128)}else throw new Error("Invalid code point")}return Yt}function hr(We){const he=[];for(let me=0;me<We.length;++me)he.push(We.charCodeAt(me)&255);return he}function Vt(We,he){let me,et,bt;const Yt=[];for(let Jt=0;Jt<We.length&&!((he-=2)<0);++Jt)me=We.charCodeAt(Jt),et=me>>8,bt=me%256,Yt.push(bt),Yt.push(et);return Yt}function Vn(We){return e.toByteArray(Ut(We))}function Pn(We,he,me,et){let bt;for(bt=0;bt<et&&!(bt+me>=he.length||bt>=We.length);++bt)he[bt+me]=We[bt];return bt}function Dn(We,he){return We instanceof he||We!=null&&We.constructor!=null&&We.constructor.name!=null&&We.constructor.name===he.name}function Ln(We){return We!==We}const Ir=function(){const We="0123456789abcdef",he=new Array(256);for(let me=0;me<16;++me){const et=me*16;for(let bt=0;bt<16;++bt)he[et+bt]=We[me]+We[bt]}return he}();function rr(We){return typeof BigInt>"u"?Yn:We}function Yn(){throw new Error("BigInt not supported")}}(i4)),i4}var tQ=eQ();const nQ=Gl(tQ);var o4,O8;function rQ(){if(O8)return o4;O8=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/[\\^$.*+?()[\]{}|]/g,x=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,R=typeof window=="object"&&window&&window.Object===Object&&window,P=typeof self=="object"&&self&&self.Object===Object&&self,U=R||P||Function("return this")();function N(ae,ve){return ae?.[ve]}function W(ae){var ve=!1;if(ae!=null&&typeof ae.toString!="function")try{ve=!!(ae+"")}catch{}return ve}var X=Array.prototype,$=Function.prototype,re=Object.prototype,te=U["__core-js_shared__"],V=function(){var ae=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),ne=$.toString,G=re.hasOwnProperty,le=re.toString,fe=RegExp("^"+ne.call(G).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pe=U.Symbol,we=X.splice,Se=Vn(U,"Map"),xe=Vn(Object,"create"),je=pe?pe.prototype:void 0,Me=je?je.toString:void 0;function rt(ae){var ve=-1,p=ae?ae.length:0;for(this.clear();++ve<p;){var Ne=ae[ve];this.set(Ne[0],Ne[1])}}function Ct(){this.__data__=xe?xe(null):{}}function it(ae){return this.has(ae)&&delete this.__data__[ae]}function nt(ae){var ve=this.__data__;if(xe){var p=ve[ae];return p===e?void 0:p}return G.call(ve,ae)?ve[ae]:void 0}function Ge(ae){var ve=this.__data__;return xe?ve[ae]!==void 0:G.call(ve,ae)}function Ie(ae,ve){var p=this.__data__;return p[ae]=xe&&ve===void 0?e:ve,this}rt.prototype.clear=Ct,rt.prototype.delete=it,rt.prototype.get=nt,rt.prototype.has=Ge,rt.prototype.set=Ie;function $e(ae){var ve=-1,p=ae?ae.length:0;for(this.clear();++ve<p;){var Ne=ae[ve];this.set(Ne[0],Ne[1])}}function gt(){this.__data__=[]}function Dt(ae){var ve=this.__data__,p=Et(ve,ae);if(p<0)return!1;var Ne=ve.length-1;return p==Ne?ve.pop():we.call(ve,p,1),!0}function ut(ae){var ve=this.__data__,p=Et(ve,ae);return p<0?void 0:ve[p][1]}function Rt(ae){return Et(this.__data__,ae)>-1}function St(ae,ve){var p=this.__data__,Ne=Et(p,ae);return Ne<0?p.push([ae,ve]):p[Ne][1]=ve,this}$e.prototype.clear=gt,$e.prototype.delete=Dt,$e.prototype.get=ut,$e.prototype.has=Rt,$e.prototype.set=St;function Ke(ae){var ve=-1,p=ae?ae.length:0;for(this.clear();++ve<p;){var Ne=ae[ve];this.set(Ne[0],Ne[1])}}function Pe(){this.__data__={hash:new rt,map:new(Se||$e),string:new rt}}function Re(ae){return Vt(this,ae).delete(ae)}function Ye(ae){return Vt(this,ae).get(ae)}function vt(ae){return Vt(this,ae).has(ae)}function yt(ae,ve){return Vt(this,ae).set(ae,ve),this}Ke.prototype.clear=Pe,Ke.prototype.delete=Re,Ke.prototype.get=Ye,Ke.prototype.has=vt,Ke.prototype.set=yt;function Et(ae,ve){for(var p=ae.length;p--;)if(he(ae[p][0],ve))return p;return-1}function Zt(ae,ve){ve=Pn(ve,ae)?[ve]:hr(ve);for(var p=0,Ne=ve.length;ae!=null&&p<Ne;)ae=ae[rr(ve[p++])];return p&&p==Ne?ae:void 0}function Ut(ae){if(!bt(ae)||Ln(ae))return!1;var ve=et(ae)||W(ae)?fe:B;return ve.test(Yn(ae))}function An(ae){if(typeof ae=="string")return ae;if(Jt(ae))return Me?Me.call(ae):"";var ve=ae+"";return ve=="0"&&1/ae==-1/0?"-0":ve}function hr(ae){return me(ae)?ae:Ir(ae)}function Vt(ae,ve){var p=ae.__data__;return Dn(ve)?p[typeof ve=="string"?"string":"hash"]:p.map}function Vn(ae,ve){var p=N(ae,ve);return Ut(p)?p:void 0}function Pn(ae,ve){if(me(ae))return!1;var p=typeof ae;return p=="number"||p=="symbol"||p=="boolean"||ae==null||Jt(ae)?!0:l.test(ae)||!s.test(ae)||ve!=null&&ae in Object(ve)}function Dn(ae){var ve=typeof ae;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?ae!=="__proto__":ae===null}function Ln(ae){return!!V&&V in ae}var Ir=We(function(ae){ae=ir(ae);var ve=[];return o.test(ae)&&ve.push(""),ae.replace(f,function(p,Ne,Ve,Te){ve.push(Ve?Te.replace(x,"$1"):Ne||p)}),ve});function rr(ae){if(typeof ae=="string"||Jt(ae))return ae;var ve=ae+"";return ve=="0"&&1/ae==-1/0?"-0":ve}function Yn(ae){if(ae!=null){try{return ne.call(ae)}catch{}try{return ae+""}catch{}}return""}function We(ae,ve){if(typeof ae!="function"||ve&&typeof ve!="function")throw new TypeError(n);var p=function(){var Ne=arguments,Ve=ve?ve.apply(this,Ne):Ne[0],Te=p.cache;if(Te.has(Ve))return Te.get(Ve);var lt=ae.apply(this,Ne);return p.cache=Te.set(Ve,lt),lt};return p.cache=new(We.Cache||Ke),p}We.Cache=Ke;function he(ae,ve){return ae===ve||ae!==ae&&ve!==ve}var me=Array.isArray;function et(ae){var ve=bt(ae)?le.call(ae):"";return ve==t||ve==r}function bt(ae){var ve=typeof ae;return!!ae&&(ve=="object"||ve=="function")}function Yt(ae){return!!ae&&typeof ae=="object"}function Jt(ae){return typeof ae=="symbol"||Yt(ae)&&le.call(ae)==i}function ir(ae){return ae==null?"":An(ae)}function Xe(ae,ve,p){var Ne=ae==null?void 0:Zt(ae,ve);return Ne===void 0?p:Ne}return o4=Xe,o4}var iQ=rQ();const oQ=Gl(iQ);var zv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var sQ=zv.exports,I8;function aQ(){return I8||(I8=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",C=500,x="__lodash_placeholder__",B=1,R=2,P=4,U=1,N=2,W=1,X=2,$=4,re=8,te=16,V=32,ne=64,G=128,le=256,fe=512,pe=30,we="...",Se=800,xe=16,je=1,Me=2,rt=3,Ct=1/0,it=9007199254740991,nt=17976931348623157e292,Ge=NaN,Ie=4294967295,$e=Ie-1,gt=Ie>>>1,Dt=[["ary",G],["bind",W],["bindKey",X],["curry",re],["curryRight",te],["flip",fe],["partial",V],["partialRight",ne],["rearg",le]],ut="[object Arguments]",Rt="[object Array]",St="[object AsyncFunction]",Ke="[object Boolean]",Pe="[object Date]",Re="[object DOMException]",Ye="[object Error]",vt="[object Function]",yt="[object GeneratorFunction]",Et="[object Map]",Zt="[object Number]",Ut="[object Null]",An="[object Object]",hr="[object Promise]",Vt="[object Proxy]",Vn="[object RegExp]",Pn="[object Set]",Dn="[object String]",Ln="[object Symbol]",Ir="[object Undefined]",rr="[object WeakMap]",Yn="[object WeakSet]",We="[object ArrayBuffer]",he="[object DataView]",me="[object Float32Array]",et="[object Float64Array]",bt="[object Int8Array]",Yt="[object Int16Array]",Jt="[object Int32Array]",ir="[object Uint8Array]",Xe="[object Uint8ClampedArray]",ae="[object Uint16Array]",ve="[object Uint32Array]",p=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,Ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,lt=/[&<>"']/g,ct=RegExp(Te.source),Ft=RegExp(lt.source),jt=/<%-([\s\S]+?)%>/g,Gt=/<%([\s\S]+?)%>/g,nn=/<%=([\s\S]+?)%>/g,On=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rn=/^\w*$/,dr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tr=/[\\^$.*+?()[\]{}|]/g,or=RegExp(Tr.source),on=/^\s+/,ti=/\s/,li=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jr=/\{\n\/\* \[wrapped with (.+)\] \*/,Fr=/,? & /,wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dr=/[()=,{}\[\]\/\s]/,ui=/\\(\\)?/g,Pi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yi=/\w*$/,As=/^[-+]0x[0-9a-f]+$/i,qr=/^0b[01]+$/i,_s=/^\[object .+?Constructor\]$/,La=/^0o[0-7]+$/i,da=/^(?:0|[1-9]\d*)$/,No=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zs=/($^)/,hl=/['\n\r\u2028\u2029\\]/g,ci="\\ud800-\\udfff",oa="\\u0300-\\u036f",bo="\\ufe20-\\ufe2f",lo="\\u20d0-\\u20ff",Er=oa+bo+lo,wa="\\u2700-\\u27bf",qo="a-z\\xdf-\\xf6\\xf8-\\xff",Jo="\\xac\\xb1\\xd7\\xf7",qe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xt="\\u2000-\\u206f",_n=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jn="A-Z\\xc0-\\xd6\\xd8-\\xde",fn="\\ufe0e\\ufe0f",gr=Jo+qe+xt+_n,Qi="['’]",Io="["+ci+"]",fs="["+gr+"]",fa="["+Er+"]",iA="\\d+",vi="["+wa+"]",zu="["+qo+"]",jl="[^"+ci+gr+iA+wa+qo+jn+"]",nl="\\ud83c[\\udffb-\\udfff]",Ua="(?:"+fa+"|"+nl+")",JA="[^"+ci+"]",Sa="(?:\\ud83c[\\udde6-\\uddff]){2}",bi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ao="["+jn+"]",Oi="\\u200d",xl="(?:"+zu+"|"+jl+")",Oo="(?:"+Ao+"|"+jl+")",Wl="(?:"+Qi+"(?:d|ll|m|re|s|t|ve))?",Di="(?:"+Qi+"(?:D|LL|M|RE|S|T|VE))?",oA=Ua+"?",sA="["+fn+"]?",za="(?:"+Oi+"(?:"+[JA,Sa,bi].join("|")+")"+sA+oA+")*",Ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$o=sA+oA+za,Vo="(?:"+[vi,Sa,bi].join("|")+")"+$o,Hi="(?:"+[JA+fa+"?",fa,Sa,bi,Io].join("|")+")",Ea=RegExp(Qi,"g"),pa=RegExp(fa,"g"),Ss=RegExp(nl+"(?="+nl+")|"+Hi+$o,"g"),sa=RegExp([Ao+"?"+zu+"+"+Wl+"(?="+[fs,Ao,"$"].join("|")+")",Oo+"+"+Di+"(?="+[fs,Ao+xl,"$"].join("|")+")",Ao+"?"+xl+"+"+Wl,Ao+"+"+Di,uo,Ni,iA,Vo].join("|"),"g"),EA=RegExp("["+Oi+ci+Er+fn+"]"),Ii=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ho=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gi=-1,Sr={};Sr[me]=Sr[et]=Sr[bt]=Sr[Yt]=Sr[Jt]=Sr[ir]=Sr[Xe]=Sr[ae]=Sr[ve]=!0,Sr[ut]=Sr[Rt]=Sr[We]=Sr[Ke]=Sr[he]=Sr[Pe]=Sr[Ye]=Sr[vt]=Sr[Et]=Sr[Zt]=Sr[An]=Sr[Vn]=Sr[Pn]=Sr[Dn]=Sr[rr]=!1;var to={};to[ut]=to[Rt]=to[We]=to[he]=to[Ke]=to[Pe]=to[me]=to[et]=to[bt]=to[Yt]=to[Jt]=to[Et]=to[Zt]=to[An]=to[Vn]=to[Pn]=to[Dn]=to[Ln]=to[ir]=to[Xe]=to[ae]=to[ve]=!0,to[Ye]=to[vt]=to[rr]=!1;var J={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ht={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kr=parseFloat,Qn=parseInt,Zr=typeof window=="object"&&window&&window.Object===Object&&window,Ai=typeof self=="object"&&self&&self.Object===Object&&self,Rr=Zr||Ai||Function("return this")(),ni=e&&!e.nodeType&&e,Yi=ni&&!0&&n&&!n.nodeType&&n,xo=Yi&&Yi.exports===ni,si=xo&&Zr.process,fi=function(){try{var rn=Yi&&Yi.require&&Yi.require("util").types;return rn||si&&si.binding&&si.binding("util")}catch{}}(),co=fi&&fi.isArrayBuffer,Ki=fi&&fi.isDate,Fi=fi&&fi.isMap,Ns=fi&&fi.isRegExp,Na=fi&&fi.isSet,eu=fi&&fi.isTypedArray;function Gs(rn,In,dn){switch(dn.length){case 0:return rn.call(In);case 1:return rn.call(In,dn[0]);case 2:return rn.call(In,dn[0],dn[1]);case 3:return rn.call(In,dn[0],dn[1],dn[2])}return rn.apply(In,dn)}function dl(rn,In,dn,Lr){for(var Ri=-1,Go=rn==null?0:rn.length;++Ri<Go;){var ma=rn[Ri];In(Lr,ma,dn(ma),rn)}return Lr}function Ga(rn,In){for(var dn=-1,Lr=rn==null?0:rn.length;++dn<Lr&&In(rn[dn],dn,rn)!==!1;);return rn}function BA(rn,In){for(var dn=rn==null?0:rn.length;dn--&&In(rn[dn],dn,rn)!==!1;);return rn}function uc(rn,In){for(var dn=-1,Lr=rn==null?0:rn.length;++dn<Lr;)if(!In(rn[dn],dn,rn))return!1;return!0}function mu(rn,In){for(var dn=-1,Lr=rn==null?0:rn.length,Ri=0,Go=[];++dn<Lr;){var ma=rn[dn];In(ma,dn,rn)&&(Go[Ri++]=ma)}return Go}function aA(rn,In){var dn=rn==null?0:rn.length;return!!dn&&Es(rn,In,0)>-1}function Ic(rn,In,dn){for(var Lr=-1,Ri=rn==null?0:rn.length;++Lr<Ri;)if(dn(In,rn[Lr]))return!0;return!1}function ps(rn,In){for(var dn=-1,Lr=rn==null?0:rn.length,Ri=Array(Lr);++dn<Lr;)Ri[dn]=In(rn[dn],dn,rn);return Ri}function Tc(rn,In){for(var dn=-1,Lr=In.length,Ri=rn.length;++dn<Lr;)rn[Ri+dn]=In[dn];return rn}function md(rn,In,dn,Lr){var Ri=-1,Go=rn==null?0:rn.length;for(Lr&&Go&&(dn=rn[++Ri]);++Ri<Go;)dn=In(dn,rn[Ri],Ri,rn);return dn}function Pp(rn,In,dn,Lr){var Ri=rn==null?0:rn.length;for(Lr&&Ri&&(dn=rn[--Ri]);Ri--;)dn=In(dn,rn[Ri],Ri,rn);return dn}function qh(rn,In){for(var dn=-1,Lr=rn==null?0:rn.length;++dn<Lr;)if(In(rn[dn],dn,rn))return!0;return!1}var $h=_h("length");function gd(rn){return rn.split("")}function Vh(rn){return rn.match(wn)||[]}function yd(rn,In,dn){var Lr;return dn(rn,function(Ri,Go,ma){if(In(Ri,Go,ma))return Lr=Go,!1}),Lr}function Nu(rn,In,dn,Lr){for(var Ri=rn.length,Go=dn+(Lr?1:-1);Lr?Go--:++Go<Ri;)if(In(rn[Go],Go,rn))return Go;return-1}function Es(rn,In,dn){return In===In?xh(rn,In,dn):Nu(rn,uf,dn)}function gu(rn,In,dn,Lr){for(var Ri=dn-1,Go=rn.length;++Ri<Go;)if(Lr(rn[Ri],In))return Ri;return-1}function uf(rn){return rn!==rn}function nh(rn,In){var dn=rn==null?0:rn.length;return dn?vd(rn,In)/dn:Ge}function _h(rn){return function(In){return In==null?t:In[rn]}}function kc(rn){return function(In){return rn==null?t:rn[In]}}function Rp(rn,In,dn,Lr,Ri){return Ri(rn,function(Go,ma,es){dn=Lr?(Lr=!1,Go):In(dn,Go,ma,es)}),dn}function Hh(rn,In){var dn=rn.length;for(rn.sort(In);dn--;)rn[dn]=rn[dn].value;return rn}function vd(rn,In){for(var dn,Lr=-1,Ri=rn.length;++Lr<Ri;){var Go=In(rn[Lr]);Go!==t&&(dn=dn===t?Go:dn+Go)}return dn}function Pc(rn,In){for(var dn=-1,Lr=Array(rn);++dn<rn;)Lr[dn]=In(dn);return Lr}function Dp(rn,In){return ps(In,function(dn){return[dn,rn[dn]]})}function cf(rn){return rn&&rn.slice(0,Mh(rn)+1).replace(on,"")}function OA(rn){return function(In){return rn(In)}}function Zh(rn,In){return ps(In,function(dn){return rn[dn]})}function Ml(rn,In){return rn.has(In)}function Gu(rn,In){for(var dn=-1,Lr=rn.length;++dn<Lr&&Es(In,rn[dn],0)>-1;);return dn}function bh(rn,In){for(var dn=rn.length;dn--&&Es(In,rn[dn],0)>-1;);return dn}function Cd(rn,In){for(var dn=rn.length,Lr=0;dn--;)rn[dn]===In&&++Lr;return Lr}var _d=kc(J),fl=kc(Ee);function Rc(rn){return"\\"+Ht[rn]}function Dc(rn,In){return rn==null?t:rn[In]}function ju(rn){return EA.test(rn)}function qf(rn){return Ii.test(rn)}function hf(rn){for(var In,dn=[];!(In=rn.next()).done;)dn.push(In.value);return dn}function bd(rn){var In=-1,dn=Array(rn.size);return rn.forEach(function(Lr,Ri){dn[++In]=[Ri,Lr]}),dn}function xd(rn,In){return function(dn){return rn(In(dn))}}function rl(rn,In){for(var dn=-1,Lr=rn.length,Ri=0,Go=[];++dn<Lr;){var ma=rn[dn];(ma===In||ma===x)&&(rn[dn]=x,Go[Ri++]=dn)}return Go}function pl(rn){var In=-1,dn=Array(rn.size);return rn.forEach(function(Lr){dn[++In]=Lr}),dn}function $f(rn){var In=-1,dn=Array(rn.size);return rn.forEach(function(Lr){dn[++In]=[Lr,Lr]}),dn}function xh(rn,In,dn){for(var Lr=dn-1,Ri=rn.length;++Lr<Ri;)if(rn[Lr]===In)return Lr;return-1}function Kp(rn,In,dn){for(var Lr=dn+1;Lr--;)if(rn[Lr]===In)return Lr;return Lr}function so(rn){return ju(rn)?rh(rn):$h(rn)}function Ba(rn){return ju(rn)?df(rn):gd(rn)}function Mh(rn){for(var In=rn.length;In--&&ti.test(rn.charAt(In)););return In}var Md=kc(st);function rh(rn){for(var In=Ss.lastIndex=0;Ss.test(rn);)++In;return In}function df(rn){return rn.match(Ss)||[]}function ff(rn){return rn.match(sa)||[]}var Kc=function rn(In){In=In==null?Rr:Wu.defaults(Rr.Object(),In,Wu.pick(Rr,Ho));var dn=In.Array,Lr=In.Date,Ri=In.Error,Go=In.Function,ma=In.Math,es=In.Object,cc=In.RegExp,pf=In.String,IA=In.TypeError,lA=dn.prototype,yu=Go.prototype,ja=es.prototype,ga=In["__core-js_shared__"],ih=yu.toString,Po=ja.hasOwnProperty,Fc=0,vu=function(){var b=/[^.]+$/.exec(ga&&ga.keys&&ga.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),TA=ja.toString,tu=ih.call(es),Wa=Rr._,Cu=cc("^"+ih.call(Po).replace(Tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),AA=xo?In.Buffer:t,wl=In.Symbol,hc=In.Uint8Array,wd=AA?AA.allocUnsafe:t,ml=xd(es.getPrototypeOf,es),Zi=es.create,Lc=ja.propertyIsEnumerable,dc=lA.splice,mf=wl?wl.isConcatSpreadable:t,uA=wl?wl.iterator:t,oh=wl?wl.toStringTag:t,wh=function(){try{var b=tc(es,"defineProperty");return b({},"",{}),b}catch{}}(),Sd=In.clearTimeout!==Rr.clearTimeout&&In.clearTimeout,us=Lr&&Lr.now!==Rr.Date.now&&Lr.now,Uc=In.setTimeout!==Rr.setTimeout&&In.setTimeout,_u=ma.ceil,kA=ma.floor,Xh=es.getOwnPropertySymbols,Jh=AA?AA.isBuffer:t,sh=In.isFinite,fc=lA.join,bu=xd(es.keys,es),ms=ma.max,ya=ma.min,Ed=Lr.now,ah=In.parseInt,Sh=ma.random,Qu=lA.reverse,lh=tc(In,"DataView"),PA=tc(In,"Map"),pc=tc(In,"Promise"),Sl=tc(In,"Set"),xu=tc(In,"WeakMap"),Mu=tc(es,"create"),zc=xu&&new xu,bs={},Yu=qs(lh),Qa=qs(PA),mc=qs(pc),Ql=qs(Sl),wu=qs(xu),El=wl?wl.prototype:t,cA=El?El.valueOf:t,Ah=El?El.toString:t;function ot(b){if(Fl(b)&&!So(b)&&!(b instanceof ai)){if(b instanceof Ro)return b;if(Po.call(b,"__wrapped__"))return NA(b)}return new Ro(b)}var Eh=function(){function b(){}return function(T){if(!Cl(T))return{};if(Zi)return Zi(T);b.prototype=T;var q=new b;return b.prototype=t,q}}();function Xs(){}function Ro(b,T){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}ot.templateSettings={escape:jt,evaluate:Gt,interpolate:nn,variable:"",imports:{_:ot}},ot.prototype=Xs.prototype,ot.prototype.constructor=ot,Ro.prototype=Eh(Xs.prototype),Ro.prototype.constructor=Ro;function ai(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ie,this.__views__=[]}function Bs(){var b=new ai(this.__wrapped__);return b.__actions__=gA(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=gA(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=gA(this.__views__),b}function js(){if(this.__filtered__){var b=new ai(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function qu(){var b=this.__wrapped__.value(),T=this.__dir__,q=So(b),Ce=T<0,Ze=q?b.length:0,ht=Np(0,Ze,this.__views__),Lt=ht.start,$t=ht.end,an=$t-Lt,qn=Ce?$t:Lt-1,Zn=this.__iteratees__,mr=Zn.length,$r=0,Bi=ya(an,this.__takeCount__);if(!q||!Ce&&Ze==an&&Bi==an)return ao(b,this.__actions__);var no=[];e:for(;an--&&$r<Bi;){qn+=T;for(var ns=-1,ro=b[qn];++ns<mr;){var Cs=Zn[ns],Is=Cs.iteratee,Vd=Cs.type,Nh=Is(ro);if(Vd==Me)ro=Nh;else if(!Nh){if(Vd==je)continue e;break e}}no[$r++]=ro}return no}ai.prototype=Eh(Xs.prototype),ai.prototype.constructor=ai;function il(b){var T=-1,q=b==null?0:b.length;for(this.clear();++T<q;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function Ps(){this.__data__=Mu?Mu(null):{},this.size=0}function Os(b){var T=this.has(b)&&delete this.__data__[b];return this.size-=T?1:0,T}function nu(b){var T=this.__data__;if(Mu){var q=T[b];return q===f?t:q}return Po.call(T,b)?T[b]:t}function Ya(b){var T=this.__data__;return Mu?T[b]!==t:Po.call(T,b)}function gl(b,T){var q=this.__data__;return this.size+=this.has(b)?0:1,q[b]=Mu&&T===t?f:T,this}il.prototype.clear=Ps,il.prototype.delete=Os,il.prototype.get=nu,il.prototype.has=Ya,il.prototype.set=gl;function yl(b){var T=-1,q=b==null?0:b.length;for(this.clear();++T<q;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function $u(){this.__data__=[],this.size=0}function Bl(b){var T=this.__data__,q=ol(T,b);if(q<0)return!1;var Ce=T.length-1;return q==Ce?T.pop():dc.call(T,q,1),--this.size,!0}function Oa(b){var T=this.__data__,q=ol(T,b);return q<0?t:T[q][1]}function ru(b){return ol(this.__data__,b)>-1}function uh(b,T){var q=this.__data__,Ce=ol(q,b);return Ce<0?(++this.size,q.push([b,T])):q[Ce][1]=T,this}yl.prototype.clear=$u,yl.prototype.delete=Bl,yl.prototype.get=Oa,yl.prototype.has=ru,yl.prototype.set=uh;function Js(b){var T=-1,q=b==null?0:b.length;for(this.clear();++T<q;){var Ce=b[T];this.set(Ce[0],Ce[1])}}function ch(){this.size=0,this.__data__={hash:new il,map:new(PA||yl),string:new il}}function Yl(b){var T=Kd(this,b).delete(b);return this.size-=T?1:0,T}function gf(b){return Kd(this,b).get(b)}function hh(b){return Kd(this,b).has(b)}function iu(b,T){var q=Kd(this,b),Ce=q.size;return q.set(b,T),this.size+=q.size==Ce?0:1,this}Js.prototype.clear=ch,Js.prototype.delete=Yl,Js.prototype.get=gf,Js.prototype.has=hh,Js.prototype.set=iu;function gc(b){var T=-1,q=b==null?0:b.length;for(this.__data__=new Js;++T<q;)this.add(b[T])}function ou(b){return this.__data__.set(b,f),this}function ql(b){return this.__data__.has(b)}gc.prototype.add=gc.prototype.push=ou,gc.prototype.has=ql;function Xn(b){var T=this.__data__=new yl(b);this.size=T.size}function Mo(){this.__data__=new yl,this.size=0}function Ol(b){var T=this.__data__,q=T.delete(b);return this.size=T.size,q}function qa(b){return this.__data__.get(b)}function ea(b){return this.__data__.has(b)}function Su(b,T){var q=this.__data__;if(q instanceof yl){var Ce=q.__data__;if(!PA||Ce.length<i-1)return Ce.push([b,T]),this.size=++q.size,this;q=this.__data__=new Js(Ce)}return q.set(b,T),this.size=q.size,this}Xn.prototype.clear=Mo,Xn.prototype.delete=Ol,Xn.prototype.get=qa,Xn.prototype.has=ea,Xn.prototype.set=Su;function RA(b,T){var q=So(b),Ce=!q&&op(b),Ze=!q&&!Ce&&WA(b),ht=!q&&!Ce&&!Ze&&d0(b),Lt=q||Ce||Ze||ht,$t=Lt?Pc(b.length,pf):[],an=$t.length;for(var qn in b)(T||Po.call(b,qn))&&!(Lt&&(qn=="length"||Ze&&(qn=="offset"||qn=="parent")||ht&&(qn=="buffer"||qn=="byteLength"||qn=="byteOffset")||E(qn,an)))&&$t.push(qn);return $t}function Ti(b){var T=b.length;return T?b[zt(0,T-1)]:t}function yc(b,T){return _a(gA(b),Hu(T,0,b.length))}function yf(b){return _a(gA(b))}function Vu(b,T,q){(q!==t&&!sd(b[T],q)||q===t&&!(T in b))&&vc(b,T,q)}function Nc(b,T,q){var Ce=b[T];(!(Po.call(b,T)&&sd(Ce,q))||q===t&&!(T in b))&&vc(b,T,q)}function ol(b,T){for(var q=b.length;q--;)if(sd(b[q][0],T))return q;return-1}function va(b,T,q,Ce){return DA(b,function(Ze,ht,Lt){T(Ce,Ze,q(Ze),Lt)}),Ce}function gs(b,T){return b&&LA(T,ue(T),b)}function $l(b,T){return b&&LA(T,ge(T),b)}function vc(b,T,q){T=="__proto__"&&wh?wh(b,T,{configurable:!0,enumerable:!0,value:q,writable:!0}):b[T]=q}function Cc(b,T){for(var q=-1,Ce=T.length,Ze=dn(Ce),ht=b==null;++q<Ce;)Ze[q]=ht?t:w(b,T[q]);return Ze}function Hu(b,T,q){return b===b&&(q!==t&&(b=b<=q?b:q),T!==t&&(b=b>=T?b:T)),b}function hA(b,T,q,Ce,Ze,ht){var Lt,$t=T&B,an=T&R,qn=T&P;if(q&&(Lt=Ze?q(b,Ce,Ze,ht):q(b)),Lt!==t)return Lt;if(!Cl(b))return b;var Zn=So(b);if(Zn){if(Lt=Zf(b),!$t)return gA(b,Lt)}else{var mr=vl(b),$r=mr==vt||mr==yt;if(WA(b))return ec(b,$t);if(mr==An||mr==ut||$r&&!Ze){if(Lt=an||$r?{}:CA(b),!$t)return an?Iu(b,$l(Lt,b)):Wc(b,gs(Lt,b))}else{if(!to[mr])return Ze?b:{};Lt=xf(b,mr,$t)}}ht||(ht=new Xn);var Bi=ht.get(b);if(Bi)return Bi;ht.set(b,Lt),h1(b)?b.forEach(function(ro){Lt.add(hA(ro,T,q,ro,b,ht))}):av(b)&&b.forEach(function(ro,Cs){Lt.set(Cs,hA(ro,T,q,Cs,b,ht))});var no=qn?an?Rd:bf:an?ge:ue,ns=Zn?t:no(b);return Ga(ns||b,function(ro,Cs){ns&&(Cs=ro,ro=b[Cs]),Nc(Lt,Cs,hA(ro,T,q,Cs,b,ht))}),Lt}function _c(b){var T=ue(b);return function(q){return os(q,b,T)}}function os(b,T,q){var Ce=q.length;if(b==null)return!Ce;for(b=es(b);Ce--;){var Ze=q[Ce],ht=T[Ze],Lt=b[Ze];if(Lt===t&&!(Ze in b)||!ht(Lt))return!1}return!0}function Bh(b,T,q){if(typeof b!="function")throw new IA(l);return Jr(function(){b.apply(t,q)},T)}function Eu(b,T,q,Ce){var Ze=-1,ht=aA,Lt=!0,$t=b.length,an=[],qn=T.length;if(!$t)return an;q&&(T=ps(T,OA(q))),Ce?(ht=Ic,Lt=!1):T.length>=i&&(ht=Ml,Lt=!1,T=new gc(T));e:for(;++Ze<$t;){var Zn=b[Ze],mr=q==null?Zn:q(Zn);if(Zn=Ce||Zn!==0?Zn:0,Lt&&mr===mr){for(var $r=qn;$r--;)if(T[$r]===mr)continue e;an.push(Zn)}else ht(T,mr,Ce)||an.push(Zn)}return an}var DA=ta(Tl),vf=ta(Xu,!0);function ed(b,T){var q=!0;return DA(b,function(Ce,Ze,ht){return q=!!T(Ce,Ze,ht),q}),q}function Oh(b,T,q){for(var Ce=-1,Ze=b.length;++Ce<Ze;){var ht=b[Ce],Lt=T(ht);if(Lt!=null&&($t===t?Lt===Lt&&!Dh(Lt):q(Lt,$t)))var $t=Lt,an=ht}return an}function Il(b,T,q,Ce){var Ze=b.length;for(q=Lo(q),q<0&&(q=-q>Ze?0:Ze+q),Ce=Ce===t||Ce>Ze?Ze:Lo(Ce),Ce<0&&(Ce+=Ze),Ce=q>Ce?0:uv(Ce);q<Ce;)b[q++]=T;return b}function Zu(b,T){var q=[];return DA(b,function(Ce,Ze,ht){T(Ce,Ze,ht)&&q.push(Ce)}),q}function vr(b,T,q,Ce,Ze){var ht=-1,Lt=b.length;for(q||(q=g),Ze||(Ze=[]);++ht<Lt;){var $t=b[ht];T>0&&q($t)?T>1?vr($t,T-1,q,Ce,Ze):Tc(Ze,$t):Ce||(Ze[Ze.length]=$t)}return Ze}var ri=Th(),bc=Th(!0);function Tl(b,T){return b&&ri(b,T,ue)}function Xu(b,T){return b&&bc(b,T,ue)}function Ws(b,T){return mu(T,function(q){return sp(b[q])})}function Bu(b,T){T=FA(T,b);for(var q=0,Ce=T.length;b!=null&&q<Ce;)b=b[Ys(T[q++])];return q&&q==Ce?b:t}function ss(b,T,q){var Ce=T(b);return So(b)?Ce:Tc(Ce,q(b))}function Ia(b){return b==null?b===t?Ir:Ut:oh&&oh in es(b)?zA(b):Fn(b)}function dA(b,T){return b>T}function Do(b,T){return b!=null&&Po.call(b,T)}function as(b,T){return b!=null&&T in es(b)}function su(b,T,q){return b>=ya(T,q)&&b<ms(T,q)}function Ju(b,T,q){for(var Ce=q?Ic:aA,Ze=b[0].length,ht=b.length,Lt=ht,$t=dn(ht),an=1/0,qn=[];Lt--;){var Zn=b[Lt];Lt&&T&&(Zn=ps(Zn,OA(T))),an=ya(Zn.length,an),$t[Lt]=!q&&(T||Ze>=120&&Zn.length>=120)?new gc(Lt&&Zn):t}Zn=b[0];var mr=-1,$r=$t[0];e:for(;++mr<Ze&&qn.length<an;){var Bi=Zn[mr],no=T?T(Bi):Bi;if(Bi=q||Bi!==0?Bi:0,!($r?Ml($r,no):Ce(qn,no,q))){for(Lt=ht;--Lt;){var ns=$t[Lt];if(!(ns?Ml(ns,no):Ce(b[Lt],no,q)))continue e}$r&&$r.push(no),qn.push(Bi)}}return qn}function KA(b,T,q,Ce){return Tl(b,function(Ze,ht,Lt){T(Ce,q(Ze),ht,Lt)}),Ce}function sl(b,T,q){T=FA(T,b),b=Hn(b,T);var Ce=b==null?b:b[Ys(_A(T))];return Ce==null?t:Gs(Ce,b,q)}function Ih(b){return Fl(b)&&Ia(b)==ut}function Gc(b){return Fl(b)&&Ia(b)==We}function fA(b){return Fl(b)&&Ia(b)==Pe}function kl(b,T,q,Ce,Ze){return b===T?!0:b==null||T==null||!Fl(b)&&!Fl(T)?b!==b&&T!==T:O(b,T,q,Ce,kl,Ze)}function O(b,T,q,Ce,Ze,ht){var Lt=So(b),$t=So(T),an=Lt?Rt:vl(b),qn=$t?Rt:vl(T);an=an==ut?An:an,qn=qn==ut?An:qn;var Zn=an==An,mr=qn==An,$r=an==qn;if($r&&WA(b)){if(!WA(T))return!1;Lt=!0,Zn=!1}if($r&&!Zn)return ht||(ht=new Xn),Lt||d0(b)?UA(b,T,q,Ce,Ze,ht):Pd(b,T,an,q,Ce,Ze,ht);if(!(q&U)){var Bi=Zn&&Po.call(b,"__wrapped__"),no=mr&&Po.call(T,"__wrapped__");if(Bi||no){var ns=Bi?b.value():b,ro=no?T.value():T;return ht||(ht=new Xn),Ze(ns,ro,q,Ce,ht)}}return $r?(ht||(ht=new Xn),Hf(b,T,q,Ce,Ze,ht)):!1}function a(b){return Fl(b)&&vl(b)==Et}function c(b,T,q,Ce){var Ze=q.length,ht=Ze,Lt=!Ce;if(b==null)return!ht;for(b=es(b);Ze--;){var $t=q[Ze];if(Lt&&$t[2]?$t[1]!==b[$t[0]]:!($t[0]in b))return!1}for(;++Ze<ht;){$t=q[Ze];var an=$t[0],qn=b[an],Zn=$t[1];if(Lt&&$t[2]){if(qn===t&&!(an in b))return!1}else{var mr=new Xn;if(Ce)var $r=Ce(qn,Zn,an,b,T,mr);if(!($r===t?kl(Zn,qn,U|N,Ce,mr):$r))return!1}}return!0}function v(b){if(!Cl(b)||_e(b))return!1;var T=sp(b)?Cu:_s;return T.test(qs(b))}function M(b){return Fl(b)&&Ia(b)==Vn}function I(b){return Fl(b)&&vl(b)==Pn}function z(b){return Fl(b)&&Wd(b.length)&&!!Sr[Ia(b)]}function Y(b){return typeof b=="function"?b:b==null?Zc:typeof b=="object"?So(b)?ze(b[0],b[1]):Be(b):ob(b)}function ee(b){if(!Ue(b))return bu(b);var T=[];for(var q in es(b))Po.call(b,q)&&q!="constructor"&&T.push(q);return T}function Ae(b){if(!Cl(b))return xn(b);var T=Ue(b),q=[];for(var Ce in b)Ce=="constructor"&&(T||!Po.call(b,Ce))||q.push(Ce);return q}function de(b,T){return b<T}function Oe(b,T){var q=-1,Ce=$c(b)?dn(b.length):[];return DA(b,function(Ze,ht,Lt){Ce[++q]=T(Ze,ht,Lt)}),Ce}function Be(b){var T=Wo(b);return T.length==1&&T[0][2]?Bt(T[0][0],T[0][1]):function(q){return q===b||c(q,b,T)}}function ze(b,T){return D(b)&&mt(T)?Bt(Ys(b),T):function(q){var Ce=w(q,b);return Ce===t&&Ce===T?F(q,b):kl(T,Ce,U|N)}}function He(b,T,q,Ce,Ze){b!==T&&ri(T,function(ht,Lt){if(Ze||(Ze=new Xn),Cl(ht))ft(b,T,Lt,q,He,Ce,Ze);else{var $t=Ce?Ce(fr(b,Lt),ht,Lt+"",b,T,Ze):t;$t===t&&($t=ht),Vu(b,Lt,$t)}},ge)}function ft(b,T,q,Ce,Ze,ht,Lt){var $t=fr(b,q),an=fr(T,q),qn=Lt.get(an);if(qn){Vu(b,q,qn);return}var Zn=ht?ht($t,an,q+"",b,T,Lt):t,mr=Zn===t;if(mr){var $r=So(an),Bi=!$r&&WA(an),no=!$r&&!Bi&&d0(an);Zn=an,$r||Bi||no?So($t)?Zn=$t:Kl($t)?Zn=gA($t):Bi?(mr=!1,Zn=ec(an,!0)):no?(mr=!1,Zn=Pl(an,!0)):Zn=[]:c0(an)||op(an)?(Zn=$t,op($t)?Zn=Z_($t):(!Cl($t)||sp($t))&&(Zn=CA(an))):mr=!1}mr&&(Lt.set(an,Zn),Ze(Zn,an,Ce,ht,Lt),Lt.delete(an)),Vu(b,q,Zn)}function dt(b,T){var q=b.length;if(q)return T+=T<0?q:0,E(T,q)?b[T]:t}function pt(b,T,q){T.length?T=ps(T,function(ht){return So(ht)?function(Lt){return Bu(Lt,ht.length===1?ht[0]:ht)}:ht}):T=[Zc];var Ce=-1;T=ps(T,OA(Mi()));var Ze=Oe(b,function(ht,Lt,$t){var an=ps(T,function(qn){return qn(ht)});return{criteria:an,index:++Ce,value:ht}});return Hh(Ze,function(ht,Lt){return Cf(ht,Lt,q)})}function wt(b,T){return Tt(b,T,function(q,Ce){return F(b,Ce)})}function Tt(b,T,q){for(var Ce=-1,Ze=T.length,ht={};++Ce<Ze;){var Lt=T[Ce],$t=Bu(b,Lt);q($t,Lt)&&Ar(ht,FA(Lt,b),$t)}return ht}function Mt(b){return function(T){return Bu(T,b)}}function kt(b,T,q,Ce){var Ze=Ce?gu:Es,ht=-1,Lt=T.length,$t=b;for(b===T&&(T=gA(T)),q&&($t=ps(b,OA(q)));++ht<Lt;)for(var an=0,qn=T[ht],Zn=q?q(qn):qn;(an=Ze($t,Zn,an,Ce))>-1;)$t!==b&&dc.call($t,an,1),dc.call(b,an,1);return b}function Kt(b,T){for(var q=b?T.length:0,Ce=q-1;q--;){var Ze=T[q];if(q==Ce||Ze!==ht){var ht=Ze;E(Ze)?dc.call(b,Ze,1):aa(b,Ze)}}return b}function zt(b,T){return b+kA(Sh()*(T-b+1))}function sn(b,T,q,Ce){for(var Ze=-1,ht=ms(_u((T-b)/(q||1)),0),Lt=dn(ht);ht--;)Lt[Ce?ht:++Ze]=b,b+=q;return Lt}function bn(b,T){var q="";if(!b||T<1||T>it)return q;do T%2&&(q+=b),T=kA(T/2),T&&(b+=b);while(T);return q}function en(b,T){return zr(Kn(b,T,Zc),b+"")}function ln(b){return Ti(er(b))}function Cn(b,T){var q=er(b);return _a(q,Hu(T,0,q.length))}function Ar(b,T,q,Ce){if(!Cl(b))return b;T=FA(T,b);for(var Ze=-1,ht=T.length,Lt=ht-1,$t=b;$t!=null&&++Ze<ht;){var an=Ys(T[Ze]),qn=q;if(an==="__proto__"||an==="constructor"||an==="prototype")return b;if(Ze!=Lt){var Zn=$t[an];qn=Ce?Ce(Zn,an,$t):t,qn===t&&(qn=Cl(Zn)?Zn:E(T[Ze+1])?[]:{})}Nc($t,an,qn),$t=$t[an]}return b}var cr=zc?function(b,T){return zc.set(b,T),b}:Zc,kn=wh?function(b,T){return wh(b,"toString",{configurable:!0,enumerable:!1,value:f1(T),writable:!0})}:Zc;function Br(b){return _a(er(b))}function Hr(b,T,q){var Ce=-1,Ze=b.length;T<0&&(T=-T>Ze?0:Ze+T),q=q>Ze?Ze:q,q<0&&(q+=Ze),Ze=T>q?0:q-T>>>0,T>>>=0;for(var ht=dn(Ze);++Ce<Ze;)ht[Ce]=b[Ce+T];return ht}function Xi(b,T){var q;return DA(b,function(Ce,Ze,ht){return q=T(Ce,Ze,ht),!q}),!!q}function ts(b,T,q){var Ce=0,Ze=b==null?Ce:b.length;if(typeof T=="number"&&T===T&&Ze<=gt){for(;Ce<Ze;){var ht=Ce+Ze>>>1,Lt=b[ht];Lt!==null&&!Dh(Lt)&&(q?Lt<=T:Lt<T)?Ce=ht+1:Ze=ht}return Ze}return Ko(b,T,Zc,q)}function Ko(b,T,q,Ce){var Ze=0,ht=b==null?0:b.length;if(ht===0)return 0;T=q(T);for(var Lt=T!==T,$t=T===null,an=Dh(T),qn=T===t;Ze<ht;){var Zn=kA((Ze+ht)/2),mr=q(b[Zn]),$r=mr!==t,Bi=mr===null,no=mr===mr,ns=Dh(mr);if(Lt)var ro=Ce||no;else qn?ro=no&&(Ce||$r):$t?ro=no&&$r&&(Ce||!Bi):an?ro=no&&$r&&!Bi&&(Ce||!ns):Bi||ns?ro=!1:ro=Ce?mr<=T:mr<T;ro?Ze=Zn+1:ht=Zn}return ya(ht,$e)}function jo(b,T){for(var q=-1,Ce=b.length,Ze=0,ht=[];++q<Ce;){var Lt=b[q],$t=T?T(Lt):Lt;if(!q||!sd($t,an)){var an=$t;ht[Ze++]=Lt===0?0:Lt}}return ht}function Rs(b){return typeof b=="number"?b:Dh(b)?Ge:+b}function ho(b){if(typeof b=="string")return b;if(So(b))return ps(b,ho)+"";if(Dh(b))return Ah?Ah.call(b):"";var T=b+"";return T=="0"&&1/b==-Ct?"-0":T}function ji(b,T,q){var Ce=-1,Ze=aA,ht=b.length,Lt=!0,$t=[],an=$t;if(q)Lt=!1,Ze=Ic;else if(ht>=i){var qn=T?null:ym(b);if(qn)return pl(qn);Lt=!1,Ze=Ml,an=new gc}else an=T?[]:$t;e:for(;++Ce<ht;){var Zn=b[Ce],mr=T?T(Zn):Zn;if(Zn=q||Zn!==0?Zn:0,Lt&&mr===mr){for(var $r=an.length;$r--;)if(an[$r]===mr)continue e;T&&an.push(mr),$t.push(Zn)}else Ze(an,mr,q)||(an!==$t&&an.push(mr),$t.push(Zn))}return $t}function aa(b,T){return T=FA(T,b),b=Hn(b,T),b==null||delete b[Ys(_A(T))]}function Ta(b,T,q,Ce){return Ar(b,T,q(Bu(b,T)),Ce)}function Ca(b,T,q,Ce){for(var Ze=b.length,ht=Ce?Ze:-1;(Ce?ht--:++ht<Ze)&&T(b[ht],ht,b););return q?Hr(b,Ce?0:ht,Ce?ht+1:Ze):Hr(b,Ce?ht+1:0,Ce?Ze:ht)}function ao(b,T){var q=b;return q instanceof ai&&(q=q.value()),md(T,function(Ce,Ze){return Ze.func.apply(Ze.thisArg,Tc([Ce],Ze.args))},q)}function Vl(b,T,q){var Ce=b.length;if(Ce<2)return Ce?ji(b[0]):[];for(var Ze=-1,ht=dn(Ce);++Ze<Ce;)for(var Lt=b[Ze],$t=-1;++$t<Ce;)$t!=Ze&&(ht[Ze]=Eu(ht[Ze]||Lt,b[$t],T,q));return ji(vr(ht,1),T,q)}function Hl(b,T,q){for(var Ce=-1,Ze=b.length,ht=T.length,Lt={};++Ce<Ze;){var $t=Ce<ht?T[Ce]:t;q(Lt,b[Ce],$t)}return Lt}function pA(b){return Kl(b)?b:[]}function Ou(b){return typeof b=="function"?b:Zc}function FA(b,T){return So(b)?b:D(b,T)?[b]:vs(Ks(b))}var au=en;function Zl(b,T,q){var Ce=b.length;return q=q===t?Ce:q,!T&&q>=Ce?b:Hr(b,T,q)}var mA=Sd||function(b){return Rr.clearTimeout(b)};function ec(b,T){if(T)return b.slice();var q=b.length,Ce=wd?wd(q):new b.constructor(q);return b.copy(Ce),Ce}function Xl(b){var T=new b.constructor(b.byteLength);return new hc(T).set(new hc(b)),T}function jc(b,T){var q=T?Xl(b.buffer):b.buffer;return new b.constructor(q,b.byteOffset,b.byteLength)}function ka(b){var T=new b.constructor(b.source,yi.exec(b));return T.lastIndex=b.lastIndex,T}function Qs(b){return cA?es(cA.call(b)):{}}function Pl(b,T){var q=T?Xl(b.buffer):b.buffer;return new b.constructor(q,b.byteOffset,b.length)}function ys(b,T){if(b!==T){var q=b!==t,Ce=b===null,Ze=b===b,ht=Dh(b),Lt=T!==t,$t=T===null,an=T===T,qn=Dh(T);if(!$t&&!qn&&!ht&&b>T||ht&&Lt&&an&&!$t&&!qn||Ce&&Lt&&an||!q&&an||!Ze)return 1;if(!Ce&&!ht&&!qn&&b<T||qn&&q&&Ze&&!Ce&&!ht||$t&&q&&Ze||!Lt&&Ze||!an)return-1}return 0}function Cf(b,T,q){for(var Ce=-1,Ze=b.criteria,ht=T.criteria,Lt=Ze.length,$t=q.length;++Ce<Lt;){var an=ys(Ze[Ce],ht[Ce]);if(an){if(Ce>=$t)return an;var qn=q[Ce];return an*(qn=="desc"?-1:1)}}return b.index-T.index}function Bd(b,T,q,Ce){for(var Ze=-1,ht=b.length,Lt=q.length,$t=-1,an=T.length,qn=ms(ht-Lt,0),Zn=dn(an+qn),mr=!Ce;++$t<an;)Zn[$t]=T[$t];for(;++Ze<Lt;)(mr||Ze<ht)&&(Zn[q[Ze]]=b[Ze]);for(;qn--;)Zn[$t++]=b[Ze++];return Zn}function Od(b,T,q,Ce){for(var Ze=-1,ht=b.length,Lt=-1,$t=q.length,an=-1,qn=T.length,Zn=ms(ht-$t,0),mr=dn(Zn+qn),$r=!Ce;++Ze<Zn;)mr[Ze]=b[Ze];for(var Bi=Ze;++an<qn;)mr[Bi+an]=T[an];for(;++Lt<$t;)($r||Ze<ht)&&(mr[Bi+q[Lt]]=b[Ze++]);return mr}function gA(b,T){var q=-1,Ce=b.length;for(T||(T=dn(Ce));++q<Ce;)T[q]=b[q];return T}function LA(b,T,q,Ce){var Ze=!q;q||(q={});for(var ht=-1,Lt=T.length;++ht<Lt;){var $t=T[ht],an=Ce?Ce(q[$t],b[$t],$t,q,b):t;an===t&&(an=b[$t]),Ze?vc(q,$t,an):Nc(q,$t,an)}return q}function Wc(b,T){return LA(b,vA(b),T)}function Iu(b,T){return LA(b,zp(b),T)}function yA(b,T){return function(q,Ce){var Ze=So(q)?dl:va,ht=T?T():{};return Ze(q,b,Mi(Ce,2),ht)}}function Pa(b){return en(function(T,q){var Ce=-1,Ze=q.length,ht=Ze>1?q[Ze-1]:t,Lt=Ze>2?q[2]:t;for(ht=b.length>3&&typeof ht=="function"?(Ze--,ht):t,Lt&&S(q[0],q[1],Lt)&&(ht=Ze<3?t:ht,Ze=1),T=es(T);++Ce<Ze;){var $t=q[Ce];$t&&b(T,$t,Ce,ht)}return T})}function ta(b,T){return function(q,Ce){if(q==null)return q;if(!$c(q))return b(q,Ce);for(var Ze=q.length,ht=T?Ze:-1,Lt=es(q);(T?ht--:++ht<Ze)&&Ce(Lt[ht],ht,Lt)!==!1;);return q}}function Th(b){return function(T,q,Ce){for(var Ze=-1,ht=es(T),Lt=Ce(T),$t=Lt.length;$t--;){var an=Lt[b?$t:++Ze];if(q(ht[an],an,ht)===!1)break}return T}}function Tu(b,T,q){var Ce=T&W,Ze=nd(b);function ht(){var Lt=this&&this!==Rr&&this instanceof ht?Ze:b;return Lt.apply(Ce?q:this,arguments)}return ht}function Id(b){return function(T){T=Ks(T);var q=ju(T)?Ba(T):t,Ce=q?q[0]:T.charAt(0),Ze=q?Zl(q,1).join(""):T.slice(1);return Ce[b]()+Ze}}function td(b){return function(T){return md(Im(Ha(T).replace(Ea,"")),b,"")}}function nd(b){return function(){var T=arguments;switch(T.length){case 0:return new b;case 1:return new b(T[0]);case 2:return new b(T[0],T[1]);case 3:return new b(T[0],T[1],T[2]);case 4:return new b(T[0],T[1],T[2],T[3]);case 5:return new b(T[0],T[1],T[2],T[3],T[4]);case 6:return new b(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new b(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var q=Eh(b.prototype),Ce=b.apply(q,T);return Cl(Ce)?Ce:q}}function Fp(b,T,q){var Ce=nd(b);function Ze(){for(var ht=arguments.length,Lt=dn(ht),$t=ht,an=Rh(Ze);$t--;)Lt[$t]=arguments[$t];var qn=ht<3&&Lt[0]!==an&&Lt[ht-1]!==an?[]:rl(Lt,an);if(ht-=qn.length,ht<q)return Jl(b,T,Td,Ze.placeholder,t,Lt,qn,t,t,q-ht);var Zn=this&&this!==Rr&&this instanceof Ze?Ce:b;return Gs(Zn,this,Lt)}return Ze}function ku(b){return function(T,q,Ce){var Ze=es(T);if(!$c(T)){var ht=Mi(q,3);T=ue(T),q=function($t){return ht(Ze[$t],$t,Ze)}}var Lt=b(T,q,Ce);return Lt>-1?Ze[ht?T[Lt]:Lt]:t}}function dh(b){return Qc(function(T){var q=T.length,Ce=q,Ze=Ro.prototype.thru;for(b&&T.reverse();Ce--;){var ht=T[Ce];if(typeof ht!="function")throw new IA(l);if(Ze&&!Lt&&id(ht)=="wrapper")var Lt=new Ro([],!0)}for(Ce=Lt?Ce:q;++Ce<q;){ht=T[Ce];var $t=id(ht),an=$t=="wrapper"?Dd(ht):t;an&&ce(an[0])&&an[1]==(G|re|V|le)&&!an[4].length&&an[9]==1?Lt=Lt[id(an[0])].apply(Lt,an[3]):Lt=ht.length==1&&ce(ht)?Lt[$t]():Lt.thru(ht)}return function(){var qn=arguments,Zn=qn[0];if(Lt&&qn.length==1&&So(Zn))return Lt.plant(Zn).value();for(var mr=0,$r=q?T[mr].apply(this,qn):Zn;++mr<q;)$r=T[mr].call(this,$r);return $r}})}function Td(b,T,q,Ce,Ze,ht,Lt,$t,an,qn){var Zn=T&G,mr=T&W,$r=T&X,Bi=T&(re|te),no=T&fe,ns=$r?t:nd(b);function ro(){for(var Cs=arguments.length,Is=dn(Cs),Vd=Cs;Vd--;)Is[Vd]=arguments[Vd];if(Bi)var Nh=Rh(ro),Hd=Cd(Is,Nh);if(Ce&&(Is=Bd(Is,Ce,Ze,Bi)),ht&&(Is=Od(Is,ht,Lt,Bi)),Cs-=Hd,Bi&&Cs<qn){var du=rl(Is,Nh);return Jl(b,T,Td,ro.placeholder,q,Is,du,$t,an,qn-Cs)}var Ap=mr?q:this,km=$r?Ap[b]:b;return Cs=Is.length,$t?Is=br(Is,$t):no&&Cs>1&&Is.reverse(),Zn&&an<Cs&&(Is.length=an),this&&this!==Rr&&this instanceof ro&&(km=ns||nd(km)),km.apply(Ap,Is)}return ro}function gm(b,T){return function(q,Ce){return KA(q,b,T(Ce),{})}}function kh(b,T){return function(q,Ce){var Ze;if(q===t&&Ce===t)return T;if(q!==t&&(Ze=q),Ce!==t){if(Ze===t)return Ce;typeof q=="string"||typeof Ce=="string"?(q=ho(q),Ce=ho(Ce)):(q=Rs(q),Ce=Rs(Ce)),Ze=b(q,Ce)}return Ze}}function _f(b){return Qc(function(T){return T=ps(T,OA(Mi())),en(function(q){var Ce=this;return b(T,function(Ze){return Gs(Ze,Ce,q)})})})}function Vf(b,T){T=T===t?" ":ho(T);var q=T.length;if(q<2)return q?bn(T,b):T;var Ce=bn(T,_u(b/so(T)));return ju(T)?Zl(Ba(Ce),0,b).join(""):Ce.slice(0,b)}function Lp(b,T,q,Ce){var Ze=T&W,ht=nd(b);function Lt(){for(var $t=-1,an=arguments.length,qn=-1,Zn=Ce.length,mr=dn(Zn+an),$r=this&&this!==Rr&&this instanceof Lt?ht:b;++qn<Zn;)mr[qn]=Ce[qn];for(;an--;)mr[qn++]=arguments[++$t];return Gs($r,Ze?q:this,mr)}return Lt}function rd(b){return function(T,q,Ce){return Ce&&typeof Ce!="number"&&S(T,q,Ce)&&(q=Ce=t),T=Qd(T),q===t?(q=T,T=0):q=Qd(q),Ce=Ce===t?T<q?1:-1:Qd(Ce),sn(T,q,Ce,b)}}function kd(b){return function(T,q){return typeof T=="string"&&typeof q=="string"||(T=Kh(T),q=Kh(q)),b(T,q)}}function Jl(b,T,q,Ce,Ze,ht,Lt,$t,an,qn){var Zn=T&re,mr=Zn?Lt:t,$r=Zn?t:Lt,Bi=Zn?ht:t,no=Zn?t:ht;T|=Zn?V:ne,T&=~(Zn?ne:V),T&$||(T&=-4);var ns=[b,T,Ze,Bi,mr,no,$r,$t,an,qn],ro=q.apply(t,ns);return ce(b)&&Pr(ro,ns),ro.placeholder=Ce,eo(ro,b,T)}function Rl(b){var T=ma[b];return function(q,Ce){if(q=Kh(q),Ce=Ce==null?0:ya(Lo(Ce),292),Ce&&sh(q)){var Ze=(Ks(q)+"e").split("e"),ht=T(Ze[0]+"e"+(+Ze[1]+Ce));return Ze=(Ks(ht)+"e").split("e"),+(Ze[0]+"e"+(+Ze[1]-Ce))}return T(q)}}var ym=Sl&&1/pl(new Sl([,-0]))[1]==Ct?function(b){return new Sl(b)}:bv;function Up(b){return function(T){var q=vl(T);return q==Et?bd(T):q==Pn?$f(T):Dp(T,b(T))}}function wo(b,T,q,Ce,Ze,ht,Lt,$t){var an=T&X;if(!an&&typeof b!="function")throw new IA(l);var qn=Ce?Ce.length:0;if(qn||(T&=-97,Ce=Ze=t),Lt=Lt===t?Lt:ms(Lo(Lt),0),$t=$t===t?$t:Lo($t),qn-=Ze?Ze.length:0,T&ne){var Zn=Ce,mr=Ze;Ce=Ze=t}var $r=an?t:Dd(b),Bi=[b,T,q,Ce,Ze,Zn,mr,ht,Lt,$t];if($r&&qt(Bi,$r),b=Bi[0],T=Bi[1],q=Bi[2],Ce=Bi[3],Ze=Bi[4],$t=Bi[9]=Bi[9]===t?an?0:b.length:ms(Bi[9]-qn,0),!$t&&T&(re|te)&&(T&=-25),!T||T==W)var no=Tu(b,T,q);else T==re||T==te?no=Fp(b,T,$t):(T==V||T==(W|V))&&!Ze.length?no=Lp(b,T,q,Ce):no=Td.apply(t,Bi);var ns=$r?cr:Pr;return eo(ns(no,Bi),b,T)}function vm(b,T,q,Ce){return b===t||sd(b,ja[q])&&!Po.call(Ce,q)?T:b}function Ph(b,T,q,Ce,Ze,ht){return Cl(b)&&Cl(T)&&(ht.set(T,b),He(b,T,t,Ph,ht),ht.delete(T)),b}function fh(b){return c0(b)?t:b}function UA(b,T,q,Ce,Ze,ht){var Lt=q&U,$t=b.length,an=T.length;if($t!=an&&!(Lt&&an>$t))return!1;var qn=ht.get(b),Zn=ht.get(T);if(qn&&Zn)return qn==T&&Zn==b;var mr=-1,$r=!0,Bi=q&N?new gc:t;for(ht.set(b,T),ht.set(T,b);++mr<$t;){var no=b[mr],ns=T[mr];if(Ce)var ro=Lt?Ce(ns,no,mr,T,b,ht):Ce(no,ns,mr,b,T,ht);if(ro!==t){if(ro)continue;$r=!1;break}if(Bi){if(!qh(T,function(Cs,Is){if(!Ml(Bi,Is)&&(no===Cs||Ze(no,Cs,q,Ce,ht)))return Bi.push(Is)})){$r=!1;break}}else if(!(no===ns||Ze(no,ns,q,Ce,ht))){$r=!1;break}}return ht.delete(b),ht.delete(T),$r}function Pd(b,T,q,Ce,Ze,ht,Lt){switch(q){case he:if(b.byteLength!=T.byteLength||b.byteOffset!=T.byteOffset)return!1;b=b.buffer,T=T.buffer;case We:return!(b.byteLength!=T.byteLength||!ht(new hc(b),new hc(T)));case Ke:case Pe:case Zt:return sd(+b,+T);case Ye:return b.name==T.name&&b.message==T.message;case Vn:case Dn:return b==T+"";case Et:var $t=bd;case Pn:var an=Ce&U;if($t||($t=pl),b.size!=T.size&&!an)return!1;var qn=Lt.get(b);if(qn)return qn==T;Ce|=N,Lt.set(b,T);var Zn=UA($t(b),$t(T),Ce,Ze,ht,Lt);return Lt.delete(b),Zn;case Ln:if(cA)return cA.call(b)==cA.call(T)}return!1}function Hf(b,T,q,Ce,Ze,ht){var Lt=q&U,$t=bf(b),an=$t.length,qn=bf(T),Zn=qn.length;if(an!=Zn&&!Lt)return!1;for(var mr=an;mr--;){var $r=$t[mr];if(!(Lt?$r in T:Po.call(T,$r)))return!1}var Bi=ht.get(b),no=ht.get(T);if(Bi&&no)return Bi==T&&no==b;var ns=!0;ht.set(b,T),ht.set(T,b);for(var ro=Lt;++mr<an;){$r=$t[mr];var Cs=b[$r],Is=T[$r];if(Ce)var Vd=Lt?Ce(Is,Cs,$r,T,b,ht):Ce(Cs,Is,$r,b,T,ht);if(!(Vd===t?Cs===Is||Ze(Cs,Is,q,Ce,ht):Vd)){ns=!1;break}ro||(ro=$r=="constructor")}if(ns&&!ro){var Nh=b.constructor,Hd=T.constructor;Nh!=Hd&&"constructor"in b&&"constructor"in T&&!(typeof Nh=="function"&&Nh instanceof Nh&&typeof Hd=="function"&&Hd instanceof Hd)&&(ns=!1)}return ht.delete(b),ht.delete(T),ns}function Qc(b){return zr(Kn(b,t,xc),b+"")}function bf(b){return ss(b,ue,vA)}function Rd(b){return ss(b,ge,zp)}var Dd=zc?function(b){return zc.get(b)}:bv;function id(b){for(var T=b.name+"",q=bs[T],Ce=Po.call(bs,T)?q.length:0;Ce--;){var Ze=q[Ce],ht=Ze.func;if(ht==null||ht==b)return Ze.name}return T}function Rh(b){var T=Po.call(ot,"placeholder")?ot:b;return T.placeholder}function Mi(){var b=ot.iteratee||Cv;return b=b===Cv?Y:b,arguments.length?b(arguments[0],arguments[1]):b}function Kd(b,T){var q=b.__data__;return H(T)?q[typeof T=="string"?"string":"hash"]:q.map}function Wo(b){for(var T=ue(b),q=T.length;q--;){var Ce=T[q],Ze=b[Ce];T[q]=[Ce,Ze,mt(Ze)]}return T}function tc(b,T){var q=Dc(b,T);return v(q)?q:t}function zA(b){var T=Po.call(b,oh),q=b[oh];try{b[oh]=t;var Ce=!0}catch{}var Ze=TA.call(b);return Ce&&(T?b[oh]=q:delete b[oh]),Ze}var vA=Xh?function(b){return b==null?[]:(b=es(b),mu(Xh(b),function(T){return Lc.call(b,T)}))}:lp,zp=Xh?function(b){for(var T=[];b;)Tc(T,vA(b)),b=ml(b);return T}:lp,vl=Ia;(lh&&vl(new lh(new ArrayBuffer(1)))!=he||PA&&vl(new PA)!=Et||pc&&vl(pc.resolve())!=hr||Sl&&vl(new Sl)!=Pn||xu&&vl(new xu)!=rr)&&(vl=function(b){var T=Ia(b),q=T==An?b.constructor:t,Ce=q?qs(q):"";if(Ce)switch(Ce){case Yu:return he;case Qa:return Et;case mc:return hr;case Ql:return Pn;case wu:return rr}return T});function Np(b,T,q){for(var Ce=-1,Ze=q.length;++Ce<Ze;){var ht=q[Ce],Lt=ht.size;switch(ht.type){case"drop":b+=Lt;break;case"dropRight":T-=Lt;break;case"take":T=ya(T,b+Lt);break;case"takeRight":b=ms(b,T-Lt);break}}return{start:b,end:T}}function Ra(b){var T=b.match(jr);return T?T[1].split(Fr):[]}function Cm(b,T,q){T=FA(T,b);for(var Ce=-1,Ze=T.length,ht=!1;++Ce<Ze;){var Lt=Ys(T[Ce]);if(!(ht=b!=null&&q(b,Lt)))break;b=b[Lt]}return ht||++Ce!=Ze?ht:(Ze=b==null?0:b.length,!!Ze&&Wd(Ze)&&E(Lt,Ze)&&(So(b)||op(b)))}function Zf(b){var T=b.length,q=new b.constructor(T);return T&&typeof b[0]=="string"&&Po.call(b,"index")&&(q.index=b.index,q.input=b.input),q}function CA(b){return typeof b.constructor=="function"&&!Ue(b)?Eh(ml(b)):{}}function xf(b,T,q){var Ce=b.constructor;switch(T){case We:return Xl(b);case Ke:case Pe:return new Ce(+b);case he:return jc(b,q);case me:case et:case bt:case Yt:case Jt:case ir:case Xe:case ae:case ve:return Pl(b,q);case Et:return new Ce;case Zt:case Dn:return new Ce(b);case Vn:return ka(b);case Pn:return new Ce;case Ln:return Qs(b)}}function u(b,T){var q=T.length;if(!q)return b;var Ce=q-1;return T[Ce]=(q>1?"& ":"")+T[Ce],T=T.join(q>2?", ":" "),b.replace(li,`{
/* [wrapped with `+T+`] */
`)}function g(b){return So(b)||op(b)||!!(mf&&b&&b[mf])}function E(b,T){var q=typeof b;return T=T??it,!!T&&(q=="number"||q!="symbol"&&da.test(b))&&b>-1&&b%1==0&&b<T}function S(b,T,q){if(!Cl(q))return!1;var Ce=typeof T;return(Ce=="number"?$c(q)&&E(T,q.length):Ce=="string"&&T in q)?sd(q[T],b):!1}function D(b,T){if(So(b))return!1;var q=typeof b;return q=="number"||q=="symbol"||q=="boolean"||b==null||Dh(b)?!0:Rn.test(b)||!On.test(b)||T!=null&&b in es(T)}function H(b){var T=typeof b;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?b!=="__proto__":b===null}function ce(b){var T=id(b),q=ot[T];if(typeof q!="function"||!(T in ai.prototype))return!1;if(b===q)return!0;var Ce=Dd(q);return!!Ce&&b===Ce[0]}function _e(b){return!!vu&&vu in b}var ke=ga?sp:zh;function Ue(b){var T=b&&b.constructor,q=typeof T=="function"&&T.prototype||ja;return b===q}function mt(b){return b===b&&!Cl(b)}function Bt(b,T){return function(q){return q==null?!1:q[b]===T&&(T!==t||b in es(q))}}function tn(b){var T=pn(b,function(Ce){return q.size===C&&q.clear(),Ce}),q=T.cache;return T}function qt(b,T){var q=b[1],Ce=T[1],Ze=q|Ce,ht=Ze<(W|X|G),Lt=Ce==G&&q==re||Ce==G&&q==le&&b[7].length<=T[8]||Ce==(G|le)&&T[7].length<=T[8]&&q==re;if(!(ht||Lt))return b;Ce&W&&(b[2]=T[2],Ze|=q&W?0:$);var $t=T[3];if($t){var an=b[3];b[3]=an?Bd(an,$t,T[4]):$t,b[4]=an?rl(b[3],x):T[4]}return $t=T[5],$t&&(an=b[5],b[5]=an?Od(an,$t,T[6]):$t,b[6]=an?rl(b[5],x):T[6]),$t=T[7],$t&&(b[7]=$t),Ce&G&&(b[8]=b[8]==null?T[8]:ya(b[8],T[8])),b[9]==null&&(b[9]=T[9]),b[0]=T[0],b[1]=Ze,b}function xn(b){var T=[];if(b!=null)for(var q in es(b))T.push(q);return T}function Fn(b){return TA.call(b)}function Kn(b,T,q){return T=ms(T===t?b.length-1:T,0),function(){for(var Ce=arguments,Ze=-1,ht=ms(Ce.length-T,0),Lt=dn(ht);++Ze<ht;)Lt[Ze]=Ce[T+Ze];Ze=-1;for(var $t=dn(T+1);++Ze<T;)$t[Ze]=Ce[Ze];return $t[T]=q(Lt),Gs(b,this,$t)}}function Hn(b,T){return T.length<2?b:Bu(b,Hr(T,0,-1))}function br(b,T){for(var q=b.length,Ce=ya(T.length,q),Ze=gA(b);Ce--;){var ht=T[Ce];b[Ce]=E(ht,q)?Ze[ht]:t}return b}function fr(b,T){if(!(T==="constructor"&&typeof b[T]=="function")&&T!="__proto__")return b[T]}var Pr=fo(cr),Jr=Uc||function(b,T){return Rr.setTimeout(b,T)},zr=fo(kn);function eo(b,T,q){var Ce=T+"";return zr(b,u(Ce,na(Ra(Ce),q)))}function fo(b){var T=0,q=0;return function(){var Ce=Ed(),Ze=xe-(Ce-q);if(q=Ce,Ze>0){if(++T>=Se)return arguments[0]}else T=0;return b.apply(t,arguments)}}function _a(b,T){var q=-1,Ce=b.length,Ze=Ce-1;for(T=T===t?Ce:T;++q<T;){var ht=zt(q,Ze),Lt=b[ht];b[ht]=b[q],b[q]=Lt}return b.length=T,b}var vs=tn(function(b){var T=[];return b.charCodeAt(0)===46&&T.push(""),b.replace(dr,function(q,Ce,Ze,ht){T.push(Ze?ht.replace(ui,"$1"):Ce||q)}),T});function Ys(b){if(typeof b=="string"||Dh(b))return b;var T=b+"";return T=="0"&&1/b==-Ct?"-0":T}function qs(b){if(b!=null){try{return ih.call(b)}catch{}try{return b+""}catch{}}return""}function na(b,T){return Ga(Dt,function(q){var Ce="_."+q[0];T&q[1]&&!aA(b,Ce)&&b.push(Ce)}),b.sort()}function NA(b){if(b instanceof ai)return b.clone();var T=new Ro(b.__wrapped__,b.__chain__);return T.__actions__=gA(b.__actions__),T.__index__=b.__index__,T.__values__=b.__values__,T}function $a(b,T,q){(q?S(b,T,q):T===t)?T=1:T=ms(Lo(T),0);var Ce=b==null?0:b.length;if(!Ce||T<1)return[];for(var Ze=0,ht=0,Lt=dn(_u(Ce/T));Ze<Ce;)Lt[ht++]=Hr(b,Ze,Ze+=T);return Lt}function Ds(b){for(var T=-1,q=b==null?0:b.length,Ce=0,Ze=[];++T<q;){var ht=b[T];ht&&(Ze[Ce++]=ht)}return Ze}function cs(){var b=arguments.length;if(!b)return[];for(var T=dn(b-1),q=arguments[0],Ce=b;Ce--;)T[Ce-1]=arguments[Ce];return Tc(So(q)?gA(q):[q],vr(T,1))}var xi=en(function(b,T){return Kl(b)?Eu(b,vr(T,1,Kl,!0)):[]}),Qo=en(function(b,T){var q=_A(T);return Kl(q)&&(q=t),Kl(b)?Eu(b,vr(T,1,Kl,!0),Mi(q,2)):[]}),$s=en(function(b,T){var q=_A(T);return Kl(q)&&(q=t),Kl(b)?Eu(b,vr(T,1,Kl,!0),t,q):[]});function la(b,T,q){var Ce=b==null?0:b.length;return Ce?(T=q||T===t?1:Lo(T),Hr(b,T<0?0:T,Ce)):[]}function xs(b,T,q){var Ce=b==null?0:b.length;return Ce?(T=q||T===t?1:Lo(T),T=Ce-T,Hr(b,0,T<0?0:T)):[]}function lu(b,T){return b&&b.length?Ca(b,Mi(T,3),!0,!0):[]}function Fo(b,T){return b&&b.length?Ca(b,Mi(T,3),!0):[]}function Fd(b,T,q,Ce){var Ze=b==null?0:b.length;return Ze?(q&&typeof q!="number"&&S(b,T,q)&&(q=0,Ce=Ze),Il(b,T,q,Ce)):[]}function GA(b,T,q){var Ce=b==null?0:b.length;if(!Ce)return-1;var Ze=q==null?0:Lo(q);return Ze<0&&(Ze=ms(Ce+Ze,0)),Nu(b,Mi(T,3),Ze)}function Yc(b,T,q){var Ce=b==null?0:b.length;if(!Ce)return-1;var Ze=Ce-1;return q!==t&&(Ze=Lo(q),Ze=q<0?ms(Ce+Ze,0):ya(Ze,Ce-1)),Nu(b,Mi(T,3),Ze,!0)}function xc(b){var T=b==null?0:b.length;return T?vr(b,1):[]}function al(b){var T=b==null?0:b.length;return T?vr(b,Ct):[]}function ll(b,T){var q=b==null?0:b.length;return q?(T=T===t?1:Lo(T),vr(b,T)):[]}function Mf(b){for(var T=-1,q=b==null?0:b.length,Ce={};++T<q;){var Ze=b[T];Ce[Ze[0]]=Ze[1]}return Ce}function Ld(b){return b&&b.length?b[0]:t}function od(b,T,q){var Ce=b==null?0:b.length;if(!Ce)return-1;var Ze=q==null?0:Lo(q);return Ze<0&&(Ze=ms(Ce+Ze,0)),Es(b,T,Ze)}function _m(b){var T=b==null?0:b.length;return T?Hr(b,0,-1):[]}var Gp=en(function(b){var T=ps(b,pA);return T.length&&T[0]===b[0]?Ju(T):[]}),Ud=en(function(b){var T=_A(b),q=ps(b,pA);return T===_A(q)?T=t:q.pop(),q.length&&q[0]===b[0]?Ju(q,Mi(T,2)):[]}),bm=en(function(b){var T=_A(b),q=ps(b,pA);return T=typeof T=="function"?T:t,T&&q.pop(),q.length&&q[0]===b[0]?Ju(q,t,T):[]});function zd(b,T){return b==null?"":fc.call(b,T)}function _A(b){var T=b==null?0:b.length;return T?b[T-1]:t}function xm(b,T,q){var Ce=b==null?0:b.length;if(!Ce)return-1;var Ze=Ce;return q!==t&&(Ze=Lo(q),Ze=Ze<0?ms(Ce+Ze,0):ya(Ze,Ce-1)),T===T?Kp(b,T,Ze):Nu(b,uf,Ze,!0)}function Mm(b,T){return b&&b.length?dt(b,Lo(T)):t}var wf=en(Xf);function Xf(b,T){return b&&b.length&&T&&T.length?kt(b,T):b}function nc(b,T,q){return b&&b.length&&T&&T.length?kt(b,T,Mi(q,2)):b}function Sf(b,T,q){return b&&b.length&&T&&T.length?kt(b,T,t,q):b}var ph=Qc(function(b,T){var q=b==null?0:b.length,Ce=Cc(b,T);return Kt(b,ps(T,function(Ze){return E(Ze,q)?+Ze:Ze}).sort(ys)),Ce});function rc(b,T){var q=[];if(!(b&&b.length))return q;var Ce=-1,Ze=[],ht=b.length;for(T=Mi(T,3);++Ce<ht;){var Lt=b[Ce];T(Lt,Ce,b)&&(q.push(Lt),Ze.push(Ce))}return Kt(b,Ze),q}function Xm(b){return b==null?b:Qu.call(b)}function X0(b,T,q){var Ce=b==null?0:b.length;return Ce?(q&&typeof q!="number"&&S(b,T,q)?(T=0,q=Ce):(T=T==null?0:Lo(T),q=q===t?Ce:Lo(q)),Hr(b,T,q)):[]}function Jf(b,T){return ts(b,T)}function Ag(b,T,q){return Ko(b,T,Mi(q,2))}function Ef(b,T){var q=b==null?0:b.length;if(q){var Ce=ts(b,T);if(Ce<q&&sd(b[Ce],T))return Ce}return-1}function ug(b,T){return ts(b,T,!0)}function J0(b,T,q){return Ko(b,T,Mi(q,2),!0)}function ep(b,T){var q=b==null?0:b.length;if(q){var Ce=ts(b,T,!0)-1;if(sd(b[Ce],T))return Ce}return-1}function e1(b){return b&&b.length?jo(b):[]}function tp(b,T){return b&&b.length?jo(b,Mi(T,2)):[]}function t1(b){var T=b==null?0:b.length;return T?Hr(b,1,T):[]}function Jm(b,T,q){return b&&b.length?(T=q||T===t?1:Lo(T),Hr(b,0,T<0?0:T)):[]}function e0(b,T,q){var Ce=b==null?0:b.length;return Ce?(T=q||T===t?1:Lo(T),T=Ce-T,Hr(b,T<0?0:T,Ce)):[]}function wm(b,T){return b&&b.length?Ca(b,Mi(T,3),!1,!0):[]}function cg(b,T){return b&&b.length?Ca(b,Mi(T,3)):[]}var tv=en(function(b){return ji(vr(b,1,Kl,!0))}),Sm=en(function(b){var T=_A(b);return Kl(T)&&(T=t),ji(vr(b,1,Kl,!0),Mi(T,2))}),hg=en(function(b){var T=_A(b);return T=typeof T=="function"?T:t,ji(vr(b,1,Kl,!0),t,T)});function Bf(b){return b&&b.length?ji(b):[]}function nv(b,T){return b&&b.length?ji(b,Mi(T,2)):[]}function jp(b,T){return T=typeof T=="function"?T:t,b&&b.length?ji(b,t,T):[]}function t0(b){if(!(b&&b.length))return[];var T=0;return b=mu(b,function(q){if(Kl(q))return T=ms(q.length,T),!0}),Pc(T,function(q){return ps(b,_h(q))})}function Va(b,T){if(!(b&&b.length))return[];var q=t0(b);return T==null?q:ps(q,function(Ce){return Gs(T,t,Ce)})}var rv=en(function(b,T){return Kl(b)?Eu(b,T):[]}),dg=en(function(b){return Vl(mu(b,Kl))}),Em=en(function(b){var T=_A(b);return Kl(T)&&(T=t),Vl(mu(b,Kl),Mi(T,2))}),fg=en(function(b){var T=_A(b);return T=typeof T=="function"?T:t,Vl(mu(b,Kl),t,T)}),n0=en(t0);function n1(b,T){return Hl(b||[],T||[],Nc)}function Dl(b,T){return Hl(b||[],T||[],Ar)}var Mc=en(function(b){var T=b.length,q=T>1?b[T-1]:t;return q=typeof q=="function"?(b.pop(),q):t,Va(b,q)});function r0(b){var T=ot(b);return T.__chain__=!0,T}function pg(b,T){return T(b),b}function qc(b,T){return T(b)}var Wp=Qc(function(b){var T=b.length,q=T?b[0]:0,Ce=this.__wrapped__,Ze=function(ht){return Cc(ht,b)};return T>1||this.__actions__.length||!(Ce instanceof ai)||!E(q)?this.thru(Ze):(Ce=Ce.slice(q,+q+(T?1:0)),Ce.__actions__.push({func:qc,args:[Ze],thisArg:t}),new Ro(Ce,this.__chain__).thru(function(ht){return T&&!ht.length&&ht.push(t),ht}))});function np(){return r0(this)}function i0(){return new Ro(this.value(),this.__chain__)}function r1(){this.__values__===t&&(this.__values__=Av(this.value()));var b=this.__index__>=this.__values__.length,T=b?t:this.__values__[this.__index__++];return{done:b,value:T}}function i1(){return this}function mg(b){for(var T,q=this;q instanceof Xs;){var Ce=NA(q);Ce.__index__=0,Ce.__values__=t,T?Ze.__wrapped__=Ce:T=Ce;var Ze=Ce;q=q.__wrapped__}return Ze.__wrapped__=b,T}function Au(){var b=this.__wrapped__;if(b instanceof ai){var T=b;return this.__actions__.length&&(T=new ai(this)),T=T.reverse(),T.__actions__.push({func:qc,args:[Xm],thisArg:t}),new Ro(T,this.__chain__)}return this.thru(Xm)}function o1(){return ao(this.__wrapped__,this.__actions__)}var s1=yA(function(b,T,q){Po.call(b,q)?++b[q]:vc(b,q,1)});function Nd(b,T,q){var Ce=So(b)?uc:ed;return q&&S(b,T,q)&&(T=t),Ce(b,Mi(T,3))}function rp(b,T){var q=So(b)?mu:Zu;return q(b,Mi(T,3))}var Of=ku(GA),ip=ku(Yc);function Qp(b,T){return vr(Gd(b,T),1)}function o0(b,T){return vr(Gd(b,T),Ct)}function gg(b,T,q){return q=q===t?1:Lo(q),vr(Gd(b,T),q)}function s0(b,T){var q=So(b)?Ga:DA;return q(b,Mi(T,3))}function Yp(b,T){var q=So(b)?BA:vf;return q(b,Mi(T,3))}var a0=yA(function(b,T,q){Po.call(b,q)?b[q].push(T):vc(b,q,[T])});function l0(b,T,q,Ce){b=$c(b)?b:er(b),q=q&&!Ce?Lo(q):0;var Ze=b.length;return q<0&&(q=ms(Ze+q,0)),bg(b)?q<=Ze&&b.indexOf(T,q)>-1:!!Ze&&Es(b,T,q)>-1}var a1=en(function(b,T,q){var Ce=-1,Ze=typeof T=="function",ht=$c(b)?dn(b.length):[];return DA(b,function(Lt){ht[++Ce]=Ze?Gs(T,Lt,q):sl(Lt,T,q)}),ht}),yg=yA(function(b,T,q){vc(b,q,T)});function Gd(b,T){var q=So(b)?ps:Oe;return q(b,Mi(T,3))}function l1(b,T,q,Ce){return b==null?[]:(So(T)||(T=T==null?[]:[T]),q=Ce?t:q,So(q)||(q=q==null?[]:[q]),pt(b,T,q))}var Bm=yA(function(b,T,q){b[q?0:1].push(T)},function(){return[[],[]]});function vg(b,T,q){var Ce=So(b)?md:Rp,Ze=arguments.length<3;return Ce(b,Mi(T,4),q,Ze,DA)}function A0(b,T,q){var Ce=So(b)?Pp:Rp,Ze=arguments.length<3;return Ce(b,Mi(T,4),q,Ze,vf)}function m(b,T){var q=So(b)?mu:Zu;return q(b,Cr(Mi(T,3)))}function _(b){var T=So(b)?Ti:ln;return T(b)}function K(b,T,q){(q?S(b,T,q):T===t)?T=1:T=Lo(T);var Ce=So(b)?yc:Cn;return Ce(b,T)}function Q(b){var T=So(b)?yf:Br;return T(b)}function se(b){if(b==null)return 0;if($c(b))return bg(b)?so(b):b.length;var T=vl(b);return T==Et||T==Pn?b.size:ee(b).length}function ye(b,T,q){var Ce=So(b)?qh:Xi;return q&&S(b,T,q)&&(T=t),Ce(b,Mi(T,3))}var tt=en(function(b,T){if(b==null)return[];var q=T.length;return q>1&&S(b,T[0],T[1])?T=[]:q>2&&S(T[0],T[1],T[2])&&(T=[T[0]]),pt(b,vr(T,1),[])}),Ot=us||function(){return Rr.Date.now()};function Qt(b,T){if(typeof T!="function")throw new IA(l);return b=Lo(b),function(){if(--b<1)return T.apply(this,arguments)}}function Mn(b,T,q){return T=q?t:T,T=b&&T==null?b.length:T,wo(b,G,t,t,t,t,T)}function sr(b,T){var q;if(typeof T!="function")throw new IA(l);return b=Lo(b),function(){return--b>0&&(q=T.apply(this,arguments)),b<=1&&(T=t),q}}var yr=en(function(b,T,q){var Ce=W;if(q.length){var Ze=rl(q,Rh(yr));Ce|=V}return wo(b,Ce,T,q,Ze)}),ar=en(function(b,T,q){var Ce=W|X;if(q.length){var Ze=rl(q,Rh(ar));Ce|=V}return wo(T,Ce,b,q,Ze)});function Wr(b,T,q){T=q?t:T;var Ce=wo(b,re,t,t,t,t,t,T);return Ce.placeholder=Wr.placeholder,Ce}function ii(b,T,q){T=q?t:T;var Ce=wo(b,te,t,t,t,t,t,T);return Ce.placeholder=ii.placeholder,Ce}function hi(b,T,q){var Ce,Ze,ht,Lt,$t,an,qn=0,Zn=!1,mr=!1,$r=!0;if(typeof b!="function")throw new IA(l);T=Kh(T)||0,Cl(q)&&(Zn=!!q.leading,mr="maxWait"in q,ht=mr?ms(Kh(q.maxWait)||0,T):ht,$r="trailing"in q?!!q.trailing:$r);function Bi(du){var Ap=Ce,km=Ze;return Ce=Ze=t,qn=du,Lt=b.apply(km,Ap),Lt}function no(du){return qn=du,$t=Jr(Cs,T),Zn?Bi(du):Lt}function ns(du){var Ap=du-an,km=du-qn,GI=T-Ap;return mr?ya(GI,ht-km):GI}function ro(du){var Ap=du-an,km=du-qn;return an===t||Ap>=T||Ap<0||mr&&km>=ht}function Cs(){var du=Ot();if(ro(du))return Is(du);$t=Jr(Cs,ns(du))}function Is(du){return $t=t,$r&&Ce?Bi(du):(Ce=Ze=t,Lt)}function Vd(){$t!==t&&mA($t),qn=0,Ce=an=Ze=$t=t}function Nh(){return $t===t?Lt:Is(Ot())}function Hd(){var du=Ot(),Ap=ro(du);if(Ce=arguments,Ze=this,an=du,Ap){if($t===t)return no(an);if(mr)return mA($t),$t=Jr(Cs,T),Bi(an)}return $t===t&&($t=Jr(Cs,T)),Lt}return Hd.cancel=Vd,Hd.flush=Nh,Hd}var Al=en(function(b,T){return Bh(b,1,T)}),un=en(function(b,T,q){return Bh(b,Kh(T)||0,q)});function Xt(b){return wo(b,fe)}function pn(b,T){if(typeof b!="function"||T!=null&&typeof T!="function")throw new IA(l);var q=function(){var Ce=arguments,Ze=T?T.apply(this,Ce):Ce[0],ht=q.cache;if(ht.has(Ze))return ht.get(Ze);var Lt=b.apply(this,Ce);return q.cache=ht.set(Ze,Lt)||ht,Lt};return q.cache=new(pn.Cache||Js),q}pn.Cache=Js;function Cr(b){if(typeof b!="function")throw new IA(l);return function(){var T=arguments;switch(T.length){case 0:return!b.call(this);case 1:return!b.call(this,T[0]);case 2:return!b.call(this,T[0],T[1]);case 3:return!b.call(this,T[0],T[1],T[2])}return!b.apply(this,T)}}function pi(b){return sr(2,b)}var ki=au(function(b,T){T=T.length==1&&So(T[0])?ps(T[0],OA(Mi())):ps(vr(T,1),OA(Mi()));var q=T.length;return en(function(Ce){for(var Ze=-1,ht=ya(Ce.length,q);++Ze<ht;)Ce[Ze]=T[Ze].call(this,Ce[Ze]);return Gs(b,this,Ce)})}),wi=en(function(b,T){var q=rl(T,Rh(wi));return wo(b,V,t,T,q)}),qi=en(function(b,T){var q=rl(T,Rh(qi));return wo(b,ne,t,T,q)}),jA=Qc(function(b,T){return wo(b,le,t,t,t,T)});function Ms(b,T){if(typeof b!="function")throw new IA(l);return T=T===t?T:Lo(T),en(b,T)}function jd(b,T){if(typeof b!="function")throw new IA(l);return T=T==null?0:ms(Lo(T),0),en(function(q){var Ce=q[T],Ze=Zl(q,0,T);return Ce&&Tc(Ze,Ce),Gs(b,this,Ze)})}function iv(b,T,q){var Ce=!0,Ze=!0;if(typeof b!="function")throw new IA(l);return Cl(q)&&(Ce="leading"in q?!!q.leading:Ce,Ze="trailing"in q?!!q.trailing:Ze),hi(b,T,{leading:Ce,maxWait:T,trailing:Ze})}function P3(b){return Mn(b,1)}function R3(b,T){return wi(Ou(T),b)}function D3(){if(!arguments.length)return[];var b=arguments[0];return So(b)?b:[b]}function K3(b){return hA(b,P)}function ov(b,T){return T=typeof T=="function"?T:t,hA(b,P,T)}function qp(b){return hA(b,B|P)}function F_(b,T){return T=typeof T=="function"?T:t,hA(b,B|P,T)}function L_(b,T){return T==null||os(b,T,ue(T))}function sd(b,T){return b===T||b!==b&&T!==T}var U_=kd(dA),z_=kd(function(b,T){return b>=T}),op=Ih(function(){return arguments}())?Ih:function(b){return Fl(b)&&Po.call(b,"callee")&&!Lc.call(b,"callee")},So=dn.isArray,A1=co?OA(co):Gc;function $c(b){return b!=null&&Wd(b.length)&&!sp(b)}function Kl(b){return Fl(b)&&$c(b)}function N_(b){return b===!0||b===!1||Fl(b)&&Ia(b)==Ke}var WA=Jh||zh,u0=Ki?OA(Ki):fA;function G_(b){return Fl(b)&&b.nodeType===1&&!c0(b)}function j_(b){if(b==null)return!0;if($c(b)&&(So(b)||typeof b=="string"||typeof b.splice=="function"||WA(b)||d0(b)||op(b)))return!b.length;var T=vl(b);if(T==Et||T==Pn)return!b.size;if(Ue(b))return!ee(b).length;for(var q in b)if(Po.call(b,q))return!1;return!0}function W_(b,T){return kl(b,T)}function Q_(b,T,q){q=typeof q=="function"?q:t;var Ce=q?q(b,T):t;return Ce===t?kl(b,T,t,q):!!Ce}function Cg(b){if(!Fl(b))return!1;var T=Ia(b);return T==Ye||T==Re||typeof b.message=="string"&&typeof b.name=="string"&&!c0(b)}function Y_(b){return typeof b=="number"&&sh(b)}function sp(b){if(!Cl(b))return!1;var T=Ia(b);return T==vt||T==yt||T==St||T==Vt}function sv(b){return typeof b=="number"&&b==Lo(b)}function Wd(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=it}function Cl(b){var T=typeof b;return b!=null&&(T=="object"||T=="function")}function Fl(b){return b!=null&&typeof b=="object"}var av=Fi?OA(Fi):a;function q_(b,T){return b===T||c(b,T,Wo(T))}function F3(b,T,q){return q=typeof q=="function"?q:t,c(b,T,Wo(T),q)}function L3(b){return c1(b)&&b!=+b}function $_(b){if(ke(b))throw new Ri(s);return v(b)}function u1(b){return b===null}function V_(b){return b==null}function c1(b){return typeof b=="number"||Fl(b)&&Ia(b)==Zt}function c0(b){if(!Fl(b)||Ia(b)!=An)return!1;var T=ml(b);if(T===null)return!0;var q=Po.call(T,"constructor")&&T.constructor;return typeof q=="function"&&q instanceof q&&ih.call(q)==tu}var h0=Ns?OA(Ns):M;function _g(b){return sv(b)&&b>=-it&&b<=it}var h1=Na?OA(Na):I;function bg(b){return typeof b=="string"||!So(b)&&Fl(b)&&Ia(b)==Dn}function Dh(b){return typeof b=="symbol"||Fl(b)&&Ia(b)==Ln}var d0=eu?OA(eu):z;function f0(b){return b===t}function Pu(b){return Fl(b)&&vl(b)==rr}function $p(b){return Fl(b)&&Ia(b)==Yn}var lv=kd(de),H_=kd(function(b,T){return b<=T});function Av(b){if(!b)return[];if($c(b))return bg(b)?Ba(b):gA(b);if(uA&&b[uA])return hf(b[uA]());var T=vl(b),q=T==Et?bd:T==Pn?pl:er;return q(b)}function Qd(b){if(!b)return b===0?b:0;if(b=Kh(b),b===Ct||b===-Ct){var T=b<0?-1:1;return T*nt}return b===b?b:0}function Lo(b){var T=Qd(b),q=T%1;return T===T?q?T-q:T:0}function uv(b){return b?Hu(Lo(b),0,Ie):0}function Kh(b){if(typeof b=="number")return b;if(Dh(b))return Ge;if(Cl(b)){var T=typeof b.valueOf=="function"?b.valueOf():b;b=Cl(T)?T+"":T}if(typeof b!="string")return b===0?b:+b;b=cf(b);var q=qr.test(b);return q||La.test(b)?Qn(b.slice(2),q?2:8):As.test(b)?Ge:+b}function Z_(b){return LA(b,ge(b))}function X_(b){return b?Hu(Lo(b),-it,it):b===0?b:0}function Ks(b){return b==null?"":ho(b)}var cv=Pa(function(b,T){if(Ue(T)||$c(T)){LA(T,ue(T),b);return}for(var q in T)Po.call(T,q)&&Nc(b,q,T[q])}),hv=Pa(function(b,T){LA(T,ge(T),b)}),Vp=Pa(function(b,T,q,Ce){LA(T,ge(T),b,Ce)}),dv=Pa(function(b,T,q,Ce){LA(T,ue(T),b,Ce)}),J_=Qc(Cc);function fv(b,T){var q=Eh(b);return T==null?q:gs(q,T)}var xg=en(function(b,T){b=es(b);var q=-1,Ce=T.length,Ze=Ce>2?T[2]:t;for(Ze&&S(T[0],T[1],Ze)&&(Ce=1);++q<Ce;)for(var ht=T[q],Lt=ge(ht),$t=-1,an=Lt.length;++$t<an;){var qn=Lt[$t],Zn=b[qn];(Zn===t||sd(Zn,ja[qn])&&!Po.call(b,qn))&&(b[qn]=ht[qn])}return b}),d1=en(function(b){return b.push(t,Ph),Gs(Je,t,b)});function pv(b,T){return yd(b,Mi(T,3),Tl)}function mv(b,T){return yd(b,Mi(T,3),Xu)}function gv(b,T){return b==null?b:ri(b,Mi(T,3),ge)}function U3(b,T){return b==null?b:bc(b,Mi(T,3),ge)}function d(b,T){return b&&Tl(b,Mi(T,3))}function A(b,T){return b&&Xu(b,Mi(T,3))}function h(b){return b==null?[]:Ws(b,ue(b))}function y(b){return b==null?[]:Ws(b,ge(b))}function w(b,T,q){var Ce=b==null?t:Bu(b,T);return Ce===t?q:Ce}function k(b,T){return b!=null&&Cm(b,T,Do)}function F(b,T){return b!=null&&Cm(b,T,as)}var j=gm(function(b,T,q){T!=null&&typeof T.toString!="function"&&(T=TA.call(T)),b[T]=q},f1(Zc)),Z=gm(function(b,T,q){T!=null&&typeof T.toString!="function"&&(T=TA.call(T)),Po.call(b,T)?b[T].push(q):b[T]=[q]},Mi),ie=en(sl);function ue(b){return $c(b)?RA(b):ee(b)}function ge(b){return $c(b)?RA(b,!0):Ae(b)}function De(b,T){var q={};return T=Mi(T,3),Tl(b,function(Ce,Ze,ht){vc(q,T(Ce,Ze,ht),Ce)}),q}function Le(b,T){var q={};return T=Mi(T,3),Tl(b,function(Ce,Ze,ht){vc(q,Ze,T(Ce,Ze,ht))}),q}var Qe=Pa(function(b,T,q){He(b,T,q)}),Je=Pa(function(b,T,q,Ce){He(b,T,q,Ce)}),At=Qc(function(b,T){var q={};if(b==null)return q;var Ce=!1;T=ps(T,function(ht){return ht=FA(ht,b),Ce||(Ce=ht.length>1),ht}),LA(b,Rd(b),q),Ce&&(q=hA(q,B|R|P,fh));for(var Ze=T.length;Ze--;)aa(q,T[Ze]);return q});function _t(b,T){return It(b,Cr(Mi(T)))}var Wt=Qc(function(b,T){return b==null?{}:wt(b,T)});function It(b,T){if(b==null)return{};var q=ps(Rd(b),function(Ce){return[Ce]});return T=Mi(T),Tt(b,q,function(Ce,Ze){return T(Ce,Ze[0])})}function Fe(b,T,q){T=FA(T,b);var Ce=-1,Ze=T.length;for(Ze||(Ze=1,b=t);++Ce<Ze;){var ht=b==null?t:b[Ys(T[Ce])];ht===t&&(Ce=Ze,ht=q),b=sp(ht)?ht.call(b):ht}return b}function at(b,T,q){return b==null?b:Ar(b,T,q)}function Pt(b,T,q,Ce){return Ce=typeof Ce=="function"?Ce:t,b==null?b:Ar(b,T,q,Ce)}var cn=Up(ue),zn=Up(ge);function yn(b,T,q){var Ce=So(b),Ze=Ce||WA(b)||d0(b);if(T=Mi(T,4),q==null){var ht=b&&b.constructor;Ze?q=Ce?new ht:[]:Cl(b)?q=sp(ht)?Eh(ml(b)):{}:q={}}return(Ze?Ga:Tl)(b,function(Lt,$t,an){return T(q,Lt,$t,an)}),q}function En(b,T){return b==null?!0:aa(b,T)}function tr(b,T,q){return b==null?b:Ta(b,T,Ou(q))}function Nn(b,T,q,Ce){return Ce=typeof Ce=="function"?Ce:t,b==null?b:Ta(b,T,Ou(q),Ce)}function er(b){return b==null?[]:Zh(b,ue(b))}function Bn(b){return b==null?[]:Zh(b,ge(b))}function Qr(b,T,q){return q===t&&(q=T,T=t),q!==t&&(q=Kh(q),q=q===q?q:0),T!==t&&(T=Kh(T),T=T===T?T:0),Hu(Kh(b),T,q)}function Ci(b,T,q){return T=Qd(T),q===t?(q=T,T=0):q=Qd(q),b=Kh(b),su(b,T,q)}function mi(b,T,q){if(q&&typeof q!="boolean"&&S(b,T,q)&&(T=q=t),q===t&&(typeof T=="boolean"?(q=T,T=t):typeof b=="boolean"&&(q=b,b=t)),b===t&&T===t?(b=0,T=1):(b=Qd(b),T===t?(T=b,b=0):T=Qd(T)),b>T){var Ce=b;b=T,T=Ce}if(q||b%1||T%1){var Ze=Sh();return ya(b+Ze*(T-b+kr("1e-"+((Ze+"").length-1))),T)}return zt(b,T)}var Xr=td(function(b,T,q){return T=T.toLowerCase(),b+(q?To(T):T)});function To(b){return Hp(Ks(b).toLowerCase())}function Ha(b){return b=Ks(b),b&&b.replace(No,_d).replace(pa,"")}function bA(b,T,q){b=Ks(b),T=ho(T);var Ce=b.length;q=q===t?Ce:Hu(Lo(q),0,Ce);var Ze=q;return q-=T.length,q>=0&&b.slice(q,Ze)==T}function Ru(b){return b=Ks(b),b&&Ft.test(b)?b.replace(lt,fl):b}function Fh(b){return b=Ks(b),b&&or.test(b)?b.replace(Tr,"\\$&"):b}var Vc=td(function(b,T,q){return b+(q?"-":"")+T.toLowerCase()}),uu=td(function(b,T,q){return b+(q?" ":"")+T.toLowerCase()}),Za=Id("toLowerCase");function QA(b,T,q){b=Ks(b),T=Lo(T);var Ce=T?so(b):0;if(!T||Ce>=T)return b;var Ze=(T-Ce)/2;return Vf(kA(Ze),q)+b+Vf(_u(Ze),q)}function cu(b,T,q){b=Ks(b),T=Lo(T);var Ce=T?so(b):0;return T&&Ce<T?b+Vf(T-Ce,q):b}function hu(b,T,q){b=Ks(b),T=Lo(T);var Ce=T?so(b):0;return T&&Ce<T?Vf(T-Ce,q)+b:b}function wc(b,T,q){return q||T==null?T=0:T&&(T=+T),ah(Ks(b).replace(on,""),T||0)}function Lh(b,T,q){return(q?S(b,T,q):T===t)?T=1:T=Lo(T),bn(Ks(b),T)}function YA(){var b=arguments,T=Ks(b[0]);return b.length<3?T:T.replace(b[1],b[2])}var Hc=td(function(b,T,q){return b+(q?"_":"")+T.toLowerCase()});function xA(b,T,q){return q&&typeof q!="number"&&S(b,T,q)&&(T=q=t),q=q===t?Ie:q>>>0,q?(b=Ks(b),b&&(typeof T=="string"||T!=null&&!h0(T))&&(T=ho(T),!T&&ju(b))?Zl(Ba(b),0,q):b.split(T,q)):[]}var qA=td(function(b,T,q){return b+(q?" ":"")+Hp(T)});function $A(b,T,q){return b=Ks(b),q=q==null?0:Hu(Lo(q),0,b.length),T=ho(T),b.slice(q,q+T.length)==T}function eA(b,T,q){var Ce=ot.templateSettings;q&&S(b,T,q)&&(T=t),b=Ks(b),T=Vp({},T,Ce,vm);var Ze=Vp({},T.imports,Ce.imports,vm),ht=ue(Ze),Lt=Zh(Ze,ht),$t,an,qn=0,Zn=T.interpolate||zs,mr="__p += '",$r=cc((T.escape||zs).source+"|"+Zn.source+"|"+(Zn===nn?Pi:zs).source+"|"+(T.evaluate||zs).source+"|$","g"),Bi="//# sourceURL="+(Po.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gi+"]")+`
`;b.replace($r,function(ro,Cs,Is,Vd,Nh,Hd){return Is||(Is=Vd),mr+=b.slice(qn,Hd).replace(hl,Rc),Cs&&($t=!0,mr+=`' +
__e(`+Cs+`) +
'`),Nh&&(an=!0,mr+=`';
`+Nh+`;
__p += '`),Is&&(mr+=`' +
((__t = (`+Is+`)) == null ? '' : __t) +
'`),qn=Hd+ro.length,ro}),mr+=`';
`;var no=Po.call(T,"variable")&&T.variable;if(!no)mr=`with (obj) {
`+mr+`
}
`;else if(Dr.test(no))throw new Ri(o);mr=(an?mr.replace(p,""):mr).replace(Ne,"$1").replace(Ve,"$1;"),mr="function("+(no||"obj")+`) {
`+(no?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($t?", __e = _.escape":"")+(an?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mr+`return __p
}`;var ns=yv(function(){return Go(ht,Bi+"return "+mr).apply(t,Lt)});if(ns.source=mr,Cg(ns))throw ns;return ns}function ba(b){return Ks(b).toLowerCase()}function Yd(b){return Ks(b).toUpperCase()}function p0(b,T,q){if(b=Ks(b),b&&(q||T===t))return cf(b);if(!b||!(T=ho(T)))return b;var Ce=Ba(b),Ze=Ba(T),ht=Gu(Ce,Ze),Lt=bh(Ce,Ze)+1;return Zl(Ce,ht,Lt).join("")}function qd(b,T,q){if(b=Ks(b),b&&(q||T===t))return b.slice(0,Mh(b)+1);if(!b||!(T=ho(T)))return b;var Ce=Ba(b),Ze=bh(Ce,Ba(T))+1;return Zl(Ce,0,Ze).join("")}function z3(b,T,q){if(b=Ks(b),b&&(q||T===t))return b.replace(on,"");if(!b||!(T=ho(T)))return b;var Ce=Ba(b),Ze=Gu(Ce,Ba(T));return Zl(Ce,Ze).join("")}function m0(b,T){var q=pe,Ce=we;if(Cl(T)){var Ze="separator"in T?T.separator:Ze;q="length"in T?Lo(T.length):q,Ce="omission"in T?ho(T.omission):Ce}b=Ks(b);var ht=b.length;if(ju(b)){var Lt=Ba(b);ht=Lt.length}if(q>=ht)return b;var $t=q-so(Ce);if($t<1)return Ce;var an=Lt?Zl(Lt,0,$t).join(""):b.slice(0,$t);if(Ze===t)return an+Ce;if(Lt&&($t+=an.length-$t),h0(Ze)){if(b.slice($t).search(Ze)){var qn,Zn=an;for(Ze.global||(Ze=cc(Ze.source,Ks(yi.exec(Ze))+"g")),Ze.lastIndex=0;qn=Ze.exec(Zn);)var mr=qn.index;an=an.slice(0,mr===t?$t:mr)}}else if(b.indexOf(ho(Ze),$t)!=$t){var $r=an.lastIndexOf(Ze);$r>-1&&(an=an.slice(0,$r))}return an+Ce}function Om(b){return b=Ks(b),b&&ct.test(b)?b.replace(Te,Md):b}var g0=td(function(b,T,q){return b+(q?" ":"")+T.toUpperCase()}),Hp=Id("toUpperCase");function Im(b,T,q){return b=Ks(b),T=q?t:T,T===t?qf(b)?ff(b):Vh(b):b.match(T)||[]}var yv=en(function(b,T){try{return Gs(b,t,T)}catch(q){return Cg(q)?q:new Ri(q)}}),eb=Qc(function(b,T){return Ga(T,function(q){q=Ys(q),vc(b,q,yr(b[q],b))}),b});function tb(b){var T=b==null?0:b.length,q=Mi();return b=T?ps(b,function(Ce){if(typeof Ce[1]!="function")throw new IA(l);return[q(Ce[0]),Ce[1]]}):[],en(function(Ce){for(var Ze=-1;++Ze<T;){var ht=b[Ze];if(Gs(ht[0],this,Ce))return Gs(ht[1],this,Ce)}})}function nb(b){return _c(hA(b,B))}function f1(b){return function(){return b}}function vv(b,T){return b==null||b!==b?T:b}var ap=dh(),rb=dh(!0);function Zc(b){return b}function Cv(b){return Y(typeof b=="function"?b:hA(b,B))}function N3(b){return Be(hA(b,B))}function G3(b,T){return ze(b,hA(T,B))}var j3=en(function(b,T){return function(q){return sl(q,b,T)}}),W3=en(function(b,T){return function(q){return sl(b,q,T)}});function _v(b,T,q){var Ce=ue(T),Ze=Ws(T,Ce);q==null&&!(Cl(T)&&(Ze.length||!Ce.length))&&(q=T,T=b,b=this,Ze=Ws(T,ue(T)));var ht=!(Cl(q)&&"chain"in q)||!!q.chain,Lt=sp(b);return Ga(Ze,function($t){var an=T[$t];b[$t]=an,Lt&&(b.prototype[$t]=function(){var qn=this.__chain__;if(ht||qn){var Zn=b(this.__wrapped__),mr=Zn.__actions__=gA(this.__actions__);return mr.push({func:an,args:arguments,thisArg:b}),Zn.__chain__=qn,Zn}return an.apply(b,Tc([this.value()],arguments))})}),b}function Q3(){return Rr._===this&&(Rr._=Wa),this}function bv(){}function $d(b){return b=Lo(b),en(function(T){return dt(T,b)})}var Mg=_f(ps),ib=_f(uc),Y3=_f(qh);function ob(b){return D(b)?_h(Ys(b)):Mt(b)}function q3(b){return function(T){return b==null?t:Bu(b,T)}}var ic=rd(),Uh=rd(!0);function lp(){return[]}function zh(){return!1}function Tm(){return{}}function If(){return""}function tj(){return!0}function nj(b,T){if(b=Lo(b),b<1||b>it)return[];var q=Ie,Ce=ya(b,Ie);T=Mi(T),b-=Ie;for(var Ze=Pc(Ce,T);++q<b;)T(q);return Ze}function rj(b){return So(b)?ps(b,Ys):Dh(b)?[b]:gA(vs(Ks(b)))}function ij(b){var T=++Fc;return Ks(b)+T}var oj=kh(function(b,T){return b+T},0),sj=Rl("ceil"),aj=kh(function(b,T){return b/T},1),lj=Rl("floor");function Aj(b){return b&&b.length?Oh(b,Zc,dA):t}function uj(b,T){return b&&b.length?Oh(b,Mi(T,2),dA):t}function cj(b){return nh(b,Zc)}function hj(b,T){return nh(b,Mi(T,2))}function dj(b){return b&&b.length?Oh(b,Zc,de):t}function fj(b,T){return b&&b.length?Oh(b,Mi(T,2),de):t}var pj=kh(function(b,T){return b*T},1),mj=Rl("round"),gj=kh(function(b,T){return b-T},0);function yj(b){return b&&b.length?vd(b,Zc):0}function vj(b,T){return b&&b.length?vd(b,Mi(T,2)):0}return ot.after=Qt,ot.ary=Mn,ot.assign=cv,ot.assignIn=hv,ot.assignInWith=Vp,ot.assignWith=dv,ot.at=J_,ot.before=sr,ot.bind=yr,ot.bindAll=eb,ot.bindKey=ar,ot.castArray=D3,ot.chain=r0,ot.chunk=$a,ot.compact=Ds,ot.concat=cs,ot.cond=tb,ot.conforms=nb,ot.constant=f1,ot.countBy=s1,ot.create=fv,ot.curry=Wr,ot.curryRight=ii,ot.debounce=hi,ot.defaults=xg,ot.defaultsDeep=d1,ot.defer=Al,ot.delay=un,ot.difference=xi,ot.differenceBy=Qo,ot.differenceWith=$s,ot.drop=la,ot.dropRight=xs,ot.dropRightWhile=lu,ot.dropWhile=Fo,ot.fill=Fd,ot.filter=rp,ot.flatMap=Qp,ot.flatMapDeep=o0,ot.flatMapDepth=gg,ot.flatten=xc,ot.flattenDeep=al,ot.flattenDepth=ll,ot.flip=Xt,ot.flow=ap,ot.flowRight=rb,ot.fromPairs=Mf,ot.functions=h,ot.functionsIn=y,ot.groupBy=a0,ot.initial=_m,ot.intersection=Gp,ot.intersectionBy=Ud,ot.intersectionWith=bm,ot.invert=j,ot.invertBy=Z,ot.invokeMap=a1,ot.iteratee=Cv,ot.keyBy=yg,ot.keys=ue,ot.keysIn=ge,ot.map=Gd,ot.mapKeys=De,ot.mapValues=Le,ot.matches=N3,ot.matchesProperty=G3,ot.memoize=pn,ot.merge=Qe,ot.mergeWith=Je,ot.method=j3,ot.methodOf=W3,ot.mixin=_v,ot.negate=Cr,ot.nthArg=$d,ot.omit=At,ot.omitBy=_t,ot.once=pi,ot.orderBy=l1,ot.over=Mg,ot.overArgs=ki,ot.overEvery=ib,ot.overSome=Y3,ot.partial=wi,ot.partialRight=qi,ot.partition=Bm,ot.pick=Wt,ot.pickBy=It,ot.property=ob,ot.propertyOf=q3,ot.pull=wf,ot.pullAll=Xf,ot.pullAllBy=nc,ot.pullAllWith=Sf,ot.pullAt=ph,ot.range=ic,ot.rangeRight=Uh,ot.rearg=jA,ot.reject=m,ot.remove=rc,ot.rest=Ms,ot.reverse=Xm,ot.sampleSize=K,ot.set=at,ot.setWith=Pt,ot.shuffle=Q,ot.slice=X0,ot.sortBy=tt,ot.sortedUniq=e1,ot.sortedUniqBy=tp,ot.split=xA,ot.spread=jd,ot.tail=t1,ot.take=Jm,ot.takeRight=e0,ot.takeRightWhile=wm,ot.takeWhile=cg,ot.tap=pg,ot.throttle=iv,ot.thru=qc,ot.toArray=Av,ot.toPairs=cn,ot.toPairsIn=zn,ot.toPath=rj,ot.toPlainObject=Z_,ot.transform=yn,ot.unary=P3,ot.union=tv,ot.unionBy=Sm,ot.unionWith=hg,ot.uniq=Bf,ot.uniqBy=nv,ot.uniqWith=jp,ot.unset=En,ot.unzip=t0,ot.unzipWith=Va,ot.update=tr,ot.updateWith=Nn,ot.values=er,ot.valuesIn=Bn,ot.without=rv,ot.words=Im,ot.wrap=R3,ot.xor=dg,ot.xorBy=Em,ot.xorWith=fg,ot.zip=n0,ot.zipObject=n1,ot.zipObjectDeep=Dl,ot.zipWith=Mc,ot.entries=cn,ot.entriesIn=zn,ot.extend=hv,ot.extendWith=Vp,_v(ot,ot),ot.add=oj,ot.attempt=yv,ot.camelCase=Xr,ot.capitalize=To,ot.ceil=sj,ot.clamp=Qr,ot.clone=K3,ot.cloneDeep=qp,ot.cloneDeepWith=F_,ot.cloneWith=ov,ot.conformsTo=L_,ot.deburr=Ha,ot.defaultTo=vv,ot.divide=aj,ot.endsWith=bA,ot.eq=sd,ot.escape=Ru,ot.escapeRegExp=Fh,ot.every=Nd,ot.find=Of,ot.findIndex=GA,ot.findKey=pv,ot.findLast=ip,ot.findLastIndex=Yc,ot.findLastKey=mv,ot.floor=lj,ot.forEach=s0,ot.forEachRight=Yp,ot.forIn=gv,ot.forInRight=U3,ot.forOwn=d,ot.forOwnRight=A,ot.get=w,ot.gt=U_,ot.gte=z_,ot.has=k,ot.hasIn=F,ot.head=Ld,ot.identity=Zc,ot.includes=l0,ot.indexOf=od,ot.inRange=Ci,ot.invoke=ie,ot.isArguments=op,ot.isArray=So,ot.isArrayBuffer=A1,ot.isArrayLike=$c,ot.isArrayLikeObject=Kl,ot.isBoolean=N_,ot.isBuffer=WA,ot.isDate=u0,ot.isElement=G_,ot.isEmpty=j_,ot.isEqual=W_,ot.isEqualWith=Q_,ot.isError=Cg,ot.isFinite=Y_,ot.isFunction=sp,ot.isInteger=sv,ot.isLength=Wd,ot.isMap=av,ot.isMatch=q_,ot.isMatchWith=F3,ot.isNaN=L3,ot.isNative=$_,ot.isNil=V_,ot.isNull=u1,ot.isNumber=c1,ot.isObject=Cl,ot.isObjectLike=Fl,ot.isPlainObject=c0,ot.isRegExp=h0,ot.isSafeInteger=_g,ot.isSet=h1,ot.isString=bg,ot.isSymbol=Dh,ot.isTypedArray=d0,ot.isUndefined=f0,ot.isWeakMap=Pu,ot.isWeakSet=$p,ot.join=zd,ot.kebabCase=Vc,ot.last=_A,ot.lastIndexOf=xm,ot.lowerCase=uu,ot.lowerFirst=Za,ot.lt=lv,ot.lte=H_,ot.max=Aj,ot.maxBy=uj,ot.mean=cj,ot.meanBy=hj,ot.min=dj,ot.minBy=fj,ot.stubArray=lp,ot.stubFalse=zh,ot.stubObject=Tm,ot.stubString=If,ot.stubTrue=tj,ot.multiply=pj,ot.nth=Mm,ot.noConflict=Q3,ot.noop=bv,ot.now=Ot,ot.pad=QA,ot.padEnd=cu,ot.padStart=hu,ot.parseInt=wc,ot.random=mi,ot.reduce=vg,ot.reduceRight=A0,ot.repeat=Lh,ot.replace=YA,ot.result=Fe,ot.round=mj,ot.runInContext=rn,ot.sample=_,ot.size=se,ot.snakeCase=Hc,ot.some=ye,ot.sortedIndex=Jf,ot.sortedIndexBy=Ag,ot.sortedIndexOf=Ef,ot.sortedLastIndex=ug,ot.sortedLastIndexBy=J0,ot.sortedLastIndexOf=ep,ot.startCase=qA,ot.startsWith=$A,ot.subtract=gj,ot.sum=yj,ot.sumBy=vj,ot.template=eA,ot.times=nj,ot.toFinite=Qd,ot.toInteger=Lo,ot.toLength=uv,ot.toLower=ba,ot.toNumber=Kh,ot.toSafeInteger=X_,ot.toString=Ks,ot.toUpper=Yd,ot.trim=p0,ot.trimEnd=qd,ot.trimStart=z3,ot.truncate=m0,ot.unescape=Om,ot.uniqueId=ij,ot.upperCase=g0,ot.upperFirst=Hp,ot.each=s0,ot.eachRight=Yp,ot.first=Ld,_v(ot,function(){var b={};return Tl(ot,function(T,q){Po.call(ot.prototype,q)||(b[q]=T)}),b}(),{chain:!1}),ot.VERSION=r,Ga(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){ot[b].placeholder=ot}),Ga(["drop","take"],function(b,T){ai.prototype[b]=function(q){q=q===t?1:ms(Lo(q),0);var Ce=this.__filtered__&&!T?new ai(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=ya(q,Ce.__takeCount__):Ce.__views__.push({size:ya(q,Ie),type:b+(Ce.__dir__<0?"Right":"")}),Ce},ai.prototype[b+"Right"]=function(q){return this.reverse()[b](q).reverse()}}),Ga(["filter","map","takeWhile"],function(b,T){var q=T+1,Ce=q==je||q==rt;ai.prototype[b]=function(Ze){var ht=this.clone();return ht.__iteratees__.push({iteratee:Mi(Ze,3),type:q}),ht.__filtered__=ht.__filtered__||Ce,ht}}),Ga(["head","last"],function(b,T){var q="take"+(T?"Right":"");ai.prototype[b]=function(){return this[q](1).value()[0]}}),Ga(["initial","tail"],function(b,T){var q="drop"+(T?"":"Right");ai.prototype[b]=function(){return this.__filtered__?new ai(this):this[q](1)}}),ai.prototype.compact=function(){return this.filter(Zc)},ai.prototype.find=function(b){return this.filter(b).head()},ai.prototype.findLast=function(b){return this.reverse().find(b)},ai.prototype.invokeMap=en(function(b,T){return typeof b=="function"?new ai(this):this.map(function(q){return sl(q,b,T)})}),ai.prototype.reject=function(b){return this.filter(Cr(Mi(b)))},ai.prototype.slice=function(b,T){b=Lo(b);var q=this;return q.__filtered__&&(b>0||T<0)?new ai(q):(b<0?q=q.takeRight(-b):b&&(q=q.drop(b)),T!==t&&(T=Lo(T),q=T<0?q.dropRight(-T):q.take(T-b)),q)},ai.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},ai.prototype.toArray=function(){return this.take(Ie)},Tl(ai.prototype,function(b,T){var q=/^(?:filter|find|map|reject)|While$/.test(T),Ce=/^(?:head|last)$/.test(T),Ze=ot[Ce?"take"+(T=="last"?"Right":""):T],ht=Ce||/^find/.test(T);Ze&&(ot.prototype[T]=function(){var Lt=this.__wrapped__,$t=Ce?[1]:arguments,an=Lt instanceof ai,qn=$t[0],Zn=an||So(Lt),mr=function(Cs){var Is=Ze.apply(ot,Tc([Cs],$t));return Ce&&$r?Is[0]:Is};Zn&&q&&typeof qn=="function"&&qn.length!=1&&(an=Zn=!1);var $r=this.__chain__,Bi=!!this.__actions__.length,no=ht&&!$r,ns=an&&!Bi;if(!ht&&Zn){Lt=ns?Lt:new ai(this);var ro=b.apply(Lt,$t);return ro.__actions__.push({func:qc,args:[mr],thisArg:t}),new Ro(ro,$r)}return no&&ns?b.apply(this,$t):(ro=this.thru(mr),no?Ce?ro.value()[0]:ro.value():ro)})}),Ga(["pop","push","shift","sort","splice","unshift"],function(b){var T=lA[b],q=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(b);ot.prototype[b]=function(){var Ze=arguments;if(Ce&&!this.__chain__){var ht=this.value();return T.apply(So(ht)?ht:[],Ze)}return this[q](function(Lt){return T.apply(So(Lt)?Lt:[],Ze)})}}),Tl(ai.prototype,function(b,T){var q=ot[T];if(q){var Ce=q.name+"";Po.call(bs,Ce)||(bs[Ce]=[]),bs[Ce].push({name:T,func:q})}}),bs[Td(t,X).name]=[{name:"wrapper",func:t}],ai.prototype.clone=Bs,ai.prototype.reverse=js,ai.prototype.value=qu,ot.prototype.at=Wp,ot.prototype.chain=np,ot.prototype.commit=i0,ot.prototype.next=r1,ot.prototype.plant=mg,ot.prototype.reverse=Au,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=o1,ot.prototype.first=ot.prototype.head,uA&&(ot.prototype[uA]=i1),ot},Wu=Kc();Yi?((Yi.exports=Wu)._=Wu,ni._=Wu):Rr._=Wu}).call(sQ)}(zv,zv.exports)),zv.exports}var cx=aQ();const t6=Gl(cx);function lQ(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var s4,T8;function AQ(){if(T8)return s4;T8=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return s4=n,s4}var uQ=AQ();const k8=Gl(uQ);var ef=Uint8Array,cy=Uint16Array,cQ=Int32Array,SF=new ef([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),EF=new ef([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hQ=new ef([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BF=function(n,e){for(var t=new cy(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new cQ(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},OF=BF(SF,2),IF=OF.b,dQ=OF.r;IF[28]=258,dQ[258]=28;var fQ=BF(EF,0),pQ=fQ.b,n6=new cy(32768);for(var Nl=0;Nl<32768;++Nl){var y0=(Nl&43690)>>1|(Nl&21845)<<1;y0=(y0&52428)>>2|(y0&13107)<<2,y0=(y0&61680)>>4|(y0&3855)<<4,n6[Nl]=((y0&65280)>>8|(y0&255)<<8)>>1}var oC=function(n,e,t){for(var r=n.length,i=0,s=new cy(e);i<r;++i)n[i]&&++s[n[i]-1];var l=new cy(e);for(i=1;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var o;if(t){o=new cy(1<<e);var f=15-e;for(i=0;i<r;++i)if(n[i])for(var C=i<<4|n[i],x=e-n[i],B=l[n[i]-1]++<<x,R=B|(1<<x)-1;B<=R;++B)o[n6[B]>>f]=C}else for(o=new cy(r),i=0;i<r;++i)n[i]&&(o[i]=n6[l[n[i]-1]++]>>15-n[i]);return o},l_=new ef(288);for(var Nl=0;Nl<144;++Nl)l_[Nl]=8;for(var Nl=144;Nl<256;++Nl)l_[Nl]=9;for(var Nl=256;Nl<280;++Nl)l_[Nl]=7;for(var Nl=280;Nl<288;++Nl)l_[Nl]=8;var TF=new ef(32);for(var Nl=0;Nl<32;++Nl)TF[Nl]=5;var mQ=oC(l_,9,1),gQ=oC(TF,5,1),a4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},up=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},l4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},yQ=function(n){return(n+7)/8|0},vQ=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ef(n.subarray(e,t))},CQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zd=function(n,e,t){var r=new Error(e||CQ[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Zd),!t)throw r;return r},mB=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new ef(0);var l=!t,o=l||e.i!=2,f=e.i;l&&(t=new ef(i*3));var C=function(Ye){var vt=t.length;if(Ye>vt){var yt=new ef(Math.max(vt*2,Ye));yt.set(t),t=yt}},x=e.f||0,B=e.p||0,R=e.b||0,P=e.l,U=e.d,N=e.m,W=e.n,X=i*8;do{if(!P){x=up(n,B,1);var $=up(n,B+1,3);if(B+=3,$)if($==1)P=mQ,U=gQ,N=9,W=5;else if($==2){var ne=up(n,B,31)+257,G=up(n,B+10,15)+4,le=ne+up(n,B+5,31)+1;B+=14;for(var fe=new ef(le),pe=new ef(19),we=0;we<G;++we)pe[hQ[we]]=up(n,B+we*3,7);B+=G*3;for(var Se=a4(pe),xe=(1<<Se)-1,je=oC(pe,Se,1),we=0;we<le;){var Me=je[up(n,B,xe)];B+=Me&15;var re=Me>>4;if(re<16)fe[we++]=re;else{var rt=0,Ct=0;for(re==16?(Ct=3+up(n,B,3),B+=2,rt=fe[we-1]):re==17?(Ct=3+up(n,B,7),B+=3):re==18&&(Ct=11+up(n,B,127),B+=7);Ct--;)fe[we++]=rt}}var it=fe.subarray(0,ne),nt=fe.subarray(ne);N=a4(it),W=a4(nt),P=oC(it,N,1),U=oC(nt,W,1)}else Zd(1);else{var re=yQ(B)+4,te=n[re-4]|n[re-3]<<8,V=re+te;if(V>i){f&&Zd(0);break}o&&C(R+te),t.set(n.subarray(re,V),R),e.b=R+=te,e.p=B=V*8,e.f=x;continue}if(B>X){f&&Zd(0);break}}o&&C(R+131072);for(var Ge=(1<<N)-1,Ie=(1<<W)-1,$e=B;;$e=B){var rt=P[l4(n,B)&Ge],gt=rt>>4;if(B+=rt&15,B>X){f&&Zd(0);break}if(rt||Zd(2),gt<256)t[R++]=gt;else if(gt==256){$e=B,P=null;break}else{var Dt=gt-254;if(gt>264){var we=gt-257,ut=SF[we];Dt=up(n,B,(1<<ut)-1)+IF[we],B+=ut}var Rt=U[l4(n,B)&Ie],St=Rt>>4;Rt||Zd(3),B+=Rt&15;var nt=pQ[St];if(St>3){var ut=EF[St];nt+=l4(n,B)&(1<<ut)-1,B+=ut}if(B>X){f&&Zd(0);break}o&&C(R+131072);var Ke=R+Dt;if(R<nt){var Pe=s-nt,Re=Math.min(nt,Ke);for(Pe+R<0&&Zd(3);R<Re;++R)t[R]=r[Pe+R]}for(;R<Ke;++R)t[R]=t[R-nt]}}e.l=P,e.p=$e,e.b=R,e.f=x,P&&(x=1,e.m=N,e.d=U,e.n=W)}while(!x);return R!=t.length&&l?vQ(t,0,R):t.subarray(0,R)},_Q=new ef(0),bQ=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Zd(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},xQ=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},MQ=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Zd(6,"invalid zlib data"),(n[1]>>5&1)==1&&Zd(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function wQ(n,e){return mB(n,{i:2},e,e)}function SQ(n,e){var t=bQ(n);return t+8>n.length&&Zd(6,"invalid gzip data"),mB(n.subarray(t,-8),{i:2},new ef(xQ(n)),e)}function EQ(n,e){return mB(n.subarray(MQ(n),-4),{i:2},e,e)}function BQ(n,e){return n[0]==31&&n[1]==139&&n[2]==8?SQ(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?wQ(n,e):EQ(n,e)}var OQ=typeof TextDecoder<"u"&&new TextDecoder,IQ=0;try{OQ.decode(_Q,{stream:!0}),IQ=1}catch{}var TQ=Object.defineProperty,sC=Math.pow,Ja=(n,e)=>TQ(n,"name",{value:e,configurable:!0}),Bc=(n,e,t)=>new Promise((r,i)=>{var s=f=>{try{o(t.next(f))}catch(C){i(C)}},l=f=>{try{o(t.throw(f))}catch(C){i(C)}},o=f=>f.done?r(f.value):Promise.resolve(f.value).then(s,l);o((t=t.apply(n,e)).next())});Ja((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Ja((s,l)=>{let o=document.createElement("img"),f=new AbortController,C=f.signal;return o.cancel=()=>{f.abort()},t||(n.getHeader().then(x=>{x.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):x.tileType===2?r="image/png":x.tileType===3?r="image/jpeg":x.tileType===4?r="image/webp":x.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,C).then(x=>{if(x){let B=new Blob([x.data],{type:r}),R=window.URL.createObjectURL(B);o.src=R,o.cancel=void 0,l(void 0,o)}}).catch(x=>{if(x.name!=="AbortError")throw x}),o},"createTile"),_removeTile:Ja(function(s){let l=this._tiles[s];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var kQ=Ja(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Ja(()=>r.abort(),"cancel")}},"v3compat"),kF=class{constructor(e){this.tilev4=Ja((t,r)=>Bc(this,null,function*(){if(t.type==="json"){let P=t.url.substr(10),U=this.tiles.get(P);if(U||(U=new i6(P),this.tiles.set(P,U)),this.metadata)return{data:yield U.getTileJson(t.url)};let N=yield U.getHeader();return(N.minLon>=N.maxLon||N.minLat>=N.maxLat)&&console.error(`Bounds of PMTiles archive ${N.minLon},${N.minLat},${N.maxLon},${N.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:N.minZoom,maxzoom:N.maxZoom,bounds:[N.minLon,N.minLat,N.maxLon,N.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let l=s[1],o=this.tiles.get(l);o||(o=new i6(l),this.tiles.set(l,o));let f=s[2],C=s[3],x=s[4],B=yield o.getHeader(),R=yield o?.getZxy(+f,+C,+x,r.signal);if(R)return{data:new Uint8Array(R.data),cacheControl:R.cacheControl,expires:R.expires};if(B.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=kQ(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Ja(kF,"Protocol");var PQ=kF;function PF(n,e){return(e>>>0)*4294967296+(n>>>0)}Ja(PF,"toNum");function RF(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return PF(n,i);throw new Error("Expected varint not more than 10 bytes")}Ja(RF,"readVarintRemainder");function ny(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,RF(r,n))}Ja(ny,"readVarint");function gB(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}Ja(gB,"rotate");function DF(n,e){let t=sC(2,n),r=e,i=e,s=e,l=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),gB(o,l,r,i),l[0]+=o*r,l[1]+=o*i,s=s/4,o*=2;return[n,l[0],l[1]]}Ja(DF,"idOnLevel");var RQ=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function KF(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>sC(2,n)-1||t>sC(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=RQ[n],i=sC(2,n),s=0,l=0,o=0,f=[e,t],C=i/2;for(;C>0;)s=(f[0]&C)>0?1:0,l=(f[1]&C)>0?1:0,o+=C*C*(3*s^l),gB(C,f,s,l),C=C/2;return r+o}Ja(KF,"zxyToTileId");function DQ(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return DF(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Ja(DQ,"tileIdToZxy");var KQ=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(KQ||{});function hx(n,e){return Bc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return BQ(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Ja(hx,"defaultDecompress");var FQ=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(FQ||{});function FF(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Ja(FF,"tileTypeExt");var LQ=127;function LF(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Ja(LF,"findTile");var UQ=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Bc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Ja(UQ,"FileSource");var UF=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return Bc(this,null,function*(){let s,l;r?l=r:(s=new AbortController,l=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let f;this.mustReload?f="reload":this.chromeWindowsNoCache&&(f="no-store");let C=yield fetch(this.url,{signal:l,cache:f,headers:o});if(e===0&&C.status===416){let R=C.headers.get("Content-Range");if(!R||!R.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+R.substr(8);C=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let x=C.headers.get("Etag");if(x!=null&&x.startsWith("W/")&&(x=null),C.status===416||i&&x&&x!==i)throw this.mustReload=!0,new r6(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(C.status>=300)throw new Error(`Bad response code: ${C.status}`);let B=C.headers.get("Content-Length");if(C.status===200&&(!B||+B>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield C.arrayBuffer(),etag:x||void 0,cacheControl:C.headers.get("Cache-Control")||void 0,expires:C.headers.get("Expires")||void 0}})}};Ja(UF,"FetchSource");var zQ=UF;function kf(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*sC(2,32)+r}Ja(kf,"getUint64");function zF(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:kf(t,8),rootDirectoryLength:kf(t,16),jsonMetadataOffset:kf(t,24),jsonMetadataLength:kf(t,32),leafDirectoryOffset:kf(t,40),leafDirectoryLength:kf(t,48),tileDataOffset:kf(t,56),tileDataLength:kf(t,64),numAddressedTiles:kf(t,72),numTileEntries:kf(t,80),numTileContents:kf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Ja(zF,"bytesToHeader");function yB(n){let e={buf:new Uint8Array(n),pos:0},t=ny(e),r=[],i=0;for(let s=0;s<t;s++){let l=ny(e);r.push({tileId:i+l,offset:0,length:0,runLength:1}),i+=l}for(let s=0;s<t;s++)r[s].runLength=ny(e);for(let s=0;s<t;s++)r[s].length=ny(e);for(let s=0;s<t;s++){let l=ny(e);l===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=l-1}return r}Ja(yB,"deserializeIndex");var NF=class extends Error{};Ja(NF,"EtagMismatch");var r6=NF;function vB(n,e){return Bc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,LQ),i=zF(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),l=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=yB(yield e(s,i.internalCompression));return[i,[l,o.length,o]]})}Ja(vB,"getHeaderAndRoot");function CB(n,e,t,r,i){return Bc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),l=yield e(s.data,i.internalCompression),o=yB(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}Ja(CB,"getDirectory");var NQ=class{constructor(e=100,t=!0,r=hx){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Bc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield vB(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return Bc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,l.data;let o=yield CB(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Bc(this,null,function*(){this.cache.delete(e.getKey())})}};Ja(NQ,"ResolvedValueCache");var GF=class{constructor(e=100,t=!0,r=hx){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Bc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,l)=>{vB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return Bc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((f,C)=>{CB(e,this.decompress,t,r,i).then(x=>{f(x),this.prune()}).catch(x=>{C(x)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Bc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(l=>{i(),this.invalidations.delete(t)}).catch(l=>{s(l)})});this.invalidations.set(t,r)})}};Ja(GF,"SharedPromiseCache");var GQ=GF,jF=class{constructor(e,t,r){typeof e=="string"?this.source=new zQ(e):this.source=e,r?this.decompress=r:this.decompress=hx,t?this.cache=t:this.cache=new GQ}getHeader(){return Bc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return Bc(this,null,function*(){let s=KF(e,t,r),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,f=l.rootDirectoryLength;for(let C=0;C<=3;C++){let x=yield this.cache.getDirectory(this.source,o,f,l),B=LF(x,s);if(B){if(B.runLength>0){let R=yield this.source.getBytes(l.tileDataOffset+B.offset,B.length,i,l.etag);return{data:yield this.decompress(R.data,l.tileCompression),cacheControl:R.cacheControl,expires:R.expires}}o=l.leafDirectoryOffset+B.offset,f=B.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return Bc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof r6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return Bc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return Bc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof r6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Bc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=FF(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Ja(jF,"PMTiles");var i6=jF,jQ=8,WQ={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},QQ={"*":{type:"source"}},YQ=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],qQ={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},$Q={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},VQ={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},HQ={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},ZQ={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},XQ={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},JQ={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},eY=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],tY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nY={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rY={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},iY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},oY={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sY={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},aY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},AY={type:"array",value:"*"},uY={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},cY={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},hY={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},dY={type:"array",value:"*",minimum:1},fY={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},pY={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},mY={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},gY={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},yY=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],vY={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},CY={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},_Y={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},bY={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xY={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},MY={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wY={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},SY={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},EY={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},BY={"*":{type:"string"}},ws={$version:jQ,$root:WQ,sources:QQ,source:YQ,source_vector:qQ,source_raster:$Q,source_raster_dem:VQ,source_geojson:HQ,source_video:ZQ,source_image:XQ,layer:JQ,layout:eY,layout_background:tY,layout_fill:nY,layout_circle:rY,layout_heatmap:iY,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:oY,layout_symbol:sY,layout_raster:aY,layout_hillshade:lY,filter:AY,filter_operator:uY,geometry_type:cY,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:hY,expression:dY,light:fY,sky:pY,terrain:mY,projection:gY,paint:yY,paint_fill:vY,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:CY,paint_circle:_Y,paint_heatmap:bY,paint_symbol:xY,paint_raster:MY,paint_hillshade:wY,paint_background:SY,transition:EY,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:BY};const OY=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function IY(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return OY.forEach(r=>{r in e&&(t[r]=e[r])}),t}function _B(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=IY(n[t],e[n[t].ref]));return n}function ca(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!ca(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!ca(n[r],e[r]))return!1;return!0}return n===e}function Rf(n,e){n.push(e)}function WF(n,e,t){Rf(t,{command:"addSource",args:[n,e[n]]})}function QF(n,e,t){Rf(e,{command:"removeSource",args:[n]}),t[n]=!0}function TY(n,e,t,r){QF(n,t,r),WF(n,e,t)}function kY(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!ca(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!ca(n[t][r],e[t][r]))return!1;return!0}function PY(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||QF(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?ca(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&kY(n,e,i)?Rf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):TY(i,e,t,r)):WF(i,e,t))}function Ab(n,e,t,r,i,s){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(ca(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||ca(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]})}function P8(n){return n.id}function R8(n,e){return n[e.id]=e,n}function RY(n,e,t){n=n||[],e=e||[];const r=n.map(P8),i=e.map(P8),s=n.reduce(R8,{}),l=e.reduce(R8,{}),o=r.slice(),f=Object.create(null);let C,x,B,R,P;for(let U=0,N=0;U<r.length;U++)C=r[U],Object.prototype.hasOwnProperty.call(l,C)?N++:(Rf(t,{command:"removeLayer",args:[C]}),o.splice(o.indexOf(C,N),1));for(let U=0,N=0;U<i.length;U++)C=i[i.length-1-U],o[o.length-1-U]!==C&&(Object.prototype.hasOwnProperty.call(s,C)?(Rf(t,{command:"removeLayer",args:[C]}),o.splice(o.lastIndexOf(C,o.length-N),1)):N++,R=o[o.length-U],Rf(t,{command:"addLayer",args:[l[C],R]}),o.splice(o.length-U,0,C),f[C]=!0);for(let U=0;U<i.length;U++)if(C=i[U],x=s[C],B=l[C],!(f[C]||ca(x,B))){if(!ca(x.source,B.source)||!ca(x["source-layer"],B["source-layer"])||!ca(x.type,B.type)){Rf(t,{command:"removeLayer",args:[C]}),R=o[o.lastIndexOf(C)+1],Rf(t,{command:"addLayer",args:[B,R]});continue}Ab(x.layout,B.layout,t,C,null,"setLayoutProperty"),Ab(x.paint,B.paint,t,C,null,"setPaintProperty"),ca(x.filter,B.filter)||Rf(t,{command:"setFilter",args:[C,B.filter]}),(!ca(x.minzoom,B.minzoom)||!ca(x.maxzoom,B.maxzoom))&&Rf(t,{command:"setLayerZoomRange",args:[C,B.minzoom,B.maxzoom]});for(P in x)Object.prototype.hasOwnProperty.call(x,P)&&(P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?Ab(x[P],B[P],t,C,P.slice(6),"setPaintProperty"):ca(x[P],B[P])||Rf(t,{command:"setLayerProperty",args:[C,P,B[P]]})));for(P in B)!Object.prototype.hasOwnProperty.call(B,P)||Object.prototype.hasOwnProperty.call(x,P)||P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?Ab(x[P],B[P],t,C,P.slice(6),"setPaintProperty"):ca(x[P],B[P])||Rf(t,{command:"setLayerProperty",args:[C,P,B[P]]}))}}function DY(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!ca(n.version,e.version))return[{command:"setStyle",args:[e]}];ca(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),ca(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),ca(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),ca(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),ca(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),ca(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),ca(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),ca(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),ca(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),ca(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),ca(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),ca(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),ca(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),ca(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];PY(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(l=>{"source"in l&&r[l.source]?t.push({command:"removeLayer",args:[l.id]}):s.push(l)}),t=t.concat(i),RY(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class wr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function By(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class em extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class bB{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new bB(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const dx={kind:"null"},Or={kind:"number"},rs={kind:"string"},Yo={kind:"boolean"},sm={kind:"color"},fx={kind:"projectionDefinition"},F1={kind:"object"},zo={kind:"value"},KY={kind:"error"},px={kind:"collator"},mx={kind:"formatted"},gx={kind:"padding"},xC={kind:"colorArray"},yx={kind:"numberArray"},A_={kind:"resolvedImage"},vx={kind:"variableAnchorOffsetCollection"};function tf(n,e){return{kind:"array",itemType:n,N:e}}function nA(n){if(n.kind==="array"){const e=nA(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const FY=[dx,Or,rs,Yo,sm,fx,mx,F1,tf(zo),gx,yx,xC,A_,vx];function MC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!MC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of FY)if(!MC(t,e))return null}}return`Expected ${nA(n)} but found ${nA(e)} instead.`}function xB(n,e){return e.some(t=>t.kind===n.kind)}function L1(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function v0(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const YF=.96422,qF=1,$F=.82521,VF=4/29,yy=6/29,HF=3*yy*yy,LY=yy*yy*yy,UY=Math.PI/180,zY=180/Math.PI;function ZF(n){return n=n%360,n<0&&(n+=360),n}function XF([n,e,t,r]){n=A4(n),e=A4(e),t=A4(t);let i,s;const l=u4((.2225045*n+.7168786*e+.0606169*t)/qF);n===e&&e===t?i=s=l:(i=u4((.4360747*n+.3850649*e+.1430804*t)/YF),s=u4((.0139322*n+.0971045*e+.7141733*t)/$F));const o=116*l-16;return[o<0?0:o,500*(i-l),200*(l-s),r]}function A4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function u4(n){return n>LY?Math.pow(n,1/3):n/HF+VF}function JF([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,l=isNaN(t)?i:i-t/200;return i=qF*h4(i),s=YF*h4(s),l=$F*h4(l),[c4(3.1338561*s-1.6168667*i-.4906146*l),c4(-.9787684*s+1.9161415*i+.033454*l),c4(.0719453*s-.2289914*i+1.4052427*l),r]}function c4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function h4(n){return n>yy?n*n*n:HF*(n-VF)}function NY(n){const[e,t,r,i]=XF(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?ZF(Math.atan2(r,t)*zY):NaN,s,e,i]}function GY([n,e,t,r]){return n=isNaN(n)?0:n*UY,JF([t,Math.cos(n)*e,Math.sin(n)*e,r])}function jY([n,e,t,r]){n=ZF(n),e/=100,t/=100;function i(s){const l=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[i(0),i(8),i(4),r]}const WY=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function aC(n,e){return WY(n,e)?n[e]:void 0}function QY(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=aC(YY,n);if(e){const[i,s,l]=e;return[i/255,s/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let l=1;return[ub(n.slice(l,l+=s)),ub(n.slice(l,l+=s)),ub(n.slice(l,l+=s)),ub(n.slice(l,l+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[l,o,f,C,x,B,R,P,U,N,W,X]=s,$=[C||" ",R||" ",N].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const re=[f,B,U].join(""),te=re==="%%%"?100:re===""?255:0;if(te){const V=[ry(+o/te,0,1),ry(+x/te,0,1),ry(+P/te,0,1),W?D8(+W,X):1];if(K8(V))return V}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,l,o,f,C,x,B,R]=r,P=[l||" ",f||" ",x].join("");if(P==="  "||P==="  /"||P===",,"||P===",,,"){const U=[+s,ry(+o,0,100),ry(+C,0,100),B?D8(+B,R):1];if(K8(U))return jY(U)}}}function ub(n){return parseInt(n.padEnd(2,n),16)/255}function D8(n,e){return ry(e?n/100:n,0,1)}function ry(n,e,t){return Math.min(Math.max(e,n),t)}function K8(n){return!n.some(Number.isNaN)}const YY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function z0(n,e,t){return n+t*(e-n)}function Oy(n,e,t){return n.map((r,i)=>z0(r,e[i],t))}function qY(n){return n==="rgb"||n==="hcl"||n==="lab"}let Fa=class iy{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof iy)return e;if(typeof e!="string")return;const t=QY(e);if(t)return new iy(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",NY(this.rgb))}get lab(){return this.overwriteGetter("lab",XF(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,l,o,f]=Oy(e.rgb,t.rgb,r);return new iy(s,l,o,f,!1)}case"hcl":{const[s,l,o,f]=e.hcl,[C,x,B,R]=t.hcl;let P,U;if(!isNaN(s)&&!isNaN(C)){let re=C-s;C>s&&re>180?re-=360:C<s&&s-C>180&&(re+=360),P=s+r*re}else isNaN(s)?isNaN(C)?P=NaN:(P=C,(o===1||o===0)&&(U=x)):(P=s,(B===1||B===0)&&(U=l));const[N,W,X,$]=GY([P,U??z0(l,x,r),z0(o,B,r),z0(f,R,r)]);return new iy(N,W,X,$,!1)}case"lab":{const[s,l,o,f]=JF(Oy(e.lab,t.lab,r));return new iy(s,l,o,f,!1)}}}};Fa.black=new Fa(0,0,0,1);Fa.white=new Fa(1,1,1,1);Fa.transparent=new Fa(0,0,0,0);Fa.red=new Fa(1,0,0,1);class MB{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const $Y=["bottom","center","top"];class o6{constructor(e,t,r,i,s,l){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=l}}class am{constructor(e){this.sections=e}static fromString(e){return new am([new o6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof am?e:am.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Qh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qh)return e;if(typeof e=="number")return new Qh([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Qh(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Qh(Oy(e.values,t.values,r))}}class Yh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Yh)return e;if(typeof e=="number")return new Yh([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new Yh(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Yh(Oy(e.values,t.values,r))}}class Jc{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Jc)return e;if(typeof e=="string"){const r=Fa.parse(e);return r?new Jc([r]):void 0}if(!Array.isArray(e))return;const t=[];for(const r of e){if(typeof r!="string")return;const i=Fa.parse(r);if(!i)return;t.push(i)}return new Jc(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r,i="rgb"){const s=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let l=0;l<e.values.length;l++)s.push(Fa.interpolate(e.values[l],t.values[l],r,i));return new Jc(s)}}class MA extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const VY=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Gf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Gf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!VY.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Gf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new MA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new MA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);l.push(i[o]);const[f,C]=i[o+1],[x,B]=s[o+1];l.push([z0(f,x,r),z0(C,B,r)])}return new Gf(l)}}class Vm{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Vm({name:e,available:!1}):null}}class Lf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Lf(e,t,r)}static parse(e){if(e instanceof Lf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Lf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Lf(e.from,e.to,e.transition);if(typeof e=="string")return new Lf(e,e,1)}}function eL(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Lf||n instanceof Fa||n instanceof MB||n instanceof am||n instanceof Qh||n instanceof Yh||n instanceof Jc||n instanceof Gf||n instanceof Vm)return!0;if(Array.isArray(n)){for(const e of n)if(!wC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!wC(n[e]))return!1;return!0}else return!1}function Lu(n){if(n===null)return dx;if(typeof n=="string")return rs;if(typeof n=="boolean")return Yo;if(typeof n=="number")return Or;if(n instanceof Fa)return sm;if(n instanceof Lf)return fx;if(n instanceof MB)return px;if(n instanceof am)return mx;if(n instanceof Qh)return gx;if(n instanceof Yh)return yx;if(n instanceof Jc)return xC;if(n instanceof Gf)return vx;if(n instanceof Vm)return A_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=Lu(r);if(!t)t=i;else{if(t===i)continue;t=zo;break}}return tf(t||zo,e)}else return F1}function lC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Fa||n instanceof Lf||n instanceof am||n instanceof Qh||n instanceof Yh||n instanceof Jc||n instanceof Gf||n instanceof Vm?n.toString():JSON.stringify(n)}class Iy{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!wC(e[1]))return t.error("invalid value");const r=e[1];let i=Lu(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new Iy(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const cb={string:rs,number:Or,boolean:Yo,object:F1};class mp{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const C=e[1];if(typeof C!="string"||!(C in cb)||C==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=cb[C],r++}else o=zo;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],r++}i=tf(o,f)}else{if(!cb[s])throw new Error(`Types doesn't contain name = ${s}`);i=cb[s]}const l=[];for(;r<e.length;r++){const o=t.parse(e[r],r,zo);if(!o)return null;l.push(o)}return new mp(i,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(MC(this.type,Lu(r))){if(t===this.args.length-1)throw new MA(`Expected value to be of type ${nA(this.type)}, but found ${nA(Lu(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const F8={"to-boolean":Yo,"to-color":sm,"to-number":Or,"to-string":rs};class k0{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!F8[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=F8[r],s=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,zo);if(!o)return null;s.push(o)}return new k0(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Fa)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=eL(t[0],t[1],t[2],t[3]),!r))return new Fa(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new MA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Qh.parse(t);if(i)return i}throw new MA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=Yh.parse(t);if(i)return i}throw new MA(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const r of this.args){t=r.evaluate(e);const i=Jc.parse(t);if(i)return i}throw new MA(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Gf.parse(t);if(i)return i}throw new MA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new MA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return am.fromString(lC(this.args[0].evaluate(e)));case"resolvedImage":return Vm.fromString(lC(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return lC(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const HY=["Unknown","Point","LineString","Polygon"];class tL{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?HY[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Fa.parse(e),this._parseColorCache.set(e,t)),t}}class Cx{constructor(e,t,r=[],i,s=new bB,l=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=l,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,l){return l==="assert"?new mp(s,[i]):l==="coerce"?new k0(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let l=s.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,f=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&f.kind==="value")l=r(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&["string","array"].includes(f.kind)||["color","formatted","resolvedImage"].includes(o.kind)&&["value","string"].includes(f.kind)||["padding","numberArray"].includes(o.kind)&&["value","number","array"].includes(f.kind)||o.kind==="colorArray"&&["value","string","array"].includes(f.kind)||o.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(f.kind))l=r(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,f))return null}if(!(l instanceof Iy)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new tL;try{l=new Iy(l.type,l.evaluate(o))}catch(f){return this.error(f.message),null}}return l}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new Cx(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new em(r,e))}checkSubtype(e,t){const r=MC(e,t);return r&&this.error(r),r}}class _x{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const l=e[s];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,s);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([l,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new _x(r,i):null}outputDefined(){return this.result.outputDefined()}}class bx{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new bx(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class wB{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Or),i=t.parse(e[2],2,tf(t.expectedType||zo));if(!r||!i)return null;const s=i.type;return new wB(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new MA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new MA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new MA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class SB{constructor(e,t){this.type=Yo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,zo),i=t.parse(e[2],2,zo);return!r||!i?null:xB(r.type,[Yo,rs,Or,dx,zo])?new SB(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${nA(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!L1(t,["boolean","string","number","null"]))throw new MA(`Expected first argument to be of type boolean, string, number or null, but found ${nA(Lu(t))} instead.`);if(!L1(r,["string","array"]))throw new MA(`Expected second argument to be of type array or string, but found ${nA(Lu(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class y2{constructor(e,t,r){this.type=Or,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,zo),i=t.parse(e[2],2,zo);if(!r||!i)return null;if(!xB(r.type,[Yo,rs,Or,dx,zo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${nA(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Or);return s?new y2(r,i,s):null}else return new y2(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!L1(t,["boolean","string","number","null"]))throw new MA(`Expected first argument to be of type boolean, string, number or null, but found ${nA(Lu(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),L1(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(L1(r,["array"]))return r.indexOf(t,i);throw new MA(`Expected second argument to be of type array or string, but found ${nA(Lu(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class EB{constructor(e,t,r,i,s,l){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},l=[];for(let C=2;C<e.length-1;C+=2){let x=e[C];const B=e[C+1];Array.isArray(x)||(x=[x]);const R=t.concat(C);if(x.length===0)return R.error("Expected at least one branch label.");for(const U of x){if(typeof U!="number"&&typeof U!="string")return R.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return R.error("Numeric branch labels must be integer values.");if(!r)r=Lu(U);else if(R.checkSubtype(r,Lu(U)))return null;if(typeof s[String(U)]<"u")return R.error("Branch labels must be unique.");s[String(U)]=l.length}const P=t.parse(B,C,i);if(!P)return null;i=i||P.type,l.push(P)}const o=t.parse(e[1],1,zo);if(!o)return null;const f=t.parse(e[e.length-1],e.length-1,i);return!f||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new EB(r,i,o,s,l,f)}evaluate(e){const t=this.input.evaluate(e);return(Lu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class BB{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,Yo);if(!o)return null;const f=t.parse(e[l+1],l+1,r);if(!f)return null;i.push([o,f]),r=r||f.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new BB(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class v2{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,zo),i=t.parse(e[2],2,Or);if(!r||!i)return null;if(!xB(r.type,[tf(zo),rs,zo]))return t.error(`Expected first argument to be of type array or string, but found ${nA(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Or);return s?new v2(r.type,r,i,s):null}else return new v2(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),L1(t,["string"]))return[...t].slice(r,i).join("");if(L1(t,["array"]))return t.slice(r,i);throw new MA(`Expected first argument to be of type array or string, but found ${nA(Lu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function xx(n,e){const t=n.length-1;let r=0,i=t,s=0,l,o;for(;r<=i;)if(s=Math.floor((r+i)/2),l=n[s],o=n[s+1],l<=e){if(s===t||e<o)return s;r=s+1}else if(l>e)i=s-1;else throw new MA("Input is not a number.");return 0}class Mx{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Or);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],f=e[l+1],C=l,x=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const B=t.parse(f,x,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new Mx(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=xx(t,i);return r[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ZY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var d4,L8;function XY(){if(L8)return d4;L8=1,d4=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var l=this.sampleCurveDerivativeX(r);if(Math.abs(l)<1e-6)break;r=r-s/l}var o=0,f=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:f=r,r=(f-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},d4}var JY=XY(),eq=ZY(JY);class jf{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[l,o]of s)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=f4(t,e.base,r,i);else if(e.name==="linear")s=f4(t,1,r,i);else if(e.name==="cubic-bezier"){const l=e.controlPoints;s=new eq(l[0],l[1],l[2],l[3]).solve(f4(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...l]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const C=i[1];if(typeof C!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:C}}else if(i[0]==="cubic-bezier"){const C=i.slice(1);if(C.length!==4||C.some(x=>typeof x!="number"||x<0||x>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:C}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Or),!s)return null;const o=[];let f=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&t.expectedType!=xC?f=sm:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let C=0;C<l.length;C+=2){const x=l[C],B=l[C+1],R=C+3,P=C+4;if(typeof x!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(o.length&&o[o.length-1][0]>=x)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);const U=t.parse(B,P,f);if(!U)return null;f=f||U.type,o.push([x,U])}return!v0(f,Or)&&!v0(f,fx)&&!v0(f,sm)&&!v0(f,gx)&&!v0(f,yx)&&!v0(f,xC)&&!v0(f,vx)&&!v0(f,tf(Or))?t.error(`Type ${nA(f)} is not interpolatable.`):new jf(f,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=xx(t,i),o=t[l],f=t[l+1],C=jf.interpolationFactor(this.interpolation,i,o,f),x=r[l].evaluate(e),B=r[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return z0(x,B,C);case"color":return Fa.interpolate(x,B,C);case"padding":return Qh.interpolate(x,B,C);case"colorArray":return Jc.interpolate(x,B,C);case"numberArray":return Yh.interpolate(x,B,C);case"variableAnchorOffsetCollection":return Gf.interpolate(x,B,C);case"array":return Oy(x,B,C);case"projectionDefinition":return Lf.interpolate(x,B,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return Fa.interpolate(x,B,C,"hcl");case"colorArray":return Jc.interpolate(x,B,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Fa.interpolate(x,B,C,"lab");case"colorArray":return Jc.interpolate(x,B,C,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function f4(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const tq={color:Fa.interpolate,number:z0,padding:Qh.interpolate,numberArray:Yh.interpolate,colorArray:Jc.interpolate,variableAnchorOffsetCollection:Gf.interpolate,array:Oy};class SC{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const f=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!f)return null;r=r||f.type,s.push(f)}if(!r)throw new Error("No output type");return i&&s.some(o=>MC(i,o.type))?new SC(zo,s):new SC(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Vm&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function U8(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function nq(n,e,t){return e===t}function rq(n,e,t){return e!==t}function iq(n,e,t){return e<t}function oq(n,e,t){return e>t}function sq(n,e,t){return e<=t}function aq(n,e,t){return e>=t}function nL(n,e,t,r){return r.compare(e,t)===0}function lq(n,e,t,r){return!nL(n,e,t,r)}function Aq(n,e,t,r){return r.compare(e,t)<0}function uq(n,e,t,r){return r.compare(e,t)>0}function cq(n,e,t,r){return r.compare(e,t)<=0}function hq(n,e,t,r){return r.compare(e,t)>=0}function jy(n,e,t){const r=n!=="=="&&n!=="!=";return class rL{constructor(s,l,o){this.type=Yo,this.lhs=s,this.rhs=l,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||l.type.kind==="value"}static parse(s,l){if(s.length!==3&&s.length!==4)return l.error("Expected two or three arguments.");const o=s[0];let f=l.parse(s[1],1,zo);if(!f)return null;if(!U8(o,f.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${nA(f.type)}'.`);let C=l.parse(s[2],2,zo);if(!C)return null;if(!U8(o,C.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${nA(C.type)}'.`);if(f.type.kind!==C.type.kind&&f.type.kind!=="value"&&C.type.kind!=="value")return l.error(`Cannot compare types '${nA(f.type)}' and '${nA(C.type)}'.`);r&&(f.type.kind==="value"&&C.type.kind!=="value"?f=new mp(C.type,[f]):f.type.kind!=="value"&&C.type.kind==="value"&&(C=new mp(f.type,[C])));let x=null;if(s.length===4){if(f.type.kind!=="string"&&C.type.kind!=="string"&&f.type.kind!=="value"&&C.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(x=l.parse(s[3],3,px),!x)return null}return new rL(f,C,x)}evaluate(s){const l=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const f=Lu(l),C=Lu(o);if(f.kind!==C.kind||!(f.kind==="string"||f.kind==="number"))throw new MA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${f.kind}, ${C.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const f=Lu(l),C=Lu(o);if(f.kind!=="string"||C.kind!=="string")return e(s,l,o)}return this.collator?t(s,l,o,this.collator.evaluate(s)):e(s,l,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const dq=jy("==",nq,nL),fq=jy("!=",rq,lq),pq=jy("<",iq,Aq),mq=jy(">",oq,uq),gq=jy("<=",sq,cq),yq=jy(">=",aq,hq);class wx{constructor(e,t,r){this.type=px,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Yo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Yo);if(!s)return null;let l=null;return r.locale&&(l=t.parse(r.locale,1,rs),!l)?null:new wx(i,s,l)}evaluate(e){return new MB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class OB{constructor(e,t,r,i,s){this.type=rs,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Or);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,rs),!s))return null;let l=null;if(i.currency&&(l=t.parse(i.currency,1,rs),!l))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,Or),!o))return null;let f=null;return i["max-fraction-digits"]&&(f=t.parse(i["max-fraction-digits"],1,Or),!f)?null:new OB(r,s,l,o,f)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class IB{constructor(e){this.type=mx,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let f=null;if(o["font-scale"]&&(f=t.parse(o["font-scale"],1,Or),!f))return null;let C=null;if(o["text-font"]&&(C=t.parse(o["text-font"],1,tf(rs)),!C))return null;let x=null;if(o["text-color"]&&(x=t.parse(o["text-color"],1,sm),!x))return null;let B=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!$Y.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(B=t.parse(o["vertical-align"],1,rs),!B)return null}const R=i[i.length-1];R.scale=f,R.font=C,R.textColor=x,R.verticalAlign=B}else{const f=t.parse(e[l],1,zo);if(!f)return null;const C=f.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:f,scale:null,font:null,textColor:null,verticalAlign:null})}}return new IB(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return Lu(i)===A_?new o6("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new o6(lC(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new am(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class TB{constructor(e){this.type=A_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,rs);return r?new TB(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Vm.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class kB{constructor(e){this.type=Or,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${nA(r.type)} instead.`):new kB(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new MA(`Expected value to be of type string or array, but found ${nA(Lu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const lm=8192;function vq(n,e){const t=Cq(n[0]),r=bq(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*lm),Math.round(r*i*lm)]}function PB(n,e){const t=Math.pow(2,e.z),r=(n[0]/lm+e.x)/t,i=(n[1]/lm+e.y)/t;return[_q(r),xq(i)]}function Cq(n){return(180+n)/360}function _q(n){return n*360-180}function bq(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function xq(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function u_(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function EC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Mq(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function wq(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],l=n[1]-t[1];return r*l-s*i===0&&r*s<=0&&i*l<=0}function Sx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return Oq(s,i)===0?!1:!!(z8(n,e,t,r)&&z8(t,r,n,e))}function Sq(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Sx(n,e,r[i],r[i+1]))return!0;return!1}function Wy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(wq(n,i[s],i[s+1]))return t;Mq(n,i[s],i[s+1])&&(r=!r)}return r}function Eq(n,e){for(const t of e)if(Wy(n,t))return!0;return!1}function iL(n,e){for(const t of n)if(!Wy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(Sq(n[t],n[t+1],e))return!1;return!0}function Bq(n,e){for(const t of e)if(iL(n,t))return!0;return!1}function Oq(n,e){return n[0]*e[1]-n[1]*e[0]}function z8(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],f=r[0]-t[0],C=r[1]-t[1],x=i*C-f*s,B=l*C-f*o;return x>0&&B<0||x<0&&B>0}function RB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let l=0;l<n[i].length;l++){const o=vq(n[i][l],t);u_(e,o),s.push(o)}r.push(s)}return r}function oL(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=RB(n[i],e,t);r.push(s)}return r}function sL(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}u_(e,n)}function Iq(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function N8(n,e,t,r){const i=Math.pow(2,r.z)*lm,s=[r.x*lm,r.y*lm],l=[];for(const o of n)for(const f of o){const C=[f.x+s[0],f.y+s[1]];sL(C,e,t,i),l.push(C)}return l}function G8(n,e,t,r){const i=Math.pow(2,r.z)*lm,s=[r.x*lm,r.y*lm],l=[];for(const o of n){const f=[];for(const C of o){const x=[C.x+s[0],C.y+s[1]];u_(e,x),f.push(x)}l.push(f)}if(e[2]-e[0]<=i/2){Iq(e);for(const o of l)for(const f of o)sL(f,e,t,i)}return l}function Tq(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=RB(e.coordinates,r,i),l=N8(n.geometry(),t,r,i);if(!EC(t,r))return!1;for(const o of l)if(!Wy(o,s))return!1}if(e.type==="MultiPolygon"){const s=oL(e.coordinates,r,i),l=N8(n.geometry(),t,r,i);if(!EC(t,r))return!1;for(const o of l)if(!Eq(o,s))return!1}return!0}function kq(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=RB(e.coordinates,r,i),l=G8(n.geometry(),t,r,i);if(!EC(t,r))return!1;for(const o of l)if(!iL(o,s))return!1}if(e.type==="MultiPolygon"){const s=oL(e.coordinates,r,i),l=G8(n.geometry(),t,r,i);if(!EC(t,r))return!1;for(const o of l)if(!Bq(o,s))return!1}return!0}class U1{constructor(e,t){this.type=Yo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(wC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:l,coordinates:o}=s.geometry;l==="Polygon"&&i.push(o),l==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new U1(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new U1(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new U1(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Tq(e,this.geometries);if(e.geometryType()==="LineString")return kq(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class aL{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,l=t[s];if(r(i,l)>=0)break;t[e]=l,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&r(t[o],t[l])<0&&(l=o),r(t[l],s)>=0)break;t[e]=t[l],e=l}t[e]=s}}function Pq(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const l of n){const o=Rq(l);o!==0&&(l.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[l]):i.push(l))}return i&&r.push(i),r}function Rq(n){let e=0;for(let t=0,r=n.length,i=r-1,s,l;t<r;i=t++)s=n[t],l=n[i],e+=(l.x-s.x)*(s.y+l.y);return e}const Dq=6378.137,j8=1/298.257223563,W8=j8*(2-j8),Q8=Math.PI/180;class DB{constructor(e){const t=Q8*Dq*1e3,r=Math.cos(e*Q8),i=1/(1-W8*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-W8)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,l,o;for(let f=0;f<e.length-1;f++){let C=e[f][0],x=e[f][1],B=this.wrap(e[f+1][0]-C)*this.kx,R=(e[f+1][1]-x)*this.ky,P=0;(B!==0||R!==0)&&(P=(this.wrap(t[0]-C)*this.kx*B+(t[1]-x)*this.ky*R)/(B*B+R*R),P>1?(C=e[f+1][0],x=e[f+1][1]):P>0&&(C+=B/this.kx*P,x+=R/this.ky*P)),B=this.wrap(t[0]-C)*this.kx,R=(t[1]-x)*this.ky;const U=B*B+R*R;U<r&&(r=U,i=C,s=x,l=f,o=P)}return{point:[i,s],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const s6=100,a6=50;function lL(n,e){return e[0]-n[0]}function C2(n){return n[1]-n[0]+1}function Wm(n,e){return n[1]>=n[0]&&n[1]<e}function l6(n,e){if(n[0]>n[1])return[null,null];const t=C2(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function A6(n,e){if(!Wm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)u_(t,n[r]);return t}function u6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)u_(e,r);return e}function Y8(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function KB(n,e,t){if(!Y8(n)||!Y8(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function T1(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function FB(n,e,t,r,i){const s=Math.min(T1(n,[t,r],i),T1(e,[t,r],i)),l=Math.min(T1(t,[n,e],i),T1(r,[n,e],i));return Math.min(s,l)}function Kq(n,e,t,r,i){if(!(Wm(e,n.length)&&Wm(r,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const f=n[o],C=n[o+1];for(let x=r[0];x<r[1];++x){const B=t[x],R=t[x+1];if(Sx(f,C,B,R))return 0;l=Math.min(l,FB(f,C,B,R,i))}}return l}function Fq(n,e,t,r,i){if(!(Wm(e,n.length)&&Wm(r,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let f=r[0];f<=r[1];++f)if(l=Math.min(l,i.distance(n[o],t[f])),l===0)return l;return l}function Lq(n,e,t){if(Wy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],l=i[i.length-1];if(s!==l&&(r=Math.min(r,T1(n,[l,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function Uq(n,e,t,r){if(!Wm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(Wy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const l=n[s],o=n[s+1];for(const f of t)for(let C=0,x=f.length,B=x-1;C<x;B=C++){const R=f[B],P=f[C];if(Sx(l,o,R,P))return 0;i=Math.min(i,FB(l,o,R,P,r))}}return i}function q8(n,e){for(const t of n)for(const r of t)if(Wy(r,e,!0))return!0;return!1}function zq(n,e,t,r=1/0){const i=u6(n),s=u6(e);if(r!==1/0&&KB(i,s,t)>=r)return r;if(EC(i,s)){if(q8(n,e))return 0}else if(q8(e,n))return 0;let l=1/0;for(const o of n)for(let f=0,C=o.length,x=C-1;f<C;x=f++){const B=o[x],R=o[f];for(const P of e)for(let U=0,N=P.length,W=N-1;U<N;W=U++){const X=P[W],$=P[U];if(Sx(B,R,X,$))return 0;l=Math.min(l,FB(B,R,X,$,t))}}return l}function $8(n,e,t,r,i,s){if(!s)return;const l=KB(A6(r,s),i,t);l<e&&n.push([l,s,[0,0]])}function hb(n,e,t,r,i,s,l){if(!s||!l)return;const o=KB(A6(r,s),A6(i,l),t);o<e&&n.push([o,s,l])}function _2(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const l=new aL([[0,[0,n.length-1],[0,0]]],lL),o=u6(t);for(;l.length>0;){const f=l.pop();if(f[0]>=s)continue;const C=f[1],x=e?a6:s6;if(C2(C)<=x){if(!Wm(C,n.length))return NaN;if(e){const B=Uq(n,C,t,r);if(isNaN(B)||B===0)return B;s=Math.min(s,B)}else for(let B=C[0];B<=C[1];++B){const R=Lq(n[B],t,r);if(s=Math.min(s,R),s===0)return 0}}else{const B=l6(C,e);$8(l,s,r,n,o,B[0]),$8(l,s,r,n,o,B[1])}}return s}function b2(n,e,t,r,i,s=1/0){let l=Math.min(s,i.distance(n[0],t[0]));if(l===0)return l;const o=new aL([[0,[0,n.length-1],[0,t.length-1]]],lL);for(;o.length>0;){const f=o.pop();if(f[0]>=l)continue;const C=f[1],x=f[2],B=e?a6:s6,R=r?a6:s6;if(C2(C)<=B&&C2(x)<=R){if(!Wm(C,n.length)&&Wm(x,t.length))return NaN;let P;if(e&&r)P=Kq(n,C,t,x,i),l=Math.min(l,P);else if(e&&!r){const U=n.slice(C[0],C[1]+1);for(let N=x[0];N<=x[1];++N)if(P=T1(t[N],U,i),l=Math.min(l,P),l===0)return l}else if(!e&&r){const U=t.slice(x[0],x[1]+1);for(let N=C[0];N<=C[1];++N)if(P=T1(n[N],U,i),l=Math.min(l,P),l===0)return l}else P=Fq(n,C,t,x,i),l=Math.min(l,P)}else{const P=l6(C,e),U=l6(x,r);hb(o,l,i,n,t,P[0],U[0]),hb(o,l,i,n,t,P[0],U[1]),hb(o,l,i,n,t,P[1],U[0]),hb(o,l,i,n,t,P[1],U[1])}}return l}function Nq(n,e){const t=n.geometry(),r=t.flat().map(l=>PB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new DB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,b2(r,!1,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,b2(r,!1,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,_2(r,!1,l.coordinates,i,s));break}if(s===0)return s}return s}function Gq(n,e){const t=n.geometry(),r=t.flat().map(l=>PB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new DB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,b2(r,!0,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,b2(r,!0,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,_2(r,!0,l.coordinates,i,s));break}if(s===0)return s}return s}function jq(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=Pq(t).map(l=>l.map(o=>o.map(f=>PB([f.x,f.y],n.canonical)))),i=new DB(r[0][0][0][1]);let s=1/0;for(const l of e)for(const o of r){switch(l.type){case"Point":s=Math.min(s,_2([l.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,_2(l.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,zq(o,l.coordinates,i,s));break}if(s===0)return s}return s}function p4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class z1{constructor(e,t){this.type=Or,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(wC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new z1(r,r.features.map(i=>p4(i.geometry)).flat());if(r.type==="Feature")return new z1(r,p4(r.geometry));if("type"in r&&"coordinates"in r)return new z1(r,p4(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Nq(e,this.geometries);if(e.geometryType()==="LineString")return Gq(e,this.geometries);if(e.geometryType()==="Polygon")return jq(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class c_{constructor(e){this.type=zo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return r==null?t.error("Global state property must be defined."):typeof r!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new c_(r)}evaluate(e){var t;const r=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!r||Object.keys(r).length===0?null:aC(r,this.key)}eachChild(){}outputDefined(){return!1}}const Ex={"==":dq,"!=":fq,">":mq,"<":pq,">=":yq,"<=":gq,array:mp,at:wB,boolean:mp,case:BB,coalesce:SC,collator:wx,format:IB,image:TB,in:SB,"index-of":y2,interpolate:jf,"interpolate-hcl":jf,"interpolate-lab":jf,length:kB,let:_x,literal:Iy,match:EB,number:mp,"number-format":OB,object:mp,slice:v2,step:Mx,string:mp,"to-boolean":k0,"to-color":k0,"to-number":k0,"to-string":k0,var:bx,within:U1,distance:z1,"global-state":c_};class rf{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=rf.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,l=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=l.filter(([C])=>!Array.isArray(C)||C.length===e.length-1);let f=null;for(const[C,x]of o){f=new Cx(t.registry,x2,t.path,null,t.scope);const B=[];let R=!1;for(let P=1;P<e.length;P++){const U=e[P],N=Array.isArray(C)?C[P-1]:C.type,W=f.parse(U,1+B.length,N);if(!W){R=!0;break}B.push(W)}if(!R){if(Array.isArray(C)&&C.length!==B.length){f.error(`Expected ${C.length} arguments, but found ${B.length} instead.`);continue}for(let P=0;P<B.length;P++){const U=Array.isArray(C)?C[P]:C.type,N=B[P];f.concat(P+1).checkSubtype(U,N.type)}if(f.errors.length===0)return new rf(r,s,x,B)}}if(o.length===1)t.errors.push(...f.errors);else{const x=(o.length?o:l).map(([R])=>Qq(R)).join(" | "),B=[];for(let R=1;R<e.length;R++){const P=t.parse(e[R],1+B.length);if(!P)return null;B.push(nA(P.type))}t.error(`Expected arguments of type ${x}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){rf.definitions=t;for(const r in t)e[r]=rf}}function V8(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,l=eL(e,t,r,s);if(l)throw new MA(l);return new Fa(e/255,t/255,r/255,s,!1)}function H8(n,e){return n in e}function m4(n,e){const t=e[n];return typeof t>"u"?null:t}function Wq(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function p1(n){return{type:n}}rf.register(Ex,{error:[KY,[rs],(n,[e])=>{throw new MA(e.evaluate(n))}],typeof:[rs,[zo],(n,[e])=>nA(Lu(e.evaluate(n)))],"to-rgba":[tf(Or,4),[sm],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[sm,[Or,Or,Or],V8],rgba:[sm,[Or,Or,Or,Or],V8],has:{type:Yo,overloads:[[[rs],(n,[e])=>H8(e.evaluate(n),n.properties())],[[rs,F1],(n,[e,t])=>H8(e.evaluate(n),t.evaluate(n))]]},get:{type:zo,overloads:[[[rs],(n,[e])=>m4(e.evaluate(n),n.properties())],[[rs,F1],(n,[e,t])=>m4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[zo,[rs],(n,[e])=>m4(e.evaluate(n),n.featureState||{})],properties:[F1,[],n=>n.properties()],"geometry-type":[rs,[],n=>n.geometryType()],id:[zo,[],n=>n.id()],zoom:[Or,[],n=>n.globals.zoom],"heatmap-density":[Or,[],n=>n.globals.heatmapDensity||0],"line-progress":[Or,[],n=>n.globals.lineProgress||0],accumulated:[zo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Or,p1(Or),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Or,p1(Or),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Or,overloads:[[[Or,Or],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Or],(n,[e])=>-e.evaluate(n)]]},"/":[Or,[Or,Or],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Or,[Or,Or],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Or,[],()=>Math.LN2],pi:[Or,[],()=>Math.PI],e:[Or,[],()=>Math.E],"^":[Or,[Or,Or],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Or,[Or],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Or,[Or],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Or,[Or],(n,[e])=>Math.log(e.evaluate(n))],log2:[Or,[Or],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Or,[Or],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Or,[Or],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Or,[Or],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Or,[Or],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Or,[Or],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Or,[Or],(n,[e])=>Math.atan(e.evaluate(n))],min:[Or,p1(Or),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Or,p1(Or),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Or,[Or],(n,[e])=>Math.abs(e.evaluate(n))],round:[Or,[Or],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Or,[Or],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Or,[Or],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Yo,[rs,zo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Yo,[zo],(n,[e])=>n.id()===e.value],"filter-type-==":[Yo,[rs],(n,[e])=>n.geometryType()===e.value],"filter-<":[Yo,[rs,zo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Yo,[zo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Yo,[rs,zo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Yo,[zo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Yo,[rs,zo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Yo,[zo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Yo,[rs,zo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Yo,[zo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Yo,[zo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Yo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Yo,[tf(rs)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Yo,[tf(zo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Yo,[rs,tf(zo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Yo,[rs,tf(zo)],(n,[e,t])=>Wq(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Yo,overloads:[[[Yo,Yo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[p1(Yo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Yo,overloads:[[[Yo,Yo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[p1(Yo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Yo,[Yo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Yo,[rs],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[rs,[rs],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[rs,[rs],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[rs,p1(zo),(n,e)=>e.map(t=>lC(t.evaluate(n))).join("")],"resolved-locale":[rs,[px],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Qq(n){return Array.isArray(n)?`(${n.map(nA).join(", ")})`:`(${nA(n.type)}...)`}function x2(n){if(n instanceof bx)return x2(n.boundExpression);if(n instanceof rf&&n.name==="error")return!1;if(n instanceof wx)return!1;if(n instanceof U1)return!1;if(n instanceof z1)return!1;if(n instanceof c_)return!1;const e=n instanceof k0||n instanceof mp;let t=!0;return n.eachChild(r=>{e?t=t&&x2(r):t=t&&r instanceof Iy}),t?Bx(n)&&Ox(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Bx(n){if(n instanceof rf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof U1||n instanceof z1)return!1;let e=!0;return n.eachChild(t=>{e&&!Bx(t)&&(e=!1)}),e}function BC(n){if(n instanceof rf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!BC(t)&&(e=!1)}),e}function Ox(n,e){if(n instanceof rf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!Ox(r,e)&&(t=!1)}),t}function c6(n){return{result:"success",value:n}}function oy(n){return{result:"error",value:n}}function M2(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function AL(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function LB(n){return!!n.expression&&n.expression.interpolated}function is(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Qy(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Lu(n)===F1}function Yq(n){return n}function qq(n){switch(n.type){case"color":return Fa.parse;case"padding":return Qh.parse;case"numberArray":return Yh.parse;case"colorArray":return Jc.parse;default:return null}}function $q(n){switch(n){case"exponential":return uL;case"interval":return Hq;case"categorical":return Vq;case"identity":return Zq;default:throw new Error(`Unknown function type "${n}"`)}}function UB(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",r=t||n.property!==void 0,i=t||!r,s=n.type||(LB(e)?"exponential":"interval"),l=qq(e);if(l&&(n=By({},n),n.stops&&(n.stops=n.stops.map(x=>[x[0],l(x[1])])),n.default?n.default=l(n.default):n.default=l(e.default)),n.colorSpace&&!qY(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const o=$q(s);let f,C;if(s==="categorical"){f=Object.create(null);for(const x of n.stops)f[x[0]]=x[1];C=typeof n.stops[0][0]}if(t){const x={},B=[];for(let U=0;U<n.stops.length;U++){const N=n.stops[U],W=N[0].zoom;x[W]===void 0&&(x[W]={zoom:W,type:n.type,property:n.property,default:n.default,stops:[]},B.push(W)),x[W].stops.push([N[0].value,N[1]])}const R=[];for(const U of B)R.push([x[U].zoom,UB(x[U],e)]);const P={name:"linear"};return{kind:"composite",interpolationType:P,interpolationFactor:jf.interpolationFactor.bind(void 0,P),zoomStops:R.map(U=>U[0]),evaluate({zoom:U},N){return uL({stops:R,base:n.base},e,U).evaluate(U,N)}}}else if(i){const x=s==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:jf.interpolationFactor.bind(void 0,x),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>o(n,e,B,f,C)}}else return{kind:"source",evaluate(x,B){const R=B&&B.properties?B.properties[n.property]:void 0;return R===void 0?h_(n.default,e.default):o(n,e,R,f,C)}}}function h_(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function Vq(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return h_(s,n.default,e.default)}function Hq(n,e,t){if(is(t)!=="number")return h_(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=xx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function uL(n,e,t){const r=n.base!==void 0?n.base:1;if(is(t)!=="number")return h_(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=xx(n.stops.map(x=>x[0]),t),l=Xq(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],f=n.stops[s+1][1],C=tq[e.type]||Yq;return typeof o.evaluate=="function"?{evaluate(...x){const B=o.evaluate.apply(void 0,x),R=f.evaluate.apply(void 0,x);if(!(B===void 0||R===void 0))return C(B,R,l,n.colorSpace)}}:C(o,f,l,n.colorSpace)}function Zq(n,e,t){switch(e.type){case"color":t=Fa.parse(t);break;case"formatted":t=am.fromString(t.toString());break;case"resolvedImage":t=Vm.fromString(t.toString());break;case"padding":t=Qh.parse(t);break;case"colorArray":t=Jc.parse(t);break;case"numberArray":t=Yh.parse(t);break;default:is(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return h_(t,n.default,e.default)}function Xq(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}class cL{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new tL,this._defaultValue=t?n$(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new MA(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function Yy(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Ex}function Ix(n,e){const t=new Cx(Ex,x2,[],e?t$(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?c6(new cL(r,e)):oy(t.errors)}class h6{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!BC(t.expression),this.globalStateRefs=Px(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}}class d6{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!BC(t.expression),this.globalStateRefs=Px(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}interpolationFactor(e,t,r){return this.interpolationType?jf.interpolationFactor(this.interpolationType,e,t,r):0}}function Jq(n){return n._styleExpression!==void 0}function Tx(n,e){const t=Ix(n,e);if(t.result==="error")return t;const r=t.value.expression,i=Bx(r);if(!i&&!M2(e))return oy([new em("","data expressions not supported")]);const s=Ox(r,["zoom"]);if(!s&&!AL(e))return oy([new em("","zoom expressions not supported")]);const l=e2(r);if(!l&&!s)return oy([new em("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof em)return oy([l]);if(l instanceof jf&&!LB(e))return oy([new em("",'"interpolate" expressions cannot be used with this property')]);if(!l)return c6(i?new h6("constant",t.value):new h6("source",t.value));const o=l instanceof jf?l.interpolation:void 0;return c6(i?new d6("camera",t.value,l.labels,o):new d6("composite",t.value,l.labels,o))}class kx{constructor(e,t){this._parameters=e,this._specification=t,By(this,UB(this._parameters,this._specification))}static deserialize(e){return new kx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function e$(n,e){if(Qy(n))return new kx(n,e);if(Yy(n)){const t=Tx(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Fa.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Qh.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?t=Yh.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?t=Jc.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Gf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Lf.parse(n)),{globalStateRefs:new Set,kind:"constant",evaluate:()=>t}}}function e2(n){let e=null;if(n instanceof _x)e=e2(n.result);else if(n instanceof SC){for(const t of n.args)if(e=e2(t),e)break}else(n instanceof Mx||n instanceof jf)&&n.input instanceof rf&&n.input.name==="zoom"&&(e=n);return e instanceof em||n.eachChild(t=>{const r=e2(t);r instanceof em?e=r:!e&&r?e=new em("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new em("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Px(n,e=new Set){return n instanceof c_&&e.add(n.key),n.eachChild(t=>{Px(t,e)}),e}function t$(n){const e={color:sm,string:rs,number:Or,enum:rs,boolean:Yo,formatted:mx,padding:gx,numberArray:yx,colorArray:xC,projectionDefinition:fx,resolvedImage:A_,variableAnchorOffsetCollection:vx};return n.type==="array"?tf(e[n.value]||zo,n.length):e[n.type]}function n$(n){if(n.type==="color"&&Qy(n.default))return new Fa(0,0,0,0);switch(n.type){case"color":return Fa.parse(n.default)||null;case"padding":return Qh.parse(n.default)||null;case"numberArray":return Yh.parse(n.default)||null;case"colorArray":return Jc.parse(n.default)||null;case"variableAnchorOffsetCollection":return Gf.parse(n.default)||null;case"projectionDefinition":return Lf.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function d_(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!d_(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const r$={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function i$(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};d_(n)||(n=w2(n));const e=Ix(n,r$);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=hL(n);return{filter:(r,i,s)=>e.value.evaluate(r,i,{},s),needGeometry:t,getGlobalStateRefs:()=>Px(e.value.expression)}}}function o$(n,e){return n<e?-1:n>e?1:0}function hL(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(hL(n[e]))return!0;return!1}function w2(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?g4(n[1],n[2],"=="):e==="!="?db(g4(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?g4(n[1],n[2],e):e==="any"?s$(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(w2)):e==="none"?["all"].concat(n.slice(1).map(w2).map(db)):e==="in"?Z8(n[1],n.slice(2)):e==="!in"?db(Z8(n[1],n.slice(2))):e==="has"?X8(n[1]):e==="!has"?db(X8(n[1])):!0}function g4(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function s$(n){return["any"].concat(n.map(w2))}function Z8(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(o$)]]:["filter-in-small",n,["literal",e]]}}function X8(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function db(n){return["!",n]}function AC(n,e={}){if(d_(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return l$(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(l=>{const o={},f=AC(l,o),C=a$(o);return C===!0?f:["case",C,f,!1]})]}case"all":{const[,...i]=t,s=i.map(l=>AC(l,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",AC(["any",...i],{})]}case"in":{const[,i,...s]=t;return J8(i,s)}case"!in":{const[,i,...s]=t;return J8(i,s,!0)}case"has":return e7(t[1]);case"!has":return["!",e7(t[1])];default:return!0}}function a$(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function l$(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function J8(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const l of e)if(typeof l!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const l=e.sort().filter((o,f)=>f===0||e[f-1]!==o);return["match",r,l,!t,t]}return t?["all",...e.map(l=>["!=",r,l])]:["any",...e.map(l=>["==",r,l])]}function e7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function OC(n){return typeof n=="object"?["literal",n]:n}function zB(n,e){let t=n.stops;if(!t)return A$(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(l=>!i&&e.tokens&&typeof l[1]=="string"?[l[0],dL(l[1])]:[l[0],OC(l[1])]),r?u$(n,e,t):s?h$(n,e,t):f6(n,e,t)}function A$(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,OC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function NB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function u$(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const f=t[o],C=f[0].zoom;r[C]===void 0&&(r[C]={zoom:C,type:n.type,property:n.property,default:n.default},i[C]=[],s.push(C)),i[C].push([f[0].value,f[1]])}if(jB({},e)==="exponential"){const o=[NB(n),["linear"],["zoom"]];for(const f of s){const C=f6(r[f],e,i[f]);vy(o,f,C,!1)}return o}else{const o=["step",["zoom"]];for(const f of s){const C=f6(r[f],e,i[f]);vy(o,f,C,!0)}return GB(o),o}}function c$(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function t7(n,e){const t=OC(c$(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function f6(n,e,t){const r=jB(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const l of t)s.push(["==",i,l[0]],l[1]);return s.push(t7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const l of t)vy(s,l[0],l[1],!1);return s.push(t7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const l of t)vy(s,l[0],l[1],!0);return GB(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,OC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,l=[NB(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)vy(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",i],"number"],l,OC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function h$(n,e,t,r=["zoom"]){const i=jB(n,e);let s,l=!1;if(i==="interval")s=["step",r],l=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[NB(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)vy(s,o[0],o[1],l);return GB(s),s}function GB(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function vy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function jB(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function dL(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function d$(n){for(let e=0;e<ws.layout.length;e++)for(const t in ws[ws.layout[e]])if(t===n)return ws[ws.layout[e]][t];for(let e=0;e<ws.paint.length;e++)for(const t in ws[ws.paint[e]])if(t===n)return ws[ws.paint[e]][t];return null}function f$(n,e){for(const t in n.sources)e(n.sources[t])}function uC(n,e){for(const t of n.layers)e(t)}function WB(n,e,t){function r(i,s){const l=i[s];l&&Object.keys(l).forEach(o=>{t({path:[i.id,s,o],key:o,value:l[o],reference:d$(o),set(f){l[o]=f}})})}uC(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function fL(n){const e=n.key,t=n.value;return t?[new wr(e,t,"constants have been deprecated as of v8")]:[]}function ZA(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Y1(n){if(Array.isArray(n))return n.map(Y1);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Y1(n[t]);return e}return ZA(n)}function Uf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,l=n.styleSpec,o=n.validateSpec;let f=[];const C=is(t);if(C!=="object")return[new wr(e,t,`object expected, ${C} found`)];for(const x in t){const B=x.split(".")[0],R=aC(r,B)||r["*"];let P;if(aC(i,B))P=i[B];else if(aC(r,B))P=o;else if(i["*"])P=i["*"];else if(r["*"])P=o;else{f.push(new wr(e,t[x],`unknown property "${x}"`));continue}f=f.concat(P({key:(e&&`${e}.`)+x,value:t[x],valueSpec:R,style:s,styleSpec:l,object:t,objectKey:x,validateSpec:o},t))}for(const x in r)i[x]||r[x].required&&r[x].default===void 0&&t[x]===void 0&&f.push(new wr(e,t,`missing required property "${x}"`));return f}function QB(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.key,o=n.arrayElementValidator||r;if(is(e)!=="array")return[new wr(l,e,`array expected, ${is(e)} found`)];if(t.length&&e.length!==t.length)return[new wr(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new wr(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let f={type:t.value,values:t.values};s.$version<7&&(f.function=t.function),is(t.value)==="object"&&(f=t.value);let C=[];for(let x=0;x<e.length;x++)C=C.concat(o({array:e,arrayIndex:x,value:e[x],valueSpec:f,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${l}[${x}]`}));return C}function Rx(n){const e=n.key,t=n.value,r=n.valueSpec;let i=is(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new wr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new wr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new wr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function pL(n){const e=n.valueSpec,t=ZA(n.value.type);let r,i={},s,l;const o=t!=="categorical"&&n.value.property===void 0,f=!o,C=is(n.value.stops)==="array"&&is(n.value.stops[0])==="array"&&is(n.value.stops[0][0])==="object",x=Uf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:U}});return t==="identity"&&o&&x.push(new wr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&x.push(new wr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!LB(n.valueSpec)&&x.push(new wr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(f&&!M2(n.valueSpec)?x.push(new wr(n.key,n.value,"property functions not supported")):o&&!AL(n.valueSpec)&&x.push(new wr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||C)&&n.value.property===void 0&&x.push(new wr(n.key,n.value,'"property" property is required')),x;function B(N){if(t==="identity")return[new wr(N.key,N.value,'identity function may not have a "stops" property')];let W=[];const X=N.value;return W=W.concat(QB({key:N.key,value:X,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:R})),is(X)==="array"&&X.length===0&&W.push(new wr(N.key,X,"array must have at least one stop")),W}function R(N){let W=[];const X=N.value,$=N.key;if(is(X)!=="array")return[new wr($,X,`array expected, ${is(X)} found`)];if(X.length!==2)return[new wr($,X,`array length 2 expected, length ${X.length} found`)];if(C){if(is(X[0])!=="object")return[new wr($,X,`object expected, ${is(X[0])} found`)];if(X[0].zoom===void 0)return[new wr($,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new wr($,X,"object stop key must have value")];if(l&&l>ZA(X[0].zoom))return[new wr($,X[0].zoom,"stop zoom values must appear in ascending order")];ZA(X[0].zoom)!==l&&(l=ZA(X[0].zoom),s=void 0,i={}),W=W.concat(Uf({key:`${$}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:Rx,value:P}}))}else W=W.concat(P({key:`${$}[0]`,value:X[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},X));return Yy(Y1(X[1]))?W.concat([new wr(`${$}[1]`,X[1],"expressions are not allowed in function stops.")]):W.concat(N.validateSpec({key:`${$}[1]`,value:X[1],valueSpec:e,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function P(N,W){const X=is(N.value),$=ZA(N.value),re=N.value!==null?N.value:W;if(!r)r=X;else if(X!==r)return[new wr(N.key,re,`${X} stop domain type must match previous stop domain type ${r}`)];if(X!=="number"&&X!=="string"&&X!=="boolean")return[new wr(N.key,re,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&t!=="categorical"){let te=`number expected, ${X} found`;return M2(e)&&t===void 0&&(te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wr(N.key,re,te)]}return t==="categorical"&&X==="number"&&(!isFinite($)||Math.floor($)!==$)?[new wr(N.key,re,`integer expected, found ${$}`)]:t!=="categorical"&&X==="number"&&s!==void 0&&$<s?[new wr(N.key,re,"stop domain values must appear in ascending order")]:(s=$,t==="categorical"&&$ in i?[new wr(N.key,re,"stop domain values must be unique")]:(i[$]=!0,[]))}function U(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:e,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}function Ty(n){const e=(n.expressionContext==="property"?Tx:Ix)(Y1(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new wr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new wr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!BC(t))return[new wr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!BC(t))return[new wr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Ox(t,["zoom","feature-state"]))return[new wr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Bx(t))return[new wr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function p$(n){const e=n.value,t=n.key,r=is(e);return r!=="boolean"?[new wr(t,e,`boolean expected, ${r} found`)]:[]}function p6(n){const e=n.key,t=n.value,r=is(t);return r!=="string"?[new wr(e,t,`color expected, ${r} found`)]:Fa.parse(String(t))?[]:[new wr(e,t,`color expected, "${t}" found`)]}function IC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(ZA(t))===-1&&i.push(new wr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(ZA(t))===-1&&i.push(new wr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function YB(n){return d_(Y1(n.value))?Ty(By({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mL(n)}function mL(n){const e=n.value,t=n.key;if(is(e)!=="array")return[new wr(t,e,`array expected, ${is(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new wr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(IC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),ZA(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ZA(e[1])==="$type"&&s.push(new wr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new wr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=is(e[1]),i!=="string"&&s.push(new wr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let l=2;l<e.length;l++)i=is(e[l]),ZA(e[1])==="$type"?s=s.concat(IC({key:`${t}[${l}]`,value:e[l],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new wr(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)s=s.concat(mL({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=is(e[1]),e.length!==2?s.push(new wr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new wr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function gL(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.value,o=n.objectKey,f=s[`${e}_${n.layerType}`];if(!f)return[];const C=o.match(/^(.*)-transition$/);if(e==="paint"&&C&&f[C[1]]&&f[C[1]].transition)return r({key:t,value:l,valueSpec:s.transition,style:i,styleSpec:s});const x=n.valueSpec||f[o];if(!x)return[new wr(t,l,`unknown property "${o}"`)];let B;if(is(l)==="string"&&M2(x)&&!x.tokens&&(B=/^{([^}]+)}$/.exec(l)))return[new wr(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const R=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&R.push(new wr(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Qy(Y1(l))&&ZA(l.type)==="identity"&&R.push(new wr(t,l,'"text-font" does not support identity functions'))),R.concat(r({key:n.key,value:l,valueSpec:x,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function yL(n){return gL(n,"paint")}function vL(n){return gL(n,"layout")}function CL(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;if(is(t)!=="object")return[new wr(r,t,`object expected, ${is(t)} found`)];!t.type&&!t.ref&&e.push(new wr(r,t,'either "type" or "ref" is required'));let l=ZA(t.type);const o=ZA(t.ref);if(t.id){const f=ZA(t.id);for(let C=0;C<n.arrayIndex;C++){const x=i.layers[C];ZA(x.id)===f&&e.push(new wr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${x.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(C=>{C in t&&e.push(new wr(r,t[C],`"${C}" is prohibited for ref layers`))});let f;i.layers.forEach(C=>{ZA(C.id)===o&&(f=C)}),f?f.ref?e.push(new wr(r,t.ref,"ref cannot reference another ref layer")):l=ZA(f.type):e.push(new wr(r,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new wr(r,t,'missing required property "source"'));else{const f=i.sources&&i.sources[t.source],C=f&&ZA(f.type);f?C==="vector"&&l==="raster"?e.push(new wr(r,t.source,`layer "${t.id}" requires a raster source`)):C!=="raster-dem"&&l==="hillshade"?e.push(new wr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):C==="raster"&&l!=="raster"?e.push(new wr(r,t.source,`layer "${t.id}" requires a vector source`)):C==="vector"&&!t["source-layer"]?e.push(new wr(r,t,`layer "${t.id}" must specify a "source-layer"`)):C==="raster-dem"&&l!=="hillshade"?e.push(new wr(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(C!=="geojson"||!f.lineMetrics)&&e.push(new wr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new wr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Uf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:YB,layout(f){return Uf({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(C){return vL(By({layerType:l},C))}}})},paint(f){return Uf({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(C){return yL(By({layerType:l},C))}}})}}})),e}function q1(n){const e=n.value,t=n.key,r=is(e);return r!=="string"?[new wr(t,e,`string expected, ${r} found`)]:[]}function m$(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,l=n.style;let o=[];const f=is(r);if(r===void 0)return o;if(f!=="object")return o.push(new wr("source_raster_dem",r,`object expected, ${f} found`)),o;const x=ZA(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],R=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const P in r)!x&&B.includes(P)?o.push(new wr(P,r[P],`In "${t}": "${P}" is only valid when "encoding" is set to "custom". ${R} encoding found`)):s[P]?o=o.concat(n.validateSpec({key:P,value:r[P],valueSpec:s[P],validateSpec:n.validateSpec,style:l,styleSpec:i})):o.push(new wr(P,r[P],`unknown property "${P}"`));return o}const n7={promoteId:g$};function _L(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new wr(t,e,'"type" is required')];const l=ZA(e.type);let o;switch(l){case"vector":case"raster":return o=Uf({key:t,value:e,valueSpec:r[`source_${l.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:n7,validateSpec:s}),o;case"raster-dem":return o=m$({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=Uf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:n7}),e.cluster)for(const f in e.clusterProperties){const[C,x]=e.clusterProperties[f],B=typeof C=="string"?[C,["accumulated"],["get",f]]:C;o.push(...Ty({key:`${t}.${f}.map`,value:x,expressionContext:"cluster-map"})),o.push(...Ty({key:`${t}.${f}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return o;case"video":return Uf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return Uf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new wr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return IC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function g$({key:n,value:e}){if(is(e)==="string")return q1({key:n,value:e});{const t=[];for(const r in e)t.push(...q1({key:`${n}.${r}`,value:e[r]}));return t}}function bL(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const l=is(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new wr("light",e,`object expected, ${l} found`)]),s;for(const o in e){const f=o.match(/^(.*)-transition$/);f&&r[f[1]]&&r[f[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new wr(o,e[o],`unknown property "${o}"`)])}return s}function xL(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=is(e);if(e===void 0)return[];if(s!=="object")return[new wr("sky",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new wr(o,e[o],`unknown property "${o}"`)]);return l}function ML(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const l=is(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new wr("terrain",e,`object expected, ${l} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new wr(o,e[o],`unknown property "${o}"`)]);return s}function y$(n){return q1(n).length===0?[]:Ty(n)}function v$(n){return q1(n).length===0?[]:Ty(n)}function C$(n){const e=n.key,t=n.value;if(is(t)==="array"){if(t.length<1||t.length>4)return[new wr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return Rx({key:e,value:t,valueSpec:{}})}function _$(n){const e=n.key,t=n.value;if(is(t)==="array"){const i={type:"number"};if(t.length<1)return[new wr(e,t,"array length at least 1 expected, length 0 found")];let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return Rx({key:e,value:t,valueSpec:{}})}function b$(n){const e=n.key,t=n.value;if(is(t)==="array"){if(t.length<1)return[new wr(e,t,"array length at least 1 expected, length 0 found")];let i=[];for(let s=0;s<t.length;s++)i=i.concat(p6({key:`${e}[${s}]`,value:t[s]}));return i}else return p6({key:e,value:t})}function x$(n){const e=n.key,t=n.value,r=is(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new wr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let l=0;l<t.length;l+=2)s=s.concat(IC({key:`${e}[${l}]`,value:t[l],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(QB({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function wL(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const l in t){t[l].id&&i.includes(t[l].id)&&e.push(new wr(r,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),i.push(t[l].id),t[l].url&&s.includes(t[l].url)&&e.push(new wr(r,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),s.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Uf({key:`${r}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return q1({key:r,value:t})}function M$(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=is(e);if(e===void 0)return[];if(s!=="object")return[new wr("projection",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new wr(o,e[o],`unknown property "${o}"`)]);return l}function w$(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=is(t);return r==="array"&&!E$(t)&&!S$(t)?[new wr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new wr(e,t,`projection expected, invalid type "${r}" found`)]}function S$(n){return!!["interpolate","step","literal"].includes(n[0])}function E$(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function B$(n){return!!n&&n.constructor===Object}function SL(n){return B$(n.value)?[]:[new wr(n.key,n.value,`object expected, ${is(n.value)} found`)]}const r7={"*"(){return[]},array:QB,boolean:p$,number:Rx,color:p6,constants:fL,enum:IC,filter:YB,function:pL,layer:CL,object:Uf,source:_L,light:bL,sky:xL,terrain:ML,projection:M$,projectionDefinition:w$,string:q1,formatted:y$,resolvedImage:v$,padding:C$,numberArray:_$,colorArray:b$,variableAnchorOffsetCollection:x$,sprite:wL,state:SL};function S2(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=S2,t.expression&&Qy(ZA(e))?pL(n):t.expression&&Yy(Y1(e))?Ty(n):t.type&&r7[t.type]?r7[t.type](n):Uf(By({},n,{valueSpec:t.type?r[t.type]:t}))}function EL(n){const e=n.value,t=n.key,r=q1(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new wr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new wr(t,e,'"glyphs" url must include a "{range}" token'))),r}function lf(n,e=ws){let t=[];return t=t.concat(S2({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:S2,objectElementValidators:{glyphs:EL,"*"(){return[]}}})),n.constants&&(t=t.concat(fL({key:"constants",value:n.constants}))),BL(t)}lf.source=Bp(Ep(_L));lf.sprite=Bp(Ep(wL));lf.glyphs=Bp(Ep(EL));lf.light=Bp(Ep(bL));lf.sky=Bp(Ep(xL));lf.terrain=Bp(Ep(ML));lf.state=Bp(Ep(SL));lf.layer=Bp(Ep(CL));lf.filter=Bp(Ep(YB));lf.paintProperty=Bp(Ep(yL));lf.layoutProperty=Bp(Ep(vL));function Ep(n){return function(e){return n({...e,validateSpec:S2})}}function BL(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function Bp(n){return function(...e){return BL(n.apply(this,e))}}const O$=/("(?:[^\\"]|\\.)*")|[:,]/g;function I$(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,f){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,i);if(C===void 0)return C;const x=r-o.length-f;if(C.length<=x){const B=C.replace(O$,(R,P)=>P||`${R} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(C),i=void 0),typeof l=="object"&&l!==null){const B=o+t,R=[];let P=0,U,N;if(Array.isArray(l)){U="[",N="]";const{length:W}=l;for(;P<W;P++)R.push(s(l[P],B,P===W-1?0:1)||"null")}else{U="{",N="}";const W=Object.keys(l),{length:X}=W;for(;P<X;P++){const $=W[P],re=`${JSON.stringify($)}: `,te=s(l[$],B,re.length+(P===X-1?0:1));te!==void 0&&R.push(re+te)}}if(R.length>0)return[U,t+R.join(`,
${B}`),N].join(`
${o}`)}return C}(n,"",0)}function i7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function OL(n,e=2){return n=i7(n,ws.$root),n.layers&&(n.layers=n.layers.map(t=>i7(t,ws.layer))),I$(n,{indent:e})}function y4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function o7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function m6(n,e){return typeof e=="string"&&e[0]==="@"?m6(n,n.constants[e]):e}function T$(n){return Array.isArray(n.stops)}function Sv(n,e,t){n[t]=n[e],delete n[e]}function k$(n){n.version=8,f$(n,i=>{i.type==="video"&&i.url!==void 0&&Sv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),uC(n,i=>{y4(i,s=>{s["symbol-min-distance"]!==void 0&&Sv(s,"symbol-min-distance","symbol-spacing")}),o7(i,s=>{s["background-image"]!==void 0&&Sv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&Sv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&Sv(s,"fill-image","fill-pattern")})}),WB(n,{paint:!0,layout:!0},i=>{const s=m6(n,i.value);T$(s)&&s.stops.forEach(l=>{l[1]=m6(n,l[1])}),i.set(s)}),delete n.constants,uC(n,i=>{y4(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),o7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(l=>{l[1]=s(l[1])}),i;throw new Error("unexpected font value")}uC(n,i=>{y4(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function P$(n){const e=[];return uC(n,t=>{t.filter&&(t.filter=AC(t.filter))}),WB(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{Yy(r)||(typeof r=="object"&&!Array.isArray(r)?(s(zB(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(dL(r)))}),n}function R$(n){return JSON.parse(D$(JSON.stringify(n)))}function D$(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,l,o]=r.slice(1);return[s,l]=[s,l].map(f=>f.endsWith("%")?f:`${parseFloat(f)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,l,o].filter(Boolean).join(",")})"`}return e})}function K$(n){let e=!1;if(n.version===7&&(n=k$(n),e=!0),n.version===8&&(e=!!P$(n),e=!0),WB(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(R$(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const F$=ws,L$={StyleExpression:cL,StylePropertyFunction:kx,ZoomConstantExpression:h6,ZoomDependentExpression:d6,createExpression:Ix,createPropertyExpression:Tx,isExpression:Yy,isExpressionFilter:d_,isZoomExpression:Jq,normalizePropertyExpression:e$},U$={convertFunction:zB,createFunction:UB,isFunction:Qy};var Dx=Ax();const z$=Gl(Dx);var t2={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
 */var N$=t2.exports,s7;function G$(){return s7||(s7=1,function(n,e){(function(t,r){n.exports=r()})(N$,function(){var t={},r={};function i(l,o,f){if(r[l]=f,l==="index"){var C="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(t,x),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),t}}i("shared",["exports"],function(l){function o(d,A,h,y){return new(h||(h=Promise))(function(w,k){function F(ie){try{Z(y.next(ie))}catch(ue){k(ue)}}function j(ie){try{Z(y.throw(ie))}catch(ue){k(ue)}}function Z(ie){var ue;ie.done?w(ie.value):(ue=ie.value,ue instanceof h?ue:new h(function(ge){ge(ue)})).then(F,j)}Z((y=y.apply(d,A||[])).next())})}function f(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var C,x;function B(){if(x)return C;function d(A,h){this.x=A,this.y=h}return x=1,C=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,h){return this.clone()._rotateAround(A,h)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var h=A.x-this.x,y=A.y-this.y;return h*h+y*y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,h){return Math.atan2(this.x*h-this.y*A,this.x*A+this.y*h)},_matMult:function(A){var h=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=h,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var h=Math.cos(A),y=Math.sin(A),w=y*this.x+h*this.y;return this.x=h*this.x-y*this.y,this.y=w,this},_rotateAround:function(A,h){var y=Math.cos(A),w=Math.sin(A),k=h.y+w*(this.x-h.x)+y*(this.y-h.y);return this.x=h.x+y*(this.x-h.x)-w*(this.y-h.y),this.y=k,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(A){return A instanceof d?A:Array.isArray(A)?new d(A[0],A[1]):A},C}typeof SuppressedError=="function"&&SuppressedError;var R,P,U=f(B()),N=function(){if(P)return R;function d(A,h,y,w){this.cx=3*A,this.bx=3*(y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=h,this.p2x=y,this.p2y=w}return P=1,R=d,d.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,h){if(h===void 0&&(h=1e-6),A<0)return 0;if(A>1)return 1;for(var y=A,w=0;w<8;w++){var k=this.sampleCurveX(y)-A;if(Math.abs(k)<h)return y;var F=this.sampleCurveDerivativeX(y);if(Math.abs(F)<1e-6)break;y-=k/F}var j=0,Z=1;for(y=A,w=0;w<20&&(k=this.sampleCurveX(y),!(Math.abs(k-A)<h));w++)A>k?j=y:Z=y,y=.5*(Z-j)+j;return y},solve:function(A,h){return this.sampleCurveY(this.solveCurveX(A,h))}},R}(),W=f(N);let X,$;function re(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function te(){if($==null&&($=!1,re())){const A=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(A){for(let y=0;y<5*5;y++){const w=4*y;A.fillStyle=`rgb(${w},${w+1},${w+2})`,A.fillRect(y%5,Math.floor(y/5),1,1)}const h=A.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&h[y]!==y){$=!0;break}}}return $||!1}var V=1e-6,ne=typeof Float32Array<"u"?Float32Array:Array;function G(){var d=new ne(9);return ne!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function le(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function fe(){var d=new ne(3);return ne!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function pe(d){return Math.hypot(d[0],d[1],d[2])}function we(d,A,h){var y=new ne(3);return y[0]=d,y[1]=A,y[2]=h,y}Math.hypot||(Math.hypot=function(){for(var d=0,A=arguments.length;A--;)d+=arguments[A]*arguments[A];return Math.sqrt(d)});var Se,xe=pe;function je(d,A,h){var y=A[0],w=A[1],k=A[2],F=A[3];return d[0]=h[0]*y+h[4]*w+h[8]*k+h[12]*F,d[1]=h[1]*y+h[5]*w+h[9]*k+h[13]*F,d[2]=h[2]*y+h[6]*w+h[10]*k+h[14]*F,d[3]=h[3]*y+h[7]*w+h[11]*k+h[15]*F,d}function Me(){var d=new ne(4);return ne!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function rt(){var d=new ne(2);return ne!=Float32Array&&(d[0]=0,d[1]=0),d}function Ct(d,A){var h=new ne(2);return h[0]=d,h[1]=A,h}fe(),Se=new ne(4),ne!=Float32Array&&(Se[0]=0,Se[1]=0,Se[2]=0,Se[3]=0),fe(),we(1,0,0),we(0,1,0),Me(),Me(),G(),rt();const it=8192;function nt(d,A,h){return A*(it/(d.tileSize*Math.pow(2,h-d.tileID.overscaledZ)))}function Ge(d,A){return(d%A+A)%A}function Ie(d,A,h){return d*(1-h)+A*h}function $e(d){if(d<=0)return 0;if(d>=1)return 1;const A=d*d,h=A*d;return 4*(d<.5?h:3*(d-A)+h-.75)}function gt(d,A,h,y){const w=new W(d,A,h,y);return k=>w.solve(k)}const Dt=gt(.25,.1,.25,1);function ut(d,A,h){return Math.min(h,Math.max(A,d))}function Rt(d,A,h){const y=h-A,w=((d-A)%y+y)%y+A;return w===A?h:w}function St(d,...A){for(const h of A)for(const y in h)d[y]=h[y];return d}let Ke=1;function Pe(d,A,h){const y={};for(const w in d)y[w]=A.call(this,d[w],w,d);return y}function Re(d,A,h){const y={};for(const w in d)A.call(this,d[w],w,d)&&(y[w]=d[w]);return y}function Ye(d){return Array.isArray(d)?d.map(Ye):typeof d=="object"&&d?Pe(d,Ye):d}const vt={};function yt(d){vt[d]||(typeof console<"u"&&console.warn(d),vt[d]=!0)}function Et(d,A,h){return(h.y-d.y)*(A.x-d.x)>(A.y-d.y)*(h.x-d.x)}function Zt(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Ut=null;function An(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const hr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Vt(d,A,h,y,w){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(d,{timestamp:0});try{const F=k?.format;if(!F||!F.startsWith("BGR")&&!F.startsWith("RGB"))throw new Error(`Unrecognized format ${F}`);const j=F.startsWith("BGR"),Z=new Uint8ClampedArray(y*w*4);if(yield k.copyTo(Z,function(ie,ue,ge,De,Le){const Qe=4*Math.max(1,0),Je=(Math.max(0,ge)-ge)*De*4+Qe,At=4*De,_t=Math.max(0,ue),Wt=Math.max(0,ge);return{rect:{x:_t,y:Wt,width:Math.min(ie.width,ue+De)-_t,height:Math.min(ie.height,ge+Le)-Wt},layout:[{offset:Je,stride:At}]}}(d,A,h,y,w)),j)for(let ie=0;ie<Z.length;ie+=4){const ue=Z[ie];Z[ie]=Z[ie+2],Z[ie+2]=ue}return Z}finally{k.close()}})}let Vn,Pn;function Dn(d,A,h,y){return d.addEventListener(A,h,y),{unsubscribe:()=>{d.removeEventListener(A,h,y)}}}function Ln(d){return d*Math.PI/180}function Ir(d){return d/Math.PI*180}const rr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Yn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},We="AbortError";function he(){return new Error(We)}const me={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function et(d){return me.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const bt="global-dispatcher";class Yt extends Error{constructor(A,h,y,w){super(`AJAXError: ${h} (${A}): ${y}`),this.status=A,this.statusText=h,this.url=y,this.body=w}}const Jt=()=>Zt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ir=function(d,A){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const y=et(d.url);if(y)return y(d,A);if(Zt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:bt},A)}if(!(/^file:/.test(h=d.url)||/^file:/.test(Jt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,w){return o(this,void 0,void 0,function*(){const k=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:Jt(),signal:w.signal});let F,j;y.type!=="json"||k.headers.has("Accept")||k.headers.set("Accept","application/json");try{F=yield fetch(k)}catch(ie){throw new Yt(0,ie.message,y.url,new Blob)}if(!F.ok){const ie=yield F.blob();throw new Yt(F.status,F.statusText,y.url,ie)}j=y.type==="arrayBuffer"||y.type==="image"?F.arrayBuffer():y.type==="json"?F.json():F.text();const Z=yield j;if(w.signal.aborted)throw he();return{data:Z,cacheControl:F.headers.get("Cache-Control"),expires:F.headers.get("Expires")}})}(d,A);if(Zt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:bt},A)}var h;return function(y,w){return new Promise((k,F)=>{var j;const Z=new XMLHttpRequest;Z.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(Z.responseType="arraybuffer");for(const ie in y.headers)Z.setRequestHeader(ie,y.headers[ie]);y.type==="json"&&(Z.responseType="text",!((j=y.headers)===null||j===void 0)&&j.Accept||Z.setRequestHeader("Accept","application/json")),Z.withCredentials=y.credentials==="include",Z.onerror=()=>{F(new Error(Z.statusText))},Z.onload=()=>{if(!w.signal.aborted)if((Z.status>=200&&Z.status<300||Z.status===0)&&Z.response!==null){let ie=Z.response;if(y.type==="json")try{ie=JSON.parse(Z.response)}catch(ue){return void F(ue)}k({data:ie,cacheControl:Z.getResponseHeader("Cache-Control"),expires:Z.getResponseHeader("Expires")})}else{const ie=new Blob([Z.response],{type:Z.getResponseHeader("Content-Type")});F(new Yt(Z.status,Z.statusText,y.url,ie))}},w.signal.addEventListener("abort",()=>{Z.abort(),F(he())}),Z.send(y.body)})}(d,A)};function Xe(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const A=new URL(d),h=window.location;return A.protocol===h.protocol&&A.host===h.host}function ae(d,A,h){h[d]&&h[d].indexOf(A)!==-1||(h[d]=h[d]||[],h[d].push(A))}function ve(d,A,h){if(h&&h[d]){const y=h[d].indexOf(A);y!==-1&&h[d].splice(y,1)}}class p{constructor(A,h={}){St(this,h),this.type=A}}class Ne extends p{constructor(A,h={}){super("error",St({error:A},h))}}class Ve{on(A,h){return this._listeners=this._listeners||{},ae(A,h,this._listeners),{unsubscribe:()=>{this.off(A,h)}}}off(A,h){return ve(A,h,this._listeners),ve(A,h,this._oneTimeListeners),this}once(A,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},ae(A,h,this._oneTimeListeners),this):new Promise(y=>this.once(A,y))}fire(A,h){typeof A=="string"&&(A=new p(A,h||{}));const y=A.type;if(this.listens(y)){A.target=this;const w=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const j of w)j.call(this,A);const k=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const j of k)ve(y,j,this._oneTimeListeners),j.call(this,A);const F=this._eventedParent;F&&(St(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(A))}else A instanceof Ne&&console.error(A.error);return this}listens(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)}setEventedParent(A,h){return this._eventedParent=A,this._eventedParentData=h,this}}var Te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ct(d,A){const h={};for(const y in d)y!=="ref"&&(h[y]=d[y]);return lt.forEach(y=>{y in A&&(h[y]=A[y])}),h}function Ft(d,A){if(Array.isArray(d)){if(!Array.isArray(A)||d.length!==A.length)return!1;for(let h=0;h<d.length;h++)if(!Ft(d[h],A[h]))return!1;return!0}if(typeof d=="object"&&d!==null&&A!==null){if(typeof A!="object"||Object.keys(d).length!==Object.keys(A).length)return!1;for(const h in d)if(!Ft(d[h],A[h]))return!1;return!0}return d===A}function jt(d,A){d.push(A)}function Gt(d,A,h){jt(h,{command:"addSource",args:[d,A[d]]})}function nn(d,A,h){jt(A,{command:"removeSource",args:[d]}),h[d]=!0}function On(d,A,h,y){nn(d,h,y),Gt(d,A,h)}function Rn(d,A,h){let y;for(y in d[h])if(Object.prototype.hasOwnProperty.call(d[h],y)&&y!=="data"&&!Ft(d[h][y],A[h][y]))return!1;for(y in A[h])if(Object.prototype.hasOwnProperty.call(A[h],y)&&y!=="data"&&!Ft(d[h][y],A[h][y]))return!1;return!0}function dr(d,A,h,y,w,k){d=d||{},A=A||{};for(const F in d)Object.prototype.hasOwnProperty.call(d,F)&&(Ft(d[F],A[F])||h.push({command:k,args:[y,F,A[F],w]}));for(const F in A)Object.prototype.hasOwnProperty.call(A,F)&&!Object.prototype.hasOwnProperty.call(d,F)&&(Ft(d[F],A[F])||h.push({command:k,args:[y,F,A[F],w]}))}function Tr(d){return d.id}function or(d,A){return d[A.id]=A,d}class on{constructor(A,h,y,w){this.message=(A?`${A}: `:"")+y,w&&(this.identifier=w),h!=null&&h.__line__&&(this.line=h.__line__)}}function ti(d,...A){for(const h of A)for(const y in h)d[y]=h[y];return d}class li extends Error{constructor(A,h){super(h),this.message=h,this.key=A}}class jr{constructor(A,h=[]){this.parent=A,this.bindings={};for(const[y,w]of h)this.bindings[y]=w}concat(A){return new jr(this,A)}get(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(`${A} not found in scope.`)}has(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)}}const Fr={kind:"null"},wn={kind:"number"},Dr={kind:"string"},ui={kind:"boolean"},Pi={kind:"color"},yi={kind:"projectionDefinition"},As={kind:"object"},qr={kind:"value"},_s={kind:"collator"},La={kind:"formatted"},da={kind:"padding"},No={kind:"colorArray"},zs={kind:"numberArray"},hl={kind:"resolvedImage"},ci={kind:"variableAnchorOffsetCollection"};function oa(d,A){return{kind:"array",itemType:d,N:A}}function bo(d){if(d.kind==="array"){const A=bo(d.itemType);return typeof d.N=="number"?`array<${A}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${A}>`}return d.kind}const lo=[Fr,wn,Dr,ui,Pi,yi,La,As,oa(qr),da,zs,No,hl,ci];function Er(d,A){if(A.kind==="error")return null;if(d.kind==="array"){if(A.kind==="array"&&(A.N===0&&A.itemType.kind==="value"||!Er(d.itemType,A.itemType))&&(typeof d.N!="number"||d.N===A.N))return null}else{if(d.kind===A.kind)return null;if(d.kind==="value"){for(const h of lo)if(!Er(h,A))return null}}return`Expected ${bo(d)} but found ${bo(A)} instead.`}function wa(d,A){return A.some(h=>h.kind===d.kind)}function qo(d,A){return A.some(h=>h==="null"?d===null:h==="array"?Array.isArray(d):h==="object"?d&&!Array.isArray(d)&&typeof d=="object":h===typeof d)}function Jo(d,A){return d.kind==="array"&&A.kind==="array"?d.itemType.kind===A.itemType.kind&&typeof d.N=="number":d.kind===A.kind}const qe=.96422,xt=.82521,_n=4/29,jn=6/29,fn=3*jn*jn,gr=jn*jn*jn,Qi=Math.PI/180,Io=180/Math.PI;function fs(d){return(d%=360)<0&&(d+=360),d}function fa([d,A,h,y]){let w,k;const F=vi((.2225045*(d=iA(d))+.7168786*(A=iA(A))+.0606169*(h=iA(h)))/1);d===A&&A===h?w=k=F:(w=vi((.4360747*d+.3850649*A+.1430804*h)/qe),k=vi((.0139322*d+.0971045*A+.7141733*h)/xt));const j=116*F-16;return[j<0?0:j,500*(w-F),200*(F-k),y]}function iA(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function vi(d){return d>gr?Math.pow(d,1/3):d/fn+_n}function zu([d,A,h,y]){let w=(d+16)/116,k=isNaN(A)?w:w+A/500,F=isNaN(h)?w:w-h/200;return w=1*nl(w),k=qe*nl(k),F=xt*nl(F),[jl(3.1338561*k-1.6168667*w-.4906146*F),jl(-.9787684*k+1.9161415*w+.033454*F),jl(.0719453*k-.2289914*w+1.4052427*F),y]}function jl(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function nl(d){return d>jn?d*d*d:fn*(d-_n)}const Ua=Object.hasOwn||function(d,A){return Object.prototype.hasOwnProperty.call(d,A)};function JA(d,A){return Ua(d,A)?d[A]:void 0}function Sa(d){return parseInt(d.padEnd(2,d),16)/255}function bi(d,A){return Ao(A?d/100:d,0,1)}function Ao(d,A,h){return Math.min(Math.max(A,d),h)}function Oi(d){return!d.some(Number.isNaN)}const xl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Oo(d,A,h){return d+h*(A-d)}function Wl(d,A,h){return d.map((y,w)=>Oo(y,A[w],h))}class Di{constructor(A,h,y,w=1,k=!0){this.r=A,this.g=h,this.b=y,this.a=w,k||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[A,h,y,w]))}static parse(A){if(A instanceof Di)return A;if(typeof A!="string")return;const h=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=JA(xl,y);if(w){const[F,j,Z]=w;return[F/255,j/255,Z/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const F=y.length<6?1:2;let j=1;return[Sa(y.slice(j,j+=F)),Sa(y.slice(j,j+=F)),Sa(y.slice(j,j+=F)),Sa(y.slice(j,j+F)||"ff")]}if(y.startsWith("rgb")){const F=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t,Wt]=F,It=[ue||" ",Le||" ",At].join("");if(It==="  "||It==="  /"||It===",,"||It===",,,"){const Fe=[ie,De,Je].join(""),at=Fe==="%%%"?100:Fe===""?255:0;if(at){const Pt=[Ao(+Z/at,0,1),Ao(+ge/at,0,1),Ao(+Qe/at,0,1),_t?bi(+_t,Wt):1];if(Oi(Pt))return Pt}}return}}const k=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[F,j,Z,ie,ue,ge,De,Le,Qe]=k,Je=[Z||" ",ue||" ",De].join("");if(Je==="  "||Je==="  /"||Je===",,"||Je===",,,"){const At=[+j,Ao(+ie,0,100),Ao(+ge,0,100),Le?bi(+Le,Qe):1];if(Oi(At))return function([_t,Wt,It,Fe]){function at(Pt){const cn=(Pt+_t/30)%12,zn=Wt*Math.min(It,1-It);return It-zn*Math.max(-1,Math.min(cn-3,9-cn,1))}return _t=fs(_t),Wt/=100,It/=100,[at(0),at(8),at(4),Fe]}(At)}}}(A);return h?new Di(...h,!1):void 0}get rgb(){const{r:A,g:h,b:y,a:w}=this,k=w||1/0;return this.overwriteGetter("rgb",[A/k,h/k,y/k,w])}get hcl(){return this.overwriteGetter("hcl",function(A){const[h,y,w,k]=fa(A),F=Math.sqrt(y*y+w*w);return[Math.round(1e4*F)?fs(Math.atan2(w,y)*Io):NaN,F,h,k]}(this.rgb))}get lab(){return this.overwriteGetter("lab",fa(this.rgb))}overwriteGetter(A,h){return Object.defineProperty(this,A,{value:h}),h}toString(){const[A,h,y,w]=this.rgb;return`rgba(${[A,h,y].map(k=>Math.round(255*k)).join(",")},${w})`}static interpolate(A,h,y,w="rgb"){switch(w){case"rgb":{const[k,F,j,Z]=Wl(A.rgb,h.rgb,y);return new Di(k,F,j,Z,!1)}case"hcl":{const[k,F,j,Z]=A.hcl,[ie,ue,ge,De]=h.hcl;let Le,Qe;if(isNaN(k)||isNaN(ie))isNaN(k)?isNaN(ie)?Le=NaN:(Le=ie,j!==1&&j!==0||(Qe=ue)):(Le=k,ge!==1&&ge!==0||(Qe=F));else{let It=ie-k;ie>k&&It>180?It-=360:ie<k&&k-ie>180&&(It+=360),Le=k+y*It}const[Je,At,_t,Wt]=function([It,Fe,at,Pt]){return It=isNaN(It)?0:It*Qi,zu([at,Math.cos(It)*Fe,Math.sin(It)*Fe,Pt])}([Le,Qe??Oo(F,ue,y),Oo(j,ge,y),Oo(Z,De,y)]);return new Di(Je,At,_t,Wt,!1)}case"lab":{const[k,F,j,Z]=zu(Wl(A.lab,h.lab,y));return new Di(k,F,j,Z,!1)}}}}Di.black=new Di(0,0,0,1),Di.white=new Di(1,1,1,1),Di.transparent=new Di(0,0,0,0),Di.red=new Di(1,0,0,1);class oA{constructor(A,h,y){this.sensitivity=A?h?"variant":"case":h?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(A,h){return this.collator.compare(A,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const sA=["bottom","center","top"];class za{constructor(A,h,y,w,k,F){this.text=A,this.image=h,this.scale=y,this.fontStack=w,this.textColor=k,this.verticalAlign=F}}class Ni{constructor(A){this.sections=A}static fromString(A){return new Ni([new za(A,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(A=>A.text.length!==0||A.image&&A.image.name.length!==0)}static factory(A){return A instanceof Ni?A:Ni.fromString(A)}toString(){return this.sections.length===0?"":this.sections.map(A=>A.text).join("")}}class uo{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof uo)return A;if(typeof A=="number")return new uo([A,A,A,A]);if(Array.isArray(A)&&!(A.length<1||A.length>4)){for(const h of A)if(typeof h!="number")return;switch(A.length){case 1:A=[A[0],A[0],A[0],A[0]];break;case 2:A=[A[0],A[1],A[0],A[1]];break;case 3:A=[A[0],A[1],A[2],A[1]]}return new uo(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,h,y){return new uo(Wl(A.values,h.values,y))}}class $o{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof $o)return A;if(typeof A=="number")return new $o([A]);if(Array.isArray(A)){for(const h of A)if(typeof h!="number")return;return new $o(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,h,y){return new $o(Wl(A.values,h.values,y))}}class Vo{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof Vo)return A;if(typeof A=="string"){const y=Di.parse(A);return y?new Vo([y]):void 0}if(!Array.isArray(A))return;const h=[];for(const y of A){if(typeof y!="string")return;const w=Di.parse(y);if(!w)return;h.push(w)}return new Vo(h)}toString(){return JSON.stringify(this.values)}static interpolate(A,h,y,w="rgb"){const k=[];if(A.values.length!=h.values.length)throw new Error(`colorArray: Arrays have mismatched length (${A.values.length} vs. ${h.values.length}), cannot interpolate.`);for(let F=0;F<A.values.length;F++)k.push(Di.interpolate(A.values[F],h.values[F],y,w));return new Vo(k)}}class Hi extends Error{constructor(A){super(A),this.name="RuntimeError"}toJSON(){return this.message}}const Ea=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pa{constructor(A){this.values=A.slice()}static parse(A){if(A instanceof pa)return A;if(Array.isArray(A)&&!(A.length<1)&&A.length%2==0){for(let h=0;h<A.length;h+=2){const y=A[h],w=A[h+1];if(typeof y!="string"||!Ea.has(y)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new pa(A)}}toString(){return JSON.stringify(this.values)}static interpolate(A,h,y){const w=A.values,k=h.values;if(w.length!==k.length)throw new Hi(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${h.toString()}`);const F=[];for(let j=0;j<w.length;j+=2){if(w[j]!==k[j])throw new Hi(`Cannot interpolate values containing mismatched anchors. from[${j}]: ${w[j]}, to[${j}]: ${k[j]}`);F.push(w[j]);const[Z,ie]=w[j+1],[ue,ge]=k[j+1];F.push([Oo(Z,ue,y),Oo(ie,ge,y)])}return new pa(F)}}class Ss{constructor(A){this.name=A.name,this.available=A.available}toString(){return this.name}static fromString(A){return A?new Ss({name:A,available:!1}):null}}class sa{constructor(A,h,y){this.from=A,this.to=h,this.transition=y}static interpolate(A,h,y){return new sa(A,h,y)}static parse(A){return A instanceof sa?A:Array.isArray(A)&&A.length===3&&typeof A[0]=="string"&&typeof A[1]=="string"&&typeof A[2]=="number"?new sa(A[0],A[1],A[2]):typeof A=="object"&&typeof A.from=="string"&&typeof A.to=="string"&&typeof A.transition=="number"?new sa(A.from,A.to,A.transition):typeof A=="string"?new sa(A,A,1):void 0}}function EA(d,A,h,y){return typeof d=="number"&&d>=0&&d<=255&&typeof A=="number"&&A>=0&&A<=255&&typeof h=="number"&&h>=0&&h<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[d,A,h,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[d,A,h,y]:[d,A,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ii(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof sa||d instanceof Di||d instanceof oA||d instanceof Ni||d instanceof uo||d instanceof $o||d instanceof Vo||d instanceof pa||d instanceof Ss)return!0;if(Array.isArray(d)){for(const A of d)if(!Ii(A))return!1;return!0}if(typeof d=="object"){for(const A in d)if(!Ii(d[A]))return!1;return!0}return!1}function Ho(d){if(d===null)return Fr;if(typeof d=="string")return Dr;if(typeof d=="boolean")return ui;if(typeof d=="number")return wn;if(d instanceof Di)return Pi;if(d instanceof sa)return yi;if(d instanceof oA)return _s;if(d instanceof Ni)return La;if(d instanceof uo)return da;if(d instanceof $o)return zs;if(d instanceof Vo)return No;if(d instanceof pa)return ci;if(d instanceof Ss)return hl;if(Array.isArray(d)){const A=d.length;let h;for(const y of d){const w=Ho(y);if(h){if(h===w)continue;h=qr;break}h=w}return oa(h||qr,A)}return As}function Gi(d){const A=typeof d;return d===null?"":A==="string"||A==="number"||A==="boolean"?String(d):d instanceof Di||d instanceof sa||d instanceof Ni||d instanceof uo||d instanceof $o||d instanceof Vo||d instanceof pa||d instanceof Ss?d.toString():JSON.stringify(d)}class Sr{constructor(A,h){this.type=A,this.value=h}static parse(A,h){if(A.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${A.length-1} instead.`);if(!Ii(A[1]))return h.error("invalid value");const y=A[1];let w=Ho(y);const k=h.expectedType;return w.kind!=="array"||w.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(w=k),new Sr(w,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const to={string:Dr,number:wn,boolean:ui,object:As};class J{constructor(A,h){this.type=A,this.args=h}static parse(A,h){if(A.length<2)return h.error("Expected at least one argument.");let y,w=1;const k=A[0];if(k==="array"){let j,Z;if(A.length>2){const ie=A[1];if(typeof ie!="string"||!(ie in to)||ie==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);j=to[ie],w++}else j=qr;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return h.error('The length argument to "array" must be a positive integer literal',2);Z=A[2],w++}y=oa(j,Z)}else{if(!to[k])throw new Error(`Types doesn't contain name = ${k}`);y=to[k]}const F=[];for(;w<A.length;w++){const j=h.parse(A[w],w,qr);if(!j)return null;F.push(j)}return new J(y,F)}evaluate(A){for(let h=0;h<this.args.length;h++){const y=this.args[h].evaluate(A);if(!Er(this.type,Ho(y)))return y;if(h===this.args.length-1)throw new Hi(`Expected value to be of type ${bo(this.type)}, but found ${bo(Ho(y))} instead.`)}throw new Error}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const Ee={"to-boolean":ui,"to-color":Pi,"to-number":wn,"to-string":Dr};class st{constructor(A,h){this.type=A,this.args=h}static parse(A,h){if(A.length<2)return h.error("Expected at least one argument.");const y=A[0];if(!Ee[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&A.length!==2)return h.error("Expected one argument.");const w=Ee[y],k=[];for(let F=1;F<A.length;F++){const j=h.parse(A[F],F,qr);if(!j)return null;k.push(j)}return new st(w,k)}evaluate(A){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(A);case"color":{let h,y;for(const w of this.args){if(h=w.evaluate(A),y=null,h instanceof Di)return h;if(typeof h=="string"){const k=A.parseColor(h);if(k)return k}else if(Array.isArray(h)&&(y=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:EA(h[0],h[1],h[2],h[3]),!y))return new Di(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Hi(y||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const y of this.args){h=y.evaluate(A);const w=uo.parse(h);if(w)return w}throw new Hi(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"numberArray":{let h;for(const y of this.args){h=y.evaluate(A);const w=$o.parse(h);if(w)return w}throw new Hi(`Could not parse numberArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"colorArray":{let h;for(const y of this.args){h=y.evaluate(A);const w=Vo.parse(h);if(w)return w}throw new Hi(`Could not parse colorArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const y of this.args){h=y.evaluate(A);const w=pa.parse(h);if(w)return w}throw new Hi(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const y of this.args){if(h=y.evaluate(A),h===null)return 0;const w=Number(h);if(!isNaN(w))return w}throw new Hi(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Ni.fromString(Gi(this.args[0].evaluate(A)));case"resolvedImage":return Ss.fromString(Gi(this.args[0].evaluate(A)));case"projectionDefinition":return this.args[0].evaluate(A);default:return Gi(this.args[0].evaluate(A))}}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}const Ht=["Unknown","Point","LineString","Polygon"];class kr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ht[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(A){let h=this._parseColorCache.get(A);return h||(h=Di.parse(A),this._parseColorCache.set(A,h)),h}}class Qn{constructor(A,h,y=[],w,k=new jr,F=[]){this.registry=A,this.path=y,this.key=y.map(j=>`[${j}]`).join(""),this.scope=k,this.errors=F,this.expectedType=w,this._isConstant=h}parse(A,h,y,w,k={}){return h?this.concat(h,y,w)._parse(A,k):this._parse(A,k)}_parse(A,h){function y(w,k,F){return F==="assert"?new J(k,[w]):F==="coerce"?new st(k,[w]):w}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=A[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[w];if(k){let F=k.parse(A,this);if(!F)return null;if(this.expectedType){const j=this.expectedType,Z=F.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||Z.kind!=="value"){if(j.kind==="projectionDefinition"&&["string","array"].includes(Z.kind)||["color","formatted","resolvedImage"].includes(j.kind)&&["value","string"].includes(Z.kind)||["padding","numberArray"].includes(j.kind)&&["value","number","array"].includes(Z.kind)||j.kind==="colorArray"&&["value","string","array"].includes(Z.kind)||j.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(Z.kind))F=y(F,j,h.typeAnnotation||"coerce");else if(this.checkSubtype(j,Z))return null}else F=y(F,j,h.typeAnnotation||"assert")}if(!(F instanceof Sr)&&F.type.kind!=="resolvedImage"&&this._isConstant(F)){const j=new kr;try{F=new Sr(F.type,F.evaluate(j))}catch(Z){return this.error(Z.message),null}}return F}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(A===void 0?"'undefined' value invalid. Use null instead.":typeof A=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof A} instead.`)}concat(A,h,y){const w=typeof A=="number"?this.path.concat(A):this.path,k=y?this.scope.concat(y):this.scope;return new Qn(this.registry,this._isConstant,w,h||null,k,this.errors)}error(A,...h){const y=`${this.key}${h.map(w=>`[${w}]`).join("")}`;this.errors.push(new li(y,A))}checkSubtype(A,h){const y=Er(A,h);return y&&this.error(y),y}}class Zr{constructor(A,h){this.type=h.type,this.bindings=[].concat(A),this.result=h}evaluate(A){return this.result.evaluate(A)}eachChild(A){for(const h of this.bindings)A(h[1]);A(this.result)}static parse(A,h){if(A.length<4)return h.error(`Expected at least 3 arguments, but found ${A.length-1} instead.`);const y=[];for(let k=1;k<A.length-1;k+=2){const F=A[k];if(typeof F!="string")return h.error(`Expected string, but found ${typeof F} instead.`,k);if(/[^a-zA-Z0-9_]/.test(F))return h.error("Variable names must contain only alphanumeric characters or '_'.",k);const j=h.parse(A[k+1],k+1);if(!j)return null;y.push([F,j])}const w=h.parse(A[A.length-1],A.length-1,h.expectedType,y);return w?new Zr(y,w):null}outputDefined(){return this.result.outputDefined()}}class Ai{constructor(A,h){this.type=h.type,this.name=A,this.boundExpression=h}static parse(A,h){if(A.length!==2||typeof A[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const y=A[1];return h.scope.has(y)?new Ai(y,h.scope.get(y)):h.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(A){return this.boundExpression.evaluate(A)}eachChild(){}outputDefined(){return!1}}class Rr{constructor(A,h,y){this.type=A,this.index=h,this.input=y}static parse(A,h){if(A.length!==3)return h.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const y=h.parse(A[1],1,wn),w=h.parse(A[2],2,oa(h.expectedType||qr));return y&&w?new Rr(w.type.itemType,y,w):null}evaluate(A){const h=this.index.evaluate(A),y=this.input.evaluate(A);if(h<0)throw new Hi(`Array index out of bounds: ${h} < 0.`);if(h>=y.length)throw new Hi(`Array index out of bounds: ${h} > ${y.length-1}.`);if(h!==Math.floor(h))throw new Hi(`Array index must be an integer, but found ${h} instead.`);return y[h]}eachChild(A){A(this.index),A(this.input)}outputDefined(){return!1}}class ni{constructor(A,h){this.type=ui,this.needle=A,this.haystack=h}static parse(A,h){if(A.length!==3)return h.error(`Expected 2 arguments, but found ${A.length-1} instead.`);const y=h.parse(A[1],1,qr),w=h.parse(A[2],2,qr);return y&&w?wa(y.type,[ui,Dr,wn,Fr,qr])?new ni(y,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${bo(y.type)} instead`):null}evaluate(A){const h=this.needle.evaluate(A),y=this.haystack.evaluate(A);if(!y)return!1;if(!qo(h,["boolean","string","number","null"]))throw new Hi(`Expected first argument to be of type boolean, string, number or null, but found ${bo(Ho(h))} instead.`);if(!qo(y,["string","array"]))throw new Hi(`Expected second argument to be of type array or string, but found ${bo(Ho(y))} instead.`);return y.indexOf(h)>=0}eachChild(A){A(this.needle),A(this.haystack)}outputDefined(){return!0}}class Yi{constructor(A,h,y){this.type=wn,this.needle=A,this.haystack=h,this.fromIndex=y}static parse(A,h){if(A.length<=2||A.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const y=h.parse(A[1],1,qr),w=h.parse(A[2],2,qr);if(!y||!w)return null;if(!wa(y.type,[ui,Dr,wn,Fr,qr]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${bo(y.type)} instead`);if(A.length===4){const k=h.parse(A[3],3,wn);return k?new Yi(y,w,k):null}return new Yi(y,w)}evaluate(A){const h=this.needle.evaluate(A),y=this.haystack.evaluate(A);if(!qo(h,["boolean","string","number","null"]))throw new Hi(`Expected first argument to be of type boolean, string, number or null, but found ${bo(Ho(h))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(A)),qo(y,["string"])){const k=y.indexOf(h,w);return k===-1?-1:[...y.slice(0,k)].length}if(qo(y,["array"]))return y.indexOf(h,w);throw new Hi(`Expected second argument to be of type array or string, but found ${bo(Ho(y))} instead.`)}eachChild(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)}outputDefined(){return!1}}class xo{constructor(A,h,y,w,k,F){this.inputType=A,this.type=h,this.input=y,this.cases=w,this.outputs=k,this.otherwise=F}static parse(A,h){if(A.length<5)return h.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if(A.length%2!=1)return h.error("Expected an even number of arguments.");let y,w;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);const k={},F=[];for(let ie=2;ie<A.length-1;ie+=2){let ue=A[ie];const ge=A[ie+1];Array.isArray(ue)||(ue=[ue]);const De=h.concat(ie);if(ue.length===0)return De.error("Expected at least one branch label.");for(const Qe of ue){if(typeof Qe!="number"&&typeof Qe!="string")return De.error("Branch labels must be numbers or strings.");if(typeof Qe=="number"&&Math.abs(Qe)>Number.MAX_SAFE_INTEGER)return De.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Qe=="number"&&Math.floor(Qe)!==Qe)return De.error("Numeric branch labels must be integer values.");if(y){if(De.checkSubtype(y,Ho(Qe)))return null}else y=Ho(Qe);if(k[String(Qe)]!==void 0)return De.error("Branch labels must be unique.");k[String(Qe)]=F.length}const Le=h.parse(ge,ie,w);if(!Le)return null;w=w||Le.type,F.push(Le)}const j=h.parse(A[1],1,qr);if(!j)return null;const Z=h.parse(A[A.length-1],A.length-1,w);return Z?j.type.kind!=="value"&&h.concat(1).checkSubtype(y,j.type)?null:new xo(y,w,j,k,F,Z):null}evaluate(A){const h=this.input.evaluate(A);return(Ho(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(A)}eachChild(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)}outputDefined(){return this.outputs.every(A=>A.outputDefined())&&this.otherwise.outputDefined()}}class si{constructor(A,h,y){this.type=A,this.branches=h,this.otherwise=y}static parse(A,h){if(A.length<4)return h.error(`Expected at least 3 arguments, but found only ${A.length-1}.`);if(A.length%2!=0)return h.error("Expected an odd number of arguments.");let y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const w=[];for(let F=1;F<A.length-1;F+=2){const j=h.parse(A[F],F,ui);if(!j)return null;const Z=h.parse(A[F+1],F+1,y);if(!Z)return null;w.push([j,Z]),y=y||Z.type}const k=h.parse(A[A.length-1],A.length-1,y);if(!k)return null;if(!y)throw new Error("Can't infer output type");return new si(y,w,k)}evaluate(A){for(const[h,y]of this.branches)if(h.evaluate(A))return y.evaluate(A);return this.otherwise.evaluate(A)}eachChild(A){for(const[h,y]of this.branches)A(h),A(y);A(this.otherwise)}outputDefined(){return this.branches.every(([A,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class fi{constructor(A,h,y,w){this.type=A,this.input=h,this.beginIndex=y,this.endIndex=w}static parse(A,h){if(A.length<=2||A.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${A.length-1} instead.`);const y=h.parse(A[1],1,qr),w=h.parse(A[2],2,wn);if(!y||!w)return null;if(!wa(y.type,[oa(qr),Dr,qr]))return h.error(`Expected first argument to be of type array or string, but found ${bo(y.type)} instead`);if(A.length===4){const k=h.parse(A[3],3,wn);return k?new fi(y.type,y,w,k):null}return new fi(y.type,y,w)}evaluate(A){const h=this.input.evaluate(A),y=this.beginIndex.evaluate(A);let w;if(this.endIndex&&(w=this.endIndex.evaluate(A)),qo(h,["string"]))return[...h].slice(y,w).join("");if(qo(h,["array"]))return h.slice(y,w);throw new Hi(`Expected first argument to be of type array or string, but found ${bo(Ho(h))} instead.`)}eachChild(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)}outputDefined(){return!1}}function co(d,A){const h=d.length-1;let y,w,k=0,F=h,j=0;for(;k<=F;)if(j=Math.floor((k+F)/2),y=d[j],w=d[j+1],y<=A){if(j===h||A<w)return j;k=j+1}else{if(!(y>A))throw new Hi("Input is not a number.");F=j-1}return 0}class Ki{constructor(A,h,y){this.type=A,this.input=h,this.labels=[],this.outputs=[];for(const[w,k]of y)this.labels.push(w),this.outputs.push(k)}static parse(A,h){if(A.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return h.error("Expected an even number of arguments.");const y=h.parse(A[1],1,wn);if(!y)return null;const w=[];let k=null;h.expectedType&&h.expectedType.kind!=="value"&&(k=h.expectedType);for(let F=1;F<A.length;F+=2){const j=F===1?-1/0:A[F],Z=A[F+1],ie=F,ue=F+1;if(typeof j!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(w.length&&w[w.length-1][0]>=j)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ie);const ge=h.parse(Z,ue,k);if(!ge)return null;k=k||ge.type,w.push([j,ge])}return new Ki(k,y,w)}evaluate(A){const h=this.labels,y=this.outputs;if(h.length===1)return y[0].evaluate(A);const w=this.input.evaluate(A);if(w<=h[0])return y[0].evaluate(A);const k=h.length;return w>=h[k-1]?y[k-1].evaluate(A):y[co(h,w)].evaluate(A)}eachChild(A){A(this.input);for(const h of this.outputs)A(h)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function Fi(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Ns,Na,eu=function(){if(Na)return Ns;function d(A,h,y,w){this.cx=3*A,this.bx=3*(y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=h,this.p2x=y,this.p2y=w}return Na=1,Ns=d,d.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,h){if(h===void 0&&(h=1e-6),A<0)return 0;if(A>1)return 1;for(var y=A,w=0;w<8;w++){var k=this.sampleCurveX(y)-A;if(Math.abs(k)<h)return y;var F=this.sampleCurveDerivativeX(y);if(Math.abs(F)<1e-6)break;y-=k/F}var j=0,Z=1;for(y=A,w=0;w<20&&(k=this.sampleCurveX(y),!(Math.abs(k-A)<h));w++)A>k?j=y:Z=y,y=.5*(Z-j)+j;return y},solve:function(A,h){return this.sampleCurveY(this.solveCurveX(A,h))}},Ns}(),Gs=Fi(eu);class dl{constructor(A,h,y,w,k){this.type=A,this.operator=h,this.interpolation=y,this.input=w,this.labels=[],this.outputs=[];for(const[F,j]of k)this.labels.push(F),this.outputs.push(j)}static interpolationFactor(A,h,y,w){let k=0;if(A.name==="exponential")k=Ga(h,A.base,y,w);else if(A.name==="linear")k=Ga(h,1,y,w);else if(A.name==="cubic-bezier"){const F=A.controlPoints;k=new Gs(F[0],F[1],F[2],F[3]).solve(Ga(h,1,y,w))}return k}static parse(A,h){let[y,w,k,...F]=A;if(!Array.isArray(w)||w.length===0)return h.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const ie=w[1];if(typeof ie!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:ie}}else{if(w[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const ie=w.slice(1);if(ie.length!==4||ie.some(ue=>typeof ue!="number"||ue<0||ue>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:ie}}}if(A.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${A.length-1}.`);if((A.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(k=h.parse(k,2,wn),!k)return null;const j=[];let Z=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||h.expectedType==No?h.expectedType&&h.expectedType.kind!=="value"&&(Z=h.expectedType):Z=Pi;for(let ie=0;ie<F.length;ie+=2){const ue=F[ie],ge=F[ie+1],De=ie+3,Le=ie+4;if(typeof ue!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',De);if(j.length&&j[j.length-1][0]>=ue)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',De);const Qe=h.parse(ge,Le,Z);if(!Qe)return null;Z=Z||Qe.type,j.push([ue,Qe])}return Jo(Z,wn)||Jo(Z,yi)||Jo(Z,Pi)||Jo(Z,da)||Jo(Z,zs)||Jo(Z,No)||Jo(Z,ci)||Jo(Z,oa(wn))?new dl(Z,y,w,k,j):h.error(`Type ${bo(Z)} is not interpolatable.`)}evaluate(A){const h=this.labels,y=this.outputs;if(h.length===1)return y[0].evaluate(A);const w=this.input.evaluate(A);if(w<=h[0])return y[0].evaluate(A);const k=h.length;if(w>=h[k-1])return y[k-1].evaluate(A);const F=co(h,w),j=dl.interpolationFactor(this.interpolation,w,h[F],h[F+1]),Z=y[F].evaluate(A),ie=y[F+1].evaluate(A);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Oo(Z,ie,j);case"color":return Di.interpolate(Z,ie,j);case"padding":return uo.interpolate(Z,ie,j);case"colorArray":return Vo.interpolate(Z,ie,j);case"numberArray":return $o.interpolate(Z,ie,j);case"variableAnchorOffsetCollection":return pa.interpolate(Z,ie,j);case"array":return Wl(Z,ie,j);case"projectionDefinition":return sa.interpolate(Z,ie,j)}case"interpolate-hcl":switch(this.type.kind){case"color":return Di.interpolate(Z,ie,j,"hcl");case"colorArray":return Vo.interpolate(Z,ie,j,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Di.interpolate(Z,ie,j,"lab");case"colorArray":return Vo.interpolate(Z,ie,j,"lab")}}}eachChild(A){A(this.input);for(const h of this.outputs)A(h)}outputDefined(){return this.outputs.every(A=>A.outputDefined())}}function Ga(d,A,h,y){const w=y-h,k=d-h;return w===0?0:A===1?k/w:(Math.pow(A,k)-1)/(Math.pow(A,w)-1)}const BA={color:Di.interpolate,number:Oo,padding:uo.interpolate,numberArray:$o.interpolate,colorArray:Vo.interpolate,variableAnchorOffsetCollection:pa.interpolate,array:Wl};class uc{constructor(A,h){this.type=A,this.args=h}static parse(A,h){if(A.length<2)return h.error("Expected at least one argument.");let y=null;const w=h.expectedType;w&&w.kind!=="value"&&(y=w);const k=[];for(const j of A.slice(1)){const Z=h.parse(j,1+k.length,y,void 0,{typeAnnotation:"omit"});if(!Z)return null;y=y||Z.type,k.push(Z)}if(!y)throw new Error("No output type");const F=w&&k.some(j=>Er(w,j.type));return new uc(F?qr:y,k)}evaluate(A){let h,y=null,w=0;for(const k of this.args)if(w++,y=k.evaluate(A),y&&y instanceof Ss&&!y.available&&(h||(h=y.name),y=null,w===this.args.length&&(y=h)),y!==null)break;return y}eachChild(A){this.args.forEach(A)}outputDefined(){return this.args.every(A=>A.outputDefined())}}function mu(d,A){return d==="=="||d==="!="?A.kind==="boolean"||A.kind==="string"||A.kind==="number"||A.kind==="null"||A.kind==="value":A.kind==="string"||A.kind==="number"||A.kind==="value"}function aA(d,A,h,y){return y.compare(A,h)===0}function Ic(d,A,h){const y=d!=="=="&&d!=="!=";return class IL{constructor(k,F,j){this.type=ui,this.lhs=k,this.rhs=F,this.collator=j,this.hasUntypedArgument=k.type.kind==="value"||F.type.kind==="value"}static parse(k,F){if(k.length!==3&&k.length!==4)return F.error("Expected two or three arguments.");const j=k[0];let Z=F.parse(k[1],1,qr);if(!Z)return null;if(!mu(j,Z.type))return F.concat(1).error(`"${j}" comparisons are not supported for type '${bo(Z.type)}'.`);let ie=F.parse(k[2],2,qr);if(!ie)return null;if(!mu(j,ie.type))return F.concat(2).error(`"${j}" comparisons are not supported for type '${bo(ie.type)}'.`);if(Z.type.kind!==ie.type.kind&&Z.type.kind!=="value"&&ie.type.kind!=="value")return F.error(`Cannot compare types '${bo(Z.type)}' and '${bo(ie.type)}'.`);y&&(Z.type.kind==="value"&&ie.type.kind!=="value"?Z=new J(ie.type,[Z]):Z.type.kind!=="value"&&ie.type.kind==="value"&&(ie=new J(Z.type,[ie])));let ue=null;if(k.length===4){if(Z.type.kind!=="string"&&ie.type.kind!=="string"&&Z.type.kind!=="value"&&ie.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(ue=F.parse(k[3],3,_s),!ue)return null}return new IL(Z,ie,ue)}evaluate(k){const F=this.lhs.evaluate(k),j=this.rhs.evaluate(k);if(y&&this.hasUntypedArgument){const Z=Ho(F),ie=Ho(j);if(Z.kind!==ie.kind||Z.kind!=="string"&&Z.kind!=="number")throw new Hi(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${Z.kind}, ${ie.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const Z=Ho(F),ie=Ho(j);if(Z.kind!=="string"||ie.kind!=="string")return A(k,F,j)}return this.collator?h(k,F,j,this.collator.evaluate(k)):A(k,F,j)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const ps=Ic("==",function(d,A,h){return A===h},aA),Tc=Ic("!=",function(d,A,h){return A!==h},function(d,A,h,y){return!aA(0,A,h,y)}),md=Ic("<",function(d,A,h){return A<h},function(d,A,h,y){return y.compare(A,h)<0}),Pp=Ic(">",function(d,A,h){return A>h},function(d,A,h,y){return y.compare(A,h)>0}),qh=Ic("<=",function(d,A,h){return A<=h},function(d,A,h,y){return y.compare(A,h)<=0}),$h=Ic(">=",function(d,A,h){return A>=h},function(d,A,h,y){return y.compare(A,h)>=0});class gd{constructor(A,h,y){this.type=_s,this.locale=y,this.caseSensitive=A,this.diacriticSensitive=h}static parse(A,h){if(A.length!==2)return h.error("Expected one argument.");const y=A[1];if(typeof y!="object"||Array.isArray(y))return h.error("Collator options argument must be an object.");const w=h.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,ui);if(!w)return null;const k=h.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,ui);if(!k)return null;let F=null;return y.locale&&(F=h.parse(y.locale,1,Dr),!F)?null:new gd(w,k,F)}evaluate(A){return new oA(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)}eachChild(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)}outputDefined(){return!1}}class Vh{constructor(A,h,y,w,k){this.type=Dr,this.number=A,this.locale=h,this.currency=y,this.minFractionDigits=w,this.maxFractionDigits=k}static parse(A,h){if(A.length!==3)return h.error("Expected two arguments.");const y=h.parse(A[1],1,wn);if(!y)return null;const w=A[2];if(typeof w!="object"||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let k=null;if(w.locale&&(k=h.parse(w.locale,1,Dr),!k))return null;let F=null;if(w.currency&&(F=h.parse(w.currency,1,Dr),!F))return null;let j=null;if(w["min-fraction-digits"]&&(j=h.parse(w["min-fraction-digits"],1,wn),!j))return null;let Z=null;return w["max-fraction-digits"]&&(Z=h.parse(w["max-fraction-digits"],1,wn),!Z)?null:new Vh(y,k,F,j,Z)}evaluate(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))}eachChild(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)}outputDefined(){return!1}}class yd{constructor(A){this.type=La,this.sections=A}static parse(A,h){if(A.length<2)return h.error("Expected at least one argument.");const y=A[1];if(!Array.isArray(y)&&typeof y=="object")return h.error("First argument must be an image or text section.");const w=[];let k=!1;for(let F=1;F<=A.length-1;++F){const j=A[F];if(k&&typeof j=="object"&&!Array.isArray(j)){k=!1;let Z=null;if(j["font-scale"]&&(Z=h.parse(j["font-scale"],1,wn),!Z))return null;let ie=null;if(j["text-font"]&&(ie=h.parse(j["text-font"],1,oa(Dr)),!ie))return null;let ue=null;if(j["text-color"]&&(ue=h.parse(j["text-color"],1,Pi),!ue))return null;let ge=null;if(j["vertical-align"]){if(typeof j["vertical-align"]=="string"&&!sA.includes(j["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${j["vertical-align"]}' instead.`);if(ge=h.parse(j["vertical-align"],1,Dr),!ge)return null}const De=w[w.length-1];De.scale=Z,De.font=ie,De.textColor=ue,De.verticalAlign=ge}else{const Z=h.parse(A[F],1,qr);if(!Z)return null;const ie=Z.type.kind;if(ie!=="string"&&ie!=="value"&&ie!=="null"&&ie!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,w.push({content:Z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new yd(w)}evaluate(A){return new Ni(this.sections.map(h=>{const y=h.content.evaluate(A);return Ho(y)===hl?new za("",y,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(A):null):new za(Gi(y),null,h.scale?h.scale.evaluate(A):null,h.font?h.font.evaluate(A).join(","):null,h.textColor?h.textColor.evaluate(A):null,h.verticalAlign?h.verticalAlign.evaluate(A):null)}))}eachChild(A){for(const h of this.sections)A(h.content),h.scale&&A(h.scale),h.font&&A(h.font),h.textColor&&A(h.textColor),h.verticalAlign&&A(h.verticalAlign)}outputDefined(){return!1}}class Nu{constructor(A){this.type=hl,this.input=A}static parse(A,h){if(A.length!==2)return h.error("Expected two arguments.");const y=h.parse(A[1],1,Dr);return y?new Nu(y):h.error("No image name provided.")}evaluate(A){const h=this.input.evaluate(A),y=Ss.fromString(h);return y&&A.availableImages&&(y.available=A.availableImages.indexOf(h)>-1),y}eachChild(A){A(this.input)}outputDefined(){return!1}}class Es{constructor(A){this.type=wn,this.input=A}static parse(A,h){if(A.length!==2)return h.error(`Expected 1 argument, but found ${A.length-1} instead.`);const y=h.parse(A[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${bo(y.type)} instead.`):new Es(y):null}evaluate(A){const h=this.input.evaluate(A);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Hi(`Expected value to be of type string or array, but found ${bo(Ho(h))} instead.`)}eachChild(A){A(this.input)}outputDefined(){return!1}}const gu=8192;function uf(d,A){const h=(180+d[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,w=Math.pow(2,A.z);return[Math.round(h*w*gu),Math.round(y*w*gu)]}function nh(d,A){const h=Math.pow(2,A.z);return[(w=(d[0]/gu+A.x)/h,360*w-180),(y=(d[1]/gu+A.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,w}function _h(d,A){d[0]=Math.min(d[0],A[0]),d[1]=Math.min(d[1],A[1]),d[2]=Math.max(d[2],A[0]),d[3]=Math.max(d[3],A[1])}function kc(d,A){return!(d[0]<=A[0]||d[2]>=A[2]||d[1]<=A[1]||d[3]>=A[3])}function Rp(d,A,h){const y=d[0]-A[0],w=d[1]-A[1],k=d[0]-h[0],F=d[1]-h[1];return y*F-k*w==0&&y*k<=0&&w*F<=0}function Hh(d,A,h,y){return(w=[y[0]-h[0],y[1]-h[1]])[0]*(k=[A[0]-d[0],A[1]-d[1]])[1]-w[1]*k[0]!=0&&!(!Zh(d,A,h,y)||!Zh(h,y,d,A));var w,k}function vd(d,A,h){for(const y of h)for(let w=0;w<y.length-1;++w)if(Hh(d,A,y[w],y[w+1]))return!0;return!1}function Pc(d,A,h=!1){let y=!1;for(const j of A)for(let Z=0;Z<j.length-1;Z++){if(Rp(d,j[Z],j[Z+1]))return h;(k=j[Z])[1]>(w=d)[1]!=(F=j[Z+1])[1]>w[1]&&w[0]<(F[0]-k[0])*(w[1]-k[1])/(F[1]-k[1])+k[0]&&(y=!y)}var w,k,F;return y}function Dp(d,A){for(const h of A)if(Pc(d,h))return!0;return!1}function cf(d,A){for(const h of d)if(!Pc(h,A))return!1;for(let h=0;h<d.length-1;++h)if(vd(d[h],d[h+1],A))return!1;return!0}function OA(d,A){for(const h of A)if(cf(d,h))return!0;return!1}function Zh(d,A,h,y){const w=y[0]-h[0],k=y[1]-h[1],F=(d[0]-h[0])*k-w*(d[1]-h[1]),j=(A[0]-h[0])*k-w*(A[1]-h[1]);return F>0&&j<0||F<0&&j>0}function Ml(d,A,h){const y=[];for(let w=0;w<d.length;w++){const k=[];for(let F=0;F<d[w].length;F++){const j=uf(d[w][F],h);_h(A,j),k.push(j)}y.push(k)}return y}function Gu(d,A,h){const y=[];for(let w=0;w<d.length;w++){const k=Ml(d[w],A,h);y.push(k)}return y}function bh(d,A,h,y){if(d[0]<h[0]||d[0]>h[2]){const w=.5*y;let k=d[0]-h[0]>w?-y:h[0]-d[0]>w?y:0;k===0&&(k=d[0]-h[2]>w?-y:h[2]-d[0]>w?y:0),d[0]+=k}_h(A,d)}function Cd(d,A,h,y){const w=Math.pow(2,y.z)*gu,k=[y.x*gu,y.y*gu],F=[];for(const j of d)for(const Z of j){const ie=[Z.x+k[0],Z.y+k[1]];bh(ie,A,h,w),F.push(ie)}return F}function _d(d,A,h,y){const w=Math.pow(2,y.z)*gu,k=[y.x*gu,y.y*gu],F=[];for(const Z of d){const ie=[];for(const ue of Z){const ge=[ue.x+k[0],ue.y+k[1]];_h(A,ge),ie.push(ge)}F.push(ie)}if(A[2]-A[0]<=w/2){(j=A)[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(const Z of F)for(const ie of Z)bh(ie,A,h,w)}var j;return F}class fl{constructor(A,h){this.type=ui,this.geojson=A,this.geometries=h}static parse(A,h){if(A.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${A.length-1} instead.`);if(Ii(A[1])){const y=A[1];if(y.type==="FeatureCollection"){const w=[];for(const k of y.features){const{type:F,coordinates:j}=k.geometry;F==="Polygon"&&w.push(j),F==="MultiPolygon"&&w.push(...j)}if(w.length)return new fl(y,{type:"MultiPolygon",coordinates:w})}else if(y.type==="Feature"){const w=y.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new fl(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new fl(y,y)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(h,y){const w=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(y.type==="Polygon"){const j=Ml(y.coordinates,k,F),Z=Cd(h.geometry(),w,k,F);if(!kc(w,k))return!1;for(const ie of Z)if(!Pc(ie,j))return!1}if(y.type==="MultiPolygon"){const j=Gu(y.coordinates,k,F),Z=Cd(h.geometry(),w,k,F);if(!kc(w,k))return!1;for(const ie of Z)if(!Dp(ie,j))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(h,y){const w=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(y.type==="Polygon"){const j=Ml(y.coordinates,k,F),Z=_d(h.geometry(),w,k,F);if(!kc(w,k))return!1;for(const ie of Z)if(!cf(ie,j))return!1}if(y.type==="MultiPolygon"){const j=Gu(y.coordinates,k,F),Z=_d(h.geometry(),w,k,F);if(!kc(w,k))return!1;for(const ie of Z)if(!OA(ie,j))return!1}return!0}(A,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Rc=class{constructor(d=[],A=(h,y)=>h<y?-1:h>y?1:0){if(this.data=d,this.length=this.data.length,this.compare=A,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:A,compare:h}=this,y=A[d];for(;d>0;){const w=d-1>>1,k=A[w];if(h(y,k)>=0)break;A[d]=k,d=w}A[d]=y}_down(d){const{data:A,compare:h}=this,y=this.length>>1,w=A[d];for(;d<y;){let k=1+(d<<1);const F=k+1;if(F<this.length&&h(A[F],A[k])<0&&(k=F),h(A[k],w)>=0)break;A[d]=A[k],d=k}A[d]=w}};function Dc(d,A,h=0,y=d.length-1,w=qf){for(;y>h;){if(y-h>600){const Z=y-h+1,ie=A-h+1,ue=Math.log(Z),ge=.5*Math.exp(2*ue/3),De=.5*Math.sqrt(ue*ge*(Z-ge)/Z)*(ie-Z/2<0?-1:1);Dc(d,A,Math.max(h,Math.floor(A-ie*ge/Z+De)),Math.min(y,Math.floor(A+(Z-ie)*ge/Z+De)),w)}const k=d[A];let F=h,j=y;for(ju(d,h,A),w(d[y],k)>0&&ju(d,h,y);F<j;){for(ju(d,F,j),F++,j--;w(d[F],k)<0;)F++;for(;w(d[j],k)>0;)j--}w(d[h],k)===0?ju(d,h,j):(j++,ju(d,j,y)),j<=A&&(h=j+1),A<=j&&(y=j-1)}}function ju(d,A,h){const y=d[A];d[A]=d[h],d[h]=y}function qf(d,A){return d<A?-1:d>A?1:0}function hf(d,A){if(d.length<=1)return[d];const h=[];let y,w;for(const k of d){const F=xd(k);F!==0&&(k.area=Math.abs(F),w===void 0&&(w=F<0),w===F<0?(y&&h.push(y),y=[k]):y.push(k))}if(y&&h.push(y),A>1)for(let k=0;k<h.length;k++)h[k].length<=A||(Dc(h[k],A,1,h[k].length-1,bd),h[k]=h[k].slice(0,A));return h}function bd(d,A){return A.area-d.area}function xd(d){let A=0;for(let h,y,w=0,k=d.length,F=k-1;w<k;F=w++)h=d[w],y=d[F],A+=(y.x-h.x)*(h.y+y.y);return A}const rl=1/298.257223563,pl=rl*(2-rl),$f=Math.PI/180;class xh{constructor(A){const h=6378.137*$f*1e3,y=Math.cos(A*$f),w=1/(1-pl*(1-y*y)),k=Math.sqrt(w);this.kx=h*k*y,this.ky=h*k*w*(1-pl)}distance(A,h){const y=this.wrap(A[0]-h[0])*this.kx,w=(A[1]-h[1])*this.ky;return Math.sqrt(y*y+w*w)}pointOnLine(A,h){let y,w,k,F,j=1/0;for(let Z=0;Z<A.length-1;Z++){let ie=A[Z][0],ue=A[Z][1],ge=this.wrap(A[Z+1][0]-ie)*this.kx,De=(A[Z+1][1]-ue)*this.ky,Le=0;ge===0&&De===0||(Le=(this.wrap(h[0]-ie)*this.kx*ge+(h[1]-ue)*this.ky*De)/(ge*ge+De*De),Le>1?(ie=A[Z+1][0],ue=A[Z+1][1]):Le>0&&(ie+=ge/this.kx*Le,ue+=De/this.ky*Le)),ge=this.wrap(h[0]-ie)*this.kx,De=(h[1]-ue)*this.ky;const Qe=ge*ge+De*De;Qe<j&&(j=Qe,y=ie,w=ue,k=Z,F=Le)}return{point:[y,w],index:k,t:Math.max(0,Math.min(1,F))}}wrap(A){for(;A<-180;)A+=360;for(;A>180;)A-=360;return A}}function Kp(d,A){return A[0]-d[0]}function so(d){return d[1]-d[0]+1}function Ba(d,A){return d[1]>=d[0]&&d[1]<A}function Mh(d,A){if(d[0]>d[1])return[null,null];const h=so(d);if(A){if(h===2)return[d,null];const w=Math.floor(h/2);return[[d[0],d[0]+w],[d[0]+w,d[1]]]}if(h===1)return[d,null];const y=Math.floor(h/2)-1;return[[d[0],d[0]+y],[d[0]+y+1,d[1]]]}function Md(d,A){if(!Ba(A,d.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let y=A[0];y<=A[1];++y)_h(h,d[y]);return h}function rh(d){const A=[1/0,1/0,-1/0,-1/0];for(const h of d)for(const y of h)_h(A,y);return A}function df(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function ff(d,A,h){if(!df(d)||!df(A))return NaN;let y=0,w=0;return d[2]<A[0]&&(y=A[0]-d[2]),d[0]>A[2]&&(y=d[0]-A[2]),d[1]>A[3]&&(w=d[1]-A[3]),d[3]<A[1]&&(w=A[1]-d[3]),h.distance([0,0],[y,w])}function Kc(d,A,h){const y=h.pointOnLine(A,d);return h.distance(d,y.point)}function Wu(d,A,h,y,w){const k=Math.min(Kc(d,[h,y],w),Kc(A,[h,y],w)),F=Math.min(Kc(h,[d,A],w),Kc(y,[d,A],w));return Math.min(k,F)}function rn(d,A,h,y,w){if(!Ba(A,d.length)||!Ba(y,h.length))return 1/0;let k=1/0;for(let F=A[0];F<A[1];++F){const j=d[F],Z=d[F+1];for(let ie=y[0];ie<y[1];++ie){const ue=h[ie],ge=h[ie+1];if(Hh(j,Z,ue,ge))return 0;k=Math.min(k,Wu(j,Z,ue,ge,w))}}return k}function In(d,A,h,y,w){if(!Ba(A,d.length)||!Ba(y,h.length))return NaN;let k=1/0;for(let F=A[0];F<=A[1];++F)for(let j=y[0];j<=y[1];++j)if(k=Math.min(k,w.distance(d[F],h[j])),k===0)return k;return k}function dn(d,A,h){if(Pc(d,A,!0))return 0;let y=1/0;for(const w of A){const k=w[0],F=w[w.length-1];if(k!==F&&(y=Math.min(y,Kc(d,[F,k],h)),y===0))return y;const j=h.pointOnLine(w,d);if(y=Math.min(y,h.distance(d,j.point)),y===0)return y}return y}function Lr(d,A,h,y){if(!Ba(A,d.length))return NaN;for(let k=A[0];k<=A[1];++k)if(Pc(d[k],h,!0))return 0;let w=1/0;for(let k=A[0];k<A[1];++k){const F=d[k],j=d[k+1];for(const Z of h)for(let ie=0,ue=Z.length,ge=ue-1;ie<ue;ge=ie++){const De=Z[ge],Le=Z[ie];if(Hh(F,j,De,Le))return 0;w=Math.min(w,Wu(F,j,De,Le,y))}}return w}function Ri(d,A){for(const h of d)for(const y of h)if(Pc(y,A,!0))return!0;return!1}function Go(d,A,h,y=1/0){const w=rh(d),k=rh(A);if(y!==1/0&&ff(w,k,h)>=y)return y;if(kc(w,k)){if(Ri(d,A))return 0}else if(Ri(A,d))return 0;let F=1/0;for(const j of d)for(let Z=0,ie=j.length,ue=ie-1;Z<ie;ue=Z++){const ge=j[ue],De=j[Z];for(const Le of A)for(let Qe=0,Je=Le.length,At=Je-1;Qe<Je;At=Qe++){const _t=Le[At],Wt=Le[Qe];if(Hh(ge,De,_t,Wt))return 0;F=Math.min(F,Wu(ge,De,_t,Wt,h))}}return F}function ma(d,A,h,y,w,k){if(!k)return;const F=ff(Md(y,k),w,h);F<A&&d.push([F,k,[0,0]])}function es(d,A,h,y,w,k,F){if(!k||!F)return;const j=ff(Md(y,k),Md(w,F),h);j<A&&d.push([j,k,F])}function cc(d,A,h,y,w=1/0){let k=Math.min(y.distance(d[0],h[0][0]),w);if(k===0)return k;const F=new Rc([[0,[0,d.length-1],[0,0]]],Kp),j=rh(h);for(;F.length>0;){const Z=F.pop();if(Z[0]>=k)continue;const ie=Z[1],ue=A?50:100;if(so(ie)<=ue){if(!Ba(ie,d.length))return NaN;if(A){const ge=Lr(d,ie,h,y);if(isNaN(ge)||ge===0)return ge;k=Math.min(k,ge)}else for(let ge=ie[0];ge<=ie[1];++ge){const De=dn(d[ge],h,y);if(k=Math.min(k,De),k===0)return 0}}else{const ge=Mh(ie,A);ma(F,k,y,d,j,ge[0]),ma(F,k,y,d,j,ge[1])}}return k}function pf(d,A,h,y,w,k=1/0){let F=Math.min(k,w.distance(d[0],h[0]));if(F===0)return F;const j=new Rc([[0,[0,d.length-1],[0,h.length-1]]],Kp);for(;j.length>0;){const Z=j.pop();if(Z[0]>=F)continue;const ie=Z[1],ue=Z[2],ge=A?50:100,De=y?50:100;if(so(ie)<=ge&&so(ue)<=De){if(!Ba(ie,d.length)&&Ba(ue,h.length))return NaN;let Le;if(A&&y)Le=rn(d,ie,h,ue,w),F=Math.min(F,Le);else if(A&&!y){const Qe=d.slice(ie[0],ie[1]+1);for(let Je=ue[0];Je<=ue[1];++Je)if(Le=Kc(h[Je],Qe,w),F=Math.min(F,Le),F===0)return F}else if(!A&&y){const Qe=h.slice(ue[0],ue[1]+1);for(let Je=ie[0];Je<=ie[1];++Je)if(Le=Kc(d[Je],Qe,w),F=Math.min(F,Le),F===0)return F}else Le=In(d,ie,h,ue,w),F=Math.min(F,Le)}else{const Le=Mh(ie,A),Qe=Mh(ue,y);es(j,F,w,d,h,Le[0],Qe[0]),es(j,F,w,d,h,Le[0],Qe[1]),es(j,F,w,d,h,Le[1],Qe[0]),es(j,F,w,d,h,Le[1],Qe[1])}}return F}function IA(d){return d.type==="MultiPolygon"?d.coordinates.map(A=>({type:"Polygon",coordinates:A})):d.type==="MultiLineString"?d.coordinates.map(A=>({type:"LineString",coordinates:A})):d.type==="MultiPoint"?d.coordinates.map(A=>({type:"Point",coordinates:A})):[d]}class lA{constructor(A,h){this.type=wn,this.geojson=A,this.geometries=h}static parse(A,h){if(A.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${A.length-1} instead.`);if(Ii(A[1])){const y=A[1];if(y.type==="FeatureCollection")return new lA(y,y.features.map(w=>IA(w.geometry)).flat());if(y.type==="Feature")return new lA(y,IA(y.geometry));if("type"in y&&"coordinates"in y)return new lA(y,IA(y))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(h,y){const w=h.geometry(),k=w.flat().map(Z=>nh([Z.x,Z.y],h.canonical));if(w.length===0)return NaN;const F=new xh(k[0][1]);let j=1/0;for(const Z of y){switch(Z.type){case"Point":j=Math.min(j,pf(k,!1,[Z.coordinates],!1,F,j));break;case"LineString":j=Math.min(j,pf(k,!1,Z.coordinates,!0,F,j));break;case"Polygon":j=Math.min(j,cc(k,!1,Z.coordinates,F,j))}if(j===0)return j}return j}(A,this.geometries);if(A.geometryType()==="LineString")return function(h,y){const w=h.geometry(),k=w.flat().map(Z=>nh([Z.x,Z.y],h.canonical));if(w.length===0)return NaN;const F=new xh(k[0][1]);let j=1/0;for(const Z of y){switch(Z.type){case"Point":j=Math.min(j,pf(k,!0,[Z.coordinates],!1,F,j));break;case"LineString":j=Math.min(j,pf(k,!0,Z.coordinates,!0,F,j));break;case"Polygon":j=Math.min(j,cc(k,!0,Z.coordinates,F,j))}if(j===0)return j}return j}(A,this.geometries);if(A.geometryType()==="Polygon")return function(h,y){const w=h.geometry();if(w.length===0||w[0].length===0)return NaN;const k=hf(w,0).map(Z=>Z.map(ie=>ie.map(ue=>nh([ue.x,ue.y],h.canonical)))),F=new xh(k[0][0][0][1]);let j=1/0;for(const Z of y)for(const ie of k){switch(Z.type){case"Point":j=Math.min(j,cc([Z.coordinates],!1,ie,F,j));break;case"LineString":j=Math.min(j,cc(Z.coordinates,!0,ie,F,j));break;case"Polygon":j=Math.min(j,Go(ie,Z.coordinates,F,j))}if(j===0)return j}return j}(A,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class yu{constructor(A){this.type=qr,this.key=A}static parse(A,h){if(A.length!==2)return h.error(`Expected 1 argument, but found ${A.length-1} instead.`);const y=A[1];return y==null?h.error("Global state property must be defined."):typeof y!="string"?h.error(`Global state property must be string, but found ${typeof A[1]} instead.`):new yu(y)}evaluate(A){var h;const y=(h=A.globals)===null||h===void 0?void 0:h.globalState;return y&&Object.keys(y).length!==0?JA(y,this.key):null}eachChild(){}outputDefined(){return!1}}const ja={"==":ps,"!=":Tc,">":Pp,"<":md,">=":$h,"<=":qh,array:J,at:Rr,boolean:J,case:si,coalesce:uc,collator:gd,format:yd,image:Nu,in:ni,"index-of":Yi,interpolate:dl,"interpolate-hcl":dl,"interpolate-lab":dl,length:Es,let:Zr,literal:Sr,match:xo,number:J,"number-format":Vh,object:J,slice:fi,step:Ki,string:J,"to-boolean":st,"to-color":st,"to-number":st,"to-string":st,var:Ai,within:fl,distance:lA,"global-state":yu};class ga{constructor(A,h,y,w){this.name=A,this.type=h,this._evaluate=y,this.args=w}evaluate(A){return this._evaluate(A,this.args)}eachChild(A){this.args.forEach(A)}outputDefined(){return!1}static parse(A,h){const y=A[0],w=ga.definitions[y];if(!w)return h.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(w)?w[0]:w.type,F=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,j=F.filter(([ie])=>!Array.isArray(ie)||ie.length===A.length-1);let Z=null;for(const[ie,ue]of j){Z=new Qn(h.registry,TA,h.path,null,h.scope);const ge=[];let De=!1;for(let Le=1;Le<A.length;Le++){const Qe=A[Le],Je=Array.isArray(ie)?ie[Le-1]:ie.type,At=Z.parse(Qe,1+ge.length,Je);if(!At){De=!0;break}ge.push(At)}if(!De)if(Array.isArray(ie)&&ie.length!==ge.length)Z.error(`Expected ${ie.length} arguments, but found ${ge.length} instead.`);else{for(let Le=0;Le<ge.length;Le++){const Qe=Array.isArray(ie)?ie[Le]:ie.type,Je=ge[Le];Z.concat(Le+1).checkSubtype(Qe,Je.type)}if(Z.errors.length===0)return new ga(y,k,ue,ge)}}if(j.length===1)h.errors.push(...Z.errors);else{const ie=(j.length?j:F).map(([ge])=>{return De=ge,Array.isArray(De)?`(${De.map(bo).join(", ")})`:`(${bo(De.type)}...)`;var De}).join(" | "),ue=[];for(let ge=1;ge<A.length;ge++){const De=h.parse(A[ge],1+ue.length);if(!De)return null;ue.push(bo(De.type))}h.error(`Expected arguments of type ${ie}, but found (${ue.join(", ")}) instead.`)}return null}static register(A,h){ga.definitions=h;for(const y in h)A[y]=ga}}function ih(d,[A,h,y,w]){A=A.evaluate(d),h=h.evaluate(d),y=y.evaluate(d);const k=w?w.evaluate(d):1,F=EA(A,h,y,k);if(F)throw new Hi(F);return new Di(A/255,h/255,y/255,k,!1)}function Po(d,A){return d in A}function Fc(d,A){const h=A[d];return h===void 0?null:h}function vu(d){return{type:d}}function TA(d){if(d instanceof Ai)return TA(d.boundExpression);if(d instanceof ga&&d.name==="error"||d instanceof gd||d instanceof fl||d instanceof lA||d instanceof yu)return!1;const A=d instanceof st||d instanceof J;let h=!0;return d.eachChild(y=>{h=A?h&&TA(y):h&&y instanceof Sr}),!!h&&tu(d)&&Cu(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tu(d){if(d instanceof ga&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof fl||d instanceof lA)return!1;let A=!0;return d.eachChild(h=>{A&&!tu(h)&&(A=!1)}),A}function Wa(d){if(d instanceof ga&&d.name==="feature-state")return!1;let A=!0;return d.eachChild(h=>{A&&!Wa(h)&&(A=!1)}),A}function Cu(d,A){if(d instanceof ga&&A.indexOf(d.name)>=0)return!1;let h=!0;return d.eachChild(y=>{h&&!Cu(y,A)&&(h=!1)}),h}function AA(d){return{result:"success",value:d}}function wl(d){return{result:"error",value:d}}function hc(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function wd(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function ml(d){return!!d.expression&&d.expression.interpolated}function Zi(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Lc(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)&&Ho(d)===As}function dc(d){return d}function mf(d,A){const h=d.stops&&typeof d.stops[0][0]=="object",y=h||!(h||d.property!==void 0),w=d.type||(ml(A)?"exponential":"interval"),k=function(ue){switch(ue.type){case"color":return Di.parse;case"padding":return uo.parse;case"numberArray":return $o.parse;case"colorArray":return Vo.parse;default:return null}}(A);if(k&&((d=ti({},d)).stops&&(d.stops=d.stops.map(ue=>[ue[0],k(ue[1])])),d.default=k(d.default?d.default:A.default)),d.colorSpace&&(F=d.colorSpace)!=="rgb"&&F!=="hcl"&&F!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var F;const j=function(ue){switch(ue){case"exponential":return Sd;case"interval":return wh;case"categorical":return oh;case"identity":return us;default:throw new Error(`Unknown function type "${ue}"`)}}(w);let Z,ie;if(w==="categorical"){Z=Object.create(null);for(const ue of d.stops)Z[ue[0]]=ue[1];ie=typeof d.stops[0][0]}if(h){const ue={},ge=[];for(let Qe=0;Qe<d.stops.length;Qe++){const Je=d.stops[Qe],At=Je[0].zoom;ue[At]===void 0&&(ue[At]={zoom:At,type:d.type,property:d.property,default:d.default,stops:[]},ge.push(At)),ue[At].stops.push([Je[0].value,Je[1]])}const De=[];for(const Qe of ge)De.push([ue[Qe].zoom,mf(ue[Qe],A)]);const Le={name:"linear"};return{kind:"composite",interpolationType:Le,interpolationFactor:dl.interpolationFactor.bind(void 0,Le),zoomStops:De.map(Qe=>Qe[0]),evaluate:({zoom:Qe},Je)=>Sd({stops:De,base:d.base},A,Qe).evaluate(Qe,Je)}}if(y){const ue=w==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:ue,interpolationFactor:dl.interpolationFactor.bind(void 0,ue),zoomStops:d.stops.map(ge=>ge[0]),evaluate:({zoom:ge})=>j(d,A,ge,Z,ie)}}return{kind:"source",evaluate(ue,ge){const De=ge&&ge.properties?ge.properties[d.property]:void 0;return De===void 0?uA(d.default,A.default):j(d,A,De,Z,ie)}}}function uA(d,A,h){return d!==void 0?d:A!==void 0?A:h!==void 0?h:void 0}function oh(d,A,h,y,w){return uA(typeof h===w?y[h]:void 0,d.default,A.default)}function wh(d,A,h){if(Zi(h)!=="number")return uA(d.default,A.default);const y=d.stops.length;if(y===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[y-1][0])return d.stops[y-1][1];const w=co(d.stops.map(k=>k[0]),h);return d.stops[w][1]}function Sd(d,A,h){const y=d.base!==void 0?d.base:1;if(Zi(h)!=="number")return uA(d.default,A.default);const w=d.stops.length;if(w===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[w-1][0])return d.stops[w-1][1];const k=co(d.stops.map(ue=>ue[0]),h),F=function(ue,ge,De,Le){const Qe=Le-De,Je=ue-De;return Qe===0?0:ge===1?Je/Qe:(Math.pow(ge,Je)-1)/(Math.pow(ge,Qe)-1)}(h,y,d.stops[k][0],d.stops[k+1][0]),j=d.stops[k][1],Z=d.stops[k+1][1],ie=BA[A.type]||dc;return typeof j.evaluate=="function"?{evaluate(...ue){const ge=j.evaluate.apply(void 0,ue),De=Z.evaluate.apply(void 0,ue);if(ge!==void 0&&De!==void 0)return ie(ge,De,F,d.colorSpace)}}:ie(j,Z,F,d.colorSpace)}function us(d,A,h){switch(A.type){case"color":h=Di.parse(h);break;case"formatted":h=Ni.fromString(h.toString());break;case"resolvedImage":h=Ss.fromString(h.toString());break;case"padding":h=uo.parse(h);break;case"colorArray":h=Vo.parse(h);break;case"numberArray":h=$o.parse(h);break;default:Zi(h)===A.type||A.type==="enum"&&A.values[h]||(h=void 0)}return uA(h,d.default,A.default)}ga.register(ja,{error:[{kind:"error"},[Dr],(d,[A])=>{throw new Hi(A.evaluate(d))}],typeof:[Dr,[qr],(d,[A])=>bo(Ho(A.evaluate(d)))],"to-rgba":[oa(wn,4),[Pi],(d,[A])=>{const[h,y,w,k]=A.evaluate(d).rgb;return[255*h,255*y,255*w,k]}],rgb:[Pi,[wn,wn,wn],ih],rgba:[Pi,[wn,wn,wn,wn],ih],has:{type:ui,overloads:[[[Dr],(d,[A])=>Po(A.evaluate(d),d.properties())],[[Dr,As],(d,[A,h])=>Po(A.evaluate(d),h.evaluate(d))]]},get:{type:qr,overloads:[[[Dr],(d,[A])=>Fc(A.evaluate(d),d.properties())],[[Dr,As],(d,[A,h])=>Fc(A.evaluate(d),h.evaluate(d))]]},"feature-state":[qr,[Dr],(d,[A])=>Fc(A.evaluate(d),d.featureState||{})],properties:[As,[],d=>d.properties()],"geometry-type":[Dr,[],d=>d.geometryType()],id:[qr,[],d=>d.id()],zoom:[wn,[],d=>d.globals.zoom],"heatmap-density":[wn,[],d=>d.globals.heatmapDensity||0],"line-progress":[wn,[],d=>d.globals.lineProgress||0],accumulated:[qr,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[wn,vu(wn),(d,A)=>{let h=0;for(const y of A)h+=y.evaluate(d);return h}],"*":[wn,vu(wn),(d,A)=>{let h=1;for(const y of A)h*=y.evaluate(d);return h}],"-":{type:wn,overloads:[[[wn,wn],(d,[A,h])=>A.evaluate(d)-h.evaluate(d)],[[wn],(d,[A])=>-A.evaluate(d)]]},"/":[wn,[wn,wn],(d,[A,h])=>A.evaluate(d)/h.evaluate(d)],"%":[wn,[wn,wn],(d,[A,h])=>A.evaluate(d)%h.evaluate(d)],ln2:[wn,[],()=>Math.LN2],pi:[wn,[],()=>Math.PI],e:[wn,[],()=>Math.E],"^":[wn,[wn,wn],(d,[A,h])=>Math.pow(A.evaluate(d),h.evaluate(d))],sqrt:[wn,[wn],(d,[A])=>Math.sqrt(A.evaluate(d))],log10:[wn,[wn],(d,[A])=>Math.log(A.evaluate(d))/Math.LN10],ln:[wn,[wn],(d,[A])=>Math.log(A.evaluate(d))],log2:[wn,[wn],(d,[A])=>Math.log(A.evaluate(d))/Math.LN2],sin:[wn,[wn],(d,[A])=>Math.sin(A.evaluate(d))],cos:[wn,[wn],(d,[A])=>Math.cos(A.evaluate(d))],tan:[wn,[wn],(d,[A])=>Math.tan(A.evaluate(d))],asin:[wn,[wn],(d,[A])=>Math.asin(A.evaluate(d))],acos:[wn,[wn],(d,[A])=>Math.acos(A.evaluate(d))],atan:[wn,[wn],(d,[A])=>Math.atan(A.evaluate(d))],min:[wn,vu(wn),(d,A)=>Math.min(...A.map(h=>h.evaluate(d)))],max:[wn,vu(wn),(d,A)=>Math.max(...A.map(h=>h.evaluate(d)))],abs:[wn,[wn],(d,[A])=>Math.abs(A.evaluate(d))],round:[wn,[wn],(d,[A])=>{const h=A.evaluate(d);return h<0?-Math.round(-h):Math.round(h)}],floor:[wn,[wn],(d,[A])=>Math.floor(A.evaluate(d))],ceil:[wn,[wn],(d,[A])=>Math.ceil(A.evaluate(d))],"filter-==":[ui,[Dr,qr],(d,[A,h])=>d.properties()[A.value]===h.value],"filter-id-==":[ui,[qr],(d,[A])=>d.id()===A.value],"filter-type-==":[ui,[Dr],(d,[A])=>d.geometryType()===A.value],"filter-<":[ui,[Dr,qr],(d,[A,h])=>{const y=d.properties()[A.value],w=h.value;return typeof y==typeof w&&y<w}],"filter-id-<":[ui,[qr],(d,[A])=>{const h=d.id(),y=A.value;return typeof h==typeof y&&h<y}],"filter->":[ui,[Dr,qr],(d,[A,h])=>{const y=d.properties()[A.value],w=h.value;return typeof y==typeof w&&y>w}],"filter-id->":[ui,[qr],(d,[A])=>{const h=d.id(),y=A.value;return typeof h==typeof y&&h>y}],"filter-<=":[ui,[Dr,qr],(d,[A,h])=>{const y=d.properties()[A.value],w=h.value;return typeof y==typeof w&&y<=w}],"filter-id-<=":[ui,[qr],(d,[A])=>{const h=d.id(),y=A.value;return typeof h==typeof y&&h<=y}],"filter->=":[ui,[Dr,qr],(d,[A,h])=>{const y=d.properties()[A.value],w=h.value;return typeof y==typeof w&&y>=w}],"filter-id->=":[ui,[qr],(d,[A])=>{const h=d.id(),y=A.value;return typeof h==typeof y&&h>=y}],"filter-has":[ui,[qr],(d,[A])=>A.value in d.properties()],"filter-has-id":[ui,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[ui,[oa(Dr)],(d,[A])=>A.value.indexOf(d.geometryType())>=0],"filter-id-in":[ui,[oa(qr)],(d,[A])=>A.value.indexOf(d.id())>=0],"filter-in-small":[ui,[Dr,oa(qr)],(d,[A,h])=>h.value.indexOf(d.properties()[A.value])>=0],"filter-in-large":[ui,[Dr,oa(qr)],(d,[A,h])=>function(y,w,k,F){for(;k<=F;){const j=k+F>>1;if(w[j]===y)return!0;w[j]>y?F=j-1:k=j+1}return!1}(d.properties()[A.value],h.value,0,h.value.length-1)],all:{type:ui,overloads:[[[ui,ui],(d,[A,h])=>A.evaluate(d)&&h.evaluate(d)],[vu(ui),(d,A)=>{for(const h of A)if(!h.evaluate(d))return!1;return!0}]]},any:{type:ui,overloads:[[[ui,ui],(d,[A,h])=>A.evaluate(d)||h.evaluate(d)],[vu(ui),(d,A)=>{for(const h of A)if(h.evaluate(d))return!0;return!1}]]},"!":[ui,[ui],(d,[A])=>!A.evaluate(d)],"is-supported-script":[ui,[Dr],(d,[A])=>{const h=d.globals&&d.globals.isSupportedScript;return!h||h(A.evaluate(d))}],upcase:[Dr,[Dr],(d,[A])=>A.evaluate(d).toUpperCase()],downcase:[Dr,[Dr],(d,[A])=>A.evaluate(d).toLowerCase()],concat:[Dr,vu(qr),(d,A)=>A.map(h=>Gi(h.evaluate(d))).join("")],"resolved-locale":[Dr,[_s],(d,[A])=>A.evaluate(d).resolvedLocale()]});class Uc{constructor(A,h){this.expression=A,this._warningHistory={},this._evaluator=new kr,this._defaultValue=h?function(y){if(y.type==="color"&&Lc(y.default))return new Di(0,0,0,0);switch(y.type){case"color":return Di.parse(y.default)||null;case"padding":return uo.parse(y.default)||null;case"numberArray":return $o.parse(y.default)||null;case"colorArray":return Vo.parse(y.default)||null;case"variableAnchorOffsetCollection":return pa.parse(y.default)||null;case"projectionDefinition":return sa.parse(y.default)||null;default:return y.default===void 0?null:y.default}}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(A,h,y,w,k,F){return this._evaluator.globals=A,this._evaluator.feature=h,this._evaluator.featureState=y,this._evaluator.canonical=w,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(A,h,y,w,k,F){this._evaluator.globals=A,this._evaluator.feature=h||null,this._evaluator.featureState=y||null,this._evaluator.canonical=w,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=F||null;try{const j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Hi(`Expected value to be one of ${Object.keys(this._enumValues).map(Z=>JSON.stringify(Z)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(j.message)),this._defaultValue}}}function _u(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in ja}function kA(d,A){const h=new Qn(ja,TA,[],A?function(w){const k={color:Pi,string:Dr,number:wn,enum:Dr,boolean:ui,formatted:La,padding:da,numberArray:zs,colorArray:No,projectionDefinition:yi,resolvedImage:hl,variableAnchorOffsetCollection:ci};return w.type==="array"?oa(k[w.value]||qr,w.length):k[w.type]}(A):void 0),y=h.parse(d,void 0,void 0,void 0,A&&A.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?AA(new Uc(y,A)):wl(h.errors)}class Xh{constructor(A,h){this.kind=A,this._styleExpression=h,this.isStateDependent=A!=="constant"&&!Wa(h.expression)}evaluateWithoutErrorHandling(A,h,y,w,k,F){return this._styleExpression.evaluateWithoutErrorHandling(A,h,y,w,k,F)}evaluate(A,h,y,w,k,F){return this._styleExpression.evaluate(A,h,y,w,k,F)}}class Jh{constructor(A,h,y,w){this.kind=A,this.zoomStops=y,this._styleExpression=h,this.isStateDependent=A!=="camera"&&!Wa(h.expression),this.interpolationType=w}evaluateWithoutErrorHandling(A,h,y,w,k,F){return this._styleExpression.evaluateWithoutErrorHandling(A,h,y,w,k,F)}evaluate(A,h,y,w,k,F){return this._styleExpression.evaluate(A,h,y,w,k,F)}interpolationFactor(A,h,y){return this.interpolationType?dl.interpolationFactor(this.interpolationType,A,h,y):0}}function sh(d,A){const h=kA(d,A);if(h.result==="error")return h;const y=h.value.expression,w=tu(y);if(!w&&!hc(A))return wl([new li("","data expressions not supported")]);const k=Cu(y,["zoom"]);if(!k&&!wd(A))return wl([new li("","zoom expressions not supported")]);const F=bu(y);return F||k?F instanceof li?wl([F]):F instanceof dl&&!ml(A)?wl([new li("",'"interpolate" expressions cannot be used with this property')]):AA(F?new Jh(w?"camera":"composite",h.value,F.labels,F instanceof dl?F.interpolation:void 0):new Xh(w?"constant":"source",h.value)):wl([new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fc{constructor(A,h){this._parameters=A,this._specification=h,ti(this,mf(this._parameters,this._specification))}static deserialize(A){return new fc(A._parameters,A._specification)}static serialize(A){return{_parameters:A._parameters,_specification:A._specification}}}function bu(d){let A=null;if(d instanceof Zr)A=bu(d.result);else if(d instanceof uc){for(const h of d.args)if(A=bu(h),A)break}else(d instanceof Ki||d instanceof dl)&&d.input instanceof ga&&d.input.name==="zoom"&&(A=d);return A instanceof li||d.eachChild(h=>{const y=bu(h);y instanceof li?A=y:!A&&y?A=new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&y&&A!==y&&(A=new li("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}function ms(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const A of d.slice(1))if(!ms(A)&&typeof A!="boolean")return!1;return!0;default:return!0}}const ya={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ed(d){if(d==null)return{filter:()=>!0,needGeometry:!1};ms(d)||(d=Qu(d));const A=kA(d,ya);if(A.result==="error")throw new Error(A.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,y,w)=>A.value.evaluate(h,y,{},w),needGeometry:Sh(d)}}function ah(d,A){return d<A?-1:d>A?1:0}function Sh(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let A=1;A<d.length;A++)if(Sh(d[A]))return!0;return!1}function Qu(d){if(!d)return!0;const A=d[0];return d.length<=1?A!=="any":A==="=="?lh(d[1],d[2],"=="):A==="!="?Sl(lh(d[1],d[2],"==")):A==="<"||A===">"||A==="<="||A===">="?lh(d[1],d[2],A):A==="any"?(h=d.slice(1),["any"].concat(h.map(Qu))):A==="all"?["all"].concat(d.slice(1).map(Qu)):A==="none"?["all"].concat(d.slice(1).map(Qu).map(Sl)):A==="in"?PA(d[1],d.slice(2)):A==="!in"?Sl(PA(d[1],d.slice(2))):A==="has"?pc(d[1]):A!=="!has"||Sl(pc(d[1]));var h}function lh(d,A,h){switch(d){case"$type":return[`filter-type-${h}`,A];case"$id":return[`filter-id-${h}`,A];default:return[`filter-${h}`,d,A]}}function PA(d,A){if(A.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",A]];case"$id":return["filter-id-in",["literal",A]];default:return A.length>200&&!A.some(h=>typeof h!=typeof A[0])?["filter-in-large",d,["literal",A.sort(ah)]]:["filter-in-small",d,["literal",A]]}}function pc(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Sl(d){return["!",d]}function xu(d){const A=typeof d;if(A==="number"||A==="boolean"||A==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let w="[";for(const k of d)w+=`${xu(k)},`;return`${w}]`}const h=Object.keys(d).sort();let y="{";for(let w=0;w<h.length;w++)y+=`${JSON.stringify(h[w])}:${xu(d[h[w]])},`;return`${y}}`}function Mu(d){let A="";for(const h of lt)A+=`/${xu(d[h])}`;return A}function zc(d){const A=d.value;return A?[new on(d.key,A,"constants have been deprecated as of v8")]:[]}function bs(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Yu(d){if(Array.isArray(d))return d.map(Yu);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const A={};for(const h in d)A[h]=Yu(d[h]);return A}return bs(d)}function Qa(d){const A=d.key,h=d.value,y=d.valueSpec||{},w=d.objectElementValidators||{},k=d.style,F=d.styleSpec,j=d.validateSpec;let Z=[];const ie=Zi(h);if(ie!=="object")return[new on(A,h,`object expected, ${ie} found`)];for(const ue in h){const ge=ue.split(".")[0],De=JA(y,ge)||y["*"];let Le;if(JA(w,ge))Le=w[ge];else if(JA(y,ge))Le=j;else if(w["*"])Le=w["*"];else{if(!y["*"]){Z.push(new on(A,h[ue],`unknown property "${ue}"`));continue}Le=j}Z=Z.concat(Le({key:(A&&`${A}.`)+ue,value:h[ue],valueSpec:De,style:k,styleSpec:F,object:h,objectKey:ue,validateSpec:j},h))}for(const ue in y)w[ue]||y[ue].required&&y[ue].default===void 0&&h[ue]===void 0&&Z.push(new on(A,h,`missing required property "${ue}"`));return Z}function mc(d){const A=d.value,h=d.valueSpec,y=d.style,w=d.styleSpec,k=d.key,F=d.arrayElementValidator||d.validateSpec;if(Zi(A)!=="array")return[new on(k,A,`array expected, ${Zi(A)} found`)];if(h.length&&A.length!==h.length)return[new on(k,A,`array length ${h.length} expected, length ${A.length} found`)];if(h["min-length"]&&A.length<h["min-length"])return[new on(k,A,`array length at least ${h["min-length"]} expected, length ${A.length} found`)];let j={type:h.value,values:h.values};w.$version<7&&(j.function=h.function),Zi(h.value)==="object"&&(j=h.value);let Z=[];for(let ie=0;ie<A.length;ie++)Z=Z.concat(F({array:A,arrayIndex:ie,value:A[ie],valueSpec:j,validateSpec:d.validateSpec,style:y,styleSpec:w,key:`${k}[${ie}]`}));return Z}function Ql(d){const A=d.key,h=d.value,y=d.valueSpec;let w=Zi(h);return w==="number"&&h!=h&&(w="NaN"),w!=="number"?[new on(A,h,`number expected, ${w} found`)]:"minimum"in y&&h<y.minimum?[new on(A,h,`${h} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&h>y.maximum?[new on(A,h,`${h} is greater than the maximum value ${y.maximum}`)]:[]}function wu(d){const A=d.valueSpec,h=bs(d.value.type);let y,w,k,F={};const j=h!=="categorical"&&d.value.property===void 0,Z=!j,ie=Zi(d.value.stops)==="array"&&Zi(d.value.stops[0])==="array"&&Zi(d.value.stops[0][0])==="object",ue=Qa({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Le){if(h==="identity")return[new on(Le.key,Le.value,'identity function may not have a "stops" property')];let Qe=[];const Je=Le.value;return Qe=Qe.concat(mc({key:Le.key,value:Je,valueSpec:Le.valueSpec,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,arrayElementValidator:ge})),Zi(Je)==="array"&&Je.length===0&&Qe.push(new on(Le.key,Je,"array must have at least one stop")),Qe},default:function(Le){return Le.validateSpec({key:Le.key,value:Le.value,valueSpec:A,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec})}}});return h==="identity"&&j&&ue.push(new on(d.key,d.value,'missing required property "property"')),h==="identity"||d.value.stops||ue.push(new on(d.key,d.value,'missing required property "stops"')),h==="exponential"&&d.valueSpec.expression&&!ml(d.valueSpec)&&ue.push(new on(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(Z&&!hc(d.valueSpec)?ue.push(new on(d.key,d.value,"property functions not supported")):j&&!wd(d.valueSpec)&&ue.push(new on(d.key,d.value,"zoom functions not supported"))),h!=="categorical"&&!ie||d.value.property!==void 0||ue.push(new on(d.key,d.value,'"property" property is required')),ue;function ge(Le){let Qe=[];const Je=Le.value,At=Le.key;if(Zi(Je)!=="array")return[new on(At,Je,`array expected, ${Zi(Je)} found`)];if(Je.length!==2)return[new on(At,Je,`array length 2 expected, length ${Je.length} found`)];if(ie){if(Zi(Je[0])!=="object")return[new on(At,Je,`object expected, ${Zi(Je[0])} found`)];if(Je[0].zoom===void 0)return[new on(At,Je,"object stop key must have zoom")];if(Je[0].value===void 0)return[new on(At,Je,"object stop key must have value")];if(k&&k>bs(Je[0].zoom))return[new on(At,Je[0].zoom,"stop zoom values must appear in ascending order")];bs(Je[0].zoom)!==k&&(k=bs(Je[0].zoom),w=void 0,F={}),Qe=Qe.concat(Qa({key:`${At}[0]`,value:Je[0],valueSpec:{zoom:{}},validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,objectElementValidators:{zoom:Ql,value:De}}))}else Qe=Qe.concat(De({key:`${At}[0]`,value:Je[0],validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec},Je));return _u(Yu(Je[1]))?Qe.concat([new on(`${At}[1]`,Je[1],"expressions are not allowed in function stops.")]):Qe.concat(Le.validateSpec({key:`${At}[1]`,value:Je[1],valueSpec:A,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec}))}function De(Le,Qe){const Je=Zi(Le.value),At=bs(Le.value),_t=Le.value!==null?Le.value:Qe;if(y){if(Je!==y)return[new on(Le.key,_t,`${Je} stop domain type must match previous stop domain type ${y}`)]}else y=Je;if(Je!=="number"&&Je!=="string"&&Je!=="boolean")return[new on(Le.key,_t,"stop domain value must be a number, string, or boolean")];if(Je!=="number"&&h!=="categorical"){let Wt=`number expected, ${Je} found`;return hc(A)&&h===void 0&&(Wt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new on(Le.key,_t,Wt)]}return h!=="categorical"||Je!=="number"||isFinite(At)&&Math.floor(At)===At?h!=="categorical"&&Je==="number"&&w!==void 0&&At<w?[new on(Le.key,_t,"stop domain values must appear in ascending order")]:(w=At,h==="categorical"&&At in F?[new on(Le.key,_t,"stop domain values must be unique")]:(F[At]=!0,[])):[new on(Le.key,_t,`integer expected, found ${At}`)]}}function El(d){const A=(d.expressionContext==="property"?sh:kA)(Yu(d.value),d.valueSpec);if(A.result==="error")return A.value.map(y=>new on(`${d.key}${y.key}`,d.value,y.message));const h=A.value.expression||A.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!h.outputDefined())return[new on(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Wa(h))return[new on(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Wa(h))return[new on(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Cu(h,["zoom","feature-state"]))return[new on(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!tu(h))return[new on(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cA(d){const A=d.key,h=d.value,y=Zi(h);return y!=="string"?[new on(A,h,`color expected, ${y} found`)]:Di.parse(String(h))?[]:[new on(A,h,`color expected, "${h}" found`)]}function Ah(d){const A=d.key,h=d.value,y=d.valueSpec,w=[];return Array.isArray(y.values)?y.values.indexOf(bs(h))===-1&&w.push(new on(A,h,`expected one of [${y.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(y.values).indexOf(bs(h))===-1&&w.push(new on(A,h,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function ot(d){return ms(Yu(d.value))?El(ti({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Eh(d)}function Eh(d){const A=d.value,h=d.key;if(Zi(A)!=="array")return[new on(h,A,`array expected, ${Zi(A)} found`)];const y=d.styleSpec;let w,k=[];if(A.length<1)return[new on(h,A,"filter array must have at least 1 element")];switch(k=k.concat(Ah({key:`${h}[0]`,value:A[0],valueSpec:y.filter_operator,style:d.style,styleSpec:d.styleSpec})),bs(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&bs(A[1])==="$type"&&k.push(new on(h,A,`"$type" cannot be use with operator "${A[0]}"`));case"==":case"!=":A.length!==3&&k.push(new on(h,A,`filter array for operator "${A[0]}" must have 3 elements`));case"in":case"!in":A.length>=2&&(w=Zi(A[1]),w!=="string"&&k.push(new on(`${h}[1]`,A[1],`string expected, ${w} found`)));for(let F=2;F<A.length;F++)w=Zi(A[F]),bs(A[1])==="$type"?k=k.concat(Ah({key:`${h}[${F}]`,value:A[F],valueSpec:y.geometry_type,style:d.style,styleSpec:d.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&k.push(new on(`${h}[${F}]`,A[F],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let F=1;F<A.length;F++)k=k.concat(Eh({key:`${h}[${F}]`,value:A[F],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":w=Zi(A[1]),A.length!==2?k.push(new on(h,A,`filter array for "${A[0]}" operator must have 2 elements`)):w!=="string"&&k.push(new on(`${h}[1]`,A[1],`string expected, ${w} found`))}return k}function Xs(d,A){const h=d.key,y=d.validateSpec,w=d.style,k=d.styleSpec,F=d.value,j=d.objectKey,Z=k[`${A}_${d.layerType}`];if(!Z)return[];const ie=j.match(/^(.*)-transition$/);if(A==="paint"&&ie&&Z[ie[1]]&&Z[ie[1]].transition)return y({key:h,value:F,valueSpec:k.transition,style:w,styleSpec:k});const ue=d.valueSpec||Z[j];if(!ue)return[new on(h,F,`unknown property "${j}"`)];let ge;if(Zi(F)==="string"&&hc(ue)&&!ue.tokens&&(ge=/^{([^}]+)}$/.exec(F)))return[new on(h,F,`"${j}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ge[1])} }\`.`)];const De=[];return d.layerType==="symbol"&&(j==="text-field"&&w&&!w.glyphs&&De.push(new on(h,F,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Lc(Yu(F))&&bs(F.type)==="identity"&&De.push(new on(h,F,'"text-font" does not support identity functions'))),De.concat(y({key:d.key,value:F,valueSpec:ue,style:w,styleSpec:k,expressionContext:"property",propertyType:A,propertyKey:j}))}function Ro(d){return Xs(d,"paint")}function ai(d){return Xs(d,"layout")}function Bs(d){let A=[];const h=d.value,y=d.key,w=d.style,k=d.styleSpec;if(Zi(h)!=="object")return[new on(y,h,`object expected, ${Zi(h)} found`)];h.type||h.ref||A.push(new on(y,h,'either "type" or "ref" is required'));let F=bs(h.type);const j=bs(h.ref);if(h.id){const Z=bs(h.id);for(let ie=0;ie<d.arrayIndex;ie++){const ue=w.layers[ie];bs(ue.id)===Z&&A.push(new on(y,h.id,`duplicate layer id "${h.id}", previously used at line ${ue.id.__line__}`))}}if("ref"in h){let Z;["type","source","source-layer","filter","layout"].forEach(ie=>{ie in h&&A.push(new on(y,h[ie],`"${ie}" is prohibited for ref layers`))}),w.layers.forEach(ie=>{bs(ie.id)===j&&(Z=ie)}),Z?Z.ref?A.push(new on(y,h.ref,"ref cannot reference another ref layer")):F=bs(Z.type):A.push(new on(y,h.ref,`ref layer "${j}" not found`))}else if(F!=="background")if(h.source){const Z=w.sources&&w.sources[h.source],ie=Z&&bs(Z.type);Z?ie==="vector"&&F==="raster"?A.push(new on(y,h.source,`layer "${h.id}" requires a raster source`)):ie!=="raster-dem"&&F==="hillshade"?A.push(new on(y,h.source,`layer "${h.id}" requires a raster-dem source`)):ie==="raster"&&F!=="raster"?A.push(new on(y,h.source,`layer "${h.id}" requires a vector source`)):ie!=="vector"||h["source-layer"]?ie==="raster-dem"&&F!=="hillshade"?A.push(new on(y,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!h.paint||!h.paint["line-gradient"]||ie==="geojson"&&Z.lineMetrics||A.push(new on(y,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):A.push(new on(y,h,`layer "${h.id}" must specify a "source-layer"`)):A.push(new on(y,h.source,`source "${h.source}" not found`))}else A.push(new on(y,h,'missing required property "source"'));return A=A.concat(Qa({key:y,value:h,valueSpec:k.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${y}.type`,value:h.type,valueSpec:k.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:h,objectKey:"type"}),filter:ot,layout:Z=>Qa({layer:h,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,validateSpec:Z.validateSpec,objectElementValidators:{"*":ie=>ai(ti({layerType:F},ie))}}),paint:Z=>Qa({layer:h,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,validateSpec:Z.validateSpec,objectElementValidators:{"*":ie=>Ro(ti({layerType:F},ie))}})}})),A}function js(d){const A=d.value,h=d.key,y=Zi(A);return y!=="string"?[new on(h,A,`string expected, ${y} found`)]:[]}const qu={promoteId:function({key:d,value:A}){if(Zi(A)==="string")return js({key:d,value:A});{const h=[];for(const y in A)h.push(...js({key:`${d}.${y}`,value:A[y]}));return h}}};function il(d){const A=d.value,h=d.key,y=d.styleSpec,w=d.style,k=d.validateSpec;if(!A.type)return[new on(h,A,'"type" is required')];const F=bs(A.type);let j;switch(F){case"vector":case"raster":return j=Qa({key:h,value:A,valueSpec:y[`source_${F.replace("-","_")}`],style:d.style,styleSpec:y,objectElementValidators:qu,validateSpec:k}),j;case"raster-dem":return j=function(Z){var ie;const ue=(ie=Z.sourceName)!==null&&ie!==void 0?ie:"",ge=Z.value,De=Z.styleSpec,Le=De.source_raster_dem,Qe=Z.style;let Je=[];const At=Zi(ge);if(ge===void 0)return Je;if(At!=="object")return Je.push(new on("source_raster_dem",ge,`object expected, ${At} found`)),Je;const _t=bs(ge.encoding)==="custom",Wt=["redFactor","greenFactor","blueFactor","baseShift"],It=Z.value.encoding?`"${Z.value.encoding}"`:"Default";for(const Fe in ge)!_t&&Wt.includes(Fe)?Je.push(new on(Fe,ge[Fe],`In "${ue}": "${Fe}" is only valid when "encoding" is set to "custom". ${It} encoding found`)):Le[Fe]?Je=Je.concat(Z.validateSpec({key:Fe,value:ge[Fe],valueSpec:Le[Fe],validateSpec:Z.validateSpec,style:Qe,styleSpec:De})):Je.push(new on(Fe,ge[Fe],`unknown property "${Fe}"`));return Je}({sourceName:h,value:A,style:d.style,styleSpec:y,validateSpec:k}),j;case"geojson":if(j=Qa({key:h,value:A,valueSpec:y.source_geojson,style:w,styleSpec:y,validateSpec:k,objectElementValidators:qu}),A.cluster)for(const Z in A.clusterProperties){const[ie,ue]=A.clusterProperties[Z],ge=typeof ie=="string"?[ie,["accumulated"],["get",Z]]:ie;j.push(...El({key:`${h}.${Z}.map`,value:ue,expressionContext:"cluster-map"})),j.push(...El({key:`${h}.${Z}.reduce`,value:ge,expressionContext:"cluster-reduce"}))}return j;case"video":return Qa({key:h,value:A,valueSpec:y.source_video,style:w,validateSpec:k,styleSpec:y});case"image":return Qa({key:h,value:A,valueSpec:y.source_image,style:w,validateSpec:k,styleSpec:y});case"canvas":return[new on(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ah({key:`${h}.type`,value:A.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ps(d){const A=d.value,h=d.styleSpec,y=h.light,w=d.style;let k=[];const F=Zi(A);if(A===void 0)return k;if(F!=="object")return k=k.concat([new on("light",A,`object expected, ${F} found`)]),k;for(const j in A){const Z=j.match(/^(.*)-transition$/);k=k.concat(Z&&y[Z[1]]&&y[Z[1]].transition?d.validateSpec({key:j,value:A[j],valueSpec:h.transition,validateSpec:d.validateSpec,style:w,styleSpec:h}):y[j]?d.validateSpec({key:j,value:A[j],valueSpec:y[j],validateSpec:d.validateSpec,style:w,styleSpec:h}):[new on(j,A[j],`unknown property "${j}"`)])}return k}function Os(d){const A=d.value,h=d.styleSpec,y=h.sky,w=d.style,k=Zi(A);if(A===void 0)return[];if(k!=="object")return[new on("sky",A,`object expected, ${k} found`)];let F=[];for(const j in A)F=F.concat(y[j]?d.validateSpec({key:j,value:A[j],valueSpec:y[j],style:w,styleSpec:h}):[new on(j,A[j],`unknown property "${j}"`)]);return F}function nu(d){const A=d.value,h=d.styleSpec,y=h.terrain,w=d.style;let k=[];const F=Zi(A);if(A===void 0)return k;if(F!=="object")return k=k.concat([new on("terrain",A,`object expected, ${F} found`)]),k;for(const j in A)k=k.concat(y[j]?d.validateSpec({key:j,value:A[j],valueSpec:y[j],validateSpec:d.validateSpec,style:w,styleSpec:h}):[new on(j,A[j],`unknown property "${j}"`)]);return k}function Ya(d){let A=[];const h=d.value,y=d.key;if(Array.isArray(h)){const w=[],k=[];for(const F in h)h[F].id&&w.includes(h[F].id)&&A.push(new on(y,h,`all the sprites' ids must be unique, but ${h[F].id} is duplicated`)),w.push(h[F].id),h[F].url&&k.includes(h[F].url)&&A.push(new on(y,h,`all the sprites' URLs must be unique, but ${h[F].url} is duplicated`)),k.push(h[F].url),A=A.concat(Qa({key:`${y}[${F}]`,value:h[F],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return A}return js({key:y,value:h})}function gl(d){return A=d.value,A&&A.constructor===Object?[]:[new on(d.key,d.value,`object expected, ${Zi(d.value)} found`)];var A}const yl={"*":()=>[],array:mc,boolean:function(d){const A=d.value,h=d.key,y=Zi(A);return y!=="boolean"?[new on(h,A,`boolean expected, ${y} found`)]:[]},number:Ql,color:cA,constants:zc,enum:Ah,filter:ot,function:wu,layer:Bs,object:Qa,source:il,light:Ps,sky:Os,terrain:nu,projection:function(d){const A=d.value,h=d.styleSpec,y=h.projection,w=d.style,k=Zi(A);if(A===void 0)return[];if(k!=="object")return[new on("projection",A,`object expected, ${k} found`)];let F=[];for(const j in A)F=F.concat(y[j]?d.validateSpec({key:j,value:A[j],valueSpec:y[j],style:w,styleSpec:h}):[new on(j,A[j],`unknown property "${j}"`)]);return F},projectionDefinition:function(d){const A=d.key;let h=d.value;h=h instanceof String?h.valueOf():h;const y=Zi(h);return y!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(h)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(h)?["array","string"].includes(y)?[]:[new on(A,h,`projection expected, invalid type "${y}" found`)]:[new on(A,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:js,formatted:function(d){return js(d).length===0?[]:El(d)},resolvedImage:function(d){return js(d).length===0?[]:El(d)},padding:function(d){const A=d.key,h=d.value;if(Zi(h)==="array"){if(h.length<1||h.length>4)return[new on(A,h,`padding requires 1 to 4 values; ${h.length} values found`)];const y={type:"number"};let w=[];for(let k=0;k<h.length;k++)w=w.concat(d.validateSpec({key:`${A}[${k}]`,value:h[k],validateSpec:d.validateSpec,valueSpec:y}));return w}return Ql({key:A,value:h,valueSpec:{}})},numberArray:function(d){const A=d.key,h=d.value;if(Zi(h)==="array"){const y={type:"number"};if(h.length<1)return[new on(A,h,"array length at least 1 expected, length 0 found")];let w=[];for(let k=0;k<h.length;k++)w=w.concat(d.validateSpec({key:`${A}[${k}]`,value:h[k],validateSpec:d.validateSpec,valueSpec:y}));return w}return Ql({key:A,value:h,valueSpec:{}})},colorArray:function(d){const A=d.key,h=d.value;if(Zi(h)==="array"){if(h.length<1)return[new on(A,h,"array length at least 1 expected, length 0 found")];let y=[];for(let w=0;w<h.length;w++)y=y.concat(cA({key:`${A}[${w}]`,value:h[w]}));return y}return cA({key:A,value:h})},variableAnchorOffsetCollection:function(d){const A=d.key,h=d.value,y=Zi(h),w=d.styleSpec;if(y!=="array"||h.length<1||h.length%2!=0)return[new on(A,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let F=0;F<h.length;F+=2)k=k.concat(Ah({key:`${A}[${F}]`,value:h[F],valueSpec:w.layout_symbol["text-anchor"]})),k=k.concat(mc({key:`${A}[${F+1}]`,value:h[F+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:w}));return k},sprite:Ya,state:gl};function $u(d){const A=d.value,h=d.valueSpec,y=d.styleSpec;return d.validateSpec=$u,h.expression&&Lc(bs(A))?wu(d):h.expression&&_u(Yu(A))?El(d):h.type&&yl[h.type]?yl[h.type](d):Qa(ti({},d,{valueSpec:h.type?y[h.type]:h}))}function Bl(d){const A=d.value,h=d.key,y=js(d);return y.length||(A.indexOf("{fontstack}")===-1&&y.push(new on(h,A,'"glyphs" url must include a "{fontstack}" token')),A.indexOf("{range}")===-1&&y.push(new on(h,A,'"glyphs" url must include a "{range}" token'))),y}function Oa(d,A=Te){let h=[];return h=h.concat($u({key:"",value:d,valueSpec:A.$root,styleSpec:A,style:d,validateSpec:$u,objectElementValidators:{glyphs:Bl,"*":()=>[]}})),d.constants&&(h=h.concat(zc({key:"constants",value:d.constants}))),uh(h)}function ru(d){return function(A){return d({...A,validateSpec:$u})}}function uh(d){return[].concat(d).sort((A,h)=>A.line-h.line)}function Js(d){return function(...A){return uh(d.apply(this,A))}}Oa.source=Js(ru(il)),Oa.sprite=Js(ru(Ya)),Oa.glyphs=Js(ru(Bl)),Oa.light=Js(ru(Ps)),Oa.sky=Js(ru(Os)),Oa.terrain=Js(ru(nu)),Oa.state=Js(ru(gl)),Oa.layer=Js(ru(Bs)),Oa.filter=Js(ru(ot)),Oa.paintProperty=Js(ru(Ro)),Oa.layoutProperty=Js(ru(ai));const ch=Oa,Yl=ch.light,gf=ch.sky,hh=ch.paintProperty,iu=ch.layoutProperty;function gc(d,A){let h=!1;if(A&&A.length)for(const y of A)d.fire(new Ne(new Error(y.message))),h=!0;return h}class ou{constructor(A,h,y){const w=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;const F=new Int32Array(this.arrayBuffer);A=F[0],this.d=(h=F[1])+2*(y=F[2]);for(let Z=0;Z<this.d*this.d;Z++){const ie=F[3+Z],ue=F[3+Z+1];w.push(ie===ue?null:F.subarray(ie,ue))}const j=F[3+w.length+1];this.keys=F.subarray(F[3+w.length],j),this.bboxes=F.subarray(j),this.insert=this._insertReadonly}else{this.d=h+2*y;for(let F=0;F<this.d*this.d;F++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=A,this.padding=y,this.scale=h/A,this.uid=0;const k=y/h*A;this.min=-k,this.max=A+k}insert(A,h,y,w,k){this._forEachCell(h,y,w,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(A),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(A,h,y,w,k,F){this.cells[k].push(F)}query(A,h,y,w,k){const F=this.min,j=this.max;if(A<=F&&h<=F&&j<=y&&j<=w&&!k)return Array.prototype.slice.call(this.keys);{const Z=[];return this._forEachCell(A,h,y,w,this._queryCell,Z,{},k),Z}}_queryCell(A,h,y,w,k,F,j,Z){const ie=this.cells[k];if(ie!==null){const ue=this.keys,ge=this.bboxes;for(let De=0;De<ie.length;De++){const Le=ie[De];if(j[Le]===void 0){const Qe=4*Le;(Z?Z(ge[Qe+0],ge[Qe+1],ge[Qe+2],ge[Qe+3]):A<=ge[Qe+2]&&h<=ge[Qe+3]&&y>=ge[Qe+0]&&w>=ge[Qe+1])?(j[Le]=!0,F.push(ue[Le])):j[Le]=!1}}}}_forEachCell(A,h,y,w,k,F,j,Z){const ie=this._convertToCellCoord(A),ue=this._convertToCellCoord(h),ge=this._convertToCellCoord(y),De=this._convertToCellCoord(w);for(let Le=ie;Le<=ge;Le++)for(let Qe=ue;Qe<=De;Qe++){const Je=this.d*Qe+Le;if((!Z||Z(this._convertFromCellCoord(Le),this._convertFromCellCoord(Qe),this._convertFromCellCoord(Le+1),this._convertFromCellCoord(Qe+1)))&&k.call(this,A,h,y,w,Je,F,j,Z))return}}_convertFromCellCoord(A){return(A-this.padding)/this.scale}_convertToCellCoord(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const A=this.cells,h=3+this.cells.length+1+1;let y=0;for(let F=0;F<this.cells.length;F++)y+=this.cells[F].length;const w=new Int32Array(h+y+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let k=h;for(let F=0;F<A.length;F++){const j=A[F];w[3+F]=k,w.set(j,k),k+=j.length}return w[3+A.length]=k,w.set(this.keys,k),k+=this.keys.length,w[3+A.length+1]=k,w.set(this.bboxes,k),k+=this.bboxes.length,w.buffer}static serialize(A,h){const y=A.toArrayBuffer();return h&&h.push(y),{buffer:y}}static deserialize(A){return new ou(A.buffer)}}const ql={};function Xn(d,A,h={}){if(ql[d])throw new Error(`${d} is already registered.`);Object.defineProperty(A,"_classRegistryKey",{value:d,writeable:!1}),ql[d]={klass:A,omit:h.omit||[],shallow:h.shallow||[]}}Xn("Object",Object),Xn("TransferableGridIndex",ou),Xn("Color",Di),Xn("Error",Error),Xn("AJAXError",Yt),Xn("ResolvedImage",Ss),Xn("StylePropertyFunction",fc),Xn("StyleExpression",Uc,{omit:["_evaluator"]}),Xn("ZoomDependentExpression",Jh),Xn("ZoomConstantExpression",Xh),Xn("CompoundExpression",ga,{omit:["_evaluate"]});for(const d in ja)ja[d]._classRegistryKey||Xn(`Expression_${d}`,ja[d]);function Mo(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Ol(d){return d.$name||d.constructor._classRegistryKey}function qa(d){return!function(A){if(A===null||typeof A!="object")return!1;const h=Ol(A);return!(!h||h==="Object")}(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Mo(d)||An(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function ea(d,A){if(qa(d))return(Mo(d)||An(d))&&A&&A.push(d),ArrayBuffer.isView(d)&&A&&A.push(d.buffer),d instanceof ImageData&&A&&A.push(d.data.buffer),d;if(Array.isArray(d)){const k=[];for(const F of d)k.push(ea(F,A));return k}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const h=Ol(d);if(!h)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!ql[h])throw new Error(`${h} is not registered.`);const{klass:y}=ql[h],w=y.serialize?y.serialize(d,A):{};if(y.serialize){if(A&&w===A[A.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in d){if(!d.hasOwnProperty(k)||ql[h].omit.indexOf(k)>=0)continue;const F=d[k];w[k]=ql[h].shallow.indexOf(k)>=0?F:ea(F,A)}d instanceof Error&&(w.message=d.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(w.$name=h),w}function Su(d){if(qa(d))return d;if(Array.isArray(d))return d.map(Su);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const A=Ol(d)||"Object";if(!ql[A])throw new Error(`can't deserialize unregistered class ${A}`);const{klass:h}=ql[A];if(!h)throw new Error(`can't deserialize unregistered class ${A}`);if(h.deserialize)return h.deserialize(d);const y=Object.create(h.prototype);for(const w of Object.keys(d)){if(w==="$name")continue;const k=d[w];y[w]=ql[A].shallow.indexOf(w)>=0?k:Su(k)}return y}class RA{constructor(){this.first=!0}update(A,h){const y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=h),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=y,!0))}}const Ti={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Hangul Syllables":d=>d>=44032&&d<=55215,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function yc(d){for(const A of d)if(gs(A.charCodeAt(0)))return!0;return!1}function yf(d){for(const A of d)if(!ol(A.charCodeAt(0)))return!1;return!0}function Vu(d){const A=d.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(A.join("|"),"u")}const Nc=Vu(["Arab","Dupl","Mong","Ougr","Syrc"]);function ol(d){return!Nc.test(String.fromCodePoint(d))}const va=Vu(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function gs(d){return!(d!==746&&d!==747&&(d<4352||!(Ti["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Ti["CJK Compatibility"](d)||Ti["CJK Strokes"](d)||!(!Ti["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Ti["Enclosed CJK Letters and Months"](d)||Ti["Ideographic Description Characters"](d)||Ti.Kanbun(d)||Ti.Katakana(d)&&d!==12540||!(!Ti["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Ti["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Ti["Vertical Forms"](d)||Ti["Yijing Hexagram Symbols"](d)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(d))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(d))||va.test(String.fromCodePoint(d)))))}function $l(d){return!(gs(d)||function(A){return!!(Ti["Latin-1 Supplement"](A)&&(A===167||A===169||A===174||A===177||A===188||A===189||A===190||A===215||A===247)||Ti["General Punctuation"](A)&&(A===8214||A===8224||A===8225||A===8240||A===8241||A===8251||A===8252||A===8258||A===8263||A===8264||A===8265||A===8273)||Ti["Letterlike Symbols"](A)||Ti["Number Forms"](A)||Ti["Miscellaneous Technical"](A)&&(A>=8960&&A<=8967||A>=8972&&A<=8991||A>=8996&&A<=9e3||A===9003||A>=9085&&A<=9114||A>=9150&&A<=9165||A===9167||A>=9169&&A<=9179||A>=9186&&A<=9215)||Ti["Control Pictures"](A)&&A!==9251||Ti["Optical Character Recognition"](A)||Ti["Enclosed Alphanumerics"](A)||Ti["Geometric Shapes"](A)||Ti["Miscellaneous Symbols"](A)&&!(A>=9754&&A<=9759)||Ti["Miscellaneous Symbols and Arrows"](A)&&(A>=11026&&A<=11055||A>=11088&&A<=11097||A>=11192&&A<=11243)||Ti["CJK Symbols and Punctuation"](A)||Ti.Katakana(A)||Ti["Private Use Area"](A)||Ti["CJK Compatibility Forms"](A)||Ti["Small Form Variants"](A)||Ti["Halfwidth and Fullwidth Forms"](A)||A===8734||A===8756||A===8757||A>=9984&&A<=10087||A>=10102&&A<=10131||A===65532||A===65533)}(d))}const vc=Vu(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Cc(d){return vc.test(String.fromCodePoint(d))}function Hu(d,A){return!(!A&&Cc(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Ti.Khmer(d))}function hA(d){for(const A of d)if(Cc(A.charCodeAt(0)))return!0;return!1}const _c=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(_c.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,A){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const h=d.pluginURL,y=new Promise(k=>{this.loadScriptResolve=k});A(h);const w=new Promise(k=>setTimeout(()=>k(),this.TIMEOUT));if(yield Promise.race([y,w]),this.isParsed()){const k={pluginStatus:"loaded",pluginURL:h};return this.setState(k),k}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class os{constructor(A,h){this.zoom=A,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new RA,this.transition={})}isSupportedScript(A){return function(h,y){for(const w of h)if(!Hu(w.charCodeAt(0),y))return!1;return!0}(A,_c.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const A=this.zoom,h=A-Math.floor(A),y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*h}}}class Bh{constructor(A,h){this.property=A,this.value=h,this.expression=function(y,w){if(Lc(y))return new fc(y,w);if(_u(y)){const k=sh(y,w);if(k.result==="error")throw new Error(k.value.map(F=>`${F.key}: ${F.message}`).join(", "));return k.value}{let k=y;return w.type==="color"&&typeof y=="string"?k=Di.parse(y):w.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?w.type!=="numberArray"||typeof y!="number"&&!Array.isArray(y)?w.type!=="colorArray"||typeof y!="string"&&!Array.isArray(y)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?k=pa.parse(y):w.type==="projectionDefinition"&&typeof y=="string"&&(k=sa.parse(y)):k=Vo.parse(y):k=$o.parse(y):k=uo.parse(y),{kind:"constant",evaluate:()=>k}}}(h===void 0?A.specification.default:h,A.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(A,h,y){return this.property.possiblyEvaluate(this,A,h,y)}}class Eu{constructor(A){this.property=A,this.value=new Bh(A,void 0)}transitioned(A,h){return new vf(this.property,this.value,h,St({},A.transition,this.transition),A.now)}untransitioned(){return new vf(this.property,this.value,null,{},0)}}class DA{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)}getValue(A){return Ye(this._values[A].value.value)}setValue(A,h){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new Eu(this._values[A].property)),this._values[A].value=new Bh(this._values[A].property,h===null?void 0:Ye(h))}getTransition(A){return Ye(this._values[A].transition)}setTransition(A,h){Object.prototype.hasOwnProperty.call(this._values,A)||(this._values[A]=new Eu(this._values[A].property)),this._values[A].transition=Ye(h)||void 0}serialize(){const A={};for(const h of Object.keys(this._values)){const y=this.getValue(h);y!==void 0&&(A[h]=y);const w=this.getTransition(h);w!==void 0&&(A[`${h}-transition`]=w)}return A}transitioned(A,h){const y=new ed(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].transitioned(A,h._values[w]);return y}untransitioned(){const A=new ed(this._properties);for(const h of Object.keys(this._values))A._values[h]=this._values[h].untransitioned();return A}}class vf{constructor(A,h,y,w,k){this.property=A,this.value=h,this.begin=k+w.delay||0,this.end=this.begin+w.duration||0,A.specification.transition&&(w.delay||w.duration)&&(this.prior=y)}possiblyEvaluate(A,h,y){const w=A.now||0,k=this.value.possiblyEvaluate(A,h,y),F=this.prior;if(F){if(w>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(w<this.begin)return F.possiblyEvaluate(A,h,y);{const j=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(A,h,y),k,$e(j))}}return k}}class ed{constructor(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)}possiblyEvaluate(A,h,y){const w=new Zu(this._properties);for(const k of Object.keys(this._values))w._values[k]=this._values[k].possiblyEvaluate(A,h,y);return w}hasTransition(){for(const A of Object.keys(this._values))if(this._values[A].prior)return!0;return!1}}class Oh{constructor(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)}hasValue(A){return this._values[A].value!==void 0}getValue(A){return Ye(this._values[A].value)}setValue(A,h){this._values[A]=new Bh(this._values[A].property,h===null?void 0:Ye(h))}serialize(){const A={};for(const h of Object.keys(this._values)){const y=this.getValue(h);y!==void 0&&(A[h]=y)}return A}possiblyEvaluate(A,h,y){const w=new Zu(this._properties);for(const k of Object.keys(this._values))w._values[k]=this._values[k].possiblyEvaluate(A,h,y);return w}}class Il{constructor(A,h,y){this.property=A,this.value=h,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(A){return this.value.kind==="constant"?this.value.value:A}evaluate(A,h,y,w){return this.property.evaluate(this.value,this.parameters,A,h,y,w)}}class Zu{constructor(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)}get(A){return this._values[A]}}class vr{constructor(A){this.specification=A}possiblyEvaluate(A,h){if(A.isDataDriven())throw new Error("Value should not be data driven");return A.expression.evaluate(h)}interpolate(A,h,y){const w=BA[this.specification.type];return w?w(A,h,y):A}}class ri{constructor(A,h){this.specification=A,this.overrides=h}possiblyEvaluate(A,h,y,w){return new Il(this,A.expression.kind==="constant"||A.expression.kind==="camera"?{kind:"constant",value:A.expression.evaluate(h,null,{},y,w)}:A.expression,h)}interpolate(A,h,y){if(A.value.kind!=="constant"||h.value.kind!=="constant")return A;if(A.value.value===void 0||h.value.value===void 0)return new Il(this,{kind:"constant",value:void 0},A.parameters);const w=BA[this.specification.type];if(w){const k=w(A.value.value,h.value.value,y);return new Il(this,{kind:"constant",value:k},A.parameters)}return A}evaluate(A,h,y,w,k,F){return A.kind==="constant"?A.value:A.evaluate(h,y,w,k,F)}}class bc extends ri{possiblyEvaluate(A,h,y,w){if(A.value===void 0)return new Il(this,{kind:"constant",value:void 0},h);if(A.expression.kind==="constant"){const k=A.expression.evaluate(h,null,{},y,w),F=A.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,j=this._calculate(F,F,F,h);return new Il(this,{kind:"constant",value:j},h)}if(A.expression.kind==="camera"){const k=this._calculate(A.expression.evaluate({zoom:h.zoom-1}),A.expression.evaluate({zoom:h.zoom}),A.expression.evaluate({zoom:h.zoom+1}),h);return new Il(this,{kind:"constant",value:k},h)}return new Il(this,A.expression,h)}evaluate(A,h,y,w,k,F){if(A.kind==="source"){const j=A.evaluate(h,y,w,k,F);return this._calculate(j,j,j,h)}return A.kind==="composite"?this._calculate(A.evaluate({zoom:Math.floor(h.zoom)-1},y,w),A.evaluate({zoom:Math.floor(h.zoom)},y,w),A.evaluate({zoom:Math.floor(h.zoom)+1},y,w),h):A.value}_calculate(A,h,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:A,to:h}:{from:y,to:h}}interpolate(A){return A}}class Tl{constructor(A){this.specification=A}possiblyEvaluate(A,h,y,w){if(A.value!==void 0){if(A.expression.kind==="constant"){const k=A.expression.evaluate(h,null,{},y,w);return this._calculate(k,k,k,h)}return this._calculate(A.expression.evaluate(new os(Math.floor(h.zoom-1),h)),A.expression.evaluate(new os(Math.floor(h.zoom),h)),A.expression.evaluate(new os(Math.floor(h.zoom+1),h)),h)}}_calculate(A,h,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:A,to:h}:{from:y,to:h}}interpolate(A){return A}}class Xu{constructor(A){this.specification=A}possiblyEvaluate(A,h,y,w){return!!A.expression.evaluate(h,null,{},y,w)}interpolate(){return!1}}class Ws{constructor(A){this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in A){const y=A[h];y.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new Bh(y,void 0),k=this.defaultTransitionablePropertyValues[h]=new Eu(y);this.defaultTransitioningPropertyValues[h]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}Xn("DataDrivenProperty",ri),Xn("DataConstantProperty",vr),Xn("CrossFadedDataDrivenProperty",bc),Xn("CrossFadedProperty",Tl),Xn("ColorRampProperty",Xu);const Bu="-transition";class ss extends Ve{constructor(A,h){if(super(),this.id=A.id,this.type=A.type,this._featureFilter={filter:()=>!0,needGeometry:!1},A.type!=="custom"&&(this.metadata=A.metadata,this.minzoom=A.minzoom,this.maxzoom=A.maxzoom,A.type!=="background"&&(this.source=A.source,this.sourceLayer=A["source-layer"],this.filter=A.filter),h.layout&&(this._unevaluatedLayout=new Oh(h.layout)),h.paint)){this._transitionablePaint=new DA(h.paint);for(const y in A.paint)this.setPaintProperty(y,A.paint[y],{validate:!1});for(const y in A.layout)this.setLayoutProperty(y,A.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zu(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(A){return A==="visibility"?this.visibility:this._unevaluatedLayout.getValue(A)}setLayoutProperty(A,h,y={}){h!=null&&this._validate(iu,`layers.${this.id}.layout.${A}`,A,h,y)||(A!=="visibility"?this._unevaluatedLayout.setValue(A,h):this.visibility=h)}getPaintProperty(A){return A.endsWith(Bu)?this._transitionablePaint.getTransition(A.slice(0,-11)):this._transitionablePaint.getValue(A)}setPaintProperty(A,h,y={}){if(h!=null&&this._validate(hh,`layers.${this.id}.paint.${A}`,A,h,y))return!1;if(A.endsWith(Bu))return this._transitionablePaint.setTransition(A.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[A],k=w.property.specification["property-type"]==="cross-faded-data-driven",F=w.value.isDataDriven(),j=w.value;this._transitionablePaint.setValue(A,h),this._handleSpecialPaintPropertyUpdate(A);const Z=this._transitionablePaint._values[A].value;return Z.isDataDriven()||F||k||this._handleOverridablePaintPropertyUpdate(A,j,Z)}}_handleSpecialPaintPropertyUpdate(A){}_handleOverridablePaintPropertyUpdate(A,h,y){return!1}isHidden(A){return!!(this.minzoom&&A<this.minzoom)||!!(this.maxzoom&&A>=this.maxzoom)||this.visibility==="none"}updateTransitions(A){this._transitioningPaint=this._transitionablePaint.transitioned(A,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(A,h){A.getCrossfadeParameters&&(this._crossfadeParameters=A.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(A,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(A,void 0,h)}serialize(){const A={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(A.layout=A.layout||{},A.layout.visibility=this.visibility),Re(A,(h,y)=>!(h===void 0||y==="layout"&&!Object.keys(h).length||y==="paint"&&!Object.keys(h).length))}_validate(A,h,y,w,k={}){return(!k||k.validate!==!1)&&gc(this,A.call(ch,{key:h,layerType:this.type,objectKey:y,value:w,styleSpec:Te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const A in this.paint._values){const h=this.paint.get(A);if(h instanceof Il&&hc(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Ia={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dA{constructor(A,h){this._structArray=A,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Do{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(A,h){return A._trim(),h&&(A.isTransferred=!0,h.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}}static deserialize(A){const h=Object.create(this.prototype);return h.arrayBuffer=A.arrayBuffer,h.length=A.length,h.capacity=A.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(A){this.reserve(A),this.length=A}reserve(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function as(d,A=1){let h=0,y=0;return{members:d.map(w=>{const k=Ia[w.type].BYTES_PER_ELEMENT,F=h=su(h,Math.max(A,k)),j=w.components||1;return y=Math.max(y,k),h+=k*j,{name:w.name,type:w.type,components:j,offset:F}}),size:su(h,Math.max(y,A)),alignment:A}}function su(d,A){return Math.ceil(d/A)*A}class Ju extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h){const y=this.length;return this.resize(y+1),this.emplace(y,A,h)}emplace(A,h,y){const w=2*A;return this.int16[w+0]=h,this.int16[w+1]=y,A}}Ju.prototype.bytesPerElement=4,Xn("StructArrayLayout2i4",Ju);class KA extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,h,y)}emplace(A,h,y,w){const k=3*A;return this.int16[k+0]=h,this.int16[k+1]=y,this.int16[k+2]=w,A}}KA.prototype.bytesPerElement=6,Xn("StructArrayLayout3i6",KA);class sl extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y,w){const k=this.length;return this.resize(k+1),this.emplace(k,A,h,y,w)}emplace(A,h,y,w,k){const F=4*A;return this.int16[F+0]=h,this.int16[F+1]=y,this.int16[F+2]=w,this.int16[F+3]=k,A}}sl.prototype.bytesPerElement=8,Xn("StructArrayLayout4i8",sl);class Ih extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F){const j=this.length;return this.resize(j+1),this.emplace(j,A,h,y,w,k,F)}emplace(A,h,y,w,k,F,j){const Z=6*A;return this.int16[Z+0]=h,this.int16[Z+1]=y,this.int16[Z+2]=w,this.int16[Z+3]=k,this.int16[Z+4]=F,this.int16[Z+5]=j,A}}Ih.prototype.bytesPerElement=12,Xn("StructArrayLayout2i4i12",Ih);class Gc extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F){const j=this.length;return this.resize(j+1),this.emplace(j,A,h,y,w,k,F)}emplace(A,h,y,w,k,F,j){const Z=4*A,ie=8*A;return this.int16[Z+0]=h,this.int16[Z+1]=y,this.uint8[ie+4]=w,this.uint8[ie+5]=k,this.uint8[ie+6]=F,this.uint8[ie+7]=j,A}}Gc.prototype.bytesPerElement=8,Xn("StructArrayLayout2i4ub8",Gc);class fA extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,h){const y=this.length;return this.resize(y+1),this.emplace(y,A,h)}emplace(A,h,y){const w=2*A;return this.float32[w+0]=h,this.float32[w+1]=y,A}}fA.prototype.bytesPerElement=8,Xn("StructArrayLayout2f8",fA);class kl extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F,j,Z,ie,ue){const ge=this.length;return this.resize(ge+1),this.emplace(ge,A,h,y,w,k,F,j,Z,ie,ue)}emplace(A,h,y,w,k,F,j,Z,ie,ue,ge){const De=10*A;return this.uint16[De+0]=h,this.uint16[De+1]=y,this.uint16[De+2]=w,this.uint16[De+3]=k,this.uint16[De+4]=F,this.uint16[De+5]=j,this.uint16[De+6]=Z,this.uint16[De+7]=ie,this.uint16[De+8]=ue,this.uint16[De+9]=ge,A}}kl.prototype.bytesPerElement=20,Xn("StructArrayLayout10ui20",kl);class O extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F,j,Z,ie,ue,ge,De){const Le=this.length;return this.resize(Le+1),this.emplace(Le,A,h,y,w,k,F,j,Z,ie,ue,ge,De)}emplace(A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le){const Qe=12*A;return this.int16[Qe+0]=h,this.int16[Qe+1]=y,this.int16[Qe+2]=w,this.int16[Qe+3]=k,this.uint16[Qe+4]=F,this.uint16[Qe+5]=j,this.uint16[Qe+6]=Z,this.uint16[Qe+7]=ie,this.int16[Qe+8]=ue,this.int16[Qe+9]=ge,this.int16[Qe+10]=De,this.int16[Qe+11]=Le,A}}O.prototype.bytesPerElement=24,Xn("StructArrayLayout4i4ui4i24",O);class a extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,h,y)}emplace(A,h,y,w){const k=3*A;return this.float32[k+0]=h,this.float32[k+1]=y,this.float32[k+2]=w,A}}a.prototype.bytesPerElement=12,Xn("StructArrayLayout3f12",a);class c extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(A){const h=this.length;return this.resize(h+1),this.emplace(h,A)}emplace(A,h){return this.uint32[1*A+0]=h,A}}c.prototype.bytesPerElement=4,Xn("StructArrayLayout1ul4",c);class v extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F,j,Z,ie){const ue=this.length;return this.resize(ue+1),this.emplace(ue,A,h,y,w,k,F,j,Z,ie)}emplace(A,h,y,w,k,F,j,Z,ie,ue){const ge=10*A,De=5*A;return this.int16[ge+0]=h,this.int16[ge+1]=y,this.int16[ge+2]=w,this.int16[ge+3]=k,this.int16[ge+4]=F,this.int16[ge+5]=j,this.uint32[De+3]=Z,this.uint16[ge+8]=ie,this.uint16[ge+9]=ue,A}}v.prototype.bytesPerElement=20,Xn("StructArrayLayout6i1ul2ui20",v);class M extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F){const j=this.length;return this.resize(j+1),this.emplace(j,A,h,y,w,k,F)}emplace(A,h,y,w,k,F,j){const Z=6*A;return this.int16[Z+0]=h,this.int16[Z+1]=y,this.int16[Z+2]=w,this.int16[Z+3]=k,this.int16[Z+4]=F,this.int16[Z+5]=j,A}}M.prototype.bytesPerElement=12,Xn("StructArrayLayout2i2i2i12",M);class I extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k){const F=this.length;return this.resize(F+1),this.emplace(F,A,h,y,w,k)}emplace(A,h,y,w,k,F){const j=4*A,Z=8*A;return this.float32[j+0]=h,this.float32[j+1]=y,this.float32[j+2]=w,this.int16[Z+6]=k,this.int16[Z+7]=F,A}}I.prototype.bytesPerElement=16,Xn("StructArrayLayout2f1f2i16",I);class z extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F){const j=this.length;return this.resize(j+1),this.emplace(j,A,h,y,w,k,F)}emplace(A,h,y,w,k,F,j){const Z=16*A,ie=4*A,ue=8*A;return this.uint8[Z+0]=h,this.uint8[Z+1]=y,this.float32[ie+1]=w,this.float32[ie+2]=k,this.int16[ue+6]=F,this.int16[ue+7]=j,A}}z.prototype.bytesPerElement=16,Xn("StructArrayLayout2ub2f2i16",z);class Y extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,h,y)}emplace(A,h,y,w){const k=3*A;return this.uint16[k+0]=h,this.uint16[k+1]=y,this.uint16[k+2]=w,A}}Y.prototype.bytesPerElement=6,Xn("StructArrayLayout3ui6",Y);class ee extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t)}emplace(A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t,Wt){const It=24*A,Fe=12*A,at=48*A;return this.int16[It+0]=h,this.int16[It+1]=y,this.uint16[It+2]=w,this.uint16[It+3]=k,this.uint32[Fe+2]=F,this.uint32[Fe+3]=j,this.uint32[Fe+4]=Z,this.uint16[It+10]=ie,this.uint16[It+11]=ue,this.uint16[It+12]=ge,this.float32[Fe+7]=De,this.float32[Fe+8]=Le,this.uint8[at+36]=Qe,this.uint8[at+37]=Je,this.uint8[at+38]=At,this.uint32[Fe+10]=_t,this.int16[It+22]=Wt,A}}ee.prototype.bytesPerElement=48,Xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ee);class Ae extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t,Wt,It,Fe,at,Pt,cn,zn,yn,En,tr,Nn){const er=this.length;return this.resize(er+1),this.emplace(er,A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t,Wt,It,Fe,at,Pt,cn,zn,yn,En,tr,Nn)}emplace(A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t,Wt,It,Fe,at,Pt,cn,zn,yn,En,tr,Nn,er){const Bn=32*A,Qr=16*A;return this.int16[Bn+0]=h,this.int16[Bn+1]=y,this.int16[Bn+2]=w,this.int16[Bn+3]=k,this.int16[Bn+4]=F,this.int16[Bn+5]=j,this.int16[Bn+6]=Z,this.int16[Bn+7]=ie,this.uint16[Bn+8]=ue,this.uint16[Bn+9]=ge,this.uint16[Bn+10]=De,this.uint16[Bn+11]=Le,this.uint16[Bn+12]=Qe,this.uint16[Bn+13]=Je,this.uint16[Bn+14]=At,this.uint16[Bn+15]=_t,this.uint16[Bn+16]=Wt,this.uint16[Bn+17]=It,this.uint16[Bn+18]=Fe,this.uint16[Bn+19]=at,this.uint16[Bn+20]=Pt,this.uint16[Bn+21]=cn,this.uint16[Bn+22]=zn,this.uint32[Qr+12]=yn,this.float32[Qr+13]=En,this.float32[Qr+14]=tr,this.uint16[Bn+30]=Nn,this.uint16[Bn+31]=er,A}}Ae.prototype.bytesPerElement=64,Xn("StructArrayLayout8i15ui1ul2f2ui64",Ae);class de extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A){const h=this.length;return this.resize(h+1),this.emplace(h,A)}emplace(A,h){return this.float32[1*A+0]=h,A}}de.prototype.bytesPerElement=4,Xn("StructArrayLayout1f4",de);class Oe extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,h,y)}emplace(A,h,y,w){const k=3*A;return this.uint16[6*A+0]=h,this.float32[k+1]=y,this.float32[k+2]=w,A}}Oe.prototype.bytesPerElement=12,Xn("StructArrayLayout1ui2f12",Oe);class Be extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,A,h,y)}emplace(A,h,y,w){const k=4*A;return this.uint32[2*A+0]=h,this.uint16[k+2]=y,this.uint16[k+3]=w,A}}Be.prototype.bytesPerElement=8,Xn("StructArrayLayout1ul2ui8",Be);class ze extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A,h){const y=this.length;return this.resize(y+1),this.emplace(y,A,h)}emplace(A,h,y){const w=2*A;return this.uint16[w+0]=h,this.uint16[w+1]=y,A}}ze.prototype.bytesPerElement=4,Xn("StructArrayLayout2ui4",ze);class He extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(A){const h=this.length;return this.resize(h+1),this.emplace(h,A)}emplace(A,h){return this.uint16[1*A+0]=h,A}}He.prototype.bytesPerElement=2,Xn("StructArrayLayout1ui2",He);class ft extends Do{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(A,h,y,w){const k=this.length;return this.resize(k+1),this.emplace(k,A,h,y,w)}emplace(A,h,y,w,k){const F=4*A;return this.float32[F+0]=h,this.float32[F+1]=y,this.float32[F+2]=w,this.float32[F+3]=k,A}}ft.prototype.bytesPerElement=16,Xn("StructArrayLayout4f16",ft);class dt extends dA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new U(this.anchorPointX,this.anchorPointY)}}dt.prototype.size=20;class pt extends v{get(A){return new dt(this,A)}}Xn("CollisionBoxArray",pt);class wt extends dA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(A){this._structArray.uint8[this._pos1+37]=A}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(A){this._structArray.uint8[this._pos1+38]=A}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(A){this._structArray.uint32[this._pos4+10]=A}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}wt.prototype.size=48;class Tt extends ee{get(A){return new wt(this,A)}}Xn("PlacedSymbolArray",Tt);class Mt extends dA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(A){this._structArray.uint32[this._pos4+12]=A}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Mt.prototype.size=64;class kt extends Ae{get(A){return new Mt(this,A)}}Xn("SymbolInstanceArray",kt);class Kt extends de{getoffsetX(A){return this.float32[1*A+0]}}Xn("GlyphOffsetArray",Kt);class zt extends KA{getx(A){return this.int16[3*A+0]}gety(A){return this.int16[3*A+1]}gettileUnitDistanceFromAnchor(A){return this.int16[3*A+2]}}Xn("SymbolLineVertexArray",zt);class sn extends dA{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}sn.prototype.size=12;class bn extends Oe{get(A){return new sn(this,A)}}Xn("TextAnchorOffsetArray",bn);class en extends dA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}en.prototype.size=8;class ln extends Be{get(A){return new en(this,A)}}Xn("FeatureIndexArray",ln);class Cn extends Ju{}class Ar extends Ju{}class cr extends Ju{}class kn extends Ih{}class Br extends Gc{}class Hr extends fA{}class Xi extends kl{}class ts extends O{}class Ko extends a{}class jo extends c{}class Rs extends M{}class ho extends z{}class ji extends Y{}class aa extends ze{}const Ta=as([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ca}=Ta;class ao{constructor(A=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=A}prepareSegment(A,h,y,w){const k=this.segments[this.segments.length-1];return A>ao.MAX_VERTEX_ARRAY_LENGTH&&yt(`Max vertices per segment is ${ao.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${A}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ao.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!k||k.vertexLength+A>ao.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==w?this.createNewSegment(h,y,w):k}createNewSegment(A,h,y){const w={vertexOffset:A.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(w.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(A,h,y){return this.prepareSegment(0,A,h,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const A of this.segments)for(const h in A.vaos)A.vaos[h].destroy()}static simpleSegment(A,h,y,w){return new ao([{vertexOffset:A,primitiveOffset:h,vertexLength:y,primitiveLength:w,vaos:{},sortKey:0}])}}function Vl(d,A){return 256*(d=ut(Math.floor(d),0,255))+ut(Math.floor(A),0,255)}ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xn("SegmentVector",ao);const Hl=as([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var pA,Ou,FA,au={exports:{}},Zl={exports:{}},mA={exports:{}},ec=function(){if(FA)return au.exports;FA=1;var d=(pA||(pA=1,Zl.exports=function(h,y){var w,k,F,j,Z,ie,ue,ge;for(k=h.length-(w=3&h.length),F=y,Z=3432918353,ie=461845907,ge=0;ge<k;)ue=255&h.charCodeAt(ge)|(255&h.charCodeAt(++ge))<<8|(255&h.charCodeAt(++ge))<<16|(255&h.charCodeAt(++ge))<<24,++ge,F=27492+(65535&(j=5*(65535&(F=(F^=ue=(65535&(ue=(ue=(65535&ue)*Z+(((ue>>>16)*Z&65535)<<16)&4294967295)<<15|ue>>>17))*ie+(((ue>>>16)*ie&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(ue=0,w){case 3:ue^=(255&h.charCodeAt(ge+2))<<16;case 2:ue^=(255&h.charCodeAt(ge+1))<<8;case 1:F^=ue=(65535&(ue=(ue=(65535&(ue^=255&h.charCodeAt(ge)))*Z+(((ue>>>16)*Z&65535)<<16)&4294967295)<<15|ue>>>17))*ie+(((ue>>>16)*ie&65535)<<16)&4294967295}return F^=h.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}),Zl.exports),A=(Ou||(Ou=1,mA.exports=function(h,y){for(var w,k=h.length,F=y^k,j=0;k>=4;)w=1540483477*(65535&(w=255&h.charCodeAt(j)|(255&h.charCodeAt(++j))<<8|(255&h.charCodeAt(++j))<<16|(255&h.charCodeAt(++j))<<24))+((1540483477*(w>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),k-=4,++j;switch(k){case 3:F^=(255&h.charCodeAt(j+2))<<16;case 2:F^=(255&h.charCodeAt(j+1))<<8;case 1:F=1540483477*(65535&(F^=255&h.charCodeAt(j)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}),mA.exports);return au.exports=d,au.exports.murmur3=d,au.exports.murmur2=A,au.exports}(),Xl=f(ec);class jc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(A,h,y,w){this.ids.push(ka(A)),this.positions.push(h,y,w)}getPositions(A){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ka(A);let y=0,w=this.ids.length-1;for(;y<w;){const F=y+w>>1;this.ids[F]>=h?w=F:y=F+1}const k=[];for(;this.ids[y]===h;)k.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return k}static serialize(A,h){const y=new Float64Array(A.ids),w=new Uint32Array(A.positions);return Qs(y,w,0,y.length-1),h&&h.push(y.buffer,w.buffer),{ids:y,positions:w}}static deserialize(A){const h=new jc;return h.ids=A.ids,h.positions=A.positions,h.indexed=!0,h}}function ka(d){const A=+d;return!isNaN(A)&&A<=Number.MAX_SAFE_INTEGER?A:Xl(String(d))}function Qs(d,A,h,y){for(;h<y;){const w=d[h+y>>1];let k=h-1,F=y+1;for(;;){do k++;while(d[k]<w);do F--;while(d[F]>w);if(k>=F)break;Pl(d,k,F),Pl(A,3*k,3*F),Pl(A,3*k+1,3*F+1),Pl(A,3*k+2,3*F+2)}F-h<y-F?(Qs(d,A,h,F),h=F+1):(Qs(d,A,F+1,y),y=F)}}function Pl(d,A,h){const y=d[A];d[A]=d[h],d[h]=y}Xn("FeaturePositionMap",jc);class ys{constructor(A,h){this.gl=A.gl,this.location=h}}class Cf extends ys{constructor(A,h){super(A,h),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1f(this.location,A))}}class Bd extends ys{constructor(A,h){super(A,h),this.current=[0,0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]&&A[3]===this.current[3]||(this.current=A,this.gl.uniform4f(this.location,A[0],A[1],A[2],A[3]))}}class Od extends ys{constructor(A,h){super(A,h),this.current=Di.transparent}set(A){A.r===this.current.r&&A.g===this.current.g&&A.b===this.current.b&&A.a===this.current.a||(this.current=A,this.gl.uniform4f(this.location,A.r,A.g,A.b,A.a))}}const gA=new Float32Array(16);function LA(d){return[Vl(255*d.r,255*d.g),Vl(255*d.b,255*d.a)]}class Wc{constructor(A,h,y){this.value=A,this.uniformNames=h.map(w=>`u_${w}`),this.type=y}setUniform(A,h,y){A.set(y.constantOr(this.value))}getBinding(A,h,y){return this.type==="color"?new Od(A,h):new Cf(A,h)}}class Iu{constructor(A,h){this.uniformNames=h.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(A,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=A.tlbr}setUniform(A,h,y,w){const k=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;k&&A.set(k)}getBinding(A,h,y){return y.substr(0,9)==="u_pattern"?new Bd(A,h):new Cf(A,h)}}class yA{constructor(A,h,y,w){this.expression=A,this.type=y,this.maxValue=0,this.paintVertexAttributes=h.map(k=>({name:`a_${k}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(A,h,y,w,k){const F=this.paintVertexArray.length,j=this.expression.evaluate(new os(0),h,{},w,[],k);this.paintVertexArray.resize(A),this._setPaintValue(F,A,j)}updatePaintArray(A,h,y,w){const k=this.expression.evaluate({zoom:0},y,w);this._setPaintValue(A,h,k)}_setPaintValue(A,h,y){if(this.type==="color"){const w=LA(y);for(let k=A;k<h;k++)this.paintVertexArray.emplace(k,w[0],w[1])}else{for(let w=A;w<h;w++)this.paintVertexArray.emplace(w,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pa{constructor(A,h,y,w,k,F){this.expression=A,this.uniformNames=h.map(j=>`u_${j}_t`),this.type=y,this.useIntegerZoom=w,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=h.map(j=>({name:`a_${j}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(A,h,y,w,k){const F=this.expression.evaluate(new os(this.zoom),h,{},w,[],k),j=this.expression.evaluate(new os(this.zoom+1),h,{},w,[],k),Z=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Z,A,F,j)}updatePaintArray(A,h,y,w){const k=this.expression.evaluate({zoom:this.zoom},y,w),F=this.expression.evaluate({zoom:this.zoom+1},y,w);this._setPaintValue(A,h,k,F)}_setPaintValue(A,h,y,w){if(this.type==="color"){const k=LA(y),F=LA(w);for(let j=A;j<h;j++)this.paintVertexArray.emplace(j,k[0],k[1],F[0],F[1])}else{for(let k=A;k<h;k++)this.paintVertexArray.emplace(k,y,w);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(w))}}upload(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(A,h){const y=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=ut(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);A.set(w)}getBinding(A,h,y){return new Cf(A,h)}}class ta{constructor(A,h,y,w,k,F){this.expression=A,this.type=h,this.useIntegerZoom=y,this.zoom=w,this.layerId=F,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(A,h,y){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(w,A,h.patterns&&h.patterns[this.layerId],y)}updatePaintArray(A,h,y,w,k){this._setPaintValues(A,h,y.patterns&&y.patterns[this.layerId],k)}_setPaintValues(A,h,y,w){if(!w||!y)return;const{min:k,mid:F,max:j}=y,Z=w[k],ie=w[F],ue=w[j];if(Z&&ie&&ue)for(let ge=A;ge<h;ge++)this.zoomInPaintVertexArray.emplace(ge,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],ie.pixelRatio,Z.pixelRatio),this.zoomOutPaintVertexArray.emplace(ge,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],ue.tl[0],ue.tl[1],ue.br[0],ue.br[1],ie.pixelRatio,ue.pixelRatio)}upload(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Hl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Hl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Th{constructor(A,h,y){this.binders={},this._buffers=[];const w=[];for(const k in A.paint._values){if(!y(k))continue;const F=A.paint.get(k);if(!(F instanceof Il&&hc(F.property.specification)))continue;const j=Id(k,A.type),Z=F.value,ie=F.property.specification.type,ue=F.property.useIntegerZoom,ge=F.property.specification["property-type"],De=ge==="cross-faded"||ge==="cross-faded-data-driven";if(Z.kind==="constant")this.binders[k]=De?new Iu(Z.value,j):new Wc(Z.value,j,ie),w.push(`/u_${k}`);else if(Z.kind==="source"||De){const Le=td(k,ie,"source");this.binders[k]=De?new ta(Z,ie,ue,h,Le,A.id):new yA(Z,j,ie,Le),w.push(`/a_${k}`)}else{const Le=td(k,ie,"composite");this.binders[k]=new Pa(Z,j,ie,ue,h,Le),w.push(`/z_${k}`)}}this.cacheKey=w.sort().join("")}getMaxValue(A){const h=this.binders[A];return h instanceof yA||h instanceof Pa?h.maxValue:0}populatePaintArrays(A,h,y,w,k){for(const F in this.binders){const j=this.binders[F];(j instanceof yA||j instanceof Pa||j instanceof ta)&&j.populatePaintArray(A,h,y,w,k)}}setConstantPatternPositions(A,h){for(const y in this.binders){const w=this.binders[y];w instanceof Iu&&w.setConstantPatternPositions(A,h)}}updatePaintArrays(A,h,y,w,k){let F=!1;for(const j in A){const Z=h.getPositions(j);for(const ie of Z){const ue=y.feature(ie.index);for(const ge in this.binders){const De=this.binders[ge];if((De instanceof yA||De instanceof Pa||De instanceof ta)&&De.expression.isStateDependent===!0){const Le=w.paint.get(ge);De.expression=Le.value,De.updatePaintArray(ie.start,ie.end,ue,A[j],k),F=!0}}}}return F}defines(){const A=[];for(const h in this.binders){const y=this.binders[h];(y instanceof Wc||y instanceof Iu)&&A.push(...y.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return A}getBinderAttributes(){const A=[];for(const h in this.binders){const y=this.binders[h];if(y instanceof yA||y instanceof Pa)for(let w=0;w<y.paintVertexAttributes.length;w++)A.push(y.paintVertexAttributes[w].name);else if(y instanceof ta)for(let w=0;w<Hl.members.length;w++)A.push(Hl.members[w].name)}return A}getBinderUniforms(){const A=[];for(const h in this.binders){const y=this.binders[h];if(y instanceof Wc||y instanceof Iu||y instanceof Pa)for(const w of y.uniformNames)A.push(w)}return A}getPaintVertexBuffers(){return this._buffers}getUniforms(A,h){const y=[];for(const w in this.binders){const k=this.binders[w];if(k instanceof Wc||k instanceof Iu||k instanceof Pa){for(const F of k.uniformNames)if(h[F]){const j=k.getBinding(A,h[F],F);y.push({name:F,property:w,binding:j})}}}return y}setUniforms(A,h,y,w){for(const{name:k,property:F,binding:j}of h)this.binders[F].setUniform(j,w,y.get(F),k)}updatePaintBuffers(A){this._buffers=[];for(const h in this.binders){const y=this.binders[h];if(A&&y instanceof ta){const w=A.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(y instanceof yA||y instanceof Pa)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(A){for(const h in this.binders){const y=this.binders[h];(y instanceof yA||y instanceof Pa||y instanceof ta)&&y.upload(A)}this.updatePaintBuffers()}destroy(){for(const A in this.binders){const h=this.binders[A];(h instanceof yA||h instanceof Pa||h instanceof ta)&&h.destroy()}}}class Tu{constructor(A,h,y=()=>!0){this.programConfigurations={};for(const w of A)this.programConfigurations[w.id]=new Th(w,h,y);this.needsUpload=!1,this._featureMap=new jc,this._bufferOffset=0}populatePaintArrays(A,h,y,w,k,F){for(const j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(A,h,w,k,F);h.id!==void 0&&this._featureMap.add(h.id,y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0}updatePaintArrays(A,h,y,w){for(const k of y)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(A,this._featureMap,h,k,w)||this.needsUpload}get(A){return this.programConfigurations[A]}upload(A){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(A);this.needsUpload=!1}}destroy(){for(const A in this.programConfigurations)this.programConfigurations[A].destroy()}}function Id(d,A){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${A}-`,"").replace(/-/g,"_")]}function td(d,A,h){const y={color:{source:fA,composite:ft},number:{source:de,composite:fA}},w=function(k){return{"line-pattern":{source:Xi,composite:Xi},"fill-pattern":{source:Xi,composite:Xi},"fill-extrusion-pattern":{source:Xi,composite:Xi}}[k]}(d);return w&&w[h]||y[A][h]}Xn("ConstantBinder",Wc),Xn("CrossFadedConstantBinder",Iu),Xn("SourceExpressionBinder",yA),Xn("CrossFadedCompositeBinder",ta),Xn("CompositeExpressionBinder",Pa),Xn("ProgramConfiguration",Th,{omit:["_buffers"]}),Xn("ProgramConfigurationSet",Tu);const nd=Math.pow(2,14)-1,Fp=-nd-1;function ku(d){const A=it/d.extent,h=d.loadGeometry();for(let y=0;y<h.length;y++){const w=h[y];for(let k=0;k<w.length;k++){const F=w[k],j=Math.round(F.x*A),Z=Math.round(F.y*A);F.x=ut(j,Fp,nd),F.y=ut(Z,Fp,nd),(j<F.x||j>F.x+1||Z<F.y||Z>F.y+1)&&yt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function dh(d,A){return{type:d.type,id:d.id,properties:d.properties,geometry:A?ku(d):[]}}const Td=-32768;function gm(d,A,h,y,w){d.emplaceBack(Td+8*A+y,Td+8*h+w)}class kh{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(h=>h.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Ar,this.indexArray=new ji,this.segments=new ao,this.programConfigurations=new Tu(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(A,h,y){const w=this.layers[0],k=[];let F=null,j=!1,Z=w.type==="heatmap";if(w.type==="circle"){const ue=w;F=ue.layout.get("circle-sort-key"),j=!F.isConstant(),Z=Z||ue.paint.get("circle-pitch-alignment")==="map"}const ie=Z?h.subdivisionGranularity.circle:1;for(const{feature:ue,id:ge,index:De,sourceLayerIndex:Le}of A){const Qe=this.layers[0]._featureFilter.needGeometry,Je=dh(ue,Qe);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),Je,y))continue;const At=j?F.evaluate(Je,{},y):void 0,_t={id:ge,properties:ue.properties,type:ue.type,sourceLayerIndex:Le,index:De,geometry:Qe?Je.geometry:ku(ue),patterns:{},sortKey:At};k.push(_t)}j&&k.sort((ue,ge)=>ue.sortKey-ge.sortKey);for(const ue of k){const{geometry:ge,index:De,sourceLayerIndex:Le}=ue,Qe=A[De].feature;this.addFeature(ue,ge,De,y,ie),h.featureIndex.insert(Qe,ge,De,Le,this.index)}}update(A,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,h,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Ca),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(A,h,y,w,k=1){let F;switch(k){case 1:F=[0,7];break;case 3:F=[0,2,5,7];break;case 5:F=[0,1,3,4,6,7];break;case 7:F=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${k}; valid values are 1, 3, 5, 7.`)}const j=F.length;for(const Z of h)for(const ie of Z){const ue=ie.x,ge=ie.y;if(ue<0||ue>=it||ge<0||ge>=it)continue;const De=this.segments.prepareSegment(j*j,this.layoutVertexArray,this.indexArray,A.sortKey),Le=De.vertexLength;for(let Qe=0;Qe<j;Qe++)for(let Je=0;Je<j;Je++)gm(this.layoutVertexArray,ue,ge,F[Je],F[Qe]);for(let Qe=0;Qe<j-1;Qe++)for(let Je=0;Je<j-1;Je++){const At=Le+Qe*j+Je,_t=Le+(Qe+1)*j+Je;this.indexArray.emplaceBack(At,_t+1,At+1),this.indexArray.emplaceBack(At,_t,_t+1)}De.vertexLength+=j*j,De.primitiveLength+=(j-1)*(j-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,{},w)}}function _f(d,A){for(let h=0;h<d.length;h++)if(wo(A,d[h]))return!0;for(let h=0;h<A.length;h++)if(wo(d,A[h]))return!0;return!!kd(d,A)}function Vf(d,A,h){return!!wo(d,A)||!!Rl(A,d,h)}function Lp(d,A){if(d.length===1)return Up(A,d[0]);for(let h=0;h<A.length;h++){const y=A[h];for(let w=0;w<y.length;w++)if(wo(d,y[w]))return!0}for(let h=0;h<d.length;h++)if(Up(A,d[h]))return!0;for(let h=0;h<A.length;h++)if(kd(d,A[h]))return!0;return!1}function rd(d,A,h){if(d.length>1){if(kd(d,A))return!0;for(let y=0;y<A.length;y++)if(Rl(A[y],d,h))return!0}for(let y=0;y<d.length;y++)if(Rl(d[y],A,h))return!0;return!1}function kd(d,A){if(d.length===0||A.length===0)return!1;for(let h=0;h<d.length-1;h++){const y=d[h],w=d[h+1];for(let k=0;k<A.length-1;k++)if(Jl(y,w,A[k],A[k+1]))return!0}return!1}function Jl(d,A,h,y){return Et(d,h,y)!==Et(A,h,y)&&Et(d,A,h)!==Et(d,A,y)}function Rl(d,A,h){const y=h*h;if(A.length===1)return d.distSqr(A[0])<y;for(let w=1;w<A.length;w++)if(ym(d,A[w-1],A[w])<y)return!0;return!1}function ym(d,A,h){const y=A.distSqr(h);if(y===0)return d.distSqr(A);const w=((d.x-A.x)*(h.x-A.x)+(d.y-A.y)*(h.y-A.y))/y;return d.distSqr(w<0?A:w>1?h:h.sub(A)._mult(w)._add(A))}function Up(d,A){for(let h=0;h<d.length;h++)if(wo(d[h],A))return!0;return!1}function wo(d,A){let h=!1;for(let y=0,w=d.length-1;y<d.length;w=y++){const k=d[y],F=d[w];k.y>A.y!=F.y>A.y&&A.x<(F.x-k.x)*(A.y-k.y)/(F.y-k.y)+k.x&&(h=!h)}return h}function vm(d,A,h){const y=h[0],w=h[2];if(d.x<y.x&&A.x<y.x||d.x>w.x&&A.x>w.x||d.y<y.y&&A.y<y.y||d.y>w.y&&A.y>w.y)return!1;const k=Et(d,A,h[0]);return k!==Et(d,A,h[1])||k!==Et(d,A,h[2])||k!==Et(d,A,h[3])}function Ph(d,A,h){const y=A.paint.get(d).value;return y.kind==="constant"?y.value:h.programConfigurations.get(A.id).getMaxValue(d)}function fh(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function UA(d,A,h,y,w){if(!A[0]&&!A[1])return d;const k=U.convert(A)._mult(w);h==="viewport"&&k._rotate(-y);const F=[];for(let j=0;j<d.length;j++)F.push(d[j].sub(k));return F}let Pd,Hf;Xn("CircleBucket",kh,{omit:["layers"]});var Qc={get paint(){return Hf=Hf||new Ws({"circle-radius":new ri(Te.paint_circle["circle-radius"]),"circle-color":new ri(Te.paint_circle["circle-color"]),"circle-blur":new ri(Te.paint_circle["circle-blur"]),"circle-opacity":new ri(Te.paint_circle["circle-opacity"]),"circle-translate":new vr(Te.paint_circle["circle-translate"]),"circle-translate-anchor":new vr(Te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vr(Te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vr(Te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ri(Te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ri(Te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ri(Te.paint_circle["circle-stroke-opacity"])})},get layout(){return Pd=Pd||new Ws({"circle-sort-key":new ri(Te.layout_circle["circle-sort-key"])})}};class bf extends ss{constructor(A){super(A,Qc)}createBucket(A){return new kh(A)}queryRadius(A){const h=A;return Ph("circle-radius",this,h)+Ph("circle-stroke-width",this,h)+fh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:A,feature:h,featureState:y,geometry:w,transform:k,pixelsToTileUnits:F,unwrappedTileID:j,getElevation:Z}){const ie=UA(A,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-k.bearingInRadians,F),ue=this.paint.get("circle-radius").evaluate(h,y)+this.paint.get("circle-stroke-width").evaluate(h,y),ge=this.paint.get("circle-pitch-alignment")==="map",De=ge?ie:function(Qe,Je,At,_t){return Qe.map(Wt=>Rd(Wt,Je,At,_t))}(ie,k,j,Z),Le=ge?ue*F:ue;for(const Qe of w)for(const Je of Qe){const At=ge?Je:Rd(Je,k,j,Z);let _t=Le;const Wt=k.projectTileCoordinates(Je.x,Je.y,j,Z).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?_t*=Wt/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(_t*=k.cameraToCenterDistance/Wt),Vf(De,At,_t))return!0}return!1}}function Rd(d,A,h,y){const w=A.projectTileCoordinates(d.x,d.y,h,y).point;return new U((.5*w.x+.5)*A.width,(.5*-w.y+.5)*A.height)}class Dd extends kh{}let id;Xn("HeatmapBucket",Dd,{omit:["layers"]});var Rh={get paint(){return id=id||new Ws({"heatmap-radius":new ri(Te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ri(Te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vr(Te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xu(Te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vr(Te.paint_heatmap["heatmap-opacity"])})}};function Mi(d,{width:A,height:h},y,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==A*h*y)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${A*h*y}`)}else w=new Uint8Array(A*h*y);return d.width=A,d.height=h,d.data=w,d}function Kd(d,{width:A,height:h},y){if(A===d.width&&h===d.height)return;const w=Mi({},{width:A,height:h},y);Wo(d,w,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,A),height:Math.min(d.height,h)},y),d.width=A,d.height=h,d.data=w.data}function Wo(d,A,h,y,w,k){if(w.width===0||w.height===0)return A;if(w.width>d.width||w.height>d.height||h.x>d.width-w.width||h.y>d.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>A.width||w.height>A.height||y.x>A.width-w.width||y.y>A.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const F=d.data,j=A.data;if(F===j)throw new Error("srcData equals dstData, so image is already copied");for(let Z=0;Z<w.height;Z++){const ie=((h.y+Z)*d.width+h.x)*k,ue=((y.y+Z)*A.width+y.x)*k;for(let ge=0;ge<w.width*k;ge++)j[ue+ge]=F[ie+ge]}return A}class tc{constructor(A,h){Mi(this,A,1,h)}resize(A){Kd(this,A,1)}clone(){return new tc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,h,y,w,k){Wo(A,h,y,w,k,1)}}class zA{constructor(A,h){Mi(this,A,4,h)}resize(A){Kd(this,A,4)}replace(A,h){h?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A}clone(){return new zA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(A,h,y,w,k){Wo(A,h,y,w,k,4)}}function vA(d){const A={},h=d.resolution||256,y=d.clips?d.clips.length:1,w=d.image||new zA({width:h,height:y});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const k=(F,j,Z)=>{A[d.evaluationKey]=Z;const ie=d.expression.evaluate(A);w.data[F+j+0]=Math.floor(255*ie.r/ie.a),w.data[F+j+1]=Math.floor(255*ie.g/ie.a),w.data[F+j+2]=Math.floor(255*ie.b/ie.a),w.data[F+j+3]=Math.floor(255*ie.a)};if(d.clips)for(let F=0,j=0;F<y;++F,j+=4*h)for(let Z=0,ie=0;Z<h;Z++,ie+=4){const ue=Z/(h-1),{start:ge,end:De}=d.clips[F];k(j,ie,ge*(1-ue)+De*ue)}else for(let F=0,j=0;F<h;F++,j+=4)k(0,j,F/(h-1));return w}Xn("AlphaImage",tc),Xn("RGBAImage",zA);const zp="big-fb";class vl extends ss{createBucket(A){return new Dd(A)}constructor(A){super(A,Rh),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(zp)&&this.heatmapFbos.delete(zp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Np;var Ra={get paint(){return Np=Np||new Ws({"hillshade-illumination-direction":new vr(Te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new vr(Te.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new vr(Te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vr(Te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vr(Te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vr(Te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vr(Te.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new vr(Te.paint_hillshade["hillshade-method"])})}};class Cm extends ss{constructor(A){super(A,Ra),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let A=this.paint.get("hillshade-illumination-direction").values,h=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,w=this.paint.get("hillshade-shadow-color").values;const k=Math.max(A.length,h.length,y.length,w.length);A=A.concat(Array(k-A.length).fill(A.at(-1))),h=h.concat(Array(k-h.length).fill(h.at(-1))),y=y.concat(Array(k-y.length).fill(y.at(-1))),w=w.concat(Array(k-w.length).fill(w.at(-1)));const F=h.map(Ln);return{directionRadians:A.map(Ln),altitudeRadians:F,shadowColor:w,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Zf=as([{name:"a_pos",components:2,type:"Int16"}],4),{members:CA}=Zf;function xf(d,A,h){const y=h.patternDependencies;let w=!1;for(const k of A){const F=k.paint.get(`${d}-pattern`);F.isConstant()||(w=!0);const j=F.constantOr(null);j&&(w=!0,y[j.to]=!0,y[j.from]=!0)}return w}function u(d,A,h,y,w){const k=w.patternDependencies;for(const F of A){const j=F.paint.get(`${d}-pattern`).value;if(j.kind!=="constant"){let Z=j.evaluate({zoom:y-1},h,{},w.availableImages),ie=j.evaluate({zoom:y},h,{},w.availableImages),ue=j.evaluate({zoom:y+1},h,{},w.availableImages);Z=Z&&Z.name?Z.name:Z,ie=ie&&ie.name?ie.name:ie,ue=ue&&ue.name?ue.name:ue,k[Z]=!0,k[ie]=!0,k[ue]=!0,h.patterns[F.id]={min:Z,mid:ie,max:ue}}}return h}function g(d,A,h,y,w){let k;if(w===function(F,j,Z,ie){let ue=0;for(let ge=j,De=Z-ie;ge<Z;ge+=ie)ue+=(F[De]-F[ge])*(F[ge+1]+F[De+1]),De=ge;return ue}(d,A,h,y)>0)for(let F=A;F<h;F+=y)k=eo(F/y|0,d[F],d[F+1],k);else for(let F=h-y;F>=A;F-=y)k=eo(F/y|0,d[F],d[F+1],k);return k&&Hn(k,k.next)&&(fo(k),k=k.next),k}function E(d,A){if(!d)return d;A||(A=d);let h,y=d;do if(h=!1,y.steiner||!Hn(y,y.next)&&Kn(y.prev,y,y.next)!==0)y=y.next;else{if(fo(y),y=A=y.prev,y===y.next)break;h=!0}while(h||y!==A);return A}function S(d,A,h,y,w,k,F){if(!d)return;!F&&k&&function(Z,ie,ue,ge){let De=Z;do De.z===0&&(De.z=Bt(De.x,De.y,ie,ue,ge)),De.prevZ=De.prev,De.nextZ=De.next,De=De.next;while(De!==Z);De.prevZ.nextZ=null,De.prevZ=null,function(Le){let Qe,Je=1;do{let At,_t=Le;Le=null;let Wt=null;for(Qe=0;_t;){Qe++;let It=_t,Fe=0;for(let Pt=0;Pt<Je&&(Fe++,It=It.nextZ,It);Pt++);let at=Je;for(;Fe>0||at>0&&It;)Fe!==0&&(at===0||!It||_t.z<=It.z)?(At=_t,_t=_t.nextZ,Fe--):(At=It,It=It.nextZ,at--),Wt?Wt.nextZ=At:Le=At,At.prevZ=Wt,Wt=At;_t=It}Wt.nextZ=null,Je*=2}while(Qe>1)}(De)}(d,y,w,k);let j=d;for(;d.prev!==d.next;){const Z=d.prev,ie=d.next;if(k?H(d,y,w,k):D(d))A.push(Z.i,d.i,ie.i),fo(d),d=ie.next,j=ie.next;else if((d=ie)===j){F?F===1?S(d=ce(E(d),A),A,h,y,w,k,2):F===2&&_e(d,A,h,y,w,k):S(E(d),A,h,y,w,k,1);break}}}function D(d){const A=d.prev,h=d,y=d.next;if(Kn(A,h,y)>=0)return!1;const w=A.x,k=h.x,F=y.x,j=A.y,Z=h.y,ie=y.y,ue=Math.min(w,k,F),ge=Math.min(j,Z,ie),De=Math.max(w,k,F),Le=Math.max(j,Z,ie);let Qe=y.next;for(;Qe!==A;){if(Qe.x>=ue&&Qe.x<=De&&Qe.y>=ge&&Qe.y<=Le&&xn(w,j,k,Z,F,ie,Qe.x,Qe.y)&&Kn(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.next}return!0}function H(d,A,h,y){const w=d.prev,k=d,F=d.next;if(Kn(w,k,F)>=0)return!1;const j=w.x,Z=k.x,ie=F.x,ue=w.y,ge=k.y,De=F.y,Le=Math.min(j,Z,ie),Qe=Math.min(ue,ge,De),Je=Math.max(j,Z,ie),At=Math.max(ue,ge,De),_t=Bt(Le,Qe,A,h,y),Wt=Bt(Je,At,A,h,y);let It=d.prevZ,Fe=d.nextZ;for(;It&&It.z>=_t&&Fe&&Fe.z<=Wt;){if(It.x>=Le&&It.x<=Je&&It.y>=Qe&&It.y<=At&&It!==w&&It!==F&&xn(j,ue,Z,ge,ie,De,It.x,It.y)&&Kn(It.prev,It,It.next)>=0||(It=It.prevZ,Fe.x>=Le&&Fe.x<=Je&&Fe.y>=Qe&&Fe.y<=At&&Fe!==w&&Fe!==F&&xn(j,ue,Z,ge,ie,De,Fe.x,Fe.y)&&Kn(Fe.prev,Fe,Fe.next)>=0))return!1;Fe=Fe.nextZ}for(;It&&It.z>=_t;){if(It.x>=Le&&It.x<=Je&&It.y>=Qe&&It.y<=At&&It!==w&&It!==F&&xn(j,ue,Z,ge,ie,De,It.x,It.y)&&Kn(It.prev,It,It.next)>=0)return!1;It=It.prevZ}for(;Fe&&Fe.z<=Wt;){if(Fe.x>=Le&&Fe.x<=Je&&Fe.y>=Qe&&Fe.y<=At&&Fe!==w&&Fe!==F&&xn(j,ue,Z,ge,ie,De,Fe.x,Fe.y)&&Kn(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.nextZ}return!0}function ce(d,A){let h=d;do{const y=h.prev,w=h.next.next;!Hn(y,w)&&br(y,h,h.next,w)&&Jr(y,w)&&Jr(w,y)&&(A.push(y.i,h.i,w.i),fo(h),fo(h.next),h=d=w),h=h.next}while(h!==d);return E(h)}function _e(d,A,h,y,w,k){let F=d;do{let j=F.next.next;for(;j!==F.prev;){if(F.i!==j.i&&Fn(F,j)){let Z=zr(F,j);return F=E(F,F.next),Z=E(Z,Z.next),S(F,A,h,y,w,k,0),void S(Z,A,h,y,w,k,0)}j=j.next}F=F.next}while(F!==d)}function ke(d,A){let h=d.x-A.x;return h===0&&(h=d.y-A.y,h===0)&&(h=(d.next.y-d.y)/(d.next.x-d.x)-(A.next.y-A.y)/(A.next.x-A.x)),h}function Ue(d,A){const h=function(w,k){let F=k;const j=w.x,Z=w.y;let ie,ue=-1/0;if(Hn(w,F))return F;do{if(Hn(w,F.next))return F.next;if(Z<=F.y&&Z>=F.next.y&&F.next.y!==F.y){const Je=F.x+(Z-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(Je<=j&&Je>ue&&(ue=Je,ie=F.x<F.next.x?F:F.next,Je===j))return ie}F=F.next}while(F!==k);if(!ie)return null;const ge=ie,De=ie.x,Le=ie.y;let Qe=1/0;F=ie;do{if(j>=F.x&&F.x>=De&&j!==F.x&&qt(Z<Le?j:ue,Z,De,Le,Z<Le?ue:j,Z,F.x,F.y)){const Je=Math.abs(Z-F.y)/(j-F.x);Jr(F,w)&&(Je<Qe||Je===Qe&&(F.x>ie.x||F.x===ie.x&&mt(ie,F)))&&(ie=F,Qe=Je)}F=F.next}while(F!==ge);return ie}(d,A);if(!h)return A;const y=zr(h,d);return E(y,y.next),E(h,h.next)}function mt(d,A){return Kn(d.prev,d,A.prev)<0&&Kn(A.next,d,d.next)<0}function Bt(d,A,h,y,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-h)*w|0)|d<<8))|d<<4))|d<<2))|d<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-y)*w|0)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function tn(d){let A=d,h=d;do(A.x<h.x||A.x===h.x&&A.y<h.y)&&(h=A),A=A.next;while(A!==d);return h}function qt(d,A,h,y,w,k,F,j){return(w-F)*(A-j)>=(d-F)*(k-j)&&(d-F)*(y-j)>=(h-F)*(A-j)&&(h-F)*(k-j)>=(w-F)*(y-j)}function xn(d,A,h,y,w,k,F,j){return!(d===F&&A===j)&&qt(d,A,h,y,w,k,F,j)}function Fn(d,A){return d.next.i!==A.i&&d.prev.i!==A.i&&!function(h,y){let w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==y.i&&w.next.i!==y.i&&br(w,w.next,h,y))return!0;w=w.next}while(w!==h);return!1}(d,A)&&(Jr(d,A)&&Jr(A,d)&&function(h,y){let w=h,k=!1;const F=(h.x+y.x)/2,j=(h.y+y.y)/2;do w.y>j!=w.next.y>j&&w.next.y!==w.y&&F<(w.next.x-w.x)*(j-w.y)/(w.next.y-w.y)+w.x&&(k=!k),w=w.next;while(w!==h);return k}(d,A)&&(Kn(d.prev,d,A.prev)||Kn(d,A.prev,A))||Hn(d,A)&&Kn(d.prev,d,d.next)>0&&Kn(A.prev,A,A.next)>0)}function Kn(d,A,h){return(A.y-d.y)*(h.x-A.x)-(A.x-d.x)*(h.y-A.y)}function Hn(d,A){return d.x===A.x&&d.y===A.y}function br(d,A,h,y){const w=Pr(Kn(d,A,h)),k=Pr(Kn(d,A,y)),F=Pr(Kn(h,y,d)),j=Pr(Kn(h,y,A));return w!==k&&F!==j||!(w!==0||!fr(d,h,A))||!(k!==0||!fr(d,y,A))||!(F!==0||!fr(h,d,y))||!(j!==0||!fr(h,A,y))}function fr(d,A,h){return A.x<=Math.max(d.x,h.x)&&A.x>=Math.min(d.x,h.x)&&A.y<=Math.max(d.y,h.y)&&A.y>=Math.min(d.y,h.y)}function Pr(d){return d>0?1:d<0?-1:0}function Jr(d,A){return Kn(d.prev,d,d.next)<0?Kn(d,A,d.next)>=0&&Kn(d,d.prev,A)>=0:Kn(d,A,d.prev)<0||Kn(d,d.next,A)<0}function zr(d,A){const h=_a(d.i,d.x,d.y),y=_a(A.i,A.x,A.y),w=d.next,k=A.prev;return d.next=A,A.prev=d,h.next=w,w.prev=h,y.next=h,h.prev=y,k.next=y,y.prev=k,y}function eo(d,A,h,y){const w=_a(d,A,h);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function fo(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function _a(d,A,h){return{i:d,x:A,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class vs{constructor(A,h){if(h>A)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=A,this._minGranularity=h}getGranularityForZoomLevel(A){return Math.max(Math.floor(this._baseZoomGranularity/(1<<A)),this._minGranularity,1)}}class Ys{constructor(A){this.fill=A.fill,this.line=A.line,this.tile=A.tile,this.stencil=A.stencil,this.circle=A.circle}}Ys.noSubdivision=new Ys({fill:new vs(0,0),line:new vs(0,0),tile:new vs(0,0),stencil:new vs(0,0),circle:1}),Xn("SubdivisionGranularityExpression",vs),Xn("SubdivisionGranularitySetting",Ys);const qs=-32768,na=32767;class NA{constructor(A,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=A,this._granularityCellSize=it/A,this._canonical=h}_getKey(A,h){return(A+=32768)<<16|(h+=32768)<<0}_vertexToIndex(A,h){if(A<-32768||h<-32768||A>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(A),w=0|Math.round(h),k=this._getKey(y,w);if(this._vertexDictionary.has(k))return this._vertexDictionary.get(k);const F=this._vertexBuffer.length/2;return this._vertexDictionary.set(k,F),this._vertexBuffer.push(y,w),F}_subdivideTrianglesScanline(A){if(this._granularity<2)return function(w,k){const F=[];for(let j=0;j<k.length;j+=3){const Z=k[j],ie=k[j+1],ue=k[j+2],ge=w[2*Z],De=w[2*Z+1];(w[2*ie]-ge)*(w[2*ue+1]-De)-(w[2*ie+1]-De)*(w[2*ue]-ge)>0?(F.push(Z),F.push(ue),F.push(ie)):(F.push(Z),F.push(ie),F.push(ue))}return F}(this._vertexBuffer,A);const h=[],y=A.length;for(let w=0;w<y;w+=3){const k=[A[w+0],A[w+1],A[w+2]],F=[this._vertexBuffer[2*A[w+0]+0],this._vertexBuffer[2*A[w+0]+1],this._vertexBuffer[2*A[w+1]+0],this._vertexBuffer[2*A[w+1]+1],this._vertexBuffer[2*A[w+2]+0],this._vertexBuffer[2*A[w+2]+1]];let j=1/0,Z=1/0,ie=-1/0,ue=-1/0;for(let Je=0;Je<3;Je++){const At=F[2*Je],_t=F[2*Je+1];j=Math.min(j,At),ie=Math.max(ie,At),Z=Math.min(Z,_t),ue=Math.max(ue,_t)}if(j===ie||Z===ue)continue;const ge=Math.floor(j/this._granularityCellSize),De=Math.ceil(ie/this._granularityCellSize),Le=Math.floor(Z/this._granularityCellSize),Qe=Math.ceil(ue/this._granularityCellSize);if(ge!==De||Le!==Qe)for(let Je=Le;Je<Qe;Je++){const At=this._scanlineGenerateVertexRingForCellRow(Je,F,k);cs(this._vertexBuffer,At,h)}else h.push(...k)}return h}_scanlineGenerateVertexRingForCellRow(A,h,y){const w=A*this._granularityCellSize,k=w+this._granularityCellSize,F=[];for(let j=0;j<3;j++){const Z=h[2*j],ie=h[2*j+1],ue=h[2*(j+1)%6],ge=h[(2*(j+1)+1)%6],De=h[2*(j+2)%6],Le=h[(2*(j+2)+1)%6],Qe=ue-Z,Je=ge-ie,At=Qe===0,_t=Je===0,Wt=(w-ie)/Je,It=(k-ie)/Je,Fe=Math.min(Wt,It),at=Math.max(Wt,It);if(!_t&&(Fe>=1||at<=0)||_t&&(ie<w||ie>k)){ge>=w&&ge<=k&&F.push(y[(j+1)%3]);continue}!_t&&Fe>0&&F.push(this._vertexToIndex(Z+Qe*Fe,ie+Je*Fe));const Pt=Z+Qe*Math.max(Fe,0),cn=Z+Qe*Math.min(at,1);At||this._generateIntraEdgeVertices(F,Z,ie,ue,ge,Pt,cn),!_t&&at<1&&F.push(this._vertexToIndex(Z+Qe*at,ie+Je*at)),(_t||ge>=w&&ge<=k)&&F.push(y[(j+1)%3]),!_t&&(ge<=w||ge>=k)&&this._generateInterEdgeVertices(F,Z,ie,ue,ge,De,Le,cn,w,k)}return F}_generateIntraEdgeVertices(A,h,y,w,k,F,j){const Z=w-h,ie=k-y,ue=ie===0,ge=ue?Math.min(h,w):Math.min(F,j),De=ue?Math.max(h,w):Math.max(F,j),Le=Math.floor(ge/this._granularityCellSize)+1,Qe=Math.ceil(De/this._granularityCellSize)-1;if(ue?h<w:F<j)for(let Je=Le;Je<=Qe;Je++){const At=Je*this._granularityCellSize;A.push(this._vertexToIndex(At,y+ie*(At-h)/Z))}else for(let Je=Qe;Je>=Le;Je--){const At=Je*this._granularityCellSize;A.push(this._vertexToIndex(At,y+ie*(At-h)/Z))}}_generateInterEdgeVertices(A,h,y,w,k,F,j,Z,ie,ue){const ge=k-y,De=F-w,Le=j-k,Qe=(ie-k)/Le,Je=(ue-k)/Le,At=Math.min(Qe,Je),_t=Math.max(Qe,Je),Wt=w+De*At;let It=Math.floor(Math.min(Wt,Z)/this._granularityCellSize)+1,Fe=Math.ceil(Math.max(Wt,Z)/this._granularityCellSize)-1,at=Z<Wt;const Pt=Le===0;if(Pt&&(j===ie||j===ue))return;if(Pt||At>=1||_t<=0){const zn=y-j,yn=F+(h-F)*Math.min((ie-j)/zn,(ue-j)/zn);It=Math.floor(Math.min(yn,Z)/this._granularityCellSize)+1,Fe=Math.ceil(Math.max(yn,Z)/this._granularityCellSize)-1,at=Z<yn}const cn=ge>0?ue:ie;if(at)for(let zn=It;zn<=Fe;zn++)A.push(this._vertexToIndex(zn*this._granularityCellSize,cn));else for(let zn=Fe;zn>=It;zn--)A.push(this._vertexToIndex(zn*this._granularityCellSize,cn))}_generateOutline(A){const h=[];for(const y of A){const w=Ds(y,this._granularity,!0),k=this._pointArrayToIndices(w),F=[];for(let j=1;j<k.length;j++)F.push(k[j-1]),F.push(k[j]);h.push(F)}return h}_handlePoles(A){let h=!1,y=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(h||y)&&this._fillPoles(A,h,y)}_ensureNoPoleVertices(){const A=this._vertexBuffer;for(let h=0;h<A.length;h+=2){const y=A[h+1];y===qs&&(A[h+1]=-32767),y===na&&(A[h+1]=32766)}}_generatePoleQuad(A,h,y,w,k,F){w>k!=(F===qs)?(A.push(h),A.push(y),A.push(this._vertexToIndex(w,F)),A.push(y),A.push(this._vertexToIndex(k,F)),A.push(this._vertexToIndex(w,F))):(A.push(y),A.push(h),A.push(this._vertexToIndex(w,F)),A.push(this._vertexToIndex(k,F)),A.push(y),A.push(this._vertexToIndex(w,F)))}_fillPoles(A,h,y){const w=this._vertexBuffer,k=it,F=A.length;for(let j=2;j<F;j+=3){const Z=A[j-2],ie=A[j-1],ue=A[j],ge=w[2*Z],De=w[2*Z+1],Le=w[2*ie],Qe=w[2*ie+1],Je=w[2*ue],At=w[2*ue+1];h&&(De===0&&Qe===0&&this._generatePoleQuad(A,Z,ie,ge,Le,qs),Qe===0&&At===0&&this._generatePoleQuad(A,ie,ue,Le,Je,qs),At===0&&De===0&&this._generatePoleQuad(A,ue,Z,Je,ge,qs)),y&&(De===k&&Qe===k&&this._generatePoleQuad(A,Z,ie,ge,Le,na),Qe===k&&At===k&&this._generatePoleQuad(A,ie,ue,Le,Je,na),At===k&&De===k&&this._generatePoleQuad(A,ue,Z,Je,ge,na))}}_initializeVertices(A){for(let h=0;h<A.length;h+=2)this._vertexToIndex(A[h],A[h+1])}subdividePolygonInternal(A,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:w}=function(j){const Z=[],ie=[];for(const ue of j)if(ue.length!==0){ue!==j[0]&&Z.push(ie.length/2);for(let ge=0;ge<ue.length;ge++)ie.push(ue[ge].x),ie.push(ue[ge].y)}return{flattened:ie,holeIndices:Z}}(A);let k;this._initializeVertices(y);try{const j=function(ie,ue,ge=2){const De=ue&&ue.length,Le=De?ue[0]*ge:ie.length;let Qe=g(ie,0,Le,ge,!0);const Je=[];if(!Qe||Qe.next===Qe.prev)return Je;let At,_t,Wt;if(De&&(Qe=function(It,Fe,at,Pt){const cn=[];for(let zn=0,yn=Fe.length;zn<yn;zn++){const En=g(It,Fe[zn]*Pt,zn<yn-1?Fe[zn+1]*Pt:It.length,Pt,!1);En===En.next&&(En.steiner=!0),cn.push(tn(En))}cn.sort(ke);for(let zn=0;zn<cn.length;zn++)at=Ue(cn[zn],at);return at}(ie,ue,Qe,ge)),ie.length>80*ge){At=1/0,_t=1/0;let It=-1/0,Fe=-1/0;for(let at=ge;at<Le;at+=ge){const Pt=ie[at],cn=ie[at+1];Pt<At&&(At=Pt),cn<_t&&(_t=cn),Pt>It&&(It=Pt),cn>Fe&&(Fe=cn)}Wt=Math.max(It-At,Fe-_t),Wt=Wt!==0?32767/Wt:0}return S(Qe,Je,ge,At,_t,Wt,0),Je}(y,w),Z=this._convertIndices(y,j);k=this._subdivideTrianglesScanline(Z)}catch(j){console.error(j)}let F=[];return h&&(F=this._generateOutline(A)),this._ensureNoPoleVertices(),this._handlePoles(k),{verticesFlattened:this._vertexBuffer,indicesTriangles:k,indicesLineList:F}}_convertIndices(A,h){const y=[];for(let w=0;w<h.length;w++)y.push(this._vertexToIndex(A[2*h[w]],A[2*h[w]+1]));return y}_pointArrayToIndices(A){const h=[];for(let y=0;y<A.length;y++){const w=A[y];h.push(this._vertexToIndex(w.x,w.y))}return h}}function $a(d,A,h,y=!0){return new NA(h,A).subdividePolygonInternal(d,y)}function Ds(d,A,h=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const y=d[0],w=d[d.length-1],k=h&&(y.x!==w.x||y.y!==w.y);if(A<2)return k?[...d,d[0]]:[...d];const F=Math.floor(it/A),j=[];j.push(new U(d[0].x,d[0].y));const Z=d.length,ie=k?Z:Z-1;for(let ue=0;ue<ie;ue++){const ge=d[ue],De=ue<Z-1?d[ue+1]:d[0],Le=ge.x,Qe=ge.y,Je=De.x,At=De.y,_t=Le!==Je,Wt=Qe!==At;if(!_t&&!Wt)continue;const It=Je-Le,Fe=At-Qe,at=Math.abs(It),Pt=Math.abs(Fe);let cn=Le,zn=Qe;for(;;){const En=It>0?(Math.floor(cn/F)+1)*F:(Math.ceil(cn/F)-1)*F,tr=Fe>0?(Math.floor(zn/F)+1)*F:(Math.ceil(zn/F)-1)*F,Nn=Math.abs(cn-En),er=Math.abs(zn-tr),Bn=Math.abs(cn-Je),Qr=Math.abs(zn-At),Ci=_t?Nn/at:Number.POSITIVE_INFINITY,mi=Wt?er/Pt:Number.POSITIVE_INFINITY;if((Bn<=Nn||!_t)&&(Qr<=er||!Wt))break;if(Ci<mi&&_t||!Wt){cn=En,zn+=Fe*Ci;const Xr=new U(cn,Math.round(zn));j[j.length-1].x===Xr.x&&j[j.length-1].y===Xr.y||j.push(Xr)}else{cn+=It*mi,zn=tr;const Xr=new U(Math.round(cn),zn);j[j.length-1].x===Xr.x&&j[j.length-1].y===Xr.y||j.push(Xr)}}const yn=new U(Je,At);j[j.length-1].x===yn.x&&j[j.length-1].y===yn.y||j.push(yn)}return j}function cs(d,A,h){if(A.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,w=d[2*A[0]];for(let Z=1;Z<A.length;Z++){const ie=d[2*A[Z]];ie<w&&(w=ie,y=Z)}const k=A.length;let F=y,j=(F+1)%k;for(;;){const Z=F-1>=0?F-1:k-1,ie=(j+1)%k,ue=d[2*A[Z]],ge=d[2*A[ie]],De=d[2*A[F]],Le=d[2*A[F]+1],Qe=d[2*A[j]+1];let Je=!1;if(ue<ge)Je=!0;else if(ue>ge)Je=!1;else{const At=Qe-Le,_t=-(d[2*A[j]]-De),Wt=Le<Qe?1:-1;((ue-De)*At+(d[2*A[Z]+1]-Le)*_t)*Wt>((ge-De)*At+(d[2*A[ie]+1]-Le)*_t)*Wt&&(Je=!0)}if(Je){const At=A[Z],_t=A[F],Wt=A[j];At!==_t&&At!==Wt&&_t!==Wt&&h.push(Wt,_t,At),F--,F<0&&(F=k-1)}else{const At=A[ie],_t=A[F],Wt=A[j];At!==_t&&At!==Wt&&_t!==Wt&&h.push(Wt,_t,At),j++,j>=k&&(j=0)}if(Z===ie)break}}function xi(d,A,h,y,w,k,F,j,Z){const ie=w.length/2,ue=F&&j&&Z;if(ie<ao.MAX_VERTEX_ARRAY_LENGTH){const ge=A.prepareSegment(ie,h,y),De=ge.vertexLength;for(let Je=0;Je<k.length;Je+=3)y.emplaceBack(De+k[Je],De+k[Je+1],De+k[Je+2]);let Le,Qe;ge.vertexLength+=ie,ge.primitiveLength+=k.length/3,ue&&(Qe=F.prepareSegment(ie,h,j),Le=Qe.vertexLength,Qe.vertexLength+=ie);for(let Je=0;Je<w.length;Je+=2)d(w[Je],w[Je+1]);if(ue)for(let Je=0;Je<Z.length;Je++){const At=Z[Je];for(let _t=1;_t<At.length;_t+=2)j.emplaceBack(Le+At[_t-1],Le+At[_t]);Qe.primitiveLength+=At.length/2}}else(function(ge,De,Le,Qe,Je,At){const _t=[];for(let Pt=0;Pt<Qe.length/2;Pt++)_t.push(-1);const Wt={count:0};let It=0,Fe=ge.getOrCreateLatestSegment(De,Le),at=Fe.vertexLength;for(let Pt=2;Pt<Je.length;Pt+=3){const cn=Je[Pt-2],zn=Je[Pt-1],yn=Je[Pt];let En=_t[cn]<It,tr=_t[zn]<It,Nn=_t[yn]<It;Fe.vertexLength+((En?1:0)+(tr?1:0)+(Nn?1:0))>ao.MAX_VERTEX_ARRAY_LENGTH&&(Fe=ge.createNewSegment(De,Le),It=Wt.count,En=!0,tr=!0,Nn=!0,at=0);const er=Qo(_t,Qe,At,Wt,cn,En,Fe),Bn=Qo(_t,Qe,At,Wt,zn,tr,Fe),Qr=Qo(_t,Qe,At,Wt,yn,Nn,Fe);Le.emplaceBack(at+er-It,at+Bn-It,at+Qr-It),Fe.primitiveLength++}})(A,h,y,w,k,d),ue&&function(ge,De,Le,Qe,Je,At){const _t=[];for(let Pt=0;Pt<Qe.length/2;Pt++)_t.push(-1);const Wt={count:0};let It=0,Fe=ge.getOrCreateLatestSegment(De,Le),at=Fe.vertexLength;for(let Pt=0;Pt<Je.length;Pt++){const cn=Je[Pt];for(let zn=1;zn<Je[Pt].length;zn+=2){const yn=cn[zn-1],En=cn[zn];let tr=_t[yn]<It,Nn=_t[En]<It;Fe.vertexLength+((tr?1:0)+(Nn?1:0))>ao.MAX_VERTEX_ARRAY_LENGTH&&(Fe=ge.createNewSegment(De,Le),It=Wt.count,tr=!0,Nn=!0,at=0);const er=Qo(_t,Qe,At,Wt,yn,tr,Fe),Bn=Qo(_t,Qe,At,Wt,En,Nn,Fe);Le.emplaceBack(at+er-It,at+Bn-It),Fe.primitiveLength++}}}(F,h,j,w,Z,d),A.forceNewSegmentOnNextPrepare(),F?.forceNewSegmentOnNextPrepare()}function Qo(d,A,h,y,w,k,F){if(k){const j=y.count;return h(A[2*w],A[2*w+1]),d[w]=y.count,y.count++,F.vertexLength++,j}return d[w]}class $s{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(h=>h.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new cr,this.indexArray=new ji,this.indexArray2=new aa,this.programConfigurations=new Tu(A.layers,A.zoom),this.segments=new ao,this.segments2=new ao,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(A,h,y){this.hasPattern=xf("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),k=!w.isConstant(),F=[];for(const{feature:j,id:Z,index:ie,sourceLayerIndex:ue}of A){const ge=this.layers[0]._featureFilter.needGeometry,De=dh(j,ge);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),De,y))continue;const Le=k?w.evaluate(De,{},y,h.availableImages):void 0,Qe={id:Z,properties:j.properties,type:j.type,sourceLayerIndex:ue,index:ie,geometry:ge?De.geometry:ku(j),patterns:{},sortKey:Le};F.push(Qe)}k&&F.sort((j,Z)=>j.sortKey-Z.sortKey);for(const j of F){const{geometry:Z,index:ie,sourceLayerIndex:ue}=j;if(this.hasPattern){const ge=u("fill",this.layers,j,this.zoom,h);this.patternFeatures.push(ge)}else this.addFeature(j,Z,ie,y,{},h.subdivisionGranularity);h.featureIndex.insert(A[ie].feature,Z,ie,ue,this.index)}}update(A,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,h,this.stateDependentLayers,y)}addFeatures(A,h,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,y,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,CA),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(A,h,y,w,k,F){for(const j of hf(h,500)){const Z=$a(j,w,F.fill.getGranularityForZoomLevel(w.z)),ie=this.layoutVertexArray;xi((ue,ge)=>{ie.emplaceBack(ue,ge)},this.segments,this.layoutVertexArray,this.indexArray,Z.verticesFlattened,Z.indicesTriangles,this.segments2,this.indexArray2,Z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,k,w)}}let la,xs;Xn("FillBucket",$s,{omit:["layers","patternFeatures"]});var lu={get paint(){return xs=xs||new Ws({"fill-antialias":new vr(Te.paint_fill["fill-antialias"]),"fill-opacity":new ri(Te.paint_fill["fill-opacity"]),"fill-color":new ri(Te.paint_fill["fill-color"]),"fill-outline-color":new ri(Te.paint_fill["fill-outline-color"]),"fill-translate":new vr(Te.paint_fill["fill-translate"]),"fill-translate-anchor":new vr(Te.paint_fill["fill-translate-anchor"]),"fill-pattern":new bc(Te.paint_fill["fill-pattern"])})},get layout(){return la=la||new Ws({"fill-sort-key":new ri(Te.layout_fill["fill-sort-key"])})}};class Fo extends ss{constructor(A){super(A,lu)}recalculate(A,h){super.recalculate(A,h);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new $s(A)}queryRadius(){return fh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:A,geometry:h,transform:y,pixelsToTileUnits:w}){return Lp(UA(A,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,w),h)}isTileClipped(){return!0}}const Fd=as([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),GA=as([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Yc}=Fd;var xc,al,ll,Mf,Ld,od,_m,Gp={};function Ud(){if(al)return xc;al=1;var d=B();function A(w,k,F,j,Z){this.properties={},this.extent=F,this.type=0,this._pbf=w,this._geometry=-1,this._keys=j,this._values=Z,w.readFields(h,this,k)}function h(w,k,F){w==1?k.id=F.readVarint():w==2?function(j,Z){for(var ie=j.readVarint()+j.pos;j.pos<ie;){var ue=Z._keys[j.readVarint()],ge=Z._values[j.readVarint()];Z.properties[ue]=ge}}(F,k):w==3?k.type=F.readVarint():w==4&&(k._geometry=F.pos)}function y(w){for(var k,F,j=0,Z=0,ie=w.length,ue=ie-1;Z<ie;ue=Z++)j+=((F=w[ue]).x-(k=w[Z]).x)*(k.y+F.y);return j}return xc=A,A.types=["Unknown","Point","LineString","Polygon"],A.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var k,F=w.readVarint()+w.pos,j=1,Z=0,ie=0,ue=0,ge=[];w.pos<F;){if(Z<=0){var De=w.readVarint();j=7&De,Z=De>>3}if(Z--,j===1||j===2)ie+=w.readSVarint(),ue+=w.readSVarint(),j===1&&(k&&ge.push(k),k=[]),k.push(new d(ie,ue));else{if(j!==7)throw new Error("unknown command "+j);k&&k.push(k[0].clone())}}return k&&ge.push(k),ge},A.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var k=w.readVarint()+w.pos,F=1,j=0,Z=0,ie=0,ue=1/0,ge=-1/0,De=1/0,Le=-1/0;w.pos<k;){if(j<=0){var Qe=w.readVarint();F=7&Qe,j=Qe>>3}if(j--,F===1||F===2)(Z+=w.readSVarint())<ue&&(ue=Z),Z>ge&&(ge=Z),(ie+=w.readSVarint())<De&&(De=ie),ie>Le&&(Le=ie);else if(F!==7)throw new Error("unknown command "+F)}return[ue,De,ge,Le]},A.prototype.toGeoJSON=function(w,k,F){var j,Z,ie=this.extent*Math.pow(2,F),ue=this.extent*w,ge=this.extent*k,De=this.loadGeometry(),Le=A.types[this.type];function Qe(_t){for(var Wt=0;Wt<_t.length;Wt++){var It=_t[Wt];_t[Wt]=[360*(It.x+ue)/ie-180,360/Math.PI*Math.atan(Math.exp((180-360*(It.y+ge)/ie)*Math.PI/180))-90]}}switch(this.type){case 1:var Je=[];for(j=0;j<De.length;j++)Je[j]=De[j][0];Qe(De=Je);break;case 2:for(j=0;j<De.length;j++)Qe(De[j]);break;case 3:for(De=function(_t){var Wt=_t.length;if(Wt<=1)return[_t];for(var It,Fe,at=[],Pt=0;Pt<Wt;Pt++){var cn=y(_t[Pt]);cn!==0&&(Fe===void 0&&(Fe=cn<0),Fe===cn<0?(It&&at.push(It),It=[_t[Pt]]):It.push(_t[Pt]))}return It&&at.push(It),at}(De),j=0;j<De.length;j++)for(Z=0;Z<De[j].length;Z++)Qe(De[j][Z])}De.length===1?De=De[0]:Le="Multi"+Le;var At={type:"Feature",geometry:{type:Le,coordinates:De},properties:this.properties};return"id"in this&&(At.id=this.id),At},xc}function bm(){if(Mf)return ll;Mf=1;var d=Ud();function A(y,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(h,this,w),this.length=this._features.length}function h(y,w,k){y===15?w.version=k.readVarint():y===1?w.name=k.readString():y===5?w.extent=k.readVarint():y===2?w._features.push(k.pos):y===3?w._keys.push(k.readString()):y===4&&w._values.push(function(F){for(var j=null,Z=F.readVarint()+F.pos;F.pos<Z;){var ie=F.readVarint()>>3;j=ie===1?F.readString():ie===2?F.readFloat():ie===3?F.readDouble():ie===4?F.readVarint64():ie===5?F.readVarint():ie===6?F.readSVarint():ie===7?F.readBoolean():null}return j}(k))}return ll=A,A.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var w=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,w,this.extent,this._keys,this._values)},ll}function zd(){return _m||(_m=1,Gp.VectorTile=function(){if(od)return Ld;od=1;var d=bm();function A(h,y,w){if(h===3){var k=new d(w,w.readVarint()+w.pos);k.length&&(y[k.name]=k)}}return Ld=function(h,y){this.layers=h.readFields(A,{},y)},Ld}(),Gp.VectorTileFeature=Ud(),Gp.VectorTileLayer=bm()),Gp}var _A=f(zd());const xm=_A.VectorTileFeature.types,Mm=Math.pow(2,13);function wf(d,A,h,y,w,k,F,j){d.emplaceBack(A,h,2*Math.floor(y*Mm)+F,w*Mm*2,k*Mm*2,Math.round(j))}class Xf{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(h=>h.id),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new kn,this.centroidVertexArray=new Cn,this.indexArray=new ji,this.programConfigurations=new Tu(A.layers,A.zoom),this.segments=new ao,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(A,h,y){this.features=[],this.hasPattern=xf("fill-extrusion",this.layers,h);for(const{feature:w,id:k,index:F,sourceLayerIndex:j}of A){const Z=this.layers[0]._featureFilter.needGeometry,ie=dh(w,Z);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),ie,y))continue;const ue={id:k,sourceLayerIndex:j,index:F,geometry:Z?ie.geometry:ku(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(u("fill-extrusion",this.layers,ue,this.zoom,h)):this.addFeature(ue,ue.geometry,F,y,{},h.subdivisionGranularity),h.featureIndex.insert(w,ue.geometry,F,j,this.index,!0)}}addFeatures(A,h,y){for(const w of this.features){const{geometry:k}=w;this.addFeature(w,k,w.index,h,y,A.subdivisionGranularity)}}update(A,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,h,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Yc),this.centroidVertexBuffer=A.createVertexBuffer(this.centroidVertexArray,GA.members,!0),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(A,h,y,w,k,F){for(const j of hf(h,500)){const Z={x:0,y:0,sampleCount:0},ie=this.layoutVertexArray.length;this.processPolygon(Z,w,A,j,F);const ue=this.layoutVertexArray.length-ie,ge=Math.floor(Z.x/Z.sampleCount),De=Math.floor(Z.y/Z.sampleCount);for(let Le=0;Le<ue;Le++)this.centroidVertexArray.emplaceBack(ge,De)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,k,w)}processPolygon(A,h,y,w,k){if(w.length<1||ph(w[0]))return;for(const ge of w)ge.length!==0&&nc(A,ge);const F={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},j=k.fill.getGranularityForZoomLevel(h.z),Z=xm[y.type]==="Polygon";for(const ge of w){if(ge.length===0||ph(ge))continue;const De=Ds(ge,j,Z);this._generateSideFaces(De,F)}if(!Z)return;const ie=$a(w,h,j,!1),ue=this.layoutVertexArray;xi((ge,De)=>{wf(ue,ge,De,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ie.verticesFlattened,ie.indicesTriangles)}_generateSideFaces(A,h){let y=0;for(let w=1;w<A.length;w++){const k=A[w],F=A[w-1];if(Sf(k,F))continue;h.segment.vertexLength+4>ao.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const j=k.sub(F)._perp()._unit(),Z=F.dist(k);y+Z>32768&&(y=0),wf(this.layoutVertexArray,k.x,k.y,j.x,j.y,0,0,y),wf(this.layoutVertexArray,k.x,k.y,j.x,j.y,0,1,y),y+=Z,wf(this.layoutVertexArray,F.x,F.y,j.x,j.y,0,0,y),wf(this.layoutVertexArray,F.x,F.y,j.x,j.y,0,1,y);const ie=h.segment.vertexLength;this.indexArray.emplaceBack(ie,ie+2,ie+1),this.indexArray.emplaceBack(ie+1,ie+2,ie+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function nc(d,A){for(let h=0;h<A.length;h++){const y=A[h];h===A.length-1&&A[0].x===y.x&&A[0].y===y.y||(d.x+=y.x,d.y+=y.y,d.sampleCount++)}}function Sf(d,A){return d.x===A.x&&(d.x<0||d.x>it)||d.y===A.y&&(d.y<0||d.y>it)}function ph(d){return d.every(A=>A.x<0)||d.every(A=>A.x>it)||d.every(A=>A.y<0)||d.every(A=>A.y>it)}let rc;Xn("FillExtrusionBucket",Xf,{omit:["layers","features"]});var Xm={get paint(){return rc=rc||new Ws({"fill-extrusion-opacity":new vr(Te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ri(Te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vr(Te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vr(Te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bc(Te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ri(Te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ri(Te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vr(Te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class X0 extends ss{constructor(A){super(A,Xm)}createBucket(A){return new Xf(A)}queryRadius(){return fh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:A,feature:h,featureState:y,geometry:w,transform:k,pixelsToTileUnits:F,pixelPosMatrix:j}){const Z=UA(A,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-k.bearingInRadians,F),ie=this.paint.get("fill-extrusion-height").evaluate(h,y),ue=this.paint.get("fill-extrusion-base").evaluate(h,y),ge=function(Le,Qe,Je){const At=[];for(const _t of Le){const Wt=[_t.x,_t.y,0,1];je(Wt,Wt,Qe),At.push(new U(Wt[0]/Wt[3],Wt[1]/Wt[3]))}return At}(Z,j),De=function(Le,Qe,Je,At){const _t=[],Wt=[],It=At[8]*Qe,Fe=At[9]*Qe,at=At[10]*Qe,Pt=At[11]*Qe,cn=At[8]*Je,zn=At[9]*Je,yn=At[10]*Je,En=At[11]*Je;for(const tr of Le){const Nn=[],er=[];for(const Bn of tr){const Qr=Bn.x,Ci=Bn.y,mi=At[0]*Qr+At[4]*Ci+At[12],Xr=At[1]*Qr+At[5]*Ci+At[13],To=At[2]*Qr+At[6]*Ci+At[14],Ha=At[3]*Qr+At[7]*Ci+At[15],bA=To+at,Ru=Ha+Pt,Fh=mi+cn,Vc=Xr+zn,uu=To+yn,Za=Ha+En,QA=new U((mi+It)/Ru,(Xr+Fe)/Ru);QA.z=bA/Ru,Nn.push(QA);const cu=new U(Fh/Za,Vc/Za);cu.z=uu/Za,er.push(cu)}_t.push(Nn),Wt.push(er)}return[_t,Wt]}(w,ue,ie,j);return function(Le,Qe,Je){let At=1/0;Lp(Je,Qe)&&(At=Ag(Je,Qe[0]));for(let _t=0;_t<Qe.length;_t++){const Wt=Qe[_t],It=Le[_t];for(let Fe=0;Fe<Wt.length-1;Fe++){const at=Wt[Fe],Pt=[at,Wt[Fe+1],It[Fe+1],It[Fe],at];_f(Je,Pt)&&(At=Math.min(At,Ag(Je,Pt)))}}return At!==1/0&&At}(De[0],De[1],ge)}}function Jf(d,A){return d.x*A.x+d.y*A.y}function Ag(d,A){if(d.length===1){let h=0;const y=A[h++];let w;for(;!w||y.equals(w);)if(w=A[h++],!w)return 1/0;for(;h<A.length;h++){const k=A[h],F=d[0],j=w.sub(y),Z=k.sub(y),ie=F.sub(y),ue=Jf(j,j),ge=Jf(j,Z),De=Jf(Z,Z),Le=Jf(ie,j),Qe=Jf(ie,Z),Je=ue*De-ge*ge,At=(De*Le-ge*Qe)/Je,_t=(ue*Qe-ge*Le)/Je,Wt=y.z*(1-At-_t)+w.z*At+k.z*_t;if(isFinite(Wt))return Wt}return 1/0}{let h=1/0;for(const y of A)h=Math.min(h,y.z);return h}}const Ef=as([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ug}=Ef,J0=as([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ep}=J0,e1=_A.VectorTileFeature.types,tp=Math.cos(Math.PI/180*37.5),t1=Math.pow(2,14)/.5;class Jm{constructor(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(h=>h.id),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Br,this.layoutVertexArray2=new Hr,this.indexArray=new ji,this.programConfigurations=new Tu(A.layers,A.zoom),this.segments=new ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(A,h,y){this.hasPattern=xf("line",this.layers,h);const w=this.layers[0].layout.get("line-sort-key"),k=!w.isConstant(),F=[];for(const{feature:j,id:Z,index:ie,sourceLayerIndex:ue}of A){const ge=this.layers[0]._featureFilter.needGeometry,De=dh(j,ge);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),De,y))continue;const Le=k?w.evaluate(De,{},y):void 0,Qe={id:Z,properties:j.properties,type:j.type,sourceLayerIndex:ue,index:ie,geometry:ge?De.geometry:ku(j),patterns:{},sortKey:Le};F.push(Qe)}k&&F.sort((j,Z)=>j.sortKey-Z.sortKey);for(const j of F){const{geometry:Z,index:ie,sourceLayerIndex:ue}=j;if(this.hasPattern){const ge=u("line",this.layers,j,this.zoom,h);this.patternFeatures.push(ge)}else this.addFeature(j,Z,ie,y,{},h.subdivisionGranularity);h.featureIndex.insert(A[ie].feature,Z,ie,ue,this.index)}}update(A,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,h,this.stateDependentLayers,y)}addFeatures(A,h,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,y,A.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,ep)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,ug),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(A){if(A.properties&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(A.properties,"mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}}addFeature(A,h,y,w,k,F){const j=this.layers[0].layout,Z=j.get("line-join").evaluate(A,{}),ie=j.get("line-cap"),ue=j.get("line-miter-limit"),ge=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(const De of h)this.addLine(De,A,Z,ie,ue,ge,w,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,y,k,w)}addLine(A,h,y,w,k,F,j,Z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,A=Ds(A,j?Z.line.getGranularityForZoomLevel(j.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let It=0;It<A.length-1;It++)this.totalDistance+=A[It].dist(A[It+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ie=e1[h.type]==="Polygon";let ue=A.length;for(;ue>=2&&A[ue-1].equals(A[ue-2]);)ue--;let ge=0;for(;ge<ue-1&&A[ge].equals(A[ge+1]);)ge++;if(ue<(ie?3:2))return;y==="bevel"&&(k=1.05);const De=this.overscaling<=16?15*it/(512*this.overscaling):0,Le=this.segments.prepareSegment(10*ue,this.layoutVertexArray,this.indexArray);let Qe,Je,At,_t,Wt;this.e1=this.e2=-1,ie&&(Qe=A[ue-2],Wt=A[ge].sub(Qe)._unit()._perp());for(let It=ge;It<ue;It++){if(At=It===ue-1?ie?A[ge+1]:void 0:A[It+1],At&&A[It].equals(At))continue;Wt&&(_t=Wt),Qe&&(Je=Qe),Qe=A[It],Wt=At?At.sub(Qe)._unit()._perp():_t,_t=_t||Wt;let Fe=_t.add(Wt);Fe.x===0&&Fe.y===0||Fe._unit();const at=_t.x*Wt.x+_t.y*Wt.y,Pt=Fe.x*Wt.x+Fe.y*Wt.y,cn=Pt!==0?1/Pt:1/0,zn=2*Math.sqrt(2-2*Pt),yn=Pt<tp&&Je&&At,En=_t.x*Wt.y-_t.y*Wt.x>0;if(yn&&It>ge){const er=Qe.dist(Je);if(er>2*De){const Bn=Qe.sub(Qe.sub(Je)._mult(De/er)._round());this.updateDistance(Je,Bn),this.addCurrentVertex(Bn,_t,0,0,Le),Je=Bn}}const tr=Je&&At;let Nn=tr?y:ie?"butt":w;if(tr&&Nn==="round"&&(cn<F?Nn="miter":cn<=2&&(Nn="fakeround")),Nn==="miter"&&cn>k&&(Nn="bevel"),Nn==="bevel"&&(cn>2&&(Nn="flipbevel"),cn<k&&(Nn="miter")),Je&&this.updateDistance(Je,Qe),Nn==="miter")Fe._mult(cn),this.addCurrentVertex(Qe,Fe,0,0,Le);else if(Nn==="flipbevel"){if(cn>100)Fe=Wt.mult(-1);else{const er=cn*_t.add(Wt).mag()/_t.sub(Wt).mag();Fe._perp()._mult(er*(En?-1:1))}this.addCurrentVertex(Qe,Fe,0,0,Le),this.addCurrentVertex(Qe,Fe.mult(-1),0,0,Le)}else if(Nn==="bevel"||Nn==="fakeround"){const er=-Math.sqrt(cn*cn-1),Bn=En?er:0,Qr=En?0:er;if(Je&&this.addCurrentVertex(Qe,_t,Bn,Qr,Le),Nn==="fakeround"){const Ci=Math.round(180*zn/Math.PI/20);for(let mi=1;mi<Ci;mi++){let Xr=mi/Ci;if(Xr!==.5){const Ha=Xr-.5;Xr+=Xr*Ha*(Xr-1)*((1.0904+at*(at*(3.55645-1.43519*at)-3.2452))*Ha*Ha+(.848013+at*(.215638*at-1.06021)))}const To=Wt.sub(_t)._mult(Xr)._add(_t)._unit()._mult(En?-1:1);this.addHalfVertex(Qe,To.x,To.y,!1,En,0,Le)}}At&&this.addCurrentVertex(Qe,Wt,-Bn,-Qr,Le)}else if(Nn==="butt")this.addCurrentVertex(Qe,Fe,0,0,Le);else if(Nn==="square"){const er=Je?1:-1;this.addCurrentVertex(Qe,Fe,er,er,Le)}else Nn==="round"&&(Je&&(this.addCurrentVertex(Qe,_t,0,0,Le),this.addCurrentVertex(Qe,_t,1,1,Le,!0)),At&&(this.addCurrentVertex(Qe,Wt,-1,-1,Le,!0),this.addCurrentVertex(Qe,Wt,0,0,Le)));if(yn&&It<ue-1){const er=Qe.dist(At);if(er>2*De){const Bn=Qe.add(At.sub(Qe)._mult(De/er)._round());this.updateDistance(Qe,Bn),this.addCurrentVertex(Bn,Wt,0,0,Le),Qe=Bn}}}}addCurrentVertex(A,h,y,w,k,F=!1){const j=h.y*w-h.x,Z=-h.y-h.x*w;this.addHalfVertex(A,h.x+h.y*y,h.y-h.x*y,F,!1,y,k),this.addHalfVertex(A,j,Z,F,!0,-w,k),this.distance>t1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(A,h,y,w,k,F))}addHalfVertex({x:A,y:h},y,w,k,F,j,Z){const ie=.5*(this.lineClips?this.scaledDistance*(t1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((A<<1)+(k?1:0),(h<<1)+(F?1:0),Math.round(63*y)+128,Math.round(63*w)+128,1+(j===0?0:j<0?-1:1)|(63&ie)<<2,ie>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ue=Z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ue,this.e2),Z.primitiveLength++),F?this.e2=ue:this.e1=ue}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(A,h){this.distance+=A.dist(h),this.updateScaledDistance()}}let e0,wm;Xn("LineBucket",Jm,{omit:["layers","patternFeatures"]});var cg={get paint(){return wm=wm||new Ws({"line-opacity":new ri(Te.paint_line["line-opacity"]),"line-color":new ri(Te.paint_line["line-color"]),"line-translate":new vr(Te.paint_line["line-translate"]),"line-translate-anchor":new vr(Te.paint_line["line-translate-anchor"]),"line-width":new ri(Te.paint_line["line-width"]),"line-gap-width":new ri(Te.paint_line["line-gap-width"]),"line-offset":new ri(Te.paint_line["line-offset"]),"line-blur":new ri(Te.paint_line["line-blur"]),"line-dasharray":new Tl(Te.paint_line["line-dasharray"]),"line-pattern":new bc(Te.paint_line["line-pattern"]),"line-gradient":new Xu(Te.paint_line["line-gradient"])})},get layout(){return e0=e0||new Ws({"line-cap":new vr(Te.layout_line["line-cap"]),"line-join":new ri(Te.layout_line["line-join"]),"line-miter-limit":new vr(Te.layout_line["line-miter-limit"]),"line-round-limit":new vr(Te.layout_line["line-round-limit"]),"line-sort-key":new ri(Te.layout_line["line-sort-key"])})}};class tv extends ri{possiblyEvaluate(A,h){return h=new os(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(A,h)}evaluate(A,h,y,w){return h=St({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(A,h,y,w)}}let Sm;class hg extends ss{constructor(A){super(A,cg),this.gradientVersion=0,Sm||(Sm=new tv(cg.paint.properties["line-width"].specification),Sm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(A){if(A==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Ki,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(A,h){super.recalculate(A,h),this.paint._values["line-floorwidth"]=Sm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new Jm(A)}queryRadius(A){const h=A,y=Bf(Ph("line-width",this,h),Ph("line-gap-width",this,h)),w=Ph("line-offset",this,h);return y/2+Math.abs(w)+fh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:A,feature:h,featureState:y,geometry:w,transform:k,pixelsToTileUnits:F}){const j=UA(A,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-k.bearingInRadians,F),Z=F/2*Bf(this.paint.get("line-width").evaluate(h,y),this.paint.get("line-gap-width").evaluate(h,y)),ie=this.paint.get("line-offset").evaluate(h,y);return ie&&(w=function(ue,ge){const De=[];for(let Le=0;Le<ue.length;Le++){const Qe=ue[Le],Je=[];for(let At=0;At<Qe.length;At++){const _t=Qe[At-1],Wt=Qe[At],It=Qe[At+1],Fe=At===0?new U(0,0):Wt.sub(_t)._unit()._perp(),at=At===Qe.length-1?new U(0,0):It.sub(Wt)._unit()._perp(),Pt=Fe._add(at)._unit(),cn=Pt.x*at.x+Pt.y*at.y;cn!==0&&Pt._mult(1/cn),Je.push(Pt._mult(ge)._add(Wt))}De.push(Je)}return De}(w,ie*F)),function(ue,ge,De){for(let Le=0;Le<ge.length;Le++){const Qe=ge[Le];if(ue.length>=3){for(let Je=0;Je<Qe.length;Je++)if(wo(ue,Qe[Je]))return!0}if(rd(ue,Qe,De))return!0}return!1}(j,w,Z)}isTileClipped(){return!0}}function Bf(d,A){return A>0?A+2*d:d}const nv=as([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jp=as([{name:"a_projected_pos",components:3,type:"Float32"}],4);as([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const t0=as([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);as([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Va=as([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rv=as([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dg(d,A,h){return d.sections.forEach(y=>{y.text=function(w,k,F){const j=k.layout.get("text-transform").evaluate(F,{});return j==="uppercase"?w=w.toLocaleUpperCase():j==="lowercase"&&(w=w.toLocaleLowerCase()),_c.applyArabicShaping&&(w=_c.applyArabicShaping(w)),w}(y.text,A,h)}),d}as([{name:"triangle",components:3,type:"Uint16"}]),as([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),as([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),as([{type:"Float32",name:"offsetX"}]),as([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),as([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Em={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var fg,n0,n1,Dl=24,Mc={};function r0(){return fg||(fg=1,Mc.read=function(d,A,h,y,w){var k,F,j=8*w-y-1,Z=(1<<j)-1,ie=Z>>1,ue=-7,ge=h?w-1:0,De=h?-1:1,Le=d[A+ge];for(ge+=De,k=Le&(1<<-ue)-1,Le>>=-ue,ue+=j;ue>0;k=256*k+d[A+ge],ge+=De,ue-=8);for(F=k&(1<<-ue)-1,k>>=-ue,ue+=y;ue>0;F=256*F+d[A+ge],ge+=De,ue-=8);if(k===0)k=1-ie;else{if(k===Z)return F?NaN:1/0*(Le?-1:1);F+=Math.pow(2,y),k-=ie}return(Le?-1:1)*F*Math.pow(2,k-y)},Mc.write=function(d,A,h,y,w,k){var F,j,Z,ie=8*k-w-1,ue=(1<<ie)-1,ge=ue>>1,De=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,Le=y?0:k-1,Qe=y?1:-1,Je=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(j=isNaN(A)?1:0,F=ue):(F=Math.floor(Math.log(A)/Math.LN2),A*(Z=Math.pow(2,-F))<1&&(F--,Z*=2),(A+=F+ge>=1?De/Z:De*Math.pow(2,1-ge))*Z>=2&&(F++,Z/=2),F+ge>=ue?(j=0,F=ue):F+ge>=1?(j=(A*Z-1)*Math.pow(2,w),F+=ge):(j=A*Math.pow(2,ge-1)*Math.pow(2,w),F=0));w>=8;d[h+Le]=255&j,Le+=Qe,j/=256,w-=8);for(F=F<<w|j,ie+=w;ie>0;d[h+Le]=255&F,Le+=Qe,F/=256,ie-=8);d[h+Le-Qe]|=128*Je}),Mc}function pg(){if(n1)return n0;n1=1,n0=A;var d=r0();function A(Fe){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Fe)?Fe:new Uint8Array(Fe||0),this.pos=0,this.type=0,this.length=this.buf.length}A.Varint=0,A.Fixed64=1,A.Bytes=2,A.Fixed32=5;var h=4294967296,y=1/h,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function k(Fe){return Fe.type===A.Bytes?Fe.readVarint()+Fe.pos:Fe.pos+1}function F(Fe,at,Pt){return Pt?4294967296*at+(Fe>>>0):4294967296*(at>>>0)+(Fe>>>0)}function j(Fe,at,Pt){var cn=at<=16383?1:at<=2097151?2:at<=268435455?3:Math.floor(Math.log(at)/(7*Math.LN2));Pt.realloc(cn);for(var zn=Pt.pos-1;zn>=Fe;zn--)Pt.buf[zn+cn]=Pt.buf[zn]}function Z(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeVarint(Fe[Pt])}function ie(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeSVarint(Fe[Pt])}function ue(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeFloat(Fe[Pt])}function ge(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeDouble(Fe[Pt])}function De(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeBoolean(Fe[Pt])}function Le(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeFixed32(Fe[Pt])}function Qe(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeSFixed32(Fe[Pt])}function Je(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeFixed64(Fe[Pt])}function At(Fe,at){for(var Pt=0;Pt<Fe.length;Pt++)at.writeSFixed64(Fe[Pt])}function _t(Fe,at){return(Fe[at]|Fe[at+1]<<8|Fe[at+2]<<16)+16777216*Fe[at+3]}function Wt(Fe,at,Pt){Fe[Pt]=at,Fe[Pt+1]=at>>>8,Fe[Pt+2]=at>>>16,Fe[Pt+3]=at>>>24}function It(Fe,at){return(Fe[at]|Fe[at+1]<<8|Fe[at+2]<<16)+(Fe[at+3]<<24)}return A.prototype={destroy:function(){this.buf=null},readFields:function(Fe,at,Pt){for(Pt=Pt||this.length;this.pos<Pt;){var cn=this.readVarint(),zn=cn>>3,yn=this.pos;this.type=7&cn,Fe(zn,at,this),this.pos===yn&&this.skip(cn)}return at},readMessage:function(Fe,at){return this.readFields(Fe,at,this.readVarint()+this.pos)},readFixed32:function(){var Fe=_t(this.buf,this.pos);return this.pos+=4,Fe},readSFixed32:function(){var Fe=It(this.buf,this.pos);return this.pos+=4,Fe},readFixed64:function(){var Fe=_t(this.buf,this.pos)+_t(this.buf,this.pos+4)*h;return this.pos+=8,Fe},readSFixed64:function(){var Fe=_t(this.buf,this.pos)+It(this.buf,this.pos+4)*h;return this.pos+=8,Fe},readFloat:function(){var Fe=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Fe},readDouble:function(){var Fe=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Fe},readVarint:function(Fe){var at,Pt,cn=this.buf;return at=127&(Pt=cn[this.pos++]),Pt<128?at:(at|=(127&(Pt=cn[this.pos++]))<<7,Pt<128?at:(at|=(127&(Pt=cn[this.pos++]))<<14,Pt<128?at:(at|=(127&(Pt=cn[this.pos++]))<<21,Pt<128?at:function(zn,yn,En){var tr,Nn,er=En.buf;if(tr=(112&(Nn=er[En.pos++]))>>4,Nn<128||(tr|=(127&(Nn=er[En.pos++]))<<3,Nn<128)||(tr|=(127&(Nn=er[En.pos++]))<<10,Nn<128)||(tr|=(127&(Nn=er[En.pos++]))<<17,Nn<128)||(tr|=(127&(Nn=er[En.pos++]))<<24,Nn<128)||(tr|=(1&(Nn=er[En.pos++]))<<31,Nn<128))return F(zn,tr,yn);throw new Error("Expected varint not more than 10 bytes")}(at|=(15&(Pt=cn[this.pos]))<<28,Fe,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Fe=this.readVarint();return Fe%2==1?(Fe+1)/-2:Fe/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Fe=this.readVarint()+this.pos,at=this.pos;return this.pos=Fe,Fe-at>=12&&w?function(Pt,cn,zn){return w.decode(Pt.subarray(cn,zn))}(this.buf,at,Fe):function(Pt,cn,zn){for(var yn="",En=cn;En<zn;){var tr,Nn,er,Bn=Pt[En],Qr=null,Ci=Bn>239?4:Bn>223?3:Bn>191?2:1;if(En+Ci>zn)break;Ci===1?Bn<128&&(Qr=Bn):Ci===2?(192&(tr=Pt[En+1]))==128&&(Qr=(31&Bn)<<6|63&tr)<=127&&(Qr=null):Ci===3?(Nn=Pt[En+2],(192&(tr=Pt[En+1]))==128&&(192&Nn)==128&&((Qr=(15&Bn)<<12|(63&tr)<<6|63&Nn)<=2047||Qr>=55296&&Qr<=57343)&&(Qr=null)):Ci===4&&(Nn=Pt[En+2],er=Pt[En+3],(192&(tr=Pt[En+1]))==128&&(192&Nn)==128&&(192&er)==128&&((Qr=(15&Bn)<<18|(63&tr)<<12|(63&Nn)<<6|63&er)<=65535||Qr>=1114112)&&(Qr=null)),Qr===null?(Qr=65533,Ci=1):Qr>65535&&(Qr-=65536,yn+=String.fromCharCode(Qr>>>10&1023|55296),Qr=56320|1023&Qr),yn+=String.fromCharCode(Qr),En+=Ci}return yn}(this.buf,at,Fe)},readBytes:function(){var Fe=this.readVarint()+this.pos,at=this.buf.subarray(this.pos,Fe);return this.pos=Fe,at},readPackedVarint:function(Fe,at){if(this.type!==A.Bytes)return Fe.push(this.readVarint(at));var Pt=k(this);for(Fe=Fe||[];this.pos<Pt;)Fe.push(this.readVarint(at));return Fe},readPackedSVarint:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readSVarint());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readSVarint());return Fe},readPackedBoolean:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readBoolean());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readBoolean());return Fe},readPackedFloat:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readFloat());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readFloat());return Fe},readPackedDouble:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readDouble());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readDouble());return Fe},readPackedFixed32:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readFixed32());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readFixed32());return Fe},readPackedSFixed32:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readSFixed32());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readSFixed32());return Fe},readPackedFixed64:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readFixed64());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readFixed64());return Fe},readPackedSFixed64:function(Fe){if(this.type!==A.Bytes)return Fe.push(this.readSFixed64());var at=k(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readSFixed64());return Fe},skip:function(Fe){var at=7&Fe;if(at===A.Varint)for(;this.buf[this.pos++]>127;);else if(at===A.Bytes)this.pos=this.readVarint()+this.pos;else if(at===A.Fixed32)this.pos+=4;else{if(at!==A.Fixed64)throw new Error("Unimplemented type: "+at);this.pos+=8}},writeTag:function(Fe,at){this.writeVarint(Fe<<3|at)},realloc:function(Fe){for(var at=this.length||16;at<this.pos+Fe;)at*=2;if(at!==this.length){var Pt=new Uint8Array(at);Pt.set(this.buf),this.buf=Pt,this.length=at}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Fe){this.realloc(4),Wt(this.buf,Fe,this.pos),this.pos+=4},writeSFixed32:function(Fe){this.realloc(4),Wt(this.buf,Fe,this.pos),this.pos+=4},writeFixed64:function(Fe){this.realloc(8),Wt(this.buf,-1&Fe,this.pos),Wt(this.buf,Math.floor(Fe*y),this.pos+4),this.pos+=8},writeSFixed64:function(Fe){this.realloc(8),Wt(this.buf,-1&Fe,this.pos),Wt(this.buf,Math.floor(Fe*y),this.pos+4),this.pos+=8},writeVarint:function(Fe){(Fe=+Fe||0)>268435455||Fe<0?function(at,Pt){var cn,zn;if(at>=0?(cn=at%4294967296|0,zn=at/4294967296|0):(zn=~(-at/4294967296),4294967295^(cn=~(-at%4294967296))?cn=cn+1|0:(cn=0,zn=zn+1|0)),at>=18446744073709552e3||at<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Pt.realloc(10),function(yn,En,tr){tr.buf[tr.pos++]=127&yn|128,yn>>>=7,tr.buf[tr.pos++]=127&yn|128,yn>>>=7,tr.buf[tr.pos++]=127&yn|128,yn>>>=7,tr.buf[tr.pos++]=127&yn|128,tr.buf[tr.pos]=127&(yn>>>=7)}(cn,0,Pt),function(yn,En){var tr=(7&yn)<<4;En.buf[En.pos++]|=tr|((yn>>>=3)?128:0),yn&&(En.buf[En.pos++]=127&yn|((yn>>>=7)?128:0),yn&&(En.buf[En.pos++]=127&yn|((yn>>>=7)?128:0),yn&&(En.buf[En.pos++]=127&yn|((yn>>>=7)?128:0),yn&&(En.buf[En.pos++]=127&yn|((yn>>>=7)?128:0),yn&&(En.buf[En.pos++]=127&yn)))))}(zn,Pt)}(Fe,this):(this.realloc(4),this.buf[this.pos++]=127&Fe|(Fe>127?128:0),Fe<=127||(this.buf[this.pos++]=127&(Fe>>>=7)|(Fe>127?128:0),Fe<=127||(this.buf[this.pos++]=127&(Fe>>>=7)|(Fe>127?128:0),Fe<=127||(this.buf[this.pos++]=Fe>>>7&127))))},writeSVarint:function(Fe){this.writeVarint(Fe<0?2*-Fe-1:2*Fe)},writeBoolean:function(Fe){this.writeVarint(!!Fe)},writeString:function(Fe){Fe=String(Fe),this.realloc(4*Fe.length),this.pos++;var at=this.pos;this.pos=function(cn,zn,yn){for(var En,tr,Nn=0;Nn<zn.length;Nn++){if((En=zn.charCodeAt(Nn))>55295&&En<57344){if(!tr){En>56319||Nn+1===zn.length?(cn[yn++]=239,cn[yn++]=191,cn[yn++]=189):tr=En;continue}if(En<56320){cn[yn++]=239,cn[yn++]=191,cn[yn++]=189,tr=En;continue}En=tr-55296<<10|En-56320|65536,tr=null}else tr&&(cn[yn++]=239,cn[yn++]=191,cn[yn++]=189,tr=null);En<128?cn[yn++]=En:(En<2048?cn[yn++]=En>>6|192:(En<65536?cn[yn++]=En>>12|224:(cn[yn++]=En>>18|240,cn[yn++]=En>>12&63|128),cn[yn++]=En>>6&63|128),cn[yn++]=63&En|128)}return yn}(this.buf,Fe,this.pos);var Pt=this.pos-at;Pt>=128&&j(at,Pt,this),this.pos=at-1,this.writeVarint(Pt),this.pos+=Pt},writeFloat:function(Fe){this.realloc(4),d.write(this.buf,Fe,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Fe){this.realloc(8),d.write(this.buf,Fe,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Fe){var at=Fe.length;this.writeVarint(at),this.realloc(at);for(var Pt=0;Pt<at;Pt++)this.buf[this.pos++]=Fe[Pt]},writeRawMessage:function(Fe,at){this.pos++;var Pt=this.pos;Fe(at,this);var cn=this.pos-Pt;cn>=128&&j(Pt,cn,this),this.pos=Pt-1,this.writeVarint(cn),this.pos+=cn},writeMessage:function(Fe,at,Pt){this.writeTag(Fe,A.Bytes),this.writeRawMessage(at,Pt)},writePackedVarint:function(Fe,at){at.length&&this.writeMessage(Fe,Z,at)},writePackedSVarint:function(Fe,at){at.length&&this.writeMessage(Fe,ie,at)},writePackedBoolean:function(Fe,at){at.length&&this.writeMessage(Fe,De,at)},writePackedFloat:function(Fe,at){at.length&&this.writeMessage(Fe,ue,at)},writePackedDouble:function(Fe,at){at.length&&this.writeMessage(Fe,ge,at)},writePackedFixed32:function(Fe,at){at.length&&this.writeMessage(Fe,Le,at)},writePackedSFixed32:function(Fe,at){at.length&&this.writeMessage(Fe,Qe,at)},writePackedFixed64:function(Fe,at){at.length&&this.writeMessage(Fe,Je,at)},writePackedSFixed64:function(Fe,at){at.length&&this.writeMessage(Fe,At,at)},writeBytesField:function(Fe,at){this.writeTag(Fe,A.Bytes),this.writeBytes(at)},writeFixed32Field:function(Fe,at){this.writeTag(Fe,A.Fixed32),this.writeFixed32(at)},writeSFixed32Field:function(Fe,at){this.writeTag(Fe,A.Fixed32),this.writeSFixed32(at)},writeFixed64Field:function(Fe,at){this.writeTag(Fe,A.Fixed64),this.writeFixed64(at)},writeSFixed64Field:function(Fe,at){this.writeTag(Fe,A.Fixed64),this.writeSFixed64(at)},writeVarintField:function(Fe,at){this.writeTag(Fe,A.Varint),this.writeVarint(at)},writeSVarintField:function(Fe,at){this.writeTag(Fe,A.Varint),this.writeSVarint(at)},writeStringField:function(Fe,at){this.writeTag(Fe,A.Bytes),this.writeString(at)},writeFloatField:function(Fe,at){this.writeTag(Fe,A.Fixed32),this.writeFloat(at)},writeDoubleField:function(Fe,at){this.writeTag(Fe,A.Fixed64),this.writeDouble(at)},writeBooleanField:function(Fe,at){this.writeVarintField(Fe,!!at)}},n0}var qc=f(pg());const Wp=3;function np(d,A,h){d===1&&h.readMessage(i0,A)}function i0(d,A,h){if(d===3){const{id:y,bitmap:w,width:k,height:F,left:j,top:Z,advance:ie}=h.readMessage(r1,{});A.push({id:y,bitmap:new tc({width:k+2*Wp,height:F+2*Wp},w),metrics:{width:k,height:F,left:j,top:Z,advance:ie}})}}function r1(d,A,h){d===1?A.id=h.readVarint():d===2?A.bitmap=h.readBytes():d===3?A.width=h.readVarint():d===4?A.height=h.readVarint():d===5?A.left=h.readSVarint():d===6?A.top=h.readSVarint():d===7&&(A.advance=h.readVarint())}const i1=Wp;function mg(d){let A=0,h=0;for(const F of d)A+=F.w*F.h,h=Math.max(h,F.w);d.sort((F,j)=>j.h-F.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),h),h:1/0}];let w=0,k=0;for(const F of d)for(let j=y.length-1;j>=0;j--){const Z=y[j];if(!(F.w>Z.w||F.h>Z.h)){if(F.x=Z.x,F.y=Z.y,k=Math.max(k,F.y+F.h),w=Math.max(w,F.x+F.w),F.w===Z.w&&F.h===Z.h){const ie=y.pop();j<y.length&&(y[j]=ie)}else F.h===Z.h?(Z.x+=F.w,Z.w-=F.w):F.w===Z.w?(Z.y+=F.h,Z.h-=F.h):(y.push({x:Z.x+F.w,y:Z.y,w:Z.w-F.w,h:F.h}),Z.y+=F.h,Z.h-=F.h);break}}return{w,h:k,fill:A/(w*k)||0}}const Au=1;class o1{constructor(A,{pixelRatio:h,version:y,stretchX:w,stretchY:k,content:F,textFitWidth:j,textFitHeight:Z}){this.paddedRect=A,this.pixelRatio=h,this.stretchX=w,this.stretchY=k,this.content=F,this.version=y,this.textFitWidth=j,this.textFitHeight=Z}get tl(){return[this.paddedRect.x+Au,this.paddedRect.y+Au]}get br(){return[this.paddedRect.x+this.paddedRect.w-Au,this.paddedRect.y+this.paddedRect.h-Au]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Au)/this.pixelRatio,(this.paddedRect.h-2*Au)/this.pixelRatio]}}class s1{constructor(A,h){const y={},w={};this.haveRenderCallbacks=[];const k=[];this.addImages(A,y,k),this.addImages(h,w,k);const{w:F,h:j}=mg(k),Z=new zA({width:F||1,height:j||1});for(const ie in A){const ue=A[ie],ge=y[ie].paddedRect;zA.copy(ue.data,Z,{x:0,y:0},{x:ge.x+Au,y:ge.y+Au},ue.data)}for(const ie in h){const ue=h[ie],ge=w[ie].paddedRect,De=ge.x+Au,Le=ge.y+Au,Qe=ue.data.width,Je=ue.data.height;zA.copy(ue.data,Z,{x:0,y:0},{x:De,y:Le},ue.data),zA.copy(ue.data,Z,{x:0,y:Je-1},{x:De,y:Le-1},{width:Qe,height:1}),zA.copy(ue.data,Z,{x:0,y:0},{x:De,y:Le+Je},{width:Qe,height:1}),zA.copy(ue.data,Z,{x:Qe-1,y:0},{x:De-1,y:Le},{width:1,height:Je}),zA.copy(ue.data,Z,{x:0,y:0},{x:De+Qe,y:Le},{width:1,height:Je})}this.image=Z,this.iconPositions=y,this.patternPositions=w}addImages(A,h,y){for(const w in A){const k=A[w],F={x:0,y:0,w:k.data.width+2*Au,h:k.data.height+2*Au};y.push(F),h[w]=new o1(F,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(A,h){A.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in A.updatedImages)this.patchUpdatedImage(this.iconPositions[y],A.getImage(y),h),this.patchUpdatedImage(this.patternPositions[y],A.getImage(y),h)}patchUpdatedImage(A,h,y){if(!A||!h||A.version===h.version)return;A.version=h.version;const[w,k]=A.tl;y.update(h.data,void 0,{x:w,y:k})}}var Nd;Xn("ImagePosition",o1),Xn("ImageAtlas",s1),l.al=void 0,(Nd=l.al||(l.al={}))[Nd.none=0]="none",Nd[Nd.horizontal=1]="horizontal",Nd[Nd.vertical=2]="vertical",Nd[Nd.horizontalOnly=3]="horizontalOnly";const rp=-17;class Of{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(A,h,y){const w=new Of;return w.scale=A||1,w.fontStack=h,w.verticalAlign=y||"bottom",w}static forImage(A,h){const y=new Of;return y.imageName=A,y.verticalAlign=h||"bottom",y}}class ip{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(A,h){const y=new ip;for(let w=0;w<A.sections.length;w++){const k=A.sections[w];k.image?y.addImageSection(k):y.addTextSection(k,h)}return y}length(){return this.text.length}getSection(A){return this.sections[this.sectionIndex[A]]}getSectionIndex(A){return this.sectionIndex[A]}getCharCode(A){return this.text.charCodeAt(A)}verticalizePunctuation(){this.text=function(A){let h="";for(let y=0;y<A.length;y++){const w=A.charCodeAt(y+1)||null,k=A.charCodeAt(y-1)||null;h+=w&&$l(w)&&!Em[A[y+1]]||k&&$l(k)&&!Em[A[y-1]]||!Em[A[y]]?A[y]:Em[A[y]]}return h}(this.text)}trim(){let A=0;for(let y=0;y<this.text.length&&o0[this.text.charCodeAt(y)];y++)A++;let h=this.text.length;for(let y=this.text.length-1;y>=0&&y>=A&&o0[this.text.charCodeAt(y)];y--)h--;this.text=this.text.substring(A,h),this.sectionIndex=this.sectionIndex.slice(A,h)}substring(A,h){const y=new ip;return y.text=this.text.substring(A,h),y.sectionIndex=this.sectionIndex.slice(A,h),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((A,h)=>Math.max(A,this.sections[h].scale),0)}getMaxImageSize(A){let h=0,y=0;for(let w=0;w<this.length();w++){const k=this.getSection(w);if(k.imageName){const F=A[k.imageName];if(!F)continue;const j=F.displaySize;h=Math.max(h,j[0]),y=Math.max(y,j[1])}}return{maxImageWidth:h,maxImageHeight:y}}addTextSection(A,h){this.text+=A.text,this.sections.push(Of.forText(A.scale,A.fontStack||h,A.verticalAlign));const y=this.sections.length-1;for(let w=0;w<A.text.length;++w)this.sectionIndex.push(y)}addImageSection(A){const h=A.image?A.image.name:"";if(h.length===0)return void yt("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(Of.forImage(h,A.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):yt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Qp(d,A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe){const Je=ip.fromFeature(d,w);let At;ge===l.al.vertical&&Je.verticalizePunctuation();const{processBidirectionalText:_t,processStyledBidirectionalText:Wt}=_c;if(_t&&Je.sections.length===1){At=[];const at=_t(Je.toString(),Gd(Je,ie,k,A,y,Le));for(const Pt of at){const cn=new ip;cn.text=Pt,cn.sections=Je.sections;for(let zn=0;zn<Pt.length;zn++)cn.sectionIndex.push(0);At.push(cn)}}else if(Wt){At=[];const at=Wt(Je.text,Je.sectionIndex,Gd(Je,ie,k,A,y,Le));for(const Pt of at){const cn=new ip;cn.text=Pt[0],cn.sectionIndex=Pt[1],cn.sections=Je.sections,At.push(cn)}}else At=function(at,Pt){const cn=[],zn=at.text;let yn=0;for(const En of Pt)cn.push(at.substring(yn,En)),yn=En;return yn<zn.length&&cn.push(at.substring(yn,zn.length)),cn}(Je,Gd(Je,ie,k,A,y,Le));const It=[],Fe={positionedLines:It,text:Je.toString(),top:ue[1],bottom:ue[1],left:ue[0],right:ue[0],writingMode:ge,iconsInText:!1,verticalizable:!1};return function(at,Pt,cn,zn,yn,En,tr,Nn,er,Bn,Qr,Ci){let mi=0,Xr=0,To=0,Ha=0;const bA=Nn==="right"?1:Nn==="left"?0:.5,Ru=Dl/Ci;let Fh=0;for(const Za of yn){Za.trim();const QA=Za.getMaxScale(),cu={positionedGlyphs:[],lineOffset:0};at.positionedLines[Fh]=cu;const hu=cu.positionedGlyphs;let wc=0;if(!Za.length()){Xr+=En,++Fh;continue}const Lh=Bm(zn,Za,Ru);for(let Hc=0;Hc<Za.length();Hc++){const xA=Za.getSection(Hc),qA=Za.getSectionIndex(Hc),$A=Za.getCharCode(Hc),eA=A0(er,Qr,$A);let ba;if(xA.imageName){if(at.iconsInText=!0,xA.scale=xA.scale*Ru,ba=_(xA,eA,QA,Lh,zn),!ba)continue;wc=Math.max(wc,ba.imageOffset)}else if(ba=m(xA,$A,eA,Lh,Pt,cn),!ba)continue;const{rect:Yd,metrics:p0,baselineOffset:qd}=ba;hu.push({glyph:$A,imageName:xA.imageName,x:mi,y:Xr+qd+rp,vertical:eA,scale:xA.scale,fontStack:xA.fontStack,sectionIndex:qA,metrics:p0,rect:Yd}),eA?(at.verticalizable=!0,mi+=(xA.imageName?p0.advance:Dl)*xA.scale+Bn):mi+=p0.advance*xA.scale+Bn}hu.length!==0&&(To=Math.max(mi-Bn,To),K(hu,0,hu.length-1,bA)),mi=0,cu.lineOffset=Math.max(wc,(QA-1)*Dl);const YA=En*QA+wc;Xr+=YA,Ha=Math.max(YA,Ha),++Fh}const{horizontalAlign:Vc,verticalAlign:uu}=l1(tr);(function(Za,QA,cu,hu,wc,Lh,YA,Hc,xA){const qA=(QA-cu)*wc;let $A=0;$A=Lh!==YA?-Hc*hu-rp:-hu*xA*YA+.5*YA;for(const eA of Za)for(const ba of eA.positionedGlyphs)ba.x+=qA,ba.y+=$A})(at.positionedLines,bA,Vc,uu,To,Ha,En,Xr,yn.length),at.top+=-uu*Xr,at.bottom=at.top+Xr,at.left+=-Vc*To,at.right=at.left+To}(Fe,A,h,y,At,F,j,Z,ge,ie,De,Qe),!function(at){for(const Pt of at)if(Pt.positionedGlyphs.length!==0)return!1;return!0}(It)&&Fe}const o0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gg={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},s0={40:!0};function Yp(d,A,h,y,w,k){if(A.imageName){const F=y[A.imageName];return F?F.displaySize[0]*A.scale*Dl/k+w:0}{const F=h[A.fontStack],j=F&&F[d];return j?j.metrics.advance*A.scale+w:0}}function a0(d,A,h,y){const w=Math.pow(d-A,2);return y?d<A?w/2:2*w:w+Math.abs(h)*h}function l0(d,A,h){let y=0;return d===10&&(y-=1e4),h&&(y+=150),d!==40&&d!==65288||(y+=50),A!==41&&A!==65289||(y+=50),y}function a1(d,A,h,y,w,k){let F=null,j=a0(A,h,w,k);for(const Z of y){const ie=a0(A-Z.x,h,w,k)+Z.badness;ie<=j&&(F=Z,j=ie)}return{index:d,x:A,priorBreak:F,badness:j}}function yg(d){return d?yg(d.priorBreak).concat(d.index):[]}function Gd(d,A,h,y,w,k){if(!d)return[];const F=[],j=function(ge,De,Le,Qe,Je,At){let _t=0;for(let Wt=0;Wt<ge.length();Wt++){const It=ge.getSection(Wt);_t+=Yp(ge.getCharCode(Wt),It,Qe,Je,De,At)}return _t/Math.max(1,Math.ceil(_t/Le))}(d,A,h,y,w,k),Z=d.text.indexOf("​")>=0;let ie=0;for(let ge=0;ge<d.length();ge++){const De=d.getSection(ge),Le=d.getCharCode(ge);if(o0[Le]||(ie+=Yp(Le,De,y,w,A,k)),ge<d.length()-1){const Qe=!((ue=Le)<11904)&&(!!Ti["CJK Compatibility Forms"](ue)||!!Ti["CJK Compatibility"](ue)||!!Ti["CJK Strokes"](ue)||!!Ti["CJK Symbols and Punctuation"](ue)||!!Ti["Enclosed CJK Letters and Months"](ue)||!!Ti["Halfwidth and Fullwidth Forms"](ue)||!!Ti["Ideographic Description Characters"](ue)||!!Ti["Vertical Forms"](ue)||va.test(String.fromCodePoint(ue)));(gg[Le]||Qe||De.imageName||ge!==d.length()-2&&s0[d.getCharCode(ge+1)])&&F.push(a1(ge+1,ie,j,F,l0(Le,d.getCharCode(ge+1),Qe&&Z),!1))}}var ue;return yg(a1(d.length(),ie,j,F,0,!0))}function l1(d){let A=.5,h=.5;switch(d){case"right":case"top-right":case"bottom-right":A=1;break;case"left":case"top-left":case"bottom-left":A=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:A,verticalAlign:h}}function Bm(d,A,h){const y=A.getMaxScale()*Dl,{maxImageWidth:w,maxImageHeight:k}=A.getMaxImageSize(d),F=Math.max(y,k*h);return{verticalLineContentWidth:Math.max(y,w*h),horizontalLineContentHeight:F}}function vg(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function A0(d,A,h){return!(d===l.al.horizontal||!A&&!gs(h)||A&&(o0[h]||(y=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function m(d,A,h,y,w,k){const F=k[d.fontStack],j=function(ie,ue,ge,De){if(ie&&ie.rect)return ie;const Le=ue[ge.fontStack],Qe=Le&&Le[De];return Qe?{rect:null,metrics:Qe.metrics}:null}(F&&F[A],w,d,A);if(j===null)return null;let Z;if(h)Z=y.verticalLineContentWidth-d.scale*Dl;else{const ie=vg(d.verticalAlign);Z=(y.horizontalLineContentHeight-d.scale*Dl)*ie}return{rect:j.rect,metrics:j.metrics,baselineOffset:Z}}function _(d,A,h,y,w){const k=w[d.imageName];if(!k)return null;const F=k.paddedRect,j=k.displaySize,Z={width:j[0],height:j[1],left:Au,top:-3,advance:A?j[1]:j[0]};let ie;if(A)ie=y.verticalLineContentWidth-j[1]*d.scale;else{const ue=vg(d.verticalAlign);ie=(y.horizontalLineContentHeight-j[1]*d.scale)*ue}return{rect:F,metrics:Z,baselineOffset:ie,imageOffset:(A?j[0]:j[1])*d.scale-Dl*h}}function K(d,A,h,y){if(y===0)return;const w=d[h],k=(d[h].x+w.metrics.advance*w.scale)*y;for(let F=A;F<=h;F++)d[F].x-=k}function Q(d,A,h){const{horizontalAlign:y,verticalAlign:w}=l1(h),k=A[0]-d.displaySize[0]*y,F=A[1]-d.displaySize[1]*w;return{image:d,top:F,bottom:F+d.displaySize[1],left:k,right:k+d.displaySize[0]}}function se(d){var A,h;let y=d.left,w=d.top,k=d.right-y,F=d.bottom-w;const j=(A=d.image.textFitWidth)!==null&&A!==void 0?A:"stretchOrShrink",Z=(h=d.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",ie=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(Z==="proportional"){if(j==="stretchOnly"&&k/F<ie||j==="proportional"){const ue=Math.ceil(F*ie);y*=ue/k,k=ue}}else if(j==="proportional"&&Z==="stretchOnly"&&ie!==0&&k/F>ie){const ue=Math.ceil(k/ie);w*=ue/F,F=ue}return{x1:y,y1:w,x2:y+k,y2:w+F}}function ye(d,A,h,y,w,k){const F=d.image;let j;if(F.content){const At=F.content,_t=F.pixelRatio||1;j=[At[0]/_t,At[1]/_t,F.displaySize[0]-At[2]/_t,F.displaySize[1]-At[3]/_t]}const Z=A.left*k,ie=A.right*k;let ue,ge,De,Le;h==="width"||h==="both"?(Le=w[0]+Z-y[3],ge=w[0]+ie+y[1]):(Le=w[0]+(Z+ie-F.displaySize[0])/2,ge=Le+F.displaySize[0]);const Qe=A.top*k,Je=A.bottom*k;return h==="height"||h==="both"?(ue=w[1]+Qe-y[0],De=w[1]+Je+y[2]):(ue=w[1]+(Qe+Je-F.displaySize[1])/2,De=ue+F.displaySize[1]),{image:F,top:ue,right:ge,bottom:De,left:Le,collisionPadding:j}}const tt=255,Ot=128,Qt=tt*Ot;function Mn(d,A){const{expression:h}=A;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new os(d+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:w}=h;let k=0;for(;k<y.length&&y[k]<=d;)k++;k=Math.max(0,k-1);let F=k;for(;F<y.length&&y[F]<d+1;)F++;F=Math.min(y.length-1,F);const j=y[k],Z=y[F];return h.kind==="composite"?{kind:"composite",minZoom:j,maxZoom:Z,interpolationType:w}:{kind:"camera",minZoom:j,maxZoom:Z,minSize:h.evaluate(new os(j)),maxSize:h.evaluate(new os(Z)),interpolationType:w}}}function sr(d,A,h){let y="never";const w=d.get(A);return w?y=w:d.get(h)&&(y="always"),y}const yr=_A.VectorTileFeature.types,ar=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wr(d,A,h,y,w,k,F,j,Z,ie,ue,ge,De){const Le=j?Math.min(Qt,Math.round(j[0])):0,Qe=j?Math.min(Qt,Math.round(j[1])):0;d.emplaceBack(A,h,Math.round(32*y),Math.round(32*w),k,F,(Le<<1)+(Z?1:0),Qe,16*ie,16*ue,256*ge,256*De)}function ii(d,A,h){d.emplaceBack(A.x,A.y,h),d.emplaceBack(A.x,A.y,h),d.emplaceBack(A.x,A.y,h),d.emplaceBack(A.x,A.y,h)}function hi(d){for(const A of d.sections)if(hA(A.text))return!0;return!1}class Al{constructor(A){this.layoutVertexArray=new ts,this.indexArray=new ji,this.programConfigurations=A,this.segments=new ao,this.dynamicLayoutVertexArray=new Ko,this.opacityVertexArray=new jo,this.hasVisibleVertices=!1,this.placedSymbolArray=new Tt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(A,h,y,w){this.isEmpty()||(y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,nv.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,jp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,ar,!0),this.opacityVertexBuffer.itemSize=1),(y||w)&&this.programConfigurations.upload(A))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xn("SymbolBuffers",Al);class un{constructor(A,h,y){this.layoutVertexArray=new A,this.layoutAttributes=h,this.indexArray=new y,this.segments=new ao,this.collisionVertexArray=new ho}upload(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,t0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xn("CollisionBuffers",un);class Xt{constructor(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(F=>F.id),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mn(this.zoom,h["text-size"]),this.iconSizeData=Mn(this.zoom,h["icon-size"]);const y=this.layers[0].layout,w=y.get("symbol-sort-key"),k=y.get("symbol-z-order");this.canOverlap=sr(y,"text-overlap","text-allow-overlap")!=="never"||sr(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(F=>l.al[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=A.sourceID}createArrays(){this.text=new Al(new Tu(this.layers,this.zoom,A=>/^text/.test(A))),this.icon=new Al(new Tu(this.layers,this.zoom,A=>/^icon/.test(A))),this.glyphOffsetArray=new Kt,this.lineVertexArray=new zt,this.symbolInstances=new kt,this.textAnchorOffsets=new bn}calculateGlyphDependencies(A,h,y,w,k){for(let F=0;F<A.length;F++)if(h[A.charCodeAt(F)]=!0,(y||w)&&k){const j=Em[A.charAt(F)];j&&(h[j.charCodeAt(0)]=!0)}}populate(A,h,y){const w=this.layers[0],k=w.layout,F=k.get("text-font"),j=k.get("text-field"),Z=k.get("icon-image"),ie=(j.value.kind!=="constant"||j.value.value instanceof Ni&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),ue=Z.value.kind!=="constant"||!!Z.value.value||Object.keys(Z.parameters).length>0,ge=k.get("symbol-sort-key");if(this.features=[],!ie&&!ue)return;const De=h.iconDependencies,Le=h.glyphDependencies,Qe=h.availableImages,Je=new os(this.zoom);for(const{feature:At,id:_t,index:Wt,sourceLayerIndex:It}of A){const Fe=w._featureFilter.needGeometry,at=dh(At,Fe);if(!w._featureFilter.filter(Je,at,y))continue;let Pt,cn;if(Fe||(at.geometry=ku(At)),ie){const yn=w.getValueAndResolveTokens("text-field",at,y,Qe),En=Ni.factory(yn),tr=this.hasRTLText=this.hasRTLText||hi(En);(!tr||_c.getRTLTextPluginStatus()==="unavailable"||tr&&_c.isParsed())&&(Pt=dg(En,w,at))}if(ue){const yn=w.getValueAndResolveTokens("icon-image",at,y,Qe);cn=yn instanceof Ss?yn:Ss.fromString(yn)}if(!Pt&&!cn)continue;const zn=this.sortFeaturesByKey?ge.evaluate(at,{},y):void 0;if(this.features.push({id:_t,text:Pt,icon:cn,index:Wt,sourceLayerIndex:It,geometry:at.geometry,properties:At.properties,type:yr[At.type],sortKey:zn}),cn&&(De[cn.name]=!0),Pt){const yn=F.evaluate(at,{},y).join(","),En=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.al.vertical)>=0;for(const tr of Pt.sections)if(tr.image)De[tr.image.name]=!0;else{const Nn=yc(Pt.toString()),er=tr.fontStack||yn,Bn=Le[er]=Le[er]||{};this.calculateGlyphDependencies(tr.text,Bn,En,this.allowVerticalPlacement,Nn)}}}k.get("symbol-placement")==="line"&&(this.features=function(At){const _t={},Wt={},It=[];let Fe=0;function at(yn){It.push(At[yn]),Fe++}function Pt(yn,En,tr){const Nn=Wt[yn];return delete Wt[yn],Wt[En]=Nn,It[Nn].geometry[0].pop(),It[Nn].geometry[0]=It[Nn].geometry[0].concat(tr[0]),Nn}function cn(yn,En,tr){const Nn=_t[En];return delete _t[En],_t[yn]=Nn,It[Nn].geometry[0].shift(),It[Nn].geometry[0]=tr[0].concat(It[Nn].geometry[0]),Nn}function zn(yn,En,tr){const Nn=tr?En[0][En[0].length-1]:En[0][0];return`${yn}:${Nn.x}:${Nn.y}`}for(let yn=0;yn<At.length;yn++){const En=At[yn],tr=En.geometry,Nn=En.text?En.text.toString():null;if(!Nn){at(yn);continue}const er=zn(Nn,tr),Bn=zn(Nn,tr,!0);if(er in Wt&&Bn in _t&&Wt[er]!==_t[Bn]){const Qr=cn(er,Bn,tr),Ci=Pt(er,Bn,It[Qr].geometry);delete _t[er],delete Wt[Bn],Wt[zn(Nn,It[Ci].geometry,!0)]=Ci,It[Qr].geometry=null}else er in Wt?Pt(er,Bn,tr):Bn in _t?cn(er,Bn,tr):(at(yn),_t[er]=Fe-1,Wt[Bn]=Fe-1)}return It.filter(yn=>yn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,_t)=>At.sortKey-_t.sortKey)}update(A,h,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,h,this.layers,y),this.icon.programConfigurations.updatePaintArrays(A,h,this.layers,y))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(A,h){const y=this.lineVertexArray.length;if(A.segment!==void 0){let w=A.dist(h[A.segment+1]),k=A.dist(h[A.segment]);const F={};for(let j=A.segment+1;j<h.length;j++)F[j]={x:h[j].x,y:h[j].y,tileUnitDistanceFromAnchor:w},j<h.length-1&&(w+=h[j+1].dist(h[j]));for(let j=A.segment||0;j>=0;j--)F[j]={x:h[j].x,y:h[j].y,tileUnitDistanceFromAnchor:k},j>0&&(k+=h[j-1].dist(h[j]));for(let j=0;j<h.length;j++){const Z=F[j];this.lineVertexArray.emplaceBack(Z.x,Z.y,Z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(A,h,y,w,k,F,j,Z,ie,ue,ge,De){const Le=A.indexArray,Qe=A.layoutVertexArray,Je=A.segments.prepareSegment(4*h.length,Qe,Le,this.canOverlap?F.sortKey:void 0),At=this.glyphOffsetArray.length,_t=Je.vertexLength,Wt=this.allowVerticalPlacement&&j===l.al.vertical?Math.PI/2:0,It=F.text&&F.text.sections;for(let Fe=0;Fe<h.length;Fe++){const{tl:at,tr:Pt,bl:cn,br:zn,tex:yn,pixelOffsetTL:En,pixelOffsetBR:tr,minFontScaleX:Nn,minFontScaleY:er,glyphOffset:Bn,isSDF:Qr,sectionIndex:Ci}=h[Fe],mi=Je.vertexLength,Xr=Bn[1];Wr(Qe,Z.x,Z.y,at.x,Xr+at.y,yn.x,yn.y,y,Qr,En.x,En.y,Nn,er),Wr(Qe,Z.x,Z.y,Pt.x,Xr+Pt.y,yn.x+yn.w,yn.y,y,Qr,tr.x,En.y,Nn,er),Wr(Qe,Z.x,Z.y,cn.x,Xr+cn.y,yn.x,yn.y+yn.h,y,Qr,En.x,tr.y,Nn,er),Wr(Qe,Z.x,Z.y,zn.x,Xr+zn.y,yn.x+yn.w,yn.y+yn.h,y,Qr,tr.x,tr.y,Nn,er),ii(A.dynamicLayoutVertexArray,Z,Wt),Le.emplaceBack(mi,mi+2,mi+1),Le.emplaceBack(mi+1,mi+2,mi+3),Je.vertexLength+=4,Je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bn[0]),Fe!==h.length-1&&Ci===h[Fe+1].sectionIndex||A.programConfigurations.populatePaintArrays(Qe.length,F,F.index,{},De,It&&It[Ci])}A.placedSymbolArray.emplaceBack(Z.x,Z.y,At,this.glyphOffsetArray.length-At,_t,ie,ue,Z.segment,y?y[0]:0,y?y[1]:0,w[0],w[1],j,0,!1,0,ge)}_addCollisionDebugVertex(A,h,y,w,k,F){return h.emplaceBack(0,0),A.emplaceBack(y.x,y.y,w,k,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(A,h,y,w,k,F,j){const Z=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),ie=Z.vertexLength,ue=k.layoutVertexArray,ge=k.collisionVertexArray,De=j.anchorX,Le=j.anchorY;this._addCollisionDebugVertex(ue,ge,F,De,Le,new U(A,h)),this._addCollisionDebugVertex(ue,ge,F,De,Le,new U(y,h)),this._addCollisionDebugVertex(ue,ge,F,De,Le,new U(y,w)),this._addCollisionDebugVertex(ue,ge,F,De,Le,new U(A,w)),Z.vertexLength+=4;const Qe=k.indexArray;Qe.emplaceBack(ie,ie+1),Qe.emplaceBack(ie+1,ie+2),Qe.emplaceBack(ie+2,ie+3),Qe.emplaceBack(ie+3,ie),Z.primitiveLength+=4}addDebugCollisionBoxes(A,h,y,w){for(let k=A;k<h;k++){const F=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,w?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new un(Rs,Va.members,aa),this.iconCollisionBox=new un(Rs,Va.members,aa);for(let A=0;A<this.symbolInstances.length;A++){const h=this.symbolInstances.get(A);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(A,h,y,w,k,F,j,Z,ie){const ue={};for(let ge=h;ge<y;ge++){const De=A.get(ge);ue.textBox={x1:De.x1,y1:De.y1,x2:De.x2,y2:De.y2,anchorPointX:De.anchorPointX,anchorPointY:De.anchorPointY},ue.textFeatureIndex=De.featureIndex;break}for(let ge=w;ge<k;ge++){const De=A.get(ge);ue.verticalTextBox={x1:De.x1,y1:De.y1,x2:De.x2,y2:De.y2,anchorPointX:De.anchorPointX,anchorPointY:De.anchorPointY},ue.verticalTextFeatureIndex=De.featureIndex;break}for(let ge=F;ge<j;ge++){const De=A.get(ge);ue.iconBox={x1:De.x1,y1:De.y1,x2:De.x2,y2:De.y2,anchorPointX:De.anchorPointX,anchorPointY:De.anchorPointY},ue.iconFeatureIndex=De.featureIndex;break}for(let ge=Z;ge<ie;ge++){const De=A.get(ge);ue.verticalIconBox={x1:De.x1,y1:De.y1,x2:De.x2,y2:De.y2,anchorPointX:De.anchorPointX,anchorPointY:De.anchorPointY},ue.verticalIconFeatureIndex=De.featureIndex;break}return ue}deserializeCollisionBoxes(A){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const y=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(A,h){const y=A.placedSymbolArray.get(h),w=y.vertexStartIndex+4*y.numGlyphs;for(let k=y.vertexStartIndex;k<w;k+=4)A.indexArray.emplaceBack(k,k+2,k+1),A.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(A),y=Math.cos(A),w=[],k=[],F=[];for(let j=0;j<this.symbolInstances.length;++j){F.push(j);const Z=this.symbolInstances.get(j);w.push(0|Math.round(h*Z.anchorX+y*Z.anchorY)),k.push(Z.featureIndex)}return F.sort((j,Z)=>w[j]-w[Z]||k[Z]-k[j]),F}addToSortKeyRanges(A,h){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===h?y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:A,symbolInstanceEnd:A+1})}sortFeatures(A){if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const y=this.symbolInstances.get(h);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((w,k,F)=>{w>=0&&F.indexOf(w)===k&&this.addIndicesForPlacedSymbol(this.text,w)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let pn,Cr;Xn("SymbolBucket",Xt,{omit:["layers","collisionBoxArray","features","compareText"]}),Xt.MAX_GLYPHS=65535,Xt.addDynamicAttributes=ii;var pi={get paint(){return Cr=Cr||new Ws({"icon-opacity":new ri(Te.paint_symbol["icon-opacity"]),"icon-color":new ri(Te.paint_symbol["icon-color"]),"icon-halo-color":new ri(Te.paint_symbol["icon-halo-color"]),"icon-halo-width":new ri(Te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ri(Te.paint_symbol["icon-halo-blur"]),"icon-translate":new vr(Te.paint_symbol["icon-translate"]),"icon-translate-anchor":new vr(Te.paint_symbol["icon-translate-anchor"]),"text-opacity":new ri(Te.paint_symbol["text-opacity"]),"text-color":new ri(Te.paint_symbol["text-color"],{runtimeType:Pi,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new ri(Te.paint_symbol["text-halo-color"]),"text-halo-width":new ri(Te.paint_symbol["text-halo-width"]),"text-halo-blur":new ri(Te.paint_symbol["text-halo-blur"]),"text-translate":new vr(Te.paint_symbol["text-translate"]),"text-translate-anchor":new vr(Te.paint_symbol["text-translate-anchor"])})},get layout(){return pn=pn||new Ws({"symbol-placement":new vr(Te.layout_symbol["symbol-placement"]),"symbol-spacing":new vr(Te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vr(Te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ri(Te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vr(Te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vr(Te.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vr(Te.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vr(Te.layout_symbol["icon-ignore-placement"]),"icon-optional":new vr(Te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vr(Te.layout_symbol["icon-rotation-alignment"]),"icon-size":new ri(Te.layout_symbol["icon-size"]),"icon-text-fit":new vr(Te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vr(Te.layout_symbol["icon-text-fit-padding"]),"icon-image":new ri(Te.layout_symbol["icon-image"]),"icon-rotate":new ri(Te.layout_symbol["icon-rotate"]),"icon-padding":new ri(Te.layout_symbol["icon-padding"]),"icon-keep-upright":new vr(Te.layout_symbol["icon-keep-upright"]),"icon-offset":new ri(Te.layout_symbol["icon-offset"]),"icon-anchor":new ri(Te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vr(Te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vr(Te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vr(Te.layout_symbol["text-rotation-alignment"]),"text-field":new ri(Te.layout_symbol["text-field"]),"text-font":new ri(Te.layout_symbol["text-font"]),"text-size":new ri(Te.layout_symbol["text-size"]),"text-max-width":new ri(Te.layout_symbol["text-max-width"]),"text-line-height":new vr(Te.layout_symbol["text-line-height"]),"text-letter-spacing":new ri(Te.layout_symbol["text-letter-spacing"]),"text-justify":new ri(Te.layout_symbol["text-justify"]),"text-radial-offset":new ri(Te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vr(Te.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ri(Te.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ri(Te.layout_symbol["text-anchor"]),"text-max-angle":new vr(Te.layout_symbol["text-max-angle"]),"text-writing-mode":new vr(Te.layout_symbol["text-writing-mode"]),"text-rotate":new ri(Te.layout_symbol["text-rotate"]),"text-padding":new vr(Te.layout_symbol["text-padding"]),"text-keep-upright":new vr(Te.layout_symbol["text-keep-upright"]),"text-transform":new ri(Te.layout_symbol["text-transform"]),"text-offset":new ri(Te.layout_symbol["text-offset"]),"text-allow-overlap":new vr(Te.layout_symbol["text-allow-overlap"]),"text-overlap":new vr(Te.layout_symbol["text-overlap"]),"text-ignore-placement":new vr(Te.layout_symbol["text-ignore-placement"]),"text-optional":new vr(Te.layout_symbol["text-optional"])})}};class ki{constructor(A){if(A.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=A.property.overrides?A.property.overrides.runtimeType:Fr,this.defaultValue=A}evaluate(A){if(A.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(A.formattedSection))return h.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default}eachChild(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xn("FormatSectionOverride",ki,{omit:["defaultValue"]});class wi extends ss{constructor(A){super(A,pi)}recalculate(A,h){if(super.recalculate(A,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const w=[];for(const k of y)w.indexOf(k)<0&&w.push(k);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(A,h,y,w){const k=this.layout.get(A).evaluate(h,{},y,w),F=this._unevaluatedLayout._values[A];return F.isDataDriven()||_u(F.value)||!k?k:function(j,Z){return Z.replace(/{([^{}]+)}/g,(ie,ue)=>j&&ue in j?String(j[ue]):"")}(h.properties,k)}createBucket(A){return new Xt(A)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const A of pi.paint.overridableProperties){if(!wi.hasPaintOverride(this.layout,A))continue;const h=this.paint.get(A),y=new ki(h),w=new Uc(y,h.property.specification);let k=null;k=h.value.kind==="constant"||h.value.kind==="source"?new Xh("source",w):new Jh("composite",w,h.value.zoomStops),this.paint._values[A]=new Il(h.property,k,h.parameters)}}_handleOverridablePaintPropertyUpdate(A,h,y){return!(!this.layout||h.isDataDriven()||y.isDataDriven())&&wi.hasPaintOverride(this.layout,A)}static hasPaintOverride(A,h){const y=A.get("text-field"),w=pi.paint.properties[h];let k=!1;const F=j=>{for(const Z of j)if(w.overrides&&w.overrides.hasOverride(Z))return void(k=!0)};if(y.value.kind==="constant"&&y.value.value instanceof Ni)F(y.value.value.sections);else if(y.value.kind==="source"){const j=ie=>{k||(ie instanceof Sr&&Ho(ie.value)===La?F(ie.value.sections):ie instanceof yd?F(ie.sections):ie.eachChild(j))},Z=y.value;Z._styleExpression&&j(Z._styleExpression.expression)}return k}}let qi;var jA={get paint(){return qi=qi||new Ws({"background-color":new vr(Te.paint_background["background-color"]),"background-pattern":new Tl(Te.paint_background["background-pattern"]),"background-opacity":new vr(Te.paint_background["background-opacity"])})}};class Ms extends ss{constructor(A){super(A,jA)}}let jd;var iv={get paint(){return jd=jd||new Ws({"raster-opacity":new vr(Te.paint_raster["raster-opacity"]),"raster-hue-rotate":new vr(Te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vr(Te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vr(Te.paint_raster["raster-brightness-max"]),"raster-saturation":new vr(Te.paint_raster["raster-saturation"]),"raster-contrast":new vr(Te.paint_raster["raster-contrast"]),"raster-resampling":new vr(Te.paint_raster["raster-resampling"]),"raster-fade-duration":new vr(Te.paint_raster["raster-fade-duration"])})}};class P3 extends ss{constructor(A){super(A,iv)}}class R3 extends ss{constructor(A){super(A,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=A}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class D3{constructor(A){this._methodToThrottle=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const K3={once:!0},ov=63710088e-1;class qp{constructor(A,h){if(isNaN(A)||isNaN(h))throw new Error(`Invalid LngLat object: (${A}, ${h})`);if(this.lng=+A,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qp(Rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(A){const h=Math.PI/180,y=this.lat*h,w=A.lat*h,k=Math.sin(y)*Math.sin(w)+Math.cos(y)*Math.cos(w)*Math.cos((A.lng-this.lng)*h);return ov*Math.acos(Math.min(k,1))}static convert(A){if(A instanceof qp)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new qp(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new qp(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const F_=2*Math.PI*ov;function L_(d){return F_*Math.cos(d*Math.PI/180)}function sd(d){return(180+d)/360}function U_(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function z_(d,A){return d/L_(A)}function op(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function So(d,A){return d*L_(op(A))}class A1{constructor(A,h,y=0){this.x=+A,this.y=+h,this.z=+y}static fromLngLat(A,h=0){const y=qp.convert(A);return new A1(sd(y.lng),U_(y.lat),z_(h,y.lat))}toLngLat(){return new qp(360*this.x-180,op(this.y))}toAltitude(){return So(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/F_*(A=op(this.y),1/Math.cos(A*Math.PI/180));var A}}function $c(d,A,h){var y=2*Math.PI*6378137/256/Math.pow(2,h);return[d*y-2*Math.PI*6378137/2,A*y-2*Math.PI*6378137/2]}class Kl{constructor(A,h,y){if(!function(w,k,F){return!(w<0||w>25||F<0||F>=Math.pow(2,w)||k<0||k>=Math.pow(2,w))}(A,h,y))throw new Error(`x=${h}, y=${y}, z=${A} outside of bounds. 0<=x<${Math.pow(2,A)}, 0<=y<${Math.pow(2,A)} 0<=z<=25 `);this.z=A,this.x=h,this.y=y,this.key=u0(0,A,A,h,y)}equals(A){return this.z===A.z&&this.x===A.x&&this.y===A.y}url(A,h,y){const w=(F=this.y,j=this.z,Z=$c(256*(k=this.x),256*(F=Math.pow(2,j)-F-1),j),ie=$c(256*(k+1),256*(F+1),j),Z[0]+","+Z[1]+","+ie[0]+","+ie[1]);var k,F,j,Z,ie;const ue=function(ge,De,Le){let Qe,Je="";for(let At=ge;At>0;At--)Qe=1<<At-1,Je+=(De&Qe?1:0)+(Le&Qe?2:0);return Je}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,ue).replace(/{bbox-epsg-3857}/g,w)}isChildOf(A){const h=this.z-A.z;return h>0&&A.x===this.x>>h&&A.y===this.y>>h}getTilePoint(A){const h=Math.pow(2,this.z);return new U((A.x*h-this.x)*it,(A.y*h-this.y)*it)}toString(){return`${this.z}/${this.x}/${this.y}`}}class N_{constructor(A,h){this.wrap=A,this.canonical=h,this.key=u0(A,h.z,h.z,h.x,h.y)}}class WA{constructor(A,h,y,w,k){if(this.terrainRttPosMatrix32f=null,A<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${A}; z = ${y}`);this.overscaledZ=A,this.wrap=h,this.canonical=new Kl(y,+w,+k),this.key=u0(h,A,y,w,k)}clone(){return new WA(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)}scaledTo(A){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-A;return A>this.canonical.z?new WA(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new WA(A,this.wrap,A,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(A,h){if(A>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${A}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-A;return A>this.canonical.z?u0(this.wrap*+h,A,this.canonical.z,this.canonical.x,this.canonical.y):u0(this.wrap*+h,A,A,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(A){if(A.wrap!==this.wrap)return!1;const h=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>h&&A.canonical.y===this.canonical.y>>h}children(A){if(this.overscaledZ>=A)return[new WA(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,y=2*this.canonical.x,w=2*this.canonical.y;return[new WA(h,this.wrap,h,y,w),new WA(h,this.wrap,h,y+1,w),new WA(h,this.wrap,h,y,w+1),new WA(h,this.wrap,h,y+1,w+1)]}isLessThan(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))}wrapped(){return new WA(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(A){return new WA(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new N_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(A){return this.canonical.getTilePoint(new A1(A.x-this.wrap,A.y))}}function u0(d,A,h,y,w){(d*=2)<0&&(d=-1*d-1);const k=1<<h;return(k*k*d+k*w+y).toString(36)+h.toString(36)+A.toString(36)}Xn("CanonicalTileID",Kl),Xn("OverscaledTileID",WA,{omit:["terrainRttPosMatrix32f"]});class G_{constructor(A,h,y,w=1,k=1,F=1,j=0){if(this.uid=A,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void yt(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const Z=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=k,this.blueFactor=F,this.baseShift=j;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ie=0;ie<Z;ie++)this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie)],this.data[this._idx(Z,ie)]=this.data[this._idx(Z-1,ie)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie,0)],this.data[this._idx(ie,Z)]=this.data[this._idx(ie,Z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z-1,0)],this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z-1)],this.data[this._idx(Z,Z)]=this.data[this._idx(Z-1,Z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ie=0;ie<Z;ie++)for(let ue=0;ue<Z;ue++){const ge=this.get(ie,ue);ge>this.max&&(this.max=ge),ge<this.min&&(this.min=ge)}}get(A,h){const y=new Uint8Array(this.data.buffer),w=4*this._idx(A,h);return this.unpack(y[w],y[w+1],y[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(A,h){if(A<-1||A>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(A+1)}unpack(A,h,y){return A*this.redFactor+h*this.greenFactor+y*this.blueFactor-this.baseShift}getPixels(){return new zA({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(A,h,y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,k=h*this.dim+this.dim,F=y*this.dim,j=y*this.dim+this.dim;switch(h){case-1:w=k-1;break;case 1:k=w+1}switch(y){case-1:F=j-1;break;case 1:j=F+1}const Z=-h*this.dim,ie=-y*this.dim;for(let ue=F;ue<j;ue++)for(let ge=w;ge<k;ge++)this.data[this._idx(ge,ue)]=A.data[this._idx(ge+Z,ue+ie)]}}Xn("DEMData",G_);class j_{constructor(A){this._stringToNumber={},this._numberToString=[];for(let h=0;h<A.length;h++){const y=A[h];this._stringToNumber[y]=h,this._numberToString[h]=y}}encode(A){return this._stringToNumber[A]}decode(A){if(A>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${A} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[A]}}class W_{constructor(A,h,y,w,k){this.type="Feature",this._vectorTileFeature=A,A._z=h,A._x=y,A._y=w,this.properties=A.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(A){this._geometry=A}toJSON(){const A={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(A[h]=this[h]);return A}}class Q_{constructor(A,h){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new ou(it,16,0),this.grid3D=new ou(it,16,0),this.featureIndexArray=new ln,this.promoteId=h}insert(A,h,y,w,k,F){const j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,w,k);const Z=F?this.grid3D:this.grid;for(let ie=0;ie<h.length;ie++){const ue=h[ie],ge=[1/0,1/0,-1/0,-1/0];for(let De=0;De<ue.length;De++){const Le=ue[De];ge[0]=Math.min(ge[0],Le.x),ge[1]=Math.min(ge[1],Le.y),ge[2]=Math.max(ge[2],Le.x),ge[3]=Math.max(ge[3],Le.y)}ge[0]<it&&ge[1]<it&&ge[2]>=0&&ge[3]>=0&&Z.insert(j,ge[0],ge[1],ge[2],ge[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _A.VectorTile(new qc(this.rawTileData)).layers,this.sourceLayerCoder=new j_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(A,h,y,w){this.loadVTLayers();const k=A.params,F=it/A.tileSize/A.scale,j=Ed(k.filter),Z=A.queryGeometry,ie=A.queryPadding*F,ue=Y_(Z),ge=this.grid.query(ue.minX-ie,ue.minY-ie,ue.maxX+ie,ue.maxY+ie),De=Y_(A.cameraQueryGeometry),Le=this.grid3D.query(De.minX-ie,De.minY-ie,De.maxX+ie,De.maxY+ie,(At,_t,Wt,It)=>function(Fe,at,Pt,cn,zn){for(const En of Fe)if(at<=En.x&&Pt<=En.y&&cn>=En.x&&zn>=En.y)return!0;const yn=[new U(at,Pt),new U(at,zn),new U(cn,zn),new U(cn,Pt)];if(Fe.length>2){for(const En of yn)if(wo(Fe,En))return!0}for(let En=0;En<Fe.length-1;En++)if(vm(Fe[En],Fe[En+1],yn))return!0;return!1}(A.cameraQueryGeometry,At-ie,_t-ie,Wt+ie,It+ie));for(const At of Le)ge.push(At);ge.sort(sp);const Qe={};let Je;for(let At=0;At<ge.length;At++){const _t=ge[At];if(_t===Je)continue;Je=_t;const Wt=this.featureIndexArray.get(_t);let It=null;this.loadMatchingFeature(Qe,Wt.bucketIndex,Wt.sourceLayerIndex,Wt.featureIndex,j,k.layers,k.availableImages,h,y,w,(Fe,at,Pt)=>(It||(It=ku(Fe)),at.queryIntersectsFeature({queryGeometry:Z,feature:Fe,featureState:Pt,geometry:It,zoom:this.z,transform:A.transform,pixelsToTileUnits:F,pixelPosMatrix:A.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:A.getElevation})))}return Qe}loadMatchingFeature(A,h,y,w,k,F,j,Z,ie,ue,ge){const De=this.bucketLayerIDs[h];if(F&&!De.some(At=>F.has(At)))return;const Le=this.sourceLayerCoder.decode(y),Qe=this.vtLayers[Le].feature(w);if(k.needGeometry){const At=dh(Qe,!0);if(!k.filter(new os(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!k.filter(new os(this.tileID.overscaledZ),Qe))return;const Je=this.getId(Qe,Le);for(let At=0;At<De.length;At++){const _t=De[At];if(F&&!F.has(_t))continue;const Wt=Z[_t];if(!Wt)continue;let It={};Je&&ue&&(It=ue.getState(Wt.sourceLayer||"_geojsonTileLayer",Je));const Fe=St({},ie[_t]);Fe.paint=Cg(Fe.paint,Wt.paint,Qe,It,j),Fe.layout=Cg(Fe.layout,Wt.layout,Qe,It,j);const at=!ge||ge(Qe,Wt,It);if(!at)continue;const Pt=new W_(Qe,this.z,this.x,this.y,Je);Pt.layer=Fe;let cn=A[_t];cn===void 0&&(cn=A[_t]=[]),cn.push({featureIndex:w,feature:Pt,intersectionZ:at})}}lookupSymbolFeatures(A,h,y,w,k,F,j,Z){const ie={};this.loadVTLayers();const ue=Ed(k);for(const ge of A)this.loadMatchingFeature(ie,y,w,ge,ue,F,j,Z,h);return ie}hasLayer(A){for(const h of this.bucketLayerIDs)for(const y of h)if(A===y)return!0;return!1}getId(A,h){var y;let w=A.id;return this.promoteId&&(w=A.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((y=A.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(w=Number(A.properties.cluster_id))),w}}function Cg(d,A,h,y,w){return Pe(d,(k,F)=>{const j=A instanceof Zu?A.get(F):null;return j&&j.evaluate?j.evaluate(h,y,w):j})}function Y_(d){let A=1/0,h=1/0,y=-1/0,w=-1/0;for(const k of d)A=Math.min(A,k.x),h=Math.min(h,k.y),y=Math.max(y,k.x),w=Math.max(w,k.y);return{minX:A,minY:h,maxX:y,maxY:w}}function sp(d,A){return A-d}function sv(d,A,h,y,w){const k=[];for(let F=0;F<d.length;F++){const j=d[F];let Z;for(let ie=0;ie<j.length-1;ie++){let ue=j[ie],ge=j[ie+1];ue.x<A&&ge.x<A||(ue.x<A?ue=new U(A,ue.y+(A-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round():ge.x<A&&(ge=new U(A,ue.y+(A-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round()),ue.y<h&&ge.y<h||(ue.y<h?ue=new U(ue.x+(h-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),h)._round():ge.y<h&&(ge=new U(ue.x+(h-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),h)._round()),ue.x>=y&&ge.x>=y||(ue.x>=y?ue=new U(y,ue.y+(y-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round():ge.x>=y&&(ge=new U(y,ue.y+(y-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round()),ue.y>=w&&ge.y>=w||(ue.y>=w?ue=new U(ue.x+(w-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),w)._round():ge.y>=w&&(ge=new U(ue.x+(w-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),w)._round()),Z&&ue.equals(Z[Z.length-1])||(Z=[ue],k.push(Z)),Z.push(ge)))))}}return k}Xn("FeatureIndex",Q_,{omit:["rawTileData","sourceLayerCoder"]});class Wd extends U{constructor(A,h,y,w){super(A,h),this.angle=y,w!==void 0&&(this.segment=w)}clone(){return new Wd(this.x,this.y,this.angle,this.segment)}}function Cl(d,A,h,y,w){if(A.segment===void 0||h===0)return!0;let k=A,F=A.segment+1,j=0;for(;j>-h/2;){if(F--,F<0)return!1;j-=d[F].dist(k),k=d[F]}j+=d[F].dist(d[F+1]),F++;const Z=[];let ie=0;for(;j<h/2;){const ue=d[F],ge=d[F+1];if(!ge)return!1;let De=d[F-1].angleTo(ue)-ue.angleTo(ge);for(De=Math.abs((De+3*Math.PI)%(2*Math.PI)-Math.PI),Z.push({distance:j,angleDelta:De}),ie+=De;j-Z[0].distance>y;)ie-=Z.shift().angleDelta;if(ie>w)return!1;F++,j+=ue.dist(ge)}return!0}function Fl(d){let A=0;for(let h=0;h<d.length-1;h++)A+=d[h].dist(d[h+1]);return A}function av(d,A,h){return d?.6*A*h:0}function q_(d,A){return Math.max(d?d.right-d.left:0,A?A.right-A.left:0)}function F3(d,A,h,y,w,k){const F=av(h,w,k),j=q_(h,y)*k;let Z=0;const ie=Fl(d)/2;for(let ue=0;ue<d.length-1;ue++){const ge=d[ue],De=d[ue+1],Le=ge.dist(De);if(Z+Le>ie){const Qe=(ie-Z)/Le,Je=BA.number(ge.x,De.x,Qe),At=BA.number(ge.y,De.y,Qe),_t=new Wd(Je,At,De.angleTo(ge),ue);return _t._round(),!F||Cl(d,_t,j,F,A)?_t:void 0}Z+=Le}}function L3(d,A,h,y,w,k,F,j,Z){const ie=av(y,k,F),ue=q_(y,w),ge=ue*F,De=d[0].x===0||d[0].x===Z||d[0].y===0||d[0].y===Z;return A-ge<A/4&&(A=ge+A/4),$_(d,De?A/2*j%A:(ue/2+2*k)*F*j%A,A,ie,h,ge,De,!1,Z)}function $_(d,A,h,y,w,k,F,j,Z){const ie=k/2,ue=Fl(d);let ge=0,De=A-h,Le=[];for(let Qe=0;Qe<d.length-1;Qe++){const Je=d[Qe],At=d[Qe+1],_t=Je.dist(At),Wt=At.angleTo(Je);for(;De+h<ge+_t;){De+=h;const It=(De-ge)/_t,Fe=BA.number(Je.x,At.x,It),at=BA.number(Je.y,At.y,It);if(Fe>=0&&Fe<Z&&at>=0&&at<Z&&De-ie>=0&&De+ie<=ue){const Pt=new Wd(Fe,at,Wt,Qe);Pt._round(),y&&!Cl(d,Pt,k,y,w)||Le.push(Pt)}}ge+=_t}return j||Le.length||F||(Le=$_(d,ge/2,h,y,w,k,F,!0,Z)),Le}Xn("Anchor",Wd);const u1=Au;function V_(d,A,h,y){const w=[],k=d.image,F=k.pixelRatio,j=k.paddedRect.w-2*u1,Z=k.paddedRect.h-2*u1;let ie={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const ue=k.stretchX||[[0,j]],ge=k.stretchY||[[0,Z]],De=(Bn,Qr)=>Bn+Qr[1]-Qr[0],Le=ue.reduce(De,0),Qe=ge.reduce(De,0),Je=j-Le,At=Z-Qe;let _t=0,Wt=Le,It=0,Fe=Qe,at=0,Pt=Je,cn=0,zn=At;if(k.content&&y){const Bn=k.content,Qr=Bn[2]-Bn[0],Ci=Bn[3]-Bn[1];(k.textFitWidth||k.textFitHeight)&&(ie=se(d)),_t=c1(ue,0,Bn[0]),It=c1(ge,0,Bn[1]),Wt=c1(ue,Bn[0],Bn[2]),Fe=c1(ge,Bn[1],Bn[3]),at=Bn[0]-_t,cn=Bn[1]-It,Pt=Qr-Wt,zn=Ci-Fe}const yn=ie.x1,En=ie.y1,tr=ie.x2-yn,Nn=ie.y2-En,er=(Bn,Qr,Ci,mi)=>{const Xr=h0(Bn.stretch-_t,Wt,tr,yn),To=_g(Bn.fixed-at,Pt,Bn.stretch,Le),Ha=h0(Qr.stretch-It,Fe,Nn,En),bA=_g(Qr.fixed-cn,zn,Qr.stretch,Qe),Ru=h0(Ci.stretch-_t,Wt,tr,yn),Fh=_g(Ci.fixed-at,Pt,Ci.stretch,Le),Vc=h0(mi.stretch-It,Fe,Nn,En),uu=_g(mi.fixed-cn,zn,mi.stretch,Qe),Za=new U(Xr,Ha),QA=new U(Ru,Ha),cu=new U(Ru,Vc),hu=new U(Xr,Vc),wc=new U(To/F,bA/F),Lh=new U(Fh/F,uu/F),YA=A*Math.PI/180;if(YA){const qA=Math.sin(YA),$A=Math.cos(YA),eA=[$A,-qA,qA,$A];Za._matMult(eA),QA._matMult(eA),hu._matMult(eA),cu._matMult(eA)}const Hc=Bn.stretch+Bn.fixed,xA=Qr.stretch+Qr.fixed;return{tl:Za,tr:QA,bl:hu,br:cu,tex:{x:k.paddedRect.x+u1+Hc,y:k.paddedRect.y+u1+xA,w:Ci.stretch+Ci.fixed-Hc,h:mi.stretch+mi.fixed-xA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wc,pixelOffsetBR:Lh,minFontScaleX:Pt/F/tr,minFontScaleY:zn/F/Nn,isSDF:h}};if(y&&(k.stretchX||k.stretchY)){const Bn=c0(ue,Je,Le),Qr=c0(ge,At,Qe);for(let Ci=0;Ci<Bn.length-1;Ci++){const mi=Bn[Ci],Xr=Bn[Ci+1];for(let To=0;To<Qr.length-1;To++)w.push(er(mi,Qr[To],Xr,Qr[To+1]))}}else w.push(er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:j+1},{fixed:0,stretch:Z+1}));return w}function c1(d,A,h){let y=0;for(const w of d)y+=Math.max(A,Math.min(h,w[1]))-Math.max(A,Math.min(h,w[0]));return y}function c0(d,A,h){const y=[{fixed:-1,stretch:0}];for(const[w,k]of d){const F=y[y.length-1];y.push({fixed:w-F.stretch,stretch:F.stretch}),y.push({fixed:w-F.stretch,stretch:F.stretch+(k-w)})}return y.push({fixed:A+u1,stretch:h}),y}function h0(d,A,h,y){return d/A*h+y}function _g(d,A,h,y){return d-A*h/y}class h1{constructor(A,h,y,w,k,F,j,Z,ie,ue){var ge;if(this.boxStartIndex=A.length,ie){let De=F.top,Le=F.bottom;const Qe=F.collisionPadding;Qe&&(De-=Qe[1],Le+=Qe[3]);let Je=Le-De;Je>0&&(Je=Math.max(10,Je),this.circleDiameter=Je)}else{const De=!((ge=F.image)===null||ge===void 0)&&ge.content&&(F.image.textFitWidth||F.image.textFitHeight)?se(F):{x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};De.y1=De.y1*j-Z[0],De.y2=De.y2*j+Z[2],De.x1=De.x1*j-Z[3],De.x2=De.x2*j+Z[1];const Le=F.collisionPadding;if(Le&&(De.x1-=Le[0]*j,De.y1-=Le[1]*j,De.x2+=Le[2]*j,De.y2+=Le[3]*j),ue){const Qe=new U(De.x1,De.y1),Je=new U(De.x2,De.y1),At=new U(De.x1,De.y2),_t=new U(De.x2,De.y2),Wt=ue*Math.PI/180;Qe._rotate(Wt),Je._rotate(Wt),At._rotate(Wt),_t._rotate(Wt),De.x1=Math.min(Qe.x,Je.x,At.x,_t.x),De.x2=Math.max(Qe.x,Je.x,At.x,_t.x),De.y1=Math.min(Qe.y,Je.y,At.y,_t.y),De.y2=Math.max(Qe.y,Je.y,At.y,_t.y)}A.emplaceBack(h.x,h.y,De.x1,De.y1,De.x2,De.y2,y,w,k)}this.boxEndIndex=A.length}}class bg{constructor(A=[],h=(y,w)=>y<w?-1:y>w?1:0){if(this.data=A,this.length=this.data.length,this.compare=h,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:h,compare:y}=this,w=h[A];for(;A>0;){const k=A-1>>1,F=h[k];if(y(w,F)>=0)break;h[A]=F,A=k}h[A]=w}_down(A){const{data:h,compare:y}=this,w=this.length>>1,k=h[A];for(;A<w;){let F=1+(A<<1);const j=F+1;if(j<this.length&&y(h[j],h[F])<0&&(F=j),y(h[F],k)>=0)break;h[A]=h[F],A=F}h[A]=k}}function Dh(d,A=1,h=!1){let y=1/0,w=1/0,k=-1/0,F=-1/0;const j=d[0];for(let Le=0;Le<j.length;Le++){const Qe=j[Le];(!Le||Qe.x<y)&&(y=Qe.x),(!Le||Qe.y<w)&&(w=Qe.y),(!Le||Qe.x>k)&&(k=Qe.x),(!Le||Qe.y>F)&&(F=Qe.y)}const Z=Math.min(k-y,F-w);let ie=Z/2;const ue=new bg([],d0);if(Z===0)return new U(y,w);for(let Le=y;Le<k;Le+=Z)for(let Qe=w;Qe<F;Qe+=Z)ue.push(new f0(Le+ie,Qe+ie,ie,d));let ge=function(Le){let Qe=0,Je=0,At=0;const _t=Le[0];for(let Wt=0,It=_t.length,Fe=It-1;Wt<It;Fe=Wt++){const at=_t[Wt],Pt=_t[Fe],cn=at.x*Pt.y-Pt.x*at.y;Je+=(at.x+Pt.x)*cn,At+=(at.y+Pt.y)*cn,Qe+=3*cn}return new f0(Je/Qe,At/Qe,0,Le)}(d),De=ue.length;for(;ue.length;){const Le=ue.pop();(Le.d>ge.d||!ge.d)&&(ge=Le,h&&console.log("found best %d after %d probes",Math.round(1e4*Le.d)/1e4,De)),Le.max-ge.d<=A||(ie=Le.h/2,ue.push(new f0(Le.p.x-ie,Le.p.y-ie,ie,d)),ue.push(new f0(Le.p.x+ie,Le.p.y-ie,ie,d)),ue.push(new f0(Le.p.x-ie,Le.p.y+ie,ie,d)),ue.push(new f0(Le.p.x+ie,Le.p.y+ie,ie,d)),De+=4)}return h&&(console.log(`num probes: ${De}`),console.log(`best distance: ${ge.d}`)),ge.p}function d0(d,A){return A.max-d.max}function f0(d,A,h,y){this.p=new U(d,A),this.h=h,this.d=function(w,k){let F=!1,j=1/0;for(let Z=0;Z<k.length;Z++){const ie=k[Z];for(let ue=0,ge=ie.length,De=ge-1;ue<ge;De=ue++){const Le=ie[ue],Qe=ie[De];Le.y>w.y!=Qe.y>w.y&&w.x<(Qe.x-Le.x)*(w.y-Le.y)/(Qe.y-Le.y)+Le.x&&(F=!F),j=Math.min(j,ym(w,Le,Qe))}}return(F?1:-1)*Math.sqrt(j)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var Pu;l.aB=void 0,(Pu=l.aB||(l.aB={}))[Pu.center=1]="center",Pu[Pu.left=2]="left",Pu[Pu.right=3]="right",Pu[Pu.top=4]="top",Pu[Pu.bottom=5]="bottom",Pu[Pu["top-left"]=6]="top-left",Pu[Pu["top-right"]=7]="top-right",Pu[Pu["bottom-left"]=8]="bottom-left",Pu[Pu["bottom-right"]=9]="bottom-right";const $p=7,lv=Number.POSITIVE_INFINITY;function H_(d,A){return A[1]!==lv?function(h,y,w){let k=0,F=0;switch(y=Math.abs(y),w=Math.abs(w),h){case"top-right":case"top-left":case"top":F=w-$p;break;case"bottom-right":case"bottom-left":case"bottom":F=-w+$p}switch(h){case"top-right":case"bottom-right":case"right":k=-y;break;case"top-left":case"bottom-left":case"left":k=y}return[k,F]}(d,A[0],A[1]):function(h,y){let w=0,k=0;y<0&&(y=0);const F=y/Math.SQRT2;switch(h){case"top-right":case"top-left":k=F-$p;break;case"bottom-right":case"bottom-left":k=-F+$p;break;case"bottom":k=-y+$p;break;case"top":k=y-$p}switch(h){case"top-right":case"bottom-right":w=-F;break;case"top-left":case"bottom-left":w=F;break;case"left":w=y;break;case"right":w=-y}return[w,k]}(d,A[0])}function Av(d,A,h){var y;const w=d.layout,k=(y=w.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(A,{},h);if(k){const j=k.values,Z=[];for(let ie=0;ie<j.length;ie+=2){const ue=Z[ie]=j[ie],ge=j[ie+1].map(De=>De*Dl);ue.startsWith("top")?ge[1]-=$p:ue.startsWith("bottom")&&(ge[1]+=$p),Z[ie+1]=ge}return new pa(Z)}const F=w.get("text-variable-anchor");if(F){let j;j=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(A,{},h)*Dl,lv]:w.get("text-offset").evaluate(A,{},h).map(ie=>ie*Dl);const Z=[];for(const ie of F)Z.push(ie,H_(ie,j));return new pa(Z)}return null}function Qd(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lo(d,A,h,y,w,k,F,j,Z,ie,ue,ge){let De=k.textMaxSize.evaluate(A,{});De===void 0&&(De=F);const Le=d.layers[0].layout,Qe=Le.get("icon-offset").evaluate(A,{},ue),Je=Kh(h.horizontal),At=F/24,_t=d.tilePixelRatio*At,Wt=d.tilePixelRatio*De/24,It=d.tilePixelRatio*j,Fe=d.tilePixelRatio*Le.get("symbol-spacing"),at=Le.get("text-padding")*d.tilePixelRatio,Pt=function(Ci,mi,Xr,To=1){const Ha=Ci.get("icon-padding").evaluate(mi,{},Xr),bA=Ha&&Ha.values;return[bA[0]*To,bA[1]*To,bA[2]*To,bA[3]*To]}(Le,A,ue,d.tilePixelRatio),cn=Le.get("text-max-angle")/180*Math.PI,zn=Le.get("text-rotation-alignment")!=="viewport"&&Le.get("symbol-placement")!=="point",yn=Le.get("icon-rotation-alignment")==="map"&&Le.get("symbol-placement")!=="point",En=Le.get("symbol-placement"),tr=Fe/2,Nn=Le.get("icon-text-fit");let er;y&&Nn!=="none"&&(d.allowVerticalPlacement&&h.vertical&&(er=ye(y,h.vertical,Nn,Le.get("icon-text-fit-padding"),Qe,At)),Je&&(y=ye(y,Je,Nn,Le.get("icon-text-fit-padding"),Qe,At)));const Bn=ue?ge.line.getGranularityForZoomLevel(ue.z):1,Qr=(Ci,mi)=>{mi.x<0||mi.x>=it||mi.y<0||mi.y>=it||function(Xr,To,Ha,bA,Ru,Fh,Vc,uu,Za,QA,cu,hu,wc,Lh,YA,Hc,xA,qA,$A,eA,ba,Yd,p0,qd,z3){const m0=Xr.addToLineVertexArray(To,Ha);let Om,g0,Hp,Im,yv=0,eb=0,tb=0,nb=0,f1=-1,vv=-1;const ap={};let rb=Xl("");if(Xr.allowVerticalPlacement&&bA.vertical){const ic=uu.layout.get("text-rotate").evaluate(ba,{},qd)+90;Hp=new h1(Za,To,QA,cu,hu,bA.vertical,wc,Lh,YA,ic),Vc&&(Im=new h1(Za,To,QA,cu,hu,Vc,xA,qA,YA,ic))}if(Ru){const ic=uu.layout.get("icon-rotate").evaluate(ba,{}),Uh=uu.layout.get("icon-text-fit")!=="none",lp=V_(Ru,ic,p0,Uh),zh=Vc?V_(Vc,ic,p0,Uh):void 0;g0=new h1(Za,To,QA,cu,hu,Ru,xA,qA,!1,ic),yv=4*lp.length;const Tm=Xr.iconSizeData;let If=null;Tm.kind==="source"?(If=[Ot*uu.layout.get("icon-size").evaluate(ba,{})],If[0]>Qt&&yt(`${Xr.layerIds[0]}: Value for "icon-size" is >= ${tt}. Reduce your "icon-size".`)):Tm.kind==="composite"&&(If=[Ot*Yd.compositeIconSizes[0].evaluate(ba,{},qd),Ot*Yd.compositeIconSizes[1].evaluate(ba,{},qd)],(If[0]>Qt||If[1]>Qt)&&yt(`${Xr.layerIds[0]}: Value for "icon-size" is >= ${tt}. Reduce your "icon-size".`)),Xr.addSymbols(Xr.icon,lp,If,eA,$A,ba,l.al.none,To,m0.lineStartIndex,m0.lineLength,-1,qd),f1=Xr.icon.placedSymbolArray.length-1,zh&&(eb=4*zh.length,Xr.addSymbols(Xr.icon,zh,If,eA,$A,ba,l.al.vertical,To,m0.lineStartIndex,m0.lineLength,-1,qd),vv=Xr.icon.placedSymbolArray.length-1)}const Zc=Object.keys(bA.horizontal);for(const ic of Zc){const Uh=bA.horizontal[ic];if(!Om){rb=Xl(Uh.text);const zh=uu.layout.get("text-rotate").evaluate(ba,{},qd);Om=new h1(Za,To,QA,cu,hu,Uh,wc,Lh,YA,zh)}const lp=Uh.positionedLines.length===1;if(tb+=uv(Xr,To,Uh,Fh,uu,YA,ba,Hc,m0,bA.vertical?l.al.horizontal:l.al.horizontalOnly,lp?Zc:[ic],ap,f1,Yd,qd),lp)break}bA.vertical&&(nb+=uv(Xr,To,bA.vertical,Fh,uu,YA,ba,Hc,m0,l.al.vertical,["vertical"],ap,vv,Yd,qd));const Cv=Om?Om.boxStartIndex:Xr.collisionBoxArray.length,N3=Om?Om.boxEndIndex:Xr.collisionBoxArray.length,G3=Hp?Hp.boxStartIndex:Xr.collisionBoxArray.length,j3=Hp?Hp.boxEndIndex:Xr.collisionBoxArray.length,W3=g0?g0.boxStartIndex:Xr.collisionBoxArray.length,_v=g0?g0.boxEndIndex:Xr.collisionBoxArray.length,Q3=Im?Im.boxStartIndex:Xr.collisionBoxArray.length,bv=Im?Im.boxEndIndex:Xr.collisionBoxArray.length;let $d=-1;const Mg=(ic,Uh)=>ic&&ic.circleDiameter?Math.max(ic.circleDiameter,Uh):Uh;$d=Mg(Om,$d),$d=Mg(Hp,$d),$d=Mg(g0,$d),$d=Mg(Im,$d);const ib=$d>-1?1:0;ib&&($d*=z3/Dl),Xr.glyphOffsetArray.length>=Xt.MAX_GLYPHS&&yt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ba.sortKey!==void 0&&Xr.addToSortKeyRanges(Xr.symbolInstances.length,ba.sortKey);const Y3=Av(uu,ba,qd),[ob,q3]=function(ic,Uh){const lp=ic.length,zh=Uh?.values;if(zh?.length>0)for(let Tm=0;Tm<zh.length;Tm+=2){const If=zh[Tm+1];ic.emplaceBack(l.aB[zh[Tm]],If[0],If[1])}return[lp,ic.length]}(Xr.textAnchorOffsets,Y3);Xr.symbolInstances.emplaceBack(To.x,To.y,ap.right>=0?ap.right:-1,ap.center>=0?ap.center:-1,ap.left>=0?ap.left:-1,ap.vertical||-1,f1,vv,rb,Cv,N3,G3,j3,W3,_v,Q3,bv,QA,tb,nb,yv,eb,ib,0,wc,$d,ob,q3)}(d,mi,Ci,h,y,w,er,d.layers[0],d.collisionBoxArray,A.index,A.sourceLayerIndex,d.index,_t,[at,at,at,at],zn,Z,It,Pt,yn,Qe,A,k,ie,ue,F)};if(En==="line")for(const Ci of sv(A.geometry,0,0,it,it)){const mi=Ds(Ci,Bn),Xr=L3(mi,Fe,cn,h.vertical||Je,y,24,Wt,d.overscaling,it);for(const To of Xr)Je&&Z_(d,Je.text,tr,To)||Qr(mi,To)}else if(En==="line-center"){for(const Ci of A.geometry)if(Ci.length>1){const mi=Ds(Ci,Bn),Xr=F3(mi,cn,h.vertical||Je,y,24,Wt);Xr&&Qr(mi,Xr)}}else if(A.type==="Polygon")for(const Ci of hf(A.geometry,0)){const mi=Dh(Ci,16);Qr(Ds(Ci[0],Bn,!0),new Wd(mi.x,mi.y,0))}else if(A.type==="LineString")for(const Ci of A.geometry){const mi=Ds(Ci,Bn);Qr(mi,new Wd(mi[0].x,mi[0].y,0))}else if(A.type==="Point")for(const Ci of A.geometry)for(const mi of Ci)Qr([mi],new Wd(mi.x,mi.y,0))}function uv(d,A,h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe){const Je=function(Wt,It,Fe,at,Pt,cn,zn,yn){const En=at.layout.get("text-rotate").evaluate(cn,{})*Math.PI/180,tr=[];for(const Nn of It.positionedLines)for(const er of Nn.positionedGlyphs){if(!er.rect)continue;const Bn=er.rect||{};let Qr=i1+1,Ci=!0,mi=1,Xr=0;const To=(Pt||yn)&&er.vertical,Ha=er.metrics.advance*er.scale/2;if(yn&&It.verticalizable&&(Xr=Nn.lineOffset/2-(er.imageName?-(Dl-er.metrics.width*er.scale)/2:(er.scale-1)*Dl)),er.imageName){const qA=zn[er.imageName];Ci=qA.sdf,mi=qA.pixelRatio,Qr=Au/mi}const bA=Pt?[er.x+Ha,er.y]:[0,0];let Ru=Pt?[0,0]:[er.x+Ha+Fe[0],er.y+Fe[1]-Xr],Fh=[0,0];To&&(Fh=Ru,Ru=[0,0]);const Vc=er.metrics.isDoubleResolution?2:1,uu=(er.metrics.left-Qr)*er.scale-Ha+Ru[0],Za=(-er.metrics.top-Qr)*er.scale+Ru[1],QA=uu+Bn.w/Vc*er.scale/mi,cu=Za+Bn.h/Vc*er.scale/mi,hu=new U(uu,Za),wc=new U(QA,Za),Lh=new U(uu,cu),YA=new U(QA,cu);if(To){const qA=new U(-Ha,Ha-rp),$A=-Math.PI/2,eA=Dl/2-Ha,ba=new U(5-rp-eA,-(er.imageName?eA:0)),Yd=new U(...Fh);hu._rotateAround($A,qA)._add(ba)._add(Yd),wc._rotateAround($A,qA)._add(ba)._add(Yd),Lh._rotateAround($A,qA)._add(ba)._add(Yd),YA._rotateAround($A,qA)._add(ba)._add(Yd)}if(En){const qA=Math.sin(En),$A=Math.cos(En),eA=[$A,-qA,qA,$A];hu._matMult(eA),wc._matMult(eA),Lh._matMult(eA),YA._matMult(eA)}const Hc=new U(0,0),xA=new U(0,0);tr.push({tl:hu,tr:wc,bl:Lh,br:YA,tex:Bn,writingMode:It.writingMode,glyphOffset:bA,sectionIndex:er.sectionIndex,isSDF:Ci,pixelOffsetTL:Hc,pixelOffsetBR:xA,minFontScaleX:0,minFontScaleY:0})}return tr}(0,h,j,w,k,F,y,d.allowVerticalPlacement),At=d.textSizeData;let _t=null;At.kind==="source"?(_t=[Ot*w.layout.get("text-size").evaluate(F,{})],_t[0]>Qt&&yt(`${d.layerIds[0]}: Value for "text-size" is >= ${tt}. Reduce your "text-size".`)):At.kind==="composite"&&(_t=[Ot*Le.compositeTextSizes[0].evaluate(F,{},Qe),Ot*Le.compositeTextSizes[1].evaluate(F,{},Qe)],(_t[0]>Qt||_t[1]>Qt)&&yt(`${d.layerIds[0]}: Value for "text-size" is >= ${tt}. Reduce your "text-size".`)),d.addSymbols(d.text,Je,_t,j,k,F,ie,A,Z.lineStartIndex,Z.lineLength,De,Qe);for(const Wt of ue)ge[Wt]=d.text.placedSymbolArray.length-1;return 4*Je.length}function Kh(d){for(const A in d)return d[A];return null}function Z_(d,A,h,y){const w=d.compareText;if(A in w){const k=w[A];for(let F=k.length-1;F>=0;F--)if(y.dist(k[F])<h)return!0}else w[A]=[];return w[A].push(y),!1}const X_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ks{static from(A){if(!(A instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,y]=new Uint8Array(A,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=y>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const k=X_[15&y];if(!k)throw new Error("Unrecognized array type.");const[F]=new Uint16Array(A,2,1),[j]=new Uint32Array(A,4,1);return new Ks(j,F,k,A)}constructor(A,h=64,y=Float64Array,w){if(isNaN(A)||A<0)throw new Error(`Unpexpected numItems value: ${A}.`);this.numItems=+A,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=y,this.IndexArrayType=A<65536?Uint16Array:Uint32Array;const k=X_.indexOf(this.ArrayType),F=2*A*this.ArrayType.BYTES_PER_ELEMENT,j=A*this.IndexArrayType.BYTES_PER_ELEMENT,Z=(8-j%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${y}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+j+Z,2*A),this._pos=2*A,this._finished=!0):(this.data=new ArrayBuffer(8+F+j+Z),this.ids=new this.IndexArrayType(this.data,8,A),this.coords=new this.ArrayType(this.data,8+j+Z,2*A),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=A)}add(A,h){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=A,this.coords[this._pos++]=h,y}finish(){const A=this._pos>>1;if(A!==this.numItems)throw new Error(`Added ${A} items when expected ${this.numItems}.`);return cv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(A,h,y,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:F,nodeSize:j}=this,Z=[0,k.length-1,0],ie=[];for(;Z.length;){const ue=Z.pop()||0,ge=Z.pop()||0,De=Z.pop()||0;if(ge-De<=j){for(let At=De;At<=ge;At++){const _t=F[2*At],Wt=F[2*At+1];_t>=A&&_t<=y&&Wt>=h&&Wt<=w&&ie.push(k[At])}continue}const Le=De+ge>>1,Qe=F[2*Le],Je=F[2*Le+1];Qe>=A&&Qe<=y&&Je>=h&&Je<=w&&ie.push(k[Le]),(ue===0?A<=Qe:h<=Je)&&(Z.push(De),Z.push(Le-1),Z.push(1-ue)),(ue===0?y>=Qe:w>=Je)&&(Z.push(Le+1),Z.push(ge),Z.push(1-ue))}return ie}within(A,h,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:k,nodeSize:F}=this,j=[0,w.length-1,0],Z=[],ie=y*y;for(;j.length;){const ue=j.pop()||0,ge=j.pop()||0,De=j.pop()||0;if(ge-De<=F){for(let At=De;At<=ge;At++)J_(k[2*At],k[2*At+1],A,h)<=ie&&Z.push(w[At]);continue}const Le=De+ge>>1,Qe=k[2*Le],Je=k[2*Le+1];J_(Qe,Je,A,h)<=ie&&Z.push(w[Le]),(ue===0?A-y<=Qe:h-y<=Je)&&(j.push(De),j.push(Le-1),j.push(1-ue)),(ue===0?A+y>=Qe:h+y>=Je)&&(j.push(Le+1),j.push(ge),j.push(1-ue))}return Z}}function cv(d,A,h,y,w,k){if(w-y<=h)return;const F=y+w>>1;hv(d,A,F,y,w,k),cv(d,A,h,y,F-1,1-k),cv(d,A,h,F+1,w,1-k)}function hv(d,A,h,y,w,k){for(;w>y;){if(w-y>600){const ie=w-y+1,ue=h-y+1,ge=Math.log(ie),De=.5*Math.exp(2*ge/3),Le=.5*Math.sqrt(ge*De*(ie-De)/ie)*(ue-ie/2<0?-1:1);hv(d,A,h,Math.max(y,Math.floor(h-ue*De/ie+Le)),Math.min(w,Math.floor(h+(ie-ue)*De/ie+Le)),k)}const F=A[2*h+k];let j=y,Z=w;for(Vp(d,A,y,h),A[2*w+k]>F&&Vp(d,A,y,w);j<Z;){for(Vp(d,A,j,Z),j++,Z--;A[2*j+k]<F;)j++;for(;A[2*Z+k]>F;)Z--}A[2*y+k]===F?Vp(d,A,y,Z):(Z++,Vp(d,A,Z,w)),Z<=h&&(y=Z+1),h<=Z&&(w=Z-1)}}function Vp(d,A,h,y){dv(d,h,y),dv(A,2*h,2*y),dv(A,2*h+1,2*y+1)}function dv(d,A,h){const y=d[A];d[A]=d[h],d[h]=y}function J_(d,A,h,y){const w=d-h,k=A-y;return w*w+k*k}var fv;l.co=void 0,(fv=l.co||(l.co={})).create="create",fv.load="load",fv.fullLoad="fullLoad";let xg=null,d1=[];const pv=1e3/60,mv="loadTime",gv="fullLoadTime",U3={mark(d){performance.mark(d)},frame(d){const A=d;xg!=null&&d1.push(A-xg),xg=A},clearMetrics(){xg=null,d1=[],performance.clearMeasures(mv),performance.clearMeasures(gv);for(const d in l.co)performance.clearMarks(l.co[d])},getPerformanceMetrics(){performance.measure(mv,l.co.create,l.co.load),performance.measure(gv,l.co.create,l.co.fullLoad);const d=performance.getEntriesByName(mv)[0].duration,A=performance.getEntriesByName(gv)[0].duration,h=d1.length,y=1/(d1.reduce((k,F)=>k+F,0)/h/1e3),w=d1.filter(k=>k>pv).reduce((k,F)=>k+(F-pv)/pv,0);return{loadTime:d,fullLoadTime:A,fps:y,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};l.$=A1,l.A=ne,l.B=BA,l.C=os,l.D=vr,l.E=Ve,l.F=gf,l.G=function(d){if(Ut==null){const A=d.navigator?d.navigator.userAgent:null;Ut=!!d.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return Ut},l.H=class{constructor(d,A){this.target=d,this.mapId=A,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new D3(()=>this.process()),this.subscription=Dn(this.target,"message",h=>this.receive(h),!1),this.globalScope=Zt(self)?d:window}registerMessageHandler(d,A){this.messageHandlers[d]=A}sendAsync(d,A){return new Promise((h,y)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),k=A?Dn(A.signal,"abort",()=>{k?.unsubscribe(),delete this.resolveRejects[w];const Z={id:w,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(Z)},K3):null;this.resolveRejects[w]={resolve:Z=>{k?.unsubscribe(),h(Z)},reject:Z=>{k?.unsubscribe(),y(Z)}};const F=[],j=Object.assign(Object.assign({},d),{id:w,sourceMapId:this.mapId,origin:location.origin,data:ea(d.data,F)});this.target.postMessage(j,{transfer:F})})}receive(d){const A=d.data,h=A.id;if(!(A.origin!=="file://"&&location.origin!=="file://"&&A.origin!=="resource://android"&&location.origin!=="resource://android"&&A.origin!==location.origin||A.targetMapId&&this.mapId!==A.targetMapId)){if(A.type==="<cancel>"){delete this.tasks[h];const y=this.abortControllers[h];return delete this.abortControllers[h],void(y&&y.abort())}if(Zt(self)||A.mustQueue)return this.tasks[h]=A,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,A)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),A=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),A&&this.processTask(d,A)}processTask(d,A){return o(this,void 0,void 0,function*(){if(A.type==="<response>"){const w=this.resolveRejects[d];return delete this.resolveRejects[d],w?void(A.error?w.reject(Su(A.error)):w.resolve(Su(A.data))):void 0}if(!this.messageHandlers[A.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${A.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=Su(A.data),y=new AbortController;this.abortControllers[d]=y;try{const w=yield this.messageHandlers[A.type](A.sourceMapId,h,y);this.completeTask(d,null,w)}catch(w){this.completeTask(d,w)}})}completeTask(d,A,h){const y=[];delete this.abortControllers[d];const w={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:A?ea(A):null,data:ea(h,y)};this.target.postMessage(w,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=o1,l.J=bt,l.K=function(){var d=new ne(16);return ne!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},l.L=function(d,A,h){var y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je=h[0],At=h[1],_t=h[2];return A===d?(d[12]=A[0]*Je+A[4]*At+A[8]*_t+A[12],d[13]=A[1]*Je+A[5]*At+A[9]*_t+A[13],d[14]=A[2]*Je+A[6]*At+A[10]*_t+A[14],d[15]=A[3]*Je+A[7]*At+A[11]*_t+A[15]):(w=A[1],k=A[2],F=A[3],j=A[4],Z=A[5],ie=A[6],ue=A[7],ge=A[8],De=A[9],Le=A[10],Qe=A[11],d[0]=y=A[0],d[1]=w,d[2]=k,d[3]=F,d[4]=j,d[5]=Z,d[6]=ie,d[7]=ue,d[8]=ge,d[9]=De,d[10]=Le,d[11]=Qe,d[12]=y*Je+j*At+ge*_t+A[12],d[13]=w*Je+Z*At+De*_t+A[13],d[14]=k*Je+ie*At+Le*_t+A[14],d[15]=F*Je+ue*At+Qe*_t+A[15]),d},l.M=function(d,A,h){var y=h[0],w=h[1],k=h[2];return d[0]=A[0]*y,d[1]=A[1]*y,d[2]=A[2]*y,d[3]=A[3]*y,d[4]=A[4]*w,d[5]=A[5]*w,d[6]=A[6]*w,d[7]=A[7]*w,d[8]=A[8]*k,d[9]=A[9]*k,d[10]=A[10]*k,d[11]=A[11]*k,d[12]=A[12],d[13]=A[13],d[14]=A[14],d[15]=A[15],d},l.N=function(d,A,h){var y=A[0],w=A[1],k=A[2],F=A[3],j=A[4],Z=A[5],ie=A[6],ue=A[7],ge=A[8],De=A[9],Le=A[10],Qe=A[11],Je=A[12],At=A[13],_t=A[14],Wt=A[15],It=h[0],Fe=h[1],at=h[2],Pt=h[3];return d[0]=It*y+Fe*j+at*ge+Pt*Je,d[1]=It*w+Fe*Z+at*De+Pt*At,d[2]=It*k+Fe*ie+at*Le+Pt*_t,d[3]=It*F+Fe*ue+at*Qe+Pt*Wt,d[4]=(It=h[4])*y+(Fe=h[5])*j+(at=h[6])*ge+(Pt=h[7])*Je,d[5]=It*w+Fe*Z+at*De+Pt*At,d[6]=It*k+Fe*ie+at*Le+Pt*_t,d[7]=It*F+Fe*ue+at*Qe+Pt*Wt,d[8]=(It=h[8])*y+(Fe=h[9])*j+(at=h[10])*ge+(Pt=h[11])*Je,d[9]=It*w+Fe*Z+at*De+Pt*At,d[10]=It*k+Fe*ie+at*Le+Pt*_t,d[11]=It*F+Fe*ue+at*Qe+Pt*Wt,d[12]=(It=h[12])*y+(Fe=h[13])*j+(at=h[14])*ge+(Pt=h[15])*Je,d[13]=It*w+Fe*Z+at*De+Pt*At,d[14]=It*k+Fe*ie+at*Le+Pt*_t,d[15]=It*F+Fe*ue+at*Qe+Pt*Wt,d},l.O=function(d,A){const h={};for(let y=0;y<A.length;y++){const w=A[y];w in d&&(h[w]=d[w])}return h},l.P=U,l.Q=qp,l.R=zA,l.S=U_,l.T=DA,l.U=sd,l.V=re,l.W=te,l.X=Vt,l.Y=WA,l.Z=it,l._=o,l.a=me,l.a$=function(d,A,h){var y=Math.sin(h),w=Math.cos(h),k=A[4],F=A[5],j=A[6],Z=A[7],ie=A[8],ue=A[9],ge=A[10],De=A[11];return A!==d&&(d[0]=A[0],d[1]=A[1],d[2]=A[2],d[3]=A[3],d[12]=A[12],d[13]=A[13],d[14]=A[14],d[15]=A[15]),d[4]=k*w+ie*y,d[5]=F*w+ue*y,d[6]=j*w+ge*y,d[7]=Z*w+De*y,d[8]=ie*w-k*y,d[9]=ue*w-F*y,d[10]=ge*w-j*y,d[11]=De*w-Z*y,d},l.a0=25,l.a1=Kl,l.a2=d=>{const A=window.document.createElement("video");return A.muted=!0,new Promise(h=>{A.onloadstart=()=>{h(A)};for(const y of d){const w=window.document.createElement("source");Xe(y)||(A.crossOrigin="Anonymous"),w.src=y,A.appendChild(w)}})},l.a3=on,l.a4=function(){return Ke++},l.a5=pt,l.a6=Xt,l.a7=Ed,l.a8=dh,l.a9=W_,l.aA=function(d,A,h,y,w=!1){if(!h[0]&&!h[1])return[0,0];const k=w?y==="map"?-d.bearingInRadians:0:y==="viewport"?d.bearingInRadians:0;if(k){const F=Math.sin(k),j=Math.cos(k);h=[h[0]*j-h[1]*F,h[0]*F+h[1]*j]}return[w?h[0]:nt(A,h[0],d.zoom),w?h[1]:nt(A,h[1],d.zoom)]},l.aC=sr,l.aD=Qd,l.aE=l1,l.aF=Ks,l.aG=as,l.aH=Ys,l.aI=Cn,l.aJ=ao,l.aK=ji,l.aL=Rt,l.aM=Ir,l.aN=So,l.aO=function(d,A,h){return d[0]=A[0]*h,d[1]=A[1]*h,d[2]=A[2]*h,d},l.aP=function(d,A,h){return d[0]=A[0]+h[0],d[1]=A[1]+h[1],d[2]=A[2]+h[2],d},l.aQ=function(d){var A=new ne(3);return A[0]=d[0],A[1]=d[1],A[2]=d[2],A},l.aR=function(d,A,h){return d[0]=A[0]*h[0],d[1]=A[1]*h[1],d[2]=A[2]*h[2],d[3]=A[3]*h[3],d},l.aS=function(d,A,h){return d[0]=A[0]-h[0],d[1]=A[1]-h[1],d[2]=A[2]-h[2],d},l.aT=function(d,A){var h=A[0],y=A[1],w=A[2],k=h*h+y*y+w*w;return k>0&&(k=1/Math.sqrt(k)),d[0]=A[0]*k,d[1]=A[1]*k,d[2]=A[2]*k,d},l.aU=function(d,A,h){var y=A[0],w=A[1],k=A[2],F=h[0],j=h[1],Z=h[2];return d[0]=w*Z-k*j,d[1]=k*F-y*Z,d[2]=y*j-w*F,d},l.aV=function(d,A){return d[0]*A[0]+d[1]*A[1]+d[2]*A[2]},l.aW=N_,l.aX=u0,l.aY=function(d,A,h,y,w){var k,F=1/Math.tan(A/2);return d[0]=F/h,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=F,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,w!=null&&w!==1/0?(d[10]=(w+y)*(k=1/(y-w)),d[14]=2*w*y*k):(d[10]=-1,d[14]=-2*y),d},l.aZ=function(d){var A=new ne(16);return A[0]=d[0],A[1]=d[1],A[2]=d[2],A[3]=d[3],A[4]=d[4],A[5]=d[5],A[6]=d[6],A[7]=d[7],A[8]=d[8],A[9]=d[9],A[10]=d[10],A[11]=d[11],A[12]=d[12],A[13]=d[13],A[14]=d[14],A[15]=d[15],A},l.a_=function(d,A,h){var y=Math.sin(h),w=Math.cos(h),k=A[0],F=A[1],j=A[2],Z=A[3],ie=A[4],ue=A[5],ge=A[6],De=A[7];return A!==d&&(d[8]=A[8],d[9]=A[9],d[10]=A[10],d[11]=A[11],d[12]=A[12],d[13]=A[13],d[14]=A[14],d[15]=A[15]),d[0]=k*w+ie*y,d[1]=F*w+ue*y,d[2]=j*w+ge*y,d[3]=Z*w+De*y,d[4]=ie*w-k*y,d[5]=ue*w-F*y,d[6]=ge*w-j*y,d[7]=De*w-Z*y,d},l.aa=function(d){const A={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,y,w,k)=>{const F=w||k;return A[y]=!F||F.toLowerCase(),""}),A["max-age"]){const h=parseInt(A["max-age"],10);isNaN(h)?delete A["max-age"]:A["max-age"]=h}return A},l.ab=Ln,l.ac=function(d){return Math.pow(2,d)},l.ad=le,l.ae=ut,l.af=85.051129,l.ag=z_,l.ah=function(d){return Math.log(d)/Math.LN2},l.ai=function(d){var A=d[0],h=d[1];return A*A+h*h},l.aj=function(d,A){const h=[];for(const y in d)y in A||h.push(y);return h},l.ak=function(d,A){let h=0,y=0;if(d.kind==="constant")y=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:w,minZoom:k,maxZoom:F}=d,j=w?ut(dl.interpolationFactor(w,A,k,F),0,1):0;d.kind==="camera"?y=BA.number(d.minSize,d.maxSize,j):h=j}return{uSizeT:h,uSize:y}},l.am=function(d,{uSize:A,uSizeT:h},{lowerSize:y,upperSize:w}){return d.kind==="source"?y/Ot:d.kind==="composite"?BA.number(y/Ot,w/Ot,h):A},l.an=function(d,A){var h=A[0],y=A[1],w=A[2],k=A[3],F=A[4],j=A[5],Z=A[6],ie=A[7],ue=A[8],ge=A[9],De=A[10],Le=A[11],Qe=A[12],Je=A[13],At=A[14],_t=A[15],Wt=h*j-y*F,It=h*Z-w*F,Fe=h*ie-k*F,at=y*Z-w*j,Pt=y*ie-k*j,cn=w*ie-k*Z,zn=ue*Je-ge*Qe,yn=ue*At-De*Qe,En=ue*_t-Le*Qe,tr=ge*At-De*Je,Nn=ge*_t-Le*Je,er=De*_t-Le*At,Bn=Wt*er-It*Nn+Fe*tr+at*En-Pt*yn+cn*zn;return Bn?(d[0]=(j*er-Z*Nn+ie*tr)*(Bn=1/Bn),d[1]=(w*Nn-y*er-k*tr)*Bn,d[2]=(Je*cn-At*Pt+_t*at)*Bn,d[3]=(De*Pt-ge*cn-Le*at)*Bn,d[4]=(Z*En-F*er-ie*yn)*Bn,d[5]=(h*er-w*En+k*yn)*Bn,d[6]=(At*Fe-Qe*cn-_t*It)*Bn,d[7]=(ue*cn-De*Fe+Le*It)*Bn,d[8]=(F*Nn-j*En+ie*zn)*Bn,d[9]=(y*En-h*Nn-k*zn)*Bn,d[10]=(Qe*Pt-Je*Fe+_t*Wt)*Bn,d[11]=(ge*Fe-ue*Pt-Le*Wt)*Bn,d[12]=(j*yn-F*tr-Z*zn)*Bn,d[13]=(h*tr-y*yn+w*zn)*Bn,d[14]=(Je*It-Qe*at-At*Wt)*Bn,d[15]=(ue*at-ge*It+De*Wt)*Bn,d):null},l.ao=rt,l.ap=function(d){return Math.hypot(d[0],d[1])},l.aq=function(d){return d[0]=0,d[1]=0,d},l.ar=function(d,A,h){return d[0]=A[0]*h,d[1]=A[1]*h,d},l.as=ii,l.at=je,l.au=function(d,A,h,y){const w=A.y-d.y,k=A.x-d.x,F=y.y-h.y,j=y.x-h.x,Z=F*k-j*w;if(Z===0)return null;const ie=(j*(d.y-h.y)-F*(d.x-h.x))/Z;return new U(d.x+ie*k,d.y+ie*w)},l.av=sv,l.aw=_f,l.ax=function(d){let A=1/0,h=1/0,y=-1/0,w=-1/0;for(const k of d)A=Math.min(A,k.x),h=Math.min(h,k.y),y=Math.max(y,k.x),w=Math.max(w,k.y);return[A,h,y,w]},l.ay=Dl,l.az=nt,l.b=An,l.b$=class extends He{},l.b0=function(){const d=new Float32Array(16);return le(d),d},l.b1=function(){const d=new Float64Array(16);return le(d),d},l.b2=function(){return new Float64Array(16)},l.b3=function(d,A,h){const y=new Float64Array(4);return function(w,k,F,j){var Z=.5*Math.PI/180;k*=Z,F*=Z,j*=Z;var ie=Math.sin(k),ue=Math.cos(k),ge=Math.sin(F),De=Math.cos(F),Le=Math.sin(j),Qe=Math.cos(j);w[0]=ie*De*Qe-ue*ge*Le,w[1]=ue*ge*Qe+ie*De*Le,w[2]=ue*De*Le-ie*ge*Qe,w[3]=ue*De*Qe+ie*ge*Le}(y,d,A-90,h),y},l.b4=function(d,A,h,y){var w,k,F,j,Z,ie=A[0],ue=A[1],ge=A[2],De=A[3],Le=h[0],Qe=h[1],Je=h[2],At=h[3];return(k=ie*Le+ue*Qe+ge*Je+De*At)<0&&(k=-k,Le=-Le,Qe=-Qe,Je=-Je,At=-At),1-k>V?(w=Math.acos(k),F=Math.sin(w),j=Math.sin((1-y)*w)/F,Z=Math.sin(y*w)/F):(j=1-y,Z=y),d[0]=j*ie+Z*Le,d[1]=j*ue+Z*Qe,d[2]=j*ge+Z*Je,d[3]=j*De+Z*At,d},l.b5=function(d){const A=new Float64Array(9);var h,y,w,k,F,j,Z,ie,ue,ge,De,Le,Qe,Je,At,_t,Wt,It;ge=(w=(y=d)[0])*(Z=w+w),De=(k=y[1])*Z,Qe=(F=y[2])*Z,Je=F*(ie=k+k),_t=(j=y[3])*Z,Wt=j*ie,It=j*(ue=F+F),(h=A)[0]=1-(Le=k*ie)-(At=F*ue),h[3]=De-It,h[6]=Qe+Wt,h[1]=De+It,h[4]=1-ge-At,h[7]=Je-_t,h[2]=Qe-Wt,h[5]=Je+_t,h[8]=1-ge-Le;const Fe=Ir(-Math.asin(ut(A[2],-1,1)));let at,Pt;return Math.hypot(A[5],A[8])<.001?(at=0,Pt=-Ir(Math.atan2(A[3],A[4]))):(at=Ir(A[5]===0&&A[8]===0?0:Math.atan2(A[5],A[8])),Pt=Ir(A[1]===0&&A[0]===0?0:Math.atan2(A[1],A[0]))),{roll:at,pitch:Fe+90,bearing:Pt}},l.b6=function(d,A){return d.roll==A.roll&&d.pitch==A.pitch&&d.bearing==A.bearing},l.b7=Di,l.b8=Cf,l.b9=qs,l.bA=function(d){if(d.type==="custom")return new R3(d);switch(d.type){case"background":return new Ms(d);case"circle":return new bf(d);case"fill":return new Fo(d);case"fill-extrusion":return new X0(d);case"heatmap":return new vl(d);case"hillshade":return new Cm(d);case"line":return new hg(d);case"raster":return new P3(d);case"symbol":return new wi(d)}},l.bB=Ye,l.bC=function(d,A){if(!d)return[{command:"setStyle",args:[A]}];let h=[];try{if(!Ft(d.version,A.version))return[{command:"setStyle",args:[A]}];Ft(d.center,A.center)||h.push({command:"setCenter",args:[A.center]}),Ft(d.state,A.state)||h.push({command:"setGlobalState",args:[A.state]}),Ft(d.centerAltitude,A.centerAltitude)||h.push({command:"setCenterAltitude",args:[A.centerAltitude]}),Ft(d.zoom,A.zoom)||h.push({command:"setZoom",args:[A.zoom]}),Ft(d.bearing,A.bearing)||h.push({command:"setBearing",args:[A.bearing]}),Ft(d.pitch,A.pitch)||h.push({command:"setPitch",args:[A.pitch]}),Ft(d.roll,A.roll)||h.push({command:"setRoll",args:[A.roll]}),Ft(d.sprite,A.sprite)||h.push({command:"setSprite",args:[A.sprite]}),Ft(d.glyphs,A.glyphs)||h.push({command:"setGlyphs",args:[A.glyphs]}),Ft(d.transition,A.transition)||h.push({command:"setTransition",args:[A.transition]}),Ft(d.light,A.light)||h.push({command:"setLight",args:[A.light]}),Ft(d.terrain,A.terrain)||h.push({command:"setTerrain",args:[A.terrain]}),Ft(d.sky,A.sky)||h.push({command:"setSky",args:[A.sky]}),Ft(d.projection,A.projection)||h.push({command:"setProjection",args:[A.projection]});const y={},w=[];(function(F,j,Z,ie){let ue;for(ue in j=j||{},F=F||{})Object.prototype.hasOwnProperty.call(F,ue)&&(Object.prototype.hasOwnProperty.call(j,ue)||nn(ue,Z,ie));for(ue in j)Object.prototype.hasOwnProperty.call(j,ue)&&(Object.prototype.hasOwnProperty.call(F,ue)?Ft(F[ue],j[ue])||(F[ue].type==="geojson"&&j[ue].type==="geojson"&&Rn(F,j,ue)?jt(Z,{command:"setGeoJSONSourceData",args:[ue,j[ue].data]}):On(ue,j,Z,ie)):Gt(ue,j,Z))})(d.sources,A.sources,w,y);const k=[];d.layers&&d.layers.forEach(F=>{"source"in F&&y[F.source]?h.push({command:"removeLayer",args:[F.id]}):k.push(F)}),h=h.concat(w),function(F,j,Z){j=j||[];const ie=(F=F||[]).map(Tr),ue=j.map(Tr),ge=F.reduce(or,{}),De=j.reduce(or,{}),Le=ie.slice(),Qe=Object.create(null);let Je,At,_t,Wt,It;for(let Fe=0,at=0;Fe<ie.length;Fe++)Je=ie[Fe],Object.prototype.hasOwnProperty.call(De,Je)?at++:(jt(Z,{command:"removeLayer",args:[Je]}),Le.splice(Le.indexOf(Je,at),1));for(let Fe=0,at=0;Fe<ue.length;Fe++)Je=ue[ue.length-1-Fe],Le[Le.length-1-Fe]!==Je&&(Object.prototype.hasOwnProperty.call(ge,Je)?(jt(Z,{command:"removeLayer",args:[Je]}),Le.splice(Le.lastIndexOf(Je,Le.length-at),1)):at++,Wt=Le[Le.length-Fe],jt(Z,{command:"addLayer",args:[De[Je],Wt]}),Le.splice(Le.length-Fe,0,Je),Qe[Je]=!0);for(let Fe=0;Fe<ue.length;Fe++)if(Je=ue[Fe],At=ge[Je],_t=De[Je],!Qe[Je]&&!Ft(At,_t))if(Ft(At.source,_t.source)&&Ft(At["source-layer"],_t["source-layer"])&&Ft(At.type,_t.type)){for(It in dr(At.layout,_t.layout,Z,Je,null,"setLayoutProperty"),dr(At.paint,_t.paint,Z,Je,null,"setPaintProperty"),Ft(At.filter,_t.filter)||jt(Z,{command:"setFilter",args:[Je,_t.filter]}),Ft(At.minzoom,_t.minzoom)&&Ft(At.maxzoom,_t.maxzoom)||jt(Z,{command:"setLayerZoomRange",args:[Je,_t.minzoom,_t.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,It)&&It!=="layout"&&It!=="paint"&&It!=="filter"&&It!=="metadata"&&It!=="minzoom"&&It!=="maxzoom"&&(It.indexOf("paint.")===0?dr(At[It],_t[It],Z,Je,It.slice(6),"setPaintProperty"):Ft(At[It],_t[It])||jt(Z,{command:"setLayerProperty",args:[Je,It,_t[It]]}));for(It in _t)Object.prototype.hasOwnProperty.call(_t,It)&&!Object.prototype.hasOwnProperty.call(At,It)&&It!=="layout"&&It!=="paint"&&It!=="filter"&&It!=="metadata"&&It!=="minzoom"&&It!=="maxzoom"&&(It.indexOf("paint.")===0?dr(At[It],_t[It],Z,Je,It.slice(6),"setPaintProperty"):Ft(At[It],_t[It])||jt(Z,{command:"setLayerProperty",args:[Je,It,_t[It]]}))}else jt(Z,{command:"removeLayer",args:[Je]}),Wt=Le[Le.lastIndexOf(Je)+1],jt(Z,{command:"addLayer",args:[_t,Wt]})}(k,A.layers,h)}catch(y){console.warn("Unable to compute style diff:",y),h=[{command:"setStyle",args:[A]}]}return h},l.bD=function(d){const A=[],h=d.id;return h===void 0&&A.push({message:`layers.${h}: missing required property "id"`}),d.render===void 0&&A.push({message:`layers.${h}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&A.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),A},l.bE=function d(A,h){if(Array.isArray(A)){if(!Array.isArray(h)||A.length!==h.length)return!1;for(let y=0;y<A.length;y++)if(!d(A[y],h[y]))return!1;return!0}if(typeof A=="object"&&A!==null&&h!==null){if(typeof h!="object"||Object.keys(A).length!==Object.keys(h).length)return!1;for(const y in A)if(!d(A[y],h[y]))return!1;return!0}return A===h},l.bF=Pe,l.bG=Re,l.bH=class extends ys{constructor(d,A){super(d,A),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},l.bI=Od,l.bJ=class extends ys{constructor(d,A){super(d,A),this.current=gA}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let A=1;A<16;A++)if(d[A]!==this.current[A]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},l.bK=Bd,l.bL=class extends ys{constructor(d,A){super(d,A),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},l.bM=class extends ys{constructor(d,A){super(d,A),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},l.bN=G,l.bO=function(d,A){var h=Math.sin(A),y=Math.cos(A);return d[0]=y,d[1]=h,d[2]=0,d[3]=-h,d[4]=y,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},l.bP=function(d,A,h){var y=A[0],w=A[1],k=A[2];return d[0]=y*h[0]+w*h[3]+k*h[6],d[1]=y*h[1]+w*h[4]+k*h[7],d[2]=y*h[2]+w*h[5]+k*h[8],d},l.bQ=function(d,A,h,y,w,k,F){var j=1/(A-h),Z=1/(y-w),ie=1/(k-F);return d[0]=-2*j,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Z,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*ie,d[11]=0,d[12]=(A+h)*j,d[13]=(w+y)*Z,d[14]=(F+k)*ie,d[15]=1,d},l.bR=class extends ys{constructor(d,A){super(d,A),this.current=new Array}set(d){if(d!=this.current){this.current=d;const A=new Float32Array(4*d.length);for(let h=0;h<d.length;h++)A[4*h]=d[h].r,A[4*h+1]=d[h].g,A[4*h+2]=d[h].b,A[4*h+3]=d[h].a;this.gl.uniform4fv(this.location,A)}}},l.bS=class extends ys{constructor(d,A){super(d,A),this.current=new Array}set(d){if(d!=this.current){this.current=d;const A=new Float32Array(d);this.gl.uniform1fv(this.location,A)}}},l.bT=class extends I{},l.bU=rv,l.bV=class extends Y{},l.bW=zp,l.bX=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},l.bY=vA,l.bZ=function(d,A,h){var y=A[0],w=A[1],k=A[2],F=h[3]*y+h[7]*w+h[11]*k+h[15];return d[0]=(h[0]*y+h[4]*w+h[8]*k+h[12])/(F=F||1),d[1]=(h[1]*y+h[5]*w+h[9]*k+h[13])/F,d[2]=(h[2]*y+h[6]*w+h[10]*k+h[14])/F,d},l.b_=class extends sl{},l.ba=na,l.bb=vs,l.bc=Ie,l.bd=$e,l.be=sa,l.bf=function(d,A,h,y,w){return Ie(y,w,ut((d-A)/(h-A),0,1))},l.bg=Ge,l.bh=function(){return new Float64Array(3)},l.bi=function(d,A,h,y){return d[0]=A[0]+h[0]*y,d[1]=A[1]+h[1]*y,d[2]=A[2]+h[2]*y,d},l.bj=xe,l.bk=function(){return new Float64Array(4)},l.bl=function(d,A,h,y){var w=[],k=[];return w[0]=A[0]-h[0],w[1]=A[1]-h[1],w[2]=A[2]-h[2],k[0]=w[0]*Math.cos(y)-w[1]*Math.sin(y),k[1]=w[0]*Math.sin(y)+w[1]*Math.cos(y),k[2]=w[2],d[0]=k[0]+h[0],d[1]=k[1]+h[1],d[2]=k[2]+h[2],d},l.bm=function(d,A,h,y){var w=[],k=[];return w[0]=A[0]-h[0],w[1]=A[1]-h[1],w[2]=A[2]-h[2],k[0]=w[0],k[1]=w[1]*Math.cos(y)-w[2]*Math.sin(y),k[2]=w[1]*Math.sin(y)+w[2]*Math.cos(y),d[0]=k[0]+h[0],d[1]=k[1]+h[1],d[2]=k[2]+h[2],d},l.bn=function(d,A,h,y){var w=[],k=[];return w[0]=A[0]-h[0],w[1]=A[1]-h[1],w[2]=A[2]-h[2],k[0]=w[2]*Math.sin(y)+w[0]*Math.cos(y),k[1]=w[1],k[2]=w[2]*Math.cos(y)-w[0]*Math.sin(y),d[0]=k[0]+h[0],d[1]=k[1]+h[1],d[2]=k[2]+h[2],d},l.bo=pe,l.bp=function(d,A,h){var y=Math.sin(h),w=Math.cos(h),k=A[0],F=A[1],j=A[2],Z=A[3],ie=A[8],ue=A[9],ge=A[10],De=A[11];return A!==d&&(d[4]=A[4],d[5]=A[5],d[6]=A[6],d[7]=A[7],d[12]=A[12],d[13]=A[13],d[14]=A[14],d[15]=A[15]),d[0]=k*w-ie*y,d[1]=F*w-ue*y,d[2]=j*w-ge*y,d[3]=Z*w-De*y,d[8]=k*y+ie*w,d[9]=F*y+ue*w,d[10]=j*y+ge*w,d[11]=Z*y+De*w,d},l.bq=function(d,A){const h=Ge(d,360),y=Ge(A,360),w=y-h,k=y>h?w-360:w+360;return Math.abs(w)<Math.abs(k)?w:k},l.br=function(d){return d[0]=0,d[1]=0,d[2]=0,d},l.bs=function(d,A,h,y){const w=Math.sqrt(d*d+A*A),k=Math.sqrt(h*h+y*y);d/=w,A/=w,h/=k,y/=k;const F=Math.acos(d*h+A*y);return-A*h+d*y>0?F:-F},l.bt=function(d,A){return d[0]*A[0]+d[1]*A[1]+d[2]*A[2]+d[3]},l.bu=ov,l.bv=function(d,A){const h=Ge(d,2*Math.PI),y=Ge(A,2*Math.PI);return Math.min(Math.abs(h-y),Math.abs(h-y+2*Math.PI),Math.abs(h-y-2*Math.PI))},l.bw=function(){const d={},A=Te.$version;for(const h in Te.$root){const y=Te.$root[h];if(y.required){let w=null;w=h==="version"?A:y.type==="array"?[]:{},w!=null&&(d[h]=w)}}return d},l.bx=RA,l.by=Jt,l.bz=function(d){d=d.slice();const A=Object.create(null);for(let h=0;h<d.length;h++)A[d[h].id]=d[h];for(let h=0;h<d.length;h++)"ref"in d[h]&&(d[h]=ct(d[h],A[d[h].ref]));return d},l.c=he,l.c0=function(d,A){return d[0]===A[0]&&d[1]===A[1]&&d[2]===A[2]&&d[3]===A[3]&&d[4]===A[4]&&d[5]===A[5]&&d[6]===A[6]&&d[7]===A[7]&&d[8]===A[8]&&d[9]===A[9]&&d[10]===A[10]&&d[11]===A[11]&&d[12]===A[12]&&d[13]===A[13]&&d[14]===A[14]&&d[15]===A[15]},l.c1=function(d,A){var h=d[0],y=d[1],w=d[2],k=d[3],F=d[4],j=d[5],Z=d[6],ie=d[7],ue=d[8],ge=d[9],De=d[10],Le=d[11],Qe=d[12],Je=d[13],At=d[14],_t=d[15],Wt=A[0],It=A[1],Fe=A[2],at=A[3],Pt=A[4],cn=A[5],zn=A[6],yn=A[7],En=A[8],tr=A[9],Nn=A[10],er=A[11],Bn=A[12],Qr=A[13],Ci=A[14],mi=A[15];return Math.abs(h-Wt)<=V*Math.max(1,Math.abs(h),Math.abs(Wt))&&Math.abs(y-It)<=V*Math.max(1,Math.abs(y),Math.abs(It))&&Math.abs(w-Fe)<=V*Math.max(1,Math.abs(w),Math.abs(Fe))&&Math.abs(k-at)<=V*Math.max(1,Math.abs(k),Math.abs(at))&&Math.abs(F-Pt)<=V*Math.max(1,Math.abs(F),Math.abs(Pt))&&Math.abs(j-cn)<=V*Math.max(1,Math.abs(j),Math.abs(cn))&&Math.abs(Z-zn)<=V*Math.max(1,Math.abs(Z),Math.abs(zn))&&Math.abs(ie-yn)<=V*Math.max(1,Math.abs(ie),Math.abs(yn))&&Math.abs(ue-En)<=V*Math.max(1,Math.abs(ue),Math.abs(En))&&Math.abs(ge-tr)<=V*Math.max(1,Math.abs(ge),Math.abs(tr))&&Math.abs(De-Nn)<=V*Math.max(1,Math.abs(De),Math.abs(Nn))&&Math.abs(Le-er)<=V*Math.max(1,Math.abs(Le),Math.abs(er))&&Math.abs(Qe-Bn)<=V*Math.max(1,Math.abs(Qe),Math.abs(Bn))&&Math.abs(Je-Qr)<=V*Math.max(1,Math.abs(Je),Math.abs(Qr))&&Math.abs(At-Ci)<=V*Math.max(1,Math.abs(At),Math.abs(Ci))&&Math.abs(_t-mi)<=V*Math.max(1,Math.abs(_t),Math.abs(mi))},l.c2=function(d,A){return d[0]=A[0],d[1]=A[1],d[2]=A[2],d[3]=A[3],d[4]=A[4],d[5]=A[5],d[6]=A[6],d[7]=A[7],d[8]=A[8],d[9]=A[9],d[10]=A[10],d[11]=A[11],d[12]=A[12],d[13]=A[13],d[14]=A[14],d[15]=A[15],d},l.c3=d=>d.type==="symbol",l.c4=d=>d.type==="circle",l.c5=d=>d.type==="heatmap",l.c6=d=>d.type==="line",l.c7=d=>d.type==="fill",l.c8=d=>d.type==="fill-extrusion",l.c9=d=>d.type==="hillshade",l.cA=$s,l.cB=Xf,l.cC=_A,l.cD=qc,l.cE=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},l.cF=function(d,A,h,y,w){return o(this,void 0,void 0,function*(){if(te())try{return yield Vt(d,A,h,y,w)}catch{}return function(k,F,j,Z,ie){const ue=k.width,ge=k.height;Vn&&Pn||(Vn=new OffscreenCanvas(ue,ge),Pn=Vn.getContext("2d",{willReadFrequently:!0})),Vn.width=ue,Vn.height=ge,Pn.drawImage(k,0,0,ue,ge);const De=Pn.getImageData(F,j,Z,ie);return Pn.clearRect(0,0,ue,ge),De.data}(d,A,h,y,w)})},l.cG=G_,l.cH=f,l.cI=B,l.cJ=zd,l.cK=pg,l.cL=kA,l.cM=_c,l.ca=d=>d.type==="raster",l.cb=d=>d.type==="background",l.cc=d=>d.type==="custom",l.cd=gt,l.ce=function(d,A,h){const y=Ct(A.x-h.x,A.y-h.y),w=Ct(d.x-h.x,d.y-h.y);var k,F;return Ir(Math.atan2(y[0]*w[1]-y[1]*w[0],(k=y)[0]*(F=w)[0]+k[1]*F[1]))},l.cf=Dt,l.cg=function(d,A){return Yn[A]&&(d instanceof MouseEvent||d instanceof WheelEvent)},l.ch=function(d,A){return rr[A]&&"touches"in d},l.ci=function(d){return rr[d]||Yn[d]},l.cj=function(d,A,h){var y=A[0],w=A[1];return d[0]=h[0]*y+h[4]*w+h[12],d[1]=h[1]*y+h[5]*w+h[13],d},l.ck=function(d,A){const{x:h,y}=A1.fromLngLat(A);return!(d<0||d>25||y<0||y>=1||h<0||h>=1)},l.cl=function(d,A){return d[0]=A[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=A[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=A[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},l.cm=class extends KA{},l.cn=U3,l.cp=function(d){return d.message===We},l.cq=Yt,l.cr=function(d,A){me.REGISTERED_PROTOCOLS[d]=A},l.cs=function(d){delete me.REGISTERED_PROTOCOLS[d]},l.ct=function(d,A){const h={};for(let w=0;w<d.length;w++){const k=A&&A[d[w].id]||Mu(d[w]);A&&(A[d[w].id]=k);let F=h[k];F||(F=h[k]=[]),F.push(d[w])}const y=[];for(const w in h)y.push(h[w]);return y},l.cu=Xn,l.cv=j_,l.cw=Q_,l.cx=s1,l.cy=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=it/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const A=d.bucket.layers[0],h=A.layout,y=A._unevaluatedLayout._values,w={layoutIconSize:y["icon-size"].possiblyEvaluate(new os(d.bucket.zoom+1),d.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new os(d.bucket.zoom+1),d.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new os(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:ue}=d.bucket.textSizeData;w.compositeTextSizes=[y["text-size"].possiblyEvaluate(new os(ie),d.canonical),y["text-size"].possiblyEvaluate(new os(ue),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:ue}=d.bucket.iconSizeData;w.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new os(ie),d.canonical),y["icon-size"].possiblyEvaluate(new os(ue),d.canonical)]}const k=h.get("text-line-height")*Dl,F=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",j=h.get("text-keep-upright"),Z=h.get("text-size");for(const ie of d.bucket.features){const ue=h.get("text-font").evaluate(ie,{},d.canonical).join(","),ge=Z.evaluate(ie,{},d.canonical),De=w.layoutTextSize.evaluate(ie,{},d.canonical),Le=w.layoutIconSize.evaluate(ie,{},d.canonical),Qe={horizontal:{},vertical:void 0},Je=ie.text;let At,_t=[0,0];if(Je){const Fe=Je.toString(),at=h.get("text-letter-spacing").evaluate(ie,{},d.canonical)*Dl,Pt=yf(Fe)?at:0,cn=h.get("text-anchor").evaluate(ie,{},d.canonical),zn=Av(A,ie,d.canonical);if(!zn){const Nn=h.get("text-radial-offset").evaluate(ie,{},d.canonical);_t=Nn?H_(cn,[Nn*Dl,lv]):h.get("text-offset").evaluate(ie,{},d.canonical).map(er=>er*Dl)}let yn=F?"center":h.get("text-justify").evaluate(ie,{},d.canonical);const En=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(ie,{},d.canonical)*Dl:1/0,tr=()=>{d.bucket.allowVerticalPlacement&&yc(Fe)&&(Qe.vertical=Qp(Je,d.glyphMap,d.glyphPositions,d.imagePositions,ue,En,k,cn,"left",Pt,_t,l.al.vertical,!0,De,ge))};if(!F&&zn){const Nn=new Set;if(yn==="auto")for(let Bn=0;Bn<zn.values.length;Bn+=2)Nn.add(Qd(zn.values[Bn]));else Nn.add(yn);let er=!1;for(const Bn of Nn)if(!Qe.horizontal[Bn])if(er)Qe.horizontal[Bn]=Qe.horizontal[0];else{const Qr=Qp(Je,d.glyphMap,d.glyphPositions,d.imagePositions,ue,En,k,"center",Bn,Pt,_t,l.al.horizontal,!1,De,ge);Qr&&(Qe.horizontal[Bn]=Qr,er=Qr.positionedLines.length===1)}tr()}else{yn==="auto"&&(yn=Qd(cn));const Nn=Qp(Je,d.glyphMap,d.glyphPositions,d.imagePositions,ue,En,k,cn,yn,Pt,_t,l.al.horizontal,!1,De,ge);Nn&&(Qe.horizontal[yn]=Nn),tr(),yc(Fe)&&F&&j&&(Qe.vertical=Qp(Je,d.glyphMap,d.glyphPositions,d.imagePositions,ue,En,k,cn,yn,Pt,_t,l.al.vertical,!1,De,ge))}}let Wt=!1;if(ie.icon&&ie.icon.name){const Fe=d.imageMap[ie.icon.name];Fe&&(At=Q(d.imagePositions[ie.icon.name],h.get("icon-offset").evaluate(ie,{},d.canonical),h.get("icon-anchor").evaluate(ie,{},d.canonical)),Wt=!!Fe.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Wt:d.bucket.sdfIcons!==Wt&&yt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fe.pixelRatio!==d.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const It=Kh(Qe.horizontal)||Qe.vertical;d.bucket.iconsInText=!!It&&It.iconsInText,(It||At)&&Lo(d.bucket,ie,Qe,At,d.imageMap,w,De,Le,_t,Wt,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},l.cz=Jm,l.d=Xe,l.e=St,l.f=d=>o(void 0,void 0,void 0,function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const A=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(A)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=et,l.h=d=>new Promise((A,h)=>{const y=new Image;y.onload=()=>{A(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=hr})},y.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(d)],{type:"image/png"});y.src=d.byteLength?URL.createObjectURL(w):hr}),l.i=Zt,l.j=(d,A)=>ir(St(d,{type:"json"}),A),l.k=Ne,l.l=p,l.m=ir,l.n=(d,A)=>ir(St(d,{type:"arrayBuffer"}),A),l.o=function(d){return new qc(d).readFields(np,[])},l.p=mg,l.q=tc,l.r=Ws,l.s=Dn,l.t=Yl,l.u=Ti,l.v=Te,l.w=yt,l.x=gc,l.y=ch,l.z=function([d,A,h]){return A+=90,A*=Math.PI/180,h*=Math.PI/180,{x:d*Math.cos(A)*Math.sin(h),y:d*Math.sin(A)*Math.sin(h),z:d*Math.cos(h)}}}),i("worker",["./shared"],function(l){class o{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,ve){for(const Ne of ae){this._layerConfigs[Ne.id]=Ne;const Ve=this._layers[Ne.id]=l.bA(Ne);Ve._featureFilter=l.a7(Ve.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of ve)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const p=l.ct(Object.values(this._layerConfigs),this.keyCache);for(const Ne of p){const Ve=Ne.map(Gt=>this._layers[Gt.id]),Te=Ve[0];if(Te.visibility==="none")continue;const lt=Te.source||"";let ct=this.familiesBySource[lt];ct||(ct=this.familiesBySource[lt]={});const Ft=Te.sourceLayer||"_geojsonTileLayer";let jt=ct[Ft];jt||(jt=ct[Ft]=[]),jt.push(Ve)}}}class f{constructor(ae){const ve={},p=[];for(const lt in ae){const ct=ae[lt],Ft=ve[lt]={};for(const jt in ct){const Gt=ct[+jt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const nn={x:0,y:0,w:Gt.bitmap.width+2,h:Gt.bitmap.height+2};p.push(nn),Ft[jt]={rect:nn,metrics:Gt.metrics}}}const{w:Ne,h:Ve}=l.p(p),Te=new l.q({width:Ne||1,height:Ve||1});for(const lt in ae){const ct=ae[lt];for(const Ft in ct){const jt=ct[+Ft];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const Gt=ve[lt][Ft].rect;l.q.copy(jt.bitmap,Te,{x:0,y:0},{x:Gt.x+1,y:Gt.y+1},jt.bitmap)}}this.image=Te,this.positions=ve}}l.cu("GlyphAtlas",f);class C{constructor(ae){this.tileID=new l.Y(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,ve,p,Ne,Ve){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new l.a5;const Te=new l.cv(Object.keys(ae.layers).sort()),lt=new l.cw(this.tileID,this.promoteId);lt.bucketLayerIDs=[];const ct={},Ft={featureIndex:lt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:Ve},jt=ve.familiesBySource[this.source];for(const Fr in jt){const wn=ae.layers[Fr];if(!wn)continue;wn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Fr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Dr=Te.encode(Fr),ui=[];for(let Pi=0;Pi<wn.length;Pi++){const yi=wn.feature(Pi),As=lt.getId(yi,Fr);ui.push({feature:yi,id:As,index:Pi,sourceLayerIndex:Dr})}for(const Pi of jt[Fr]){const yi=Pi[0];yi.source!==this.source&&l.w(`layer.source = ${yi.source} does not equal this.source = ${this.source}`),yi.minzoom&&this.zoom<Math.floor(yi.minzoom)||yi.maxzoom&&this.zoom>=yi.maxzoom||yi.visibility!=="none"&&(x(Pi,this.zoom,p),(ct[yi.id]=yi.createBucket({index:lt.bucketLayerIDs.length,layers:Pi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Dr,sourceID:this.source})).populate(ui,Ft,this.tileID.canonical),lt.bucketLayerIDs.push(Pi.map(As=>As.id)))}}const Gt=l.bF(Ft.glyphDependencies,Fr=>Object.keys(Fr).map(Number));this.inFlightDependencies.forEach(Fr=>Fr?.abort()),this.inFlightDependencies=[];let nn=Promise.resolve({});if(Object.keys(Gt).length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),nn=Ne.sendAsync({type:"GG",data:{stacks:Gt,source:this.source,tileID:this.tileID,type:"glyphs"}},Fr)}const On=Object.keys(Ft.iconDependencies);let Rn=Promise.resolve({});if(On.length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),Rn=Ne.sendAsync({type:"GI",data:{icons:On,source:this.source,tileID:this.tileID,type:"icons"}},Fr)}const dr=Object.keys(Ft.patternDependencies);let Tr=Promise.resolve({});if(dr.length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),Tr=Ne.sendAsync({type:"GI",data:{icons:dr,source:this.source,tileID:this.tileID,type:"patterns"}},Fr)}const[or,on,ti]=yield Promise.all([nn,Rn,Tr]),li=new f(or),jr=new l.cx(on,ti);for(const Fr in ct){const wn=ct[Fr];wn instanceof l.a6?(x(wn.layers,this.zoom,p),l.cy({bucket:wn,glyphMap:or,glyphPositions:li.positions,imageMap:on,imagePositions:jr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ft.subdivisionGranularity})):wn.hasPattern&&(wn instanceof l.cz||wn instanceof l.cA||wn instanceof l.cB)&&(x(wn.layers,this.zoom,p),wn.addFeatures(Ft,this.tileID.canonical,jr.patternPositions))}return this.status="done",{buckets:Object.values(ct).filter(Fr=>!Fr.isEmpty()),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:li.image,imageAtlas:jr,glyphMap:this.returnDependencies?or:null,iconMap:this.returnDependencies?on:null,glyphPositions:this.returnDependencies?li.positions:null}})}}function x(Xe,ae,ve){const p=new l.C(ae);for(const Ne of Xe)Ne.recalculate(p,ve)}class B{constructor(ae,ve,p){this.actor=ae,this.layerIndex=ve,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,ve){return l._(this,void 0,void 0,function*(){const p=yield l.n(ae.request,ve);try{return{vectorTile:new l.cC.VectorTile(new l.cD(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(Ne){const Ve=new Uint8Array(p.data);let Te=`Unable to parse the tile at ${ae.request.url}, `;throw Te+=Ve[0]===31&&Ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(Te)}})}loadTile(ae){return l._(this,void 0,void 0,function*(){const ve=ae.uid,p=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.cE(ae.request),Ne=new C(ae);this.loading[ve]=Ne;const Ve=new AbortController;Ne.abort=Ve;try{const Te=yield this.loadVectorTile(ae,Ve);if(delete this.loading[ve],!Te)return null;const lt=Te.rawData,ct={};Te.expires&&(ct.expires=Te.expires),Te.cacheControl&&(ct.cacheControl=Te.cacheControl);const Ft={};if(p){const Gt=p.finish();Gt&&(Ft.resourceTiming=JSON.parse(JSON.stringify(Gt)))}Ne.vectorTile=Te.vectorTile;const jt=Ne.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[ve]=Ne,this.fetching[ve]={rawTileData:lt,cacheControl:ct,resourceTiming:Ft};try{const Gt=yield jt;return l.e({rawTileData:lt.slice(0)},Gt,ct,Ft)}finally{delete this.fetching[ve]}}catch(Te){throw delete this.loading[ve],Ne.status="done",this.loaded[ve]=Ne,Te}})}reloadTile(ae){return l._(this,void 0,void 0,function*(){const ve=ae.uid;if(!this.loaded||!this.loaded[ve])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[ve];if(p.showCollisionBoxes=ae.showCollisionBoxes,p.status==="parsing"){const Ne=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Ve;if(this.fetching[ve]){const{rawTileData:Te,cacheControl:lt,resourceTiming:ct}=this.fetching[ve];delete this.fetching[ve],Ve=l.e({rawTileData:Te.slice(0)},Ne,lt,ct)}else Ve=Ne;return Ve}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return l._(this,void 0,void 0,function*(){const ve=this.loading,p=ae.uid;ve&&ve[p]&&ve[p].abort&&(ve[p].abort.abort(),delete ve[p])})}removeTile(ae){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class R{constructor(){this.loaded={}}loadTile(ae){return l._(this,void 0,void 0,function*(){const{uid:ve,encoding:p,rawImageData:Ne,redFactor:Ve,greenFactor:Te,blueFactor:lt,baseShift:ct}=ae,Ft=Ne.width+2,jt=Ne.height+2,Gt=l.b(Ne)?new l.R({width:Ft,height:jt},yield l.cF(Ne,-1,-1,Ft,jt)):Ne,nn=new l.cG(ve,Gt,p,Ve,Te,lt,ct);return this.loaded=this.loaded||{},this.loaded[ve]=nn,nn})}removeTile(ae){const ve=this.loaded,p=ae.uid;ve&&ve[p]&&delete ve[p]}}var P,U,N=function(){if(U)return P;function Xe(ve,p){if(ve.length!==0){ae(ve[0],p);for(var Ne=1;Ne<ve.length;Ne++)ae(ve[Ne],!p)}}function ae(ve,p){for(var Ne=0,Ve=0,Te=0,lt=ve.length,ct=lt-1;Te<lt;ct=Te++){var Ft=(ve[Te][0]-ve[ct][0])*(ve[ct][1]+ve[Te][1]),jt=Ne+Ft;Ve+=Math.abs(Ne)>=Math.abs(Ft)?Ne-jt+Ft:Ft-jt+Ne,Ne=jt}Ne+Ve>=0!=!!p&&ve.reverse()}return U=1,P=function ve(p,Ne){var Ve,Te=p&&p.type;if(Te==="FeatureCollection")for(Ve=0;Ve<p.features.length;Ve++)ve(p.features[Ve],Ne);else if(Te==="GeometryCollection")for(Ve=0;Ve<p.geometries.length;Ve++)ve(p.geometries[Ve],Ne);else if(Te==="Feature")ve(p.geometry,Ne);else if(Te==="Polygon")Xe(p.coordinates,Ne);else if(Te==="MultiPolygon")for(Ve=0;Ve<p.coordinates.length;Ve++)Xe(p.coordinates[Ve],Ne);return p}}(),W=l.cH(N);const X=l.cC.VectorTileFeature.prototype.toGeoJSON;class ${constructor(ae){this._feature=ae,this.extent=l.Z,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const ve of this._feature.geometry)ae.push([new l.P(ve[0],ve[1])]);return ae}{const ae=[];for(const ve of this._feature.geometry){const p=[];for(const Ne of ve)p.push(new l.P(Ne[0],Ne[1]));ae.push(p)}return ae}}toGeoJSON(ae,ve,p){return X.call(this,ae,ve,p)}}class re{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=ae.length,this._features=ae}feature(ae){return new $(this._features[ae])}}var te,V,ne,G={exports:{}},le=function(){if(ne)return G.exports;ne=1;var Xe=l.cK(),ae=function(){if(V)return te;V=1;var jt=l.cI(),Gt=l.cJ().VectorTileFeature;function nn(Rn,dr){this.options=dr||{},this.features=Rn,this.length=Rn.length}function On(Rn,dr){this.id=typeof Rn.id=="number"?Rn.id:void 0,this.type=Rn.type,this.rawGeometry=Rn.type===1?[Rn.geometry]:Rn.geometry,this.properties=Rn.tags,this.extent=dr||4096}return te=nn,nn.prototype.feature=function(Rn){return new On(this.features[Rn],this.options.extent)},On.prototype.loadGeometry=function(){var Rn=this.rawGeometry;this.geometry=[];for(var dr=0;dr<Rn.length;dr++){for(var Tr=Rn[dr],or=[],on=0;on<Tr.length;on++)or.push(new jt(Tr[on][0],Tr[on][1]));this.geometry.push(or)}return this.geometry},On.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Rn=this.geometry,dr=1/0,Tr=-1/0,or=1/0,on=-1/0,ti=0;ti<Rn.length;ti++)for(var li=Rn[ti],jr=0;jr<li.length;jr++){var Fr=li[jr];dr=Math.min(dr,Fr.x),Tr=Math.max(Tr,Fr.x),or=Math.min(or,Fr.y),on=Math.max(on,Fr.y)}return[dr,or,Tr,on]},On.prototype.toGeoJSON=Gt.prototype.toGeoJSON,te}();function ve(jt){var Gt=new Xe;return function(nn,On){for(var Rn in nn.layers)On.writeMessage(3,p,nn.layers[Rn])}(jt,Gt),Gt.finish()}function p(jt,Gt){var nn;Gt.writeVarintField(15,jt.version||1),Gt.writeStringField(1,jt.name||""),Gt.writeVarintField(5,jt.extent||4096);var On={keys:[],values:[],keycache:{},valuecache:{}};for(nn=0;nn<jt.length;nn++)On.feature=jt.feature(nn),Gt.writeMessage(2,Ne,On);var Rn=On.keys;for(nn=0;nn<Rn.length;nn++)Gt.writeStringField(3,Rn[nn]);var dr=On.values;for(nn=0;nn<dr.length;nn++)Gt.writeMessage(4,Ft,dr[nn])}function Ne(jt,Gt){var nn=jt.feature;nn.id!==void 0&&Gt.writeVarintField(1,nn.id),Gt.writeMessage(2,Ve,jt),Gt.writeVarintField(3,nn.type),Gt.writeMessage(4,ct,nn)}function Ve(jt,Gt){var nn=jt.feature,On=jt.keys,Rn=jt.values,dr=jt.keycache,Tr=jt.valuecache;for(var or in nn.properties){var on=nn.properties[or],ti=dr[or];if(on!==null){ti===void 0&&(On.push(or),dr[or]=ti=On.length-1),Gt.writeVarint(ti);var li=typeof on;li!=="string"&&li!=="boolean"&&li!=="number"&&(on=JSON.stringify(on));var jr=li+":"+on,Fr=Tr[jr];Fr===void 0&&(Rn.push(on),Tr[jr]=Fr=Rn.length-1),Gt.writeVarint(Fr)}}}function Te(jt,Gt){return(Gt<<3)+(7&jt)}function lt(jt){return jt<<1^jt>>31}function ct(jt,Gt){for(var nn=jt.loadGeometry(),On=jt.type,Rn=0,dr=0,Tr=nn.length,or=0;or<Tr;or++){var on=nn[or],ti=1;On===1&&(ti=on.length),Gt.writeVarint(Te(1,ti));for(var li=On===3?on.length-1:on.length,jr=0;jr<li;jr++){jr===1&&On!==1&&Gt.writeVarint(Te(2,li-1));var Fr=on[jr].x-Rn,wn=on[jr].y-dr;Gt.writeVarint(lt(Fr)),Gt.writeVarint(lt(wn)),Rn+=Fr,dr+=wn}On===3&&Gt.writeVarint(Te(7,1))}}function Ft(jt,Gt){var nn=typeof jt;nn==="string"?Gt.writeStringField(1,jt):nn==="boolean"?Gt.writeBooleanField(7,jt):nn==="number"&&(jt%1!=0?Gt.writeDoubleField(3,jt):jt<0?Gt.writeSVarintField(6,jt):Gt.writeVarintField(5,jt))}return G.exports=ve,G.exports.fromVectorTileJs=ve,G.exports.fromGeojsonVt=function(jt,Gt){Gt=Gt||{};var nn={};for(var On in jt)nn[On]=new ae(jt[On].features,Gt),nn[On].name=On,nn[On].version=Gt.version,nn[On].extent=Gt.extent;return ve({layers:nn})},G.exports.GeoJSONWrapper=ae,G.exports}(),fe=l.cH(le);const pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xe=>Xe},we=Math.fround||(Se=new Float32Array(1),Xe=>(Se[0]=+Xe,Se[0]));var Se;const xe=3,je=5,Me=6;class rt{constructor(ae){this.options=Object.assign(Object.create(pe),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:ve,minZoom:p,maxZoom:Ne}=this.options;ve&&console.time("total time");const Ve=`prepare ${ae.length} points`;ve&&console.time(Ve),this.points=ae;const Te=[];for(let ct=0;ct<ae.length;ct++){const Ft=ae[ct];if(!Ft.geometry)continue;const[jt,Gt]=Ft.geometry.coordinates,nn=we(nt(jt)),On=we(Ge(Gt));Te.push(nn,On,1/0,ct,-1,1),this.options.reduce&&Te.push(0)}let lt=this.trees[Ne+1]=this._createTree(Te);ve&&console.timeEnd(Ve);for(let ct=Ne;ct>=p;ct--){const Ft=+Date.now();lt=this.trees[ct]=this._createTree(this._cluster(lt,ct)),ve&&console.log("z%d: %d clusters in %dms",ct,lt.numItems,+Date.now()-Ft)}return ve&&console.timeEnd("total time"),this}getClusters(ae,ve){let p=((ae[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,ae[1]));let Ve=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)p=-180,Ve=180;else if(p>Ve){const Gt=this.getClusters([p,Ne,180,Te],ve),nn=this.getClusters([-180,Ne,Ve,Te],ve);return Gt.concat(nn)}const lt=this.trees[this._limitZoom(ve)],ct=lt.range(nt(p),Ge(Te),nt(Ve),Ge(Ne)),Ft=lt.data,jt=[];for(const Gt of ct){const nn=this.stride*Gt;jt.push(Ft[nn+je]>1?Ct(Ft,nn,this.clusterProps):this.points[Ft[nn+xe]])}return jt}getChildren(ae){const ve=this._getOriginId(ae),p=this._getOriginZoom(ae),Ne="No cluster with the specified id.",Ve=this.trees[p];if(!Ve)throw new Error(Ne);const Te=Ve.data;if(ve*this.stride>=Te.length)throw new Error(Ne);const lt=this.options.radius/(this.options.extent*Math.pow(2,p-1)),ct=Ve.within(Te[ve*this.stride],Te[ve*this.stride+1],lt),Ft=[];for(const jt of ct){const Gt=jt*this.stride;Te[Gt+4]===ae&&Ft.push(Te[Gt+je]>1?Ct(Te,Gt,this.clusterProps):this.points[Te[Gt+xe]])}if(Ft.length===0)throw new Error(Ne);return Ft}getLeaves(ae,ve,p){const Ne=[];return this._appendLeaves(Ne,ae,ve=ve||10,p=p||0,0),Ne}getTile(ae,ve,p){const Ne=this.trees[this._limitZoom(ae)],Ve=Math.pow(2,ae),{extent:Te,radius:lt}=this.options,ct=lt/Te,Ft=(p-ct)/Ve,jt=(p+1+ct)/Ve,Gt={features:[]};return this._addTileFeatures(Ne.range((ve-ct)/Ve,Ft,(ve+1+ct)/Ve,jt),Ne.data,ve,p,Ve,Gt),ve===0&&this._addTileFeatures(Ne.range(1-ct/Ve,Ft,1,jt),Ne.data,Ve,p,Ve,Gt),ve===Ve-1&&this._addTileFeatures(Ne.range(0,Ft,ct/Ve,jt),Ne.data,-1,p,Ve,Gt),Gt.features.length?Gt:null}getClusterExpansionZoom(ae){let ve=this._getOriginZoom(ae)-1;for(;ve<=this.options.maxZoom;){const p=this.getChildren(ae);if(ve++,p.length!==1)break;ae=p[0].properties.cluster_id}return ve}_appendLeaves(ae,ve,p,Ne,Ve){const Te=this.getChildren(ve);for(const lt of Te){const ct=lt.properties;if(ct&&ct.cluster?Ve+ct.point_count<=Ne?Ve+=ct.point_count:Ve=this._appendLeaves(ae,ct.cluster_id,p,Ne,Ve):Ve<Ne?Ve++:ae.push(lt),ae.length===p)break}return Ve}_createTree(ae){const ve=new l.aF(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<ae.length;p+=this.stride)ve.add(ae[p],ae[p+1]);return ve.finish(),ve.data=ae,ve}_addTileFeatures(ae,ve,p,Ne,Ve,Te){for(const lt of ae){const ct=lt*this.stride,Ft=ve[ct+je]>1;let jt,Gt,nn;if(Ft)jt=it(ve,ct,this.clusterProps),Gt=ve[ct],nn=ve[ct+1];else{const dr=this.points[ve[ct+xe]];jt=dr.properties;const[Tr,or]=dr.geometry.coordinates;Gt=nt(Tr),nn=Ge(or)}const On={type:1,geometry:[[Math.round(this.options.extent*(Gt*Ve-p)),Math.round(this.options.extent*(nn*Ve-Ne))]],tags:jt};let Rn;Rn=Ft||this.options.generateId?ve[ct+xe]:this.points[ve[ct+xe]].id,Rn!==void 0&&(On.id=Rn),Te.features.push(On)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,ve){const{radius:p,extent:Ne,reduce:Ve,minPoints:Te}=this.options,lt=p/(Ne*Math.pow(2,ve)),ct=ae.data,Ft=[],jt=this.stride;for(let Gt=0;Gt<ct.length;Gt+=jt){if(ct[Gt+2]<=ve)continue;ct[Gt+2]=ve;const nn=ct[Gt],On=ct[Gt+1],Rn=ae.within(ct[Gt],ct[Gt+1],lt),dr=ct[Gt+je];let Tr=dr;for(const or of Rn){const on=or*jt;ct[on+2]>ve&&(Tr+=ct[on+je])}if(Tr>dr&&Tr>=Te){let or,on=nn*dr,ti=On*dr,li=-1;const jr=((Gt/jt|0)<<5)+(ve+1)+this.points.length;for(const Fr of Rn){const wn=Fr*jt;if(ct[wn+2]<=ve)continue;ct[wn+2]=ve;const Dr=ct[wn+je];on+=ct[wn]*Dr,ti+=ct[wn+1]*Dr,ct[wn+4]=jr,Ve&&(or||(or=this._map(ct,Gt,!0),li=this.clusterProps.length,this.clusterProps.push(or)),Ve(or,this._map(ct,wn)))}ct[Gt+4]=jr,Ft.push(on/Tr,ti/Tr,1/0,jr,-1,Tr),Ve&&Ft.push(li)}else{for(let or=0;or<jt;or++)Ft.push(ct[Gt+or]);if(Tr>1)for(const or of Rn){const on=or*jt;if(!(ct[on+2]<=ve)){ct[on+2]=ve;for(let ti=0;ti<jt;ti++)Ft.push(ct[on+ti])}}}}return Ft}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,ve,p){if(ae[ve+je]>1){const Te=this.clusterProps[ae[ve+Me]];return p?Object.assign({},Te):Te}const Ne=this.points[ae[ve+xe]].properties,Ve=this.options.map(Ne);return p&&Ve===Ne?Object.assign({},Ve):Ve}}function Ct(Xe,ae,ve){return{type:"Feature",id:Xe[ae+xe],properties:it(Xe,ae,ve),geometry:{type:"Point",coordinates:[(p=Xe[ae],360*(p-.5)),Ie(Xe[ae+1])]}};var p}function it(Xe,ae,ve){const p=Xe[ae+je],Ne=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,Ve=Xe[ae+Me],Te=Ve===-1?{}:Object.assign({},ve[Ve]);return Object.assign(Te,{cluster:!0,cluster_id:Xe[ae+xe],point_count:p,point_count_abbreviated:Ne})}function nt(Xe){return Xe/360+.5}function Ge(Xe){const ae=Math.sin(Xe*Math.PI/180),ve=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ve<0?0:ve>1?1:ve}function Ie(Xe){const ae=(180-360*Xe)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function $e(Xe,ae,ve,p){let Ne=p;const Ve=ae+(ve-ae>>1);let Te,lt=ve-ae;const ct=Xe[ae],Ft=Xe[ae+1],jt=Xe[ve],Gt=Xe[ve+1];for(let nn=ae+3;nn<ve;nn+=3){const On=gt(Xe[nn],Xe[nn+1],ct,Ft,jt,Gt);if(On>Ne)Te=nn,Ne=On;else if(On===Ne){const Rn=Math.abs(nn-Ve);Rn<lt&&(Te=nn,lt=Rn)}}Ne>p&&(Te-ae>3&&$e(Xe,ae,Te,p),Xe[Te+2]=Ne,ve-Te>3&&$e(Xe,Te,ve,p))}function gt(Xe,ae,ve,p,Ne,Ve){let Te=Ne-ve,lt=Ve-p;if(Te!==0||lt!==0){const ct=((Xe-ve)*Te+(ae-p)*lt)/(Te*Te+lt*lt);ct>1?(ve=Ne,p=Ve):ct>0&&(ve+=Te*ct,p+=lt*ct)}return Te=Xe-ve,lt=ae-p,Te*Te+lt*lt}function Dt(Xe,ae,ve,p){const Ne={id:Xe??null,type:ae,geometry:ve,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")ut(Ne,ve);else if(ae==="Polygon")ut(Ne,ve[0]);else if(ae==="MultiLineString")for(const Ve of ve)ut(Ne,Ve);else if(ae==="MultiPolygon")for(const Ve of ve)ut(Ne,Ve[0]);return Ne}function ut(Xe,ae){for(let ve=0;ve<ae.length;ve+=3)Xe.minX=Math.min(Xe.minX,ae[ve]),Xe.minY=Math.min(Xe.minY,ae[ve+1]),Xe.maxX=Math.max(Xe.maxX,ae[ve]),Xe.maxY=Math.max(Xe.maxY,ae[ve+1])}function Rt(Xe,ae,ve,p){if(!ae.geometry)return;const Ne=ae.geometry.coordinates;if(Ne&&Ne.length===0)return;const Ve=ae.geometry.type,Te=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2);let lt=[],ct=ae.id;if(ve.promoteId?ct=ae.properties[ve.promoteId]:ve.generateId&&(ct=p||0),Ve==="Point")St(Ne,lt);else if(Ve==="MultiPoint")for(const Ft of Ne)St(Ft,lt);else if(Ve==="LineString")Ke(Ne,lt,Te,!1);else if(Ve==="MultiLineString"){if(ve.lineMetrics){for(const Ft of Ne)lt=[],Ke(Ft,lt,Te,!1),Xe.push(Dt(ct,"LineString",lt,ae.properties));return}Pe(Ne,lt,Te,!1)}else if(Ve==="Polygon")Pe(Ne,lt,Te,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(const Ft of ae.geometry.geometries)Rt(Xe,{id:ct,geometry:Ft,properties:ae.properties},ve,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ft of Ne){const jt=[];Pe(Ft,jt,Te,!0),lt.push(jt)}}Xe.push(Dt(ct,Ve,lt,ae.properties))}function St(Xe,ae){ae.push(Re(Xe[0]),Ye(Xe[1]),0)}function Ke(Xe,ae,ve,p){let Ne,Ve,Te=0;for(let ct=0;ct<Xe.length;ct++){const Ft=Re(Xe[ct][0]),jt=Ye(Xe[ct][1]);ae.push(Ft,jt,0),ct>0&&(Te+=p?(Ne*jt-Ft*Ve)/2:Math.sqrt(Math.pow(Ft-Ne,2)+Math.pow(jt-Ve,2))),Ne=Ft,Ve=jt}const lt=ae.length-3;ae[2]=1,$e(ae,0,lt,ve),ae[lt+2]=1,ae.size=Math.abs(Te),ae.start=0,ae.end=ae.size}function Pe(Xe,ae,ve,p){for(let Ne=0;Ne<Xe.length;Ne++){const Ve=[];Ke(Xe[Ne],Ve,ve,p),ae.push(Ve)}}function Re(Xe){return Xe/360+.5}function Ye(Xe){const ae=Math.sin(Xe*Math.PI/180),ve=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return ve<0?0:ve>1?1:ve}function vt(Xe,ae,ve,p,Ne,Ve,Te,lt){if(p/=ae,Ve>=(ve/=ae)&&Te<p)return Xe;if(Te<ve||Ve>=p)return null;const ct=[];for(const Ft of Xe){const jt=Ft.geometry;let Gt=Ft.type;const nn=Ne===0?Ft.minX:Ft.minY,On=Ne===0?Ft.maxX:Ft.maxY;if(nn>=ve&&On<p){ct.push(Ft);continue}if(On<ve||nn>=p)continue;let Rn=[];if(Gt==="Point"||Gt==="MultiPoint")yt(jt,Rn,ve,p,Ne);else if(Gt==="LineString")Et(jt,Rn,ve,p,Ne,!1,lt.lineMetrics);else if(Gt==="MultiLineString")Ut(jt,Rn,ve,p,Ne,!1);else if(Gt==="Polygon")Ut(jt,Rn,ve,p,Ne,!0);else if(Gt==="MultiPolygon")for(const dr of jt){const Tr=[];Ut(dr,Tr,ve,p,Ne,!0),Tr.length&&Rn.push(Tr)}if(Rn.length){if(lt.lineMetrics&&Gt==="LineString"){for(const dr of Rn)ct.push(Dt(Ft.id,Gt,dr,Ft.tags));continue}Gt!=="LineString"&&Gt!=="MultiLineString"||(Rn.length===1?(Gt="LineString",Rn=Rn[0]):Gt="MultiLineString"),Gt!=="Point"&&Gt!=="MultiPoint"||(Gt=Rn.length===3?"Point":"MultiPoint"),ct.push(Dt(Ft.id,Gt,Rn,Ft.tags))}}return ct.length?ct:null}function yt(Xe,ae,ve,p,Ne){for(let Ve=0;Ve<Xe.length;Ve+=3){const Te=Xe[Ve+Ne];Te>=ve&&Te<=p&&An(ae,Xe[Ve],Xe[Ve+1],Xe[Ve+2])}}function Et(Xe,ae,ve,p,Ne,Ve,Te){let lt=Zt(Xe);const ct=Ne===0?hr:Vt;let Ft,jt,Gt=Xe.start;for(let Tr=0;Tr<Xe.length-3;Tr+=3){const or=Xe[Tr],on=Xe[Tr+1],ti=Xe[Tr+2],li=Xe[Tr+3],jr=Xe[Tr+4],Fr=Ne===0?or:on,wn=Ne===0?li:jr;let Dr=!1;Te&&(Ft=Math.sqrt(Math.pow(or-li,2)+Math.pow(on-jr,2))),Fr<ve?wn>ve&&(jt=ct(lt,or,on,li,jr,ve),Te&&(lt.start=Gt+Ft*jt)):Fr>p?wn<p&&(jt=ct(lt,or,on,li,jr,p),Te&&(lt.start=Gt+Ft*jt)):An(lt,or,on,ti),wn<ve&&Fr>=ve&&(jt=ct(lt,or,on,li,jr,ve),Dr=!0),wn>p&&Fr<=p&&(jt=ct(lt,or,on,li,jr,p),Dr=!0),!Ve&&Dr&&(Te&&(lt.end=Gt+Ft*jt),ae.push(lt),lt=Zt(Xe)),Te&&(Gt+=Ft)}let nn=Xe.length-3;const On=Xe[nn],Rn=Xe[nn+1],dr=Ne===0?On:Rn;dr>=ve&&dr<=p&&An(lt,On,Rn,Xe[nn+2]),nn=lt.length-3,Ve&&nn>=3&&(lt[nn]!==lt[0]||lt[nn+1]!==lt[1])&&An(lt,lt[0],lt[1],lt[2]),lt.length&&ae.push(lt)}function Zt(Xe){const ae=[];return ae.size=Xe.size,ae.start=Xe.start,ae.end=Xe.end,ae}function Ut(Xe,ae,ve,p,Ne,Ve){for(const Te of Xe)Et(Te,ae,ve,p,Ne,Ve,!1)}function An(Xe,ae,ve,p){Xe.push(ae,ve,p)}function hr(Xe,ae,ve,p,Ne,Ve){const Te=(Ve-ae)/(p-ae);return An(Xe,Ve,ve+(Ne-ve)*Te,1),Te}function Vt(Xe,ae,ve,p,Ne,Ve){const Te=(Ve-ve)/(Ne-ve);return An(Xe,ae+(p-ae)*Te,Ve,1),Te}function Vn(Xe,ae){const ve=[];for(let p=0;p<Xe.length;p++){const Ne=Xe[p],Ve=Ne.type;let Te;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")Te=Pn(Ne.geometry,ae);else if(Ve==="MultiLineString"||Ve==="Polygon"){Te=[];for(const lt of Ne.geometry)Te.push(Pn(lt,ae))}else if(Ve==="MultiPolygon"){Te=[];for(const lt of Ne.geometry){const ct=[];for(const Ft of lt)ct.push(Pn(Ft,ae));Te.push(ct)}}ve.push(Dt(Ne.id,Ve,Te,Ne.tags))}return ve}function Pn(Xe,ae){const ve=[];ve.size=Xe.size,Xe.start!==void 0&&(ve.start=Xe.start,ve.end=Xe.end);for(let p=0;p<Xe.length;p+=3)ve.push(Xe[p]+ae,Xe[p+1],Xe[p+2]);return ve}function Dn(Xe,ae){if(Xe.transformed)return Xe;const ve=1<<Xe.z,p=Xe.x,Ne=Xe.y;for(const Ve of Xe.features){const Te=Ve.geometry,lt=Ve.type;if(Ve.geometry=[],lt===1)for(let ct=0;ct<Te.length;ct+=2)Ve.geometry.push(Ln(Te[ct],Te[ct+1],ae,ve,p,Ne));else for(let ct=0;ct<Te.length;ct++){const Ft=[];for(let jt=0;jt<Te[ct].length;jt+=2)Ft.push(Ln(Te[ct][jt],Te[ct][jt+1],ae,ve,p,Ne));Ve.geometry.push(Ft)}}return Xe.transformed=!0,Xe}function Ln(Xe,ae,ve,p,Ne,Ve){return[Math.round(ve*(Xe*p-Ne)),Math.round(ve*(ae*p-Ve))]}function Ir(Xe,ae,ve,p,Ne){const Ve=ae===Ne.maxZoom?0:Ne.tolerance/((1<<ae)*Ne.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:Xe.length,source:null,x:ve,y:p,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const lt of Xe)rr(Te,lt,Ve,Ne);return Te}function rr(Xe,ae,ve,p){const Ne=ae.geometry,Ve=ae.type,Te=[];if(Xe.minX=Math.min(Xe.minX,ae.minX),Xe.minY=Math.min(Xe.minY,ae.minY),Xe.maxX=Math.max(Xe.maxX,ae.maxX),Xe.maxY=Math.max(Xe.maxY,ae.maxY),Ve==="Point"||Ve==="MultiPoint")for(let lt=0;lt<Ne.length;lt+=3)Te.push(Ne[lt],Ne[lt+1]),Xe.numPoints++,Xe.numSimplified++;else if(Ve==="LineString")Yn(Te,Ne,Xe,ve,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(let lt=0;lt<Ne.length;lt++)Yn(Te,Ne[lt],Xe,ve,Ve==="Polygon",lt===0);else if(Ve==="MultiPolygon")for(let lt=0;lt<Ne.length;lt++){const ct=Ne[lt];for(let Ft=0;Ft<ct.length;Ft++)Yn(Te,ct[Ft],Xe,ve,!0,Ft===0)}if(Te.length){let lt=ae.tags||null;if(Ve==="LineString"&&p.lineMetrics){lt={};for(const Ft in ae.tags)lt[Ft]=ae.tags[Ft];lt.mapbox_clip_start=Ne.start/Ne.size,lt.mapbox_clip_end=Ne.end/Ne.size}const ct={geometry:Te,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:lt};ae.id!==null&&(ct.id=ae.id),Xe.features.push(ct)}}function Yn(Xe,ae,ve,p,Ne,Ve){const Te=p*p;if(p>0&&ae.size<(Ne?Te:p))return void(ve.numPoints+=ae.length/3);const lt=[];for(let ct=0;ct<ae.length;ct+=3)(p===0||ae[ct+2]>Te)&&(ve.numSimplified++,lt.push(ae[ct],ae[ct+1])),ve.numPoints++;Ne&&function(ct,Ft){let jt=0;for(let Gt=0,nn=ct.length,On=nn-2;Gt<nn;On=Gt,Gt+=2)jt+=(ct[Gt]-ct[On])*(ct[Gt+1]+ct[On+1]);if(jt>0===Ft)for(let Gt=0,nn=ct.length;Gt<nn/2;Gt+=2){const On=ct[Gt],Rn=ct[Gt+1];ct[Gt]=ct[nn-2-Gt],ct[Gt+1]=ct[nn-1-Gt],ct[nn-2-Gt]=On,ct[nn-1-Gt]=Rn}}(lt,Ve),Xe.push(lt)}const We={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class he{constructor(ae,ve){const p=(ve=this.options=function(Ve,Te){for(const lt in Te)Ve[lt]=Te[lt];return Ve}(Object.create(We),ve)).debug;if(p&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function(Ve,Te){const lt=[];if(Ve.type==="FeatureCollection")for(let ct=0;ct<Ve.features.length;ct++)Rt(lt,Ve.features[ct],Te,ct);else Rt(lt,Ve.type==="Feature"?Ve:{geometry:Ve},Te);return lt}(ae,ve);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function(Ve,Te){const lt=Te.buffer/Te.extent;let ct=Ve;const Ft=vt(Ve,1,-1-lt,lt,0,-1,2,Te),jt=vt(Ve,1,1-lt,2+lt,0,-1,2,Te);return(Ft||jt)&&(ct=vt(Ve,1,-lt,1+lt,0,-1,2,Te)||[],Ft&&(ct=Vn(Ft,1).concat(ct)),jt&&(ct=ct.concat(Vn(jt,-1)))),ct}(Ne,ve),Ne.length&&this.splitTile(Ne,0,0,0),p&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,ve,p,Ne,Ve,Te,lt){const ct=[ae,ve,p,Ne],Ft=this.options,jt=Ft.debug;for(;ct.length;){Ne=ct.pop(),p=ct.pop(),ve=ct.pop(),ae=ct.pop();const Gt=1<<ve,nn=me(ve,p,Ne);let On=this.tiles[nn];if(!On&&(jt>1&&console.time("creation"),On=this.tiles[nn]=Ir(ae,ve,p,Ne,Ft),this.tileCoords.push({z:ve,x:p,y:Ne}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,p,Ne,On.numFeatures,On.numPoints,On.numSimplified),console.timeEnd("creation"));const Dr=`z${ve}`;this.stats[Dr]=(this.stats[Dr]||0)+1,this.total++}if(On.source=ae,Ve==null){if(ve===Ft.indexMaxZoom||On.numPoints<=Ft.indexMaxPoints)continue}else{if(ve===Ft.maxZoom||ve===Ve)continue;if(Ve!=null){const Dr=Ve-ve;if(p!==Te>>Dr||Ne!==lt>>Dr)continue}}if(On.source=null,ae.length===0)continue;jt>1&&console.time("clipping");const Rn=.5*Ft.buffer/Ft.extent,dr=.5-Rn,Tr=.5+Rn,or=1+Rn;let on=null,ti=null,li=null,jr=null,Fr=vt(ae,Gt,p-Rn,p+Tr,0,On.minX,On.maxX,Ft),wn=vt(ae,Gt,p+dr,p+or,0,On.minX,On.maxX,Ft);ae=null,Fr&&(on=vt(Fr,Gt,Ne-Rn,Ne+Tr,1,On.minY,On.maxY,Ft),ti=vt(Fr,Gt,Ne+dr,Ne+or,1,On.minY,On.maxY,Ft),Fr=null),wn&&(li=vt(wn,Gt,Ne-Rn,Ne+Tr,1,On.minY,On.maxY,Ft),jr=vt(wn,Gt,Ne+dr,Ne+or,1,On.minY,On.maxY,Ft),wn=null),jt>1&&console.timeEnd("clipping"),ct.push(on||[],ve+1,2*p,2*Ne),ct.push(ti||[],ve+1,2*p,2*Ne+1),ct.push(li||[],ve+1,2*p+1,2*Ne),ct.push(jr||[],ve+1,2*p+1,2*Ne+1)}}getTile(ae,ve,p){ae=+ae,ve=+ve,p=+p;const Ne=this.options,{extent:Ve,debug:Te}=Ne;if(ae<0||ae>24)return null;const lt=1<<ae,ct=me(ae,ve=ve+lt&lt-1,p);if(this.tiles[ct])return Dn(this.tiles[ct],Ve);Te>1&&console.log("drilling down to z%d-%d-%d",ae,ve,p);let Ft,jt=ae,Gt=ve,nn=p;for(;!Ft&&jt>0;)jt--,Gt>>=1,nn>>=1,Ft=this.tiles[me(jt,Gt,nn)];return Ft&&Ft.source?(Te>1&&(console.log("found parent tile z%d-%d-%d",jt,Gt,nn),console.time("drilling down")),this.splitTile(Ft.source,jt,Gt,nn,ae,ve,p),Te>1&&console.timeEnd("drilling down"),this.tiles[ct]?Dn(this.tiles[ct],Ve):null):null}}function me(Xe,ae,ve){return 32*((1<<Xe)*ve+ae)+Xe}function et(Xe,ae){return ae?Xe.properties[ae]:Xe.id}function bt(Xe,ae){if(Xe==null)return!0;if(Xe.type==="Feature")return et(Xe,ae)!=null;if(Xe.type==="FeatureCollection"){const ve=new Set;for(const p of Xe.features){const Ne=et(p,ae);if(Ne==null||ve.has(Ne))return!1;ve.add(Ne)}return!0}return!1}function Yt(Xe,ae){const ve=new Map;if(Xe!=null)if(Xe.type==="Feature")ve.set(et(Xe,ae),Xe);else for(const p of Xe.features)ve.set(et(p,ae),p);return ve}class Jt extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,ve){return l._(this,void 0,void 0,function*(){const p=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!Ne)return null;const Ve=new re(Ne.features);let Te=fe(Ve);return Te.byteOffset===0&&Te.byteLength===Te.buffer.byteLength||(Te=new Uint8Array(Te)),{vectorTile:Ve,rawData:Te.buffer}})}loadData(ae){return l._(this,void 0,void 0,function*(){var ve;(ve=this._pendingRequest)===null||ve===void 0||ve.abort();const p=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.cE(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new rt(function({superclusterOptions:Te,clusterProperties:lt}){if(!lt||!Te)return Te;const ct={},Ft={},jt={accumulated:null,zoom:0},Gt={properties:null},nn=Object.keys(lt);for(const On of nn){const[Rn,dr]=lt[On],Tr=l.cL(dr),or=l.cL(typeof Rn=="string"?[Rn,["accumulated"],["get",On]]:Rn);ct[On]=Tr.value,Ft[On]=or.value}return Te.map=On=>{Gt.properties=On;const Rn={};for(const dr of nn)Rn[dr]=ct[dr].evaluate(jt,Gt);return Rn},Te.reduce=(On,Rn)=>{Gt.properties=Rn;for(const dr of nn)jt.accumulated=On[dr],On[dr]=Ft[dr].evaluate(jt,Gt)},Te}(ae)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new he(Ne,ae.geojsonVtOptions)),this.loaded={};const Ve={};if(p){const Te=p.finish();Te&&(Ve.resourceTiming={},Ve.resourceTiming[ae.source]=JSON.parse(JSON.stringify(Te)))}return Ve}catch(Ve){if(delete this._pendingRequest,l.cp(Ve))return{abandoned:!0};throw Ve}var Ne})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const ve=this.loaded;return ve&&ve[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,ve){return l._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(ae,ve);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(W(p,!0),ae.filter){const Ne=l.cL(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(Te=>Ne.value.evaluate({zoom:0},Te))}}return p})}loadGeoJSON(ae,ve){return l._(this,void 0,void 0,function*(){const{promoteId:p}=ae;if(ae.request){const Ne=yield l.j(ae.request,ve);return this._dataUpdateable=bt(Ne.data,p)?Yt(Ne.data,p):void 0,Ne.data}if(typeof ae.data=="string")try{const Ne=JSON.parse(ae.data);return this._dataUpdateable=bt(Ne,p)?Yt(Ne,p):void 0,Ne}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(Ne,Ve,Te){var lt,ct,Ft,jt;if(Ve.removeAll&&Ne.clear(),Ve.remove)for(const Gt of Ve.remove)Ne.delete(Gt);if(Ve.add)for(const Gt of Ve.add){const nn=et(Gt,Te);nn!=null&&Ne.set(nn,Gt)}if(Ve.update)for(const Gt of Ve.update){let nn=Ne.get(Gt.id);if(nn==null)continue;const On=!Gt.removeAllProperties&&(((lt=Gt.removeProperties)===null||lt===void 0?void 0:lt.length)>0||((ct=Gt.addOrUpdateProperties)===null||ct===void 0?void 0:ct.length)>0);if((Gt.newGeometry||Gt.removeAllProperties||On)&&(nn=Object.assign({},nn),Ne.set(Gt.id,nn),On&&(nn.properties=Object.assign({},nn.properties))),Gt.newGeometry&&(nn.geometry=Gt.newGeometry),Gt.removeAllProperties)nn.properties={};else if(((Ft=Gt.removeProperties)===null||Ft===void 0?void 0:Ft.length)>0)for(const Rn of Gt.removeProperties)Object.prototype.hasOwnProperty.call(nn.properties,Rn)&&delete nn.properties[Rn];if(((jt=Gt.addOrUpdateProperties)===null||jt===void 0?void 0:jt.length)>0)for(const{key:Rn,value:dr}of Gt.addOrUpdateProperties)nn.properties[Rn]=dr}}(this._dataUpdateable,ae.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class ir{constructor(ae){this.self=ae,this.actor=new l.H(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ve,p)=>{if(this.externalWorkerSourceTypes[ve])throw new Error(`Worker source with name "${ve}" already registered.`);this.externalWorkerSourceTypes[ve]=p},this.self.addProtocol=l.cr,this.self.removeProtocol=l.cs,this.self.registerRTLTextPlugin=ve=>{l.cM.setMethods(ve)},this.actor.registerMessageHandler("LDT",(ve,p)=>this._getDEMWorkerSource(ve,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(ve,p)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ve,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(ve,p)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(ve,p)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(ve,p)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(ve,p)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[ve]||!this.workerSources[ve][p.type]||!this.workerSources[ve][p.type][p.source])return;const Ne=this.workerSources[ve][p.type][p.source];delete this.workerSources[ve][p.type][p.source],Ne.removeSource!==void 0&&Ne.removeSource(p)})),this.actor.registerMessageHandler("RM",ve=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[ve],delete this.availableImages[ve],delete this.workerSources[ve],delete this.demWorkerSources[ve]})),this.actor.registerMessageHandler("SR",(ve,p)=>l._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(ve,p)=>this._syncRTLPluginState(ve,p)),this.actor.registerMessageHandler("IS",(ve,p)=>l._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(ve,p)=>this._setImages(ve,p)),this.actor.registerMessageHandler("UL",(ve,p)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ve).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(ve,p)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ve).replace(p)}))}_setImages(ae,ve){return l._(this,void 0,void 0,function*(){this.availableImages[ae]=ve;for(const p in this.workerSources[ae]){const Ne=this.workerSources[ae][p];for(const Ve in Ne)Ne[Ve].availableImages=ve}})}_syncRTLPluginState(ae,ve){return l._(this,void 0,void 0,function*(){return yield l.cM.syncState(ve,this.self.importScripts)})}_getAvailableImages(ae){let ve=this.availableImages[ae];return ve||(ve=[]),ve}_getLayerIndex(ae){let ve=this.layerIndexes[ae];return ve||(ve=this.layerIndexes[ae]=new o),ve}_getWorkerSource(ae,ve,p){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][ve]||(this.workerSources[ae][ve]={}),!this.workerSources[ae][ve][p]){const Ne={sendAsync:(Ve,Te)=>(Ve.targetMapId=ae,this.actor.sendAsync(Ve,Te))};switch(ve){case"vector":this.workerSources[ae][ve][p]=new B(Ne,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][ve][p]=new Jt(Ne,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][ve][p]=new this.externalWorkerSourceTypes[ve](Ne,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][ve][p]}_getDEMWorkerSource(ae,ve){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][ve]||(this.demWorkerSources[ae][ve]=new R),this.demWorkerSources[ae][ve]}}return l.i(self)&&(self.worker=new ir(self)),ir}),i("index",["exports","./shared"],function(l,o){var f="5.5.0";function C(){var O=new o.A(4);return o.A!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O}let x,B;const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(O,a,c){const v=requestAnimationFrame(I=>{M(),a(I)}),{unsubscribe:M}=o.s(O.signal,"abort",()=>{M(),cancelAnimationFrame(v),c(o.c())},!1)},frameAsync(O){return new Promise((a,c)=>{this.frame(O,a,c)})},getImageData(O,a=0){return this.getImageCanvasContext(O).getImageData(-a,-a,O.width+2*a,O.height+2*a)},getImageCanvasContext(O){const a=window.document.createElement("canvas"),c=a.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return a.width=O.width,a.height=O.height,c.drawImage(O,0,0,O.width,O.height),c},resolveURL:O=>(x||(x=document.createElement("a")),x.href=O,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class P{static testProp(a){if(!P.docStyle)return a[0];for(let c=0;c<a.length;c++)if(a[c]in P.docStyle)return a[c];return a[0]}static create(a,c,v){const M=window.document.createElement(a);return c!==void 0&&(M.className=c),v&&v.appendChild(M),M}static createNS(a,c){return window.document.createElementNS(a,c)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(a,c){a.style[P.transformProp]=c}static addEventListener(a,c,v,M={}){a.addEventListener(c,v,"passive"in M?M:M.capture)}static removeEventListener(a,c,v,M={}){a.removeEventListener(c,v,"passive"in M?M:M.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(a){const c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}static getPoint(a,c,v){const M=c.boundingClientRect;return new o.P((v.clientX-M.left)/c.x-a.clientLeft,(v.clientY-M.top)/c.y-a.clientTop)}static mousePos(a,c){const v=P.getScale(a);return P.getPoint(a,v,c)}static touchPos(a,c){const v=[],M=P.getScale(a);for(let I=0;I<c.length;I++)v.push(P.getPoint(a,M,c[I]));return v}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){const c=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),v=c.querySelectorAll("script");for(const M of v)M.remove();return P.clean(c),c.innerHTML}static isPossiblyDangerous(a,c){const v=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!v.includes("javascript:")&&!v.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){const c=a.children;for(const v of c)P.removeAttributes(v),P.clean(v)}static removeAttributes(a){for(const{name:c,value:v}of a.attributes)P.isPossiblyDangerous(c,v)&&a.removeAttribute(c)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(O){!X&&W&&($?re(O):N=O)}};let N,W,X=!1,$=!1;function re(O){const a=O.createTexture();O.bindTexture(O.TEXTURE_2D,a);try{if(O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,W),O.isContextLost())return;U.supported=!0}catch{}O.deleteTexture(a),X=!0}var te;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{N&&re(N),N=null,$=!0},W.onerror=()=>{X=!0,N=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(O){let a,c,v,M;O.resetRequestQueue=()=>{a=[],c=0,v=0,M={}},O.addThrottleControl=ee=>{const Ae=v++;return M[Ae]=ee,Ae},O.removeThrottleControl=ee=>{delete M[ee],z()},O.getImage=(ee,Ae,de=!0)=>new Promise((Oe,Be)=>{U.supported&&(ee.headers||(ee.headers={}),ee.headers.accept="image/webp,*/*"),o.e(ee,{type:"image"}),a.push({abortController:Ae,requestParameters:ee,supportImageRefresh:de,state:"queued",onError:ze=>{Be(ze)},onSuccess:ze=>{Oe(ze)}}),z()});const I=ee=>o._(this,void 0,void 0,function*(){ee.state="running";const{requestParameters:Ae,supportImageRefresh:de,onError:Oe,onSuccess:Be,abortController:ze}=ee,He=de===!1&&!o.i(self)&&!o.g(Ae.url)&&(!Ae.headers||Object.keys(Ae.headers).reduce((pt,wt)=>pt&&wt==="accept",!0));c++;const ft=He?Y(Ae,ze):o.m(Ae,ze);try{const pt=yield ft;delete ee.abortController,ee.state="completed",pt.data instanceof HTMLImageElement||o.b(pt.data)?Be(pt):pt.data&&Be({data:yield(dt=pt.data,typeof createImageBitmap=="function"?o.f(dt):o.h(dt)),cacheControl:pt.cacheControl,expires:pt.expires})}catch(pt){delete ee.abortController,Oe(pt)}finally{c--,z()}var dt}),z=()=>{const ee=(()=>{for(const Ae of Object.keys(M))if(M[Ae]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Ae=c;Ae<ee&&a.length>0;Ae++){const de=a.shift();de.abortController.signal.aborted?Ae--:I(de)}},Y=(ee,Ae)=>new Promise((de,Oe)=>{const Be=new Image,ze=ee.url,He=ee.credentials;He&&He==="include"?Be.crossOrigin="use-credentials":(He&&He==="same-origin"||!o.d(ze))&&(Be.crossOrigin="anonymous"),Ae.signal.addEventListener("abort",()=>{Be.src="",Oe(o.c())}),Be.fetchPriority="high",Be.onload=()=>{Be.onerror=Be.onload=null,de({data:Be})},Be.onerror=()=>{Be.onerror=Be.onload=null,Ae.signal.aborted||Oe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Be.src=ze})}(te||(te={})),te.resetRequestQueue();class V{constructor(a){this._transformRequestFn=a}transformRequest(a,c){return this._transformRequestFn&&this._transformRequestFn(a,c)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function ne(O){const a=[];if(typeof O=="string")a.push({id:"default",url:O});else if(O&&O.length>0){const c=[];for(const{id:v,url:M}of O){const I=`${v}${M}`;c.indexOf(I)===-1&&(c.push(I),a.push({id:v,url:M}))}}return a}function G(O,a,c){try{const v=new URL(O);return v.pathname+=`${a}${c}`,v.toString()}catch{throw new Error(`Invalid sprite URL "${O}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class le{constructor(a,c,v,M){this.context=a,this.format=v,this.texture=a.gl.createTexture(),this.update(c,M)}update(a,c,v){const{width:M,height:I}=a,z=!(this.size&&this.size[0]===M&&this.size[1]===I||v),{context:Y}=this,{gl:ee}=Y;if(this.useMipmap=!!(c&&c.useMipmap),ee.bindTexture(ee.TEXTURE_2D,this.texture),Y.pixelStoreUnpackFlipY.set(!1),Y.pixelStoreUnpack.set(1),Y.pixelStoreUnpackPremultiplyAlpha.set(this.format===ee.RGBA&&(!c||c.premultiply!==!1)),z)this.size=[M,I],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?ee.texImage2D(ee.TEXTURE_2D,0,this.format,this.format,ee.UNSIGNED_BYTE,a):ee.texImage2D(ee.TEXTURE_2D,0,this.format,M,I,0,this.format,ee.UNSIGNED_BYTE,a.data);else{const{x:Ae,y:de}=v||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?ee.texSubImage2D(ee.TEXTURE_2D,0,Ae,de,ee.RGBA,ee.UNSIGNED_BYTE,a):ee.texSubImage2D(ee.TEXTURE_2D,0,Ae,de,M,I,ee.RGBA,ee.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ee.generateMipmap(ee.TEXTURE_2D),Y.pixelStoreUnpackFlipY.setDefault(),Y.pixelStoreUnpack.setDefault(),Y.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,c,v){const{context:M}=this,{gl:I}=M;I.bindTexture(I.TEXTURE_2D,this.texture),v!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=I.LINEAR),a!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,a),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,v||a),this.filter=a),c!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,c),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function fe(O){const{userImage:a}=O;return!!(a&&a.render&&a.render())&&(O.data.replace(new Uint8Array(a.data.buffer)),!0)}class pe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:c,promiseResolve:v}of this.requestors)v(this._getImagesForIds(c));this.requestors=[]}}getImage(a){const c=this.images[a];if(c&&!c.data&&c.spriteData){const v=c.spriteData;c.data=new o.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),c.spriteData=null}return c}addImage(a,c){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,c)&&(this.images[a]=c)}_validate(a,c){let v=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),v=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),v=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),v=!1),v}_validateStretch(a,c){if(!a)return!0;let v=0;for(const M of a){if(M[0]<v||M[1]<M[0]||c<M[1])return!1;v=M[1]}return!0}_validateContent(a,c){if(!a)return!0;if(a.length!==4)return!1;const v=c.spriteData,M=v&&v.width||c.data.width,I=v&&v.height||c.data.height;return!(a[0]<0||M<a[0]||a[1]<0||I<a[1]||a[2]<0||M<a[2]||a[3]<0||I<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,c,v=!0){const M=this.getImage(a);if(v&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[a]=c,this.updatedImages[a]=!0}removeImage(a){const c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((c,v)=>{let M=!0;if(!this.isLoaded())for(const I of a)this.images[I]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:c})})}_getImagesForIds(a){const c={};for(const v of a){let M=this.getImage(v);M||(this.fire(new o.l("styleimagemissing",{id:v})),M=this.getImage(v)),M?c[v]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:a,height:c}=this.atlasImage;return{width:a,height:c}}getPattern(a){const c=this.patterns[a],v=this.getImage(a);if(!v)return null;if(c&&c.position.version===v.version)return c.position;if(c)c.position.version=v.version;else{const M={w:v.data.width+2,h:v.data.height+2,x:0,y:0},I=new o.I(M,v);this.patterns[a]={bin:M,position:I}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new le(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const I in this.patterns)a.push(this.patterns[I].bin);const{w:c,h:v}=o.p(a),M=this.atlasImage;M.resize({width:c||1,height:v||1});for(const I in this.patterns){const{bin:z}=this.patterns[I],Y=z.x+1,ee=z.y+1,Ae=this.getImage(I).data,de=Ae.width,Oe=Ae.height;o.R.copy(Ae,M,{x:0,y:0},{x:Y,y:ee},{width:de,height:Oe}),o.R.copy(Ae,M,{x:0,y:Oe-1},{x:Y,y:ee-1},{width:de,height:1}),o.R.copy(Ae,M,{x:0,y:0},{x:Y,y:ee+Oe},{width:de,height:1}),o.R.copy(Ae,M,{x:de-1,y:0},{x:Y-1,y:ee},{width:1,height:Oe}),o.R.copy(Ae,M,{x:0,y:0},{x:Y+de,y:ee},{width:1,height:Oe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const c of a){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const v=this.getImage(c);v||o.w(`Image with ID: "${c}" was not found`),fe(v)&&this.updateImage(c,v)}}}const we=1e20;function Se(O,a,c,v,M,I,z,Y,ee){for(let Ae=a;Ae<a+v;Ae++)xe(O,c*I+Ae,I,M,z,Y,ee);for(let Ae=c;Ae<c+M;Ae++)xe(O,Ae*I+a,1,v,z,Y,ee)}function xe(O,a,c,v,M,I,z){I[0]=0,z[0]=-1e20,z[1]=we,M[0]=O[a];for(let Y=1,ee=0,Ae=0;Y<v;Y++){M[Y]=O[a+Y*c];const de=Y*Y;do{const Oe=I[ee];Ae=(M[Y]-M[Oe]+de-Oe*Oe)/(Y-Oe)/2}while(Ae<=z[ee]&&--ee>-1);ee++,I[ee]=Y,z[ee]=Ae,z[ee+1]=we}for(let Y=0,ee=0;Y<v;Y++){for(;z[ee+1]<Y;)ee++;const Ae=I[ee],de=Y-Ae;O[a+Y*c]=M[Ae]+de*de}}class je{constructor(a,c){this.requestManager=a,this.localIdeographFontFamily=c,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){const c=[];for(const I in a)for(const z of a[I])c.push(this._getAndCacheGlyphsPromise(I,z));const v=yield Promise.all(c),M={};for(const{stack:I,id:z,glyph:Y}of v)M[I]||(M[I]={}),M[I][z]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};return M})}_getAndCacheGlyphsPromise(a,c){return o._(this,void 0,void 0,function*(){let v=this.entries[a];v||(v=this.entries[a]={glyphs:{},requests:{},ranges:{}});let M=v.glyphs[c];if(M!==void 0)return{stack:a,id:c,glyph:M};if(M=this._tinySDF(v,a,c),M)return v.glyphs[c]=M,{stack:a,id:c,glyph:M};const I=Math.floor(c/256);if(256*I>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[I])return{stack:a,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[I]){const Y=je.loadGlyphRange(a,I,this.url,this.requestManager);v.requests[I]=Y}const z=yield v.requests[I];for(const Y in z)this._doesCharSupportLocalGlyph(+Y)||(v.glyphs[+Y]=z[+Y]);return v.ranges[I]=!0,{stack:a,id:c,glyph:z[c]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,c,v){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(v))return;let I=a.tinySDF;if(!I){let Y="400";/bold/i.test(c)?Y="900":/medium/i.test(c)?Y="500":/light/i.test(c)&&(Y="200"),I=a.tinySDF=new je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:Y})}const z=I.draw(String.fromCharCode(v));return{id:v,bitmap:new o.q({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}je.loadGlyphRange=function(O,a,c,v){return o._(this,void 0,void 0,function*(){const M=256*a,I=M+255,z=v.transformRequest(c.replace("{fontstack}",O).replace("{range}",`${M}-${I}`),"Glyphs"),Y=yield o.n(z,new AbortController);if(!Y||!Y.data)throw new Error(`Could not load glyph range. range: ${a}, ${M}-${I}`);const ee={};for(const Ae of o.o(Y.data))ee[Ae.id]=Ae;return ee})},je.TinySDF=class{constructor({fontSize:O=24,buffer:a=3,radius:c=8,cutoff:v=.25,fontFamily:M="sans-serif",fontWeight:I="normal",fontStyle:z="normal"}={}){this.buffer=a,this.cutoff=v,this.radius=c;const Y=this.size=O+4*a,ee=this._createCanvas(Y),Ae=this.ctx=ee.getContext("2d",{willReadFrequently:!0});Ae.font=`${z} ${I} ${O}px ${M}`,Ae.textBaseline="alphabetic",Ae.textAlign="left",Ae.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y)}_createCanvas(O){const a=document.createElement("canvas");return a.width=a.height=O,a}draw(O){const{width:a,actualBoundingBoxAscent:c,actualBoundingBoxDescent:v,actualBoundingBoxLeft:M,actualBoundingBoxRight:I}=this.ctx.measureText(O),z=Math.ceil(c),Y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-M))),ee=Math.min(this.size-this.buffer,z+Math.ceil(v)),Ae=Y+2*this.buffer,de=ee+2*this.buffer,Oe=Math.max(Ae*de,0),Be=new Uint8ClampedArray(Oe),ze={data:Be,width:Ae,height:de,glyphWidth:Y,glyphHeight:ee,glyphTop:z,glyphLeft:0,glyphAdvance:a};if(Y===0||ee===0)return ze;const{ctx:He,buffer:ft,gridInner:dt,gridOuter:pt}=this;He.clearRect(ft,ft,Y,ee),He.fillText(O,ft,ft+z);const wt=He.getImageData(ft,ft,Y,ee);pt.fill(we,0,Oe),dt.fill(0,0,Oe);for(let Tt=0;Tt<ee;Tt++)for(let Mt=0;Mt<Y;Mt++){const kt=wt.data[4*(Tt*Y+Mt)+3]/255;if(kt===0)continue;const Kt=(Tt+ft)*Ae+Mt+ft;if(kt===1)pt[Kt]=0,dt[Kt]=we;else{const zt=.5-kt;pt[Kt]=zt>0?zt*zt:0,dt[Kt]=zt<0?zt*zt:0}}Se(pt,0,0,Ae,de,Ae,this.f,this.v,this.z),Se(dt,ft,ft,Y,ee,Ae,this.f,this.v,this.z);for(let Tt=0;Tt<Oe;Tt++){const Mt=Math.sqrt(pt[Tt])-Math.sqrt(dt[Tt]);Be[Tt]=Math.round(255-255*(Mt/this.radius+this.cutoff))}return ze}};class Me{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,c){return o.z(a.expression.evaluate(c))}interpolate(a,c,v){return{x:o.B.number(a.x,c.x,v),y:o.B.number(a.y,c.y,v),z:o.B.number(a.z,c.z,v)}}}let rt;class Ct extends o.E{constructor(a){super(),rt=rt||new o.r({anchor:new o.D(o.v.light.anchor),position:new Me,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(rt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,c={}){if(!this._validate(o.t,a,c))for(const v in a){const M=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),M):this._transitionable.setValue(v,M)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,v){return(!v||v.validate!==!1)&&o.x(this,a.call(o.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const it=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class nt extends o.E{constructor(a){super(),this._transitionable=new o.T(it),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(a,c={}){if(!this._validate(o.F,a,c)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const v in a){const M=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),M):this._transitionable.setValue(v,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,v={}){return v?.validate!==!1&&o.x(this,a.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Ge{constructor(a,c){this.width=a,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,c){const v=a.join(",")+String(c);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(a,c)),this.dashEntry[v]}getDashRanges(a,c,v){const M=[];let I=a.length%2==1?-a[a.length-1]*v:0,z=a[0]*v,Y=!0;M.push({left:I,right:z,isDash:Y,zeroLength:a[0]===0});let ee=a[0];for(let Ae=1;Ae<a.length;Ae++){Y=!Y;const de=a[Ae];I=ee*v,ee+=de,z=ee*v,M.push({left:I,right:z,isDash:Y,zeroLength:de===0})}return M}addRoundDash(a,c,v){const M=c/2;for(let I=-v;I<=v;I++){const z=this.width*(this.nextRow+v+I);let Y=0,ee=a[Y];for(let Ae=0;Ae<this.width;Ae++){Ae/ee.right>1&&(ee=a[++Y]);const de=Math.abs(Ae-ee.left),Oe=Math.abs(Ae-ee.right),Be=Math.min(de,Oe);let ze;const He=I/v*(M+1);if(ee.isDash){const ft=M-Math.abs(He);ze=Math.sqrt(Be*Be+ft*ft)}else ze=M-Math.sqrt(Be*Be+He*He);this.data[z+Ae]=Math.max(0,Math.min(255,ze+128))}}}addRegularDash(a){for(let Y=a.length-1;Y>=0;--Y){const ee=a[Y],Ae=a[Y+1];ee.zeroLength?a.splice(Y,1):Ae&&Ae.isDash===ee.isDash&&(Ae.left=ee.left,a.splice(Y,1))}const c=a[0],v=a[a.length-1];c.isDash===v.isDash&&(c.left=v.left-this.width,v.right=c.right+this.width);const M=this.width*this.nextRow;let I=0,z=a[I];for(let Y=0;Y<this.width;Y++){Y/z.right>1&&(z=a[++I]);const ee=Math.abs(Y-z.left),Ae=Math.abs(Y-z.right),de=Math.min(ee,Ae);this.data[M+Y]=Math.max(0,Math.min(255,(z.isDash?de:-de)+128))}}addDash(a,c){const v=c?7:0,M=2*v+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let I=0;for(let Y=0;Y<a.length;Y++)I+=a[Y];if(I!==0){const Y=this.width/I,ee=this.getDashRanges(a,this.width,Y);c?this.addRoundDash(ee,Y,v):this.addRegularDash(ee)}const z={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:I};return this.nextRow+=M,this.dirty=!0,z}bind(a){const c=a.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ie="maplibre_preloaded_worker_pool";class $e{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<$e.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ie]}numActive(){return Object.keys(this.active).length}}const gt=Math.floor(R.hardwareConcurrency/2);let Dt,ut;function Rt(){return Dt||(Dt=new $e),Dt}$e.workerCount=o.G(globalThis)?Math.max(Math.min(gt,3),1):1;class St{constructor(a,c){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=c;const v=this.workerPool.acquire(c);for(let M=0;M<v.length;M++){const I=new o.H(v[M],c);I.name=`Worker ${M}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,c){const v=[];for(const M of this.actors)v.push(M.sendAsync({type:a,data:c}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,c){for(const v of this.actors)v.registerMessageHandler(a,c)}}function Ke(){return ut||(ut=new St(Rt(),o.J),ut.registerMessageHandler("GR",(O,a,c)=>o.m(a,c))),ut}function Pe(O,a){const c=o.K();return o.L(c,c,[1,1,0]),o.M(c,c,[.5*O.width,.5*O.height,1]),O.calculatePosMatrix?o.N(c,c,O.calculatePosMatrix(a.toUnwrapped())):c}function Re(O,a,c,v,M,I,z){var Y;const ee=function(Be,ze,He){if(Be)for(const ft of Be){const dt=ze[ft];if(dt&&dt.source===He&&dt.type==="fill-extrusion")return!0}else for(const ft in ze){const dt=ze[ft];if(dt.source===He&&dt.type==="fill-extrusion")return!0}return!1}((Y=M?.layers)!==null&&Y!==void 0?Y:null,a,O.id),Ae=I.maxPitchScaleFactor(),de=O.tilesIn(v,Ae,ee);de.sort(Ye);const Oe=[];for(const Be of de)Oe.push({wrappedTileID:Be.tileID.wrapped().key,queryResults:Be.tile.queryRenderedFeatures(a,c,O._state,Be.queryGeometry,Be.cameraQueryGeometry,Be.scale,M,I,Ae,Pe(O.transform,Be.tileID),z?(ze,He)=>z(Be.tileID,ze,He):void 0)});return function(Be,ze){for(const He in Be)for(const ft of Be[He])vt(ft,ze);return Be}(function(Be){const ze={},He={};for(const ft of Be){const dt=ft.queryResults,pt=ft.wrappedTileID,wt=He[pt]=He[pt]||{};for(const Tt in dt){const Mt=dt[Tt],kt=wt[Tt]=wt[Tt]||{},Kt=ze[Tt]=ze[Tt]||[];for(const zt of Mt)kt[zt.featureIndex]||(kt[zt.featureIndex]=!0,Kt.push(zt))}}return ze}(Oe),O)}function Ye(O,a){const c=O.tileID,v=a.tileID;return c.overscaledZ-v.overscaledZ||c.canonical.y-v.canonical.y||c.wrap-v.wrap||c.canonical.x-v.canonical.x}function vt(O,a){const c=O.feature,v=a.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=v}function yt(O,a,c){return o._(this,void 0,void 0,function*(){let v=O;if(O.url?v=(yield o.j(a.transformRequest(O.url,"Source"),c)).data:yield R.frameAsync(c),!v)return null;const M=o.O(o.e(v,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(M.vectorLayerIds=v.vector_layers.map(I=>I.id)),M})}class Et{constructor(a,c){a&&(c?this.setSouthWest(a).setNorthEast(c):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}extend(a){const c=this._sw,v=this._ne;let M,I;if(a instanceof o.Q)M=a,I=a;else{if(!(a instanceof Et))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Et.convert(a)):this.extend(o.Q.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.Q.convert(a)):this;if(M=a._sw,I=a._ne,!M||!I)return this}return c||v?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),v.lng=Math.max(I.lng,v.lng),v.lat=Math.max(I.lat,v.lat)):(this._sw=new o.Q(M.lng,M.lat),this._ne=new o.Q(I.lng,I.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:c,lat:v}=o.Q.convert(a);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&M}static convert(a){return a instanceof Et?a:a&&new Et(a)}static fromLngLat(a,c=0){const v=360*c/40075017,M=v/Math.cos(Math.PI/180*a.lat);return new Et(new o.Q(a.lng-M,a.lat-v),new o.Q(a.lng+M,a.lat+v))}adjustAntiMeridian(){const a=new o.Q(this._sw.lng,this._sw.lat),c=new o.Q(this._ne.lng,this._ne.lat);return new Et(a,a.lng>c.lng?new o.Q(c.lng+360,c.lat):c)}}class Zt{constructor(a,c,v){this.bounds=Et.convert(this.validateBounds(a)),this.minzoom=c||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const c=Math.pow(2,a.z),v=Math.floor(o.U(this.bounds.getWest())*c),M=Math.floor(o.S(this.bounds.getNorth())*c),I=Math.ceil(o.U(this.bounds.getEast())*c),z=Math.ceil(o.S(this.bounds.getSouth())*c);return a.x>=v&&a.x<I&&a.y>=M&&a.y<z}}class Ut extends o.E{constructor(a,c,v,M){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield yt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new Zt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(c,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};v.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((I,z)=>{a.reloadPromise={resolve:I,reject:z}})}else a.actor=this.dispatcher.getActor(),M="LT";a.abortController=new AbortController;try{const I=yield a.actor.sendAsync({type:M,data:v},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,I)}catch(I){if(delete a.abortController,a.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,c){if(c&&c.resourceTiming&&(a.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&a.setExpiryData(c),a.loadVectorData(c,this.map.painter),a.reloadPromise){const v=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(v.resolve).catch(v.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class An extends o.E{constructor(a,c,v,M){super(),this.id=a,this.dispatcher=v,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.O(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield yt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Zt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(c){this._tileJSONRequest=null,this.fire(new o.k(c))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const v=yield te.getImage(this.map._requestManager.transformRequest(c,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&a.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const M=this.map.painter.context,I=M.gl,z=v.data;a.texture=this.map.painter.getTileTexture(z.width),a.texture?a.texture.update(z,{useMipmap:!0}):(a.texture=new le(M,z,I.RGBA,{useMipmap:!0}),a.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(v){if(delete a.abortController,a.aborted)a.state="unloaded";else if(v)throw a.state="errored",v}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class hr extends An{constructor(a,c,v,M){super(a,c,v,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(c,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const M=yield te.getImage(v,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(M&&M.data){const I=M.data;this.map._refreshExpiredTiles&&(M.cacheControl||M.expires)&&a.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const z=o.b(I)&&o.V()?I:yield this.readImageNow(I),Y={type:this.type,uid:a.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const ee=yield a.actor.sendAsync({type:"LDT",data:Y});a.dem=ee,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(M){if(delete a.abortController,a.aborted)a.state="unloaded";else if(M)throw a.state="errored",M}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.W()){const c=a.width+2,v=a.height+2;try{return new o.R({width:c,height:v},yield o.X(a,-1,-1,c,v))}catch{}}return R.getImageData(a,1)})}_getNeighboringTiles(a){const c=a.canonical,v=Math.pow(2,c.z),M=(c.x-1+v)%v,I=c.x===0?a.wrap-1:a.wrap,z=(c.x+1+v)%v,Y=c.x+1===v?a.wrap+1:a.wrap,ee={};return ee[new o.Y(a.overscaledZ,I,c.z,M,c.y).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,Y,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(ee[new o.Y(a.overscaledZ,I,c.z,M,c.y-1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,Y,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<v&&(ee[new o.Y(a.overscaledZ,I,c.z,M,c.y+1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},ee[new o.Y(a.overscaledZ,Y,c.z,z,c.y+1).key]={backfilled:!1}),ee}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Vt extends o.E{constructor(a,c,v,M){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(M),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(c=>c.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const a=new Et,c=yield this.getData();let v;switch(c.type){case"FeatureCollection":v=c.features.map(M=>this.getCoordinatesFromGeometry(M.geometry)).flat(1/0);break;case"Feature":v=this.getCoordinatesFromGeometry(c.geometry);break;default:v=this.getCoordinatesFromGeometry(c)}if(v.length==0)return a;for(let M=0;M<v.length-1;M+=2)a.extend([v[M],v[M+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,c,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:c,offset:v}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);a?c.dataDiff=a:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(R.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let M=null;v.resourceTiming&&v.resourceTiming[this.id]&&(M=v.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&o.e(I,{resourceTiming:M}),this.fire(new o.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(v))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.actor?"RT":"LT";a.actor=this.actor;const v={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:v},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Vn extends o.E{constructor(a,c,v,M){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=v,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield te.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,a&&(this.coordinates=a),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.k(c))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const c=a.map(o.$.fromLngLat);var v;return this.tileID=function(M){let I=1/0,z=1/0,Y=-1/0,ee=-1/0;for(const Be of M)I=Math.min(I,Be.x),z=Math.min(z,Be.y),Y=Math.max(Y,Be.x),ee=Math.max(ee,Be.y);const Ae=Math.max(Y-I,ee-z),de=Math.max(0,Math.floor(-Math.log(Ae)/Math.LN2)),Oe=Math.pow(2,de);return new o.a1(de,Math.floor((I+Y)/2*Oe),Math.floor((z+ee)/2*Oe))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((v=this.tileCoords)[1].x-v[0].x)*(v[2].y-v[0].y)-(v[1].y-v[0].y)*(v[2].x-v[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,c=a.gl;this.texture||(this.texture=new le(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let v=!1;for(const M in this.tiles){const I=this.tiles[M];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let c=1/0,v=1/0,M=-1/0,I=-1/0;for(const Y of a)c=Math.min(c,Y.x),v=Math.min(v,Y.y),M=Math.max(M,Y.x),I=Math.max(I,Y.y);const z={};for(let Y=0;Y<=o.a0;Y++){const ee=Math.pow(2,Y),Ae=Math.floor(c*ee),de=Math.floor(v*ee),Oe=Math.floor(M*ee),Be=Math.floor(I*ee);z[Y]={minTileX:Ae,minTileY:de,maxTileX:Oe,maxTileY:Be}}return z}}class Pn extends Vn{constructor(a,c,v,M){super(a,c,v,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const c of a.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,c=a.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new le(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let v=!1;for(const M in this.tiles){const I=this.tiles[M];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Dn extends Vn{constructor(a,c,v,M){super(a,c,v,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(I=>!Array.isArray(I)||I.length!==2||I.some(z=>typeof z!="number"))||this.fire(new o.k(new o.a3(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a3(`sources.${a}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a3(`sources.${a}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,v=c.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new le(c,this.canvas,v.RGBA,{premultiply:!0});let M=!1;for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,M=!0)}M&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Ln={},Ir=O=>{switch(O){case"geojson":return Vt;case"image":return Vn;case"raster":return An;case"raster-dem":return hr;case"vector":return Ut;case"video":return Pn;case"canvas":return Dn}return Ln[O]},rr="RTLPluginLoaded";class Yn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ke()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(c,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=R.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(rr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let We=null;function he(){return We||(We=new Yn),We}class me{constructor(a,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const c=a+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,c,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(M,I){const z={};if(!I)return z;for(const Y of M){const ee=Y.layerIds.map(Ae=>I.getLayer(Ae)).filter(Boolean);if(ee.length!==0){Y.layers=ee,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(Ae=>ee.filter(de=>de.id===Ae)[0]));for(const Ae of ee)z[Ae.id]=Y}}return z}(a.buckets,c?.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const I=this.buckets[M];if(I instanceof o.a6){if(this.hasSymbolBuckets=!0,!v)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const I=this.buckets[M];if(I instanceof o.a6&&I.hasRTLText){this.hasRTLText=!0,he().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const I=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(I))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const v in this.buckets){const M=this.buckets[v];M.uploadPending()&&M.upload(a)}const c=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new le(a,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new le(a,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,c,v,M,I,z,Y,ee,Ae,de,Oe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:I,scale:z,tileSize:this.tileSize,pixelPosMatrix:de,transform:ee,params:Y,queryPadding:this.queryPadding*Ae,getElevation:Oe},a,c,v):{}}querySourceFeatures(a,c){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const M=v.loadVTLayers(),I=c&&c.sourceLayer?c.sourceLayer:"",z=M._geojsonTileLayer||M[I];if(!z)return;const Y=o.a7(c&&c.filter),{z:ee,x:Ae,y:de}=this.tileID.canonical,Oe={z:ee,x:Ae,y:de};for(let Be=0;Be<z.length;Be++){const ze=z.feature(Be);if(Y.needGeometry){const dt=o.a8(ze,!0);if(!Y.filter(new o.C(this.tileID.overscaledZ),dt,this.tileID.canonical))continue}else if(!Y.filter(new o.C(this.tileID.overscaledZ),ze))continue;const He=v.getId(ze,I),ft=new o.a9(ze,ee,Ae,de,He);ft.tile=Oe,a.push(ft)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const v=o.aa(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let M=!1;if(this.expirationTime>v)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const I=this.expirationTime-c;I?this.expirationTime=v+Math.max(I,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const I=this.buckets[M],z=I.layers[0].sourceLayer||"_geojsonTileLayer",Y=v[z],ee=a[z];if(!Y||!ee||Object.keys(ee).length===0)continue;I.update(ee,Y,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Ae=c&&c.style&&c.style.getLayer(M);Ae&&(this.queryPadding=Math.max(this.queryPadding,Ae.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=R.now()+a}setDependencies(a,c){const v={};for(const M of c)v[M]=!0;this.dependencies[a]=v}hasDependency(a,c){for(const v of a){const M=this.dependencies[v];if(M){for(const I of c)if(M[I])return!0}}return!1}}class et{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,v){const M=a.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const I={value:c,timeout:void 0};if(v!==void 0&&(I.timeout=setTimeout(()=>{this.remove(a,I)},v)),this.data[M].push(I),this.order.push(M),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const v=a.wrapped().key,M=c===void 0?0:this.data[v].indexOf(c),I=this.data[v][M];return this.data[v].splice(M,1),I.timeout&&clearTimeout(I.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(I.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const v in this.data)for(const M of this.data[v])a(M.value)||c.push(M);for(const v of c)this.remove(v.value.tileID,v)}}class bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,v){const M=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][M]=this.stateChanges[a][M]||{},o.e(this.stateChanges[a][M],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const I in this.state[a])I!==M&&(this.deletedStates[a][I]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][M]===null){this.deletedStates[a][M]={};for(const I in this.state[a][M])v[I]||(this.deletedStates[a][M][I]=null)}else for(const I in v)this.deletedStates[a]&&this.deletedStates[a][M]&&this.deletedStates[a][M][I]===null&&delete this.deletedStates[a][M][I]}removeFeatureState(a,c,v){if(this.deletedStates[a]===null)return;const M=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&c!==void 0)this.deletedStates[a][M]!==null&&(this.deletedStates[a][M]=this.deletedStates[a][M]||{},this.deletedStates[a][M][v]=null);else if(c!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][M])for(v in this.deletedStates[a][M]={},this.stateChanges[a][M])this.deletedStates[a][M][v]=null;else this.deletedStates[a][M]=null;else this.deletedStates[a]=null}getState(a,c){const v=String(c),M=o.e({},(this.state[a]||{})[v],(this.stateChanges[a]||{})[v]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const I=this.deletedStates[a][c];if(I===null)return{};for(const z in I)delete M[z]}return M}initializeTileState(a,c){a.setFeatureState(this.state,c)}coalesceChanges(a,c){const v={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const I={};for(const z in this.stateChanges[M])this.state[M][z]||(this.state[M][z]={}),o.e(this.state[M][z],this.stateChanges[M][z]),I[z]=this.state[M][z];v[M]=I}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const I={};if(this.deletedStates[M]===null)for(const z in this.state[M])I[z]={},this.state[M][z]={};else for(const z in this.deletedStates[M]){if(this.deletedStates[M][z]===null)this.state[M][z]={};else for(const Y of Object.keys(this.deletedStates[M][z]))delete this.state[M][z][Y];I[z]=this.state[M][z]}v[M]=v[M]||{},o.e(v[M],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const M in a)a[M].setFeatureState(v,c)}}const Yt=89.25;function Jt(O,a){const c=o.ae(a.lat,-85.051129,o.af);return new o.P(o.U(a.lng)*O,o.S(c)*O)}function ir(O,a){return new o.$(a.x/O,a.y/O).toLngLat()}function Xe(O){return O.cameraToCenterDistance*Math.min(.85*Math.tan(o.ab(90-O.pitch)),Math.tan(o.ab(Yt-O.pitch)))}function ae(O,a){const c=O.canonical,v=a/o.ac(c.z),M=c.x+Math.pow(2,c.z)*O.wrap,I=o.ad(new Float64Array(16));return o.L(I,I,[M*v,c.y*v,0]),o.M(I,I,[v/o.Z,v/o.Z,1]),I}function ve(O,a,c,v,M){const I=o.$.fromLngLat(O,a),z=M*o.ag(1,O.lat),Y=z*Math.cos(o.ab(c)),ee=Math.sqrt(z*z-Y*Y),Ae=ee*Math.sin(o.ab(-v)),de=ee*Math.cos(o.ab(-v));return new o.$(I.x+Ae,I.y+de,I.z+Y)}function p(O,a,c){const v=a.intersectsFrustum(O);if(!c)return v;const M=a.intersectsPlane(c);return v===0||M===0?0:v===2&&M===2?2:1}function Ne(O,a,c){let v=0;const M=(c-a)/10;for(let I=0;I<10;I++)v+=M*Math.pow(Math.cos(a+(I+.5)/10*(c-a)),O);return v}function Ve(O,a){return function(c,v,M,I,z){const Y=2*((O-1)/o.ah(Math.cos(o.ab(Yt-z))/Math.cos(o.ab(Yt)))-1),ee=Math.acos(M/I),Ae=2*Ne(Y-1,0,o.ab(z/2)),de=Math.min(o.ab(Yt),ee+o.ab(z/2)),Oe=Ne(Y-1,Math.min(de,ee-o.ab(z/2)),de),Be=Math.atan(v/M),ze=Math.hypot(v,M);let He=c;return He+=o.ah(I/ze/Math.max(.5,Math.cos(o.ab(z/2)))),He+=Y*o.ah(Math.cos(Be))/2,He-=o.ah(Math.max(1,Oe/Ae/a))/2,He}}const Te=Ve(9.314,3);function lt(O,a){const c=(a.roundZoom?Math.round:Math.floor)(O.zoom+o.ah(O.tileSize/a.tileSize));return Math.max(0,c)}function ct(O,a){const c=O.getCameraFrustum(),v=O.getClippingPlane(),M=O.screenPointToMercatorCoordinate(O.getCameraPoint()),I=o.$.fromLngLat(O.center,O.elevation);M.z=I.z+Math.cos(O.pitchInRadians)*O.cameraToCenterDistance/O.worldSize;const z=O.getCoveringTilesDetailsProvider(),Y=z.allowVariableZoom(O,a),ee=lt(O,a),Ae=a.minzoom||0,de=a.maxzoom!==void 0?a.maxzoom:O.maxZoom,Oe=Math.min(Math.max(0,ee),de),Be=Math.pow(2,Oe),ze=[Be*M.x,Be*M.y,0],He=[Be*I.x,Be*I.y,0],ft=Math.hypot(I.x-M.x,I.y-M.y),dt=Math.abs(I.z-M.z),pt=Math.hypot(ft,dt),wt=kt=>({zoom:0,x:0,y:0,wrap:kt,fullyVisible:!1}),Tt=[],Mt=[];if(O.renderWorldCopies&&z.allowWorldCopies())for(let kt=1;kt<=3;kt++)Tt.push(wt(-kt)),Tt.push(wt(kt));for(Tt.push(wt(0));Tt.length>0;){const kt=Tt.pop(),Kt=kt.x,zt=kt.y;let sn=kt.fullyVisible;const bn={x:Kt,y:zt,z:kt.zoom},en=z.getTileAABB(bn,kt.wrap,O.elevation,a);if(!sn){const cr=p(c,en,v);if(cr===0)continue;sn=cr===2}const ln=z.distanceToTile2d(M.x,M.y,bn,en);let Cn=ee;Y&&(Cn=(a.calculateTileZoom||Te)(O.zoom+o.ah(O.tileSize/a.tileSize),ln,dt,pt,O.fov)),Cn=(a.roundZoom?Math.round:Math.floor)(Cn),Cn=Math.max(0,Cn);const Ar=Math.min(Cn,de);if(kt.wrap=z.getWrap(I,bn,kt.wrap),kt.zoom>=Ar){if(kt.zoom<Ae)continue;const cr=Oe-kt.zoom,kn=ze[0]-.5-(Kt<<cr),Br=ze[1]-.5-(zt<<cr),Hr=a.reparseOverscaled?Math.max(kt.zoom,Cn):kt.zoom;Mt.push({tileID:new o.Y(kt.zoom===de?Hr:kt.zoom,kt.wrap,kt.zoom,Kt,zt),distanceSq:o.ai([He[0]-.5-Kt,He[1]-.5-zt]),tileDistanceToCamera:Math.sqrt(kn*kn+Br*Br)})}else for(let cr=0;cr<4;cr++)Tt.push({zoom:kt.zoom+1,x:(Kt<<1)+cr%2,y:(zt<<1)+(cr>>1),wrap:kt.wrap,fullyVisible:sn})}return Mt.sort((kt,Kt)=>kt.distanceSq-Kt.distanceSq).map(kt=>kt.tileID)}class Ft extends o.E{constructor(a,c,v){super(),this.id=a,this.dispatcher=v,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,I,z,Y)=>{const ee=new(Ir(I.type))(M,I,z,Y);if(ee.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${ee.id}`);return ee})(a,c,v,this),this._tiles={},this._cache=new et(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new bt,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,c,v){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,c,v)}catch(M){a.state="errored",M.status!==404?this._source.fire(new o.k(M,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const v=this._tiles[c];v.upload(a),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(jt).map(a=>a.key)}getRenderableIds(a){const c=[];for(const v in this._tiles)this._isIdRenderable(v,a)&&c.push(this._tiles[v]);return a?c.sort((v,M)=>{const I=v.tileID,z=M.tileID,Y=new o.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians),ee=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return I.overscaledZ-z.overscaledZ||ee.y-Y.y||ee.x-Y.x}).map(v=>v.tileID.key):c.map(v=>v.tileID).sort(jt).map(v=>v.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(a||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(a,c){return o._(this,void 0,void 0,function*(){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=c),yield this._loadTile(v,a,c))})}_tileLoaded(a,c,v){a.timeAdded=R.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const I=c[M];if(a.neighboringTiles&&a.neighboringTiles[I]){const z=this.getTileByID(I);v(a,z),v(z,a)}}function v(M,I){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let z=I.tileID.canonical.x-M.tileID.canonical.x;const Y=I.tileID.canonical.y-M.tileID.canonical.y,ee=Math.pow(2,M.tileID.canonical.z),Ae=I.tileID.key;z===0&&Y===0||Math.abs(Y)>1||(Math.abs(z)>1&&(Math.abs(z+ee)===1?z+=ee:Math.abs(z-ee)===1&&(z-=ee)),I.dem&&M.dem&&(M.dem.backfillBorder(I.dem,z,Y),M.neighboringTiles&&M.neighboringTiles[Ae]&&(M.neighboringTiles[Ae].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,v,M){for(const I in this._tiles){let z=this._tiles[I];if(M[I]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>v)continue;let Y=z.tileID;for(;z&&z.tileID.overscaledZ>c+1;){const Ae=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[Ae.key],z&&z.hasData()&&(Y=Ae)}let ee=Y;for(;ee.overscaledZ>c;)if(ee=ee.scaledTo(ee.overscaledZ-1),a[ee.key]||a[ee.canonical.key]){M[Y.key]=Y;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=c?v:null}for(let v=a.overscaledZ-1;v>=c;v--){const M=a.scaledTo(v),I=this._getLoadedTile(M);if(I)return I}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const c=Math.ceil(a.width/this._source.tileSize)+1,v=Math.ceil(a.height/this._source.tileSize)+1,M=Math.floor(c*v*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(I)}handleWrapJump(a){const c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){const v={};for(const M in this._tiles){const I=this._tiles[M];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+c),v[I.tileID.key]=I}this._tiles=v;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(a,c,v,M,I,z){const Y={},ee={},Ae=Object.keys(a),de=R.now();for(const Oe of Ae){const Be=a[Oe],ze=this._tiles[Oe];if(!ze||ze.fadeEndTime!==0&&ze.fadeEndTime<=de)continue;const He=this.findLoadedParent(Be,c),ft=this.findLoadedSibling(Be),dt=He||ft||null;dt&&(this._addTile(dt.tileID),Y[dt.tileID.key]=dt.tileID),ee[Oe]=Be}this._retainLoadedChildren(ee,M,v,a);for(const Oe in Y)a[Oe]||(this._coveredTiles[Oe]=!0,a[Oe]=Y[Oe]);if(z){const Oe={},Be={};for(const ze of I)this._tiles[ze.key].hasData()?Oe[ze.key]=ze:Be[ze.key]=ze;for(const ze in Be){const He=Be[ze].children(this._source.maxzoom);this._tiles[He[0].key]&&this._tiles[He[1].key]&&this._tiles[He[2].key]&&this._tiles[He[3].key]&&(Oe[He[0].key]=a[He[0].key]=He[0],Oe[He[1].key]=a[He[1].key]=He[1],Oe[He[2].key]=a[He[2].key]=He[2],Oe[He[3].key]=a[He[3].key]=He[3],delete Be[ze])}for(const ze in Be){const He=Be[ze],ft=this.findLoadedParent(He,this._source.minzoom),dt=this.findLoadedSibling(He),pt=ft||dt||null;if(pt){Oe[pt.tileID.key]=a[pt.tileID.key]=pt.tileID;for(const wt in Oe)Oe[wt].isChildOf(pt.tileID)&&delete Oe[wt]}}for(const ze in this._tiles)Oe[ze]||(this._coveredTiles[ze]=!0)}}update(a,c){if(!this._sourceLoaded||this._paused)return;let v;this.transform=a,this.terrain=c,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(de=>new o.Y(de.canonical.z,de.wrap,de.canonical.z,de.canonical.x,de.canonical.y)):(v=ct(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(v=v.filter(de=>this._source.hasTile(de)))):v=[];const M=lt(a,this._source),I=Math.max(M-Ft.maxOverzooming,this._source.minzoom),z=Math.max(M+Ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const de={};for(const Oe of v)if(Oe.canonical.z>this._source.minzoom){const Be=Oe.scaledTo(Oe.canonical.z-1);de[Be.key]=Be;const ze=Oe.scaledTo(Math.max(this._source.minzoom,Math.min(Oe.canonical.z,5)));de[ze.key]=ze}v=v.concat(Object.values(de))}const Y=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,Y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ee=this._updateRetainedTiles(v,M);Gt(this._source.type)&&this._updateCoveredAndRetainedTiles(ee,I,z,M,v,c);for(const de in ee)this._tiles[de].clearFadeHold();const Ae=o.aj(this._tiles,ee);for(const de of Ae){const Oe=this._tiles[de];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(de)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,c){var v;const M={},I={},z=Math.max(c-Ft.maxOverzooming,this._source.minzoom),Y=Math.max(c+Ft.maxUnderzooming,this._source.minzoom),ee={};for(const Ae of a){const de=this._addTile(Ae);M[Ae.key]=Ae,de.hasData()||c<this._source.maxzoom&&(ee[Ae.key]=Ae)}this._retainLoadedChildren(ee,c,Y,M);for(const Ae of a){let de=this._tiles[Ae.key];if(de.hasData())continue;if(c+1>this._source.maxzoom){const Be=Ae.children(this._source.maxzoom)[0],ze=this.getTile(Be);if(ze&&ze.hasData()){M[Be.key]=Be;continue}}else{const Be=Ae.children(this._source.maxzoom);if(M[Be[0].key]&&M[Be[1].key]&&M[Be[2].key]&&M[Be[3].key])continue}let Oe=de.wasRequested();for(let Be=Ae.overscaledZ-1;Be>=z;--Be){const ze=Ae.scaledTo(Be);if(I[ze.key])break;if(I[ze.key]=!0,de=this.getTile(ze),!de&&Oe&&(de=this._addTile(ze)),de){const He=de.hasData();if((He||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||Oe)&&(M[ze.key]=ze),Oe=de.wasRequested(),He)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let v,M=this._tiles[a].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){v=this._loadedParentTiles[M.key];break}c.push(M.key);const I=M.scaledTo(M.overscaledZ-1);if(v=this._getLoadedTile(I),v)break;M=I}for(const I of c)this._loadedParentTiles[I]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const c=this._tiles[a].tileID,v=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=v}}_addTile(a){let c=this._tiles[a.key];if(c)return c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const v=c;return c||(c=new me(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,a.key,c.state)),c.uses++,this._tiles[a.key]=c,v||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=c.getExpiryTimeout();v&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},v))}refreshTiles(a){for(const c in this._tiles)this._isIdRenderable(c)&&a.some(v=>v.equals(this._tiles[c].tileID.canonical))&&this._reloadTile(c,"expired")}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(a){const c=a.sourceDataType;a.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&c==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,c,v){const M=[],I=this.transform;if(!I)return M;const z=v?I.getCameraQueryGeometry(a):a,Y=a.map(He=>I.screenPointToMercatorCoordinate(He,this.terrain)),ee=z.map(He=>I.screenPointToMercatorCoordinate(He,this.terrain)),Ae=this.getIds();let de=1/0,Oe=1/0,Be=-1/0,ze=-1/0;for(const He of ee)de=Math.min(de,He.x),Oe=Math.min(Oe,He.y),Be=Math.max(Be,He.x),ze=Math.max(ze,He.y);for(let He=0;He<Ae.length;He++){const ft=this._tiles[Ae[He]];if(ft.holdingForFade())continue;const dt=I.getCoveringTilesDetailsProvider().allowWorldCopies()?ft.tileID:ft.tileID.unwrapTo(0),pt=Math.pow(2,I.zoom-ft.tileID.overscaledZ),wt=c*ft.queryPadding*o.Z/ft.tileSize/pt,Tt=[dt.getTilePoint(new o.$(de,Oe)),dt.getTilePoint(new o.$(Be,ze))];if(Tt[0].x-wt<o.Z&&Tt[0].y-wt<o.Z&&Tt[1].x+wt>=0&&Tt[1].y+wt>=0){const Mt=Y.map(Kt=>dt.getTilePoint(Kt)),kt=ee.map(Kt=>dt.getTilePoint(Kt));M.push({tile:ft,tileID:dt,queryGeometry:Mt,cameraQueryGeometry:kt,scale:pt})}}return M}getVisibleCoordinates(a){const c=this.getRenderableIds(a).map(v=>this._tiles[v].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(Gt(this._source.type)){const a=R.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=a)return!0}return!1}setFeatureState(a,c,v){this._state.updateState(a=a||"_geojsonTileLayer",c,v)}removeFeatureState(a,c,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,v)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,v){const M=this._tiles[a];M&&M.setDependencies(c,v)}reloadTilesForDependencies(a,c){for(const v in this._tiles)this._tiles[v].hasDependency(a,c)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(a,c))}}function jt(O,a){const c=Math.abs(2*O.wrap)-+(O.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return O.overscaledZ-a.overscaledZ||v-c||a.canonical.y-O.canonical.y||a.canonical.x-O.canonical.x}function Gt(O){return O==="raster"||O==="image"||O==="video"}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;class nn{constructor(a,c){this.reset(a,c)}reset(a,c){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ae(a,0,1);let c=1,v=this._distances[c];const M=a*this.paddedLength+this.padding;for(;v<M&&c<this._distances.length;)v=this._distances[++c];const I=c-1,z=this._distances[I],Y=v-z,ee=Y>0?(M-z)/Y:0;return this.points[I].mult(1-ee).add(this.points[c].mult(ee))}}function On(O,a){let c=!0;return O==="always"||O!=="never"&&a!=="never"||(c=!1),c}class Rn{constructor(a,c,v){const M=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(c/v);for(let z=0;z<this.xCellCount*this.yCellCount;z++)M.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=c,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,c,v,M,I){this._forEachCell(c,v,M,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(c),this.bboxes.push(v),this.bboxes.push(M),this.bboxes.push(I)}insertCircle(a,c,v,M){this._forEachCell(c-M,v-M,c+M,v+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(c),this.circles.push(v),this.circles.push(M)}_insertBoxCell(a,c,v,M,I,z){this.boxCells[I].push(z)}_insertCircleCell(a,c,v,M,I,z){this.circleCells[I].push(z)}_query(a,c,v,M,I,z,Y){if(v<0||a>this.width||M<0||c>this.height)return[];const ee=[];if(a<=0&&c<=0&&this.width<=v&&this.height<=M){if(I)return[{key:null,x1:a,y1:c,x2:v,y2:M}];for(let Ae=0;Ae<this.boxKeys.length;Ae++)ee.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(let Ae=0;Ae<this.circleKeys.length;Ae++){const de=this.circles[3*Ae],Oe=this.circles[3*Ae+1],Be=this.circles[3*Ae+2];ee.push({key:this.circleKeys[Ae],x1:de-Be,y1:Oe-Be,x2:de+Be,y2:Oe+Be})}}else this._forEachCell(a,c,v,M,this._queryCell,ee,{hitTest:I,overlapMode:z,seenUids:{box:{},circle:{}}},Y);return ee}query(a,c,v,M){return this._query(a,c,v,M,!1,null)}hitTest(a,c,v,M,I,z){return this._query(a,c,v,M,!0,I,z).length>0}hitTestCircle(a,c,v,M,I){const z=a-v,Y=a+v,ee=c-v,Ae=c+v;if(Y<0||z>this.width||Ae<0||ee>this.height)return!1;const de=[];return this._forEachCell(z,ee,Y,Ae,this._queryCellCircle,de,{hitTest:!0,overlapMode:M,circle:{x:a,y:c,radius:v},seenUids:{box:{},circle:{}}},I),de.length>0}_queryCell(a,c,v,M,I,z,Y,ee){const{seenUids:Ae,hitTest:de,overlapMode:Oe}=Y,Be=this.boxCells[I];if(Be!==null){const He=this.bboxes;for(const ft of Be)if(!Ae.box[ft]){Ae.box[ft]=!0;const dt=4*ft,pt=this.boxKeys[ft];if(a<=He[dt+2]&&c<=He[dt+3]&&v>=He[dt+0]&&M>=He[dt+1]&&(!ee||ee(pt))&&(!de||!On(Oe,pt.overlapMode))&&(z.push({key:pt,x1:He[dt],y1:He[dt+1],x2:He[dt+2],y2:He[dt+3]}),de))return!0}}const ze=this.circleCells[I];if(ze!==null){const He=this.circles;for(const ft of ze)if(!Ae.circle[ft]){Ae.circle[ft]=!0;const dt=3*ft,pt=this.circleKeys[ft];if(this._circleAndRectCollide(He[dt],He[dt+1],He[dt+2],a,c,v,M)&&(!ee||ee(pt))&&(!de||!On(Oe,pt.overlapMode))){const wt=He[dt],Tt=He[dt+1],Mt=He[dt+2];if(z.push({key:pt,x1:wt-Mt,y1:Tt-Mt,x2:wt+Mt,y2:Tt+Mt}),de)return!0}}}return!1}_queryCellCircle(a,c,v,M,I,z,Y,ee){const{circle:Ae,seenUids:de,overlapMode:Oe}=Y,Be=this.boxCells[I];if(Be!==null){const He=this.bboxes;for(const ft of Be)if(!de.box[ft]){de.box[ft]=!0;const dt=4*ft,pt=this.boxKeys[ft];if(this._circleAndRectCollide(Ae.x,Ae.y,Ae.radius,He[dt+0],He[dt+1],He[dt+2],He[dt+3])&&(!ee||ee(pt))&&!On(Oe,pt.overlapMode))return z.push(!0),!0}}const ze=this.circleCells[I];if(ze!==null){const He=this.circles;for(const ft of ze)if(!de.circle[ft]){de.circle[ft]=!0;const dt=3*ft,pt=this.circleKeys[ft];if(this._circlesCollide(He[dt],He[dt+1],He[dt+2],Ae.x,Ae.y,Ae.radius)&&(!ee||ee(pt))&&!On(Oe,pt.overlapMode))return z.push(!0),!0}}}_forEachCell(a,c,v,M,I,z,Y,ee){const Ae=this._convertToXCellCoord(a),de=this._convertToYCellCoord(c),Oe=this._convertToXCellCoord(v),Be=this._convertToYCellCoord(M);for(let ze=Ae;ze<=Oe;ze++)for(let He=de;He<=Be;He++)if(I.call(this,a,c,v,M,this.xCellCount*He+ze,z,Y,ee))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,c,v,M,I,z){const Y=M-a,ee=I-c,Ae=v+z;return Ae*Ae>Y*Y+ee*ee}_circleAndRectCollide(a,c,v,M,I,z,Y){const ee=(z-M)/2,Ae=Math.abs(a-(M+ee));if(Ae>ee+v)return!1;const de=(Y-I)/2,Oe=Math.abs(c-(I+de));if(Oe>de+v)return!1;if(Ae<=ee||Oe<=de)return!0;const Be=Ae-ee,ze=Oe-de;return Be*Be+ze*ze<=v*v}}function dr(O,a,c){const v=o.K();if(!O){const{vecSouth:Oe,vecEast:Be}=or(a),ze=C();ze[0]=Be[0],ze[1]=Be[1],ze[2]=Oe[0],ze[3]=Oe[1],M=ze,(de=(z=(I=ze)[0])*(Ae=I[3])-(ee=I[2])*(Y=I[1]))&&(M[0]=Ae*(de=1/de),M[1]=-Y*de,M[2]=-ee*de,M[3]=z*de),v[0]=ze[0],v[1]=ze[1],v[4]=ze[2],v[5]=ze[3]}var M,I,z,Y,ee,Ae,de;return o.M(v,v,[1/c,1/c,1]),v}function Tr(O,a,c,v){if(O){const M=o.K();if(!a){const{vecSouth:I,vecEast:z}=or(c);M[0]=z[0],M[1]=z[1],M[4]=I[0],M[5]=I[1]}return o.M(M,M,[v,v,1]),M}return c.pixelsToClipSpaceMatrix}function or(O){const a=Math.cos(O.rollInRadians),c=Math.sin(O.rollInRadians),v=Math.cos(O.pitchInRadians),M=Math.cos(O.bearingInRadians),I=Math.sin(O.bearingInRadians),z=o.ao();z[0]=-M*v*c-I*a,z[1]=-I*v*c+M*a;const Y=o.ap(z);Y<1e-9?o.aq(z):o.ar(z,z,1/Y);const ee=o.ao();ee[0]=M*v*a-I*c,ee[1]=I*v*a+M*c;const Ae=o.ap(ee);return Ae<1e-9?o.aq(ee):o.ar(ee,ee,1/Ae),{vecEast:ee,vecSouth:z}}function on(O,a,c,v){let M;v?(M=[O,a,v(O,a),1],o.at(M,M,c)):(M=[O,a,0,1],hl(M,M,c));const I=M[3];return{point:new o.P(M[0]/I,M[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function ti(O,a){return .5+O/a*.5}function li(O,a){return O.x>=-a[0]&&O.x<=a[0]&&O.y>=-a[1]&&O.y<=a[1]}function jr(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be){const ze=c?O.textSizeData:O.iconSizeData,He=o.ak(ze,a.transform.zoom),ft=[256/a.width*2+1,256/a.height*2+1],dt=c?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;dt.clear();const pt=O.lineVertexArray,wt=c?O.text.placedSymbolArray:O.icon.placedSymbolArray,Tt=a.transform.width/a.transform.height;let Mt=!1;for(let kt=0;kt<wt.length;kt++){const Kt=wt.get(kt);if(Kt.hidden||Kt.writingMode===o.al.vertical&&!Mt){zs(Kt.numGlyphs,dt);continue}Mt=!1;const zt=new o.P(Kt.anchorX,Kt.anchorY),sn={getElevation:Be,pitchedLabelPlaneMatrix:v,lineVertexArray:pt,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:zt,unwrappedTileID:ee,width:Ae,height:de,translation:Oe},bn=qr(Kt.anchorX,Kt.anchorY,sn);if(!li(bn.point,ft)){zs(Kt.numGlyphs,dt);continue}const en=ti(a.transform.cameraToCenterDistance,bn.signedDistanceFromCamera),ln=o.am(ze,He,Kt),Cn=I?ln*a.transform.getPitchedTextCorrection(Kt.anchorX,Kt.anchorY,ee)/en:ln*en,Ar=Dr({projectionContext:sn,pitchedLabelPlaneMatrixInverse:M,symbol:Kt,fontSize:Cn,flip:!1,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:dt,aspectRatio:Tt,rotateToLine:Y});Mt=Ar.useVertical,(Ar.notEnoughRoom||Mt||Ar.needsFlipping&&Dr({projectionContext:sn,pitchedLabelPlaneMatrixInverse:M,symbol:Kt,fontSize:Cn,flip:!0,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:dt,aspectRatio:Tt,rotateToLine:Y}).notEnoughRoom)&&zs(Kt.numGlyphs,dt)}c?O.text.dynamicLayoutVertexBuffer.updateData(dt):O.icon.dynamicLayoutVertexBuffer.updateData(dt)}function Fr(O,a,c,v,M,I,z,Y){const ee=I.glyphStartIndex+I.numGlyphs,Ae=I.lineStartIndex,de=I.lineStartIndex+I.lineLength,Oe=a.getoffsetX(I.glyphStartIndex),Be=a.getoffsetX(ee-1),ze=da(O*Oe,c,v,M,I.segment,Ae,de,Y,z);if(!ze)return null;const He=da(O*Be,c,v,M,I.segment,Ae,de,Y,z);return He?Y.projectionCache.anyProjectionOccluded?null:{first:ze,last:He}:null}function wn(O,a,c,v){return O===o.al.horizontal&&Math.abs(c.y-a.y)>Math.abs(c.x-a.x)*v?{useVertical:!0}:(O===o.al.vertical?a.y<c.y:a.x>c.x)?{needsFlipping:!0}:null}function Dr(O){const{projectionContext:a,pitchedLabelPlaneMatrixInverse:c,symbol:v,fontSize:M,flip:I,keepUpright:z,glyphOffsetArray:Y,dynamicLayoutVertexArray:ee,aspectRatio:Ae,rotateToLine:de}=O,Oe=M/24,Be=v.lineOffsetX*Oe,ze=v.lineOffsetY*Oe;let He;if(v.numGlyphs>1){const ft=v.glyphStartIndex+v.numGlyphs,dt=v.lineStartIndex,pt=v.lineStartIndex+v.lineLength,wt=Fr(Oe,Y,Be,ze,I,v,de,a);if(!wt)return{notEnoughRoom:!0};const Tt=As(wt.first.point.x,wt.first.point.y,a,c),Mt=As(wt.last.point.x,wt.last.point.y,a,c);if(z&&!I){const kt=wn(v.writingMode,Tt,Mt,Ae);if(kt)return kt}He=[wt.first];for(let kt=v.glyphStartIndex+1;kt<ft-1;kt++)He.push(da(Oe*Y.getoffsetX(kt),Be,ze,I,v.segment,dt,pt,a,de));He.push(wt.last)}else{if(z&&!I){const dt=yi(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,pt=v.lineStartIndex+v.segment+1,wt=new o.P(a.lineVertexArray.getx(pt),a.lineVertexArray.gety(pt)),Tt=yi(wt.x,wt.y,a),Mt=Tt.signedDistanceFromCamera>0?Tt.point:ui(a.tileAnchorPoint,wt,dt,1,a),kt=As(dt.x,dt.y,a,c),Kt=As(Mt.x,Mt.y,a,c),zt=wn(v.writingMode,kt,Kt,Ae);if(zt)return zt}const ft=da(Oe*Y.getoffsetX(v.glyphStartIndex),Be,ze,I,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,a,de);if(!ft||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};He=[ft]}for(const ft of He)o.as(ee,ft.point,ft.angle);return{}}function ui(O,a,c,v,M){const I=O.add(O.sub(a)._unit()),z=yi(I.x,I.y,M).point,Y=c.sub(z);return c.add(Y._mult(v/Y.mag()))}function Pi(O,a,c){const v=a.projectionCache;if(v.projections[O])return v.projections[O];const M=new o.P(a.lineVertexArray.getx(O),a.lineVertexArray.gety(O)),I=yi(M.x,M.y,a);if(I.signedDistanceFromCamera>0)return v.projections[O]=I.point,v.anyProjectionOccluded=v.anyProjectionOccluded||I.isOccluded,I.point;const z=O-c.direction;return ui(c.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(z),a.lineVertexArray.gety(z)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,a)}function yi(O,a,c){const v=O+c.translation[0],M=a+c.translation[1];let I;return c.pitchWithMap?(I=on(v,M,c.pitchedLabelPlaneMatrix,c.getElevation),I.isOccluded=!1):(I=c.transform.projectTileCoordinates(v,M,c.unwrappedTileID,c.getElevation),I.point.x=(.5*I.point.x+.5)*c.width,I.point.y=(.5*-I.point.y+.5)*c.height),I}function As(O,a,c,v){if(c.pitchWithMap){const M=[O,a,0,1];return o.at(M,M,v),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:O/c.width*2-1,y:a/c.height*2-1}}function qr(O,a,c){return c.transform.projectTileCoordinates(O,a,c.unwrappedTileID,c.getElevation)}function _s(O,a,c){return O._unit()._perp()._mult(a*c)}function La(O,a,c,v,M,I,z,Y,ee){if(Y.projectionCache.offsets[O])return Y.projectionCache.offsets[O];const Ae=c.add(a);if(O+ee.direction<v||O+ee.direction>=M)return Y.projectionCache.offsets[O]=Ae,Ae;const de=Pi(O+ee.direction,Y,ee),Oe=_s(de.sub(c),z,ee.direction),Be=c.add(Oe),ze=de.add(Oe);return Y.projectionCache.offsets[O]=o.au(I,Ae,Be,ze)||Ae,Y.projectionCache.offsets[O]}function da(O,a,c,v,M,I,z,Y,ee){const Ae=v?O-a:O+a;let de=Ae>0?1:-1,Oe=0;v&&(de*=-1,Oe=Math.PI),de<0&&(Oe+=Math.PI);let Be,ze=de>0?I+M:I+M+1;Y.projectionCache.cachedAnchorPoint?Be=Y.projectionCache.cachedAnchorPoint:(Be=yi(Y.tileAnchorPoint.x,Y.tileAnchorPoint.y,Y).point,Y.projectionCache.cachedAnchorPoint=Be);let He,ft,dt=Be,pt=Be,wt=0,Tt=0;const Mt=Math.abs(Ae),kt=[];let Kt;for(;wt+Tt<=Mt;){if(ze+=de,ze<I||ze>=z)return null;wt+=Tt,pt=dt,ft=He;const bn={absOffsetX:Mt,direction:de,distanceFromAnchor:wt,previousVertex:pt};if(dt=Pi(ze,Y,bn),c===0)kt.push(pt),Kt=dt.sub(pt);else{let en;const ln=dt.sub(pt);en=ln.mag()===0?_s(Pi(ze+de,Y,bn).sub(dt),c,de):_s(ln,c,de),ft||(ft=pt.add(en)),He=La(ze,en,dt,I,z,ft,c,Y,bn),kt.push(ft),Kt=He.sub(ft)}Tt=Kt.mag()}const zt=Kt._mult((Mt-wt)/Tt)._add(ft||pt),sn=Oe+Math.atan2(dt.y-pt.y,dt.x-pt.x);return kt.push(zt),{point:zt,angle:ee?sn:0,path:kt}}const No=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zs(O,a){for(let c=0;c<O;c++){const v=a.length;a.resize(v+4),a.float32.set(No,3*v)}}function hl(O,a,c){const v=a[0],M=a[1];return O[0]=c[0]*v+c[4]*M+c[12],O[1]=c[1]*v+c[5]*M+c[13],O[3]=c[3]*v+c[7]*M+c[15],O}const ci=100;class oa{constructor(a,c=new Rn(a.width+200,a.height+200,25),v=new Rn(a.width+200,a.height+200,25)){this.transform=a,this.grid=c,this.ignoredGrid=v,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+ci,this.screenBottomBoundary=a.height+ci,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be){const ze=this.projectAndGetPerspectiveRatio(a.anchorPointX+ee[0],a.anchorPointY+ee[1],I,de,Be),He=v*ze.perspectiveRatio;let ft;if(z||Y)ft=this._projectCollisionBox(a,He,M,I,z,Y,ee,ze,de,Oe,Be);else{const Kt=ze.x+(Oe?Oe.x*He:0),zt=ze.y+(Oe?Oe.y*He:0);ft={allPointsOccluded:!1,box:[Kt+a.x1*He,zt+a.y1*He,Kt+a.x2*He,zt+a.y2*He]}}const[dt,pt,wt,Tt]=ft.box,Mt=z?ft.allPointsOccluded:ze.isOccluded;let kt=Mt;return kt||(kt=ze.perspectiveRatio<this.perspectiveRatioCutoff),kt||(kt=!this.isInsideGrid(dt,pt,wt,Tt)),kt||c!=="always"&&this.grid.hitTest(dt,pt,wt,Tt,c,Ae)?{box:[dt,pt,wt,Tt],placeable:!1,offscreen:!1,occluded:Mt}:{box:[dt,pt,wt,Tt],placeable:!0,offscreen:this.isOffscreen(dt,pt,wt,Tt),occluded:Mt}}placeCollisionCircles(a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be,ze,He){const ft=[],dt=new o.P(c.anchorX,c.anchorY),pt=this.getPerspectiveRatio(dt.x,dt.y,z,He),wt=(Ae?I*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,z)/pt:I*pt)/o.ay,Tt={getElevation:He,pitchedLabelPlaneMatrix:Y,lineVertexArray:v,pitchWithMap:Ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:dt,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:ze},Mt=Fr(wt,M,c.lineOffsetX*wt,c.lineOffsetY*wt,!1,c,!1,Tt);let kt=!1,Kt=!1,zt=!0;if(Mt){const sn=.5*Oe*pt+Be,bn=new o.P(-100,-100),en=new o.P(this.screenRightBoundary,this.screenBottomBoundary),ln=new nn,Cn=Mt.first,Ar=Mt.last;let cr=[];for(let Hr=Cn.path.length-1;Hr>=1;Hr--)cr.push(Cn.path[Hr]);for(let Hr=1;Hr<Ar.path.length;Hr++)cr.push(Ar.path[Hr]);const kn=2.5*sn;if(Ae){const Hr=this.projectPathToScreenSpace(cr,Tt);cr=Hr.some(Xi=>Xi.signedDistanceFromCamera<=0)?[]:Hr.map(Xi=>Xi.point)}let Br=[];if(cr.length>0){const Hr=cr[0].clone(),Xi=cr[0].clone();for(let ts=1;ts<cr.length;ts++)Hr.x=Math.min(Hr.x,cr[ts].x),Hr.y=Math.min(Hr.y,cr[ts].y),Xi.x=Math.max(Xi.x,cr[ts].x),Xi.y=Math.max(Xi.y,cr[ts].y);Br=Hr.x>=bn.x&&Xi.x<=en.x&&Hr.y>=bn.y&&Xi.y<=en.y?[cr]:Xi.x<bn.x||Hr.x>en.x||Xi.y<bn.y||Hr.y>en.y?[]:o.av([cr],bn.x,bn.y,en.x,en.y)}for(const Hr of Br){ln.reset(Hr,.25*sn);let Xi=0;Xi=ln.length<=.5*sn?1:Math.ceil(ln.paddedLength/kn)+1;for(let ts=0;ts<Xi;ts++){const Ko=ts/Math.max(Xi-1,1),jo=ln.lerp(Ko),Rs=jo.x+ci,ho=jo.y+ci;ft.push(Rs,ho,sn,0);const ji=Rs-sn,aa=ho-sn,Ta=Rs+sn,Ca=ho+sn;if(zt=zt&&this.isOffscreen(ji,aa,Ta,Ca),Kt=Kt||this.isInsideGrid(ji,aa,Ta,Ca),a!=="always"&&this.grid.hitTestCircle(Rs,ho,sn,a,de)&&(kt=!0,!ee))return{circles:[],offscreen:!1,collisionDetected:kt}}}}return{circles:!ee&&kt||!Kt||pt<this.perspectiveRatioCutoff?[]:ft,offscreen:zt,collisionDetected:kt}}projectPathToScreenSpace(a,c){const v=function(M,I){const z=o.K();return o.an(z,I.pitchedLabelPlaneMatrix),M.map(Y=>{const ee=on(Y.x,Y.y,z,I.getElevation),Ae=I.transform.projectTileCoordinates(ee.point.x,ee.point.y,I.unwrappedTileID,I.getElevation);return Ae.point.x=(.5*Ae.point.x+.5)*I.width,Ae.point.y=(.5*-Ae.point.y+.5)*I.height,Ae})}(a,c);return function(M){let I=0,z=0,Y=0,ee=0;for(let Ae=0;Ae<M.length;Ae++)M[Ae].isOccluded?(Y=Ae+1,ee=0):(ee++,ee>z&&(z=ee,I=Y));return M.slice(I,I+z)}(v)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let v=1/0,M=1/0,I=-1/0,z=-1/0;for(const de of a){const Oe=new o.P(de.x+ci,de.y+ci);v=Math.min(v,Oe.x),M=Math.min(M,Oe.y),I=Math.max(I,Oe.x),z=Math.max(z,Oe.y),c.push(Oe)}const Y=this.grid.query(v,M,I,z).concat(this.ignoredGrid.query(v,M,I,z)),ee={},Ae={};for(const de of Y){const Oe=de.key;if(ee[Oe.bucketInstanceId]===void 0&&(ee[Oe.bucketInstanceId]={}),ee[Oe.bucketInstanceId][Oe.featureIndex])continue;const Be=[new o.P(de.x1,de.y1),new o.P(de.x2,de.y1),new o.P(de.x2,de.y2),new o.P(de.x1,de.y2)];o.aw(c,Be)&&(ee[Oe.bucketInstanceId][Oe.featureIndex]=!0,Ae[Oe.bucketInstanceId]===void 0&&(Ae[Oe.bucketInstanceId]=[]),Ae[Oe.bucketInstanceId].push(Oe.featureIndex))}return Ae}insertCollisionBox(a,c,v,M,I,z){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:I,collisionGroupID:z,overlapMode:c},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,c,v,M,I,z){const Y=v?this.ignoredGrid:this.grid,ee={bucketInstanceId:M,featureIndex:I,collisionGroupID:z,overlapMode:c};for(let Ae=0;Ae<a.length;Ae+=4)Y.insertCircle(ee,a[Ae],a[Ae+1],a[Ae+2])}projectAndGetPerspectiveRatio(a,c,v,M,I){if(I){let z;M?(z=[a,c,M(a,c),1],o.at(z,z,I)):(z=[a,c,0,1],hl(z,z,I));const Y=z[3];return{x:(z[0]/Y+1)/2*this.transform.width+ci,y:(-z[1]/Y+1)/2*this.transform.height+ci,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y*.5,isOccluded:!1,signedDistanceFromCamera:Y}}{const z=this.transform.projectTileCoordinates(a,c,v,M);return{x:(z.point.x+1)/2*this.transform.width+ci,y:(1-z.point.y)/2*this.transform.height+ci,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(a,c,v,M){const I=this.transform.projectTileCoordinates(a,c,v,M);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(a,c,v,M){return v<ci||a>=this.screenRightBoundary||M<ci||c>this.screenBottomBoundary}isInsideGrid(a,c,v,M){return v>=0&&a<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const a=o.ad([]);return o.L(a,a,[-100,-100,0]),a}_projectCollisionBox(a,c,v,M,I,z,Y,ee,Ae,de,Oe){let Be=1,ze=0,He=0,ft=1;const dt=a.anchorPointX+Y[0],pt=a.anchorPointY+Y[1];if(z&&!I){const cr=this.projectAndGetPerspectiveRatio(dt+1,pt,M,Ae,Oe),kn=cr.x-ee.x,Br=Math.atan((cr.y-ee.y)/kn)+(kn<0?Math.PI:0),Hr=Math.sin(Br),Xi=Math.cos(Br);Be=Xi,ze=Hr,He=-Hr,ft=Xi}else if(!z&&I){const cr=or(this.transform);Be=cr.vecEast[0],ze=cr.vecEast[1],He=cr.vecSouth[0],ft=cr.vecSouth[1]}let wt=ee.x,Tt=ee.y,Mt=c;I&&(wt=dt,Tt=pt,Mt=Math.pow(2,-(this.transform.zoom-v.overscaledZ)),Mt*=this.transform.getPitchedTextCorrection(dt,pt,M),de||(Mt*=o.ae(.5+ee.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),de&&(wt+=Be*de.x*Mt+He*de.y*Mt,Tt+=ze*de.x*Mt+ft*de.y*Mt);const kt=a.x1*Mt,Kt=a.x2*Mt,zt=(kt+Kt)/2,sn=a.y1*Mt,bn=a.y2*Mt,en=(sn+bn)/2,ln=[{offsetX:kt,offsetY:sn},{offsetX:zt,offsetY:sn},{offsetX:Kt,offsetY:sn},{offsetX:Kt,offsetY:en},{offsetX:Kt,offsetY:bn},{offsetX:zt,offsetY:bn},{offsetX:kt,offsetY:bn},{offsetX:kt,offsetY:en}];let Cn=[];for(const{offsetX:cr,offsetY:kn}of ln)Cn.push(new o.P(wt+Be*cr+He*kn,Tt+ze*cr+ft*kn));let Ar=!1;if(I){const cr=Cn.map(kn=>this.projectAndGetPerspectiveRatio(kn.x,kn.y,M,Ae,Oe));Ar=cr.some(kn=>!kn.isOccluded),Cn=cr.map(kn=>new o.P(kn.x,kn.y))}else Ar=!0;return{box:o.ax(Cn),allPointsOccluded:!Ar}}}class bo{constructor(a,c,v,M){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?c:-c))):M&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class lo{constructor(a,c,v,M,I){this.text=new bo(a?a.text:null,c,v,I),this.icon=new bo(a?a.icon:null,c,M,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Er{constructor(a,c,v){this.text=a,this.icon=c,this.skipFade=v}}class wa{constructor(a,c,v,M,I){this.bucketInstanceId=a,this.featureIndex=c,this.sourceLayerIndex=v,this.bucketIndex=M,this.tileID=I}}class qo{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const c=++this.maxGroupID;this.collisionGroups[a]={ID:c,predicate:v=>v.collisionGroupID===c}}return this.collisionGroups[a]}}function Jo(O,a,c,v,M){const{horizontalAlign:I,verticalAlign:z}=o.aE(O);return new o.P(-(I-.5)*a+v[0]*M,-(z-.5)*c+v[1]*M)}class qe{constructor(a,c,v,M,I){this.transform=a.clone(),this.terrain=c,this.collisionIndex=new oa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new qo(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const c=this.terrain;return c?(v,M)=>c.getElevation(a,v,M):null}getBucketParts(a,c,v,M){const I=v.getBucket(c),z=v.latestFeatureIndex;if(!I||!z||c.id!==I.layerIds[0])return;const Y=v.collisionBoxArray,ee=I.layers[0].layout,Ae=I.layers[0].paint,de=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Oe=v.tileSize/o.Z,Be=v.tileID.toUnwrapped(),ze=ee.get("text-rotation-alignment")==="map",He=o.az(v,1,this.transform.zoom),ft=o.aA(this.collisionIndex.transform,v,Ae.get("text-translate"),Ae.get("text-translate-anchor")),dt=o.aA(this.collisionIndex.transform,v,Ae.get("icon-translate"),Ae.get("icon-translate-anchor")),pt=dr(ze,this.transform,He);this.retainedQueryData[I.bucketInstanceId]=new wa(I.bucketInstanceId,z,I.sourceLayerIndex,I.index,v.tileID);const wt={bucket:I,layout:ee,translationText:ft,translationIcon:dt,unwrappedTileID:Be,pitchedLabelPlaneMatrix:pt,scale:de,textPixelRatio:Oe,holdingForFade:v.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:o.ak(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(M)for(const Tt of I.sortKeyRanges){const{sortKey:Mt,symbolInstanceStart:kt,symbolInstanceEnd:Kt}=Tt;a.push({sortKey:Mt,symbolInstanceStart:kt,symbolInstanceEnd:Kt,parameters:wt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:wt})}attemptAnchorPlacement(a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be,ze,He,ft,dt,pt,wt,Tt,Mt){const kt=o.aB[a.textAnchor],Kt=[a.textOffset0,a.textOffset1],zt=Jo(kt,v,M,Kt,I),sn=this.collisionIndex.placeCollisionBox(c,Be,ee,Ae,de,Y,z,dt,Oe.predicate,Tt,zt,Mt);if((!wt||this.collisionIndex.placeCollisionBox(wt,Be,ee,Ae,de,Y,z,pt,Oe.predicate,Tt,zt,Mt).placeable)&&sn.placeable){let bn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ze.crossTileID]&&this.prevPlacement.placements[ze.crossTileID]&&this.prevPlacement.placements[ze.crossTileID].text&&(bn=this.prevPlacement.variableOffsets[ze.crossTileID].anchor),ze.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ze.crossTileID]={textOffset:Kt,width:v,height:M,anchor:kt,textBoxScale:I,prevAnchor:bn},this.markUsedJustification(He,kt,ze,ft),He.allowVerticalPlacement&&(this.markUsedOrientation(He,ft,ze),this.placedOrientations[ze.crossTileID]=ft),{shift:zt,placedGlyphBoxes:sn}}}placeLayerBucketPart(a,c,v){const{bucket:M,layout:I,translationText:z,translationIcon:Y,unwrappedTileID:ee,pitchedLabelPlaneMatrix:Ae,textPixelRatio:de,holdingForFade:Oe,collisionBoxArray:Be,partiallyEvaluatedTextSize:ze,collisionGroup:He}=a.parameters,ft=I.get("text-optional"),dt=I.get("icon-optional"),pt=o.aC(I,"text-overlap","text-allow-overlap"),wt=pt==="always",Tt=o.aC(I,"icon-overlap","icon-allow-overlap"),Mt=Tt==="always",kt=I.get("text-rotation-alignment")==="map",Kt=I.get("text-pitch-alignment")==="map",zt=I.get("icon-text-fit")!=="none",sn=I.get("symbol-z-order")==="viewport-y",bn=wt&&(Mt||!M.hasIconData()||dt),en=Mt&&(wt||!M.hasTextData()||ft);!M.collisionArrays&&Be&&M.deserializeCollisionBoxes(Be);const ln=this.retainedQueryData[M.bucketInstanceId].tileID,Cn=this._getTerrainElevationFunc(ln),Ar=this.transform.getFastPathSimpleProjectionMatrix(ln),cr=(kn,Br,Hr)=>{var Xi,ts;if(c[kn.crossTileID])return;if(Oe)return void(this.placements[kn.crossTileID]=new Er(!1,!1,!1));let Ko=!1,jo=!1,Rs=!0,ho=null,ji={box:null,placeable:!1,offscreen:null,occluded:!1},aa={placeable:!1},Ta=null,Ca=null,ao=null,Vl=0,Hl=0,pA=0;Br.textFeatureIndex?Vl=Br.textFeatureIndex:kn.useRuntimeCollisionCircles&&(Vl=kn.featureIndex),Br.verticalTextFeatureIndex&&(Hl=Br.verticalTextFeatureIndex);const Ou=Br.textBox;if(Ou){const mA=ka=>{let Qs=o.al.horizontal;if(M.allowVerticalPlacement&&!ka&&this.prevPlacement){const Pl=this.prevPlacement.placedOrientations[kn.crossTileID];Pl&&(this.placedOrientations[kn.crossTileID]=Pl,Qs=Pl,this.markUsedOrientation(M,Qs,kn))}return Qs},ec=(ka,Qs)=>{if(M.allowVerticalPlacement&&kn.numVerticalGlyphVertices>0&&Br.verticalTextBox){for(const Pl of M.writingModes)if(Pl===o.al.vertical?(ji=Qs(),aa=ji):ji=ka(),ji&&ji.placeable)break}else ji=ka()},Xl=kn.textAnchorOffsetStartIndex,jc=kn.textAnchorOffsetEndIndex;if(jc===Xl){const ka=(Qs,Pl)=>{const ys=this.collisionIndex.placeCollisionBox(Qs,pt,de,ln,ee,Kt,kt,z,He.predicate,Cn,void 0,Ar);return ys&&ys.placeable&&(this.markUsedOrientation(M,Pl,kn),this.placedOrientations[kn.crossTileID]=Pl),ys};ec(()=>ka(Ou,o.al.horizontal),()=>{const Qs=Br.verticalTextBox;return M.allowVerticalPlacement&&kn.numVerticalGlyphVertices>0&&Qs?ka(Qs,o.al.vertical):{box:null,offscreen:null}}),mA(ji&&ji.placeable)}else{let ka=o.aB[(ts=(Xi=this.prevPlacement)===null||Xi===void 0?void 0:Xi.variableOffsets[kn.crossTileID])===null||ts===void 0?void 0:ts.anchor];const Qs=(ys,Cf,Bd)=>{const Od=ys.x2-ys.x1,gA=ys.y2-ys.y1,LA=kn.textBoxScale,Wc=zt&&Tt==="never"?Cf:null;let Iu=null,yA=pt==="never"?1:2,Pa="never";ka&&yA++;for(let ta=0;ta<yA;ta++){for(let Th=Xl;Th<jc;Th++){const Tu=M.textAnchorOffsets.get(Th);if(ka&&Tu.textAnchor!==ka)continue;const Id=this.attemptAnchorPlacement(Tu,ys,Od,gA,LA,kt,Kt,de,ln,ee,He,Pa,kn,M,Bd,z,Y,Wc,Cn);if(Id&&(Iu=Id.placedGlyphBoxes,Iu&&Iu.placeable))return Ko=!0,ho=Id.shift,Iu}ka?ka=null:Pa=pt}return v&&!Iu&&(Iu={box:this.collisionIndex.placeCollisionBox(Ou,"always",de,ln,ee,Kt,kt,z,He.predicate,Cn,void 0,Ar).box,offscreen:!1,placeable:!1,occluded:!1}),Iu};ec(()=>Qs(Ou,Br.iconBox,o.al.horizontal),()=>{const ys=Br.verticalTextBox;return M.allowVerticalPlacement&&(!ji||!ji.placeable)&&kn.numVerticalGlyphVertices>0&&ys?Qs(ys,Br.verticalIconBox,o.al.vertical):{box:null,occluded:!0,offscreen:null}}),ji&&(Ko=ji.placeable,Rs=ji.offscreen);const Pl=mA(ji&&ji.placeable);if(!Ko&&this.prevPlacement){const ys=this.prevPlacement.variableOffsets[kn.crossTileID];ys&&(this.variableOffsets[kn.crossTileID]=ys,this.markUsedJustification(M,ys.anchor,kn,Pl))}}}if(Ta=ji,Ko=Ta&&Ta.placeable,Rs=Ta&&Ta.offscreen,kn.useRuntimeCollisionCircles){const mA=M.text.placedSymbolArray.get(kn.centerJustifiedTextSymbolIndex),ec=o.am(M.textSizeData,ze,mA),Xl=I.get("text-padding");Ca=this.collisionIndex.placeCollisionCircles(pt,mA,M.lineVertexArray,M.glyphOffsetArray,ec,ee,Ae,v,Kt,He.predicate,kn.collisionCircleDiameter,Xl,z,Cn),Ca.circles.length&&Ca.collisionDetected&&!v&&o.w("Collisions detected, but collision boxes are not shown"),Ko=wt||Ca.circles.length>0&&!Ca.collisionDetected,Rs=Rs&&Ca.offscreen}if(Br.iconFeatureIndex&&(pA=Br.iconFeatureIndex),Br.iconBox){const mA=ec=>this.collisionIndex.placeCollisionBox(ec,Tt,de,ln,ee,Kt,kt,Y,He.predicate,Cn,zt&&ho?ho:void 0,Ar);aa&&aa.placeable&&Br.verticalIconBox?(ao=mA(Br.verticalIconBox),jo=ao.placeable):(ao=mA(Br.iconBox),jo=ao.placeable),Rs=Rs&&ao.offscreen}const FA=ft||kn.numHorizontalGlyphVertices===0&&kn.numVerticalGlyphVertices===0,au=dt||kn.numIconVertices===0;FA||au?au?FA||(jo=jo&&Ko):Ko=jo&&Ko:jo=Ko=jo&&Ko;const Zl=jo&&ao.placeable;if(Ko&&Ta.placeable&&this.collisionIndex.insertCollisionBox(Ta.box,pt,I.get("text-ignore-placement"),M.bucketInstanceId,aa&&aa.placeable&&Hl?Hl:Vl,He.ID),Zl&&this.collisionIndex.insertCollisionBox(ao.box,Tt,I.get("icon-ignore-placement"),M.bucketInstanceId,pA,He.ID),Ca&&Ko&&this.collisionIndex.insertCollisionCircles(Ca.circles,pt,I.get("text-ignore-placement"),M.bucketInstanceId,Vl,He.ID),v&&this.storeCollisionData(M.bucketInstanceId,Hr,Br,Ta,ao,Ca),kn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kn.crossTileID]=new Er((Ko||bn)&&!Ta?.occluded,(jo||en)&&!ao?.occluded,Rs||M.justReloaded),c[kn.crossTileID]=!0};if(sn){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Br=kn.length-1;Br>=0;--Br){const Hr=kn[Br];cr(M.symbolInstances.get(Hr),M.collisionArrays[Hr],Hr)}}else for(let kn=a.symbolInstanceStart;kn<a.symbolInstanceEnd;kn++)cr(M.symbolInstances.get(kn),M.collisionArrays[kn],kn);M.justReloaded=!1}storeCollisionData(a,c,v,M,I,z){if(v.textBox||v.iconBox){let Y,ee;this.collisionBoxArrays.has(a)?Y=this.collisionBoxArrays.get(a):(Y=new Map,this.collisionBoxArrays.set(a,Y)),Y.has(c)?ee=Y.get(c):(ee={text:null,icon:null},Y.set(c,ee)),v.textBox&&(ee.text=M.box),v.iconBox&&(ee.icon=I.box)}if(z){let Y=this.collisionCircleArrays[a];Y===void 0&&(Y=this.collisionCircleArrays[a]=[]);for(let ee=0;ee<z.circles.length;ee+=4)Y.push(z.circles[ee+0]-ci),Y.push(z.circles[ee+1]-ci),Y.push(z.circles[ee+2]),Y.push(z.collisionDetected?1:0)}}markUsedJustification(a,c,v,M){let I;I=M===o.al.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[o.aD(c)];const z=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const Y of z)Y>=0&&(a.text.placedSymbolArray.get(Y).crossTileID=I>=0&&Y!==I?0:v.crossTileID)}markUsedOrientation(a,c,v){const M=c===o.al.horizontal||c===o.al.horizontalOnly?c:0,I=c===o.al.vertical?c:0,z=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const Y of z)a.text.placedSymbolArray.get(Y).placedOrientation=M;v.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let v=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(a):1,I=c?c.opacities:{},z=c?c.variableOffsets:{},Y=c?c.placedOrientations:{};for(const ee in this.placements){const Ae=this.placements[ee],de=I[ee];de?(this.opacities[ee]=new lo(de,M,Ae.text,Ae.icon),v=v||Ae.text!==de.text.placed||Ae.icon!==de.icon.placed):(this.opacities[ee]=new lo(null,M,Ae.text,Ae.icon,Ae.skipFade),v=v||Ae.text||Ae.icon)}for(const ee in I){const Ae=I[ee];if(!this.opacities[ee]){const de=new lo(Ae,M,!1,!1);de.isHidden()||(this.opacities[ee]=de,v=v||Ae.text.placed||Ae.icon.placed)}}for(const ee in z)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=z[ee]);for(const ee in Y)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=Y[ee]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:a)}updateLayerOpacities(a,c){const v={};for(const M of c){const I=M.getBucket(a);I&&M.latestFeatureIndex&&a.id===I.layerIds[0]&&this.updateBucketOpacities(I,M.tileID,v,M.collisionBoxArray)}}updateBucketOpacities(a,c,v,M){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const I=a.layers[0],z=I.layout,Y=new lo(null,0,!1,!1,!0),ee=z.get("text-allow-overlap"),Ae=z.get("icon-allow-overlap"),de=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=z.get("text-rotation-alignment")==="map",Be=z.get("text-pitch-alignment")==="map",ze=z.get("icon-text-fit")!=="none",He=new lo(null,0,ee&&(Ae||!a.hasIconData()||z.get("icon-optional")),Ae&&(ee||!a.hasTextData()||z.get("text-optional")),!0);!a.collisionArrays&&M&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(M);const ft=(pt,wt,Tt)=>{for(let Mt=0;Mt<wt/4;Mt++)pt.opacityVertexArray.emplaceBack(Tt);pt.hasVisibleVertices=pt.hasVisibleVertices||Tt!==iA},dt=this.collisionBoxArrays.get(a.bucketInstanceId);for(let pt=0;pt<a.symbolInstances.length;pt++){const wt=a.symbolInstances.get(pt),{numHorizontalGlyphVertices:Tt,numVerticalGlyphVertices:Mt,crossTileID:kt}=wt;let Kt=this.opacities[kt];v[kt]?Kt=Y:Kt||(Kt=He,this.opacities[kt]=Kt),v[kt]=!0;const zt=wt.numIconVertices>0,sn=this.placedOrientations[wt.crossTileID],bn=sn===o.al.vertical,en=sn===o.al.horizontal||sn===o.al.horizontalOnly;if(Tt>0||Mt>0){const Cn=fa(Kt.text);ft(a.text,Tt,bn?iA:Cn),ft(a.text,Mt,en?iA:Cn);const Ar=Kt.text.isHidden();[wt.rightJustifiedTextSymbolIndex,wt.centerJustifiedTextSymbolIndex,wt.leftJustifiedTextSymbolIndex].forEach(Br=>{Br>=0&&(a.text.placedSymbolArray.get(Br).hidden=Ar||bn?1:0)}),wt.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(wt.verticalPlacedTextSymbolIndex).hidden=Ar||en?1:0);const cr=this.variableOffsets[wt.crossTileID];cr&&this.markUsedJustification(a,cr.anchor,wt,sn);const kn=this.placedOrientations[wt.crossTileID];kn&&(this.markUsedJustification(a,"left",wt,kn),this.markUsedOrientation(a,kn,wt))}if(zt){const Cn=fa(Kt.icon),Ar=!(ze&&wt.verticalPlacedIconSymbolIndex&&bn);wt.placedIconSymbolIndex>=0&&(ft(a.icon,wt.numIconVertices,Ar?Cn:iA),a.icon.placedSymbolArray.get(wt.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),wt.verticalPlacedIconSymbolIndex>=0&&(ft(a.icon,wt.numVerticalIconVertices,Ar?iA:Cn),a.icon.placedSymbolArray.get(wt.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}const ln=dt&&dt.has(pt)?dt.get(pt):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Cn=a.collisionArrays[pt];if(Cn){let Ar=new o.P(0,0);if(Cn.textBox||Cn.verticalTextBox){let cr=!0;if(de){const kn=this.variableOffsets[kt];kn?(Ar=Jo(kn.anchor,kn.width,kn.height,kn.textOffset,kn.textBoxScale),Oe&&Ar._rotate(Be?-this.transform.bearingInRadians:this.transform.bearingInRadians)):cr=!1}if(Cn.textBox||Cn.verticalTextBox){let kn;Cn.textBox&&(kn=bn),Cn.verticalTextBox&&(kn=en),xt(a.textCollisionBox.collisionVertexArray,Kt.text.placed,!cr||kn,ln.text,Ar.x,Ar.y)}}if(Cn.iconBox||Cn.verticalIconBox){const cr=!!(!en&&Cn.verticalIconBox);let kn;Cn.iconBox&&(kn=cr),Cn.verticalIconBox&&(kn=!cr),xt(a.iconCollisionBox.collisionVertexArray,Kt.icon.placed,kn,ln.icon,ze?Ar.x:0,ze?Ar.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,c){const v=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function xt(O,a,c,v,M,I){v&&v.length!==0||(v=[0,0,0,0]);const z=v[0]-ci,Y=v[1]-ci,ee=v[2]-ci,Ae=v[3]-ci;O.emplaceBack(a?1:0,c?1:0,M||0,I||0,z,Y),O.emplaceBack(a?1:0,c?1:0,M||0,I||0,ee,Y),O.emplaceBack(a?1:0,c?1:0,M||0,I||0,ee,Ae),O.emplaceBack(a?1:0,c?1:0,M||0,I||0,z,Ae)}const _n=Math.pow(2,25),jn=Math.pow(2,24),fn=Math.pow(2,17),gr=Math.pow(2,16),Qi=Math.pow(2,9),Io=Math.pow(2,8),fs=Math.pow(2,1);function fa(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const a=O.placed?1:0,c=Math.floor(127*O.opacity);return c*_n+a*jn+c*fn+a*gr+c*Qi+a*Io+c*fs+a}const iA=0;class vi{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,c,v,M,I){const z=this._bucketParts;for(;this._currentTileIndex<a.length;)if(c.getBucketParts(z,M,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((Y,ee)=>Y.sortKey-ee.sortKey));this._currentPartIndex<z.length;)if(c.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,I())return!0;return!1}}class zu{constructor(a,c,v,M,I,z,Y,ee){this.placement=new qe(a,c,z,Y,ee),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(a,c,v){const M=R.now(),I=()=>!this._forceFullPlacement&&R.now()-M>2;for(;this._currentPlacementIndex>=0;){const z=c[a[this._currentPlacementIndex]],Y=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=Y)&&(!z.maxzoom||z.maxzoom>Y)){if(this._inProgressLayer||(this._inProgressLayer=new vi(z)),this._inProgressLayer.continuePlacement(v[z.source],this.placement,this._showCollisionBoxes,z,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const jl=512/o.Z/2;class nl{constructor(a,c,v){this.tileID=a,this.bucketInstanceId=v,this._symbolsByKey={};const M=new Map;for(let I=0;I<c.length;I++){const z=c.get(I),Y=z.key,ee=M.get(Y);ee?ee.push(z):M.set(Y,[z])}for(const[I,z]of M){const Y={positions:z.map(ee=>({x:Math.floor(ee.anchorX*jl),y:Math.floor(ee.anchorY*jl)})),crossTileIDs:z.map(ee=>ee.crossTileID)};if(Y.positions.length>128){const ee=new o.aF(Y.positions.length,16,Uint16Array);for(const{x:Ae,y:de}of Y.positions)ee.add(Ae,de);ee.finish(),delete Y.positions,Y.index=ee}this._symbolsByKey[I]=Y}}getScaledCoordinates(a,c){const{x:v,y:M,z:I}=this.tileID.canonical,{x:z,y:Y,z:ee}=c.canonical,Ae=jl/Math.pow(2,ee-I),de=(Y*o.Z+a.anchorY)*Ae,Oe=M*o.Z*jl;return{x:Math.floor((z*o.Z+a.anchorX)*Ae-v*o.Z*jl),y:Math.floor(de-Oe)}}findMatches(a,c,v){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let I=0;I<a.length;I++){const z=a.get(I);if(z.crossTileID)continue;const Y=this._symbolsByKey[z.key];if(!Y)continue;const ee=this.getScaledCoordinates(z,c);if(Y.index){const Ae=Y.index.range(ee.x-M,ee.y-M,ee.x+M,ee.y+M).sort();for(const de of Ae){const Oe=Y.crossTileIDs[de];if(!v[Oe]){v[Oe]=!0,z.crossTileID=Oe;break}}}else if(Y.positions)for(let Ae=0;Ae<Y.positions.length;Ae++){const de=Y.positions[Ae],Oe=Y.crossTileIDs[Ae];if(Math.abs(de.x-ee.x)<=M&&Math.abs(de.y-ee.y)<=M&&!v[Oe]){v[Oe]=!0,z.crossTileID=Oe;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Ua{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class JA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const c=Math.round((a-this.lng)/360);if(c!==0)for(const v in this.indexes){const M=this.indexes[v],I={};for(const z in M){const Y=M[z];Y.tileID=Y.tileID.unwrapTo(Y.tileID.wrap+c),I[Y.tileID.key]=Y}this.indexes[v]=I}this.lng=a}addBucket(a,c,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let I=0;I<c.symbolInstances.length;I++)c.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const M=this.usedCrossTileIDs[a.overscaledZ];for(const I in this.indexes){const z=this.indexes[I];if(Number(I)>a.overscaledZ)for(const Y in z){const ee=z[Y];ee.tileID.isChildOf(a)&&ee.findMatches(c.symbolInstances,a,M)}else{const Y=z[a.scaledTo(Number(I)).key];Y&&Y.findMatches(c.symbolInstances,a,M)}}for(let I=0;I<c.symbolInstances.length;I++){const z=c.symbolInstances.get(I);z.crossTileID||(z.crossTileID=v.generate(),M[z.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new nl(a,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(a,c){for(const v of c.getCrossTileIDsLists())for(const M of v)delete this.usedCrossTileIDs[a][M]}removeStaleBuckets(a){let c=!1;for(const v in this.indexes){const M=this.indexes[v];for(const I in M)a[M[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,M[I]),delete M[I],c=!0)}return c}}class Sa{constructor(){this.layerIndexes={},this.crossTileIDs=new Ua,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,c,v){let M=this.layerIndexes[a.id];M===void 0&&(M=this.layerIndexes[a.id]=new JA);let I=!1;const z={};M.handleWrapJump(v);for(const Y of c){const ee=Y.getBucket(a);ee&&a.id===ee.layerIds[0]&&(ee.bucketInstanceId||(ee.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(Y.tileID,ee,this.crossTileIDs)&&(I=!0),z[ee.bucketInstanceId]=!0)}return M.removeStaleBuckets(z)&&(I=!0),I}pruneUnusedLayers(a){const c={};a.forEach(v=>{c[v]=!0});for(const v in this.layerIndexes)c[v]||delete this.layerIndexes[v]}}var bi="void main() {fragColor=vec4(1.0);}";const Ao={prelude:Oi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Oi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Oi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Oi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Oi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Oi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Oi(bi,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Oi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Oi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Oi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Oi(bi,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Oi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Oi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Oi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Oi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Oi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Oi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Oi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Oi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Oi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Oi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Oi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Oi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Oi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Oi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Oi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Oi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Oi(O,a){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=a.match(/in ([\w]+) ([\w]+)/g),M=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=I?I.concat(M):M,Y={};return{fragmentSource:O=O.replace(c,(ee,Ae,de,Oe,Be)=>(Y[Be]=!0,Ae==="define"?`
#ifndef HAS_UNIFORM_u_${Be}
in ${de} ${Oe} ${Be};
#else
uniform ${de} ${Oe} u_${Be};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Be}
    ${de} ${Oe} ${Be} = u_${Be};
#endif
`)),vertexSource:a=a.replace(c,(ee,Ae,de,Oe,Be)=>{const ze=Oe==="float"?"vec2":"vec4",He=Be.match(/color/)?"color":ze;return Y[Be]?Ae==="define"?`
#ifndef HAS_UNIFORM_u_${Be}
uniform lowp float u_${Be}_t;
in ${de} ${ze} a_${Be};
out ${de} ${Oe} ${Be};
#else
uniform ${de} ${Oe} u_${Be};
#endif
`:He==="vec4"?`
#ifndef HAS_UNIFORM_u_${Be}
    ${Be} = a_${Be};
#else
    ${de} ${Oe} ${Be} = u_${Be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Be}
    ${Be} = unpack_mix_${He}(a_${Be}, u_${Be}_t);
#else
    ${de} ${Oe} ${Be} = u_${Be};
#endif
`:Ae==="define"?`
#ifndef HAS_UNIFORM_u_${Be}
uniform lowp float u_${Be}_t;
in ${de} ${ze} a_${Be};
#else
uniform ${de} ${Oe} u_${Be};
#endif
`:He==="vec4"?`
#ifndef HAS_UNIFORM_u_${Be}
    ${de} ${Oe} ${Be} = a_${Be};
#else
    ${de} ${Oe} ${Be} = u_${Be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Be}
    ${de} ${Oe} ${Be} = unpack_mix_${He}(a_${Be}, u_${Be}_t);
#else
    ${de} ${Oe} ${Be} = u_${Be};
#endif
`}),staticAttributes:v,staticUniforms:z}}class xl{constructor(a,c,v){this.vertexBuffer=a,this.indexBuffer=c,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Oo=o.aG([{name:"a_pos",type:"Int16",components:2}]);const Wl="#define PROJECTION_MERCATOR",Di="mercator";class oA{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Di}get shaderDefine(){return Wl}get shaderPreludeCode(){return Ao.projectionMercator}get vertexShaderPreludeCode(){return Ao.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,c,v,M,I){if(this._cachedMesh)return this._cachedMesh;const z=new o.aI;z.emplaceBack(0,0),z.emplaceBack(o.Z,0),z.emplaceBack(0,o.Z),z.emplaceBack(o.Z,o.Z);const Y=a.createVertexBuffer(z,Oo.members),ee=o.aJ.simpleSegment(0,0,4,2),Ae=new o.aK;Ae.emplaceBack(1,0,2),Ae.emplaceBack(1,2,3);const de=a.createIndexBuffer(Ae);return this._cachedMesh=new xl(Y,de,ee),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class sA{constructor(a=0,c=0,v=0,M=0){if(isNaN(a)||a<0||isNaN(c)||c<0||isNaN(v)||v<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=c,this.left=v,this.right=M}interpolate(a,c,v){return c.top!=null&&a.top!=null&&(this.top=o.B.number(a.top,c.top,v)),c.bottom!=null&&a.bottom!=null&&(this.bottom=o.B.number(a.bottom,c.bottom,v)),c.left!=null&&a.left!=null&&(this.left=o.B.number(a.left,c.left,v)),c.right!=null&&a.right!=null&&(this.right=o.B.number(a.right,c.right,v)),this}getCenter(a,c){const v=o.ae((this.left+a-this.right)/2,0,a),M=o.ae((this.top+c-this.bottom)/2,0,c);return new o.P(v,M)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new sA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function za(O,a){if(!O.renderWorldCopies||O.lngRange)return;const c=a.lng-O.center.lng;a.lng+=c>180?-360:c<-180?360:0}function Ni(O){return Math.max(0,Math.floor(O))}class uo{constructor(a,c,v,M,I,z){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=c||0,this._maxZoom=v||22,this._minPitch=M??0,this._maxPitch=I??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ni(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new sA,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,c,v){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Ni(this._zoom),this._scale=o.ac(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new sA(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!v&&a.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){const c=o.aL(a,-180,180)*Math.PI/180;var v,M,I,z,Y,ee,Ae,de,Oe;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=C(),v=this._rotationMatrix,I=-this._bearingInRadians,z=(M=this._rotationMatrix)[0],Y=M[1],ee=M[2],Ae=M[3],de=Math.sin(I),Oe=Math.cos(I),v[0]=z*Oe+ee*de,v[1]=Y*Oe+Ae*de,v[2]=z*-de+ee*Oe,v[3]=Y*-de+Ae*Oe)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){const c=o.ae(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){const c=a/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(a){a=o.ae(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ab(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){const c=this.getConstrained(this._center,a).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,c){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,c,v){this._unmodified=!1,this._edgeInsets.interpolate(a,c,v),this._constrain(),this._calcMatrices()}resize(a,c,v=!0){this._width=a,this._height=c,v&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Et([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.af])}getConstrained(a,c){return this._callbacks.getConstrained(a,c)}getCameraQueryGeometry(a,c){if(c.length===1)return[c[0],a];{let v=a.x,M=a.y,I=a.x,z=a.y;for(const Y of c)v=Math.min(v,Y.x),M=Math.min(M,Y.y),I=Math.max(I,Y.x),z=Math.max(z,Y.y);return[new o.P(v,M),new o.P(I,M),new o.P(I,z),new o.P(v,z),new o.P(v,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:c,zoom:v}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(v),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ad(new Float64Array(16));o.M(a,a,[this._width/2,-this._height/2,1]),o.L(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ad(new Float64Array(16)),o.M(a,a,[1,-1,1]),o.L(a,a,[-1,-1,0]),o.M(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,c,v,M){const I=v!==void 0?v:this.bearing,z=M=M!==void 0?M:this.pitch,Y=o.$.fromLngLat(a,c),ee=-Math.cos(o.ab(z)),Ae=Math.sin(o.ab(z)),de=Ae*Math.sin(o.ab(I)),Oe=-Ae*Math.cos(o.ab(I));let Be=this.elevation;const ze=c-Be;let He;ee*ze>=0||Math.abs(ee)<.1?(He=1e4,Be=c+He*ee):He=-ze/ee;let ft,dt,pt=o.aN(1,Y.y),wt=0;do{if(wt+=1,wt>10)break;dt=He/pt,ft=new o.$(Y.x+de*dt,Y.y+Oe*dt),pt=1/ft.meterInMercatorCoordinateUnits()}while(Math.abs(He-dt*pt)>1e-12);return{center:ft.toLngLat(),elevation:Be,zoom:o.ah(this.height/2/Math.tan(this.fovInRadians/2)/dt/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;const c=o.ag(1,this.center.lat)*this.worldSize,v=this.cameraToCenterDistance/c,M=o.$.fromLngLat(this.center,this.elevation),I=ve(this.center,this.elevation,this.pitch,this.bearing,v);this._elevation=a;const z=this.calculateCenterFromCameraLngLatAlt(I.toLngLat(),o.aN(I.z,M.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const a=o.ag(1,this.center.lat)*this.worldSize;return ve(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];const c=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/c,a.canonical.y/c,1/c/o.Z,1/c/o.Z]}}class $o{constructor(a,c){this.min=a,this.max=c,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(a){const c=[a%2==0,a<2],v=o.aQ(this.min),M=o.aQ(this.max);for(let I=0;I<c.length;I++)v[I]=c[I]?this.min[I]:this.center[I],M[I]=c[I]?this.center[I]:this.max[I];return M[2]=this.max[2],new $o(v,M)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let c=!0;for(let v=0;v<a.planes.length;v++){const M=this.intersectsPlane(a.planes[v]);if(M===0)return 0;M===1&&(c=!1)}return c?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let c=a[3],v=a[3];for(let M=0;M<3;M++)a[M]>0?(c+=a[M]*this.min[M],v+=a[M]*this.max[M]):(v+=a[M]*this.min[M],c+=a[M]*this.max[M]);return c>=0?2:v<0?0:1}}class Vo{distanceToTile2d(a,c,v,M){const I=M.distanceX([a,c]),z=M.distanceY([a,c]);return Math.hypot(I,z)}getWrap(a,c,v){return v}getTileAABB(a,c,v,M){var I,z;let Y=v,ee=v;if(M.terrain){const de=new o.Y(a.z,c,a.z,a.x,a.y),Oe=M.terrain.getMinMaxElevation(de);Y=(I=Oe.minElevation)!==null&&I!==void 0?I:v,ee=(z=Oe.maxElevation)!==null&&z!==void 0?z:v}const Ae=1<<a.z;return new $o([c+a.x/Ae,a.y/Ae,Y],[c+(a.x+1)/Ae,(a.y+1)/Ae,ee])}allowVariableZoom(a,c){const v=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,M=o.ae(78.5-v/2,0,60);return!!c.terrain||a.pitch>M}allowWorldCopies(){return!0}recalculateCache(){}}class Hi{constructor(a,c,v){this.points=a,this.planes=c,this.aabb=v}static fromInvProjectionMatrix(a,c=1,v=0){const M=Math.pow(2,v),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Ae=>{const de=1/(Ae=o.at([],Ae,a))[3]/c*M;return o.aR(Ae,Ae,[de,de,1/Ae[3],de])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Ae=>{const de=o.aS([],I[Ae[0]],I[Ae[1]]),Oe=o.aS([],I[Ae[2]],I[Ae[1]]),Be=o.aT([],o.aU([],de,Oe)),ze=-o.aV(Be,I[Ae[1]]);return Be.concat(ze)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ee=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Ae of I)for(let de=0;de<3;de++)Y[de]=Math.min(Y[de],Ae[de]),ee[de]=Math.max(ee[de],Ae[de]);return new Hi(I,z,new $o(Y,ee))}}class Ea{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,v){return this._helper.interpolatePadding(a,c,v)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,v=!0){this._helper.resize(a,c,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,c){}constructor(a,c,v,M,I){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new uo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,Y)=>this.getConstrained(z,Y)},a,c,v,M,I),this._coveringTilesDetailsProvider=new Vo}clone(){const a=new Ea;return a.apply(this),a}apply(a,c,v){this._helper.apply(a,c,v)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){const c=[new o.aW(0,a)];if(this._helper._renderWorldCopies){const v=this.screenPointToMercatorCoordinate(new o.P(0,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),Y=Math.floor(Math.min(v.x,M.x,I.x,z.x)),ee=Math.floor(Math.max(v.x,M.x,I.x,z.x)),Ae=1;for(let de=Y-Ae;de<=ee+Ae;de++)de!==0&&c.push(new o.aW(de,a))}return c}getCameraFrustum(){return Hi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){const c=this.screenPointToLocation(this.centerPoint,a),v=a?a.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(v)}setLocationAtPoint(a,c){const v=o.ag(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,v),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,v),z=o.$.fromLngLat(a),Y=new o.$(z.x-(M.x-I.x),z.y-(M.y-I.y));this.setCenter(Y?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,c){return c?this.coordinatePoint(o.$.fromLngLat(a),c.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(a))}screenPointToLocation(a,c){var v;return(v=this.screenPointToMercatorCoordinate(a,c))===null||v===void 0?void 0:v.toLngLat()}screenPointToMercatorCoordinate(a,c){if(c){const v=c.pointCoordinate(a);if(v!=null)return v}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,c){const v=c||0,M=[a.x,a.y,0,1],I=[a.x,a.y,1,1];o.at(M,M,this._pixelMatrixInverse),o.at(I,I,this._pixelMatrixInverse);const z=M[3],Y=I[3],ee=M[1]/z,Ae=I[1]/Y,de=M[2]/z,Oe=I[2]/Y,Be=de===Oe?0:(v-de)/(Oe-de);return new o.$(o.B.number(M[0]/z,I[0]/Y,Be)/this.worldSize,o.B.number(ee,Ae,Be)/this.worldSize,v)}coordinatePoint(a,c=0,v=this._pixelMatrix){const M=[a.x*this.worldSize,a.y*this.worldSize,c,1];return o.at(M,M,v),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const a=Math.max(0,this._helper._height/2-Xe(this));return new Et().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,c){return c?c.pointCoordinate(a)!=null:a.y>this.height/2-Xe(this)}calculatePosMatrix(a,c=!1,v){var M;const I=(M=a.key)!==null&&M!==void 0?M:o.aX(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),z=c?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(I)){const Ae=z.get(I);return v?Ae.f32:Ae.f64}const Y=ae(a,this.worldSize);o.N(Y,c?this._alignedProjMatrix:this._viewProjMatrix,Y);const ee={f64:Y,f32:new Float32Array(Y)};return z.set(I,ee),v?ee.f32:ee.f64}calculateFogMatrix(a){const c=a.key,v=this._fogMatrixCacheF32;if(v.has(c))return v.get(c);const M=ae(a,this.worldSize);return o.N(M,this._fogMatrix,M),v.set(c,new Float32Array(M)),v.get(c)}getConstrained(a,c){c=o.ae(+c,this.minZoom,this.maxZoom);const v={center:new o.Q(a.lng,a.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const I=this.tileSize*o.ac(v.zoom);let z=0,Y=I,ee=0,Ae=I,de=0,Oe=0;const{x:Be,y:ze}=this.size;if(this._helper._latRange){const Tt=this._helper._latRange;z=o.S(Tt[1])*I,Y=o.S(Tt[0])*I,Y-z<ze&&(de=ze/(Y-z))}M&&(ee=o.aL(o.U(M[0])*I,0,I),Ae=o.aL(o.U(M[1])*I,0,I),Ae<ee&&(Ae+=I),Ae-ee<Be&&(Oe=Be/(Ae-ee)));const{x:He,y:ft}=Jt(I,a);let dt,pt;const wt=Math.max(Oe||0,de||0);if(wt){const Tt=new o.P(Oe?(Ae+ee)/2:He,de?(Y+z)/2:ft);return v.center=ir(I,Tt).wrap(),v.zoom+=o.ah(wt),v}if(this._helper._latRange){const Tt=ze/2;ft-Tt<z&&(pt=z+Tt),ft+Tt>Y&&(pt=Y-Tt)}if(M){const Tt=(ee+Ae)/2;let Mt=He;this._helper._renderWorldCopies&&(Mt=o.aL(He,Tt-I/2,Tt+I/2));const kt=Be/2;Mt-kt<ee&&(dt=ee+kt),Mt+kt>Ae&&(dt=Ae-kt)}if(dt!==void 0||pt!==void 0){const Tt=new o.P(dt??He,pt??ft);v.center=ir(I,Tt).wrap()}return v}calculateCenterFromCameraLngLatAlt(a,c,v,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,v,M)}_calculateNearFarZIfNeeded(a,c,v){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=a-M*this._helper._pixelPerMeter/Math.cos(c),z=M<0?I:a,Y=Math.PI/2+this.pitchInRadians,ee=o.ab(this.fov)*(Math.abs(Math.cos(o.ab(this.roll)))*this.height+Math.abs(Math.sin(o.ab(this.roll)))*this.width)/this.height*(.5+v.y/this.height),Ae=Math.sin(ee)*z/Math.sin(o.ae(Math.PI-Y-ee,.01,Math.PI-.01)),de=Xe(this),Oe=Math.atan(de/this._helper.cameraToCenterDistance),Be=o.ab(.75),ze=Oe>Be?2*Oe*(.5+v.y/(2*de)):Be,He=Math.sin(ze)*z/Math.sin(o.ae(Math.PI-Y-ze,.01,Math.PI-.01)),ft=Math.min(Ae,He);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*ft+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const a=this.centerOffset,c=Jt(this.worldSize,this.center),v=c.x,M=c.y;this._helper._pixelPerMeter=o.ag(1,this.center.lat)*this.worldSize;const I=o.ab(Math.min(this.pitch,Yt)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let Y;this._calculateNearFarZIfNeeded(z,I,a),Y=new Float64Array(16),o.aY(Y,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,Y),Y[8]=2*-a.x/this._helper._width,Y[9]=2*a.y/this._helper._height,this._projectionMatrix=o.aZ(Y),o.M(Y,Y,[1,-1,1]),o.L(Y,Y,[0,0,-this._helper.cameraToCenterDistance]),o.a_(Y,Y,-this.rollInRadians),o.a$(Y,Y,this.pitchInRadians),o.a_(Y,Y,-this.bearingInRadians),o.L(Y,Y,[-v,-M,0]),this._mercatorMatrix=o.M([],Y,[this.worldSize,this.worldSize,this.worldSize]),o.M(Y,Y,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y),o.L(Y,Y,[0,0,-this.elevation]),this._viewProjMatrix=Y,this._invViewProjMatrix=o.an([],Y);const ee=[0,0,-1,1];o.at(ee,ee,this._invViewProjMatrix),this._cameraPosition=[ee[0]/ee[3],ee[1]/ee[3],ee[2]/ee[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-v,-M,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y);const Ae=this._helper._width%2/2,de=this._helper._height%2/2,Oe=Math.cos(this.bearingInRadians),Be=Math.sin(-this.bearingInRadians),ze=v-Math.round(v)+Oe*Ae+Be*de,He=M-Math.round(M)+Oe*de+Be*Ae,ft=new Float64Array(Y);if(o.L(ft,ft,[ze>.5?ze-1:ze,He>.5?He-1:He,0]),this._alignedProjMatrix=ft,Y=o.an(new Float64Array(16),this._pixelMatrix),!Y)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Y,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const a=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const a=o.ag(1,this.center.lat)*this.worldSize;return ve(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,c){const v=o.$.fromLngLat(a),M=[v.x*this.worldSize,v.y*this.worldSize,c,1];return o.at(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(a){const{overscaledTileID:c,aligned:v,applyTerrainMatrix:M}=a,I=this._helper.getMercatorTileCoordinates(c),z=c?this.calculatePosMatrix(c,v,!0):null;let Y;return Y=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:z||o.b0(),{mainMatrix:Y,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Y}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,c,v){return 1}transformLightDirection(a){return o.aQ(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,c,v,M){const I=this.calculatePosMatrix(v);let z;M?(z=[a,c,M(a,c),1],o.at(z,z,I)):(z=[a,c,0,1],hl(z,z,I));const Y=z[3];return{point:new o.P(z[0]/Y,z[1]/Y),signedDistanceFromCamera:Y,isOccluded:!1}}populateCache(a){for(const c of a)this.calculatePosMatrix(c)}getMatrixForModel(a,c){const v=o.$.fromLngLat(a,c),M=v.meterInMercatorCoordinateUnits(),I=o.b1();return o.L(I,I,[v.x,v.y,v.z]),o.a_(I,I,Math.PI),o.a$(I,I,Math.PI/2),o.M(I,I,[-M,M,M]),I}getProjectionDataForCustomLayer(a=!0){const c=new o.Y(0,0,0,0,0),v=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:a}),M=ae(c,this.worldSize);o.N(M,this._viewProjMatrix,M),v.tileMercatorCoords=[0,0,1,1];const I=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],z=o.b2();return o.M(z,M,I),v.fallbackMatrix=z,v.mainMatrix=z,v}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function pa(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ss(O){if(O.useSlerp)if(O.k<1){const a=o.b3(O.startEulerAngles.roll,O.startEulerAngles.pitch,O.startEulerAngles.bearing),c=o.b3(O.endEulerAngles.roll,O.endEulerAngles.pitch,O.endEulerAngles.bearing),v=new Float64Array(4);o.b4(v,a,c,O.k);const M=o.b5(v);O.tr.setRoll(M.roll),O.tr.setPitch(M.pitch),O.tr.setBearing(M.bearing)}else O.tr.setRoll(O.endEulerAngles.roll),O.tr.setPitch(O.endEulerAngles.pitch),O.tr.setBearing(O.endEulerAngles.bearing);else O.tr.setRoll(o.B.number(O.startEulerAngles.roll,O.endEulerAngles.roll,O.k)),O.tr.setPitch(o.B.number(O.startEulerAngles.pitch,O.endEulerAngles.pitch,O.k)),O.tr.setBearing(o.B.number(O.startEulerAngles.bearing,O.endEulerAngles.bearing,O.k))}function sa(O,a,c,v,M){const I=M.padding,z=Jt(M.worldSize,c.getNorthWest()),Y=Jt(M.worldSize,c.getNorthEast()),ee=Jt(M.worldSize,c.getSouthEast()),Ae=Jt(M.worldSize,c.getSouthWest()),de=o.ab(-v),Oe=z.rotate(de),Be=Y.rotate(de),ze=ee.rotate(de),He=Ae.rotate(de),ft=new o.P(Math.max(Oe.x,Be.x,He.x,ze.x),Math.max(Oe.y,Be.y,He.y,ze.y)),dt=new o.P(Math.min(Oe.x,Be.x,He.x,ze.x),Math.min(Oe.y,Be.y,He.y,ze.y)),pt=ft.sub(dt),wt=(M.width-(I.left+I.right+a.left+a.right))/pt.x,Tt=(M.height-(I.top+I.bottom+a.top+a.bottom))/pt.y;if(Tt<0||wt<0)return void pa();const Mt=Math.min(o.ah(M.scale*Math.min(wt,Tt)),O.maxZoom),kt=o.P.convert(O.offset),Kt=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ab(v)),zt=kt.add(Kt).mult(M.scale/o.ac(Mt));return{center:ir(M.worldSize,z.add(ee).div(2).sub(zt)),zoom:Mt,bearing:v}}class EA{get useGlobeControls(){return!1}handlePanInertia(a,c){return{easingOffset:a,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(a,c){a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta),a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta)}handleMapControlsPan(a,c,v){a.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(v,a.around)}cameraForBoxAndBearing(a,c,v,M,I){return sa(a,c,v,M,I)}handleJumpToCenterZoom(a,c){a.zoom!==(c.zoom!==void 0?+c.zoom:a.zoom)&&a.setZoom(+c.zoom),c.center!==void 0&&a.setCenter(o.Q.convert(c.center))}handleEaseTo(a,c){const v=a.zoom,M=a.padding,I={roll:a.roll,pitch:a.pitch,bearing:a.bearing},z={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},Y=c.zoom!==void 0,ee=!a.isPaddingEqual(c.padding);let Ae=!1;const de=Y?+c.zoom:a.zoom;let Oe=a.centerPoint.add(c.offsetAsPoint);const Be=a.screenPointToLocation(Oe),{center:ze,zoom:He}=a.getConstrained(o.Q.convert(c.center||Be),de??v);za(a,ze);const ft=Jt(a.worldSize,Be),dt=Jt(a.worldSize,ze).sub(ft),pt=o.ac(He-v);return Ae=He!==v,{easeFunc:wt=>{if(Ae&&a.setZoom(o.B.number(v,He,wt)),o.b6(I,z)||Ss({startEulerAngles:I,endEulerAngles:z,tr:a,k:wt,useSlerp:I.roll!=z.roll}),ee&&(a.interpolatePadding(M,c.padding,wt),Oe=a.centerPoint.add(c.offsetAsPoint)),c.around)a.setLocationAtPoint(c.around,c.aroundPoint);else{const Tt=o.ac(a.zoom-v),Mt=He>v?Math.min(2,pt):Math.max(.5,pt),kt=Math.pow(Mt,1-wt),Kt=ir(a.worldSize,ft.add(dt.mult(wt*kt)).mult(Tt));a.setLocationAtPoint(a.renderWorldCopies?Kt.wrap():Kt,Oe)}},isZooming:Ae,elevationCenter:ze}}handleFlyTo(a,c){const v=c.zoom!==void 0,M=a.zoom,I=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),v?+c.zoom:M),z=I.center,Y=I.zoom;za(a,z);const ee=Jt(a.worldSize,c.locationAtOffset),Ae=Jt(a.worldSize,z).sub(ee),de=Ae.mag(),Oe=o.ac(Y-M);let Be;if(c.minZoom!==void 0){const ze=Math.min(+c.minZoom,M,Y),He=a.getConstrained(z,ze).zoom;Be=o.ac(He-M)}return{easeFunc:(ze,He,ft,dt)=>{a.setZoom(ze===1?Y:M+o.ah(He));const pt=ze===1?z:ir(a.worldSize,ee.add(Ae.mult(ft)).mult(He));a.setLocationAtPoint(a.renderWorldCopies?pt.wrap():pt,dt)},scaleOfZoom:Oe,targetCenter:z,scaleOfMinZoom:Be,pixelPathLength:de}}}class Ii{constructor(a,c,v){this.blendFunction=a,this.blendColor=c,this.mask=v}}Ii.Replace=[1,0],Ii.disabled=new Ii(Ii.Replace,o.b7.transparent,[!1,!1,!1,!1]),Ii.unblended=new Ii(Ii.Replace,o.b7.transparent,[!0,!0,!0,!0]),Ii.alphaBlended=new Ii([1,771],o.b7.transparent,[!0,!0,!0,!0]);const Ho=2305;class Gi{constructor(a,c,v){this.enable=a,this.mode=c,this.frontFace=v}}Gi.disabled=new Gi(!1,1029,Ho),Gi.backCCW=new Gi(!0,1029,Ho),Gi.frontCCW=new Gi(!0,1028,Ho);class Sr{constructor(a,c,v){this.func=a,this.mask=c,this.range=v}}Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(519,Sr.ReadOnly,[0,1]);const to=7680;class J{constructor(a,c,v,M,I,z){this.test=a,this.ref=c,this.mask=v,this.fail=M,this.depthFail=I,this.pass=z}}J.disabled=new J({func:519,mask:0},0,0,to,to,to);const Ee=new WeakMap;function st(O){var a;if(Ee.has(O))return Ee.get(O);{const c=(a=O.getParameter(O.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Ee.set(O,c),c}}class Ht{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;const c=a.context,v=c.gl;this._texFormat=v.RGBA,this._texType=v.UNSIGNED_BYTE;const M=new o.aI;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const I=new o.aK;I.emplaceBack(0,1,2),this._fullscreenTriangle=new xl(c.createVertexBuffer(M,Oo.members),c.createIndexBuffer(I),o.aJ.simpleSegment(0,0,M.length,I.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(v.TEXTURE1);const z=v.createTexture();v.bindTexture(v.TEXTURE_2D,z),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texImage2D(v.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),st(v)&&(this._pbo=v.createBuffer(),v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.bufferData(v.PIXEL_PACK_BUFFER,4,v.STREAM_READ),v.bindBuffer(v.PIXEL_PACK_BUFFER,null))}destroy(){const a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,c){const v=this._updateCount;return this._readbackQueue?v>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():v>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const a=this._cachedRenderContext.context,c=a.gl;a.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,c){const v=this._cachedRenderContext.context,M=v.gl;if(this._bindFramebuffer(),v.viewport.set([0,0,this._texWidth,this._texHeight]),v.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(v,M.TRIANGLES,Sr.disabled,J.disabled,Ii.unblended,Gi.disabled,((I,z)=>({u_input:I,u_output_expected:z}))(a,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&st(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const I=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&st(a)){const c=a.clientWaitSync(this._readbackQueue.sync,0,0);if(c===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ht._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let c=0;return c+=a[0]/256,c+=a[1]/65536,c+=a[2]/16777216,a[3]<127&&(c=-c),c/128}}const kr=o.Z/128;function Qn(O,a){const c=O.granularity!==void 0?Math.max(O.granularity,1):1,v=c+(O.generateBorders?2:0),M=c+(O.extendToNorthPole||O.generateBorders?1:0)+(O.extendToSouthPole||O.generateBorders?1:0),I=v+1,z=M+1,Y=O.generateBorders?-1:0,ee=O.generateBorders||O.extendToNorthPole?-1:0,Ae=c+(O.generateBorders?1:0),de=c+(O.generateBorders||O.extendToSouthPole?1:0),Oe=I*z,Be=v*M*6,ze=I*z>65536;if(ze&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const He=ze||a==="32bit",ft=new Int16Array(2*Oe);let dt=0;for(let Tt=ee;Tt<=de;Tt++)for(let Mt=Y;Mt<=Ae;Mt++){let kt=Mt/c*o.Z;Mt===-1&&(kt=-64),Mt===c+1&&(kt=o.Z+kr);let Kt=Tt/c*o.Z;Tt===-1&&(Kt=O.extendToNorthPole?o.b9:-64),Tt===c+1&&(Kt=O.extendToSouthPole?o.ba:o.Z+kr),ft[dt++]=kt,ft[dt++]=Kt}const pt=He?new Uint32Array(Be):new Uint16Array(Be);let wt=0;for(let Tt=0;Tt<M;Tt++)for(let Mt=0;Mt<v;Mt++){const kt=Mt+1+Tt*I,Kt=Mt+(Tt+1)*I,zt=Mt+1+(Tt+1)*I;pt[wt++]=Mt+Tt*I,pt[wt++]=Kt,pt[wt++]=kt,pt[wt++]=kt,pt[wt++]=Kt,pt[wt++]=zt}return{vertices:ft.buffer.slice(0),indices:pt.buffer.slice(0),uses32bitIndices:He}}const Zr=new o.aH({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class Ai{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ao.projectionGlobe}get vertexShaderPreludeCode(){return Ao.projectionMercator.vertexSource}get subdivisionGranularity(){return Zr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Ht(a));const c=o.S(this._errorQueryLatitudeDegrees),v=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,v),I=R.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=I);const z=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(z))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,c,v,M,I){const z=(I==="stencil"?Zr.stencil:Zr.tile).getGranularityForZoomLevel(c.z);return this._getMesh(a,{granularity:z,generateBorders:v,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(a,c){const v=this._getMeshKey(c);if(v in this._tileMeshCache)return this._tileMeshCache[v];const M=function(I,z){const Y=Qn(z,"16bit"),ee=o.aI.deserialize({arrayBuffer:Y.vertices,length:Y.vertices.byteLength/2/2}),Ae=o.aK.deserialize({arrayBuffer:Y.indices,length:Y.indices.byteLength/2/3});return new xl(I.createVertexBuffer(ee,Oo.members),I.createIndexBuffer(Ae),o.aJ.simpleSegment(0,0,ee.length,Ae.length))}(a,c);return this._tileMeshCache[v]=M,M}recalculate(a){}hasTransition(){const a=R.now();let c=!1;return c=c||(a-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}const Rr=new o.r({type:new o.D(o.v.projection.type)});class ni extends o.E{constructor(a){super(),this._transitionable=new o.T(Rr),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new oA,this._verticalPerspectiveProjection=new Ai}get transitionState(){const a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.be){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,c,v,M,I){return this.currentProjection.getMeshFromTileID(a,c,v,M,I)}setProjection(a){this._transitionable.setValue("type",a?.type||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function Yi(O){const a=fi(O.worldSize,O.center.lat);return 2*Math.PI*a}function xo(O,a,c,v,M){const I=1/(1<<M),z=a/o.Z*I+v*I,Y=o.bg((O/o.Z*I+c*I)*Math.PI*2+Math.PI,2*Math.PI),ee=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,Ae=Math.cos(ee),de=new Float64Array(3);return de[0]=Math.sin(Y)*Ae,de[1]=Math.sin(ee),de[2]=Math.cos(Y)*Ae,de}function si(O){return function(a,c){const v=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(a)*v,M[1]=Math.sin(c),M[2]=Math.cos(a)*v,M}(O.lng*Math.PI/180,O.lat*Math.PI/180)}function fi(O,a){return O/(2*Math.PI)/Math.cos(a*Math.PI/180)}function co(O){const a=Math.asin(O[1])/Math.PI*180,c=Math.sqrt(O[0]*O[0]+O[2]*O[2]);if(c>1e-6){const v=O[0]/c,M=Math.acos(O[2]/c),I=(v>0?M:-M)/Math.PI*180;return new o.Q(o.aL(I,-180,180),a)}return new o.Q(0,a)}function Ki(O){return Math.cos(O*Math.PI/180)}function Fi(O,a){const c=Ki(O),v=Ki(a);return o.ah(v/c)}function Ns(O,a){const c=O.rotate(a.bearingInRadians),v=a.zoom+Fi(a.center.lat,0),M=o.bc(1/Ki(a.center.lat),1/Ki(Math.min(Math.abs(a.center.lat),60)),o.bf(v,7,3,0,1)),I=360/Yi({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.Q(a.center.lng-c.x*I*M,o.ae(a.center.lat+c.y*I,-85.051129,o.af))}function Na(O){const a=.5*O,c=Math.sin(a),v=Math.cos(a);return Math.log(c+v)-Math.log(v-c)}function eu(O,a,c,v){const M=O.lat+c*v;if(Math.abs(c)>1){const I=(Math.sign(O.lat+c)!==Math.sign(O.lat)?-Math.abs(O.lat):Math.abs(O.lat))*Math.PI/180,z=Math.abs(O.lat+c)*Math.PI/180,Y=Na(I+v*(z-I)),ee=Na(I),Ae=Na(z);return new o.Q(O.lng+a*((Y-ee)/(Ae-ee)),M)}return new o.Q(O.lng+a*v,M)}class Gs{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=a}recalculateCache(){if(!this._hadAnyChanges)return;const a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(a,c,v,M){const I=`${a.z}_${a.x}_${a.y}`,z=this._cache.get(I);if(z)return z;const Y=this._cachePrevious.get(I);if(Y)return this._cache.set(I,Y),Y;const ee=this._aabbFactory(a,c,v,M);return this._cache.set(I,ee),this._hadAnyChanges=!0,ee}}function dl(O,a,c){const v=O-a;return v<0?-v:Math.max(0,v-c)}function Ga(O,a,c,v,M){const I=O-c;let z;return z=I<0?Math.min(-I,1+I-M):I>1?Math.min(Math.max(I-M,0),1-I):0,Math.max(z,dl(a,v,M))}class BA{constructor(){this._aabbCache=new Gs(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(a,c,v,M){const I=1<<v.z,z=1/I,Y=v.x/I,ee=v.y/I;let Ae=2;return Ae=Math.min(Ae,Ga(a,c,Y,ee,z)),Ae=Math.min(Ae,Ga(a,c,Y+.5,-ee-z,z)),Ae=Math.min(Ae,Ga(a,c,Y+.5,2-ee-z,z)),Ae}getWrap(a,c,v){const M=1<<c.z,I=1/M,z=c.x/M,Y=dl(a.x,z,I),ee=dl(a.x,z-1,I),Ae=dl(a.x,z+1,I),de=Math.min(Y,ee,Ae);return de===Ae?1:de===ee?-1:0}allowVariableZoom(a,c){return lt(a,c)>4}allowWorldCopies(){return!1}getTileAABB(a,c,v,M){return this._aabbCache.getTileAABB(a,c,v,M)}_computeTileAABB(a,c,v,M){if(a.z<=0)return new $o([-1,-1,-1],[1,1,1]);if(a.z===1)return new $o([a.x===0?-1:0,a.y===0?0:-1,-1],[a.x===0?0:1,a.y===0?1:0,1]);{const I=[xo(0,0,a.x,a.y,a.z),xo(o.Z,0,a.x,a.y,a.z),xo(o.Z,o.Z,a.x,a.y,a.z),xo(0,o.Z,a.x,a.y,a.z)],z=[1,1,1],Y=[-1,-1,-1];for(const ee of I)for(let Ae=0;Ae<3;Ae++)z[Ae]=Math.min(z[Ae],ee[Ae]),Y[Ae]=Math.max(Y[Ae],ee[Ae]);if(a.y===0||a.y===(1<<a.z)-1){const ee=[0,a.y===0?1:-1,0];for(let Ae=0;Ae<3;Ae++)z[Ae]=Math.min(z[Ae],ee[Ae]),Y[Ae]=Math.max(Y[Ae],ee[Ae])}return new $o(z,Y)}}}class uc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,v){return this._helper.interpolatePadding(a,c,v)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c){this._helper.resize(a,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bk(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new uo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._coveringTilesDetailsProvider=new BA}clone(){const a=new uc;return a.apply(this),a}apply(a,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const a=o.bh();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){const{overscaledTileID:c,applyGlobeMatrix:v}=a,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:v?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){const c=this.pitchInRadians,v=this.cameraToCenterDistance/a,M=Math.sin(c)*v,I=Math.cos(c)*v+1,z=1/Math.sqrt(M*M+I*I)*1;let Y=-M,ee=I;const Ae=Math.sqrt(Y*Y+ee*ee);Y/=Ae,ee/=Ae;const de=[0,Y,ee];o.bl(de,de,[0,0,0],-this.bearingInRadians),o.bm(de,de,[0,0,0],-1*this.center.lat*Math.PI/180),o.bn(de,de,[0,0,0],this.center.lng*Math.PI/180);const Oe=1/o.bo(de);return o.aO(de,de,Oe),[...de,-z*Oe]}isLocationOccluded(a){return!this.isSurfacePointVisible(si(a))}transformLightDirection(a){const c=this._helper._center.lng*Math.PI/180,v=this._helper._center.lat*Math.PI/180,M=Math.cos(v),I=[Math.sin(c)*M,Math.sin(v),Math.cos(c)*M],z=[I[2],0,-I[0]],Y=[0,0,0];o.aU(Y,z,I),o.aT(z,z),o.aT(Y,Y);const ee=[0,0,0];return o.aT(ee,[z[0]*a[0]+Y[0]*a[1]+I[0]*a[2],z[1]*a[0]+Y[1]*a[1]+I[1]*a[2],z[2]*a[0]+Y[2]*a[1]+I[2]*a[2]]),ee}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,c,v){const M=function(Y,ee,Ae){const de=1/(1<<Ae.z);return new o.$(Y/o.Z*de+Ae.x*de,ee/o.Z*de+Ae.y*de)}(a,c,v.canonical),I=(z=M.y,[o.bg(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(a,c,v,M){const I=v.canonical,z=xo(a,c,I.x,I.y,I.z),Y=1+(M?M(a,c):0)/o.bu,ee=[z[0]*Y,z[1]*Y,z[2]*Y,1];o.at(ee,ee,this._globeViewProjMatrixNoCorrection);const Ae=this._cachedClippingPlane,de=Ae[0]*z[0]+Ae[1]*z[1]+Ae[2]*z[2]+Ae[3]<0;return{point:new o.P(ee[0]/ee[3],ee[1]/ee[3]),signedDistanceFromCamera:ee[3],isOccluded:de}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const a=fi(this.worldSize,this.center.lat),c=o.b2(),v=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=o.aZ(c),this._globeProjMatrixInverted=o.b2(),o.an(this._globeProjMatrixInverted,c),o.L(c,c,[0,0,-this.cameraToCenterDistance]),o.a_(c,c,this.rollInRadians),o.a$(c,c,-this.pitchInRadians),o.a_(c,c,this.bearingInRadians),o.L(c,c,[0,0,-a]);const I=o.bh();I[0]=a,I[1]=a,I[2]=a,o.a$(v,c,this.center.lat*Math.PI/180),o.bp(v,v,-this.center.lng*Math.PI/180),o.M(v,v,I),this._globeViewProjMatrixNoCorrection=v,o.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bp(c,c,-this.center.lng*Math.PI/180),o.M(c,c,I),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.an(this._globeViewProjMatrixNoCorrectionInverted,v);const z=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bl(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bm(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bl(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bm(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.bn(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);const Y=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(Y,Y,[1,1,-1]),this._cachedFrustum=Hi.fromInvProjectionMatrix(Y)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.b2();return o.ad(c),c}getVisibleUnwrappedCoordinates(a){return[new o.aW(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const v=si(a);o.aO(v,v,1+c/o.bu);const M=o.bk();return o.at(M,[v[0],v[1],v[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(a){}getBounds(){const a=.5*this.width,c=.5*this.height,v=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,c)],M=[];for(const Oe of v)M.push(this.unprojectScreenPoint(Oe));let I=0,z=0,Y=0,ee=0;const Ae=this.center;for(const Oe of M){const Be=o.bq(Ae.lng,Oe.lng),ze=o.bq(Ae.lat,Oe.lat);Be<z&&(z=Be),Be>I&&(I=Be),ze<ee&&(ee=ze),ze>Y&&(Y=ze)}const de=[Ae.lng+z,Ae.lat+ee,Ae.lng+I,Ae.lat+Y];return this.isSurfacePointOnScreen([0,1,0])&&(de[3]=90,de[0]=-180,de[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(de[1]=-90,de[0]=-180,de[2]=180),new Et(de)}getConstrained(a,c){const v=o.ae(a.lat,-85.051129,o.af),M=o.ae(+c,this.minZoom+Fi(0,v),this.maxZoom);return{center:new o.Q(a.lng,v),zoom:M}}calculateCenterFromCameraLngLatAlt(a,c,v,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,v,M)}setLocationAtPoint(a,c){const v=si(this.unprojectScreenPoint(c)),M=si(a),I=o.bh();o.br(I);const z=o.bh();o.bn(z,v,I,-this.center.lng*Math.PI/180),o.bm(z,z,I,this.center.lat*Math.PI/180);const Y=M[0]*M[0]+M[2]*M[2],ee=z[0]*z[0];if(Y<ee)return;const Ae=Math.sqrt(Y-ee),de=-Ae,Oe=o.bs(M[0],M[2],z[0],Ae),Be=o.bs(M[0],M[2],z[0],de),ze=o.bh();o.bn(ze,M,I,-Oe);const He=o.bs(ze[1],ze[2],z[1],z[2]),ft=o.bh();o.bn(ft,M,I,-Be);const dt=o.bs(ft[1],ft[2],z[1],z[2]),pt=.5*Math.PI,wt=He>=-pt&&He<=pt,Tt=dt>=-pt&&dt<=pt;let Mt,kt;if(wt&&Tt){const bn=this.center.lng*Math.PI/180,en=this.center.lat*Math.PI/180;o.bv(Oe,bn)+o.bv(He,en)<o.bv(Be,bn)+o.bv(dt,en)?(Mt=Oe,kt=He):(Mt=Be,kt=dt)}else if(wt)Mt=Oe,kt=He;else{if(!Tt)return;Mt=Be,kt=dt}const Kt=Mt/Math.PI*180,zt=kt/Math.PI*180,sn=this.center.lat;this.setCenter(new o.Q(Kt,o.ae(zt,-90,90))),this.setZoom(this.zoom+Fi(sn,this.center.lat))}locationToScreenPoint(a,c){const v=si(a);if(c){const M=c.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aO(v,v,1+M/o.bu)}return this._projectSurfacePointToScreen(v)}_projectSurfacePointToScreen(a){const c=o.bk();return o.at(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,c){if(c){const v=c.pointCoordinate(a);if(v)return v}return o.$.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,c){var v;return(v=this.screenPointToMercatorCoordinate(a,c))===null||v===void 0?void 0:v.toLngLat()}isPointOnMapSurface(a,c){const v=this._cameraPosition,M=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(v,M)}getRayDirectionFromPixel(a){const c=o.bk();c[0]=a.x/this.width*2-1,c[1]=-1*(a.y/this.height*2-1),c[2]=1,c[3]=1,o.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const v=o.bh();v[0]=c[0]-this._cameraPosition[0],v[1]=c[1]-this._cameraPosition[1],v[2]=c[2]-this._cameraPosition[2];const M=o.bh();return o.aT(M,v),M}isSurfacePointVisible(a){const c=this._cachedClippingPlane;return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;const c=o.bk();return o.at(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(a,c){const v=o.aV(a,c),M=o.bh(),I=o.bh();o.aO(I,c,v),o.aS(M,a,I);const z=1-o.aV(M,M);if(z<0)return null;const Y=o.aV(a,a)-1,ee=-v+(v<0?1:-1)*Math.sqrt(z),Ae=Y/ee,de=ee;return{tMin:Math.min(Ae,de),tMax:Math.max(Ae,de)}}unprojectScreenPoint(a){const c=this._cameraPosition,v=this.getRayDirectionFromPixel(a),M=this.rayPlanetIntersection(c,v);if(M){const de=o.bh();o.aP(de,c,[v[0]*M.tMin,v[1]*M.tMin,v[2]*M.tMin]);const Oe=o.bh();return o.aT(Oe,de),co(Oe)}const I=this._cachedClippingPlane,z=I[0]*v[0]+I[1]*v[1]+I[2]*v[2],Y=-o.bt(I,c)/z,ee=o.bh();if(Y>0)o.aP(ee,c,[v[0]*Y,v[1]*Y,v[2]*Y]);else{const de=o.bh();o.aP(de,c,[2*v[0],2*v[1],2*v[2]]);const Oe=o.bt(this._cachedClippingPlane,de);o.aS(ee,de,[this._cachedClippingPlane[0]*Oe,this._cachedClippingPlane[1]*Oe,this._cachedClippingPlane[2]*Oe])}const Ae=function(de){const Oe=o.bh();return Oe[0]=de[0]*-de[3],Oe[1]=de[1]*-de[3],Oe[2]=de[2]*-de[3],{center:Oe,radius:Math.sqrt(1-de[3]*de[3])}}(I);return co(function(de,Oe,Be){const ze=o.bh();o.aS(ze,Be,de);const He=o.bh();return o.bi(He,de,ze,Oe/o.bj(ze)),He}(Ae.center,Ae.radius,ee))}getMatrixForModel(a,c){const v=o.Q.convert(a),M=1/o.bu,I=o.b1();return o.bp(I,I,v.lng/180*Math.PI),o.a$(I,I,-v.lat/180*Math.PI),o.L(I,I,[0,0,1+c/o.bu]),o.a$(I,I,.5*Math.PI),o.M(I,I,[M,M,M]),I}getProjectionDataForCustomLayer(a=!0){const c=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:a});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(a){}}class mu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,v){return this._helper.interpolatePadding(a,c,v)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,v=!0){this._helper.resize(a,c,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,c){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new uo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._globeness=1,this._mercatorTransform=new Ea,this._verticalPerspectiveTransform=new uc}clone(){const a=new mu;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){const c=this._mercatorTransform.getProjectionData(a),v=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?v.mainMatrix:c.mainMatrix,clippingPlane:v.clippingPlane,tileMercatorCoords:v.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,c,v){const M=this._mercatorTransform.getPitchedTextCorrection(a,c,v),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,c,v);return o.bc(M,I,this._globeness)}projectTileCoordinates(a,c,v,M){return this.currentTransform.projectTileCoordinates(a,c,v,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){return this.currentTransform.lngLatToCameraDepth(a,c)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,c){return this.currentTransform.getConstrained(a,c)}calculateCenterFromCameraLngLatAlt(a,c,v,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,v,M)}setLocationAtPoint(a,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,c){return this.currentTransform.locationToScreenPoint(a,c)}screenPointToMercatorCoordinate(a,c){return this.currentTransform.screenPointToMercatorCoordinate(a,c)}screenPointToLocation(a,c){return this.currentTransform.screenPointToLocation(a,c)}isPointOnMapSurface(a,c){return this.currentTransform.isPointOnMapSurface(a,c)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,c){return this.currentTransform.getMatrixForModel(a,c)}getProjectionDataForCustomLayer(a=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return c;const v=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return v.fallbackMatrix=c.mainMatrix,v}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class aA{get useGlobeControls(){return!0}handlePanInertia(a,c){const v=Ns(a,c);return Math.abs(v.lng-c.center.lng)>180&&(v.lng=c.center.lng+179.5*Math.sign(v.lng-c.center.lng)),{easingCenter:v,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,c){const v=a.around,M=c.screenPointToLocation(v);a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta);const I=c.zoom;a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta);const z=c.zoom-I;if(z===0)return;const Y=o.bq(c.center.lng,M.lng),ee=Y/(Math.abs(Y/180)+1),Ae=o.bq(c.center.lat,M.lat),de=c.getRayDirectionFromPixel(v),Oe=c.cameraPosition,Be=-1*o.aV(Oe,de),ze=o.bh();o.aP(ze,Oe,[de[0]*Be,de[1]*Be,de[2]*Be]);const He=o.bo(ze)-1,ft=Math.exp(.5*-Math.max(He-.3,0)),dt=fi(c.worldSize,c.center.lat)/Math.min(c.width,c.height),pt=o.bf(dt,.9,.5,1,.25),wt=(1-o.ac(-z))*Math.min(ft,pt),Tt=c.center.lat,Mt=c.zoom,kt=new o.Q(c.center.lng+ee*wt,o.ae(c.center.lat+Ae*wt,-85.051129,o.af));c.setLocationAtPoint(M,v);const Kt=c.center,zt=o.bf(Math.abs(Y),45,85,0,1),sn=o.bf(dt,.75,.35,0,1),bn=Math.pow(Math.max(zt,sn),.25),en=o.bq(Kt.lng,kt.lng),ln=o.bq(Kt.lat,kt.lat);c.setCenter(new o.Q(Kt.lng+en*bn,Kt.lat+ln*bn).wrap()),c.setZoom(Mt+Fi(Tt,c.center.lat))}handleMapControlsPan(a,c,v){if(!a.panDelta)return;const M=c.center.lat,I=c.zoom;c.setCenter(Ns(a.panDelta,c).wrap()),c.setZoom(I+Fi(M,c.center.lat))}cameraForBoxAndBearing(a,c,v,M,I){const z=sa(a,c,v,M,I),Y=c.left/I.width*2-1,ee=(I.width-c.right)/I.width*2-1,Ae=c.top/I.height*-2+1,de=(I.height-c.bottom)/I.height*-2+1,Oe=o.bq(v.getWest(),v.getEast())<0,Be=Oe?v.getEast():v.getWest(),ze=Oe?v.getWest():v.getEast(),He=Math.max(v.getNorth(),v.getSouth()),ft=Math.min(v.getNorth(),v.getSouth()),dt=Be+.5*o.bq(Be,ze),pt=He+.5*o.bq(He,ft),wt=I.clone();wt.setCenter(z.center),wt.setBearing(z.bearing),wt.setPitch(0),wt.setRoll(0),wt.setZoom(z.zoom);const Tt=wt.modelViewProjectionMatrix,Mt=[si(v.getNorthWest()),si(v.getNorthEast()),si(v.getSouthWest()),si(v.getSouthEast()),si(new o.Q(ze,pt)),si(new o.Q(Be,pt)),si(new o.Q(dt,He)),si(new o.Q(dt,ft))],kt=si(z.center);let Kt=Number.POSITIVE_INFINITY;for(const zt of Mt)Y<0&&(Kt=aA.getLesserNonNegativeNonNull(Kt,aA.solveVectorScale(zt,kt,Tt,"x",Y))),ee>0&&(Kt=aA.getLesserNonNegativeNonNull(Kt,aA.solveVectorScale(zt,kt,Tt,"x",ee))),Ae>0&&(Kt=aA.getLesserNonNegativeNonNull(Kt,aA.solveVectorScale(zt,kt,Tt,"y",Ae))),de<0&&(Kt=aA.getLesserNonNegativeNonNull(Kt,aA.solveVectorScale(zt,kt,Tt,"y",de)));if(Number.isFinite(Kt)&&Kt!==0)return z.zoom=wt.zoom+o.ah(Kt),z;pa()}handleJumpToCenterZoom(a,c){const v=a.center.lat,M=a.getConstrained(c.center?o.Q.convert(c.center):a.center,a.zoom).center;a.setCenter(M.wrap());const I=c.zoom!==void 0?+c.zoom:a.zoom+Fi(v,M.lat);a.zoom!==I&&a.setZoom(I)}handleEaseTo(a,c){const v=a.zoom,M=a.center,I=a.padding,z={roll:a.roll,pitch:a.pitch,bearing:a.bearing},Y={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},ee=c.zoom!==void 0,Ae=!a.isPaddingEqual(c.padding);let de=!1;const Oe=c.center?o.Q.convert(c.center):M,Be=a.getConstrained(Oe,v).center;za(a,Be);const ze=a.clone();ze.setCenter(Be),ze.setZoom(ee?+c.zoom:v+Fi(M.lat,Oe.lat)),ze.setBearing(c.bearing);const He=new o.P(o.ae(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));ze.setLocationAtPoint(Be,He);const ft=(c.offset&&c.offsetAsPoint.mag())>0?ze.center:Be,dt=ee?+c.zoom:v+Fi(M.lat,ft.lat),pt=v+Fi(M.lat,0),wt=dt+Fi(ft.lat,0),Tt=o.bq(M.lng,ft.lng),Mt=o.bq(M.lat,ft.lat),kt=o.ac(wt-pt);return de=dt!==v,{easeFunc:Kt=>{if(o.b6(z,Y)||Ss({startEulerAngles:z,endEulerAngles:Y,tr:a,k:Kt,useSlerp:z.roll!=Y.roll}),Ae&&a.interpolatePadding(I,c.padding,Kt),c.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(c.around,c.aroundPoint);else{const zt=wt>pt?Math.min(2,kt):Math.max(.5,kt),sn=Math.pow(zt,1-Kt),bn=eu(M,Tt,Mt,Kt*sn);a.setCenter(bn.wrap())}if(de){const zt=o.B.number(pt,wt,Kt)+Fi(0,a.center.lat);a.setZoom(zt)}},isZooming:de,elevationCenter:ft}}handleFlyTo(a,c){const v=c.zoom!==void 0,M=a.center,I=a.zoom,z=a.padding,Y=!a.isPaddingEqual(c.padding),ee=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),I).center,Ae=v?+c.zoom:a.zoom+Fi(a.center.lat,ee.lat),de=a.clone();de.setCenter(ee),de.setZoom(Ae),de.setBearing(c.bearing);const Oe=new o.P(o.ae(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));de.setLocationAtPoint(ee,Oe);const Be=de.center;za(a,Be);const ze=function(Mt,kt,Kt){const zt=si(kt),sn=si(Kt),bn=o.aV(zt,sn),en=Math.acos(bn),ln=Yi(Mt);return en/(2*Math.PI)*ln}(a,M,Be),He=I+Fi(M.lat,0),ft=Ae+Fi(Be.lat,0),dt=o.ac(ft-He);let pt;if(typeof c.minZoom=="number"){const Mt=+c.minZoom+Fi(Be.lat,0),kt=Math.min(Mt,He,ft)+Fi(0,Be.lat),Kt=a.getConstrained(Be,kt).zoom+Fi(Be.lat,0);pt=o.ac(Kt-He)}const wt=o.bq(M.lng,Be.lng),Tt=o.bq(M.lat,Be.lat);return{easeFunc:(Mt,kt,Kt,zt)=>{const sn=eu(M,wt,Tt,Kt);Y&&a.interpolatePadding(z,c.padding,Mt);const bn=Mt===1?Be:sn;a.setCenter(bn.wrap());const en=He+o.ah(kt);a.setZoom(Mt===1?Ae:en+Fi(0,bn.lat))},scaleOfZoom:dt,targetCenter:Be,scaleOfMinZoom:pt,pixelPathLength:ze}}static solveVectorScale(a,c,v,M,I){const z=M==="x"?[v[0],v[4],v[8],v[12]]:[v[1],v[5],v[9],v[13]],Y=[v[3],v[7],v[11],v[15]],ee=a[0]*z[0]+a[1]*z[1]+a[2]*z[2],Ae=a[0]*Y[0]+a[1]*Y[1]+a[2]*Y[2],de=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],Oe=c[0]*Y[0]+c[1]*Y[1]+c[2]*Y[2];return de+I*Ae===ee+I*Oe||Y[3]*(ee-de)+z[3]*(Oe-Ae)+ee*Oe==de*Ae?null:(de+z[3]-I*Oe-I*Y[3])/(de-ee-I*Oe+I*Ae)}static getLesserNonNegativeNonNull(a,c){return c!==null&&c>=0&&c<a?c:a}}class Ic{constructor(a){this._globe=a,this._mercatorCameraHelper=new EA,this._verticalPerspectiveCameraHelper=new aA}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,c){return this.currentHelper.handlePanInertia(a,c)}handleMapControlsRollPitchBearingZoom(a,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,c)}handleMapControlsPan(a,c,v){this.currentHelper.handleMapControlsPan(a,c,v)}cameraForBoxAndBearing(a,c,v,M,I){return this.currentHelper.cameraForBoxAndBearing(a,c,v,M,I)}handleJumpToCenterZoom(a,c){this.currentHelper.handleJumpToCenterZoom(a,c)}handleEaseTo(a,c){return this.currentHelper.handleEaseTo(a,c)}handleFlyTo(a,c){return this.currentHelper.handleFlyTo(a,c)}}const ps=(O,a)=>o.x(O,a&&a.filter(c=>c.identifier!=="source.canvas")),Tc=o.bw();class md extends o.E{constructor(a,c={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const M=this.sourceCaches[v].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[v].reload()}},this.map=a,this.dispatcher=new St(Rt(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,M)=>this.getGlyphs(v,M)),this.dispatcher.registerMessageHandler("GI",(v,M)=>this.getImages(v,M)),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new je(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ge(256,512),this.crossTileSymbolIndex=new Sa,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.by()),he().on(rr,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const M=this.sourceCaches[v.sourceId];if(!M)return;const I=M.getSource();if(I&&I.vectorLayerIds)for(const z in this._layers){const Y=this._layers[z];Y.source===I.id&&this._validateLayer(Y)}})}loadURL(a,c={},v){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;o.j(M,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,c,v)}).catch(z=>{this._loadStyleRequest=null,z&&!I.signal.aborted&&this.fire(new o.k(z))})}loadJSON(a,c={},v){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(a,c,v)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Tc,{validate:!1})}_load(a,c,v){var M,I;const z=c.transformStyle?c.transformStyle(v,a):a;if(!c.validate||!ps(this,o.y(z))){this._loaded=!0,this.stylesheet=z;for(const Y in z.sources)this.addSource(Y,z.sources[Y],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Ct(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new nt(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const a=o.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of a){const v=o.bA(c);v.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=v}}_loadSprite(a,c=!1,v=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(I,z,Y,ee){return o._(this,void 0,void 0,function*(){const Ae=ne(I),de=Y>1?"@2x":"",Oe={},Be={};for(const{id:ze,url:He}of Ae){const ft=z.transformRequest(G(He,de,".json"),"SpriteJSON");Oe[ze]=o.j(ft,ee);const dt=z.transformRequest(G(He,de,".png"),"SpriteImage");Be[ze]=te.getImage(dt,ee)}return yield Promise.all([...Object.values(Oe),...Object.values(Be)]),function(ze,He){return o._(this,void 0,void 0,function*(){const ft={};for(const dt in ze){ft[dt]={};const pt=R.getImageCanvasContext((yield He[dt]).data),wt=(yield ze[dt]).data;for(const Tt in wt){const{width:Mt,height:kt,x:Kt,y:zt,sdf:sn,pixelRatio:bn,stretchX:en,stretchY:ln,content:Cn,textFitWidth:Ar,textFitHeight:cr}=wt[Tt];ft[dt][Tt]={data:null,pixelRatio:bn,sdf:sn,stretchX:en,stretchY:ln,content:Cn,textFitWidth:Ar,textFitHeight:cr,spriteData:{width:Mt,height:kt,x:Kt,y:zt,context:pt}}}}return ft})}(Oe,Be)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(I=>{if(this._spriteRequest=null,I)for(const z in I){this._spritesImagesIds[z]=[];const Y=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(ee=>!(ee in I)):[];for(const ee of Y)this.imageManager.removeImage(ee),this._changedImages[ee]=!0;for(const ee in I[z]){const Ae=z==="default"?ee:`${z}:${ee}`;this._spritesImagesIds[z].push(Ae),Ae in this.imageManager.images?this.imageManager.updateImage(Ae,I[z][ee],!1):this.imageManager.addImage(Ae,I[z][ee]),c&&(this._changedImages[Ae]=!0)}}}).catch(I=>{this._spriteRequest=null,M=I,this.fire(new o.k(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),v&&v(M)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){const c=this.sourceCaches[a.source];if(!c)return;const v=a.sourceLayer;if(!v)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(v)===-1)&&this.fire(new o.k(new Error(`Source layer "${v}" does not exist on source "${M.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,c=!1){const v=this._serializedAllLayers();if(!a||a.length===0)return Object.values(c?o.bB(v):v);const M=[];for(const I of a)if(v[I]){const z=c?o.bB(v[I]):v[I];M.push(z)}return M}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const c=Object.keys(this._layers);for(const v of c){const M=this._layers[v];M.type!=="custom"&&(a[v]=M.serialize())}return a}hasTransitions(){var a,c,v;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((v=this.projection)===null||v===void 0)&&v.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(M.length||I.length)&&this._updateWorkerLayers(M,I);for(const z in this._updatedSources){const Y=this._updatedSources[z];if(Y==="reload")this._reloadSource(z);else{if(Y!=="clear")throw new Error(`Invalid action ${Y}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const v={};for(const M in this.sourceCaches){const I=this.sourceCaches[M];v[M]=I.used,I.used=!1}for(const M of this._order){const I=this._layers[M];I.recalculate(a,this._availableImages),!I.isHidden(a.zoom)&&I.source&&(this.sourceCaches[I.source].used=!0)}for(const M in v){const I=this.sourceCaches[M];!!v[M]!=!!I.used&&I.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,c={}){var v;this._checkLoaded();const M=this.serialize();if(a=c.transformStyle?c.transformStyle(M,a):a,((v=c.validate)===null||v===void 0||v)&&ps(this,o.y(a)))return!1;(a=o.bB(a)).layers=o.bz(a.layers);const I=o.bC(M,a),z=this._getOperationsToPerform(I);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const Y of z.operations)Y();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const c=[],v=[];for(const M of a)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:v.push(M.command)}return{operations:c,unimplemented:v}}addImage(a,c){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,c),this._afterImageUpdated(a)}updateImage(a,c){this.imageManager.updateImage(a,c)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,c,v={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${a}`,c,null,v))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[a]=new Ft(a,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:a})),M.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));const c=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,c){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const v=this.sourceCaches[a].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(c),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,c,v={}){this._checkLoaded();const M=a.id;if(this.getLayer(M))return void this.fire(new o.k(new Error(`Layer "${M}" already exists on this map.`)));let I;if(a.type==="custom"){if(ps(this,o.bD(a)))return;I=o.bA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(M,a.source),a=o.bB(a),a=o.e(a,{source:M})),this._validate(o.y.layer,`layers.${M}`,a,{arrayIndex:-1},v))return;I=o.bA(a),this._validateLayer(I),I.setEventedParent(this,{layer:{id:M}})}const z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new o.k(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(z,0,M),this._layerOrderChanged=!0,this._layers[M]=I,this._removedLayers[M]&&I.source&&I.type!=="custom"){const Y=this._removedLayers[M];delete this._removedLayers[M],Y.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(a,c){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===c)return;const v=this._order.indexOf(a);this._order.splice(v,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${c}".`))):(this._order.splice(M,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const c=this._layers[a];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));c.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,c,v){this._checkLoaded();const M=this.getLayer(a);M?M.minzoom===c&&M.maxzoom===v||(c!=null&&(M.minzoom=c),v!=null&&(M.maxzoom=v),this._updateLayer(M)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,c,v={}){this._checkLoaded();const M=this.getLayer(a);if(M){if(!o.bE(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.y.filter,`layers.${M.id}.filter`,c,null,v)||(M.filter=o.bB(c),this._updateLayer(M)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bB(this.getLayer(a).filter)}setLayoutProperty(a,c,v,M={}){this._checkLoaded();const I=this.getLayer(a);I?o.bE(I.getLayoutProperty(c),v)||(I.setLayoutProperty(c,v,M),this._updateLayer(I)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,c){const v=this.getLayer(a);if(v)return v.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,c,v,M={}){this._checkLoaded();const I=this.getLayer(a);I?o.bE(I.getPaintProperty(c),v)||(I.setPaintProperty(c,v,M)&&this._updateLayer(I),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,c){return this.getLayer(a).getPaintProperty(c)}setFeatureState(a,c){this._checkLoaded();const v=a.source,M=a.sourceLayer,I=this.sourceCaches[v];if(I===void 0)return void this.fire(new o.k(new Error(`The source '${v}' does not exist in the map's style.`)));const z=I.getSource().type;z==="geojson"&&M?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||M?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(M,a.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,c){this._checkLoaded();const v=a.source,M=this.sourceCaches[v];if(M===void 0)return void this.fire(new o.k(new Error(`The source '${v}' does not exist in the map's style.`)));const I=M.getSource().type,z=I==="vector"?a.sourceLayer:void 0;I!=="vector"||z?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(z,a.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const c=a.source,v=a.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||v?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),M.getFeatureState(v,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.bF(this.sourceCaches,I=>I.serialize()),c=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,M=this.stylesheet;return o.bG({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:a,layers:c,terrain:v},I=>I!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const c=z=>this._layers[z].type==="fill-extrusion",v={},M=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y)){v[Y]=z;for(const ee of a){const Ae=ee[Y];if(Ae)for(const de of Ae)M.push(de)}}}M.sort((z,Y)=>Y.intersectionZ-z.intersectionZ);const I=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y))for(let ee=M.length-1;ee>=0;ee--){const Ae=M[ee].feature;if(v[Ae.layer.id]<z)break;I.push(Ae),M.pop()}else for(const ee of a){const Ae=ee[Y];if(Ae)for(const de of Ae)I.push(de.feature)}}return I}queryRenderedFeatures(a,c,v){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Ae of c.layers){const de=this._layers[Ae];if(!de)return this.fire(new o.k(new Error(`The layer '${Ae}' does not exist in the map's style and cannot be queried for features.`))),[];M[de.source]=!0}}const I=[];c.availableImages=this._availableImages;const z=this._serializedAllLayers(),Y=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,ee=Object.assign(Object.assign({},c),{layers:Y});for(const Ae in this.sourceCaches)c.layers&&!M[Ae]||I.push(Re(this.sourceCaches[Ae],this._layers,z,a,ee,v,this.map.terrain?(de,Oe,Be)=>this.map.terrain.getElevation(de,Oe,Be):void 0));return this.placement&&I.push(function(Ae,de,Oe,Be,ze,He,ft){const dt={},pt=He.queryRenderedSymbols(Be),wt=[];for(const Tt of Object.keys(pt).map(Number))wt.push(ft[Tt]);wt.sort(Ye);for(const Tt of wt){const Mt=Tt.featureIndex.lookupSymbolFeatures(pt[Tt.bucketInstanceId],de,Tt.bucketIndex,Tt.sourceLayerIndex,ze.filter,ze.layers,ze.availableImages,Ae);for(const kt in Mt){const Kt=dt[kt]=dt[kt]||[],zt=Mt[kt];zt.sort((sn,bn)=>{const en=Tt.featureSortOrder;if(en){const ln=en.indexOf(sn.featureIndex);return en.indexOf(bn.featureIndex)-ln}return bn.featureIndex-sn.featureIndex});for(const sn of zt)Kt.push(sn)}}return function(Tt,Mt,kt){for(const Kt in Tt)for(const zt of Tt[Kt])vt(zt,kt[Mt[Kt].source]);return Tt}(dt,Ae,Oe)}(this._layers,z,this.sourceCaches,a,ee,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(a,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const v=this.sourceCaches[a];return v?function(M,I){const z=M.getRenderableIds().map(Ae=>M.getTileByID(Ae)),Y=[],ee={};for(let Ae=0;Ae<z.length;Ae++){const de=z[Ae],Oe=de.tileID.canonical.key;ee[Oe]||(ee[Oe]=!0,de.querySourceFeatures(Y,I))}return Y}(v,c):[]}getLight(){return this.light.getLight()}setLight(a,c={}){this._checkLoaded();const v=this.light.getLight();let M=!1;for(const z in a)if(!o.bE(a[z],v[z])){M=!0;break}if(!M)return;const I={now:R.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(I)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,c={}){this._checkLoaded();const v=this.getSky();let M=!1;if(!a&&!v)return;if(a&&!v)M=!0;else if(!a&&v)M=!0;else for(const z in a)if(!o.bE(a[z],v[z])){M=!0;break}if(!M)return;const I={now:R.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,c),this.sky.updateTransitions(I)}_setProjectionInternal(a){const c=function(v){if(Array.isArray(v)){const M=new ni({type:v});return{projection:M,transform:new mu,cameraHelper:new Ic(M)}}switch(v){case"mercator":return{projection:new oA,transform:new Ea,cameraHelper:new EA};case"globe":{const M=new ni({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new mu,cameraHelper:new Ic(M)}}case"vertical-perspective":return{projection:new Ai,transform:new uc,cameraHelper:new aA};default:return o.w(`Unknown projection name: ${v}. Falling back to mercator projection.`),{projection:new oA,transform:new Ea,cameraHelper:new EA}}}(a);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const v in this.sourceCaches)this.sourceCaches[v].reload()}_validate(a,c,v,M,I={}){return(!I||I.validate!==!1)&&ps(this,a.call(o.y,o.e({key:c,style:this.serialize(),value:v,styleSpec:o.v},M)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),he().off(rr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const v=this.sourceCaches[c];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const c in this.sourceCaches)this.sourceCaches[c].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,c,v,M,I=!1){let z=!1,Y=!1;const ee={};for(const Ae of this._order){const de=this._layers[Ae];if(de.type!=="symbol")continue;if(!ee[de.source]){const Be=this.sourceCaches[de.source];ee[de.source]=Be.getRenderableIds(!0).map(ze=>Be.getTileByID(ze)).sort((ze,He)=>He.tileID.overscaledZ-ze.tileID.overscaledZ||(ze.tileID.isLessThan(He.tileID)?-1:1))}const Oe=this.crossTileSymbolIndex.addLayer(de,ee[de.source],a.center.lng);z=z||Oe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R.now(),a.zoom))&&(this.pauseablePlacement=new zu(a,this.map.terrain,this._order,I,c,v,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(R.now()),Y=!0),z&&this.pauseablePlacement.placement.setStale()),Y||z)for(const Ae of this._order){const de=this._layers[Ae];de.type==="symbol"&&this.placement.updateLayerOpacities(de,ee[de.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,c){return o._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),v})}getGlyphs(a,c){return o._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,c={}){this._checkLoaded(),a&&this._validate(o.y.glyphs,"glyphs",a,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,c,v={},M){this._checkLoaded();const I=[{id:a,url:c}],z=[...ne(this.stylesheet.sprite),...I];this._validate(o.y.sprite,"sprite",z,null,v)||(this.stylesheet.sprite=z,this._loadSprite(I,!0,M))}removeSprite(a){this._checkLoaded();const c=ne(this.stylesheet.sprite);if(c.find(v=>v.id===a)){if(this._spritesImagesIds[a])for(const v of this._spritesImagesIds[a])this.imageManager.removeImage(v),this._changedImages[v]=!0;c.splice(c.findIndex(v=>v.id===a),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(a,c={},v){this._checkLoaded(),a&&this._validate(o.y.sprite,"sprite",a,null,c)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,v):(this._unloadSprite(),v&&v(null)))}}var Pp=o.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class qh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,c,v,M,I,z,Y,ee,Ae){this.context=a;let de=this.boundPaintVertexBuffers.length!==M.length;for(let Oe=0;!de&&Oe<M.length;Oe++)this.boundPaintVertexBuffers[Oe]!==M[Oe]&&(de=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==v||de||this.boundIndexBuffer!==I||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==Y||this.boundDynamicVertexBuffer2!==ee||this.boundDynamicVertexBuffer3!==Ae?this.freshBind(c,v,M,I,z,Y,ee,Ae):(a.bindVertexArray.set(this.vao),Y&&Y.bind(),I&&I.dynamicDraw&&I.bind(),ee&&ee.bind(),Ae&&Ae.bind())}freshBind(a,c,v,M,I,z,Y,ee){const Ae=a.numAttributes,de=this.context,Oe=de.gl;this.vao&&this.destroy(),this.vao=de.createVertexArray(),de.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=M,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=Y,this.boundDynamicVertexBuffer3=ee,c.enableAttributes(Oe,a);for(const Be of v)Be.enableAttributes(Oe,a);z&&z.enableAttributes(Oe,a),Y&&Y.enableAttributes(Oe,a),ee&&ee.enableAttributes(Oe,a),c.bind(),c.setVertexAttribPointers(Oe,a,I);for(const Be of v)Be.bind(),Be.setVertexAttribPointers(Oe,a,I);z&&(z.bind(),z.setVertexAttribPointers(Oe,a,I)),M&&M.bind(),Y&&(Y.bind(),Y.setVertexAttribPointers(Oe,a,I)),ee&&(ee.bind(),ee.setVertexAttribPointers(Oe,a,I)),de.currentNumAttributes=Ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const $h=(O,a,c,v,M)=>({u_texture:0,u_ele_delta:O,u_fog_matrix:a,u_fog_color:c?c.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(v):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),gd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Vh(O){const a=[];for(let c=0;c<O.length;c++){if(O[c]===null)continue;const v=O[c].split(" ");a.push(v.pop())}return a}class yd{constructor(a,c,v,M,I,z,Y,ee,Ae=[]){const de=a.gl;this.program=de.createProgram();const Oe=Vh(c.staticAttributes),Be=v?v.getBinderAttributes():[],ze=Oe.concat(Be),He=Ao.prelude.staticUniforms?Vh(Ao.prelude.staticUniforms):[],ft=Y.staticUniforms?Vh(Y.staticUniforms):[],dt=c.staticUniforms?Vh(c.staticUniforms):[],pt=v?v.getBinderUniforms():[],wt=He.concat(ft).concat(dt).concat(pt),Tt=[];for(const en of wt)Tt.indexOf(en)<0&&Tt.push(en);const Mt=v?v.defines():[];st(de)&&Mt.unshift("#version 300 es"),I&&Mt.push("#define OVERDRAW_INSPECTOR;"),z&&Mt.push("#define TERRAIN3D;"),ee&&Mt.push(ee),Ae&&Mt.push(...Ae);let kt=Mt.concat(Ao.prelude.fragmentSource,Y.fragmentSource,c.fragmentSource).join(`
`),Kt=Mt.concat(Ao.prelude.vertexSource,Y.vertexSource,c.vertexSource).join(`
`);st(de)||(kt=function(en){return en.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Kt=function(en){return en.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Kt));const zt=de.createShader(de.FRAGMENT_SHADER);if(de.isContextLost())return void(this.failedToCreate=!0);if(de.shaderSource(zt,kt),de.compileShader(zt),!de.getShaderParameter(zt,de.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${de.getShaderInfoLog(zt)}`);de.attachShader(this.program,zt);const sn=de.createShader(de.VERTEX_SHADER);if(de.isContextLost())return void(this.failedToCreate=!0);if(de.shaderSource(sn,Kt),de.compileShader(sn),!de.getShaderParameter(sn,de.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${de.getShaderInfoLog(sn)}`);de.attachShader(this.program,sn),this.attributes={};const bn={};this.numAttributes=ze.length;for(let en=0;en<this.numAttributes;en++)ze[en]&&(de.bindAttribLocation(this.program,en,ze[en]),this.attributes[ze[en]]=en);if(de.linkProgram(this.program),!de.getProgramParameter(this.program,de.LINK_STATUS))throw new Error(`Program failed to link: ${de.getProgramInfoLog(this.program)}`);de.deleteShader(sn),de.deleteShader(zt);for(let en=0;en<Tt.length;en++){const ln=Tt[en];if(ln&&!bn[ln]){const Cn=de.getUniformLocation(this.program,ln);Cn&&(bn[ln]=Cn)}}this.fixedUniforms=M(a,bn),this.terrainUniforms=((en,ln)=>({u_depth:new o.bH(en,ln.u_depth),u_terrain:new o.bH(en,ln.u_terrain),u_terrain_dim:new o.b8(en,ln.u_terrain_dim),u_terrain_matrix:new o.bJ(en,ln.u_terrain_matrix),u_terrain_unpack:new o.bK(en,ln.u_terrain_unpack),u_terrain_exaggeration:new o.b8(en,ln.u_terrain_exaggeration)}))(a,bn),this.projectionUniforms=((en,ln)=>({u_projection_matrix:new o.bJ(en,ln.u_projection_matrix),u_projection_tile_mercator_coords:new o.bK(en,ln.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bK(en,ln.u_projection_clipping_plane),u_projection_transition:new o.b8(en,ln.u_projection_transition),u_projection_fallback_matrix:new o.bJ(en,ln.u_projection_fallback_matrix)}))(a,bn),this.binderUniforms=v?v.getUniforms(a,bn):[]}draw(a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be,ze,He,ft,dt,pt,wt,Tt){const Mt=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(v),a.setStencilMode(M),a.setColorMode(I),a.setCullFace(z),ee){a.activeTexture.set(Mt.TEXTURE2),Mt.bindTexture(Mt.TEXTURE_2D,ee.depthTexture),a.activeTexture.set(Mt.TEXTURE3),Mt.bindTexture(Mt.TEXTURE_2D,ee.texture);for(const Kt in this.terrainUniforms)this.terrainUniforms[Kt].set(ee[Kt])}if(Ae)for(const Kt in Ae)this.projectionUniforms[gd[Kt]].set(Ae[Kt]);if(Y)for(const Kt in this.fixedUniforms)this.fixedUniforms[Kt].set(Y[Kt]);dt&&dt.setUniforms(a,this.binderUniforms,He,{zoom:ft});let kt=0;switch(c){case Mt.LINES:kt=2;break;case Mt.TRIANGLES:kt=3;break;case Mt.LINE_STRIP:kt=1}for(const Kt of ze.get()){const zt=Kt.vaos||(Kt.vaos={});(zt[de]||(zt[de]=new qh)).bind(a,this,Oe,dt?dt.getPaintVertexBuffers():[],Be,Kt.vertexOffset,pt,wt,Tt),Mt.drawElements(c,Kt.primitiveLength*kt,Mt.UNSIGNED_SHORT,Kt.primitiveOffset*kt*2)}}}function Nu(O,a,c){const v=1/o.az(c,1,a.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),I=c.tileSize*Math.pow(2,a.transform.tileZoom)/M,z=I*(c.tileID.canonical.x+c.tileID.wrap*M),Y=I*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[v,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[z>>16,Y>>16],u_pixel_coord_lower:[65535&z,65535&Y]}}const Es=(O,a,c,v)=>{const M=O.style.light,I=M.properties.get("position"),z=[I.x,I.y,I.z],Y=o.bN();M.properties.get("anchor")==="viewport"&&o.bO(Y,O.transform.bearingInRadians),o.bP(z,z,Y);const ee=O.transform.transformLightDirection(z),Ae=M.properties.get("color");return{u_lightpos:z,u_lightpos_globe:ee,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[Ae.r,Ae.g,Ae.b],u_vertical_gradient:+a,u_opacity:c,u_fill_translate:v}},gu=(O,a,c,v,M,I,z)=>o.e(Es(O,a,c,v),Nu(I,O,z),{u_height_factor:-Math.pow(2,M.overscaledZ)/z.tileSize/8}),uf=(O,a,c,v)=>o.e(Nu(a,O,c),{u_fill_translate:v}),nh=(O,a)=>({u_world:O,u_fill_translate:a}),_h=(O,a,c,v,M)=>o.e(uf(O,a,c,M),{u_world:v}),kc=(O,a,c,v,M)=>{const I=O.transform;let z,Y,ee=0;if(c.paint.get("circle-pitch-alignment")==="map"){const Ae=o.az(a,1,I.zoom);z=!0,Y=[Ae,Ae],ee=Ae/(o.Z*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*M}else z=!1,Y=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:Y,u_globe_extrude_scale:ee,u_translate:v}},Rp=O=>({u_pixel_extrude_scale:[1/O.width,1/O.height]}),Hh=O=>({u_viewport_size:[O.width,O.height]}),vd=(O,a=1)=>({u_color:O,u_overlay:0,u_overlay_scale:a}),Pc=(O,a,c,v)=>{const M=o.az(O,1,a)/(o.Z*Math.pow(2,O.tileID.overscaledZ))*2*Math.PI*v;return{u_extrude_scale:o.az(O,1,a),u_intensity:c,u_globe_extrude_scale:M}},Dp=(O,a,c,v)=>{const M=o.K();o.bQ(M,0,O.width,O.height,0,0,1);const I=O.context.gl;return{u_matrix:M,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:c,u_color_ramp:v,u_opacity:a.paint.get("heatmap-opacity")}},cf=(O,a,c)=>{const v=c.paint.get("hillshade-accent-color");let M;switch(c.paint.get("hillshade-method")){case"basic":M=4;break;case"combined":M=1;break;case"igor":M=2;break;case"multidirectional":M=3;break;default:M=0}const I=c.getIlluminationProperties();for(let z=0;z<I.directionRadians.length;z++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(I.directionRadians[z]+=O.transform.bearingInRadians);return{u_image:0,u_latrange:Zh(0,a.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:I.altitudeRadians,u_azimuths:I.directionRadians,u_accent:v,u_method:M,u_highlights:I.highlightColor,u_shadows:I.shadowColor}},OA=(O,a)=>{const c=a.stride,v=o.K();return o.bQ(v,0,o.Z,-8192,0,0,1),o.L(v,v,[0,-8192,0]),{u_matrix:v,u_image:1,u_dimension:[c,c],u_zoom:O.overscaledZ,u_unpack:a.getUnpackVector()}};function Zh(O,a){const c=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new o.$(0,v/c).toLngLat().lat,new o.$(0,(v+1)/c).toLngLat().lat]}const Ml=(O,a,c,v)=>{const M=O.transform;return{u_translation:fl(O,a,c),u_ratio:v/o.az(a,1,M.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},Gu=(O,a,c,v,M)=>o.e(Ml(O,a,c,v),{u_image:0,u_image_height:M}),bh=(O,a,c,v,M)=>{const I=O.transform,z=_d(a,I);return{u_translation:fl(O,a,c),u_texsize:a.imageAtlasTexture.size,u_ratio:v/o.az(a,1,I.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[z,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Cd=(O,a,c,v,M,I)=>{const z=O.lineAtlas,Y=_d(a,O.transform),ee=c.layout.get("line-cap")==="round",Ae=z.getDash(M.from,ee),de=z.getDash(M.to,ee),Oe=Ae.width*I.fromScale,Be=de.width*I.toScale;return o.e(Ml(O,a,c,v),{u_patternscale_a:[Y/Oe,-Ae.height/2],u_patternscale_b:[Y/Be,-de.height/2],u_sdfgamma:z.width/(256*Math.min(Oe,Be)*O.pixelRatio)/2,u_image:0,u_tex_y_a:Ae.y,u_tex_y_b:de.y,u_mix:I.t})};function _d(O,a){return 1/o.az(O,1,a.tileZoom)}function fl(O,a,c){return o.aA(O.transform,a,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Rc=(O,a,c,v,M)=>{return{u_tl_parent:O,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(z=v.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(I=v.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:Dc(v.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var I,z};function Dc(O){O*=Math.PI/180;const a=Math.sin(O),c=Math.cos(O);return[(2*c+1)/3,(-Math.sqrt(3)*a-c+1)/3,(Math.sqrt(3)*a-c+1)/3]}const ju=(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be)=>{const ze=z.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ze.width/ze.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:Y,u_coord_matrix:ee,u_is_text:+de,u_pitch_with_map:+v,u_is_along_line:M,u_is_variable_anchor:I,u_texsize:Oe,u_texture:0,u_translation:Ae,u_pitched_scale:Be}},qf=(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be,ze)=>{const He=z.transform;return o.e(ju(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe,ze),{u_gamma_scale:v?Math.cos(He.pitch*Math.PI/180)*He.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},hf=(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be)=>o.e(qf(O,a,c,v,M,I,z,Y,ee,Ae,!0,de,0,Be),{u_texsize_icon:Oe,u_texture_icon:1}),bd=(O,a)=>({u_opacity:O,u_color:a}),xd=(O,a,c,v,M)=>o.e(function(I,z,Y,ee){const Ae=Y.imageManager.getPattern(I.from.toString()),de=Y.imageManager.getPattern(I.to.toString()),{width:Oe,height:Be}=Y.imageManager.getPixelSize(),ze=Math.pow(2,ee.tileID.overscaledZ),He=ee.tileSize*Math.pow(2,Y.transform.tileZoom)/ze,ft=He*(ee.tileID.canonical.x+ee.tileID.wrap*ze),dt=He*ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ae.tl,u_pattern_br_a:Ae.br,u_pattern_tl_b:de.tl,u_pattern_br_b:de.br,u_texsize:[Oe,Be],u_mix:z.t,u_pattern_size_a:Ae.displaySize,u_pattern_size_b:de.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.az(ee,1,Y.transform.tileZoom),u_pixel_coord_upper:[ft>>16,dt>>16],u_pixel_coord_lower:[65535&ft,65535&dt]}}(c,M,a,v),{u_opacity:O}),rl=(O,a)=>{},pl={fillExtrusion:(O,a)=>({u_lightpos:new o.bL(O,a.u_lightpos),u_lightpos_globe:new o.bL(O,a.u_lightpos_globe),u_lightintensity:new o.b8(O,a.u_lightintensity),u_lightcolor:new o.bL(O,a.u_lightcolor),u_vertical_gradient:new o.b8(O,a.u_vertical_gradient),u_opacity:new o.b8(O,a.u_opacity),u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillExtrusionPattern:(O,a)=>({u_lightpos:new o.bL(O,a.u_lightpos),u_lightpos_globe:new o.bL(O,a.u_lightpos_globe),u_lightintensity:new o.b8(O,a.u_lightintensity),u_lightcolor:new o.bL(O,a.u_lightcolor),u_vertical_gradient:new o.b8(O,a.u_vertical_gradient),u_height_factor:new o.b8(O,a.u_height_factor),u_opacity:new o.b8(O,a.u_opacity),u_fill_translate:new o.bM(O,a.u_fill_translate),u_image:new o.bH(O,a.u_image),u_texsize:new o.bM(O,a.u_texsize),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade)}),fill:(O,a)=>({u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillPattern:(O,a)=>({u_image:new o.bH(O,a.u_image),u_texsize:new o.bM(O,a.u_texsize),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade),u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillOutline:(O,a)=>({u_world:new o.bM(O,a.u_world),u_fill_translate:new o.bM(O,a.u_fill_translate)}),fillOutlinePattern:(O,a)=>({u_world:new o.bM(O,a.u_world),u_image:new o.bH(O,a.u_image),u_texsize:new o.bM(O,a.u_texsize),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade),u_fill_translate:new o.bM(O,a.u_fill_translate)}),circle:(O,a)=>({u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_scale_with_map:new o.bH(O,a.u_scale_with_map),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_extrude_scale:new o.bM(O,a.u_extrude_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(O,a.u_globe_extrude_scale),u_translate:new o.bM(O,a.u_translate)}),collisionBox:(O,a)=>({u_pixel_extrude_scale:new o.bM(O,a.u_pixel_extrude_scale)}),collisionCircle:(O,a)=>({u_viewport_size:new o.bM(O,a.u_viewport_size)}),debug:(O,a)=>({u_color:new o.bI(O,a.u_color),u_overlay:new o.bH(O,a.u_overlay),u_overlay_scale:new o.b8(O,a.u_overlay_scale)}),depth:rl,clippingMask:rl,heatmap:(O,a)=>({u_extrude_scale:new o.b8(O,a.u_extrude_scale),u_intensity:new o.b8(O,a.u_intensity),u_globe_extrude_scale:new o.b8(O,a.u_globe_extrude_scale)}),heatmapTexture:(O,a)=>({u_matrix:new o.bJ(O,a.u_matrix),u_world:new o.bM(O,a.u_world),u_image:new o.bH(O,a.u_image),u_color_ramp:new o.bH(O,a.u_color_ramp),u_opacity:new o.b8(O,a.u_opacity)}),hillshade:(O,a)=>({u_image:new o.bH(O,a.u_image),u_latrange:new o.bM(O,a.u_latrange),u_exaggeration:new o.b8(O,a.u_exaggeration),u_altitudes:new o.bS(O,a.u_altitudes),u_azimuths:new o.bS(O,a.u_azimuths),u_accent:new o.bI(O,a.u_accent),u_method:new o.bH(O,a.u_method),u_shadows:new o.bR(O,a.u_shadows),u_highlights:new o.bR(O,a.u_highlights)}),hillshadePrepare:(O,a)=>({u_matrix:new o.bJ(O,a.u_matrix),u_image:new o.bH(O,a.u_image),u_dimension:new o.bM(O,a.u_dimension),u_zoom:new o.b8(O,a.u_zoom),u_unpack:new o.bK(O,a.u_unpack)}),line:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels)}),lineGradient:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels),u_image:new o.bH(O,a.u_image),u_image_height:new o.b8(O,a.u_image_height)}),linePattern:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_texsize:new o.bM(O,a.u_texsize),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_image:new o.bH(O,a.u_image),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels),u_scale:new o.bL(O,a.u_scale),u_fade:new o.b8(O,a.u_fade)}),lineSDF:(O,a)=>({u_translation:new o.bM(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bM(O,a.u_units_to_pixels),u_patternscale_a:new o.bM(O,a.u_patternscale_a),u_patternscale_b:new o.bM(O,a.u_patternscale_b),u_sdfgamma:new o.b8(O,a.u_sdfgamma),u_image:new o.bH(O,a.u_image),u_tex_y_a:new o.b8(O,a.u_tex_y_a),u_tex_y_b:new o.b8(O,a.u_tex_y_b),u_mix:new o.b8(O,a.u_mix)}),raster:(O,a)=>({u_tl_parent:new o.bM(O,a.u_tl_parent),u_scale_parent:new o.b8(O,a.u_scale_parent),u_buffer_scale:new o.b8(O,a.u_buffer_scale),u_fade_t:new o.b8(O,a.u_fade_t),u_opacity:new o.b8(O,a.u_opacity),u_image0:new o.bH(O,a.u_image0),u_image1:new o.bH(O,a.u_image1),u_brightness_low:new o.b8(O,a.u_brightness_low),u_brightness_high:new o.b8(O,a.u_brightness_high),u_saturation_factor:new o.b8(O,a.u_saturation_factor),u_contrast_factor:new o.b8(O,a.u_contrast_factor),u_spin_weights:new o.bL(O,a.u_spin_weights),u_coords_top:new o.bK(O,a.u_coords_top),u_coords_bottom:new o.bK(O,a.u_coords_bottom)}),symbolIcon:(O,a)=>({u_is_size_zoom_constant:new o.bH(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bH(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bJ(O,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(O,a.u_coord_matrix),u_is_text:new o.bH(O,a.u_is_text),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_is_along_line:new o.bH(O,a.u_is_along_line),u_is_variable_anchor:new o.bH(O,a.u_is_variable_anchor),u_texsize:new o.bM(O,a.u_texsize),u_texture:new o.bH(O,a.u_texture),u_translation:new o.bM(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),symbolSDF:(O,a)=>({u_is_size_zoom_constant:new o.bH(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bH(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bJ(O,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(O,a.u_coord_matrix),u_is_text:new o.bH(O,a.u_is_text),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_is_along_line:new o.bH(O,a.u_is_along_line),u_is_variable_anchor:new o.bH(O,a.u_is_variable_anchor),u_texsize:new o.bM(O,a.u_texsize),u_texture:new o.bH(O,a.u_texture),u_gamma_scale:new o.b8(O,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_is_halo:new o.bH(O,a.u_is_halo),u_translation:new o.bM(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),symbolTextAndIcon:(O,a)=>({u_is_size_zoom_constant:new o.bH(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bH(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bH(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bJ(O,a.u_label_plane_matrix),u_coord_matrix:new o.bJ(O,a.u_coord_matrix),u_is_text:new o.bH(O,a.u_is_text),u_pitch_with_map:new o.bH(O,a.u_pitch_with_map),u_is_along_line:new o.bH(O,a.u_is_along_line),u_is_variable_anchor:new o.bH(O,a.u_is_variable_anchor),u_texsize:new o.bM(O,a.u_texsize),u_texsize_icon:new o.bM(O,a.u_texsize_icon),u_texture:new o.bH(O,a.u_texture),u_texture_icon:new o.bH(O,a.u_texture_icon),u_gamma_scale:new o.b8(O,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_is_halo:new o.bH(O,a.u_is_halo),u_translation:new o.bM(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),background:(O,a)=>({u_opacity:new o.b8(O,a.u_opacity),u_color:new o.bI(O,a.u_color)}),backgroundPattern:(O,a)=>({u_opacity:new o.b8(O,a.u_opacity),u_image:new o.bH(O,a.u_image),u_pattern_tl_a:new o.bM(O,a.u_pattern_tl_a),u_pattern_br_a:new o.bM(O,a.u_pattern_br_a),u_pattern_tl_b:new o.bM(O,a.u_pattern_tl_b),u_pattern_br_b:new o.bM(O,a.u_pattern_br_b),u_texsize:new o.bM(O,a.u_texsize),u_mix:new o.b8(O,a.u_mix),u_pattern_size_a:new o.bM(O,a.u_pattern_size_a),u_pattern_size_b:new o.bM(O,a.u_pattern_size_b),u_scale_a:new o.b8(O,a.u_scale_a),u_scale_b:new o.b8(O,a.u_scale_b),u_pixel_coord_upper:new o.bM(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bM(O,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(O,a.u_tile_units_to_pixels)}),terrain:(O,a)=>({u_texture:new o.bH(O,a.u_texture),u_ele_delta:new o.b8(O,a.u_ele_delta),u_fog_matrix:new o.bJ(O,a.u_fog_matrix),u_fog_color:new o.bI(O,a.u_fog_color),u_fog_ground_blend:new o.b8(O,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(O,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bI(O,a.u_horizon_color),u_horizon_fog_blend:new o.b8(O,a.u_horizon_fog_blend),u_is_globe_mode:new o.b8(O,a.u_is_globe_mode)}),terrainDepth:(O,a)=>({u_ele_delta:new o.b8(O,a.u_ele_delta)}),terrainCoords:(O,a)=>({u_texture:new o.bH(O,a.u_texture),u_terrain_coords_id:new o.b8(O,a.u_terrain_coords_id),u_ele_delta:new o.b8(O,a.u_ele_delta)}),projectionErrorMeasurement:(O,a)=>({u_input:new o.b8(O,a.u_input),u_output_expected:new o.b8(O,a.u_output_expected)}),atmosphere:(O,a)=>({u_sun_pos:new o.bL(O,a.u_sun_pos),u_atmosphere_blend:new o.b8(O,a.u_atmosphere_blend),u_globe_position:new o.bL(O,a.u_globe_position),u_globe_radius:new o.b8(O,a.u_globe_radius),u_inv_proj_matrix:new o.bJ(O,a.u_inv_proj_matrix)}),sky:(O,a)=>({u_sky_color:new o.bI(O,a.u_sky_color),u_horizon_color:new o.bI(O,a.u_horizon_color),u_horizon:new o.bM(O,a.u_horizon),u_horizon_normal:new o.bM(O,a.u_horizon_normal),u_sky_horizon_blend:new o.b8(O,a.u_sky_horizon_blend),u_sky_blend:new o.b8(O,a.u_sky_blend)})};class $f{constructor(a,c,v){this.context=a;const M=a.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kp{constructor(a,c,v,M){this.length=c.length,this.attributes=v,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=a;const I=a.gl;this.buffer=I.createBuffer(),a.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,c){for(let v=0;v<this.attributes.length;v++){const M=c.attributes[this.attributes[v].name];M!==void 0&&a.enableVertexAttribArray(M)}}setVertexAttribPointers(a,c,v){for(let M=0;M<this.attributes.length;M++){const I=this.attributes[M],z=c.attributes[I.name];z!==void 0&&a.vertexAttribPointer(z,I.components,a[xh[I.type]],!1,this.itemSize,I.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class so{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ba extends so{getDefault(){return o.b7.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Mh extends so{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Md extends so{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class rh extends so{getDefault(){return[!0,!0,!0,!0]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class df extends so{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class ff extends so{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Kc extends so{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Wu extends so{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class rn extends so{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}}class In extends so{getDefault(){return[0,1]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class dn extends so{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}}class Lr extends so{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Ri extends so{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}}class Go extends so{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class ma extends so{getDefault(){return o.b7.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class es extends so{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class cc extends so{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}}class pf extends so{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class IA extends so{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class lA extends so{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class yu extends so{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class ja extends so{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class ga extends so{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class ih extends so{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Po extends so{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Fc extends so{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class vu extends so{getDefault(){return null}set(a){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class TA extends so{getDefault(){return null}set(a){var c;if(a===this.current&&!this.dirty)return;const v=this.gl;st(v)?v.bindVertexArray(a):(c=v.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class tu extends so{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Wa extends so{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Cu extends so{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class AA extends so{constructor(a,c){super(a),this.context=a,this.parent=c}getDefault(){return null}}class wl extends AA{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class hc extends AA{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class wd extends AA{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}const ml="Framebuffer is not complete";class Zi{constructor(a,c,v,M,I){this.context=a,this.width=c,this.height=v;const z=a.gl,Y=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new wl(a,Y),M)this.depthAttachment=I?new wd(a,Y):new hc(a,Y);else if(I)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(ml)}destroy(){const a=this.context.gl,c=this.colorAttachment.get();if(c&&a.deleteTexture(c),this.depthAttachment){const v=this.depthAttachment.get();v&&a.deleteRenderbuffer(v)}a.deleteFramebuffer(this.framebuffer)}}class Lc{constructor(a){var c,v;if(this.gl=a,this.clearColor=new Ba(this),this.clearDepth=new Mh(this),this.clearStencil=new Md(this),this.colorMask=new rh(this),this.depthMask=new df(this),this.stencilMask=new ff(this),this.stencilFunc=new Kc(this),this.stencilOp=new Wu(this),this.stencilTest=new rn(this),this.depthRange=new In(this),this.depthTest=new dn(this),this.depthFunc=new Lr(this),this.blend=new Ri(this),this.blendFunc=new Go(this),this.blendColor=new ma(this),this.blendEquation=new es(this),this.cullFace=new cc(this),this.cullFaceSide=new pf(this),this.frontFace=new IA(this),this.program=new lA(this),this.activeTexture=new yu(this),this.viewport=new ja(this),this.bindFramebuffer=new ga(this),this.bindRenderbuffer=new ih(this),this.bindTexture=new Po(this),this.bindVertexBuffer=new Fc(this),this.bindElementBuffer=new vu(this),this.bindVertexArray=new TA(this),this.pixelStoreUnpack=new tu(this),this.pixelStoreUnpackPremultiplyAlpha=new Wa(this),this.pixelStoreUnpackFlipY=new Cu(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),st(a)){this.HALF_FLOAT=a.HALF_FLOAT;const M=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=a.RGBA16F)!==null&&c!==void 0?c:M?.RGBA16F_EXT,this.RGB16F=(v=a.RGB16F)!==null&&v!==void 0?v:M?.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const M=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=M?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,c){return new $f(this,a,c)}createVertexBuffer(a,c,v){return new Kp(this,a,c,v)}createRenderbuffer(a,c,v){const M=this.gl,I=M.createRenderbuffer();return this.bindRenderbuffer.set(I),M.renderbufferStorage(M.RENDERBUFFER,a,c,v),this.bindRenderbuffer.set(null),I}createFramebuffer(a,c,v,M){return new Zi(this,a,c,v,M)}clear({color:a,depth:c,stencil:v}){const M=this.gl;let I=0;a&&(I|=M.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(I|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),v!==void 0&&(I|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),M.clear(I)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bE(a.blendFunction,Ii.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return st(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var c;return st(this.gl)?this.gl.deleteVertexArray(a):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let dc;function mf(O,a,c,v,M){const I=O.context,z=O.transform,Y=I.gl,ee=O.useProgram("collisionBox"),Ae=[];let de=0,Oe=0;for(let pt=0;pt<v.length;pt++){const wt=v[pt],Tt=a.getTile(wt).getBucket(c);if(!Tt)continue;const Mt=M?Tt.textCollisionBox:Tt.iconCollisionBox,kt=Tt.collisionCircleArray;kt.length>0&&(Ae.push({circleArray:kt,circleOffset:Oe,coord:wt}),de+=kt.length/4,Oe=de),Mt&&ee.draw(I,Y.LINES,Sr.disabled,J.disabled,O.colorModeForRenderPass(),Gi.disabled,Rp(O.transform),O.style.map.terrain&&O.style.map.terrain.getTerrainData(wt),z.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Mt.layoutVertexBuffer,Mt.indexBuffer,Mt.segments,null,O.transform.zoom,null,null,Mt.collisionVertexBuffer)}if(!M||!Ae.length)return;const Be=O.useProgram("collisionCircle"),ze=new o.bT;ze.resize(4*de),ze._trim();let He=0;for(const pt of Ae)for(let wt=0;wt<pt.circleArray.length/4;wt++){const Tt=4*wt,Mt=pt.circleArray[Tt+0],kt=pt.circleArray[Tt+1],Kt=pt.circleArray[Tt+2],zt=pt.circleArray[Tt+3];ze.emplace(He++,Mt,kt,Kt,zt,0),ze.emplace(He++,Mt,kt,Kt,zt,1),ze.emplace(He++,Mt,kt,Kt,zt,2),ze.emplace(He++,Mt,kt,Kt,zt,3)}(!dc||dc.length<2*de)&&(dc=function(pt){const wt=2*pt,Tt=new o.bV;Tt.resize(wt),Tt._trim();for(let Mt=0;Mt<wt;Mt++){const kt=6*Mt;Tt.uint16[kt+0]=4*Mt+0,Tt.uint16[kt+1]=4*Mt+1,Tt.uint16[kt+2]=4*Mt+2,Tt.uint16[kt+3]=4*Mt+2,Tt.uint16[kt+4]=4*Mt+3,Tt.uint16[kt+5]=4*Mt+0}return Tt}(de));const ft=I.createIndexBuffer(dc,!0),dt=I.createVertexBuffer(ze,o.bU.members,!0);for(const pt of Ae){const wt=Hh(O.transform);Be.draw(I,Y.TRIANGLES,Sr.disabled,J.disabled,O.colorModeForRenderPass(),Gi.disabled,wt,O.style.map.terrain&&O.style.map.terrain.getTerrainData(pt.coord),null,c.id,dt,ft,o.aJ.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,O.transform.zoom,null,null,null)}dt.destroy(),ft.destroy()}const uA=o.ad(new Float32Array(16));function oh(O,a,c,v,M,I){const{horizontalAlign:z,verticalAlign:Y}=o.aE(O);return new o.P((-(z-.5)*a/M+v[0])*I,(-(Y-.5)*c/M+v[1])*I)}function wh(O,a,c,v,M,I){const z=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let Y=v.mult(I);c||(Y=Y.rotate(-M));const ee=z.add(Y);return on(ee.x,ee.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(c){const Y=yi(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(O),ee=Math.atan(Y.y/Y.x)+(Y.x<0?Math.PI:0);return O.add(v.rotate(ee))}return O.add(v)}function Sd(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe){const Be=O.text.placedSymbolArray,ze=O.text.dynamicLayoutVertexArray,He=O.icon.dynamicLayoutVertexArray,ft={};ze.clear();for(let dt=0;dt<Be.length;dt++){const pt=Be.get(dt),wt=pt.hidden||!pt.crossTileID||O.allowVerticalPlacement&&!pt.placedOrientation?null:v[pt.crossTileID];if(wt){const Tt=new o.P(pt.anchorX,pt.anchorY),Mt={getElevation:Oe,width:M.width,height:M.height,pitchedLabelPlaneMatrix:I,pitchWithMap:c,transform:M,tileAnchorPoint:Tt,translation:Ae,unwrappedTileID:de},kt=c?qr(Tt.x,Tt.y,Mt):yi(Tt.x,Tt.y,Mt),Kt=ti(M.cameraToCenterDistance,kt.signedDistanceFromCamera);let zt=o.am(O.textSizeData,Y,pt)*Kt/o.ay;c&&(zt*=O.tilePixelRatio/z);const{width:sn,height:bn,anchor:en,textOffset:ln,textBoxScale:Cn}=wt,Ar=oh(en,sn,bn,ln,Cn,zt),cr=M.getPitchedTextCorrection(Tt.x+Ae[0],Tt.y+Ae[1],de),kn=wh(kt.point,Mt,a,Ar,-M.bearingInRadians,cr),Br=O.allowVerticalPlacement&&pt.placedOrientation===o.al.vertical?Math.PI/2:0;for(let Hr=0;Hr<pt.numGlyphs;Hr++)o.as(ze,kn,Br);ee&&pt.associatedIconIndex>=0&&(ft[pt.associatedIconIndex]={shiftedAnchor:kn,angle:Br})}else zs(pt.numGlyphs,ze)}if(ee){He.clear();const dt=O.icon.placedSymbolArray;for(let pt=0;pt<dt.length;pt++){const wt=dt.get(pt);if(wt.hidden)zs(wt.numGlyphs,He);else{const Tt=ft[pt];if(Tt)for(let Mt=0;Mt<wt.numGlyphs;Mt++)o.as(He,Tt.shiftedAnchor,Tt.angle);else zs(wt.numGlyphs,He)}}O.icon.dynamicLayoutVertexBuffer.updateData(He)}O.text.dynamicLayoutVertexBuffer.updateData(ze)}function us(O,a,c){return c.iconsInText&&a?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function Uc(O,a,c,v,M,I,z,Y,ee,Ae,de,Oe,Be){const ze=O.context,He=ze.gl,ft=O.transform,dt=Y==="map",pt=ee==="map",wt=Y!=="viewport"&&c.layout.get("symbol-placement")!=="point",Tt=dt&&!pt&&!wt,Mt=!c.layout.get("symbol-sort-key").isConstant();let kt=!1;const Kt=O.getDepthModeForSublayer(0,Sr.ReadOnly),zt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),sn=[],bn=ft.getCircleRadiusCorrection();for(const en of v){const ln=a.getTile(en),Cn=ln.getBucket(c);if(!Cn)continue;const Ar=M?Cn.text:Cn.icon;if(!Ar||!Ar.segments.get().length||!Ar.hasVisibleVertices)continue;const cr=Ar.programConfigurations.get(c.id),kn=M||Cn.sdfIcons,Br=M?Cn.textSizeData:Cn.iconSizeData,Hr=pt||ft.pitch!==0,Xi=O.useProgram(us(kn,M,Cn),cr),ts=o.ak(Br,ft.zoom),Ko=O.style.map.terrain&&O.style.map.terrain.getTerrainData(en);let jo,Rs,ho,ji,aa=[0,0],Ta=null;if(M)Rs=ln.glyphAtlasTexture,ho=He.LINEAR,jo=ln.glyphAtlasTexture.size,Cn.iconsInText&&(aa=ln.imageAtlasTexture.size,Ta=ln.imageAtlasTexture,ji=Hr||O.options.rotating||O.options.zooming||Br.kind==="composite"||Br.kind==="camera"?He.LINEAR:He.NEAREST);else{const ka=c.layout.get("icon-size").constantOr(0)!==1||Cn.iconsNeedLinear;Rs=ln.imageAtlasTexture,ho=kn||O.options.rotating||O.options.zooming||ka||Hr?He.LINEAR:He.NEAREST,jo=ln.imageAtlasTexture.size}const Ca=o.az(ln,1,O.transform.zoom),ao=dr(dt,O.transform,Ca),Vl=o.K();o.an(Vl,ao);const Hl=Tr(pt,dt,O.transform,Ca),pA=o.aA(ft,ln,I,z),Ou=ft.getProjectionData({overscaledTileID:en,applyGlobeMatrix:!Be,applyTerrainMatrix:!0}),FA=zt&&Cn.hasTextData(),au=c.layout.get("icon-text-fit")!=="none"&&FA&&Cn.hasIconData();if(wt){const ka=O.style.map.terrain?(Pl,ys)=>O.style.map.terrain.getElevation(en,Pl,ys):null,Qs=c.layout.get("text-rotation-alignment")==="map";jr(Cn,O,M,ao,Vl,pt,Ae,Qs,en.toUnwrapped(),ft.width,ft.height,pA,ka)}const Zl=M&&zt||au,mA=wt||Zl?uA:pt?ao:O.transform.clipSpaceToPixelsMatrix,ec=kn&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Xl;Xl=kn?Cn.iconsInText?hf(Br.kind,ts,Tt,pt,wt,Zl,O,mA,Hl,pA,jo,aa,bn):qf(Br.kind,ts,Tt,pt,wt,Zl,O,mA,Hl,pA,M,jo,0,bn):ju(Br.kind,ts,Tt,pt,wt,Zl,O,mA,Hl,pA,M,jo,bn);const jc={program:Xi,buffers:Ar,uniformValues:Xl,projectionData:Ou,atlasTexture:Rs,atlasTextureIcon:Ta,atlasInterpolation:ho,atlasInterpolationIcon:ji,isSDF:kn,hasHalo:ec};if(Mt&&Cn.canOverlap){kt=!0;const ka=Ar.segments.get();for(const Qs of ka)sn.push({segments:new o.aJ([Qs]),sortKey:Qs.sortKey,state:jc,terrainData:Ko})}else sn.push({segments:Ar.segments,sortKey:0,state:jc,terrainData:Ko})}kt&&sn.sort((en,ln)=>en.sortKey-ln.sortKey);for(const en of sn){const ln=en.state;if(ze.activeTexture.set(He.TEXTURE0),ln.atlasTexture.bind(ln.atlasInterpolation,He.CLAMP_TO_EDGE),ln.atlasTextureIcon&&(ze.activeTexture.set(He.TEXTURE1),ln.atlasTextureIcon&&ln.atlasTextureIcon.bind(ln.atlasInterpolationIcon,He.CLAMP_TO_EDGE)),ln.isSDF){const Cn=ln.uniformValues;ln.hasHalo&&(Cn.u_is_halo=1,_u(ln.buffers,en.segments,c,O,ln.program,Kt,de,Oe,Cn,ln.projectionData,en.terrainData)),Cn.u_is_halo=0}_u(ln.buffers,en.segments,c,O,ln.program,Kt,de,Oe,ln.uniformValues,ln.projectionData,en.terrainData)}}function _u(O,a,c,v,M,I,z,Y,ee,Ae,de){const Oe=v.context;M.draw(Oe,Oe.gl.TRIANGLES,I,z,Y,Gi.backCCW,ee,de,Ae,c.id,O.layoutVertexBuffer,O.indexBuffer,a,c.paint,v.transform.zoom,O.programConfigurations.get(c.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function kA(O,a,c,v,M){const I=O.context,z=I.gl,Y=J.disabled,ee=new Ii([z.ONE,z.ONE],o.b7.transparent,[!0,!0,!0,!0]),Ae=a.getBucket(c);if(!Ae)return;const de=v.key;let Oe=c.heatmapFbos.get(de);Oe||(Oe=Jh(I,a.tileSize,a.tileSize),c.heatmapFbos.set(de,Oe)),I.bindFramebuffer.set(Oe.framebuffer),I.viewport.set([0,0,a.tileSize,a.tileSize]),I.clear({color:o.b7.transparent});const Be=Ae.programConfigurations.get(c.id),ze=O.useProgram("heatmap",Be,!M),He=O.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ft=O.style.map.terrain.getTerrainData(v);ze.draw(I,z.TRIANGLES,Sr.disabled,Y,ee,Gi.disabled,Pc(a,O.transform.zoom,c.paint.get("heatmap-intensity"),1),ft,He,c.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,c.paint,O.transform.zoom,Be)}function Xh(O,a,c,v,M){const I=O.context,z=I.gl,Y=O.transform;I.setColorMode(O.colorModeForRenderPass());const ee=sh(I,a),Ae=c.key,de=a.heatmapFbos.get(Ae);if(!de)return;I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,de.colorAttachment.get()),I.activeTexture.set(z.TEXTURE1),ee.bind(z.LINEAR,z.CLAMP_TO_EDGE);const Oe=Y.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!v});O.useProgram("heatmapTexture").draw(I,z.TRIANGLES,Sr.disabled,J.disabled,O.colorModeForRenderPass(),Gi.disabled,Dp(O,a,0,1),null,Oe,a.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments,a.paint,Y.zoom),de.destroy(),a.heatmapFbos.delete(Ae)}function Jh(O,a,c){var v,M;const I=O.gl,z=I.createTexture();I.bindTexture(I.TEXTURE_2D,z),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const Y=(v=O.HALF_FLOAT)!==null&&v!==void 0?v:I.UNSIGNED_BYTE,ee=(M=O.RGBA16F)!==null&&M!==void 0?M:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,ee,a,c,0,I.RGBA,Y,null);const Ae=O.createFramebuffer(a,c,!1,!1);return Ae.colorAttachment.set(z),Ae}function sh(O,a){return a.colorRampTexture||(a.colorRampTexture=new le(O,a.colorRamp,O.gl.RGBA)),a.colorRampTexture}function fc(O,a,c,v,M){if(!c||!v||!v.imageAtlas)return;const I=v.imageAtlas.patternPositions;let z=I[c.to.toString()],Y=I[c.from.toString()];if(!z&&Y&&(z=Y),!Y&&z&&(Y=z),!z||!Y){const ee=M.getPaintProperty(a);z=I[ee],Y=I[ee]}z&&Y&&O.setConstantPatternPositions(z,Y)}function bu(O,a,c,v,M,I,z,Y){const ee=O.context.gl,Ae="fill-pattern",de=c.paint.get(Ae),Oe=de&&de.constantOr(1),Be=c.getCrossfadeParameters();let ze,He,ft,dt,pt;const wt=O.transform,Tt=c.paint.get("fill-translate"),Mt=c.paint.get("fill-translate-anchor");z?(He=Oe&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ze=ee.LINES):(He=Oe?"fillPattern":"fill",ze=ee.TRIANGLES);const kt=de.constantOr(null);for(const Kt of v){const zt=a.getTile(Kt);if(Oe&&!zt.patternsLoaded())continue;const sn=zt.getBucket(c);if(!sn)continue;const bn=sn.programConfigurations.get(c.id),en=O.useProgram(He,bn),ln=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Kt);Oe&&(O.context.activeTexture.set(ee.TEXTURE0),zt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),bn.updatePaintBuffers(Be)),fc(bn,Ae,kt,zt,c);const Cn=wt.getProjectionData({overscaledTileID:Kt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Ar=o.aA(wt,zt,Tt,Mt);if(z){dt=sn.indexBuffer2,pt=sn.segments2;const kn=[ee.drawingBufferWidth,ee.drawingBufferHeight];ft=He==="fillOutlinePattern"&&Oe?_h(O,Be,zt,kn,Ar):nh(kn,Ar)}else dt=sn.indexBuffer,pt=sn.segments,ft=Oe?uf(O,Be,zt,Ar):{u_fill_translate:Ar};const cr=O.stencilModeForClipping(Kt);en.draw(O.context,ze,M,cr,I,Gi.backCCW,ft,ln,Cn,c.id,sn.layoutVertexBuffer,dt,pt,c.paint,O.transform.zoom,bn)}}function ms(O,a,c,v,M,I,z,Y){const ee=O.context,Ae=ee.gl,de="fill-extrusion-pattern",Oe=c.paint.get(de),Be=Oe.constantOr(1),ze=c.getCrossfadeParameters(),He=c.paint.get("fill-extrusion-opacity"),ft=Oe.constantOr(null),dt=O.transform;for(const pt of v){const wt=a.getTile(pt),Tt=wt.getBucket(c);if(!Tt)continue;const Mt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(pt),kt=Tt.programConfigurations.get(c.id),Kt=O.useProgram(Be?"fillExtrusionPattern":"fillExtrusion",kt);Be&&(O.context.activeTexture.set(Ae.TEXTURE0),wt.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),kt.updatePaintBuffers(ze));const zt=dt.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});fc(kt,de,ft,wt,c);const sn=o.aA(dt,wt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),bn=c.paint.get("fill-extrusion-vertical-gradient"),en=Be?gu(O,bn,He,sn,pt,ze,wt):Es(O,bn,He,sn);Kt.draw(ee,ee.gl.TRIANGLES,M,I,z,Gi.backCCW,en,Mt,zt,c.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,c.paint,O.transform.zoom,kt,O.style.map.terrain&&Tt.centroidVertexBuffer)}}function ya(O,a,c,v,M,I,z,Y,ee){var Ae;const de=O.style.projection,Oe=O.context,Be=O.transform,ze=Oe.gl,He=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],ft=O.useProgram("hillshade",null,!1,He),dt=!O.options.moving;for(const pt of v){const wt=a.getTile(pt),Tt=wt.fbo;if(!Tt)continue;const Mt=de.getMeshFromTileID(Oe,pt.canonical,Y,!0,"raster"),kt=(Ae=O.style.map.terrain)===null||Ae===void 0?void 0:Ae.getTerrainData(pt);Oe.activeTexture.set(ze.TEXTURE0),ze.bindTexture(ze.TEXTURE_2D,Tt.colorAttachment.get());const Kt=Be.getProjectionData({overscaledTileID:pt,aligned:dt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0});ft.draw(Oe,ze.TRIANGLES,I,M[pt.overscaledZ],z,Gi.backCCW,cf(O,wt,c),kt,Kt,c.id,Mt.vertexBuffer,Mt.indexBuffer,Mt.segments)}}const Ed=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function ah(O,a,c,v,M,I,z,Y,ee=!1,Ae=!1){const de=v[v.length-1].overscaledZ,Oe=O.context,Be=Oe.gl,ze=O.useProgram("raster"),He=O.transform,ft=O.style.projection,dt=O.colorModeForRenderPass(),pt=!O.options.moving;for(const wt of v){const Tt=O.getDepthModeForSublayer(wt.overscaledZ-de,c.paint.get("raster-opacity")===1?Sr.ReadWrite:Sr.ReadOnly,Be.LESS),Mt=a.getTile(wt);Mt.registerFadeDuration(c.paint.get("raster-fade-duration"));const kt=a.findLoadedParent(wt,0),Kt=a.findLoadedSibling(wt),zt=Sh(Mt,kt||Kt||null,a,c,O.transform,O.style.map.terrain);let sn,bn;const en=c.paint.get("raster-resampling")==="nearest"?Be.NEAREST:Be.LINEAR;Oe.activeTexture.set(Be.TEXTURE0),Mt.texture.bind(en,Be.CLAMP_TO_EDGE,Be.LINEAR_MIPMAP_NEAREST),Oe.activeTexture.set(Be.TEXTURE1),kt?(kt.texture.bind(en,Be.CLAMP_TO_EDGE,Be.LINEAR_MIPMAP_NEAREST),sn=Math.pow(2,kt.tileID.overscaledZ-Mt.tileID.overscaledZ),bn=[Mt.tileID.canonical.x*sn%1,Mt.tileID.canonical.y*sn%1]):Mt.texture.bind(en,Be.CLAMP_TO_EDGE,Be.LINEAR_MIPMAP_NEAREST),Mt.texture.useMipmap&&Oe.extTextureFilterAnisotropic&&O.transform.pitch>20&&Be.texParameterf(Be.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax);const ln=O.style.map.terrain&&O.style.map.terrain.getTerrainData(wt),Cn=He.getProjectionData({overscaledTileID:wt,aligned:pt,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0}),Ar=Rc(bn||[0,0],sn||1,zt,c,Y),cr=ft.getMeshFromTileID(Oe,wt.canonical,I,z,"raster");ze.draw(Oe,Be.TRIANGLES,Tt,M?M[wt.overscaledZ]:J.disabled,dt,ee?Gi.frontCCW:Gi.backCCW,Ar,ln,Cn,c.id,cr.vertexBuffer,cr.indexBuffer,cr.segments)}}function Sh(O,a,c,v,M,I){const z=v.paint.get("raster-fade-duration");if(!I&&z>0){const Y=R.now(),ee=(Y-O.timeAdded)/z,Ae=a?(Y-a.timeAdded)/z:-1,de=c.getSource(),Oe=lt(M,{tileSize:de.tileSize,roundZoom:de.roundZoom}),Be=!a||Math.abs(a.tileID.overscaledZ-Oe)>Math.abs(O.tileID.overscaledZ-Oe),ze=Be&&O.refreshedUponExpiration?1:o.ae(Be?ee:1-Ae,0,1);return O.refreshedUponExpiration&&ee>=1&&(O.refreshedUponExpiration=!1),a?{opacity:1,mix:1-ze}:{opacity:ze,mix:0}}return{opacity:1,mix:0}}const Qu=new o.b7(1,0,0,1),lh=new o.b7(0,1,0,1),PA=new o.b7(0,0,1,1),pc=new o.b7(1,0,1,1),Sl=new o.b7(0,1,1,1);function xu(O,a,c,v){zc(O,0,a+c/2,O.transform.width,c,v)}function Mu(O,a,c,v){zc(O,a-c/2,0,c,O.transform.height,v)}function zc(O,a,c,v,M,I){const z=O.context,Y=z.gl;Y.enable(Y.SCISSOR_TEST),Y.scissor(a*O.pixelRatio,c*O.pixelRatio,v*O.pixelRatio,M*O.pixelRatio),z.clear({color:I}),Y.disable(Y.SCISSOR_TEST)}function bs(O,a,c){const v=O.context,M=v.gl,I=O.useProgram("debug"),z=Sr.disabled,Y=J.disabled,ee=O.colorModeForRenderPass(),Ae="$debug",de=O.style.map.terrain&&O.style.map.terrain.getTerrainData(c);v.activeTexture.set(M.TEXTURE0);const Oe=a.getTileByID(c.key).latestRawTileData,Be=Math.floor((Oe&&Oe.byteLength||0)/1024),ze=a.getTile(c).tileSize,He=512/Math.min(ze,512)*(c.overscaledZ/O.transform.zoom)*.5;let ft=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ft+=` => ${c.overscaledZ}`),function(pt,wt){pt.initDebugOverlayCanvas();const Tt=pt.debugOverlayCanvas,Mt=pt.context.gl,kt=pt.debugOverlayCanvas.getContext("2d");kt.clearRect(0,0,Tt.width,Tt.height),kt.shadowColor="white",kt.shadowBlur=2,kt.lineWidth=1.5,kt.strokeStyle="white",kt.textBaseline="top",kt.font="bold 36px Open Sans, sans-serif",kt.fillText(wt,5,5),kt.strokeText(wt,5,5),pt.debugOverlayTexture.update(Tt),pt.debugOverlayTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE)}(O,`${ft} ${Be}kB`);const dt=O.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(v,M.TRIANGLES,z,Y,Ii.alphaBlended,Gi.disabled,vd(o.b7.transparent,He),null,dt,Ae,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),I.draw(v,M.LINE_STRIP,z,Y,ee,Gi.disabled,vd(o.b7.red),de,dt,Ae,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function Yu(O,a,c,v){const{isRenderingGlobe:M}=v,I=O.context,z=I.gl,Y=O.transform,ee=O.colorModeForRenderPass(),Ae=O.getDepthModeFor3D(),de=O.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,O.width,O.height]);for(const Oe of c){const Be=a.getTerrainMesh(Oe.tileID),ze=O.renderToTexture.getTexture(Oe),He=a.getTerrainData(Oe.tileID);I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,ze.texture);const ft=a.getMeshFrameDelta(Y.zoom),dt=Y.calculateFogMatrix(Oe.tileID.toUnwrapped()),pt=$h(ft,dt,O.style.sky,Y.pitch,M),wt=Y.getProjectionData({overscaledTileID:Oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});de.draw(I,z.TRIANGLES,Ae,J.disabled,ee,Gi.backCCW,pt,He,wt,"terrain",Be.vertexBuffer,Be.indexBuffer,Be.segments)}}function Qa(O,a){if(!a.mesh){const c=new o.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const v=new o.aK;v.emplaceBack(0,1,2),v.emplaceBack(0,2,3),a.mesh=new xl(O.createVertexBuffer(c,Oo.members),O.createIndexBuffer(v),o.aJ.simpleSegment(0,0,c.length,v.length))}return a.mesh}class mc{constructor(a,c){this.context=new Lc(a),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Sa}resize(a,c,v){if(this.width=Math.floor(a*v),this.height=Math.floor(c*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const a=this.context,c=new o.aI;c.emplaceBack(0,0),c.emplaceBack(o.Z,0),c.emplaceBack(0,o.Z),c.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=a.createVertexBuffer(c,Oo.members),this.tileExtentSegments=o.aJ.simpleSegment(0,0,4,2);const v=new o.aI;v.emplaceBack(0,0),v.emplaceBack(o.Z,0),v.emplaceBack(0,o.Z),v.emplaceBack(o.Z,o.Z),this.debugBuffer=a.createVertexBuffer(v,Oo.members),this.debugSegments=o.aJ.simpleSegment(0,0,4,5);const M=new o.b_;M.emplaceBack(0,0,0,0),M.emplaceBack(o.Z,0,o.Z,0),M.emplaceBack(0,o.Z,0,o.Z),M.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=a.createVertexBuffer(M,Pp.members),this.rasterBoundsSegments=o.aJ.simpleSegment(0,0,4,2);const I=new o.aI;I.emplaceBack(0,0),I.emplaceBack(o.Z,0),I.emplaceBack(0,o.Z),I.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(I,Oo.members),this.rasterBoundsSegmentsPosOnly=o.aJ.simpleSegment(0,0,4,5);const z=new o.aI;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(z,Oo.members),this.viewportSegments=o.aJ.simpleSegment(0,0,4,2);const Y=new o.b$;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(Y);const ee=new o.aK;ee.emplaceBack(1,0,2),ee.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(ee);const Ae=this.context.gl;this.stencilClearMode=new J({func:Ae.ALWAYS,mask:0},0,255,Ae.ZERO,Ae.ZERO,Ae.ZERO),this.tileExtentMesh=new xl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const a=this.context,c=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=o.K();o.bQ(v,0,this.width,this.height,0,0,1),o.M(v,v,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:v,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:v};this.useProgram("clippingMask",null,!0).draw(a,c.TRIANGLES,Sr.disabled,this.stencilClearMode,Ii.disabled,Gi.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,c,v){if(this.currentStencilSource===a.source||!a.isTileClipped()||!c||!c.length)return;this.currentStencilSource=a.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(Ii.disabled),M.setDepthMode(Sr.disabled);const I={};for(const z of c)I[z.key]=this.nextStencilID++;this._renderTileMasks(I,c,v,!0),this._renderTileMasks(I,c,v,!1),this._tileClippingMaskIDs=I}_renderTileMasks(a,c,v,M){const I=this.context,z=I.gl,Y=this.style.projection,ee=this.transform,Ae=this.useProgram("clippingMask");for(const de of c){const Oe=a[de.key],Be=this.style.map.terrain&&this.style.map.terrain.getTerrainData(de),ze=Y.getMeshFromTileID(this.context,de.canonical,M,!0,"stencil"),He=ee.getProjectionData({overscaledTileID:de,applyGlobeMatrix:!v,applyTerrainMatrix:!0});Ae.draw(I,z.TRIANGLES,Sr.disabled,new J({func:z.ALWAYS,mask:0},Oe,255,z.KEEP,z.KEEP,z.REPLACE),Ii.disabled,v?Gi.disabled:Gi.backCCW,null,Be,He,"$clipping",ze.vertexBuffer,ze.indexBuffer,ze.segments)}}_renderTilesDepthBuffer(){const a=this.context,c=a.gl,v=this.style.projection,M=this.transform,I=this.useProgram("depth"),z=this.getDepthModeFor3D(),Y=ct(M,{tileSize:M.tileSize});for(const ee of Y){const Ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ee),de=v.getMeshFromTileID(this.context,ee.canonical,!0,!0,"raster"),Oe=M.getProjectionData({overscaledTileID:ee,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(a,c.TRIANGLES,z,J.disabled,Ii.disabled,Gi.backCCW,null,Ae,Oe,"$clipping",de.vertexBuffer,de.indexBuffer,de.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,c=this.context.gl;return new J({func:c.NOTEQUAL,mask:255},a,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(a){const c=this.context.gl;return new J({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){const c=this.context.gl,v=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),M=v[v.length-1].overscaledZ,I=v[0].overscaledZ-M+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const z={};for(let Y=0;Y<I;Y++)z[Y+M]=new J({func:c.GEQUAL,mask:255},Y+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=I,[z,v]}return[{[M]:J.disabled},v]}stencilConfigForOverlapTwoPass(a){const c=this.context.gl,v=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),M=v[v.length-1].overscaledZ,I=v[0].overscaledZ-M+1;if(this.clearStencil(),I>1){const z={},Y={};for(let ee=0;ee<I;ee++)z[ee+M]=new J({func:c.GREATER,mask:255},I+1+ee,255,c.KEEP,c.KEEP,c.REPLACE),Y[ee+M]=new J({func:c.GREATER,mask:255},1+ee,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*I+1,[z,Y,v]}return this.nextStencilID=3,[{[M]:new J({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new J({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Ii([a.CONSTANT_COLOR,a.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ii.unblended:Ii.alphaBlended}getDepthModeForSublayer(a,c,v){if(!this.opaquePassEnabledForLayer())return Sr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Sr(v||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new Sr(this.context.gl.LEQUAL,Sr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,c){var v,M;this.style=a,this.options=c,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(R.now()),this.imageManager.beginFrame();const I=this.style._order,z=this.style.sourceCaches,Y={},ee={},Ae={},de={isRenderingToTexture:!1,isRenderingGlobe:((v=a.projection)===null||v===void 0?void 0:v.transitionState)>0};for(const Be in z){const ze=z[Be];ze.used&&ze.prepare(this.context),Y[Be]=ze.getVisibleCoordinates(!1),ee[Be]=Y[Be].slice().reverse(),Ae[Be]=ze.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Be=0;Be<I.length;Be++)if(this.style._layers[I[Be]].is3D()){this.opaquePassCutoff=Be;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Be of I){const ze=this.style._layers[Be];if(!ze.hasOffscreenPass()||ze.isHidden(this.transform.zoom))continue;const He=ee[ze.source];(ze.type==="custom"||He.length)&&this.renderLayer(this,z[ze.source],ze,He,de)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:Be=>this.useProgram(Be)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Be,ze){const He=Be.context,ft=He.gl,dt=((Kt,zt,sn)=>{const bn=Math.cos(zt.rollInRadians),en=Math.sin(zt.rollInRadians),ln=Xe(zt),Cn=zt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Kt.properties.get("sky-color"),u_horizon_color:Kt.properties.get("horizon-color"),u_horizon:[(zt.width/2-ln*en)*sn,(zt.height/2+ln*bn)*sn],u_horizon_normal:[-en,bn],u_sky_horizon_blend:Kt.properties.get("sky-horizon-blend")*zt.height/2*sn,u_sky_blend:Cn}})(ze,Be.style.map.transform,Be.pixelRatio),pt=new Sr(ft.LEQUAL,Sr.ReadWrite,[0,1]),wt=J.disabled,Tt=Be.colorModeForRenderPass(),Mt=Be.useProgram("sky"),kt=Qa(He,ze);Mt.draw(He,ft.TRIANGLES,pt,wt,Tt,Gi.disabled,dt,null,void 0,"sky",kt.vertexBuffer,kt.indexBuffer,kt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const Be=this.style._layers[I[this.currentLayer]],ze=z[Be.source],He=Y[Be.source];this._renderTileClippingMasks(Be,He,!1),this.renderLayer(this,ze,Be,He,de)}this.renderPass="translucent";let Oe=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const Be=this.style._layers[I[this.currentLayer]],ze=z[Be.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Be,de))continue;this.opaquePassEnabledForLayer()||Oe||(Oe=!0,de.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const He=(Be.type==="symbol"?Ae:ee)[Be.source];this._renderTileClippingMasks(Be,Y[Be.source],!!this.renderToTexture),this.renderLayer(this,ze,Be,He,de)}if(de.isRenderingGlobe&&function(Be,ze,He){const ft=Be.context,dt=ft.gl,pt=Be.useProgram("atmosphere"),wt=new Sr(dt.LEQUAL,Sr.ReadOnly,[0,1]),Tt=Be.transform,Mt=function(Cn,Ar){const cr=Cn.properties.get("position"),kn=[-cr.x,-cr.y,-cr.z],Br=o.ad(new Float64Array(16));return Cn.properties.get("anchor")==="map"&&(o.a_(Br,Br,Ar.rollInRadians),o.a$(Br,Br,-Ar.pitchInRadians),o.a_(Br,Br,Ar.bearingInRadians),o.a$(Br,Br,Ar.center.lat*Math.PI/180),o.bp(Br,Br,-Ar.center.lng*Math.PI/180)),o.bZ(kn,kn,Br),kn}(He,Be.transform),kt=Tt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Kt=ze.properties.get("atmosphere-blend")*kt.projectionTransition;if(Kt===0)return;const zt=fi(Tt.worldSize,Tt.center.lat),sn=Tt.inverseProjectionMatrix,bn=new Float64Array(4);bn[3]=1,o.at(bn,bn,Tt.modelViewProjectionMatrix),bn[0]/=bn[3],bn[1]/=bn[3],bn[2]/=bn[3],bn[3]=1,o.at(bn,bn,sn),bn[0]/=bn[3],bn[1]/=bn[3],bn[2]/=bn[3],bn[3]=1;const en=((Cn,Ar,cr,kn,Br)=>({u_sun_pos:Cn,u_atmosphere_blend:Ar,u_globe_position:cr,u_globe_radius:kn,u_inv_proj_matrix:Br}))(Mt,Kt,[bn[0],bn[1],bn[2]],zt,sn),ln=Qa(ft,ze);pt.draw(ft,dt.TRIANGLES,wt,J.disabled,Ii.alphaBlended,Gi.disabled,en,null,null,"atmosphere",ln.vertexBuffer,ln.indexBuffer,ln.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Be=function(ze,He){let ft=null;const dt=Object.values(ze._layers).flatMap(Mt=>Mt.source&&!Mt.isHidden(He)?[ze.sourceCaches[Mt.source]]:[]),pt=dt.filter(Mt=>Mt.getSource().type==="vector"),wt=dt.filter(Mt=>Mt.getSource().type!=="vector"),Tt=Mt=>{(!ft||ft.getSource().maxzoom<Mt.getSource().maxzoom)&&(ft=Mt)};return pt.forEach(Mt=>Tt(Mt)),ft||wt.forEach(Mt=>Tt(Mt)),ft}(this.style,this.transform.zoom);Be&&function(ze,He,ft){for(let dt=0;dt<ft.length;dt++)bs(ze,He,ft[dt])}(this,Be,Be.getVisibleCoordinates())}this.options.showPadding&&function(Be){const ze=Be.transform.padding;xu(Be,Be.transform.height-(ze.top||0),3,Qu),xu(Be,ze.bottom||0,3,lh),Mu(Be,ze.left||0,3,PA),Mu(Be,Be.transform.width-(ze.right||0),3,pc);const He=Be.transform.centerPoint;(function(ft,dt,pt,wt){zc(ft,dt-1,pt-10,2,20,wt),zc(ft,dt-10,pt-1,20,2,wt)})(Be,He.x,Be.transform.height-He.y,Sl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=a?!o.c0(c,v):!o.c1(c,v)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(o.c2(c,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(I,z){const Y=I.context,ee=Y.gl,Ae=I.transform,de=Ii.unblended,Oe=new Sr(ee.LEQUAL,Sr.ReadWrite,[0,1]),Be=z.sourceCache.getRenderableTiles(),ze=I.useProgram("terrainDepth");Y.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),Y.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),Y.clear({color:o.b7.transparent,depth:1});for(const He of Be){const ft=z.getTerrainMesh(He.tileID),dt=z.getTerrainData(He.tileID),pt=Ae.getProjectionData({overscaledTileID:He.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),wt={u_ele_delta:z.getMeshFrameDelta(Ae.zoom)};ze.draw(Y,ee.TRIANGLES,Oe,J.disabled,de,Gi.backCCW,wt,dt,pt,"terrain",ft.vertexBuffer,ft.indexBuffer,ft.segments)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain),function(I,z){const Y=I.context,ee=Y.gl,Ae=I.transform,de=Ii.unblended,Oe=new Sr(ee.LEQUAL,Sr.ReadWrite,[0,1]),Be=z.getCoordsTexture(),ze=z.sourceCache.getRenderableTiles(),He=I.useProgram("terrainCoords");Y.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),Y.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),Y.clear({color:o.b7.transparent,depth:1}),z.coordsIndex=[];for(const ft of ze){const dt=z.getTerrainMesh(ft.tileID),pt=z.getTerrainData(ft.tileID);Y.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Be.texture);const wt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(Ae.zoom)},Tt=Ae.getProjectionData({overscaledTileID:ft.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});He.draw(Y,ee.TRIANGLES,Oe,J.disabled,de,Gi.backCCW,wt,pt,Tt,"terrain",dt.vertexBuffer,dt.indexBuffer,dt.segments),z.coordsIndex.push(ft.tileID.key)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain))}renderLayer(a,c,v,M,I){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(M||[]).length)&&(this.id=v.id,o.c3(v)?function(z,Y,ee,Ae,de,Oe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Be}=Oe,ze=J.disabled,He=z.colorModeForRenderPass();(ee._unevaluatedLayout.hasValue("text-variable-anchor")||ee._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ft,dt,pt,wt,Tt,Mt,kt,Kt,zt){const sn=dt.transform,bn=dt.style.map.terrain,en=Tt==="map",ln=Mt==="map";for(const Cn of ft){const Ar=wt.getTile(Cn),cr=Ar.getBucket(pt);if(!cr||!cr.text||!cr.text.segments.get().length)continue;const kn=o.ak(cr.textSizeData,sn.zoom),Br=o.az(Ar,1,dt.transform.zoom),Hr=dr(en,dt.transform,Br),Xi=pt.layout.get("icon-text-fit")!=="none"&&cr.hasIconData();if(kn){const ts=Math.pow(2,sn.zoom-Ar.tileID.overscaledZ),Ko=bn?(jo,Rs)=>bn.getElevation(Cn,jo,Rs):null;Sd(cr,en,ln,zt,sn,Hr,ts,kn,Xi,o.aA(sn,Ar,kt,Kt),Cn.toUnwrapped(),Ko)}}}(Ae,z,ee,Y,ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),de),ee.paint.get("icon-opacity").constantOr(1)!==0&&Uc(z,Y,ee,Ae,!1,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),ee.layout.get("icon-rotation-alignment"),ee.layout.get("icon-pitch-alignment"),ee.layout.get("icon-keep-upright"),ze,He,Be),ee.paint.get("text-opacity").constantOr(1)!==0&&Uc(z,Y,ee,Ae,!0,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.layout.get("text-keep-upright"),ze,He,Be),Y.map.showCollisionBoxes&&(mf(z,Y,ee,Ae,!0),mf(z,Y,ee,Ae,!1))}(a,c,v,M,this.style.placement.variableOffsets,I):o.c4(v)?function(z,Y,ee,Ae,de){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=de,Be=ee.paint.get("circle-opacity"),ze=ee.paint.get("circle-stroke-width"),He=ee.paint.get("circle-stroke-opacity"),ft=!ee.layout.get("circle-sort-key").isConstant();if(Be.constantOr(1)===0&&(ze.constantOr(1)===0||He.constantOr(1)===0))return;const dt=z.context,pt=dt.gl,wt=z.transform,Tt=z.getDepthModeForSublayer(0,Sr.ReadOnly),Mt=J.disabled,kt=z.colorModeForRenderPass(),Kt=[],zt=wt.getCircleRadiusCorrection();for(let sn=0;sn<Ae.length;sn++){const bn=Ae[sn],en=Y.getTile(bn),ln=en.getBucket(ee);if(!ln)continue;const Cn=ee.paint.get("circle-translate"),Ar=ee.paint.get("circle-translate-anchor"),cr=o.aA(wt,en,Cn,Ar),kn=ln.programConfigurations.get(ee.id),Br=z.useProgram("circle",kn),Hr=ln.layoutVertexBuffer,Xi=ln.indexBuffer,ts=z.style.map.terrain&&z.style.map.terrain.getTerrainData(bn),Ko={programConfiguration:kn,program:Br,layoutVertexBuffer:Hr,indexBuffer:Xi,uniformValues:kc(z,en,ee,cr,zt),terrainData:ts,projectionData:wt.getProjectionData({overscaledTileID:bn,applyGlobeMatrix:!Oe,applyTerrainMatrix:!0})};if(ft){const jo=ln.segments.get();for(const Rs of jo)Kt.push({segments:new o.aJ([Rs]),sortKey:Rs.sortKey,state:Ko})}else Kt.push({segments:ln.segments,sortKey:0,state:Ko})}ft&&Kt.sort((sn,bn)=>sn.sortKey-bn.sortKey);for(const sn of Kt){const{programConfiguration:bn,program:en,layoutVertexBuffer:ln,indexBuffer:Cn,uniformValues:Ar,terrainData:cr,projectionData:kn}=sn.state;en.draw(dt,pt.TRIANGLES,Tt,Mt,kt,Gi.backCCW,Ar,cr,kn,ee.id,ln,Cn,sn.segments,ee.paint,z.transform.zoom,bn)}}(a,c,v,M,I):o.c5(v)?function(z,Y,ee,Ae,de){if(ee.paint.get("heatmap-opacity")===0)return;const Oe=z.context,{isRenderingToTexture:Be,isRenderingGlobe:ze}=de;if(z.style.map.terrain){for(const He of Ae){const ft=Y.getTile(He);Y.hasRenderableParent(He)||(z.renderPass==="offscreen"?kA(z,ft,ee,He,ze):z.renderPass==="translucent"&&Xh(z,ee,He,Be,ze))}Oe.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(He,ft,dt,pt){const wt=He.context,Tt=wt.gl,Mt=He.transform,kt=J.disabled,Kt=new Ii([Tt.ONE,Tt.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(zt,sn,bn){const en=zt.gl;zt.activeTexture.set(en.TEXTURE1),zt.viewport.set([0,0,sn.width/4,sn.height/4]);let ln=bn.heatmapFbos.get(o.bW);ln?(en.bindTexture(en.TEXTURE_2D,ln.colorAttachment.get()),zt.bindFramebuffer.set(ln.framebuffer)):(ln=Jh(zt,sn.width/4,sn.height/4),bn.heatmapFbos.set(o.bW,ln))})(wt,He,dt),wt.clear({color:o.b7.transparent});for(let zt=0;zt<pt.length;zt++){const sn=pt[zt];if(ft.hasRenderableParent(sn))continue;const bn=ft.getTile(sn),en=bn.getBucket(dt);if(!en)continue;const ln=en.programConfigurations.get(dt.id),Cn=He.useProgram("heatmap",ln),Ar=Mt.getProjectionData({overscaledTileID:sn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),cr=Mt.getCircleRadiusCorrection();Cn.draw(wt,Tt.TRIANGLES,Sr.disabled,kt,Kt,Gi.backCCW,Pc(bn,Mt.zoom,dt.paint.get("heatmap-intensity"),cr),null,Ar,dt.id,en.layoutVertexBuffer,en.indexBuffer,en.segments,dt.paint,Mt.zoom,ln)}wt.viewport.set([0,0,He.width,He.height])}(z,Y,ee,Ae):z.renderPass==="translucent"&&function(He,ft){const dt=He.context,pt=dt.gl;dt.setColorMode(He.colorModeForRenderPass());const wt=ft.heatmapFbos.get(o.bW);wt&&(dt.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,wt.colorAttachment.get()),dt.activeTexture.set(pt.TEXTURE1),sh(dt,ft).bind(pt.LINEAR,pt.CLAMP_TO_EDGE),He.useProgram("heatmapTexture").draw(dt,pt.TRIANGLES,Sr.disabled,J.disabled,He.colorModeForRenderPass(),Gi.disabled,Dp(He,ft,0,1),null,null,ft.id,He.viewportBuffer,He.quadTriangleIndexBuffer,He.viewportSegments,ft.paint,He.transform.zoom))}(z,ee)}(a,c,v,M,I):o.c6(v)?function(z,Y,ee,Ae,de){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=de,Be=ee.paint.get("line-opacity"),ze=ee.paint.get("line-width");if(Be.constantOr(1)===0||ze.constantOr(1)===0)return;const He=z.getDepthModeForSublayer(0,Sr.ReadOnly),ft=z.colorModeForRenderPass(),dt=ee.paint.get("line-dasharray"),pt=ee.paint.get("line-pattern"),wt=pt.constantOr(1),Tt=ee.paint.get("line-gradient"),Mt=ee.getCrossfadeParameters(),kt=wt?"linePattern":dt?"lineSDF":Tt?"lineGradient":"line",Kt=z.context,zt=Kt.gl,sn=z.transform;let bn=!0;for(const en of Ae){const ln=Y.getTile(en);if(wt&&!ln.patternsLoaded())continue;const Cn=ln.getBucket(ee);if(!Cn)continue;const Ar=Cn.programConfigurations.get(ee.id),cr=z.context.program.get(),kn=z.useProgram(kt,Ar),Br=bn||kn.program!==cr,Hr=z.style.map.terrain&&z.style.map.terrain.getTerrainData(en),Xi=pt.constantOr(null);if(Xi&&ln.imageAtlas){const ho=ln.imageAtlas,ji=ho.patternPositions[Xi.to.toString()],aa=ho.patternPositions[Xi.from.toString()];ji&&aa&&Ar.setConstantPatternPositions(ji,aa)}const ts=sn.getProjectionData({overscaledTileID:en,applyGlobeMatrix:!Oe,applyTerrainMatrix:!0}),Ko=sn.getPixelScale(),jo=wt?bh(z,ln,ee,Ko,Mt):dt?Cd(z,ln,ee,Ko,dt,Mt):Tt?Gu(z,ln,ee,Ko,Cn.lineClipsArray.length):Ml(z,ln,ee,Ko);if(wt)Kt.activeTexture.set(zt.TEXTURE0),ln.imageAtlasTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE),Ar.updatePaintBuffers(Mt);else if(dt&&(Br||z.lineAtlas.dirty))Kt.activeTexture.set(zt.TEXTURE0),z.lineAtlas.bind(Kt);else if(Tt){const ho=Cn.gradients[ee.id];let ji=ho.texture;if(ee.gradientVersion!==ho.version){let aa=256;if(ee.stepInterpolant){const Ta=Y.getSource().maxzoom,Ca=en.canonical.z===Ta?Math.ceil(1<<z.transform.maxZoom-en.canonical.z):1;aa=o.ae(o.bX(Cn.maxLineLength/o.Z*1024*Ca),256,Kt.maxTextureSize)}ho.gradient=o.bY({expression:ee.gradientExpression(),evaluationKey:"lineProgress",resolution:aa,image:ho.gradient||void 0,clips:Cn.lineClipsArray}),ho.texture?ho.texture.update(ho.gradient):ho.texture=new le(Kt,ho.gradient,zt.RGBA),ho.version=ee.gradientVersion,ji=ho.texture}Kt.activeTexture.set(zt.TEXTURE0),ji.bind(ee.stepInterpolant?zt.NEAREST:zt.LINEAR,zt.CLAMP_TO_EDGE)}const Rs=z.stencilModeForClipping(en);kn.draw(Kt,zt.TRIANGLES,He,Rs,ft,Gi.disabled,jo,Hr,ts,ee.id,Cn.layoutVertexBuffer,Cn.indexBuffer,Cn.segments,ee.paint,z.transform.zoom,Ar,Cn.layoutVertexBuffer2),bn=!1}}(a,c,v,M,I):o.c7(v)?function(z,Y,ee,Ae,de){const Oe=ee.paint.get("fill-color"),Be=ee.paint.get("fill-opacity");if(Be.constantOr(1)===0)return;const{isRenderingToTexture:ze}=de,He=z.colorModeForRenderPass(),ft=ee.paint.get("fill-pattern"),dt=z.opaquePassEnabledForLayer()&&!ft.constantOr(1)&&Oe.constantOr(o.b7.transparent).a===1&&Be.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===dt){const pt=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Sr.ReadWrite:Sr.ReadOnly);bu(z,Y,ee,Ae,pt,He,!1,ze)}if(z.renderPass==="translucent"&&ee.paint.get("fill-antialias")){const pt=z.getDepthModeForSublayer(ee.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);bu(z,Y,ee,Ae,pt,He,!0,ze)}}(a,c,v,M,I):o.c8(v)?function(z,Y,ee,Ae,de){const Oe=ee.paint.get("fill-extrusion-opacity");if(Oe===0)return;const{isRenderingToTexture:Be}=de;if(z.renderPass==="translucent"){const ze=new Sr(z.context.gl.LEQUAL,Sr.ReadWrite,z.depthRangeFor3D);if(Oe!==1||ee.paint.get("fill-extrusion-pattern").constantOr(1))ms(z,Y,ee,Ae,ze,J.disabled,Ii.disabled,Be),ms(z,Y,ee,Ae,ze,z.stencilModeFor3D(),z.colorModeForRenderPass(),Be);else{const He=z.colorModeForRenderPass();ms(z,Y,ee,Ae,ze,J.disabled,He,Be)}}}(a,c,v,M,I):o.c9(v)?function(z,Y,ee,Ae,de){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=de,Be=z.context,ze=z.style.projection.useSubdivision,He=z.getDepthModeForSublayer(0,Sr.ReadOnly),ft=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(dt,pt,wt,Tt,Mt,kt,Kt){const zt=dt.context,sn=zt.gl;for(const bn of wt){const en=pt.getTile(bn),ln=en.dem;if(!ln||!ln.data||!en.needsHillshadePrepare)continue;const Cn=ln.dim,Ar=ln.stride,cr=ln.getPixels();if(zt.activeTexture.set(sn.TEXTURE1),zt.pixelStoreUnpackPremultiplyAlpha.set(!1),en.demTexture=en.demTexture||dt.getTileTexture(Ar),en.demTexture){const Br=en.demTexture;Br.update(cr,{premultiply:!1}),Br.bind(sn.NEAREST,sn.CLAMP_TO_EDGE)}else en.demTexture=new le(zt,cr,sn.RGBA,{premultiply:!1}),en.demTexture.bind(sn.NEAREST,sn.CLAMP_TO_EDGE);zt.activeTexture.set(sn.TEXTURE0);let kn=en.fbo;if(!kn){const Br=new le(zt,{width:Cn,height:Cn,data:null},sn.RGBA);Br.bind(sn.LINEAR,sn.CLAMP_TO_EDGE),kn=en.fbo=zt.createFramebuffer(Cn,Cn,!0,!1),kn.colorAttachment.set(Br.texture)}zt.bindFramebuffer.set(kn.framebuffer),zt.viewport.set([0,0,Cn,Cn]),dt.useProgram("hillshadePrepare").draw(zt,sn.TRIANGLES,Mt,kt,Kt,Gi.disabled,OA(en.tileID,ln),null,null,Tt.id,dt.rasterBoundsBuffer,dt.quadTriangleIndexBuffer,dt.rasterBoundsSegments),en.needsHillshadePrepare=!1}})(z,Y,Ae,ee,He,J.disabled,ft),Be.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(ze){const[dt,pt,wt]=z.stencilConfigForOverlapTwoPass(Ae);ya(z,Y,ee,wt,dt,He,ft,!1,Oe),ya(z,Y,ee,wt,pt,He,ft,!0,Oe)}else{const[dt,pt]=z.getStencilConfigForOverlapAndUpdateStencilID(Ae);ya(z,Y,ee,pt,dt,He,ft,!1,Oe)}}(a,c,v,M,I):o.ca(v)?function(z,Y,ee,Ae,de){if(z.renderPass!=="translucent"||ee.paint.get("raster-opacity")===0||!Ae.length)return;const{isRenderingToTexture:Oe}=de,Be=Y.getSource(),ze=z.style.projection.useSubdivision;if(Be instanceof Vn)ah(z,Y,ee,Ae,null,!1,!1,Be.tileCoords,Be.flippedWindingOrder,Oe);else if(ze){const[He,ft,dt]=z.stencilConfigForOverlapTwoPass(Ae);ah(z,Y,ee,dt,He,!1,!0,Ed,!1,Oe),ah(z,Y,ee,dt,ft,!0,!0,Ed,!1,Oe)}else{const[He,ft]=z.getStencilConfigForOverlapAndUpdateStencilID(Ae);ah(z,Y,ee,ft,He,!1,!0,Ed,!1,Oe)}}(a,c,v,M,I):o.cb(v)?function(z,Y,ee,Ae,de){const Oe=ee.paint.get("background-color"),Be=ee.paint.get("background-opacity");if(Be===0)return;const{isRenderingToTexture:ze}=de,He=z.context,ft=He.gl,dt=z.style.projection,pt=z.transform,wt=pt.tileSize,Tt=ee.paint.get("background-pattern");if(z.isPatternMissing(Tt))return;const Mt=!Tt&&Oe.a===1&&Be===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==Mt)return;const kt=J.disabled,Kt=z.getDepthModeForSublayer(0,Mt==="opaque"?Sr.ReadWrite:Sr.ReadOnly),zt=z.colorModeForRenderPass(),sn=z.useProgram(Tt?"backgroundPattern":"background"),bn=Ae||ct(pt,{tileSize:wt,terrain:z.style.map.terrain});Tt&&(He.activeTexture.set(ft.TEXTURE0),z.imageManager.bind(z.context));const en=ee.getCrossfadeParameters();for(const ln of bn){const Cn=pt.getProjectionData({overscaledTileID:ln,applyGlobeMatrix:!ze,applyTerrainMatrix:!0}),Ar=Tt?xd(Be,z,Tt,{tileID:ln,tileSize:wt},en):bd(Be,Oe),cr=z.style.map.terrain&&z.style.map.terrain.getTerrainData(ln),kn=dt.getMeshFromTileID(He,ln.canonical,!1,!0,"raster");sn.draw(He,ft.TRIANGLES,Kt,kt,zt,Gi.backCCW,Ar,cr,Cn,ee.id,kn.vertexBuffer,kn.indexBuffer,kn.segments)}}(a,0,v,M,I):o.cc(v)&&function(z,Y,ee,Ae){const{isRenderingGlobe:de}=Ae,Oe=z.context,Be=ee.implementation,ze=z.style.projection,He=z.transform,ft=He.getProjectionDataForCustomLayer(de),dt={farZ:He.farZ,nearZ:He.nearZ,fov:He.fov*Math.PI/180,modelViewProjectionMatrix:He.modelViewProjectionMatrix,projectionMatrix:He.projectionMatrix,shaderData:{variantName:ze.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ze.shaderPreludeCode.vertexSource}`,define:ze.shaderDefine},defaultProjectionData:ft},pt=Be.renderingMode?Be.renderingMode:"2d";if(z.renderPass==="offscreen"){const wt=Be.prerender;wt&&(z.setCustomLayerDefaults(),Oe.setColorMode(z.colorModeForRenderPass()),wt.call(Be,Oe.gl,dt),Oe.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),Oe.setColorMode(z.colorModeForRenderPass()),Oe.setStencilMode(J.disabled);const wt=pt==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Sr.ReadOnly);Oe.setDepthMode(wt),Be.render(Oe.gl,dt),Oe.setDirty(),z.setBaseState(),Oe.bindFramebuffer.set(null)}}(a,0,v,I))}saveTileTexture(a){const c=this._tileTextures[a.size[0]];c?c.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const c=this._tileTextures[a];return c&&c.length>0?c.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const c=this.imageManager.getPattern(a.from.toString()),v=this.imageManager.getPattern(a.to.toString());return!c||!v}useProgram(a,c,v=!1,M=[]){this.cache=this.cache||{};const I=!!this.style.map.terrain,z=this.style.projection,Y=v?Ao.projectionMercator:z.shaderPreludeCode,ee=v?Wl:z.shaderDefine,Ae=a+(c?c.cacheKey:"")+`/${v?Di:z.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(I?"/terrain":"")+(M?`/${M.join("/")}`:"");return this.cache[Ae]||(this.cache[Ae]=new yd(this.context,Ao[a],c,pl[a],this._showOverdrawInspector,I,Y,ee,M)),this.cache[Ae]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:c}=this.context.gl;return this.width!==a||this.height!==c}}function Ql(O,a){let c,v=!1,M=null,I=null;const z=()=>{M=null,v&&(O.apply(I,c),M=setTimeout(z,a),v=!1)};return(...Y)=>(v=!0,I=this,c=Y,M||z(),M)}class wu{constructor(a){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let v;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(v=M)}),(v&&v[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:v,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const v=c.join("/");let M=v;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${v}`);let I=window.location.hash.replace(M,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let z=window.location.href.replace(/(#.+)?$/,I);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=Ql(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const c=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,M=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,M),z=Math.round(c.lng*I)/I,Y=Math.round(c.lat*I)/I,ee=this._map.getBearing(),Ae=this._map.getPitch();let de="";if(de+=a?`/${z}/${Y}/${v}`:`${v}/${Y}/${z}`,(ee||Ae)&&(de+="/"+Math.round(10*ee)/10),Ae&&(de+=`/${Math.round(Ae)}`),this._hashName){const Oe=this._hashName;let Be=!1;const ze=window.location.hash.slice(1).split("&").map(He=>{const ft=He.split("=")[0];return ft===Oe?(Be=!0,`${ft}=${de}`):He}).filter(He=>He);return Be||ze.push(`${Oe}=${de}`),`#${ze.join("&")}`}return`#${de}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.Q(+a[2],+a[1])}catch{return!1}const c=+a[0],v=+(a[3]||0),M=+(a[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&v>=-180&&v<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const El={linearity:.3,easing:o.cd(0,0,.3,1)},cA=o.e({deceleration:2500,maxSpeed:1400},El),Ah=o.e({deceleration:20,maxSpeed:1400},El),ot=o.e({deceleration:1e3,maxSpeed:360},El),Eh=o.e({deceleration:1e3,maxSpeed:90},El),Xs=o.e({deceleration:1e3,maxSpeed:360},El);class Ro{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:R.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,c=R.now();for(;a.length>0&&c-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)c.zoom+=I.zoomDelta||0,c.bearing+=I.bearingDelta||0,c.pitch+=I.pitchDelta||0,c.roll+=I.rollDelta||0,I.panDelta&&c.pan._add(I.panDelta),I.around&&(c.around=I.around),I.pinchAround&&(c.pinchAround=I.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const I=Bs(c.pan.mag(),v,o.e({},cA,a||{})),z=c.pan.mult(I.amount/c.pan.mag()),Y=this._map.cameraHelper.handlePanInertia(z,this._map.transform);M.center=Y.easingCenter,M.offset=Y.easingOffset,ai(M,I)}if(c.zoom){const I=Bs(c.zoom,v,Ah);M.zoom=this._map.transform.zoom+I.amount,ai(M,I)}if(c.bearing){const I=Bs(c.bearing,v,ot);M.bearing=this._map.transform.bearing+o.ae(I.amount,-179,179),ai(M,I)}if(c.pitch){const I=Bs(c.pitch,v,Eh);M.pitch=this._map.transform.pitch+I.amount,ai(M,I)}if(c.roll){const I=Bs(c.roll,v,Xs);M.roll=this._map.transform.roll+o.ae(I.amount,-179,179),ai(M,I)}if(M.zoom||M.bearing){const I=c.pinchAround===void 0?c.around:c.pinchAround;M.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function ai(O,a){(!O.duration||O.duration<a.duration)&&(O.duration=a.duration,O.easing=a.easing)}function Bs(O,a,c){const{maxSpeed:v,linearity:M,deceleration:I}=c,z=o.ae(O*M/(a/1e3),-v,v),Y=Math.abs(z)/(I*M);return{easing:c.easing,duration:1e3*Y,amount:z*(Y/2)}}class js extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,v,M={}){v=v instanceof MouseEvent?v:new MouseEvent(a,v);const I=P.mousePos(c.getCanvas(),v),z=c.unproject(I);super(a,o.e({point:I,lngLat:z,originalEvent:v},M)),this._defaultPrevented=!1,this.target=c}}class qu extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,v){const M=a==="touchend"?v.changedTouches:v.touches,I=P.touchPos(c.getCanvasContainer(),M),z=I.map(ee=>c.unproject(ee)),Y=I.reduce((ee,Ae,de,Oe)=>ee.add(Ae.div(Oe.length)),new o.P(0,0));super(a,{points:I,point:Y,lngLats:z,lngLat:c.unproject(Y),originalEvent:v}),this._defaultPrevented=!1}}class il extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,v){super(a,{originalEvent:v}),this._defaultPrevented=!1}}class Ps{constructor(a,c){this._map=a,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new il(a.type,this._map,a))}mousedown(a,c){return this._mousedownPos=c,this._firePreventable(new js(a.type,this._map,a))}mouseup(a){this._map.fire(new js(a.type,this._map,a))}click(a,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new js(a.type,this._map,a))}dblclick(a){return this._firePreventable(new js(a.type,this._map,a))}mouseover(a){this._map.fire(new js(a.type,this._map,a))}mouseout(a){this._map.fire(new js(a.type,this._map,a))}touchstart(a){return this._firePreventable(new qu(a.type,this._map,a))}touchmove(a){this._map.fire(new qu(a.type,this._map,a))}touchend(a){this._map.fire(new qu(a.type,this._map,a))}touchcancel(a){this._map.fire(new qu(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Os{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new js(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new js("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new js(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nu{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class Ya{constructor(a,c){this._map=a,this._tr=new nu(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,c){this.isEnabled()&&a.shiftKey&&a.button===0&&(P.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(a,c){if(!this._active)return;const v=c;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=v,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const I=Math.min(M.x,v.x),z=Math.max(M.x,v.x),Y=Math.min(M.y,v.y),ee=Math.max(M.y,v.y);P.setTransform(this._box,`translate(${I}px,${Y}px)`),this._box.style.width=z-I+"px",this._box.style.height=ee-Y+"px"}mouseupWindow(a,c){if(!this._active||a.button!==0)return;const v=this._startPos,M=c;if(this.reset(),P.suppressClick(),v.x!==M.x||v.y!==M.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:I=>I.fitScreenCoordinates(v,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,c){return this._map.fire(new o.l(a,{originalEvent:c}))}}function gl(O,a){if(O.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${a.length}`);const c={};for(let v=0;v<O.length;v++)c[O[v].identifier]=a[v];return c}class yl{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,c,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=function(M){const I=new o.P(0,0);for(const z of M)I._add(z);return I.div(M.length)}(c),this.touches=gl(v,c)))}touchmove(a,c,v){if(this.aborted||!this.centroid)return;const M=gl(v,c);for(const I in this.touches){const z=M[I];(!z||z.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(a,c,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class $u{constructor(a){this.singleTap=new yl(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,c,v){this.singleTap.touchstart(a,c,v)}touchmove(a,c,v){this.singleTap.touchmove(a,c,v)}touchend(a,c,v){const M=this.singleTap.touchend(a,c,v);if(M){const I=a.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(M)<30;if(I&&z||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class Bl{constructor(a){this._tr=new nu(a),this._zoomIn=new $u({numTouches:1,numTaps:2}),this._zoomOut=new $u({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,c,v){this._zoomIn.touchstart(a,c,v),this._zoomOut.touchstart(a,c,v)}touchmove(a,c,v){this._zoomIn.touchmove(a,c,v),this._zoomOut.touchmove(a,c,v)}touchend(a,c,v){const M=this._zoomIn.touchend(a,c,v),I=this._zoomOut.touchend(a,c,v),z=this._tr;return M?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(M)},{originalEvent:a})}):I?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(I)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oa{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const c=this._moveFunction(...a);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(a,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,c){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(v,M))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&P.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ru={0:1,2:2};class uh{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const c=P.mouseButton(a);this._eventButton=c}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(c,v){const M=ru[v];return c.buttons===void 0||(c.buttons&M)!==M}(a,this._eventButton)}isValidEndEvent(a){return P.mouseButton(a)===this._eventButton}}class Js{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class ch{constructor(a=new uh({checkCorrectEvent:()=>!0}),c=new Js){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(a,c,v){return a instanceof MouseEvent?c(a):typeof TouchEvent<"u"&&a instanceof TouchEvent?v(a):void 0}startMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Yl=O=>{O.mousedown=O.dragStart,O.mousemoveWindow=O.dragMove,O.mouseup=O.dragEnd,O.contextmenu=a=>{a.preventDefault()}};class gf{constructor(a,c){this._clickTolerance=a.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,c,v){return this._calculateTransform(a,c,v)}touchmove(a,c,v){if(this._active){if(!this._shouldBePrevented(v.length))return a.preventDefault(),this._calculateTransform(a,c,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,c,v){this._calculateTransform(a,c,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,c,v){v.length>0&&(this._active=!0);const M=gl(v,c),I=new o.P(0,0),z=new o.P(0,0);let Y=0;for(const Ae in M){const de=M[Ae],Oe=this._touches[Ae];Oe&&(I._add(de),z._add(de.sub(Oe)),Y++,M[Ae]=de)}if(this._touches=M,this._shouldBePrevented(Y)||!z.mag())return;const ee=z.div(Y);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(Y),panDelta:ee}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,c,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([c[0],c[1]]))}touchmove(a,c,v){if(!this._firstTwoTouches)return;a.preventDefault();const[M,I]=this._firstTwoTouches,z=iu(v,c,M),Y=iu(v,c,I);if(!z||!Y)return;const ee=this._aroundCenter?null:z.add(Y).div(2);return this._move([z,Y],ee,a)}touchend(a,c,v){if(!this._firstTwoTouches)return;const[M,I]=this._firstTwoTouches,z=iu(v,c,M),Y=iu(v,c,I);z&&Y||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function iu(O,a,c){for(let v=0;v<O.length;v++)if(O[v].identifier===c)return a[v]}function gc(O,a){return Math.log(O/a)/Math.LN2}class ou extends hh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,c){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(gc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gc(this._distance,v),pinchAround:c}}}function ql(O,a){return 180*O.angleWith(a)/Math.PI}class Xn extends hh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,c,v){const M=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ql(this._vector,M),pinchAround:c}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const c=25/(Math.PI*this._minDiameter)*360,v=ql(a,this._startVector);return Math.abs(v)<c}}function Mo(O){return Math.abs(O.y)>Math.abs(O.x)}class Ol extends hh{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,c,v){super.touchstart(a,c,v),this._currentTouchCount=v.length}_start(a){this._lastPoints=a,Mo(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,c,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=a[0].sub(this._lastPoints[0]),I=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,I,v.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(M.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(a,c,v){if(this._valid!==void 0)return this._valid;const M=a.mag()>=2,I=c.mag()>=2;if(!M&&!I)return;if(!M||!I)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const z=a.y>0==c.y>0;return Mo(a)&&Mo(c)&&z}}const qa={panStep:100,bearingStep:15,pitchStep:10};class ea{constructor(a){this._tr=new nu(a);const c=qa;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let c=0,v=0,M=0,I=0,z=0;switch(a.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),I=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),I=1);break;case 38:a.shiftKey?M=1:(a.preventDefault(),z=-1);break;case 40:a.shiftKey?M=-1:(a.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(v=0,M=0),{cameraAnimation:Y=>{const ee=this._tr;Y.easeTo({duration:300,easeId:"keyboardHandler",easing:Su,zoom:c?Math.round(ee.zoom)+c*(a.shiftKey?2:1):ee.zoom,bearing:ee.bearing+v*this._bearingStep,pitch:ee.pitch+M*this._pitchStep,offset:[-I*this._panStep,-z*this._panStep],center:ee.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Su(O){return O*(2-O)}const RA=4.000244140625;class Ti{constructor(a,c){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=a,this._tr=new nu(a),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let c=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=R.now(),M=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,c!==0&&c%RA==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),a.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=a,this._delta-=c,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=P.mousePos(this._map.getCanvas(),a),v=this._tr;this._aroundPoint=this._aroundCenter?v.transform.locationToScreenPoint(o.Q.convert(v.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Y=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Y),typeof this._targetZoom=="number"&&(this._targetZoom+=Y)}if(this._delta!==0){const Y=this._type==="wheel"&&Math.abs(this._delta)>RA?this._wheelZoomRate:this._defaultZoomRate;let ee=2/(1+Math.exp(-Math.abs(this._delta*Y)));this._delta<0&&ee!==0&&(ee=1/ee);const Ae=typeof this._targetZoom!="number"?a.scale:o.ac(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ah(Ae*ee)).zoom,this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,v=this._startZoom,M=this._easing;let I,z=!1;if(this._type==="wheel"&&v&&M){const Y=R.now()-this._lastWheelEventTime,ee=Math.min((Y+5)/200,1),Ae=M(ee);I=o.B.number(v,c,Ae),ee<1?this._frameId||(this._frameId=!0):z=!0}else I=c,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!z,zoomDelta:I-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let c=o.cf;if(this._prevEase){const v=this._prevEase,M=(R.now()-v.start)/v.duration,I=v.easing(M+.01)-v.easing(M),z=.27/Math.sqrt(I*I+1e-4)*.01,Y=Math.sqrt(.0729-z*z);c=o.cd(z,Y,.25,1)}return this._prevEase={start:R.now(),duration:a,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yc{constructor(a,c){this._clickZoom=a,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yf{constructor(a){this._tr=new nu(a),this.reset()}reset(){this._active=!1}dblclick(a,c){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vu{constructor(){this._tap=new $u({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,c,v){if(!this._swipePoint)if(this._tapTime){const M=c[0],I=a.timeStamp-this._tapTime<500,z=this._tapPoint.dist(M)<30;I&&z?v.length>0&&(this._swipePoint=M,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(a,c,v)}touchmove(a,c,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const M=c[0],I=M.y-this._swipePoint.y;return this._swipePoint=M,a.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(a,c,v)}touchend(a,c,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const M=this._tap.touchend(a,c,v);M&&(this._tapTime=a.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc{constructor(a,c,v){this._el=a,this._mousePan=c,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ol{constructor(a,c,v,M){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=c,this._mousePitch=v,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class va{constructor(a,c,v,M){this._el=a,this._touchZoom=c,this._touchRotate=v,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gs{constructor(a,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",a);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=v,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const $l=O=>O.zoom||O.drag||O.roll||O.pitch||O.rotate;class vc extends o.l{}function Cc(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta||O.rollDelta}class Hu{constructor(a,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,I)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=M.type==="renderFrame"?void 0:M,Y={needsRenderFrame:!1},ee={},Ae={};for(const{handlerName:Be,handler:ze,allowed:He}of this._handlers){if(!ze.isEnabled())continue;let ft;if(this._blockedByActive(Ae,He,Be))ze.reset();else if(ze[I||M.type]){if(o.cg(M,I||M.type)){const dt=P.mousePos(this._map.getCanvas(),M);ft=ze[I||M.type](M,dt)}else if(o.ch(M,I||M.type)){const dt=this._getMapTouches(M.touches),pt=P.touchPos(this._map.getCanvas(),dt);ft=ze[I||M.type](M,pt,dt)}else o.ci(I||M.type)||(ft=ze[I||M.type](M));this.mergeHandlerResult(Y,ee,ft,Be,z),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()}(ft||ze.isActive())&&(Ae[Be]=ze)}const de={};for(const Be in this._previousActiveHandlers)Ae[Be]||(de[Be]=z);this._previousActiveHandlers=Ae,(Object.keys(de).length||Cc(Y))&&(this._changes.push([Y,ee,de]),this._triggerRenderFrame()),(Object.keys(Ae).length||Cc(Y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Oe}=Y;Oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Oe(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ro(a),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,I,z]of this._listeners)P.addEventListener(M,I,M===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[a,c,v]of this._listeners)P.removeEventListener(a,c,a===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(a){const c=this._map,v=c.getCanvasContainer();this._add("mapEvent",new Ps(c,a));const M=c.boxZoom=new Ya(c,a);this._add("boxZoom",M),a.interactive&&a.boxZoom&&M.enable();const I=c.cooperativeGestures=new gs(c,a.cooperativeGestures);this._add("cooperativeGestures",I),a.cooperativeGestures&&I.enable();const z=new Bl(c),Y=new yf(c);c.doubleClickZoom=new yc(Y,z),this._add("tapZoom",z),this._add("clickZoom",Y),a.interactive&&a.doubleClickZoom&&c.doubleClickZoom.enable();const ee=new Vu;this._add("tapDragZoom",ee);const Ae=c.touchPitch=new Ol(c);this._add("touchPitch",Ae),a.interactive&&a.touchPitch&&c.touchPitch.enable(a.touchPitch);const de=()=>c.project(c.getCenter()),Oe=function({enable:Mt,clickTolerance:kt,aroundCenter:Kt=!0,minPixelCenterThreshold:zt=100,rotateDegreesPerPixelMoved:sn=.8},bn){const en=new uh({checkCorrectEvent:ln=>P.mouseButton(ln)===0&&ln.ctrlKey||P.mouseButton(ln)===2&&!ln.ctrlKey});return new Oa({clickTolerance:kt,move:(ln,Cn)=>{const Ar=bn();if(Kt&&Math.abs(Ar.y-ln.y)>zt)return{bearingDelta:o.ce(new o.P(ln.x,Cn.y),Cn,Ar)};let cr=(Cn.x-ln.x)*sn;return Kt&&Cn.y<Ar.y&&(cr=-cr),{bearingDelta:cr}},moveStateManager:en,enable:Mt,assignEvents:Yl})}(a,de),Be=function({enable:Mt,clickTolerance:kt,pitchDegreesPerPixelMoved:Kt=-.5}){const zt=new uh({checkCorrectEvent:sn=>P.mouseButton(sn)===0&&sn.ctrlKey||P.mouseButton(sn)===2});return new Oa({clickTolerance:kt,move:(sn,bn)=>({pitchDelta:(bn.y-sn.y)*Kt}),moveStateManager:zt,enable:Mt,assignEvents:Yl})}(a),ze=function({enable:Mt,clickTolerance:kt,rollDegreesPerPixelMoved:Kt=.3},zt){const sn=new uh({checkCorrectEvent:bn=>P.mouseButton(bn)===2&&bn.ctrlKey});return new Oa({clickTolerance:kt,move:(bn,en)=>{const ln=zt();let Cn=(en.x-bn.x)*Kt;return en.y<ln.y&&(Cn=-Cn),{rollDelta:Cn}},moveStateManager:sn,enable:Mt,assignEvents:Yl})}(a,de);c.dragRotate=new ol(a,Oe,Be,ze),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",Be,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ze,["mousePitch"]),a.interactive&&a.dragRotate&&c.dragRotate.enable();const He=function({enable:Mt,clickTolerance:kt}){const Kt=new uh({checkCorrectEvent:zt=>P.mouseButton(zt)===0&&!zt.ctrlKey});return new Oa({clickTolerance:kt,move:(zt,sn)=>({around:sn,panDelta:sn.sub(zt)}),activateOnStart:!0,moveStateManager:Kt,enable:Mt,assignEvents:Yl})}(a),ft=new gf(a,c);c.dragPan=new Nc(v,He,ft),this._add("mousePan",He),this._add("touchPan",ft,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&c.dragPan.enable(a.dragPan);const dt=new Xn,pt=new ou;c.touchZoomRotate=new va(v,pt,dt,ee),this._add("touchRotate",dt,["touchPan","touchZoom"]),this._add("touchZoom",pt,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&c.touchZoomRotate.enable(a.touchZoomRotate);const wt=c.scrollZoom=new Ti(c,()=>this._triggerRenderFrame());this._add("scrollZoom",wt,["mousePan"]),a.interactive&&a.scrollZoom&&c.scrollZoom.enable(a.scrollZoom);const Tt=c.keyboard=new ea(c);this._add("keyboard",Tt),a.interactive&&a.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Os(c))}_add(a,c,v){this._handlers.push({handlerName:a,handler:c,allowed:v}),this._handlersById[a]=c}stop(a){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!$l(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,c,v){for(const M in a)if(M!==v&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(a){const c=[];for(const v of a)this._el.contains(v.target)&&c.push(v);return c}mergeHandlerResult(a,c,v,M,I){if(!v)return;o.e(a,v);const z={handlerName:M,originalEvent:v.originalEvent||I};v.zoomDelta!==void 0&&(c.zoom=z),v.panDelta!==void 0&&(c.drag=z),v.rollDelta!==void 0&&(c.roll=z),v.pitchDelta!==void 0&&(c.pitch=z),v.bearingDelta!==void 0&&(c.rotate=z)}_applyChanges(){const a={},c={},v={};for(const[M,I,z]of this._changes)M.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(a.rollDelta=(a.rollDelta||0)+M.rollDelta),M.around!==void 0&&(a.around=M.around),M.pinchAround!==void 0&&(a.pinchAround=M.pinchAround),M.noInertia&&(a.noInertia=M.noInertia),o.e(c,I),o.e(v,z);this._updateMapTransform(a,c,v),this._changes=[]}_updateMapTransform(a,c,v){const M=this._map,I=M._getTransformForUpdate(),z=M.terrain;if(!(Cc(a)||z&&this._terrainMovement))return this._fireEvents(c,v,!0);M._stop(!0);let{panDelta:Y,zoomDelta:ee,bearingDelta:Ae,pitchDelta:de,rollDelta:Oe,around:Be,pinchAround:ze}=a;ze!==void 0&&(Be=ze),Be=Be||M.transform.centerPoint,z&&!I.isPointOnMapSurface(Be)&&(Be=I.centerPoint);const He={panDelta:Y,zoomDelta:ee,rollDelta:Oe,pitchDelta:de,bearingDelta:Ae,around:Be};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(Be)&&(Be=I.centerPoint);const ft=Be.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(Y?Be.sub(Y):Be);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(He,I),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?I.setCenter(I.screenPointToLocation(I.centerPoint.sub(Y))):this._map.cameraHelper.handleMapControlsPan(He,I,ft):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(He,I,ft))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(He,I),this._map.cameraHelper.handleMapControlsPan(He,I,ft)),M._applyUpdatedTransform(I),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(c,v,!0)}_fireEvents(a,c,v){const M=$l(this._eventsInProgress),I=$l(a),z={};for(const Oe in a){const{originalEvent:Be}=a[Oe];this._eventsInProgress[Oe]||(z[`${Oe}start`]=Be),this._eventsInProgress[Oe]=a[Oe]}!M&&I&&this._fireEvent("movestart",I.originalEvent);for(const Oe in z)this._fireEvent(Oe,z[Oe]);I&&this._fireEvent("move",I.originalEvent);for(const Oe in a){const{originalEvent:Be}=a[Oe];this._fireEvent(Oe,Be)}const Y={};let ee;for(const Oe in this._eventsInProgress){const{handlerName:Be,originalEvent:ze}=this._eventsInProgress[Oe];this._handlersById[Be].isActive()||(delete this._eventsInProgress[Oe],ee=c[Be]||ze,Y[`${Oe}end`]=ee)}for(const Oe in Y)this._fireEvent(Oe,Y[Oe]);const Ae=$l(this._eventsInProgress),de=(M||I)&&!Ae;if(de&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Oe=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Oe.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Oe)}if(v&&de){this._updatingCamera=!0;const Oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Be=ze=>ze!==0&&-this._bearingSnap<ze&&ze<this._bearingSnap;!Oe||!Oe.essential&&R.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:ee})),Be(this._map.getBearing())&&this._map.resetNorth()):(Be(Oe.bearing||this._map.getBearing())&&(Oe.bearing=0),Oe.freezeElevation=!0,this._map.easeTo(Oe,{originalEvent:ee})),this._updatingCamera=!1}}_fireEvent(a,c){this._map.fire(new o.l(a,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new vc("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class hA extends o.E{constructor(a,c,v){super(),this._renderFrameCallback=()=>{const M=Math.min((R.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=v.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,c){a.apply(this.transform),this.transform=a,this.cameraHelper=c}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(a,c){return this.jumpTo({center:a},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,c){return this.jumpTo({elevation:a},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,c,v){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},c),v)}panTo(a,c,v){return this.easeTo(o.e({center:a},c),v)}getZoom(){return this.transform.zoom}setZoom(a,c){return this.jumpTo({zoom:a},c),this}zoomTo(a,c,v){return this.easeTo(o.e({zoom:a},c),v)}zoomIn(a,c){return this.zoomTo(this.getZoom()+1,a,c),this}zoomOut(a,c){return this.zoomTo(this.getZoom()-1,a,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,c){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(a,c){return this.jumpTo({bearing:a},c),this}getPadding(){return this.transform.padding}setPadding(a,c){return this.jumpTo({padding:a},c),this}rotateTo(a,c,v){return this.easeTo(o.e({bearing:a},c),v)}resetNorth(a,c){return this.rotateTo(0,o.e({duration:1e3},a),c),this}resetNorthPitch(a,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),c),this}snapToNorth(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this}getPitch(){return this.transform.pitch}setPitch(a,c){return this.jumpTo({pitch:a},c),this}getRoll(){return this.transform.roll}setRoll(a,c){return this.jumpTo({roll:a},c),this}cameraForBounds(a,c){a=Et.convert(a).adjustAntiMeridian();const v=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),v,c)}_cameraForBoxAndBearing(a,c,v,M){const I={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const Ae=M.padding;M.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}const z=o.e(I,M.padding);M.padding=z;const Y=this.transform,ee=new Et(a,c);return this.cameraHelper.cameraForBoxAndBearing(M,z,ee,v,Y)}fitBounds(a,c,v){return this._fitInternal(this.cameraForBounds(a,c),c,v)}fitScreenCoordinates(a,c,v,M,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(c)),v,M),M,I)}_fitInternal(a,c,v){return a?(delete(c=o.e(a,c)).padding,c.linear?this.easeTo(c,v):this.flyTo(c,v)):this}jumpTo(a,c){this.stop();const v=this._getTransformForUpdate();let M=!1,I=!1,z=!1;const Y=v.zoom;this.cameraHelper.handleJumpToCenterZoom(v,a);const ee=v.zoom!==Y;return"elevation"in a&&v.elevation!==+a.elevation&&v.setElevation(+a.elevation),"bearing"in a&&v.bearing!==+a.bearing&&(M=!0,v.setBearing(+a.bearing)),"pitch"in a&&v.pitch!==+a.pitch&&(I=!0,v.setPitch(+a.pitch)),"roll"in a&&v.roll!==+a.roll&&(z=!0,v.setRoll(+a.roll)),a.padding==null||v.isPaddingEqual(a.padding)||v.setPadding(a.padding),this._applyUpdatedTransform(v),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),ee&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),M&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),I&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),z&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(a,c,v,M=0){const I=o.$.fromLngLat(a,c),z=o.$.fromLngLat(v,M),Y=z.x-I.x,ee=z.y-I.y,Ae=z.z-I.z,de=Math.hypot(Y,ee,Ae);if(de===0)throw new Error("Can't calculate camera options with same From and To");const Oe=Math.hypot(Y,ee),Be=o.ah(this.transform.cameraToCenterDistance/de/this.transform.tileSize),ze=180*Math.atan2(Y,-ee)/Math.PI;let He=180*Math.acos(Oe/de)/Math.PI;return He=Ae<0?90-He:90+He,{center:z.toLngLat(),elevation:M,zoom:Be,pitch:He,bearing:ze}}calculateCameraOptionsFromCameraLngLatAltRotation(a,c,v,M,I){const z=this.transform.calculateCenterFromCameraLngLatAlt(a,c,v,M);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:v,pitch:M,roll:I}}easeTo(a,c){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.cf},a)).animate===!1||!a.essential&&R.prefersReducedMotion)&&(a.duration=0);const v=this._getTransformForUpdate(),M=this.getBearing(),I=v.pitch,z=v.roll,Y="bearing"in a?this._normalizeBearing(a.bearing,M):M,ee="pitch"in a?+a.pitch:I,Ae="roll"in a?this._normalizeBearing(a.roll,z):z,de="padding"in a?a.padding:v.padding,Oe=o.P.convert(a.offset);let Be,ze;a.around&&(Be=o.Q.convert(a.around),ze=v.locationToScreenPoint(Be));const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ft=this.cameraHelper.handleEaseTo(v,{bearing:Y,pitch:ee,roll:Ae,padding:de,around:Be,aroundPoint:ze,offsetAsPoint:Oe,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||M!==Y,this._pitching=this._pitching||ee!==I,this._rolling=this._rolling||Ae!==z,this._padding=!v.isPaddingEqual(de),this._zooming=this._zooming||ft.isZooming,this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,He),this.terrain&&this._prepareElevation(ft.elevationCenter),this._ease(dt=>{ft.easeFunc(dt),this.terrain&&!a.freezeElevation&&this._updateElevation(dt),this._applyUpdatedTransform(v),this._fireMoveEvents(c)},dt=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c,dt)},a),this}_prepareEase(a,c,v={}){this._moving=!0,c||v.moving||this.fire(new o.l("movestart",a)),this._zooming&&!v.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!v.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&c!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(v-(c-(v*a+this._elevationStart))/(1-a)),this._elevationTarget=c}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};const c=a.getCameraLngLat(),v=a.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,a.zoom):0;if(v<M){const I=this.calculateCameraOptionsFromTo(c,M,a.center,a.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(a){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const v=a.clone();for(const M of c){const I=v.clone(),{center:z,zoom:Y,roll:ee,pitch:Ae,bearing:de,elevation:Oe}=M(I);z&&I.setCenter(z),Oe!==void 0&&I.setElevation(Oe),Y!==void 0&&I.setZoom(Y),ee!==void 0&&I.setRoll(ee),Ae!==void 0&&I.setPitch(Ae),de!==void 0&&I.setBearing(de),v.apply(I)}this.transform.apply(v)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const v=this._zooming,M=this._rotating,I=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,v&&this.fire(new o.l("zoomend",a)),M&&this.fire(new o.l("rotateend",a)),I&&this.fire(new o.l("pitchend",a)),z&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,c){if(!a.essential&&R.prefersReducedMotion){const Cn=o.O(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Cn,c)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cf},a);const v=this._getTransformForUpdate(),M=v.bearing,I=v.pitch,z=v.roll,Y=v.padding,ee="bearing"in a?this._normalizeBearing(a.bearing,M):M,Ae="pitch"in a?+a.pitch:I,de="roll"in a?this._normalizeBearing(a.roll,z):z,Oe="padding"in a?a.padding:v.padding,Be=o.P.convert(a.offset);let ze=v.centerPoint.add(Be);const He=v.screenPointToLocation(ze),ft=this.cameraHelper.handleFlyTo(v,{bearing:ee,pitch:Ae,roll:de,padding:Oe,locationAtOffset:He,offsetAsPoint:Be,center:a.center,minZoom:a.minZoom,zoom:a.zoom});let dt=a.curve;const pt=Math.max(v.width,v.height),wt=pt/ft.scaleOfZoom,Tt=ft.pixelPathLength;typeof ft.scaleOfMinZoom=="number"&&(dt=Math.sqrt(pt/ft.scaleOfMinZoom/Tt*2));const Mt=dt*dt;function kt(Cn){const Ar=(wt*wt-pt*pt+(Cn?-1:1)*Mt*Mt*Tt*Tt)/(2*(Cn?wt:pt)*Mt*Tt);return Math.log(Math.sqrt(Ar*Ar+1)-Ar)}function Kt(Cn){return(Math.exp(Cn)-Math.exp(-Cn))/2}function zt(Cn){return(Math.exp(Cn)+Math.exp(-Cn))/2}const sn=kt(!1);let bn=function(Cn){return zt(sn)/zt(sn+dt*Cn)},en=function(Cn){return pt*((zt(sn)*(Kt(Ar=sn+dt*Cn)/zt(Ar))-Kt(sn))/Mt)/Tt;var Ar},ln=(kt(!0)-sn)/dt;if(Math.abs(Tt)<2e-6||!isFinite(ln)){if(Math.abs(pt-wt)<1e-6)return this.easeTo(a,c);const Cn=wt<pt?-1:1;ln=Math.abs(Math.log(wt/pt))/dt,en=()=>0,bn=Ar=>Math.exp(Cn*dt*Ar)}return a.duration="duration"in a?+a.duration:1e3*ln/("screenSpeed"in a?+a.screenSpeed/dt:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=M!==ee,this._pitching=Ae!==I,this._rolling=de!==z,this._padding=!v.isPaddingEqual(Oe),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ft.targetCenter),this._ease(Cn=>{const Ar=Cn*ln,cr=1/bn(Ar),kn=en(Ar);this._rotating&&v.setBearing(o.B.number(M,ee,Cn)),this._pitching&&v.setPitch(o.B.number(I,Ae,Cn)),this._rolling&&v.setRoll(o.B.number(z,de,Cn)),this._padding&&(v.interpolatePadding(Y,Oe,Cn),ze=v.centerPoint.add(Be)),ft.easeFunc(Cn,cr,kn,ze),this.terrain&&!a.freezeElevation&&this._updateElevation(Cn),this._applyUpdatedTransform(v),this._fireMoveEvents(c)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,c){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return a||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(a,c,v){v.animate===!1||v.duration===0?(a(1),c()):(this._easeStart=R.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,c){a=o.aL(a,-180,180);const v=Math.abs(a-c);return Math.abs(a-360-c)<v&&(a-=360),Math.abs(a+360-c)<v&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(a),this.transform.tileZoom):null}}const _c={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class os{constructor(a=_c){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,c){const v=this._map._getUIString(`AttributionControl.${c}`);a.title=v,a.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const I=c[M];if(I.used||I.usedForTerrain){const z=I.getSource();z.attribution&&a.indexOf(z.attribution)<0&&a.push(z.attribution)}}a=a.filter(M=>String(M).trim()),a.sort((M,I)=>M.length-I.length),a=a.filter((M,I)=>{for(let z=I+1;z<a.length;z++)if(a[z].indexOf(M)>=0)return!1;return!0});const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=P.sanitize(v),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Bh{constructor(a={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const v=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const c=P.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Eu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const c=++this._id;return this._queue.push({callback:a,id:c,cancelled:!1}),c}remove(a){const c=this._currentlyRunning,v=c?this._queue.concat(c):this._queue;for(const M of v)if(M.id===a)return void(M.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const v of c)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var DA=o.aG([{name:"a_pos3d",type:"Int16",components:3}]);class vf extends o.E{constructor(a){super(),this._lastTilesetChange=R.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,c){this.sourceCache.update(a,c),this._renderableTilesKeys=[];const v={};for(const M of ct(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))v[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),o.bQ(M.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[M.key]=new me(M,this.tileSize),this._lastTilesetChange=R.now());for(const M in this._tiles)v[M]||delete this._tiles[M]}freeRtt(a){for(const c in this._tiles){const v=this._tiles[c];(!a||v.tileID.equals(a)||v.tileID.isChildOf(a)||a.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,c){return c?this._getTerrainCoordsForTileRanges(a,c):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){const c={};for(const v of this._renderableTilesKeys){const M=this._tiles[v].tileID,I=a.clone(),z=o.b2();if(M.canonical.equals(a.canonical))o.bQ(z,0,o.Z,o.Z,0,0,1);else if(M.canonical.isChildOf(a.canonical)){const Y=M.canonical.z-a.canonical.z,ee=M.canonical.x-(M.canonical.x>>Y<<Y),Ae=M.canonical.y-(M.canonical.y>>Y<<Y),de=o.Z>>Y;o.bQ(z,0,de,de,0,0,1),o.L(z,z,[-ee*de,-Ae*de,0])}else{if(!a.canonical.isChildOf(M.canonical))continue;{const Y=a.canonical.z-M.canonical.z,ee=a.canonical.x-(a.canonical.x>>Y<<Y),Ae=a.canonical.y-(a.canonical.y>>Y<<Y),de=o.Z>>Y;o.bQ(z,0,o.Z,o.Z,0,0,1),o.L(z,z,[ee*de,Ae*de,0]),o.M(z,z,[1/2**Y,1/2**Y,0])}}I.terrainRttPosMatrix32f=new Float32Array(z),c[v]=I}return c}_getTerrainCoordsForTileRanges(a,c){const v={};for(const M of this._renderableTilesKeys){const I=this._tiles[M].tileID;if(!this._isWithinTileRanges(I,c))continue;const z=a.clone(),Y=o.b2();if(I.canonical.z===a.canonical.z){const ee=a.canonical.x-I.canonical.x,Ae=a.canonical.y-I.canonical.y;o.bQ(Y,0,o.Z,o.Z,0,0,1),o.L(Y,Y,[ee*o.Z,Ae*o.Z,0])}else if(I.canonical.z>a.canonical.z){const ee=I.canonical.z-a.canonical.z,Ae=I.canonical.x-(I.canonical.x>>ee<<ee),de=I.canonical.y-(I.canonical.y>>ee<<ee),Oe=a.canonical.x-(I.canonical.x>>ee),Be=a.canonical.y-(I.canonical.y>>ee),ze=o.Z>>ee;o.bQ(Y,0,ze,ze,0,0,1),o.L(Y,Y,[-Ae*ze+Oe*o.Z,-de*ze+Be*o.Z,0])}else{const ee=a.canonical.z-I.canonical.z,Ae=a.canonical.x-(a.canonical.x>>ee<<ee),de=a.canonical.y-(a.canonical.y>>ee<<ee),Oe=(a.canonical.x>>ee)-I.canonical.x,Be=(a.canonical.y>>ee)-I.canonical.y,ze=o.Z<<ee;o.bQ(Y,0,ze,ze,0,0,1),o.L(Y,Y,[Ae*o.Z+Oe*ze,de*o.Z+Be*ze,0])}z.terrainRttPosMatrix32f=new Float32Array(Y),v[M]=z}return v}getSourceTile(a,c){const v=this.sourceCache._source;let M=a.overscaledZ-this.deltaZoom;if(M>v.maxzoom&&(M=v.maxzoom),M<v.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(M).key);let I=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!I||!I.dem)&&c)for(;M>=v.minzoom&&(!I||!I.dem);)I=this.sourceCache.getTileByID(a.scaledTo(M--).key);return I}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,c){return c[a.canonical.z]&&a.canonical.x>=c[a.canonical.z].minTileX&&a.canonical.x<=c[a.canonical.z].maxTileX&&a.canonical.y>=c[a.canonical.z].minTileY&&a.canonical.y<=c[a.canonical.z].maxTileY}}class ed{constructor(a,c,v){this._meshCache={},this.painter=a,this.sourceCache=new vf(c),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,c,v,M=o.Z){var I;if(!(c>=0&&c<M&&v>=0&&v<M))return 0;const z=this.getTerrainData(a),Y=(I=z.tile)===null||I===void 0?void 0:I.dem;if(!Y)return 0;const ee=o.cj([],[c/M*o.Z,v/M*o.Z],z.u_terrain_matrix),Ae=[ee[0]*Y.dim,ee[1]*Y.dim],de=Math.floor(Ae[0]),Oe=Math.floor(Ae[1]),Be=Ae[0]-de,ze=Ae[1]-Oe;return Y.get(de,Oe)*(1-Be)*(1-ze)+Y.get(de+1,Oe)*Be*(1-ze)+Y.get(de,Oe+1)*(1-Be)*ze+Y.get(de+1,Oe+1)*Be*ze}getElevationForLngLatZoom(a,c){if(!o.ck(c,a.wrap()))return 0;const{tileID:v,mercatorX:M,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(a,c);return this.getElevation(v,M%o.Z,I%o.Z,o.Z)}getElevation(a,c,v,M=o.Z){return this.getDEMElevation(a,c,v,M)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const M=this.painter.context,I=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new le(M,I,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new le(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ad([])}const c=this.sourceCache.getSourceTile(a,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new le(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const v=c&&c+c.tileID.key+a.key;if(v&&!this._demMatrixCache[v]){const M=this.sourceCache.sourceCache._source.maxzoom;let I=a.canonical.z-c.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=M?I=a.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=a.canonical.x-(a.canonical.x>>I<<I),Y=a.canonical.y-(a.canonical.y>>I<<I),ee=o.cl(new Float64Array(16),[1/(o.Z<<I),1/(o.Z<<I),0]);o.L(ee,ee,[z*o.Z,Y*o.Z,0]),this._demMatrixCache[a.key]={matrix:ee,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(a){const c=this.painter,v=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new le(c.context,{width:v,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new le(c.context,{width:v,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(v,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,v,M))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,z=0;I<this._coordsTextureSize;I++)for(let Y=0;Y<this._coordsTextureSize;Y++,z+=4)c[z+0]=255&Y,c[z+1]=255&I,c[z+2]=Y>>8<<4|I>>8,c[z+3]=0;const v=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new le(a,v,a.gl.RGBA,{premultiply:!1});return M.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),v=this.painter.context,M=v.gl,I=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),Y=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(I,Y-z-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),v.bindFramebuffer.set(null);const ee=c[0]+(c[2]>>4<<8),Ae=c[1]+((15&c[2])<<8),de=this.coordsIndex[255-c[3]],Oe=de&&this.sourceCache.getTileByID(de);if(!Oe)return null;const Be=this._coordsTextureSize,ze=(1<<Oe.tileID.canonical.z)*Be;return new o.$((Oe.tileID.canonical.x*Be+ee)/ze+Oe.tileID.wrap,(Oe.tileID.canonical.y*Be+Ae)/ze,this.getElevation(Oe.tileID,ee,Ae,Be))}depthAtPoint(a){const c=new Uint8Array(4),v=this.painter.context,M=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),v.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(a){var c;const v=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=v&&a.canonical.y===0,I=v&&a.canonical.y===(1<<a.canonical.z)-1,z=`m_${M?"n":""}_${I?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const Y=this.painter.context,ee=new o.cm,Ae=new o.aK,de=this.meshSize,Oe=o.Z/de,Be=de*de;for(let zt=0;zt<=de;zt++)for(let sn=0;sn<=de;sn++)ee.emplaceBack(sn*Oe,zt*Oe,0);for(let zt=0;zt<Be;zt+=de+1)for(let sn=0;sn<de;sn++)Ae.emplaceBack(sn+zt,de+sn+zt+1,de+sn+zt+2),Ae.emplaceBack(sn+zt,de+sn+zt+2,sn+zt+1);const ze=ee.length,He=ze+(de+1),ft=(de+1)*de,dt=M?o.b9:0,pt=M?0:1,wt=I?o.ba:o.Z,Tt=I?0:1;for(let zt=0;zt<=de;zt++)ee.emplaceBack(zt*Oe,dt,pt);for(let zt=0;zt<=de;zt++)ee.emplaceBack(zt*Oe,wt,Tt);for(let zt=0;zt<de;zt++)Ae.emplaceBack(ft+zt,He+zt,He+zt+1),Ae.emplaceBack(ft+zt,He+zt+1,ft+zt+1),Ae.emplaceBack(0+zt,ze+zt+1,ze+zt),Ae.emplaceBack(0+zt,0+zt+1,ze+zt+1);const Mt=ee.length,kt=Mt+2*(de+1);for(const zt of[0,1])for(let sn=0;sn<=de;sn++)for(const bn of[0,1])ee.emplaceBack(zt*o.Z,sn*Oe,bn);for(let zt=0;zt<2*de;zt+=2)Ae.emplaceBack(Mt+zt,Mt+zt+1,Mt+zt+3),Ae.emplaceBack(Mt+zt,Mt+zt+3,Mt+zt+2),Ae.emplaceBack(kt+zt,kt+zt+3,kt+zt+1),Ae.emplaceBack(kt+zt,kt+zt+2,kt+zt+3);const Kt=new xl(Y.createVertexBuffer(ee,DA.members),Y.createIndexBuffer(Ae),o.aJ.simpleSegment(0,0,ee.length,Ae.length));return this._meshCache[z]=Kt,Kt}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,c){var v;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(a,c);return(v=this.getMinMaxElevation(M).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(a){const c=this.getTerrainData(a).tile,v={minElevation:null,maxElevation:null};return c&&c.dem&&(v.minElevation=c.dem.min*this.exaggeration,v.maxElevation=c.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(a,c){const v=o.$.fromLngLat(a.wrap()),M=(1<<c)*o.Z,I=v.x*M,z=v.y*M,Y=Math.floor(I/o.Z),ee=Math.floor(z/o.Z);return{tileID:new o.Y(c,0,c,Y,ee),mercatorX:I,mercatorY:z}}}class Oh{constructor(a,c,v){this._context=a,this._size=c,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(v.texture),{id:a,fbo:c,texture:v,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>a.id!==c),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const Il={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zu{constructor(a,c){this.painter=a,this.terrain=c,this.pool=new Oh(a.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(v=>!a._layers[v].isHidden(c)),this._coordsAscending={};for(const v in a.sourceCaches){this._coordsAscending[v]={};const M=a.sourceCaches[v].getVisibleCoordinates(),I=a.sourceCaches[v].getSource(),z=I instanceof Vn?I.terrainTileRanges:null;for(const Y of M){const ee=this.terrain.sourceCache.getTerrainCoords(Y,z);for(const Ae in ee)this._coordsAscending[v][Ae]||(this._coordsAscending[v][Ae]=[]),this._coordsAscending[v][Ae].push(ee[Ae])}}this._coordsAscendingStr={};for(const v of a._order){const M=a._layers[v],I=M.source;if(Il[M.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const z in this._coordsAscending[I])this._coordsAscendingStr[I][z]=this._coordsAscending[I][z].map(Y=>Y.key).sort().join()}}for(const v of this._renderableTiles)for(const M in this._coordsAscendingStr){const I=this._coordsAscendingStr[M][v.tileID.key];I&&I!==v.rttCoords[M]&&(v.rtt=[])}}renderLayer(a,c){if(a.isHidden(this.painter.transform.zoom))return!1;const v=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=a.type,I=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Il[M]&&(this._prevType&&Il[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(a.id),!z))return!0;if(Il[this._prevType]||Il[M]&&z){this._prevType=M;const Y=this._stacks.length-1,ee=this._stacks[Y]||[];for(const Ae of this._renderableTiles){if(this.pool.isFull()&&(Yu(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Ae),Ae.rtt[Y]){const Oe=this.pool.getObjectForId(Ae.rtt[Y].id);if(Oe.stamp===Ae.rtt[Y].stamp){this.pool.useObject(Oe);continue}}const de=this.pool.getOrCreateFreeObject();this.pool.useObject(de),this.pool.stampObject(de),Ae.rtt[Y]={id:de.id,stamp:de.stamp},I.context.bindFramebuffer.set(de.fbo.framebuffer),I.context.clear({color:o.b7.transparent,stencil:0}),I.currentStencilSource=void 0;for(let Oe=0;Oe<ee.length;Oe++){const Be=I.style._layers[ee[Oe]],ze=Be.source?this._coordsAscending[Be.source][Ae.tileID.key]:[Ae.tileID];I.context.viewport.set([0,0,de.fbo.width,de.fbo.height]),I._renderTileClippingMasks(Be,ze,!0),I.renderLayer(I,I.style.sourceCaches[Be.source],Be,ze,v),Be.source&&(Ae.rttCoords[Be.source]=this._coordsAscendingStr[Be.source][Ae.tileID.key])}}return Yu(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects(),Il[M]}return!1}}const vr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ri=f,bc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:_c,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Tl={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Xu{constructor(a,c,v=!1){this.mousedown=I=>{this.startMove(I,P.mousePos(this.element,I)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,P.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHanlder.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new ch;this._rotatePitchHanlder=new Oa({clickTolerance:3,move:(I,z)=>{const Y=c.getBoundingClientRect(),ee=new o.P((Y.bottom-Y.top)/2,(Y.right-Y.left)/2);return{bearingDelta:o.ce(new o.P(I.x,z.y),z,ee),pitchDelta:v?-.5*(z.y-I.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=a,P.addEventListener(c,"mousedown",this.mousedown),P.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(c,"touchcancel",this.reset)}startMove(a,c){this._rotatePitchHanlder.dragStart(a,c),P.disableDrag()}move(a,c){const v=this.map,{bearingDelta:M,pitchDelta:I}=this._rotatePitchHanlder.dragMove(a,c)||{};M&&v.setBearing(v.getBearing()+M),I&&v.setPitch(v.getPitch()+I)}off(){const a=this.element;P.removeEventListener(a,"mousedown",this.mousedown),P.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let Ws;function Bu(O,a,c,v=!1){if(v||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return O?.wrap();const M=new o.Q(O.lng,O.lat);if(O=new o.Q(O.lng,O.lat),a){const I=new o.Q(O.lng-360,O.lat),z=new o.Q(O.lng+360,O.lat),Y=c.locationToScreenPoint(O).distSqr(a);c.locationToScreenPoint(I).distSqr(a)<Y?O=I:c.locationToScreenPoint(z).distSqr(a)<Y&&(O=z)}for(;Math.abs(O.lng-c.center.lng)>180;){const I=c.locationToScreenPoint(O);if(I.x>=0&&I.y>=0&&I.x<=c.width&&I.y<=c.height)break;O.lng>c.center.lng?O.lng-=360:O.lng+=360}return O.lng!==M.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(O))?O:M}const ss={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ia(O,a,c){const v=O.classList;for(const M in ss)v.remove(`maplibregl-${c}-anchor-${M}`);v.add(`maplibregl-${c}-anchor-${a}`)}class dA extends o.E{constructor(a){if(super(),this._onKeyPress=c=>{const v=c.code,M=c.charCode||c.keyCode;v!=="Space"&&v!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const v=c.originalEvent.target,M=this._element;this._popup&&(v===M||M.contains(v))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=Bu(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let M="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?M=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(M=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${ss[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${M}`),R.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const c=P.createNS("http://www.w3.org/2000/svg","svg"),v=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${v}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${v}`);const I=P.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const Y=P.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const ee=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pt of ee){const wt=P.createNS("http://www.w3.org/2000/svg","ellipse");wt.setAttributeNS(null,"opacity","0.04"),wt.setAttributeNS(null,"cx","10.5"),wt.setAttributeNS(null,"cy","5.80029008"),wt.setAttributeNS(null,"rx",pt.rx),wt.setAttributeNS(null,"ry",pt.ry),Y.appendChild(wt)}const Ae=P.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill",this._color);const de=P.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ae.appendChild(de);const Oe=P.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"fill","#000000");const Be=P.createNS("http://www.w3.org/2000/svg","path");Be.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Oe.appendChild(Be);const ze=P.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ze.setAttributeNS(null,"fill","#FFFFFF");const He=P.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ft=P.createNS("http://www.w3.org/2000/svg","circle");ft.setAttributeNS(null,"fill","#000000"),ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"cx","5.5"),ft.setAttributeNS(null,"cy","5.5"),ft.setAttributeNS(null,"r","5.4999962");const dt=P.createNS("http://www.w3.org/2000/svg","circle");dt.setAttributeNS(null,"fill","#FFFFFF"),dt.setAttributeNS(null,"cx","5.5"),dt.setAttributeNS(null,"cy","5.5"),dt.setAttributeNS(null,"r","5.4999962"),He.appendChild(ft),He.appendChild(dt),z.appendChild(Y),z.appendChild(Ae),z.appendChild(Oe),z.appendChild(ze),z.appendChild(He),c.appendChild(z),c.setAttributeNS(null,"height",v*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Ia(this._element,this._anchor,"marker"),a&&a.className)for(const c of a.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.Q.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const M=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var c,v;const M=(c=this._map)===null||c===void 0?void 0:c.terrain,I=this._map.transform.isLocationOccluded(this._lngLat);if(!M||I){const ze=I?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ze&&(this._element.style.opacity=ze))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const z=this._map,Y=z.terrain.depthAtPoint(this._pos),ee=z.terrain.getElevationForLngLatZoom(this._lngLat,z.transform.tileZoom);if(z.transform.lngLatToCameraDepth(this._lngLat,ee)-Y<.006)return void(this._element.style.opacity=this._opacity);const Ae=-this._offset.y/z.transform.pixelsPerMeter,de=Math.sin(z.getPitch()*Math.PI/180)*Ae,Oe=z.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Be=z.transform.lngLatToCameraDepth(this._lngLat,ee+de)-Oe>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&Be&&this._popup.remove(),this._element.style.opacity=Be?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,c){return(this._opacity===void 0||a===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Do={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let as=0,su=!1;const Ju={maxWidth:100,unit:"metric"};function KA(O,a,c){const v=c&&c.maxWidth||100,M=O._container.clientHeight/2,I=O._container.clientWidth/2,z=O.unproject([I-v/2,M]),Y=O.unproject([I+v/2,M]),ee=Math.round(O.project(Y).x-O.project(z).x),Ae=Math.min(v,ee,O._container.clientWidth),de=z.distanceTo(Y);if(c&&c.unit==="imperial"){const Oe=3.2808*de;Oe>5280?sl(a,Ae,Oe/5280,O._getUIString("ScaleControl.Miles")):sl(a,Ae,Oe,O._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?sl(a,Ae,de/1852,O._getUIString("ScaleControl.NauticalMiles")):de>=1e3?sl(a,Ae,de/1e3,O._getUIString("ScaleControl.Kilometers")):sl(a,Ae,de,O._getUIString("ScaleControl.Meters"))}function sl(O,a,c,v){const M=function(I){const z=Math.pow(10,`${Math.floor(I)}`.length-1);let Y=I/z;return Y=Y>=10?10:Y>=5?5:Y>=3?3:Y>=2?2:Y>=1?1:function(ee){const Ae=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*Ae)/Ae}(Y),z*Y}(c);O.style.width=a*(M/c)+"px",O.innerHTML=`${M}&nbsp;${v}`}const Ih={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Gc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fA(O){if(O){if(typeof O=="number"){const a=Math.round(Math.abs(O)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,O),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-O),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(O,0),right:new o.P(-O,0)}}if(O instanceof o.P||Array.isArray(O)){const a=o.P.convert(O);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(O.center||[0,0]),top:o.P.convert(O.top||[0,0]),"top-left":o.P.convert(O["top-left"]||[0,0]),"top-right":o.P.convert(O["top-right"]||[0,0]),bottom:o.P.convert(O.bottom||[0,0]),"bottom-left":o.P.convert(O["bottom-left"]||[0,0]),"bottom-right":o.P.convert(O["bottom-right"]||[0,0]),left:o.P.convert(O.left||[0,0]),right:o.P.convert(O.right||[0,0])}}return fA(new o.P(0,0))}const kl=f;l.AJAXError=o.cq,l.Event=o.l,l.Evented=o.E,l.LngLat=o.Q,l.MercatorCoordinate=o.$,l.Point=o.P,l.addProtocol=o.cr,l.config=o.a,l.removeProtocol=o.cs,l.AttributionControl=os,l.BoxZoomHandler=Ya,l.CanvasSource=Dn,l.CooperativeGesturesHandler=gs,l.DoubleClickZoomHandler=yc,l.DragPanHandler=Nc,l.DragRotateHandler=ol,l.EdgeInsets=sA,l.FullscreenControl=class extends o.E{constructor(O={}){super(),this._onFullscreenChange=()=>{var a;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=c?.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const O=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Vt,l.GeolocateControl=class extends o.E{constructor(O){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{const c=new o.Q(a.coords.longitude,a.coords.latitude),v=a.coords.accuracy,M=this._map.getBearing(),I=o.e({bearing:M},this.options.fitBoundsOptions),z=Et.fromLngLat(c,v);this._map.fitBounds(z,I,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const c=new o.Q(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&su)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new dA({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new dA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Do,O)}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(Ws!==void 0&&!a)return Ws;if(window.navigator.permissions===void 0)return Ws=!!window.navigator.geolocation,Ws;try{Ws=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ws=!!window.navigator.geolocation}return Ws})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,as=0,su=!1}_isOutOfMapMaxBounds(O){const a=this._map.getMaxBounds(),c=O.coords;return a&&(c.longitude<a.getWest()||c.longitude>a.getEast()||c.latitude<a.getSouth()||c.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const O=this._map.getBounds(),a=O.getSouthEast(),c=O.getNorthEast(),v=a.distanceTo(c),M=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":as--,su=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),as++,as>1?(O={maximumAge:6e5,timeout:0},su=!0):(O=this.options.positionOptions,su=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var O;const a=(O=this._map.getProjection())===null||O===void 0?void 0:O.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var O;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((O=this._map.getProjection())===null||O===void 0?void 0:O.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=wu,l.ImageSource=Vn,l.KeyboardHandler=ea,l.LngLatBounds=Et,l.LogoControl=Bh,l.Map=class extends hA{constructor(O){var a,c;o.cn.mark(o.co.create);const v=Object.assign(Object.assign(Object.assign({},bc),O),{canvasContextAttributes:Object.assign(Object.assign({},bc.canvasContextAttributes),O.canvasContextAttributes)});if(v.minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new Ea,I=new EA;if(v.minZoom!==void 0&&M.setMinZoom(v.minZoom),v.maxZoom!==void 0&&M.setMaxZoom(v.maxZoom),v.minPitch!==void 0&&M.setMinPitch(v.minPitch),v.maxPitch!==void 0&&M.setMaxPitch(v.maxPitch),v.renderWorldCopies!==void 0&&M.setRenderWorldCopies(v.renderWorldCopies),super(M,I,{bearingSnap:v.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Eu,this._controls=[],this._mapId=o.a4(),this._contextLost=Y=>{Y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:Y}))},this._contextRestored=Y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:Y}))},this._onMapScroll=Y=>{if(Y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},v.canvasContextAttributes),this._trackResize=v.trackResize===!0,this._bearingSnap=v.bearingSnap,this._centerClampedToGround=v.centerClampedToGround,this._refreshExpiredTiles=v.refreshExpiredTiles===!0,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions===!0,this._collectResourceTiming=v.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},vr),v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=v.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=te.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let Y=!1;const ee=Ql(Ae=>{this._trackResize&&!this._removed&&(this.resize(Ae),this.redraw())},50);this._resizeObserver=new ResizeObserver(Ae=>{Y?ee(Ae):Y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Hu(this,v),this._hash=v.hash&&new wu(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,roll:v.roll}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,o.e({},v.fitBoundsOptions,{duration:0}))));const z=typeof v.style=="string"||((c=(a=v.style)===null||a===void 0?void 0:a.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new os(typeof v.attributionControl=="boolean"?void 0:v.attributionControl)),v.maplibreLogo&&this.addControl(new Bh,v.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const Y=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Y)}}),this.on("data",Y=>{this._update(Y.dataType==="style"),this.fire(new o.l(`${Y.dataType}data`,Y))}),this.on("dataloading",Y=>{this.fire(new o.l(`${Y.dataType}dataloading`,Y))}),this.on("dataabort",Y=>{this.fire(new o.l("sourcedataabort",Y))})}_getMapId(){return this._mapId}addControl(O,a){if(a===void 0&&(a=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=O.onAdd(this);this._controls.push(O);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(c,v.firstChild):v.appendChild(c),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(O);return a>-1&&this._controls.splice(a,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}calculateCameraOptionsFromTo(O,a,c,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(O,a,c,v)}resize(O,a=!0){const[c,v]=this._containerDimensions(),M=this._getClampedPixelRatio(c,v);if(this._resizeCanvas(c,v,M),this.painter.resize(c,v,M),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const Y=this._getClampedPixelRatio(c,v);this._resizeCanvas(c,v,Y),this.painter.resize(c,v,Y)}this._resizeTransform(a);const I=!this._moving;return I&&(this.stop(),this.fire(new o.l("movestart",O)).fire(new o.l("move",O))),this.fire(new o.l("resize",O)),I&&this.fire(new o.l("moveend",O)),this}_resizeTransform(O=!0){var a;const[c,v]=this._containerDimensions();this.transform.resize(c,v,O),(a=this._requestedCameraState)===null||a===void 0||a.resize(c,v,O)}_getClampedPixelRatio(O,a){const{0:c,1:v}=this._maxCanvasSize,M=this.getPixelRatio(),I=O*M,z=a*M;return Math.min(I>c?c/I:1,z>v?v/z:1)*M}getPixelRatio(){var O;return(O=this._overridePixelRatio)!==null&&O!==void 0?O:devicePixelRatio}setPixelRatio(O){this._overridePixelRatio=O,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(Et.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.setMinZoom(O),this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.setMaxZoom(O),this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.setMinPitch(O),this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(O>=this.transform.minPitch)return this.transform.setMaxPitch(O),this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.setRenderWorldCopies(O),this._update()}project(O){return this.transform.locationToScreenPoint(o.Q.convert(O),this.style&&this.terrain)}unproject(O){return this.transform.screenPointToLocation(o.P.convert(O),this.terrain)}isMoving(){var O;return this._moving||((O=this.handlers)===null||O===void 0?void 0:O.isMoving())}isZooming(){var O;return this._zooming||((O=this.handlers)===null||O===void 0?void 0:O.isZooming())}isRotating(){var O;return this._rotating||((O=this.handlers)===null||O===void 0?void 0:O.isRotating())}_createDelegatedListener(O,a,c){if(O==="mouseenter"||O==="mouseover"){let v=!1;return{layers:a,listener:c,delegates:{mousemove:I=>{const z=a.filter(ee=>this.getLayer(ee)),Y=z.length!==0?this.queryRenderedFeatures(I.point,{layers:z}):[];Y.length?v||(v=!0,c.call(this,new js(O,this,I.originalEvent,{features:Y}))):v=!1},mouseout:()=>{v=!1}}}}if(O==="mouseleave"||O==="mouseout"){let v=!1;return{layers:a,listener:c,delegates:{mousemove:z=>{const Y=a.filter(ee=>this.getLayer(ee));(Y.length!==0?this.queryRenderedFeatures(z.point,{layers:Y}):[]).length?v=!0:v&&(v=!1,c.call(this,new js(O,this,z.originalEvent)))},mouseout:z=>{v&&(v=!1,c.call(this,new js(O,this,z.originalEvent)))}}}}{const v=M=>{const I=a.filter(Y=>this.getLayer(Y)),z=I.length!==0?this.queryRenderedFeatures(M.point,{layers:I}):[];z.length&&(M.features=z,c.call(this,M),delete M.features)};return{layers:a,listener:c,delegates:{[O]:v}}}}_saveDelegatedListener(O,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(a)}_removeDelegatedListener(O,a,c){if(!this._delegatedListeners||!this._delegatedListeners[O])return;const v=this._delegatedListeners[O];for(let M=0;M<v.length;M++){const I=v[M];if(I.listener===c&&I.layers.length===a.length&&I.layers.every(z=>a.includes(z))){for(const z in I.delegates)this.off(z,I.delegates[z]);return void v.splice(M,1)}}}on(O,a,c){if(c===void 0)return super.on(O,a);const v=typeof a=="string"?[a]:a,M=this._createDelegatedListener(O,v,c);this._saveDelegatedListener(O,M);for(const I in M.delegates)this.on(I,M.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(O,v,c)}}}once(O,a,c){if(c===void 0)return super.once(O,a);const v=typeof a=="string"?[a]:a,M=this._createDelegatedListener(O,v,c);for(const I in M.delegates){const z=M.delegates[I];M.delegates[I]=(...Y)=>{this._removeDelegatedListener(O,v,c),z(...Y)}}this._saveDelegatedListener(O,M);for(const I in M.delegates)this.once(I,M.delegates[I]);return this}off(O,a,c){return c===void 0?super.off(O,a):(this._removeDelegatedListener(O,typeof a=="string"?[a]:a,c),this)}queryRenderedFeatures(O,a){if(!this.style)return[];let c;const v=O instanceof o.P||Array.isArray(O),M=v?O:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(v?{}:O)||{},M instanceof o.P||typeof M[0]=="number")c=[o.P.convert(M)];else{const I=o.P.convert(M[0]),z=o.P.convert(M[1]);c=[I,new o.P(z.x,I.y),z,new o.P(I.x,z.y),I]}return this.style.queryRenderedFeatures(c,a,this.transform)}querySourceFeatures(O,a){return this.style.querySourceFeatures(O,a)}setStyle(O,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(O,a))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const a=this._locale[O];if(a==null)throw new Error(`Missing UI string '${O}'`);return a}_updateStyle(O,a){var c,v;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(O,a));const M=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!O)),O?(this.style=new md(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O,a,M):this.style.loadJSON(O,a,M),this):((v=(c=this.style)===null||c===void 0?void 0:c.projection)===null||v===void 0||v.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new md(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,a){if(typeof O=="string"){const c=this._requestManager.transformRequest(O,"Style");o.j(c,new AbortController).then(v=>{this._updateDiff(v.data,a)}).catch(v=>{v&&this.fire(new o.k(v))})}else typeof O=="object"&&this._updateDiff(O,a)}_updateDiff(O,a){try{this.style.setState(O,a)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(O,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(O,a){return this._lazyInitEmptyStyle(),this.style.addSource(O,a),this._update(!0)}isSourceLoaded(O){const a=this.style&&this.style.sourceCaches[O];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),O){const a=this.style.sourceCaches[O.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${O.source}`);this.terrain===null&&a.reload();for(const c in this.style._layers){const v=this.style._layers[c];v.type==="hillshade"&&v.source===O.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ed(this.painter,a,O),this.painter.renderToTexture=new Zu(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var v;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==O.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((v=c.source)===null||v===void 0?void 0:v.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:O})),this}getTerrain(){var O,a;return(a=(O=this.terrain)===null||O===void 0?void 0:O.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const a in O){const c=O[a]._tiles;for(const v in c){const M=c[v];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}setSourceTileLodParams(O,a,c){if(c){const v=this.getSource(c);if(!v)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);v.calculateTileZoom=Ve(Math.max(1,O),Math.max(1,a))}else for(const v in this.style.sourceCaches)this.style.sourceCaches[v].getSource().calculateTileZoom=Ve(Math.max(1,O),Math.max(1,a));return this._update(!0),this}refreshTiles(O,a){const c=this.style.sourceCaches[O];if(!c)throw new Error(`There is no source cache with ID "${O}", cannot refresh tile`);a===void 0?c.reload():c.refreshTiles(a.map(v=>new o.a1(v.z,v.x,v.y)))}addImage(O,a,c={}){const{pixelRatio:v=1,sdf:M=!1,stretchX:I,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:Ae}=c;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:de,height:Oe,data:Be}=a,ze=a;return this.style.addImage(O,{data:new o.R({width:de,height:Oe},new Uint8Array(Be)),pixelRatio:v,stretchX:I,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:Ae,sdf:M,version:0,userImage:ze}),ze.onAdd&&ze.onAdd(this,O),this}}{const{width:de,height:Oe,data:Be}=R.getImageData(a);this.style.addImage(O,{data:new o.R({width:de,height:Oe},Be),pixelRatio:v,stretchX:I,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:Ae,sdf:M,version:0})}}updateImage(O,a){const c=this.style.getImage(O);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=a instanceof HTMLImageElement||o.b(a)?R.getImageData(a):a,{width:M,height:I,data:z}=v;if(M===void 0||I===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||I!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Y=!(a instanceof HTMLImageElement||o.b(a));return c.data.replace(z,Y),this.style.updateImage(O,c),this}getImage(O){return this.style.getImage(O)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O){return te.getImage(this._requestManager.transformRequest(O,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(O,a){return this._lazyInitEmptyStyle(),this.style.addLayer(O,a),this._update(!0)}moveLayer(O,a){return this.style.moveLayer(O,a),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(O,a,c){return this.style.setLayerZoomRange(O,a,c),this._update(!0)}setFilter(O,a,c={}){return this.style.setFilter(O,a,c),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,a,c,v={}){return this.style.setPaintProperty(O,a,c,v),this._update(!0)}getPaintProperty(O,a){return this.style.getPaintProperty(O,a)}setLayoutProperty(O,a,c,v={}){return this.style.setLayoutProperty(O,a,c,v),this._update(!0)}getLayoutProperty(O,a){return this.style.getLayoutProperty(O,a)}setGlyphs(O,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(O,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(O,a,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(O,a,c,v=>{v||this._update(!0)}),this}removeSprite(O){return this._lazyInitEmptyStyle(),this.style.removeSprite(O),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(O,a,c=>{c||this._update(!0)}),this}setLight(O,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(O,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(O,a){return this.style.setFeatureState(O,a),this._update()}removeFeatureState(O,a){return this.style.removeFeatureState(O,a),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,a=0;return this._container&&(O=this._container.clientWidth||400,a=this._container.clientHeight||300),[O,a]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map");const a=this._canvasContainer=P.create("div","maplibregl-canvas-container",O);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),v=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],v);const M=this._controlContainer=P.create("div","maplibregl-control-container",O),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{I[z]=P.create("div",`maplibregl-ctrl-${z} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(O,a,c){this._canvas.width=Math.floor(c*O),this._canvas.height=Math.floor(c*a),this._canvas.style.width=`${O}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const O=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let a=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{a={requestedAttributes:O},v&&(a.statusMessage=v.statusMessage,a.type=v.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,O):this._canvas.getContext("webgl2",O)||this._canvas.getContext("webgl",O),!c){const v="Failed to initialize WebGL";throw a?(a.message=v,new Error(JSON.stringify(a))):new Error(v)}this.painter=new mc(c,this.transform),U.testSupport(c)}migrateProjection(O,a){super.migrateProjection(O,a),this.painter.transform=O,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){var a,c,v,M,I;const z=this._idleTriggered?this._fadeDuration:0,Y=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let ee=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Oe=this.transform.zoom,Be=R.now();this.style.zoomHistory.update(Oe,Be);const ze=new o.C(Oe,{now:Be,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),He=ze.crossFadingFactor();He===1&&He===this._crossFadingFactor||(ee=!0,this._crossFadingFactor=He),this.style.update(ze)}const Ae=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==Y;(v=this.style.projection)===null||v===void 0||v.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,Ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cn.mark(o.co.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||ee)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const de=this._sourcesDirty||this._styleDirty||this._placementDirty;return de||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||de||(this._fullyLoaded=!0,o.cn.mark(o.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var O;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),te.removeThrottleControl(this._imageQueueHandle),(O=this._resizeObserver)===null||O===void 0||O.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a?.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cn.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,R.frame(this._frameRequest,O=>{o.cn.frame(O),this._frameRequest=null;try{this._render(O)}catch(a){if(!o.cp(a)&&!function(c){return c.message===ml}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}get version(){return ri}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(O){return this._lazyInitEmptyStyle(),this.style.setProjection(O),this._update(!0)}},l.MapMouseEvent=js,l.MapTouchEvent=qu,l.MapWheelEvent=il,l.Marker=dA,l.NavigationControl=class{constructor(O){this._updateZoomButtons=()=>{const a=this._map.getZoom(),c=a===this._map.getMaxZoom(),v=a===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,c)=>{const v=this._map._getUIString(`NavigationControl.${c}`);a.title=v,a.setAttribute("aria-label",v)},this.options=o.e({},Tl,O),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,a){const c=P.create("button",O,this._container);return c.type="button",c.addEventListener("click",a),c}},l.Popup=class extends o.E{constructor(O){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Bu(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;const c=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let v=this.options.anchor;const M=fA(this.options.offset);if(!v){const z=this._container.offsetWidth,Y=this._container.offsetHeight;let ee;ee=c.y+M.bottom.y<Y?["top"]:c.y>this._map.transform.height-Y?["bottom"]:[],c.x<z/2?ee.push("left"):c.x>this._map.transform.width-z/2&&ee.push("right"),v=ee.length===0?"bottom":ee.join("-")}let I=c.add(M[v]);this.options.subpixelPositioning||(I=I.round()),P.setTransform(this._container,`${ss[v]} translate(${I.x}px,${I.y}px)`),Ia(this._container,v,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Ih),O)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=o.Q.convert(O),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const a=document.createDocumentFragment(),c=document.createElement("body");let v;for(c.innerHTML=O;v=c.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){var O;return(O=this._container)===null||O===void 0?void 0:O.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){return this._container&&this._container.classList.add(O),this}removeClassName(O){return this._container&&this._container.classList.remove(O),this}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}setSubpixelPositioning(O){this.options.subpixelPositioning=O}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(Gc);O&&O.focus()}},l.RasterDEMTileSource=hr,l.RasterTileSource=An,l.ScaleControl=class{constructor(O){this._onMove=()=>{KA(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,KA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ju),O)}getDefaultPosition(){return"bottom-left"}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Ti,l.Style=md,l.TerrainControl=class{constructor(O){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=O}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=Ol,l.TwoFingersTouchRotateHandler=Xn,l.TwoFingersTouchZoomHandler=ou,l.TwoFingersTouchZoomRotateHandler=va,l.VectorTileSource=Ut,l.VideoSource=Pn,l.addSourceType=(O,a)=>o._(void 0,void 0,void 0,function*(){if(Ir(O))throw new Error(`A source type called "${O}" already exists.`);((c,v)=>{Ln[c]=v})(O,a)}),l.clearPrewarmedResources=function(){const O=Dt;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(Ie),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Qn,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return he().getRTLTextPluginStatus()},l.getVersion=function(){return kl},l.getWorkerCount=function(){return $e.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(O){return Ke().broadcast("IS",O)},l.prewarm=function(){Rt().acquire(Ie)},l.setMaxParallelImageRequests=function(O){o.a.MAX_PARALLEL_IMAGE_REQUESTS=O},l.setRTLTextPlugin=function(O,a){return he().setRTLTextPlugin(O,a)},l.setWorkerCount=function(O){$e.workerCount=O},l.setWorkerUrl=function(O){o.a.WORKER_URL=O}});var s=t;return s})}(t2)),t2.exports}var j$=G$();const sy=Gl(j$);var fb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function TL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Nv={exports:{}};Nv.exports;var a7;function W$(){return a7||(a7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",f="[object Array]",C="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",R="[object Error]",P="[object Function]",U="[object GeneratorFunction]",N="[object Map]",W="[object Number]",X="[object Null]",$="[object Object]",re="[object Promise]",te="[object Proxy]",V="[object RegExp]",ne="[object Set]",G="[object String]",le="[object Symbol]",fe="[object Undefined]",pe="[object WeakMap]",we="[object ArrayBuffer]",Se="[object DataView]",xe="[object Float32Array]",je="[object Float64Array]",Me="[object Int8Array]",rt="[object Int16Array]",Ct="[object Int32Array]",it="[object Uint8Array]",nt="[object Uint8ClampedArray]",Ge="[object Uint16Array]",Ie="[object Uint32Array]",$e=/[\\^$.*+?()[\]{}|]/g,gt=/^\[object .+?Constructor\]$/,Dt=/^(?:0|[1-9]\d*)$/,ut={};ut[xe]=ut[je]=ut[Me]=ut[rt]=ut[Ct]=ut[it]=ut[nt]=ut[Ge]=ut[Ie]=!0,ut[o]=ut[f]=ut[we]=ut[x]=ut[Se]=ut[B]=ut[R]=ut[P]=ut[N]=ut[W]=ut[$]=ut[V]=ut[ne]=ut[G]=ut[pe]=!1;var Rt=typeof fb=="object"&&fb&&fb.Object===Object&&fb,St=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Rt||St||Function("return this")(),Pe=e&&!e.nodeType&&e,Re=Pe&&!0&&n&&!n.nodeType&&n,Ye=Re&&Re.exports===Pe,vt=Ye&&Rt.process,yt=function(){try{return vt&&vt.binding&&vt.binding("util")}catch{}}(),Et=yt&&yt.isTypedArray;function Zt(J,Ee){for(var st=-1,Ht=J==null?0:J.length,kr=0,Qn=[];++st<Ht;){var Zr=J[st];Ee(Zr,st,J)&&(Qn[kr++]=Zr)}return Qn}function Ut(J,Ee){for(var st=-1,Ht=Ee.length,kr=J.length;++st<Ht;)J[kr+st]=Ee[st];return J}function An(J,Ee){for(var st=-1,Ht=J==null?0:J.length;++st<Ht;)if(Ee(J[st],st,J))return!0;return!1}function hr(J,Ee){for(var st=-1,Ht=Array(J);++st<J;)Ht[st]=Ee(st);return Ht}function Vt(J){return function(Ee){return J(Ee)}}function Vn(J,Ee){return J.has(Ee)}function Pn(J,Ee){return J?.[Ee]}function Dn(J){var Ee=-1,st=Array(J.size);return J.forEach(function(Ht,kr){st[++Ee]=[kr,Ht]}),st}function Ln(J,Ee){return function(st){return J(Ee(st))}}function Ir(J){var Ee=-1,st=Array(J.size);return J.forEach(function(Ht){st[++Ee]=Ht}),st}var rr=Array.prototype,Yn=Function.prototype,We=Object.prototype,he=Ke["__core-js_shared__"],me=Yn.toString,et=We.hasOwnProperty,bt=function(){var J=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Yt=We.toString,Jt=RegExp("^"+me.call(et).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ir=Ye?Ke.Buffer:void 0,Xe=Ke.Symbol,ae=Ke.Uint8Array,ve=We.propertyIsEnumerable,p=rr.splice,Ne=Xe?Xe.toStringTag:void 0,Ve=Object.getOwnPropertySymbols,Te=ir?ir.isBuffer:void 0,lt=Ln(Object.keys,Object),ct=Ao(Ke,"DataView"),Ft=Ao(Ke,"Map"),jt=Ao(Ke,"Promise"),Gt=Ao(Ke,"Set"),nn=Ao(Ke,"WeakMap"),On=Ao(Object,"create"),Rn=Ni(ct),dr=Ni(Ft),Tr=Ni(jt),or=Ni(Gt),on=Ni(nn),ti=Xe?Xe.prototype:void 0,li=ti?ti.valueOf:void 0;function jr(J){var Ee=-1,st=J==null?0:J.length;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function Fr(){this.__data__=On?On(null):{},this.size=0}function wn(J){var Ee=this.has(J)&&delete this.__data__[J];return this.size-=Ee?1:0,Ee}function Dr(J){var Ee=this.__data__;if(On){var st=Ee[J];return st===r?void 0:st}return et.call(Ee,J)?Ee[J]:void 0}function ui(J){var Ee=this.__data__;return On?Ee[J]!==void 0:et.call(Ee,J)}function Pi(J,Ee){var st=this.__data__;return this.size+=this.has(J)?0:1,st[J]=On&&Ee===void 0?r:Ee,this}jr.prototype.clear=Fr,jr.prototype.delete=wn,jr.prototype.get=Dr,jr.prototype.has=ui,jr.prototype.set=Pi;function yi(J){var Ee=-1,st=J==null?0:J.length;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function As(){this.__data__=[],this.size=0}function qr(J){var Ee=this.__data__,st=gr(Ee,J);if(st<0)return!1;var Ht=Ee.length-1;return st==Ht?Ee.pop():p.call(Ee,st,1),--this.size,!0}function _s(J){var Ee=this.__data__,st=gr(Ee,J);return st<0?void 0:Ee[st][1]}function La(J){return gr(this.__data__,J)>-1}function da(J,Ee){var st=this.__data__,Ht=gr(st,J);return Ht<0?(++this.size,st.push([J,Ee])):st[Ht][1]=Ee,this}yi.prototype.clear=As,yi.prototype.delete=qr,yi.prototype.get=_s,yi.prototype.has=La,yi.prototype.set=da;function No(J){var Ee=-1,st=J==null?0:J.length;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function zs(){this.size=0,this.__data__={hash:new jr,map:new(Ft||yi),string:new jr}}function hl(J){var Ee=bi(this,J).delete(J);return this.size-=Ee?1:0,Ee}function ci(J){return bi(this,J).get(J)}function oa(J){return bi(this,J).has(J)}function bo(J,Ee){var st=bi(this,J),Ht=st.size;return st.set(J,Ee),this.size+=st.size==Ht?0:1,this}No.prototype.clear=zs,No.prototype.delete=hl,No.prototype.get=ci,No.prototype.has=oa,No.prototype.set=bo;function lo(J){var Ee=-1,st=J==null?0:J.length;for(this.__data__=new No;++Ee<st;)this.add(J[Ee])}function Er(J){return this.__data__.set(J,r),this}function wa(J){return this.__data__.has(J)}lo.prototype.add=lo.prototype.push=Er,lo.prototype.has=wa;function qo(J){var Ee=this.__data__=new yi(J);this.size=Ee.size}function Jo(){this.__data__=new yi,this.size=0}function qe(J){var Ee=this.__data__,st=Ee.delete(J);return this.size=Ee.size,st}function xt(J){return this.__data__.get(J)}function _n(J){return this.__data__.has(J)}function jn(J,Ee){var st=this.__data__;if(st instanceof yi){var Ht=st.__data__;if(!Ft||Ht.length<t-1)return Ht.push([J,Ee]),this.size=++st.size,this;st=this.__data__=new No(Ht)}return st.set(J,Ee),this.size=st.size,this}qo.prototype.clear=Jo,qo.prototype.delete=qe,qo.prototype.get=xt,qo.prototype.has=_n,qo.prototype.set=jn;function fn(J,Ee){var st=Vo(J),Ht=!st&&$o(J),kr=!st&&!Ht&&Ea(J),Qn=!st&&!Ht&&!kr&&Ho(J),Zr=st||Ht||kr||Qn,Ai=Zr?hr(J.length,String):[],Rr=Ai.length;for(var ni in J)et.call(J,ni)&&!(Zr&&(ni=="length"||kr&&(ni=="offset"||ni=="parent")||Qn&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||Wl(ni,Rr)))&&Ai.push(ni);return Ai}function gr(J,Ee){for(var st=J.length;st--;)if(uo(J[st][0],Ee))return st;return-1}function Qi(J,Ee,st){var Ht=Ee(J);return Vo(J)?Ht:Ut(Ht,st(J))}function Io(J){return J==null?J===void 0?fe:X:Ne&&Ne in Object(J)?Oi(J):za(J)}function fs(J){return Ii(J)&&Io(J)==o}function fa(J,Ee,st,Ht,kr){return J===Ee?!0:J==null||Ee==null||!Ii(J)&&!Ii(Ee)?J!==J&&Ee!==Ee:iA(J,Ee,st,Ht,fa,kr)}function iA(J,Ee,st,Ht,kr,Qn){var Zr=Vo(J),Ai=Vo(Ee),Rr=Zr?f:Oo(J),ni=Ai?f:Oo(Ee);Rr=Rr==o?$:Rr,ni=ni==o?$:ni;var Yi=Rr==$,xo=ni==$,si=Rr==ni;if(si&&Ea(J)){if(!Ea(Ee))return!1;Zr=!0,Yi=!1}if(si&&!Yi)return Qn||(Qn=new qo),Zr||Ho(J)?nl(J,Ee,st,Ht,kr,Qn):Ua(J,Ee,Rr,st,Ht,kr,Qn);if(!(st&i)){var fi=Yi&&et.call(J,"__wrapped__"),co=xo&&et.call(Ee,"__wrapped__");if(fi||co){var Ki=fi?J.value():J,Fi=co?Ee.value():Ee;return Qn||(Qn=new qo),kr(Ki,Fi,st,Ht,Qn)}}return si?(Qn||(Qn=new qo),JA(J,Ee,st,Ht,kr,Qn)):!1}function vi(J){if(!EA(J)||oA(J))return!1;var Ee=Ss(J)?Jt:gt;return Ee.test(Ni(J))}function zu(J){return Ii(J)&&sa(J.length)&&!!ut[Io(J)]}function jl(J){if(!sA(J))return lt(J);var Ee=[];for(var st in Object(J))et.call(J,st)&&st!="constructor"&&Ee.push(st);return Ee}function nl(J,Ee,st,Ht,kr,Qn){var Zr=st&i,Ai=J.length,Rr=Ee.length;if(Ai!=Rr&&!(Zr&&Rr>Ai))return!1;var ni=Qn.get(J);if(ni&&Qn.get(Ee))return ni==Ee;var Yi=-1,xo=!0,si=st&s?new lo:void 0;for(Qn.set(J,Ee),Qn.set(Ee,J);++Yi<Ai;){var fi=J[Yi],co=Ee[Yi];if(Ht)var Ki=Zr?Ht(co,fi,Yi,Ee,J,Qn):Ht(fi,co,Yi,J,Ee,Qn);if(Ki!==void 0){if(Ki)continue;xo=!1;break}if(si){if(!An(Ee,function(Fi,Ns){if(!Vn(si,Ns)&&(fi===Fi||kr(fi,Fi,st,Ht,Qn)))return si.push(Ns)})){xo=!1;break}}else if(!(fi===co||kr(fi,co,st,Ht,Qn))){xo=!1;break}}return Qn.delete(J),Qn.delete(Ee),xo}function Ua(J,Ee,st,Ht,kr,Qn,Zr){switch(st){case Se:if(J.byteLength!=Ee.byteLength||J.byteOffset!=Ee.byteOffset)return!1;J=J.buffer,Ee=Ee.buffer;case we:return!(J.byteLength!=Ee.byteLength||!Qn(new ae(J),new ae(Ee)));case x:case B:case W:return uo(+J,+Ee);case R:return J.name==Ee.name&&J.message==Ee.message;case V:case G:return J==Ee+"";case N:var Ai=Dn;case ne:var Rr=Ht&i;if(Ai||(Ai=Ir),J.size!=Ee.size&&!Rr)return!1;var ni=Zr.get(J);if(ni)return ni==Ee;Ht|=s,Zr.set(J,Ee);var Yi=nl(Ai(J),Ai(Ee),Ht,kr,Qn,Zr);return Zr.delete(J),Yi;case le:if(li)return li.call(J)==li.call(Ee)}return!1}function JA(J,Ee,st,Ht,kr,Qn){var Zr=st&i,Ai=Sa(J),Rr=Ai.length,ni=Sa(Ee),Yi=ni.length;if(Rr!=Yi&&!Zr)return!1;for(var xo=Rr;xo--;){var si=Ai[xo];if(!(Zr?si in Ee:et.call(Ee,si)))return!1}var fi=Qn.get(J);if(fi&&Qn.get(Ee))return fi==Ee;var co=!0;Qn.set(J,Ee),Qn.set(Ee,J);for(var Ki=Zr;++xo<Rr;){si=Ai[xo];var Fi=J[si],Ns=Ee[si];if(Ht)var Na=Zr?Ht(Ns,Fi,si,Ee,J,Qn):Ht(Fi,Ns,si,J,Ee,Qn);if(!(Na===void 0?Fi===Ns||kr(Fi,Ns,st,Ht,Qn):Na)){co=!1;break}Ki||(Ki=si=="constructor")}if(co&&!Ki){var eu=J.constructor,Gs=Ee.constructor;eu!=Gs&&"constructor"in J&&"constructor"in Ee&&!(typeof eu=="function"&&eu instanceof eu&&typeof Gs=="function"&&Gs instanceof Gs)&&(co=!1)}return Qn.delete(J),Qn.delete(Ee),co}function Sa(J){return Qi(J,Gi,xl)}function bi(J,Ee){var st=J.__data__;return Di(Ee)?st[typeof Ee=="string"?"string":"hash"]:st.map}function Ao(J,Ee){var st=Pn(J,Ee);return vi(st)?st:void 0}function Oi(J){var Ee=et.call(J,Ne),st=J[Ne];try{J[Ne]=void 0;var Ht=!0}catch{}var kr=Yt.call(J);return Ht&&(Ee?J[Ne]=st:delete J[Ne]),kr}var xl=Ve?function(J){return J==null?[]:(J=Object(J),Zt(Ve(J),function(Ee){return ve.call(J,Ee)}))}:Sr,Oo=Io;(ct&&Oo(new ct(new ArrayBuffer(1)))!=Se||Ft&&Oo(new Ft)!=N||jt&&Oo(jt.resolve())!=re||Gt&&Oo(new Gt)!=ne||nn&&Oo(new nn)!=pe)&&(Oo=function(J){var Ee=Io(J),st=Ee==$?J.constructor:void 0,Ht=st?Ni(st):"";if(Ht)switch(Ht){case Rn:return Se;case dr:return N;case Tr:return re;case or:return ne;case on:return pe}return Ee});function Wl(J,Ee){return Ee=Ee??l,!!Ee&&(typeof J=="number"||Dt.test(J))&&J>-1&&J%1==0&&J<Ee}function Di(J){var Ee=typeof J;return Ee=="string"||Ee=="number"||Ee=="symbol"||Ee=="boolean"?J!=="__proto__":J===null}function oA(J){return!!bt&&bt in J}function sA(J){var Ee=J&&J.constructor,st=typeof Ee=="function"&&Ee.prototype||We;return J===st}function za(J){return Yt.call(J)}function Ni(J){if(J!=null){try{return me.call(J)}catch{}try{return J+""}catch{}}return""}function uo(J,Ee){return J===Ee||J!==J&&Ee!==Ee}var $o=fs(function(){return arguments}())?fs:function(J){return Ii(J)&&et.call(J,"callee")&&!ve.call(J,"callee")},Vo=Array.isArray;function Hi(J){return J!=null&&sa(J.length)&&!Ss(J)}var Ea=Te||to;function pa(J,Ee){return fa(J,Ee)}function Ss(J){if(!EA(J))return!1;var Ee=Io(J);return Ee==P||Ee==U||Ee==C||Ee==te}function sa(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=l}function EA(J){var Ee=typeof J;return J!=null&&(Ee=="object"||Ee=="function")}function Ii(J){return J!=null&&typeof J=="object"}var Ho=Et?Vt(Et):zu;function Gi(J){return Hi(J)?fn(J):jl(J)}function Sr(){return[]}function to(){return!1}n.exports=pa}(Nv,Nv.exports)),Nv.exports}var Q$=W$(),Y$=TL(Q$);function g6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function y6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function v6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function q$(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const f=s(l);r.push(g6(f.circle,l)),i.push(v6(f.line,l)),t.push(y6(f.polygon,f.polygonOutline,l))}else o.forEach(f=>{const C=s(f);r.push(g6(C.circle,l,f)),i.push(v6(C.line,l,f)),t.push(y6(C.polygon,C.polygonOutline,l,f))})}),t.concat(i).concat(r)}function $$(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var l7={polygonLayer:y6,lineLayer:v6,circleLayer:g6,generateInspectStyle:$$,generateColoredLayers:q$};class V${constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function H$(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function v4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${H$(e)}</div></div>`}function Z$(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function X$(n){const e=Z$(n.layer["source-layer"]||n.layer.source),t=v4("$id",n.id),r=v4("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>v4(s,n.properties[s]));return[e,t,r].concat(i).join("")}function J$(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${X$(e)}</div>`).join("")}function eV(n){return`<div class="maplibregl-inspect_popup">${J$(n)}</div>`}var Gv={exports:{}},tV=Gv.exports,A7;function nV(){return A7||(A7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(tV,function(){var t=null,r={};X();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=V(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var le,fe,pe;if(G.count!==null&&G.count!==void 0){for(var we=G.count,Se=[],xe=0;xe<G.count;xe++)i.push(!1);for(G.count=null;we>Se.length;){var je=s(G);t!==null&&(G.seed=t),Se.push(je)}return G.count=we,Se}return le=l(G),fe=o(le,G),pe=f(le,fe,G),C([le,fe,pe],G)};function l(G){if(i.length>0){var le=ne(G.hue),fe=U(le),pe=(le[1]-le[0])/i.length,we=parseInt((fe-le[0])/pe);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var Se=(le[0]+we*pe)%359,xe=(le[0]+(we+1)*pe)%359;return le=[Se,xe],fe=U(le),fe<0&&(fe=360+fe),fe}else{var le=B(G.hue);return fe=U(le),fe<0&&(fe=360+fe),fe}}function o(G,le){if(le.hue==="monochrome")return 0;if(le.luminosity==="random")return U([0,100]);var fe=R(G),pe=fe[0],we=fe[1];switch(le.luminosity){case"bright":pe=55;break;case"dark":pe=we-10;break;case"light":we=55;break}return U([pe,we])}function f(G,le,fe){var pe=x(G,le),we=100;switch(fe.luminosity){case"dark":we=pe+20;break;case"light":pe=(we+pe)/2;break;case"random":pe=0,we=100;break}return U([pe,we])}function C(G,le){switch(le.format){case"hsvArray":return G;case"hslArray":return te(G);case"hsl":var fe=te(G);return"hsl("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%)";case"hsla":var pe=te(G),xe=le.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+xe+")";case"rgbArray":return $(G);case"rgb":var we=$(G);return"rgb("+we.join(", ")+")";case"rgba":var Se=$(G),xe=le.alpha||Math.random();return"rgba("+Se.join(", ")+", "+xe+")";default:return N(G)}}function x(G,le){for(var fe=P(G).lowerBounds,pe=0;pe<fe.length-1;pe++){var we=fe[pe][0],Se=fe[pe][1],xe=fe[pe+1][0],je=fe[pe+1][1];if(le>=we&&le<=xe){var Me=(je-Se)/(xe-we),rt=Se-Me*we;return Me*le+rt}}return 0}function B(G){if(typeof parseInt(G)=="number"){var le=parseInt(G);if(le<360&&le>0)return[le,le]}if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=re(G)[0];return[pe,pe]}}return[0,360]}function R(G){return P(G).saturationRange}function P(G){G>=334&&G<=360&&(G-=360);for(var le in r){var fe=r[le];if(fe.hueRange&&G>=fe.hueRange[0]&&G<=fe.hueRange[1])return r[le]}return"Color not found"}function U(G){if(t===null){var le=.618033988749895,fe=Math.random();return fe+=le,fe%=1,Math.floor(G[0]+fe*(G[1]+1-G[0]))}else{var pe=G[1]||1,we=G[0]||0;t=(t*9301+49297)%233280;var Se=t/233280;return Math.floor(we+Se*(pe-we))}}function N(G){var le=$(G);function fe(we){var Se=we.toString(16);return Se.length==1?"0"+Se:Se}var pe="#"+fe(le[0])+fe(le[1])+fe(le[2]);return pe}function W(G,le,fe){var pe=fe[0][0],we=fe[fe.length-1][0],Se=fe[fe.length-1][1],xe=fe[0][1];r[G]={hueRange:le,lowerBounds:fe,saturationRange:[pe,we],brightnessRange:[Se,xe]}}function X(){W("monochrome",null,[[0,0],[100,0]]),W("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),W("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),W("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),W("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),W("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),W("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),W("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function $(G){var le=G[0];le===0&&(le=1),le===360&&(le=359),le=le/360;var fe=G[1]/100,pe=G[2]/100,we=Math.floor(le*6),Se=le*6-we,xe=pe*(1-fe),je=pe*(1-Se*fe),Me=pe*(1-(1-Se)*fe),rt=256,Ct=256,it=256;switch(we){case 0:rt=pe,Ct=Me,it=xe;break;case 1:rt=je,Ct=pe,it=xe;break;case 2:rt=xe,Ct=pe,it=Me;break;case 3:rt=xe,Ct=je,it=pe;break;case 4:rt=Me,Ct=xe,it=pe;break;case 5:rt=pe,Ct=xe,it=je;break}var nt=[Math.floor(rt*255),Math.floor(Ct*255),Math.floor(it*255)];return nt}function re(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var le=parseInt(G.substr(0,2),16)/255,fe=parseInt(G.substr(2,2),16)/255,pe=parseInt(G.substr(4,2),16)/255,we=Math.max(le,fe,pe),Se=we-Math.min(le,fe,pe),xe=we?Se/we:0;switch(we){case le:return[60*((fe-pe)/Se%6)||0,xe,we];case fe:return[60*((pe-le)/Se+2)||0,xe,we];case pe:return[60*((le-fe)/Se+4)||0,xe,we]}}function te(G){var le=G[0],fe=G[1]/100,pe=G[2]/100,we=(2-fe)*pe;return[le,Math.round(fe*pe/(we<1?we:2-we)*1e4)/100,we/2*100]}function V(G){for(var le=0,fe=0;fe!==G.length&&!(le>=Number.MAX_SAFE_INTEGER);fe++)le+=G.charCodeAt(fe);return le}function ne(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=re(G)[0];return P(pe).hueRange}}}else{var le=parseInt(G);if(le<360&&le>0)return P(G).hueRange}return[0,360]}return s})}(Gv,Gv.exports)),Gv.exports}var rV=nV(),iV=TL(rV);function oV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${iV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var sV={brightColor:oV};function aV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function lV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class qB{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!Y$(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();aV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const l=this.options.renderPopup(s);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof qB))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:sV.brightColor,buildInspectStyle:l7.generateInspectStyle,renderPopup:eV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new V$({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=l7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(lV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var jv={exports:{}},AV=jv.exports,u7;function uV(){return u7||(u7=1,function(n,e){(function(t,r){{var i=r();n&&n.exports&&(e=n.exports=i),e.randomColor=i}})(AV,function(){var t=null,r={};X();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=V(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var le,fe,pe;if(G.count!==null&&G.count!==void 0){for(var we=G.count,Se=[],xe=0;xe<G.count;xe++)i.push(!1);for(G.count=null;we>Se.length;){var je=s(G);t!==null&&(G.seed=t),Se.push(je)}return G.count=we,Se}return le=l(G),fe=o(le,G),pe=f(le,fe,G),C([le,fe,pe],G)};function l(G){if(i.length>0){var le=ne(G.hue),fe=U(le),pe=(le[1]-le[0])/i.length,we=parseInt((fe-le[0])/pe);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var Se=(le[0]+we*pe)%359,xe=(le[0]+(we+1)*pe)%359;return le=[Se,xe],fe=U(le),fe<0&&(fe=360+fe),fe}else{var le=B(G.hue);return fe=U(le),fe<0&&(fe=360+fe),fe}}function o(G,le){if(le.hue==="monochrome")return 0;if(le.luminosity==="random")return U([0,100]);var fe=R(G),pe=fe[0],we=fe[1];switch(le.luminosity){case"bright":pe=55;break;case"dark":pe=we-10;break;case"light":we=55;break}return U([pe,we])}function f(G,le,fe){var pe=x(G,le),we=100;switch(fe.luminosity){case"dark":we=pe+20;break;case"light":pe=(we+pe)/2;break;case"random":pe=0,we=100;break}return U([pe,we])}function C(G,le){switch(le.format){case"hsvArray":return G;case"hslArray":return te(G);case"hsl":var fe=te(G);return"hsl("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%)";case"hsla":var pe=te(G),xe=le.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+xe+")";case"rgbArray":return $(G);case"rgb":var we=$(G);return"rgb("+we.join(", ")+")";case"rgba":var Se=$(G),xe=le.alpha||Math.random();return"rgba("+Se.join(", ")+", "+xe+")";default:return N(G)}}function x(G,le){for(var fe=P(G).lowerBounds,pe=0;pe<fe.length-1;pe++){var we=fe[pe][0],Se=fe[pe][1],xe=fe[pe+1][0],je=fe[pe+1][1];if(le>=we&&le<=xe){var Me=(je-Se)/(xe-we),rt=Se-Me*we;return Me*le+rt}}return 0}function B(G){if(typeof parseInt(G)=="number"){var le=parseInt(G);if(le<360&&le>0)return[le,le]}if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=re(G)[0];return[pe,pe]}}return[0,360]}function R(G){return P(G).saturationRange}function P(G){G>=334&&G<=360&&(G-=360);for(var le in r){var fe=r[le];if(fe.hueRange&&G>=fe.hueRange[0]&&G<=fe.hueRange[1])return r[le]}return"Color not found"}function U(G){if(t===null){var le=.618033988749895,fe=Math.random();return fe+=le,fe%=1,Math.floor(G[0]+fe*(G[1]+1-G[0]))}else{var pe=G[1]||1,we=G[0]||0;t=(t*9301+49297)%233280;var Se=t/233280;return Math.floor(we+Se*(pe-we))}}function N(G){var le=$(G);function fe(we){var Se=we.toString(16);return Se.length==1?"0"+Se:Se}var pe="#"+fe(le[0])+fe(le[1])+fe(le[2]);return pe}function W(G,le,fe){var pe=fe[0][0],we=fe[fe.length-1][0],Se=fe[fe.length-1][1],xe=fe[0][1];r[G]={hueRange:le,lowerBounds:fe,saturationRange:[pe,we],brightnessRange:[Se,xe]}}function X(){W("monochrome",null,[[0,0],[100,0]]),W("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),W("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),W("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),W("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),W("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),W("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),W("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function $(G){var le=G[0];le===0&&(le=1),le===360&&(le=359),le=le/360;var fe=G[1]/100,pe=G[2]/100,we=Math.floor(le*6),Se=le*6-we,xe=pe*(1-fe),je=pe*(1-Se*fe),Me=pe*(1-(1-Se)*fe),rt=256,Ct=256,it=256;switch(we){case 0:rt=pe,Ct=Me,it=xe;break;case 1:rt=je,Ct=pe,it=xe;break;case 2:rt=xe,Ct=pe,it=Me;break;case 3:rt=xe,Ct=je,it=pe;break;case 4:rt=Me,Ct=xe,it=pe;break;case 5:rt=pe,Ct=xe,it=je;break}var nt=[Math.floor(rt*255),Math.floor(Ct*255),Math.floor(it*255)];return nt}function re(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var le=parseInt(G.substr(0,2),16)/255,fe=parseInt(G.substr(2,2),16)/255,pe=parseInt(G.substr(4,2),16)/255,we=Math.max(le,fe,pe),Se=we-Math.min(le,fe,pe),xe=we?Se/we:0;switch(we){case le:return[60*((fe-pe)/Se%6)||0,xe,we];case fe:return[60*((pe-le)/Se+2)||0,xe,we];case pe:return[60*((le-fe)/Se+4)||0,xe,we]}}function te(G){var le=G[0],fe=G[1]/100,pe=G[2]/100,we=(2-fe)*pe;return[le,Math.round(fe*pe/(we<1?we:2-we)*1e4)/100,we/2*100]}function V(G){for(var le=0,fe=0;fe!==G.length&&!(le>=Number.MAX_SAFE_INTEGER);fe++)le+=G.charCodeAt(fe);return le}function ne(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var fe=r[G];if(fe.hueRange)return fe.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=re(G)[0];return P(pe).hueRange}}}else{var le=parseInt(G);if(le<360&&le>0)return P(G).hueRange}return[0,360]}return s})}(jv,jv.exports)),jv.exports}var cV=uV();const hV=Gl(cV);function dV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${hV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const kL={brightColor:dV};var C4={exports:{}},_4,c7;function fV(){if(c7)return _4;c7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _4=n,_4}var b4,h7;function pV(){if(h7)return b4;h7=1;var n=fV();function e(){}function t(){}return t.resetWarningCache=e,b4=function(){function r(l,o,f,C,x,B){if(B!==n){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},b4}var d7;function pm(){return d7||(d7=1,C4.exports=pV()()),C4.exports}var mV=pm();const Jn=Gl(mV);var f7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function gV(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var q0=function(e,t){var r=e.children,i=e.color,s=e.size,l=e.style,o=e.width,f=e.height,C=gV(e,["children","color","size","style","width","height"]),x=t.reactIconBase,B=x===void 0?{}:x,R=s||B.size||"1em";return ur.createElement("svg",f7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:f||R,width:o||R},B,C,{style:f7({verticalAlign:"middle",color:i||B.color},B.style||{},l)}))};q0.propTypes={color:Jn.string,size:Jn.oneOfType([Jn.string,Jn.number]),width:Jn.oneOfType([Jn.string,Jn.number]),height:Jn.oneOfType([Jn.string,Jn.number]),style:Jn.object};q0.contextTypes={reactIconBase:Jn.shape(q0.propTypes)};function E2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return E2=function(){return l},l}E2();class yV extends ur.Component{render(){return E2().f[0]++,E2().s[0]++,oe.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:oe.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function B2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return B2=function(){return l},l}B2();class pb extends ur.Component{render(){return B2().f[0]++,B2().s[0]++,oe.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:oe.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return O2=function(){return l},l}O2();class vV extends ur.Component{render(){return O2().f[0]++,O2().s[0]++,oe.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:oe.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:oe.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function I2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return I2=function(){return l},l}I2();class p7 extends ur.Component{render(){return I2().f[0]++,I2().s[0]++,oe.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:oe.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function T2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return T2=function(){return l},l}T2();class CV extends ur.Component{render(){return T2().f[0]++,T2().s[0]++,oe.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:oe.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function qy(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function _V(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function bV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function xV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function MV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function wV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function SV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function EV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function BV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function OV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function PL(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function IV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function C6(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function TV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function kV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function PV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function m7(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function RV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function DV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function KV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function FV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function LV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function UV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function zV(n){return rA({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function k2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return k2=function(){return l},l}k2();class NV extends ur.Component{render(){return k2().f[0]++,k2().s[0]++,oe.jsx(zV,{...this.props})}}function Ll(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ll=function(){return l},l}Ll();class RL extends ur.Component{render(){Ll().f[0]++;const e=(Ll().s[0]++,{style:this.props.style});switch(Ll().s[1]++,this.props.type){case"fill-extrusion":return Ll().b[0][0]++,Ll().s[2]++,oe.jsx(p7,{...e});case"raster":return Ll().b[0][1]++,Ll().s[3]++,oe.jsx(pb,{...e});case"hillshade":return Ll().b[0][2]++,Ll().s[4]++,oe.jsx(pb,{...e});case"heatmap":return Ll().b[0][3]++,Ll().s[5]++,oe.jsx(pb,{...e});case"fill":return Ll().b[0][4]++,Ll().s[6]++,oe.jsx(pb,{...e});case"background":return Ll().b[0][5]++,Ll().s[7]++,oe.jsx(p7,{...e});case"line":return Ll().b[0][6]++,Ll().s[8]++,oe.jsx(yV,{...e});case"symbol":return Ll().b[0][7]++,Ll().s[9]++,oe.jsx(vV,{...e});case"circle":return Ll().b[0][8]++,Ll().s[10]++,oe.jsx(CV,{...e});default:return Ll().b[0][9]++,Ll().s[11]++,oe.jsx(NV,{...e})}}}function ei(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ei=function(){return l},l}ei();function GV(n){ei().f[0]++;const e=(ei().s[0]++,{}),t=(ei().s[1]++,{});return ei().s[2]++,n.forEach(r=>{ei().f[1]++;const i=(ei().s[3]++,r.layer["source-layer"]);if(ei().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){ei().b[0][0]++,ei().s[5]++,t[r.layer.id]++;const s=(ei().s[6]++,e[i].find(l=>(ei().f[2]++,ei().s[7]++,l.layer.id===r.layer.id)));ei().s[8]++,s.counter=t[r.layer.id]}else ei().b[0][1]++,ei().s[9]++,e[i]=(ei().b[1][0]++,e[i]||(ei().b[1][1]++,[])),ei().s[10]++,e[i].push(r),ei().s[11]++,t[r.layer.id]=1}),ei().s[12]++,e}class DL extends ur.Component{_getFeatureColor(e,t){if(ei().f[3]++,ei().s[13]++,e.layer.paint)ei().b[2][1]++;else{ei().b[2][0]++,ei().s[14]++;return}ei().s[15]++;try{const r=(ei().s[16]++,e.layer.paint);return ei().s[17]++,ei().b[4][0]++,"text-color"in r&&(ei().b[4][1]++,r["text-color"])?(ei().b[3][0]++,ei().s[18]++,String(r["text-color"])):(ei().b[3][1]++,ei().s[19]++,ei().b[6][0]++,"fill-color"in r&&(ei().b[6][1]++,r["fill-color"])?(ei().b[5][0]++,ei().s[20]++,String(r["fill-color"])):(ei().b[5][1]++,ei().s[21]++,ei().b[8][0]++,"line-color"in r&&(ei().b[8][1]++,r["line-color"])?(ei().b[7][0]++,ei().s[22]++,String(r["line-color"])):(ei().b[7][1]++,ei().s[23]++,ei().b[10][0]++,"fill-extrusion-color"in r&&(ei().b[10][1]++,r["fill-extrusion-color"])?(ei().b[9][0]++,ei().s[24]++,String(r["fill-extrusion-color"])):(ei().b[9][1]++,ei().s[25]++,"black"))))}catch(r){return ei().s[26]++,console.warn("Unable to get feature color, error:",r),ei().s[27]++,"black"}}render(){ei().f[4]++;const e=(ei().s[28]++,GV(this.props.features)),t=(ei().s[29]++,Object.keys(e).map(r=>{ei().f[5]++;const i=(ei().s[30]++,e[r].map((s,l)=>{ei().f[6]++;const o=(ei().s[31]++,this._getFeatureColor(s,this.props.zoom));return ei().s[32]++,oe.jsxs("div",{className:"maputnik-popup-layer",children:[oe.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),oe.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{ei().f[7]++,ei().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(ei().b[11][0]++,s.layer.type&&(ei().b[11][1]++,oe.jsx(RL,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(ei().b[12][0]++,s.counter&&(ei().b[12][1]++,oe.jsxs("span",{children:[" × ",s.counter]})))]})]},l)}));return ei().s[34]++,oe.jsxs("div",{children:[oe.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return ei().s[35]++,oe.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Ji(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ji=function(){return l},l}Ji();function g7(n){return Ji().f[0]++,Ji().s[0]++,Ji().b[1][0]++,typeof n>"u"||(Ji().b[1][1]++,n===null)?(Ji().b[0][0]++,Ji().s[1]++,n):(Ji().b[0][1]++,Ji().s[2]++,n instanceof Date?(Ji().b[2][0]++,Ji().s[3]++,n.toLocaleString()):(Ji().b[2][1]++,Ji().s[4]++,Ji().b[4][0]++,typeof n=="object"||(Ji().b[4][1]++,typeof n=="number")||(Ji().b[4][2]++,typeof n=="string")?(Ji().b[3][0]++,Ji().s[5]++,n.toString()):(Ji().b[3][1]++,Ji().s[6]++,n)))}function x4(n,e){return Ji().f[1]++,Ji().s[7]++,oe.jsxs("tr",{children:[oe.jsx("td",{className:"maputnik-popup-table-cell",children:n}),oe.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function jV(n,e){return Ji().f[2]++,Ji().s[8]++,oe.jsxs(ur.Fragment,{children:[oe.jsx("tr",{children:oe.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Ji().b[5][0]++,n.inspectModeCounter&&(Ji().b[5][1]++,oe.jsxs("span",{children:[" × ",n.inspectModeCounter]})))]})}),x4("$type",n.geometry.type),x4("$id",g7(n.id)),Object.keys(n.properties).map(t=>{Ji().f[3]++;const r=(Ji().s[9]++,n.properties[t]);return Ji().s[10]++,x4(t,g7(r))})]},e)}function WV(n){Ji().f[4]++;const e=(Ji().s[11]++,[]);return Ji().s[12]++,n.forEach(t=>{Ji().f[5]++;const r=(Ji().s[13]++,e.findIndex(i=>(Ji().f[6]++,Ji().s[14]++,Ji().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Ji().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Ji().s[15]++,r===-1?(Ji().b[7][0]++,Ji().s[16]++,e.push(t)):(Ji().b[7][1]++,Ji().s[17]++,"inspectModeCounter"in e[r]?(Ji().b[8][0]++,Ji().s[18]++,e[r].inspectModeCounter++):(Ji().b[8][1]++,Ji().s[19]++,e[r].inspectModeCounter=2))}),Ji().s[20]++,e}class QV extends ur.Component{render(){Ji().f[7]++;const e=(Ji().s[21]++,WV(this.props.features));return Ji().s[22]++,oe.jsx("div",{className:"maputnik-feature-property-popup",children:oe.jsx("table",{className:"maputnik-popup-table",children:oe.jsx("tbody",{children:e.map(jV)})})})}}const cC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},KL=Object.create(null);for(const n in cC)Object.hasOwn(cC,n)&&(KL[cC[n]]=n);const lc={to:{},get:{}};lc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,r;switch(e){case"hsl":{t=lc.get.hsl(n),r="hsl";break}case"hwb":{t=lc.get.hwb(n),r="hwb";break}default:{t=lc.get.rgb(n),r="rgb";break}}return t?{model:r,value:t}:null};lc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/;let l=[0,0,0,1],o,f,C;if(o=n.match(t)){for(C=o[2],o=o[1],f=0;f<3;f++){const x=f*2;l[f]=Number.parseInt(o.slice(x,x+2),16)}C&&(l[3]=Number.parseInt(C,16)/255)}else if(o=n.match(e)){for(o=o[1],C=o[3],f=0;f<3;f++)l[f]=Number.parseInt(o[f]+o[f],16);C&&(l[3]=Number.parseInt(C+C,16)/255)}else if(o=n.match(r)){for(f=0;f<3;f++)l[f]=Number.parseInt(o[f+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(i)){for(f=0;f<3;f++)l[f]=Math.round(Number.parseFloat(o[f+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(s))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(cC,o[1])?(l=cC[o[1]],l[3]=1,l):null:null;for(f=0;f<3;f++)l[f]=N0(l[f],0,255);return l[3]=N0(l[3],0,1),l};lc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=N0(Number.parseFloat(t[2]),0,100),l=N0(Number.parseFloat(t[3]),0,100),o=N0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};lc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=N0(Number.parseFloat(t[2]),0,100),l=N0(Number.parseFloat(t[3]),0,100),o=N0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};lc.to.hex=function(...n){return"#"+mb(n[0])+mb(n[1])+mb(n[2])+(n[3]<1?mb(Math.round(n[3]*255)):"")};lc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};lc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};lc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};lc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};lc.to.keyword=function(...n){return KL[n.slice(0,3)]};function N0(n,e,t){return Math.min(Math.max(e,n),t)}function mb(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const TC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},FL={};for(const n of Object.keys(TC))FL[TC[n]]=n;const di={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Nm=(6/29)**3;for(const n of Object.keys(di)){if(!("channels"in di[n]))throw new Error("missing channels property: "+n);if(!("labels"in di[n]))throw new Error("missing channel labels property: "+n);if(di[n].labels.length!==di[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=di[n];delete di[n].channels,delete di[n].labels,Object.defineProperty(di[n],"channels",{value:e}),Object.defineProperty(di[n],"labels",{value:t})}di.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),l=s-i;let o,f;switch(s){case i:{o=0;break}case e:{o=(t-r)/l;break}case t:{o=2+(r-e)/l;break}case r:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const C=(i+s)/2;return s===i?f=0:C<=.5?f=l/(s+i):f=l/(2-s-i),[o,f*100,C*100]};di.rgb.hsv=function(n){let e,t,r,i,s;const l=n[0]/255,o=n[1]/255,f=n[2]/255,C=Math.max(l,o,f),x=C-Math.min(l,o,f),B=function(R){return(C-R)/6/x+1/2};if(x===0)i=0,s=0;else{switch(s=x/C,e=B(l),t=B(o),r=B(f),C){case l:{i=r-t;break}case o:{i=1/3+e-r;break}case f:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,C*100]};di.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=di.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};di.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,l=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0;return[s*100,l*100,o*100,i*100]};function YV(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}di.rgb.keyword=function(n){const e=FL[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(TC)){const s=TC[i],l=YV(n,s);l<t&&(t=l,r=i)}return r};di.keyword.rgb=function(n){return TC[n]};di.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,l=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,l*100]};di.rgb.lab=function(n){const e=di.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>Nm?t**(1/3):7.787*t+16/116,r=r>Nm?r**(1/3):7.787*r+16/116,i=i>Nm?i**(1/3):7.787*i+16/116;const s=116*r-16,l=500*(t-r),o=200*(r-i);return[s,l,o]};di.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const l=r<.5?r*(1+t):r+t-r*t,o=2*r-l,f=[0,0,0];for(let C=0;C<3;C++)i=e+1/3*-(C-1),i<0&&i++,i>1&&i--,6*i<1?s=o+(l-o)*6*i:2*i<1?s=l:3*i<2?s=o+(l-o)*(2/3-i)*6:s=o,f[C]=s*255;return f};di.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const l=(r+t)/2,o=r===0?2*i/(s+i):2*t/(r+t);return[e,o*100,l*100]};di.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),l=255*r*(1-t),o=255*r*(1-t*s),f=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,f,l];case 1:return[o,r,l];case 2:return[l,r,f];case 3:return[l,o,r];case 4:return[f,l,r];case 5:return[r,l,o]}};di.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,l;l=(2-t)*r;const o=(2-t)*i;return s=t*i,s/=o<=1?o:2-o,s=s||0,l/=2,[e,s*100,l*100]};di.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const l=Math.floor(6*e),o=1-r;s=6*e-l,(l&1)!==0&&(s=1-s);const f=t+s*(o-t);let C,x,B;switch(l){default:case 6:case 0:{C=o,x=f,B=t;break}case 1:{C=f,x=o,B=t;break}case 2:{C=t,x=o,B=f;break}case 3:{C=t,x=f,B=o;break}case 4:{C=f,x=t,B=o;break}case 5:{C=o,x=t,B=f;break}}return[C*255,x*255,B*255]};di.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),l=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i);return[s*255,l*255,o*255]};di.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,l;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,l=e*.0556434+t*-.2040259+r*1.0572252,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),[i*255,s*255,l*255]};di.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>Nm?e**(1/3):7.787*e+16/116,t=t>Nm?t**(1/3):7.787*t+16/116,r=r>Nm?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),l=200*(t-r);return[i,s,l]};di.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,l;s=(e+16)/116,i=t/500+s,l=s-r/200;const o=s**3,f=i**3,C=l**3;return s=o>Nm?o:(s-16/116)/7.787,i=f>Nm?f:(i-16/116)/7.787,l=C>Nm?C:(l-16/116)/7.787,i*=95.047,s*=100,l*=108.883,[i,s,l]};di.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const l=Math.sqrt(t*t+r*r);return[e,l,i]};di.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),l=t*Math.sin(i);return[e,s,l]};di.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?di.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let l=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(l+=60),l};di.hsv.ansi16=function(n){return di.rgb.ansi16(di.hsv.rgb(n),n[2])};di.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};di.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};di.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};di.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};di.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,l=r&255;return[i,s,l]};di.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),l=i-s;let o;const f=l<1?s/(1-l):0;return l<=0?o=0:i===e?o=(t-r)/l%6:i===t?o=2+(r-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,f*100]};di.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};di.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};di.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,l=s%1,o=1-l;let f=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=l,i[2]=0;break}case 1:{i[0]=o,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=l;break}case 3:{i[0]=0,i[1]=o,i[2]=1;break}case 4:{i[0]=l,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=o}return f=(1-t)*r,[(t*i[0]+f)*255,(t*i[1]+f)*255,(t*i[2]+f)*255]};di.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};di.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};di.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};di.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};di.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};di.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};di.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};di.gray.hsl=function(n){return[0,0,n[0]]};di.gray.hsv=di.gray.hsl;di.gray.hwb=function(n){return[0,100,n[0]]};di.gray.cmyk=function(n){return[0,0,0,n[0]]};di.gray.lab=function(n){return[n[0],0,0]};di.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};di.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function qV(){const n={},e=Object.keys(di);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function $V(n){const e=qV(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(di[r]);for(let{length:s}=i,l=0;l<s;l++){const o=i[l],f=e[o];f.distance===-1&&(f.distance=e[r].distance+1,f.parent=r,t.unshift(o))}}return e}function VV(n,e){return function(t){return e(n(t))}}function HV(n,e){const t=[e[n].parent,n];let r=di[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=VV(di[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function ZV(n){const e=$V(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const l=r[s];e[l].parent!==null&&(t[l]=HV(l,e))}return t}const Oc={},XV=Object.keys(di);function JV(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function eH(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,l=0;l<s;l++)i[l]=Math.round(i[l]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of XV){Oc[n]={},Object.defineProperty(Oc[n],"channels",{value:di[n].channels}),Object.defineProperty(Oc[n],"labels",{value:di[n].labels});const e=ZV(n),t=Object.keys(e);for(const r of t){const i=e[r];Oc[n][r]=eH(i),Oc[n][r].raw=JV(i)}}const LL=["keyword","gray","hex"],_6={};for(const n of Object.keys(Oc))_6[[...Oc[n].labels].sort().join("")]=n;const b6={};function Ku(n,e){if(!(this instanceof Ku))return new Ku(n,e);if(e&&e in LL&&(e=null),e&&!(e in Oc))throw new Error("Unknown model: "+e);let t,r;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof Ku)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const i=lc.get(n);if(i===null)throw new Error("Unable to parse color from string: "+n);this.model=i.model,r=Oc[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(n.length>0){this.model=e||"rgb",r=Oc[this.model].channels;const i=Array.prototype.slice.call(n,0,r);this.color=x6(i,r),this.valpha=typeof n[r]=="number"?n[r]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(n);"alpha"in n&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const s=i.sort().join("");if(!(s in _6))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=_6[s];const{labels:l}=Oc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=x6(o)}if(b6[this.model])for(r=Oc[this.model].channels,t=0;t<r;t++){const i=b6[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ku.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in lc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return lc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return lc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Oc[this.model],{labels:t}=Oc[this.model];for(let r=0;r<e;r++)n[t[r]]=this.color[r];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new Ku([...this.color.map(nH(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new Ku([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:VA("rgb",0,oc(255)),green:VA("rgb",1,oc(255)),blue:VA("rgb",2,oc(255)),hue:VA(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:VA("hsl",1,oc(100)),lightness:VA("hsl",2,oc(100)),saturationv:VA("hsv",1,oc(100)),value:VA("hsv",2,oc(100)),chroma:VA("hcg",1,oc(100)),gray:VA("hcg",2,oc(100)),white:VA("hwb",1,oc(100)),wblack:VA("hwb",2,oc(100)),cyan:VA("cmyk",0,oc(100)),magenta:VA("cmyk",1,oc(100)),yellow:VA("cmyk",2,oc(100)),black:VA("cmyk",3,oc(100)),x:VA("xyz",0,oc(95.047)),y:VA("xyz",1,oc(100)),z:VA("xyz",2,oc(108.833)),l:VA("lab",0,oc(100)),a:VA("lab",1),b:VA("lab",2),keyword(n){return n!==void 0?new Ku(n):Oc[this.model].keyword(this.color)},hex(n){return n!==void 0?new Ku(n):lc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new Ku(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),lc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,r]of n.entries()){const i=r/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return Ku.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,l=t.alpha()-r.alpha(),o=((s*l===-1?s:(s+l)/(1+s*l))+1)/2,f=1-o;return Ku.rgb(o*t.red()+f*r.red(),o*t.green()+f*r.green(),o*t.blue()+f*r.blue(),t.alpha()*i+r.alpha()*(1-i))}};for(const n of Object.keys(Oc)){if(LL.includes(n))continue;const{channels:e}=Oc[n];Ku.prototype[n]=function(...t){return this.model===n?new Ku(this):t.length>0?new Ku(t,n):new Ku([...rH(Oc[this.model][n].raw(this.color)),this.valpha],n)},Ku[n]=function(...t){let r=t[0];return typeof r=="number"&&(r=x6(t,e)),new Ku(r,n)}}function tH(n,e){return Number(n.toFixed(e))}function nH(n){return function(e){return tH(e,n)}}function VA(n,e,t){n=Array.isArray(n)?n:[n];for(const r of n)(b6[r]||=[])[e]=t;return n=n[0],function(r){let i;return r!==void 0?(t&&(r=t(r)),i=this[n](),i.color[e]=r,i):(i=this[n]().color[e],t&&(i=t(i)),i)}}function oc(n){return function(e){return Math.max(0,Math.min(n,e))}}function rH(n){return Array.isArray(n)?n:[n]}function x6(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function Vs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vs=function(){return l},l}Vs();class iH{_map=(Vs().s[0]++,void 0);_container=(Vs().s[1]++,void 0);_textEl=(Vs().s[2]++,null);constructor(){Vs().f[0]++}onAdd(e){return Vs().f[1]++,Vs().s[3]++,this._map=e,Vs().s[4]++,this._container=document.createElement("div"),Vs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Vs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Vs().s[7]++,this.setLabel("Zoom:"),Vs().s[8]++,this.addEventListeners(),Vs().s[9]++,this._container}updateZoomLevel(){Vs().f[2]++,Vs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Vs().f[3]++,Vs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Vs().s[12]++,this._textEl=this._container.querySelector("span"),Vs().s[13]++,this.updateZoomLevel()}addEventListeners(){Vs().f[4]++,Vs().s[14]++,this._map.on("render",()=>(Vs().f[5]++,Vs().s[15]++,this.updateZoomLevel())),Vs().s[16]++,this._map.on("zoomIn",()=>(Vs().f[6]++,Vs().s[17]++,this.updateZoomLevel())),Vs().s[18]++,this._map.on("zoomOut",()=>(Vs().f[7]++,Vs().s[19]++,this.updateZoomLevel()))}onRemove(){Vs().f[8]++,Vs().s[20]++,this._container.parentNode.removeChild(this._container),Vs().s[21]++,this._map=void 0}}function M6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function w6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function S6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function oH(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const f=s(l);r.push(M6(f.circle,l)),i.push(S6(f.line,l)),t.push(w6(f.polygon,f.polygonOutline,l))}else o.forEach(f=>{const C=s(f);r.push(M6(C.circle,l,f)),i.push(S6(C.line,l,f)),t.push(w6(C.polygon,C.polygonOutline,l,f))})}),t.concat(i).concat(r)}function sH(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const M4={polygonLayer:w6,lineLayer:S6,circleLayer:M6,generateInspectStyle:sH,generateColoredLayers:oH};function vo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vo=function(){return l},l}vo();function w4(n,e){return vo().f[0]++,vo().s[0]++,n.type==="circle"?(vo().b[0][0]++,vo().s[1]++,n.paint["circle-radius"]=3):(vo().b[0][1]++,vo().s[2]++,n.type==="line"?(vo().b[1][0]++,vo().s[3]++,n.paint["line-width"]=2):vo().b[1][1]++),vo().s[4]++,"filter"in e?(vo().b[2][0]++,vo().s[5]++,n.filter=e.filter):(vo().b[2][1]++,vo().s[6]++,delete n.filter),vo().s[7]++,n.id=n.id+"_highlight",vo().s[8]++,n}function aH(n){if(vo().f[1]++,vo().s[9]++,vo().b[4][0]++,!n||(vo().b[4][1]++,n.type==="background")||(vo().b[4][2]++,n.type==="raster"))return vo().b[3][0]++,vo().s[10]++,null;vo().b[3][1]++;const e=(vo().s[11]++,vo().b[5][0]++,n["source-layer"]||(vo().b[5][1]++,"")),t=(vo().s[12]++,kL.brightColor(e,1));return vo().s[13]++,vo().b[7][0]++,n.type==="fill"||(vo().b[7][1]++,n.type==="fill-extrusion")?(vo().b[6][0]++,vo().s[14]++,w4(M4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(vo().b[6][1]++,vo().s[15]++,vo().b[9][0]++,n.type==="symbol"||(vo().b[9][1]++,n.type==="circle")?(vo().b[8][0]++,vo().s[16]++,w4(M4.circleLayer(t,n.source,n["source-layer"]),n)):(vo().b[8][1]++,vo().s[17]++,n.type==="line"?(vo().b[10][0]++,vo().s[18]++,w4(M4.lineLayer(t,n.source,n["source-layer"]),n)):(vo().b[10][1]++,vo().s[19]++,null)))}function $B(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $B=function(){return l},l}$B();$B().s[0]++;sy.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function S4(n,e,t,r){function i(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function o(x){try{C(r.next(x))}catch(B){l(B)}}function f(x){try{C(r.throw(x))}catch(B){l(B)}}function C(x){x.done?s(x.value):i(x.value).then(o,f)}C((r=r.apply(n,e||[])).next())})}var gb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Kx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var E4,y7;function UL(){if(y7)return E4;y7=1,E4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return E4}var B4={exports:{}},v7;function lH(){return v7||(v7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var l=0,o=[],f=i.length,C=0,x=0,B=s.pre||"",R=s.post||"",P=s.caseSensitive&&i||i.toLowerCase(),U;r=s.caseSensitive&&r||r.toLowerCase();for(var N=0;N<f;N++)U=i[N],P[N]===r[l]?(U=B+U+R,l+=1,x+=1+x):x=0,C+=x,o[o.length]=U;return l===r.length?(C=P===r?1/0:C,{rendered:o.join(""),score:C}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(l,o,f,C){var x=o;s.extract&&(x=s.extract(o));var B=t.match(r,x,s);return B!=null&&(l[l.length]={string:B.rendered,score:B.score,index:f,original:o}),l},[]).sort(function(l,o){var f=o.score-l.score;return f||l.index-o.index}))}})()}(B4)),B4.exports}var O4,C7;function AH(){if(C7)return O4;C7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},O4=n,O4}var I4,_7;function uH(){if(_7)return I4;_7=1;var n=UL(),e=lH(),t=AH(),r=function(i,s,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var l=0;l<s.length&&(this.list.add(s[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,s),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var f=this.render(o);return{original:o,string:f}}).bind(this)),i(l)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var l=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(l),f=o.lastIndexOf(this.query);f>-1;){var C=f+this.query.length;l=l.slice(0,f)+"<strong>"+l.slice(f,C)+"</strong>"+l.slice(C),f=o.slice(0,f).lastIndexOf(this.query)}return l},r.prototype.renderError=function(i){this.list.drawError(i)},I4=r,I4}var T4,b7;function cH(){if(b7)return T4;b7=1;var n=uH();return T4=n,typeof window<"u"&&(window.Suggestions=n),T4}var hH=cH(),dH=Kx(hH),n2={exports:{}},fH=n2.exports,x7;function pH(){return x7||(x7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(fH,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(f){return f.match(t)||[]}function i(f){return r(f).filter(function(C,x){return C&&x})}function s(f){return f=r(f),{language:f[1]||e,extlang:f[2]||e,script:f[3]||e,region:f[4]||e}}function l(f,C,x){Object.defineProperty(f,C,{value:x,enumerable:!0})}function o(f,C,x){function B(R){return r(R)[f]||e}l(B,"pattern",C),l(s,x,B)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(s,"split",i),s})}(n2)),n2.exports}var mH=pH(),gH=Kx(mH),k4,M7;function yH(){if(M7)return k4;M7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,f=typeof gb=="object"&&gb&&gb.Object===Object&&gb,C=typeof self=="object"&&self&&self.Object===Object&&self,x=f||C||Function("return this")(),B=Object.prototype,R=B.toString,P=Math.max,U=Math.min,N=function(){return x.Date.now()};function W(V,ne,G){var le,fe,pe,we,Se,xe,je=0,Me=!1,rt=!1,Ct=!0;if(typeof V!="function")throw new TypeError(n);ne=te(ne)||0,X(G)&&(Me=!!G.leading,rt="maxWait"in G,pe=rt?P(te(G.maxWait)||0,ne):pe,Ct="trailing"in G?!!G.trailing:Ct);function it(St){var Ke=le,Pe=fe;return le=fe=void 0,je=St,we=V.apply(Pe,Ke),we}function nt(St){return je=St,Se=setTimeout($e,ne),Me?it(St):we}function Ge(St){var Ke=St-xe,Pe=St-je,Re=ne-Ke;return rt?U(Re,pe-Pe):Re}function Ie(St){var Ke=St-xe,Pe=St-je;return xe===void 0||Ke>=ne||Ke<0||rt&&Pe>=pe}function $e(){var St=N();if(Ie(St))return gt(St);Se=setTimeout($e,Ge(St))}function gt(St){return Se=void 0,Ct&&le?it(St):(le=fe=void 0,we)}function Dt(){Se!==void 0&&clearTimeout(Se),je=0,le=xe=fe=Se=void 0}function ut(){return Se===void 0?we:gt(N())}function Rt(){var St=N(),Ke=Ie(St);if(le=arguments,fe=this,xe=St,Ke){if(Se===void 0)return nt(xe);if(rt)return Se=setTimeout($e,ne),it(xe)}return Se===void 0&&(Se=setTimeout($e,ne)),we}return Rt.cancel=Dt,Rt.flush=ut,Rt}function X(V){var ne=typeof V;return!!V&&(ne=="object"||ne=="function")}function $(V){return!!V&&typeof V=="object"}function re(V){return typeof V=="symbol"||$(V)&&R.call(V)==t}function te(V){if(typeof V=="number")return V;if(re(V))return e;if(X(V)){var ne=typeof V.valueOf=="function"?V.valueOf():V;V=X(ne)?ne+"":ne}if(typeof V!="string")return V===0?V:+V;V=V.replace(r,"");var G=s.test(V);return G||l.test(V)?o(V.slice(2),G?2:8):i.test(V)?e:+V}return k4=W,k4}var vH=yH(),CH=Kx(vH),_H=UL(),cp=Kx(_H),yb={exports:{}},w7;function bH(){if(w7)return yb.exports;w7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(V,ne,G){return Function.prototype.apply.call(V,ne,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:t=function(V){return Object.getOwnPropertyNames(V)};function r(te){console&&console.warn&&console.warn(te)}var i=Number.isNaN||function(V){return V!==V};function s(){s.init.call(this)}yb.exports=s,yb.exports.once=X,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function o(te){if(typeof te!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof te)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(te){if(typeof te!="number"||te<0||i(te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+te+".");l=te}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(V){if(typeof V!="number"||V<0||i(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this};function f(te){return te._maxListeners===void 0?s.defaultMaxListeners:te._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(V){for(var ne=[],G=1;G<arguments.length;G++)ne.push(arguments[G]);var le=V==="error",fe=this._events;if(fe!==void 0)le=le&&fe.error===void 0;else if(!le)return!1;if(le){var pe;if(ne.length>0&&(pe=ne[0]),pe instanceof Error)throw pe;var we=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw we.context=pe,we}var Se=fe[V];if(Se===void 0)return!1;if(typeof Se=="function")e(Se,this,ne);else for(var xe=Se.length,je=U(Se,xe),G=0;G<xe;++G)e(je[G],this,ne);return!0};function C(te,V,ne,G){var le,fe,pe;if(o(ne),fe=te._events,fe===void 0?(fe=te._events=Object.create(null),te._eventsCount=0):(fe.newListener!==void 0&&(te.emit("newListener",V,ne.listener?ne.listener:ne),fe=te._events),pe=fe[V]),pe===void 0)pe=fe[V]=ne,++te._eventsCount;else if(typeof pe=="function"?pe=fe[V]=G?[ne,pe]:[pe,ne]:G?pe.unshift(ne):pe.push(ne),le=f(te),le>0&&pe.length>le&&!pe.warned){pe.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=te,we.type=V,we.count=pe.length,r(we)}return te}s.prototype.addListener=function(V,ne){return C(this,V,ne,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(V,ne){return C(this,V,ne,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(te,V,ne){var G={fired:!1,wrapFn:void 0,target:te,type:V,listener:ne},le=x.bind(G);return le.listener=ne,G.wrapFn=le,le}s.prototype.once=function(V,ne){return o(ne),this.on(V,B(this,V,ne)),this},s.prototype.prependOnceListener=function(V,ne){return o(ne),this.prependListener(V,B(this,V,ne)),this},s.prototype.removeListener=function(V,ne){var G,le,fe,pe,we;if(o(ne),le=this._events,le===void 0)return this;if(G=le[V],G===void 0)return this;if(G===ne||G.listener===ne)--this._eventsCount===0?this._events=Object.create(null):(delete le[V],le.removeListener&&this.emit("removeListener",V,G.listener||ne));else if(typeof G!="function"){for(fe=-1,pe=G.length-1;pe>=0;pe--)if(G[pe]===ne||G[pe].listener===ne){we=G[pe].listener,fe=pe;break}if(fe<0)return this;fe===0?G.shift():N(G,fe),G.length===1&&(le[V]=G[0]),le.removeListener!==void 0&&this.emit("removeListener",V,we||ne)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(V){var ne,G,le;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[V]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[V]),this;if(arguments.length===0){var fe=Object.keys(G),pe;for(le=0;le<fe.length;++le)pe=fe[le],pe!=="removeListener"&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ne=G[V],typeof ne=="function")this.removeListener(V,ne);else if(ne!==void 0)for(le=ne.length-1;le>=0;le--)this.removeListener(V,ne[le]);return this};function R(te,V,ne){var G=te._events;if(G===void 0)return[];var le=G[V];return le===void 0?[]:typeof le=="function"?ne?[le.listener||le]:[le]:ne?W(le):U(le,le.length)}s.prototype.listeners=function(V){return R(this,V,!0)},s.prototype.rawListeners=function(V){return R(this,V,!1)},s.listenerCount=function(te,V){return typeof te.listenerCount=="function"?te.listenerCount(V):P.call(te,V)},s.prototype.listenerCount=P;function P(te){var V=this._events;if(V!==void 0){var ne=V[te];if(typeof ne=="function")return 1;if(ne!==void 0)return ne.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function U(te,V){for(var ne=new Array(V),G=0;G<V;++G)ne[G]=te[G];return ne}function N(te,V){for(;V+1<te.length;V++)te[V]=te[V+1];te.pop()}function W(te){for(var V=new Array(te.length),ne=0;ne<V.length;++ne)V[ne]=te[ne].listener||te[ne];return V}function X(te,V){return new Promise(function(ne,G){function le(pe){te.removeListener(V,fe),G(pe)}function fe(){typeof te.removeListener=="function"&&te.removeListener("error",le),ne([].slice.call(arguments))}re(te,V,fe,{once:!0}),V!=="error"&&$(te,le,{once:!0})})}function $(te,V,ne){typeof te.on=="function"&&re(te,"error",V,ne)}function re(te,V,ne,G){if(typeof te.on=="function")G.once?te.once(V,ne):te.on(V,ne);else if(typeof te.addEventListener=="function")te.addEventListener(V,function le(fe){G.once&&te.removeEventListener(V,le),ne(fe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof te)}return yb.exports}var xH=bH();const S7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},MH={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск",es:"Buscar"},wH={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados"},SH={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor"};var Ev={placeholder:MH,errorNoResults:wH,errorConnectionFailed:SH};const EH=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class BH{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,l=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,f=s.substring(0,l),C=s.substring(l,l+o),x=s.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+f+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+C+"</span>"+x+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new xH.EventEmitter,this.options=cp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",CH(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new dH(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,l=s.firstChild;r.appendChild(l)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=this._inputEl.value;if(!s)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&S7[e.properties.short_code])t=cp({},this.options.flyTo),this._map&&this._map.fitBounds(S7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=cp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=cp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return S4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),l=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const f=yield l;yield this._handleGeocodeResponse(f,s,t,r,o)}catch(f){this._handleGeocodeErrorResponse(f,o)}return l})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&EH.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return S4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?s.concat(l.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const C=yield o;l.features=l.features?C.concat(l.features):C}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let f=[];"suggestions"in l?f=l.suggestions:"place"in l?f=[l.place]:f=l.features,f.length?(this._clearEl.style.display="block",this._typeahead.update(f),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return S4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=gH.language(this.options.language.split(",")[0]);return this.options.language&&Ev?.[e][t]?Ev[e][t]:Ev[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=cp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=cp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const l=cp({},{},this.options.popup);i=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=cp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=cp(r,{element:s}));const l=new this._maplibregl.Marker(cp({},r,{element:s}));let o;if(this.options.popup){const C=cp({},{},this.options.popup);o=new this._maplibregl.Popup(C).setHTML(this.options.popupRender(i))}i.center?(l.setLngLat(i.center).addTo(this._map),this.options.popup&&l.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(l.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Sn=function(){return l},l}Sn();function E7(n,e){return Sn().f[0]++,Sn().s[0]++,z$.render(n,e),Sn().s[1]++,e}function OH(n,e,t){Sn().f[1]++;const r=(Sn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Sn().s[3]++,aH(t));Sn().s[4]++,i?(Sn().b[0][0]++,Sn().s[5]++,e.push(i)):Sn().b[0][1]++;const s=(Sn().s[6]++,{});Sn().s[7]++,Object.keys(n.sources).forEach(o=>{Sn().f[2]++;const f=(Sn().s[8]++,n.sources[o]);Sn().s[9]++,Sn().b[2][0]++,f.type!=="raster"&&(Sn().b[2][1]++,f.type!=="raster-dem")?(Sn().b[1][0]++,Sn().s[10]++,s[o]=f):Sn().b[1][1]++});const l=(Sn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return Sn().s[12]++,l}class IH extends ur.Component{static defaultProps=(Sn().s[13]++,{onMapLoaded:()=>{Sn().f[3]++},onDataChange:()=>{Sn().f[4]++},onLayerSelect:()=>{Sn().f[5]++},onChange:()=>{Sn().f[6]++},options:{}});container=(Sn().s[14]++,null);constructor(e){Sn().f[7]++,Sn().s[15]++,super(e),Sn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Sn().s[17]++,th.on("languageChanged",()=>{Sn().f[8]++,Sn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(e,t){Sn().f[9]++;let r=(Sn().s[19]++,!1);Sn().s[20]++;try{Sn().s[21]++,r=(Sn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(Sn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return Sn().s[22]++,r}componentDidUpdate(){Sn().f[10]++;const e=(Sn().s[23]++,this.state.map),t=(Sn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Sn().s[25]++,e?(Sn().b[4][0]++,Sn().s[26]++,e.setStyle(t,{diff:!0}),Sn().s[27]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,Sn().s[28]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,Sn().s[29]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):Sn().b[4][1]++,Sn().s[30]++,Sn().b[6][0]++,this.state.inspect&&(Sn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Sn().b[5][0]++,Sn().s[31]++,this.state.inspect.toggleInspector()):Sn().b[5][1]++,Sn().s[32]++,Sn().b[8][0]++,this.state.inspect&&(Sn().b[8][1]++,this.props.inspectModeEnabled)?(Sn().b[7][0]++,Sn().s[33]++,this.state.inspect.setOriginalStyle(t),Sn().s[34]++,setTimeout(()=>{Sn().f[11]++,Sn().s[35]++,this.state.inspect.render()},500)):Sn().b[7][1]++}componentDidMount(){Sn().f[12]++;const e=(Sn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(Sn().s[37]++,new PQ({metadata:!0}));Sn().s[38]++,sy.addProtocol("pmtiles",t.tile);const r=(Sn().s[39]++,new sy.Map(e));Sn().s[40]++;const i=()=>{Sn().f[13]++;const x=(Sn().s[41]++,r.getCenter()),B=(Sn().s[42]++,r.getZoom());Sn().s[43]++,this.props.onChange({center:x,zoom:B})};Sn().s[44]++,i(),Sn().s[45]++,r.showTileBoundaries=e.showTileBoundaries,Sn().s[46]++,r.showCollisionBoxes=e.showCollisionBoxes,Sn().s[47]++,r.showOverdrawInspector=e.showOverdrawInspector;const s=(Sn().s[48]++,this.initGeocoder(r)),l=(Sn().s[49]++,new iH);Sn().s[50]++,r.addControl(l,"top-right");const o=(Sn().s[51]++,new sy.NavigationControl({visualizePitch:!0}));Sn().s[52]++,r.addControl(o,"top-right");const f=(Sn().s[53]++,document.createElement("div")),C=(Sn().s[54]++,new qB({popup:new sy.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(x,B)=>(Sn().f[14]++,Sn().s[55]++,Ku(kL.brightColor(x,B)).desaturate(.5).string()),buildInspectStyle:(x,B)=>(Sn().f[15]++,Sn().s[56]++,OH(x,B,this.props.highlightedLayer)),renderPopup:x=>(Sn().f[16]++,Sn().s[57]++,this.props.inspectModeEnabled?(Sn().b[9][0]++,Sn().s[58]++,E7(oe.jsx(QV,{features:x}),f)):(Sn().b[9][1]++,Sn().s[59]++,E7(oe.jsx(DL,{features:x,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),f)))}));Sn().s[60]++,r.addControl(C),Sn().s[61]++,r.on("style.load",()=>{Sn().f[17]++,Sn().s[62]++,this.setState({map:r,inspect:C,geocoder:s,zoomControl:l,zoom:r.getZoom()})}),Sn().s[63]++,r.on("data",x=>{if(Sn().f[18]++,Sn().s[64]++,x.dataType!=="tile"){Sn().b[10][0]++,Sn().s[65]++;return}else Sn().b[10][1]++;Sn().s[66]++,this.props.onDataChange({map:this.state.map})}),Sn().s[67]++,r.on("error",x=>{Sn().f[19]++,Sn().s[68]++,console.log("ERROR",x)}),Sn().s[69]++,r.on("zoom",x=>{Sn().f[20]++,Sn().s[70]++,this.setState({zoom:r.getZoom()})}),Sn().s[71]++,r.on("dragend",i),Sn().s[72]++,r.on("zoomend",i)}onLayerSelectById=(Sn().s[73]++,e=>{Sn().f[21]++;const t=(Sn().s[74]++,this.props.mapStyle.layers.findIndex(r=>(Sn().f[22]++,Sn().s[75]++,r.id===e)));Sn().s[76]++,this.props.onLayerSelect(t)});initGeocoder(e){Sn().f[23]++;const t=(Sn().s[77]++,{forwardGeocode:async i=>{Sn().f[24]++;const s=(Sn().s[78]++,[]);Sn().s[79]++;try{const l=(Sn().s[80]++,`https://nominatim.openstreetmap.org/search?q=${i.query}&format=geojson&polygon_geojson=1&addressdetails=1`),o=(Sn().s[81]++,await fetch(l)),f=(Sn().s[82]++,await o.json());Sn().s[83]++;for(const C of f.features){const x=(Sn().s[84]++,[C.bbox[0]+(C.bbox[2]-C.bbox[0])/2,C.bbox[1]+(C.bbox[3]-C.bbox[1])/2]),B=(Sn().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:x},place_name:C.properties.display_name,properties:C.properties,text:C.properties.display_name,place_type:["place"],center:x});Sn().s[86]++,s.push(B)}}catch(l){Sn().s[87]++,console.error(`Failed to forwardGeocode with error: ${l}`)}return Sn().s[88]++,{features:s}}}),r=(Sn().s[89]++,new BH(t,{placeholder:this.props.t("Search"),maplibregl:sy}));return Sn().s[90]++,e.addControl(r,"top-left"),Sn().s[91]++,r}render(){Sn().f[25]++;const e=(Sn().s[92]++,this.props.t);return Sn().s[93]++,this.state.geocoder?.setPlaceholder(e("Search")),Sn().s[94]++,this.state.zoomControl?.setLabel(e("Zoom:")),Sn().s[95]++,oe.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>(Sn().f[26]++,Sn().s[96]++,this.container=t),"data-wd-key":"maplibre:map"})}}const TH=(Sn().s[97]++,Us()(IH));var B7={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Bv=" ",O7=/(italic|oblique)$/i,I7={};function E6(n,e,t){var r=I7[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",l=[],o,f,C=0,x=n.length;C<x;++C){var B=n[C],R=B.split(" "),P=R[R.length-1].toLowerCase();P=="normal"||P=="italic"||P=="oblique"?(s=f?s:P,f=!0,R.pop(),P=R[R.length-1].toLowerCase()):O7.test(P)&&(P=P.replace(O7,""),s=f?s:R[R.length-1].replace(P,""),f=!0);for(var U in B7){var N=R.length>1?R[R.length-2].toLowerCase():"";if(P==U||P==U.replace("-","")||N+"-"+P==U){i=o?i:B7[U],R.pop(),N&&U.startsWith(N)&&R.pop();break}}!o&&typeof P=="number"&&(i=P,o=!0);var W=R.join(Bv).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");W.indexOf(Bv)!==-1&&(W='"'+W+'"'),l.push(W)}r=I7[n]=[s,i,l]}return r[0]+Bv+r[1]+Bv+e+"px"+(t?"/"+t:"")+Bv+r[2]}const cd={ADD:"add",REMOVE:"remove"},ky={PROPERTYCHANGE:"propertychange"},go={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class f_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function kH(n,e,t){let r,i;t=t||Am;let s=0,l=n.length,o=!1;for(;s<l;)r=s+(l-s>>1),i=+t(n[r],e),i<0?s=r+1:(l=r,o=!i);return o?s:~s}function Am(n,e){return n>e?1:n<e?-1:0}function PH(n,e){return n<e?1:n>e?-1:0}function Fx(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function RH(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function um(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function H0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function DH(n,e,t){const r=e||Am;return n.every(function(i,s){if(s===0)return!0;const l=r(n[s-1],i);return!(l>0||l===0)})}function kC(){return!0}function Lx(){return!1}function PC(){}function zL(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!H0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function Py(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function p_(n){for(const e in n)delete n[e]}function $0(n){let e;for(e in n)return!1;return!e}class Op{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class m_ extends f_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Op(e):e;s.target||(s.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,o[r]=0),++l[r];let f;for(let C=0,x=i.length;C<x;++C)if("handleEvent"in i[C]?f=i[C].handleEvent(s):f=i[C].call(this,s),f===!1||s.propagationStopped){f=!1;break}if(--l[r]===0){let C=o[r];for(delete o[r];C--;)this.removeEventListener(r,PC);delete l[r]}return f}disposeInternal(){this.listeners_&&p_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=PC,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function ks(n,e,t,r,i){if(i){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function P2(n,e,t,r){return ks(n,e,t,r,!0)}function cl(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),p_(n))}class g_ extends m_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(go.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=ks(this,e[s],t);return i}return ks(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=P2(this,e[s],t)}else r=P2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)KH(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}g_.prototype.on;g_.prototype.once;g_.prototype.un;function KH(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)cl(n[e]);else cl(n)}function _o(){throw new Error("Unimplemented abstract method.")}let FH=0;function ko(n){return n.ol_uid||(n.ol_uid=String(++FH))}class T7 extends Op{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Ip extends g_{constructor(e){super(),this.on,this.once,this.un,ko(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new T7(r,e,t)),r=ky.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new T7(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],$0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const k7={LENGTH:"length"};class vb extends Op{constructor(e,t,r){super(e),this.element=t,this.index=r}}class nm extends Ip{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(k7.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new vb(cd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new vb(cd.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new vb(cd.REMOVE,i,e)),this.dispatchEvent(new vb(cd.ADD,t,e))}updateLength_(){this.set(k7.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}class ay extends Op{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class S0 extends ay{constructor(e,t,r,i,s,l){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const HA={SINGLECLICK:"singleclick",CLICK:go.CLICK,DBLCLICK:go.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",LH=$1.includes("safari")&&!$1.includes("chrom");LH&&($1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test($1));const UH=$1.includes("webkit")&&!$1.includes("edge"),NL=$1.includes("macintosh"),zH=typeof devicePixelRatio<"u"?devicePixelRatio:1,VB=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,GL=typeof Image<"u"&&Image.prototype.decode,NH=typeof createImageBitmap=="function",jL=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),B6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class GH extends m_{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=ks(r,B6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ks(r,B6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(go.TOUCHMOVE,this.boundHandleTouchMove_,jL?{passive:!1}:!1)}emulateClick_(e){let t=new S0(HA.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new S0(HA.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new S0(HA.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==HA.POINTERUP||t.type==HA.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==HA.POINTERDOWN||t.type==HA.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new S0(HA.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(cl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new S0(HA.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ks(r,HA.POINTERMOVE,this.handlePointerMove_,this),ks(r,HA.POINTERUP,this.handlePointerUp_,this),ks(this.element_,HA.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(ks(this.element_.getRootNode(),HA.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new S0(HA.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new S0(HA.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(cl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(go.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(cl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(cl),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Lm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},gh={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ur={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ia(n,e){if(!n)throw new Error(e)}const R2=1/0;class jH{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,p_(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ia(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=R2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],l=r[e],o=e;for(;e<i>>1;){const f=this.getLeftChildIndex_(e),C=this.getRightChildIndex_(e),x=C<i&&r[C]<r[f]?C:f;t[e]=t[x],r[e]=r[x],e=x}t[e]=s,r[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],l=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>l)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let l,o,f;for(o=0;o<s;++o)l=t[o],f=e(l),f==R2?delete this.queuedElements_[this.keyFunction_(l)]:(r[i]=f,t[i++]=l);t.length=i,r.length=i,this.heapify_()}}class WL extends jH{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(go.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Ur.LOADED||r===Ur.ERROR||r===Ur.EMPTY){r!==Ur.ERROR&&t.removeEventListener(go.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Ur.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function WH(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return R2;const s=n.viewState.center,l=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(l*l+o*o)/i}const tA={ANIMATING:0,INTERACTING:1},hp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function wA(n,e,t){return Math.min(Math.max(n,e),t)}function QH(n,e,t,r,i,s){const l=i-t,o=s-r;if(l!==0||o!==0){const f=((n-t)*l+(e-r)*o)/(l*l+o*o);f>1?(t=i,r=s):f>0&&(t+=l*f,r+=o*f)}return N1(n,e,t,r)}function N1(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function YH(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const f=Math.abs(n[o][r]);f>s&&(s=f,i=o)}if(s===0)return null;const l=n[i];n[i]=n[r],n[r]=l;for(let o=r+1;o<e;o++){const f=-n[o][r]/n[r][r];for(let C=r;C<e+1;C++)r==C?n[o][C]=0:n[o][C]+=f*n[r][C]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function P7(n){return n*180/Math.PI}function G0(n){return n*Math.PI/180}function G1(n,e){const t=n%e;return t*e<0?t+e:t}function Xd(n,e,t){return n+t*(e-n)}function Ux(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Cb(n,e){return Math.floor(Ux(n,e))}function P0(n,e){return Math.ceil(Ux(n,e))}function O6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function R7(n,e,t){return function(r,i,s,l,o){if(!r)return;if(!i&&!e)return r;const f=e?0:s[0]*i,C=e?0:s[1]*i,x=o?o[0]:0,B=o?o[1]:0;let R=n[0]+f/2+x,P=n[2]-f/2+x,U=n[1]+C/2+B,N=n[3]-C/2+B;R>P&&(R=(P+R)/2,P=R),U>N&&(U=(N+U)/2,N=U);let W=wA(r[0],R,P),X=wA(r[1],U,N);if(l&&t&&i){const $=30*i;W+=-$*Math.log(1+Math.max(0,R-r[0])/$)+$*Math.log(1+Math.max(0,r[0]-P)/$),X+=-$*Math.log(1+Math.max(0,U-r[1])/$)+$*Math.log(1+Math.max(0,r[1]-N)/$)}return[W,X]}}function qH(n){return n}const Ec={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function I6(n){const e=Qf();for(let t=0,r=n.length;t<r;++t)hC(e,n[t]);return e}function $H(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),l=Math.max.apply(null,e);return Qm(r,i,s,l,t)}function j0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function QL(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function tg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function V1(n,e){return HB(n,e[0],e[1])}function rm(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function HB(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function T6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=e[0],o=e[1];let f=Ec.UNKNOWN;return l<t?f=f|Ec.LEFT:l>i&&(f=f|Ec.RIGHT),o<r?f=f|Ec.BELOW:o>s&&(f=f|Ec.ABOVE),f===Ec.UNKNOWN&&(f=Ec.INTERSECTING),f}function Qf(){return[1/0,1/0,-1/0,-1/0]}function Qm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function $y(n){return Qm(1/0,1/0,-1/0,-1/0,n)}function YL(n,e){const t=n[0],r=n[1];return Qm(t,r,t,r,e)}function ZB(n,e,t,r,i){const s=$y(i);return $L(s,n,e,t,r)}function Ym(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function qL(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function hC(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function $L(n,e,t,r,i){for(;t<r;t+=i)VH(n,e[t],e[t+1]);return n}function VH(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function VL(n,e){let t;return t=e(zx(n)),t||(t=e(Nx(n)),t)||(t=e(Gx(n)),t)||(t=e(Hm(n)),t)?t:!1}function k6(n){let e=0;return ng(n)||(e=Ls(n)*Uu(n)),e}function zx(n){return[n[0],n[1]]}function Nx(n){return[n[2],n[1]]}function af(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function HH(n,e){let t;if(e==="bottom-left")t=zx(n);else if(e==="bottom-right")t=Nx(n);else if(e==="top-left")t=Hm(n);else if(e==="top-right")t=Gx(n);else throw new Error("Invalid corner");return t}function D2(n,e,t,r,i){const[s,l,o,f,C,x,B,R]=HL(n,e,t,r);return Qm(Math.min(s,o,C,B),Math.min(l,f,x,R),Math.max(s,o,C,B),Math.max(l,f,x,R),i)}function HL(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,l=Math.cos(t),o=Math.sin(t),f=i*l,C=i*o,x=s*l,B=s*o,R=n[0],P=n[1];return[R-f+B,P-C-x,R-f-B,P-C+x,R+f-B,P+C+x,R+f+B,P+C-x,R-f+B,P-C-x]}function Uu(n){return n[3]-n[1]}function Mp(n,e,t){const r=t||Qf();return XA(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):$y(r),r}function Hm(n){return[n[0],n[3]]}function Gx(n){return[n[2],n[3]]}function Ls(n){return n[2]-n[0]}function XA(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function ng(n){return n[2]<n[0]||n[3]<n[1]}function ZH(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function XH(n,e,t){let r=!1;const i=T6(n,e),s=T6(n,t);if(i===Ec.INTERSECTING||s===Ec.INTERSECTING)r=!0;else{const l=n[0],o=n[1],f=n[2],C=n[3],x=e[0],B=e[1],R=t[0],P=t[1],U=(P-B)/(R-x);let N,W;s&Ec.ABOVE&&!(i&Ec.ABOVE)&&(N=R-(P-C)/U,r=N>=l&&N<=f),!r&&s&Ec.RIGHT&&!(i&Ec.RIGHT)&&(W=P-(R-f)*U,r=W>=o&&W<=C),!r&&s&Ec.BELOW&&!(i&Ec.BELOW)&&(N=R-(P-o)/U,r=N>=l&&N<=f),!r&&s&Ec.LEFT&&!(i&Ec.LEFT)&&(W=P-(R-l)*U,r=W>=o&&W<=C)}return r}function JH(n,e,t,r){if(ng(n))return $y(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],l=[];for(let o=0,f=i.length;o<f;o+=2)s.push(i[o]),l.push(i[o+1]);return $H(s,l,t)}function ZL(n,e){const t=e.getExtent(),r=af(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Ls(t),l=Math.floor((r[0]-t[0])/i)*i;n[0]-=l,n[2]-=l}return n}function XL(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];ZL(n,e);const i=Ls(r);if(Ls(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function eZ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function K2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function XB(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function tZ(n,e){return n[0]*=e,n[1]*=e,n}function nZ(n,e){const t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r}function rZ(n,e){return Math.sqrt(nZ(n,e))}function JB(n,e){if(e.canWrapX()){const t=Ls(e.getExtent()),r=iZ(n,e,t);r&&(n[0]-=r*t)}return n}function iZ(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Ls(r),i=Math.floor((n[0]-r[0])/t)),i}function JL(n){return Math.pow(n,3)}function Vy(n){return 1-JL(1-n)}function oZ(n){return 3*n*n-2*n*n*n}function sZ(n){return n}const aZ=63710088e-1;function D7(n,e,t){t=t||aZ;const r=G0(n[1]),i=G0(e[1]),s=(i-r)/2,l=G0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function eU(...n){console.warn(...n)}const V0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class jx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||V0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const y_=6378137,hy=Math.PI*y_,lZ=[-hy,-hy,hy,hy],AZ=[-180,-85,180,85],_b=y_*Math.log(Math.tan(Math.PI/2));class Og extends jx{constructor(e){super({code:e,units:"m",extent:lZ,global:!0,worldExtent:AZ,getPointResolution:function(t,r){return t/Math.cosh(r[1]/y_)}})}}const K7=[new Og("EPSG:3857"),new Og("EPSG:102100"),new Og("EPSG:102113"),new Og("EPSG:900913"),new Og("http://www.opengis.net/def/crs/EPSG/0/3857"),new Og("http://www.opengis.net/gml/srs/epsg.xml#3857")];function uZ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=hy*n[s]/180;let l=y_*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));l>_b?l=_b:l<-_b&&(l=-_b),e[s+1]=l}return e}function cZ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/hy,e[s+1]=360*Math.atan(Math.exp(n[s+1]/y_))/Math.PI-90;return e}const hZ=6378137,F7=[-180,-90,180,90],dZ=Math.PI*hZ/180;class m1 extends jx{constructor(e,t){super({code:e,units:"degrees",extent:F7,axisOrientation:t,global:!0,metersPerUnit:dZ,worldExtent:F7})}}const L7=[new m1("CRS:84"),new m1("EPSG:4326","neu"),new m1("urn:ogc:def:crs:OGC:1.3:CRS84"),new m1("urn:ogc:def:crs:OGC:2:84"),new m1("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new m1("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m1("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let P6={};function fZ(n){return P6[n]||P6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function pZ(n,e){P6[n]=e}let Cy={};function RC(n,e,t){const r=n.getCode(),i=e.getCode();r in Cy||(Cy[r]={}),Cy[r][i]=t}function P4(n,e){return n in Cy&&e in Cy[n]?Cy[n][e]:null}const F2=.9996,Wf=.00669438,Wx=Wf*Wf,Qx=Wx*Wf,k1=Wf/(1-Wf),U7=Math.sqrt(1-Wf),Ry=(1-U7)/(1+U7),tU=Ry*Ry,eO=tU*Ry,tO=eO*Ry,nU=tO*Ry,rU=1-Wf/4-3*Wx/64-5*Qx/256,mZ=3*Wf/8+3*Wx/32+45*Qx/1024,gZ=15*Wx/256+45*Qx/1024,yZ=35*Qx/3072,vZ=3/2*Ry-27/32*eO+269/512*nU,CZ=21/16*tU-55/32*tO,_Z=151/96*eO-417/128*nU,bZ=1097/512*tO,L2=6378137;function xZ(n,e,t){const r=n-5e5,l=(t.north?e:e-1e7)/F2/(L2*rU),o=l+vZ*Math.sin(2*l)+CZ*Math.sin(4*l)+_Z*Math.sin(6*l)+bZ*Math.sin(8*l),f=Math.sin(o),C=f*f,x=Math.cos(o),B=f/x,R=B*B,P=R*R,U=1-Wf*C,N=Math.sqrt(1-Wf*C),W=L2/N,X=(1-Wf)/U,$=k1*x**2,re=$*$,te=r/(W*F2),V=te*te,ne=V*te,G=ne*te,le=G*te,fe=le*te,pe=o-B/X*(V/2-G/24*(5+3*R+10*$-4*re-9*k1))+fe/720*(61+90*R+298*$+45*P-252*k1-3*re);let we=(te-ne/6*(1+2*R+$)+le/120*(5-2*$+28*R-3*re+8*k1+24*P))/x;return we=O6(we+G0(iU(t.number)),-Math.PI,Math.PI),[P7(we),P7(pe)]}const z7=-80,N7=84,MZ=-180,wZ=180;function SZ(n,e,t){n=O6(n,MZ,wZ),e<z7?e=z7:e>N7&&(e=N7);const r=G0(e),i=Math.sin(r),s=Math.cos(r),l=i/s,o=l*l,f=o*o,C=G0(n),x=iU(t.number),B=G0(x),R=L2/Math.sqrt(1-Wf*i**2),P=k1*s**2,U=s*O6(C-B,-Math.PI,Math.PI),N=U*U,W=N*U,X=W*U,$=X*U,re=$*U,te=L2*(rU*r-mZ*Math.sin(2*r)+gZ*Math.sin(4*r)-yZ*Math.sin(6*r)),V=F2*R*(U+W/6*(1-o+P)+$/120*(5-18*o+f+72*P-58*k1))+5e5;let ne=F2*(te+R*l*(N/2+X/24*(5-o+9*P+4*P**2)+re/720*(61-58*o+f+600*P-330*k1)));return t.north||(ne+=1e7),[V,ne]}function iU(n){return(n-1)*6-180+3}const EZ=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function oU(n){let e=0;for(const i of EZ){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function G7(n,e){return function(t,r,i,s){const l=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(l));for(let o=0;o<l;o+=s){const f=t[o],C=t[o+1],x=n(f,C,e);r[o]=x[0],r[o+1]=x[1]}return r}}function BZ(n){return oU(n)?new jx({code:n,units:"m"}):null}function OZ(n){const e=oU(n.getCode());return e?{forward:G7(SZ,e),inverse:G7(xZ,e)}:null}const IZ=[OZ],TZ=[BZ];let R6=!0;function sU(n){R6=!1}function nO(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function D6(n){pZ(n.getCode(),n),RC(n,n,nO)}function kZ(n){n.forEach(D6)}function Ma(n){if(typeof n!="string")return n;const e=fZ(n);if(e)return e;for(const t of TZ){const r=t(n);if(r)return r}return null}function K6(n,e,t,r){n=Ma(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const l=n.getMetersPerUnit();l&&(i=i*l/V0[r])}}else{const l=n.getUnits();if(l=="degrees"&&!r||r=="degrees")i=e;else{const o=v_(n,Ma("EPSG:4326"));if(!o&&l!=="degrees")i=e*n.getMetersPerUnit();else{let C=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];C=o(C,C,2);const x=D7(C.slice(0,2),C.slice(2,4)),B=D7(C.slice(4,6),C.slice(6,8));i=(x+B)/2}const f=r?V0[r]:n.getMetersPerUnit();f!==void 0&&(i/=f)}}return i}function j7(n){kZ(n),n.forEach(function(e){n.forEach(function(t){e!==t&&RC(e,t,nO)})})}function PZ(n,e,t,r){n.forEach(function(i){e.forEach(function(s){RC(i,s,t),RC(s,i,r)})})}function rO(n,e){return n?typeof n=="string"?Ma(n):n:Ma(e)}function RZ(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let l=0;l<s;l+=i){const o=n(e.slice(l,l+r)),f=o.length;for(let C=0,x=i;C<x;++C)t[l+C]=C>=f?e[l+C]:o[C]}return t}}function F6(n,e){return sU(),Yx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function R4(n,e){const t=Yx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=G1(r+180,360)-180),t}function W0(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||v_(n,e)===nO)&&t}function v_(n,e){const t=n.getCode(),r=e.getCode();let i=P4(t,r);if(i)return i;let s=null,l=null;for(const f of IZ)s||(s=f(n)),l||(l=f(e));if(!s&&!l)return null;const o="EPSG:4326";if(l)if(s)i=D4(s.inverse,l.forward);else{const f=P4(t,o);f&&(i=D4(f,l.forward))}else{const f=P4(o,r);f&&(i=D4(s.inverse,f))}return i&&(D6(n),D6(e),RC(n,e,i)),i}function D4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function DC(n,e){const t=Ma(n),r=Ma(e);return v_(t,r)}function Yx(n,e,t){const r=DC(e,t);if(!r){const i=Ma(e).getCode(),s=Ma(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let DZ=null;function KZ(){return DZ}function L6(n,e){return n}function Fm(n,e){return R6&&!K2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(R6=!1,eU("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function iO(n,e){return n}function im(n,e){return n}function FZ(){j7(K7),j7(L7),PZ(L7,K7,uZ,cZ)}FZ();const aU=new Array(6);function pd(){return[1,0,0,1,0,0]}function W7(n){return sO(n,1,0,0,1,0,0)}function oO(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=n[4],o=n[5],f=e[0],C=e[1],x=e[2],B=e[3],R=e[4],P=e[5];return n[0]=t*f+i*C,n[1]=r*f+s*C,n[2]=t*x+i*B,n[3]=r*x+s*B,n[4]=t*R+i*P+l,n[5]=r*R+s*P+o,n}function sO(n,e,t,r,i,s,l){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=l,n}function LZ(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Fu(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function K4(n,e,t){return oO(n,sO(aU,e,0,0,t,0,0))}function UZ(n,e,t){return oO(n,sO(aU,1,0,0,1,e,t))}function hm(n,e,t,r,i,s,l,o){const f=Math.sin(s),C=Math.cos(s);return n[0]=r*C,n[1]=i*f,n[2]=-r*f,n[3]=i*C,n[4]=l*r*C-o*r*f+e,n[5]=l*i*f+o*i*C+t,n}function lU(n,e){const t=zZ(e);ia(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],l=e[3],o=e[4],f=e[5];return n[0]=l/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*f-l*o)/t,n[5]=-(r*f-i*o)/t,n}function zZ(n){return n[0]*n[3]-n[1]*n[2]}const NZ=[1e5,1e5,1e5,1e5,2,2];function GZ(n){return"matrix("+n.join(", ")+")"}function Q7(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function jZ(n,e){const t=Q7(n),r=Q7(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*NZ[i])!==0)return!1;return!0}function Q0(n,e,t,r,i,s,l){s=s||[],l=l||2;let o=0;for(let f=e;f<t;f+=r){const C=n[f],x=n[f+1];s[o++]=i[0]*C+i[2]*x+i[4],s[o++]=i[1]*C+i[3]*x+i[5];for(let B=2;B<l;B++)s[o++]=n[f+B]}return s&&s.length!=o&&(s.length=o),s}function AU(n,e,t,r,i,s,l){l=l||[];const o=Math.cos(i),f=Math.sin(i),C=s[0],x=s[1];let B=0;for(let R=e;R<t;R+=r){const P=n[R]-C,U=n[R+1]-x;l[B++]=C+P*o-U*f,l[B++]=x+P*f+U*o;for(let N=R+2;N<R+r;++N)l[B++]=n[N]}return l&&l.length!=B&&(l.length=B),l}function WZ(n,e,t,r,i,s,l,o){o=o||[];const f=l[0],C=l[1];let x=0;for(let B=e;B<t;B+=r){const R=n[B]-f,P=n[B+1]-C;o[x++]=f+i*R,o[x++]=C+s*P;for(let U=B+2;U<B+r;++U)o[x++]=n[U]}return o&&o.length!=x&&(o.length=x),o}function QZ(n,e,t,r,i,s,l){l=l||[];let o=0;for(let f=e;f<t;f+=r){l[o++]=n[f]+i,l[o++]=n[f+1]+s;for(let C=f+2;C<f+r;++C)l[o++]=n[C]}return l&&l.length!=o&&(l.length=o),l}const Y7=pd(),YZ=[NaN,NaN];class uU extends Ip{constructor(){super(),this.extent_=Qf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=zL((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return _o()}closestPointXY(e,t,r,i){return _o()}containsXY(e,t){return this.closestPointXY(e,t,YZ,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return _o()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&$y(t),this.extentRevision_=this.getRevision()}return ZH(this.extent_,e)}rotate(e,t){_o()}scale(e,t,r){_o()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return _o()}getType(){return _o()}applyTransform(e){_o()}intersectsExtent(e){return _o()}translate(e,t){_o()}transform(e,t){const r=Ma(e),i=r.getUnits()=="tile-pixels"?function(s,l,o){const f=r.getExtent(),C=r.getWorldExtent(),x=Uu(C)/Uu(f);hm(Y7,C[0],C[3],x,-x,0,0,0);const B=Q0(s,0,s.length,o,Y7,l),R=DC(r,t);return R?R(B,B,o):B}:DC(r,t);return this.applyTransform(i),this}}class rg extends uU{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return ZB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return _o()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=q7(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){_o()}setLayout(e,t,r){let i;if(e)i=q7(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=ig(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();AU(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=af(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();WZ(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();QZ(r,0,r.length,i,e,t,r),this.changed()}}}function ig(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function q7(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function qZ(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return Q0(r,0,r.length,i,e,t)}function cU(n,e,t,r){let i=0;const s=n[t-r],l=n[t-r+1];let o=0,f=0;for(;e<t;e+=r){const C=n[e]-s,x=n[e+1]-l;i+=f*C-o*x,o=C,f=x}return i/2}function hU(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=cU(n,e,o,r),e=o}return i}function $Z(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=hU(n,e,o,r),e=o[o.length-1]}return i}function $7(n,e,t,r,i,s,l){const o=n[e],f=n[e+1],C=n[t]-o,x=n[t+1]-f;let B;if(C===0&&x===0)B=e;else{const R=((i-o)*C+(s-f)*x)/(C*C+x*x);if(R>1)B=t;else if(R>0){for(let P=0;P<r;++P)l[P]=Xd(n[e+P],n[t+P],R);l.length=r;return}else B=e}for(let R=0;R<r;++R)l[R]=n[B+R];l.length=r}function aO(n,e,t,r,i){let s=n[e],l=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],f=n[e+1],C=N1(s,l,o,f);C>i&&(i=C),s=o,l=f}return i}function lO(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=aO(n,e,o,r,i),e=o}return i}function VZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=lO(n,e,o,r,i),e=o[o.length-1]}return i}function AO(n,e,t,r,i,s,l,o,f,C,x){if(e==t)return C;let B,R;if(i===0){if(R=N1(l,o,n[e],n[e+1]),R<C){for(B=0;B<r;++B)f[B]=n[e+B];return f.length=r,R}return C}x=x||[NaN,NaN];let P=e+r;for(;P<t;)if($7(n,P-r,P,r,l,o,x),R=N1(l,o,x[0],x[1]),R<C){for(C=R,B=0;B<r;++B)f[B]=x[B];f.length=r,P+=r}else P+=r*Math.max((Math.sqrt(R)-Math.sqrt(C))/i|0,1);if(s&&($7(n,t-r,e,r,l,o,x),R=N1(l,o,x[0],x[1]),R<C)){for(C=R,B=0;B<r;++B)f[B]=x[B];f.length=r}return C}function uO(n,e,t,r,i,s,l,o,f,C,x){x=x||[NaN,NaN];for(let B=0,R=t.length;B<R;++B){const P=t[B];C=AO(n,e,P,r,i,s,l,o,f,C,x),e=P}return C}function HZ(n,e,t,r,i,s,l,o,f,C,x){x=x||[NaN,NaN];for(let B=0,R=t.length;B<R;++B){const P=t[B];C=uO(n,e,P,r,i,s,l,o,f,C,x),e=P[P.length-1]}return C}function ZZ(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function qx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const l=t[i];for(let o=0;o<r;++o)n[e++]=l[o]}return e}function C_(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=qx(n,e,t[l],r);i[s++]=f,e=f}return i.length=s,i}function dU(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=C_(n,e,t[l],r,i[s]);f.length===0&&(f[0]=e),i[s++]=f,e=f[f.length-1]}return i.length=s,i}function R0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=e;l<t;l+=r)i[s++]=n.slice(l,l+r);return i.length=s,i}function KC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l];i[s++]=R0(n,e,f,r,i[s]),e=f}return i.length=s,i}function U6(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l];i[s++]=f.length===1&&f[0]===e?[]:KC(n,e,f,r,i[s]),e=f[f.length-1]}return i.length=s,i}function $x(n,e,t,r,i,s,l){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[l++]=n[e],s[l++]=n[e+1];return l}const f=new Array(o);f[0]=1,f[o-1]=1;const C=[e,t-r];let x=0;for(;C.length>0;){const B=C.pop(),R=C.pop();let P=0;const U=n[R],N=n[R+1],W=n[B],X=n[B+1];for(let $=R+r;$<B;$+=r){const re=n[$],te=n[$+1],V=QH(re,te,U,N,W,X);V>P&&(x=$,P=V)}P>i&&(f[(x-e)/r]=1,R+r<x&&C.push(R,x),x+r<B&&C.push(x,B))}for(let B=0;B<o;++B)f[B]&&(s[l++]=n[e+B*r],s[l++]=n[e+B*r+1]);return l}function fU(n,e,t,r,i,s,l,o){for(let f=0,C=t.length;f<C;++f){const x=t[f];l=$x(n,e,x,r,i,s,l),o.push(l),e=x}return l}function M1(n,e){return e*Math.round(n/e)}function XZ(n,e,t,r,i,s,l){if(e==t)return l;let o=M1(n[e],i),f=M1(n[e+1],i);e+=r,s[l++]=o,s[l++]=f;let C,x;do if(C=M1(n[e],i),x=M1(n[e+1],i),e+=r,e==t)return s[l++]=C,s[l++]=x,l;while(C==o&&x==f);for(;e<t;){const B=M1(n[e],i),R=M1(n[e+1],i);if(e+=r,B==C&&R==x)continue;const P=C-o,U=x-f,N=B-o,W=R-f;if(P*W==U*N&&(P<0&&N<P||P==N||P>0&&N>P)&&(U<0&&W<U||U==W||U>0&&W>U)){C=B,x=R;continue}s[l++]=C,s[l++]=x,o=C,f=x,C=B,x=R}return s[l++]=C,s[l++]=x,l}function cO(n,e,t,r,i,s,l,o){for(let f=0,C=t.length;f<C;++f){const x=t[f];l=XZ(n,e,x,r,i,s,l),o.push(l),e=x}return l}function JZ(n,e,t,r,i,s,l,o){for(let f=0,C=t.length;f<C;++f){const x=t[f],B=[];l=cO(n,e,x,r,i,s,l,B),o.push(B),e=x[x.length-1]}return l}class FC extends rg{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new FC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<tg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return cU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return R0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=$x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new FC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qx(this.flatCoordinates,0,e,this.stride),this.changed()}}class H1 extends rg{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new H1(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,l=N1(e,t,s[0],s[1]);if(l<i){const o=this.stride;for(let f=0;f<o;++f)r[f]=s[f];return r.length=o,l}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return YL(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return HB(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ZZ(this.flatCoordinates,0,e,this.stride),this.changed()}}function eX(n,e,t,r,i){return!VL(i,function(l){return!P1(n,e,t,r,l[0],l[1])})}function P1(n,e,t,r,i,s){let l=0,o=n[t-r],f=n[t-r+1];for(;e<t;e+=r){const C=n[e],x=n[e+1];f<=s?x>s&&(C-o)*(s-f)-(i-o)*(x-f)>0&&l++:x<=s&&(C-o)*(s-f)-(i-o)*(x-f)<0&&l--,o=C,f=x}return l!==0}function hO(n,e,t,r,i,s){if(t.length===0||!P1(n,e,t[0],r,i,s))return!1;for(let l=1,o=t.length;l<o;++l)if(P1(n,t[l-1],t[l],r,i,s))return!1;return!0}function tX(n,e,t,r,i,s){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const f=t[l];if(hO(n,e,f,r,i,s))return!0;e=f[f.length-1]}return!1}function dO(n,e,t,r,i,s,l){let o,f,C,x,B,R,P;const U=i[s+1],N=[];for(let $=0,re=t.length;$<re;++$){const te=t[$];for(x=n[te-r],R=n[te-r+1],o=e;o<te;o+=r)B=n[o],P=n[o+1],(U<=R&&P<=U||R<=U&&U<=P)&&(C=(U-R)/(P-R)*(B-x)+x,N.push(C)),x=B,R=P}let W=NaN,X=-1/0;for(N.sort(Am),x=N[0],o=1,f=N.length;o<f;++o){B=N[o];const $=Math.abs(B-x);$>X&&(C=(x+B)/2,hO(n,e,t,r,C,U)&&(W=C,X=$)),x=B}return isNaN(W)&&(W=i[s]),l?(l.push(W,U,X),l):[W,U,X]}function pU(n,e,t,r,i){let s=[];for(let l=0,o=t.length;l<o;++l){const f=t[l];s=dO(n,e,f,r,i,2*l,s),e=f[f.length-1]}return s}function mU(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Vx(n,e,t,r,i,s){return s=s??$L(Qf(),n,e,t,r),XA(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:mU(n,e,t,r,function(l,o){return XH(i,l,o)}):!1}function nX(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){if(Vx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function gU(n,e,t,r,i){return!!(Vx(n,e,t,r,i)||P1(n,e,t,r,i[0],i[1])||P1(n,e,t,r,i[0],i[3])||P1(n,e,t,r,i[2],i[1])||P1(n,e,t,r,i[2],i[3]))}function yU(n,e,t,r,i){if(!gU(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,l=t.length;s<l;++s)if(eX(n,t[s-1],t[s],r,i)&&!Vx(n,t[s-1],t[s],r,i))return!1;return!0}function rX(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(yU(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function iX(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function fO(n,e,t,r){let i=0,s=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const o=n[e],f=n[e+1];i+=(o-s)*(f+l),s=o,l=f}return i===0?void 0:i>0}function pO(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],f=fO(n,e,o,r);if(s===0){if(i&&f||!i&&!f)return!1}else if(i&&!f||!i&&f)return!1;e=o}return!0}function vU(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(!pO(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function U2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],f=fO(n,e,o,r);(s===0?i&&f||!i&&!f:i&&!f||!i&&f)&&iX(n,e,o,r),e=o}return e}function z6(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s)e=U2(n,e,t[s],r,i);return e}function CU(n,e){const t=[];let r=0,i=0,s;for(let l=0,o=e.length;l<o;++l){const f=e[l],C=fO(n,r,f,2);if(s===void 0&&(s=C),C===s)t.push(e.slice(i,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=l+1,r=f}return t}class qm extends rg{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?um(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new qm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<tg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return hO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return hU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),U2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,KC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=af(this.getExtent());this.flatInteriorPoint_=dO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new H1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new FC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const f=r[l],C=new FC(t.slice(s,f),e);i.push(C),s=f}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;pO(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=U2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=cO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new qm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return yU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=C_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function V7(n){if(ng(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new qm(s,"XY",[s.length])}function mO(n,e,t,r){const i=Ls(e)/t[0],s=Uu(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function gO(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),wA(r,t/2,e*2)}function oX(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,l,o){if(i!==void 0){const f=n[0],C=n[n.length-1],x=t?mO(f,t,l,r):f;if(o)return e?gO(i,x,C):wA(i,C,x);const B=Math.min(x,i),R=Math.floor(Fx(n,B,s));return n[R]>x&&R<n.length-1?n[R+1]:n[R]}}}function sX(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(l,o,f,C){if(l!==void 0){const x=i?mO(e,i,f,s):e;if(C)return r?gO(l,x,t):wA(l,t,x);const B=1e-9,R=Math.ceil(Math.log(e/x)/Math.log(n)-B),P=-o*(.5-B)+.5,U=Math.min(x,l),N=Math.floor(Math.log(e/U)/Math.log(n)+P),W=Math.max(R,N),X=e/Math.pow(n,W);return wA(X,t,x)}}}function H7(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,l,o,f){if(s!==void 0){const C=r?mO(n,r,o,i):n;return!t||!f?wA(s,e,C):gO(s,C,e)}}}function yO(n){if(n!==void 0)return 0}function Z7(n){if(n!==void 0)return n}function aX(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function lX(n){const e=G0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const _U=42,vO=256,F4=0;class gp extends Ip{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rO(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&sU(),e.center&&(e.center=Fm(e.center,this.projection_)),e.extent&&(e.extent=im(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in hp)delete t[o];this.setProperties(t,!0);const r=uX(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=AX(e),s=r.constraint,l=cX(e);this.constraints_={center:i,resolution:s,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),l=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+l,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Fm(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Fm(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const x=arguments[i];x.center&&this.setCenterInternal(x.center),x.zoom!==void 0?this.setZoom(x.zoom):x.resolution&&this.setResolution(x.resolution),x.rotation!==void 0&&this.setRotation(x.rotation)}if(i===t){r&&bb(r,!0);return}let s=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,f=this.targetRotation_;const C=[];for(;i<t;++i){const x=arguments[i],B={start:s,complete:!1,anchor:x.anchor,duration:x.duration!==void 0?x.duration:1e3,easing:x.easing||oZ,callback:r};if(x.center&&(B.sourceCenter=l,B.targetCenter=x.center.slice(),l=B.targetCenter),x.zoom!==void 0?(B.sourceResolution=o,B.targetResolution=this.getResolutionForZoom(x.zoom),o=B.targetResolution):x.resolution&&(B.sourceResolution=o,B.targetResolution=x.resolution,o=B.targetResolution),x.rotation!==void 0){B.sourceRotation=f;const R=G1(x.rotation-f+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=f+R,f=B.targetRotation}hX(B)?B.complete=!0:s+=B.duration,C.push(B)}this.animations_.push(C),this.setHint(tA.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[tA.ANIMATING]>0}getInteracting(){return this.hints_[tA.INTERACTING]>0}cancelAnimations(){this.setHint(tA.ANIMATING,-this.hints_[tA.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&bb(i[0].callback,!1),!e)for(let s=0,l=i.length;s<l;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let l=0,o=i.length;l<o;++l){const f=i[l];if(f.complete)continue;const C=e-f.start;let x=f.duration>0?C/f.duration:1;x>=1?(f.complete=!0,x=1):s=!1;const B=f.easing(x);if(f.sourceCenter){const R=f.sourceCenter[0],P=f.sourceCenter[1],U=f.targetCenter[0],N=f.targetCenter[1];this.nextCenter_=f.targetCenter;const W=R+B*(U-R),X=P+B*(N-P);this.targetCenter_=[W,X]}if(f.sourceResolution&&f.targetResolution){const R=B===1?f.targetResolution:f.sourceResolution+B*(f.targetResolution-f.sourceResolution);if(f.anchor){const P=this.getViewportSize_(this.getRotation()),U=this.constraints_.resolution(R,0,P,!0);this.targetCenter_=this.calculateCenterZoom(U,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=R,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const R=B===1?G1(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+B*(f.targetRotation-f.sourceRotation);if(f.anchor){const P=this.constraints_.rotation(R,!0);this.targetCenter_=this.calculateCenterRotate(P,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=R}if(this.applyTargetState_(!0),t=!0,!f.complete)break}if(s){this.animations_[r]=null,this.setHint(tA.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=i[0].callback;l&&bb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],XB(r,e-this.getRotation()),eZ(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const l=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[l,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&L6(e,this.getProjection())}getCenterInternal(){return this.get(hp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return iO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ia(t,"The view center is not defined");const r=this.getResolution();ia(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ia(i!==void 0,"The view rotation is not defined"),D2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(hp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(im(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Ls(e)/t[0],i=Uu(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(hp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(l){return Math.log(r/l)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const l=this.getViewportSizeMinusPadding_();i=L4(i,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Fx(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=wA(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,wA(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(ia(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ia(!ng(e),"Cannot fit empty extent provided as `geometry`");const i=im(e,this.getProjection());r=V7(i)}else if(e.getType()==="Circle"){const i=im(e.getExtent(),this.getProjection());r=V7(i),r.rotate(this.getRotation(),af(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),l=e.getStride();let o=1/0,f=1/0,C=-1/0,x=-1/0;for(let B=0,R=s.length;B<R;B+=l){const P=s[B]*r-s[B+1]*i,U=s[B]*i+s[B+1]*r;o=Math.min(o,P),f=Math.min(f,U),C=Math.max(C,P),x=Math.max(x,U)}return[o,f,C,x]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let f=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);f=isNaN(f)?l:Math.max(f,l),f=this.getConstrainedResolution(f,s?0:1);const C=this.getRotation(),x=Math.sin(C),B=Math.cos(C),R=af(o);R[0]+=(i[1]-i[3])/2*f,R[1]+=(i[0]-i[2])/2*f;const P=R[0]*B-R[1]*x,U=R[1]*B+R[0]*x,N=this.getConstrainedCenter([P,U],f),W=t.callback?t.callback:PC;t.duration!==void 0?this.animateInternal({resolution:f,center:N,duration:t.duration,easing:t.easing},W):(this.targetResolution_=f,this.targetCenter_=N,this.applyTargetState_(!1,!0),bb(W,!0))}centerOn(e,t,r){this.centerOnInternal(Fm(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(L4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-r),f=L4(e,i,[o[0]/2+l[3],o[1]/2+l[0]],t,r);s=[e[0]-f[0],e[1]-f[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=L6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Fm(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Fm(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Fm(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),l=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,l,s,r,this.calculateCenterShift(this.targetCenter_,l,i,s));this.get(hp.ROTATION)!==i&&this.set(hp.ROTATION,i),this.get(hp.RESOLUTION)!==l&&(this.set(hp.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(hp.CENTER)||!K2(this.get(hp.CENTER),o))&&this.set(hp.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,l),f=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,s,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=f,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!K2(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:f,resolution:o,duration:e,easing:Vy,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(tA.INTERACTING,1)}endInteraction(e,t,r){r=r&&Fm(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(tA.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function bb(n,e){setTimeout(function(){n(e)},0)}function AX(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return R7(n.extent,n.constrainOnlyCenter,t)}const e=rO(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,R7(t,!1,!1)}return qH}function uX(n){let e,t,r,l=n.minZoom!==void 0?n.minZoom:F4,o=n.maxZoom!==void 0?n.maxZoom:28;const f=n.zoomFactor!==void 0?n.zoomFactor:2,C=n.multiWorld!==void 0?n.multiWorld:!1,x=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,R=rO(n.projection,"EPSG:3857"),P=R.getExtent();let U=n.constrainOnlyCenter,N=n.extent;if(!C&&!N&&R.isGlobal()&&(U=!1,N=P),n.resolutions!==void 0){const W=n.resolutions;t=W[l],r=W[o]!==void 0?W[o]:W[W.length-1],n.constrainResolution?e=oX(W,x,!U&&N,B):e=H7(t,r,x,!U&&N,B)}else{const X=(P?Math.max(Ls(P),Uu(P)):360*V0.degrees/R.getMetersPerUnit())/vO/Math.pow(2,F4),$=X/Math.pow(2,28-F4);t=n.maxResolution,t!==void 0?l=0:t=X/Math.pow(f,l),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(f,o):r=X/Math.pow(f,o):r=$),o=l+Math.floor(Math.log(t/r)/Math.log(f)),r=t/Math.pow(f,o-l),n.constrainResolution?e=sX(f,t,r,x,!U&&N,B):e=H7(t,r,x,!U&&N,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:l,zoomFactor:f}}function cX(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?lX():t===!1?Z7:typeof t=="number"?aX(t):Z7}return yO}function hX(n){return!(n.sourceCenter&&n.targetCenter&&!K2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function L4(n,e,t,r,i){const s=Math.cos(-i);let l=Math.sin(-i),o=n[0]*s-n[1]*l,f=n[1]*s+n[0]*l;o+=(e[0]/2-t[0])*r,f+=(t[1]-e[1]/2)*r,l=-l;const C=o*s-f*l,x=f*s+o*l;return[C,x]}const xb="ol-hidden",dX="ol-selectable",Hx="ol-unselectable",CO="ol-control",X7="ol-collapsed",fX=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),J7=["style","variant","weight","size","lineHeight","family"],N6={normal:400,bold:700},G6=function(n){const e=n.match(fX);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=J7.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[J7[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in N6&&(t.weight=N6[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t};function SA(n,e,t,r){let i;return t&&t.length?i=t.shift():VB?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let U4;function z2(){return U4||(U4=SA(1,1)),U4}function __(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function pX(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function mX(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function e9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function bU(n){for(;n.lastChild;)n.lastChild.remove()}function gX(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}class _O extends Ip{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)cl(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==PC&&this.listenerKeys.push(ks(e,Lm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class yX extends _O{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=l):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(go.CLICK,this.handleClick_.bind(this),!1);const C=t+" "+Hx+" "+CO+(this.collapsed_&&this.collapsible_?" "+X7:"")+(this.collapsible_?"":" ol-uncollapsible"),x=this.element;x.className=C,x.appendChild(this.toggleButton_),x.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>Py(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!H0(t,this.renderedAttributions_)){bU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const l=document.createElement("li");l.innerHTML=t[i],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(X7),this.collapsed_?e9(this.collapseLabel_,this.label_):e9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class vX extends _O{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(this.label_),l.addEventListener(go.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Hx+" "+CO,f=this.element;f.className=o,f.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(xb)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Vy}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(xb);!s&&r===0?this.element.classList.add(xb):s&&r!==0&&this.element.classList.remove(xb)}this.label_.style.transform=i}this.rotation_=r}}class CX extends _O{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",f=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",C=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",x=document.createElement("button");x.className=i,x.setAttribute("type","button"),x.title=f,x.appendChild(typeof l=="string"?document.createTextNode(l):l),x.addEventListener(go.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=s,B.setAttribute("type","button"),B.title=C,B.appendChild(typeof o=="string"?document.createTextNode(o):o),B.addEventListener(go.CLICK,this.handleClick_.bind(this,-r),!1);const R=t+" "+Hx+" "+CO,P=this.element;P.className=R,P.appendChild(x),P.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Vy})):r.setZoom(s)}}}function _X(n){n=n||{};const e=new nm;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new CX(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new vX(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new yX(n.attributionOptions)),e}class bX{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],l=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(l,s),this.initialVelocity_=Math.sqrt(s*s+l*l)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const t9={ACTIVE:"active"};class b_ extends Ip{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(t9.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(t9.ACTIVE,e)}setMap(e){this.map_=e}}function xX(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:sZ,center:n.getConstrainedCenter(i)})}}function bO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),l=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:r!==void 0?r:250,easing:Vy})}class MX extends b_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==HA.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,l=r.shiftKey?-this.delta_:this.delta_,o=i.getView();bO(o,l,s,this.duration_),r.preventDefault(),t=!0}return!t}}function j6(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const wX=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},SX=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},xU=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?SX(n):!0},EX=kC,MU=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(UH&&NL&&e.ctrlKey)},wU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},BX=function(n){const e=n.originalEvent;return NL?e.metaKey:e.ctrlKey},OX=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},SU=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},z4=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},IX=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class x_ extends b_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==HA.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==HA.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==HA.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==HA.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function xO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class TX extends x_{constructor(e){super({stopDown:Lx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:j6(wU,IX);this.condition_=e.onFocusOnly?j6(xU,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(xO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();tZ(s,o.getResolution()),XB(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),f=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(f),duration:500,easing:Vy})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class kX extends x_{constructor(e){e=e||{},super({stopDown:Lx}),this.condition_=e.condition?e.condition:wX,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!z4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===yO)return;const i=t.getSize(),s=e.pixel,l=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return z4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return z4(e)&&MU(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class PX extends f_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new qm([i])}getGeometry(){return this.geometry_}}const Ig={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ov extends Op{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class RX extends x_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new PX(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??MU,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ov(Ig.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Ov(t?Ig.BOXEND:Ig.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ov(Ig.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ov(Ig.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ov(Ig.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DX extends RX{constructor(e){e=e||{};const t=e.condition?e.condition:OX;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),l=r.getResolutionForExtentInternal(s),o=r.getResolution()/l;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Vy})}}const g1={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KX extends b_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return wU(t)&&SU(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==go.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==g1.DOWN||i==g1.LEFT||i==g1.RIGHT||i==g1.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let f=0,C=0;i==g1.DOWN?C=-o:i==g1.LEFT?f=-o:i==g1.RIGHT?f=o:C=o;const x=[f,C];XB(x,l.getRotation()),xX(l,x,this.duration_),r.preventDefault(),t=!0}}return!t}}class FX extends b_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!BX(t)&&SU(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==go.KEYDOWN||e.type==go.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,l=i==="+"?this.delta_:-this.delta_,o=s.getView();bO(o,l,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const LX=40,UX=300;class zX extends b_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:EX;this.condition_=e.onFocusOnly?j6(xU,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==go.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=LX;break;case WheelEvent.DOM_DELTA_PAGE:s*=UX;break}if(s===0)return!1;this.lastDelta_=s;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=s;const f=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),f),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-wA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),bO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class NX extends x_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Lx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const f=s-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=f}this.lastAngle_=s;const l=e.map,o=l.getView();o.getConstraints().rotation!==yO&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(xO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class GX extends x_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Lx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,l=r.clientY-i.clientY,o=Math.sqrt(s*s+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const f=e.map,C=f.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(xO(this.targetPointers))),f.render(),C.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function jX(n){n=n||{};const e=new nm,t=new bX(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new kX),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new MX({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new TX({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new NX),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new GX({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new KX),e.push(new FX({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new zX({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new DX({duration:n.zoomDuration})),e}const Da={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class EU extends Ip{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Da.OPACITY]=e.opacity!==void 0?e.opacity:1,ia(typeof t[Da.OPACITY]=="number","Layer opacity must be a number"),t[Da.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Da.Z_INDEX]=e.zIndex,t[Da.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Da.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Da.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Da.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=wA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return _o()}getLayerStatesArray(e){return _o()}getExtent(){return this.get(Da.EXTENT)}getMaxResolution(){return this.get(Da.MAX_RESOLUTION)}getMinResolution(){return this.get(Da.MIN_RESOLUTION)}getMinZoom(){return this.get(Da.MIN_ZOOM)}getMaxZoom(){return this.get(Da.MAX_ZOOM)}getOpacity(){return this.get(Da.OPACITY)}getSourceState(){return _o()}getVisible(){return this.get(Da.VISIBLE)}getZIndex(){return this.get(Da.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Da.EXTENT,e)}setMaxResolution(e){this.set(Da.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Da.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Da.MAX_ZOOM,e)}setMinZoom(e){this.set(Da.MIN_ZOOM,e)}setOpacity(e){ia(typeof e=="number","Layer opacity must be a number"),this.set(Da.OPACITY,e)}setVisible(e){this.set(Da.VISIBLE,e)}setZIndex(e){this.set(Da.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class B0 extends Op{constructor(e,t){super(e),this.layer=t}}const N4={LAYERS:"layers"};class Hy extends EU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(N4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new nm(r.slice(),{unique:!0}):ia(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new nm(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(cl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ks(e,cd.ADD,this.handleLayersAdd_,this),ks(e,cd.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(cl);p_(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new B0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[ks(e,ky.PROPERTYCHANGE,this.handleLayerChange_,this),ks(e,go.CHANGE,this.handleLayerChange_,this)];e instanceof Hy&&t.push(ks(e,"addlayer",this.handleLayerGroupAdd_,this),ks(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ko(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new B0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new B0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new B0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=ko(t);this.listenerKeys_[r].forEach(cl),delete this.listenerKeys_[r],this.dispatchEvent(new B0("removelayer",t)),this.changed()}getLayers(){return this.get(N4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new B0("removelayer",r[i]))}this.set(N4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let l=r,o=t.length;l<o;l++){const f=t[l];f.opacity*=i.opacity,f.visible=f.visible&&i.visible,f.maxResolution=Math.min(f.maxResolution,i.maxResolution),f.minResolution=Math.max(f.minResolution,i.minResolution),f.minZoom=Math.max(f.minZoom,i.minZoom),f.maxZoom=Math.min(f.maxZoom,i.maxZoom),i.extent!==void 0&&(f.extent!==void 0?f.extent=Mp(f.extent,i.extent):f.extent=i.extent),f.zIndex===void 0&&(f.zIndex=s)}return t}getSourceState(){return"ready"}}const zf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Zy extends EU{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Da.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Da.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(cl(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ks(e,go.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof gp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(l=>l.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return MO(i,t.viewState)&&(!s||XA(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof gp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Da.MAP,e)}getMapInternal(){return this.get(Da.MAP)}setMap(e){this.mapPrecomposeKey_&&(cl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(cl(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ks(e,zf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ks(this,go.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);ia(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Da.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function MO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function BU(n,e,t=0,r=n.length-1,i=WX){for(;r>t;){if(r-t>600){const f=r-t+1,C=e-t+1,x=Math.log(f),B=.5*Math.exp(2*x/3),R=.5*Math.sqrt(x*B*(f-B)/f)*(C-f/2<0?-1:1),P=Math.max(t,Math.floor(e-C*B/f+R)),U=Math.min(r,Math.floor(e+(f-C)*B/f+R));BU(n,e,P,U,i)}const s=n[e];let l=t,o=r;for(Iv(n,t,e),i(n[r],s)>0&&Iv(n,t,r);l<o;){for(Iv(n,l,o),l++,o--;i(n[l],s)<0;)l++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Iv(n,t,o):(o++,Iv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Iv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function WX(n,e){return n<e?-1:n>e?1:0}let OU=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!wb(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],f=t.leaf?i(o):o;wb(e,f)&&(t.leaf?r.push(o):j4(e,f)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!wb(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],l=t.leaf?this.toBBox(s):s;if(wb(e,l)){if(t.leaf||j4(e,l))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ly([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],l=[];let o,f,C;for(;r||s.length;){if(r||(r=s.pop(),f=s[s.length-1],o=l.pop(),C=!0),r.leaf){const x=QX(e,r.children,t);if(x!==-1)return r.children.splice(x,1),s.push(r),this._condense(s),this}!C&&!r.leaf&&j4(r,i)?(s.push(r),l.push(o),o=0,f=r,r=r.children[0]):f?(o++,r=f.children[o],C=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let l=this._maxEntries,o;if(s<=l)return o=ly(e.slice(t,r+1)),Tg(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(l)),l=Math.ceil(s/Math.pow(l,i-1))),o=ly([]),o.leaf=!1,o.height=i;const f=Math.ceil(s/l),C=f*Math.ceil(Math.sqrt(l));n9(e,t,r,C,this.compareMinX);for(let x=t;x<=r;x+=C){const B=Math.min(x+C-1,r);n9(e,x,B,f,this.compareMinY);for(let R=x;R<=B;R+=f){const P=Math.min(R+f-1,B);o.children.push(this._build(e,R,P,i-1))}}return Tg(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,l=1/0,o;for(let f=0;f<t.children.length;f++){const C=t.children[f],x=G4(C),B=$X(e,C)-x;B<l?(l=B,s=x<s?x:s,o=C):B===l&&x<s&&(s=x,o=C)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],l=this._chooseSubtree(i,this.data,t,s);for(l.children.push(e),Qv(l,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const l=this._chooseSplitIndex(r,s,i),o=ly(r.children.splice(l,r.children.length-l));o.height=r.height,o.leaf=r.leaf,Tg(r,this.toBBox),Tg(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=ly([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Tg(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,l=1/0;for(let o=t;o<=r-t;o++){const f=Wv(e,0,o,this.toBBox),C=Wv(e,o,r,this.toBBox),x=VX(f,C),B=G4(f)+G4(C);x<s?(s=x,i=o,l=B<l?B:l):x===s&&B<l&&(l=B,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:YX,s=e.leaf?this.compareMinY:qX,l=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);l<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,l=Wv(e,0,t,s),o=Wv(e,r-t,r,s);let f=Mb(l)+Mb(o);for(let C=t;C<r-t;C++){const x=e.children[C];Qv(l,e.leaf?s(x):x),f+=Mb(l)}for(let C=r-t-1;C>=t;C--){const x=e.children[C];Qv(o,e.leaf?s(x):x),f+=Mb(o)}return f}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Qv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Tg(e[t],this.toBBox)}};function QX(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function Tg(n,e){Wv(n,0,n.children.length,e,n)}function Wv(n,e,t,r,i){i||(i=ly(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const l=n.children[s];Qv(i,n.leaf?r(l):l)}return i}function Qv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function YX(n,e){return n.minX-e.minX}function qX(n,e){return n.minY-e.minY}function G4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Mb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function $X(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function VX(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function j4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function wb(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function ly(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function n9(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const l=e+Math.ceil((t-e)/r/2)*r;BU(n,l,e,t,i),s.push(e,l,l,t)}}const wO=[NaN,NaN,NaN,0];let W4;function HX(){return W4||(W4=SA(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),W4}const ZX=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,XX=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,JX=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,eJ=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Sb(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function dC(n){throw new Error('failed to parse "'+n+'" as color')}function IU(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(XX)||n.match(ZX)||n.match(JX);if(s){const l=s[4],o=100/255;return[wA(Sb(s[1],o)+.5|0,0,255),wA(Sb(s[2],o)+.5|0,0,255),wA(Sb(s[3],o)+.5|0,0,255),l!==void 0?wA(Sb(l,100),0,1):1]}dC(n)}if(n.startsWith("#")){if(eJ.test(n)){const s=n.substring(1),l=s.length<=4?1:2,o=[0,0,0,255];for(let f=0,C=s.length;f<C;f+=l){let x=parseInt(s.substring(f,f+l),16);l===1&&(x+=x<<4),o[f/l]=x}return o[3]=o[3]/255,o}dC(n)}const e=HX();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&dC(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return IU(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Ux(i[3]/255,3),i}function tJ(n){return typeof n=="string"?n:EO(n)}const nJ=1024,Tv={};let Q4=0;function rJ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function Y4(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function q4(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function $4(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function V4(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function r9(n){const e=$4(n[0]),t=$4(n[1]),r=$4(n[2]),i=V4(e*.222488403+t*.716873169+r*.06060791),s=500*(V4(e*.452247074+t*.399439023+r*.148375274)-i),l=200*(i-V4(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(l,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+l*l),o<0?o+360:o,n[3]]}function iJ(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=q4(e),s=q4(e+t/500*Math.cos(r)),l=q4(e-t/200*Math.sin(r)),o=Y4(s*3.021973625-i*1.617392459-l*.404875592),f=Y4(s*-.943766287+i*1.916279586+l*.027607165),C=Y4(s*.069407491-i*.22898585+l*1.159737864);return[wA(o+.5|0,0,255),wA(f+.5|0,0,255),wA(C+.5|0,0,255),n[3]]}function SO(n){if(n==="none")return wO;if(Tv.hasOwnProperty(n))return Tv[n];if(Q4>=nJ){let t=0;for(const r in Tv)(t++&3)===0&&(delete Tv[r],--Q4)}const e=IU(n);e.length!==4&&dC(n);for(const t of e)isNaN(t)&&dC(n);return Tv[n]=e,++Q4,e}function Dy(n){return Array.isArray(n)?n:SO(n)}function EO(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function i9(n){return n[0]>0&&n[1]>0}function oJ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Ch(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let og=0;const jh=1<<og++,Ts=1<<og++,hd=1<<og++,yp=1<<og++,Z1=1<<og++,Yv=1<<og++,Eb=Math.pow(2,og)-1,BO={[jh]:"boolean",[Ts]:"number",[hd]:"string",[yp]:"color",[Z1]:"number[]",[Yv]:"size"},sJ=Object.keys(BO).map(Number).sort(Am);function aJ(n){return n in BO}function qv(n){const e=[];for(const t of sJ)$v(n,t)&&e.push(BO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function $v(n,e){return(n&e)===e}function C0(n,e){return n===e}class sc{constructor(e,t){if(!aJ(e))throw new Error(`literal expressions must have a specific type, got ${qv(e)}`);this.type=e,this.value=t}}class lJ{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function TU(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function eh(n,e,t){switch(typeof n){case"boolean":{if(C0(e,hd))return new sc(hd,n?"true":"false");if(!$v(e,jh))throw new Error(`got a boolean, but expected ${qv(e)}`);return new sc(jh,n)}case"number":{if(C0(e,Yv))return new sc(Yv,Ch(n));if(C0(e,jh))return new sc(jh,!!n);if(C0(e,hd))return new sc(hd,n.toString());if(!$v(e,Ts))throw new Error(`got a number, but expected ${qv(e)}`);return new sc(Ts,n)}case"string":{if(C0(e,yp))return new sc(yp,SO(n));if(C0(e,jh))return new sc(jh,!!n);if(!$v(e,hd))throw new Error(`got a string, but expected ${qv(e)}`);return new sc(hd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return vJ(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(C0(e,Yv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new sc(Yv,n)}if(C0(e,yp)){if(n.length===3)return new sc(yp,[...n,1]);if(n.length===4)return new sc(yp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!$v(e,Z1))throw new Error(`got an array of numbers, but expected ${qv(e)}`);return new sc(Z1,n)}const Gn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},AJ={[Gn.Get]:yo(Zo(1,1/0),o9),[Gn.Var]:yo(Zo(1,1),uJ),[Gn.Has]:yo(Zo(1,1/0),o9),[Gn.Id]:yo(cJ,kg),[Gn.Concat]:yo(Zo(2,1/0),Aa(hd)),[Gn.GeometryType]:yo(hJ,kg),[Gn.LineMetric]:yo(kg),[Gn.Resolution]:yo(H4,kg),[Gn.Zoom]:yo(H4,kg),[Gn.Time]:yo(H4,kg),[Gn.Any]:yo(Zo(2,1/0),Aa(jh)),[Gn.All]:yo(Zo(2,1/0),Aa(jh)),[Gn.Not]:yo(Zo(1,1),Aa(jh)),[Gn.Equal]:yo(Zo(2,2),Aa(Eb)),[Gn.NotEqual]:yo(Zo(2,2),Aa(Eb)),[Gn.GreaterThan]:yo(Zo(2,2),Aa(Ts)),[Gn.GreaterThanOrEqualTo]:yo(Zo(2,2),Aa(Ts)),[Gn.LessThan]:yo(Zo(2,2),Aa(Ts)),[Gn.LessThanOrEqualTo]:yo(Zo(2,2),Aa(Ts)),[Gn.Multiply]:yo(Zo(2,1/0),s9),[Gn.Coalesce]:yo(Zo(2,1/0),s9),[Gn.Divide]:yo(Zo(2,2),Aa(Ts)),[Gn.Add]:yo(Zo(2,1/0),Aa(Ts)),[Gn.Subtract]:yo(Zo(2,2),Aa(Ts)),[Gn.Clamp]:yo(Zo(3,3),Aa(Ts)),[Gn.Mod]:yo(Zo(2,2),Aa(Ts)),[Gn.Pow]:yo(Zo(2,2),Aa(Ts)),[Gn.Abs]:yo(Zo(1,1),Aa(Ts)),[Gn.Floor]:yo(Zo(1,1),Aa(Ts)),[Gn.Ceil]:yo(Zo(1,1),Aa(Ts)),[Gn.Round]:yo(Zo(1,1),Aa(Ts)),[Gn.Sin]:yo(Zo(1,1),Aa(Ts)),[Gn.Cos]:yo(Zo(1,1),Aa(Ts)),[Gn.Atan]:yo(Zo(1,2),Aa(Ts)),[Gn.Sqrt]:yo(Zo(1,1),Aa(Ts)),[Gn.Match]:yo(Zo(4,1/0),a9,fJ),[Gn.Between]:yo(Zo(3,3),Aa(Ts)),[Gn.Interpolate]:yo(Zo(6,1/0),a9,pJ),[Gn.Case]:yo(Zo(3,1/0),dJ,mJ),[Gn.In]:yo(Zo(2,2),gJ),[Gn.Number]:yo(Zo(1,1/0),Aa(Eb)),[Gn.String]:yo(Zo(1,1/0),Aa(Eb)),[Gn.Array]:yo(Zo(1,1/0),Aa(Ts)),[Gn.Color]:yo(Zo(1,4),Aa(Ts)),[Gn.Band]:yo(Zo(1,3),Aa(Ts)),[Gn.Palette]:yo(Zo(2,2),yJ),[Gn.ToString]:yo(Zo(1,1),Aa(jh|Ts|hd|yp))};function o9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=n[s+1];switch(typeof l){case"number":{i[s]=new sc(Ts,l);break}case"string":{i[s]=new sc(hd,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}s===0&&t.properties.add(String(l))}return i}function uJ(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new sc(hd,r)]}function cJ(n,e,t){t.featureId=!0}function hJ(n,e,t){t.geometryType=!0}function H4(n,e,t){t.mapState=!0}function kg(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Zo(n,e){return function(t,r,i){const s=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${l}`)}}}function s9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=eh(n[s+1],e,t);i[s]=l}return i}function Aa(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let l=0;l<i;++l){const o=eh(e[l+1],n,r);s[l]=o}return s}}function dJ(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function a9(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function fJ(n,e,t){const r=n.length-1,i=hd|Ts|jh,s=eh(n[1],i,t),l=eh(n[n.length-1],e,t),o=new Array(r-2);for(let f=0;f<r-2;f+=2){try{const C=eh(n[f+2],s.type,t);o[f]=C}catch(C){throw new Error(`failed to parse argument ${f+1} of match expression: ${C.message}`)}try{const C=eh(n[f+3],l.type,t);o[f+1]=C}catch(C){throw new Error(`failed to parse argument ${f+2} of match expression: ${C.message}`)}}return[s,...o,l]}function pJ(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const f=r[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);i=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new sc(Ts,i);let l;try{l=eh(n[2],Ts,t)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const o=new Array(n.length-3);for(let f=0;f<o.length;f+=2){try{const C=eh(n[f+3],Ts,t);o[f]=C}catch(C){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${C.message}`)}try{const C=eh(n[f+4],e,t);o[f+1]=C}catch(C){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${C.message}`)}}return[s,l,...o]}function mJ(n,e,t){const r=eh(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const l=eh(n[s+1],jh,t);i[s]=l}catch(l){throw new Error(`failed to parse argument ${s} of case expression: ${l.message}`)}try{const l=eh(n[s+2],r.type,t);i[s+1]=l}catch(l){throw new Error(`failed to parse argument ${s+1} of case expression: ${l.message}`)}}return i[i.length-1]=r,i}function gJ(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=hd}else i=Ts;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const f=eh(r[o],i,t);s[o]=f}catch(f){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${f.message}`)}return[eh(n[1],i,t),...s]}function yJ(n,e,t){let r;try{r=eh(n[1],Ts,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let l=0;l<s.length;l++){let o;try{o=eh(i[l],yp,t)}catch(f){throw new Error(`failed to parse color at index ${l} in palette expression: ${f.message}`)}if(!(o instanceof sc))throw new Error(`the palette color at index ${l} must be a literal value`);s[l]=o}return[r,...s]}function yo(...n){return function(e,t,r){const i=e[0];let s;for(let l=0;l<n.length;l++){const o=n[l](e,t,r);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new lJ(t,i,...s)}}function vJ(n,e,t){const r=n[0],i=AJ[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function kU(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return kU(n.getGeometries()[0]);default:return""}}function PU(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Zm(n,e,t){const r=eh(n,e,t);return wp(r)}function wp(n,e){if(n instanceof sc){if(n.type===yp&&typeof n.value=="string"){const r=SO(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Gn.Number:case Gn.String:case Gn.Coalesce:return CJ(n);case Gn.Get:case Gn.Var:case Gn.Has:return _J(n);case Gn.Id:return r=>r.featureId;case Gn.GeometryType:return r=>r.geometryType;case Gn.Concat:{const r=n.args.map(i=>wp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Gn.Resolution:return r=>r.resolution;case Gn.Any:case Gn.All:case Gn.Between:case Gn.In:case Gn.Not:return xJ(n);case Gn.Equal:case Gn.NotEqual:case Gn.LessThan:case Gn.LessThanOrEqualTo:case Gn.GreaterThan:case Gn.GreaterThanOrEqualTo:return bJ(n);case Gn.Multiply:case Gn.Divide:case Gn.Add:case Gn.Subtract:case Gn.Clamp:case Gn.Mod:case Gn.Pow:case Gn.Abs:case Gn.Floor:case Gn.Ceil:case Gn.Round:case Gn.Sin:case Gn.Cos:case Gn.Atan:case Gn.Sqrt:return MJ(n);case Gn.Case:return wJ(n);case Gn.Match:return SJ(n);case Gn.Interpolate:return EJ(n);case Gn.ToString:return BJ(n);default:throw new Error(`Unsupported operator ${t}`)}}function CJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=wp(n.args[s]);switch(t){case Gn.Coalesce:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Gn.Number:case Gn.String:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function _J(n,e){const r=n.args[0].value;switch(n.operator){case Gn.Get:return i=>{const s=n.args;let l=i.properties[r];for(let o=1,f=s.length;o<f;++o){const x=s[o].value;l=l[x]}return l};case Gn.Var:return i=>i.variables[r];case Gn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let l=i.properties[r];for(let o=1,f=s.length;o<f;++o){const x=s[o].value;if(!l||!Object.hasOwn(l,x))return!1;l=l[x]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function bJ(n,e){const t=n.operator,r=wp(n.args[0]),i=wp(n.args[1]);switch(t){case Gn.Equal:return s=>r(s)===i(s);case Gn.NotEqual:return s=>r(s)!==i(s);case Gn.LessThan:return s=>r(s)<i(s);case Gn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Gn.GreaterThan:return s=>r(s)>i(s);case Gn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function xJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=wp(n.args[s]);switch(t){case Gn.Any:return s=>{for(let l=0;l<r;++l)if(i[l](s))return!0;return!1};case Gn.All:return s=>{for(let l=0;l<r;++l)if(!i[l](s))return!1;return!0};case Gn.Between:return s=>{const l=i[0](s),o=i[1](s),f=i[2](s);return l>=o&&l<=f};case Gn.In:return s=>{const l=i[0](s);for(let o=1;o<r;++o)if(l===i[o](s))return!0;return!1};case Gn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function MJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=wp(n.args[s]);switch(t){case Gn.Multiply:return s=>{let l=1;for(let o=0;o<r;++o)l*=i[o](s);return l};case Gn.Divide:return s=>i[0](s)/i[1](s);case Gn.Add:return s=>{let l=0;for(let o=0;o<r;++o)l+=i[o](s);return l};case Gn.Subtract:return s=>i[0](s)-i[1](s);case Gn.Clamp:return s=>{const l=i[0](s),o=i[1](s);if(l<o)return o;const f=i[2](s);return l>f?f:l};case Gn.Mod:return s=>i[0](s)%i[1](s);case Gn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Gn.Abs:return s=>Math.abs(i[0](s));case Gn.Floor:return s=>Math.floor(i[0](s));case Gn.Ceil:return s=>Math.ceil(i[0](s));case Gn.Round:return s=>Math.round(i[0](s));case Gn.Sin:return s=>Math.sin(i[0](s));case Gn.Cos:return s=>Math.cos(i[0](s));case Gn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Gn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function wJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=wp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function SJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=wp(n.args[i]);return i=>{const s=r[0](i);for(let l=1;l<t-1;l+=2)if(s===r[l](i))return r[l+1](i);return r[t-1](i)}}function EJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=wp(n.args[i]);return i=>{const s=r[0](i),l=r[1](i);let o,f;for(let C=2;C<t;C+=2){const x=r[C](i);let B=r[C+1](i);const R=Array.isArray(B);if(R&&(B=rJ(B)),x>=l)return C===2?B:R?OJ(s,l,o,f,x,B):Vv(s,l,o,f,x,B);o=x,f=B}return f}}function BJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=wp(n.args[s]);switch(t){case Gn.ToString:return s=>{const l=i[0](s);return n.args[0].type===yp?EO(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Vv(n,e,t,r,i,s){const l=i-t;if(l===0)return r;const o=e-t,f=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return r+f*(s-r)}function OJ(n,e,t,r,i,s){if(i-t===0)return r;const o=r9(r),f=r9(s);let C=f[2]-o[2];C>180?C-=360:C<-180&&(C+=360);const x=[Vv(n,e,t,o[0],i,f[0]),Vv(n,e,t,o[1],i,f[1]),o[2]+Vv(n,e,t,0,i,C),Vv(n,e,t,r[3],i,s[3])];return iJ(x)}const gi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class OO extends m_{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?gi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(go.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==gi.IDLE&&this.loader){this.state=gi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Py(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||NH&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=gi.LOADED}).catch(r=>{this.state=gi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function IJ(n,e,t){const r=n;let i=!0,s=!1,l=!1;const o=[P2(r,go.LOAD,function(){l=!0,s||e()})];return r.src&&GL?(s=!0,r.decode().then(function(){i&&e()}).catch(function(f){i&&(l?e():t())})):o.push(P2(r,go.ERROR,t)),function(){i=!1,o.forEach(cl)}}function TJ(n,e){return new Promise((t,r)=>{function i(){l(),t(n)}function s(){l(),r(new Error("Image load error"))}function l(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function kJ(n,e){return e&&(n.src=e),n.src&&GL?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):TJ(n)}class PJ{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=Z4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=Z4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const l=Z4(e,t,r),o=l in this.cache_;this.cache_[l]=i,s&&(i.getImageState()===gi.IDLE&&i.load(),i.getImageState()===gi.LOADING?i.ready().then(()=>{this.patternCache_[l]=z2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[l]=z2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Z4(n,e,t){const r=t?Dy(t):"null";return e+":"+n+":"+r}const Nf=new PJ;let kv=null;class RU extends m_{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?gi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===gi.LOADED){kv||(kv=SA(1,1,void 0,{willReadFrequently:!0})),kv.drawImage(this.image_,0,0);try{kv.getImageData(0,0,1,1),this.tainted_=!1}catch{kv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(go.CHANGE)}handleImageError_(){this.imageState_=gi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=gi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=SA(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===gi.IDLE){this.image_||this.initializeImage_(),this.imageState_=gi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&kJ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==gi.LOADED)return;const t=this.image_,r=SA(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=tJ(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===gi.LOADED||this.imageState_===gi.ERROR)e();else{const t=()=>{(this.imageState_===gi.LOADED||this.imageState_===gi.ERROR)&&(this.removeEventListener(go.CHANGE,t),e())};this.addEventListener(go.CHANGE,t)}})),this.ready_}}function IO(n,e,t,r,i,s){let l=e===void 0?void 0:Nf.get(e,t,i);return l||(l=new RU(n,n&&"src"in n?n.src||void 0:e,t,r,i),Nf.set(e,t,i,l,s)),s&&l&&!Nf.getPattern(e,t,i)&&Nf.set(e,t,i,l,s),l}function om(n){return n?Array.isArray(n)?EO(n):typeof n=="object"&&"src"in n?RJ(n):n:null}function RJ(n){if(!n.offset||!n.size)return Nf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Nf.getPattern(e,void 0,n.color);if(t)return t;const r=Nf.get(n.src,"anonymous",null);if(r.getImageState()!==gi.LOADED)return null;const i=SA(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),IO(i.canvas,e,void 0,gi.LOADED,n.color,!0),Nf.getPattern(e,void 0,n.color)}const DU="10px sans-serif",dd="#000",Ky="round",Gm=[],jm=0,Fy="round",LC=10,UC="#000",zC="center",N2="middle",R1=[0,0,0,0],NC=1,E1=new Ip;let Pv=null,l9;const W6={},DJ=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function KJ(n,e,t){return`${n} ${e} 16px "${t}"`}const FJ=function(){let e,t;async function r(s){await t.ready;const l=await t.load(s);if(l.length===0)return!1;const o=G6(s),f=o.families[0].toLowerCase(),C=o.weight;return l.some(x=>{const B=x.family.replace(/^['"]|['"]$/g,"").toLowerCase(),R=N6[x.weight]||x.weight;return B===f&&x.style===o.style&&R==C})}async function i(){await t.ready;let s=!0;const l=E1.getProperties(),o=Object.keys(l).filter(f=>l[f]<100);for(let f=o.length-1;f>=0;--f){const C=o[f];let x=l[C];x<100&&(await r(C)?(p_(W6),E1.set(C,100)):(x+=10,E1.set(C,x,!0),x<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=VB?self.fonts:document.fonts);const l=G6(s);if(!l)return;const o=l.families;let f=!1;for(const C of o){if(DJ.has(C))continue;const x=KJ(l.style,l.weight,C);E1.get(x)===void 0&&(E1.set(x,0,!0),f=!0)}f&&(clearTimeout(e),e=setTimeout(i,100))}}(),LJ=function(){let n;return function(e){let t=W6[e];if(t==null){if(VB){const r=G6(e),i=KU(e,"Žg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);W6[e]=t}return t}}();function KU(n,e){return Pv||(Pv=SA(1,1)),n!=l9&&(Pv.font=n,l9=Pv.font),Pv.measureText(e)}function FU(n,e){return KU(n,e).width}function A9(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,FU(n,s)),0);return t[e]=r,r}function UJ(n,e){const t=[],r=[],i=[];let s=0,l=0,o=0,f=0;for(let C=0,x=e.length;C<=x;C+=2){const B=e[C];if(B===`
`||C===x){s=Math.max(s,l),i.push(l),l=0,o+=f,f=0;continue}const R=e[C+1]||n.font,P=FU(R,B);t.push(P),l+=P;const U=LJ(R);r.push(U),f=Math.max(f,U)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function zJ(n,e,t,r,i,s,l,o,f,C,x){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(f,C),n.scale(x[0],x[1]),NJ(r,n)):x[0]<0||x[1]<0?(n.translate(f,C),n.scale(x[0],x[1]),n.drawImage(r,i,s,l,o,0,0,l,o)):n.drawImage(r,i,s,l,o,f,C,l*x[0],o*x[1]),n.restore()}function NJ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class Zx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ch(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Zx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return _o()}getImage(e){return _o()}getHitDetectionImage(){return _o()}getPixelRatio(e){return 1}getImageState(){return _o()}getImageSize(){return _o()}getOrigin(){return _o()}getSize(){return _o()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ch(e)}listenImageChange(e){_o()}load(){_o()}unlistenImageChange(e){_o()}ready(){return Promise.resolve()}}class Xx extends Zx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?gi.LOADING:gi.LOADED,this.imageState_===gi.LOADING&&this.ready().then(()=>this.imageState_=gi.LOADED),this.render()}clone(){const e=this.getScale(),t=new Xx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=Nf.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,l=Math.ceil(s.size*e),o=SA(l,l);this.draw_(s,o,e),i=o.canvas,Nf.set(r,null,null,new RU(i,void 0,null,gi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const ne=i;i=s,s=ne}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,f=s*Math.sin(o),C=Math.sqrt(s*s-f*f),x=i-C,B=Math.sqrt(f*f+x*x),R=B/f;if(e==="miter"&&R<=r)return R*t;const P=t/2/R,U=t/2*(x/B),W=Math.sqrt((i+P)*(i+P)+U*U)-i;if(this.radius2_===void 0||e==="bevel")return W*2;const X=i*Math.sin(o),$=Math.sqrt(i*i-X*X),re=s-$,V=Math.sqrt(X*X+re*re)/X;if(V<=r){const ne=V*t/2-s-i;return 2*Math.max(W,ne)}return W*2}createRenderOptions(){let e=Ky,t=Fy,r=0,i=null,s=0,l,o=0;this.stroke_&&(l=om(this.stroke_.getColor()??UC),o=this.stroke_.getWidth()??NC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Fy,e=this.stroke_.getLineCap()??Ky,r=this.stroke_.getMiterLimit()??LC);const f=this.calculateLineJoinSize_(t,o,r),C=Math.max(this.radius,this.radius2_||0),x=Math.ceil(2*C+f);return{strokeStyle:l,strokeWidth:o,size:x,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=dd),t.fillStyle=om(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Dy(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=SA(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const f=s+o*l,C=o%2===0?r:i;e.lineTo(C*Math.cos(f),C*Math.sin(f))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=dd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class M_ extends Xx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new M_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class zm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new zm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=IO(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===gi.IDLE&&t.load(),t.getImageState()===gi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?ko(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Dy(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function u9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let G2=class LU extends Zx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;ia(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||ko(l)),ia(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),ia(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(e.src!==void 0?f=gi.IDLE:l!==void 0&&("complete"in l?l.complete?f=l.src?gi.LOADED:gi.IDLE:f=gi.LOADING:f=gi.LOADED),this.color_=e.color!==void 0?Dy(e.color):null,this.iconImage_=IO(l,o,this.crossOrigin_,f,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let C,x;if(e.size)[C,x]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)C=B.width,x=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const R=()=>{if(this.unlistenImageChange(R),!this.initialOptions_)return;const P=this.iconImage_.getSize();this.setScale(u9(P[0],P[1],e.width,e.height))};this.listenImageChange(R);return}}C!==void 0&&this.setScale(u9(C,x,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new LU({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==gi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==gi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(go.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(go.CHANGE,e)}ready(){return this.iconImage_.ready()}};class D0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new D0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Jd{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=c9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Jd({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=c9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function GJ(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ia(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let X4=null;function UU(n,e){if(!X4){const t=new zm({color:"rgba(255,255,255,0.4)"}),r=new D0({color:"#3399CC",width:1.25});X4=[new Jd({image:new M_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return X4}function c9(n){return n.getGeometry()}const jJ="#333";class Jx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Ch(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new zm({color:jJ}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Jx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ch(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function WJ(n){return!0}function QJ(n){const e=TU(),t=YJ(n,e),r=PU();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const l=i.getId();l!==void 0?r.featureId=l:r.featureId=null}return e.geometryType&&(r.geometryType=kU(i.getGeometry())),t(r)}}function h9(n){const e=TU(),t=n.length,r=new Array(t);for(let l=0;l<t;++l)r[l]=Q6(n[l],e);const i=PU(),s=new Array(t);return function(l,o){if(i.properties=l.getPropertiesInternal(),i.resolution=o,e.featureId){const C=l.getId();C!==void 0?i.featureId=C:i.featureId=null}let f=0;for(let C=0;C<t;++C){const x=r[C](i);x&&(s[f]=x,f+=1)}return s.length=f,s}}function YJ(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],l="filter"in s?Zm(s.filter,jh,e):WJ;let o;if(Array.isArray(s.style)){const f=s.style.length;o=new Array(f);for(let C=0;C<f;++C)o[C]=Q6(s.style[C],e)}else o=[Q6(s.style,e)];r[i]={filter:l,styles:o}}return function(i){const s=[];let l=!1;for(let o=0;o<t;++o){const f=r[o].filter;if(f(i)&&!(n[o].else&&l)){l=!0;for(const C of r[o].styles){const x=C(i);x&&s.push(x)}}}return s}}function Q6(n,e){const t=GC(n,"",e),r=jC(n,"",e),i=qJ(n,e),s=$J(n,e),l=fd(n,"z-index",e);if(!t&&!r&&!i&&!s&&!$0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Jd;return function(f){let C=!0;if(t){const x=t(f);x&&(C=!1),o.setFill(x)}if(r){const x=r(f);x&&(C=!1),o.setStroke(x)}if(i){const x=i(f);x&&(C=!1),o.setText(x)}if(s){const x=s(f);x&&(C=!1),o.setImage(x)}return l&&o.setZIndex(l(f)),C?null:o}}function GC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=XJ(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=TO(n,e+"fill-color",t)}if(!r)return null;const i=new zm;return function(s){const l=r(s);return l===wO?null:(i.setColor(l),i)}}function jC(n,e,t){const r=fd(n,e+"stroke-width",t),i=TO(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Um(n,e+"stroke-line-cap",t),l=Um(n,e+"stroke-line-join",t),o=zU(n,e+"stroke-line-dash",t),f=fd(n,e+"stroke-line-dash-offset",t),C=fd(n,e+"stroke-miter-limit",t),x=new D0;return function(B){if(i){const R=i(B);if(R===wO)return null;x.setColor(R)}if(r&&x.setWidth(r(B)),s){const R=s(B);if(R!=="butt"&&R!=="round"&&R!=="square")throw new Error("Expected butt, round, or square line cap");x.setLineCap(R)}if(l){const R=l(B);if(R!=="bevel"&&R!=="round"&&R!=="miter")throw new Error("Expected bevel, round, or miter line join");x.setLineJoin(R)}return o&&x.setLineDash(o(B)),f&&x.setLineDashOffset(f(B)),C&&x.setMiterLimit(C(B)),x}}function qJ(n,e){const t="text-",r=Um(n,t+"value",e);if(!r)return null;const i=GC(n,t,e),s=GC(n,t+"background-",e),l=jC(n,t,e),o=jC(n,t+"background-",e),f=Um(n,t+"font",e),C=fd(n,t+"max-angle",e),x=fd(n,t+"offset-x",e),B=fd(n,t+"offset-y",e),R=_y(n,t+"overflow",e),P=Um(n,t+"placement",e),U=fd(n,t+"repeat",e),N=e3(n,t+"scale",e),W=_y(n,t+"rotate-with-view",e),X=fd(n,t+"rotation",e),$=Um(n,t+"align",e),re=Um(n,t+"justify",e),te=Um(n,t+"baseline",e),V=_y(n,t+"keep-upright",e),ne=zU(n,t+"padding",e),G=t3(n,t+"declutter-mode"),le=new Jx({declutterMode:G});return function(fe){if(le.setText(r(fe)),i&&le.setFill(i(fe)),s&&le.setBackgroundFill(s(fe)),l&&le.setStroke(l(fe)),o&&le.setBackgroundStroke(o(fe)),f&&le.setFont(f(fe)),C&&le.setMaxAngle(C(fe)),x&&le.setOffsetX(x(fe)),B&&le.setOffsetY(B(fe)),R&&le.setOverflow(R(fe)),P){const pe=P(fe);if(pe!=="point"&&pe!=="line")throw new Error("Expected point or line for text-placement");le.setPlacement(pe)}if(U&&le.setRepeat(U(fe)),N&&le.setScale(N(fe)),W&&le.setRotateWithView(W(fe)),X&&le.setRotation(X(fe)),$){const pe=$(fe);if(pe!=="left"&&pe!=="center"&&pe!=="right"&&pe!=="end"&&pe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");le.setTextAlign(pe)}if(re){const pe=re(fe);if(pe!=="left"&&pe!=="right"&&pe!=="center")throw new Error("Expected left, right, or center for text-justify");le.setJustify(pe)}if(te){const pe=te(fe);if(pe!=="bottom"&&pe!=="top"&&pe!=="middle"&&pe!=="alphabetic"&&pe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");le.setTextBaseline(pe)}return ne&&le.setPadding(ne(fe)),V&&le.setKeepUpright(V(fe)),le}}function $J(n,e){return"icon-src"in n?VJ(n,e):"shape-points"in n?HJ(n,e):"circle-radius"in n?ZJ(n,e):null}function VJ(n,e){const t="icon-",r=t+"src",i=NU(n[r],r),s=j2(n,t+"anchor",e),l=e3(n,t+"scale",e),o=fd(n,t+"opacity",e),f=j2(n,t+"displacement",e),C=fd(n,t+"rotation",e),x=_y(n,t+"rotate-with-view",e),B=f9(n,t+"anchor-origin"),R=p9(n,t+"anchor-x-units"),P=p9(n,t+"anchor-y-units"),U=nee(n,t+"color"),N=eee(n,t+"cross-origin"),W=tee(n,t+"offset"),X=f9(n,t+"offset-origin"),$=W2(n,t+"width"),re=W2(n,t+"height"),te=JJ(n,t+"size"),V=t3(n,t+"declutter-mode"),ne=new G2({src:i,anchorOrigin:B,anchorXUnits:R,anchorYUnits:P,color:U,crossOrigin:N,offset:W,offsetOrigin:X,height:re,width:$,size:te,declutterMode:V});return function(G){return o&&ne.setOpacity(o(G)),f&&ne.setDisplacement(f(G)),C&&ne.setRotation(C(G)),x&&ne.setRotateWithView(x(G)),l&&ne.setScale(l(G)),s&&ne.setAnchor(s(G)),ne}}function HJ(n,e){const t="shape-",r=t+"points",i=t+"radius",s=Y6(n[r],r),l=Y6(n[i],i),o=GC(n,t,e),f=jC(n,t,e),C=e3(n,t+"scale",e),x=j2(n,t+"displacement",e),B=fd(n,t+"rotation",e),R=_y(n,t+"rotate-with-view",e),P=W2(n,t+"radius2"),U=W2(n,t+"angle"),N=t3(n,t+"declutter-mode"),W=new Xx({points:s,radius:l,radius2:P,angle:U,declutterMode:N});return function(X){return o&&W.setFill(o(X)),f&&W.setStroke(f(X)),x&&W.setDisplacement(x(X)),B&&W.setRotation(B(X)),R&&W.setRotateWithView(R(X)),C&&W.setScale(C(X)),W}}function ZJ(n,e){const t="circle-",r=GC(n,t,e),i=jC(n,t,e),s=fd(n,t+"radius",e),l=e3(n,t+"scale",e),o=j2(n,t+"displacement",e),f=fd(n,t+"rotation",e),C=_y(n,t+"rotate-with-view",e),x=t3(n,t+"declutter-mode"),B=new M_({radius:5,declutterMode:x});return function(R){return s&&B.setRadius(s(R)),r&&B.setFill(r(R)),i&&B.setStroke(i(R)),o&&B.setDisplacement(o(R)),f&&B.setRotation(f(R)),C&&B.setRotateWithView(C(R)),l&&B.setScale(l(R)),B}}function fd(n,e,t){if(!(e in n))return;const r=Zm(n[e],Ts,t);return function(i){return Y6(r(i),e)}}function Um(n,e,t){if(!(e in n))return null;const r=Zm(n[e],hd,t);return function(i){return NU(r(i),e)}}function XJ(n,e,t){const r=Um(n,e+"pattern-src",t),i=d9(n,e+"pattern-offset",t),s=d9(n,e+"pattern-size",t),l=TO(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:l&&l(o)}}}function _y(n,e,t){if(!(e in n))return null;const r=Zm(n[e],jh,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function TO(n,e,t){if(!(e in n))return null;const r=Zm(n[e],yp,t);return function(i){return GU(r(i),e)}}function zU(n,e,t){if(!(e in n))return null;const r=Zm(n[e],Z1,t);return function(i){return w_(r(i),e)}}function j2(n,e,t){if(!(e in n))return null;const r=Zm(n[e],Z1,t);return function(i){const s=w_(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function d9(n,e,t){if(!(e in n))return null;const r=Zm(n[e],Z1,t);return function(i){return jU(r(i),e)}}function e3(n,e,t){if(!(e in n))return null;const r=Zm(n[e],Z1|Ts,t);return function(i){return ree(r(i),e)}}function W2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function JJ(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Ch(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function eee(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function f9(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function p9(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function tee(n,e){const t=n[e];if(t!==void 0)return w_(t,e)}function t3(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function nee(n,e){const t=n[e];if(t!==void 0)return GU(t,e)}function w_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function NU(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function Y6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function GU(n,e){if(typeof n=="string")return n;const t=w_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function jU(n,e){const t=w_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function ree(n,e){return typeof n=="number"?n:jU(n,e)}const m9={RENDER_ORDER:"renderOrder"};class kO extends Zy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(m9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new OU(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(m9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?UU:e;const t=iee(e);this.styleFunction_=e===null?void 0:GJ(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function iee(n){if(n===void 0)return UU;if(!n)return null;if(typeof n=="function"||n instanceof Jd)return n;if(!Array.isArray(n))return h9([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Jd){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!(l instanceof Jd))throw new Error("Expected a list of style instances");i[s]=l}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");i[s]=l}return QJ(i)}return h9(n)}class WU extends Op{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class oee extends f_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){_o()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;hm(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),lU(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,l,o,f){let C;const x=t.viewState;function B(te,V,ne,G){return s.call(l,V,te?ne:null,G)}const R=x.projection,P=JB(e.slice(),R),U=[[0,0]];if(R.canWrapX()&&i){const te=R.getExtent(),V=Ls(te);U.push([-V,0],[V,0])}const N=t.layerStatesArray,W=N.length,X=[],$=[];for(let te=0;te<U.length;te++)for(let V=W-1;V>=0;--V){const ne=N[V],G=ne.layer;if(G.hasRenderer()&&MO(ne,x)&&o.call(f,G)){const le=G.getRenderer(),fe=G.getSource();if(le&&fe){const pe=fe.getWrapX()?P:e,we=B.bind(null,ne.managed);$[0]=pe[0]+U[te][0],$[1]=pe[1]+U[te][1],C=le.forEachFeatureAtCoordinate($,t,r,we,X)}if(C)return C}}if(X.length===0)return;const re=1/X.length;return X.forEach((te,V)=>te.distanceSq+=V*re),X.sort((te,V)=>te.distanceSq-V.distanceSq),X.some(te=>C=te.callback(te.feature,te.layer,te.geometry)),C}hasFeatureAtCoordinate(e,t,r,i,s,l){return this.forEachFeatureAtCoordinate(e,t,r,i,kC,this,s,l)!==void 0}getMap(){return this.map_}renderFrame(e){_o()}scheduleExpireIconCache(e){Nf.canExpireCache()&&e.postRenderFunctions.push(see)}}function see(n,e){Nf.expire()}class aee extends oee{constructor(e){super(e),this.fontChangeListenerKey_=ks(E1,ky.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Hx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new WU(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){cl(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(zf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,f)=>o.zIndex-f.zIndex);t.some(o=>o.layer instanceof kO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let l=null;for(let o=0,f=t.length;o<f;++o){const C=t[o];e.layerIndex=o;const x=C.layer,B=x.getSourceState();if(!MO(C,i)||B!="ready"&&B!="undefined"){x.unrender();continue}const R=x.render(e,l);R&&(R!==l&&(this.children_.push(R),l=R),s.push(C))}this.declutter(e,s),gX(this.element_,this.children_),this.dispatchRenderEvent(zf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function QU(n){if(n instanceof Zy){n.setMapInternal(null);return}n instanceof Hy&&n.getLayers().forEach(QU)}function YU(n,e){if(n instanceof Zy){n.setMapInternal(e);return}if(n instanceof Hy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)YU(t[r],e)}}let n3=class extends Ip{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=lee(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:zH,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=pd(),this.pixelToCoordinateTransform_=pd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||_X(),this.interactions=t.interactions||jX({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new WL(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(gh.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(gh.VIEW,this.handleViewChanged_),this.addChangeListener(gh.SIZE,this.handleSizeChanged_),this.addChangeListener(gh.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof gp)&&e.view.then(function(i){r.setView(new gp(i))}),this.controls.addEventListener(cd.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(cd.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(cd.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(cd.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(cd.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(cd.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){YU(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,l=r.layerFilter!==void 0?r.layerFilter:kC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,l,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Hy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:kC,s=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,l,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],l=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/l]}getTarget(){return this.get(gh.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return L6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Fu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(gh.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof nm){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const l=i.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Fm(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Fu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(gh.SIZE)}getView(){return this.get(gh.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return WH(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new S0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===B6.POINTERDOWN||r===go.WHEEL||r===go.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,l=t.target,o=s instanceof ShadowRoot?s.host===l?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const l=i[s];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const l=e.viewHints;if(l[tA.ANIMATING]||l[tA.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(zf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(zf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ay(Lm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ay(Lm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)cl(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(go.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(go.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new aee(this)),this.mapBrowserEventHandler_=new GH(this,this.moveTolerance_);for(const s in HA)this.mapBrowserEventHandler_.addEventListener(HA[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(go.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(go.WHEEL,this.boundHandleBrowserEvent_,jL?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[ks(r,go.KEYDOWN,this.handleBrowserEvent,this),ks(r,go.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(cl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(cl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ks(e,ky.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ks(e,go.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(cl),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new B0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ks(e,ky.PROPERTYCHANGE,this.render,this),ks(e,go.CHANGE,this.render,this),ks(e,"addlayer",this.handleLayerAdd_,this),ks(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){QU(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&i9(t)&&r&&r.isDef()){const l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:D2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:ko(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const f=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=D2(o.nextCenter,o.nextResolution,f,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!ng(this.previousExtent_)&&!Ym(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ay(Lm.MOVESTART,this,i)),this.previousExtent_=$y(this.previousExtent_)),this.previousExtent_&&!s.viewHints[tA.ANIMATING]&&!s.viewHints[tA.INTERACTING]&&!Ym(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ay(Lm.MOVEEND,this,s)),QL(s.extent,this.previousExtent_))),this.dispatchEvent(new ay(Lm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Lm.LOADSTART)||this.hasListener(Lm.LOADEND)||this.hasListener(zf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new B0("removelayer",t)),this.set(gh.LAYERGROUP,e)}setSize(e){this.set(gh.SIZE,e)}setTarget(e){this.set(gh.TARGET,e)}setView(e){if(!e||e instanceof gp){this.set(gh.VIEW,e);return}this.set(gh.VIEW,new gp);const t=this;e.then(function(r){t.setView(new gp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(l)&&(t=[Math.max(0,s),Math.max(0,l)],!i9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&eU("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!H0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function lee(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Hy({layers:n.layers});t[gh.LAYERGROUP]=r,t[gh.TARGET]=n.target,t[gh.VIEW]=n.view instanceof gp?n.view:new gp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new nm(n.controls.slice()):(ia(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new nm(n.interactions.slice()):(ia(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new nm(n.overlays.slice()):(ia(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new nm,{controls:i,interactions:s,keyboardEventTarget:e,overlays:l,values:t}}class r3 extends Ip{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new r3(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(cl(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ks(e,go.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Aee(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Aee(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ia(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function qU(n,e,t,r){const i=[];let s=Qf();for(let l=0,o=t.length;l<o;++l){const f=t[l];s=ZB(n,e,f[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=f[f.length-1]}return i}function Q2(n,e,t,r,i,s,l){let o,f;const C=(t-e)/r;if(C===1)o=e;else if(C===2)o=e,f=i;else if(C!==0){let x=n[e],B=n[e+1],R=0;const P=[0];for(let W=e+r;W<t;W+=r){const X=n[W],$=n[W+1];R+=Math.sqrt((X-x)*(X-x)+($-B)*($-B)),P.push(R),x=X,B=$}const U=i*R,N=kH(P,U);N<0?(f=(U-P[-N-2])/(P[-N-1]-P[-N-2]),o=e+(-N-2)*r):o=e+N*r}l=l>1?l:2,s=s||new Array(l);for(let x=0;x<l;++x)s[x]=o===void 0?NaN:f===void 0?n[o+x]:Xd(n[o+x],n[o+r+x],f);return s}function q6(n,e,t,r,i,s){if(t==e)return null;let l;if(i<n[e+r-1])return s?(l=n.slice(e,e+r),l[r-1]=i,l):null;if(n[t-1]<i)return s?(l=n.slice(t-r,t),l[r-1]=i,l):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,f=t/r;for(;o<f;){const R=o+f>>1;i<n[(R+1)*r-1]?f=R:o=R+1}const C=n[o*r-1];if(i==C)return n.slice((o-1)*r,(o-1)*r+r);const x=n[(o+1)*r-1],B=(i-C)/(x-C);l=[];for(let R=0;R<r-1;++R)l.push(Xd(n[(o-1)*r+R],n[o*r+R],B));return l.push(i),l}function uee(n,e,t,r,i,s,l){if(l)return q6(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let f=0,C=t.length;f<C;++f){const x=t[f];if(e!=x){if(i<n[e+r-1])return null;if(i<=n[x-1])return q6(n,e,x,r,i,!1);e=x}}return null}class Y2 extends uU{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(cl),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(ks(e[t],go.CHANGE,this.changed,this))}clone(){const e=new Y2(J4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<tg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let l=0,o=s.length;l<o;++l)i=s[l].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){$y(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)qL(e,t[r].getExtent());return e}getGeometries(){return J4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,l=r.length;s<l;++s){const o=r[s],f=o.getSimplifiedGeometry(e);t.push(f),f!==o&&(i=!0)}return i?new Y2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=af(this.getExtent()));const i=this.geometries_;for(let s=0,l=i.length;s<l;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(J4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function J4(n){return n.map(e=>e.clone())}function PO(n,e,t,r){let i=n[e],s=n[e+1],l=0;for(let o=e+r;o<t;o+=r){const f=n[o],C=n[o+1];l+=Math.sqrt((f-i)*(f-i)+(C-s)*(C-s)),i=f,s=C}return l}class X1 extends rg{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){um(this.flatCoordinates,e),this.changed()}clone(){const e=new X1(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<tg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return mU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,q6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return R0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Q2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return PO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=$x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new X1(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Vx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qx(this.flatCoordinates,0,e,this.stride),this.changed()}}class WC extends rg{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],l=[];for(let f=0,C=i.length;f<C;++f){const x=i[f];um(s,x.getFlatCoordinates()),l.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=l}}appendLineString(e){um(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new WC(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<tg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,uee(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return KC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new X1(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l],C=new X1(e.slice(s,f),r);i.push(C),s=f}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=PO(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let l=0,o=i.length;l<o;++l){const f=i[l],C=Q2(t,r,f,s,.5);um(e,C),r=f}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=fU(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new WC(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return nX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=C_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class S_ extends rg{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){um(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new S_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<tg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,l=this.stride;for(let o=0,f=s.length;o<f;o+=l){const C=N1(e,t,s[o],s[o+1]);if(C<i){i=C;for(let x=0;x<l;++x)r[x]=s[o+x];r.length=l}}return i}getCoordinates(){return R0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new H1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,l=e.length;s<l;s+=r){const o=new H1(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const l=t[i],o=t[i+1];if(HB(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qx(this.flatCoordinates,0,e,this.stride),this.changed()}}class QC extends rg{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],l=[];for(let o=0,f=i.length;o<f;++o){const C=i[o],x=s.length,B=C.getEnds();for(let R=0,P=B.length;R<P;++R)B[R]+=x;um(s,C.getFlatCoordinates()),l.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=l}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;um(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new QC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<tg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(VZ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return tX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return $Z(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),z6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,U6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=qU(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=pU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new S_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;vU(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=z6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=JZ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new QC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,l=r.length;s<l;++s)r[s]-=t;return new qm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const f=r[l].slice(),C=f[f.length-1];if(s!==0)for(let B=0,R=f.length;B<R;++B)f[B]-=s;const x=new qm(t.slice(s,C),e,f);i.push(x),s=C}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return rX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=dU(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const g9=pd();class vh{constructor(e,t,r,i,s,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?YL(this.flatCoordinates_):ZB(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=af(this.getExtent());this.flatInteriorPoints_=dO(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=CU(this.flatCoordinates_,this.ends_),t=qU(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=pU(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Q2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const l=r[i],o=Q2(e,t,l,2,.5);um(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ma(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Uu(r)/Uu(t);hm(g9,r[0],r[3],i,-i,0,0,0),Q0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,g9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new vh(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=zL((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=$x(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=fU(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=cO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new vh(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}vh.prototype.getFlatCoordinates=vh.prototype.getOrientedFlatCoordinates;class $U{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class cee extends $U{constructor(e,t,r,i,s,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Ux(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=pd()}drawImages_(e,t,r,i){if(!this.image_)return;const s=Q0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,f=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=f*this.imageOpacity_);let C=this.imageRotation_;this.transformRotation_===0&&(C-=this.viewRotation_),this.imageRotateWithView_&&(C+=this.viewRotation_);for(let x=0,B=s.length;x<B;x+=2){const R=s[x]-this.imageAnchorX_,P=s[x+1]-this.imageAnchorY_;if(C!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const U=R+this.imageAnchorX_,N=P+this.imageAnchorY_;hm(o,U,N,1,1,C,-U,-N),l.save(),l.transform.apply(l,o),l.translate(U,N),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,R,P,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=f)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Q0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const f=s[t]+this.textOffsetX_,C=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(f-this.textOffsetX_,C-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,f,C),this.textFillState_&&l.fillText(this.text_,f,C))}}moveToLineTo_(e,t,r,i,s){const l=this.context_,o=Q0(e,t,r,i,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let f=o.length;s&&(f-=2);for(let C=2;C<f;C+=2)l.lineTo(o[C],o[C+1]);return s&&l.closePath(),r}drawRings_(e,t,r,i){for(let s=0,l=r.length;s<l;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!XA(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=qZ(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),l=this.context_;l.beginPath(),l.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!XA(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(XA(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const l=e.getEnds(),o=e.getStride();r.beginPath();for(let f=0,C=l.length;f<C;++f)s=this.moveToLineTo_(i,s,l[f],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!XA(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!XA(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,f=s.length;o<f;++o){const C=s[o];i=this.drawRings_(r,i,C,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),H0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:zC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:om(r||dd)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),f=t.getWidth(),C=t.getMiterLimit(),x=s||Gm;this.strokeState_={lineCap:i!==void 0?i:Ky,lineDash:this.pixelRatio_===1?x:x.map(B=>B*this.pixelRatio_),lineDashOffset:(l||jm)*this.pixelRatio_,lineJoin:o!==void 0?o:Fy,lineWidth:(f!==void 0?f:NC)*this.pixelRatio_,miterLimit:C!==void 0?C:LC,strokeStyle:om(r||UC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/r,l[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const P=t.getColor();this.textFillState_={fillStyle:om(P||dd)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const P=r.getColor(),U=r.getLineCap(),N=r.getLineDash(),W=r.getLineDashOffset(),X=r.getLineJoin(),$=r.getWidth(),re=r.getMiterLimit();this.textStrokeState_={lineCap:U!==void 0?U:Ky,lineDash:N||Gm,lineDashOffset:W||jm,lineJoin:X!==void 0?X:Fy,lineWidth:$!==void 0?$:NC,miterLimit:re!==void 0?re:LC,strokeStyle:om(P||UC)}}const i=e.getFont(),s=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),f=e.getRotation(),C=e.getScaleArray(),x=e.getText(),B=e.getTextAlign(),R=e.getTextBaseline();this.textState_={font:i!==void 0?i:DU,textAlign:B!==void 0?B:zC,textBaseline:R!==void 0?R:N2},this.text_=x!==void 0?Array.isArray(x)?x.reduce((P,U,N)=>P+=N%2?" ":U,""):x:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*C[0],this.pixelRatio_*C[1]]}}}const hee=.5,VU={Point:Cee,LineString:gee,Polygon:bee,MultiPoint:_ee,MultiLineString:yee,MultiPolygon:vee,GeometryCollection:mee,Circle:fee};function dee(n,e){return parseInt(ko(n),10)-parseInt(ko(e),10)}function $6(n,e){const t=HU(n,e);return t*t}function HU(n,e){return hee*n/e}function fee(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const f=n.getBuilder(t.getZIndex(),"Circle");f.setFillStrokeStyle(s,l),f.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r)}}function q2(n,e,t,r,i,s,l,o){const f=[],C=t.getImage();if(C){let R=!0;const P=C.getImageState();P==gi.LOADED||P==gi.ERROR?R=!1:P==gi.IDLE&&C.load(),R&&f.push(C.ready())}const x=t.getFill();x&&x.loading()&&f.push(x.ready());const B=f.length>0;return B&&Promise.all(f).then(()=>i(null)),pee(n,e,t,r,s,l,o),B}function pee(n,e,t,r,i,s,l){const o=t.getGeometryFunction()(e);if(!o)return;const f=o.simplifyTransformed(r,i);if(t.getRenderer())ZU(n,f,t,e,l);else{const x=VU[f.getType()];x(n,f,t,e,l,s)}}function ZU(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,f=l.length;o<f;++o)ZU(n,l[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function mee(n,e,t,r,i,s){const l=e.getGeometriesArray();let o,f;for(o=0,f=l.length;o<f;++o){const C=VU[l[o].getType()];C(n,l[o],t,r,i,s)}}function gee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function yee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function vee(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(l||s){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,l),f.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}function Cee(n,e,t,r,i,s){const l=t.getImage(),o=t.getText(),f=o&&o.getText(),C=s&&l&&f?{}:void 0;if(l){if(l.getImageState()!=gi.LOADED)return;const x=n.getBuilder(t.getZIndex(),"Image");x.setImageStyle(l,C),x.drawPoint(e,r,i)}if(f){const x=n.getBuilder(t.getZIndex(),"Text");x.setTextStyle(o,C),x.drawText(e,r,i)}}function _ee(n,e,t,r,i,s){const l=t.getImage(),o=l&&l.getOpacity()!==0,f=t.getText(),C=f&&f.getText(),x=s&&o&&C?{}:void 0;if(o){if(l.getImageState()!=gi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(l,x),B.drawMultiPoint(e,r,i)}if(C){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(f,x),B.drawText(e,r,i)}}function bee(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,l),f.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}let xee=!1;function XU(n,e,t,r,i,s,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=xee,o.onload=function(f){if(!o.status||o.status>=200&&o.status<300){const C=e.getType();try{let x;C=="text"||C=="json"?x=o.responseText:C=="xml"?x=o.responseXML||o.responseText:C=="arraybuffer"&&(x=o.response),x?s(e.readFeatures(x,{extent:t,featureProjection:i}),e.readProjection(x)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function y9(n,e){return function(t,r,i,s,l){XU(n,e,t,r,i,(o,f)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),l!==void 0&&l()})}}function Mee(n,e){return[[-1/0,-1/0,1/0,1/0]]}function wee(n,e){return[n]}class v9{constructor(e){this.rbush_=new OU(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[ko(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const l=e[i],o=t[i],f={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};r[i]=f,this.items_[ko(o)]=f}this.rbush_.load(r)}remove(e){const t=ko(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[ko(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Ym(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return $0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Xy extends Ip{constructor(e){super(),this.projection=Ma(e.projection),this.attributions_=C9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=C9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function C9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Tf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class _0 extends Op{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class r2 extends Xy{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=PC,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ia(this.format_,"`format` must be set when `url` is set"),this.loader_=y9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Mee;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new v9:null,this.loadedExtentsRtree_=new v9,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new nm(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ko(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new _0(Tf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof vh||(this.featureChangeKeys_[e]=[ks(t,go.CHANGE,this.handleFeatureChange_,this),ks(t,ky.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof vh){const s=this.idIndex_[i];s instanceof vh?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(ia(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,l=e.length;s<l;s++){const o=e[s],f=ko(o);this.addToIndex_(f,o)&&r.push(o)}for(let s=0,l=r.length;s<l;s++){const o=r[s],f=ko(o);this.setupChangeEvents_(f,o);const C=o.getGeometry();if(C){const x=C.getExtent();t.push(x),i.push(o)}else this.nullGeometryFeatures_[f]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(Tf.ADDFEATURE))for(let s=0,l=r.length;s<l;s++)this.dispatchEvent(new _0(Tf.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Tf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Tf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(cd.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(cd.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(cl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new _0(Tf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof vh||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof vh||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),$0(this.nullGeometryFeatures_)||um(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=XL(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const l=[NaN,NaN];let o=1/0;const f=[-1/0,-1/0,1/0,1/0];return t=t||kC,this.featuresRtree_.forEachInExtent(f,function(C){if(t(C)){const x=C.getGeometry(),B=o;if(o=x instanceof vh?0:x.closestPointXY(r,i,l,o),o<B){s=C;const R=Math.sqrt(o);f[0]=r-R,f[1]=i-R,f[2]=r+R,f[3]=i+R}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=ko(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const l=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const s=t.getId();if(s!==void 0){const l=s.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new _0(Tf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ko(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&$0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let l=0,o=s.length;l<o;++l){const f=s[l];i.forEachInExtent(f,function(x){return rm(x.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _0(Tf.FEATURESLOADSTART)),this.loader_.call(this,f,t,r,x=>{--this.loadingExtentsCount_,this.dispatchEvent(new _0(Tf.FEATURESLOADEND,void 0,x))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _0(Tf.FEATURESLOADERROR))}),i.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Ym(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ko(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(cl),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),l=this.idIndex_[s];l===e?delete this.idIndex_[s]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[s]=l[0]))}return delete this.uidIndex_[t],this.hasListener(Tf.REMOVEFEATURE)&&this.dispatchEvent(new _0(Tf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ia(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(y9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Vi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Bb=[Vi.FILL],K0=[Vi.STROKE],D1=[Vi.BEGIN_PATH],_9=[Vi.CLOSE_PATH];class E_ extends $U{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let l=s.length;for(let o=0,f=e.length;o<f;o+=t)i[0]=e[o],i[1]=e[o+1],V1(r,i)&&(s[l++]=i[0],s[l++]=i[1]);return l}appendFlatLineCoordinates(e,t,r,i,s,l){const o=this.coordinates;let f=o.length;const C=this.getBufferedMaxExtent();l&&(t+=i);let x=e[t],B=e[t+1];const R=this.tmpCoordinate_;let P=!0,U,N,W;for(U=t+i;U<r;U+=i)R[0]=e[U],R[1]=e[U+1],W=T6(C,R),W!==N?(P&&(o[f++]=x,o[f++]=B,P=!1),o[f++]=R[0],o[f++]=R[1]):W===Ec.INTERSECTING?(o[f++]=R[0],o[f++]=R[1],P=!1):P=!0,x=R[0],B=R[1],N=W;return(s&&P||U===t+i)&&(o[f++]=x,o[f++]=B),f}drawCustomCoordinates_(e,t,r,i,s){for(let l=0,o=r.length;l<o;++l){const f=r[l],C=this.appendFlatLineCoordinates(e,t,f,i,!1,!1);s.push(C),t=f}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const l=e.getType(),o=e.getStride(),f=this.coordinates.length;let C,x,B,R,P;switch(l){case"MultiPolygon":C=e.getOrientedFlatCoordinates(),R=[];const U=e.getEndss();P=0;for(let N=0,W=U.length;N<W;++N){const X=[];P=this.drawCustomCoordinates_(C,P,U[N],o,X),R.push(X)}this.instructions.push([Vi.CUSTOM,f,R,e,r,U6,s]),this.hitDetectionInstructions.push([Vi.CUSTOM,f,R,e,i||r,U6,s]);break;case"Polygon":case"MultiLineString":B=[],C=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),P=this.drawCustomCoordinates_(C,0,e.getEnds(),o,B),this.instructions.push([Vi.CUSTOM,f,B,e,r,KC,s]),this.hitDetectionInstructions.push([Vi.CUSTOM,f,B,e,i||r,KC,s]);break;case"LineString":case"Circle":C=e.getFlatCoordinates(),x=this.appendFlatLineCoordinates(C,0,C.length,o,!1,!1),this.instructions.push([Vi.CUSTOM,f,x,e,r,R0,s]),this.hitDetectionInstructions.push([Vi.CUSTOM,f,x,e,i||r,R0,s]);break;case"MultiPoint":C=e.getFlatCoordinates(),x=this.appendFlatPointCoordinates(C,o),x>f&&(this.instructions.push([Vi.CUSTOM,f,x,e,r,R0,s]),this.hitDetectionInstructions.push([Vi.CUSTOM,f,x,e,i||r,R0,s]));break;case"Point":C=e.getFlatCoordinates(),this.coordinates.push(C[0],C[1]),x=this.coordinates.length,this.instructions.push([Vi.CUSTOM,f,x,e,r,void 0,s]),this.hitDetectionInstructions.push([Vi.CUSTOM,f,x,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Vi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Vi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,l=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Vi.END_GEOMETRY?l=t:s==Vi.BEGIN_GEOMETRY&&(i[2]=t,RH(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=om(r||dd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=om(r||UC);const i=e.getLineCap();t.lineCap=i!==void 0?i:Ky;const s=e.getLineDash();t.lineDash=s?s.slice():Gm;const l=e.getLineDashOffset();t.lineDashOffset=l||jm;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Fy;const f=e.getWidth();t.lineWidth=f!==void 0?f:NC;const C=e.getMiterLimit();t.miterLimit=C!==void 0?C:LC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Vi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Vi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,f=e.lineWidth,C=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!H0(e.currentLineDash,s)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=f||e.currentMiterLimit!=C)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=f,e.currentMiterLimit=C)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Vi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=QL(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;j0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class See extends E_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!V1(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Vi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Vi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let f=0,C=i.length;f<C;f+=e.getStride())(!this.maxExtent||V1(this.maxExtent,i.slice(f,f+2)))&&s.push(i[f],i[f+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Vi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Vi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Eee extends E_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Vi.MOVE_TO_LINE_TO,s,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gm,jm],D1);const o=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(o,0,o.length,f),this.hitDetectionInstructions.push(K0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gm,jm],D1);const o=e.getEnds(),f=e.getFlatCoordinates(),C=e.getStride();let x=0;for(let B=0,R=o.length;B<R;++B)x=this.drawFlatCoordinates_(f,x,o[B],C);this.hitDetectionInstructions.push(K0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(K0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(K0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(D1)}}class b9 extends E_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,l=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,f=r.length;this.instructions.push(D1),this.hitDetectionInstructions.push(D1);for(let C=0;C<f;++C){const x=r[C],B=this.coordinates.length,R=this.appendFlatLineCoordinates(e,t,x,i,!0,!o),P=[Vi.MOVE_TO_LINE_TO,B,R];this.instructions.push(P),this.hitDetectionInstructions.push(P),o&&(this.instructions.push(_9),this.hitDetectionInstructions.push(_9)),t=x}return l&&(this.instructions.push(Bb),this.hitDetectionInstructions.push(Bb)),o&&(this.instructions.push(K0),this.hitDetectionInstructions.push(K0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_FILL_STYLE,dd]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gm,jm]);const o=e.getFlatCoordinates(),f=e.getStride(),C=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,f,!1,!1);const x=[Vi.CIRCLE,C];this.instructions.push(D1,x),this.hitDetectionInstructions.push(D1,x),i.fillStyle!==void 0&&(this.instructions.push(Bb),this.hitDetectionInstructions.push(Bb)),i.strokeStyle!==void 0&&(this.instructions.push(K0),this.hitDetectionInstructions.push(K0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_FILL_STYLE,dd]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gm,jm]);const o=e.getEnds(),f=e.getOrientedFlatCoordinates(),C=e.getStride();this.drawFlatCoordinatess_(f,0,o,C),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_FILL_STYLE,dd]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Vi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gm,jm]);const o=e.getEndss(),f=e.getOrientedFlatCoordinates(),C=e.getStride();let x=0;for(let B=0,R=o.length;B<R;++B)x=this.drawFlatCoordinatess_(f,x,o[B],C);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=M1(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Bee(n,e,t,r,i){const s=[];let l=t,o=0,f=e.slice(t,2);for(;o<n&&l+i<r;){const[C,x]=f.slice(-2),B=e[l+i],R=e[l+i+1],P=Math.sqrt((B-C)*(B-C)+(R-x)*(R-x));if(o+=P,o>=n){const U=(n-o+P)/P,N=Xd(C,B,U),W=Xd(x,R,U);f.push(N,W),s.push(f),f=[N,W],o==n&&(l+=i),o=0}else if(o<n)f.push(e[l+i],e[l+i+1]),l+=i;else{const U=P-o,N=Xd(C,B,U/P),W=Xd(x,R,U/P);f.push(N,W),s.push(f),f=[N,W],o=0,l+=i}}return o>0&&s.push(f),s}function Oee(n,e,t,r,i){let s=t,l=t,o=0,f=0,C=t,x,B,R,P,U,N,W,X,$,re;for(B=t;B<r;B+=i){const te=e[B],V=e[B+1];U!==void 0&&($=te-U,re=V-N,P=Math.sqrt($*$+re*re),W!==void 0&&(f+=R,x=Math.acos((W*$+X*re)/(R*P)),x>n&&(f>o&&(o=f,s=C,l=B),f=0,C=B-i)),R=P,W=$,X=re),U=te,N=V}return f+=P,f>o?[C,B]:[s,l]}const $2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Iee extends E_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[dd]={fillStyle:dd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!i&&!s)return;const o=this.coordinates;let f=o.length;const C=e.getType();let x=null,B=e.getStride();if(l.placement==="line"&&(C=="LineString"||C=="MultiLineString"||C=="Polygon"||C=="MultiPolygon")){if(!XA(this.maxExtent,e.getExtent()))return;let R;if(x=e.getFlatCoordinates(),C=="LineString")R=[x.length];else if(C=="MultiLineString")R=e.getEnds();else if(C=="Polygon")R=e.getEnds().slice(0,1);else if(C=="MultiPolygon"){const W=e.getEndss();R=[];for(let X=0,$=W.length;X<$;++X)R.push(W[X][0])}this.beginGeometry(e,t,r);const P=l.repeat,U=P?void 0:l.textAlign;let N=0;for(let W=0,X=R.length;W<X;++W){let $;P?$=Bee(P*this.resolution,x,N,R[W],B):$=[x.slice(N,R[W])];for(let re=0,te=$.length;re<te;++re){const V=$[re];let ne=0,G=V.length;if(U==null){const fe=Oee(l.maxAngle,V,0,V.length,2);ne=fe[0],G=fe[1]}for(let fe=ne;fe<G;fe+=B)o.push(V[fe],V[fe+1]);const le=o.length;N=R[W],this.drawChars_(f,le),f=le}}this.endGeometry(t)}else{let R=l.overflow?null:[];switch(C){case"Point":case"MultiPoint":x=e.getFlatCoordinates();break;case"LineString":x=e.getFlatMidpoint();break;case"Circle":x=e.getCenter();break;case"MultiLineString":x=e.getFlatMidpoints(),B=2;break;case"Polygon":x=e.getFlatInteriorPoint(),l.overflow||R.push(x[2]/this.resolution),B=3;break;case"MultiPolygon":const te=e.getFlatInteriorPoints();x=[];for(let V=0,ne=te.length;V<ne;V+=3)l.overflow||R.push(te[V+2]/this.resolution),x.push(te[V],te[V+1]);if(x.length===0)return;B=2;break}const P=this.appendFlatPointCoordinates(x,B);if(P===f)return;if(R&&(P-f)/2!==x.length/B){let te=f/2;R=R.filter((V,ne)=>{const G=o[(te+ne)*2]===x[ne*B]&&o[(te+ne)*2+1]===x[ne*B+1];return G||--te,G})}this.saveTextStates_();const U=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,N=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,r);let W=l.padding;if(W!=R1&&(l.scale[0]<0||l.scale[1]<0)){let te=l.padding[0],V=l.padding[1],ne=l.padding[2],G=l.padding[3];l.scale[0]<0&&(V=-V,G=-G),l.scale[1]<0&&(te=-te,ne=-ne),W=[te,V,ne,G]}const X=this.pixelRatio;this.instructions.push([Vi.DRAW_IMAGE,f,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,W==R1?R1:W.map(function(te){return te*X}),U,N,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]);const $=1/X,re=U?U.slice(0):null;re&&(re[1]=dd),this.hitDetectionInstructions.push([Vi.DRAW_IMAGE,f,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[$,$],NaN,this.declutterMode_,this.declutterImageWithText_,W,re,N,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?dd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||zC,justify:t.justify,textBaseline:t.textBaseline||N2,scale:t.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,C=$2[i.textBaseline],x=this.textOffsetY_*f,B=this.text_,R=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Vi.DRAW_CHARS,e,t,C,i.overflow,o,i.maxAngle,f,x,s,R*f,B,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Vi.DRAW_CHARS,e,t,C,i.overflow,o&&dd,i.maxAngle,f,x,s,R*f,B,l,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const l=e.getFill();l?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=om(l.getColor()||dd)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const N=o.getLineDash(),W=o.getLineDashOffset(),X=o.getWidth(),$=o.getMiterLimit();s.lineCap=o.getLineCap()||Ky,s.lineDash=N?N.slice():Gm,s.lineDashOffset=W===void 0?jm:W,s.lineJoin=o.getLineJoin()||Fy,s.lineWidth=X===void 0?NC:X,s.miterLimit=$===void 0?LC:$,s.strokeStyle=om(o.getColor()||UC)}r=this.textState_;const f=e.getFont()||DU;FJ(f);const C=e.getScaleArray();r.overflow=e.getOverflow(),r.font=f,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||N2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||R1,r.scale=C===void 0?[1,1]:C;const x=e.getOffsetX(),B=e.getOffsetY(),R=e.getRotateWithView(),P=e.getKeepUpright(),U=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=R===void 0?!1:R,this.textKeepUpright_=P===void 0?!0:P,this.textRotation_=U===void 0?0:U,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ko(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+ko(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Tee={Circle:b9,Default:E_,Image:See,LineString:Eee,Polygon:b9,Text:Iee};class JU{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const l=Tee[t];s=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function kee(n,e,t,r,i,s,l,o,f,C,x,B,R=!0){let P=n[e],U=n[e+1],N=0,W=0,X=0,$=0;function re(){N=P,W=U,e+=r,P=n[e],U=n[e+1],$+=X,X=Math.sqrt((P-N)*(P-N)+(U-W)*(U-W))}do re();while(e<t-r&&$+X<s);let te=X===0?0:(s-$)/X;const V=Xd(N,P,te),ne=Xd(W,U,te),G=e-r,le=$,fe=s+o*f(C,i,x);for(;e<t-r&&$+X<fe;)re();te=X===0?0:(fe-$)/X;const pe=Xd(N,P,te),we=Xd(W,U,te);let Se=!1;if(R)if(B){const Ct=[V,ne,pe,we];AU(Ct,0,4,2,B,Ct,Ct),Se=Ct[0]>Ct[2]}else Se=V>pe;const xe=Math.PI,je=[],Me=G+r===e;e=G,X=0,$=le,P=n[e],U=n[e+1];let rt;if(Me){re(),rt=Math.atan2(U-W,P-N),Se&&(rt+=rt>0?-xe:xe);const Ct=(pe+V)/2,it=(we+ne)/2;return je[0]=[Ct,it,(fe-s)/2,rt,i],je}i=i.replace(/\n/g," ");for(let Ct=0,it=i.length;Ct<it;){re();let nt=Math.atan2(U-W,P-N);if(Se&&(nt+=nt>0?-xe:xe),rt!==void 0){let ut=nt-rt;if(ut+=ut>xe?-2*xe:ut<-xe?2*xe:0,Math.abs(ut)>l)return null}rt=nt;const Ge=Ct;let Ie=0;for(;Ct<it;++Ct){const ut=Se?it-Ct-1:Ct,Rt=o*f(C,i[ut],x);if(e+r<t&&$+X<s+Ie+Rt/2)break;Ie+=Rt}if(Ct===Ge)continue;const $e=Se?i.substring(it-Ge,it-Ct):i.substring(Ge,Ct);te=X===0?0:(s+Ie/2-$)/X;const gt=Xd(N,P,te),Dt=Xd(W,U,te);je.push([gt,Dt,Ie/2,nt,$e]),s+=Ie}return je}class RO{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(z2(),{get:(e,t)=>{if(typeof z2()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const l=t[++r];if(typeof e[s]=="function")e[s](...l);else{if(typeof l=="function"){e[s]=l(e);continue}e[s]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Pg=Qf(),b0=[],Pm=[],Rm=[],x0=[];function x9(n){return n[3].declutterBox}const M9=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function eM(n,e){return e==="start"?e=M9.test(n)?"right":"left":e==="end"&&(e=M9.test(n)?"left":"right"),$2[e]}function Pee(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Ree(n,e,t){return t%2===0&&(n+=e),n}class Dee{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=pd(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new RO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const l=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,f=this.textStates[t],C=this.pixelRatio,x=[f.scale[0]*C,f.scale[1]*C],B=f.justify?$2[f.justify]:eM(Array.isArray(e)?e[0]:e,f.textAlign||zC),R=i&&l.lineWidth?l.lineWidth:0,P=Array.isArray(e)?e:String(e).split(`
`).reduce(Pee,[]),{width:U,height:N,widths:W,heights:X,lineWidths:$}=UJ(f,P),re=U+R,te=[],V=(re+2)*x[0],ne=(N+R)*x[1],G={width:V<0?Math.floor(V):Math.ceil(V),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:te};(x[0]!=1||x[1]!=1)&&te.push("scale",x),i&&(te.push("strokeStyle",l.strokeStyle),te.push("lineWidth",R),te.push("lineCap",l.lineCap),te.push("lineJoin",l.lineJoin),te.push("miterLimit",l.miterLimit),te.push("setLineDash",[l.lineDash]),te.push("lineDashOffset",l.lineDashOffset)),r&&te.push("fillStyle",o.fillStyle),te.push("textBaseline","middle"),te.push("textAlign","center");const le=.5-B;let fe=B*re+le*R;const pe=[],we=[];let Se=0,xe=0,je=0,Me=0,rt;for(let Ct=0,it=P.length;Ct<it;Ct+=2){const nt=P[Ct];if(nt===`
`){xe+=Se,Se=0,fe=B*re+le*R,++Me;continue}const Ge=P[Ct+1]||f.font;Ge!==rt&&(i&&pe.push("font",Ge),r&&we.push("font",Ge),rt=Ge),Se=Math.max(Se,X[je]);const Ie=[nt,fe+le*W[je]+B*(W[je]-$[Me]),.5*(R+Se)+xe];fe+=W[je],i&&pe.push("strokeText",Ie),r&&we.push("fillText",Ie),++je}return Array.prototype.push.apply(te,pe),Array.prototype.push.apply(te,we),this.labels_[s]=G,G}replayTextBackground_(e,t,r,i,s,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,l,o,f,C,x,B,R,P,U,N,W){o*=R[0],f*=R[1];let X=r-o,$=i-f;const re=s+C>e?e-C:s,te=l+x>t?t-x:l,V=U[3]+re*R[0]+U[1],ne=U[0]+te*R[1]+U[2],G=X-U[3],le=$-U[0];(N||B!==0)&&(b0[0]=G,x0[0]=G,b0[1]=le,Pm[1]=le,Pm[0]=G+V,Rm[0]=Pm[0],Rm[1]=le+ne,x0[1]=Rm[1]);let fe;return B!==0?(fe=hm(pd(),r,i,1,1,B,-r,-i),Fu(fe,b0),Fu(fe,Pm),Fu(fe,Rm),Fu(fe,x0),Qm(Math.min(b0[0],Pm[0],Rm[0],x0[0]),Math.min(b0[1],Pm[1],Rm[1],x0[1]),Math.max(b0[0],Pm[0],Rm[0],x0[0]),Math.max(b0[1],Pm[1],Rm[1],x0[1]),Pg)):Qm(Math.min(G,G+V),Math.min(le,le+ne),Math.max(G,G+V),Math.max(le,le+ne),Pg),P&&(X=Math.round(X),$=Math.round($)),{drawImageX:X,drawImageY:$,drawImageW:re,drawImageH:te,originX:C,originY:x,declutterBox:{minX:Pg[0],minY:Pg[1],maxX:Pg[2],maxY:Pg[3],value:W},canvasTransform:fe,scale:R}}replayImageOrLabel_(e,t,r,i,s,l,o){const f=!!(l||o),C=i.declutterBox,x=o?o[2]*i.scale[0]/2:0;return C.minX-x<=t[0]&&C.maxX+x>=0&&C.minY-x<=t[1]&&C.maxY+x>=0&&(f&&this.replayTextBackground_(e,b0,Pm,Rm,x0,l,o),zJ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Fu(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],l=this.createLabel(e,t,i,r),o=this.strokeStates[r],f=this.pixelRatio,C=eM(Array.isArray(e)?e[0]:e,s.textAlign||zC),x=$2[s.textBaseline||N2],B=o&&o.lineWidth?o.lineWidth:0,R=l.width/f-2*s.scale[0],P=C*R+2*(.5-C)*B,U=x*l.height/f+2*(.5-x)*B;return{label:l,anchorX:P,anchorY:U}}execute_(e,t,r,i,s,l,o,f){const C=this.zIndexContext_;let x;this.pixelCoordinates_&&H0(r,this.renderedTransform_)?x=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),x=Q0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),LZ(this.renderedTransform_,r));let B=0;const R=i.length;let P=0,U,N,W,X,$,re,te,V,ne,G,le,fe,pe,we=0,Se=0;const xe=this.coordinateCache_,je=this.viewRotation_,Me=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,rt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:je},Ct=this.instructions!=i||this.overlaps?0:200;let it,nt,Ge,Ie;for(;B<R;){const $e=i[B];switch($e[0]){case Vi.BEGIN_GEOMETRY:it=$e[1],Ie=$e[3],it.getGeometry()?o!==void 0&&!XA(o,Ie.getExtent())?B=$e[2]+1:++B:B=$e[2],C&&(C.zIndex=$e[4]);break;case Vi.BEGIN_PATH:we>Ct&&(this.fill_(e),we=0),Se>Ct&&(e.stroke(),Se=0),!we&&!Se&&(e.beginPath(),$=NaN,re=NaN),++B;break;case Vi.CIRCLE:P=$e[1];const Dt=x[P],ut=x[P+1],Rt=x[P+2],St=x[P+3],Ke=Rt-Dt,Pe=St-ut,Re=Math.sqrt(Ke*Ke+Pe*Pe);e.moveTo(Dt+Re,ut),e.arc(Dt,ut,Re,0,2*Math.PI,!0),++B;break;case Vi.CLOSE_PATH:e.closePath(),++B;break;case Vi.CUSTOM:P=$e[1],U=$e[2];const Ye=$e[3],vt=$e[4],yt=$e[5];rt.geometry=Ye,rt.feature=it,B in xe||(xe[B]=[]);const Et=xe[B];yt?yt(x,P,U,2,Et):(Et[0]=x[P],Et[1]=x[P+1],Et.length=2),C&&(C.zIndex=$e[6]),vt(Et,rt),++B;break;case Vi.DRAW_IMAGE:P=$e[1],U=$e[2],ne=$e[3],N=$e[4],W=$e[5];let Zt=$e[6];const Ut=$e[7],An=$e[8],hr=$e[9],Vt=$e[10];let Vn=$e[11];const Pn=$e[12];let Dn=$e[13];X=$e[14]||"declutter";const Ln=$e[15];if(!ne&&$e.length>=20){G=$e[19],le=$e[20],fe=$e[21],pe=$e[22];const jt=this.drawLabelWithPointPlacement_(G,le,fe,pe);ne=jt.label,$e[3]=ne;const Gt=$e[23];N=(jt.anchorX-Gt)*this.pixelRatio,$e[4]=N;const nn=$e[24];W=(jt.anchorY-nn)*this.pixelRatio,$e[5]=W,Zt=ne.height,$e[6]=Zt,Dn=ne.width,$e[13]=Dn}let Ir;$e.length>25&&(Ir=$e[25]);let rr,Yn,We;$e.length>17?(rr=$e[16],Yn=$e[17],We=$e[18]):(rr=R1,Yn=null,We=null),Vt&&Me?Vn+=je:!Vt&&!Me&&(Vn-=je);let he=0;for(;P<U;P+=2){if(Ir&&Ir[he++]<Dn/this.pixelRatio)continue;const jt=this.calculateImageOrLabelDimensions_(ne.width,ne.height,x[P],x[P+1],Dn,Zt,N,W,An,hr,Vn,Pn,s,rr,!!Yn||!!We,it),Gt=[e,t,ne,jt,Ut,Yn,We];if(f){let nn,On,Rn;if(Ln){const or=U-P;if(!Ln[or]){Ln[or]={args:Gt,declutterMode:X};continue}const on=Ln[or];nn=on.args,On=on.declutterMode,delete Ln[or],Rn=x9(nn)}let dr,Tr;if(nn&&(On!=="declutter"||!f.collides(Rn))&&(dr=!0),(X!=="declutter"||!f.collides(jt.declutterBox))&&(Tr=!0),On==="declutter"&&X==="declutter"){const or=dr&&Tr;dr=or,Tr=or}dr&&(On!=="none"&&f.insert(Rn),this.replayImageOrLabel_.apply(this,nn)),Tr&&(X!=="none"&&f.insert(jt.declutterBox),this.replayImageOrLabel_.apply(this,Gt))}else this.replayImageOrLabel_.apply(this,Gt)}++B;break;case Vi.DRAW_CHARS:const me=$e[1],et=$e[2],bt=$e[3],Yt=$e[4];pe=$e[5];const Jt=$e[6],ir=$e[7],Xe=$e[8];fe=$e[9];const ae=$e[10];G=$e[11],Array.isArray(G)&&(G=G.reduce(Ree,"")),le=$e[12];const ve=[$e[13],$e[13]];X=$e[14]||"declutter";const p=$e[15],Ne=this.textStates[le],Ve=Ne.font,Te=[Ne.scale[0]*ir,Ne.scale[1]*ir];let lt;Ve in this.widths_?lt=this.widths_[Ve]:(lt={},this.widths_[Ve]=lt);const ct=PO(x,me,et,2),Ft=Math.abs(Te[0])*A9(Ve,G,lt);if(Yt||Ft<=ct){const jt=this.textStates[le].textAlign,Gt=(ct-Ft)*eM(G,jt),nn=kee(x,me,et,2,G,Gt,Jt,Math.abs(Te[0]),A9,Ve,lt,Me?0:this.viewRotation_,p);e:if(nn){const On=[];let Rn,dr,Tr,or,on;if(fe)for(Rn=0,dr=nn.length;Rn<dr;++Rn){on=nn[Rn],Tr=on[4],or=this.createLabel(Tr,le,"",fe),N=on[2]+(Te[0]<0?-ae:ae),W=bt*or.height+(.5-bt)*2*ae*Te[1]/Te[0]-Xe;const ti=this.calculateImageOrLabelDimensions_(or.width,or.height,on[0],on[1],or.width,or.height,N,W,0,0,on[3],ve,!1,R1,!1,it);if(f&&X==="declutter"&&f.collides(ti.declutterBox))break e;On.push([e,t,or,ti,1,null,null])}if(pe)for(Rn=0,dr=nn.length;Rn<dr;++Rn){on=nn[Rn],Tr=on[4],or=this.createLabel(Tr,le,pe,""),N=on[2],W=bt*or.height-Xe;const ti=this.calculateImageOrLabelDimensions_(or.width,or.height,on[0],on[1],or.width,or.height,N,W,0,0,on[3],ve,!1,R1,!1,it);if(f&&X==="declutter"&&f.collides(ti.declutterBox))break e;On.push([e,t,or,ti,1,null,null])}f&&X!=="none"&&f.load(On.map(x9));for(let ti=0,li=On.length;ti<li;++ti)this.replayImageOrLabel_.apply(this,On[ti])}}++B;break;case Vi.END_GEOMETRY:if(l!==void 0){it=$e[1];const jt=l(it,Ie,X);if(jt)return jt}++B;break;case Vi.FILL:Ct?we++:this.fill_(e),++B;break;case Vi.MOVE_TO_LINE_TO:for(P=$e[1],U=$e[2],nt=x[P],Ge=x[P+1],e.moveTo(nt,Ge),$=nt+.5|0,re=Ge+.5|0,P+=2;P<U;P+=2)nt=x[P],Ge=x[P+1],te=nt+.5|0,V=Ge+.5|0,(P==U-2||te!==$||V!==re)&&(e.lineTo(nt,Ge),$=te,re=V);++B;break;case Vi.SET_FILL_STYLE:this.alignAndScaleFill_=$e[2],we&&(this.fill_(e),we=0,Se&&(e.stroke(),Se=0)),e.fillStyle=$e[1],++B;break;case Vi.SET_STROKE_STYLE:Se&&(e.stroke(),Se=0),this.setStrokeStyle_(e,$e),++B;break;case Vi.STROKE:Ct?Se++:e.stroke(),++B;break;default:++B;break}}we&&this.fill_(e),Se&&e.stroke()}execute(e,t,r,i,s,l){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,l)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const B1=["Polygon","Circle","LineString","Image","Text","Default"],V2=["Image","Text"],Kee=B1.filter(n=>!V2.includes(n));class ez{constructor(e,t,r,i,s,l,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=pd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const l in s){const o=s[l];i[l]=new Dee(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,l){i=Math.round(i);const o=i*2+1,f=hm(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),C=!this.hitDetectionContext_;C&&(this.hitDetectionContext_=SA(o,o));const x=this.hitDetectionContext_;x.canvas.width!==o||x.canvas.height!==o?(x.canvas.width=o,x.canvas.height=o):C||x.clearRect(0,0,o,o);let B;this.renderBuffer_!==void 0&&(B=Qf(),hC(B,e),j0(B,t*(this.renderBuffer_+i),B));const R=Fee(i);let P;function U(V,ne,G){const le=x.getImageData(0,0,o,o).data;for(let fe=0,pe=R.length;fe<pe;fe++)if(le[R[fe]]>0){if(!l||G==="none"||P!=="Image"&&P!=="Text"||l.includes(V)){const we=(R[fe]-3)/4,Se=i-we%o,xe=i-(we/o|0),je=s(V,ne,Se*Se+xe*xe);if(je)return je}x.clearRect(0,0,o,o);break}}const N=Object.keys(this.executorsByZIndex_).map(Number);N.sort(Am);let W,X,$,re,te;for(W=N.length-1;W>=0;--W){const V=N[W].toString();for($=this.executorsByZIndex_[V],X=B1.length-1;X>=0;--X)if(P=B1[X],re=$[P],re!==void 0&&(te=re.executeHitDetection(x,f,r,U,B),te))return te}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],l=t[3],o=[r,i,r,l,s,l,s,i];return Q0(o,0,8,2,e,o),o}isEmpty(){return $0(this.executorsByZIndex_)}execute(e,t,r,i,s,l,o){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(o?PH:Am),l=l||B1;const C=B1.length;for(let x=0,B=f.length;x<B;++x){const R=f[x].toString(),P=this.executorsByZIndex_[R];for(let U=0,N=l.length;U<N;++U){const W=l[U],X=P[W];if(X!==void 0){const $=o===null?void 0:X.getZIndexContext(),re=$?$.getContext():e,te=this.maxExtent_&&W!=="Image"&&W!=="Text";if(te&&(re.save(),this.clip(re,r)),!$||W==="Text"||W==="Image"?X.execute(re,t,r,i,s,o):$.pushFunction(V=>X.execute(V,t,r,i,s,o)),te&&re.restore(),$){$.offset();const V=f[x]*C+B1.indexOf(W);this.deferredZIndexContexts_[V]||(this.deferredZIndexContexts_[V]=[]),this.deferredZIndexContexts_[V].push($)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Am);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const tM={};function Fee(n){if(tM[n]!==void 0)return tM[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let l=0;l<=n;++l){const o=s*s+l*l;if(o>t)break;let f=r[o];f||(f=[],r[o]=f),f.push(((n+s)*e+(n+l))*4+3),s>0&&f.push(((n-s)*e+(n+l))*4+3),l>0&&(f.push(((n+s)*e+(n-l))*4+3),s>0&&f.push(((n-s)*e+(n-l))*4+3))}const i=[];for(let s=0,l=r.length;s<l;++s)r[s]&&i.push(...r[s]);return tM[n]=i,i}const nf=.5;function tz(n,e,t,r,i,s,l,o,f){const C=f?iO(i):i,x=n[0]*nf,B=n[1]*nf,R=SA(x,B);R.imageSmoothingEnabled=!1;const P=R.canvas,U=new cee(R,nf,i,null,l,o,f?v_(KZ(),f):null),N=t.length,W=Math.floor((256*256*256-1)/N),X={};for(let re=1;re<=N;++re){const te=t[re-1],V=te.getStyleFunction()||r;if(!V)continue;let ne=V(te,s);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const le=(re*W).toString(16).padStart(7,"#00000");for(let fe=0,pe=ne.length;fe<pe;++fe){const we=ne[fe],Se=we.getGeometryFunction()(te);if(!Se||!XA(C,Se.getExtent()))continue;const xe=we.clone(),je=xe.getFill();je&&je.setColor(le);const Me=xe.getStroke();Me&&(Me.setColor(le),Me.setLineDash(null)),xe.setText(void 0);const rt=we.getImage();if(rt){const Ge=rt.getImageSize();if(!Ge)continue;const Ie=SA(Ge[0],Ge[1],void 0,{alpha:!1}),$e=Ie.canvas;Ie.fillStyle=le,Ie.fillRect(0,0,$e.width,$e.height),xe.setImage(new G2({img:$e,anchor:rt.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:rt.getOrigin(),opacity:1,size:rt.getSize(),scale:rt.getScale(),rotation:rt.getRotation(),rotateWithView:rt.getRotateWithView()}))}const Ct=xe.getZIndex()||0;let it=X[Ct];it||(it={},X[Ct]=it,it.Polygon=[],it.Circle=[],it.LineString=[],it.Point=[]);const nt=Se.getType();if(nt==="GeometryCollection"){const Ge=Se.getGeometriesArrayRecursive();for(let Ie=0,$e=Ge.length;Ie<$e;++Ie){const gt=Ge[Ie];it[gt.getType().replace("Multi","")].push(gt,xe)}}else it[nt.replace("Multi","")].push(Se,xe)}}const $=Object.keys(X).map(Number).sort(Am);for(let re=0,te=$.length;re<te;++re){const V=X[$[re]];for(const ne in V){const G=V[ne];for(let le=0,fe=G.length;le<fe;le+=2){U.setStyle(G[le+1]);for(let pe=0,we=e.length;pe<we;++pe)U.setTransform(e[pe]),U.drawGeometry(G[le])}}}return R.getImageData(0,0,P.width,P.height)}function nz(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*nf),s=Math.floor(Math.round(n[1])*nf),l=(wA(i,0,t.width-1)+wA(s,0,t.height-1)*t.width)*4,o=t.data[l],f=t.data[l+1],x=t.data[l+2]+256*(f+256*o),B=Math.floor((256*256*256-1)/e.length);x&&x%B===0&&r.push(e[x/B-1])}return r}const Lee=5;class Uee extends g_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Lee}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return _o()}getData(e){return null}prepareFrame(e){return _o()}renderFrame(e,t){return _o()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===gi.LOADED||t.getState()===gi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=gi.LOADED&&t!=gi.ERROR&&e.addEventListener(go.CHANGE,this.boundHandleImageChange_),t==gi.IDLE&&(e.load(),t=e.getState()),t==gi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const w9=[];let Ay=null;function zee(){Ay=SA(1,1,void 0,{willReadFrequently:!0})}class DO extends Uee{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=pd(),this.pixelTransform=pd(),this.inversePixelTransform=pd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){Ay||zee(),Ay.clearRect(0,0,1,1);let i;try{Ay.drawImage(e,t,r,1,1,0,0,1,1),i=Ay.getImageData(0,0,1,1).data}catch{return Ay=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,l;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&H0(Dy(e.style.backgroundColor),Dy(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&jZ(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",l=SA();const f=l.canvas;s.appendChild(f),o=f.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=l}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Hm(r),s=Gx(r),l=Nx(r),o=zx(r);Fu(t.coordinateToPixelTransform,i),Fu(t.coordinateToPixelTransform,s),Fu(t.coordinateToPixelTransform,l),Fu(t.coordinateToPixelTransform,o);const f=this.inversePixelTransform;Fu(f,i),Fu(f,s),Fu(f,l),Fu(f,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,l=e.pixelRatio,o=Math.round(Ls(r)/i*l),f=Math.round(Uu(r)/i*l);hm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,s,-o/2,-f/2),lU(this.inversePixelTransform,this.pixelTransform);const C=GZ(this.pixelTransform);if(this.useContainer(t,C,this.getBackground(e)),!this.containerReused){const x=this.context.canvas;x.width!=o||x.height!=f?(x.width=o,x.height=f):this.context.clearRect(0,0,o,f),C!==x.style.transform&&(x.style.transform=C)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new WU(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(zf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(zf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new RO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(zf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(zf.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,l,o){const f=s/2,C=l/2,x=i/t,B=-x,R=-e[0]+o,P=-e[1];return hm(this.tempTransform,f,C,x,B,-r,R,P)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Nee extends DO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Qf(),this.wrappedRenderedExtent_=Qf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,l=s.center,o=s.resolution,f=s.projection,C=s.rotation,x=f.getExtent(),B=this.getLayer().getSource(),R=this.getLayer().getDeclutter(),P=t.pixelRatio,U=t.viewHints,N=!(U[tA.ANIMATING]||U[tA.INTERACTING]),W=this.context,X=Math.round(Ls(i)/o*P),$=Math.round(Uu(i)/o*P),re=B.getWrapX()&&f.canWrapX(),te=re?Ls(x):null,V=re?Math.ceil((i[2]-x[2])/te)+1:1;let ne=re?Math.floor((i[0]-x[0])/te):0;do{let G=this.getRenderTransform(l,o,0,P,X,$,ne*te);t.declutter&&(G=G.slice(0)),e.execute(W,[W.canvas.width,W.canvas.height],G,C,N,r===void 0?B1:r?V2:Kee,r?R&&t.declutter[R]:void 0)}while(++ne<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=SA(this.context.canvas.width,this.context.canvas.height,w9))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,__(this.context),w9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(zf.PRERENDER)||this.getLayer().hasListener(zf.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const f=im(r.extent);o=XA(f,e.extent),this.clipped_=o&&!rm(f,e.extent),this.clipped_&&this.clipUnrotated(s,e,f)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,f=this.wrappedRenderedExtent_,C=this.getLayer(),x=[],B=r[0]*nf,R=r[1]*nf;x.push(this.getRenderTransform(i,s,l,nf,B,R,0).slice());const P=C.getSource(),U=o.getExtent();if(P.getWrapX()&&o.canWrapX()&&!rm(U,f)){let N=f[0];const W=Ls(U);let X=0,$;for(;N<U[0];)--X,$=W*X,x.push(this.getRenderTransform(i,s,l,nf,B,R,$).slice()),N+=W;for(X=0,N=f[2];N>U[2];)++X,$=W*X,x.push(this.getRenderTransform(i,s,l,nf,B,R,$).slice()),N-=W}this.hitDetectionImageData_=tz(r,x,this.renderedFeatures_,C.getStyleFunction(),f,s,l,$6(s,this.renderedPixelRatio_),null)}t(nz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,f=this.getLayer(),C={},x=function(R,P,U){const N=ko(R),W=C[N];if(W){if(W!==!0&&U<W.distanceSq){if(U===0)return C[N]=!0,s.splice(s.lastIndexOf(W),1),i(R,f,P);W.geometry=P,W.distanceSq=U}}else{if(U===0)return C[N]=!0,i(R,f,P);s.push(C[N]={feature:R,layer:f,geometry:P,distanceSq:U,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,r,x,B?t.declutter?.[B]?.all().map(R=>R.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[tA.ANIMATING],s=e.viewHints[tA.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,C=e.viewState,x=C.projection,B=C.resolution,R=e.pixelRatio,P=t.getRevision(),U=t.getRenderBuffer();let N=t.getRenderOrder();N===void 0&&(N=dee);const W=C.center.slice(),X=j0(f,U*B),$=X.slice(),re=[X.slice()],te=x.getExtent();if(r.getWrapX()&&x.canWrapX()&&!rm(te,e.extent)){const je=Ls(te),Me=Math.max(Ls(X)/2,je);X[0]=te[0]-Me,X[2]=te[2]+Me,JB(W,x);const rt=ZL(re[0],x);rt[0]<te[0]&&rt[2]<te[2]?re.push([rt[0]+je,rt[1],rt[2]+je,rt[3]]):rt[0]>te[0]&&rt[2]>te[2]&&re.push([rt[0]-je,rt[1],rt[2]-je,rt[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==P&&this.renderedRenderOrder_==N&&this.renderedFrameDeclutter_===!!e.declutter&&rm(this.wrappedRenderedExtent_,X))return H0(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=W,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new JU(HU(B,R),X,B,R);let ne;for(let je=0,Me=re.length;je<Me;++je)r.loadFeatures(re[je],B,x);const G=$6(B,R);let le=!0;const fe=(je,Me)=>{let rt;const Ct=je.getStyleFunction()||t.getStyleFunction();if(Ct&&(rt=Ct(je,B)),rt){const it=this.renderFeature(je,G,rt,V,ne,this.getLayer().getDeclutter(),Me);le=le&&!it}},pe=iO(X),we=r.getFeaturesInExtent(pe);N&&we.sort(N);for(let je=0,Me=we.length;je<Me;++je)fe(we[je],je);this.renderedFeatures_=we,this.ready=le;const Se=V.finish(),xe=new ez(X,B,R,r.getOverlaps(),Se,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=P,this.renderedRenderOrder_=N,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=$,this.wrappedRenderedExtent_=X,this.renderedCenter_=W,this.renderedProjection_=x,this.renderedPixelRatio_=R,this.replayGroup_=xe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,l,o){if(!r)return!1;let f=!1;if(Array.isArray(r))for(let C=0,x=r.length;C<x;++C)f=q2(i,e,r[C],t,this.boundHandleStyleImageChange_,s,l,o)||f;else f=q2(i,e,r,t,this.boundHandleStyleImageChange_,s,l,o);return f}}class KO extends kO{constructor(e){super(e)}createRenderer(){return new Nee(this)}}class Gee extends OO{constructor(e,t,r,i,s){const l=s!==void 0?gi.IDLE:gi.LOADED;super(e,t,r,l),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=gi.ERROR):this.state=gi.LOADED,this.changed()}load(){this.state==gi.IDLE&&(this.state=gi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class B_ extends m_{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(go.CHANGE)}release(){this.setState(Ur.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ur.EMPTY){if(this.state!==Ur.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){_o()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:JL(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class rz extends B_{constructor(e,t,r,i,s,l){super(e,t,l),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Ur.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ur.ERROR,this.unlistenImage_(),this.image_=jee(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Ur.LOADED:this.state=Ur.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Ur.ERROR&&(this.state=Ur.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ur.IDLE&&(this.state=Ur.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=IJ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function jee(){const n=SA(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const mh={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Wee extends Ip{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+dX,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(mh.ELEMENT,this.handleElementChanged),this.addChangeListener(mh.MAP,this.handleMapChanged),this.addChangeListener(mh.OFFSET,this.handleOffsetChanged),this.addChangeListener(mh.POSITION,this.handlePositionChanged),this.addChangeListener(mh.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(mh.ELEMENT)}getId(){return this.id}getMap(){return this.get(mh.MAP)||null}getOffset(){return this.get(mh.OFFSET)}getPosition(){return this.get(mh.POSITION)}getPositioning(){return this.get(mh.POSITIONING)}handleElementChanged(){bU(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),cl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ks(e,Lm.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(mh.ELEMENT,e)}setMap(e){this.set(mh.MAP,e)}setOffset(e){this.set(mh.OFFSET,e)}setPosition(e){this.set(mh.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(mh.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[pX(i),mX(i)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!rm(r,s)){const o=s[0]-r[0],f=r[2]-s[2],C=s[1]-r[1],x=r[3]-s[3],B=[0,0];if(o<0?B[0]=o-l:f<0&&(B[0]=Math.abs(f)+l),C<0?B[1]=C-l:x<0&&(B[1]=Math.abs(x)+l),B[0]!==0||B[1]!==0){const R=t.getView().getCenterInternal(),P=t.getPixelFromCoordinateInternal(R);if(!P)return;const U=[P[0]+B[0],P[1]+B[1]],N=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(U),duration:N.duration,easing:N.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(mh.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=`${e[0]+i[0]}px`,o=`${e[1]+i[1]}px`;let f="0%",C="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?f="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(f="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?C="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(C="-50%");const x=`translate(${f}, ${C}) translate(${l}, ${o})`;this.rendered.transform_!=x&&(this.rendered.transform_=x,r.transform=x)}getOptions(){return this.options}}class FO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Rg(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new FO(n,e,t,r)}const S9=[];class Qee extends B_{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=SA(1,1,S9)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=ko(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(__(this.context_),S9.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let iz=class extends B_{constructor(e,t,r,i,s,l){super(e,t,l),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Ur.IDLE&&(this.setState(Ur.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Ur.ERROR)}setFeatures(e){this.features_=e,this.setState(Ur.LOADED)}setLoader(e){this.loader_=e}};const oz="https://api.mapbox.com";function LO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Yee(n,e,t){if(typeof n=="string")return[{id:"default",url:E9(n,e,t)}];for(const r of n)r.url=E9(r.url,e,t);return n}function E9(n,e,t){const r=LO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${oz}/styles/v1/${s}/sprite?access_token=${e}`}function H2(n,e){const t=LO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${oz}/styles/v1/${i}?&access_token=${e}`}const qee=["a","b","c","d"];function i2(n,e,t,r){const i=new URL(n,r||location.href),s=LO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return qee.map(l=>`https://${l}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const vp=Object.freeze({}),B9={},O9={};let $ee=0;function UO(n){return n.id||(n.id=$ee++),n.id}function Vee(n,e){return UO(n)+"."+ko(e)}function sz(n){let e=B9[n.id];return e||(e={},B9[UO(n)]=e),e}function Hee(n){let e=O9[n.id];return e||(e={},O9[UO(n)]=e),e}function nM(n){return n*Math.PI/180}const cm=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function i3(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function zO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Hv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const Dg={};function Ly(n,e,t={},r){if(e in Dg)return r&&(r.url=Dg[e][0].url),Dg[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=function(f){return delete Dg[e],Promise.reject(new Error("Error fetching source "+e))},l=function(f){return delete Dg[e],f.ok?f.json():Promise.reject(new Error("Error fetching source "+e))},o=Py(()=>i).then(f=>f instanceof Response?(r&&(r.url=f.url),l(f)):(f instanceof Request||(f=new Request(f)),f.headers.get("Accept")||f.headers.set("Accept","application/json"),r&&(r.url=f.url),fetch(f).then(l).catch(s))).catch(s);return Dg[e]=[i,o],o}function az(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=H2(n,e.accessToken),Ly("Style",n,e);else return Promise.resolve(n)}const I9={};function lz(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=I9[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,f)=>{const C=t.transformRequest&&t.transformRequest(f,"Tiles")||f;if(o instanceof iz)o.setLoader((x,B,R)=>{const P=function(U){U.arrayBuffer().then(N=>{const X=o.getFormat().readFeatures(N,{extent:x,featureProjection:R});o.setFeatures(X)})};Py(()=>C).then(U=>{if(U instanceof Response)return P(U);fetch(U).then(P).catch(N=>o.setState(Ur.ERROR))}).catch(U=>o.setState(Ur.ERROR))});else{const x=o.getImage();Py(()=>C).then(B=>{if(typeof B=="string"){x.src=B;return}const R=P=>P.blob().then(U=>{const N=URL.createObjectURL(U);x.addEventListener("load",()=>URL.revokeObjectURL(N)),x.addEventListener("error",()=>URL.revokeObjectURL(N)),x.src=N});if(B instanceof Response)return R(B);fetch(B).then(R).catch(P=>o.setState(Ur.ERROR))}).catch(B=>o.setState(Ur.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=i2(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const f={};i=Ly("Source",o[0],t,f).then(function(C){return C.tiles=C.tiles.map(function(x){return C.scheme==="tms"&&(x=x.replace("{y}","{-y}")),i2(x,t.accessToken,t.accessTokenParam||"access_token",f.url)[0]}),Promise.resolve({tileJson:C,tileLoadFunction:s})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),i2(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s})):i=Promise.reject(new Error("source has no `tiles` nor `url`"));I9[r]=i}return i}function T9(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=i3(i[0],i[1]),l=s.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,i[0],i[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const f=o.data;for(let C=0,x=o.width;C<x;++C)for(let B=0,R=o.height;B<R;++B){const P=(B*x+C)*4;f[P+3]>0&&l.arc(C,B,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),s}function Zee(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function k9(n,e,t){const r=i3(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),l=s.data;for(let o=0,f=s.width;o<f;++o)for(let C=0,x=s.height;C<x;++C){const B=(C*f+o)*4,R=l[B+3]/255,P=.75,U=.1,N=Zee(P-U,P+U,R);N>0?(l[B+0]=Math.round(255*t.r*N),l[B+1]=Math.round(255*t.g*N),l[B+2]=Math.round(255*t.b*N),l[B+3]=Math.round(255*N)):l[B+3]=0}return i.putImageData(s,0,0),r}const Xee=Array(256).join(" ");function V6(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=Xee.slice(0,Math.round(e/.1));for(let s=0,l=r.length;s<l;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let rM;function Az(){return rM||(rM=i3(1,1).getContext("2d")),rM}function y1(n,e){return Az().measureText(n).width+(n.length-1)*e}const Z2={};E1.on("propertychange",()=>{for(const n in Z2)delete Z2[n]});function H6(n,e,t,r){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let f=0,C=l.length;f<C;++f)o.push(H6(l[f],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=Z2[i];if(!s){const l=n.split(" ");if(l.length>1){const o=Az();o.font=e;const C=o.measureText("M").width*t;let x="";const B=[];for(let R=0,P=l.length;R<P;++R){const U=l[R],N=x+(x?" ":"")+U;y1(N,r)<=C?x=N:(x&&B.push(x),x=U)}x&&B.push(x);for(let R=0,P=B.length;R<P&&P>1;++R){const U=B[R];if(y1(U,r)<C*.35){const N=R>0?y1(B[R-1],r):1/0,W=R<P-1?y1(B[R+1],r):1/0;B.splice(R,1),P-=1,N<W?(B[R-1]+=" "+U,R-=1):B[R]=U+" "+B[R]}}for(let R=0,P=B.length-1;R<P;++R){const U=B[R],N=B[R+1];if(y1(U,r)>C*.7&&y1(N,r)<C*.6){const W=U.split(" "),X=W.pop();y1(X,r)<C*.2&&(B[R]=W.join(" "),B[R+1]=X+" "+N),P-=1}}s=B.join(`
`)}else s=n;s=V6(s,r),Z2[i]=s}return s}const Jee=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],P9={};function ete(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let r=0,i=n.length;r<i;++r){const s=n[r];if(s in P9)continue;P9[s]=!0;const o=E6(s,16).split(" ");t||(t=[]),t.push([o.slice(3).join(" ").replace(/"/g,""),o[1],o[0]])}return t&&(async()=>{await document.fonts.ready;for(let r=0,i=t.length;r<i;++r){const s=t[r],l=s[0];if(Jee.includes(l))continue;const o=s[1],f=s[2];if(!(await document.fonts.load(`${f} ${o} 16px "${l}"`)).some(x=>x.family.replace(/^['"]|['"]$/g,"").toLowerCase()===l.toLowerCase()&&x.weight==o&&x.style===f)){const x=e.replace("{font-family}",l.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",l.replace(/ /g,"+")).replace("{fontweight}",o).replace("{-fontstyle}",f.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",f);if(!document.querySelector('link[href="'+x+'"]')){const B=document.createElement("link");B.href=x,B.rel="stylesheet",document.head.appendChild(B)}}}})(),n}const tte={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},nte={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},rte=function(n,e){const t=Tx(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},sf={zoom:0,distanceFromCenter:0};rf.register(Ex,{...rf.definitions,pitch:[{kind:"number"},[],n=>sf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>sf.distanceFromCenter||0]});let Ob,iM;function Si(n,e,t,r,i,s){const l=n.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[l]||(i[l]={});const o=i[l];if(!o[t]){let f=(n[e]||vp)[t];const C=F$[`${e}_${n.type}`][t];f===void 0&&(f=C.default);let x=Yy(f);if(!x&&Qy(f)&&(f=zB(f,C),x=!0),x){const B=rte(f,C);o[t]=B.evaluate.bind(B)}else C.type=="color"&&(f=Fa.parse(f)),o[t]=function(){return f}}return o[t](sf,r,s)}function R9(n,e,t,r){return Si(n,"layout",`${t}-allow-overlap`,e,r)?Si(n,"layout",`${t}-ignore-placement`,e,r)?"none":"obstacle":"declutter"}function ite(n,e,t,r){if(r||console.warn("No filterCache provided to evaluateFilter()"),!(n in r))try{r[n]=i$(e).filter}catch(i){console.warn("Filter will evaluate to false: "+i.message),r[n]=function(){return!1}}return r[n](sf,t)}function E0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const ote=/\{[^{}}]*\}/g;function oM(n,e){return n.replace(ote,function(t){return e[t.slice(1,-1)]||""})}function D9(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const ste={};function ate(n,e,t,r=cm,i=void 0,s=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");ste[Vee(e,n)]=Array.from(arguments);const f={};(typeof s=="string"||s instanceof Request||s instanceof Response||s instanceof Promise)&&(s={default:s});for(const V in s){const ne=s[V];Py(()=>ne).then(async G=>{let le;if(typeof Image<"u"){const fe=new Image;if(typeof G=="string")fe.crossOrigin="anonymous",fe.src=G;else{let pe;G instanceof Request?pe=await fetch(G):G instanceof Response&&(pe=G);const we=await pe.blob();le=URL.createObjectURL(we),fe.src=le}fe.addEventListener("load",function pe(){fe.removeEventListener("load",pe),f[V]={image:fe,size:[fe.width,fe.height]},n.changed(),le&&URL.revokeObjectURL(le)}),fe.addEventListener("error",function pe(){URL.revokeObjectURL(le),fe.removeEventListener("error",pe)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const fe=self;fe.postMessage({action:"loadImage",src:G}),fe.addEventListener("message",function(we){we.data.action==="imageLoaded"&&we.data.src===G&&(f[V]={image:we.data.image,size:[we.data.image.width,we.data.image.height]})})}})}const C=_B(e.layers),x={},B=[],R={},P={},U=sz(e),N=Hee(e);let W;for(let V=0,ne=C.length;V<ne;++V){const G=C[V],le=G.id;if(typeof t=="string"&&G.source==t||Array.isArray(t)&&t.indexOf(le)!==-1){const fe=G["source-layer"];if(W){if(G.source!==W)throw new Error(`Layer "${le}" does not use source "${W}`)}else{W=G.source;const we=e.sources[W];if(!we)throw new Error(`Source "${W}" is not defined`);const Se=we.type;if(Se!=="vector"&&Se!=="geojson")throw new Error(`Source "${W}" is not of type "vector" or "geojson", but "${Se}"`)}let pe=x[fe];pe||(pe=[],x[fe]=pe),pe.push({layer:G,index:V}),B.push(le)}}const X=new D0,$=new zm,re=[],te=function(V,ne,G){const le=n.getSource?.()?.format_?.layerName_??"mvt:layer",fe=V.getProperties(),pe=x[fe[le]];if(!pe)return;let we=r.indexOf(ne);we==-1&&(we=zO(ne,r)),sf.zoom=we,sf.distanceFromCenter=0;const Se=V.getGeometry(),xe=tte[Se.getType()],je=n.get("map");if(je&&je instanceof n3&&xe===1){const it=je.getSize();if(it){const nt=je.getView().getCenter(),Ge=af(Se.getExtent());sf.distanceFromCenter=rZ(nt,Ge)/ne/it[1]}}const Me={id:V.getId(),properties:fe,type:xe},rt=n.get("mapbox-featurestate")[V.getId()];let Ct=-1;for(let it=0,nt=pe.length;it<nt;++it){const Ge=pe[it],Ie=Ge.layer,$e=Ie.id;if(G!==void 0&&G!==$e)continue;const gt=Ie.layout||vp,Dt=Ie.paint||vp;if(gt.visibility==="none"||"minzoom"in Ie&&we<Ie.minzoom||"maxzoom"in Ie&&we>=Ie.maxzoom)continue;const ut=Ie.filter;if(!ut||ite($e,ut,Me,N)){let Rt,St,Ke,Pe,Re,Ye;const vt=Ge.index;if(xe==3&&(Ie.type=="fill"||Ie.type=="fill-extrusion"))if(St=Si(Ie,"paint",Ie.type+"-opacity",Me,U,rt),Ie.type+"-pattern"in Dt){const rr=Si(Ie,"paint",Ie.type+"-pattern",Me,U,rt);if(rr){const Yn=typeof rr=="string"?oM(rr,fe):rr.toString(),We=D9(Yn,f);if(i&&i[Yn]&&We){++Ct,Ye=re[Ct],(!Ye||!Ye.getFill()||Ye.getStroke()||Ye.getText())&&(Ye=new Jd({fill:new zm}),re[Ct]=Ye),Ke=Ye.getFill(),Ye.setZIndex(vt);const he=Yn+"."+St;let me=P[he];if(!me){const et=i[Yn],bt=i3(et.width,et.height),Yt=bt.getContext("2d");Yt.globalAlpha=St,Yt.drawImage(We.image,et.x,et.y,et.width,et.height,0,0,et.width,et.height),me=Yt.createPattern(bt,"repeat"),P[he]=me}Ke.setColor(me)}}}else Rt=E0(Si(Ie,"paint",Ie.type+"-color",Me,U,rt),St),Ie.type+"-outline-color"in Dt&&(Re=E0(Si(Ie,"paint",Ie.type+"-outline-color",Me,U,rt),St)),Re||(Re=Rt),(Rt||Re)&&(++Ct,Ye=re[Ct],(!Ye||Rt&&!Ye.getFill()||!Rt&&Ye.getFill()||Re&&!Ye.getStroke()||!Re&&Ye.getStroke()||Ye.getText())&&(Ye=new Jd({fill:Rt?new zm:void 0,stroke:Re?new D0:void 0}),re[Ct]=Ye),Rt&&(Ke=Ye.getFill(),Ke.setColor(Rt)),Re&&(Pe=Ye.getStroke(),Pe.setColor(Re),Pe.setWidth(.5)),Ye.setZIndex(vt));if(xe!=1&&Ie.type=="line"){"line-pattern"in Dt?Rt=void 0:Rt=E0(Si(Ie,"paint","line-color",Me,U,rt),Si(Ie,"paint","line-opacity",Me,U,rt));const rr=Si(Ie,"paint","line-width",Me,U,rt);Rt&&rr>0&&(++Ct,Ye=re[Ct],(!Ye||!Ye.getStroke()||Ye.getFill()||Ye.getText())&&(Ye=new Jd({stroke:new D0}),re[Ct]=Ye),Pe=Ye.getStroke(),Pe.setLineCap(Si(Ie,"layout","line-cap",Me,U,rt)),Pe.setLineJoin(Si(Ie,"layout","line-join",Me,U,rt)),Pe.setMiterLimit(Si(Ie,"layout","line-miter-limit",Me,U,rt)),Pe.setColor(Rt),Pe.setWidth(rr),Pe.setLineDash(Dt["line-dasharray"]?Si(Ie,"paint","line-dasharray",Me,U,rt).map(function(Yn){return Yn*rr}):null),Ye.setZIndex(vt))}let yt=!1,Et=null,Zt=0,Ut,An,hr;if((xe==1||xe==2)&&"icon-image"in gt){const rr=Si(Ie,"layout","icon-image",Me,U,rt);if(rr){Ut=typeof rr=="string"?oM(rr,fe):rr.toString();let Yn;const We=o?o(n,Ut):void 0,he=D9(Ut,f);if(i&&i[Ut]&&he||We){const me=Si(Ie,"layout","icon-rotation-alignment",Me,U,rt);if(xe==2){const et=V.getGeometry();if(et.getFlatMidpoint||et.getFlatMidpoints){const bt=et.getExtent();if(Math.sqrt(Math.max(Math.pow((bt[2]-bt[0])/ne,2),Math.pow((bt[3]-bt[1])/ne,2)))>150){const Jt=et.getType()==="MultiLineString"?et.getFlatMidpoints():et.getFlatMidpoint();if(iM||(Ob=[NaN,NaN],iM=new vh("Point",Ob,[],2,{},void 0)),Yn=iM,Ob[0]=Jt[0],Ob[1]=Jt[1],Si(Ie,"layout","symbol-placement",Me,U,rt)==="line"&&me==="map"){const Xe=et.getStride(),ae=et.getFlatCoordinates();for(let ve=0,p=ae.length-Xe;ve<p;ve+=Xe){const Ne=ae[ve],Ve=ae[ve+1],Te=ae[ve+Xe],lt=ae[ve+Xe+1],ct=Math.min(Ne,Te),Ft=Math.max(Ne,Te),jt=Jt[0],Gt=Jt[1],nn=(lt-Ve)*(jt-Ne)-(Te-Ne)*(Gt-Ve);if(Math.abs(nn)<.001&&jt<=Ft&&jt>=ct){Zt=Math.atan2(Ve-lt,Te-Ne);break}}}}}}if(xe!==2||Yn){const et=Si(Ie,"layout","icon-size",Me,U,rt),bt=Dt["icon-color"]!==void 0?Si(Ie,"paint","icon-color",Me,U,rt):null;if(!bt||bt.a!==0){const Yt=Si(Ie,"paint","icon-halo-color",Me,U,rt),Jt=Si(Ie,"paint","icon-halo-width",Me,U,rt);let ir=`${Ut}.${et}.${Jt}.${Yt}`;if(bt!==null&&(ir+=`.${bt}`),An=R[ir],!An){const Xe=R9(Ie,Me,"icon",U);let ae;"icon-offset"in gt&&(ae=Si(Ie,"layout","icon-offset",Me,U,rt).slice(0),ae[0]*=et,ae[1]*=-et);let ve=bt?[bt.r*255,bt.g*255,bt.b*255,bt.a]:void 0;if(We){const p={color:ve,rotateWithView:me==="map",displacement:ae,declutterMode:Xe,scale:et};typeof We=="string"?p.src=We:(p.img=We,p.imgSize=[We.width,We.height]),An=new G2(p)}else{const p=i[Ut];let Ne,Ve,Te;if(Jt)p.sdf?(Ne=T9(k9(he.image,p,bt||[0,0,0,1]),{x:0,y:0,width:p.width,height:p.height,pixelRatio:p.pixelRatio},Jt,Yt),ve=void 0):Ne=T9(he.image,p,Jt,Yt);else{if(p.sdf&&!he.unSDFed){const lt=k9(he.image,{x:0,y:0,width:he.size[0],height:he.size[1]},{r:1,g:1,b:1});he.image=lt,he.unSDFed=!0}Ne=he.image,Ve=[p.width,p.height],Te=[p.x,p.y]}An=new G2({color:ve,img:Ne,imgSize:he.size,size:Ve,offset:Te,rotateWithView:me==="map",scale:et/p.pixelRatio,displacement:ae,declutterMode:Xe})}R[ir]=An}}An&&(++Ct,Ye=re[Ct],(!Ye||!Ye.getImage()||Ye.getFill()||Ye.getStroke())&&(Ye=new Jd,re[Ct]=Ye),Ye.setGeometry(Yn),An.setRotation(Zt+nM(Si(Ie,"layout","icon-rotate",Me,U,rt))),An.setOpacity(Si(Ie,"paint","icon-opacity",Me,U,rt)),An.setAnchor(nte[Si(Ie,"layout","icon-anchor",Me,U,rt)]),Ye.setImage(An),Et=Ye.getText(),Ye.setText(void 0),Ye.setZIndex(vt),yt=!0,hr=!1)}else hr=!0}}}if(xe==1&&Ie.type==="circle"){++Ct,Ye=re[Ct],(!Ye||!Ye.getImage()||Ye.getFill()||Ye.getStroke())&&(Ye=new Jd,re[Ct]=Ye);const rr="circle-radius"in Dt?Si(Ie,"paint","circle-radius",Me,U,rt):5,Yn=E0(Si(Ie,"paint","circle-stroke-color",Me,U,rt),Si(Ie,"paint","circle-stroke-opacity",Me,U,rt)),We=Si(Ie,"paint","circle-translate",Me,U,rt),he=E0(Si(Ie,"paint","circle-color",Me,U,rt),Si(Ie,"paint","circle-opacity",Me,U,rt)),me=Si(Ie,"paint","circle-stroke-width",Me,U,rt),et=rr+"."+Yn+"."+he+"."+me+"."+We[0]+"."+We[1];An=R[et],An||(An=new M_({radius:rr,displacement:[We[0],-We[1]],stroke:Yn&&me>0?new D0({width:me,color:Yn}):void 0,fill:he?new zm({color:he}):void 0,declutterMode:"none"}),R[et]=An),Ye.setImage(An),Et=Ye.getText(),Ye.setText(void 0),Ye.setGeometry(void 0),Ye.setZIndex(vt),yt=!0}let Vt,Vn,Pn,Dn,Ln,Ir;if("text-field"in gt){Dn=Math.round(Si(Ie,"layout","text-size",Me,U,rt));const rr=Si(Ie,"layout","text-font",Me,U,rt);Pn=Si(Ie,"layout","text-line-height",Me,U,rt),Vn=E6(l?l(rr,e.metadata?e.metadata["ol:webfonts"]:void 0):rr,Dn,Pn),Vn.includes("sans-serif")||(Vn+=",sans-serif"),Ln=Si(Ie,"layout","text-letter-spacing",Me,U,rt),Ir=Si(Ie,"layout","text-max-width",Me,U,rt);const Yn=Si(Ie,"layout","text-field",Me,U,rt);typeof Yn=="object"&&Yn.sections?Yn.sections.length===1?Vt=Yn.toString():Vt=Yn.sections.reduce((We,he,me)=>{const et=he.fontStack?he.fontStack.split(","):rr,bt=E6(l?l(et):et,Dn*(he.scale||1),Pn);let Yt=he.text;if(Yt===`
`)return We.push(`
`,""),We;if(xe==2)return We.push(V6(Yt,Ln),bt),We;Yt=H6(Yt,bt,Ir,Ln).split(`
`);for(let Jt=0,ir=Yt.length;Jt<ir;++Jt)Jt>0&&We.push(`
`,""),We.push(Yt[Jt],bt);return We},[]):Vt=oM(Yn,fe).trim(),St=Si(Ie,"paint","text-opacity",Me,U,rt)}if(Vt&&St&&!hr){yt||(++Ct,Ye=re[Ct],(!Ye||!Ye.getText()||Ye.getFill()||Ye.getStroke())&&(Ye=new Jd,re[Ct]=Ye),Ye.setImage(void 0),Ye.setGeometry(void 0));const rr=R9(Ie,Me,"text",U);Ye.getText()||Ye.setText(Et),Et=Ye.getText(),(!Et||"getDeclutterMode"in Et&&Et.getDeclutterMode()!==rr)&&(Et=new Jx({padding:[2,2,2,2],declutterMode:rr}),Ye.setText(Et));const Yn=Si(Ie,"layout","text-transform",Me,U,rt);Yn=="uppercase"?Vt=Array.isArray(Vt)?Vt.map((Te,lt)=>lt%2?Te:Te.toUpperCase()):Vt.toUpperCase():Yn=="lowercase"&&(Vt=Array.isArray(Vt)?Vt.map((Te,lt)=>lt%2?Te:Te.toLowerCase()):Vt.toLowerCase());const We=Array.isArray(Vt)?Vt:xe==2?V6(Vt,Ln):H6(Vt,Vn,Ir,Ln);if(Et.setText(We),Et.setFont(Vn),Et.setRotation(nM(Si(Ie,"layout","text-rotate",Me,U,rt))),typeof Et.setKeepUpright=="function"){const Te=Si(Ie,"layout","text-keep-upright",Me,U,rt);Et.setKeepUpright(Te)}const he=Si(Ie,"layout","text-anchor",Me,U,rt),me=yt||xe==1?"point":Si(Ie,"layout","symbol-placement",Me,U,rt);let et;if(me==="line-center"?(Et.setPlacement("line"),et="center"):Et.setPlacement(me),me==="line"&&typeof Et.setRepeat=="function"){const Te=Si(Ie,"layout","symbol-spacing",Me,U,rt);Et.setRepeat(Te*2)}Et.setOverflow(me==="point");let bt=Si(Ie,"paint","text-halo-width",Me,U,rt);const Yt=Si(Ie,"layout","text-offset",Me,U,rt),Jt=Si(Ie,"paint","text-translate",Me,U,rt);let ir=0,Xe=0;if(me=="point"){et="center",he.indexOf("left")!==-1?(et="left",Xe=bt):he.indexOf("right")!==-1&&(et="right",Xe=-bt);const Te=Si(Ie,"layout","text-rotation-alignment",Me,U,rt);Et.setRotateWithView(Te=="map")}else Et.setMaxAngle(nM(Si(Ie,"layout","text-max-angle",Me,U,rt))*Vt.length/We.length),Et.setRotateWithView(!1);Et.setTextAlign(et);let ae="middle";he.indexOf("bottom")==0?(ae="bottom",ir=-bt-.5*(Pn-1)*Dn):he.indexOf("top")==0&&(ae="top",ir=bt+.5*(Pn-1)*Dn),Et.setTextBaseline(ae);const ve=Si(Ie,"layout","text-justify",Me,U,rt);Et.setJustify(ve==="auto"?void 0:ve),Et.setOffsetX(Yt[0]*Dn+Xe+Jt[0]),Et.setOffsetY(Yt[1]*Dn+ir+Jt[1]),$.setColor(E0(Si(Ie,"paint","text-color",Me,U,rt),St)),Et.setFill($);const p=E0(Si(Ie,"paint","text-halo-color",Me,U,rt),St);if(p&&bt>0){X.setColor(p),bt*=2;const Te=.5*Dn;X.setWidth(bt<=Te?bt:Te),Et.setStroke(X)}else Et.setStroke(void 0);const Ne=Si(Ie,"layout","text-padding",Me,U,rt),Ve=Et.getPadding();Ne!==Ve[0]&&(Ve[0]=Ne,Ve[1]=Ne,Ve[2]=Ne,Ve[3]=Ne),Ye.setZIndex(vt)}}}if(Ct>-1)return re.length=Ct+1,re};return n.setStyle(te),n.set("mapbox-layers",B),n.set("mapbox-source",W),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),te}class uz{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=r3,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Ma(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Ma(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return _o()}readFeature(e,t){return _o()}readFeatures(e,t){return _o()}readGeometry(e,t){return _o()}readProjection(e){return _o()}writeFeature(e,t){return _o()}writeFeatures(e,t){return _o()}writeGeometry(e,t){return _o()}}function o3(n,e,t){const r=t?Ma(t.featureProjection):null,i=t?Ma(t.dataProjection):null;let s=n;if(r&&i&&!W0(r,i)){e&&(s=n.clone());const l=e?r:i,o=e?i:r;l.getUnits()==="tile-pixels"?s.transform(l,o):s.applyTransform(DC(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(f){for(let C=0,x=f.length;C<x;++C)f[C]=Math.round(f[C]*l)/l;return f};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const lte={Point:H1,LineString:X1,Polygon:qm,MultiPoint:S_,MultiLineString:WC,MultiPolygon:QC};function Ate(n,e,t){return Array.isArray(e[0])?(vU(n,0,e,t)||(n=n.slice(),z6(n,0,e,t)),n):(pO(n,0,e,t)||(n=n.slice(),U2(n,0,e,t)),n)}function cz(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>cz({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return o3(new vh(r,r==="Polygon"?Ate(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function NO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>NO(i,e));return new Y2(r)}const t=lte[n.type];return o3(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class ute extends uz{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Ib(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Ib(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return _o()}readFeaturesFromObject(e,t){return _o()}readGeometry(e,t){return this.readGeometryFromObject(Ib(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return _o()}readProjection(e){return this.readProjectionFromObject(Ib(e))}readProjectionFromObject(e){return _o()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return _o()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return _o()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return _o()}}function Ib(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class K9 extends ute{constructor(e){e=e||{},super(),this.dataProjection=Ma(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ma(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=GO(r.geometry);if(this.featureClass===vh)return cz({geometry:i,id:r.id,properties:r.properties},t);const s=new r3;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(NO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const l=s.features;for(let o=0,f=l.length;o<f;++o){const C=this.readFeatureFromObject(l[o],t);C&&i.push(C)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return cte(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Ma(t.properties.name);else if(t.type==="EPSG")r=Ma("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),l=e.getGeometry();return l&&(r.geometry=Z6(l,t),delete s[e.getGeometryName()]),$0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return Z6(e,this.adaptOptions(t))}}function GO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=dte(n);break}case"LineString":{t=fte(n);break}case"Polygon":{t=yte(n);break}case"MultiPoint":{t=mte(n);break}case"MultiLineString":{t=pte(n);break}case"MultiPolygon":{t=gte(n);break}case"GeometryCollection":{t=hte(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function cte(n,e){const t=GO(n);return NO(t,e)}function hte(n,e){return n.geometries.map(function(r){return GO(r)})}function dte(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:ig(e.length)}}function fte(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:ig(e[0]?.length||2)}}function pte(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=C_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:ig(t)}}function mte(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ig(e[0]?.length||2)}}function gte(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=dU(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:ig(r)}}function yte(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=C_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:ig(r)}}function Z6(n,e){n=o3(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Mte(n);break}case"LineString":{r=Cte(n);break}case"Polygon":{r=wte(n,e);break}case"MultiPoint":{r=bte(n);break}case"MultiLineString":{r=_te(n);break}case"MultiPolygon":{r=xte(n,e);break}case"GeometryCollection":{r=vte(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function vte(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return Z6(r,e)})}}function Cte(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function _te(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function bte(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function xte(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Mte(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function wte(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const X6=65536*65536,F9=1/X6,Ste=12,L9=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),sM=0,Tb=1,Rv=2,kb=5;class Ete{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,l=this.pos;this.type=i&7,e(s,t,this),this.pos===l&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*X6;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*X6;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,Bte(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Ste&&L9?L9.decode(this.buf.subarray(t,e)):Nte(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Rv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===sM)for(;this.buf[this.pos++]>127;);else if(t===Rv)this.pos=this.readVarint()+this.pos;else if(t===kb)this.pos+=4;else if(t===Tb)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*F9),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*F9),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Ote(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Gte(this.buf,e,this.pos);const r=this.pos-t;r>=128&&U9(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&U9(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Rv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,kte,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Pte,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Kte,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Rte,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Dte,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Fte,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Lte,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Ute,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,zte,t)}writeBytesField(e,t){this.writeTag(e,Rv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,kb),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,kb),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Tb),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Tb),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,sM),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,sM),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Rv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,kb),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Tb),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Bte(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return Kg(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function Kg(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Ote(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Ite(t,r,e),Tte(r,e)}function Ite(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Tte(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function U9(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function kte(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function Pte(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function Rte(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Dte(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function Kte(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Fte(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Lte(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Ute(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function zte(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function Nte(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let l=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let f,C,x;o===1?s<128&&(l=s):o===2?(f=n[i+1],(f&192)===128&&(l=(s&31)<<6|f&63,l<=127&&(l=null))):o===3?(f=n[i+1],C=n[i+2],(f&192)===128&&(C&192)===128&&(l=(s&15)<<12|(f&63)<<6|C&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(f=n[i+1],C=n[i+2],x=n[i+3],(f&192)===128&&(C&192)===128&&(x&192)===128&&(l=(s&15)<<18|(f&63)<<12|(C&63)<<6|x&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),r+=String.fromCharCode(l),i+=o}return r}function Gte(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class hz extends uz{constructor(e){super(),e=e||{},this.dataProjection=new jx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:vh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let l=1,o=0,f=0,C=0,x=0,B=0;for(;e.pos<s;){if(!o){const R=e.readVarint();l=R&7,o=R>>3}if(o--,l===1||l===2)f+=e.readSVarint(),C+=e.readSVarint(),l===1&&x>B&&(i.push(x),B=x),r.push(f,C),x+=2;else if(l===7)x>B&&(r.push(r[B],r[B+1]),x+=2);else throw new Error("Invalid command found in the PBF")}x>B&&(i.push(x),B=x)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const f=[],C=[];this.readRawGeometry_(e,t,f,C);const x=qte(i,C.length);if(this.featureClass===vh)s=new this.featureClass(x,f,C,2,l,o),s.transform(r.dataProjection);else{let B;if(x=="Polygon"){const U=CU(f,C);B=U.length>1?new QC(f,"XY",U):new qm(f,"XY",C)}else B=x==="Point"?new H1(f,"XY"):x==="LineString"?new X1(f,"XY"):x==="MultiPoint"?new S_(f,"XY"):x==="MultiLineString"?new WC(f,"XY",C):null;const R=this.featureClass;s=new R,this.geometryName_&&s.setGeometryName(this.geometryName_);const P=o3(B,!1,r);s.setGeometry(P),o!==void 0&&s.setId(o),s.setProperties(l,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Ma(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new Ete(e),l=s.readFields(jte,{}),o=[];for(const f in l){if(r&&!r.includes(f))continue;const C=l[f],x=C?[0,0,C.extent,C.extent]:null;i.setExtent(x);for(let B=0,R=C.length;B<R;++B){const P=Yte(s,C,B),U=this.createFeature_(s,P,t);U!==null&&o.push(U)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function jte(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Wte,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Wte(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function Qte(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Yte(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(Qte,i,r),i}function qte(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class $te extends DO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,l=this.getLayer().getSource(),o=e.viewHints;let f=e.extent;if(t.extent!==void 0&&(f=Mp(f,im(t.extent,i.projection))),!o[tA.ANIMATING]&&!o[tA.INTERACTING]&&!ng(f))if(l){const C=i.projection,x=l.getImage(f,s,r,C);x&&(this.loadImage(x)?this.image=x:x.getState()===gi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Fu(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!V1(s,i))return null;const l=this.image.getExtent(),o=this.image.getImage(),f=Ls(l),C=Math.floor(o.width*((i[0]-l[0])/f));if(C<0||C>=o.width)return null;const x=Uu(l),B=Math.floor(o.height*((l[3]-i[1])/x));return B<0||B>=o.height?null:this.getImageData(o,C,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[l,o]=Array.isArray(s)?s:[s,s],f=r.getPixelRatio(),C=e.layerStatesArray[e.layerIndex],x=e.pixelRatio,B=e.viewState,R=B.center,P=B.resolution,U=x*l/(P*f),N=x*o/(P*f);this.prepareContainer(e,t);const W=this.context.canvas.width,X=this.context.canvas.height,$=this.getRenderContext(e);let re=!1,te=!0;if(C.extent){const fe=im(C.extent,B.projection);te=XA(fe,e.extent),re=te&&!rm(fe,e.extent),re&&this.clipUnrotated($,e,fe)}const V=r.getImage(),ne=hm(this.tempTransform,W/2,X/2,U,N,0,f*(i[0]-R[0])/l,f*(R[1]-i[3])/o);this.renderedResolution=o*x/f;const G=V.width*ne[0],le=V.height*ne[3];if(this.getLayer().getSource().getInterpolate()||($.imageSmoothingEnabled=!1),this.preRender($,e),te&&G>=.5&&le>=.5){const fe=ne[4],pe=ne[5],we=C.opacity;we!==1&&($.save(),$.globalAlpha=we),$.drawImage(V,0,0,+V.width,+V.height,fe,pe,G,le),we!==1&&$.restore()}return this.postRender(this.context,e),re&&$.restore(),$.imageSmoothingEnabled=!0,this.container}}class Vte extends Zy{constructor(e){e=e||{},super(e)}}class dz extends Vte{constructor(e){super(e)}createRenderer(){return new $te(this)}getData(e){return super.getData(e)}}function J6(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Hte=new Error("disposed"),Zte=[256,256];class z9 extends B_{constructor(e){const t=Ur.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=J6(this.data_);return e?[e.width,e.height]:Zte}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Ur.IDLE&&this.state!==Ur.ERROR)return;this.state=Ur.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Ur.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Ur.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Hte),this.controller_=null),super.disposeInternal()}}let aM;const by=[];function N9(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function lM(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Xte(){if(aM===void 0){const n=SA(6,6,by);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",N9(n,4,5,4,0),N9(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;aM=lM(e,0)||lM(e,4)||lM(e,8),__(n),by.push(n.canvas)}return aM}function eB(n,e,t,r){const i=Yx(t,e,n);let s=K6(e,r,t);const l=e.getMetersPerUnit();l!==void 0&&(s*=l);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const f=n.getExtent();if(!f||V1(f,i)){const C=K6(n,s,i)/s;isFinite(C)&&C>0&&(s/=C)}return s}function Jte(n,e,t,r){const i=af(t);let s=eB(n,e,i,r);return(!isFinite(s)||s<=0)&&VL(t,function(l){return s=eB(n,e,l,r),isFinite(s)&&s>0}),s}function fz(n,e,t,r,i,s,l,o,f,C,x,B,R,P){const U=SA(Math.round(t*n),Math.round(t*e),by);if(B||(U.imageSmoothingEnabled=!1),f.length===0)return U.canvas;U.scale(t,t);function N(V){return Math.round(V*t)/t}U.globalCompositeOperation="lighter";const W=Qf();f.forEach(function(V,ne,G){qL(W,V.extent)});let X;const $=t/r,re=(B?1:1+Math.pow(2,-24))/$;(!R||f.length!==1||C!==0)&&(X=SA(Math.round(Ls(W)*$),Math.round(Uu(W)*$),by),B||(X.imageSmoothingEnabled=!1),f.forEach(function(V,ne,G){if(V.image.width>0&&V.image.height>0){if(V.clipExtent){X.save();const Se=(V.clipExtent[0]-W[0])*$,xe=-(V.clipExtent[3]-W[3])*$,je=Ls(V.clipExtent)*$,Me=Uu(V.clipExtent)*$;X.rect(B?Se:Math.round(Se),B?xe:Math.round(xe),B?je:Math.round(Se+je)-Math.round(Se),B?Me:Math.round(xe+Me)-Math.round(xe)),X.clip()}const le=(V.extent[0]-W[0])*$,fe=-(V.extent[3]-W[3])*$,pe=Ls(V.extent)*$,we=Uu(V.extent)*$;X.drawImage(V.image,C,C,V.image.width-2*C,V.image.height-2*C,B?le:Math.round(le),B?fe:Math.round(fe),B?pe:Math.round(le+pe)-Math.round(le),B?we:Math.round(fe+we)-Math.round(fe)),V.clipExtent&&X.restore()}}));const te=Hm(l);return o.getTriangles().forEach(function(V,ne,G){const le=V.source,fe=V.target;let pe=le[0][0],we=le[0][1],Se=le[1][0],xe=le[1][1],je=le[2][0],Me=le[2][1];const rt=N((fe[0][0]-te[0])/s),Ct=N(-(fe[0][1]-te[1])/s),it=N((fe[1][0]-te[0])/s),nt=N(-(fe[1][1]-te[1])/s),Ge=N((fe[2][0]-te[0])/s),Ie=N(-(fe[2][1]-te[1])/s),$e=pe,gt=we;pe=0,we=0,Se-=$e,xe-=gt,je-=$e,Me-=gt;const Dt=[[Se,xe,0,0,it-rt],[je,Me,0,0,Ge-rt],[0,0,Se,xe,nt-Ct],[0,0,je,Me,Ie-Ct]],ut=YH(Dt);if(!ut)return;if(U.save(),U.beginPath(),Xte()||!B){U.moveTo(it,nt);const St=4,Ke=rt-it,Pe=Ct-nt;for(let Re=0;Re<St;Re++)U.lineTo(it+N((Re+1)*Ke/St),nt+N(Re*Pe/(St-1))),Re!=St-1&&U.lineTo(it+N((Re+1)*Ke/St),nt+N((Re+1)*Pe/(St-1)));U.lineTo(Ge,Ie)}else U.moveTo(it,nt),U.lineTo(rt,Ct),U.lineTo(Ge,Ie);U.clip(),U.transform(ut[0],ut[2],ut[1],ut[3],rt,Ct),U.translate(W[0]-$e,W[3]-gt);let Rt;if(X)Rt=X.canvas,U.scale(re,-re);else{const St=f[0],Ke=St.extent;Rt=St.image,U.scale(Ls(Ke)/Rt.width,-Uu(Ke)/Rt.height)}U.drawImage(Rt,0,0),U.restore()}),X&&(__(X),by.push(X.canvas)),x&&(U.save(),U.globalCompositeOperation="source-over",U.strokeStyle="black",U.lineWidth=1,o.getTriangles().forEach(function(V,ne,G){const le=V.target,fe=(le[0][0]-te[0])/s,pe=-(le[0][1]-te[1])/s,we=(le[1][0]-te[0])/s,Se=-(le[1][1]-te[1])/s,xe=(le[2][0]-te[0])/s,je=-(le[2][1]-te[1])/s;U.beginPath(),U.moveTo(we,Se),U.lineTo(fe,pe),U.lineTo(xe,je),U.closePath(),U.stroke()}),U.restore()),U.canvas}const ene=10,G9=.25;class pz{constructor(e,t,r,i,s,l,o){this.sourceProj_=e,this.targetProj_=t;let f={};const C=o?RZ(re=>Fu(o,Yx(re,this.targetProj_,this.sourceProj_))):DC(this.targetProj_,this.sourceProj_);this.transformInv_=function(re){const te=re[0]+"/"+re[1];return f[te]||(f[te]=C(re)),f[te]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ls(i)>=Ls(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ls(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ls(this.targetProj_.getExtent()):null;const x=Hm(r),B=Gx(r),R=Nx(r),P=zx(r),U=this.transformInv_(x),N=this.transformInv_(B),W=this.transformInv_(R),X=this.transformInv_(P),$=ene+(l?Math.max(0,Math.ceil(Math.log2(k6(r)/(l*l*256*256)))):0);if(this.addQuad_(x,B,R,P,U,N,W,X,$),this.wrapsXInSource_){let re=1/0;this.triangles_.forEach(function(te,V,ne){re=Math.min(re,te.source[0][0],te.source[1][0],te.source[2][0])}),this.triangles_.forEach(te=>{if(Math.max(te.source[0][0],te.source[1][0],te.source[2][0])-re>this.sourceWorldWidth_/2){const V=[[te.source[0][0],te.source[0][1]],[te.source[1][0],te.source[1][1]],[te.source[2][0],te.source[2][1]]];V[0][0]-re>this.sourceWorldWidth_/2&&(V[0][0]-=this.sourceWorldWidth_),V[1][0]-re>this.sourceWorldWidth_/2&&(V[1][0]-=this.sourceWorldWidth_),V[2][0]-re>this.sourceWorldWidth_/2&&(V[2][0]-=this.sourceWorldWidth_);const ne=Math.min(V[0][0],V[1][0],V[2][0]);Math.max(V[0][0],V[1][0],V[2][0])-ne<this.sourceWorldWidth_/2&&(te.source=V)}})}f={}}addTriangle_(e,t,r,i,s,l){this.triangles_.push({source:[i,s,l],target:[e,t,r]})}addQuad_(e,t,r,i,s,l,o,f,C){const x=I6([s,l,o,f]),B=this.sourceWorldWidth_?Ls(x)/this.sourceWorldWidth_:null,R=this.sourceWorldWidth_,P=this.sourceProj_.canWrapX()&&B>.5&&B<1;let U=!1;if(C>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const W=I6([e,t,r,i]);U=Ls(W)/this.targetWorldWidth_>G9||U}!P&&this.sourceProj_.isGlobal()&&B&&(U=B>G9||U)}if(!U&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!XA(x,this.maxSourceExtent_))return;let N=0;if(!U&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(f[0])||!isFinite(f[1]))){if(C>0)U=!0;else if(N=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),N!=1&&N!=2&&N!=4&&N!=8)return}if(C>0){if(!U){const W=[(e[0]+r[0])/2,(e[1]+r[1])/2],X=this.transformInv_(W);let $;P?$=(G1(s[0],R)+G1(o[0],R))/2-G1(X[0],R):$=(s[0]+o[0])/2-X[0];const re=(s[1]+o[1])/2-X[1];U=$*$+re*re>this.errorThresholdSquared_}if(U){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const W=[(t[0]+r[0])/2,(t[1]+r[1])/2],X=this.transformInv_(W),$=[(i[0]+e[0])/2,(i[1]+e[1])/2],re=this.transformInv_($);this.addQuad_(e,t,W,$,s,l,X,re,C-1),this.addQuad_($,W,r,i,re,X,o,f,C-1)}else{const W=[(e[0]+t[0])/2,(e[1]+t[1])/2],X=this.transformInv_(W),$=[(r[0]+i[0])/2,(r[1]+i[1])/2],re=this.transformInv_($);this.addQuad_(e,W,$,i,s,X,re,f,C-1),this.addQuad_(W,t,r,$,X,l,o,re,C-1)}return}}if(P){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(N&11)==0&&this.addTriangle_(e,r,i,s,o,f),(N&14)==0&&this.addTriangle_(e,r,t,s,o,l),N&&((N&13)==0&&this.addTriangle_(t,i,e,l,f,s),(N&7)==0&&this.addTriangle_(t,i,r,l,f,o))}calculateSourceExtent(){const e=Qf();return this.triangles_.forEach(function(t,r,i){const s=t.source;hC(e,s[0]),hC(e,s[1]),hC(e,s[2])}),e}getTriangles(){return this.triangles_}}const mz=.5;class gz extends B_{constructor(e,t,r,i,s,l,o,f,C,x,B,R){super(s,Ur.IDLE,R),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=o,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const P=i.getTileCoordExtent(this.wrappedTileCoord_),U=this.targetTileGrid_.getExtent();let N=this.sourceTileGrid_.getExtent();const W=U?Mp(P,U):P;if(k6(W)===0){this.state=Ur.EMPTY;return}const X=e.getExtent();X&&(N?N=Mp(N,X):N=X);const $=i.getResolution(this.wrappedTileCoord_[0]),re=Jte(e,r,W,$);if(!isFinite(re)||re<=0){this.state=Ur.EMPTY;return}const te=x!==void 0?x:mz;if(this.triangulation_=new pz(e,r,W,N,re*te,$),this.triangulation_.getTriangles().length===0){this.state=Ur.EMPTY;return}this.sourceZ_=t.getZForResolution(re);let V=this.triangulation_.calculateSourceExtent();if(N&&(e.canWrapX()?(V[1]=wA(V[1],N[1],N[3]),V[3]=wA(V[3],N[1],N[3])):V=Mp(V,N)),!k6(V))this.state=Ur.EMPTY;else{let ne=0,G=0;e.canWrapX()&&(ne=Ls(X),G=Math.floor((V[0]-X[0])/ne)),XL(V.slice(),e,!0).forEach(fe=>{const pe=t.getTileRangeForExtentAndZ(fe,this.sourceZ_);for(let we=pe.minX;we<=pe.maxX;we++)for(let Se=pe.minY;Se<=pe.maxY;Se++){const xe=C(this.sourceZ_,we,Se,o);if(xe){const je=G*ne;this.sourceTiles_.push({tile:xe,offset:je})}}++G}),this.sourceTiles_.length===0&&(this.state=Ur.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==Ur.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Ur.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=fz(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ur.LOADED}this.changed()}load(){if(this.state==Ur.IDLE){this.state=Ur.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Ur.IDLE||r==Ur.LOADING){e++;const i=ks(t,go.CHANGE,s=>{const l=t.getState();(l==Ur.LOADED||l==Ur.ERROR||l==Ur.EMPTY)&&(cl(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Ur.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(cl),this.sourcesListenerKeys_=null}release(){this.canvas_&&(__(this.canvas_.getContext("2d")),by.push(this.canvas_),this.canvas_=null),super.release()}}class tne{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof f_&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return ia(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return ia(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ia(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function X2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function nne(n,e,t){return n+"/"+e+"/"+t}function rne(n){return ine(n[0],n[1],n[2])}function ine(n,e,t){return(e<<n)+t}function one(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function AM(n,e,t,r,i){return`${ko(n)},${e},${nne(t,r,i)}`}function uM(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function sne(n,e,t){const r=n[t];return r?r.delete(e):!1}function j9(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Mp(e,im(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Mp(e,i))}return e}class yz extends DO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Qf(),this.tempTileRange_=new FO(0,0,0,0),this.tempTileCoord_=X2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new tne(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),f=AM(o,o.getKey(),e,t,r);let C;if(s.containsKey(f))C=s.get(f);else{if(C=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!C)return null;s.set(f,C)}return C}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Fu(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!V1(s,i))return null;const l=t.viewState,o=r.getRenderSource(),f=o.getTileGridForProjection(l.projection),C=o.getTilePixelRatio(t.pixelRatio);for(let x=f.getZForResolution(l.resolution);x>=f.getMinZoom();--x){const B=f.getTileCoordForCoordAndZ(i,x),R=this.getTile(x,B[1],B[2],t);if(!R||R.getState()!==Ur.LOADED)continue;const P=f.getOrigin(x),U=Ch(f.getTileSize(x)),N=f.getResolution(x);let W;if(R instanceof rz||R instanceof gz)W=R.getImage();else if(R instanceof z9){if(W=J6(R.getData()),!W)continue}else continue;const X=Math.floor(C*((i[0]-P[0])/N-B[1]*U[0])),$=Math.floor(C*((P[1]-i[1])/N-B[2]*U[1])),re=Math.round(C*o.getGutterForProjection(l.projection));return this.getImageData(W,X+re,$+re)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=r,!0}enqueueTiles(e,t,r,i,s){const l=e.viewState,o=this.getLayer(),f=o.getRenderSource(),C=f.getTileGridForProjection(l.projection),x=ko(f);x in e.wantedTiles||(e.wantedTiles[x]={});const B=e.wantedTiles[x],R=o.getMapInternal(),P=Math.max(r-s,C.getMinZoom(),C.getZForResolution(Math.min(o.getMaxResolution(),R?R.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):C.getResolution(0)),f.zDirection)),U=l.rotation,N=U?HL(l.center,l.resolution,U,e.size):void 0;for(let W=r;W>=P;--W){const X=C.getTileRangeForExtentAndZ(t,W,this.tempTileRange_),$=C.getResolution(W);for(let re=X.minX;re<=X.maxX;++re)for(let te=X.minY;te<=X.maxY;++te){if(U&&!C.tileCoordIntersectsViewport([W,re,te],N))continue;const V=this.getTile(W,re,te,e);if(!V||!uM(i,V,W))continue;const G=V.getKey();if(B[G]=!0,V.getState()===Ur.IDLE&&!e.tileQueue.isKeyQueued(G)){const le=X2(W,re,te,this.tempTileCoord_);e.tileQueue.enqueue([V,x,C.getTileCoordCenter(le),$])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],l=e[2],o=this.getStaleKeys();for(let f=0;f<o.length;++f){const C=AM(this.getLayer().getSource(),o[f],i,s,l);if(r.containsKey(C)){const x=r.peek(C);if(x.getState()===Ur.LOADED)return x.endTransition(ko(this)),uM(t,x,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let l=!0;const o=this.tileCache_,f=this.getLayer().getRenderSource(),C=f.getKey();for(let x=s.minX;x<=s.maxX;++x)for(let B=s.minY;B<=s.maxY;++B){const R=AM(f,C,r,x,B);let P=!1;if(o.containsKey(R)){const U=o.peek(R);U.getState()===Ur.LOADED&&(uM(i,U,r),P=!0)}P||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,l=i.resolution,o=i.center,f=e.pixelRatio,C=this.getLayer(),x=C.getSource(),B=x.getTileGridForProjection(s),R=B.getZForResolution(l,x.zDirection),P=B.getResolution(R),U=x.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==U&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=U):this.renderedSourceKey_=U;let N=e.extent;const W=x.getTilePixelRatio(f);this.prepareContainer(e,t);const X=this.context.canvas.width,$=this.context.canvas.height,re=r.extent&&im(r.extent);re&&(N=Mp(N,im(r.extent)));const te=P*X/2/W,V=P*$/2/W,ne=[o[0]-te,o[1]-V,o[0]+te,o[1]+V],G={};this.renderedTiles.length=0;const le=C.getPreload();if(e.nextExtent){const it=B.getZForResolution(i.nextResolution,x.zDirection),nt=j9(e,e.nextExtent);this.enqueueTiles(e,nt,it,G,le)}const fe=j9(e,N);if(this.enqueueTiles(e,fe,R,G,0),le>0&&setTimeout(()=>{this.enqueueTiles(e,fe,R-1,G,le-1)},0),!(R in G))return this.container;const pe=ko(this),we=e.time;for(const it of G[R]){const nt=it.getState();if(nt===Ur.EMPTY)continue;const Ge=it.tileCoord;if(nt===Ur.LOADED&&it.getAlpha(pe,we)===1){it.endTransition(pe);continue}if(nt!==Ur.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ge,G)){sne(G,it,R),e.animate=!0;continue}if(this.findAltTiles_(B,Ge,R+1,G))continue;const gt=B.getMinZoom();for(let Dt=R-1;Dt>=gt&&!this.findAltTiles_(B,Ge,Dt,G);--Dt);}const Se=P/l*f/W,xe=this.getRenderContext(e);hm(this.tempTransform,X/2,$/2,Se,Se,0,-X/2,-$/2),r.extent&&this.clipUnrotated(xe,e,re),x.getInterpolate()||(xe.imageSmoothingEnabled=!1),this.preRender(xe,e);const je=Object.keys(G).map(Number);je.sort(Am);let Me;const rt=[],Ct=[];for(let it=je.length-1;it>=0;--it){const nt=je[it],Ge=x.getTilePixelSize(nt,f,s),$e=B.getResolution(nt)/P,gt=Ge[0]*$e*Se,Dt=Ge[1]*$e*Se,ut=B.getTileCoordForCoordAndZ(Hm(ne),nt),Rt=B.getTileCoordExtent(ut),St=Fu(this.tempTransform,[W*(Rt[0]-ne[0])/P,W*(ne[3]-Rt[3])/P]),Ke=W*x.getGutterForProjection(s);for(const Pe of G[nt]){if(Pe.getState()!==Ur.LOADED)continue;const Re=Pe.tileCoord,Ye=ut[1]-Re[1],vt=Math.round(St[0]-(Ye-1)*gt),yt=ut[2]-Re[2],Et=Math.round(St[1]-(yt-1)*Dt),Zt=Math.round(St[0]-Ye*gt),Ut=Math.round(St[1]-yt*Dt),An=vt-Zt,hr=Et-Ut,Vt=je.length===1;let Vn=!1;Me=[Zt,Ut,Zt+An,Ut,Zt+An,Ut+hr,Zt,Ut+hr];for(let Pn=0,Dn=rt.length;Pn<Dn;++Pn)if(!Vt&&nt<Ct[Pn]){const Ln=rt[Pn];XA([Zt,Ut,Zt+An,Ut+hr],[Ln[0],Ln[3],Ln[4],Ln[7]])&&(Vn||(xe.save(),Vn=!0),xe.beginPath(),xe.moveTo(Me[0],Me[1]),xe.lineTo(Me[2],Me[3]),xe.lineTo(Me[4],Me[5]),xe.lineTo(Me[6],Me[7]),xe.moveTo(Ln[6],Ln[7]),xe.lineTo(Ln[4],Ln[5]),xe.lineTo(Ln[2],Ln[3]),xe.lineTo(Ln[0],Ln[1]),xe.clip())}rt.push(Me),Ct.push(nt),this.drawTile(Pe,e,Zt,Ut,An,hr,Ke,Vt),Vn&&xe.restore(),this.renderedTiles.unshift(Pe),this.updateUsedTiles(e.usedTiles,x,Pe)}}if(this.renderedResolution=P,this.extentChanged=!this.renderedExtent_||!Ym(this.renderedExtent_,ne),this.renderedExtent_=ne,this.renderedPixelRatio=f,this.postRender(this.context,e),r.extent&&xe.restore(),xe.imageSmoothingEnabled=!0,this.renderComplete){const it=(nt,Ge)=>{const Ie=ko(x),$e=Ge.wantedTiles[Ie],gt=$e?Object.keys($e).length:0;this.updateCacheSize(gt),this.tileCache_.expireCache()};e.postRenderFunctions.push(it)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,l,o,f){let C;if(e instanceof z9){if(C=J6(e.getData()),!C)throw new Error("Rendering array data is not yet supported")}else C=this.getTileImage(e);if(!C)return;const x=this.getRenderContext(t),B=ko(this),R=t.layerStatesArray[t.layerIndex],P=R.opacity*(f?e.getAlpha(B,t.time):1),U=P!==x.globalAlpha;U&&(x.save(),x.globalAlpha=P),x.drawImage(C,o,o,C.width-2*o,C.height-2*o,r,i,s,l),U&&x.restore(),P!==R.opacity?t.animate=!0:f&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=ko(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const F0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class ane extends Zy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(F0.PRELOAD)}setPreload(e){this.set(F0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(F0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(F0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class vz extends ane{constructor(e){super(e)}createRenderer(){return new yz(this,{cacheSize:this.getCacheSize()})}}const lne={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},W9={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Ane extends yz{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=pd(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,l,o,f){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,l,o,f)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,f=i.viewHints;return(!(f[tA.ANIMATING]||f[tA.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),l=i.getRenderOrder()||null,o=e.wantedResolution,f=e.getReplayState(i);if(!f.dirty&&f.renderedResolution===o&&f.renderedRevision==s&&f.renderedRenderOrder==l)return;const C=i.getSource(),x=!!i.getDeclutter(),B=C.getTileGrid(),P=C.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),U=C.getSourceTiles(t,r,e),N=ko(i);delete e.hitDetectionImageData[N],e.executorGroups[N]=[],f.dirty=!1;for(let W=0,X=U.length;W<X;++W){const $=U[W];if($.getState()!=Ur.LOADED)continue;const re=$.tileCoord,te=B.getTileCoordExtent(re),V=Mp(P,te),ne=j0(V,i.getRenderBuffer()*o,this.tempExtent),G=Ym(te,V)?null:ne,le=new JU(0,V,o,t),fe=$6(o,t),pe=function(Me,rt){let Ct;const it=Me.getStyleFunction()||i.getStyleFunction();if(it&&(Ct=it(Me,o)),Ct){const nt=this.renderFeature(Me,fe,Ct,le,x,rt);f.dirty=f.dirty||nt}},we=$.getFeatures();l&&l!==f.renderedRenderOrder&&we.sort(l);for(let Me=0,rt=we.length;Me<rt;++Me){const Ct=we[Me];(!G||XA(G,Ct.getGeometry().getExtent()))&&pe.call(this,Ct,Me)}const Se=le.finish(),xe=i.getRenderMode()!=="vector"&&x&&U.length===1?null:V,je=new ez(xe,o,t,C.getOverlaps(),Se,i.getRenderBuffer(),!0);e.executorGroups[N].push(je)}f.renderedRevision=s,f.renderedRenderOrder=l,f.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){const l=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const f=this.getLayer(),x=f.getSource().getTileGridForProjection(t.viewState.projection),B=I6([e]);j0(B,l*r,B);const R={},P=function(re,te,V){let ne=re.getId();ne===void 0&&(ne=ko(re));const G=R[ne];if(G){if(G!==!0&&V<G.distanceSq){if(V===0)return R[ne]=!0,s.splice(s.lastIndexOf(G),1),i(re,f,te);G.geometry=te,G.distanceSq=V}}else{if(V===0)return R[ne]=!0,i(re,f,te);s.push(R[ne]={feature:re,layer:f,geometry:te,distanceSq:V,callback:i})}},U=this.renderedTiles,N=ko(f),W=f.getDeclutter(),X=W?t.declutter?.[W]?.all().map(re=>re.value):null;let $;e:for(let re=0,te=U.length;re<te;++re){const V=U[re],ne=x.getTileCoordExtent(V.wrappedTileCoord);if(!XA(ne,B))continue;const G=V.executorGroups[N];for(let le=0,fe=G.length;le<fe;++le)if($=G[le].forEachFeatureAtCoordinate(e,l,o,r,P,X),$)break e}return $}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),l=this.renderedProjection,o=l.getExtent(),f=this.renderedResolution,C=s.getTileGridForProjection(l),x=Fu(this.renderedPixelToCoordinateTransform_,e.slice()),B=C.getTileCoordForCoordAndResolution(x,f).toString(),R=this.renderedTiles.find(re=>re.tileCoord.toString()===B&&re.getState()===Ur.LOADED);if(!R||R.loadingSourceTiles>0){t([]);return}s.getWrapX()&&l.canWrapX()&&!rm(o,C.getTileCoordExtent(R.tileCoord))&&JB(x,l);const P=ko(i),U=C.getTileCoordExtent(R.wrappedTileCoord),N=Hm(U),W=[(x[0]-N[0])/f,(N[1]-x[1])/f],X=R.getSourceTiles().reduce((re,te)=>re.concat(te.getFeatures()),[]);let $=R.hitDetectionImageData[P];if(!$){const re=Ch(C.getTileSize(C.getZForResolution(f,s.zDirection))),te=this.renderedRotation_,V=[this.getRenderTransform(C.getTileCoordCenter(R.wrappedTileCoord),f,0,nf,re[0]*nf,re[1]*nf,0)];$=tz(re,V,X,i.getStyleFunction(),C.getTileCoordExtent(R.wrappedTileCoord),R.getReplayState(i).renderedResolution,te),R.hitDetectionImageData[P]=$}t(nz(W,X,$))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=s.getZForResolution(this.renderedResolution),o={};return r.forEach(f=>{if(f.tileCoord[0]!==l||f.getState()!==Ur.LOADED)return;const C=f.getSourceTiles();for(let x=0,B=C.length;x<B;++x){const R=C[x],P=R.getKey();if(P in o)continue;o[P]=!0;const U=R.tileCoord;if(XA(e,s.getTileCoordExtent(U))){const N=R.getFeatures();if(N)for(let W=0,X=N.length;W<X;++W){const $=N[W],re=$.getGeometry();XA(e,re.getExtent())&&t.push($)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,l=!(s[tA.ANIMATING]||s[tA.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],f=this.getLayer().getDeclutter(),C=f?e.declutter?.[f]:void 0,x=ko(this.getLayer()),B=this.renderedTiles;for(let R=0,P=B.length;R<P;++R){const U=B[R],N=U.executorGroups[x];if(N)for(let W=N.length-1;W>=0;--W)N[W].execute(this.context,o,this.getTileRenderTransform(U,e),e.viewState.rotation,l,V2,C)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=ko(this.getLayer()),i=t.reduce((f,C,x)=>(C.executorGroups[r].forEach(B=>f.push({executorGroup:B,index:x})),f),[]),s=i.map(({executorGroup:f})=>f.getDeferredZIndexContexts()),l={};for(let f=0,C=i.length;f<C;++f){const x=i[f].executorGroup.getDeferredZIndexContexts();for(const B in x)l[B]=!0}Object.keys(l).map(Number).sort(Am).forEach(f=>{s.forEach((C,x)=>{C[f]&&(C[f].forEach(B=>{const{executorGroup:R,index:P}=i[x],U=R.getRenderedContext(),N=U.globalAlpha;U.globalAlpha=this.renderedOpacity_;const W=this.tileClipContexts_[P];W&&W.draw(U),B.draw(U),W&&U.restore(),U.globalAlpha=N,B.clear()}),C[f].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,l=i.resolution,o=i.rotation,f=t.size,C=Math.round(f[0]*r),x=Math.round(f[1]*r),R=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),P=e.tileCoord,U=R.getTileCoordExtent(e.wrappedTileCoord),N=R.getTileCoordExtent(P,this.tempExtent)[0]-U[0];return oO(K4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,l,o,r,C,x,N))}postRender(e,t){const r=t.viewHints,i=!(r[tA.ANIMATING]||r[tA.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),l=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const f=s.getDeclutter(),C=f?W9[l].filter(V=>!V2.includes(V)):W9[l],x=t.viewState,B=x.rotation,R=s.getSource(),U=R.getTileGridForProjection(x.projection).getZForResolution(x.resolution,R.zDirection),N=this.renderedTiles,W=[],X=[],$=[],re=ko(s);let te=!0;for(let V=N.length-1;V>=0;--V){const ne=N[V];te=te&&!ne.getReplayState(s).dirty;const G=ne.executorGroups[re].filter(je=>je.hasExecutors(C));if(G.length===0)continue;const le=this.getTileRenderTransform(ne,t),fe=ne.tileCoord[0];let pe=!1;const we=G[0].getClipCoords(le);let Se=e,xe;if(we){xe=new RO,Se=xe.getContext();for(let je=0,Me=W.length;je<Me;++je)if(U!==fe&&fe<X[je]){const rt=W[je];XA([we[0],we[3],we[4],we[7]],[rt[0],rt[3],rt[4],rt[7]])&&(pe||(Se.save(),pe=!0),Se.beginPath(),Se.moveTo(we[0],we[1]),Se.lineTo(we[2],we[3]),Se.lineTo(we[4],we[5]),Se.lineTo(we[6],we[7]),Se.moveTo(rt[6],rt[7]),Se.lineTo(rt[4],rt[5]),Se.lineTo(rt[2],rt[3]),Se.lineTo(rt[0],rt[1]),Se.clip())}W.push(we),X.push(fe)}for(let je=0,Me=G.length;je<Me;++je)G[je].execute(e,[e.canvas.width,e.canvas.height],le,B,i,C,t.declutter?.[f]);pe&&(Se===e?Se.restore():$[V]=xe)}e.globalAlpha=o,this.ready=te,this.tileClipContexts_=$,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,l){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let f=0,C=r.length;f<C;++f)o=q2(i,e,r[f],t,this.boundHandleStyleImageChange_,void 0,s,l)||o;else o=q2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),l=e.executorGroups[ko(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,f=o[0],C=r.getSource();let x=t.pixelRatio;const R=t.viewState.projection,P=C.getTileGridForProjection(R),U=P.getResolution(e.tileCoord[0]),N=t.pixelRatio/e.wantedResolution*U,W=P.getResolution(f),X=e.getContext();x=Math.round(Math.max(x,N/x));const $=C.getTilePixelSize(f,x,R);X.canvas.width=$[0],X.canvas.height=$[1];const re=x/N;if(re!==1){const G=W7(this.tmpTransform_);K4(G,re,re),X.setTransform.apply(X,G)}const te=P.getTileCoordExtent(o,this.tempExtent),V=N/W,ne=W7(this.tmpTransform_);K4(ne,V,-V),UZ(ne,-te[0],-te[3]);for(let G=0,le=l.length;G<le;++G)l[G].execute(X,[X.canvas.width*re,X.canvas.height*re],ne,0,!0,lne[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class fC extends kO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";ia(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Ane(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(F0.PRELOAD)}getUseInterimTilesOnError(){return this.get(F0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(F0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(F0.USE_INTERIM_TILES_ON_ERROR,e)}}function tB(n){return Array.isArray(n)?Math.min(...n):n}class une extends OO{constructor(e,t,r,i,s,l,o){let f=e.getExtent();f&&e.canWrapX()&&(f=f.slice(),f[0]=-1/0,f[2]=1/0);let C=t.getExtent();C&&t.canWrapX()&&(C=C.slice(),C[0]=-1/0,C[2]=1/0);const x=C?Mp(r,C):r,B=af(x),R=eB(e,t,B,i),P=mz,U=new pz(e,t,x,f,R*P,i),N=U.calculateSourceExtent(),W=ng(N)?null:l(N,R,s),X=W?gi.IDLE:gi.EMPTY,$=W?W.getPixelRatio():1;super(r,i,$,X),this.targetProj_=t,this.maxSourceExtent_=f,this.triangulation_=U,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=W,this.sourcePixelRatio_=$,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==gi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==gi.LOADED){const t=Ls(this.targetExtent_)/this.targetResolution_,r=Uu(this.targetExtent_)/this.targetResolution_;this.canvas_=fz(t,r,this.sourcePixelRatio_,tB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==gi.IDLE){this.state=gi.LOADING,this.changed();const e=this.sourceImage_.getState();e==gi.LOADED||e==gi.ERROR?this.reproject_():(this.sourceListenerKey_=ks(this.sourceImage_,go.CHANGE,t=>{const r=this.sourceImage_.getState();(r==gi.LOADED||r==gi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){cl(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Pb=4,cM={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class cne extends Op{constructor(e,t){super(e),this.image=t}}class Cz extends Xy{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Fx(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||W0(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&W0(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Ym(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new une(s,i,e,t,r,(l,o,f)=>this.getImageInternal(l,o,f,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=hne(e,t,r,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&rm(this.wantedExtent_,s)||rm(this.image.getExtent(),s))&&(this.wantedResolution_&&tB(this.wantedResolution_)===l||tB(this.image.getResolution())===l)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=l,this.image=new OO(s,l,r,this.loader),this.image.addEventListener(go.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case gi.LOADING:this.loading=!0,r=cM.IMAGELOADSTART;break;case gi.LOADED:this.loading=!1,r=cM.IMAGELOADEND;break;case gi.ERROR:this.loading=!1,r=cM.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new cne(r,t))}}function hne(n,e,t,r){const i=e/t,s=af(n),l=P0(Ls(n)/i,Pb),o=P0(Uu(n)/i,Pb),f=P0((r-1)*l/2,Pb),C=l+2*f,x=P0((r-1)*o/2,Pb),B=o+2*x;return D2(s,i,0,[C,B])}const Fg=[0,0,0],M0=5;class s3{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ia(DH(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ia(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Hm(r)),ia(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ia(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:vO,ia(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const l=new FO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,l=i.maxX;s<=l;++s)for(let o=i.minY,f=i.maxY;o<=f;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,l,o,f=null,C=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):f=this.getTileCoordExtent(e,i);C>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),s=Rg(l,l,o,o,r)):s=this.getTileRangeForExtentAndZ(f,C,r),t(C,s))return!0;--C}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,l=e[2]*2;return Rg(s,s+1,l,l+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],l=e[2];if(t===i)return Rg(s,l,s,l,r);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,t-i),C=Math.floor(s*f),x=Math.floor(l*f);if(t<i)return Rg(C,C,x,x,r);const B=Math.floor(f*(s+1))-1,R=Math.floor(f*(l+1))-1;return Rg(C,B,x,R,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Fg);const i=Fg[1],s=Fg[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Fg);const l=Fg[1],o=Fg[2];return Rg(i,l,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Ch(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Ch(this.getTileSize(e[0]),this.tmpSize_),l=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,f=l+s[0]*i,C=o+s[1]*i;return Qm(l,o,f,C,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const l=this.getZForResolution(r),o=r/this.getResolution(l),f=this.getOrigin(l),C=Ch(this.getTileSize(l),this.tmpSize_);let x=o*(e-f[0])/r/C[0],B=o*(f[1]-t)/r/C[1];return i?(x=P0(x,M0)-1,B=P0(B,M0)-1):(x=Cb(x,M0),B=Cb(B,M0)),X2(l,x,B,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const l=this.getOrigin(r),o=this.getResolution(r),f=Ch(this.getTileSize(r),this.tmpSize_);let C=(e-l[0])/o/f[0],x=(l[1]-t)/o/f[1];return i?(C=P0(C,M0)-1,x=P0(x,M0)-1):(C=Cb(C,M0),x=Cb(x,M0)),X2(r,C,x,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Fx(this.resolutions_,e,t||0);return wA(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return gU(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function _z(n){let e=n.getDefaultTileGrid();return e||(e=pne(n),n.setDefaultTileGrid(e)),e}function dne(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=a3(t);if(!V1(s,i)){const l=Ls(s),o=Math.ceil((s[0]-i[0])/l);return i[0]+=l*o,n.getTileCoordForCoordAndZ(i,r)}return e}function fne(n,e,t,r){r=r!==void 0?r:"top-left";const i=bz(n,e,t);return new s3({extent:n,origin:HH(n,r),resolutions:i,tileSize:t})}function jO(n){const e=n||{},t=e.extent||Ma("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:bz(t,e.maxZoom,e.tileSize,e.maxResolution)};return new s3(r)}function bz(n,e,t,r){e=e!==void 0?e:_U,t=Ch(t!==void 0?t:vO);const i=Uu(n),s=Ls(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const l=e+1,o=new Array(l);for(let f=0;f<l;++f)o[f]=r/Math.pow(2,f);return o}function pne(n,e,t,r){const i=a3(n);return fne(i,e,t,r)}function a3(n){n=Ma(n);let e=n.getExtent();if(!e){const t=180*V0.degrees/n.getMetersPerUnit();e=Qm(-t,-t,t,t)}return e}class xz extends Xy{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ch(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||ko(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return _o()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:_z(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),l=Ch(i.getTileSize(e),this.tmpSize);return s==1?l:oJ(l,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=dne(i,e,r)),one(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class mne extends Op{constructor(e,t){super(e),this.tile=t}}function Mz(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,l=e.height,o=t.length,f=t[0].byteLength;if(i){const R=new Array(o);for(let U=0;U<o;++U)R[U]=new ImageData(new Uint8ClampedArray(t[U]),s,l);return n(R,r).data.buffer}const C=new Uint8ClampedArray(f),x=new Array(o),B=new Array(o);for(let R=0;R<o;++R)x[R]=new Uint8ClampedArray(t[R]),B[R]=[0,0,0,0];for(let R=0;R<f;R+=4){for(let U=0;U<o;++U){const N=x[U];B[U][0]=N[R],B[U][1]=N[R+1],B[U][2]=N[R+2],B[U][3]=N[R+3]}const P=n(B,r);C[R]=P[0],C[R+1]=P[1],C[R+2]=P[2],C[R+3]=P[3]}return C.buffer}}function gne(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+Mz.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function yne(n,e){const t=Mz(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class vne extends f_{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=gne(e,this.onWorkerMessage_.bind(this,i));else r[0]=yne(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(f){return f.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/s);for(let f=0;f<s;++f){const C=f*o,x=[];for(let B=0,R=i.length;B<R;++B)x.push(i[B].slice(C,C+o));this.workers_[f].postMessage({buffers:x,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},x)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const l=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const f=this.dataLookup_[o].buffer,C=o*l;r.set(new Uint8ClampedArray(f),C),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const Q9={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Y9 extends Op{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class wz extends Cz{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=bne(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(go.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new WL(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:pd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:_ne(this.layers_),pixelRatio:1,pixelToCoordinateTransform:pd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:ko(this),renderTargets:{}},this.setAttributions(function(r){const i=[];for(let s=0,l=e.sources.length;s<l;++s){const o=e.sources[s],f=o instanceof Xy?o:o.getSource();if(!f)continue;const C=f.getAttributions()?.(r);typeof C=="string"?i.push(C):C!==void 0&&i.push(...C)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new vne({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=af(e);i.size[0]=Math.ceil(Ls(e)/t),i.size[1]=Math.ceil(Uu(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const l=i.viewState;return l.center=s,l.projection=r,l.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!Ym(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const l=Cne(this.layers_[s],e);if(l)r[s]=l;else return}const i={};this.dispatchEvent(new Y9(Q9.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!Ym(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const f=Math.round(Ls(s)/l),C=Math.round(Uu(s)/l);o=SA(f,C),this.renderedImageCanvas_=new Gee(s,l,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Y9(Q9.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}wz.prototype.dispose;let v1=null;function Cne(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let l;if(s instanceof HTMLCanvasElement)l=s;else{if(s&&(l=s.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===r&&l.height===i)return l.getContext("2d").getImageData(0,0,r,i)}if(!v1)v1=SA(r,i,void 0,{willReadFrequently:!0});else{const o=v1.canvas;o.width!==r||o.height!==i?v1=SA(r,i,void 0,{willReadFrequently:!0}):v1.clearRect(0,0,r,i)}return v1.drawImage(l,0,0,r,i),v1.getImageData(0,0,r,i)}function _ne(n){return n.map(function(e){return e.getLayerState()})}function bne(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=xne(n[r]);return t}function xne(n){let e;return n instanceof Xy?n instanceof xz?e=new vz({source:n}):n instanceof Cz&&(e=new dz({source:n})):e=n,e}function Mne(n,e,t,r){const i=document.createElement("script"),s="olc_"+ko(e);function l(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){l(),t&&t()},1e4);window[s]=function(f){clearTimeout(o),l(),e(f)},document.head.appendChild(i)}const wne=/\{z\}/g,Sne=/\{x\}/g,Ene=/\{y\}/g,Bne=/\{-y\}/g;function One(n,e,t,r,i){return n.replace(wne,e.toString()).replace(Sne,t.toString()).replace(Ene,r.toString()).replace(Bne,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function Ine(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function Tne(n,e){return function(t,r,i){if(!t)return;let s;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(s=o.getHeight()-1)}return One(n,l,t[1],t[2],s)}}function Sz(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Tne(n[i],e);return kne(r)}function kne(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=rne(e),s=G1(i,n.length);return n[s](e,t,r)}}const hM={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class l3 extends xz{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===l3.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=ko(t),i=t.getState();let s;i==Ur.LOADING?(this.tileLoadingKeys_[r]=!0,s=hM.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ur.ERROR?hM.TILELOADERROR:i==Ur.LOADED?hM.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new mne(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Ine(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Sz(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class Pne extends l3{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Rne,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:rz,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!W0(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||W0(t,e)))return this.tileGrid;const r=ko(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=_z(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,l){const o=[e,t,r],f=this.getTileCoordForTileUrlFunction(o,s),C=f?this.tileUrlFunction(f,i,s):void 0,x=new this.tileClass(o,C!==void 0?Ur.IDLE:Ur.EMPTY,C!==void 0?C:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=l,x.addEventListener(go.CHANGE,this.handleTileChange.bind(this)),x}getTile(e,t,r,i,s){const l=this.getProjection();if(!l||!s||W0(l,s))return this.getTileInternal(e,t,r,i,l||s);const o=[e,t,r],f=this.getKey(),C=this.getTileGridForProjection(l),x=this.getTileGridForProjection(s),B=this.getTileCoordForTileUrlFunction(o,s),R=new gz(l,C,s,x,o,B,this.getTilePixelRatio(i),this.getGutter(),(P,U,N,W)=>this.getTileInternal(P,U,N,W,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return R.key=f,R}getTileInternal(e,t,r,i,s){const l=this.getKey();return this.createTile_(e,t,r,i,s,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Ma(e);if(r){const i=ko(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function Rne(n,e){n.getImage().src=e}class Ez extends Pne{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ma("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Mne(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ma("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const C=v_(t,r);i=JH(e.bounds,C)}const s=a3(r),l=e.minzoom||0,o=e.maxzoom||22,f=jO({extent:s,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=f,this.tileUrlFunction=Sz(e.tiles,f),e.attribution&&!this.getAttributions()){const C=i!==void 0?i:s;this.setAttributions(function(x){return XA(C,x.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class WO extends l3{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||a3(t),i=e.tileGrid||jO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Bz,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:iz,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Ur.IDLE){r.setState(Ur.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(i),o=i[0],f=s.getResolution(o);j0(l,-f,l);const C=this.tileGrid,x=C.getExtent();x&&Mp(l,x,l);const B=C.getZForResolution(f,this.zDirection);C.forEachTileCoord(l,B,R=>{const P=this.tileUrlFunction(R,e,t);this.sourceTiles_[P]||(this.sourceTiles_[P]=new this.tileClass(R,P?Ur.IDLE:Ur.EMPTY,P,this.format_,this.tileLoadFunction));const U=this.sourceTiles_[P];r.sourceTiles.push(U),this.tileKeysBySourceTileUrl_[P]||(this.tileKeysBySourceTileUrl_[P]=[]),this.tileKeysBySourceTileUrl_[P].push(r.getKey());const N=U.getState();if(N<Ur.LOADED){const W=X=>{this.handleTileChange(X);const $=U.getState();if($===Ur.LOADED||$===Ur.ERROR){const re=U.getKey();re in r.errorTileKeys?U.getState()===Ur.LOADED&&delete r.errorTileKeys[re]:r.loadingSourceTiles--,$===Ur.ERROR?r.errorTileKeys[re]=!0:U.removeEventListener(go.CHANGE,W),r.loadingSourceTiles===0&&r.setState($0(r.errorTileKeys)?Ur.LOADED:Ur.ERROR)}};U.addEventListener(go.CHANGE,W),r.loadingSourceTiles++}N===Ur.IDLE&&(U.extent=C.getTileCoordExtent(R),U.projection=t,U.resolution=C.getResolution(R[0]),U.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(R=>R.getState()===Ur.ERROR)?Ur.ERROR:Ur.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const l=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,r,i,s){const l=[e,t,r];let o=this.getTileCoordForTileUrlFunction(l,s);const f=this.getTileGrid().getExtent(),C=this.getTileGridForProjection(s);if(o&&f){const R=C.getTileCoordExtent(o);j0(R,-C.getResolution(e),R),XA(f,R)||(o=null)}let x=!0;if(o!==null){const R=this.tileGrid,P=C.getResolution(e),U=R.getZForResolution(P,1),N=C.getTileCoordExtent(o);j0(N,-P,N),R.forEachTileCoord(N,U,W=>{x=x&&!this.tileUrlFunction(W,i,s)})}const B=new Qee(l,x?Ur.EMPTY:Ur.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.getProjection();ia(i===null||W0(i,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const s=this.tileGrid,l=s.getResolutions().slice(),o=l.map(function(x,B){return s.getOrigin(B)}),f=l.map(function(x,B){return s.getTileSize(B)}),C=_U+1;for(let x=l.length;x<C;++x)l.push(l[x-1]/2),o.push(o[x-1]),f.push(f[x-1]);r=new s3({extent:s.getExtent(),origins:o,resolutions:l,tileSizes:f}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=Ch(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Bz(n,e){n.setLoader(function(t,r,i){XU(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function Dne(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,l=new Uint8ClampedArray(s.length),o=e.resolution*2,f=r-1,C=i-1,x=[0,0,0,0],B=2*Math.PI,R=Math.PI/2,P=Math.PI*e.sunEl/180,U=Math.PI*e.sunAz/180,N=Math.cos(P),W=Math.sin(P),X=e.highlightColor,$=e.shadowColor,re=e.accentColor,te=e.encoding;let V,ne,G,le,fe,pe,we,Se,xe,je,Me,rt,Ct,it,nt,Ge,Ie,$e,gt,Dt,ut,Rt;function St(Ke,Pe="mapbox"){if(Pe==="mapbox")return(Ke[0]*256*256+Ke[1]*256+Ke[2])*.1-1e4;if(Pe==="terrarium")return Ke[0]*256+Ke[1]+Ke[2]/256-32768}for(ne=0;ne<=C;++ne)for(fe=ne===0?0:ne-1,pe=ne===C?C:ne+1,V=0;V<=f;++V)G=V===0?0:V-1,le=V===f?f:V+1,we=(ne*r+G)*4,x[0]=s[we],x[1]=s[we+1],x[2]=s[we+2],x[3]=s[we+3],Se=e.vert*St(x,te),we=(ne*r+le)*4,x[0]=s[we],x[1]=s[we+1],x[2]=s[we+2],x[3]=s[we+3],xe=e.vert*St(x,te),je=(xe-Se)/o,we=(fe*r+V)*4,x[0]=s[we],x[1]=s[we+1],x[2]=s[we+2],x[3]=s[we+3],Se=e.vert*St(x,te),we=(pe*r+V)*4,x[0]=s[we],x[1]=s[we+1],x[2]=s[we+2],x[3]=s[we+3],xe=e.vert*St(x,te),Me=(xe-Se)/o,Ct=Math.atan2(Me,-je),Ct<0?Ct=R-Ct:Ct>R?Ct=B-Ct+R:Ct=R-Ct,rt=Math.atan(Math.sqrt(je*je+Me*Me)),Rt=W*Math.cos(rt)+N*Math.sin(rt)*Math.cos(U-Ct),it=Math.cos(rt),nt=255*Rt,gt=Math.min(Math.max(2*e.sunEl,0),1),Dt=1.875-e.opacity*1.75,ut=e.opacity!==.5?R*((Math.pow(Dt,rt)-1)/(Math.pow(Dt,R)-1)):rt,Ie={r:(1-it)*re.r*gt*255,g:(1-it)*re.g*gt*255,b:(1-it)*re.b*gt*255,a:(1-it)*re.a*gt*255},Ge=Math.abs(((Ct+U)/Math.PI+.5)%2-1),$e={r:(X.r*(1-Ge)+$.r*Ge)*nt,g:(X.g*(1-Ge)+$.g*Ge)*nt,b:(X.b*(1-Ge)+$.b*Ge)*nt,a:(X.a*(1-Ge)+$.a*Ge)*nt},we=(ne*r+V)*4,l[we]=Ie.r*(1-Ge)+$e.r,l[we+1]=Ie.g*(1-Ge)+$e.g,l[we+2]=Ie.b*(1-Ge)+$e.b,l[we+3]=s[we+3]*e.opacity*gt*Math.sin(ut);return new ImageData(l,r,i)}function Kne(n,e=512){return n.getExtent()?jO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():cm}function Oz(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function Fne(n,e,t="",r={},i=void 0){let s,l,o,f,C=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,f=o.source||o.layers,r=o):f=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(C=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:H2(s,o.accessToken),o=Oz(s,o)),new Promise(function(x,B){az(e,o).then(function(R){if(R.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof KO||n instanceof fC))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const P=n instanceof fC?"vector":"geojson";if(f?Array.isArray(f)?l=R.layers.find(function(te){return te.id===f[0]}).source:l=f:(l=R.layers.find(function(te){return te.source&&R.sources[te.source].type===P}).source,f=l),!l)return B(new Error(`No ${P} source found in the glStyle.`));function U(){if(!C)return Promise.resolve();if(n instanceof fC)return kz(R.sources[l],s,o).then(function(G){const le=n.getSource();le?G!==le&&(le.setTileUrlFunction(G.getTileUrlFunction()),typeof le.setUrls=="function"&&typeof G.getUrls=="function"&&le.setUrls(G.getUrls()),le.format_||(le.format_=G.format_),le.getAttributions()||le.setAttributions(G.getAttributions()),le.getTileLoadFunction()===Bz&&le.setTileLoadFunction(G.getTileLoadFunction()),W0(le.getProjection(),G.getProjection())&&(le.tileGrid=G.getTileGrid())):n.setSource(G);const fe=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&fe.getMinZoom()>0&&n.setMaxResolution(Hv(Math.max(0,fe.getMinZoom()-1e-12),fe.getResolutions()))});const te=R.sources[l];let V=n.getSource();(!V||V.get("mapbox-source")!==te)&&(V=Dz(te,s,o));const ne=n.getSource();return ne?V!==ne&&(ne.getAttributions()||ne.setAttributions(V.getAttributions()),ne.format_||(ne.format_=V.getFormat()),ne.url_=V.getUrl()):n.setSource(V),Promise.resolve()}let N,W;const X={},$={};function re(){if(!W&&(!R.sprite||X)){if(o.projection&&!i){const G=Ma(o.projection).getUnits();G!=="m"&&(i=cm.map(le=>le/V0[G]))}let te;const V=n.getSource();V instanceof WO&&V.format_ instanceof hz&&(te=V.format_.layerName_),W=ate(n,R,f,i,X,$,(ne,G=o.webfonts)=>ete(ne,G),o.getImage,te),n.getStyle()?U().then(x).catch(B):B(new Error(`Nothing to show for source [${l}]`))}else W?(n.setStyle(W),U().then(x).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(R.sprite){const te=Yee(R.sprite,o.accessToken,s||location.href);N=window.devicePixelRatio>=1.5?.5:1;const V=N==.5?"@2x":"";Promise.all(te.map(function(ne){const G=new URL(ne.url);let le=G.origin+G.pathname+V+".json"+G.search;return new Promise(function(fe,pe){Ly("Sprite",le,o).then(fe).catch(function(we){le=G.origin+G.pathname+".json"+G.search,Ly("Sprite",le,o).then(fe).catch(pe)})}).then(function(fe){fe===void 0&&B(new Error("No sprites found."));let pe;if(pe=G.origin+G.pathname+V+".png"+G.search,o.transformRequest){const we=o.transformRequest(pe,"SpriteImage")||pe;(we instanceof Request||we instanceof Promise)&&(pe=we)}$[ne.id]=pe;for(const we in fe){const Se=ne.id=="default"?we:`${ne.id}:${we}`;X[Se]=fe[we]}}).catch(function(fe){B(new Error(`Sprites cannot be loaded: ${le}: ${fe.message}`))})})).then(re).catch(B)}else re()}).catch(B)})}function Iz(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function Lne(n,e){const t=n.bounds;if(t){const r=F6([t[0],t[1]],e),i=F6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Ma(e).getExtent()}function Tz(n,e,t){const r=new Ez({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),l=Ma(t.projection||"EPSG:3857"),o=Lne(i,l),f=l.getExtent(),C=i.minzoom||0,x=i.maxzoom||22,B={attributions:r.getAttributions(),projection:l,tileGrid:new s3({origin:f?Hm(f):s.getOrigin(0),extent:o||s.getExtent(),minZoom:C,resolutions:Kne(l,e.tileSize).slice(0,x+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function Une(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},l=n.paint||{};i.paint=l,sf.zoom=zO(e,t.resolutions||cm),sf.distanceFromCenter=0;let o;const f=Si(i,"paint","background-color",vp,r);return l["background-opacity"]!==void 0&&(o=Si(i,"paint","background-opacity",vp,r)),s.visibility=="none"?void 0:E0(f,o)}function zne(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Zy({source:new Xy({}),render(i){const s=Une(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function kz(n,e,t){return new Promise(function(r,i){lz(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=Tz(n,s,t);o.tileLoadFunction=l,o.format=new hz({layerName:"mvt:layer"});const f=new WO(o);f.set("mapbox-source",n),r(f)}).catch(i)})}function Nne(n,e,t){const r=new fC({declutter:!0,visible:!1});return kz(n,e,t).then(function(i){r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function Pz(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Gne(n,e,t){return new Promise(function(r,i){lz(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=new Ez({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=Tz(n,s,t).tileGrid,t.projection&&(o.projection=Ma(t.projection));const f=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(C,x,B){const R=Pz(B);let P=f(C,x,B);if(P.indexOf(R)!=-1){const U=o.getTileGrid().getTileCoordExtent(C);P=P.replace(R,U.toString())}return P}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function Rz(n,e,t){const r=new vz;return Gne(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function jne(n,e,t){const r=Rz(n,e,t);return new dz({source:new wz({operationType:"image",operation:Dne,sources:[r]})})}function Dz(n,e,t){const r=t.projection?new K9({dataProjection:t.projection}):new K9,i=n.data,s={};if(typeof i=="string"){const[o]=i2(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const C=(B,R,P)=>{const U=Pz(P);return o.replace(U,`${B.join(",")}`)},x=new r2({attributions:n.attribution,format:r,loader:(B,R,P,U,N)=>{const W=typeof C=="function"?C(B,R,P):C;Ly("GeoJSON",W,t).then(X=>{const $=x.getFormat().readFeatures(X,{featureProjection:P});x.addFeatures($),U($)}).catch(X=>{x.removeLoadedExtent(B),N()})},strategy:wee});return x.set("mapbox-source",n),x}const f=new r2({attributions:n.attribution,format:r,url:o,loader:(C,x,B,R,P)=>{Ly("GeoJSON",o,t).then(U=>{const N=f.getFormat().readFeatures(U,{featureProjection:B});f.addFeatures(N),R(N)}).catch(U=>{f.removeLoadedExtent(C),P()})}});return f}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const l=new r2(Object.assign({attributions:n.attribution,format:r},s));return l.set("mapbox-source",n),l}function Wne(n,e,t){return new KO({declutter:!0,source:Dz(n,e,t),visible:!1})}function Qne(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],Yne(n,e,r,t))}}function Yne(n,e,t,r){sf.zoom=t,sf.distanceFromCenter=0;const i=Si(n,"paint","raster-opacity",vp,r);e.setOpacity(i)}function qne(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=_B(r.layers),s=n.get("mapbox-layers"),l=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function $ne(n,e,t,r){const i=sz(n),s=n.layers,l=t.type,o=t.source||Iz(s,t.ref),f=n.sources[o];let C;if(l=="background")C=zne(t,r,i);else if(f.type=="vector")C=Nne(f,e,r);else if(f.type=="raster")C=Rz(f,e,r),C.setVisible(t.layout?t.layout.visibility!=="none":!0),C.on("prerender",Qne(t,C,i));else if(f.type=="geojson")C=Wne(f,e,r);else if(f.type=="raster-dem"&&t.type=="hillshade"){const B=jne(f,e,r);C=B,B.getSource().on("beforeoperations",function(R){const P=R.data;P.resolution=K6(r.projection||"EPSG:3857",R.resolution,af(R.extent),"m"),sf.zoom=zO(R.resolution,r.resolutions||cm),sf.distanceFromCenter=0,P.encoding=f.encoding,P.vert=5*Si(t,"paint","hillshade-exaggeration",vp,i),P.sunAz=Si(t,"paint","hillshade-illumination-direction",vp,i),P.sunEl=35,P.opacity=.3,P.highlightColor=Si(t,"paint","hillshade-highlight-color",vp,i),P.shadowColor=Si(t,"paint","hillshade-shadow-color",vp,i),P.accentColor=Si(t,"paint","hillshade-accent-color",vp,i)}),C.setVisible(t.layout?t.layout.visibility!=="none":!0)}const x=o;return C&&C.set("mapbox-source",x),C}function q9(n,e,t,r){const i=[];let s=null;if(e instanceof n3){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const B=r.projection?Ma(r.projection):s.getProjection();s=new gp(Object.assign(s.getProperties(),{maxResolution:cm[0]/V0[B.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(F6(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(cm[0]/V0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const l=n.layers;let o=[],f,C,x;for(let B=0,R=l.length;B<R;++B){const P=l[B],U=P.type;if(U=="heatmap"){console.debug(`layers[${B}].type "${U}" not supported`);continue}else x=P.source||Iz(l,P.ref),(!x||x!=C)&&(o.length&&(i.push($9(f,o,n,t,e,r)),o=[]),f=$ne(n,t,P,r),f instanceof KO||f instanceof fC||(o=[]),C=f.get("mapbox-source")),o.push(P.id)}return i.push($9(f,o,n,t,e,r)),Promise.all(i)}function Vne(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new n3({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:H2(e,t.accessToken);t=Oz(s,t),r=new Promise(function(l,o){az(e,t).then(function(f){q9(f,i,s,t).then(function(){l(i)}).catch(o)}).catch(function(f){o(new Error(`Could not load ${e}: ${f.message}`))})})}else r=new Promise(function(s,l){q9(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:H2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(l)});return r}function $9(n,e,t,r,i,s={}){let l=24,o=0;const f=t.layers;for(let C=0,x=f.length;C<x;++C){const B=f[C];e.indexOf(B.id)!==-1&&(l=Math.min("minzoom"in B?B.minzoom:0,l),o=Math.max("maxzoom"in B?B.maxzoom:24,o))}return new Promise(function(C,x){const B=function(){const P=n.getSource();if(!P||P.getState()==="error"){x(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in P){const U=P.getTileGrid();if(U){const N=U.getMinZoom();(l>0||N>0)&&n.setMaxResolution(Math.min(Hv(Math.max(0,l-1e-12),cm),Hv(Math.max(0,N-1e-12),U.getResolutions()))),o<24&&n.setMinResolution(Hv(o,cm))}}else l>0&&n.setMaxResolution(Hv(Math.max(0,l-1e-12),cm));P instanceof r2||P instanceof WO?Fne(n,t,e,Object.assign({styleUrl:r},s)).then(function(){qne(n,i),C()}).catch(x):C()};n.set("mapbox-layers",e);const R=i.getLayers();R.getArray().indexOf(n)===-1&&R.push(n),n.getSource()?B():n.once("change:source",B)})}function oi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oi=function(){return l},l}oi();function V9(n){return oi().f[0]++,oi().s[0]++,oi().b[1][0]++,!n||(oi().b[1][1]++,n.length<2)?(oi().b[0][0]++,oi().s[1]++,null):(oi().b[0][1]++,oi().s[2]++,oe.jsx("span",{className:"maputnik-coords",children:n.map(e=>(oi().f[1]++,oi().s[3]++,String(e).padStart(7," "))).join(", ")}))}class Hne extends ur.Component{static defaultProps=(oi().s[4]++,{onMapLoaded:()=>{oi().f[2]++},onDataChange:()=>{oi().f[3]++},onLayerSelect:()=>{oi().f[4]++}});updateStyle;map;container=(oi().s[5]++,null);overlay;popupContainer=(oi().s[6]++,null);constructor(e){oi().f[5]++,oi().s[7]++,super(e),oi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},oi().s[9]++,this.updateStyle=cx.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(oi().f[6]++,oi().s[10]++,this.map)oi().b[2][1]++;else{oi().b[2][0]++,oi().s[11]++;return}oi().s[12]++,this.map.getLayers().clear(),oi().s[13]++,Vne(this.map,e)}componentDidUpdate(e){oi().f[7]++,oi().s[14]++,this.props.mapStyle!==e.mapStyle?(oi().b[3][0]++,oi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):oi().b[3][1]++}componentDidMount(){oi().f[8]++,oi().s[16]++,this.overlay=new Wee({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(oi().s[17]++,new n3({target:this.container,overlays:[this.overlay],view:new gp({zoom:1,center:[180,-90]})}));oi().s[18]++,e.on("pointermove",r=>{oi().f[9]++;const i=(oi().s[19]++,R4(r.coordinate));oi().s[20]++,this.setState({cursor:[i[0].toFixed(2),i[1].toFixed(2)]})}),oi().s[21]++;const t=()=>{oi().f[10]++;const r=(oi().s[22]++,e.getView().getZoom()),i=(oi().s[23]++,R4(e.getView().getCenter()));oi().s[24]++,this.props.onChange({zoom:r,center:{lng:i[0],lat:i[1]}})};oi().s[25]++,t(),oi().s[26]++,e.on("moveend",t),oi().s[27]++,e.on("postrender",r=>{oi().f[11]++;const i=(oi().s[28]++,R4(e.getView().getCenter()));oi().s[29]++,this.setState({center:[i[0].toFixed(2),i[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),oi().s[30]++,this.map=e,oi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(oi().s[32]++,e=>{oi().f[12]++,oi().s[33]++,e.target.blur(),oi().s[34]++,this.overlay.setPosition(void 0)});render(){oi().f[13]++;const e=(oi().s[35]++,this.props.t);return oi().s[36]++,oe.jsxs("div",{className:"maputnik-ol-container",children:[oe.jsxs("div",{ref:t=>(oi().f[14]++,oi().s[37]++,this.popupContainer=t),style:{background:"black"},className:"maputnik-popup",children:[oe.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:"×"}),oe.jsx(DL,{features:(oi().b[4][0]++,this.state.selectedFeatures||(oi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),oe.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(oi().b[5][0]++,this.props.debugToolbox&&(oi().b[5][1]++,oe.jsxs("div",{className:"maputnik-ol-debug",children:[oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("cursor:")," "]}),oe.jsx("span",{children:V9(this.state.cursor)})]}),oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("center:")," "]}),oe.jsx("span",{children:V9(this.state.center)})]}),oe.jsxs("div",{children:[oe.jsxs("label",{children:[e("rotation:")," "]}),oe.jsx("span",{children:this.state.rotation})]})]}))),oe.jsx("div",{className:"maputnik-ol",ref:t=>(oi().f[15]++,oi().s[38]++,this.container=t),role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const Zne=(oi().s[39]++,Us()(Hne));var dM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var H9;function Xne(){return H9||(H9=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var o in s)e.call(s,o)&&s[o]&&(l=i(l,o));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(dM)),dM.exports}var Jne=Xne();const dm=Gl(Jne);function O1(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return O1=function(){return l},l}O1();class ere extends ur.Component{render(){O1().f[0]++;const e=(O1().s[0]++,{width:20,height:20,...this.props.style});return O1().s[1]++,this.props.isCollapsed?(O1().b[0][0]++,oe.jsx(FV,{style:e})):(O1().b[0][1]++,oe.jsx(KV,{style:e}))}}function dy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dy=function(){return l},l}dy();class tre extends ur.Component{render(){return dy().f[0]++,dy().s[0]++,oe.jsx("li",{className:"maputnik-layer-list-group",children:oe.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(dy().f[1]++,dy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[oe.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(ere,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function bl(){return bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bl.apply(null,arguments)}function nre(n){if(Array.isArray(n))return n}function rre(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,l,o=[],f=!0,C=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(f=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);f=!0);}catch(x){C=!0,i=x}finally{try{if(!f&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(C)throw i}}return o}}function nB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Kz(n,e){if(n){if(typeof n=="string")return nB(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nB(n,e):void 0}}function ire(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fz(n,e){return nre(n)||rre(n,e)||Kz(n,e)||ire()}function Uy(n){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(n)}function ore(n,e){if(Uy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lz(n){var e=ore(n,"string");return Uy(e)=="symbol"?e:e+""}function Ka(n,e,t){return(e=Lz(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Ka(n,i,t[i])})}return n}function O_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sre(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Lz(r.key),r)}}function I_(n,e,t){return e&&sre(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ls(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function QO(n,e){if(e&&(Uy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(n)}function YC(n){return YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},YC(n)}function rB(n,e){return rB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},rB(n,e)}function YO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&rB(n,e)}var pM,Z9;function are(){if(Z9)return pM;Z9=1;var n=function(e,t,r,i,s,l,o,f){if(!e){var C;if(t===void 0)C=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[r,i,s,l,o,f],B=0;C=new Error(t.replace(/%s/g,function(){return x[B++]})),C.name="Invariant Violation"}throw C.framesToPop=1,C}};return pM=n,pM}var lre=are();const J1=Gl(lre);function Are(n){if(Array.isArray(n))return nB(n)}function ure(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function cre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hre(n){return Are(n)||ure(n)||Kz(n)||cre()}var dre=function(){function n(){O_(this,n),Ka(this,"refs",{})}return I_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(fre)}}]),n}();function fre(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function Uz(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var Lg={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},zz=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function Rb(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function Db(n,e){n.style["".concat(zz,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function mM(n,e){n.style["".concat(zz,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function Zv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function X9(n,e,t){return Math.max(n,Math.min(t,e))}function fy(n){return n.substr(-2)==="px"?parseFloat(n):0}function pre(n){var e=window.getComputedStyle(n);return{bottom:fy(e.marginBottom),left:fy(e.marginLeft),right:fy(e.marginRight),top:fy(e.marginTop)}}function qO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function gM(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function Dv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function mre(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function o2(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:o2(n.parentNode,e,r)}}function gre(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function J9(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,l="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);J1(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),l=o[1]}return J1(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),l==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function yre(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];J1(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=Fz(i,2),l=s[0],o=s[1];return[J9({height:e,lockOffset:l,width:t}),J9({height:e,lockOffset:o,width:t})]}function vre(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function Nz(n){return n instanceof HTMLElement?vre(n)?n:Nz(n.parentNode):null}function Cre(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:fy(e.gridColumnGap),y:fy(e.gridRowGap)}:{x:0,y:0}}var C1={ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},I1={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function _re(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=hre(r.querySelectorAll(e));return i.forEach(function(s,l){if(s.type!=="file"&&(s.value=t[l].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===I1.Canvas&&t[l].width>0&&t[l].height>0){var o=s.getContext("2d");o.drawImage(t[l],0,0)}}),r}function bre(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){YO(s,i);function s(){var l,o;O_(this,s);for(var f=arguments.length,C=new Array(f),x=0;x<f;x++)C[x]=arguments[x];return o=QO(this,(l=YC(s)).call.apply(l,[this].concat(C))),Ka(ls(ls(o)),"wrappedInstance",nr.createRef()),o}return I_(s,[{key:"componentDidMount",value:function(){var o=Dx.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return J1(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return nr.createElement(n,bl({ref:o},this.props))}}]),s}(nr.Component),Ka(e,"displayName",qO("sortableHandle",n)),t}function eT(n){return n.sortableHandle!=null}var xre=function(){function n(e,t){O_(this,n),this.container=e,this.onScrollCallback=t}return I_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,l=t.maxTranslate,o=t.width,f=t.height,C={x:0,y:0},x={x:1,y:1},B={x:10,y:10},R=this.container,P=R.scrollTop,U=R.scrollLeft,N=R.scrollHeight,W=R.scrollWidth,X=R.clientHeight,$=R.clientWidth,re=P===0,te=N-P-X===0,V=U===0,ne=W-U-$===0;i.y>=l.y-f/2&&!te?(C.y=1,x.y=B.y*Math.abs((l.y-f/2-i.y)/f)):i.x>=l.x-o/2&&!ne?(C.x=1,x.x=B.x*Math.abs((l.x-o/2-i.x)/o)):i.y<=s.y+f/2&&!re?(C.y=-1,x.y=B.y*Math.abs((i.y-f/2-s.y)/f)):i.x<=s.x+o/2&&!V&&(C.x=-1,x.x=B.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(C.x!==0||C.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var G={left:x.x*C.x,top:x.y*C.y};r.container.scrollTop+=G.top,r.container.scrollLeft+=G.left,r.onScrollCallback(G)},5))}}]),n}();function Mre(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function wre(n){var e=[I1.Input,I1.Textarea,I1.Select,I1.Option,I1.Button];return!!(e.indexOf(n.target.tagName)!==-1||Zv(n.target,function(t){return t.contentEditable==="true"}))}var Gz={axis:Jn.oneOf(["x","y","xy"]),contentWindow:Jn.any,disableAutoscroll:Jn.bool,distance:Jn.number,getContainer:Jn.func,getHelperDimensions:Jn.func,helperClass:Jn.string,helperContainer:Jn.oneOfType([Jn.func,typeof HTMLElement>"u"?Jn.any:Jn.instanceOf(HTMLElement)]),hideSortableGhost:Jn.bool,keyboardSortingTransitionDuration:Jn.number,lockAxis:Jn.string,lockOffset:Jn.oneOfType([Jn.number,Jn.string,Jn.arrayOf(Jn.oneOfType([Jn.number,Jn.string]))]),lockToContainerEdges:Jn.bool,onSortEnd:Jn.func,onSortMove:Jn.func,onSortOver:Jn.func,onSortStart:Jn.func,pressDelay:Jn.number,pressThreshold:Jn.number,keyCodes:Jn.shape({lift:Jn.arrayOf(Jn.number),drop:Jn.arrayOf(Jn.number),cancel:Jn.arrayOf(Jn.number),up:Jn.arrayOf(Jn.number),down:Jn.arrayOf(Jn.number)}),shouldCancelStart:Jn.func,transitionDuration:Jn.number,updateBeforeSortStart:Jn.func,useDragHandle:Jn.bool,useWindowAsScrollContainer:Jn.bool},jz={lift:[C1.SPACE],drop:[C1.SPACE],cancel:[C1.ESC],up:[C1.UP,C1.LEFT],down:[C1.DOWN,C1.RIGHT]},Sre={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Mre,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:jz,shouldCancelStart:wre,transitionDuration:300,useWindowAsScrollContainer:!1},Ere=Object.keys(Gz);function Bre(n){J1(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Ore(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var Wz=nr.createContext({manager:{}});function Ire(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){YO(s,i);function s(l){var o;O_(this,s),o=QO(this,YC(s).call(this,l)),Ka(ls(ls(o)),"state",{}),Ka(ls(ls(o)),"handleStart",function(C){var x=o.props,B=x.distance,R=x.shouldCancelStart;if(!(C.button===2||R(C))){o.touched=!0,o.position=Dv(C);var P=Zv(C.target,function(re){return re.sortableInfo!=null});if(P&&P.sortableInfo&&o.nodeIsChild(P)&&!o.state.sorting){var U=o.props.useDragHandle,N=P.sortableInfo,W=N.index,X=N.collection,$=N.disabled;if($||U&&!Zv(C.target,eT))return;o.manager.active={collection:X,index:W},!mre(C)&&C.target.tagName===I1.Anchor&&C.preventDefault(),B||(o.props.pressDelay===0?o.handlePress(C):o.pressTimer=setTimeout(function(){return o.handlePress(C)},o.props.pressDelay))}}}),Ka(ls(ls(o)),"nodeIsChild",function(C){return C.sortableInfo.manager===o.manager}),Ka(ls(ls(o)),"handleMove",function(C){var x=o.props,B=x.distance,R=x.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var P=Dv(C),U={x:o.position.x-P.x,y:o.position.y-P.y},N=Math.abs(U.x)+Math.abs(U.y);o.delta=U,!B&&(!R||N>=R)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):B&&N>=B&&o.manager.isActive()&&o.handlePress(C)}}),Ka(ls(ls(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),Ka(ls(ls(o)),"cancel",function(){var C=o.props.distance,x=o.state.sorting;x||(C||clearTimeout(o.pressTimer),o.manager.active=null)}),Ka(ls(ls(o)),"handlePress",function(C){try{var x=o.manager.getActive(),B=function(){if(x){var R=function(){var pe=V.sortableInfo.index,we=pre(V),Se=Cre(o.container),xe=o.scrollContainer.getBoundingClientRect(),je=N({index:pe,node:V,collection:ne});if(o.node=V,o.margin=we,o.gridGap=Se,o.width=je.width,o.height=je.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=V.getBoundingClientRect(),o.containerBoundingRect=xe,o.index=pe,o.newIndex=pe,o.axis={x:U.indexOf("x")>=0,y:U.indexOf("y")>=0},o.offsetEdge=o2(V,o.container),G?o.initialOffset=Dv(fM({},C,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=Dv(C),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(_re(V)),Rb(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-we.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-we.top,"px"),width:"".concat(o.width,"px")}),G&&o.helper.focus(),X&&(o.sortableGhost=V,Rb(V,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},G){var Me=te?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,rt=Me.top,Ct=Me.left,it=Me.width,nt=Me.height,Ge=rt+nt,Ie=Ct+it;o.axis.x&&(o.minTranslate.x=Ct-o.boundingClientRect.left,o.maxTranslate.x=Ie-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=rt-o.boundingClientRect.top,o.maxTranslate.y=Ge-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(te?0:xe.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(te?o.contentWindow.innerWidth:xe.left+xe.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(te?0:xe.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(te?o.contentWindow.innerHeight:xe.top+xe.height)-o.boundingClientRect.top-o.height/2);W&&W.split(" ").forEach(function($e){return o.helper.classList.add($e)}),o.listenerNode=C.touches?C.target:o.contentWindow,G?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(Lg.move.forEach(function($e){return o.listenerNode.addEventListener($e,o.handleSortMove,!1)}),Lg.end.forEach(function($e){return o.listenerNode.addEventListener($e,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:pe}),re&&re({node:V,index:pe,collection:ne,isKeySorting:G,nodes:o.manager.getOrderedRefs(),helper:o.helper},C),G&&o.keyMove(0)},P=o.props,U=P.axis,N=P.getHelperDimensions,W=P.helperClass,X=P.hideSortableGhost,$=P.updateBeforeSortStart,re=P.onSortStart,te=P.useWindowAsScrollContainer,V=x.node,ne=x.collection,G=o.manager.isKeySorting,le=function(){if(typeof $=="function"){o._awaitingUpdateBeforeSortStart=!0;var fe=Ore(function(){var pe=V.sortableInfo.index;return Promise.resolve($({collection:ne,index:pe,node:V,isKeySorting:G},C)).then(function(){})},function(pe,we){if(o._awaitingUpdateBeforeSortStart=!1,pe)throw we;return we});if(fe&&fe.then)return fe.then(function(){})}}();return le&&le.then?le.then(R):R(le)}}();return Promise.resolve(B&&B.then?B.then(function(){}):void 0)}catch(R){return Promise.reject(R)}}),Ka(ls(ls(o)),"handleSortMove",function(C){var x=o.props.onSortMove;typeof C.preventDefault=="function"&&C.cancelable&&C.preventDefault(),o.updateHelperPosition(C),o.animateNodes(),o.autoscroll(),x&&x(C)}),Ka(ls(ls(o)),"handleSortEnd",function(C){var x=o.props,B=x.hideSortableGhost,R=x.onSortEnd,P=o.manager,U=P.active.collection,N=P.isKeySorting,W=o.manager.getOrderedRefs();o.listenerNode&&(N?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(Lg.move.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortMove)}),Lg.end.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),B&&o.sortableGhost&&Rb(o.sortableGhost,{opacity:"",visibility:""});for(var X=0,$=W.length;X<$;X++){var re=W[X],te=re.node;re.edgeOffset=null,re.boundingClientRect=null,Db(te,null),mM(te,null),re.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof R=="function"&&R({collection:U,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:N,nodes:W},C),o.touched=!1}),Ka(ls(ls(o)),"autoscroll",function(){var C=o.props.disableAutoscroll,x=o.manager.isKeySorting;if(C){o.autoScroller.clear();return}if(x){var B=fM({},o.translate),R=0,P=0;o.axis.x&&(B.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),R=o.translate.x-B.x),o.axis.y&&(B.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),P=o.translate.y-B.y),o.translate=B,Db(o.helper,o.translate),o.scrollContainer.scrollLeft+=R,o.scrollContainer.scrollTop+=P;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),Ka(ls(ls(o)),"onAutoScroll",function(C){o.translate.x+=C.left,o.translate.y+=C.top,o.animateNodes()}),Ka(ls(ls(o)),"handleKeyDown",function(C){var x=C.keyCode,B=o.props,R=B.shouldCancelStart,P=B.keyCodes,U=P===void 0?{}:P,N=fM({},jz,U);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!N.lift.includes(x)||R(C)||!o.isValidSortingTarget(C))||(C.stopPropagation(),C.preventDefault(),N.lift.includes(x)&&!o.manager.active?o.keyLift(C):N.drop.includes(x)&&o.manager.active?o.keyDrop(C):N.cancel.includes(x)?(o.newIndex=o.manager.active.index,o.keyDrop(C)):N.up.includes(x)?o.keyMove(-1):N.down.includes(x)&&o.keyMove(1))}),Ka(ls(ls(o)),"keyLift",function(C){var x=C.target,B=Zv(x,function(N){return N.sortableInfo!=null}),R=B.sortableInfo,P=R.index,U=R.collection;o.initialFocusedNode=x,o.manager.isKeySorting=!0,o.manager.active={index:P,collection:U},o.handlePress(C)}),Ka(ls(ls(o)),"keyMove",function(C){var x=o.manager.getOrderedRefs(),B=x[x.length-1].node.sortableInfo.index,R=o.newIndex+C,P=o.newIndex;if(!(R<0||R>B)){o.prevIndex=P,o.newIndex=R;var U=gre(o.newIndex,o.prevIndex,o.index),N=x.find(function(G){var le=G.node;return le.sortableInfo.index===U}),W=N.node,X=o.containerScrollDelta,$=N.boundingClientRect||gM(W,X),re=N.translate||{x:0,y:0},te={top:$.top+re.y-X.top,left:$.left+re.x-X.left},V=P<R,ne={x:V&&o.axis.x?W.offsetWidth-o.width:0,y:V&&o.axis.y?W.offsetHeight-o.height:0};o.handleSortMove({pageX:te.left+ne.x,pageY:te.top+ne.y,ignoreTransition:C===0})}}),Ka(ls(ls(o)),"keyDrop",function(C){o.handleSortEnd(C),o.initialFocusedNode&&o.initialFocusedNode.focus()}),Ka(ls(ls(o)),"handleKeyEnd",function(C){o.manager.active&&o.keyDrop(C)}),Ka(ls(ls(o)),"isValidSortingTarget",function(C){var x=o.props.useDragHandle,B=C.target,R=Zv(B,function(P){return P.sortableInfo!=null});return R&&R.sortableInfo&&!R.sortableInfo.disabled&&(x?eT(B):B.sortableInfo)});var f=new dre;return Bre(l),o.manager=f,o.wrappedInstance=nr.createRef(),o.sortableContextValue={manager:f},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return I_(s,[{key:"componentDidMount",value:function(){var o=this,f=this.props.useWindowAsScrollContainer,C=this.getContainer();Promise.resolve(C).then(function(x){o.container=x,o.document=o.container.ownerDocument||document;var B=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof B=="function"?B():B,o.scrollContainer=f?o.document.scrollingElement||o.document.documentElement:Nz(o.container)||o.container,o.autoScroller=new xre(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(R){return Lg[R].forEach(function(P){return o.container.addEventListener(P,o.events[R],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(f){return Lg[f].forEach(function(C){return o.container.removeEventListener(C,o.events[f])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var f=this.props,C=f.lockAxis,x=f.lockOffset,B=f.lockToContainerEdges,R=f.transitionDuration,P=f.keyboardSortingTransitionDuration,U=P===void 0?R:P,N=this.manager.isKeySorting,W=o.ignoreTransition,X=Dv(o),$={x:X.x-this.initialOffset.x,y:X.y-this.initialOffset.y};if($.y-=window.pageYOffset-this.initialWindowScroll.top,$.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=$,B){var re=yre({height:this.height,lockOffset:x,width:this.width}),te=Fz(re,2),V=te[0],ne=te[1],G={x:this.width/2-V.x,y:this.height/2-V.y},le={x:this.width/2-ne.x,y:this.height/2-ne.y};$.x=X9(this.minTranslate.x+G.x,this.maxTranslate.x-le.x,$.x),$.y=X9(this.minTranslate.y+G.y,this.maxTranslate.y-le.y,$.y)}C==="x"?$.y=0:C==="y"&&($.x=0),N&&U&&!W&&mM(this.helper,U),Db(this.helper,$)}},{key:"animateNodes",value:function(){var o=this.props,f=o.transitionDuration,C=o.hideSortableGhost,x=o.onSortOver,B=this.containerScrollDelta,R=this.windowScrollDelta,P=this.manager.getOrderedRefs(),U={left:this.offsetEdge.left+this.translate.x+B.left,top:this.offsetEdge.top+this.translate.y+B.top},N=this.manager.isKeySorting,W=this.newIndex;this.newIndex=null;for(var X=0,$=P.length;X<$;X++){var re=P[X].node,te=re.sortableInfo.index,V=re.offsetWidth,ne=re.offsetHeight,G={height:this.height>ne?ne/2:this.height/2,width:this.width>V?V/2:this.width/2},le=N&&te>this.index&&te<=W,fe=N&&te<this.index&&te>=W,pe={x:0,y:0},we=P[X].edgeOffset;we||(we=o2(re,this.container),P[X].edgeOffset=we,N&&(P[X].boundingClientRect=gM(re,B)));var Se=X<P.length-1&&P[X+1],xe=X>0&&P[X-1];if(Se&&!Se.edgeOffset&&(Se.edgeOffset=o2(Se.node,this.container),N&&(Se.boundingClientRect=gM(Se.node,B))),te===this.index){C&&(this.sortableGhost=re,Rb(re,{opacity:0,visibility:"hidden"}));continue}f&&mM(re,f),this.axis.x?this.axis.y?fe||te<this.index&&(U.left+R.left-G.width<=we.left&&U.top+R.top<=we.top+G.height||U.top+R.top+G.height<=we.top)?(pe.x=this.width+this.marginOffset.x,we.left+pe.x>this.containerBoundingRect.width-G.width&&Se&&(pe.x=Se.edgeOffset.left-we.left,pe.y=Se.edgeOffset.top-we.top),this.newIndex===null&&(this.newIndex=te)):(le||te>this.index&&(U.left+R.left+G.width>=we.left&&U.top+R.top+G.height>=we.top||U.top+R.top+G.height>=we.top+ne))&&(pe.x=-(this.width+this.marginOffset.x),we.left+pe.x<this.containerBoundingRect.left+G.width&&xe&&(pe.x=xe.edgeOffset.left-we.left,pe.y=xe.edgeOffset.top-we.top),this.newIndex=te):le||te>this.index&&U.left+R.left+G.width>=we.left?(pe.x=-(this.width+this.marginOffset.x),this.newIndex=te):(fe||te<this.index&&U.left+R.left<=we.left+G.width)&&(pe.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=te)):this.axis.y&&(le||te>this.index&&U.top+R.top+G.height>=we.top?(pe.y=-(this.height+this.marginOffset.y),this.newIndex=te):(fe||te<this.index&&U.top+R.top<=we.top+G.height)&&(pe.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=te))),Db(re,pe),P[X].translate=pe}this.newIndex==null&&(this.newIndex=this.index),N&&(this.newIndex=W);var je=N?this.prevIndex:W;x&&this.newIndex!==je&&x({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:je,isKeySorting:N,nodes:P,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return J1(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?Dx.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return nr.createElement(Wz.Provider,{value:this.sortableContextValue},nr.createElement(n,bl({ref:o},Uz(this.props,Ere))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(nr.Component),Ka(e,"displayName",qO("sortableList",n)),Ka(e,"defaultProps",Sre),Ka(e,"propTypes",Gz),t}var Qz={index:Jn.number.isRequired,collection:Jn.oneOfType([Jn.number,Jn.string]),disabled:Jn.bool},Tre=Object.keys(Qz);function kre(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){YO(s,i);function s(){var l,o;O_(this,s);for(var f=arguments.length,C=new Array(f),x=0;x<f;x++)C[x]=arguments[x];return o=QO(this,(l=YC(s)).call.apply(l,[this].concat(C))),Ka(ls(ls(o)),"wrappedInstance",nr.createRef()),o}return I_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,f=o.collection,C=o.disabled,x=o.index,B=Dx.findDOMNode(this);B.sortableInfo={collection:f,disabled:C,index:x,manager:this.context.manager},this.node=B,this.ref={node:B},this.context.manager.add(f,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return J1(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return nr.createElement(n,bl({ref:o},Uz(this.props,Tre)))}}]),s}(nr.Component),Ka(e,"displayName",qO("sortableElement",n)),Ka(e,"contextType",Wz),Ka(e,"propTypes",Qz),Ka(e,"defaultProps",{collection:0}),t}function Co(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="9e5cea44d6de76879ba508582e9e2916eaff3f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:68,column:29},end:{line:68,column:82}},16:{start:{line:69,column:4},end:{line:114,column:9}},17:{start:{line:73,column:25},end:{line:73,column:72}},18:{start:{line:89,column:31},end:{line:89,column:79}},19:{start:{line:98,column:31},end:{line:98,column:76}},20:{start:{line:108,column:31},end:{line:108,column:88}},21:{start:{line:117,column:30},end:{line:117,column:106}},22:{start:{line:117,column:73},end:{line:117,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:115,column:3}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:25},end:{line:73,column:72}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:89,column:23},end:{line:89,column:24}},loc:{start:{line:89,column:31},end:{line:89,column:79}},line:89},9:{name:"(anonymous_9)",decl:{start:{line:98,column:23},end:{line:98,column:24}},loc:{start:{line:98,column:31},end:{line:98,column:76}},line:98},10:{name:"(anonymous_10)",decl:{start:{line:108,column:23},end:{line:108,column:24}},loc:{start:{line:108,column:31},end:{line:108,column:88}},line:108},11:{name:"(anonymous_11)",decl:{start:{line:117,column:46},end:{line:117,column:47}},loc:{start:{line:117,column:73},end:{line:117,column:105}},line:117}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:68,column:29},end:{line:68,column:82}},type:"cond-expr",locations:[{start:{line:68,column:67},end:{line:68,column:73}},{start:{line:68,column:76},end:{line:68,column:82}}],line:68}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAE5B,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,MAAC;AAAA;AAAA,QACC,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB,GACF;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9e5cea44d6de76879ba508582e9e2916eaff3f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Co=function(){return l},l}Co();const Pre=(Co().s[0]++,bre(n=>(Co().f[0]++,Co().s[1]++,oe.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[oe.jsx(RL,{className:"layer-handle__icon",type:n.layerType}),oe.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class yM extends ur.Component{renderIcon(){switch(Co().f[1]++,Co().s[2]++,this.props.action){case"duplicate":return Co().b[0][0]++,Co().s[3]++,oe.jsx(IV,{});case"show":return Co().b[0][1]++,Co().s[4]++,oe.jsx(OV,{});case"hide":return Co().b[0][2]++,Co().s[5]++,oe.jsx(BV,{});case"delete":return Co().b[0][3]++,Co().s[6]++,oe.jsx(qy,{})}}render(){Co().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Co().s[7]++,this.props);let r=(Co().s[8]++,"");return Co().s[9]++,e?(Co().b[1][0]++,Co().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,Co().s[11]++,t?(Co().b[2][0]++,Co().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):Co().b[2][1]++):Co().b[1][1]++,Co().s[13]++,oe.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class Rre extends ur.Component{static defaultProps=(Co().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{Co().f[3]++},onLayerDestroy:()=>{Co().f[4]++},onLayerVisibilityToggle:()=>{Co().f[5]++}});render(){Co().f[6]++;const e=(Co().s[15]++,this.props.visibility==="visible"?(Co().b[3][0]++,"show"):(Co().b[3][1]++,"hide"));return Co().s[16]++,oe.jsx(Ey.Provider,{value:{size:"14px"},children:oe.jsxs("li",{id:this.props.id,onClick:t=>(Co().f[7]++,Co().s[17]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:dm({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[oe.jsx(Pre,{...this.props}),oe.jsx("span",{style:{flexGrow:1}}),oe.jsx(yM,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(Co().f[8]++,Co().s[18]++,this.props.onLayerDestroy(this.props.layerIndex))}),oe.jsx(yM,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(Co().f[9]++,Co().s[19]++,this.props.onLayerCopy(this.props.layerIndex))}),oe.jsx(yM,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(Co().f[10]++,Co().s[20]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)})}}const Dre=(Co().s[21]++,kre(n=>(Co().f[11]++,Co().s[22]++,oe.jsx(Rre,{...n}))));function J2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return J2=function(){return l},l}J2();class el extends ur.Component{render(){return J2().f[0]++,J2().s[0]++,oe.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:dm("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Yz=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ex=Yz.join(","),qz=typeof Element>"u",eg=qz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,tx=!qz&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},nx=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",l=s||t&&e&&n(e.parentNode);return l},Kre=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},$z=function(e,t,r){if(nx(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(ex));return t&&eg.call(e,ex)&&i.unshift(e),i=i.filter(r),i},Vz=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var l=s.shift();if(!nx(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),f=o.length?o:l.children,C=n(f,!0,r);r.flatten?i.push.apply(i,C):i.push({scopeParent:l,candidates:C})}else{var x=eg.call(l,ex);x&&r.filter(l)&&(t||!e.includes(l))&&i.push(l);var B=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),R=!nx(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(B&&R){var P=n(B===!0?l.children:B.children,!0,r);r.flatten?i.push.apply(i,P):i.push({scopeParent:l,candidates:P})}else s.unshift.apply(s,l.children)}}return i},Hz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},O0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Kre(e))&&!Hz(e)?0:e.tabIndex},Fre=function(e,t){var r=O0(e);return r<0&&t&&!Hz(e)?0:r},Lre=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Zz=function(e){return e.tagName==="INPUT"},Ure=function(e){return Zz(e)&&e.type==="hidden"},zre=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Nre=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Gre=function(e){if(!e.name)return!0;var t=e.form||tx(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=Nre(i,e.form);return!s||s===e},jre=function(e){return Zz(e)&&e.type==="radio"},Wre=function(e){return jre(e)&&!Gre(e)},Qre=function(e){var t,r=e&&tx(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var l,o,f;for(s=!!((l=i)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!s&&i;){var C,x,B;r=tx(i),i=(C=r)===null||C===void 0?void 0:C.host,s=!!((x=i)!==null&&x!==void 0&&(B=x.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return s},tT=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Yre=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=eg.call(e,"details>summary:first-of-type"),l=s?e.parentElement:e;if(eg.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var f=e.parentElement,C=tx(e);if(f&&!f.shadowRoot&&i(f)===!0)return tT(e);e.assignedSlot?e=e.assignedSlot:!f&&C!==e.ownerDocument?e=C.host:e=f}e=o}if(Qre(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return tT(e);return!1},qre=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return eg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},rx=function(e,t){return!(t.disabled||nx(t)||Ure(t)||Yre(t,e)||zre(t)||qre(t))},iB=function(e,t){return!(Wre(t)||O0(t)<0||!rx(e,t))},$re=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Vre=function n(e){var t=[],r=[];return e.forEach(function(i,s){var l=!!i.scopeParent,o=l?i.scopeParent:i,f=Fre(o,l),C=l?n(i.candidates):o;f===0?l?t.push.apply(t,C):t.push(o):r.push({documentOrder:s,tabIndex:f,item:i,isScope:l,content:C})}),r.sort(Lre).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},Xz=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Vz([e],t.includeContainer,{filter:iB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:$re}):r=$z(e,t.includeContainer,iB.bind(null,t)),Vre(r)},Jz=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Vz([e],t.includeContainer,{filter:rx.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=$z(e,t.includeContainer,rx.bind(null,t)),r},w1=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return eg.call(e,ex)===!1?!1:iB(t,e)},Hre=Yz.concat("iframe").join(","),s2=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return eg.call(e,Hre)===!1?!1:rx(t,e)};const Zre=Object.freeze(Object.defineProperty({__proto__:null,focusable:Jz,getTabIndex:O0,isFocusable:s2,isTabbable:w1,tabbable:Xz},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function nT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nT(Object(t),!0).forEach(function(r){Xre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xre(n,e,t){return e=eie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jre(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eie(n){var e=Jre(n,"string");return typeof e=="symbol"?e:String(e)}var iT={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},tie=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},nie=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},pC=function(e){return e?.key==="Tab"||e?.keyCode===9},rie=function(e){return pC(e)&&!e.shiftKey},iie=function(e){return pC(e)&&e.shiftKey},oT=function(e){return setTimeout(e,0)},sT=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},Kv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Kb=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},oie=[],sie=function(e,t){var r=t?.document||document,i=t?.trapStack||oie,s=rT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:rie,isKeyBackward:iie},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,f=function(Se,xe,je){return Se&&Se[xe]!==void 0?Se[xe]:s[je||xe]},C=function(Se,xe){var je=typeof xe?.composedPath=="function"?xe.composedPath():void 0;return l.containerGroups.findIndex(function(Me){var rt=Me.container,Ct=Me.tabbableNodes;return rt.contains(Se)||je?.includes(rt)||Ct.find(function(it){return it===Se})})},x=function(Se){var xe=s[Se];if(typeof xe=="function"){for(var je=arguments.length,Me=new Array(je>1?je-1:0),rt=1;rt<je;rt++)Me[rt-1]=arguments[rt];xe=xe.apply(void 0,Me)}if(xe===!0&&(xe=void 0),!xe){if(xe===void 0||xe===!1)return xe;throw new Error("`".concat(Se,"` was specified but was not a node, or did not return a node"))}var Ct=xe;if(typeof xe=="string"&&(Ct=r.querySelector(xe),!Ct))throw new Error("`".concat(Se,"` as selector refers to no known node"));return Ct},B=function(){var Se=x("initialFocus");if(Se===!1)return!1;if(Se===void 0||!s2(Se,s.tabbableOptions))if(C(r.activeElement)>=0)Se=r.activeElement;else{var xe=l.tabbableGroups[0],je=xe&&xe.firstTabbableNode;Se=je||x("fallbackFocus")}if(!Se)throw new Error("Your focus-trap needs to have at least one focusable element");return Se},R=function(){if(l.containerGroups=l.containers.map(function(Se){var xe=Xz(Se,s.tabbableOptions),je=Jz(Se,s.tabbableOptions),Me=xe.length>0?xe[0]:void 0,rt=xe.length>0?xe[xe.length-1]:void 0,Ct=je.find(function(Ge){return w1(Ge)}),it=je.slice().reverse().find(function(Ge){return w1(Ge)}),nt=!!xe.find(function(Ge){return O0(Ge)>0});return{container:Se,tabbableNodes:xe,focusableNodes:je,posTabIndexesFound:nt,firstTabbableNode:Me,lastTabbableNode:rt,firstDomTabbableNode:Ct,lastDomTabbableNode:it,nextTabbableNode:function(Ie){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,gt=xe.indexOf(Ie);return gt<0?$e?je.slice(je.indexOf(Ie)+1).find(function(Dt){return w1(Dt)}):je.slice(0,je.indexOf(Ie)).reverse().find(function(Dt){return w1(Dt)}):xe[gt+($e?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(Se){return Se.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(Se){return Se.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function we(Se){var xe=Se.activeElement;if(xe)return xe.shadowRoot&&xe.shadowRoot.activeElement!==null?we(xe.shadowRoot):xe},U=function we(Se){if(Se!==!1&&Se!==P(document)){if(!Se||!Se.focus){we(B());return}Se.focus({preventScroll:!!s.preventScroll}),l.mostRecentlyFocusedNode=Se,tie(Se)&&Se.select()}},N=function(Se){var xe=x("setReturnFocus",Se);return xe||(xe===!1?!1:Se)},W=function(Se){var xe=Se.target,je=Se.event,Me=Se.isBackward,rt=Me===void 0?!1:Me;xe=xe||Kb(je),R();var Ct=null;if(l.tabbableGroups.length>0){var it=C(xe,je),nt=it>=0?l.containerGroups[it]:void 0;if(it<0)rt?Ct=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:Ct=l.tabbableGroups[0].firstTabbableNode;else if(rt){var Ge=sT(l.tabbableGroups,function(Rt){var St=Rt.firstTabbableNode;return xe===St});if(Ge<0&&(nt.container===xe||s2(xe,s.tabbableOptions)&&!w1(xe,s.tabbableOptions)&&!nt.nextTabbableNode(xe,!1))&&(Ge=it),Ge>=0){var Ie=Ge===0?l.tabbableGroups.length-1:Ge-1,$e=l.tabbableGroups[Ie];Ct=O0(xe)>=0?$e.lastTabbableNode:$e.lastDomTabbableNode}else pC(je)||(Ct=nt.nextTabbableNode(xe,!1))}else{var gt=sT(l.tabbableGroups,function(Rt){var St=Rt.lastTabbableNode;return xe===St});if(gt<0&&(nt.container===xe||s2(xe,s.tabbableOptions)&&!w1(xe,s.tabbableOptions)&&!nt.nextTabbableNode(xe))&&(gt=it),gt>=0){var Dt=gt===l.tabbableGroups.length-1?0:gt+1,ut=l.tabbableGroups[Dt];Ct=O0(xe)>=0?ut.firstTabbableNode:ut.firstDomTabbableNode}else pC(je)||(Ct=nt.nextTabbableNode(xe))}}else Ct=x("fallbackFocus");return Ct},X=function(Se){var xe=Kb(Se);if(!(C(xe,Se)>=0)){if(Kv(s.clickOutsideDeactivates,Se)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Kv(s.allowOutsideClick,Se)||Se.preventDefault()}},$=function(Se){var xe=Kb(Se),je=C(xe,Se)>=0;if(je||xe instanceof Document)je&&(l.mostRecentlyFocusedNode=xe);else{Se.stopImmediatePropagation();var Me,rt=!0;if(l.mostRecentlyFocusedNode)if(O0(l.mostRecentlyFocusedNode)>0){var Ct=C(l.mostRecentlyFocusedNode),it=l.containerGroups[Ct].tabbableNodes;if(it.length>0){var nt=it.findIndex(function(Ge){return Ge===l.mostRecentlyFocusedNode});nt>=0&&(s.isKeyForward(l.recentNavEvent)?nt+1<it.length&&(Me=it[nt+1],rt=!1):nt-1>=0&&(Me=it[nt-1],rt=!1))}}else l.containerGroups.some(function(Ge){return Ge.tabbableNodes.some(function(Ie){return O0(Ie)>0})})||(rt=!1);else rt=!1;rt&&(Me=W({target:l.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(l.recentNavEvent)})),U(Me||l.mostRecentlyFocusedNode||B())}l.recentNavEvent=void 0},re=function(Se){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=Se;var je=W({event:Se,isBackward:xe});je&&(pC(Se)&&Se.preventDefault(),U(je))},te=function(Se){if(nie(Se)&&Kv(s.escapeDeactivates,Se)!==!1){Se.preventDefault(),o.deactivate();return}(s.isKeyForward(Se)||s.isKeyBackward(Se))&&re(Se,s.isKeyBackward(Se))},V=function(Se){var xe=Kb(Se);C(xe,Se)>=0||Kv(s.clickOutsideDeactivates,Se)||Kv(s.allowOutsideClick,Se)||(Se.preventDefault(),Se.stopImmediatePropagation())},ne=function(){if(l.active)return iT.activateTrap(i,o),l.delayInitialFocusTimer=s.delayInitialFocus?oT(function(){U(B())}):U(B()),r.addEventListener("focusin",$,!0),r.addEventListener("mousedown",X,{capture:!0,passive:!1}),r.addEventListener("touchstart",X,{capture:!0,passive:!1}),r.addEventListener("click",V,{capture:!0,passive:!1}),r.addEventListener("keydown",te,{capture:!0,passive:!1}),o},G=function(){if(l.active)return r.removeEventListener("focusin",$,!0),r.removeEventListener("mousedown",X,!0),r.removeEventListener("touchstart",X,!0),r.removeEventListener("click",V,!0),r.removeEventListener("keydown",te,!0),o},le=function(Se){var xe=Se.some(function(je){var Me=Array.from(je.removedNodes);return Me.some(function(rt){return rt===l.mostRecentlyFocusedNode})});xe&&U(B())},fe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(le):void 0,pe=function(){fe&&(fe.disconnect(),l.active&&!l.paused&&l.containers.map(function(Se){fe.observe(Se,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(Se){if(l.active)return this;var xe=f(Se,"onActivate"),je=f(Se,"onPostActivate"),Me=f(Se,"checkCanFocusTrap");Me||R(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,xe?.();var rt=function(){Me&&R(),ne(),pe(),je?.()};return Me?(Me(l.containers.concat()).then(rt,rt),this):(rt(),this)},deactivate:function(Se){if(!l.active)return this;var xe=rT({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},Se);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,G(),l.active=!1,l.paused=!1,pe(),iT.deactivateTrap(i,o);var je=f(xe,"onDeactivate"),Me=f(xe,"onPostDeactivate"),rt=f(xe,"checkCanReturnFocus"),Ct=f(xe,"returnFocus","returnFocusOnDeactivate");je?.();var it=function(){oT(function(){Ct&&U(N(l.nodeFocusedBeforeActivation)),Me?.()})};return Ct&&rt?(rt(N(l.nodeFocusedBeforeActivation)).then(it,it),this):(it(),this)},pause:function(Se){if(l.paused||!l.active)return this;var xe=f(Se,"onPause"),je=f(Se,"onPostPause");return l.paused=!0,xe?.(),G(),pe(),je?.(),this},unpause:function(Se){if(!l.paused||!l.active)return this;var xe=f(Se,"onUnpause"),je=f(Se,"onPostUnpause");return l.paused=!1,xe?.(),R(),ne(),pe(),je?.(),this},updateContainerElements:function(Se){var xe=[].concat(Se).filter(Boolean);return l.containers=xe.map(function(je){return typeof je=="string"?r.querySelector(je):je}),l.active&&R(),pe(),this}},o.updateContainerElements(e),o};const aie=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:sie},Symbol.toStringTag,{value:"Module"})),lie=fB(aie),Aie=fB(Zre);var vM,aT;function uie(){if(aT)return vM;aT=1;function n(ne){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(ne)}function e(ne,G){if(!(ne instanceof G))throw new TypeError("Cannot call a class as a function")}function t(ne,G){for(var le=0;le<G.length;le++){var fe=G[le];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(ne,R(fe.key),fe)}}function r(ne,G,le){return G&&t(ne.prototype,G),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function i(ne,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(G&&G.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),G&&s(ne,G)}function s(ne,G){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,pe){return fe.__proto__=pe,fe},s(ne,G)}function l(ne){var G=C();return function(){var fe=x(ne),pe;if(G){var we=x(this).constructor;pe=Reflect.construct(fe,arguments,we)}else pe=fe.apply(this,arguments);return o(this,pe)}}function o(ne,G){if(G&&(n(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(ne)}function f(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(ne){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},x(ne)}function B(ne,G,le){return G=R(G),G in ne?Object.defineProperty(ne,G,{value:le,enumerable:!0,configurable:!0,writable:!0}):ne[G]=le,ne}function R(ne){var G=P(ne,"string");return n(G)==="symbol"?G:String(G)}function P(ne,G){if(n(ne)!=="object"||ne===null)return ne;var le=ne[Symbol.toPrimitive];if(le!==void 0){var fe=le.call(ne,G);if(n(fe)!=="object")return fe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(ne)}var U=tl(),N=pm(),W=lie,X=W.createFocusTrap,$=Aie,re=$.isFocusable,te=function(ne){i(le,ne);var G=l(le);function le(fe){var pe;e(this,le),pe=G.call(this,fe),B(f(pe),"getNodeForOption",function(xe){var je,Me=(je=this.internalOptions[xe])!==null&&je!==void 0?je:this.originalOptions[xe];if(typeof Me=="function"){for(var rt=arguments.length,Ct=new Array(rt>1?rt-1:0),it=1;it<rt;it++)Ct[it-1]=arguments[it];Me=Me.apply(void 0,Ct)}if(Me===!0&&(Me=void 0),!Me){if(Me===void 0||Me===!1)return Me;throw new Error("`".concat(xe,"` was specified but was not a node, or did not return a node"))}var nt=Me;if(typeof Me=="string"){var Ge;if(nt=(Ge=this.getDocument())===null||Ge===void 0?void 0:Ge.querySelector(Me),!nt)throw new Error("`".concat(xe,"` as selector refers to no known node"))}return nt}),pe.handleDeactivate=pe.handleDeactivate.bind(f(pe)),pe.handlePostDeactivate=pe.handlePostDeactivate.bind(f(pe)),pe.handleClickOutsideDeactivates=pe.handleClickOutsideDeactivates.bind(f(pe)),pe.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:pe.handleDeactivate,onPostDeactivate:pe.handlePostDeactivate,clickOutsideDeactivates:pe.handleClickOutsideDeactivates},pe.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var we=fe.focusTrapOptions;for(var Se in we)if(Object.prototype.hasOwnProperty.call(we,Se)){if(Se==="returnFocusOnDeactivate"||Se==="onDeactivate"||Se==="onPostDeactivate"||Se==="checkCanReturnFocus"||Se==="clickOutsideDeactivates"){pe.originalOptions[Se]=we[Se];continue}pe.internalOptions[Se]=we[Se]}return pe.outsideClick=null,pe.focusTrapElements=fe.containerElements||[],pe.updatePreviousElement(),pe}return r(le,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var pe=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return pe||(pe===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var pe=this.getDocument();pe&&(this.previouslyFocusedElement=pe.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(pe){var we=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,pe):this.originalOptions.clickOutsideDeactivates;return we&&(this.outsideClick={target:pe.target,allowDeactivation:we}),we}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var pe=this,we=function(){var xe=pe.getReturnFocusNode(),je=!!(pe.originalOptions.returnFocusOnDeactivate&&xe!==null&&xe!==void 0&&xe.focus&&(!pe.outsideClick||pe.outsideClick.allowDeactivation&&!re(pe.outsideClick.target,pe.internalOptions.tabbableOptions))),Me=pe.internalOptions.preventScroll,rt=Me===void 0?!1:Me;je&&xe.focus({preventScroll:rt}),pe.originalOptions.onPostDeactivate&&pe.originalOptions.onPostDeactivate.call(null),pe.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(we,we):we()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var pe=this.focusTrapElements.some(Boolean);pe&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(pe){if(this.focusTrap){pe.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var we=!pe.active&&this.props.active,Se=pe.active&&!this.props.active,xe=!pe.paused&&this.props.paused,je=pe.paused&&!this.props.paused;if(we&&(this.updatePreviousElement(),this.focusTrap.activate()),Se){this.deactivateTrap();return}xe&&this.focusTrap.pause(),je&&this.focusTrap.unpause()}else pe.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var pe=this,we=this.props.children?U.Children.only(this.props.children):void 0;if(we){if(we.type&&we.type===U.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var Se=function(Me){var rt=pe.props.containerElements;we&&(typeof we.ref=="function"?we.ref(Me):we.ref&&(we.ref.current=Me)),pe.focusTrapElements=rt||[Me]},xe=U.cloneElement(we,{ref:Se});return xe}return null}}]),le}(U.Component),V=typeof Element>"u"?Function:Element;return te.propTypes={active:N.bool,paused:N.bool,focusTrapOptions:N.shape({document:N.object,onActivate:N.func,onPostActivate:N.func,checkCanFocusTrap:N.func,onPause:N.func,onPostPause:N.func,onUnpause:N.func,onPostUnpause:N.func,onDeactivate:N.func,onPostDeactivate:N.func,checkCanReturnFocus:N.func,initialFocus:N.oneOfType([N.instanceOf(V),N.string,N.bool,N.func]),fallbackFocus:N.oneOfType([N.instanceOf(V),N.string,N.func]),escapeDeactivates:N.oneOfType([N.bool,N.func]),clickOutsideDeactivates:N.oneOfType([N.bool,N.func]),returnFocusOnDeactivate:N.bool,setReturnFocus:N.oneOfType([N.instanceOf(V),N.string,N.bool,N.func]),allowOutsideClick:N.oneOfType([N.bool,N.func]),preventScroll:N.bool,tabbableOptions:N.shape({displayCheck:N.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:N.oneOfType([N.bool,N.func])}),trapStack:N.array,isKeyForward:N.func,isKeyBackward:N.func}),containerElements:N.arrayOf(N.instanceOf(V)),children:N.oneOfType([N.element,N.instanceOf(V)])},te.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:X},vM=te,vM}var CM={exports:{}},lT;function cie(){return lT||(lT=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var B=document.documentElement,R=document.createElement("div");return R.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(R),r=R.offsetWidth-R.clientWidth,B.removeChild(R),r}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(B){if(!(typeof document>"u"||t)){var R=document.documentElement;i=window.pageYOffset,l()?R.style.width="calc(100% - "+s()+"px)":R.style.width="100%",R.style.position="fixed",R.style.top=-i+"px",R.style.overflow="hidden",t=!0}}function f(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function C(){if(t){f();return}o()}var x={on:o,off:f,toggle:C};n.exports=x})()}(CM)),CM.exports}var _M,AT;function hie(){if(AT)return _M;AT=1;function n(re){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},n(re)}function e(re,te){if(!(re instanceof te))throw new TypeError("Cannot call a class as a function")}function t(re,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(re,ne.key,ne)}}function r(re,te,V){return te&&t(re.prototype,te),Object.defineProperty(re,"prototype",{writable:!1}),re}function i(re,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(te&&te.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),Object.defineProperty(re,"prototype",{writable:!1}),te&&s(re,te)}function s(re,te){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,G){return ne.__proto__=G,ne},s(re,te)}function l(re){var te=C();return function(){var ne=x(re),G;if(te){var le=x(this).constructor;G=Reflect.construct(ne,arguments,le)}else G=ne.apply(this,arguments);return o(this,G)}}function o(re,te){if(te&&(n(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(re)}function f(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(re){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},x(re)}function B(re,te,V){return te in re?Object.defineProperty(re,te,{value:V,enumerable:!0,configurable:!0,writable:!0}):re[te]=V,re}var R=tl(),P=Ax(),U=uie(),N=cie(),W=function(re){i(V,re);var te=l(V);function V(ne){var G;if(e(this,V),G=te.call(this,ne),B(f(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),B(f(G),"checkUnderlayClick",function(le){G.dialogNode&&G.dialogNode.contains(le.target)||le.pageX>le.target.ownerDocument.documentElement.offsetWidth||le.pageY>le.target.ownerDocument.documentElement.offsetHeight||G.exit(le)}),B(f(G),"checkDocumentKeyDown",function(le){G.props.escapeExits&&(le.key==="Escape"||le.key==="Esc"||le.keyCode===27)&&G.exit(le)}),B(f(G),"exit",function(le){G.props.onExit&&G.props.onExit(le)}),!ne.titleText&&!ne.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return r(V,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&N.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?N.off():!G.scrollDisabled&&this.props.scrollDisabled&&N.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&N.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,le={};if(G.includeDefaultStyles&&(le={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(le.background=G.underlayColor),G.underlayClickExits&&(le.cursor="pointer")),G.underlayStyle)for(var fe in G.underlayStyle)G.underlayStyle.hasOwnProperty(fe)&&(le[fe]=G.underlayStyle[fe]);var pe={className:G.underlayClass,style:le};G.underlayClickExits&&(pe.onMouseDown=this.checkUnderlayClick);for(var we in this.props.underlayProps)pe[we]=this.props.underlayProps[we];var Se={};G.includeDefaultStyles&&(Se={display:"inline-block",height:"100%",verticalAlign:"middle"});var xe={key:"a",style:Se},je={};if(G.includeDefaultStyles&&(je={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(je.verticalAlign="middle",je.top=0)),G.dialogStyle)for(var Me in G.dialogStyle)G.dialogStyle.hasOwnProperty(Me)&&(je[Me]=G.dialogStyle[Me]);var rt={key:"b",ref:(function(Ge){this.dialogNode=Ge}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:je};G.titleId?rt["aria-labelledby"]=G.titleId:G.titleText&&(rt["aria-label"]=G.titleText),G.focusDialog&&(rt.tabIndex="-1");for(var Ct in G)/^(data-|aria-)/.test(Ct)&&(rt[Ct]=G[Ct]);var it=[R.createElement("div",rt,G.children)];G.verticallyCenter&&it.unshift(R.createElement("div",xe));var nt=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(nt.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),nt.escapeDeactivates=G.escapeExits,R.createElement(U,{focusTrapOptions:nt,paused:G.focusTrapPaused},R.createElement("div",pe,it))}}]),V}(R.Component);B(W,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function X(re,te){if(!window.document)return function(){return null};te=te||{};var V=function(ne){i(le,ne);var G=l(le);function le(){var fe;e(this,le);for(var pe=arguments.length,we=new Array(pe),Se=0;Se<pe;Se++)we[Se]=arguments[Se];return fe=G.call.apply(G,[this].concat(we)),B(f(fe),"container",null),fe}return r(le,[{key:"componentDidMount",value:function(){te.renderTo?this.container=typeof te.renderTo=="string"?document.querySelector(te.renderTo):te.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){te.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:P.createPortal(R.createElement(re,this.props,this.props.children),this.container)}}]),le}(R.Component);return B(V,"defaultProps",{mounted:!0}),V}var $=X(W);return $.renderTo=function(re){return X(W,{renderTo:re})},_M=$,_M}var die=hie();const fie=Gl(die);function Du(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Du=function(){return l},l}Du();class pie extends ur.Component{static defaultProps=(Du().s[0]++,{underlayClickExits:!0});onClose=(Du().s[1]++,()=>{Du().f[0]++,Du().s[2]++,document.activeElement?(Du().b[0][0]++,Du().s[3]++,document.activeElement.blur()):Du().b[0][1]++,Du().s[4]++,setTimeout(()=>{Du().f[1]++,Du().s[5]++,this.props.onOpenToggle(!1)},0)});render(){Du().f[2]++;const e=(Du().s[6]++,this.props.t);return Du().s[7]++,this.props.isOpen?(Du().b[1][0]++,Du().s[8]++,oe.jsx(fie,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:oe.jsxs("div",{className:dm("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[oe.jsxs("header",{className:"maputnik-modal-header",children:[oe.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),oe.jsx("span",{className:"maputnik-modal-header-space"}),oe.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:oe.jsx(LV,{})})]}),oe.jsx("div",{className:"maputnik-modal-scroller",children:oe.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Du().b[1][1]++,Du().s[9]++,!1)}}const Z0=(Du().s[10]++,Us()(pie)),mie={name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format.\n\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\n\nThe URL must include:\n\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \n\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\n\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{js:"0.0.16",android:"0.1.1",ios:"0.1.0"},"omit to use local fonts":{js:"https://github.com/maplibre/maplibre-gl-js/issues/3302",android:"https://github.com/maplibre/maplibre-native/issues/165",ios:"https://github.com/maplibre/maplibre-native/issues/165"}}}},gie={type:{doc:"The type of the source."}},yie={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."}},vie={values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}}},Cie={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},_ie={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},bie={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Xo={$root:mie,source_vector:gie,layer:yie,filter_operator:vie,function:{base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."}},light:Cie,terrain:_ie,transition:bie};function Hs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="610b207a65b24ba4dac1ed37ea7bae7606e0d3d5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"610b207a65b24ba4dac1ed37ea7bae7606e0d3d5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hs=function(){return l},l}Hs();Hs().s[0]++;const $O=n=>{Hs().f[0]++;const[e,t]=(Hs().s[1]++,ur.useState(!1));Hs().s[2]++;const r=o=>{Hs().f[1]++,Hs().s[3]++,t(o),Hs().s[4]++,n.onToggleDoc?(Hs().b[0][0]++,Hs().s[5]++,n.onToggleDoc(o)):Hs().b[0][1]++},{label:i,fieldSpec:s}=(Hs().s[6]++,n),{doc:l}=(Hs().s[7]++,Hs().b[1][0]++,s||(Hs().b[1][1]++,{}));return Hs().s[8]++,l?(Hs().b[2][0]++,Hs().s[9]++,oe.jsx("label",{className:"maputnik-doc-wrapper",children:oe.jsxs("div",{className:"maputnik-doc-target",children:[i," ",oe.jsx("button",{"aria-label":e?(Hs().b[3][0]++,"close property documentation"):(Hs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(Hs().b[4][0]++,"open"):(Hs().b[4][1]++,"closed")}`,onClick:()=>(Hs().f[2]++,Hs().s[10]++,r(!e)),"data-wd-key":"field-doc-button-"+i,children:e?(Hs().b[5][0]++,oe.jsx(xV,{})):(Hs().b[5][1]++,oe.jsx(MV,{}))})]})})):(Hs().b[2][1]++,Hs().s[11]++,i?(Hs().b[6][0]++,Hs().s[12]++,oe.jsx("label",{className:"maputnik-doc-wrapper",children:oe.jsx("div",{className:"maputnik-doc-target",children:i})})):(Hs().b[6][1]++,Hs().s[13]++,oe.jsx("div",{})))};function ra(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ra=function(){return l},l}ra();const uT=(ra().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class VO extends ur.Component{render(){ra().f[0]++;const{fieldSpec:e}=(ra().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(ra().s[2]++,e),l=(ra().s[3]++,e["sdk-support"]),o=(ra().s[4]++,ra().b[0][0]++,!!r&&(ra().b[0][1]++,!Array.isArray(r)));return ra().s[5]++,oe.jsxs(oe.Fragment,{children:[(ra().b[1][0]++,t&&(ra().b[1][1]++,oe.jsxs("div",{className:"SpecDoc",children:[oe.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(ra().b[2][0]++,o&&(ra().b[2][1]++,oe.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([f,C])=>(ra().f[1]++,ra().s[6]++,oe.jsxs("li",{children:[oe.jsx("code",{children:JSON.stringify(f)}),oe.jsx("div",{children:C.doc})]},f)))})))]}))),(ra().b[3][0]++,l&&(ra().b[3][1]++,oe.jsx("div",{className:"SpecDoc__sdk-support",children:oe.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{}),Object.values(uT).map(f=>(ra().f[2]++,ra().s[7]++,oe.jsx("th",{children:f},f)))]})}),oe.jsx("tbody",{children:Object.entries(l).map(([f,C])=>(ra().f[3]++,ra().s[8]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:f}),Object.keys(uT).map(x=>(ra().f[4]++,ra().s[9]++,Object.prototype.hasOwnProperty.call(C,x)?(ra().b[4][0]++,ra().s[10]++,oe.jsx("td",{children:C[x]},x)):(ra().b[4][1]++,ra().s[11]++,oe.jsx("td",{children:"no"},x))))]},f)))})]})}))),(ra().b[5][0]++,i&&(ra().b[5][1]++,s)&&(ra().b[5][2]++,oe.jsx("div",{className:"SpecDoc__learn-more",children:oe.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Uo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Uo=function(){return l},l}Uo();class ha extends ur.Component{_blockEl=(Uo().s[0]++,null);constructor(e){Uo().f[0]++,Uo().s[1]++,super(e),Uo().s[2]++,this.state={showDoc:!1}}onChange(e){Uo().f[1]++;const t=(Uo().s[3]++,e.target.value);if(Uo().s[4]++,this.props.onChange)return Uo().b[0][0]++,Uo().s[5]++,this.props.onChange(t===""?(Uo().b[1][0]++,void 0):(Uo().b[1][1]++,t));Uo().b[0][1]++}onToggleDoc=(Uo().s[6]++,e=>{Uo().f[2]++,Uo().s[7]++,this.setState({showDoc:e})});onLabelClick=(Uo().s[8]++,e=>{Uo().f[3]++;const t=(Uo().s[9]++,e.nativeEvent.target),r=(Uo().s[10]++,this._blockEl?.contains(t));Uo().s[11]++,Uo().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Uo().b[3][1]++,!r)?(Uo().b[2][0]++,Uo().s[12]++,e.stopPropagation()):Uo().b[2][1]++,Uo().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Uo().b[4][0]++,Uo().s[14]++,e.preventDefault()):Uo().b[4][1]++});render(){return Uo().f[4]++,Uo().s[15]++,oe.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:dm({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Uo().b[5][0]++,this.props.fieldSpec&&(Uo().b[5][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:oe.jsx($O,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Uo().b[6][0]++,!this.props.fieldSpec&&(Uo().b[6][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),oe.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),oe.jsx("div",{className:"maputnik-input-block-content",ref:e=>(Uo().f[5]++,Uo().s[16]++,this._blockEl=e),children:this.props.children}),(Uo().b[7][0]++,this.props.fieldSpec&&(Uo().b[7][1]++,oe.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Uo().b[8][0]++,""):(Uo().b[8][1]++,"none")},children:oe.jsx(VO,{fieldSpec:this.props.fieldSpec})})))]})}}function Xc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xc=function(){return l},l}Xc();class sg extends ur.Component{render(){Xc().f[0]++;let e=(Xc().s[0]++,this.props.options);return Xc().s[1]++,Xc().b[1][0]++,e.length>0&&(Xc().b[1][1]++,!Array.isArray(e[0]))?(Xc().b[0][0]++,Xc().s[2]++,e=e.map(t=>(Xc().f[1]++,Xc().s[3]++,[t,t]))):Xc().b[0][1]++,Xc().s[4]++,oe.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Xc().f[2]++,Xc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Xc().f[3]++,Xc().s[6]++,oe.jsx("option",{value:t,children:r},t)))})}}function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Li=function(){return l},l}Li();class Sp extends ur.Component{static defaultProps=(Li().s[0]++,{onInput:()=>{Li().f[0]++}});constructor(e){Li().f[1]++,Li().s[1]++,super(e),Li().s[2]++,this.state={editing:!1,value:(Li().b[0][0]++,e.value||(Li().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Li().f[2]++,Li().s[3]++,t.editing)Li().b[1][1]++;else return Li().b[1][0]++,Li().s[4]++,{value:e.value};return Li().s[5]++,{}}render(){Li().f[3]++;let e,t;return Li().s[6]++,this.props.multi?(Li().b[2][0]++,Li().s[7]++,e="textarea",Li().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Li().b[2][1]++,Li().s[9]++,e="input",Li().s[10]++,t=["maputnik-string"]),Li().s[11]++,this.props.disabled?(Li().b[3][0]++,Li().s[12]++,t.push("maputnik-string--disabled")):Li().b[3][1]++,Li().s[13]++,ur.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Li().b[4][0]++,this.props.spellCheck):(Li().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Li().b[5][0]++,""):(Li().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Li().f[4]++,Li().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Li().f[5]++,Li().s[15]++,this.props.onInput?(Li().b[6][0]++,Li().s[16]++,this.props.onInput(this.state.value)):Li().b[6][1]++})},onBlur:()=>{Li().f[6]++,Li().s[17]++,this.state.value!==this.props.value?(Li().b[7][0]++,Li().s[18]++,this.setState({editing:!1}),Li().s[19]++,this.props.onChange?(Li().b[8][0]++,Li().s[20]++,this.props.onChange(this.state.value)):Li().b[8][1]++):Li().b[7][1]++},onKeyDown:r=>{Li().f[7]++,Li().s[21]++,Li().b[10][0]++,r.keyCode===13&&(Li().b[10][1]++,this.props.onChange)?(Li().b[9][0]++,Li().s[22]++,this.props.onChange(this.state.value)):Li().b[9][1]++},required:this.props.required})}}function Kf(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="ab352b7d2d587f6b9df232fa17233540d1d83cbb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:7,column:26},end:{line:40,column:1}},1:{start:{line:8,column:12},end:{line:8,column:19}},2:{start:{line:9,column:2},end:{line:39,column:4}},3:{start:{line:41,column:0},end:{line:43,column:2}},4:{start:{line:44,column:18},end:{line:44,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:26},end:{line:7,column:27}},loc:{start:{line:7,column:37},end:{line:40,column:1}},line:7}},branchMap:{0:{loc:{start:{line:17,column:8},end:{line:17,column:98}},type:"binary-expr",locations:[{start:{line:17,column:8},end:{line:17,column:22}},{start:{line:17,column:42},end:{line:17,column:98}}],line:17},1:{loc:{start:{line:18,column:8},end:{line:36,column:9}},type:"binary-expr",locations:[{start:{line:18,column:8},end:{line:18,column:23}},{start:{line:18,column:43},end:{line:36,column:9}}],line:18}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAmBI,SAKI,KALJ;AAjBJ,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,oBAAsD,CAAC,UAAU;AACrE,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MAC/C,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEZ;AAAA,cAAM,YACL,oBAAC,eAAY,OAAO,MAAM,OAAO,UAAU,MAAM;AAAA,QAElD,CAAC,MAAM,YACN;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,cACP,CAAC,cAAc,YAAY;AAAA,cAC3B,CAAC,QAAQ,MAAM;AAAA,cACf,CAAC,QAAQ,MAAM;AAAA,cACf,CAAC,UAAU,QAAQ;AAAA,cACnB,CAAC,UAAU,QAAQ;AAAA,cACnB,CAAC,UAAU,QAAQ;AAAA,cACnB,CAAC,kBAAkB,gBAAgB;AAAA,cACnC,CAAC,aAAa,WAAW;AAAA,cACzB,CAAC,WAAW,SAAS;AAAA,YACvB;AAAA,YACA,UAAU,MAAM;AAAA,YAChB,OAAO,MAAM;AAAA,YACb,eAAa,MAAM,QAAQ;AAAA;AAAA,QAC7B;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,kBAAkB,eAAe;AAAA,EAC/B,UAAU;AACZ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab352b7d2d587f6b9df232fa17233540d1d83cbb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Kf=function(){return l},l}Kf();Kf().s[0]++;const eN=n=>{Kf().f[0]++;const e=(Kf().s[1]++,n.t);return Kf().s[2]++,oe.jsxs(ha,{label:e("Type"),fieldSpec:Xo.layer.type,"data-wd-key":n.wdKey,error:n.error,children:[(Kf().b[0][0]++,n.disabled&&(Kf().b[0][1]++,oe.jsx(Sp,{value:n.value,disabled:!0}))),(Kf().b[1][0]++,!n.disabled&&(Kf().b[1][1]++,oe.jsx(sg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:n.onChange,value:n.value,"data-wd-key":n.wdKey+".select"})))]})};Kf().s[3]++;eN.defaultProps={disabled:!1};const tN=(Kf().s[4]++,Us()(eN));function qC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return qC=function(){return l},l}qC();qC().s[0]++;const nN=n=>(qC().f[0]++,qC().s[1]++,oe.jsx(ha,{label:"ID",fieldSpec:Xo.layer.id,"data-wd-key":n.wdKey,error:n.error,children:oe.jsx(Sp,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function Fb(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var bM={exports:{}},xa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function xie(){if(cT)return xa;cT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),U;U=Symbol.for("react.module.reference");function N(W){if(typeof W=="object"&&W!==null){var X=W.$$typeof;switch(X){case n:switch(W=W.type,W){case t:case i:case r:case C:case x:return W;default:switch(W=W&&W.$$typeof,W){case o:case l:case f:case R:case B:case s:return W;default:return X}}case e:return X}}}return xa.ContextConsumer=l,xa.ContextProvider=s,xa.Element=n,xa.ForwardRef=f,xa.Fragment=t,xa.Lazy=R,xa.Memo=B,xa.Portal=e,xa.Profiler=i,xa.StrictMode=r,xa.Suspense=C,xa.SuspenseList=x,xa.isAsyncMode=function(){return!1},xa.isConcurrentMode=function(){return!1},xa.isContextConsumer=function(W){return N(W)===l},xa.isContextProvider=function(W){return N(W)===s},xa.isElement=function(W){return typeof W=="object"&&W!==null&&W.$$typeof===n},xa.isForwardRef=function(W){return N(W)===f},xa.isFragment=function(W){return N(W)===t},xa.isLazy=function(W){return N(W)===R},xa.isMemo=function(W){return N(W)===B},xa.isPortal=function(W){return N(W)===e},xa.isProfiler=function(W){return N(W)===i},xa.isStrictMode=function(W){return N(W)===r},xa.isSuspense=function(W){return N(W)===C},xa.isSuspenseList=function(W){return N(W)===x},xa.isValidElementType=function(W){return typeof W=="string"||typeof W=="function"||W===t||W===i||W===r||W===C||W===x||W===P||typeof W=="object"&&W!==null&&(W.$$typeof===R||W.$$typeof===B||W.$$typeof===s||W.$$typeof===l||W.$$typeof===f||W.$$typeof===U||W.getModuleId!==void 0)},xa.typeOf=N,xa}var hT;function Mie(){return hT||(hT=1,bM.exports=xie()),bM.exports}Mie();const dT=n=>typeof n=="object"&&n!=null&&n.nodeType===1,fT=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",Lb=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return fT(t.overflowY,e)||fT(t.overflowX,e)||(r=>{const i=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(n)}return!1},Ub=(n,e,t,r,i,s,l,o)=>s<n&&l>e||s>n&&l<e?0:s<=n&&o<=t||l>=e&&o>=t?s-n-r:l>e&&o<t||s<n&&o>t?l-e+i:0,wie=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},Sie=(n,e)=>{var t,r,i,s;if(typeof document>"u")return[];const{inline:l,boundary:o,skipOverflowHiddenElements:f}=e,C=typeof o=="function"?o:xe=>xe!==o;if(!dT(n))throw new TypeError("Invalid target");const x=document.scrollingElement||document.documentElement,B=[];let R=n;for(;dT(R)&&C(R);){if(R=wie(R),R===x){B.push(R);break}R!=null&&R===document.body&&Lb(R)&&!Lb(document.documentElement)||R!=null&&Lb(R,f)&&B.push(R)}const P=(r=(t=window.visualViewport)==null?void 0:t.width)!=null?r:innerWidth,U=(s=(i=window.visualViewport)==null?void 0:i.height)!=null?s:innerHeight,{scrollX:N,scrollY:W}=window,{height:X,width:$,top:re,right:te,bottom:V,left:ne}=n.getBoundingClientRect(),{top:G,right:le,left:fe}=(xe=>{const je=window.getComputedStyle(xe);return{top:parseFloat(je.scrollMarginTop)||0,right:parseFloat(je.scrollMarginRight)||0,bottom:parseFloat(je.scrollMarginBottom)||0,left:parseFloat(je.scrollMarginLeft)||0}})(n);let pe=re-G,we=l==="center"?ne+$/2-fe+le:l==="end"?te+le:ne-fe;const Se=[];for(let xe=0;xe<B.length;xe++){const je=B[xe],{height:Me,width:rt,top:Ct,right:it,bottom:nt,left:Ge}=je.getBoundingClientRect();if(re>=0&&ne>=0&&V<=U&&te<=P&&(je===x&&!Lb(je)||re>=Ct&&V<=nt&&ne>=Ge&&te<=it))return Se;const Ie=getComputedStyle(je),$e=parseInt(Ie.borderLeftWidth,10),gt=parseInt(Ie.borderTopWidth,10),Dt=parseInt(Ie.borderRightWidth,10),ut=parseInt(Ie.borderBottomWidth,10);let Rt=0,St=0;const Ke="offsetWidth"in je?je.offsetWidth-je.clientWidth-$e-Dt:0,Pe="offsetHeight"in je?je.offsetHeight-je.clientHeight-gt-ut:0,Re="offsetWidth"in je?je.offsetWidth===0?0:rt/je.offsetWidth:0,Ye="offsetHeight"in je?je.offsetHeight===0?0:Me/je.offsetHeight:0;if(x===je)Rt=Ub(W,W+U,U,gt,ut,W+pe,W+pe+X,X),St=l==="start"?we:l==="center"?we-P/2:l==="end"?we-P:Ub(N,N+P,P,$e,Dt,N+we,N+we+$,$),Rt=Math.max(0,Rt+W),St=Math.max(0,St+N);else{Rt=Ub(Ct,nt,Me,gt,ut+Pe,pe,pe+X,X),St=l==="start"?we-Ge-$e:l==="center"?we-(Ge+rt/2)+Ke/2:l==="end"?we-it+Dt+Ke:Ub(Ge,it,rt,$e,Dt+Ke,we,we+$,$);const{scrollLeft:vt,scrollTop:yt}=je;Rt=Ye===0?0:Math.max(0,Math.min(yt+Rt/Ye,je.scrollHeight-Me/Ye+Pe)),St=Re===0?0:Math.max(0,Math.min(vt+St/Re,je.scrollWidth-rt/Re+Ke)),pe+=yt-Rt,we+=vt-St}Se.push({el:je,top:Rt,left:St})}return Se};var zy=function(){return zy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},zy.apply(this,arguments)};var Eie=0;function rN(){}function Bie(n,e){if(n){var t=Sie(n,{boundary:e});t.forEach(function(r){var i=r.el,s=r.top,l=r.left;i.scrollTop=s,i.scrollLeft=l})}}function pT(n,e,t){var r=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return r}function iN(n,e){var t;function r(){t&&clearTimeout(t)}function i(){for(var s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];r(),t=setTimeout(function(){t=null,n.apply(void 0,l)},e)}return i.cancel=r,i}function Dm(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];return e.some(function(o){return o&&o.apply(void 0,[r].concat(s)),r.preventDownshiftDefault||r.hasOwnProperty("nativeEvent")&&r.nativeEvent.preventDownshiftDefault})}}function zb(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){e.forEach(function(i){typeof i=="function"?i(r):i&&(i.current=r)})}}function Oie(){return String(Eie++)}function oB(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,r){return t[r]=oN(e,r)?e[r]:n[r],t},{})}function oN(n,e){return n[e]!==void 0}function Iie(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function Nb(n,e,t,r,i){var s=t.length;if(s===0)return-1;var l=s-1;(typeof n!="number"||n<0||n>l)&&(n=e>0?-1:l+1);var o=n+e;o<0?o=l:o>l&&(o=0);var f=ix(o,e<0,t,r,i);return f===-1?n>=s?-1:n:f}function ix(n,e,t,r,i){i===void 0&&(i=!1);var s=t.length;if(e){for(var l=n;l>=0;l--)if(!r(t[l],l))return l}else for(var o=n;o<s;o++)if(!r(t[o],o))return o;return i?ix(e?s-1:0,e,t,r):-1}function mT(n,e,t,r){return r===void 0&&(r=!0),t&&e.some(function(i){return i&&(pT(i,n,t)||r&&pT(i,t.document.activeElement,t))})}var Tie=iN(function(n){sN(n).textContent=""},500);function sN(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function kie(n,e){if(!(!n||!e)){var t=sN(e);t.textContent=n,Tie(e)}}function Pie(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var aN={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Rie(n,e,t){var r=n.props,i=n.type,s={};Object.keys(e).forEach(function(l){Die(l,n,e,t),t[l]!==e[l]&&(s[l]=t[l])}),r.onStateChange&&Object.keys(s).length&&r.onStateChange(bl({type:i},s))}function Die(n,e,t,r){var i=e.props,s=e.type,l="on"+HO(n)+"Change";i[l]&&r[n]!==void 0&&r[n]!==t[n]&&i[l](bl({type:s},r))}function Kie(n,e){return e.changes}var gT=iN(function(n,e){kie(n,e)},200),Fie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?nr.useLayoutEffect:nr.useEffect,Lie="useId"in ur?function(e){var t=e.id,r=e.labelId,i=e.menuId,s=e.getItemId,l=e.toggleButtonId,o=e.inputId,f="downshift-"+ur.useId();t||(t=f);var C=nr.useRef({labelId:r||t+"-label",menuId:i||t+"-menu",getItemId:s||function(x){return t+"-item-"+x},toggleButtonId:l||t+"-toggle-button",inputId:o||t+"-input"});return C.current}:function(e){var t=e.id,r=t===void 0?"downshift-"+Oie():t,i=e.labelId,s=e.menuId,l=e.getItemId,o=e.toggleButtonId,f=e.inputId,C=nr.useRef({labelId:i||r+"-label",menuId:s||r+"-menu",getItemId:l||function(x){return r+"-item-"+x},toggleButtonId:o||r+"-toggle-button",inputId:f||r+"-input"});return C.current};function Uie(n,e,t,r){var i,s;if(n===void 0){if(e===void 0)throw new Error(r);i=t[e],s=e}else s=e===void 0?t.indexOf(n):e,i=n;return[i,s]}function HO(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function lN(n){var e=nr.useRef(n);return e.current=n,e}function zie(n,e,t,r){var i=nr.useRef(),s=nr.useRef(),l=nr.useCallback(function(P,U){s.current=U,P=oB(P,U.props);var N=n(P,U),W=U.props.stateReducer(P,bl({},U,{changes:N}));return W},[n]),o=nr.useReducer(l,e,t),f=o[0],C=o[1],x=lN(e),B=nr.useCallback(function(P){return C(bl({props:x.current},P))},[x]),R=s.current;return nr.useEffect(function(){var P=oB(i.current,R?.props),U=R&&i.current&&!r(P,f);U&&Rie(R,P,f),i.current=f},[f,R,r]),[f,B]}var mC={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:Kie,scrollIntoView:Bie,environment:typeof window>"u"?void 0:window};function Y0(n,e,t){t===void 0&&(t=aN);var r=n["default"+HO(e)];return r!==void 0?r:t[e]}function gC(n,e,t){t===void 0&&(t=aN);var r=n[e];if(r!==void 0)return r;var i=n["initial"+HO(e)];return i!==void 0?i:Y0(n,e,t)}function Nie(n){var e=gC(n,"selectedItem"),t=gC(n,"isOpen"),r=qie(n),i=gC(n,"inputValue");return{highlightedIndex:r<0&&e&&t?n.items.findIndex(function(s){return n.itemToKey(s)===n.itemToKey(e)}):r,isOpen:t,selectedItem:e,inputValue:i}}function yC(n,e,t){var r=n.items,i=n.initialHighlightedIndex,s=n.defaultHighlightedIndex,l=n.isItemDisabled,o=n.itemToKey,f=e.selectedItem,C=e.highlightedIndex;return r.length===0?-1:i!==void 0&&C===i&&!l(r[i],i)?i:s!==void 0&&!l(r[s],s)?s:f?r.findIndex(function(x){return o(f)===o(x)}):t<0&&!l(r[r.length-1],r.length-1)?r.length-1:t>0&&!l(r[0],0)?0:-1}function Gie(n,e,t){var r=nr.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return nr.useEffect(function(){if(!n)return rN;var i=t.map(function(x){return x.current});function s(){r.current.isTouchEnd=!1,r.current.isMouseDown=!0}function l(x){r.current.isMouseDown=!1,mT(x.target,i,n)||e()}function o(){r.current.isTouchEnd=!1,r.current.isTouchMove=!1}function f(){r.current.isTouchMove=!0}function C(x){r.current.isTouchEnd=!0,!r.current.isTouchMove&&!mT(x.target,i,n,!1)&&e()}return n.addEventListener("mousedown",s),n.addEventListener("mouseup",l),n.addEventListener("touchstart",o),n.addEventListener("touchmove",f),n.addEventListener("touchend",C),function(){n.removeEventListener("mousedown",s),n.removeEventListener("mouseup",l),n.removeEventListener("touchstart",o),n.removeEventListener("touchmove",f),n.removeEventListener("touchend",C)}},[t,n,e]),r.current}var jie=function(){return rN};function Wie(n,e,t,r){r===void 0&&(r={});var i=r.document,s=ZO();nr.useEffect(function(){if(!(!n||s||!i)){var l=n(e);gT(l,i)}},t),nr.useEffect(function(){return function(){gT.cancel(),Pie(i)}},[i])}function Qie(n){var e=n.highlightedIndex,t=n.isOpen,r=n.itemRefs,i=n.getItemNodeFromIndex,s=n.menuElement,l=n.scrollIntoView,o=nr.useRef(!0);return Fie(function(){e<0||!t||!Object.keys(r.current).length||(o.current===!1?o.current=!0:l(i(e),s))},[e]),o}function yT(n,e,t){var r;t===void 0&&(t=!0);var i=((r=n.items)==null?void 0:r.length)&&e>=0;return bl({isOpen:!1,highlightedIndex:-1},i&&bl({selectedItem:n.items[e],isOpen:Y0(n,"isOpen"),highlightedIndex:Y0(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function Yie(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function ZO(){var n=ur.useRef(!0);return ur.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function sB(n){var e=Y0(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function qie(n){var e=gC(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var a2={environment:Jn.shape({addEventListener:Jn.func.isRequired,removeEventListener:Jn.func.isRequired,document:Jn.shape({createElement:Jn.func.isRequired,getElementById:Jn.func.isRequired,activeElement:Jn.any.isRequired,body:Jn.any.isRequired}).isRequired,Node:Jn.func.isRequired}),itemToString:Jn.func,itemToKey:Jn.func,stateReducer:Jn.func},AN=bl({},a2,{getA11yStatusMessage:Jn.func,highlightedIndex:Jn.number,defaultHighlightedIndex:Jn.number,initialHighlightedIndex:Jn.number,isOpen:Jn.bool,defaultIsOpen:Jn.bool,initialIsOpen:Jn.bool,selectedItem:Jn.any,initialSelectedItem:Jn.any,defaultSelectedItem:Jn.any,id:Jn.string,labelId:Jn.string,menuId:Jn.string,getItemId:Jn.func,toggleButtonId:Jn.string,onSelectedItemChange:Jn.func,onHighlightedIndexChange:Jn.func,onStateChange:Jn.func,onIsOpenChange:Jn.func,scrollIntoView:Jn.func});function $ie(n,e,t){var r=e.type,i=e.props,s;switch(r){case t.ItemMouseMove:s={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:s={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:yC(i,n,0)};break;case t.FunctionOpenMenu:s={isOpen:!0,highlightedIndex:yC(i,n,0)};break;case t.FunctionCloseMenu:s={isOpen:!1};break;case t.FunctionSetHighlightedIndex:s={highlightedIndex:i.isItemDisabled(i.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:s={inputValue:e.inputValue};break;case t.FunctionReset:s={highlightedIndex:sB(i),isOpen:Y0(i,"isOpen"),selectedItem:Y0(i,"selectedItem"),inputValue:Y0(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return bl({},n,s)}zy(zy({},AN),{items:Jn.array.isRequired,isItemDisabled:Jn.func});zy(zy({},mC),{isItemDisabled:function(){return!1}});var XO=0,JO=1,eI=2,tI=3,nI=4,rI=5,iI=6,oI=7,sI=8,ox=9,aI=10,uN=11,cN=12,lI=13,hN=14,dN=15,fN=16,pN=17,mN=18,AI=19,gN=20,yN=21,uI=22,vN=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:uI,FunctionCloseMenu:pN,FunctionOpenMenu:fN,FunctionReset:yN,FunctionSelectItem:AI,FunctionSetHighlightedIndex:mN,FunctionSetInputValue:gN,FunctionToggleMenu:dN,InputBlur:ox,InputChange:sI,InputClick:aI,InputKeyDownArrowDown:XO,InputKeyDownArrowUp:JO,InputKeyDownEnd:nI,InputKeyDownEnter:oI,InputKeyDownEscape:eI,InputKeyDownHome:tI,InputKeyDownPageDown:iI,InputKeyDownPageUp:rI,ItemClick:lI,ItemMouseMove:cN,MenuMouseLeave:uN,ToggleButtonClick:hN});function Vie(n){var e=Nie(n),t=e.selectedItem,r=e.inputValue;return r===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(r=n.itemToString(t)),bl({},e,{inputValue:r})}bl({},AN,{items:Jn.array.isRequired,isItemDisabled:Jn.func,inputValue:Jn.string,defaultInputValue:Jn.string,initialInputValue:Jn.string,inputId:Jn.string,onInputValueChange:Jn.func});function Hie(n,e,t,r){var i=nr.useRef(),s=zie(n,e,t,r),l=s[0],o=s[1],f=ZO();return nr.useEffect(function(){if(oN(e,"selectedItem")){if(!f){var C=e.itemToKey(e.selectedItem)!==e.itemToKey(i.current);C&&o({type:uI,inputValue:e.itemToString(e.selectedItem)})}i.current=l.selectedItem===i.current?e.selectedItem:l.selectedItem}},[l.selectedItem,e.selectedItem]),[oB(l,e),o]}var Zie=bl({},mC,{isItemDisabled:function(){return!1}});function Xie(n,e){var t,r=e.type,i=e.props,s=e.altKey,l;switch(r){case lI:l={isOpen:Y0(i,"isOpen"),highlightedIndex:sB(i),selectedItem:i.items[e.index],inputValue:i.itemToString(i.items[e.index])};break;case XO:n.isOpen?l={highlightedIndex:Nb(n.highlightedIndex,1,i.items,i.isItemDisabled,!0)}:l={highlightedIndex:s&&n.selectedItem==null?-1:yC(i,n,1),isOpen:i.items.length>=0};break;case JO:n.isOpen?s?l=yT(i,n.highlightedIndex):l={highlightedIndex:Nb(n.highlightedIndex,-1,i.items,i.isItemDisabled,!0)}:l={highlightedIndex:yC(i,n,-1),isOpen:i.items.length>=0};break;case oI:l=yT(i,n.highlightedIndex);break;case eI:l=bl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case rI:l={highlightedIndex:Nb(n.highlightedIndex,-10,i.items,i.isItemDisabled,!0)};break;case iI:l={highlightedIndex:Nb(n.highlightedIndex,10,i.items,i.isItemDisabled,!0)};break;case tI:l={highlightedIndex:ix(0,!1,i.items,i.isItemDisabled)};break;case nI:l={highlightedIndex:ix(i.items.length-1,!0,i.items,i.isItemDisabled)};break;case ox:l=bl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=i.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:i.items[n.highlightedIndex],inputValue:i.itemToString(i.items[n.highlightedIndex])});break;case sI:l={isOpen:!0,highlightedIndex:sB(i),inputValue:e.inputValue};break;case aI:l={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:yC(i,n,0)};break;case AI:l={selectedItem:e.selectedItem,inputValue:i.itemToString(e.selectedItem)};break;case uI:l={inputValue:e.inputValue};break;default:return $ie(n,e,vN)}return bl({},n,l)}var Jie=["onMouseLeave","refKey","ref"],eoe=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],toe=["onClick","onPress","refKey","ref"],noe=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];aB.stateChangeTypes=vN;function aB(n){n===void 0&&(n={});var e=bl({},Zie,n),t=e.items,r=e.scrollIntoView,i=e.environment,s=e.getA11yStatusMessage,l=Hie(Xie,e,Vie,Yie),o=l[0],f=l[1],C=o.isOpen,x=o.highlightedIndex,B=o.selectedItem,R=o.inputValue,P=nr.useRef(null),U=nr.useRef({}),N=nr.useRef(null),W=nr.useRef(null),X=ZO(),$=Lie(e),re=nr.useRef(),te=lN({state:o,props:e}),V=nr.useCallback(function($e){return U.current[$.getItemId($e)]},[$]);Wie(s,o,[C,x,B,R],i);var ne=Qie({menuElement:P.current,highlightedIndex:x,isOpen:C,itemRefs:U,scrollIntoView:r,getItemNodeFromIndex:V});nr.useEffect(function(){var $e=gC(e,"isOpen");$e&&N.current&&N.current.focus()},[]),nr.useEffect(function(){X||(re.current=t.length)});var G=Gie(i,nr.useCallback(function(){te.current.state.isOpen&&f({type:ox,selectItem:!1})},[f,te]),nr.useMemo(function(){return[P,W,N]},[P.current,W.current,N.current])),le=jie();nr.useEffect(function(){C||(U.current={})},[C]),nr.useEffect(function(){var $e;!C||!(i!=null&&i.document)||!(N!=null&&($e=N.current)!=null&&$e.focus)||i.document.activeElement!==N.current&&N.current.focus()},[C,i]);var fe=nr.useMemo(function(){return{ArrowDown:function(gt){gt.preventDefault(),f({type:XO,altKey:gt.altKey})},ArrowUp:function(gt){gt.preventDefault(),f({type:JO,altKey:gt.altKey})},Home:function(gt){te.current.state.isOpen&&(gt.preventDefault(),f({type:tI}))},End:function(gt){te.current.state.isOpen&&(gt.preventDefault(),f({type:nI}))},Escape:function(gt){var Dt=te.current.state;(Dt.isOpen||Dt.inputValue||Dt.selectedItem||Dt.highlightedIndex>-1)&&(gt.preventDefault(),f({type:eI}))},Enter:function(gt){var Dt=te.current.state;!Dt.isOpen||gt.which===229||(gt.preventDefault(),f({type:oI}))},PageUp:function(gt){te.current.state.isOpen&&(gt.preventDefault(),f({type:rI}))},PageDown:function(gt){te.current.state.isOpen&&(gt.preventDefault(),f({type:iI}))}}},[f,te]),pe=nr.useCallback(function($e){return bl({id:$.labelId,htmlFor:$.inputId},$e)},[$]),we=nr.useCallback(function($e,gt){var Dt,ut=$e===void 0?{}:$e,Rt=ut.onMouseLeave,St=ut.refKey,Ke=St===void 0?"ref":St,Pe=ut.ref,Re=Fb(ut,Jie),Ye=gt===void 0?{}:gt;return Ye.suppressRefError,bl((Dt={},Dt[Ke]=zb(Pe,function(vt){P.current=vt}),Dt.id=$.menuId,Dt.role="listbox",Dt["aria-labelledby"]=Re&&Re["aria-label"]?void 0:""+$.labelId,Dt.onMouseLeave=Dm(Rt,function(){f({type:uN})}),Dt),Re)},[f,le,$]),Se=nr.useCallback(function($e){var gt,Dt,ut=$e===void 0?{}:$e,Rt=ut.item,St=ut.index,Ke=ut.refKey,Pe=Ke===void 0?"ref":Ke,Re=ut.ref,Ye=ut.onMouseMove,vt=ut.onMouseDown,yt=ut.onClick;ut.onPress;var Et=ut.disabled,Zt=Fb(ut,eoe);Et!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Ut=te.current,An=Ut.props,hr=Ut.state,Vt=Uie(Rt,St,An.items,"Pass either item or index to getItemProps!"),Vn=Vt[0],Pn=Vt[1],Dn=An.isItemDisabled(Vn,Pn),Ln="onClick",Ir=yt,rr=function(){G.isTouchEnd||Pn===hr.highlightedIndex||(ne.current=!1,f({type:cN,index:Pn,disabled:Dn}))},Yn=function(){f({type:lI,index:Pn})},We=function(me){return me.preventDefault()};return bl((gt={},gt[Pe]=zb(Re,function(he){he&&(U.current[$.getItemId(Pn)]=he)}),gt["aria-disabled"]=Dn,gt["aria-selected"]=Pn===hr.highlightedIndex,gt.id=$.getItemId(Pn),gt.role="option",gt),!Dn&&(Dt={},Dt[Ln]=Dm(Ir,Yn),Dt),{onMouseMove:Dm(Ye,rr),onMouseDown:Dm(vt,We)},Zt)},[f,$,te,G,ne]),xe=nr.useCallback(function($e){var gt,Dt=$e===void 0?{}:$e,ut=Dt.onClick;Dt.onPress;var Rt=Dt.refKey,St=Rt===void 0?"ref":Rt,Ke=Dt.ref,Pe=Fb(Dt,toe),Re=te.current.state,Ye=function(){f({type:hN})};return bl((gt={},gt[St]=zb(Ke,function(vt){W.current=vt}),gt["aria-controls"]=$.menuId,gt["aria-expanded"]=Re.isOpen,gt.id=$.toggleButtonId,gt.tabIndex=-1,gt),!Pe.disabled&&bl({},{onClick:Dm(ut,Ye)}),Pe)},[f,te,$]),je=nr.useCallback(function($e,gt){var Dt,ut=$e===void 0?{}:$e,Rt=ut.onKeyDown,St=ut.onChange,Ke=ut.onInput,Pe=ut.onBlur;ut.onChangeText;var Re=ut.onClick,Ye=ut.refKey,vt=Ye===void 0?"ref":Ye,yt=ut.ref,Et=Fb(ut,noe),Zt=gt===void 0?{}:gt;Zt.suppressRefError;var Ut=te.current.state,An=function(rr){var Yn=Iie(rr);Yn&&fe[Yn]&&fe[Yn](rr)},hr=function(rr){f({type:sI,inputValue:rr.target.value})},Vt=function(rr){if(i!=null&&i.document&&Ut.isOpen&&!G.isMouseDown){var Yn=rr.relatedTarget===null&&i.document.activeElement!==i.document.body;f({type:ox,selectItem:!Yn})}},Vn=function(){f({type:aI})},Pn="onChange",Dn={};if(!Et.disabled){var Ln;Dn=(Ln={},Ln[Pn]=Dm(St,Ke,hr),Ln.onKeyDown=Dm(Rt,An),Ln.onBlur=Dm(Pe,Vt),Ln.onClick=Dm(Re,Vn),Ln)}return bl((Dt={},Dt[vt]=zb(yt,function(Ir){N.current=Ir}),Dt["aria-activedescendant"]=Ut.isOpen&&Ut.highlightedIndex>-1?$.getItemId(Ut.highlightedIndex):"",Dt["aria-autocomplete"]="list",Dt["aria-controls"]=$.menuId,Dt["aria-expanded"]=Ut.isOpen,Dt["aria-labelledby"]=Et&&Et["aria-label"]?void 0:$.labelId,Dt.autoComplete="off",Dt.id=$.inputId,Dt.role="combobox",Dt.value=Ut.inputValue,Dt),Dn,Et)},[f,$,i,fe,te,G,le]),Me=nr.useCallback(function(){f({type:dN})},[f]),rt=nr.useCallback(function(){f({type:pN})},[f]),Ct=nr.useCallback(function(){f({type:fN})},[f]),it=nr.useCallback(function($e){f({type:mN,highlightedIndex:$e})},[f]),nt=nr.useCallback(function($e){f({type:AI,selectedItem:$e})},[f]),Ge=nr.useCallback(function($e){f({type:gN,inputValue:$e})},[f]),Ie=nr.useCallback(function(){f({type:yN})},[f]);return{getItemProps:Se,getLabelProps:pe,getMenuProps:we,getInputProps:je,getToggleButtonProps:xe,toggleMenu:Me,openMenu:Ct,closeMenu:rt,setHighlightedIndex:it,setInputValue:Ge,selectItem:nt,reset:Ie,highlightedIndex:x,isOpen:C,selectedItem:B,inputValue:R}}a2.stateReducer,a2.itemToKey,a2.environment,Jn.array,Jn.array,Jn.array,Jn.func,Jn.number,Jn.number,Jn.number,Jn.func,Jn.func,Jn.string,Jn.string;mC.itemToKey,mC.stateReducer,mC.environment;function Yr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Yr=function(){return l},l}Yr();const vT=(Yr().s[0]++,140);function T_({value:n,options:e=(Yr().b[0][0]++,[]),onChange:t=(Yr().b[1][0]++,()=>{Yr().f[1]++}),"aria-label":r}){Yr().f[0]++;const[i,s]=(Yr().s[1]++,ur.useState((Yr().b[2][0]++,n||(Yr().b[2][1]++,"")))),l=(Yr().s[2]++,ur.useRef(null)),[o,f]=(Yr().s[3]++,ur.useState(vT)),C=(Yr().s[4]++,ur.useMemo(()=>{Yr().f[2]++;const X=(Yr().s[5]++,i.toLowerCase());return Yr().s[6]++,e.filter($=>(Yr().f[3]++,Yr().s[7]++,$[0].toLowerCase().includes(X)))},[e,i])),x=(Yr().s[8]++,ur.useCallback(()=>{if(Yr().f[4]++,Yr().s[9]++,l.current){Yr().b[3][0]++;const X=(Yr().s[10]++,window.innerHeight-l.current.getBoundingClientRect().top);Yr().s[11]++,f(Math.min(X,vT))}else Yr().b[3][1]++},[])),{isOpen:B,getMenuProps:R,getInputProps:P,getItemProps:U,highlightedIndex:N,openMenu:W}=(Yr().s[12]++,aB({items:C,inputValue:i,itemToString:X=>(Yr().f[5]++,Yr().s[13]++,X?(Yr().b[4][0]++,X[0]):(Yr().b[4][1]++,"")),stateReducer:(X,$)=>(Yr().f[6]++,Yr().s[14]++,$.type===aB.stateChangeTypes.InputClick?(Yr().b[5][0]++,Yr().s[15]++,{...$.changes,isOpen:!0}):(Yr().b[5][1]++,Yr().s[16]++,$.changes)),onSelectedItemChange:({selectedItem:X})=>{Yr().f[7]++;const $=(Yr().s[17]++,X?(Yr().b[6][0]++,X[0]):(Yr().b[6][1]++,""));Yr().s[18]++,s($),Yr().s[19]++,t(X?(Yr().b[7][0]++,X[0]):(Yr().b[7][1]++,void 0))},onInputValueChange:({inputValue:X})=>{Yr().f[8]++,Yr().s[20]++,typeof X=="string"?(Yr().b[8][0]++,Yr().s[21]++,s(X),Yr().s[22]++,t(X===""?(Yr().b[9][0]++,void 0):(Yr().b[9][1]++,X)),Yr().s[23]++,W()):Yr().b[8][1]++}}));return Yr().s[24]++,ur.useEffect(()=>{Yr().f[9]++,Yr().s[25]++,B?(Yr().b[10][0]++,Yr().s[26]++,x()):Yr().b[10][1]++},[B,x]),Yr().s[27]++,ur.useEffect(()=>(Yr().f[10]++,Yr().s[28]++,window.addEventListener("resize",x),Yr().s[29]++,()=>(Yr().f[11]++,Yr().s[30]++,window.removeEventListener("resize",x))),[x]),Yr().s[31]++,ur.useEffect(()=>{Yr().f[12]++,Yr().s[32]++,s((Yr().b[11][0]++,n||(Yr().b[11][1]++,"")))},[n]),Yr().s[33]++,oe.jsxs("div",{className:"maputnik-autocomplete",children:[oe.jsx("input",{...P({"aria-label":r,className:"maputnik-string",spellCheck:!1,onFocus:()=>(Yr().f[13]++,Yr().s[34]++,W())})}),oe.jsx("div",{...R({},{suppressRefError:!0}),ref:l,style:{position:"fixed",overflow:"auto",maxHeight:o,zIndex:998},className:"maputnik-autocomplete-menu",children:(Yr().b[12][0]++,B&&(Yr().b[12][1]++,C.map((X,$)=>(Yr().f[14]++,Yr().s[35]++,oe.jsx("div",{...U({item:X,index:$,className:dm("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":N===$})}),children:X[1]},X[0])))))})]})}function Cp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="169c98de3feb6076af0395b083cdd2c7c1a1088a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:25,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:24,column:4}},3:{start:{line:20,column:49},end:{line:20,column:59}},4:{start:{line:26,column:0},end:{line:30,column:2}},5:{start:{line:31,column:20},end:{line:31,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:6,column:39},end:{line:25,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:20,column:40},end:{line:20,column:41}},loc:{start:{line:20,column:49},end:{line:20,column:59}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:27,column:12},end:{line:27,column:13}},loc:{start:{line:27,column:18},end:{line:28,column:3}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AAwBM;AAtBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,sBAA0D,CAAC,UAAU;AACzE,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB,OAAO,MAAM;AAAA,MACb,eAAa,MAAM;AAAA,MAEnB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,MAAM,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MACnD;AAAA;AAAA,EACF;AAEJ;AAEA,oBAAoB,eAAe;AAAA,EACjC,UAAU,MAAM;AAAA,EAAC;AAAA,EACjB,WAAW,CAAC;AACd;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"169c98de3feb6076af0395b083cdd2c7c1a1088a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cp=function(){return l},l}Cp();Cp().s[0]++;const CN=n=>{Cp().f[0]++;const e=(Cp().s[1]++,n.t);return Cp().s[2]++,oe.jsx(ha,{label:e("Source"),fieldSpec:Xo.layer.source,error:n.error,"data-wd-key":n.wdKey,children:oe.jsx(T_,{value:n.value,onChange:n.onChange,options:n.sourceIds?.map(t=>(Cp().f[1]++,Cp().s[3]++,[t,t]))})})};Cp().s[4]++;CN.defaultProps={onChange:()=>{Cp().f[2]++},sourceIds:[]};const _N=(Cp().s[5]++,Us()(CN));function _p(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="7247e8eb8b8585dd55ca47fd6ed77f289240e65e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:25,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:24,column:4}},3:{start:{line:20,column:52},end:{line:20,column:58}},4:{start:{line:26,column:0},end:{line:31,column:2}},5:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:6,column:44},end:{line:25,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:20,column:45},end:{line:20,column:46}},loc:{start:{line:20,column:52},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:27,column:12},end:{line:27,column:13}},loc:{start:{line:27,column:18},end:{line:28,column:3}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AAwBM;AAtBN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,MAAM,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAClD;AAAA;AAAA,EACF;AAEJ;AAEA,yBAAyB,eAAe;AAAA,EACtC,UAAU,MAAM;AAAA,EAAC;AAAA,EACjB,gBAAgB,CAAC;AAAA,EACjB,SAAS;AACX;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7247e8eb8b8585dd55ca47fd6ed77f289240e65e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _p=function(){return l},l}_p();_p().s[0]++;const bN=n=>{_p().f[0]++;const e=(_p().s[1]++,n.t);return _p().s[2]++,oe.jsx(ha,{label:e("Source Layer"),fieldSpec:ws.layer["source-layer"],"data-wd-key":"layer-source-layer",error:n.error,children:oe.jsx(T_,{value:n.value,onChange:n.onChange,options:n.sourceLayerIds?.map(t=>(_p().f[1]++,_p().s[3]++,[t,t]))})})};_p().s[4]++;bN.defaultProps={onChange:()=>{_p().f[2]++},sourceLayerIds:[],isFixed:!1};const xN=(_p().s[5]++,Us()(bN));function Mr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="2c22f5d2f372ad64246838fe88a92e2d19140dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:32,column:3}},1:{start:{line:12,column:4},end:{line:15,column:5}},2:{start:{line:12,column:38},end:{line:12,column:60}},3:{start:{line:13,column:6},end:{line:13,column:72}},4:{start:{line:14,column:6},end:{line:14,column:13}},5:{start:{line:16,column:26},end:{line:16,column:52}},6:{start:{line:17,column:18},end:{line:20,column:5}},7:{start:{line:21,column:4},end:{line:26,column:5}},8:{start:{line:22,column:6},end:{line:22,column:39}},9:{start:{line:23,column:6},end:{line:25,column:7}},10:{start:{line:24,column:8},end:{line:24,column:59}},11:{start:{line:27,column:4},end:{line:27,column:30}},12:{start:{line:28,column:4},end:{line:31,column:7}},13:{start:{line:29,column:6},end:{line:29,column:47}},14:{start:{line:30,column:6},end:{line:30,column:37}},15:{start:{line:34,column:4},end:{line:34,column:17}},16:{start:{line:35,column:18},end:{line:39,column:5}},17:{start:{line:40,column:4},end:{line:43,column:5}},18:{start:{line:41,column:6},end:{line:41,column:56}},19:{start:{line:42,column:6},end:{line:42,column:66}},20:{start:{line:44,column:4},end:{line:44,column:23}},21:{start:{line:47,column:20},end:{line:47,column:34}},22:{start:{line:48,column:20},end:{line:48,column:35}},23:{start:{line:49,column:32},end:{line:49,column:56}},24:{start:{line:50,column:32},end:{line:50,column:56}},25:{start:{line:51,column:4},end:{line:58,column:5}},26:{start:{line:55,column:6},end:{line:57,column:9}},27:{start:{line:61,column:22},end:{line:61,column:54}},28:{start:{line:62,column:4},end:{line:62,column:34}},29:{start:{line:65,column:20},end:{line:65,column:22}},30:{start:{line:66,column:18},end:{line:86,column:5}},31:{start:{line:87,column:4},end:{line:92,column:5}},32:{start:{line:88,column:22},end:{line:88,column:30}},33:{start:{line:89,column:6},end:{line:91,column:7}},34:{start:{line:90,column:8},end:{line:90,column:26}},35:{start:{line:93,column:4},end:{line:93,column:19}},36:{start:{line:96,column:14},end:{line:96,column:26}},37:{start:{line:97,column:20},end:{line:97,column:52}},38:{start:{line:98,column:19},end:{line:98,column:61}},39:{start:{line:100,column:4},end:{line:113,column:5}},40:{start:{line:101,column:6},end:{line:112,column:11}},41:{start:{line:107,column:27},end:{line:107,column:57}},42:{start:{line:114,column:4},end:{line:173,column:6}},43:{start:{line:131,column:18},end:{line:131,column:56}},44:{start:{line:140,column:33},end:{line:140,column:59}},45:{start:{line:149,column:33},end:{line:149,column:61}},46:{start:{line:158,column:33},end:{line:158,column:69}},47:{start:{line:176,column:17},end:{line:176,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:32,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:12,column:31},end:{line:12,column:32}},loc:{start:{line:12,column:38},end:{line:12,column:60}},line:12},2:{name:"(anonymous_2)",decl:{start:{line:28,column:35},end:{line:28,column:36}},loc:{start:{line:28,column:41},end:{line:31,column:5}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:21},end:{line:45,column:3}},line:33},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:44},end:{line:59,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:60,column:2},end:{line:60,column:3}},loc:{start:{line:60,column:29},end:{line:63,column:3}},line:60},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:19},end:{line:94,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:11},end:{line:174,column:3}},line:95},8:{name:"(anonymous_8)",decl:{start:{line:107,column:21},end:{line:107,column:22}},loc:{start:{line:107,column:27},end:{line:107,column:57}},line:107},9:{name:"(anonymous_9)",decl:{start:{line:130,column:26},end:{line:130,column:27}},loc:{start:{line:130,column:33},end:{line:132,column:17}},line:130},10:{name:"(anonymous_10)",decl:{start:{line:140,column:26},end:{line:140,column:27}},loc:{start:{line:140,column:33},end:{line:140,column:59}},line:140},11:{name:"(anonymous_11)",decl:{start:{line:149,column:26},end:{line:149,column:27}},loc:{start:{line:149,column:33},end:{line:149,column:61}},line:149},12:{name:"(anonymous_12)",decl:{start:{line:158,column:26},end:{line:158,column:27}},loc:{start:{line:158,column:33},end:{line:158,column:69}},line:158}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:21,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:26,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},2:{loc:{start:{line:23,column:6},end:{line:25,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:25,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:23,column:10},end:{line:23,column:68}},type:"binary-expr",locations:[{start:{line:23,column:10},end:{line:23,column:38}},{start:{line:23,column:42},end:{line:23,column:68}}],line:23},4:{loc:{start:{line:40,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:43,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:51,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},6:{loc:{start:{line:53,column:6},end:{line:53,column:160}},type:"binary-expr",locations:[{start:{line:53,column:6},end:{line:53,column:25}},{start:{line:53,column:29},end:{line:53,column:52}},{start:{line:53,column:56},end:{line:53,column:106}},{start:{line:53,column:110},end:{line:53,column:160}}],line:53},7:{loc:{start:{line:61,column:22},end:{line:61,column:54}},type:"binary-expr",locations:[{start:{line:61,column:22},end:{line:61,column:48}},{start:{line:61,column:52},end:{line:61,column:54}}],line:61},8:{loc:{start:{line:62,column:11},end:{line:62,column:33}},type:"binary-expr",locations:[{start:{line:62,column:11},end:{line:62,column:27}},{start:{line:62,column:31},end:{line:62,column:33}}],line:62},9:{loc:{start:{line:89,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:89,column:6},end:{line:91,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},10:{loc:{start:{line:89,column:10},end:{line:89,column:61}},type:"binary-expr",locations:[{start:{line:89,column:10},end:{line:89,column:24}},{start:{line:89,column:28},end:{line:89,column:61}}],line:89},11:{loc:{start:{line:100,column:4},end:{line:113,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:113,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:143,column:12},end:{line:151,column:13}},type:"binary-expr",locations:[{start:{line:143,column:12},end:{line:143,column:44}},{start:{line:143,column:64},end:{line:151,column:13}}],line:143},13:{loc:{start:{line:152,column:12},end:{line:160,column:13}},type:"binary-expr",locations:[{start:{line:152,column:12},end:{line:152,column:89}},{start:{line:152,column:109},end:{line:160,column:13}}],line:152}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA8IQ,SAEE,KAFF;AA9IR,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAmBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS;AAAA,gBACT,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2c22f5d2f372ad64246838fe88a92e2d19140dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mr=function(){return l},l}Mr();class roe extends ur.Component{addLayer=(Mr().s[0]++,()=>{if(Mr().f[0]++,Mr().s[1]++,this.props.layers.some(r=>(Mr().f[1]++,Mr().s[2]++,r.id===this.state.id))){Mr().b[0][0]++,Mr().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),Mr().s[4]++;return}else Mr().b[0][1]++;const e=(Mr().s[5]++,this.props.layers.slice(0)),t=(Mr().s[6]++,{id:this.state.id,type:this.state.type});Mr().s[7]++,this.state.type!=="background"?(Mr().b[1][0]++,Mr().s[8]++,t.source=this.state.source,Mr().s[9]++,Mr().b[3][0]++,this.state.type!=="raster"&&(Mr().b[3][1]++,this.state["source-layer"])?(Mr().b[2][0]++,Mr().s[10]++,t["source-layer"]=this.state["source-layer"]):Mr().b[2][1]++):Mr().b[1][1]++,Mr().s[11]++,e.push(t),Mr().s[12]++,this.setState({error:null},()=>{Mr().f[2]++,Mr().s[13]++,this.props.onLayersChange(e),Mr().s[14]++,this.props.onOpenToggle(!1)})});constructor(e){Mr().f[3]++,Mr().s[15]++,super(e);const t=(Mr().s[16]++,{type:"fill",id:"",error:null});Mr().s[17]++,e.sources.length>0?(Mr().b[4][0]++,Mr().s[18]++,t.source=Object.keys(this.props.sources)[0],Mr().s[19]++,t["source-layer"]=this.props.sources[t.source][0]):Mr().b[4][1]++,Mr().s[20]++,this.state=t}componentDidUpdate(e,t){Mr().f[4]++;const r=(Mr().s[21]++,t.type),i=(Mr().s[22]++,this.state.type),s=(Mr().s[23]++,this.getSources(r)),l=(Mr().s[24]++,this.getSources(i));Mr().s[25]++,Mr().b[6][0]++,r!==i&&(Mr().b[6][1]++,t.source!=="")&&(Mr().b[6][2]++,s.indexOf(t.source)>-1)&&(Mr().b[6][3]++,l.indexOf(this.state.source)<0)?(Mr().b[5][0]++,Mr().s[26]++,this.setState({source:""})):Mr().b[5][1]++}getLayersForSource(e){Mr().f[5]++;const t=(Mr().s[27]++,Mr().b[7][0]++,this.props.sources[e]||(Mr().b[7][1]++,{}));return Mr().s[28]++,Mr().b[8][0]++,t.layers||(Mr().b[8][1]++,[])}getSources(e){Mr().f[6]++;const t=(Mr().s[29]++,[]),r=(Mr().s[30]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Mr().s[31]++;for(const[i,s]of Object.entries(this.props.sources)){const l=(Mr().s[32]++,s.type);Mr().s[33]++,Mr().b[10][0]++,r[l]&&(Mr().b[10][1]++,r[l].indexOf(e)>-1)?(Mr().b[9][0]++,Mr().s[34]++,t.push(i)):Mr().b[9][1]++}return Mr().s[35]++,t}render(){Mr().f[7]++;const e=(Mr().s[36]++,this.props.t),t=(Mr().s[37]++,this.getSources(this.state.type)),r=(Mr().s[38]++,this.getLayersForSource(this.state.source));let i;return Mr().s[39]++,this.state.error?(Mr().b[11][0]++,Mr().s[40]++,i=oe.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,oe.jsx("a",{href:"#",onClick:()=>(Mr().f[8]++,Mr().s[41]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:"×"})]})):Mr().b[11][1]++,Mr().s[42]++,oe.jsxs(Z0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[i,oe.jsxs("div",{className:"maputnik-add-layer",children:[oe.jsx(nN,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Mr().f[9]++,Mr().s[43]++,this.setState({id:s,error:null})}}),oe.jsx(tN,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Mr().f[10]++,Mr().s[44]++,this.setState({type:s}))}),(Mr().b[12][0]++,this.state.type!=="background"&&(Mr().b[12][1]++,oe.jsx(_N,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Mr().f[11]++,Mr().s[45]++,this.setState({source:s}))}))),(Mr().b[13][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Mr().b[13][1]++,oe.jsx(xN,{isFixed:!0,sourceLayerIds:r,value:this.state["source-layer"],onChange:s=>(Mr().f[12]++,Mr().s[46]++,this.setState({"source-layer":s}))}))),oe.jsx(el,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const ioe=(Mr().s[47]++,Us()(roe));function K1(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return K1=function(){return l},l}K1();let CT=(K1().s[0]++,0);function Ny(n=(K1().b[0][0]++,"")){return K1().f[0]++,K1().s[1]++,CT++,K1().s[2]++,n+CT}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wi=function(){return l},l}Wi();function ooe(n,e){Wi().f[0]++;const t=(Wi().s[0]++,{...n.paint});Wi().s[1]++,Object.keys(t).forEach(i=>{Wi().f[1]++,Wi().s[2]++,i in ws["paint_"+e]?Wi().b[0][1]++:(Wi().b[0][0]++,Wi().s[3]++,delete t[i])});const r=(Wi().s[4]++,{...n.layout});return Wi().s[5]++,Object.keys(r).forEach(i=>{Wi().f[2]++,Wi().s[6]++,i in ws["layout_"+e]?Wi().b[1][1]++:(Wi().b[1][0]++,Wi().s[7]++,delete r[i])}),Wi().s[8]++,{...n,paint:t,layout:r,type:e}}function soe(n,e,t,r){if(Wi().f[3]++,Wi().s[9]++,r===void 0)if(Wi().b[2][0]++,Wi().s[10]++,e){Wi().b[3][0]++;const i=(Wi().s[11]++,{...n,[e]:{...n[e]}});return Wi().s[12]++,delete i[e][t],Wi().s[13]++,Object.keys(i[e]).length<1?(Wi().b[4][0]++,Wi().s[14]++,delete i[e]):Wi().b[4][1]++,Wi().s[15]++,i}else{Wi().b[3][1]++;const i=(Wi().s[16]++,{...n});return Wi().s[17]++,delete i[t],Wi().s[18]++,i}else return Wi().b[2][1]++,Wi().s[19]++,e?(Wi().b[5][0]++,Wi().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Wi().b[5][1]++,Wi().s[21]++,{...n,[t]:r})}function py(n){return Wi().f[4]++,Wi().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function aoe(n,e){Wi().f[5]++;const t=(Wi().s[23]++,py(n[e].id));let r=(Wi().s[24]++,e);Wi().s[25]++;for(let i=(Wi().s[26]++,e);i>0;i--){const s=(Wi().s[27]++,py(n[i-1].id));if(Wi().s[28]++,s===t)Wi().b[6][0]++,Wi().s[29]++,r=i-1;else return Wi().b[6][1]++,Wi().s[30]++,r}return Wi().s[31]++,r}function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vn=function(){return l},l}vn();class loe extends ur.Component{static defaultProps=(vn().s[0]++,{onLayerSelect:()=>{vn().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){vn().f[1]++,vn().s[1]++,super(e),vn().s[2]++,this.selectedItemRef=ur.createRef(),vn().s[3]++,this.scrollContainerRef=ur.createRef(),vn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ny()},isOpen:{add:!1}}}toggleModal(e){vn().f[2]++,vn().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Ny()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(vn().s[6]++,()=>{vn().f[3]++;let e=(vn().s[7]++,0);const t=(vn().s[8]++,{});vn().s[9]++,this.groupedLayers().forEach(r=>{vn().f[4]++;const i=(vn().s[10]++,py(r[0].id)),s=(vn().s[11]++,[i,e].join("-"));vn().s[12]++,r.length>1?(vn().b[0][0]++,vn().s[13]++,t[s]=this.state.areAllGroupsExpanded):vn().b[0][1]++,vn().s[14]++,r.forEach(l=>{vn().f[5]++,vn().s[15]++,e+=1})}),vn().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){vn().f[6]++;const e=(vn().s[17]++,[]),t=(vn().s[18]++,new Map);vn().s[19]++;for(let r=(vn().s[20]++,0);r<this.props.layers.length;r++){const i=(vn().s[21]++,this.props.layers[r]),s=(vn().s[22]++,this.props.layers[r-1]);vn().s[23]++,t.set(i.id,t.has(i.id)?(vn().b[1][0]++,t.get(i.id)+1):(vn().b[1][1]++,0));const l=(vn().s[24]++,{...i,key:`layers-list-${i.id}-${t.get(i.id)}`});if(vn().s[25]++,vn().b[3][0]++,s&&(vn().b[3][1]++,py(s.id)==py(l.id))){vn().b[2][0]++;const o=(vn().s[26]++,e[e.length-1]);vn().s[27]++,o.push(l)}else vn().b[2][1]++,vn().s[28]++,e.push([l])}return vn().s[29]++,e}toggleLayerGroup(e,t){vn().f[7]++;const r=(vn().s[30]++,[e,t].join("-")),i=(vn().s[31]++,{...this.state.collapsedGroups});vn().s[32]++,r in this.state.collapsedGroups?(vn().b[4][0]++,vn().s[33]++,i[r]=!this.state.collapsedGroups[r]):(vn().b[4][1]++,vn().s[34]++,i[r]=!1),vn().s[35]++,this.setState({collapsedGroups:i})}isCollapsed(e,t){vn().f[8]++;const r=(vn().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return vn().s[37]++,r===void 0?(vn().b[5][0]++,!0):(vn().b[5][1]++,r)}shouldComponentUpdate(e,t){if(vn().f[9]++,vn().s[38]++,this.state!==t)return vn().b[6][0]++,vn().s[39]++,!0;vn().b[6][1]++;function r(f){vn().f[10]++;const C=(vn().s[40]++,{id:f.id});return vn().s[41]++,f.layout?(vn().b[7][0]++,vn().s[42]++,C.layout={visibility:f.layout.visibility}):vn().b[7][1]++,vn().s[43]++,C}const i=(vn().s[44]++,t6.isEqual(e.layers.map(r),this.props.layers.map(r)));function s(f){vn().f[11]++;const C=(vn().s[45]++,{...f});return vn().s[46]++,delete C.layers,vn().s[47]++,C}const l=(vn().s[48]++,t6.isEqual(s(this.props),s(e))),o=(vn().s[49]++,vn().b[8][0]++,!(i&&(vn().b[8][1]++,l)));return vn().s[50]++,o}componentDidUpdate(e){if(vn().f[12]++,vn().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){vn().b[9][0]++;const t=(vn().s[52]++,this.selectedItemRef.current);if(vn().s[53]++,vn().b[11][0]++,t&&(vn().b[11][1]++,t.node)){vn().b[10][0]++;const r=(vn().s[54]++,t.node),i=(vn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),s=(vn().s[56]++,new IntersectionObserver(l=>{vn().f[13]++,vn().s[57]++,s.unobserve(r),vn().s[58]++,vn().b[13][0]++,l.length>0&&(vn().b[13][1]++,l[0].intersectionRatio<1)?(vn().b[12][0]++,vn().s[59]++,r.scrollIntoView()):vn().b[12][1]++},i));vn().s[60]++,s.observe(r)}else vn().b[10][1]++}else vn().b[9][1]++}render(){vn().f[14]++;const e=(vn().s[61]++,[]);let t=(vn().s[62]++,0);const r=(vn().s[63]++,this.groupedLayers());vn().s[64]++,r.forEach(s=>{vn().f[15]++;const l=(vn().s[65]++,py(s[0].id));if(vn().s[66]++,s.length>1){vn().b[14][0]++;const o=(vn().s[67]++,oe.jsx(tre,{"data-wd-key":[l,t].join("-"),"aria-controls":s.map(f=>(vn().f[16]++,vn().s[68]++,f.key)).join(" "),title:l,isActive:(vn().b[15][0]++,!this.isCollapsed(l,t)||(vn().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,l,t)},`group-${l}-${t}`));vn().s[69]++,e.push(o)}else vn().b[14][1]++;vn().s[70]++,s.forEach((o,f)=>{vn().f[17]++;const C=(vn().s[71]++,aoe(this.props.layers,t)),x=(vn().s[72]++,this.props.errors.find(P=>(vn().f[18]++,vn().s[73]++,vn().b[16][0]++,P.parsed&&(vn().b[16][1]++,P.parsed.type==="layer")&&(vn().b[16][2]++,P.parsed.data.index==t)))),B=(vn().s[74]++,{});vn().s[75]++,t===this.props.selectedLayerIndex?(vn().b[17][0]++,vn().s[76]++,B.ref=this.selectedItemRef):vn().b[17][1]++;const R=(vn().s[77]++,oe.jsx(Dre,{className:dm({"maputnik-layer-list-item-collapsed":(vn().b[18][0]++,s.length>1&&(vn().b[18][1]++,this.isCollapsed(l,C))&&(vn().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(vn().b[19][0]++,f==s.length-1&&(vn().b[19][1]++,s.length>1)),"maputnik-layer-list-item--error":!!x}),index:t,id:o.key,layerId:o.id,layerIndex:t,layerType:o.type,visibility:(vn().b[20][0]++,o.layout||(vn().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...B},o.key));vn().s[78]++,e.push(R),vn().s[79]++,t+=1})});const i=(vn().s[80]++,this.props.t);return vn().s[81]++,oe.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":i("Layers list"),ref:this.scrollContainerRef,children:[oe.jsx(ioe,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),oe.jsxs("header",{className:"maputnik-layer-list-header",children:[oe.jsx("span",{className:"maputnik-layer-list-header-title",children:i("Layers")}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx("div",{className:"maputnik-default-property",children:oe.jsx("div",{className:"maputnik-multibutton",children:oe.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(vn().b[21][0]++,i("Collapse")):(vn().b[21][1]++,i("Expand"))})})}),oe.jsx("div",{className:"maputnik-default-property",children:oe.jsx("div",{className:"maputnik-multibutton",children:oe.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:i("Add Layer")})})})]}),oe.jsx("div",{role:"navigation","aria-label":i("Layers list"),children:oe.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const Aoe=(vn().s[82]++,Us()(loe)),uoe=(vn().s[83]++,Ire(n=>(vn().f[19]++,vn().s[84]++,oe.jsx(Aoe,{...n}))));class coe extends ur.Component{render(){return vn().f[20]++,vn().s[85]++,oe.jsx(uoe,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(vn().f[21]++,vn().s[86]++,!1)})}}var xM,_T;function MN(){if(_T)return xM;_T=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function r(l){delete n[l]}function i(l,o){var f=n[l];if(!f)throw new Error("Cannot open "+e);f.openMenu(o)}function s(l,o){var f=n[l];if(!f)throw new Error("Cannot close "+e);f.closeMenu(o)}return xM={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},xM}var MM,bT;function hoe(){if(bT)return MM;bT=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(f){f.metaKey=f.metaKey||!1,f.ctrlKey=f.ctrlKey||!1,f.altKey=f.altKey||!1,f.shiftKey=f.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:f})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(l=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,l=0,o=this._members.length;l<o;l++)if(s=this._members[l],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,l=this._members.length;s<l;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var l=i.node||i,o=i.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var f=o.replace(/[\W_]/g,"").toLowerCase(),C={node:l,text:f};return s!=null?this._members.splice(s,0,C):this._members.push(C),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,l=i.length;s<l;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var l in i)if(s[l]!==void 0&&i[l]!==s[l])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return MM=function(s){return new n(s)},MM}var wM,xT;function doe(){if(xT)return wM;xT=1;var n=hoe(),e=MN(),t={wrap:!0,stringSearch:!0},r={init:function(f){this.updateOptions(f),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(f){var C=this.options;this.options=f||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),C&&C.id&&C.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(f){this.focusGroup.focusNodeAtIndex(f)},addItem:function(f){this.focusGroup.addMember(f)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(f){this.focusGroup._handleUnboundKey(f)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(f){if(!this.isOpen&&(f=f||{},f.focusMenu===void 0&&(f.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),f.focusMenu)){var C=this;this.moveFocusTimer=setTimeout(function(){C.focusItem(0)},0)}},closeMenu:function(f){this.isOpen&&(f=f||{},this.isOpen=!1,this.update(),f.focusButton&&this.button.ref.current.focus())},toggleMenu:function(f,C){f=f||{},C=C||{},this.isOpen?this.closeMenu(f):this.openMenu(C)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var f=o.button.ref.current;if(f){var C=f.ownerDocument.activeElement;if(!(f&&C===f)){var x=o.menu.ref.current;if(x===C){o.focusItem(0);return}x&&x.contains(C)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,f){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,f)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return wM=function(o){var f=Object.create(r);return f.init(o),f},wM}var SM,MT;function A3(){if(MT)return SM;MT=1;var n=tl(),e=n.createContext();return SM=e,SM}var EM,wT;function u3(){if(wT)return EM;wT=1;var n=pm();return EM={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},EM}var BM,ST;function c3(){return ST||(ST=1,BM=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),BM}var OM,ET;function foe(){if(ET)return OM;ET=1;function n(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function e(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function t(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var r=tl(),i=pm(),s=doe(),l=A3(),o=u3(),f=o.refType,C=c3(),x={children:i.node.isRequired,forwardedRef:f,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(U){return{onMenuToggle:U.onMenuToggle,onSelection:U.onSelection,closeOnSelection:U.closeOnSelection,closeOnBlur:U.closeOnBlur,id:U.id}},R=function(P){t(U,P);function U(N){n(this,U);var W=e(this,P.call(this,N));return W.manager=s(B(N)),W}return U.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},U.prototype.render=function(){var W={};return C(W,this.props,x),r.createElement(l.Provider,{value:this.manager},r.createElement(this.props.tag,W,this.props.children))},U}(r.Component);return R.propTypes=x,R.defaultProps={tag:"div"},OM=r.forwardRef(function(P,U){var N={forwardedRef:U};return C(N,P,{children:x.children,forwardedRef:x.forwardedRef}),C(N,{forwardedRef:U}),r.createElement(R,N,P.children)}),OM}var IM,BT;function poe(){if(BT)return IM;BT=1;function n(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function e(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function t(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}var r=tl(),i=pm(),s=A3(),l=u3(),o=l.refType,f=c3(),C={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},x=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(R){t(P,R);function P(){var U,N,W;n(this,P);for(var X=arguments.length,$=Array(X),re=0;re<X;re++)$[re]=arguments[re];return W=(U=(N=e(this,R.call.apply(R,[this].concat($))),N),N.ref=r.createRef(),N.handleKeyDown=function(te){if(!N.props.disabled){var V=N.props.ambManager;switch(te.key){case"ArrowDown":te.preventDefault(),V.isOpen?V.focusItem(0):V.openMenu();break;case"Enter":case" ":te.preventDefault(),V.toggleMenu();break;case"Escape":V.handleMenuKey(te);break;default:V.handleButtonNonArrowKey(te)}}},N.handleClick=function(){N.props.disabled||N.props.ambManager.toggleMenu({},{focusMenu:!1})},N.setRef=function(te){N.ref.current=te,typeof N.props.forwardedRef=="function"?N.props.forwardedRef(te):N.props.forwardedRef&&(N.props.forwardedRef.current=te)},U),e(N,W)}return P.prototype.componentDidMount=function(){this.props.ambManager.button=this},P.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},P.prototype.render=function(){var N=this.props,W=this.props.ambManager,X={role:"button",tabIndex:N.disabled?"":"0","aria-haspopup":!0,"aria-expanded":W.isOpen,"aria-disabled":N.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},$={};return f($,C),x().indexOf(N.tag)>=0&&delete $.disabled,W.options.closeOnBlur&&(X.onBlur=W.handleBlur),f(X,N,$),f(X,{ref:this.setRef}),r.createElement(N.tag,X,N.children)},P}(r.Component);return B.propTypes=C,B.defaultProps={tag:"span"},IM=r.forwardRef(function(R,P){return r.createElement(s.Consumer,null,function(U){var N={ambManager:U,forwardedRef:P};return f(N,R,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),r.createElement(B,N,R.children)})}),IM}var TM,OT;function moe(){return OT||(OT=1,TM=function(e,t,r){var i=0,s=0,l=!1,o=!1,f=!1;e.addEventListener("click",C,r),e.addEventListener("touchstart",x,r);function C(W){f||t(W)}function x(W){f=!0,!l&&(l=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",R,r),e.addEventListener("touchcancel",P,r),o=!1,i=W.touches[0].clientX,s=W.touches[0].clientY)}function B(W){o||Math.abs(W.touches[0].clientX-i)<=10&&Math.abs(W.touches[0].clientY-s)<=10||(o=!0)}function R(W){l=!1,U(),o||t(W)}function P(){l=!1,o=!1,i=0,s=0}function U(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",R,r),e.removeEventListener("touchcancel",P,r)}function N(){e.removeEventListener("click",C,r),e.removeEventListener("touchstart",x,r),U()}return{remove:N}}),TM}var kM,IT;function goe(){if(IT)return kM;IT=1;function n(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function e(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function t(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}var r=tl(),i=pm(),s=moe(),l=A3(),o=u3(),f=o.refType,C=c3(),x={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:f,tag:i.string},B=function(R){t(P,R);function P(){var U,N,W;n(this,P);for(var X=arguments.length,$=Array(X),re=0;re<X;re++)$[re]=arguments[re];return W=(U=(N=e(this,R.call.apply(R,[this].concat($))),N),N.ref=r.createRef(),N.addTapListener=function(){var te=N.ref.current;if(te){var V=te.ownerDocument;V&&(N.tapListener=s(V.documentElement,N.handleTap))}},N.handleTap=function(te){N.ref.current.contains(te.target)||N.props.ambManager.button.ref.current.contains(te.target)||N.props.ambManager.closeMenu()},N.setRef=function(te){N.ref.current=te,typeof N.props.forwardedRef=="function"?N.props.forwardedRef(te):N.props.forwardedRef&&(N.props.forwardedRef.current=te)},U),e(N,W)}return P.prototype.componentDidMount=function(){this.props.ambManager.menu=this},P.prototype.componentDidUpdate=function(){var N=this.props.ambManager;N.options.closeOnBlur&&(N.isOpen&&!this.tapListener?this.addTapListener():!N.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),N.isOpen||N.clearItems())},P.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},P.prototype.render=function(){var N=this.props,W=this.props.ambManager,X=function(){return typeof N.children=="function"?N.children({isOpen:W.isOpen}):W.isOpen?N.children:!1}();if(!X)return!1;var $={onKeyDown:W.handleMenuKey,role:"menu",tabIndex:-1};return W.options.closeOnBlur&&($.onBlur=W.handleBlur),C($,N,x),C($,{ref:this.setRef}),r.createElement(N.tag,$,X)},P}(r.Component);return B.propTypes=x,B.defaultProps={tag:"div"},kM=r.forwardRef(function(R,P){return r.createElement(l.Consumer,null,function(U){var N={ambManager:U,forwardedRef:P};return C(N,R,{ambManager:x.ambManager,children:x.children,forwardedRef:x.forwardedRef}),r.createElement(B,N,R.children)})}),kM}var PM,TT;function yoe(){if(TT)return PM;TT=1;function n(B,R){if(!(B instanceof R))throw new TypeError("Cannot call a class as a function")}function e(B,R){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:B}function t(B,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);B.prototype=Object.create(R&&R.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(B,R):B.__proto__=R)}var r=tl(),i=pm(),s=A3(),l=u3(),o=l.refType,f=c3(),C={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},x=function(B){t(R,B);function R(){var P,U,N;n(this,R);for(var W=arguments.length,X=Array(W),$=0;$<W;$++)X[$]=arguments[$];return N=(P=(U=e(this,B.call.apply(B,[this].concat(X))),U),U.ref=r.createRef(),U.handleKeyDown=function(re){re.key!=="Enter"&&re.key!==" "||U.props.tag==="a"&&U.props.href||(re.preventDefault(),U.selectItem(re))},U.selectItem=function(re){var te=typeof U.props.value<"u"?U.props.value:U.props.children;U.props.ambManager.handleSelection(te,re)},U.setRef=function(re){U.ref.current=re,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(re):U.props.forwardedRef&&(U.props.forwardedRef.current=re)},P),e(U,N)}return R.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},R.prototype.render=function(){var U={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return f(U,this.props,C),r.createElement(this.props.tag,U,this.props.children)},R}(r.Component);return x.propTypes=C,x.defaultProps={tag:"div"},PM=r.forwardRef(function(B,R){return r.createElement(s.Consumer,null,function(P){var U={ambManager:P,forwardedRef:R};return f(U,B,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),r.createElement(x,U,B.children)})}),PM}var RM,kT;function voe(){if(kT)return RM;kT=1;var n=MN();return RM={Wrapper:foe(),Button:poe(),Menu:goe(),MenuItem:yoe(),openMenu:n.openMenu,closeMenu:n.closeMenu},RM}var Gb=voe();function PT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PT(Object(t),!0).forEach(function(r){zl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function h3(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function RT(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function d3(n,e,t){return e&&RT(n.prototype,e),t&&RT(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function zl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fm(){return fm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fm.apply(this,arguments)}function cI(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&AB(n,e)}function sx(n){return sx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sx(n)}function AB(n,e){return AB=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},AB(n,e)}function Coe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _oe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function f3(n,e){if(n==null)return{};var t=_oe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function fp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function boe(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fp(n)}function hI(n){var e=Coe();return function(){var r=sx(n),i;if(e){var s=sx(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return boe(this,i)}}function xoe(n,e){return Soe(n)||Boe(n,e)||wN(n,e)||Ioe()}function Moe(n){return woe(n)||Eoe(n)||wN(n)||Ooe()}function woe(n){if(Array.isArray(n))return uB(n)}function Soe(n){if(Array.isArray(n))return n}function Eoe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Boe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,l,o;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(f){s=!0,o=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function wN(n,e){if(n){if(typeof n=="string")return uB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uB(n,e)}}function uB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ooe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ioe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Toe=d3(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,l=s===void 0?!1:s,o=e.allowZeroExpanded,f=o===void 0?!1:o;h3(this,n),zl(this,"expanded",void 0),zl(this,"allowMultipleExpanded",void 0),zl(this,"allowZeroExpanded",void 0),zl(this,"toggleExpanded",function(C){if(t.isItemDisabled(C))return t;var x=t.isItemExpanded(C);return x?t.augment({expanded:t.expanded.filter(function(B){return B!==C})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Moe(t.expanded),[C]):[C]})}),zl(this,"isItemDisabled",function(C){var x=t.isItemExpanded(C),B=t.expanded.length===1;return!!(x&&!t.allowZeroExpanded&&B)}),zl(this,"isItemExpanded",function(C){return t.expanded.indexOf(C)!==-1}),zl(this,"getPanelAttributes",function(C,x){var B=x??t.isItemExpanded(C);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(C),id:t.getPanelId(C),hidden:B?void 0:!0}}),zl(this,"getHeadingAttributes",function(){return{role:"heading"}}),zl(this,"getButtonAttributes",function(C,x){var B=x??t.isItemExpanded(C),R=t.isItemDisabled(C);return{id:t.getButtonId(C),"aria-disabled":R,"aria-expanded":B,"aria-controls":t.getPanelId(C),role:"button",tabIndex:0}}),zl(this,"getPanelId",function(C){return"accordion__panel-".concat(C)}),zl(this,"getButtonId",function(C){return"accordion__heading-".concat(C)}),zl(this,"augment",function(C){return new n(lB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},C))}),this.expanded=i,this.allowMultipleExpanded=l,this.allowZeroExpanded=f}),SN=nr.createContext(null),EN=function(n){cI(t,n);var e=hI(t);function t(){var r;h3(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),zl(fp(r),"state",new Toe({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),zl(fp(r),"toggleExpanded",function(o){r.setState(function(f){return f.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),zl(fp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),zl(fp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),zl(fp(r),"getPanelAttributes",function(o,f){return r.state.getPanelAttributes(o,f)}),zl(fp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),zl(fp(r),"getButtonAttributes",function(o,f){return r.state.getButtonAttributes(o,f)}),r}return d3(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,l=i.allowMultipleExpanded;return nr.createElement(SN.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(nr.PureComponent);zl(EN,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var BN=function(n){cI(t,n);var e=hI(t);function t(){var r;h3(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),zl(fp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return d3(t,[{key:"render",value:function(){return nr.createElement(SN.Consumer,null,this.renderChildren)}}]),t}(nr.PureComponent),koe=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Poe=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,f=f3(e,koe);return nr.createElement(EN,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:l},nr.createElement("div",fm({"data-accordion-component":"Accordion",className:r},f)))},cB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(cB||(cB={}));var ON=cB,DM=0;function Roe(){var n=DM;return DM=DM+1,"raa-".concat(n)}var Doe=nr.useId||Roe,Koe=/[\u0009\u000a\u000c\u000d\u0020]/g;function $C(n){return n===""||Koe.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var IN=nr.createContext(null),Foe=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,l=function(){i.toggleExpanded(r)},o=function(C){var x=s??C.isItemExpanded(r),B=C.isItemDisabled(r),R=C.getPanelAttributes(r,s),P=C.getHeadingAttributes(r),U=C.getButtonAttributes(r,s);return nr.createElement(IN.Provider,{value:{uuid:r,expanded:x,disabled:B,toggleExpanded:l,panelAttributes:R,headingAttributes:P,buttonAttributes:U}},t)};return nr.createElement(BN,null,o)},Loe=function(e){return nr.createElement(BN,null,function(t){return nr.createElement(Foe,fm({},e,{accordionContext:t}))})},p3=function(e){var t=e.children,r=function(s){return s?t(s):null};return nr.createElement(IN.Consumer,null,r)},Uoe=["uuid","dangerouslySetExpanded","className","activeClassName"],TN=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,l=e.activeClassName,o=f3(e,Uoe),f=nr.useState(Doe()),C=xoe(f,1),x=C[0],B=t??x,R=function(U){var N=U.expanded,W=N&&l?l:s;return nr.createElement("div",fm({"data-accordion-component":"AccordionItem",className:W},o))};return $C(B.toString()),o.id&&$C(o.id),nr.createElement(Loe,{uuid:B,dangerouslySetExpanded:r},nr.createElement(p3,null,R))};TN.displayName=ON.AccordionItem;function kN(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:kN(n.parentElement))}function m3(n){var e=kN(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function zoe(n){var e=m3(n)||[],t=e[0];t&&t.focus()}function Noe(n){var e=m3(n)||[],t=e[e.length-1];t&&t.focus()}function Goe(n){var e=m3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function joe(n){var e=m3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Km={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Woe=["toggleExpanded","className"],Qoe=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=f3(e,Woe),l=function(f){var C=f.key;if((C===Km.ENTER||C===Km.SPACE||C===Km.SPACE_DEPRECATED)&&(f.preventDefault(),t()),f.target instanceof HTMLElement)switch(C){case Km.HOME:{f.preventDefault(),zoe(f.target);break}case Km.END:{f.preventDefault(),Noe(f.target);break}case Km.LEFT:case Km.UP:{f.preventDefault(),joe(f.target);break}case Km.RIGHT:case Km.DOWN:{f.preventDefault(),Goe(f.target);break}}};return s.id&&$C(s.id),nr.createElement("div",fm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},Yoe=function(e){return nr.createElement(p3,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return nr.createElement(Qoe,fm({toggleExpanded:r},e,i))})},qoe={className:"accordion__heading","aria-level":3},$oe=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”

`,PN=function(n){cI(t,n);var e=hI(t);function t(){var r;h3(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),zl(fp(r),"ref",void 0),zl(fp(r),"setRef",function(o){r.ref=o}),r}return d3(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return nr.createElement("div",fm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error($oe)}}]),t}(nr.PureComponent);zl(PN,"defaultProps",qoe);var RN=function(e){return nr.createElement(p3,null,function(t){var r=t.headingAttributes;return e.id&&$C(e.id),nr.createElement(PN,fm({},e,r))})};RN.displayName=ON.AccordionItemHeading;var Voe=["className","region","id"],Hoe=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,l=f3(e,Voe),o=function(C){var x=C.panelAttributes;s&&$C(s);var B=lB(lB({},x),{},{"aria-labelledby":i?x["aria-labelledby"]:void 0});return nr.createElement("div",fm({"data-accordion-component":"AccordionItemPanel",className:r},l,B,{role:i?"region":void 0}))};return nr.createElement(p3,null,o)},l2={exports:{}},Zoe=l2.exports,DT;function g3(){return DT||(DT=1,function(n,e){(function(t,r){n.exports=r()})(Zoe,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),f=s||l||o,C=f&&(s?document.documentMode||6:+(o||l)[1]),x=!o&&/WebKit\//.test(t),B=x&&/Qt\/\d+\.\d+/.test(t),R=!o&&/Chrome\/(\d+)/.exec(t),P=R&&+R[1],U=/Opera\//.test(t),N=/Apple Computer/.test(navigator.vendor),W=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),X=/PhantomJS/.test(t),$=N&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),re=/Android/.test(t),te=$||re||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),V=$||/Mac/.test(r),ne=/\bCrOS\b/.test(t),G=/win/i.test(r),le=U&&t.match(/Version\/(\d*\.\d*)/);le&&(le=Number(le[1])),le&&le>=15&&(U=!1,x=!0);var fe=V&&(B||U&&(le==null||le<12.11)),pe=i||f&&C>=9;function we(u){return new RegExp("(^|\\s)"+u+"(?:$|\\s)\\s*")}var Se=function(u,g){var E=u.className,S=we(g).exec(E);if(S){var D=E.slice(S.index+S[0].length);u.className=E.slice(0,S.index)+(D?S[1]+D:"")}};function xe(u){for(var g=u.childNodes.length;g>0;--g)u.removeChild(u.firstChild);return u}function je(u,g){return xe(u).appendChild(g)}function Me(u,g,E,S){var D=document.createElement(u);if(E&&(D.className=E),S&&(D.style.cssText=S),typeof g=="string")D.appendChild(document.createTextNode(g));else if(g)for(var H=0;H<g.length;++H)D.appendChild(g[H]);return D}function rt(u,g,E,S){var D=Me(u,g,E,S);return D.setAttribute("role","presentation"),D}var Ct;document.createRange?Ct=function(u,g,E,S){var D=document.createRange();return D.setEnd(S||u,E),D.setStart(u,g),D}:Ct=function(u,g,E){var S=document.body.createTextRange();try{S.moveToElementText(u.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",E),S.moveStart("character",g),S};function it(u,g){if(g.nodeType==3&&(g=g.parentNode),u.contains)return u.contains(g);do if(g.nodeType==11&&(g=g.host),g==u)return!0;while(g=g.parentNode)}function nt(u){var g=u.ownerDocument||u,E;try{E=u.activeElement}catch{E=g.body||null}for(;E&&E.shadowRoot&&E.shadowRoot.activeElement;)E=E.shadowRoot.activeElement;return E}function Ge(u,g){var E=u.className;we(g).test(E)||(u.className+=(E?" ":"")+g)}function Ie(u,g){for(var E=u.split(" "),S=0;S<E.length;S++)E[S]&&!we(E[S]).test(g)&&(g+=" "+E[S]);return g}var $e=function(u){u.select()};$?$e=function(u){u.selectionStart=0,u.selectionEnd=u.value.length}:f&&($e=function(u){try{u.select()}catch{}});function gt(u){return u.display.wrapper.ownerDocument}function Dt(u){return ut(u.display.wrapper)}function ut(u){return u.getRootNode?u.getRootNode():u.ownerDocument}function Rt(u){return gt(u).defaultView}function St(u){var g=Array.prototype.slice.call(arguments,1);return function(){return u.apply(null,g)}}function Ke(u,g,E){g||(g={});for(var S in u)u.hasOwnProperty(S)&&(E!==!1||!g.hasOwnProperty(S))&&(g[S]=u[S]);return g}function Pe(u,g,E,S,D){g==null&&(g=u.search(/[^\s\u00a0]/),g==-1&&(g=u.length));for(var H=S||0,ce=D||0;;){var _e=u.indexOf("	",H);if(_e<0||_e>=g)return ce+(g-H);ce+=_e-H,ce+=E-ce%E,H=_e+1}}var Re=function(){this.id=null,this.f=null,this.time=0,this.handler=St(this.onTimeout,this)};Re.prototype.onTimeout=function(u){u.id=0,u.time<=+new Date?u.f():setTimeout(u.handler,u.time-+new Date)},Re.prototype.set=function(u,g){this.f=g;var E=+new Date+u;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,u),this.time=E)};function Ye(u,g){for(var E=0;E<u.length;++E)if(u[E]==g)return E;return-1}var vt=50,yt={toString:function(){return"CodeMirror.Pass"}},Et={scroll:!1},Zt={origin:"*mouse"},Ut={origin:"+move"};function An(u,g,E){for(var S=0,D=0;;){var H=u.indexOf("	",S);H==-1&&(H=u.length);var ce=H-S;if(H==u.length||D+ce>=g)return S+Math.min(ce,g-D);if(D+=H-S,D+=E-D%E,S=H+1,D>=g)return S}}var hr=[""];function Vt(u){for(;hr.length<=u;)hr.push(Vn(hr)+" ");return hr[u]}function Vn(u){return u[u.length-1]}function Pn(u,g){for(var E=[],S=0;S<u.length;S++)E[S]=g(u[S],S);return E}function Dn(u,g,E){for(var S=0,D=E(g);S<u.length&&E(u[S])<=D;)S++;u.splice(S,0,g)}function Ln(){}function Ir(u,g){var E;return Object.create?E=Object.create(u):(Ln.prototype=u,E=new Ln),g&&Ke(g,E),E}var rr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Yn(u){return/\w/.test(u)||u>""&&(u.toUpperCase()!=u.toLowerCase()||rr.test(u))}function We(u,g){return g?g.source.indexOf("\\w")>-1&&Yn(u)?!0:g.test(u):Yn(u)}function he(u){for(var g in u)if(u.hasOwnProperty(g)&&u[g])return!1;return!0}var me=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function et(u){return u.charCodeAt(0)>=768&&me.test(u)}function bt(u,g,E){for(;(E<0?g>0:g<u.length)&&et(u.charAt(g));)g+=E;return g}function Yt(u,g,E){for(var S=g>E?-1:1;;){if(g==E)return g;var D=(g+E)/2,H=S<0?Math.ceil(D):Math.floor(D);if(H==g)return u(H)?g:E;u(H)?E=H:g=H+S}}function Jt(u,g,E,S){if(!u)return S(g,E,"ltr",0);for(var D=!1,H=0;H<u.length;++H){var ce=u[H];(ce.from<E&&ce.to>g||g==E&&ce.to==g)&&(S(Math.max(ce.from,g),Math.min(ce.to,E),ce.level==1?"rtl":"ltr",H),D=!0)}D||S(g,E,"ltr")}var ir=null;function Xe(u,g,E){var S;ir=null;for(var D=0;D<u.length;++D){var H=u[D];if(H.from<g&&H.to>g)return D;H.to==g&&(H.from!=H.to&&E=="before"?S=D:ir=D),H.from==g&&(H.from!=H.to&&E!="before"?S=D:ir=D)}return S??ir}var ae=function(){var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(Ue){return Ue<=247?u.charAt(Ue):1424<=Ue&&Ue<=1524?"R":1536<=Ue&&Ue<=1785?g.charAt(Ue-1536):1774<=Ue&&Ue<=2220?"r":8192<=Ue&&Ue<=8203?"w":Ue==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,D=/[stwN]/,H=/[LRr]/,ce=/[Lb1n]/,_e=/[1n]/;function ke(Ue,mt,Bt){this.level=Ue,this.from=mt,this.to=Bt}return function(Ue,mt){var Bt=mt=="ltr"?"L":"R";if(Ue.length==0||mt=="ltr"&&!S.test(Ue))return!1;for(var tn=Ue.length,qt=[],xn=0;xn<tn;++xn)qt.push(E(Ue.charCodeAt(xn)));for(var Fn=0,Kn=Bt;Fn<tn;++Fn){var Hn=qt[Fn];Hn=="m"?qt[Fn]=Kn:Kn=Hn}for(var br=0,fr=Bt;br<tn;++br){var Pr=qt[br];Pr=="1"&&fr=="r"?qt[br]="n":H.test(Pr)&&(fr=Pr,Pr=="r"&&(qt[br]="R"))}for(var Jr=1,zr=qt[0];Jr<tn-1;++Jr){var eo=qt[Jr];eo=="+"&&zr=="1"&&qt[Jr+1]=="1"?qt[Jr]="1":eo==","&&zr==qt[Jr+1]&&(zr=="1"||zr=="n")&&(qt[Jr]=zr),zr=eo}for(var fo=0;fo<tn;++fo){var _a=qt[fo];if(_a==",")qt[fo]="N";else if(_a=="%"){var vs=void 0;for(vs=fo+1;vs<tn&&qt[vs]=="%";++vs);for(var Ys=fo&&qt[fo-1]=="!"||vs<tn&&qt[vs]=="1"?"1":"N",qs=fo;qs<vs;++qs)qt[qs]=Ys;fo=vs-1}}for(var na=0,NA=Bt;na<tn;++na){var $a=qt[na];NA=="L"&&$a=="1"?qt[na]="L":H.test($a)&&(NA=$a)}for(var Ds=0;Ds<tn;++Ds)if(D.test(qt[Ds])){var cs=void 0;for(cs=Ds+1;cs<tn&&D.test(qt[cs]);++cs);for(var xi=(Ds?qt[Ds-1]:Bt)=="L",Qo=(cs<tn?qt[cs]:Bt)=="L",$s=xi==Qo?xi?"L":"R":Bt,la=Ds;la<cs;++la)qt[la]=$s;Ds=cs-1}for(var xs=[],lu,Fo=0;Fo<tn;)if(ce.test(qt[Fo])){var Fd=Fo;for(++Fo;Fo<tn&&ce.test(qt[Fo]);++Fo);xs.push(new ke(0,Fd,Fo))}else{var GA=Fo,Yc=xs.length,xc=mt=="rtl"?1:0;for(++Fo;Fo<tn&&qt[Fo]!="L";++Fo);for(var al=GA;al<Fo;)if(_e.test(qt[al])){GA<al&&(xs.splice(Yc,0,new ke(1,GA,al)),Yc+=xc);var ll=al;for(++al;al<Fo&&_e.test(qt[al]);++al);xs.splice(Yc,0,new ke(2,ll,al)),Yc+=xc,GA=al}else++al;GA<Fo&&xs.splice(Yc,0,new ke(1,GA,Fo))}return mt=="ltr"&&(xs[0].level==1&&(lu=Ue.match(/^\s+/))&&(xs[0].from=lu[0].length,xs.unshift(new ke(0,0,lu[0].length))),Vn(xs).level==1&&(lu=Ue.match(/\s+$/))&&(Vn(xs).to-=lu[0].length,xs.push(new ke(0,tn-lu[0].length,tn)))),mt=="rtl"?xs.reverse():xs}}();function ve(u,g){var E=u.order;return E==null&&(E=u.order=ae(u.text,g)),E}var p=[],Ne=function(u,g,E){if(u.addEventListener)u.addEventListener(g,E,!1);else if(u.attachEvent)u.attachEvent("on"+g,E);else{var S=u._handlers||(u._handlers={});S[g]=(S[g]||p).concat(E)}};function Ve(u,g){return u._handlers&&u._handlers[g]||p}function Te(u,g,E){if(u.removeEventListener)u.removeEventListener(g,E,!1);else if(u.detachEvent)u.detachEvent("on"+g,E);else{var S=u._handlers,D=S&&S[g];if(D){var H=Ye(D,E);H>-1&&(S[g]=D.slice(0,H).concat(D.slice(H+1)))}}}function lt(u,g){var E=Ve(u,g);if(E.length)for(var S=Array.prototype.slice.call(arguments,2),D=0;D<E.length;++D)E[D].apply(null,S)}function ct(u,g,E){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),lt(u,E||g.type,u,g),Rn(g)||g.codemirrorIgnore}function Ft(u){var g=u._handlers&&u._handlers.cursorActivity;if(g)for(var E=u.curOp.cursorActivityHandlers||(u.curOp.cursorActivityHandlers=[]),S=0;S<g.length;++S)Ye(E,g[S])==-1&&E.push(g[S])}function jt(u,g){return Ve(u,g).length>0}function Gt(u){u.prototype.on=function(g,E){Ne(this,g,E)},u.prototype.off=function(g,E){Te(this,g,E)}}function nn(u){u.preventDefault?u.preventDefault():u.returnValue=!1}function On(u){u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}function Rn(u){return u.defaultPrevented!=null?u.defaultPrevented:u.returnValue==!1}function dr(u){nn(u),On(u)}function Tr(u){return u.target||u.srcElement}function or(u){var g=u.which;return g==null&&(u.button&1?g=1:u.button&2?g=3:u.button&4&&(g=2)),V&&u.ctrlKey&&g==1&&(g=3),g}var on=function(){if(f&&C<9)return!1;var u=Me("div");return"draggable"in u||"dragDrop"in u}(),ti;function li(u){if(ti==null){var g=Me("span","​");je(u,Me("span",[g,document.createTextNode("x")])),u.firstChild.offsetHeight!=0&&(ti=g.offsetWidth<=1&&g.offsetHeight>2&&!(f&&C<8))}var E=ti?Me("span","​"):Me("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var jr;function Fr(u){if(jr!=null)return jr;var g=je(u,document.createTextNode("AخA")),E=Ct(g,0,1).getBoundingClientRect(),S=Ct(g,1,2).getBoundingClientRect();return xe(u),!E||E.left==E.right?!1:jr=S.right-E.right<3}var wn=`

b`.split(/\n/).length!=3?function(u){for(var g=0,E=[],S=u.length;g<=S;){var D=u.indexOf(`
`,g);D==-1&&(D=u.length);var H=u.slice(g,u.charAt(D-1)=="\r"?D-1:D),ce=H.indexOf("\r");ce!=-1?(E.push(H.slice(0,ce)),g+=ce+1):(E.push(H),g=D+1)}return E}:function(u){return u.split(/\r\n?|\n/)},Dr=window.getSelection?function(u){try{return u.selectionStart!=u.selectionEnd}catch{return!1}}:function(u){var g;try{g=u.ownerDocument.selection.createRange()}catch{}return!g||g.parentElement()!=u?!1:g.compareEndPoints("StartToEnd",g)!=0},ui=function(){var u=Me("div");return"oncopy"in u?!0:(u.setAttribute("oncopy","return;"),typeof u.oncopy=="function")}(),Pi=null;function yi(u){if(Pi!=null)return Pi;var g=je(u,Me("span","x")),E=g.getBoundingClientRect(),S=Ct(g,0,1).getBoundingClientRect();return Pi=Math.abs(E.left-S.left)>1}var As={},qr={};function _s(u,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),As[u]=g}function La(u,g){qr[u]=g}function da(u){if(typeof u=="string"&&qr.hasOwnProperty(u))u=qr[u];else if(u&&typeof u.name=="string"&&qr.hasOwnProperty(u.name)){var g=qr[u.name];typeof g=="string"&&(g={name:g}),u=Ir(g,u),u.name=g.name}else{if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(u))return da("application/xml");if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(u))return da("application/json")}return typeof u=="string"?{name:u}:u||{name:"null"}}function No(u,g){g=da(g);var E=As[g.name];if(!E)return No(u,"text/plain");var S=E(u,g);if(zs.hasOwnProperty(g.name)){var D=zs[g.name];for(var H in D)D.hasOwnProperty(H)&&(S.hasOwnProperty(H)&&(S["_"+H]=S[H]),S[H]=D[H])}if(S.name=g.name,g.helperType&&(S.helperType=g.helperType),g.modeProps)for(var ce in g.modeProps)S[ce]=g.modeProps[ce];return S}var zs={};function hl(u,g){var E=zs.hasOwnProperty(u)?zs[u]:zs[u]={};Ke(g,E)}function ci(u,g){if(g===!0)return g;if(u.copyState)return u.copyState(g);var E={};for(var S in g){var D=g[S];D instanceof Array&&(D=D.concat([])),E[S]=D}return E}function oa(u,g){for(var E;u.innerMode&&(E=u.innerMode(g),!(!E||E.mode==u));)g=E.state,u=E.mode;return E||{mode:u,state:g}}function bo(u,g,E){return u.startState?u.startState(g,E):!0}var lo=function(u,g,E){this.pos=this.start=0,this.string=u,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};lo.prototype.eol=function(){return this.pos>=this.string.length},lo.prototype.sol=function(){return this.pos==this.lineStart},lo.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},lo.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},lo.prototype.eat=function(u){var g=this.string.charAt(this.pos),E;if(typeof u=="string"?E=g==u:E=g&&(u.test?u.test(g):u(g)),E)return++this.pos,g},lo.prototype.eatWhile=function(u){for(var g=this.pos;this.eat(u););return this.pos>g},lo.prototype.eatSpace=function(){for(var u=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>u},lo.prototype.skipToEnd=function(){this.pos=this.string.length},lo.prototype.skipTo=function(u){var g=this.string.indexOf(u,this.pos);if(g>-1)return this.pos=g,!0},lo.prototype.backUp=function(u){this.pos-=u},lo.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},lo.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},lo.prototype.match=function(u,g,E){if(typeof u=="string"){var S=function(ce){return E?ce.toLowerCase():ce},D=this.string.substr(this.pos,u.length);if(S(D)==S(u))return g!==!1&&(this.pos+=u.length),!0}else{var H=this.string.slice(this.pos).match(u);return H&&H.index>0?null:(H&&g!==!1&&(this.pos+=H[0].length),H)}},lo.prototype.current=function(){return this.string.slice(this.start,this.pos)},lo.prototype.hideFirstChars=function(u,g){this.lineStart+=u;try{return g()}finally{this.lineStart-=u}},lo.prototype.lookAhead=function(u){var g=this.lineOracle;return g&&g.lookAhead(u)},lo.prototype.baseToken=function(){var u=this.lineOracle;return u&&u.baseToken(this.pos)};function Er(u,g){if(g-=u.first,g<0||g>=u.size)throw new Error("There is no line "+(g+u.first)+" in the document.");for(var E=u;!E.lines;)for(var S=0;;++S){var D=E.children[S],H=D.chunkSize();if(g<H){E=D;break}g-=H}return E.lines[g]}function wa(u,g,E){var S=[],D=g.line;return u.iter(g.line,E.line+1,function(H){var ce=H.text;D==E.line&&(ce=ce.slice(0,E.ch)),D==g.line&&(ce=ce.slice(g.ch)),S.push(ce),++D}),S}function qo(u,g,E){var S=[];return u.iter(g,E,function(D){S.push(D.text)}),S}function Jo(u,g){var E=g-u.height;if(E)for(var S=u;S;S=S.parent)S.height+=E}function qe(u){if(u.parent==null)return null;for(var g=u.parent,E=Ye(g.lines,u),S=g.parent;S;g=S,S=S.parent)for(var D=0;S.children[D]!=g;++D)E+=S.children[D].chunkSize();return E+g.first}function xt(u,g){var E=u.first;e:do{for(var S=0;S<u.children.length;++S){var D=u.children[S],H=D.height;if(g<H){u=D;continue e}g-=H,E+=D.chunkSize()}return E}while(!u.lines);for(var ce=0;ce<u.lines.length;++ce){var _e=u.lines[ce],ke=_e.height;if(g<ke)break;g-=ke}return E+ce}function _n(u,g){return g>=u.first&&g<u.first+u.size}function jn(u,g){return String(u.lineNumberFormatter(g+u.firstLineNumber))}function fn(u,g,E){if(E===void 0&&(E=null),!(this instanceof fn))return new fn(u,g,E);this.line=u,this.ch=g,this.sticky=E}function gr(u,g){return u.line-g.line||u.ch-g.ch}function Qi(u,g){return u.sticky==g.sticky&&gr(u,g)==0}function Io(u){return fn(u.line,u.ch)}function fs(u,g){return gr(u,g)<0?g:u}function fa(u,g){return gr(u,g)<0?u:g}function iA(u,g){return Math.max(u.first,Math.min(g,u.first+u.size-1))}function vi(u,g){if(g.line<u.first)return fn(u.first,0);var E=u.first+u.size-1;return g.line>E?fn(E,Er(u,E).text.length):zu(g,Er(u,g.line).text.length)}function zu(u,g){var E=u.ch;return E==null||E>g?fn(u.line,g):E<0?fn(u.line,0):u}function jl(u,g){for(var E=[],S=0;S<g.length;S++)E[S]=vi(u,g[S]);return E}var nl=function(u,g){this.state=u,this.lookAhead=g},Ua=function(u,g,E,S){this.state=g,this.doc=u,this.line=E,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};Ua.prototype.lookAhead=function(u){var g=this.doc.getLine(this.line+u);return g!=null&&u>this.maxLookAhead&&(this.maxLookAhead=u),g},Ua.prototype.baseToken=function(u){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=u;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-u}},Ua.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ua.fromSaved=function(u,g,E){return g instanceof nl?new Ua(u,ci(u.mode,g.state),E,g.lookAhead):new Ua(u,ci(u.mode,g),E)},Ua.prototype.save=function(u){var g=u!==!1?ci(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new nl(g,this.maxLookAhead):g};function JA(u,g,E,S){var D=[u.state.modeGen],H={};oA(u,g.text,u.doc.mode,E,function(Ue,mt){return D.push(Ue,mt)},H,S);for(var ce=E.state,_e=function(Ue){E.baseTokens=D;var mt=u.state.overlays[Ue],Bt=1,tn=0;E.state=!0,oA(u,g.text,mt.mode,E,function(qt,xn){for(var Fn=Bt;tn<qt;){var Kn=D[Bt];Kn>qt&&D.splice(Bt,1,qt,D[Bt+1],Kn),Bt+=2,tn=Math.min(qt,Kn)}if(xn)if(mt.opaque)D.splice(Fn,Bt-Fn,qt,"overlay "+xn),Bt=Fn+2;else for(;Fn<Bt;Fn+=2){var Hn=D[Fn+1];D[Fn+1]=(Hn?Hn+" ":"")+"overlay "+xn}},H),E.state=ce,E.baseTokens=null,E.baseTokenPos=1},ke=0;ke<u.state.overlays.length;++ke)_e(ke);return{styles:D,classes:H.bgClass||H.textClass?H:null}}function Sa(u,g,E){if(!g.styles||g.styles[0]!=u.state.modeGen){var S=bi(u,qe(g)),D=g.text.length>u.options.maxHighlightLength&&ci(u.doc.mode,S.state),H=JA(u,g,S);D&&(S.state=D),g.stateAfter=S.save(!D),g.styles=H.styles,H.classes?g.styleClasses=H.classes:g.styleClasses&&(g.styleClasses=null),E===u.doc.highlightFrontier&&(u.doc.modeFrontier=Math.max(u.doc.modeFrontier,++u.doc.highlightFrontier))}return g.styles}function bi(u,g,E){var S=u.doc,D=u.display;if(!S.mode.startState)return new Ua(S,!0,g);var H=sA(u,g,E),ce=H>S.first&&Er(S,H-1).stateAfter,_e=ce?Ua.fromSaved(S,ce,H):new Ua(S,bo(S.mode),H);return S.iter(H,g,function(ke){Ao(u,ke.text,_e);var Ue=_e.line;ke.stateAfter=Ue==g-1||Ue%5==0||Ue>=D.viewFrom&&Ue<D.viewTo?_e.save():null,_e.nextLine()}),E&&(S.modeFrontier=_e.line),_e}function Ao(u,g,E,S){var D=u.doc.mode,H=new lo(g,u.options.tabSize,E);for(H.start=H.pos=S||0,g==""&&Oi(D,E.state);!H.eol();)xl(D,H,E.state),H.start=H.pos}function Oi(u,g){if(u.blankLine)return u.blankLine(g);if(u.innerMode){var E=oa(u,g);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function xl(u,g,E,S){for(var D=0;D<10;D++){S&&(S[0]=oa(u,E).mode);var H=u.token(g,E);if(g.pos>g.start)return H}throw new Error("Mode "+u.name+" failed to advance stream.")}var Oo=function(u,g,E){this.start=u.start,this.end=u.pos,this.string=u.current(),this.type=g||null,this.state=E};function Wl(u,g,E,S){var D=u.doc,H=D.mode,ce;g=vi(D,g);var _e=Er(D,g.line),ke=bi(u,g.line,E),Ue=new lo(_e.text,u.options.tabSize,ke),mt;for(S&&(mt=[]);(S||Ue.pos<g.ch)&&!Ue.eol();)Ue.start=Ue.pos,ce=xl(H,Ue,ke.state),S&&mt.push(new Oo(Ue,ce,ci(D.mode,ke.state)));return S?mt:new Oo(Ue,ce,ke.state)}function Di(u,g){if(u)for(;;){var E=u.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;u=u.slice(0,E.index)+u.slice(E.index+E[0].length);var S=E[1]?"bgClass":"textClass";g[S]==null?g[S]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(g[S])||(g[S]+=" "+E[2])}return u}function oA(u,g,E,S,D,H,ce){var _e=E.flattenSpans;_e==null&&(_e=u.options.flattenSpans);var ke=0,Ue=null,mt=new lo(g,u.options.tabSize,S),Bt,tn=u.options.addModeClass&&[null];for(g==""&&Di(Oi(E,S.state),H);!mt.eol();){if(mt.pos>u.options.maxHighlightLength?(_e=!1,ce&&Ao(u,g,S,mt.pos),mt.pos=g.length,Bt=null):Bt=Di(xl(E,mt,S.state,tn),H),tn){var qt=tn[0].name;qt&&(Bt="m-"+(Bt?qt+" "+Bt:qt))}if(!_e||Ue!=Bt){for(;ke<mt.start;)ke=Math.min(mt.start,ke+5e3),D(ke,Ue);Ue=Bt}mt.start=mt.pos}for(;ke<mt.pos;){var xn=Math.min(mt.pos,ke+5e3);D(xn,Ue),ke=xn}}function sA(u,g,E){for(var S,D,H=u.doc,ce=E?-1:g-(u.doc.mode.innerMode?1e3:100),_e=g;_e>ce;--_e){if(_e<=H.first)return H.first;var ke=Er(H,_e-1),Ue=ke.stateAfter;if(Ue&&(!E||_e+(Ue instanceof nl?Ue.lookAhead:0)<=H.modeFrontier))return _e;var mt=Pe(ke.text,null,u.options.tabSize);(D==null||S>mt)&&(D=_e-1,S=mt)}return D}function za(u,g){if(u.modeFrontier=Math.min(u.modeFrontier,g),!(u.highlightFrontier<g-10)){for(var E=u.first,S=g-1;S>E;S--){var D=Er(u,S).stateAfter;if(D&&(!(D instanceof nl)||S+D.lookAhead<g)){E=S+1;break}}u.highlightFrontier=Math.min(u.highlightFrontier,E)}}var Ni=!1,uo=!1;function $o(){Ni=!0}function Vo(){uo=!0}function Hi(u,g,E){this.marker=u,this.from=g,this.to=E}function Ea(u,g){if(u)for(var E=0;E<u.length;++E){var S=u[E];if(S.marker==g)return S}}function pa(u,g){for(var E,S=0;S<u.length;++S)u[S]!=g&&(E||(E=[])).push(u[S]);return E}function Ss(u,g,E){var S=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));S&&u.markedSpans&&S.has(u.markedSpans)?u.markedSpans.push(g):(u.markedSpans=u.markedSpans?u.markedSpans.concat([g]):[g],S&&S.add(u.markedSpans)),g.marker.attachLine(u)}function sa(u,g,E){var S;if(u)for(var D=0;D<u.length;++D){var H=u[D],ce=H.marker,_e=H.from==null||(ce.inclusiveLeft?H.from<=g:H.from<g);if(_e||H.from==g&&ce.type=="bookmark"&&(!E||!H.marker.insertLeft)){var ke=H.to==null||(ce.inclusiveRight?H.to>=g:H.to>g);(S||(S=[])).push(new Hi(ce,H.from,ke?null:H.to))}}return S}function EA(u,g,E){var S;if(u)for(var D=0;D<u.length;++D){var H=u[D],ce=H.marker,_e=H.to==null||(ce.inclusiveRight?H.to>=g:H.to>g);if(_e||H.from==g&&ce.type=="bookmark"&&(!E||H.marker.insertLeft)){var ke=H.from==null||(ce.inclusiveLeft?H.from<=g:H.from<g);(S||(S=[])).push(new Hi(ce,ke?null:H.from-g,H.to==null?null:H.to-g))}}return S}function Ii(u,g){if(g.full)return null;var E=_n(u,g.from.line)&&Er(u,g.from.line).markedSpans,S=_n(u,g.to.line)&&Er(u,g.to.line).markedSpans;if(!E&&!S)return null;var D=g.from.ch,H=g.to.ch,ce=gr(g.from,g.to)==0,_e=sa(E,D,ce),ke=EA(S,H,ce),Ue=g.text.length==1,mt=Vn(g.text).length+(Ue?D:0);if(_e)for(var Bt=0;Bt<_e.length;++Bt){var tn=_e[Bt];if(tn.to==null){var qt=Ea(ke,tn.marker);qt?Ue&&(tn.to=qt.to==null?null:qt.to+mt):tn.to=D}}if(ke)for(var xn=0;xn<ke.length;++xn){var Fn=ke[xn];if(Fn.to!=null&&(Fn.to+=mt),Fn.from==null){var Kn=Ea(_e,Fn.marker);Kn||(Fn.from=mt,Ue&&(_e||(_e=[])).push(Fn))}else Fn.from+=mt,Ue&&(_e||(_e=[])).push(Fn)}_e&&(_e=Ho(_e)),ke&&ke!=_e&&(ke=Ho(ke));var Hn=[_e];if(!Ue){var br=g.text.length-2,fr;if(br>0&&_e)for(var Pr=0;Pr<_e.length;++Pr)_e[Pr].to==null&&(fr||(fr=[])).push(new Hi(_e[Pr].marker,null,null));for(var Jr=0;Jr<br;++Jr)Hn.push(fr);Hn.push(ke)}return Hn}function Ho(u){for(var g=0;g<u.length;++g){var E=u[g];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&u.splice(g--,1)}return u.length?u:null}function Gi(u,g,E){var S=null;if(u.iter(g.line,E.line+1,function(qt){if(qt.markedSpans)for(var xn=0;xn<qt.markedSpans.length;++xn){var Fn=qt.markedSpans[xn].marker;Fn.readOnly&&(!S||Ye(S,Fn)==-1)&&(S||(S=[])).push(Fn)}}),!S)return null;for(var D=[{from:g,to:E}],H=0;H<S.length;++H)for(var ce=S[H],_e=ce.find(0),ke=0;ke<D.length;++ke){var Ue=D[ke];if(!(gr(Ue.to,_e.from)<0||gr(Ue.from,_e.to)>0)){var mt=[ke,1],Bt=gr(Ue.from,_e.from),tn=gr(Ue.to,_e.to);(Bt<0||!ce.inclusiveLeft&&!Bt)&&mt.push({from:Ue.from,to:_e.from}),(tn>0||!ce.inclusiveRight&&!tn)&&mt.push({from:_e.to,to:Ue.to}),D.splice.apply(D,mt),ke+=mt.length-3}}return D}function Sr(u){var g=u.markedSpans;if(g){for(var E=0;E<g.length;++E)g[E].marker.detachLine(u);u.markedSpans=null}}function to(u,g){if(g){for(var E=0;E<g.length;++E)g[E].marker.attachLine(u);u.markedSpans=g}}function J(u){return u.inclusiveLeft?-1:0}function Ee(u){return u.inclusiveRight?1:0}function st(u,g){var E=u.lines.length-g.lines.length;if(E!=0)return E;var S=u.find(),D=g.find(),H=gr(S.from,D.from)||J(u)-J(g);if(H)return-H;var ce=gr(S.to,D.to)||Ee(u)-Ee(g);return ce||g.id-u.id}function Ht(u,g){var E=uo&&u.markedSpans,S;if(E)for(var D=void 0,H=0;H<E.length;++H)D=E[H],D.marker.collapsed&&(g?D.from:D.to)==null&&(!S||st(S,D.marker)<0)&&(S=D.marker);return S}function kr(u){return Ht(u,!0)}function Qn(u){return Ht(u,!1)}function Zr(u,g){var E=uo&&u.markedSpans,S;if(E)for(var D=0;D<E.length;++D){var H=E[D];H.marker.collapsed&&(H.from==null||H.from<g)&&(H.to==null||H.to>g)&&(!S||st(S,H.marker)<0)&&(S=H.marker)}return S}function Ai(u,g,E,S,D){var H=Er(u,g),ce=uo&&H.markedSpans;if(ce)for(var _e=0;_e<ce.length;++_e){var ke=ce[_e];if(ke.marker.collapsed){var Ue=ke.marker.find(0),mt=gr(Ue.from,E)||J(ke.marker)-J(D),Bt=gr(Ue.to,S)||Ee(ke.marker)-Ee(D);if(!(mt>=0&&Bt<=0||mt<=0&&Bt>=0)&&(mt<=0&&(ke.marker.inclusiveRight&&D.inclusiveLeft?gr(Ue.to,E)>=0:gr(Ue.to,E)>0)||mt>=0&&(ke.marker.inclusiveRight&&D.inclusiveLeft?gr(Ue.from,S)<=0:gr(Ue.from,S)<0)))return!0}}}function Rr(u){for(var g;g=kr(u);)u=g.find(-1,!0).line;return u}function ni(u){for(var g;g=Qn(u);)u=g.find(1,!0).line;return u}function Yi(u){for(var g,E;g=Qn(u);)u=g.find(1,!0).line,(E||(E=[])).push(u);return E}function xo(u,g){var E=Er(u,g),S=Rr(E);return E==S?g:qe(S)}function si(u,g){if(g>u.lastLine())return g;var E=Er(u,g),S;if(!fi(u,E))return g;for(;S=Qn(E);)E=S.find(1,!0).line;return qe(E)+1}function fi(u,g){var E=uo&&g.markedSpans;if(E){for(var S=void 0,D=0;D<E.length;++D)if(S=E[D],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&co(u,g,S))return!0}}}function co(u,g,E){if(E.to==null){var S=E.marker.find(1,!0);return co(u,S.line,Ea(S.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==g.text.length)return!0;for(var D=void 0,H=0;H<g.markedSpans.length;++H)if(D=g.markedSpans[H],D.marker.collapsed&&!D.marker.widgetNode&&D.from==E.to&&(D.to==null||D.to!=E.from)&&(D.marker.inclusiveLeft||E.marker.inclusiveRight)&&co(u,g,D))return!0}function Ki(u){u=Rr(u);for(var g=0,E=u.parent,S=0;S<E.lines.length;++S){var D=E.lines[S];if(D==u)break;g+=D.height}for(var H=E.parent;H;E=H,H=E.parent)for(var ce=0;ce<H.children.length;++ce){var _e=H.children[ce];if(_e==E)break;g+=_e.height}return g}function Fi(u){if(u.height==0)return 0;for(var g=u.text.length,E,S=u;E=kr(S);){var D=E.find(0,!0);S=D.from.line,g+=D.from.ch-D.to.ch}for(S=u;E=Qn(S);){var H=E.find(0,!0);g-=S.text.length-H.from.ch,S=H.to.line,g+=S.text.length-H.to.ch}return g}function Ns(u){var g=u.display,E=u.doc;g.maxLine=Er(E,E.first),g.maxLineLength=Fi(g.maxLine),g.maxLineChanged=!0,E.iter(function(S){var D=Fi(S);D>g.maxLineLength&&(g.maxLineLength=D,g.maxLine=S)})}var Na=function(u,g,E){this.text=u,to(this,g),this.height=E?E(this):1};Na.prototype.lineNo=function(){return qe(this)},Gt(Na);function eu(u,g,E,S){u.text=g,u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null),u.order!=null&&(u.order=null),Sr(u),to(u,E);var D=S?S(u):1;D!=u.height&&Jo(u,D)}function Gs(u){u.parent=null,Sr(u)}var dl={},Ga={};function BA(u,g){if(!u||/^\s*$/.test(u))return null;var E=g.addModeClass?Ga:dl;return E[u]||(E[u]=u.replace(/\S+/g,"cm-$&"))}function uc(u,g){var E=rt("span",null,null,x?"padding-right: .1px":null),S={pre:rt("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:u,trailingSpace:!1,splitSpaces:u.getOption("lineWrapping")};g.measure={};for(var D=0;D<=(g.rest?g.rest.length:0);D++){var H=D?g.rest[D-1]:g.line,ce=void 0;S.pos=0,S.addToken=aA,Fr(u.display.measure)&&(ce=ve(H,u.doc.direction))&&(S.addToken=ps(S.addToken,ce)),S.map=[];var _e=g!=u.display.externalMeasured&&qe(H);md(H,S,Sa(u,H,_e)),H.styleClasses&&(H.styleClasses.bgClass&&(S.bgClass=Ie(H.styleClasses.bgClass,S.bgClass||"")),H.styleClasses.textClass&&(S.textClass=Ie(H.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(li(u.display.measure))),D==0?(g.measure.map=S.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(S.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if(x){var ke=S.content.lastChild;(/\bcm-tab\b/.test(ke.className)||ke.querySelector&&ke.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return lt(u,"renderLine",u,g.line,S.pre),S.pre.className&&(S.textClass=Ie(S.pre.className,S.textClass||"")),S}function mu(u){var g=Me("span","•","cm-invalidchar");return g.title="\\u"+u.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function aA(u,g,E,S,D,H,ce){if(g){var _e=u.splitSpaces?Ic(g,u.trailingSpace):g,ke=u.cm.state.specialChars,Ue=!1,mt;if(!ke.test(g))u.col+=g.length,mt=document.createTextNode(_e),u.map.push(u.pos,u.pos+g.length,mt),f&&C<9&&(Ue=!0),u.pos+=g.length;else{mt=document.createDocumentFragment();for(var Bt=0;;){ke.lastIndex=Bt;var tn=ke.exec(g),qt=tn?tn.index-Bt:g.length-Bt;if(qt){var xn=document.createTextNode(_e.slice(Bt,Bt+qt));f&&C<9?mt.appendChild(Me("span",[xn])):mt.appendChild(xn),u.map.push(u.pos,u.pos+qt,xn),u.col+=qt,u.pos+=qt}if(!tn)break;Bt+=qt+1;var Fn=void 0;if(tn[0]=="	"){var Kn=u.cm.options.tabSize,Hn=Kn-u.col%Kn;Fn=mt.appendChild(Me("span",Vt(Hn),"cm-tab")),Fn.setAttribute("role","presentation"),Fn.setAttribute("cm-text","	"),u.col+=Hn}else tn[0]=="\r"||tn[0]==`
`?(Fn=mt.appendChild(Me("span",tn[0]=="\r"?"␍":"␤","cm-invalidchar")),Fn.setAttribute("cm-text",tn[0]),u.col+=1):(Fn=u.cm.options.specialCharPlaceholder(tn[0]),Fn.setAttribute("cm-text",tn[0]),f&&C<9?mt.appendChild(Me("span",[Fn])):mt.appendChild(Fn),u.col+=1);u.map.push(u.pos,u.pos+1,Fn),u.pos++}}if(u.trailingSpace=_e.charCodeAt(g.length-1)==32,E||S||D||Ue||H||ce){var br=E||"";S&&(br+=S),D&&(br+=D);var fr=Me("span",[mt],br,H);if(ce)for(var Pr in ce)ce.hasOwnProperty(Pr)&&Pr!="style"&&Pr!="class"&&fr.setAttribute(Pr,ce[Pr]);return u.content.appendChild(fr)}u.content.appendChild(mt)}}function Ic(u,g){if(u.length>1&&!/  /.test(u))return u;for(var E=g,S="",D=0;D<u.length;D++){var H=u.charAt(D);H==" "&&E&&(D==u.length-1||u.charCodeAt(D+1)==32)&&(H=" "),S+=H,E=H==" "}return S}function ps(u,g){return function(E,S,D,H,ce,_e,ke){D=D?D+" cm-force-border":"cm-force-border";for(var Ue=E.pos,mt=Ue+S.length;;){for(var Bt=void 0,tn=0;tn<g.length&&(Bt=g[tn],!(Bt.to>Ue&&Bt.from<=Ue));tn++);if(Bt.to>=mt)return u(E,S,D,H,ce,_e,ke);u(E,S.slice(0,Bt.to-Ue),D,H,null,_e,ke),H=null,S=S.slice(Bt.to-Ue),Ue=Bt.to}}}function Tc(u,g,E,S){var D=!S&&E.widgetNode;D&&u.map.push(u.pos,u.pos+g,D),!S&&u.cm.display.input.needsContentAttribute&&(D||(D=u.content.appendChild(document.createElement("span"))),D.setAttribute("cm-marker",E.id)),D&&(u.cm.display.input.setUneditable(D),u.content.appendChild(D)),u.pos+=g,u.trailingSpace=!1}function md(u,g,E){var S=u.markedSpans,D=u.text,H=0;if(!S){for(var ce=1;ce<E.length;ce+=2)g.addToken(g,D.slice(H,H=E[ce]),BA(E[ce+1],g.cm.options));return}for(var _e=D.length,ke=0,Ue=1,mt="",Bt,tn,qt=0,xn,Fn,Kn,Hn,br;;){if(qt==ke){xn=Fn=Kn=tn="",br=null,Hn=null,qt=1/0;for(var fr=[],Pr=void 0,Jr=0;Jr<S.length;++Jr){var zr=S[Jr],eo=zr.marker;if(eo.type=="bookmark"&&zr.from==ke&&eo.widgetNode)fr.push(eo);else if(zr.from<=ke&&(zr.to==null||zr.to>ke||eo.collapsed&&zr.to==ke&&zr.from==ke)){if(zr.to!=null&&zr.to!=ke&&qt>zr.to&&(qt=zr.to,Fn=""),eo.className&&(xn+=" "+eo.className),eo.css&&(tn=(tn?tn+";":"")+eo.css),eo.startStyle&&zr.from==ke&&(Kn+=" "+eo.startStyle),eo.endStyle&&zr.to==qt&&(Pr||(Pr=[])).push(eo.endStyle,zr.to),eo.title&&((br||(br={})).title=eo.title),eo.attributes)for(var fo in eo.attributes)(br||(br={}))[fo]=eo.attributes[fo];eo.collapsed&&(!Hn||st(Hn.marker,eo)<0)&&(Hn=zr)}else zr.from>ke&&qt>zr.from&&(qt=zr.from)}if(Pr)for(var _a=0;_a<Pr.length;_a+=2)Pr[_a+1]==qt&&(Fn+=" "+Pr[_a]);if(!Hn||Hn.from==ke)for(var vs=0;vs<fr.length;++vs)Tc(g,0,fr[vs]);if(Hn&&(Hn.from||0)==ke){if(Tc(g,(Hn.to==null?_e+1:Hn.to)-ke,Hn.marker,Hn.from==null),Hn.to==null)return;Hn.to==ke&&(Hn=!1)}}if(ke>=_e)break;for(var Ys=Math.min(_e,qt);;){if(mt){var qs=ke+mt.length;if(!Hn){var na=qs>Ys?mt.slice(0,Ys-ke):mt;g.addToken(g,na,Bt?Bt+xn:xn,Kn,ke+na.length==qt?Fn:"",tn,br)}if(qs>=Ys){mt=mt.slice(Ys-ke),ke=Ys;break}ke=qs,Kn=""}mt=D.slice(H,H=E[Ue++]),Bt=BA(E[Ue++],g.cm.options)}}}function Pp(u,g,E){this.line=g,this.rest=Yi(g),this.size=this.rest?qe(Vn(this.rest))-E+1:1,this.node=this.text=null,this.hidden=fi(u,g)}function qh(u,g,E){for(var S=[],D,H=g;H<E;H=D){var ce=new Pp(u.doc,Er(u.doc,H),H);D=H+ce.size,S.push(ce)}return S}var $h=null;function gd(u){$h?$h.ops.push(u):u.ownsGroup=$h={ops:[u],delayedCallbacks:[]}}function Vh(u){var g=u.delayedCallbacks,E=0;do{for(;E<g.length;E++)g[E].call(null);for(var S=0;S<u.ops.length;S++){var D=u.ops[S];if(D.cursorActivityHandlers)for(;D.cursorActivityCalled<D.cursorActivityHandlers.length;)D.cursorActivityHandlers[D.cursorActivityCalled++].call(null,D.cm)}}while(E<g.length)}function yd(u,g){var E=u.ownsGroup;if(E)try{Vh(E)}finally{$h=null,g(E)}}var Nu=null;function Es(u,g){var E=Ve(u,g);if(E.length){var S=Array.prototype.slice.call(arguments,2),D;$h?D=$h.delayedCallbacks:Nu?D=Nu:(D=Nu=[],setTimeout(gu,0));for(var H=function(_e){D.push(function(){return E[_e].apply(null,S)})},ce=0;ce<E.length;++ce)H(ce)}}function gu(){var u=Nu;Nu=null;for(var g=0;g<u.length;++g)u[g]()}function uf(u,g,E,S){for(var D=0;D<g.changes.length;D++){var H=g.changes[D];H=="text"?Rp(u,g):H=="gutter"?vd(u,g,E,S):H=="class"?Hh(u,g):H=="widget"&&Pc(u,g,S)}g.changes=null}function nh(u){return u.node==u.text&&(u.node=Me("div",null,null,"position: relative"),u.text.parentNode&&u.text.parentNode.replaceChild(u.node,u.text),u.node.appendChild(u.text),f&&C<8&&(u.node.style.zIndex=2)),u.node}function _h(u,g){var E=g.bgClass?g.bgClass+" "+(g.line.bgClass||""):g.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),g.background)E?g.background.className=E:(g.background.parentNode.removeChild(g.background),g.background=null);else if(E){var S=nh(g);g.background=S.insertBefore(Me("div",null,E),S.firstChild),u.display.input.setUneditable(g.background)}}function kc(u,g){var E=u.display.externalMeasured;return E&&E.line==g.line?(u.display.externalMeasured=null,g.measure=E.measure,E.built):uc(u,g)}function Rp(u,g){var E=g.text.className,S=kc(u,g);g.text==g.node&&(g.node=S.pre),g.text.parentNode.replaceChild(S.pre,g.text),g.text=S.pre,S.bgClass!=g.bgClass||S.textClass!=g.textClass?(g.bgClass=S.bgClass,g.textClass=S.textClass,Hh(u,g)):E&&(g.text.className=E)}function Hh(u,g){_h(u,g),g.line.wrapClass?nh(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var E=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=E||""}function vd(u,g,E,S){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var D=nh(g);g.gutterBackground=Me("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(u.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),u.display.input.setUneditable(g.gutterBackground),D.insertBefore(g.gutterBackground,g.text)}var H=g.line.gutterMarkers;if(u.options.lineNumbers||H){var ce=nh(g),_e=g.gutter=Me("div",null,"CodeMirror-gutter-wrapper","left: "+(u.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(_e.setAttribute("aria-hidden","true"),u.display.input.setUneditable(_e),ce.insertBefore(_e,g.text),g.line.gutterClass&&(_e.className+=" "+g.line.gutterClass),u.options.lineNumbers&&(!H||!H["CodeMirror-linenumbers"])&&(g.lineNumber=_e.appendChild(Me("div",jn(u.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.display.lineNumInnerWidth+"px"))),H)for(var ke=0;ke<u.display.gutterSpecs.length;++ke){var Ue=u.display.gutterSpecs[ke].className,mt=H.hasOwnProperty(Ue)&&H[Ue];mt&&_e.appendChild(Me("div",[mt],"CodeMirror-gutter-elt","left: "+S.gutterLeft[Ue]+"px; width: "+S.gutterWidth[Ue]+"px"))}}}function Pc(u,g,E){g.alignable&&(g.alignable=null);for(var S=we("CodeMirror-linewidget"),D=g.node.firstChild,H=void 0;D;D=H)H=D.nextSibling,S.test(D.className)&&g.node.removeChild(D);cf(u,g,E)}function Dp(u,g,E,S){var D=kc(u,g);return g.text=g.node=D.pre,D.bgClass&&(g.bgClass=D.bgClass),D.textClass&&(g.textClass=D.textClass),Hh(u,g),vd(u,g,E,S),cf(u,g,S),g.node}function cf(u,g,E){if(OA(u,g.line,g,E,!0),g.rest)for(var S=0;S<g.rest.length;S++)OA(u,g.rest[S],g,E,!1)}function OA(u,g,E,S,D){if(g.widgets)for(var H=nh(E),ce=0,_e=g.widgets;ce<_e.length;++ce){var ke=_e[ce],Ue=Me("div",[ke.node],"CodeMirror-linewidget"+(ke.className?" "+ke.className:""));ke.handleMouseEvents||Ue.setAttribute("cm-ignore-events","true"),Zh(ke,Ue,E,S),u.display.input.setUneditable(Ue),D&&ke.above?H.insertBefore(Ue,E.gutter||E.text):H.appendChild(Ue),Es(ke,"redraw")}}function Zh(u,g,E,S){if(u.noHScroll){(E.alignable||(E.alignable=[])).push(g);var D=S.wrapperWidth;g.style.left=S.fixedPos+"px",u.coverGutter||(D-=S.gutterTotalWidth,g.style.paddingLeft=S.gutterTotalWidth+"px"),g.style.width=D+"px"}u.coverGutter&&(g.style.zIndex=5,g.style.position="relative",u.noHScroll||(g.style.marginLeft=-S.gutterTotalWidth+"px"))}function Ml(u){if(u.height!=null)return u.height;var g=u.doc.cm;if(!g)return 0;if(!it(document.body,u.node)){var E="position: relative;";u.coverGutter&&(E+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),u.noHScroll&&(E+="width: "+g.display.wrapper.clientWidth+"px;"),je(g.display.measure,Me("div",[u.node],null,E))}return u.height=u.node.parentNode.offsetHeight}function Gu(u,g){for(var E=Tr(g);E!=u.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==u.sizer&&E!=u.mover)return!0}function bh(u){return u.lineSpace.offsetTop}function Cd(u){return u.mover.offsetHeight-u.lineSpace.offsetHeight}function _d(u){if(u.cachedPaddingH)return u.cachedPaddingH;var g=je(u.measure,Me("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,S={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(u.cachedPaddingH=S),S}function fl(u){return vt-u.display.nativeBarWidth}function Rc(u){return u.display.scroller.clientWidth-fl(u)-u.display.barWidth}function Dc(u){return u.display.scroller.clientHeight-fl(u)-u.display.barHeight}function ju(u,g,E){var S=u.options.lineWrapping,D=S&&Rc(u);if(!g.measure.heights||S&&g.measure.width!=D){var H=g.measure.heights=[];if(S){g.measure.width=D;for(var ce=g.text.firstChild.getClientRects(),_e=0;_e<ce.length-1;_e++){var ke=ce[_e],Ue=ce[_e+1];Math.abs(ke.bottom-Ue.bottom)>2&&H.push((ke.bottom+Ue.top)/2-E.top)}}H.push(E.bottom-E.top)}}function qf(u,g,E){if(u.line==g)return{map:u.measure.map,cache:u.measure.cache};if(u.rest){for(var S=0;S<u.rest.length;S++)if(u.rest[S]==g)return{map:u.measure.maps[S],cache:u.measure.caches[S]};for(var D=0;D<u.rest.length;D++)if(qe(u.rest[D])>E)return{map:u.measure.maps[D],cache:u.measure.caches[D],before:!0}}}function hf(u,g){g=Rr(g);var E=qe(g),S=u.display.externalMeasured=new Pp(u.doc,g,E);S.lineN=E;var D=S.built=uc(u,S);return S.text=D.pre,je(u.display.lineMeasure,D.pre),S}function bd(u,g,E,S){return pl(u,rl(u,g),E,S)}function xd(u,g){if(g>=u.display.viewFrom&&g<u.display.viewTo)return u.display.view[tu(u,g)];var E=u.display.externalMeasured;if(E&&g>=E.lineN&&g<E.lineN+E.size)return E}function rl(u,g){var E=qe(g),S=xd(u,E);S&&!S.text?S=null:S&&S.changes&&(uf(u,S,E,ih(u)),u.curOp.forceUpdate=!0),S||(S=hf(u,g));var D=qf(S,g,E);return{line:g,view:S,rect:null,map:D.map,cache:D.cache,before:D.before,hasHeights:!1}}function pl(u,g,E,S,D){g.before&&(E=-1);var H=E+(S||""),ce;return g.cache.hasOwnProperty(H)?ce=g.cache[H]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(ju(u,g.view,g.rect),g.hasHeights=!0),ce=so(u,g,E,S),ce.bogus||(g.cache[H]=ce)),{left:ce.left,right:ce.right,top:D?ce.rtop:ce.top,bottom:D?ce.rbottom:ce.bottom}}var $f={left:0,right:0,top:0,bottom:0};function xh(u,g,E){for(var S,D,H,ce,_e,ke,Ue=0;Ue<u.length;Ue+=3)if(_e=u[Ue],ke=u[Ue+1],g<_e?(D=0,H=1,ce="left"):g<ke?(D=g-_e,H=D+1):(Ue==u.length-3||g==ke&&u[Ue+3]>g)&&(H=ke-_e,D=H-1,g>=ke&&(ce="right")),D!=null){if(S=u[Ue+2],_e==ke&&E==(S.insertLeft?"left":"right")&&(ce=E),E=="left"&&D==0)for(;Ue&&u[Ue-2]==u[Ue-3]&&u[Ue-1].insertLeft;)S=u[(Ue-=3)+2],ce="left";if(E=="right"&&D==ke-_e)for(;Ue<u.length-3&&u[Ue+3]==u[Ue+4]&&!u[Ue+5].insertLeft;)S=u[(Ue+=3)+2],ce="right";break}return{node:S,start:D,end:H,collapse:ce,coverStart:_e,coverEnd:ke}}function Kp(u,g){var E=$f;if(g=="left")for(var S=0;S<u.length&&(E=u[S]).left==E.right;S++);else for(var D=u.length-1;D>=0&&(E=u[D]).left==E.right;D--);return E}function so(u,g,E,S){var D=xh(g.map,E,S),H=D.node,ce=D.start,_e=D.end,ke=D.collapse,Ue;if(H.nodeType==3){for(var mt=0;mt<4;mt++){for(;ce&&et(g.line.text.charAt(D.coverStart+ce));)--ce;for(;D.coverStart+_e<D.coverEnd&&et(g.line.text.charAt(D.coverStart+_e));)++_e;if(f&&C<9&&ce==0&&_e==D.coverEnd-D.coverStart?Ue=H.parentNode.getBoundingClientRect():Ue=Kp(Ct(H,ce,_e).getClientRects(),S),Ue.left||Ue.right||ce==0)break;_e=ce,ce=ce-1,ke="right"}f&&C<11&&(Ue=Ba(u.display.measure,Ue))}else{ce>0&&(ke=S="right");var Bt;u.options.lineWrapping&&(Bt=H.getClientRects()).length>1?Ue=Bt[S=="right"?Bt.length-1:0]:Ue=H.getBoundingClientRect()}if(f&&C<9&&!ce&&(!Ue||!Ue.left&&!Ue.right)){var tn=H.parentNode.getClientRects()[0];tn?Ue={left:tn.left,right:tn.left+ga(u.display),top:tn.top,bottom:tn.bottom}:Ue=$f}for(var qt=Ue.top-g.rect.top,xn=Ue.bottom-g.rect.top,Fn=(qt+xn)/2,Kn=g.view.measure.heights,Hn=0;Hn<Kn.length-1&&!(Fn<Kn[Hn]);Hn++);var br=Hn?Kn[Hn-1]:0,fr=Kn[Hn],Pr={left:(ke=="right"?Ue.right:Ue.left)-g.rect.left,right:(ke=="left"?Ue.left:Ue.right)-g.rect.left,top:br,bottom:fr};return!Ue.left&&!Ue.right&&(Pr.bogus=!0),u.options.singleCursorHeightPerLine||(Pr.rtop=qt,Pr.rbottom=xn),Pr}function Ba(u,g){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!yi(u))return g;var E=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*E,right:g.right*E,top:g.top*S,bottom:g.bottom*S}}function Mh(u){if(u.measure&&(u.measure.cache={},u.measure.heights=null,u.rest))for(var g=0;g<u.rest.length;g++)u.measure.caches[g]={}}function Md(u){u.display.externalMeasure=null,xe(u.display.lineMeasure);for(var g=0;g<u.display.view.length;g++)Mh(u.display.view[g])}function rh(u){Md(u),u.display.cachedCharWidth=u.display.cachedTextHeight=u.display.cachedPaddingH=null,u.options.lineWrapping||(u.display.maxLineChanged=!0),u.display.lineNumChars=null}function df(u){return R&&re?-(u.body.getBoundingClientRect().left-parseInt(getComputedStyle(u.body).marginLeft)):u.defaultView.pageXOffset||(u.documentElement||u.body).scrollLeft}function ff(u){return R&&re?-(u.body.getBoundingClientRect().top-parseInt(getComputedStyle(u.body).marginTop)):u.defaultView.pageYOffset||(u.documentElement||u.body).scrollTop}function Kc(u){var g=Rr(u),E=g.widgets,S=0;if(E)for(var D=0;D<E.length;++D)E[D].above&&(S+=Ml(E[D]));return S}function Wu(u,g,E,S,D){if(!D){var H=Kc(g);E.top+=H,E.bottom+=H}if(S=="line")return E;S||(S="local");var ce=Ki(g);if(S=="local"?ce+=bh(u.display):ce-=u.display.viewOffset,S=="page"||S=="window"){var _e=u.display.lineSpace.getBoundingClientRect();ce+=_e.top+(S=="window"?0:ff(gt(u)));var ke=_e.left+(S=="window"?0:df(gt(u)));E.left+=ke,E.right+=ke}return E.top+=ce,E.bottom+=ce,E}function rn(u,g,E){if(E=="div")return g;var S=g.left,D=g.top;if(E=="page")S-=df(gt(u)),D-=ff(gt(u));else if(E=="local"||!E){var H=u.display.sizer.getBoundingClientRect();S+=H.left,D+=H.top}var ce=u.display.lineSpace.getBoundingClientRect();return{left:S-ce.left,top:D-ce.top}}function In(u,g,E,S,D){return S||(S=Er(u.doc,g.line)),Wu(u,S,bd(u,S,g.ch,D),E)}function dn(u,g,E,S,D,H){S=S||Er(u.doc,g.line),D||(D=rl(u,S));function ce(xn,Fn){var Kn=pl(u,D,xn,Fn?"right":"left",H);return Fn?Kn.left=Kn.right:Kn.right=Kn.left,Wu(u,S,Kn,E)}var _e=ve(S,u.doc.direction),ke=g.ch,Ue=g.sticky;if(ke>=S.text.length?(ke=S.text.length,Ue="before"):ke<=0&&(ke=0,Ue="after"),!_e)return ce(Ue=="before"?ke-1:ke,Ue=="before");function mt(xn,Fn,Kn){var Hn=_e[Fn],br=Hn.level==1;return ce(Kn?xn-1:xn,br!=Kn)}var Bt=Xe(_e,ke,Ue),tn=ir,qt=mt(ke,Bt,Ue=="before");return tn!=null&&(qt.other=mt(ke,tn,Ue!="before")),qt}function Lr(u,g){var E=0;g=vi(u.doc,g),u.options.lineWrapping||(E=ga(u.display)*g.ch);var S=Er(u.doc,g.line),D=Ki(S)+bh(u.display);return{left:E,right:E,top:D,bottom:D+S.height}}function Ri(u,g,E,S,D){var H=fn(u,g,E);return H.xRel=D,S&&(H.outside=S),H}function Go(u,g,E){var S=u.doc;if(E+=u.display.viewOffset,E<0)return Ri(S.first,0,null,-1,-1);var D=xt(S,E),H=S.first+S.size-1;if(D>H)return Ri(S.first+S.size-1,Er(S,H).text.length,null,1,1);g<0&&(g=0);for(var ce=Er(S,D);;){var _e=pf(u,ce,D,g,E),ke=Zr(ce,_e.ch+(_e.xRel>0||_e.outside>0?1:0));if(!ke)return _e;var Ue=ke.find(1);if(Ue.line==D)return Ue;ce=Er(S,D=Ue.line)}}function ma(u,g,E,S){S-=Kc(g);var D=g.text.length,H=Yt(function(ce){return pl(u,E,ce-1).bottom<=S},D,0);return D=Yt(function(ce){return pl(u,E,ce).top>S},H,D),{begin:H,end:D}}function es(u,g,E,S){E||(E=rl(u,g));var D=Wu(u,g,pl(u,E,S),"line").top;return ma(u,g,E,D)}function cc(u,g,E,S){return u.bottom<=E?!1:u.top>E?!0:(S?u.left:u.right)>g}function pf(u,g,E,S,D){D-=Ki(g);var H=rl(u,g),ce=Kc(g),_e=0,ke=g.text.length,Ue=!0,mt=ve(g,u.doc.direction);if(mt){var Bt=(u.options.lineWrapping?lA:IA)(u,g,E,H,mt,S,D);Ue=Bt.level!=1,_e=Ue?Bt.from:Bt.to-1,ke=Ue?Bt.to:Bt.from-1}var tn=null,qt=null,xn=Yt(function(Jr){var zr=pl(u,H,Jr);return zr.top+=ce,zr.bottom+=ce,cc(zr,S,D,!1)?(zr.top<=D&&zr.left<=S&&(tn=Jr,qt=zr),!0):!1},_e,ke),Fn,Kn,Hn=!1;if(qt){var br=S-qt.left<qt.right-S,fr=br==Ue;xn=tn+(fr?0:1),Kn=fr?"after":"before",Fn=br?qt.left:qt.right}else{!Ue&&(xn==ke||xn==_e)&&xn++,Kn=xn==0?"after":xn==g.text.length?"before":pl(u,H,xn-(Ue?1:0)).bottom+ce<=D==Ue?"after":"before";var Pr=dn(u,fn(E,xn,Kn),"line",g,H);Fn=Pr.left,Hn=D<Pr.top?-1:D>=Pr.bottom?1:0}return xn=bt(g.text,xn,1),Ri(E,xn,Kn,Hn,S-Fn)}function IA(u,g,E,S,D,H,ce){var _e=Yt(function(Bt){var tn=D[Bt],qt=tn.level!=1;return cc(dn(u,fn(E,qt?tn.to:tn.from,qt?"before":"after"),"line",g,S),H,ce,!0)},0,D.length-1),ke=D[_e];if(_e>0){var Ue=ke.level!=1,mt=dn(u,fn(E,Ue?ke.from:ke.to,Ue?"after":"before"),"line",g,S);cc(mt,H,ce,!0)&&mt.top>ce&&(ke=D[_e-1])}return ke}function lA(u,g,E,S,D,H,ce){var _e=ma(u,g,S,ce),ke=_e.begin,Ue=_e.end;/\s/.test(g.text.charAt(Ue-1))&&Ue--;for(var mt=null,Bt=null,tn=0;tn<D.length;tn++){var qt=D[tn];if(!(qt.from>=Ue||qt.to<=ke)){var xn=qt.level!=1,Fn=pl(u,S,xn?Math.min(Ue,qt.to)-1:Math.max(ke,qt.from)).right,Kn=Fn<H?H-Fn+1e9:Fn-H;(!mt||Bt>Kn)&&(mt=qt,Bt=Kn)}}return mt||(mt=D[D.length-1]),mt.from<ke&&(mt={from:ke,to:mt.to,level:mt.level}),mt.to>Ue&&(mt={from:mt.from,to:Ue,level:mt.level}),mt}var yu;function ja(u){if(u.cachedTextHeight!=null)return u.cachedTextHeight;if(yu==null){yu=Me("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)yu.appendChild(document.createTextNode("x")),yu.appendChild(Me("br"));yu.appendChild(document.createTextNode("x"))}je(u.measure,yu);var E=yu.offsetHeight/50;return E>3&&(u.cachedTextHeight=E),xe(u.measure),E||1}function ga(u){if(u.cachedCharWidth!=null)return u.cachedCharWidth;var g=Me("span","xxxxxxxxxx"),E=Me("pre",[g],"CodeMirror-line-like");je(u.measure,E);var S=g.getBoundingClientRect(),D=(S.right-S.left)/10;return D>2&&(u.cachedCharWidth=D),D||10}function ih(u){for(var g=u.display,E={},S={},D=g.gutters.clientLeft,H=g.gutters.firstChild,ce=0;H;H=H.nextSibling,++ce){var _e=u.display.gutterSpecs[ce].className;E[_e]=H.offsetLeft+H.clientLeft+D,S[_e]=H.clientWidth}return{fixedPos:Po(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:E,gutterWidth:S,wrapperWidth:g.wrapper.clientWidth}}function Po(u){return u.scroller.getBoundingClientRect().left-u.sizer.getBoundingClientRect().left}function Fc(u){var g=ja(u.display),E=u.options.lineWrapping,S=E&&Math.max(5,u.display.scroller.clientWidth/ga(u.display)-3);return function(D){if(fi(u.doc,D))return 0;var H=0;if(D.widgets)for(var ce=0;ce<D.widgets.length;ce++)D.widgets[ce].height&&(H+=D.widgets[ce].height);return E?H+(Math.ceil(D.text.length/S)||1)*g:H+g}}function vu(u){var g=u.doc,E=Fc(u);g.iter(function(S){var D=E(S);D!=S.height&&Jo(S,D)})}function TA(u,g,E,S){var D=u.display;if(!E&&Tr(g).getAttribute("cm-not-content")=="true")return null;var H,ce,_e=D.lineSpace.getBoundingClientRect();try{H=g.clientX-_e.left,ce=g.clientY-_e.top}catch{return null}var ke=Go(u,H,ce),Ue;if(S&&ke.xRel>0&&(Ue=Er(u.doc,ke.line).text).length==ke.ch){var mt=Pe(Ue,Ue.length,u.options.tabSize)-Ue.length;ke=fn(ke.line,Math.max(0,Math.round((H-_d(u.display).left)/ga(u.display))-mt))}return ke}function tu(u,g){if(g>=u.display.viewTo||(g-=u.display.viewFrom,g<0))return null;for(var E=u.display.view,S=0;S<E.length;S++)if(g-=E[S].size,g<0)return S}function Wa(u,g,E,S){g==null&&(g=u.doc.first),E==null&&(E=u.doc.first+u.doc.size),S||(S=0);var D=u.display;if(S&&E<D.viewTo&&(D.updateLineNumbers==null||D.updateLineNumbers>g)&&(D.updateLineNumbers=g),u.curOp.viewChanged=!0,g>=D.viewTo)uo&&xo(u.doc,g)<D.viewTo&&AA(u);else if(E<=D.viewFrom)uo&&si(u.doc,E+S)>D.viewFrom?AA(u):(D.viewFrom+=S,D.viewTo+=S);else if(g<=D.viewFrom&&E>=D.viewTo)AA(u);else if(g<=D.viewFrom){var H=wl(u,E,E+S,1);H?(D.view=D.view.slice(H.index),D.viewFrom=H.lineN,D.viewTo+=S):AA(u)}else if(E>=D.viewTo){var ce=wl(u,g,g,-1);ce?(D.view=D.view.slice(0,ce.index),D.viewTo=ce.lineN):AA(u)}else{var _e=wl(u,g,g,-1),ke=wl(u,E,E+S,1);_e&&ke?(D.view=D.view.slice(0,_e.index).concat(qh(u,_e.lineN,ke.lineN)).concat(D.view.slice(ke.index)),D.viewTo+=S):AA(u)}var Ue=D.externalMeasured;Ue&&(E<Ue.lineN?Ue.lineN+=S:g<Ue.lineN+Ue.size&&(D.externalMeasured=null))}function Cu(u,g,E){u.curOp.viewChanged=!0;var S=u.display,D=u.display.externalMeasured;if(D&&g>=D.lineN&&g<D.lineN+D.size&&(S.externalMeasured=null),!(g<S.viewFrom||g>=S.viewTo)){var H=S.view[tu(u,g)];if(H.node!=null){var ce=H.changes||(H.changes=[]);Ye(ce,E)==-1&&ce.push(E)}}}function AA(u){u.display.viewFrom=u.display.viewTo=u.doc.first,u.display.view=[],u.display.viewOffset=0}function wl(u,g,E,S){var D=tu(u,g),H,ce=u.display.view;if(!uo||E==u.doc.first+u.doc.size)return{index:D,lineN:E};for(var _e=u.display.viewFrom,ke=0;ke<D;ke++)_e+=ce[ke].size;if(_e!=g){if(S>0){if(D==ce.length-1)return null;H=_e+ce[D].size-g,D++}else H=_e-g;g+=H,E+=H}for(;xo(u.doc,E)!=E;){if(D==(S<0?0:ce.length-1))return null;E+=S*ce[D-(S<0?1:0)].size,D+=S}return{index:D,lineN:E}}function hc(u,g,E){var S=u.display,D=S.view;D.length==0||g>=S.viewTo||E<=S.viewFrom?(S.view=qh(u,g,E),S.viewFrom=g):(S.viewFrom>g?S.view=qh(u,g,S.viewFrom).concat(S.view):S.viewFrom<g&&(S.view=S.view.slice(tu(u,g))),S.viewFrom=g,S.viewTo<E?S.view=S.view.concat(qh(u,S.viewTo,E)):S.viewTo>E&&(S.view=S.view.slice(0,tu(u,E)))),S.viewTo=E}function wd(u){for(var g=u.display.view,E=0,S=0;S<g.length;S++){var D=g[S];!D.hidden&&(!D.node||D.changes)&&++E}return E}function ml(u){u.display.input.showSelection(u.display.input.prepareSelection())}function Zi(u,g){g===void 0&&(g=!0);var E=u.doc,S={},D=S.cursors=document.createDocumentFragment(),H=S.selection=document.createDocumentFragment(),ce=u.options.$customCursor;ce&&(g=!0);for(var _e=0;_e<E.sel.ranges.length;_e++)if(!(!g&&_e==E.sel.primIndex)){var ke=E.sel.ranges[_e];if(!(ke.from().line>=u.display.viewTo||ke.to().line<u.display.viewFrom)){var Ue=ke.empty();if(ce){var mt=ce(u,ke);mt&&Lc(u,mt,D)}else(Ue||u.options.showCursorWhenSelecting)&&Lc(u,ke.head,D);Ue||mf(u,ke,H)}}return S}function Lc(u,g,E){var S=dn(u,g,"div",null,null,!u.options.singleCursorHeightPerLine),D=E.appendChild(Me("div"," ","CodeMirror-cursor"));if(D.style.left=S.left+"px",D.style.top=S.top+"px",D.style.height=Math.max(0,S.bottom-S.top)*u.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(u.getWrapperElement().className)){var H=In(u,g,"div",null,null),ce=H.right-H.left;D.style.width=(ce>0?ce:u.defaultCharWidth())+"px"}if(S.other){var _e=E.appendChild(Me("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));_e.style.display="",_e.style.left=S.other.left+"px",_e.style.top=S.other.top+"px",_e.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function dc(u,g){return u.top-g.top||u.left-g.left}function mf(u,g,E){var S=u.display,D=u.doc,H=document.createDocumentFragment(),ce=_d(u.display),_e=ce.left,ke=Math.max(S.sizerWidth,Rc(u)-S.sizer.offsetLeft)-ce.right,Ue=D.direction=="ltr";function mt(fr,Pr,Jr,zr){Pr<0&&(Pr=0),Pr=Math.round(Pr),zr=Math.round(zr),H.appendChild(Me("div",null,"CodeMirror-selected","position: absolute; left: "+fr+`px;
                             top: `+Pr+"px; width: "+(Jr??ke-fr)+`px;
                             height: `+(zr-Pr)+"px"))}function Bt(fr,Pr,Jr){var zr=Er(D,fr),eo=zr.text.length,fo,_a;function vs(na,NA){return In(u,fn(fr,na),"div",zr,NA)}function Ys(na,NA,$a){var Ds=es(u,zr,null,na),cs=NA=="ltr"==($a=="after")?"left":"right",xi=$a=="after"?Ds.begin:Ds.end-(/\s/.test(zr.text.charAt(Ds.end-1))?2:1);return vs(xi,cs)[cs]}var qs=ve(zr,D.direction);return Jt(qs,Pr||0,Jr??eo,function(na,NA,$a,Ds){var cs=$a=="ltr",xi=vs(na,cs?"left":"right"),Qo=vs(NA-1,cs?"right":"left"),$s=Pr==null&&na==0,la=Jr==null&&NA==eo,xs=Ds==0,lu=!qs||Ds==qs.length-1;if(Qo.top-xi.top<=3){var Fo=(Ue?$s:la)&&xs,Fd=(Ue?la:$s)&&lu,GA=Fo?_e:(cs?xi:Qo).left,Yc=Fd?ke:(cs?Qo:xi).right;mt(GA,xi.top,Yc-GA,xi.bottom)}else{var xc,al,ll,Mf;cs?(xc=Ue&&$s&&xs?_e:xi.left,al=Ue?ke:Ys(na,$a,"before"),ll=Ue?_e:Ys(NA,$a,"after"),Mf=Ue&&la&&lu?ke:Qo.right):(xc=Ue?Ys(na,$a,"before"):_e,al=!Ue&&$s&&xs?ke:xi.right,ll=!Ue&&la&&lu?_e:Qo.left,Mf=Ue?Ys(NA,$a,"after"):ke),mt(xc,xi.top,al-xc,xi.bottom),xi.bottom<Qo.top&&mt(_e,xi.bottom,null,Qo.top),mt(ll,Qo.top,Mf-ll,Qo.bottom)}(!fo||dc(xi,fo)<0)&&(fo=xi),dc(Qo,fo)<0&&(fo=Qo),(!_a||dc(xi,_a)<0)&&(_a=xi),dc(Qo,_a)<0&&(_a=Qo)}),{start:fo,end:_a}}var tn=g.from(),qt=g.to();if(tn.line==qt.line)Bt(tn.line,tn.ch,qt.ch);else{var xn=Er(D,tn.line),Fn=Er(D,qt.line),Kn=Rr(xn)==Rr(Fn),Hn=Bt(tn.line,tn.ch,Kn?xn.text.length+1:null).end,br=Bt(qt.line,Kn?0:null,qt.ch).start;Kn&&(Hn.top<br.top-2?(mt(Hn.right,Hn.top,null,Hn.bottom),mt(_e,br.top,br.left,br.bottom)):mt(Hn.right,Hn.top,br.left-Hn.right,Hn.bottom)),Hn.bottom<br.top&&mt(_e,Hn.bottom,null,br.top)}E.appendChild(H)}function uA(u){if(u.state.focused){var g=u.display;clearInterval(g.blinker);var E=!0;g.cursorDiv.style.visibility="",u.options.cursorBlinkRate>0?g.blinker=setInterval(function(){u.hasFocus()||us(u),g.cursorDiv.style.visibility=(E=!E)?"":"hidden"},u.options.cursorBlinkRate):u.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function oh(u){u.hasFocus()||(u.display.input.focus(),u.state.focused||Sd(u))}function wh(u){u.state.delayingBlurEvent=!0,setTimeout(function(){u.state.delayingBlurEvent&&(u.state.delayingBlurEvent=!1,u.state.focused&&us(u))},100)}function Sd(u,g){u.state.delayingBlurEvent&&!u.state.draggingText&&(u.state.delayingBlurEvent=!1),u.options.readOnly!="nocursor"&&(u.state.focused||(lt(u,"focus",u,g),u.state.focused=!0,Ge(u.display.wrapper,"CodeMirror-focused"),!u.curOp&&u.display.selForContextMenu!=u.doc.sel&&(u.display.input.reset(),x&&setTimeout(function(){return u.display.input.reset(!0)},20)),u.display.input.receivedFocus()),uA(u))}function us(u,g){u.state.delayingBlurEvent||(u.state.focused&&(lt(u,"blur",u,g),u.state.focused=!1,Se(u.display.wrapper,"CodeMirror-focused")),clearInterval(u.display.blinker),setTimeout(function(){u.state.focused||(u.display.shift=!1)},150))}function Uc(u){for(var g=u.display,E=g.lineDiv.offsetTop,S=Math.max(0,g.scroller.getBoundingClientRect().top),D=g.lineDiv.getBoundingClientRect().top,H=0,ce=0;ce<g.view.length;ce++){var _e=g.view[ce],ke=u.options.lineWrapping,Ue=void 0,mt=0;if(!_e.hidden){if(D+=_e.line.height,f&&C<8){var Bt=_e.node.offsetTop+_e.node.offsetHeight;Ue=Bt-E,E=Bt}else{var tn=_e.node.getBoundingClientRect();Ue=tn.bottom-tn.top,!ke&&_e.text.firstChild&&(mt=_e.text.firstChild.getBoundingClientRect().right-tn.left-1)}var qt=_e.line.height-Ue;if((qt>.005||qt<-.005)&&(D<S&&(H-=qt),Jo(_e.line,Ue),_u(_e.line),_e.rest))for(var xn=0;xn<_e.rest.length;xn++)_u(_e.rest[xn]);if(mt>u.display.sizerWidth){var Fn=Math.ceil(mt/ga(u.display));Fn>u.display.maxLineLength&&(u.display.maxLineLength=Fn,u.display.maxLine=_e.line,u.display.maxLineChanged=!0)}}}Math.abs(H)>2&&(g.scroller.scrollTop+=H)}function _u(u){if(u.widgets)for(var g=0;g<u.widgets.length;++g){var E=u.widgets[g],S=E.node.parentNode;S&&(E.height=S.offsetHeight)}}function kA(u,g,E){var S=E&&E.top!=null?Math.max(0,E.top):u.scroller.scrollTop;S=Math.floor(S-bh(u));var D=E&&E.bottom!=null?E.bottom:S+u.wrapper.clientHeight,H=xt(g,S),ce=xt(g,D);if(E&&E.ensure){var _e=E.ensure.from.line,ke=E.ensure.to.line;_e<H?(H=_e,ce=xt(g,Ki(Er(g,_e))+u.wrapper.clientHeight)):Math.min(ke,g.lastLine())>=ce&&(H=xt(g,Ki(Er(g,ke))-u.wrapper.clientHeight),ce=ke)}return{from:H,to:Math.max(ce,H+1)}}function Xh(u,g){if(!ct(u,"scrollCursorIntoView")){var E=u.display,S=E.sizer.getBoundingClientRect(),D=null,H=E.wrapper.ownerDocument;if(g.top+S.top<0?D=!0:g.bottom+S.top>(H.defaultView.innerHeight||H.documentElement.clientHeight)&&(D=!1),D!=null&&!X){var ce=Me("div","​",null,`position: absolute;
                         top: `+(g.top-E.viewOffset-bh(u.display))+`px;
                         height: `+(g.bottom-g.top+fl(u)+E.barHeight)+`px;
                         left: `+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;");u.display.lineSpace.appendChild(ce),ce.scrollIntoView(D),u.display.lineSpace.removeChild(ce)}}}function Jh(u,g,E,S){S==null&&(S=0);var D;!u.options.lineWrapping&&g==E&&(E=g.sticky=="before"?fn(g.line,g.ch+1,"before"):g,g=g.ch?fn(g.line,g.sticky=="before"?g.ch-1:g.ch,"after"):g);for(var H=0;H<5;H++){var ce=!1,_e=dn(u,g),ke=!E||E==g?_e:dn(u,E);D={left:Math.min(_e.left,ke.left),top:Math.min(_e.top,ke.top)-S,right:Math.max(_e.left,ke.left),bottom:Math.max(_e.bottom,ke.bottom)+S};var Ue=fc(u,D),mt=u.doc.scrollTop,Bt=u.doc.scrollLeft;if(Ue.scrollTop!=null&&(Qu(u,Ue.scrollTop),Math.abs(u.doc.scrollTop-mt)>1&&(ce=!0)),Ue.scrollLeft!=null&&(PA(u,Ue.scrollLeft),Math.abs(u.doc.scrollLeft-Bt)>1&&(ce=!0)),!ce)break}return D}function sh(u,g){var E=fc(u,g);E.scrollTop!=null&&Qu(u,E.scrollTop),E.scrollLeft!=null&&PA(u,E.scrollLeft)}function fc(u,g){var E=u.display,S=ja(u.display);g.top<0&&(g.top=0);var D=u.curOp&&u.curOp.scrollTop!=null?u.curOp.scrollTop:E.scroller.scrollTop,H=Dc(u),ce={};g.bottom-g.top>H&&(g.bottom=g.top+H);var _e=u.doc.height+Cd(E),ke=g.top<S,Ue=g.bottom>_e-S;if(g.top<D)ce.scrollTop=ke?0:g.top;else if(g.bottom>D+H){var mt=Math.min(g.top,(Ue?_e:g.bottom)-H);mt!=D&&(ce.scrollTop=mt)}var Bt=u.options.fixedGutter?0:E.gutters.offsetWidth,tn=u.curOp&&u.curOp.scrollLeft!=null?u.curOp.scrollLeft:E.scroller.scrollLeft-Bt,qt=Rc(u)-E.gutters.offsetWidth,xn=g.right-g.left>qt;return xn&&(g.right=g.left+qt),g.left<10?ce.scrollLeft=0:g.left<tn?ce.scrollLeft=Math.max(0,g.left+Bt-(xn?0:10)):g.right>qt+tn-3&&(ce.scrollLeft=g.right+(xn?0:10)-qt),ce}function bu(u,g){g!=null&&(ah(u),u.curOp.scrollTop=(u.curOp.scrollTop==null?u.doc.scrollTop:u.curOp.scrollTop)+g)}function ms(u){ah(u);var g=u.getCursor();u.curOp.scrollToPos={from:g,to:g,margin:u.options.cursorScrollMargin}}function ya(u,g,E){(g!=null||E!=null)&&ah(u),g!=null&&(u.curOp.scrollLeft=g),E!=null&&(u.curOp.scrollTop=E)}function Ed(u,g){ah(u),u.curOp.scrollToPos=g}function ah(u){var g=u.curOp.scrollToPos;if(g){u.curOp.scrollToPos=null;var E=Lr(u,g.from),S=Lr(u,g.to);Sh(u,E,S,g.margin)}}function Sh(u,g,E,S){var D=fc(u,{left:Math.min(g.left,E.left),top:Math.min(g.top,E.top)-S,right:Math.max(g.right,E.right),bottom:Math.max(g.bottom,E.bottom)+S});ya(u,D.scrollLeft,D.scrollTop)}function Qu(u,g){Math.abs(u.doc.scrollTop-g)<2||(i||yl(u,{top:g}),lh(u,g,!0),i&&yl(u),js(u,100))}function lh(u,g,E){g=Math.max(0,Math.min(u.display.scroller.scrollHeight-u.display.scroller.clientHeight,g)),!(u.display.scroller.scrollTop==g&&!E)&&(u.doc.scrollTop=g,u.display.scrollbars.setScrollTop(g),u.display.scroller.scrollTop!=g&&(u.display.scroller.scrollTop=g))}function PA(u,g,E,S){g=Math.max(0,Math.min(g,u.display.scroller.scrollWidth-u.display.scroller.clientWidth)),!((E?g==u.doc.scrollLeft:Math.abs(u.doc.scrollLeft-g)<2)&&!S)&&(u.doc.scrollLeft=g,ru(u),u.display.scroller.scrollLeft!=g&&(u.display.scroller.scrollLeft=g),u.display.scrollbars.setScrollLeft(g))}function pc(u){var g=u.display,E=g.gutters.offsetWidth,S=Math.round(u.doc.height+Cd(u.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:u.options.fixedGutter?E:0,docHeight:S,scrollHeight:S+fl(u)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:E}}var Sl=function(u,g,E){this.cm=E;var S=this.vert=Me("div",[Me("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),D=this.horiz=Me("div",[Me("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=D.tabIndex=-1,u(S),u(D),Ne(S,"scroll",function(){S.clientHeight&&g(S.scrollTop,"vertical")}),Ne(D,"scroll",function(){D.clientWidth&&g(D.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Sl.prototype.update=function(u){var g=u.scrollWidth>u.clientWidth+1,E=u.scrollHeight>u.clientHeight+1,S=u.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=g?S+"px":"0";var D=u.viewHeight-(g?S:0);this.vert.firstChild.style.height=Math.max(0,u.scrollHeight-u.clientHeight+D)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=E?S+"px":"0",this.horiz.style.left=u.barLeft+"px";var H=u.viewWidth-u.barLeft-(E?S:0);this.horiz.firstChild.style.width=Math.max(0,u.scrollWidth-u.clientWidth+H)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&u.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?S:0,bottom:g?S:0}},Sl.prototype.setScrollLeft=function(u){this.horiz.scrollLeft!=u&&(this.horiz.scrollLeft=u),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Sl.prototype.setScrollTop=function(u){this.vert.scrollTop!=u&&(this.vert.scrollTop=u),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Sl.prototype.zeroWidthHack=function(){var u=V&&!W?"12px":"18px";this.horiz.style.height=this.vert.style.width=u,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Re,this.disableVert=new Re},Sl.prototype.enableZeroWidthBar=function(u,g,E){u.style.visibility="";function S(){var D=u.getBoundingClientRect(),H=E=="vert"?document.elementFromPoint(D.right-1,(D.top+D.bottom)/2):document.elementFromPoint((D.right+D.left)/2,D.bottom-1);H!=u?u.style.visibility="hidden":g.set(1e3,S)}g.set(1e3,S)},Sl.prototype.clear=function(){var u=this.horiz.parentNode;u.removeChild(this.horiz),u.removeChild(this.vert)};var xu=function(){};xu.prototype.update=function(){return{bottom:0,right:0}},xu.prototype.setScrollLeft=function(){},xu.prototype.setScrollTop=function(){},xu.prototype.clear=function(){};function Mu(u,g){g||(g=pc(u));var E=u.display.barWidth,S=u.display.barHeight;zc(u,g);for(var D=0;D<4&&E!=u.display.barWidth||S!=u.display.barHeight;D++)E!=u.display.barWidth&&u.options.lineWrapping&&Uc(u),zc(u,pc(u)),E=u.display.barWidth,S=u.display.barHeight}function zc(u,g){var E=u.display,S=E.scrollbars.update(g);E.sizer.style.paddingRight=(E.barWidth=S.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=S.bottom)+"px",E.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=S.bottom+"px",E.scrollbarFiller.style.width=S.right+"px"):E.scrollbarFiller.style.display="",S.bottom&&u.options.coverGutterNextToScrollbar&&u.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=S.bottom+"px",E.gutterFiller.style.width=g.gutterWidth+"px"):E.gutterFiller.style.display=""}var bs={native:Sl,null:xu};function Yu(u){u.display.scrollbars&&(u.display.scrollbars.clear(),u.display.scrollbars.addClass&&Se(u.display.wrapper,u.display.scrollbars.addClass)),u.display.scrollbars=new bs[u.options.scrollbarStyle](function(g){u.display.wrapper.insertBefore(g,u.display.scrollbarFiller),Ne(g,"mousedown",function(){u.state.focused&&setTimeout(function(){return u.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,E){E=="horizontal"?PA(u,g):Qu(u,g)},u),u.display.scrollbars.addClass&&Ge(u.display.wrapper,u.display.scrollbars.addClass)}var Qa=0;function mc(u){u.curOp={cm:u,viewChanged:!1,startHeight:u.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qa,markArrays:null},gd(u.curOp)}function Ql(u){var g=u.curOp;g&&yd(g,function(E){for(var S=0;S<E.ops.length;S++)E.ops[S].cm.curOp=null;wu(E)})}function wu(u){for(var g=u.ops,E=0;E<g.length;E++)El(g[E]);for(var S=0;S<g.length;S++)cA(g[S]);for(var D=0;D<g.length;D++)Ah(g[D]);for(var H=0;H<g.length;H++)ot(g[H]);for(var ce=0;ce<g.length;ce++)Eh(g[ce])}function El(u){var g=u.cm,E=g.display;Ps(g),u.updateMaxLine&&Ns(g),u.mustUpdate=u.viewChanged||u.forceUpdate||u.scrollTop!=null||u.scrollToPos&&(u.scrollToPos.from.line<E.viewFrom||u.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&g.options.lineWrapping,u.update=u.mustUpdate&&new il(g,u.mustUpdate&&{top:u.scrollTop,ensure:u.scrollToPos},u.forceUpdate)}function cA(u){u.updatedDisplay=u.mustUpdate&&Ya(u.cm,u.update)}function Ah(u){var g=u.cm,E=g.display;u.updatedDisplay&&Uc(g),u.barMeasure=pc(g),E.maxLineChanged&&!g.options.lineWrapping&&(u.adjustWidthTo=bd(g,E.maxLine,E.maxLine.text.length).left+3,g.display.sizerWidth=u.adjustWidthTo,u.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+u.adjustWidthTo+fl(g)+g.display.barWidth),u.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+u.adjustWidthTo-Rc(g))),(u.updatedDisplay||u.selectionChanged)&&(u.preparedSelection=E.input.prepareSelection())}function ot(u){var g=u.cm;u.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=u.adjustWidthTo+"px",u.maxScrollLeft<g.doc.scrollLeft&&PA(g,Math.min(g.display.scroller.scrollLeft,u.maxScrollLeft),!0),g.display.maxLineChanged=!1);var E=u.focus&&u.focus==nt(Dt(g));u.preparedSelection&&g.display.input.showSelection(u.preparedSelection,E),(u.updatedDisplay||u.startHeight!=g.doc.height)&&Mu(g,u.barMeasure),u.updatedDisplay&&Oa(g,u.barMeasure),u.selectionChanged&&uA(g),g.state.focused&&u.updateInput&&g.display.input.reset(u.typing),E&&oh(u.cm)}function Eh(u){var g=u.cm,E=g.display,S=g.doc;if(u.updatedDisplay&&gl(g,u.update),E.wheelStartX!=null&&(u.scrollTop!=null||u.scrollLeft!=null||u.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),u.scrollTop!=null&&lh(g,u.scrollTop,u.forceScroll),u.scrollLeft!=null&&PA(g,u.scrollLeft,!0,!0),u.scrollToPos){var D=Jh(g,vi(S,u.scrollToPos.from),vi(S,u.scrollToPos.to),u.scrollToPos.margin);Xh(g,D)}var H=u.maybeHiddenMarkers,ce=u.maybeUnhiddenMarkers;if(H)for(var _e=0;_e<H.length;++_e)H[_e].lines.length||lt(H[_e],"hide");if(ce)for(var ke=0;ke<ce.length;++ke)ce[ke].lines.length&&lt(ce[ke],"unhide");E.wrapper.offsetHeight&&(S.scrollTop=g.display.scroller.scrollTop),u.changeObjs&&lt(g,"changes",g,u.changeObjs),u.update&&u.update.finish()}function Xs(u,g){if(u.curOp)return g();mc(u);try{return g()}finally{Ql(u)}}function Ro(u,g){return function(){if(u.curOp)return g.apply(u,arguments);mc(u);try{return g.apply(u,arguments)}finally{Ql(u)}}}function ai(u){return function(){if(this.curOp)return u.apply(this,arguments);mc(this);try{return u.apply(this,arguments)}finally{Ql(this)}}}function Bs(u){return function(){var g=this.cm;if(!g||g.curOp)return u.apply(this,arguments);mc(g);try{return u.apply(this,arguments)}finally{Ql(g)}}}function js(u,g){u.doc.highlightFrontier<u.display.viewTo&&u.state.highlight.set(g,St(qu,u))}function qu(u){var g=u.doc;if(!(g.highlightFrontier>=u.display.viewTo)){var E=+new Date+u.options.workTime,S=bi(u,g.highlightFrontier),D=[];g.iter(S.line,Math.min(g.first+g.size,u.display.viewTo+500),function(H){if(S.line>=u.display.viewFrom){var ce=H.styles,_e=H.text.length>u.options.maxHighlightLength?ci(g.mode,S.state):null,ke=JA(u,H,S,!0);_e&&(S.state=_e),H.styles=ke.styles;var Ue=H.styleClasses,mt=ke.classes;mt?H.styleClasses=mt:Ue&&(H.styleClasses=null);for(var Bt=!ce||ce.length!=H.styles.length||Ue!=mt&&(!Ue||!mt||Ue.bgClass!=mt.bgClass||Ue.textClass!=mt.textClass),tn=0;!Bt&&tn<ce.length;++tn)Bt=ce[tn]!=H.styles[tn];Bt&&D.push(S.line),H.stateAfter=S.save(),S.nextLine()}else H.text.length<=u.options.maxHighlightLength&&Ao(u,H.text,S),H.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>E)return js(u,u.options.workDelay),!0}),g.highlightFrontier=S.line,g.modeFrontier=Math.max(g.modeFrontier,S.line),D.length&&Xs(u,function(){for(var H=0;H<D.length;H++)Cu(u,D[H],"text")})}}var il=function(u,g,E){var S=u.display;this.viewport=g,this.visible=kA(S,u.doc,g),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=Rc(u),this.force=E,this.dims=ih(u),this.events=[]};il.prototype.signal=function(u,g){jt(u,g)&&this.events.push(arguments)},il.prototype.finish=function(){for(var u=0;u<this.events.length;u++)lt.apply(null,this.events[u])};function Ps(u){var g=u.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=fl(u)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=fl(u)+"px",g.scrollbarsClipped=!0)}function Os(u){if(u.hasFocus())return null;var g=nt(Dt(u));if(!g||!it(u.display.lineDiv,g))return null;var E={activeElt:g};if(window.getSelection){var S=Rt(u).getSelection();S.anchorNode&&S.extend&&it(u.display.lineDiv,S.anchorNode)&&(E.anchorNode=S.anchorNode,E.anchorOffset=S.anchorOffset,E.focusNode=S.focusNode,E.focusOffset=S.focusOffset)}return E}function nu(u){if(!(!u||!u.activeElt||u.activeElt==nt(ut(u.activeElt)))&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&it(document.body,u.anchorNode)&&it(document.body,u.focusNode))){var g=u.activeElt.ownerDocument,E=g.defaultView.getSelection(),S=g.createRange();S.setEnd(u.anchorNode,u.anchorOffset),S.collapse(!1),E.removeAllRanges(),E.addRange(S),E.extend(u.focusNode,u.focusOffset)}}function Ya(u,g){var E=u.display,S=u.doc;if(g.editorIsHidden)return AA(u),!1;if(!g.force&&g.visible.from>=E.viewFrom&&g.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&wd(u)==0)return!1;uh(u)&&(AA(u),g.dims=ih(u));var D=S.first+S.size,H=Math.max(g.visible.from-u.options.viewportMargin,S.first),ce=Math.min(D,g.visible.to+u.options.viewportMargin);E.viewFrom<H&&H-E.viewFrom<20&&(H=Math.max(S.first,E.viewFrom)),E.viewTo>ce&&E.viewTo-ce<20&&(ce=Math.min(D,E.viewTo)),uo&&(H=xo(u.doc,H),ce=si(u.doc,ce));var _e=H!=E.viewFrom||ce!=E.viewTo||E.lastWrapHeight!=g.wrapperHeight||E.lastWrapWidth!=g.wrapperWidth;hc(u,H,ce),E.viewOffset=Ki(Er(u.doc,E.viewFrom)),u.display.mover.style.top=E.viewOffset+"px";var ke=wd(u);if(!_e&&ke==0&&!g.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var Ue=Os(u);return ke>4&&(E.lineDiv.style.display="none"),$u(u,E.updateLineNumbers,g.dims),ke>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,nu(Ue),xe(E.cursorDiv),xe(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,_e&&(E.lastWrapHeight=g.wrapperHeight,E.lastWrapWidth=g.wrapperWidth,js(u,400)),E.updateLineNumbers=null,!0}function gl(u,g){for(var E=g.viewport,S=!0;;S=!1){if(!S||!u.options.lineWrapping||g.oldDisplayWidth==Rc(u)){if(E&&E.top!=null&&(E={top:Math.min(u.doc.height+Cd(u.display)-Dc(u),E.top)}),g.visible=kA(u.display,u.doc,E),g.visible.from>=u.display.viewFrom&&g.visible.to<=u.display.viewTo)break}else S&&(g.visible=kA(u.display,u.doc,E));if(!Ya(u,g))break;Uc(u);var D=pc(u);ml(u),Mu(u,D),Oa(u,D),g.force=!1}g.signal(u,"update",u),(u.display.viewFrom!=u.display.reportedViewFrom||u.display.viewTo!=u.display.reportedViewTo)&&(g.signal(u,"viewportChange",u,u.display.viewFrom,u.display.viewTo),u.display.reportedViewFrom=u.display.viewFrom,u.display.reportedViewTo=u.display.viewTo)}function yl(u,g){var E=new il(u,g);if(Ya(u,E)){Uc(u),gl(u,E);var S=pc(u);ml(u),Mu(u,S),Oa(u,S),E.finish()}}function $u(u,g,E){var S=u.display,D=u.options.lineNumbers,H=S.lineDiv,ce=H.firstChild;function _e(xn){var Fn=xn.nextSibling;return x&&V&&u.display.currentWheelTarget==xn?xn.style.display="none":xn.parentNode.removeChild(xn),Fn}for(var ke=S.view,Ue=S.viewFrom,mt=0;mt<ke.length;mt++){var Bt=ke[mt];if(!Bt.hidden)if(!Bt.node||Bt.node.parentNode!=H){var tn=Dp(u,Bt,Ue,E);H.insertBefore(tn,ce)}else{for(;ce!=Bt.node;)ce=_e(ce);var qt=D&&g!=null&&g<=Ue&&Bt.lineNumber;Bt.changes&&(Ye(Bt.changes,"gutter")>-1&&(qt=!1),uf(u,Bt,Ue,E)),qt&&(xe(Bt.lineNumber),Bt.lineNumber.appendChild(document.createTextNode(jn(u.options,Ue)))),ce=Bt.node.nextSibling}Ue+=Bt.size}for(;ce;)ce=_e(ce)}function Bl(u){var g=u.gutters.offsetWidth;u.sizer.style.marginLeft=g+"px",Es(u,"gutterChanged",u)}function Oa(u,g){u.display.sizer.style.minHeight=g.docHeight+"px",u.display.heightForcer.style.top=g.docHeight+"px",u.display.gutters.style.height=g.docHeight+u.display.barHeight+fl(u)+"px"}function ru(u){var g=u.display,E=g.view;if(!(!g.alignWidgets&&(!g.gutters.firstChild||!u.options.fixedGutter))){for(var S=Po(g)-g.scroller.scrollLeft+u.doc.scrollLeft,D=g.gutters.offsetWidth,H=S+"px",ce=0;ce<E.length;ce++)if(!E[ce].hidden){u.options.fixedGutter&&(E[ce].gutter&&(E[ce].gutter.style.left=H),E[ce].gutterBackground&&(E[ce].gutterBackground.style.left=H));var _e=E[ce].alignable;if(_e)for(var ke=0;ke<_e.length;ke++)_e[ke].style.left=H}u.options.fixedGutter&&(g.gutters.style.left=S+D+"px")}}function uh(u){if(!u.options.lineNumbers)return!1;var g=u.doc,E=jn(u.options,g.first+g.size-1),S=u.display;if(E.length!=S.lineNumChars){var D=S.measure.appendChild(Me("div",[Me("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),H=D.firstChild.offsetWidth,ce=D.offsetWidth-H;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(H,S.lineGutter.offsetWidth-ce)+1,S.lineNumWidth=S.lineNumInnerWidth+ce,S.lineNumChars=S.lineNumInnerWidth?E.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",Bl(u.display),!0}return!1}function Js(u,g){for(var E=[],S=!1,D=0;D<u.length;D++){var H=u[D],ce=null;if(typeof H!="string"&&(ce=H.style,H=H.className),H=="CodeMirror-linenumbers")if(g)S=!0;else continue;E.push({className:H,style:ce})}return g&&!S&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function ch(u){var g=u.gutters,E=u.gutterSpecs;xe(g),u.lineGutter=null;for(var S=0;S<E.length;++S){var D=E[S],H=D.className,ce=D.style,_e=g.appendChild(Me("div",null,"CodeMirror-gutter "+H));ce&&(_e.style.cssText=ce),H=="CodeMirror-linenumbers"&&(u.lineGutter=_e,_e.style.width=(u.lineNumWidth||1)+"px")}g.style.display=E.length?"":"none",Bl(u)}function Yl(u){ch(u.display),Wa(u),ru(u)}function gf(u,g,E,S){var D=this;this.input=E,D.scrollbarFiller=Me("div",null,"CodeMirror-scrollbar-filler"),D.scrollbarFiller.setAttribute("cm-not-content","true"),D.gutterFiller=Me("div",null,"CodeMirror-gutter-filler"),D.gutterFiller.setAttribute("cm-not-content","true"),D.lineDiv=rt("div",null,"CodeMirror-code"),D.selectionDiv=Me("div",null,null,"position: relative; z-index: 1"),D.cursorDiv=Me("div",null,"CodeMirror-cursors"),D.measure=Me("div",null,"CodeMirror-measure"),D.lineMeasure=Me("div",null,"CodeMirror-measure"),D.lineSpace=rt("div",[D.measure,D.lineMeasure,D.selectionDiv,D.cursorDiv,D.lineDiv],null,"position: relative; outline: none");var H=rt("div",[D.lineSpace],"CodeMirror-lines");D.mover=Me("div",[H],null,"position: relative"),D.sizer=Me("div",[D.mover],"CodeMirror-sizer"),D.sizerWidth=null,D.heightForcer=Me("div",null,null,"position: absolute; height: "+vt+"px; width: 1px;"),D.gutters=Me("div",null,"CodeMirror-gutters"),D.lineGutter=null,D.scroller=Me("div",[D.sizer,D.heightForcer,D.gutters],"CodeMirror-scroll"),D.scroller.setAttribute("tabIndex","-1"),D.wrapper=Me("div",[D.scrollbarFiller,D.gutterFiller,D.scroller],"CodeMirror"),R&&P===105&&(D.wrapper.style.clipPath="inset(0px)"),D.wrapper.setAttribute("translate","no"),f&&C<8&&(D.gutters.style.zIndex=-1,D.scroller.style.paddingRight=0),!x&&!(i&&te)&&(D.scroller.draggable=!0),u&&(u.appendChild?u.appendChild(D.wrapper):u(D.wrapper)),D.viewFrom=D.viewTo=g.first,D.reportedViewFrom=D.reportedViewTo=g.first,D.view=[],D.renderedView=null,D.externalMeasured=null,D.viewOffset=0,D.lastWrapHeight=D.lastWrapWidth=0,D.updateLineNumbers=null,D.nativeBarWidth=D.barHeight=D.barWidth=0,D.scrollbarsClipped=!1,D.lineNumWidth=D.lineNumInnerWidth=D.lineNumChars=null,D.alignWidgets=!1,D.cachedCharWidth=D.cachedTextHeight=D.cachedPaddingH=null,D.maxLine=null,D.maxLineLength=0,D.maxLineChanged=!1,D.wheelDX=D.wheelDY=D.wheelStartX=D.wheelStartY=null,D.shift=!1,D.selForContextMenu=null,D.activeTouch=null,D.gutterSpecs=Js(S.gutters,S.lineNumbers),ch(D),E.init(D)}var hh=0,iu=null;f?iu=-.53:i?iu=15:R?iu=-.7:N&&(iu=-1/3);function gc(u){var g=u.wheelDeltaX,E=u.wheelDeltaY;return g==null&&u.detail&&u.axis==u.HORIZONTAL_AXIS&&(g=u.detail),E==null&&u.detail&&u.axis==u.VERTICAL_AXIS?E=u.detail:E==null&&(E=u.wheelDelta),{x:g,y:E}}function ou(u){var g=gc(u);return g.x*=iu,g.y*=iu,g}function ql(u,g){R&&P==102&&(u.display.chromeScrollHack==null?u.display.sizer.style.pointerEvents="none":clearTimeout(u.display.chromeScrollHack),u.display.chromeScrollHack=setTimeout(function(){u.display.chromeScrollHack=null,u.display.sizer.style.pointerEvents=""},100));var E=gc(g),S=E.x,D=E.y,H=iu;g.deltaMode===0&&(S=g.deltaX,D=g.deltaY,H=1);var ce=u.display,_e=ce.scroller,ke=_e.scrollWidth>_e.clientWidth,Ue=_e.scrollHeight>_e.clientHeight;if(S&&ke||D&&Ue){if(D&&V&&x){e:for(var mt=g.target,Bt=ce.view;mt!=_e;mt=mt.parentNode)for(var tn=0;tn<Bt.length;tn++)if(Bt[tn].node==mt){u.display.currentWheelTarget=mt;break e}}if(S&&!i&&!U&&H!=null){D&&Ue&&Qu(u,Math.max(0,_e.scrollTop+D*H)),PA(u,Math.max(0,_e.scrollLeft+S*H)),(!D||D&&Ue)&&nn(g),ce.wheelStartX=null;return}if(D&&H!=null){var qt=D*H,xn=u.doc.scrollTop,Fn=xn+ce.wrapper.clientHeight;qt<0?xn=Math.max(0,xn+qt-50):Fn=Math.min(u.doc.height,Fn+qt+50),yl(u,{top:xn,bottom:Fn})}hh<20&&g.deltaMode!==0&&(ce.wheelStartX==null?(ce.wheelStartX=_e.scrollLeft,ce.wheelStartY=_e.scrollTop,ce.wheelDX=S,ce.wheelDY=D,setTimeout(function(){if(ce.wheelStartX!=null){var Kn=_e.scrollLeft-ce.wheelStartX,Hn=_e.scrollTop-ce.wheelStartY,br=Hn&&ce.wheelDY&&Hn/ce.wheelDY||Kn&&ce.wheelDX&&Kn/ce.wheelDX;ce.wheelStartX=ce.wheelStartY=null,br&&(iu=(iu*hh+br)/(hh+1),++hh)}},200)):(ce.wheelDX+=S,ce.wheelDY+=D))}}var Xn=function(u,g){this.ranges=u,this.primIndex=g};Xn.prototype.primary=function(){return this.ranges[this.primIndex]},Xn.prototype.equals=function(u){if(u==this)return!0;if(u.primIndex!=this.primIndex||u.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var E=this.ranges[g],S=u.ranges[g];if(!Qi(E.anchor,S.anchor)||!Qi(E.head,S.head))return!1}return!0},Xn.prototype.deepCopy=function(){for(var u=[],g=0;g<this.ranges.length;g++)u[g]=new Mo(Io(this.ranges[g].anchor),Io(this.ranges[g].head));return new Xn(u,this.primIndex)},Xn.prototype.somethingSelected=function(){for(var u=0;u<this.ranges.length;u++)if(!this.ranges[u].empty())return!0;return!1},Xn.prototype.contains=function(u,g){g||(g=u);for(var E=0;E<this.ranges.length;E++){var S=this.ranges[E];if(gr(g,S.from())>=0&&gr(u,S.to())<=0)return E}return-1};var Mo=function(u,g){this.anchor=u,this.head=g};Mo.prototype.from=function(){return fa(this.anchor,this.head)},Mo.prototype.to=function(){return fs(this.anchor,this.head)},Mo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Ol(u,g,E){var S=u&&u.options.selectionsMayTouch,D=g[E];g.sort(function(tn,qt){return gr(tn.from(),qt.from())}),E=Ye(g,D);for(var H=1;H<g.length;H++){var ce=g[H],_e=g[H-1],ke=gr(_e.to(),ce.from());if(S&&!ce.empty()?ke>0:ke>=0){var Ue=fa(_e.from(),ce.from()),mt=fs(_e.to(),ce.to()),Bt=_e.empty()?ce.from()==ce.head:_e.from()==_e.head;H<=E&&--E,g.splice(--H,2,new Mo(Bt?mt:Ue,Bt?Ue:mt))}}return new Xn(g,E)}function qa(u,g){return new Xn([new Mo(u,g||u)],0)}function ea(u){return u.text?fn(u.from.line+u.text.length-1,Vn(u.text).length+(u.text.length==1?u.from.ch:0)):u.to}function Su(u,g){if(gr(u,g.from)<0)return u;if(gr(u,g.to)<=0)return ea(g);var E=u.line+g.text.length-(g.to.line-g.from.line)-1,S=u.ch;return u.line==g.to.line&&(S+=ea(g).ch-g.to.ch),fn(E,S)}function RA(u,g){for(var E=[],S=0;S<u.sel.ranges.length;S++){var D=u.sel.ranges[S];E.push(new Mo(Su(D.anchor,g),Su(D.head,g)))}return Ol(u.cm,E,u.sel.primIndex)}function Ti(u,g,E){return u.line==g.line?fn(E.line,u.ch-g.ch+E.ch):fn(E.line+(u.line-g.line),u.ch)}function yc(u,g,E){for(var S=[],D=fn(u.first,0),H=D,ce=0;ce<g.length;ce++){var _e=g[ce],ke=Ti(_e.from,D,H),Ue=Ti(ea(_e),D,H);if(D=_e.to,H=Ue,E=="around"){var mt=u.sel.ranges[ce],Bt=gr(mt.head,mt.anchor)<0;S[ce]=new Mo(Bt?Ue:ke,Bt?ke:Ue)}else S[ce]=new Mo(ke,ke)}return new Xn(S,u.sel.primIndex)}function yf(u){u.doc.mode=No(u.options,u.doc.modeOption),Vu(u)}function Vu(u){u.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),u.doc.modeFrontier=u.doc.highlightFrontier=u.doc.first,js(u,100),u.state.modeGen++,u.curOp&&Wa(u)}function Nc(u,g){return g.from.ch==0&&g.to.ch==0&&Vn(g.text)==""&&(!u.cm||u.cm.options.wholeLineUpdateBefore)}function ol(u,g,E,S){function D(br){return E?E[br]:null}function H(br,fr,Pr){eu(br,fr,Pr,S),Es(br,"change",br,g)}function ce(br,fr){for(var Pr=[],Jr=br;Jr<fr;++Jr)Pr.push(new Na(Ue[Jr],D(Jr),S));return Pr}var _e=g.from,ke=g.to,Ue=g.text,mt=Er(u,_e.line),Bt=Er(u,ke.line),tn=Vn(Ue),qt=D(Ue.length-1),xn=ke.line-_e.line;if(g.full)u.insert(0,ce(0,Ue.length)),u.remove(Ue.length,u.size-Ue.length);else if(Nc(u,g)){var Fn=ce(0,Ue.length-1);H(Bt,Bt.text,qt),xn&&u.remove(_e.line,xn),Fn.length&&u.insert(_e.line,Fn)}else if(mt==Bt)if(Ue.length==1)H(mt,mt.text.slice(0,_e.ch)+tn+mt.text.slice(ke.ch),qt);else{var Kn=ce(1,Ue.length-1);Kn.push(new Na(tn+mt.text.slice(ke.ch),qt,S)),H(mt,mt.text.slice(0,_e.ch)+Ue[0],D(0)),u.insert(_e.line+1,Kn)}else if(Ue.length==1)H(mt,mt.text.slice(0,_e.ch)+Ue[0]+Bt.text.slice(ke.ch),D(0)),u.remove(_e.line+1,xn);else{H(mt,mt.text.slice(0,_e.ch)+Ue[0],D(0)),H(Bt,tn+Bt.text.slice(ke.ch),qt);var Hn=ce(1,Ue.length-1);xn>1&&u.remove(_e.line+1,xn-1),u.insert(_e.line+1,Hn)}Es(u,"change",u,g)}function va(u,g,E){function S(D,H,ce){if(D.linked)for(var _e=0;_e<D.linked.length;++_e){var ke=D.linked[_e];if(ke.doc!=H){var Ue=ce&&ke.sharedHist;E&&!Ue||(g(ke.doc,Ue),S(ke.doc,D,Ue))}}}S(u,null,!0)}function gs(u,g){if(g.cm)throw new Error("This document is already in use.");u.doc=g,g.cm=u,vu(u),yf(u),$l(u),u.options.direction=g.direction,u.options.lineWrapping||Ns(u),u.options.mode=g.modeOption,Wa(u)}function $l(u){(u.doc.direction=="rtl"?Ge:Se)(u.display.lineDiv,"CodeMirror-rtl")}function vc(u){Xs(u,function(){$l(u),Wa(u)})}function Cc(u){this.done=[],this.undone=[],this.undoDepth=u?u.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=u?u.maxGeneration:1}function Hu(u,g){var E={from:Io(g.from),to:ea(g),text:wa(u,g.from,g.to)};return vf(u,E,g.from.line,g.to.line+1),va(u,function(S){return vf(S,E,g.from.line,g.to.line+1)},!0),E}function hA(u){for(;u.length;){var g=Vn(u);if(g.ranges)u.pop();else break}}function _c(u,g){if(g)return hA(u.done),Vn(u.done);if(u.done.length&&!Vn(u.done).ranges)return Vn(u.done);if(u.done.length>1&&!u.done[u.done.length-2].ranges)return u.done.pop(),Vn(u.done)}function os(u,g,E,S){var D=u.history;D.undone.length=0;var H=+new Date,ce,_e;if((D.lastOp==S||D.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&D.lastModTime>H-(u.cm?u.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(ce=_c(D,D.lastOp==S)))_e=Vn(ce.changes),gr(g.from,g.to)==0&&gr(g.from,_e.to)==0?_e.to=ea(g):ce.changes.push(Hu(u,g));else{var ke=Vn(D.done);for((!ke||!ke.ranges)&&DA(u.sel,D.done),ce={changes:[Hu(u,g)],generation:D.generation},D.done.push(ce);D.done.length>D.undoDepth;)D.done.shift(),D.done[0].ranges||D.done.shift()}D.done.push(E),D.generation=++D.maxGeneration,D.lastModTime=D.lastSelTime=H,D.lastOp=D.lastSelOp=S,D.lastOrigin=D.lastSelOrigin=g.origin,_e||lt(u,"historyAdded")}function Bh(u,g,E,S){var D=g.charAt(0);return D=="*"||D=="+"&&E.ranges.length==S.ranges.length&&E.somethingSelected()==S.somethingSelected()&&new Date-u.history.lastSelTime<=(u.cm?u.cm.options.historyEventDelay:500)}function Eu(u,g,E,S){var D=u.history,H=S&&S.origin;E==D.lastSelOp||H&&D.lastSelOrigin==H&&(D.lastModTime==D.lastSelTime&&D.lastOrigin==H||Bh(u,H,Vn(D.done),g))?D.done[D.done.length-1]=g:DA(g,D.done),D.lastSelTime=+new Date,D.lastSelOrigin=H,D.lastSelOp=E,S&&S.clearRedo!==!1&&hA(D.undone)}function DA(u,g){var E=Vn(g);E&&E.ranges&&E.equals(u)||g.push(u)}function vf(u,g,E,S){var D=g["spans_"+u.id],H=0;u.iter(Math.max(u.first,E),Math.min(u.first+u.size,S),function(ce){ce.markedSpans&&((D||(D=g["spans_"+u.id]={}))[H]=ce.markedSpans),++H})}function ed(u){if(!u)return null;for(var g,E=0;E<u.length;++E)u[E].marker.explicitlyCleared?g||(g=u.slice(0,E)):g&&g.push(u[E]);return g?g.length?g:null:u}function Oh(u,g){var E=g["spans_"+u.id];if(!E)return null;for(var S=[],D=0;D<g.text.length;++D)S.push(ed(E[D]));return S}function Il(u,g){var E=Oh(u,g),S=Ii(u,g);if(!E)return S;if(!S)return E;for(var D=0;D<E.length;++D){var H=E[D],ce=S[D];if(H&&ce)e:for(var _e=0;_e<ce.length;++_e){for(var ke=ce[_e],Ue=0;Ue<H.length;++Ue)if(H[Ue].marker==ke.marker)continue e;H.push(ke)}else ce&&(E[D]=ce)}return E}function Zu(u,g,E){for(var S=[],D=0;D<u.length;++D){var H=u[D];if(H.ranges){S.push(E?Xn.prototype.deepCopy.call(H):H);continue}var ce=H.changes,_e=[];S.push({changes:_e});for(var ke=0;ke<ce.length;++ke){var Ue=ce[ke],mt=void 0;if(_e.push({from:Ue.from,to:Ue.to,text:Ue.text}),g)for(var Bt in Ue)(mt=Bt.match(/^spans_(\d+)$/))&&Ye(g,Number(mt[1]))>-1&&(Vn(_e)[Bt]=Ue[Bt],delete Ue[Bt])}}return S}function vr(u,g,E,S){if(S){var D=u.anchor;if(E){var H=gr(g,D)<0;H!=gr(E,D)<0?(D=g,g=E):H!=gr(g,E)<0&&(g=E)}return new Mo(D,g)}else return new Mo(E||g,g)}function ri(u,g,E,S,D){D==null&&(D=u.cm&&(u.cm.display.shift||u.extend)),ss(u,new Xn([vr(u.sel.primary(),g,E,D)],0),S)}function bc(u,g,E){for(var S=[],D=u.cm&&(u.cm.display.shift||u.extend),H=0;H<u.sel.ranges.length;H++)S[H]=vr(u.sel.ranges[H],g[H],null,D);var ce=Ol(u.cm,S,u.sel.primIndex);ss(u,ce,E)}function Tl(u,g,E,S){var D=u.sel.ranges.slice(0);D[g]=E,ss(u,Ol(u.cm,D,u.sel.primIndex),S)}function Xu(u,g,E,S){ss(u,qa(g,E),S)}function Ws(u,g,E){var S={ranges:g.ranges,update:function(D){this.ranges=[];for(var H=0;H<D.length;H++)this.ranges[H]=new Mo(vi(u,D[H].anchor),vi(u,D[H].head))},origin:E&&E.origin};return lt(u,"beforeSelectionChange",u,S),u.cm&&lt(u.cm,"beforeSelectionChange",u.cm,S),S.ranges!=g.ranges?Ol(u.cm,S.ranges,S.ranges.length-1):g}function Bu(u,g,E){var S=u.history.done,D=Vn(S);D&&D.ranges?(S[S.length-1]=g,Ia(u,g,E)):ss(u,g,E)}function ss(u,g,E){Ia(u,g,E),Eu(u,u.sel,u.cm?u.cm.curOp.id:NaN,E)}function Ia(u,g,E){(jt(u,"beforeSelectionChange")||u.cm&&jt(u.cm,"beforeSelectionChange"))&&(g=Ws(u,g,E));var S=E&&E.bias||(gr(g.primary().head,u.sel.primary().head)<0?-1:1);dA(u,as(u,g,S,!0)),!(E&&E.scroll===!1)&&u.cm&&u.cm.getOption("readOnly")!="nocursor"&&ms(u.cm)}function dA(u,g){g.equals(u.sel)||(u.sel=g,u.cm&&(u.cm.curOp.updateInput=1,u.cm.curOp.selectionChanged=!0,Ft(u.cm)),Es(u,"cursorActivity",u))}function Do(u){dA(u,as(u,u.sel,null,!1))}function as(u,g,E,S){for(var D,H=0;H<g.ranges.length;H++){var ce=g.ranges[H],_e=g.ranges.length==u.sel.ranges.length&&u.sel.ranges[H],ke=Ju(u,ce.anchor,_e&&_e.anchor,E,S),Ue=ce.head==ce.anchor?ke:Ju(u,ce.head,_e&&_e.head,E,S);(D||ke!=ce.anchor||Ue!=ce.head)&&(D||(D=g.ranges.slice(0,H)),D[H]=new Mo(ke,Ue))}return D?Ol(u.cm,D,g.primIndex):g}function su(u,g,E,S,D){var H=Er(u,g.line);if(H.markedSpans)for(var ce=0;ce<H.markedSpans.length;++ce){var _e=H.markedSpans[ce],ke=_e.marker,Ue="selectLeft"in ke?!ke.selectLeft:ke.inclusiveLeft,mt="selectRight"in ke?!ke.selectRight:ke.inclusiveRight;if((_e.from==null||(Ue?_e.from<=g.ch:_e.from<g.ch))&&(_e.to==null||(mt?_e.to>=g.ch:_e.to>g.ch))){if(D&&(lt(ke,"beforeCursorEnter"),ke.explicitlyCleared))if(H.markedSpans){--ce;continue}else break;if(!ke.atomic)continue;if(E){var Bt=ke.find(S<0?1:-1),tn=void 0;if((S<0?mt:Ue)&&(Bt=KA(u,Bt,-S,Bt&&Bt.line==g.line?H:null)),Bt&&Bt.line==g.line&&(tn=gr(Bt,E))&&(S<0?tn<0:tn>0))return su(u,Bt,g,S,D)}var qt=ke.find(S<0?-1:1);return(S<0?Ue:mt)&&(qt=KA(u,qt,S,qt.line==g.line?H:null)),qt?su(u,qt,g,S,D):null}}return g}function Ju(u,g,E,S,D){var H=S||1,ce=su(u,g,E,H,D)||!D&&su(u,g,E,H,!0)||su(u,g,E,-H,D)||!D&&su(u,g,E,-H,!0);return ce||(u.cantEdit=!0,fn(u.first,0))}function KA(u,g,E,S){return E<0&&g.ch==0?g.line>u.first?vi(u,fn(g.line-1)):null:E>0&&g.ch==(S||Er(u,g.line)).text.length?g.line<u.first+u.size-1?fn(g.line+1,0):null:new fn(g.line,g.ch+E)}function sl(u){u.setSelection(fn(u.firstLine(),0),fn(u.lastLine()),Et)}function Ih(u,g,E){var S={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return S.canceled=!0}};return E&&(S.update=function(D,H,ce,_e){D&&(S.from=vi(u,D)),H&&(S.to=vi(u,H)),ce&&(S.text=ce),_e!==void 0&&(S.origin=_e)}),lt(u,"beforeChange",u,S),u.cm&&lt(u.cm,"beforeChange",u.cm,S),S.canceled?(u.cm&&(u.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function Gc(u,g,E){if(u.cm){if(!u.cm.curOp)return Ro(u.cm,Gc)(u,g,E);if(u.cm.state.suppressEdits)return}if(!((jt(u,"beforeChange")||u.cm&&jt(u.cm,"beforeChange"))&&(g=Ih(u,g,!0),!g))){var S=Ni&&!E&&Gi(u,g.from,g.to);if(S)for(var D=S.length-1;D>=0;--D)fA(u,{from:S[D].from,to:S[D].to,text:D?[""]:g.text,origin:g.origin});else fA(u,g)}}function fA(u,g){if(!(g.text.length==1&&g.text[0]==""&&gr(g.from,g.to)==0)){var E=RA(u,g);os(u,g,E,u.cm?u.cm.curOp.id:NaN),a(u,g,E,Ii(u,g));var S=[];va(u,function(D,H){!H&&Ye(S,D.history)==-1&&(z(D.history,g),S.push(D.history)),a(D,g,null,Ii(D,g))})}}function kl(u,g,E){var S=u.cm&&u.cm.state.suppressEdits;if(!(S&&!E)){for(var D=u.history,H,ce=u.sel,_e=g=="undo"?D.done:D.undone,ke=g=="undo"?D.undone:D.done,Ue=0;Ue<_e.length&&(H=_e[Ue],!(E?H.ranges&&!H.equals(u.sel):!H.ranges));Ue++);if(Ue!=_e.length){for(D.lastOrigin=D.lastSelOrigin=null;;)if(H=_e.pop(),H.ranges){if(DA(H,ke),E&&!H.equals(u.sel)){ss(u,H,{clearRedo:!1});return}ce=H}else if(S){_e.push(H);return}else break;var mt=[];DA(ce,ke),ke.push({changes:mt,generation:D.generation}),D.generation=H.generation||++D.maxGeneration;for(var Bt=jt(u,"beforeChange")||u.cm&&jt(u.cm,"beforeChange"),tn=function(Fn){var Kn=H.changes[Fn];if(Kn.origin=g,Bt&&!Ih(u,Kn,!1))return _e.length=0,{};mt.push(Hu(u,Kn));var Hn=Fn?RA(u,Kn):Vn(_e);a(u,Kn,Hn,Il(u,Kn)),!Fn&&u.cm&&u.cm.scrollIntoView({from:Kn.from,to:ea(Kn)});var br=[];va(u,function(fr,Pr){!Pr&&Ye(br,fr.history)==-1&&(z(fr.history,Kn),br.push(fr.history)),a(fr,Kn,null,Il(fr,Kn))})},qt=H.changes.length-1;qt>=0;--qt){var xn=tn(qt);if(xn)return xn.v}}}}function O(u,g){if(g!=0&&(u.first+=g,u.sel=new Xn(Pn(u.sel.ranges,function(D){return new Mo(fn(D.anchor.line+g,D.anchor.ch),fn(D.head.line+g,D.head.ch))}),u.sel.primIndex),u.cm)){Wa(u.cm,u.first,u.first-g,g);for(var E=u.cm.display,S=E.viewFrom;S<E.viewTo;S++)Cu(u.cm,S,"gutter")}}function a(u,g,E,S){if(u.cm&&!u.cm.curOp)return Ro(u.cm,a)(u,g,E,S);if(g.to.line<u.first){O(u,g.text.length-1-(g.to.line-g.from.line));return}if(!(g.from.line>u.lastLine())){if(g.from.line<u.first){var D=g.text.length-1-(u.first-g.from.line);O(u,D),g={from:fn(u.first,0),to:fn(g.to.line+D,g.to.ch),text:[Vn(g.text)],origin:g.origin}}var H=u.lastLine();g.to.line>H&&(g={from:g.from,to:fn(H,Er(u,H).text.length),text:[g.text[0]],origin:g.origin}),g.removed=wa(u,g.from,g.to),E||(E=RA(u,g)),u.cm?c(u.cm,g,S):ol(u,g,S),Ia(u,E,Et),u.cantEdit&&Ju(u,fn(u.firstLine(),0))&&(u.cantEdit=!1)}}function c(u,g,E){var S=u.doc,D=u.display,H=g.from,ce=g.to,_e=!1,ke=H.line;u.options.lineWrapping||(ke=qe(Rr(Er(S,H.line))),S.iter(ke,ce.line+1,function(qt){if(qt==D.maxLine)return _e=!0,!0})),S.sel.contains(g.from,g.to)>-1&&Ft(u),ol(S,g,E,Fc(u)),u.options.lineWrapping||(S.iter(ke,H.line+g.text.length,function(qt){var xn=Fi(qt);xn>D.maxLineLength&&(D.maxLine=qt,D.maxLineLength=xn,D.maxLineChanged=!0,_e=!1)}),_e&&(u.curOp.updateMaxLine=!0)),za(S,H.line),js(u,400);var Ue=g.text.length-(ce.line-H.line)-1;g.full?Wa(u):H.line==ce.line&&g.text.length==1&&!Nc(u.doc,g)?Cu(u,H.line,"text"):Wa(u,H.line,ce.line+1,Ue);var mt=jt(u,"changes"),Bt=jt(u,"change");if(Bt||mt){var tn={from:H,to:ce,text:g.text,removed:g.removed,origin:g.origin};Bt&&Es(u,"change",u,tn),mt&&(u.curOp.changeObjs||(u.curOp.changeObjs=[])).push(tn)}u.display.selForContextMenu=null}function v(u,g,E,S,D){var H;S||(S=E),gr(S,E)<0&&(H=[S,E],E=H[0],S=H[1]),typeof g=="string"&&(g=u.splitLines(g)),Gc(u,{from:E,to:S,text:g,origin:D})}function M(u,g,E,S){E<u.line?u.line+=S:g<u.line&&(u.line=g,u.ch=0)}function I(u,g,E,S){for(var D=0;D<u.length;++D){var H=u[D],ce=!0;if(H.ranges){H.copied||(H=u[D]=H.deepCopy(),H.copied=!0);for(var _e=0;_e<H.ranges.length;_e++)M(H.ranges[_e].anchor,g,E,S),M(H.ranges[_e].head,g,E,S);continue}for(var ke=0;ke<H.changes.length;++ke){var Ue=H.changes[ke];if(E<Ue.from.line)Ue.from=fn(Ue.from.line+S,Ue.from.ch),Ue.to=fn(Ue.to.line+S,Ue.to.ch);else if(g<=Ue.to.line){ce=!1;break}}ce||(u.splice(0,D+1),D=0)}}function z(u,g){var E=g.from.line,S=g.to.line,D=g.text.length-(S-E)-1;I(u.done,E,S,D),I(u.undone,E,S,D)}function Y(u,g,E,S){var D=g,H=g;return typeof g=="number"?H=Er(u,iA(u,g)):D=qe(g),D==null?null:(S(H,D)&&u.cm&&Cu(u.cm,D,E),H)}function ee(u){this.lines=u,this.parent=null;for(var g=0,E=0;E<u.length;++E)u[E].parent=this,g+=u[E].height;this.height=g}ee.prototype={chunkSize:function(){return this.lines.length},removeInner:function(u,g){for(var E=u,S=u+g;E<S;++E){var D=this.lines[E];this.height-=D.height,Gs(D),Es(D,"delete")}this.lines.splice(u,g)},collapse:function(u){u.push.apply(u,this.lines)},insertInner:function(u,g,E){this.height+=E,this.lines=this.lines.slice(0,u).concat(g).concat(this.lines.slice(u));for(var S=0;S<g.length;++S)g[S].parent=this},iterN:function(u,g,E){for(var S=u+g;u<S;++u)if(E(this.lines[u]))return!0}};function Ae(u){this.children=u;for(var g=0,E=0,S=0;S<u.length;++S){var D=u[S];g+=D.chunkSize(),E+=D.height,D.parent=this}this.size=g,this.height=E,this.parent=null}Ae.prototype={chunkSize:function(){return this.size},removeInner:function(u,g){this.size-=g;for(var E=0;E<this.children.length;++E){var S=this.children[E],D=S.chunkSize();if(u<D){var H=Math.min(g,D-u),ce=S.height;if(S.removeInner(u,H),this.height-=ce-S.height,D==H&&(this.children.splice(E--,1),S.parent=null),(g-=H)==0)break;u=0}else u-=D}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof ee))){var _e=[];this.collapse(_e),this.children=[new ee(_e)],this.children[0].parent=this}},collapse:function(u){for(var g=0;g<this.children.length;++g)this.children[g].collapse(u)},insertInner:function(u,g,E){this.size+=g.length,this.height+=E;for(var S=0;S<this.children.length;++S){var D=this.children[S],H=D.chunkSize();if(u<=H){if(D.insertInner(u,g,E),D.lines&&D.lines.length>50){for(var ce=D.lines.length%25+25,_e=ce;_e<D.lines.length;){var ke=new ee(D.lines.slice(_e,_e+=25));D.height-=ke.height,this.children.splice(++S,0,ke),ke.parent=this}D.lines=D.lines.slice(0,ce),this.maybeSpill()}break}u-=H}},maybeSpill:function(){if(!(this.children.length<=10)){var u=this;do{var g=u.children.splice(u.children.length-5,5),E=new Ae(g);if(u.parent){u.size-=E.size,u.height-=E.height;var D=Ye(u.parent.children,u);u.parent.children.splice(D+1,0,E)}else{var S=new Ae(u.children);S.parent=u,u.children=[S,E],u=S}E.parent=u.parent}while(u.children.length>10);u.parent.maybeSpill()}},iterN:function(u,g,E){for(var S=0;S<this.children.length;++S){var D=this.children[S],H=D.chunkSize();if(u<H){var ce=Math.min(g,H-u);if(D.iterN(u,ce,E))return!0;if((g-=ce)==0)break;u=0}else u-=H}}};var de=function(u,g,E){if(E)for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);this.doc=u,this.node=g};de.prototype.clear=function(){var u=this.doc.cm,g=this.line.widgets,E=this.line,S=qe(E);if(!(S==null||!g)){for(var D=0;D<g.length;++D)g[D]==this&&g.splice(D--,1);g.length||(E.widgets=null);var H=Ml(this);Jo(E,Math.max(0,E.height-H)),u&&(Xs(u,function(){Oe(u,E,-H),Cu(u,S,"widget")}),Es(u,"lineWidgetCleared",u,this,S))}},de.prototype.changed=function(){var u=this,g=this.height,E=this.doc.cm,S=this.line;this.height=null;var D=Ml(this)-g;D&&(fi(this.doc,S)||Jo(S,S.height+D),E&&Xs(E,function(){E.curOp.forceUpdate=!0,Oe(E,S,D),Es(E,"lineWidgetChanged",E,u,qe(S))}))},Gt(de);function Oe(u,g,E){Ki(g)<(u.curOp&&u.curOp.scrollTop||u.doc.scrollTop)&&bu(u,E)}function Be(u,g,E,S){var D=new de(u,E,S),H=u.cm;return H&&D.noHScroll&&(H.display.alignWidgets=!0),Y(u,g,"widget",function(ce){var _e=ce.widgets||(ce.widgets=[]);if(D.insertAt==null?_e.push(D):_e.splice(Math.min(_e.length,Math.max(0,D.insertAt)),0,D),D.line=ce,H&&!fi(u,ce)){var ke=Ki(ce)<u.scrollTop;Jo(ce,ce.height+Ml(D)),ke&&bu(H,D.height),H.curOp.forceUpdate=!0}return!0}),H&&Es(H,"lineWidgetAdded",H,D,typeof g=="number"?g:qe(g)),D}var ze=0,He=function(u,g){this.lines=[],this.type=g,this.doc=u,this.id=++ze};He.prototype.clear=function(){if(!this.explicitlyCleared){var u=this.doc.cm,g=u&&!u.curOp;if(g&&mc(u),jt(this,"clear")){var E=this.find();E&&Es(this,"clear",E.from,E.to)}for(var S=null,D=null,H=0;H<this.lines.length;++H){var ce=this.lines[H],_e=Ea(ce.markedSpans,this);u&&!this.collapsed?Cu(u,qe(ce),"text"):u&&(_e.to!=null&&(D=qe(ce)),_e.from!=null&&(S=qe(ce))),ce.markedSpans=pa(ce.markedSpans,_e),_e.from==null&&this.collapsed&&!fi(this.doc,ce)&&u&&Jo(ce,ja(u.display))}if(u&&this.collapsed&&!u.options.lineWrapping)for(var ke=0;ke<this.lines.length;++ke){var Ue=Rr(this.lines[ke]),mt=Fi(Ue);mt>u.display.maxLineLength&&(u.display.maxLine=Ue,u.display.maxLineLength=mt,u.display.maxLineChanged=!0)}S!=null&&u&&this.collapsed&&Wa(u,S,D+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,u&&Do(u.doc)),u&&Es(u,"markerCleared",u,this,S,D),g&&Ql(u),this.parent&&this.parent.clear()}},He.prototype.find=function(u,g){u==null&&this.type=="bookmark"&&(u=1);for(var E,S,D=0;D<this.lines.length;++D){var H=this.lines[D],ce=Ea(H.markedSpans,this);if(ce.from!=null&&(E=fn(g?H:qe(H),ce.from),u==-1))return E;if(ce.to!=null&&(S=fn(g?H:qe(H),ce.to),u==1))return S}return E&&{from:E,to:S}},He.prototype.changed=function(){var u=this,g=this.find(-1,!0),E=this,S=this.doc.cm;!g||!S||Xs(S,function(){var D=g.line,H=qe(g.line),ce=xd(S,H);if(ce&&(Mh(ce),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!fi(E.doc,D)&&E.height!=null){var _e=E.height;E.height=null;var ke=Ml(E)-_e;ke&&Jo(D,D.height+ke)}Es(S,"markerChanged",S,u)})},He.prototype.attachLine=function(u){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(!g.maybeHiddenMarkers||Ye(g.maybeHiddenMarkers,this)==-1)&&(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(u)},He.prototype.detachLine=function(u){if(this.lines.splice(Ye(this.lines,u),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},Gt(He);function ft(u,g,E,S,D){if(S&&S.shared)return pt(u,g,E,S,D);if(u.cm&&!u.cm.curOp)return Ro(u.cm,ft)(u,g,E,S,D);var H=new He(u,D),ce=gr(g,E);if(S&&Ke(S,H,!1),ce>0||ce==0&&H.clearWhenEmpty!==!1)return H;if(H.replacedWith&&(H.collapsed=!0,H.widgetNode=rt("span",[H.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||H.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(H.widgetNode.insertLeft=!0)),H.collapsed){if(Ai(u,g.line,g,E,H)||g.line!=E.line&&Ai(u,E.line,g,E,H))throw new Error("Inserting collapsed marker partially overlapping an existing one");Vo()}H.addToHistory&&os(u,{from:g,to:E,origin:"markText"},u.sel,NaN);var _e=g.line,ke=u.cm,Ue;if(u.iter(_e,E.line+1,function(Bt){ke&&H.collapsed&&!ke.options.lineWrapping&&Rr(Bt)==ke.display.maxLine&&(Ue=!0),H.collapsed&&_e!=g.line&&Jo(Bt,0),Ss(Bt,new Hi(H,_e==g.line?g.ch:null,_e==E.line?E.ch:null),u.cm&&u.cm.curOp),++_e}),H.collapsed&&u.iter(g.line,E.line+1,function(Bt){fi(u,Bt)&&Jo(Bt,0)}),H.clearOnEnter&&Ne(H,"beforeCursorEnter",function(){return H.clear()}),H.readOnly&&($o(),(u.history.done.length||u.history.undone.length)&&u.clearHistory()),H.collapsed&&(H.id=++ze,H.atomic=!0),ke){if(Ue&&(ke.curOp.updateMaxLine=!0),H.collapsed)Wa(ke,g.line,E.line+1);else if(H.className||H.startStyle||H.endStyle||H.css||H.attributes||H.title)for(var mt=g.line;mt<=E.line;mt++)Cu(ke,mt,"text");H.atomic&&Do(ke.doc),Es(ke,"markerAdded",ke,H)}return H}var dt=function(u,g){this.markers=u,this.primary=g;for(var E=0;E<u.length;++E)u[E].parent=this};dt.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var u=0;u<this.markers.length;++u)this.markers[u].clear();Es(this,"clear")}},dt.prototype.find=function(u,g){return this.primary.find(u,g)},Gt(dt);function pt(u,g,E,S,D){S=Ke(S),S.shared=!1;var H=[ft(u,g,E,S,D)],ce=H[0],_e=S.widgetNode;return va(u,function(ke){_e&&(S.widgetNode=_e.cloneNode(!0)),H.push(ft(ke,vi(ke,g),vi(ke,E),S,D));for(var Ue=0;Ue<ke.linked.length;++Ue)if(ke.linked[Ue].isParent)return;ce=Vn(H)}),new dt(H,ce)}function wt(u){return u.findMarks(fn(u.first,0),u.clipPos(fn(u.lastLine())),function(g){return g.parent})}function Tt(u,g){for(var E=0;E<g.length;E++){var S=g[E],D=S.find(),H=u.clipPos(D.from),ce=u.clipPos(D.to);if(gr(H,ce)){var _e=ft(u,H,ce,S.primary,S.primary.type);S.markers.push(_e),_e.parent=S}}}function Mt(u){for(var g=function(S){var D=u[S],H=[D.primary.doc];va(D.primary.doc,function(ke){return H.push(ke)});for(var ce=0;ce<D.markers.length;ce++){var _e=D.markers[ce];Ye(H,_e.doc)==-1&&(_e.parent=null,D.markers.splice(ce--,1))}},E=0;E<u.length;E++)g(E)}var kt=0,Kt=function(u,g,E,S,D){if(!(this instanceof Kt))return new Kt(u,g,E,S,D);E==null&&(E=0),Ae.call(this,[new ee([new Na("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var H=fn(E,0);this.sel=qa(H),this.history=new Cc(null),this.id=++kt,this.modeOption=g,this.lineSep=S,this.direction=D=="rtl"?"rtl":"ltr",this.extend=!1,typeof u=="string"&&(u=this.splitLines(u)),ol(this,{from:H,to:H,text:u}),ss(this,qa(H),Et)};Kt.prototype=Ir(Ae.prototype,{constructor:Kt,iter:function(u,g,E){E?this.iterN(u-this.first,g-u,E):this.iterN(this.first,this.first+this.size,u)},insert:function(u,g){for(var E=0,S=0;S<g.length;++S)E+=g[S].height;this.insertInner(u-this.first,g,E)},remove:function(u,g){this.removeInner(u-this.first,g)},getValue:function(u){var g=qo(this,this.first,this.first+this.size);return u===!1?g:g.join(u||this.lineSeparator())},setValue:Bs(function(u){var g=fn(this.first,0),E=this.first+this.size-1;Gc(this,{from:g,to:fn(E,Er(this,E).text.length),text:this.splitLines(u),origin:"setValue",full:!0},!0),this.cm&&ya(this.cm,0,0),ss(this,qa(g),Et)}),replaceRange:function(u,g,E,S){g=vi(this,g),E=E?vi(this,E):g,v(this,u,g,E,S)},getRange:function(u,g,E){var S=wa(this,vi(this,u),vi(this,g));return E===!1?S:E===""?S.join(""):S.join(E||this.lineSeparator())},getLine:function(u){var g=this.getLineHandle(u);return g&&g.text},getLineHandle:function(u){if(_n(this,u))return Er(this,u)},getLineNumber:function(u){return qe(u)},getLineHandleVisualStart:function(u){return typeof u=="number"&&(u=Er(this,u)),Rr(u)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(u){return vi(this,u)},getCursor:function(u){var g=this.sel.primary(),E;return u==null||u=="head"?E=g.head:u=="anchor"?E=g.anchor:u=="end"||u=="to"||u===!1?E=g.to():E=g.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Bs(function(u,g,E){Xu(this,vi(this,typeof u=="number"?fn(u,g||0):u),null,E)}),setSelection:Bs(function(u,g,E){Xu(this,vi(this,u),vi(this,g||u),E)}),extendSelection:Bs(function(u,g,E){ri(this,vi(this,u),g&&vi(this,g),E)}),extendSelections:Bs(function(u,g){bc(this,jl(this,u),g)}),extendSelectionsBy:Bs(function(u,g){var E=Pn(this.sel.ranges,u);bc(this,jl(this,E),g)}),setSelections:Bs(function(u,g,E){if(u.length){for(var S=[],D=0;D<u.length;D++)S[D]=new Mo(vi(this,u[D].anchor),vi(this,u[D].head||u[D].anchor));g==null&&(g=Math.min(u.length-1,this.sel.primIndex)),ss(this,Ol(this.cm,S,g),E)}}),addSelection:Bs(function(u,g,E){var S=this.sel.ranges.slice(0);S.push(new Mo(vi(this,u),vi(this,g||u))),ss(this,Ol(this.cm,S,S.length-1),E)}),getSelection:function(u){for(var g=this.sel.ranges,E,S=0;S<g.length;S++){var D=wa(this,g[S].from(),g[S].to());E=E?E.concat(D):D}return u===!1?E:E.join(u||this.lineSeparator())},getSelections:function(u){for(var g=[],E=this.sel.ranges,S=0;S<E.length;S++){var D=wa(this,E[S].from(),E[S].to());u!==!1&&(D=D.join(u||this.lineSeparator())),g[S]=D}return g},replaceSelection:function(u,g,E){for(var S=[],D=0;D<this.sel.ranges.length;D++)S[D]=u;this.replaceSelections(S,g,E||"+input")},replaceSelections:Bs(function(u,g,E){for(var S=[],D=this.sel,H=0;H<D.ranges.length;H++){var ce=D.ranges[H];S[H]={from:ce.from(),to:ce.to(),text:this.splitLines(u[H]),origin:E}}for(var _e=g&&g!="end"&&yc(this,S,g),ke=S.length-1;ke>=0;ke--)Gc(this,S[ke]);_e?Bu(this,_e):this.cm&&ms(this.cm)}),undo:Bs(function(){kl(this,"undo")}),redo:Bs(function(){kl(this,"redo")}),undoSelection:Bs(function(){kl(this,"undo",!0)}),redoSelection:Bs(function(){kl(this,"redo",!0)}),setExtending:function(u){this.extend=u},getExtending:function(){return this.extend},historySize:function(){for(var u=this.history,g=0,E=0,S=0;S<u.done.length;S++)u.done[S].ranges||++g;for(var D=0;D<u.undone.length;D++)u.undone[D].ranges||++E;return{undo:g,redo:E}},clearHistory:function(){var u=this;this.history=new Cc(this.history),va(this,function(g){return g.history=u.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(u){return u&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(u){return this.history.generation==(u||this.cleanGeneration)},getHistory:function(){return{done:Zu(this.history.done),undone:Zu(this.history.undone)}},setHistory:function(u){var g=this.history=new Cc(this.history);g.done=Zu(u.done.slice(0),null,!0),g.undone=Zu(u.undone.slice(0),null,!0)},setGutterMarker:Bs(function(u,g,E){return Y(this,u,"gutter",function(S){var D=S.gutterMarkers||(S.gutterMarkers={});return D[g]=E,!E&&he(D)&&(S.gutterMarkers=null),!0})}),clearGutter:Bs(function(u){var g=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[u]&&Y(g,E,"gutter",function(){return E.gutterMarkers[u]=null,he(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(u){var g;if(typeof u=="number"){if(!_n(this,u)||(g=u,u=Er(this,u),!u))return null}else if(g=qe(u),g==null)return null;return{line:g,handle:u,text:u.text,gutterMarkers:u.gutterMarkers,textClass:u.textClass,bgClass:u.bgClass,wrapClass:u.wrapClass,widgets:u.widgets}},addLineClass:Bs(function(u,g,E){return Y(this,u,g=="gutter"?"gutter":"class",function(S){var D=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(!S[D])S[D]=E;else{if(we(E).test(S[D]))return!1;S[D]+=" "+E}return!0})}),removeLineClass:Bs(function(u,g,E){return Y(this,u,g=="gutter"?"gutter":"class",function(S){var D=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",H=S[D];if(H)if(E==null)S[D]=null;else{var ce=H.match(we(E));if(!ce)return!1;var _e=ce.index+ce[0].length;S[D]=H.slice(0,ce.index)+(!ce.index||_e==H.length?"":" ")+H.slice(_e)||null}else return!1;return!0})}),addLineWidget:Bs(function(u,g,E){return Be(this,u,g,E)}),removeLineWidget:function(u){u.clear()},markText:function(u,g,E){return ft(this,vi(this,u),vi(this,g),E,E&&E.type||"range")},setBookmark:function(u,g){var E={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return u=vi(this,u),ft(this,u,u,E,"bookmark")},findMarksAt:function(u){u=vi(this,u);var g=[],E=Er(this,u.line).markedSpans;if(E)for(var S=0;S<E.length;++S){var D=E[S];(D.from==null||D.from<=u.ch)&&(D.to==null||D.to>=u.ch)&&g.push(D.marker.parent||D.marker)}return g},findMarks:function(u,g,E){u=vi(this,u),g=vi(this,g);var S=[],D=u.line;return this.iter(u.line,g.line+1,function(H){var ce=H.markedSpans;if(ce)for(var _e=0;_e<ce.length;_e++){var ke=ce[_e];!(ke.to!=null&&D==u.line&&u.ch>=ke.to||ke.from==null&&D!=u.line||ke.from!=null&&D==g.line&&ke.from>=g.ch)&&(!E||E(ke.marker))&&S.push(ke.marker.parent||ke.marker)}++D}),S},getAllMarks:function(){var u=[];return this.iter(function(g){var E=g.markedSpans;if(E)for(var S=0;S<E.length;++S)E[S].from!=null&&u.push(E[S].marker)}),u},posFromIndex:function(u){var g,E=this.first,S=this.lineSeparator().length;return this.iter(function(D){var H=D.text.length+S;if(H>u)return g=u,!0;u-=H,++E}),vi(this,fn(E,g))},indexFromPos:function(u){u=vi(this,u);var g=u.ch;if(u.line<this.first||u.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,u.line,function(S){g+=S.text.length+E}),g},copy:function(u){var g=new Kt(qo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,u&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(u){u||(u={});var g=this.first,E=this.first+this.size;u.from!=null&&u.from>g&&(g=u.from),u.to!=null&&u.to<E&&(E=u.to);var S=new Kt(qo(this,g,E),u.mode||this.modeOption,g,this.lineSep,this.direction);return u.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:u.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:u.sharedHist}],Tt(S,wt(this)),S},unlinkDoc:function(u){if(u instanceof wo&&(u=u.doc),this.linked)for(var g=0;g<this.linked.length;++g){var E=this.linked[g];if(E.doc==u){this.linked.splice(g,1),u.unlinkDoc(this),Mt(wt(this));break}}if(u.history==this.history){var S=[u.id];va(u,function(D){return S.push(D.id)},!0),u.history=new Cc(null),u.history.done=Zu(this.history.done,S),u.history.undone=Zu(this.history.undone,S)}},iterLinkedDocs:function(u){va(this,u)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(u){return this.lineSep?u.split(this.lineSep):wn(u)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Bs(function(u){u!="rtl"&&(u="ltr"),u!=this.direction&&(this.direction=u,this.iter(function(g){return g.order=null}),this.cm&&vc(this.cm))})}),Kt.prototype.eachLine=Kt.prototype.iter;var zt=0;function sn(u){var g=this;if(ln(g),!(ct(g,u)||Gu(g.display,u))){nn(u),f&&(zt=+new Date);var E=TA(g,u,!0),S=u.dataTransfer.files;if(!(!E||g.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var D=S.length,H=Array(D),ce=0,_e=function(){++ce==D&&Ro(g,function(){E=vi(g.doc,E);var qt={from:E,to:E,text:g.doc.splitLines(H.filter(function(xn){return xn!=null}).join(g.doc.lineSeparator())),origin:"paste"};Gc(g.doc,qt),Bu(g.doc,qa(vi(g.doc,E),vi(g.doc,ea(qt))))})()},ke=function(qt,xn){if(g.options.allowDropFileTypes&&Ye(g.options.allowDropFileTypes,qt.type)==-1){_e();return}var Fn=new FileReader;Fn.onerror=function(){return _e()},Fn.onload=function(){var Kn=Fn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Kn)){_e();return}H[xn]=Kn,_e()},Fn.readAsText(qt)},Ue=0;Ue<S.length;Ue++)ke(S[Ue],Ue);else{if(g.state.draggingText&&g.doc.sel.contains(E)>-1){g.state.draggingText(u),setTimeout(function(){return g.display.input.focus()},20);return}try{var mt=u.dataTransfer.getData("Text");if(mt){var Bt;if(g.state.draggingText&&!g.state.draggingText.copy&&(Bt=g.listSelections()),Ia(g.doc,qa(E,E)),Bt)for(var tn=0;tn<Bt.length;++tn)v(g.doc,"",Bt[tn].anchor,Bt[tn].head,"drag");g.replaceSelection(mt,"around","paste"),g.display.input.focus()}}catch{}}}}function bn(u,g){if(f&&(!u.state.draggingText||+new Date-zt<100)){dr(g);return}if(!(ct(u,g)||Gu(u.display,g))&&(g.dataTransfer.setData("Text",u.getSelection()),g.dataTransfer.effectAllowed="copyMove",g.dataTransfer.setDragImage&&!N)){var E=Me("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",U&&(E.width=E.height=1,u.display.wrapper.appendChild(E),E._top=E.offsetTop),g.dataTransfer.setDragImage(E,0,0),U&&E.parentNode.removeChild(E)}}function en(u,g){var E=TA(u,g);if(E){var S=document.createDocumentFragment();Lc(u,E,S),u.display.dragCursor||(u.display.dragCursor=Me("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),u.display.lineSpace.insertBefore(u.display.dragCursor,u.display.cursorDiv)),je(u.display.dragCursor,S)}}function ln(u){u.display.dragCursor&&(u.display.lineSpace.removeChild(u.display.dragCursor),u.display.dragCursor=null)}function Cn(u){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),E=[],S=0;S<g.length;S++){var D=g[S].CodeMirror;D&&E.push(D)}E.length&&E[0].operation(function(){for(var H=0;H<E.length;H++)u(E[H])})}}var Ar=!1;function cr(){Ar||(kn(),Ar=!0)}function kn(){var u;Ne(window,"resize",function(){u==null&&(u=setTimeout(function(){u=null,Cn(Br)},100))}),Ne(window,"blur",function(){return Cn(us)})}function Br(u){var g=u.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,u.setSize()}for(var Hr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Xi=0;Xi<10;Xi++)Hr[Xi+48]=Hr[Xi+96]=String(Xi);for(var ts=65;ts<=90;ts++)Hr[ts]=String.fromCharCode(ts);for(var Ko=1;Ko<=12;Ko++)Hr[Ko+111]=Hr[Ko+63235]="F"+Ko;var jo={};jo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},jo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jo.default=V?jo.macDefault:jo.pcDefault;function Rs(u){var g=u.split(/-(?!$)/);u=g[g.length-1];for(var E,S,D,H,ce=0;ce<g.length-1;ce++){var _e=g[ce];if(/^(cmd|meta|m)$/i.test(_e))H=!0;else if(/^a(lt)?$/i.test(_e))E=!0;else if(/^(c|ctrl|control)$/i.test(_e))S=!0;else if(/^s(hift)?$/i.test(_e))D=!0;else throw new Error("Unrecognized modifier name: "+_e)}return E&&(u="Alt-"+u),S&&(u="Ctrl-"+u),H&&(u="Cmd-"+u),D&&(u="Shift-"+u),u}function ho(u){var g={};for(var E in u)if(u.hasOwnProperty(E)){var S=u[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(S=="..."){delete u[E];continue}for(var D=Pn(E.split(" "),Rs),H=0;H<D.length;H++){var ce=void 0,_e=void 0;H==D.length-1?(_e=D.join(" "),ce=S):(_e=D.slice(0,H+1).join(" "),ce="...");var ke=g[_e];if(!ke)g[_e]=ce;else if(ke!=ce)throw new Error("Inconsistent bindings for "+_e)}delete u[E]}for(var Ue in g)u[Ue]=g[Ue];return u}function ji(u,g,E,S){g=ao(g);var D=g.call?g.call(u,S):g[u];if(D===!1)return"nothing";if(D==="...")return"multi";if(D!=null&&E(D))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return ji(u,g.fallthrough,E,S);for(var H=0;H<g.fallthrough.length;H++){var ce=ji(u,g.fallthrough[H],E,S);if(ce)return ce}}}function aa(u){var g=typeof u=="string"?u:Hr[u.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function Ta(u,g,E){var S=u;return g.altKey&&S!="Alt"&&(u="Alt-"+u),(fe?g.metaKey:g.ctrlKey)&&S!="Ctrl"&&(u="Ctrl-"+u),(fe?g.ctrlKey:g.metaKey)&&S!="Mod"&&(u="Cmd-"+u),!E&&g.shiftKey&&S!="Shift"&&(u="Shift-"+u),u}function Ca(u,g){if(U&&u.keyCode==34&&u.char)return!1;var E=Hr[u.keyCode];return E==null||u.altGraphKey?!1:(u.keyCode==3&&u.code&&(E=u.code),Ta(E,u,g))}function ao(u){return typeof u=="string"?jo[u]:u}function Vl(u,g){for(var E=u.doc.sel.ranges,S=[],D=0;D<E.length;D++){for(var H=g(E[D]);S.length&&gr(H.from,Vn(S).to)<=0;){var ce=S.pop();if(gr(ce.from,H.from)<0){H.from=ce.from;break}}S.push(H)}Xs(u,function(){for(var _e=S.length-1;_e>=0;_e--)v(u.doc,"",S[_e].from,S[_e].to,"+delete");ms(u)})}function Hl(u,g,E){var S=bt(u.text,g+E,E);return S<0||S>u.text.length?null:S}function pA(u,g,E){var S=Hl(u,g.ch,E);return S==null?null:new fn(g.line,S,E<0?"after":"before")}function Ou(u,g,E,S,D){if(u){g.doc.direction=="rtl"&&(D=-D);var H=ve(E,g.doc.direction);if(H){var ce=D<0?Vn(H):H[0],_e=D<0==(ce.level==1),ke=_e?"after":"before",Ue;if(ce.level>0||g.doc.direction=="rtl"){var mt=rl(g,E);Ue=D<0?E.text.length-1:0;var Bt=pl(g,mt,Ue).top;Ue=Yt(function(tn){return pl(g,mt,tn).top==Bt},D<0==(ce.level==1)?ce.from:ce.to-1,Ue),ke=="before"&&(Ue=Hl(E,Ue,1))}else Ue=D<0?ce.to:ce.from;return new fn(S,Ue,ke)}}return new fn(S,D<0?E.text.length:0,D<0?"before":"after")}function FA(u,g,E,S){var D=ve(g,u.doc.direction);if(!D)return pA(g,E,S);E.ch>=g.text.length?(E.ch=g.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var H=Xe(D,E.ch,E.sticky),ce=D[H];if(u.doc.direction=="ltr"&&ce.level%2==0&&(S>0?ce.to>E.ch:ce.from<E.ch))return pA(g,E,S);var _e=function(Hn,br){return Hl(g,Hn instanceof fn?Hn.ch:Hn,br)},ke,Ue=function(Hn){return u.options.lineWrapping?(ke=ke||rl(u,g),es(u,g,ke,Hn)):{begin:0,end:g.text.length}},mt=Ue(E.sticky=="before"?_e(E,-1):E.ch);if(u.doc.direction=="rtl"||ce.level==1){var Bt=ce.level==1==S<0,tn=_e(E,Bt?1:-1);if(tn!=null&&(Bt?tn<=ce.to&&tn<=mt.end:tn>=ce.from&&tn>=mt.begin)){var qt=Bt?"before":"after";return new fn(E.line,tn,qt)}}var xn=function(Hn,br,fr){for(var Pr=function(fo,_a){return _a?new fn(E.line,_e(fo,1),"before"):new fn(E.line,fo,"after")};Hn>=0&&Hn<D.length;Hn+=br){var Jr=D[Hn],zr=br>0==(Jr.level!=1),eo=zr?fr.begin:_e(fr.end,-1);if(Jr.from<=eo&&eo<Jr.to||(eo=zr?Jr.from:_e(Jr.to,-1),fr.begin<=eo&&eo<fr.end))return Pr(eo,zr)}},Fn=xn(H+S,S,mt);if(Fn)return Fn;var Kn=S>0?mt.end:_e(mt.begin,-1);return Kn!=null&&!(S>0&&Kn==g.text.length)&&(Fn=xn(S>0?0:D.length-1,S,Ue(Kn)),Fn)?Fn:null}var au={selectAll:sl,singleSelection:function(u){return u.setSelection(u.getCursor("anchor"),u.getCursor("head"),Et)},killLine:function(u){return Vl(u,function(g){if(g.empty()){var E=Er(u.doc,g.head.line).text.length;return g.head.ch==E&&g.head.line<u.lastLine()?{from:g.head,to:fn(g.head.line+1,0)}:{from:g.head,to:fn(g.head.line,E)}}else return{from:g.from(),to:g.to()}})},deleteLine:function(u){return Vl(u,function(g){return{from:fn(g.from().line,0),to:vi(u.doc,fn(g.to().line+1,0))}})},delLineLeft:function(u){return Vl(u,function(g){return{from:fn(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(u){return Vl(u,function(g){var E=u.charCoords(g.head,"div").top+5,S=u.coordsChar({left:0,top:E},"div");return{from:S,to:g.from()}})},delWrappedLineRight:function(u){return Vl(u,function(g){var E=u.charCoords(g.head,"div").top+5,S=u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:E},"div");return{from:g.from(),to:S}})},undo:function(u){return u.undo()},redo:function(u){return u.redo()},undoSelection:function(u){return u.undoSelection()},redoSelection:function(u){return u.redoSelection()},goDocStart:function(u){return u.extendSelection(fn(u.firstLine(),0))},goDocEnd:function(u){return u.extendSelection(fn(u.lastLine()))},goLineStart:function(u){return u.extendSelectionsBy(function(g){return Zl(u,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(u){return u.extendSelectionsBy(function(g){return ec(u,g.head)},{origin:"+move",bias:1})},goLineEnd:function(u){return u.extendSelectionsBy(function(g){return mA(u,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(u){return u.extendSelectionsBy(function(g){var E=u.cursorCoords(g.head,"div").top+5;return u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:E},"div")},Ut)},goLineLeft:function(u){return u.extendSelectionsBy(function(g){var E=u.cursorCoords(g.head,"div").top+5;return u.coordsChar({left:0,top:E},"div")},Ut)},goLineLeftSmart:function(u){return u.extendSelectionsBy(function(g){var E=u.cursorCoords(g.head,"div").top+5,S=u.coordsChar({left:0,top:E},"div");return S.ch<u.getLine(S.line).search(/\S/)?ec(u,g.head):S},Ut)},goLineUp:function(u){return u.moveV(-1,"line")},goLineDown:function(u){return u.moveV(1,"line")},goPageUp:function(u){return u.moveV(-1,"page")},goPageDown:function(u){return u.moveV(1,"page")},goCharLeft:function(u){return u.moveH(-1,"char")},goCharRight:function(u){return u.moveH(1,"char")},goColumnLeft:function(u){return u.moveH(-1,"column")},goColumnRight:function(u){return u.moveH(1,"column")},goWordLeft:function(u){return u.moveH(-1,"word")},goGroupRight:function(u){return u.moveH(1,"group")},goGroupLeft:function(u){return u.moveH(-1,"group")},goWordRight:function(u){return u.moveH(1,"word")},delCharBefore:function(u){return u.deleteH(-1,"codepoint")},delCharAfter:function(u){return u.deleteH(1,"char")},delWordBefore:function(u){return u.deleteH(-1,"word")},delWordAfter:function(u){return u.deleteH(1,"word")},delGroupBefore:function(u){return u.deleteH(-1,"group")},delGroupAfter:function(u){return u.deleteH(1,"group")},indentAuto:function(u){return u.indentSelection("smart")},indentMore:function(u){return u.indentSelection("add")},indentLess:function(u){return u.indentSelection("subtract")},insertTab:function(u){return u.replaceSelection("	")},insertSoftTab:function(u){for(var g=[],E=u.listSelections(),S=u.options.tabSize,D=0;D<E.length;D++){var H=E[D].from(),ce=Pe(u.getLine(H.line),H.ch,S);g.push(Vt(S-ce%S))}u.replaceSelections(g)},defaultTab:function(u){u.somethingSelected()?u.indentSelection("add"):u.execCommand("insertTab")},transposeChars:function(u){return Xs(u,function(){for(var g=u.listSelections(),E=[],S=0;S<g.length;S++)if(g[S].empty()){var D=g[S].head,H=Er(u.doc,D.line).text;if(H){if(D.ch==H.length&&(D=new fn(D.line,D.ch-1)),D.ch>0)D=new fn(D.line,D.ch+1),u.replaceRange(H.charAt(D.ch-1)+H.charAt(D.ch-2),fn(D.line,D.ch-2),D,"+transpose");else if(D.line>u.doc.first){var ce=Er(u.doc,D.line-1).text;ce&&(D=new fn(D.line,1),u.replaceRange(H.charAt(0)+u.doc.lineSeparator()+ce.charAt(ce.length-1),fn(D.line-1,ce.length-1),D,"+transpose"))}}E.push(new Mo(D,D))}u.setSelections(E)})},newlineAndIndent:function(u){return Xs(u,function(){for(var g=u.listSelections(),E=g.length-1;E>=0;E--)u.replaceRange(u.doc.lineSeparator(),g[E].anchor,g[E].head,"+input");g=u.listSelections();for(var S=0;S<g.length;S++)u.indentLine(g[S].from().line,null,!0);ms(u)})},openLine:function(u){return u.replaceSelection(`
`,"start")},toggleOverwrite:function(u){return u.toggleOverwrite()}};function Zl(u,g){var E=Er(u.doc,g),S=Rr(E);return S!=E&&(g=qe(S)),Ou(!0,u,S,g,1)}function mA(u,g){var E=Er(u.doc,g),S=ni(E);return S!=E&&(g=qe(S)),Ou(!0,u,E,g,-1)}function ec(u,g){var E=Zl(u,g.line),S=Er(u.doc,E.line),D=ve(S,u.doc.direction);if(!D||D[0].level==0){var H=Math.max(E.ch,S.text.search(/\S/)),ce=g.line==E.line&&g.ch<=H&&g.ch;return fn(E.line,ce?0:H,E.sticky)}return E}function Xl(u,g,E){if(typeof g=="string"&&(g=au[g],!g))return!1;u.display.input.ensurePolled();var S=u.display.shift,D=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),E&&(u.display.shift=!1),D=g(u)!=yt}finally{u.display.shift=S,u.state.suppressEdits=!1}return D}function jc(u,g,E){for(var S=0;S<u.state.keyMaps.length;S++){var D=ji(g,u.state.keyMaps[S],E,u);if(D)return D}return u.options.extraKeys&&ji(g,u.options.extraKeys,E,u)||ji(g,u.options.keyMap,E,u)}var ka=new Re;function Qs(u,g,E,S){var D=u.state.keySeq;if(D){if(aa(g))return"handled";if(/\'$/.test(g)?u.state.keySeq=null:ka.set(50,function(){u.state.keySeq==D&&(u.state.keySeq=null,u.display.input.reset())}),Pl(u,D+" "+g,E,S))return!0}return Pl(u,g,E,S)}function Pl(u,g,E,S){var D=jc(u,g,S);return D=="multi"&&(u.state.keySeq=g),D=="handled"&&Es(u,"keyHandled",u,g,E),(D=="handled"||D=="multi")&&(nn(E),uA(u)),!!D}function ys(u,g){var E=Ca(g,!0);return E?g.shiftKey&&!u.state.keySeq?Qs(u,"Shift-"+E,g,function(S){return Xl(u,S,!0)})||Qs(u,E,g,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return Xl(u,S)}):Qs(u,E,g,function(S){return Xl(u,S)}):!1}function Cf(u,g,E){return Qs(u,"'"+E+"'",g,function(S){return Xl(u,S,!0)})}var Bd=null;function Od(u){var g=this;if(!(u.target&&u.target!=g.display.input.getField())&&(g.curOp.focus=nt(Dt(g)),!ct(g,u))){f&&C<11&&u.keyCode==27&&(u.returnValue=!1);var E=u.keyCode;g.display.shift=E==16||u.shiftKey;var S=ys(g,u);U&&(Bd=S?E:null,!S&&E==88&&!ui&&(V?u.metaKey:u.ctrlKey)&&g.replaceSelection("",null,"cut")),i&&!V&&!S&&E==46&&u.shiftKey&&!u.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)&&gA(g)}}function gA(u){var g=u.display.lineDiv;Ge(g,"CodeMirror-crosshair");function E(S){(S.keyCode==18||!S.altKey)&&(Se(g,"CodeMirror-crosshair"),Te(document,"keyup",E),Te(document,"mouseover",E))}Ne(document,"keyup",E),Ne(document,"mouseover",E)}function LA(u){u.keyCode==16&&(this.doc.sel.shift=!1),ct(this,u)}function Wc(u){var g=this;if(!(u.target&&u.target!=g.display.input.getField())&&!(Gu(g.display,u)||ct(g,u)||u.ctrlKey&&!u.altKey||V&&u.metaKey)){var E=u.keyCode,S=u.charCode;if(U&&E==Bd){Bd=null,nn(u);return}if(!(U&&(!u.which||u.which<10)&&ys(g,u))){var D=String.fromCharCode(S??E);D!="\b"&&(Cf(g,u,D)||g.display.input.onKeyPress(u))}}}var Iu=400,yA=function(u,g,E){this.time=u,this.pos=g,this.button=E};yA.prototype.compare=function(u,g,E){return this.time+Iu>u&&gr(g,this.pos)==0&&E==this.button};var Pa,ta;function Th(u,g){var E=+new Date;return ta&&ta.compare(E,u,g)?(Pa=ta=null,"triple"):Pa&&Pa.compare(E,u,g)?(ta=new yA(E,u,g),Pa=null,"double"):(Pa=new yA(E,u,g),ta=null,"single")}function Tu(u){var g=this,E=g.display;if(!(ct(g,u)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=u.shiftKey,Gu(E,u)){x||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!kh(g,u)){var S=TA(g,u),D=or(u),H=S?Th(S,D):"single";Rt(g).focus(),D==1&&g.state.selectingText&&g.state.selectingText(u),!(S&&Id(g,D,S,H,u))&&(D==1?S?nd(g,S,H,u):Tr(u)==E.scroller&&nn(u):D==2?(S&&ri(g.doc,S),setTimeout(function(){return E.input.focus()},20)):D==3&&(pe?g.display.input.onContextMenu(u):wh(g)))}}}function Id(u,g,E,S,D){var H="Click";return S=="double"?H="Double"+H:S=="triple"&&(H="Triple"+H),H=(g==1?"Left":g==2?"Middle":"Right")+H,Qs(u,Ta(H,D),D,function(ce){if(typeof ce=="string"&&(ce=au[ce]),!ce)return!1;var _e=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),_e=ce(u,E)!=yt}finally{u.state.suppressEdits=!1}return _e})}function td(u,g,E){var S=u.getOption("configureMouse"),D=S?S(u,g,E):{};if(D.unit==null){var H=ne?E.shiftKey&&E.metaKey:E.altKey;D.unit=H?"rectangle":g=="single"?"char":g=="double"?"word":"line"}return(D.extend==null||u.doc.extend)&&(D.extend=u.doc.extend||E.shiftKey),D.addNew==null&&(D.addNew=V?E.metaKey:E.ctrlKey),D.moveOnDrag==null&&(D.moveOnDrag=!(V?E.altKey:E.ctrlKey)),D}function nd(u,g,E,S){f?setTimeout(St(oh,u),0):u.curOp.focus=nt(Dt(u));var D=td(u,E,S),H=u.doc.sel,ce;u.options.dragDrop&&on&&!u.isReadOnly()&&E=="single"&&(ce=H.contains(g))>-1&&(gr((ce=H.ranges[ce]).from(),g)<0||g.xRel>0)&&(gr(ce.to(),g)>0||g.xRel<0)?Fp(u,S,g,D):dh(u,S,g,D)}function Fp(u,g,E,S){var D=u.display,H=!1,ce=Ro(u,function(Ue){x&&(D.scroller.draggable=!1),u.state.draggingText=!1,u.state.delayingBlurEvent&&(u.hasFocus()?u.state.delayingBlurEvent=!1:wh(u)),Te(D.wrapper.ownerDocument,"mouseup",ce),Te(D.wrapper.ownerDocument,"mousemove",_e),Te(D.scroller,"dragstart",ke),Te(D.scroller,"drop",ce),H||(nn(Ue),S.addNew||ri(u.doc,E,null,null,S.extend),x&&!N||f&&C==9?setTimeout(function(){D.wrapper.ownerDocument.body.focus({preventScroll:!0}),D.input.focus()},20):D.input.focus())}),_e=function(Ue){H=H||Math.abs(g.clientX-Ue.clientX)+Math.abs(g.clientY-Ue.clientY)>=10},ke=function(){return H=!0};x&&(D.scroller.draggable=!0),u.state.draggingText=ce,ce.copy=!S.moveOnDrag,Ne(D.wrapper.ownerDocument,"mouseup",ce),Ne(D.wrapper.ownerDocument,"mousemove",_e),Ne(D.scroller,"dragstart",ke),Ne(D.scroller,"drop",ce),u.state.delayingBlurEvent=!0,setTimeout(function(){return D.input.focus()},20),D.scroller.dragDrop&&D.scroller.dragDrop()}function ku(u,g,E){if(E=="char")return new Mo(g,g);if(E=="word")return u.findWordAt(g);if(E=="line")return new Mo(fn(g.line,0),vi(u.doc,fn(g.line+1,0)));var S=E(u,g);return new Mo(S.from,S.to)}function dh(u,g,E,S){f&&wh(u);var D=u.display,H=u.doc;nn(g);var ce,_e,ke=H.sel,Ue=ke.ranges;if(S.addNew&&!S.extend?(_e=H.sel.contains(E),_e>-1?ce=Ue[_e]:ce=new Mo(E,E)):(ce=H.sel.primary(),_e=H.sel.primIndex),S.unit=="rectangle")S.addNew||(ce=new Mo(E,E)),E=TA(u,g,!0,!0),_e=-1;else{var mt=ku(u,E,S.unit);S.extend?ce=vr(ce,mt.anchor,mt.head,S.extend):ce=mt}S.addNew?_e==-1?(_e=Ue.length,ss(H,Ol(u,Ue.concat([ce]),_e),{scroll:!1,origin:"*mouse"})):Ue.length>1&&Ue[_e].empty()&&S.unit=="char"&&!S.extend?(ss(H,Ol(u,Ue.slice(0,_e).concat(Ue.slice(_e+1)),0),{scroll:!1,origin:"*mouse"}),ke=H.sel):Tl(H,_e,ce,Zt):(_e=0,ss(H,new Xn([ce],0),Zt),ke=H.sel);var Bt=E;function tn(fr){if(gr(Bt,fr)!=0)if(Bt=fr,S.unit=="rectangle"){for(var Pr=[],Jr=u.options.tabSize,zr=Pe(Er(H,E.line).text,E.ch,Jr),eo=Pe(Er(H,fr.line).text,fr.ch,Jr),fo=Math.min(zr,eo),_a=Math.max(zr,eo),vs=Math.min(E.line,fr.line),Ys=Math.min(u.lastLine(),Math.max(E.line,fr.line));vs<=Ys;vs++){var qs=Er(H,vs).text,na=An(qs,fo,Jr);fo==_a?Pr.push(new Mo(fn(vs,na),fn(vs,na))):qs.length>na&&Pr.push(new Mo(fn(vs,na),fn(vs,An(qs,_a,Jr))))}Pr.length||Pr.push(new Mo(E,E)),ss(H,Ol(u,ke.ranges.slice(0,_e).concat(Pr),_e),{origin:"*mouse",scroll:!1}),u.scrollIntoView(fr)}else{var NA=ce,$a=ku(u,fr,S.unit),Ds=NA.anchor,cs;gr($a.anchor,Ds)>0?(cs=$a.head,Ds=fa(NA.from(),$a.anchor)):(cs=$a.anchor,Ds=fs(NA.to(),$a.head));var xi=ke.ranges.slice(0);xi[_e]=Td(u,new Mo(vi(H,Ds),cs)),ss(H,Ol(u,xi,_e),Zt)}}var qt=D.wrapper.getBoundingClientRect(),xn=0;function Fn(fr){var Pr=++xn,Jr=TA(u,fr,!0,S.unit=="rectangle");if(Jr)if(gr(Jr,Bt)!=0){u.curOp.focus=nt(Dt(u)),tn(Jr);var zr=kA(D,H);(Jr.line>=zr.to||Jr.line<zr.from)&&setTimeout(Ro(u,function(){xn==Pr&&Fn(fr)}),150)}else{var eo=fr.clientY<qt.top?-20:fr.clientY>qt.bottom?20:0;eo&&setTimeout(Ro(u,function(){xn==Pr&&(D.scroller.scrollTop+=eo,Fn(fr))}),50)}}function Kn(fr){u.state.selectingText=!1,xn=1/0,fr&&(nn(fr),D.input.focus()),Te(D.wrapper.ownerDocument,"mousemove",Hn),Te(D.wrapper.ownerDocument,"mouseup",br),H.history.lastSelOrigin=null}var Hn=Ro(u,function(fr){fr.buttons===0||!or(fr)?Kn(fr):Fn(fr)}),br=Ro(u,Kn);u.state.selectingText=br,Ne(D.wrapper.ownerDocument,"mousemove",Hn),Ne(D.wrapper.ownerDocument,"mouseup",br)}function Td(u,g){var E=g.anchor,S=g.head,D=Er(u.doc,E.line);if(gr(E,S)==0&&E.sticky==S.sticky)return g;var H=ve(D);if(!H)return g;var ce=Xe(H,E.ch,E.sticky),_e=H[ce];if(_e.from!=E.ch&&_e.to!=E.ch)return g;var ke=ce+(_e.from==E.ch==(_e.level!=1)?0:1);if(ke==0||ke==H.length)return g;var Ue;if(S.line!=E.line)Ue=(S.line-E.line)*(u.doc.direction=="ltr"?1:-1)>0;else{var mt=Xe(H,S.ch,S.sticky),Bt=mt-ce||(S.ch-E.ch)*(_e.level==1?-1:1);mt==ke-1||mt==ke?Ue=Bt<0:Ue=Bt>0}var tn=H[ke+(Ue?-1:0)],qt=Ue==(tn.level==1),xn=qt?tn.from:tn.to,Fn=qt?"after":"before";return E.ch==xn&&E.sticky==Fn?g:new Mo(new fn(E.line,xn,Fn),S)}function gm(u,g,E,S){var D,H;if(g.touches)D=g.touches[0].clientX,H=g.touches[0].clientY;else try{D=g.clientX,H=g.clientY}catch{return!1}if(D>=Math.floor(u.display.gutters.getBoundingClientRect().right))return!1;S&&nn(g);var ce=u.display,_e=ce.lineDiv.getBoundingClientRect();if(H>_e.bottom||!jt(u,E))return Rn(g);H-=_e.top-ce.viewOffset;for(var ke=0;ke<u.display.gutterSpecs.length;++ke){var Ue=ce.gutters.childNodes[ke];if(Ue&&Ue.getBoundingClientRect().right>=D){var mt=xt(u.doc,H),Bt=u.display.gutterSpecs[ke];return lt(u,E,u,mt,Bt.className,g),Rn(g)}}}function kh(u,g){return gm(u,g,"gutterClick",!0)}function _f(u,g){Gu(u.display,g)||Vf(u,g)||ct(u,g,"contextmenu")||pe||u.display.input.onContextMenu(g)}function Vf(u,g){return jt(u,"gutterContextMenu")?gm(u,g,"gutterContextMenu",!1):!1}function Lp(u){u.display.wrapper.className=u.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+u.options.theme.replace(/(^|\s)\s*/g," cm-s-"),rh(u)}var rd={toString:function(){return"CodeMirror.Init"}},kd={},Jl={};function Rl(u){var g=u.optionHandlers;function E(S,D,H,ce){u.defaults[S]=D,H&&(g[S]=ce?function(_e,ke,Ue){Ue!=rd&&H(_e,ke,Ue)}:H)}u.defineOption=E,u.Init=rd,E("value","",function(S,D){return S.setValue(D)},!0),E("mode",null,function(S,D){S.doc.modeOption=D,yf(S)},!0),E("indentUnit",2,yf,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(S){Vu(S),rh(S),Wa(S)},!0),E("lineSeparator",null,function(S,D){if(S.doc.lineSep=D,!!D){var H=[],ce=S.doc.first;S.doc.iter(function(ke){for(var Ue=0;;){var mt=ke.text.indexOf(D,Ue);if(mt==-1)break;Ue=mt+D.length,H.push(fn(ce,mt))}ce++});for(var _e=H.length-1;_e>=0;_e--)v(S.doc,D,H[_e],fn(H[_e].line,H[_e].ch+D.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,D,H){S.state.specialChars=new RegExp(D.source+(D.test("	")?"":"|	"),"g"),H!=rd&&S.refresh()}),E("specialCharPlaceholder",mu,function(S){return S.refresh()},!0),E("electricChars",!0),E("inputStyle",te?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(S,D){return S.getInputField().spellcheck=D},!0),E("autocorrect",!1,function(S,D){return S.getInputField().autocorrect=D},!0),E("autocapitalize",!1,function(S,D){return S.getInputField().autocapitalize=D},!0),E("rtlMoveVisually",!G),E("wholeLineUpdateBefore",!0),E("theme","default",function(S){Lp(S),Yl(S)},!0),E("keyMap","default",function(S,D,H){var ce=ao(D),_e=H!=rd&&ao(H);_e&&_e.detach&&_e.detach(S,ce),ce.attach&&ce.attach(S,_e||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Up,!0),E("gutters",[],function(S,D){S.display.gutterSpecs=Js(D,S.options.lineNumbers),Yl(S)},!0),E("fixedGutter",!0,function(S,D){S.display.gutters.style.left=D?Po(S.display)+"px":"0",S.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(S){return Mu(S)},!0),E("scrollbarStyle","native",function(S){Yu(S),Mu(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),E("lineNumbers",!1,function(S,D){S.display.gutterSpecs=Js(S.options.gutters,D),Yl(S)},!0),E("firstLineNumber",1,Yl,!0),E("lineNumberFormatter",function(S){return S},Yl,!0),E("showCursorWhenSelecting",!1,ml,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(S,D){D=="nocursor"&&(us(S),S.display.input.blur()),S.display.input.readOnlyChanged(D)}),E("screenReaderLabel",null,function(S,D){D=D===""?null:D,S.display.input.screenReaderLabelChanged(D)}),E("disableInput",!1,function(S,D){D||S.display.input.reset()},!0),E("dragDrop",!0,ym),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,ml,!0),E("singleCursorHeightPerLine",!0,ml,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,Vu,!0),E("addModeClass",!1,Vu,!0),E("pollInterval",100),E("undoDepth",200,function(S,D){return S.doc.history.undoDepth=D}),E("historyEventDelay",1250),E("viewportMargin",10,function(S){return S.refresh()},!0),E("maxHighlightLength",1e4,Vu,!0),E("moveInputWithCursor",!0,function(S,D){D||S.display.input.resetPosition()}),E("tabindex",null,function(S,D){return S.display.input.getField().tabIndex=D||""}),E("autofocus",null),E("direction","ltr",function(S,D){return S.doc.setDirection(D)},!0),E("phrases",null)}function ym(u,g,E){var S=E&&E!=rd;if(!g!=!S){var D=u.display.dragFunctions,H=g?Ne:Te;H(u.display.scroller,"dragstart",D.start),H(u.display.scroller,"dragenter",D.enter),H(u.display.scroller,"dragover",D.over),H(u.display.scroller,"dragleave",D.leave),H(u.display.scroller,"drop",D.drop)}}function Up(u){u.options.lineWrapping?(Ge(u.display.wrapper,"CodeMirror-wrap"),u.display.sizer.style.minWidth="",u.display.sizerWidth=null):(Se(u.display.wrapper,"CodeMirror-wrap"),Ns(u)),vu(u),Wa(u),rh(u),setTimeout(function(){return Mu(u)},100)}function wo(u,g){var E=this;if(!(this instanceof wo))return new wo(u,g);this.options=g=g?Ke(g):{},Ke(kd,g,!1);var S=g.value;typeof S=="string"?S=new Kt(S,g.mode,null,g.lineSeparator,g.direction):g.mode&&(S.modeOption=g.mode),this.doc=S;var D=new wo.inputStyles[g.inputStyle](this),H=this.display=new gf(u,S,D,g);H.wrapper.CodeMirror=this,Lp(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Yu(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Re,keySeq:null,specialChars:null},g.autofocus&&!te&&H.input.focus(),f&&C<11&&setTimeout(function(){return E.display.input.reset(!0)},20),vm(this),cr(),mc(this),this.curOp.forceUpdate=!0,gs(this,S),g.autofocus&&!te||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&Sd(E)},20):us(this);for(var ce in Jl)Jl.hasOwnProperty(ce)&&Jl[ce](this,g[ce],rd);uh(this),g.finishInit&&g.finishInit(this);for(var _e=0;_e<Ph.length;++_e)Ph[_e](this);Ql(this),x&&g.lineWrapping&&getComputedStyle(H.lineDiv).textRendering=="optimizelegibility"&&(H.lineDiv.style.textRendering="auto")}wo.defaults=kd,wo.optionHandlers=Jl;function vm(u){var g=u.display;Ne(g.scroller,"mousedown",Ro(u,Tu)),f&&C<11?Ne(g.scroller,"dblclick",Ro(u,function(ke){if(!ct(u,ke)){var Ue=TA(u,ke);if(!(!Ue||kh(u,ke)||Gu(u.display,ke))){nn(ke);var mt=u.findWordAt(Ue);ri(u.doc,mt.anchor,mt.head)}}})):Ne(g.scroller,"dblclick",function(ke){return ct(u,ke)||nn(ke)}),Ne(g.scroller,"contextmenu",function(ke){return _f(u,ke)}),Ne(g.input.getField(),"contextmenu",function(ke){g.scroller.contains(ke.target)||_f(u,ke)});var E,S={end:0};function D(){g.activeTouch&&(E=setTimeout(function(){return g.activeTouch=null},1e3),S=g.activeTouch,S.end=+new Date)}function H(ke){if(ke.touches.length!=1)return!1;var Ue=ke.touches[0];return Ue.radiusX<=1&&Ue.radiusY<=1}function ce(ke,Ue){if(Ue.left==null)return!0;var mt=Ue.left-ke.left,Bt=Ue.top-ke.top;return mt*mt+Bt*Bt>20*20}Ne(g.scroller,"touchstart",function(ke){if(!ct(u,ke)&&!H(ke)&&!kh(u,ke)){g.input.ensurePolled(),clearTimeout(E);var Ue=+new Date;g.activeTouch={start:Ue,moved:!1,prev:Ue-S.end<=300?S:null},ke.touches.length==1&&(g.activeTouch.left=ke.touches[0].pageX,g.activeTouch.top=ke.touches[0].pageY)}}),Ne(g.scroller,"touchmove",function(){g.activeTouch&&(g.activeTouch.moved=!0)}),Ne(g.scroller,"touchend",function(ke){var Ue=g.activeTouch;if(Ue&&!Gu(g,ke)&&Ue.left!=null&&!Ue.moved&&new Date-Ue.start<300){var mt=u.coordsChar(g.activeTouch,"page"),Bt;!Ue.prev||ce(Ue,Ue.prev)?Bt=new Mo(mt,mt):!Ue.prev.prev||ce(Ue,Ue.prev.prev)?Bt=u.findWordAt(mt):Bt=new Mo(fn(mt.line,0),vi(u.doc,fn(mt.line+1,0))),u.setSelection(Bt.anchor,Bt.head),u.focus(),nn(ke)}D()}),Ne(g.scroller,"touchcancel",D),Ne(g.scroller,"scroll",function(){g.scroller.clientHeight&&(Qu(u,g.scroller.scrollTop),PA(u,g.scroller.scrollLeft,!0),lt(u,"scroll",u))}),Ne(g.scroller,"mousewheel",function(ke){return ql(u,ke)}),Ne(g.scroller,"DOMMouseScroll",function(ke){return ql(u,ke)}),Ne(g.wrapper,"scroll",function(){return g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),g.dragFunctions={enter:function(ke){ct(u,ke)||dr(ke)},over:function(ke){ct(u,ke)||(en(u,ke),dr(ke))},start:function(ke){return bn(u,ke)},drop:Ro(u,sn),leave:function(ke){ct(u,ke)||ln(u)}};var _e=g.input.getField();Ne(_e,"keyup",function(ke){return LA.call(u,ke)}),Ne(_e,"keydown",Ro(u,Od)),Ne(_e,"keypress",Ro(u,Wc)),Ne(_e,"focus",function(ke){return Sd(u,ke)}),Ne(_e,"blur",function(ke){return us(u,ke)})}var Ph=[];wo.defineInitHook=function(u){return Ph.push(u)};function fh(u,g,E,S){var D=u.doc,H;E==null&&(E="add"),E=="smart"&&(D.mode.indent?H=bi(u,g).state:E="prev");var ce=u.options.tabSize,_e=Er(D,g),ke=Pe(_e.text,null,ce);_e.stateAfter&&(_e.stateAfter=null);var Ue=_e.text.match(/^\s*/)[0],mt;if(!S&&!/\S/.test(_e.text))mt=0,E="not";else if(E=="smart"&&(mt=D.mode.indent(H,_e.text.slice(Ue.length),_e.text),mt==yt||mt>150)){if(!S)return;E="prev"}E=="prev"?g>D.first?mt=Pe(Er(D,g-1).text,null,ce):mt=0:E=="add"?mt=ke+u.options.indentUnit:E=="subtract"?mt=ke-u.options.indentUnit:typeof E=="number"&&(mt=ke+E),mt=Math.max(0,mt);var Bt="",tn=0;if(u.options.indentWithTabs)for(var qt=Math.floor(mt/ce);qt;--qt)tn+=ce,Bt+="	";if(tn<mt&&(Bt+=Vt(mt-tn)),Bt!=Ue)return v(D,Bt,fn(g,0),fn(g,Ue.length),"+input"),_e.stateAfter=null,!0;for(var xn=0;xn<D.sel.ranges.length;xn++){var Fn=D.sel.ranges[xn];if(Fn.head.line==g&&Fn.head.ch<Ue.length){var Kn=fn(g,Ue.length);Tl(D,xn,new Mo(Kn,Kn));break}}}var UA=null;function Pd(u){UA=u}function Hf(u,g,E,S,D){var H=u.doc;u.display.shift=!1,S||(S=H.sel);var ce=+new Date-200,_e=D=="paste"||u.state.pasteIncoming>ce,ke=wn(g),Ue=null;if(_e&&S.ranges.length>1)if(UA&&UA.text.join(`
`)==g){if(S.ranges.length%UA.text.length==0){Ue=[];for(var mt=0;mt<UA.text.length;mt++)Ue.push(H.splitLines(UA.text[mt]))}}else ke.length==S.ranges.length&&u.options.pasteLinesPerSelection&&(Ue=Pn(ke,function(Hn){return[Hn]}));for(var Bt=u.curOp.updateInput,tn=S.ranges.length-1;tn>=0;tn--){var qt=S.ranges[tn],xn=qt.from(),Fn=qt.to();qt.empty()&&(E&&E>0?xn=fn(xn.line,xn.ch-E):u.state.overwrite&&!_e?Fn=fn(Fn.line,Math.min(Er(H,Fn.line).text.length,Fn.ch+Vn(ke).length)):_e&&UA&&UA.lineWise&&UA.text.join(`
`)==ke.join(`
`)&&(xn=Fn=fn(xn.line,0)));var Kn={from:xn,to:Fn,text:Ue?Ue[tn%Ue.length]:ke,origin:D||(_e?"paste":u.state.cutIncoming>ce?"cut":"+input")};Gc(u.doc,Kn),Es(u,"inputRead",u,Kn)}g&&!_e&&bf(u,g),ms(u),u.curOp.updateInput<2&&(u.curOp.updateInput=Bt),u.curOp.typing=!0,u.state.pasteIncoming=u.state.cutIncoming=-1}function Qc(u,g){var E=u.clipboardData&&u.clipboardData.getData("Text");if(E)return u.preventDefault(),!g.isReadOnly()&&!g.options.disableInput&&g.hasFocus()&&Xs(g,function(){return Hf(g,E,0,null,"paste")}),!0}function bf(u,g){if(!(!u.options.electricChars||!u.options.smartIndent))for(var E=u.doc.sel,S=E.ranges.length-1;S>=0;S--){var D=E.ranges[S];if(!(D.head.ch>100||S&&E.ranges[S-1].head.line==D.head.line)){var H=u.getModeAt(D.head),ce=!1;if(H.electricChars){for(var _e=0;_e<H.electricChars.length;_e++)if(g.indexOf(H.electricChars.charAt(_e))>-1){ce=fh(u,D.head.line,"smart");break}}else H.electricInput&&H.electricInput.test(Er(u.doc,D.head.line).text.slice(0,D.head.ch))&&(ce=fh(u,D.head.line,"smart"));ce&&Es(u,"electricInput",u,D.head.line)}}}function Rd(u){for(var g=[],E=[],S=0;S<u.doc.sel.ranges.length;S++){var D=u.doc.sel.ranges[S].head.line,H={anchor:fn(D,0),head:fn(D+1,0)};E.push(H),g.push(u.getRange(H.anchor,H.head))}return{text:g,ranges:E}}function Dd(u,g,E,S){u.setAttribute("autocorrect",E?"on":"off"),u.setAttribute("autocapitalize",S?"on":"off"),u.setAttribute("spellcheck",!!g)}function id(){var u=Me("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=Me("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?u.style.width="1000px":u.setAttribute("wrap","off"),$&&(u.style.border="1px solid black"),g}function Rh(u){var g=u.optionHandlers,E=u.helpers={};u.prototype={constructor:u,focus:function(){Rt(this).focus(),this.display.input.focus()},setOption:function(S,D){var H=this.options,ce=H[S];H[S]==D&&S!="mode"||(H[S]=D,g.hasOwnProperty(S)&&Ro(this,g[S])(this,D,ce),lt(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,D){this.state.keyMaps[D?"push":"unshift"](ao(S))},removeKeyMap:function(S){for(var D=this.state.keyMaps,H=0;H<D.length;++H)if(D[H]==S||D[H].name==S)return D.splice(H,1),!0},addOverlay:ai(function(S,D){var H=S.token?S:u.getMode(this.options,S);if(H.startState)throw new Error("Overlays may not be stateful.");Dn(this.state.overlays,{mode:H,modeSpec:S,opaque:D&&D.opaque,priority:D&&D.priority||0},function(ce){return ce.priority}),this.state.modeGen++,Wa(this)}),removeOverlay:ai(function(S){for(var D=this.state.overlays,H=0;H<D.length;++H){var ce=D[H].modeSpec;if(ce==S||typeof S=="string"&&ce.name==S){D.splice(H,1),this.state.modeGen++,Wa(this);return}}}),indentLine:ai(function(S,D,H){typeof D!="string"&&typeof D!="number"&&(D==null?D=this.options.smartIndent?"smart":"prev":D=D?"add":"subtract"),_n(this.doc,S)&&fh(this,S,D,H)}),indentSelection:ai(function(S){for(var D=this.doc.sel.ranges,H=-1,ce=0;ce<D.length;ce++){var _e=D[ce];if(_e.empty())_e.head.line>H&&(fh(this,_e.head.line,S,!0),H=_e.head.line,ce==this.doc.sel.primIndex&&ms(this));else{var ke=_e.from(),Ue=_e.to(),mt=Math.max(H,ke.line);H=Math.min(this.lastLine(),Ue.line-(Ue.ch?0:1))+1;for(var Bt=mt;Bt<H;++Bt)fh(this,Bt,S);var tn=this.doc.sel.ranges;ke.ch==0&&D.length==tn.length&&tn[ce].from().ch>0&&Tl(this.doc,ce,new Mo(ke,tn[ce].to()),Et)}}}),getTokenAt:function(S,D){return Wl(this,S,D)},getLineTokens:function(S,D){return Wl(this,fn(S),D,!0)},getTokenTypeAt:function(S){S=vi(this.doc,S);var D=Sa(this,Er(this.doc,S.line)),H=0,ce=(D.length-1)/2,_e=S.ch,ke;if(_e==0)ke=D[2];else for(;;){var Ue=H+ce>>1;if((Ue?D[Ue*2-1]:0)>=_e)ce=Ue;else if(D[Ue*2+1]<_e)H=Ue+1;else{ke=D[Ue*2+2];break}}var mt=ke?ke.indexOf("overlay "):-1;return mt<0?ke:mt==0?null:ke.slice(0,mt-1)},getModeAt:function(S){var D=this.doc.mode;return D.innerMode?u.innerMode(D,this.getTokenAt(S).state).mode:D},getHelper:function(S,D){return this.getHelpers(S,D)[0]},getHelpers:function(S,D){var H=[];if(!E.hasOwnProperty(D))return H;var ce=E[D],_e=this.getModeAt(S);if(typeof _e[D]=="string")ce[_e[D]]&&H.push(ce[_e[D]]);else if(_e[D])for(var ke=0;ke<_e[D].length;ke++){var Ue=ce[_e[D][ke]];Ue&&H.push(Ue)}else _e.helperType&&ce[_e.helperType]?H.push(ce[_e.helperType]):ce[_e.name]&&H.push(ce[_e.name]);for(var mt=0;mt<ce._global.length;mt++){var Bt=ce._global[mt];Bt.pred(_e,this)&&Ye(H,Bt.val)==-1&&H.push(Bt.val)}return H},getStateAfter:function(S,D){var H=this.doc;return S=iA(H,S??H.first+H.size-1),bi(this,S+1,D).state},cursorCoords:function(S,D){var H,ce=this.doc.sel.primary();return S==null?H=ce.head:typeof S=="object"?H=vi(this.doc,S):H=S?ce.from():ce.to(),dn(this,H,D||"page")},charCoords:function(S,D){return In(this,vi(this.doc,S),D||"page")},coordsChar:function(S,D){return S=rn(this,S,D||"page"),Go(this,S.left,S.top)},lineAtHeight:function(S,D){return S=rn(this,{top:S,left:0},D||"page").top,xt(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,D,H){var ce=!1,_e;if(typeof S=="number"){var ke=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>ke&&(S=ke,ce=!0),_e=Er(this.doc,S)}else _e=S;return Wu(this,_e,{top:0,left:0},D||"page",H||ce).top+(ce?this.doc.height-Ki(_e):0)},defaultTextHeight:function(){return ja(this.display)},defaultCharWidth:function(){return ga(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,D,H,ce,_e){var ke=this.display;S=dn(this,vi(this.doc,S));var Ue=S.bottom,mt=S.left;if(D.style.position="absolute",D.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(D),ke.sizer.appendChild(D),ce=="over")Ue=S.top;else if(ce=="above"||ce=="near"){var Bt=Math.max(ke.wrapper.clientHeight,this.doc.height),tn=Math.max(ke.sizer.clientWidth,ke.lineSpace.clientWidth);(ce=="above"||S.bottom+D.offsetHeight>Bt)&&S.top>D.offsetHeight?Ue=S.top-D.offsetHeight:S.bottom+D.offsetHeight<=Bt&&(Ue=S.bottom),mt+D.offsetWidth>tn&&(mt=tn-D.offsetWidth)}D.style.top=Ue+"px",D.style.left=D.style.right="",_e=="right"?(mt=ke.sizer.clientWidth-D.offsetWidth,D.style.right="0px"):(_e=="left"?mt=0:_e=="middle"&&(mt=(ke.sizer.clientWidth-D.offsetWidth)/2),D.style.left=mt+"px"),H&&sh(this,{left:mt,top:Ue,right:mt+D.offsetWidth,bottom:Ue+D.offsetHeight})},triggerOnKeyDown:ai(Od),triggerOnKeyPress:ai(Wc),triggerOnKeyUp:LA,triggerOnMouseDown:ai(Tu),execCommand:function(S){if(au.hasOwnProperty(S))return au[S].call(null,this)},triggerElectric:ai(function(S){bf(this,S)}),findPosH:function(S,D,H,ce){var _e=1;D<0&&(_e=-1,D=-D);for(var ke=vi(this.doc,S),Ue=0;Ue<D&&(ke=Mi(this.doc,ke,_e,H,ce),!ke.hitSide);++Ue);return ke},moveH:ai(function(S,D){var H=this;this.extendSelectionsBy(function(ce){return H.display.shift||H.doc.extend||ce.empty()?Mi(H.doc,ce.head,S,D,H.options.rtlMoveVisually):S<0?ce.from():ce.to()},Ut)}),deleteH:ai(function(S,D){var H=this.doc.sel,ce=this.doc;H.somethingSelected()?ce.replaceSelection("",null,"+delete"):Vl(this,function(_e){var ke=Mi(ce,_e.head,S,D,!1);return S<0?{from:ke,to:_e.head}:{from:_e.head,to:ke}})}),findPosV:function(S,D,H,ce){var _e=1,ke=ce;D<0&&(_e=-1,D=-D);for(var Ue=vi(this.doc,S),mt=0;mt<D;++mt){var Bt=dn(this,Ue,"div");if(ke==null?ke=Bt.left:Bt.left=ke,Ue=Kd(this,Bt,_e,H),Ue.hitSide)break}return Ue},moveV:ai(function(S,D){var H=this,ce=this.doc,_e=[],ke=!this.display.shift&&!ce.extend&&ce.sel.somethingSelected();if(ce.extendSelectionsBy(function(mt){if(ke)return S<0?mt.from():mt.to();var Bt=dn(H,mt.head,"div");mt.goalColumn!=null&&(Bt.left=mt.goalColumn),_e.push(Bt.left);var tn=Kd(H,Bt,S,D);return D=="page"&&mt==ce.sel.primary()&&bu(H,In(H,tn,"div").top-Bt.top),tn},Ut),_e.length)for(var Ue=0;Ue<ce.sel.ranges.length;Ue++)ce.sel.ranges[Ue].goalColumn=_e[Ue]}),findWordAt:function(S){var D=this.doc,H=Er(D,S.line).text,ce=S.ch,_e=S.ch;if(H){var ke=this.getHelper(S,"wordChars");(S.sticky=="before"||_e==H.length)&&ce?--ce:++_e;for(var Ue=H.charAt(ce),mt=We(Ue,ke)?function(Bt){return We(Bt,ke)}:/\s/.test(Ue)?function(Bt){return/\s/.test(Bt)}:function(Bt){return!/\s/.test(Bt)&&!We(Bt)};ce>0&&mt(H.charAt(ce-1));)--ce;for(;_e<H.length&&mt(H.charAt(_e));)++_e}return new Mo(fn(S.line,ce),fn(S.line,_e))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ge(this.display.cursorDiv,"CodeMirror-overwrite"):Se(this.display.cursorDiv,"CodeMirror-overwrite"),lt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==nt(Dt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ai(function(S,D){ya(this,S,D)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-fl(this)-this.display.barHeight,width:S.scrollWidth-fl(this)-this.display.barWidth,clientHeight:Dc(this),clientWidth:Rc(this)}},scrollIntoView:ai(function(S,D){S==null?(S={from:this.doc.sel.primary().head,to:null},D==null&&(D=this.options.cursorScrollMargin)):typeof S=="number"?S={from:fn(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=D||0,S.from.line!=null?Ed(this,S):Sh(this,S.from,S.to,S.margin)}),setSize:ai(function(S,D){var H=this,ce=function(ke){return typeof ke=="number"||/^\d+$/.test(String(ke))?ke+"px":ke};S!=null&&(this.display.wrapper.style.width=ce(S)),D!=null&&(this.display.wrapper.style.height=ce(D)),this.options.lineWrapping&&Md(this);var _e=this.display.viewFrom;this.doc.iter(_e,this.display.viewTo,function(ke){if(ke.widgets){for(var Ue=0;Ue<ke.widgets.length;Ue++)if(ke.widgets[Ue].noHScroll){Cu(H,_e,"widget");break}}++_e}),this.curOp.forceUpdate=!0,lt(this,"refresh",this)}),operation:function(S){return Xs(this,S)},startOperation:function(){return mc(this)},endOperation:function(){return Ql(this)},refresh:ai(function(){var S=this.display.cachedTextHeight;Wa(this),this.curOp.forceUpdate=!0,rh(this),ya(this,this.doc.scrollLeft,this.doc.scrollTop),Bl(this.display),(S==null||Math.abs(S-ja(this.display))>.5||this.options.lineWrapping)&&vu(this),lt(this,"refresh",this)}),swapDoc:ai(function(S){var D=this.doc;return D.cm=null,this.state.selectingText&&this.state.selectingText(),gs(this,S),rh(this),this.display.input.reset(),ya(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,Es(this,"swapDoc",this,D),D}),phrase:function(S){var D=this.options.phrases;return D&&Object.prototype.hasOwnProperty.call(D,S)?D[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Gt(u),u.registerHelper=function(S,D,H){E.hasOwnProperty(S)||(E[S]=u[S]={_global:[]}),E[S][D]=H},u.registerGlobalHelper=function(S,D,H,ce){u.registerHelper(S,D,ce),E[S]._global.push({pred:H,val:ce})}}function Mi(u,g,E,S,D){var H=g,ce=E,_e=Er(u,g.line),ke=D&&u.direction=="rtl"?-E:E;function Ue(){var br=g.line+ke;return br<u.first||br>=u.first+u.size?!1:(g=new fn(br,g.ch,g.sticky),_e=Er(u,br))}function mt(br){var fr;if(S=="codepoint"){var Pr=_e.text.charCodeAt(g.ch+(E>0?0:-1));if(isNaN(Pr))fr=null;else{var Jr=E>0?Pr>=55296&&Pr<56320:Pr>=56320&&Pr<57343;fr=new fn(g.line,Math.max(0,Math.min(_e.text.length,g.ch+E*(Jr?2:1))),-E)}}else D?fr=FA(u.cm,_e,g,E):fr=pA(_e,g,E);if(fr==null)if(!br&&Ue())g=Ou(D,u.cm,_e,g.line,ke);else return!1;else g=fr;return!0}if(S=="char"||S=="codepoint")mt();else if(S=="column")mt(!0);else if(S=="word"||S=="group")for(var Bt=null,tn=S=="group",qt=u.cm&&u.cm.getHelper(g,"wordChars"),xn=!0;!(E<0&&!mt(!xn));xn=!1){var Fn=_e.text.charAt(g.ch)||`
`,Kn=We(Fn,qt)?"w":tn&&Fn==`
`?"n":!tn||/\s/.test(Fn)?null:"p";if(tn&&!xn&&!Kn&&(Kn="s"),Bt&&Bt!=Kn){E<0&&(E=1,mt(),g.sticky="after");break}if(Kn&&(Bt=Kn),E>0&&!mt(!xn))break}var Hn=Ju(u,g,H,ce,!0);return Qi(H,Hn)&&(Hn.hitSide=!0),Hn}function Kd(u,g,E,S){var D=u.doc,H=g.left,ce;if(S=="page"){var _e=Math.min(u.display.wrapper.clientHeight,Rt(u).innerHeight||D(u).documentElement.clientHeight),ke=Math.max(_e-.5*ja(u.display),3);ce=(E>0?g.bottom:g.top)+E*ke}else S=="line"&&(ce=E>0?g.bottom+3:g.top-3);for(var Ue;Ue=Go(u,H,ce),!!Ue.outside;){if(E<0?ce<=0:ce>=D.height){Ue.hitSide=!0;break}ce+=E*5}return Ue}var Wo=function(u){this.cm=u,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Re,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Wo.prototype.init=function(u){var g=this,E=this,S=E.cm,D=E.div=u.lineDiv;D.contentEditable=!0,Dd(D,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function H(_e){for(var ke=_e.target;ke;ke=ke.parentNode){if(ke==D)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ke.className))break}return!1}Ne(D,"paste",function(_e){!H(_e)||ct(S,_e)||Qc(_e,S)||C<=11&&setTimeout(Ro(S,function(){return g.updateFromDOM()}),20)}),Ne(D,"compositionstart",function(_e){g.composing={data:_e.data,done:!1}}),Ne(D,"compositionupdate",function(_e){g.composing||(g.composing={data:_e.data,done:!1})}),Ne(D,"compositionend",function(_e){g.composing&&(_e.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),Ne(D,"touchstart",function(){return E.forceCompositionEnd()}),Ne(D,"input",function(){g.composing||g.readFromDOMSoon()});function ce(_e){if(!(!H(_e)||ct(S,_e))){if(S.somethingSelected())Pd({lineWise:!1,text:S.getSelections()}),_e.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var ke=Rd(S);Pd({lineWise:!0,text:ke.text}),_e.type=="cut"&&S.operation(function(){S.setSelections(ke.ranges,0,Et),S.replaceSelection("",null,"cut")})}else return;if(_e.clipboardData){_e.clipboardData.clearData();var Ue=UA.text.join(`
`);if(_e.clipboardData.setData("Text",Ue),_e.clipboardData.getData("Text")==Ue){_e.preventDefault();return}}var mt=id(),Bt=mt.firstChild;Dd(Bt),S.display.lineSpace.insertBefore(mt,S.display.lineSpace.firstChild),Bt.value=UA.text.join(`
`);var tn=nt(ut(D));$e(Bt),setTimeout(function(){S.display.lineSpace.removeChild(mt),tn.focus(),tn==D&&E.showPrimarySelection()},50)}}Ne(D,"copy",ce),Ne(D,"cut",ce)},Wo.prototype.screenReaderLabelChanged=function(u){u?this.div.setAttribute("aria-label",u):this.div.removeAttribute("aria-label")},Wo.prototype.prepareSelection=function(){var u=Zi(this.cm,!1);return u.focus=nt(ut(this.div))==this.div,u},Wo.prototype.showSelection=function(u,g){!u||!this.cm.display.view.length||((u.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(u))},Wo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Wo.prototype.showPrimarySelection=function(){var u=this.getSelection(),g=this.cm,E=g.doc.sel.primary(),S=E.from(),D=E.to();if(g.display.viewTo==g.display.viewFrom||S.line>=g.display.viewTo||D.line<g.display.viewFrom){u.removeAllRanges();return}var H=vl(g,u.anchorNode,u.anchorOffset),ce=vl(g,u.focusNode,u.focusOffset);if(!(H&&!H.bad&&ce&&!ce.bad&&gr(fa(H,ce),S)==0&&gr(fs(H,ce),D)==0)){var _e=g.display.view,ke=S.line>=g.display.viewFrom&&tc(g,S)||{node:_e[0].measure.map[2],offset:0},Ue=D.line<g.display.viewTo&&tc(g,D);if(!Ue){var mt=_e[_e.length-1].measure,Bt=mt.maps?mt.maps[mt.maps.length-1]:mt.map;Ue={node:Bt[Bt.length-1],offset:Bt[Bt.length-2]-Bt[Bt.length-3]}}if(!ke||!Ue){u.removeAllRanges();return}var tn=u.rangeCount&&u.getRangeAt(0),qt;try{qt=Ct(ke.node,ke.offset,Ue.offset,Ue.node)}catch{}qt&&(!i&&g.state.focused?(u.collapse(ke.node,ke.offset),qt.collapsed||(u.removeAllRanges(),u.addRange(qt))):(u.removeAllRanges(),u.addRange(qt)),tn&&u.anchorNode==null?u.addRange(tn):i&&this.startGracePeriod()),this.rememberSelection()}},Wo.prototype.startGracePeriod=function(){var u=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){u.gracePeriod=!1,u.selectionChanged()&&u.cm.operation(function(){return u.cm.curOp.selectionChanged=!0})},20)},Wo.prototype.showMultipleSelections=function(u){je(this.cm.display.cursorDiv,u.cursors),je(this.cm.display.selectionDiv,u.selection)},Wo.prototype.rememberSelection=function(){var u=this.getSelection();this.lastAnchorNode=u.anchorNode,this.lastAnchorOffset=u.anchorOffset,this.lastFocusNode=u.focusNode,this.lastFocusOffset=u.focusOffset},Wo.prototype.selectionInEditor=function(){var u=this.getSelection();if(!u.rangeCount)return!1;var g=u.getRangeAt(0).commonAncestorContainer;return it(this.div,g)},Wo.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||nt(ut(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Wo.prototype.blur=function(){this.div.blur()},Wo.prototype.getField=function(){return this.div},Wo.prototype.supportsTouch=function(){return!0},Wo.prototype.receivedFocus=function(){var u=this,g=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):Xs(this.cm,function(){return g.cm.curOp.selectionChanged=!0});function E(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},Wo.prototype.selectionChanged=function(){var u=this.getSelection();return u.anchorNode!=this.lastAnchorNode||u.anchorOffset!=this.lastAnchorOffset||u.focusNode!=this.lastFocusNode||u.focusOffset!=this.lastFocusOffset},Wo.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var u=this.getSelection(),g=this.cm;if(re&&R&&this.cm.display.gutterSpecs.length&&zA(u.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=vl(g,u.anchorNode,u.anchorOffset),S=vl(g,u.focusNode,u.focusOffset);E&&S&&Xs(g,function(){ss(g.doc,qa(E,S),Et),(E.bad||S.bad)&&(g.curOp.selectionChanged=!0)})}}},Wo.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u=this.cm,g=u.display,E=u.doc.sel.primary(),S=E.from(),D=E.to();if(S.ch==0&&S.line>u.firstLine()&&(S=fn(S.line-1,Er(u.doc,S.line-1).length)),D.ch==Er(u.doc,D.line).text.length&&D.line<u.lastLine()&&(D=fn(D.line+1,0)),S.line<g.viewFrom||D.line>g.viewTo-1)return!1;var H,ce,_e;S.line==g.viewFrom||(H=tu(u,S.line))==0?(ce=qe(g.view[0].line),_e=g.view[0].node):(ce=qe(g.view[H].line),_e=g.view[H-1].node.nextSibling);var ke=tu(u,D.line),Ue,mt;if(ke==g.view.length-1?(Ue=g.viewTo-1,mt=g.lineDiv.lastChild):(Ue=qe(g.view[ke+1].line)-1,mt=g.view[ke+1].node.previousSibling),!_e)return!1;for(var Bt=u.doc.splitLines(zp(u,_e,mt,ce,Ue)),tn=wa(u.doc,fn(ce,0),fn(Ue,Er(u.doc,Ue).text.length));Bt.length>1&&tn.length>1;)if(Vn(Bt)==Vn(tn))Bt.pop(),tn.pop(),Ue--;else if(Bt[0]==tn[0])Bt.shift(),tn.shift(),ce++;else break;for(var qt=0,xn=0,Fn=Bt[0],Kn=tn[0],Hn=Math.min(Fn.length,Kn.length);qt<Hn&&Fn.charCodeAt(qt)==Kn.charCodeAt(qt);)++qt;for(var br=Vn(Bt),fr=Vn(tn),Pr=Math.min(br.length-(Bt.length==1?qt:0),fr.length-(tn.length==1?qt:0));xn<Pr&&br.charCodeAt(br.length-xn-1)==fr.charCodeAt(fr.length-xn-1);)++xn;if(Bt.length==1&&tn.length==1&&ce==S.line)for(;qt&&qt>S.ch&&br.charCodeAt(br.length-xn-1)==fr.charCodeAt(fr.length-xn-1);)qt--,xn++;Bt[Bt.length-1]=br.slice(0,br.length-xn).replace(/^\u200b+/,""),Bt[0]=Bt[0].slice(qt).replace(/\u200b+$/,"");var Jr=fn(ce,qt),zr=fn(Ue,tn.length?Vn(tn).length-xn:0);if(Bt.length>1||Bt[0]||gr(Jr,zr))return v(u.doc,Bt,Jr,zr,"+input"),!0},Wo.prototype.ensurePolled=function(){this.forceCompositionEnd()},Wo.prototype.reset=function(){this.forceCompositionEnd()},Wo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Wo.prototype.readFromDOMSoon=function(){var u=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(u.readDOMTimeout=null,u.composing)if(u.composing.done)u.composing=null;else return;u.updateFromDOM()},80))},Wo.prototype.updateFromDOM=function(){var u=this;(this.cm.isReadOnly()||!this.pollContent())&&Xs(this.cm,function(){return Wa(u.cm)})},Wo.prototype.setUneditable=function(u){u.contentEditable="false"},Wo.prototype.onKeyPress=function(u){u.charCode==0||this.composing||(u.preventDefault(),this.cm.isReadOnly()||Ro(this.cm,Hf)(this.cm,String.fromCharCode(u.charCode==null?u.keyCode:u.charCode),0))},Wo.prototype.readOnlyChanged=function(u){this.div.contentEditable=String(u!="nocursor")},Wo.prototype.onContextMenu=function(){},Wo.prototype.resetPosition=function(){},Wo.prototype.needsContentAttribute=!0;function tc(u,g){var E=xd(u,g.line);if(!E||E.hidden)return null;var S=Er(u.doc,g.line),D=qf(E,S,g.line),H=ve(S,u.doc.direction),ce="left";if(H){var _e=Xe(H,g.ch);ce=_e%2?"right":"left"}var ke=xh(D.map,g.ch,ce);return ke.offset=ke.collapse=="right"?ke.end:ke.start,ke}function zA(u){for(var g=u;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}function vA(u,g){return g&&(u.bad=!0),u}function zp(u,g,E,S,D){var H="",ce=!1,_e=u.doc.lineSeparator(),ke=!1;function Ue(qt){return function(xn){return xn.id==qt}}function mt(){ce&&(H+=_e,ke&&(H+=_e),ce=ke=!1)}function Bt(qt){qt&&(mt(),H+=qt)}function tn(qt){if(qt.nodeType==1){var xn=qt.getAttribute("cm-text");if(xn){Bt(xn);return}var Fn=qt.getAttribute("cm-marker"),Kn;if(Fn){var Hn=u.findMarks(fn(S,0),fn(D+1,0),Ue(+Fn));Hn.length&&(Kn=Hn[0].find(0))&&Bt(wa(u.doc,Kn.from,Kn.to).join(_e));return}if(qt.getAttribute("contenteditable")=="false")return;var br=/^(pre|div|p|li|table|br)$/i.test(qt.nodeName);if(!/^br$/i.test(qt.nodeName)&&qt.textContent.length==0)return;br&&mt();for(var fr=0;fr<qt.childNodes.length;fr++)tn(qt.childNodes[fr]);/^(pre|p)$/i.test(qt.nodeName)&&(ke=!0),br&&(ce=!0)}else qt.nodeType==3&&Bt(qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;tn(g),g!=E;)g=g.nextSibling,ke=!1;return H}function vl(u,g,E){var S;if(g==u.display.lineDiv){if(S=u.display.lineDiv.childNodes[E],!S)return vA(u.clipPos(fn(u.display.viewTo-1)),!0);g=null,E=0}else for(S=g;;S=S.parentNode){if(!S||S==u.display.lineDiv)return null;if(S.parentNode&&S.parentNode==u.display.lineDiv)break}for(var D=0;D<u.display.view.length;D++){var H=u.display.view[D];if(H.node==S)return Np(H,g,E)}}function Np(u,g,E){var S=u.text.firstChild,D=!1;if(!g||!it(S,g))return vA(fn(qe(u.line),0),!0);if(g==S&&(D=!0,g=S.childNodes[E],E=0,!g)){var H=u.rest?Vn(u.rest):u.line;return vA(fn(qe(H),H.text.length),D)}var ce=g.nodeType==3?g:null,_e=g;for(!ce&&g.childNodes.length==1&&g.firstChild.nodeType==3&&(ce=g.firstChild,E&&(E=ce.nodeValue.length));_e.parentNode!=S;)_e=_e.parentNode;var ke=u.measure,Ue=ke.maps;function mt(Kn,Hn,br){for(var fr=-1;fr<(Ue?Ue.length:0);fr++)for(var Pr=fr<0?ke.map:Ue[fr],Jr=0;Jr<Pr.length;Jr+=3){var zr=Pr[Jr+2];if(zr==Kn||zr==Hn){var eo=qe(fr<0?u.line:u.rest[fr]),fo=Pr[Jr]+br;return(br<0||zr!=Kn)&&(fo=Pr[Jr+(br?1:0)]),fn(eo,fo)}}}var Bt=mt(ce,_e,E);if(Bt)return vA(Bt,D);for(var tn=_e.nextSibling,qt=ce?ce.nodeValue.length-E:0;tn;tn=tn.nextSibling){if(Bt=mt(tn,tn.firstChild,0),Bt)return vA(fn(Bt.line,Bt.ch-qt),D);qt+=tn.textContent.length}for(var xn=_e.previousSibling,Fn=E;xn;xn=xn.previousSibling){if(Bt=mt(xn,xn.firstChild,-1),Bt)return vA(fn(Bt.line,Bt.ch+Fn),D);Fn+=xn.textContent.length}}var Ra=function(u){this.cm=u,this.prevInput="",this.pollingFast=!1,this.polling=new Re,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ra.prototype.init=function(u){var g=this,E=this,S=this.cm;this.createField(u);var D=this.textarea;u.wrapper.insertBefore(this.wrapper,u.wrapper.firstChild),$&&(D.style.width="0px"),Ne(D,"input",function(){f&&C>=9&&g.hasSelection&&(g.hasSelection=null),E.poll()}),Ne(D,"paste",function(ce){ct(S,ce)||Qc(ce,S)||(S.state.pasteIncoming=+new Date,E.fastPoll())});function H(ce){if(!ct(S,ce)){if(S.somethingSelected())Pd({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var _e=Rd(S);Pd({lineWise:!0,text:_e.text}),ce.type=="cut"?S.setSelections(_e.ranges,null,Et):(E.prevInput="",D.value=_e.text.join(`
`),$e(D))}else return;ce.type=="cut"&&(S.state.cutIncoming=+new Date)}}Ne(D,"cut",H),Ne(D,"copy",H),Ne(u.scroller,"paste",function(ce){if(!(Gu(u,ce)||ct(S,ce))){if(!D.dispatchEvent){S.state.pasteIncoming=+new Date,E.focus();return}var _e=new Event("paste");_e.clipboardData=ce.clipboardData,D.dispatchEvent(_e)}}),Ne(u.lineSpace,"selectstart",function(ce){Gu(u,ce)||nn(ce)}),Ne(D,"compositionstart",function(){var ce=S.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:ce,range:S.markText(ce,S.getCursor("to"),{className:"CodeMirror-composing"})}}),Ne(D,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},Ra.prototype.createField=function(u){this.wrapper=id(),this.textarea=this.wrapper.firstChild;var g=this.cm.options;Dd(this.textarea,g.spellcheck,g.autocorrect,g.autocapitalize)},Ra.prototype.screenReaderLabelChanged=function(u){u?this.textarea.setAttribute("aria-label",u):this.textarea.removeAttribute("aria-label")},Ra.prototype.prepareSelection=function(){var u=this.cm,g=u.display,E=u.doc,S=Zi(u);if(u.options.moveInputWithCursor){var D=dn(u,E.sel.primary().head,"div"),H=g.wrapper.getBoundingClientRect(),ce=g.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,D.top+ce.top-H.top)),S.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,D.left+ce.left-H.left))}return S},Ra.prototype.showSelection=function(u){var g=this.cm,E=g.display;je(E.cursorDiv,u.cursors),je(E.selectionDiv,u.selection),u.teTop!=null&&(this.wrapper.style.top=u.teTop+"px",this.wrapper.style.left=u.teLeft+"px")},Ra.prototype.reset=function(u){if(!(this.contextMenuPending||this.composing&&u)){var g=this.cm;if(this.resetting=!0,g.somethingSelected()){this.prevInput="";var E=g.getSelection();this.textarea.value=E,g.state.focused&&$e(this.textarea),f&&C>=9&&(this.hasSelection=E)}else u||(this.prevInput=this.textarea.value="",f&&C>=9&&(this.hasSelection=null));this.resetting=!1}},Ra.prototype.getField=function(){return this.textarea},Ra.prototype.supportsTouch=function(){return!1},Ra.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!te||nt(ut(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Ra.prototype.blur=function(){this.textarea.blur()},Ra.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ra.prototype.receivedFocus=function(){this.slowPoll()},Ra.prototype.slowPoll=function(){var u=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){u.poll(),u.cm.state.focused&&u.slowPoll()})},Ra.prototype.fastPoll=function(){var u=!1,g=this;g.pollingFast=!0;function E(){var S=g.poll();!S&&!u?(u=!0,g.polling.set(60,E)):(g.pollingFast=!1,g.slowPoll())}g.polling.set(20,E)},Ra.prototype.poll=function(){var u=this,g=this.cm,E=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!g.state.focused||Dr(E)&&!S&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var D=E.value;if(D==S&&!g.somethingSelected())return!1;if(f&&C>=9&&this.hasSelection===D||V&&/[\uf700-\uf7ff]/.test(D))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var H=D.charCodeAt(0);if(H==8203&&!S&&(S="​"),H==8666)return this.reset(),this.cm.execCommand("undo")}for(var ce=0,_e=Math.min(S.length,D.length);ce<_e&&S.charCodeAt(ce)==D.charCodeAt(ce);)++ce;return Xs(g,function(){Hf(g,D.slice(ce),S.length-ce,null,u.composing?"*compose":null),D.length>1e3||D.indexOf(`
`)>-1?E.value=u.prevInput="":u.prevInput=D,u.composing&&(u.composing.range.clear(),u.composing.range=g.markText(u.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ra.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ra.prototype.onKeyPress=function(){f&&C>=9&&(this.hasSelection=null),this.fastPoll()},Ra.prototype.onContextMenu=function(u){var g=this,E=g.cm,S=E.display,D=g.textarea;g.contextMenuPending&&g.contextMenuPending();var H=TA(E,u),ce=S.scroller.scrollTop;if(!H||U)return;var _e=E.options.resetSelectionOnContextMenu;_e&&E.doc.sel.contains(H)==-1&&Ro(E,ss)(E.doc,qa(H),Et);var ke=D.style.cssText,Ue=g.wrapper.style.cssText,mt=g.wrapper.offsetParent.getBoundingClientRect();g.wrapper.style.cssText="position: static",D.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(u.clientY-mt.top-5)+"px; left: "+(u.clientX-mt.left-5)+`px;
      z-index: 1000; background: `+(f?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Bt;x&&(Bt=D.ownerDocument.defaultView.scrollY),S.input.focus(),x&&D.ownerDocument.defaultView.scrollTo(null,Bt),S.input.reset(),E.somethingSelected()||(D.value=g.prevInput=" "),g.contextMenuPending=qt,S.selForContextMenu=E.doc.sel,clearTimeout(S.detectingSelectAll);function tn(){if(D.selectionStart!=null){var Fn=E.somethingSelected(),Kn="​"+(Fn?D.value:"");D.value="⇚",D.value=Kn,g.prevInput=Fn?"":"​",D.selectionStart=1,D.selectionEnd=Kn.length,S.selForContextMenu=E.doc.sel}}function qt(){if(g.contextMenuPending==qt&&(g.contextMenuPending=!1,g.wrapper.style.cssText=Ue,D.style.cssText=ke,f&&C<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=ce),D.selectionStart!=null)){(!f||f&&C<9)&&tn();var Fn=0,Kn=function(){S.selForContextMenu==E.doc.sel&&D.selectionStart==0&&D.selectionEnd>0&&g.prevInput=="​"?Ro(E,sl)(E):Fn++<10?S.detectingSelectAll=setTimeout(Kn,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(Kn,200)}}if(f&&C>=9&&tn(),pe){dr(u);var xn=function(){Te(window,"mouseup",xn),setTimeout(qt,20)};Ne(window,"mouseup",xn)}else setTimeout(qt,50)},Ra.prototype.readOnlyChanged=function(u){u||this.reset(),this.textarea.disabled=u=="nocursor",this.textarea.readOnly=!!u},Ra.prototype.setUneditable=function(){},Ra.prototype.needsContentAttribute=!1;function Cm(u,g){if(g=g?Ke(g):{},g.value=u.value,!g.tabindex&&u.tabIndex&&(g.tabindex=u.tabIndex),!g.placeholder&&u.placeholder&&(g.placeholder=u.placeholder),g.autofocus==null){var E=nt(ut(u));g.autofocus=E==u||u.getAttribute("autofocus")!=null&&E==document.body}function S(){u.value=_e.getValue()}var D;if(u.form&&(Ne(u.form,"submit",S),!g.leaveSubmitMethodAlone)){var H=u.form;D=H.submit;try{var ce=H.submit=function(){S(),H.submit=D,H.submit(),H.submit=ce}}catch{}}g.finishInit=function(ke){ke.save=S,ke.getTextArea=function(){return u},ke.toTextArea=function(){ke.toTextArea=isNaN,S(),u.parentNode.removeChild(ke.getWrapperElement()),u.style.display="",u.form&&(Te(u.form,"submit",S),!g.leaveSubmitMethodAlone&&typeof u.form.submit=="function"&&(u.form.submit=D))}},u.style.display="none";var _e=wo(function(ke){return u.parentNode.insertBefore(ke,u.nextSibling)},g);return _e}function Zf(u){u.off=Te,u.on=Ne,u.wheelEventPixels=ou,u.Doc=Kt,u.splitLines=wn,u.countColumn=Pe,u.findColumn=An,u.isWordChar=Yn,u.Pass=yt,u.signal=lt,u.Line=Na,u.changeEnd=ea,u.scrollbarModel=bs,u.Pos=fn,u.cmpPos=gr,u.modes=As,u.mimeModes=qr,u.resolveMode=da,u.getMode=No,u.modeExtensions=zs,u.extendMode=hl,u.copyState=ci,u.startState=bo,u.innerMode=oa,u.commands=au,u.keyMap=jo,u.keyName=Ca,u.isModifierKey=aa,u.lookupKey=ji,u.normalizeKeyMap=ho,u.StringStream=lo,u.SharedTextMarker=dt,u.TextMarker=He,u.LineWidget=de,u.e_preventDefault=nn,u.e_stopPropagation=On,u.e_stop=dr,u.addClass=Ge,u.contains=it,u.rmClass=Se,u.keyNames=Hr}Rl(wo),Rh(wo);var CA="iter insert remove copy getEditor constructor".split(" ");for(var xf in Kt.prototype)Kt.prototype.hasOwnProperty(xf)&&Ye(CA,xf)<0&&(wo.prototype[xf]=function(u){return function(){return u.apply(this.doc,arguments)}}(Kt.prototype[xf]));return Gt(Kt),wo.inputStyles={textarea:Ra,contenteditable:Wo},wo.defineMode=function(u){!wo.defaults.mode&&u!="null"&&(wo.defaults.mode=u),_s.apply(this,arguments)},wo.defineMIME=La,wo.defineMode("null",function(){return{token:function(u){return u.skipToEnd()}}}),wo.defineMIME("text/plain","null"),wo.defineExtension=function(u,g){wo.prototype[u]=g},wo.defineDocExtension=function(u,g){Kt.prototype[u]=g},wo.fromTextArea=Cm,Zf(wo),wo.version="5.65.20",wo})}(l2)),l2.exports}var Xoe=g3();const bp=Gl(Xoe);var KT={exports:{}},FT;function Joe(){return FT||(FT=1,function(n,e){(function(t){t(g3())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,l=i.statementIndent,o=i.jsonld,f=i.json||o,C=i.trackScope!==!1,x=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,R=function(){function qe(Io){return{type:Io,style:"keyword"}}var xt=qe("keyword a"),_n=qe("keyword b"),jn=qe("keyword c"),fn=qe("keyword d"),gr=qe("operator"),Qi={type:"atom",style:"atom"};return{if:qe("if"),while:xt,with:xt,else:_n,do:_n,try:_n,finally:_n,return:fn,break:fn,continue:fn,new:qe("new"),delete:jn,void:jn,throw:jn,debugger:qe("debugger"),var:qe("var"),const:qe("var"),let:qe("var"),function:qe("function"),catch:qe("catch"),for:qe("for"),switch:qe("switch"),case:qe("case"),default:qe("default"),in:gr,typeof:gr,instanceof:gr,true:Qi,false:Qi,null:Qi,undefined:Qi,NaN:Qi,Infinity:Qi,this:qe("this"),class:qe("class"),super:qe("atom"),yield:jn,export:qe("export"),import:qe("import"),extends:jn,await:jn}}(),P=/[+\-*&%=<>!?|~^@]/,U=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function N(qe){for(var xt=!1,_n,jn=!1;(_n=qe.next())!=null;){if(!xt){if(_n=="/"&&!jn)return;_n=="["?jn=!0:jn&&_n=="]"&&(jn=!1)}xt=!xt&&_n=="\\"}}var W,X;function $(qe,xt,_n){return W=qe,X=_n,xt}function re(qe,xt){var _n=qe.next();if(_n=='"'||_n=="'")return xt.tokenize=te(_n),xt.tokenize(qe,xt);if(_n=="."&&qe.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return $("number","number");if(_n=="."&&qe.match(".."))return $("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(_n))return $(_n);if(_n=="="&&qe.eat(">"))return $("=>","operator");if(_n=="0"&&qe.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return $("number","number");if(/\d/.test(_n))return qe.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),$("number","number");if(_n=="/")return qe.eat("*")?(xt.tokenize=V,V(qe,xt)):qe.eat("/")?(qe.skipToEnd(),$("comment","comment")):Jo(qe,xt,1)?(N(qe),qe.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),$("regexp","string-2")):(qe.eat("="),$("operator","operator",qe.current()));if(_n=="`")return xt.tokenize=ne,ne(qe,xt);if(_n=="#"&&qe.peek()=="!")return qe.skipToEnd(),$("meta","meta");if(_n=="#"&&qe.eatWhile(B))return $("variable","property");if(_n=="<"&&qe.match("!--")||_n=="-"&&qe.match("->")&&!/\S/.test(qe.string.slice(0,qe.start)))return qe.skipToEnd(),$("comment","comment");if(P.test(_n))return(_n!=">"||!xt.lexical||xt.lexical.type!=">")&&(qe.eat("=")?(_n=="!"||_n=="=")&&qe.eat("="):/[<>*+\-|&?]/.test(_n)&&(qe.eat(_n),_n==">"&&qe.eat(_n))),_n=="?"&&qe.eat(".")?$("."):$("operator","operator",qe.current());if(B.test(_n)){qe.eatWhile(B);var jn=qe.current();if(xt.lastType!="."){if(R.propertyIsEnumerable(jn)){var fn=R[jn];return $(fn.type,fn.style,jn)}if(jn=="async"&&qe.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return $("async","keyword",jn)}return $("variable","variable",jn)}}function te(qe){return function(xt,_n){var jn=!1,fn;if(o&&xt.peek()=="@"&&xt.match(U))return _n.tokenize=re,$("jsonld-keyword","meta");for(;(fn=xt.next())!=null&&!(fn==qe&&!jn);)jn=!jn&&fn=="\\";return jn||(_n.tokenize=re),$("string","string")}}function V(qe,xt){for(var _n=!1,jn;jn=qe.next();){if(jn=="/"&&_n){xt.tokenize=re;break}_n=jn=="*"}return $("comment","comment")}function ne(qe,xt){for(var _n=!1,jn;(jn=qe.next())!=null;){if(!_n&&(jn=="`"||jn=="$"&&qe.eat("{"))){xt.tokenize=re;break}_n=!_n&&jn=="\\"}return $("quasi","string-2",qe.current())}var G="([{}])";function le(qe,xt){xt.fatArrowAt&&(xt.fatArrowAt=null);var _n=qe.string.indexOf("=>",qe.start);if(!(_n<0)){if(x){var jn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(qe.string.slice(qe.start,_n));jn&&(_n=jn.index)}for(var fn=0,gr=!1,Qi=_n-1;Qi>=0;--Qi){var Io=qe.string.charAt(Qi),fs=G.indexOf(Io);if(fs>=0&&fs<3){if(!fn){++Qi;break}if(--fn==0){Io=="("&&(gr=!0);break}}else if(fs>=3&&fs<6)++fn;else if(B.test(Io))gr=!0;else if(/["'\/`]/.test(Io))for(;;--Qi){if(Qi==0)return;var fa=qe.string.charAt(Qi-1);if(fa==Io&&qe.string.charAt(Qi-2)!="\\"){Qi--;break}}else if(gr&&!fn){++Qi;break}}gr&&!fn&&(xt.fatArrowAt=Qi)}}var fe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function pe(qe,xt,_n,jn,fn,gr){this.indented=qe,this.column=xt,this.type=_n,this.prev=fn,this.info=gr,jn!=null&&(this.align=jn)}function we(qe,xt){if(!C)return!1;for(var _n=qe.localVars;_n;_n=_n.next)if(_n.name==xt)return!0;for(var jn=qe.context;jn;jn=jn.prev)for(var _n=jn.vars;_n;_n=_n.next)if(_n.name==xt)return!0}function Se(qe,xt,_n,jn,fn){var gr=qe.cc;for(xe.state=qe,xe.stream=fn,xe.marked=null,xe.cc=gr,xe.style=xt,qe.lexical.hasOwnProperty("align")||(qe.lexical.align=!0);;){var Qi=gr.length?gr.pop():f?Ye:Pe;if(Qi(_n,jn)){for(;gr.length&&gr[gr.length-1].lex;)gr.pop()();return xe.marked?xe.marked:_n=="variable"&&we(qe,jn)?"variable-2":xt}}}var xe={state:null,marked:null,cc:null};function je(){for(var qe=arguments.length-1;qe>=0;qe--)xe.cc.push(arguments[qe])}function Me(){return je.apply(null,arguments),!0}function rt(qe,xt){for(var _n=xt;_n;_n=_n.next)if(_n.name==qe)return!0;return!1}function Ct(qe){var xt=xe.state;if(xe.marked="def",!!C){if(xt.context){if(xt.lexical.info=="var"&&xt.context&&xt.context.block){var _n=it(qe,xt.context);if(_n!=null){xt.context=_n;return}}else if(!rt(qe,xt.localVars)){xt.localVars=new Ie(qe,xt.localVars);return}}i.globalVars&&!rt(qe,xt.globalVars)&&(xt.globalVars=new Ie(qe,xt.globalVars))}}function it(qe,xt){if(xt)if(xt.block){var _n=it(qe,xt.prev);return _n?_n==xt.prev?xt:new Ge(_n,xt.vars,!0):null}else return rt(qe,xt.vars)?xt:new Ge(xt.prev,new Ie(qe,xt.vars),!1);else return null}function nt(qe){return qe=="public"||qe=="private"||qe=="protected"||qe=="abstract"||qe=="readonly"}function Ge(qe,xt,_n){this.prev=qe,this.vars=xt,this.block=_n}function Ie(qe,xt){this.name=qe,this.next=xt}var $e=new Ie("this",new Ie("arguments",null));function gt(){xe.state.context=new Ge(xe.state.context,xe.state.localVars,!1),xe.state.localVars=$e}function Dt(){xe.state.context=new Ge(xe.state.context,xe.state.localVars,!0),xe.state.localVars=null}gt.lex=Dt.lex=!0;function ut(){xe.state.localVars=xe.state.context.vars,xe.state.context=xe.state.context.prev}ut.lex=!0;function Rt(qe,xt){var _n=function(){var jn=xe.state,fn=jn.indented;if(jn.lexical.type=="stat")fn=jn.lexical.indented;else for(var gr=jn.lexical;gr&&gr.type==")"&&gr.align;gr=gr.prev)fn=gr.indented;jn.lexical=new pe(fn,xe.stream.column(),qe,null,jn.lexical,xt)};return _n.lex=!0,_n}function St(){var qe=xe.state;qe.lexical.prev&&(qe.lexical.type==")"&&(qe.indented=qe.lexical.indented),qe.lexical=qe.lexical.prev)}St.lex=!0;function Ke(qe){function xt(_n){return _n==qe?Me():qe==";"||_n=="}"||_n==")"||_n=="]"?je():Me(xt)}return xt}function Pe(qe,xt){return qe=="var"?Me(Rt("vardef",xt),On,Ke(";"),St):qe=="keyword a"?Me(Rt("form"),yt,Pe,St):qe=="keyword b"?Me(Rt("form"),Pe,St):qe=="keyword d"?xe.stream.match(/^\s*$/,!1)?Me():Me(Rt("stat"),Zt,Ke(";"),St):qe=="debugger"?Me(Ke(";")):qe=="{"?Me(Rt("}"),Dt,Yt,St,ut):qe==";"?Me():qe=="if"?(xe.state.lexical.info=="else"&&xe.state.cc[xe.state.cc.length-1]==St&&xe.state.cc.pop()(),Me(Rt("form"),yt,Pe,St,ti)):qe=="function"?Me(wn):qe=="for"?Me(Rt("form"),Dt,li,Pe,ut,St):qe=="class"||x&&xt=="interface"?(xe.marked="keyword",Me(Rt("form",qe=="class"?qe:xt),As,St)):qe=="variable"?x&&xt=="declare"?(xe.marked="keyword",Me(Pe)):x&&(xt=="module"||xt=="enum"||xt=="type")&&xe.stream.match(/^\s*\w/,!1)?(xe.marked="keyword",xt=="enum"?Me(Er):xt=="type"?Me(ui,Ke("operator"),ve,Ke(";")):Me(Rt("form"),Rn,Ke("{"),Rt("}"),Yt,St,St)):x&&xt=="namespace"?(xe.marked="keyword",Me(Rt("form"),Ye,Pe,St)):x&&xt=="abstract"?(xe.marked="keyword",Me(Pe)):Me(Rt("stat"),rr):qe=="switch"?Me(Rt("form"),yt,Ke("{"),Rt("}","switch"),Dt,Yt,St,St,ut):qe=="case"?Me(Ye,Ke(":")):qe=="default"?Me(Ke(":")):qe=="catch"?Me(Rt("form"),gt,Re,Pe,St,ut):qe=="export"?Me(Rt("stat"),da,St):qe=="import"?Me(Rt("stat"),zs,St):qe=="async"?Me(Pe):xt=="@"?Me(Ye,Pe):je(Rt("stat"),Ye,Ke(";"),St)}function Re(qe){if(qe=="(")return Me(Pi,Ke(")"))}function Ye(qe,xt){return Et(qe,xt,!1)}function vt(qe,xt){return Et(qe,xt,!0)}function yt(qe){return qe!="("?je():Me(Rt(")"),Zt,Ke(")"),St)}function Et(qe,xt,_n){if(xe.state.fatArrowAt==xe.stream.start){var jn=_n?Pn:Vn;if(qe=="(")return Me(gt,Rt(")"),et(Pi,")"),St,Ke("=>"),jn,ut);if(qe=="variable")return je(gt,Rn,Ke("=>"),jn,ut)}var fn=_n?An:Ut;return fe.hasOwnProperty(qe)?Me(fn):qe=="function"?Me(wn,fn):qe=="class"||x&&xt=="interface"?(xe.marked="keyword",Me(Rt("form"),yi,St)):qe=="keyword c"||qe=="async"?Me(_n?vt:Ye):qe=="("?Me(Rt(")"),Zt,Ke(")"),St,fn):qe=="operator"||qe=="spread"?Me(_n?vt:Ye):qe=="["?Me(Rt("]"),lo,St,fn):qe=="{"?bt(We,"}",null,fn):qe=="quasi"?je(hr,fn):qe=="new"?Me(Dn(_n)):Me()}function Zt(qe){return qe.match(/[;\}\)\],]/)?je():je(Ye)}function Ut(qe,xt){return qe==","?Me(Zt):An(qe,xt,!1)}function An(qe,xt,_n){var jn=_n==!1?Ut:An,fn=_n==!1?Ye:vt;if(qe=="=>")return Me(gt,_n?Pn:Vn,ut);if(qe=="operator")return/\+\+|--/.test(xt)||x&&xt=="!"?Me(jn):x&&xt=="<"&&xe.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Me(Rt(">"),et(ve,">"),St,jn):xt=="?"?Me(Ye,Ke(":"),fn):Me(fn);if(qe=="quasi")return je(hr,jn);if(qe!=";"){if(qe=="(")return bt(vt,")","call",jn);if(qe==".")return Me(Yn,jn);if(qe=="[")return Me(Rt("]"),Zt,Ke("]"),St,jn);if(x&&xt=="as")return xe.marked="keyword",Me(ve,jn);if(qe=="regexp")return xe.state.lastType=xe.marked="operator",xe.stream.backUp(xe.stream.pos-xe.stream.start-1),Me(fn)}}function hr(qe,xt){return qe!="quasi"?je():xt.slice(xt.length-2)!="${"?Me(hr):Me(Zt,Vt)}function Vt(qe){if(qe=="}")return xe.marked="string-2",xe.state.tokenize=ne,Me(hr)}function Vn(qe){return le(xe.stream,xe.state),je(qe=="{"?Pe:Ye)}function Pn(qe){return le(xe.stream,xe.state),je(qe=="{"?Pe:vt)}function Dn(qe){return function(xt){return xt=="."?Me(qe?Ir:Ln):xt=="variable"&&x?Me(jt,qe?An:Ut):je(qe?vt:Ye)}}function Ln(qe,xt){if(xt=="target")return xe.marked="keyword",Me(Ut)}function Ir(qe,xt){if(xt=="target")return xe.marked="keyword",Me(An)}function rr(qe){return qe==":"?Me(St,Pe):je(Ut,Ke(";"),St)}function Yn(qe){if(qe=="variable")return xe.marked="property",Me()}function We(qe,xt){if(qe=="async")return xe.marked="property",Me(We);if(qe=="variable"||xe.style=="keyword"){if(xe.marked="property",xt=="get"||xt=="set")return Me(he);var _n;return x&&xe.state.fatArrowAt==xe.stream.start&&(_n=xe.stream.match(/^\s*:\s*/,!1))&&(xe.state.fatArrowAt=xe.stream.pos+_n[0].length),Me(me)}else{if(qe=="number"||qe=="string")return xe.marked=o?"property":xe.style+" property",Me(me);if(qe=="jsonld-keyword")return Me(me);if(x&&nt(xt))return xe.marked="keyword",Me(We);if(qe=="[")return Me(Ye,Jt,Ke("]"),me);if(qe=="spread")return Me(vt,me);if(xt=="*")return xe.marked="keyword",Me(We);if(qe==":")return je(me)}}function he(qe){return qe!="variable"?je(me):(xe.marked="property",Me(wn))}function me(qe){if(qe==":")return Me(vt);if(qe=="(")return je(wn)}function et(qe,xt,_n){function jn(fn,gr){if(_n?_n.indexOf(fn)>-1:fn==","){var Qi=xe.state.lexical;return Qi.info=="call"&&(Qi.pos=(Qi.pos||0)+1),Me(function(Io,fs){return Io==xt||fs==xt?je():je(qe)},jn)}return fn==xt||gr==xt?Me():_n&&_n.indexOf(";")>-1?je(qe):Me(Ke(xt))}return function(fn,gr){return fn==xt||gr==xt?Me():je(qe,jn)}}function bt(qe,xt,_n){for(var jn=3;jn<arguments.length;jn++)xe.cc.push(arguments[jn]);return Me(Rt(xt,_n),et(qe,xt),St)}function Yt(qe){return qe=="}"?Me():je(Pe,Yt)}function Jt(qe,xt){if(x){if(qe==":")return Me(ve);if(xt=="?")return Me(Jt)}}function ir(qe,xt){if(x&&(qe==":"||xt=="in"))return Me(ve)}function Xe(qe){if(x&&qe==":")return xe.stream.match(/^\s*\w+\s+is\b/,!1)?Me(Ye,ae,ve):Me(ve)}function ae(qe,xt){if(xt=="is")return xe.marked="keyword",Me()}function ve(qe,xt){if(xt=="keyof"||xt=="typeof"||xt=="infer"||xt=="readonly")return xe.marked="keyword",Me(xt=="typeof"?vt:ve);if(qe=="variable"||xt=="void")return xe.marked="type",Me(Ft);if(xt=="|"||xt=="&")return Me(ve);if(qe=="string"||qe=="number"||qe=="atom")return Me(Ft);if(qe=="[")return Me(Rt("]"),et(ve,"]",","),St,Ft);if(qe=="{")return Me(Rt("}"),Ne,St,Ft);if(qe=="(")return Me(et(ct,")"),p,Ft);if(qe=="<")return Me(et(ve,">"),ve);if(qe=="quasi")return je(Te,Ft)}function p(qe){if(qe=="=>")return Me(ve)}function Ne(qe){return qe.match(/[\}\)\]]/)?Me():qe==","||qe==";"?Me(Ne):je(Ve,Ne)}function Ve(qe,xt){if(qe=="variable"||xe.style=="keyword")return xe.marked="property",Me(Ve);if(xt=="?"||qe=="number"||qe=="string")return Me(Ve);if(qe==":")return Me(ve);if(qe=="[")return Me(Ke("variable"),ir,Ke("]"),Ve);if(qe=="(")return je(Dr,Ve);if(!qe.match(/[;\}\)\],]/))return Me()}function Te(qe,xt){return qe!="quasi"?je():xt.slice(xt.length-2)!="${"?Me(Te):Me(ve,lt)}function lt(qe){if(qe=="}")return xe.marked="string-2",xe.state.tokenize=ne,Me(Te)}function ct(qe,xt){return qe=="variable"&&xe.stream.match(/^\s*[?:]/,!1)||xt=="?"?Me(ct):qe==":"?Me(ve):qe=="spread"?Me(ct):je(ve)}function Ft(qe,xt){if(xt=="<")return Me(Rt(">"),et(ve,">"),St,Ft);if(xt=="|"||qe=="."||xt=="&")return Me(ve);if(qe=="[")return Me(ve,Ke("]"),Ft);if(xt=="extends"||xt=="implements")return xe.marked="keyword",Me(ve);if(xt=="?")return Me(ve,Ke(":"),ve)}function jt(qe,xt){if(xt=="<")return Me(Rt(">"),et(ve,">"),St,Ft)}function Gt(){return je(ve,nn)}function nn(qe,xt){if(xt=="=")return Me(ve)}function On(qe,xt){return xt=="enum"?(xe.marked="keyword",Me(Er)):je(Rn,Jt,or,on)}function Rn(qe,xt){if(x&&nt(xt))return xe.marked="keyword",Me(Rn);if(qe=="variable")return Ct(xt),Me();if(qe=="spread")return Me(Rn);if(qe=="[")return bt(Tr,"]");if(qe=="{")return bt(dr,"}")}function dr(qe,xt){return qe=="variable"&&!xe.stream.match(/^\s*:/,!1)?(Ct(xt),Me(or)):(qe=="variable"&&(xe.marked="property"),qe=="spread"?Me(Rn):qe=="}"?je():qe=="["?Me(Ye,Ke("]"),Ke(":"),dr):Me(Ke(":"),Rn,or))}function Tr(){return je(Rn,or)}function or(qe,xt){if(xt=="=")return Me(vt)}function on(qe){if(qe==",")return Me(On)}function ti(qe,xt){if(qe=="keyword b"&&xt=="else")return Me(Rt("form","else"),Pe,St)}function li(qe,xt){if(xt=="await")return Me(li);if(qe=="(")return Me(Rt(")"),jr,St)}function jr(qe){return qe=="var"?Me(On,Fr):qe=="variable"?Me(Fr):je(Fr)}function Fr(qe,xt){return qe==")"?Me():qe==";"?Me(Fr):xt=="in"||xt=="of"?(xe.marked="keyword",Me(Ye,Fr)):je(Ye,Fr)}function wn(qe,xt){if(xt=="*")return xe.marked="keyword",Me(wn);if(qe=="variable")return Ct(xt),Me(wn);if(qe=="(")return Me(gt,Rt(")"),et(Pi,")"),St,Xe,Pe,ut);if(x&&xt=="<")return Me(Rt(">"),et(Gt,">"),St,wn)}function Dr(qe,xt){if(xt=="*")return xe.marked="keyword",Me(Dr);if(qe=="variable")return Ct(xt),Me(Dr);if(qe=="(")return Me(gt,Rt(")"),et(Pi,")"),St,Xe,ut);if(x&&xt=="<")return Me(Rt(">"),et(Gt,">"),St,Dr)}function ui(qe,xt){if(qe=="keyword"||qe=="variable")return xe.marked="type",Me(ui);if(xt=="<")return Me(Rt(">"),et(Gt,">"),St)}function Pi(qe,xt){return xt=="@"&&Me(Ye,Pi),qe=="spread"?Me(Pi):x&&nt(xt)?(xe.marked="keyword",Me(Pi)):x&&qe=="this"?Me(Jt,or):je(Rn,Jt,or)}function yi(qe,xt){return qe=="variable"?As(qe,xt):qr(qe,xt)}function As(qe,xt){if(qe=="variable")return Ct(xt),Me(qr)}function qr(qe,xt){if(xt=="<")return Me(Rt(">"),et(Gt,">"),St,qr);if(xt=="extends"||xt=="implements"||x&&qe==",")return xt=="implements"&&(xe.marked="keyword"),Me(x?ve:Ye,qr);if(qe=="{")return Me(Rt("}"),_s,St)}function _s(qe,xt){if(qe=="async"||qe=="variable"&&(xt=="static"||xt=="get"||xt=="set"||x&&nt(xt))&&xe.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return xe.marked="keyword",Me(_s);if(qe=="variable"||xe.style=="keyword")return xe.marked="property",Me(La,_s);if(qe=="number"||qe=="string")return Me(La,_s);if(qe=="[")return Me(Ye,Jt,Ke("]"),La,_s);if(xt=="*")return xe.marked="keyword",Me(_s);if(x&&qe=="(")return je(Dr,_s);if(qe==";"||qe==",")return Me(_s);if(qe=="}")return Me();if(xt=="@")return Me(Ye,_s)}function La(qe,xt){if(xt=="!"||xt=="?")return Me(La);if(qe==":")return Me(ve,or);if(xt=="=")return Me(vt);var _n=xe.state.lexical.prev,jn=_n&&_n.info=="interface";return je(jn?Dr:wn)}function da(qe,xt){return xt=="*"?(xe.marked="keyword",Me(bo,Ke(";"))):xt=="default"?(xe.marked="keyword",Me(Ye,Ke(";"))):qe=="{"?Me(et(No,"}"),bo,Ke(";")):je(Pe)}function No(qe,xt){if(xt=="as")return xe.marked="keyword",Me(Ke("variable"));if(qe=="variable")return je(vt,No)}function zs(qe){return qe=="string"?Me():qe=="("?je(Ye):qe=="."?je(Ut):je(hl,ci,bo)}function hl(qe,xt){return qe=="{"?bt(hl,"}"):(qe=="variable"&&Ct(xt),xt=="*"&&(xe.marked="keyword"),Me(oa))}function ci(qe){if(qe==",")return Me(hl,ci)}function oa(qe,xt){if(xt=="as")return xe.marked="keyword",Me(hl)}function bo(qe,xt){if(xt=="from")return xe.marked="keyword",Me(Ye)}function lo(qe){return qe=="]"?Me():je(et(vt,"]"))}function Er(){return je(Rt("form"),Rn,Ke("{"),Rt("}"),et(wa,"}"),St,St)}function wa(){return je(Rn,or)}function qo(qe,xt){return qe.lastType=="operator"||qe.lastType==","||P.test(xt.charAt(0))||/[,.]/.test(xt.charAt(0))}function Jo(qe,xt,_n){return xt.tokenize==re&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(xt.lastType)||xt.lastType=="quasi"&&/\{\s*$/.test(qe.string.slice(0,qe.pos-(_n||0)))}return{startState:function(qe){var xt={tokenize:re,lastType:"sof",cc:[],lexical:new pe((qe||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Ge(null,null,!1),indented:qe||0};return i.globalVars&&typeof i.globalVars=="object"&&(xt.globalVars=i.globalVars),xt},token:function(qe,xt){if(qe.sol()&&(xt.lexical.hasOwnProperty("align")||(xt.lexical.align=!1),xt.indented=qe.indentation(),le(qe,xt)),xt.tokenize!=V&&qe.eatSpace())return null;var _n=xt.tokenize(qe,xt);return W=="comment"?_n:(xt.lastType=W=="operator"&&(X=="++"||X=="--")?"incdec":W,Se(xt,_n,W,X,qe))},indent:function(qe,xt){if(qe.tokenize==V||qe.tokenize==ne)return t.Pass;if(qe.tokenize!=re)return 0;var _n=xt&&xt.charAt(0),jn=qe.lexical,fn;if(!/^\s*else\b/.test(xt))for(var gr=qe.cc.length-1;gr>=0;--gr){var Qi=qe.cc[gr];if(Qi==St)jn=jn.prev;else if(Qi!=ti&&Qi!=ut)break}for(;(jn.type=="stat"||jn.type=="form")&&(_n=="}"||(fn=qe.cc[qe.cc.length-1])&&(fn==Ut||fn==An)&&!/^[,\.=+\-*:?[\(]/.test(xt));)jn=jn.prev;l&&jn.type==")"&&jn.prev.type=="stat"&&(jn=jn.prev);var Io=jn.type,fs=_n==Io;return Io=="vardef"?jn.indented+(qe.lastType=="operator"||qe.lastType==","?jn.info.length+1:0):Io=="form"&&_n=="{"?jn.indented:Io=="form"?jn.indented+s:Io=="stat"?jn.indented+(qo(qe,xt)?l||s:0):jn.info=="switch"&&!fs&&i.doubleIndentSwitch!=!1?jn.indented+(/^(?:case|default)\b/.test(xt)?s:2*s):jn.align?jn.column+(fs?0:1):jn.indented+(fs?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:o,jsonMode:f,expressionAllowed:Jo,skipExpression:function(qe){Se(qe,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),KT.exports}Joe();var LT={exports:{}},UT;function ese(){return UT||(UT=1,function(n,e){(function(t){t(g3())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(G,le,fe){var pe=document.createElement("div");pe.className="CodeMirror-lint-tooltip cm-s-"+G.options.theme,pe.appendChild(fe.cloneNode(!0)),G.state.lint.options.selfContain?G.getWrapperElement().appendChild(pe):document.body.appendChild(pe);function we(Se){if(!pe.parentNode)return t.off(document,"mousemove",we);var xe=Math.max(0,Se.clientY-pe.offsetHeight-5),je=Math.max(0,Math.min(Se.clientX+5,pe.ownerDocument.defaultView.innerWidth-pe.offsetWidth));pe.style.top=xe+"px",pe.style.left=je+"px"}return t.on(document,"mousemove",we),we(le),pe.style.opacity!=null&&(pe.style.opacity=1),pe}function l(G){G.parentNode&&G.parentNode.removeChild(G)}function o(G){G.parentNode&&(G.style.opacity==null&&l(G),G.style.opacity=0,setTimeout(function(){l(G)},600))}function f(G,le,fe,pe){var we=s(G,le,fe);function Se(){t.off(pe,"mouseout",Se),we&&(o(we),we=null)}var xe=setInterval(function(){if(we)for(var je=pe;;je=je.parentNode){if(je&&je.nodeType==11&&(je=je.host),je==document.body)return;if(!je){Se();break}}if(!we)return clearInterval(xe)},400);t.on(pe,"mouseout",Se)}function C(G,le,fe){this.marked=[],le instanceof Function&&(le={getAnnotations:le}),(!le||le===!0)&&(le={}),this.options={},this.linterOptions=le.options||{};for(var pe in x)this.options[pe]=x[pe];for(var pe in le)x.hasOwnProperty(pe)?le[pe]!=null&&(this.options[pe]=le[pe]):le.options||(this.linterOptions[pe]=le[pe]);this.timeout=null,this.hasGutter=fe,this.onMouseOver=function(we){ne(G,we)},this.waitingFor=0}var x={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(G){var le=G.state.lint;le.hasGutter&&G.clearGutter(r),le.options.highlightLines&&R(G);for(var fe=0;fe<le.marked.length;++fe)le.marked[fe].clear();le.marked.length=0}function R(G){G.eachLine(function(le){var fe=le.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(le.wrapClass);fe&&G.removeLineClass(le,"wrap",fe[0])})}function P(G,le,fe,pe,we){var Se=document.createElement("div"),xe=Se;return Se.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+fe,pe&&(xe=Se.appendChild(document.createElement("div")),xe.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),we!=!1&&t.on(xe,"mouseover",function(je){f(G,je,le,xe)}),Se}function U(G,le){return G=="error"?G:le}function N(G){for(var le=[],fe=0;fe<G.length;++fe){var pe=G[fe],we=pe.from.line;(le[we]||(le[we]=[])).push(pe)}return le}function W(G){var le=G.severity;le||(le="error");var fe=document.createElement("div");return fe.className="CodeMirror-lint-message CodeMirror-lint-message-"+le,typeof G.messageHTML<"u"?fe.innerHTML=G.messageHTML:fe.appendChild(document.createTextNode(G.message)),fe}function X(G,le){var fe=G.state.lint,pe=++fe.waitingFor;function we(){pe=-1,G.off("change",we)}G.on("change",we),le(G.getValue(),function(Se,xe){G.off("change",we),fe.waitingFor==pe&&(xe&&Se instanceof t&&(Se=xe),G.operation(function(){re(G,Se)}))},fe.linterOptions,G)}function $(G){var le=G.state.lint;if(le){var fe=le.options,pe=fe.getAnnotations||G.getHelper(t.Pos(0,0),"lint");if(pe)if(fe.async||pe.async)X(G,pe);else{var we=pe(G.getValue(),le.linterOptions,G);if(!we)return;we.then?we.then(function(Se){G.operation(function(){re(G,Se)})}):G.operation(function(){re(G,we)})}}}function re(G,le){var fe=G.state.lint;if(fe){var pe=fe.options;B(G);for(var we=N(le),Se=0;Se<we.length;++Se){var xe=we[Se];if(xe){for(var je=null,Me=fe.hasGutter&&document.createDocumentFragment(),rt=0;rt<xe.length;++rt){var Ct=xe[rt],it=Ct.severity;it||(it="error"),je=U(je,it),pe.formatAnnotation&&(Ct=pe.formatAnnotation(Ct)),fe.hasGutter&&Me.appendChild(W(Ct)),Ct.to&&fe.marked.push(G.markText(Ct.from,Ct.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+it,__annotation:Ct}))}fe.hasGutter&&G.setGutterMarker(Se,r,P(G,Me,je,xe.length>1,pe.tooltips)),pe.highlightLines&&G.addLineClass(Se,"wrap",i+je)}}pe.onUpdateLinting&&pe.onUpdateLinting(le,we,G)}}function te(G){var le=G.state.lint;le&&(clearTimeout(le.timeout),le.timeout=setTimeout(function(){$(G)},le.options.delay))}function V(G,le,fe){for(var pe=fe.target||fe.srcElement,we=document.createDocumentFragment(),Se=0;Se<le.length;Se++){var xe=le[Se];we.appendChild(W(xe))}f(G,fe,we,pe)}function ne(G,le){var fe=le.target||le.srcElement;if(/\bCodeMirror-lint-mark-/.test(fe.className)){for(var pe=fe.getBoundingClientRect(),we=(pe.left+pe.right)/2,Se=(pe.top+pe.bottom)/2,xe=G.findMarksAt(G.coordsChar({left:we,top:Se},"client")),je=[],Me=0;Me<xe.length;++Me){var rt=xe[Me].__annotation;rt&&je.push(rt)}je.length&&V(G,je,le)}}t.defineOption("lint",!1,function(G,le,fe){if(fe&&fe!=t.Init&&(B(G),G.state.lint.options.lintOnChange!==!1&&G.off("change",te),t.off(G.getWrapperElement(),"mouseover",G.state.lint.onMouseOver),clearTimeout(G.state.lint.timeout),delete G.state.lint),le){for(var pe=G.getOption("gutters"),we=!1,Se=0;Se<pe.length;++Se)pe[Se]==r&&(we=!0);var xe=G.state.lint=new C(G,le,we);xe.options.lintOnChange&&G.on("change",te),xe.options.tooltips!=!1&&xe.options.tooltips!="gutter"&&t.on(G.getWrapperElement(),"mouseover",xe.onMouseOver),$(G)}}),t.defineExtension("performLint",function(){$(this)})})}()),LT.exports}ese();var zT={exports:{}},NT;function tse(){return NT||(NT=1,function(n,e){(function(t){t(g3())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(R){return R&&R.bracketRegex||/[(){}[\]]/}function o(R,P,U){var N=R.getLineHandle(P.line),W=P.ch-1,X=U&&U.afterCursor;X==null&&(X=/(^| )cm-fat-cursor($| )/.test(R.getWrapperElement().className));var $=l(U),re=!X&&W>=0&&$.test(N.text.charAt(W))&&s[N.text.charAt(W)]||$.test(N.text.charAt(W+1))&&s[N.text.charAt(++W)];if(!re)return null;var te=re.charAt(1)==">"?1:-1;if(U&&U.strict&&te>0!=(W==P.ch))return null;var V=R.getTokenTypeAt(i(P.line,W+1)),ne=f(R,i(P.line,W+(te>0?1:0)),te,V,U);return ne==null?null:{from:i(P.line,W),to:ne&&ne.pos,match:ne&&ne.ch==re.charAt(0),forward:te>0}}function f(R,P,U,N,W){for(var X=W&&W.maxScanLineLength||1e4,$=W&&W.maxScanLines||1e3,re=[],te=l(W),V=U>0?Math.min(P.line+$,R.lastLine()+1):Math.max(R.firstLine()-1,P.line-$),ne=P.line;ne!=V;ne+=U){var G=R.getLine(ne);if(G){var le=U>0?0:G.length-1,fe=U>0?G.length:-1;if(!(G.length>X))for(ne==P.line&&(le=P.ch-(U<0?1:0));le!=fe;le+=U){var pe=G.charAt(le);if(te.test(pe)&&(N===void 0||(R.getTokenTypeAt(i(ne,le+1))||"")==(N||""))){var we=s[pe];if(we&&we.charAt(1)==">"==U>0)re.push(pe);else if(re.length)re.pop();else return{pos:i(ne,le),ch:pe}}}}}return ne-U==(U>0?R.lastLine():R.firstLine())?!1:null}function C(R,P,U){for(var N=R.state.matchBrackets.maxHighlightLineLength||1e3,W=U&&U.highlightNonMatching,X=[],$=R.listSelections(),re=0;re<$.length;re++){var te=$[re].empty()&&o(R,$[re].head,U);if(te&&(te.match||W!==!1)&&R.getLine(te.from.line).length<=N){var V=te.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";X.push(R.markText(te.from,i(te.from.line,te.from.ch+1),{className:V})),te.to&&R.getLine(te.to.line).length<=N&&X.push(R.markText(te.to,i(te.to.line,te.to.ch+1),{className:V}))}}if(X.length){r&&R.state.focused&&R.focus();var ne=function(){R.operation(function(){for(var G=0;G<X.length;G++)X[G].clear()})};if(P)setTimeout(ne,800);else return ne}}function x(R){R.operation(function(){R.state.matchBrackets.currentlyHighlighted&&(R.state.matchBrackets.currentlyHighlighted(),R.state.matchBrackets.currentlyHighlighted=null),R.state.matchBrackets.currentlyHighlighted=C(R,!1,R.state.matchBrackets)})}function B(R){R.state.matchBrackets&&R.state.matchBrackets.currentlyHighlighted&&(R.state.matchBrackets.currentlyHighlighted(),R.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(R,P,U){U&&U!=t.Init&&(R.off("cursorActivity",x),R.off("focus",x),R.off("blur",B),B(R)),P&&(R.state.matchBrackets=typeof P=="object"?P:{},R.on("cursorActivity",x),R.on("focus",x),R.on("blur",B))}),t.defineExtension("matchBrackets",function(){C(this,!0)}),t.defineExtension("findMatchingBracket",function(R,P,U){return(U||typeof P=="boolean")&&(U?(U.strict=P,P=U):P=P?{strict:!0}:null),o(this,R,P)}),t.defineExtension("scanForBracket",function(R,P,U,N){return f(this,R,P,U,N)})})}()),zT.exports}tse();const nse=/("(?:[^\\"]|\\.)*")|[:,]/g;function DN(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,f){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,i);if(C===void 0)return C;const x=r-o.length-f;if(C.length<=x){const B=C.replace(nse,(R,P)=>P||`${R} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(C),i=void 0),typeof l=="object"&&l!==null){const B=o+t,R=[];let P=0,U,N;if(Array.isArray(l)){U="[",N="]";const{length:W}=l;for(;P<W;P++)R.push(s(l[P],B,P===W-1?0:1)||"null")}else{U="{",N="}";const W=Object.keys(l),{length:X}=W;for(;P<X;P++){const $=W[P],re=`${JSON.stringify($)}: `,te=s(l[$],B,re.length+(P===X-1?0:1));te!==void 0&&R.push(re+te)}}if(R.length>0)return[U,t+R.join(`,
${B}`),N].join(`
${o}`)}return C}(n,"",0)}var Xv={exports:{}},rse=Xv.exports,GT;function ise(){return GT||(GT=1,function(n,e){(function(t,r){r(e)})(rse,function(t){const r={isWhiteSpace:function(Ge){return Ge===" "||Ge===" "||Ge==="\uFEFF"||Ge>="	"&&Ge<="\r"||Ge===" "||Ge>=" "&&Ge<=" "||Ge==="\u2028"||Ge==="\u2029"||Ge===" "||Ge===" "||Ge==="　"},isWhiteSpaceJSON:function(Ge){return Ge===" "||Ge==="	"||Ge===`
`||Ge==="\r"},isLineTerminator:function(Ge){return Ge===`
`||Ge==="\r"||Ge==="\u2028"||Ge==="\u2029"},isLineTerminatorJSON:function(Ge){return Ge===`
`||Ge==="\r"},isIdentifierStart:function(Ge){return Ge==="$"||Ge==="_"||Ge>="A"&&Ge<="Z"||Ge>="a"&&Ge<="z"||Ge>=""&&r.NonAsciiIdentifierStart.test(Ge)},isIdentifierPart:function(Ge){return Ge==="$"||Ge==="_"||Ge>="A"&&Ge<="Z"||Ge>="a"&&Ge<="z"||Ge>="0"&&Ge<="9"||Ge>=""&&r.NonAsciiIdentifierPart.test(Ge)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(nt){return nt>="0"&&nt<="9"||nt>="A"&&nt<="F"||nt>="a"&&nt<="f"}function s(nt){return nt>="0"&&nt<="7"}function l(nt){return nt>="0"&&nt<="9"}function o(nt){return nt.charCodeAt(0)===65279}const f={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},C=Object.hasOwn,x={};function B(nt,Ge){(typeof nt!="string"||!(nt instanceof String))&&(nt=String(nt));const Ie=Ge.mode==="json5",$e=Ge.ignoreBOM,gt=Ge.ignoreComments||Ge.mode==="cjson"||Ie,Dt=Ge.ignoreTrailingCommas||Ie,ut=Ge.ignoreProtoKey,Rt=Ge.ignorePrototypeKeys,St=Ge.allowSingleQuotedStrings||Ie,Ke=Ge.allowDuplicateObjectKeys,Pe=Ge.reviver,Re=Ge.tokenize,Ye=Ge.rawTokens,vt=Ge.tokenLocations,yt=Ge.tokenPaths,Et=Ie?r.isLineTerminator:r.isLineTerminatorJSON,Zt=Ie?r.isWhiteSpace:r.isWhiteSpaceJSON,Ut=nt.length;let An=0,hr=0,Vt=0;const Vn=[];let Pn,Dn,Ln;if(Re){let Ve=null,Te,lt;Pn=function(){if(Ve!==null)throw Error("internal error, token overlap");Te=An+1,lt=Vt-hr+1,Ve=Vt},Dn=function(ct,Ft){if(Ve!==Vt){const jt={type:ct};Ye&&(jt.raw=nt.substr(Ve,Vt-Ve)),Ft!==void 0&&(jt.value=Ft),vt&&(jt.location={start:{column:lt,line:Te,offset:Ve}}),yt&&(jt.path=Ln.slice()),Vn.push(jt)}return Ve=null,Ft},yt&&(Ln=[])}function Ir(){let Ve;return Vt<Ut?Ve=`Unexpected token ${JSON.stringify(nt[Vt])}`:Ve="Unexpected end of input",Ve}function rr(Ve){const Te=Vt-hr+1;++An;const lt=we(Ve,nt,Vt,An,Te),ct=SyntaxError(lt.message);return ct.reason=Ve,ct.excerpt=lt.excerpt,ct.pointer=lt.pointer,ct.location={start:{column:Te,line:An,offset:Vt}},ct}function Yn(Ve){throw Ve||(Ve=Ir()),rr(Ve)}function We(Ve){Ve==="\r"&&nt[Vt]===`
`&&++Vt,hr=Vt,++An}function he(){if(Vt<Ut){Pn?.();const Ve=nt[Vt++];if(Ve==='"'||Ve==="'"&&St){const Te=p(Ve);return Dn?.("literal",Te),Te}if(Ve==="{")return Dn?.("symbol","{"),ir();if(Ve==="[")return Dn?.("symbol","["),Xe();if(Ve==="-"||Ve==="."||l(Ve)||Ie&&(Ve==="+"||Ve==="I"||Ve==="N")){const Te=ae();return Dn?.("literal",Te),Te}if(Ve==="n")return Jt("null"),Dn?.("literal",null),null;if(Ve==="t")return Jt("true"),Dn?.("literal",!0),!0;if(Ve==="f")return Jt("false"),Dn?.("literal",!1),!1;--Vt,Dn?.();return}}function me(){let Ve;if(Vt<Ut){Pn?.();const Te=nt[Vt++];if(Te==='"'||Te==="'"&&St){const lt=p(Te);return Dn?.("literal",lt),lt}if(Te==="{")return Dn?.("symbol","{"),ir();if(Te==="[")return Dn?.("symbol","["),Xe();if(Te==="."||l(Te)){const lt=ae();return Dn?.("literal",lt),lt}if(Ie&&r.isIdentifierStart(Te)||Te==="\\"&&nt[Vt]==="u"){const lt=Vt-1;if(Ve=ve(),Ve===void 0){Vt=lt,Dn?.();return}return Dn?.("literal",Ve),Ve}--Vt,Dn?.();return}}function et(){o(nt)&&(Pn?.(),++Vt,Dn?.("bom"))}function bt(){let Ve;function Te(){Ve||(Ve=!0,--Vt,Pn(),++Vt)}function lt(){Ve&&(Ve=!1,Dn("whitespace"))}for(;Vt<Ut;){const ct=nt[Vt++];if(Et(ct))Pn&&Te(),We(ct);else if(Zt(ct))Pn&&Te();else if(ct==="/"&&gt&&(nt[Vt]==="/"||nt[Vt]==="*"))Pn&&(--Vt,lt(),Pn(),++Vt),Yt(nt[Vt++]==="*"),Dn?.("comment");else{--Vt;break}}Dn&&lt()}function Yt(Ve){for(;Vt<Ut;){const Te=nt[Vt++];if(Et(Te)){if(!Ve){--Vt;return}We(Te)}else if(Te==="*"&&Ve&&nt[Vt]==="/"){++Vt;return}}Ve&&Yn("Unclosed multiline comment")}function Jt(Ve){const Te=Vt;for(let lt=1,ct=Ve.length;lt<ct;++lt)(Vt>=Ut||Ve[lt]!==nt[Vt])&&(Vt=Te-1,Yn()),++Vt}function ir(){let Ve={},Te=!1;for(;Vt<Ut;){bt();const lt=me();Ke===!1&&C(Ve,lt)&&Yn(`Duplicate key: "${lt}"`),bt(),Pn?.();let ct=nt[Vt++];if(Dn?.("symbol",ct),ct==="}"&&lt===void 0)return!Dt&&Te&&(--Vt,Yn("Trailing comma in object")),Ve;if(ct===":"&&lt!==void 0){bt(),Ln?.push(lt);let Ft=he();if(Ln?.pop(),Ft===void 0&&Yn(`No value found for key "${lt}"`),typeof lt!="string"&&(!Ie||typeof lt!="number")&&Yn(`Wrong key type: "${lt}"`),Rt&&(lt in x||x[lt]!=null)||ut&&lt==="__proto__"||(Pe&&(Ft=Pe(lt,Ft)),Ft!==void 0&&(Te=!0,lt==="__proto__"?Ve=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(Ft)}}`),Ve):Ve[lt]=Ft)),bt(),Pn?.(),ct=nt[Vt++],Dn?.("symbol",ct),ct!==","){if(ct==="}")return Ve;Yn()}}else--Vt,Yn()}Yn()}function Xe(){const Ve=[];for(;Vt<Ut;){bt(),Ln?.push(Ve.length);let Te=he();Ln?.pop(),bt(),Pn?.();const lt=nt[Vt++];if(Dn?.("symbol",lt),Te!==void 0&&(Pe&&(Te=Pe(String(Ve.length),Te)),Te===void 0?(++Ve.length,Te=!0):Ve.push(Te)),lt===",")Te===void 0&&Yn("Elisions are not supported");else{if(lt==="]")return!Dt&&Te===void 0&&Ve.length&&(--Vt,Yn("Trailing comma in array")),Ve;--Vt,Yn()}}}function ae(){--Vt;let Ve=Vt,Te=nt[Vt++];const lt=function(ct){const Ft=nt.substr(Ve,Vt-Ve);let jt;if(ct?jt=Number.parseInt(Ft.replace(/^0o?/,""),8):jt=Number(Ft),Number.isNaN(jt))--Vt,Yn(`Bad numeric literal - "${nt.substr(Ve,Vt-Ve+1)}"`);else if(!Ie&&!Ft.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--Vt,Yn(`Non-json numeric literal - "${nt.substr(Ve,Vt-Ve+1)}"`);else return jt};if((Te==="-"||Te==="+"&&Ie)&&(Te=nt[Vt++]),Te==="N"&&Ie)return Jt("NaN"),Number.NaN;if(Te==="I"&&Ie)return Jt("Infinity"),lt();if(Te>="1"&&Te<="9"){for(;Vt<Ut&&l(nt[Vt]);)++Vt;Te=nt[Vt++]}if(Te==="0"){Te=nt[Vt++];const ct=Te==="o"||Te==="O"||s(Te),Ft=Te==="x"||Te==="X";if(Ie&&(ct||Ft)){for(;Vt<Ut&&(Ft?i:s)(nt[Vt]);)++Vt;let jt=1;return nt[Ve]==="-"?(jt=-1,++Ve):nt[Ve]==="+"&&++Ve,jt*lt(ct)}}if(Te==="."){for(;Vt<Ut&&l(nt[Vt]);)++Vt;Te=nt[Vt++]}if(Te==="e"||Te==="E"){for(Te=nt[Vt++],(Te==="-"||Te==="+")&&++Vt;Vt<Ut&&l(nt[Vt]);)++Vt;Te=nt[Vt++]}return--Vt,lt()}function ve(){--Vt;let Ve="";for(;Vt<Ut;){let Te=nt[Vt++];if(Te==="\\"&&nt[Vt]==="u"&&i(nt[Vt+1])&&i(nt[Vt+2])&&i(nt[Vt+3])&&i(nt[Vt+4])&&(Te=String.fromCharCode(Number.parseInt(nt.substr(Vt+1,4),16)),Vt+=5),Ve.length)if(r.isIdentifierPart(Te))Ve+=Te;else return--Vt,Ve;else if(r.isIdentifierStart(Te))Ve+=Te;else return}Yn()}function p(Ve){let Te="";for(;Vt<Ut;){let lt=nt[Vt++];if(lt===Ve)return Te;if(lt==="\\")if(Vt>=Ut&&Yn(),lt=nt[Vt++],f[lt]&&(Ie||lt!=="v"&&(lt!=="'"||St)))Te+=f[lt];else if(Ie&&Et(lt))We(lt);else if(lt==="u"||lt==="x"&&Ie){const ct=lt==="u"?4:2;for(let Ft=0;Ft<ct;++Ft)Vt>=Ut&&Yn(),i(nt[Vt])||Yn("Bad escape sequence"),Vt++;Te+=String.fromCharCode(Number.parseInt(nt.substr(Vt-ct,ct),16))}else if(Ie&&s(lt)){let ct;lt<"4"&&s(nt[Vt])&&s(nt[Vt+1])?ct=3:s(nt[Vt])?ct=2:ct=1,Vt+=ct-1,Te+=String.fromCharCode(Number.parseInt(nt.substr(Vt-ct,ct),8))}else Ie?Te+=lt:(--Vt,Yn());else Et(lt)?Yn():(!Ie&&lt.charCodeAt(0)<32&&(--Vt,Yn("Unexpected control character")),Te+=lt)}Yn()}$e&&et(),bt();let Ne=he();if(Ne!==void 0||Vt<Ut){if(bt(),Vt>=Ut)return Pe&&(Ne=Pe("",Ne)),Re?Vn:Ne;Yn()}else Yn(Vt?"No data, only a whitespace":"No data, empty input")}function R(nt,Ge){return typeof Ge=="function"?Ge={reviver:Ge}:Ge||(Ge={}),B(nt,Ge)}function P(nt,Ge){Ge||(Ge={});const Ie=Ge.tokenize;Ge.tokenize=!0;const $e=B(nt,Ge);return Ge.tokenize=Ie,$e}function U(nt){return nt.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function N(nt){return nt.length===0?"":`/${nt.map(U).join("/")}`}function W(nt){return nt.replace(/~1/g,"/").replace(/~0/g,"~")}function X(nt){if(nt==="")return[];if(nt[0]!=="/")throw new Error('Missing initial "/" in the reference');return nt.substr(1).split("/").map(W)}function $(nt,Ge){const Ie=nt.substr(0,Ge).split(/\r?\n/),$e=Ie.length,gt=Ie[$e-1].length+1;return{line:$e,column:gt}}function re(nt,Ge,Ie){if(Ge>1){const $e=/\r?\n/g;let gt;for(;gt=$e.exec(nt);)if(--Ge===1)return gt.index+Ie}return Ie-1}function te(nt,Ge){const Ie=Math.max(0,Ge-20),$e=nt.substr(Ie,Ge-Ie);return(Ge>20?"...":"")+$e.replace(/\r?\n/g,"")}function V(nt,Ge){let Ie=Math.max(0,Ge-20);Ie+=Ge-Ie;const $e=nt.length-Ie;return nt.substr(Ie,Math.min(20,$e)).replace(/\r?\n/g,"")+($e>20?"...":"")}function ne(nt,Ge){const Ie=te(nt,Ge),$e=V(nt,Ge),gt=`${new Array(Ie.length+1).join("-")}^`;return{excerpt:Ie+$e,pointer:gt}}function G(nt){let Ge=nt.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Ie=Ge.charAt(0);return Ie>="a"&&(Ge=Ie.toUpperCase()+Ge.substr(1)),Ge}function le(nt,Ge){const Ie=/ in JSON at position (\d+)$/.exec(Ge);if(Ie){const $e=+Ie[1],gt=$(nt,$e);return{offset:$e,line:gt.line,column:gt.column,reason:Ge.substr(0,Ie.index)}}}function fe(nt,Ge){const Ie=/ end of JSON input$/.exec(Ge);if(Ie){const $e=nt.length,gt=$(nt,$e);return{offset:$e,line:gt.line,column:gt.column,reason:Ge.substr(0,Ie.index+4)}}}function pe(nt,Ge){const Ie=/ at line (\d+) column (\d+) of the JSON data$/.exec(Ge);if(Ie){const $e=+Ie[1],gt=+Ie[2];return{offset:re(nt,$e,gt),line:$e,column:gt,reason:Ge.substr(0,Ie.index)}}}function we(nt,Ge,Ie,$e,gt){const Dt=ne(Ge,Ie),ut=Dt.excerpt;let Rt,St;return typeof $e=="number"?(St=Dt.pointer,Rt=`Parse error on line ${$e}, column ${gt}:
${ut}
${St}
${nt}`):Rt=`Parse error in JSON input:
${ut}
${nt}`,{message:Rt,excerpt:ut,pointer:St}}function Se(nt,Ge){let Ie=G(Ge);const $e=le(nt,Ie)||fe(nt,Ie)||pe(nt,Ie);let gt,Dt,ut;$e?(gt=$e.offset,Dt=$e.line,ut=$e.column,Ie=$e.reason):gt=0,Ge.reason=Ie;const Rt=we(Ie,nt,gt,Dt,ut);return Ge.message=Rt.message,Ge.excerpt=Rt.excerpt,Rt.pointer&&(Ge.pointer=Rt.pointer,Ge.location={start:{column:ut,line:Dt,offset:gt}}),Ge}function xe(nt,Ge){try{return JSON.parse(nt,Ge)}catch(Ie){const $e=Se(nt,Ie);if(Ie.location)throw $e;return R(nt,Ge)}}const je=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),Me=typeof process<"u"&&process.version.startsWith("v4.");function rt(nt){return nt.ignoreBOM||nt.ignoreComments||nt.ignoreTrailingCommas||nt.allowSingleQuotedStrings||nt.allowDuplicateObjectKeys===!1||nt.ignoreProtoKey||nt.ignorePrototypeKeys||nt.mode==="cjson"||nt.mode==="json5"||je||Me}function Ct(nt){if(typeof nt=="function")return nt;if(nt)return nt.reviver}function it(nt,Ge){return Ge||(Ge={}),rt(Ge)?R(nt,Ge):xe(nt,Ct(Ge))}t.parse=it,t.tokenize=P,t.pathToPointer=N,t.pointerToPath=X,t.parseNative=xe,t.parseCustom=R,t.getErrorTexts=we,Object.defineProperty(t,"__esModule",{value:!0})})}(Xv,Xv.exports)),Xv.exports}var ose=ise(),A2={exports:{}},sse=A2.exports,jT;function ase(){return jT||(jT=1,function(n,e){(function(t,r){n.exports=r()})(sse,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Pe,Re){return Re={exports:{}},Pe(Re,Re.exports),Re.exports}var i=r(function(Pe){function Re(){var Ye=0,vt=1,yt=2,Et=3,Zt=4,Ut=5,An=6,hr=7,Vt=8,Vn=9,Pn=10,Dn=11,Ln=12,Ir=13,rr=14,Yn=15,We=16,he=17,me=0,et=1,bt=2,Yt=3,Jt=4;function ir(p,Ne){return 55296<=p.charCodeAt(Ne)&&p.charCodeAt(Ne)<=56319&&56320<=p.charCodeAt(Ne+1)&&p.charCodeAt(Ne+1)<=57343}function Xe(p,Ne){Ne===void 0&&(Ne=0);var Ve=p.charCodeAt(Ne);if(55296<=Ve&&Ve<=56319&&Ne<p.length-1){var Te=Ve,lt=p.charCodeAt(Ne+1);return 56320<=lt&&lt<=57343?(Te-55296)*1024+(lt-56320)+65536:Te}if(56320<=Ve&&Ve<=57343&&Ne>=1){var Te=p.charCodeAt(Ne-1),lt=Ve;return 55296<=Te&&Te<=56319?(Te-55296)*1024+(lt-56320)+65536:lt}return Ve}function ae(p,Ne,Ve){var Te=[p].concat(Ne).concat([Ve]),lt=Te[Te.length-2],ct=Ve,Ft=Te.lastIndexOf(rr);if(Ft>1&&Te.slice(1,Ft).every(function(nn){return nn==Et})&&[Et,Ir,he].indexOf(p)==-1)return bt;var jt=Te.lastIndexOf(Zt);if(jt>0&&Te.slice(1,jt).every(function(nn){return nn==Zt})&&[Ln,Zt].indexOf(lt)==-1)return Te.filter(function(nn){return nn==Zt}).length%2==1?Yt:Jt;if(lt==Ye&&ct==vt)return me;if(lt==yt||lt==Ye||lt==vt)return ct==rr&&Ne.every(function(nn){return nn==Et})?bt:et;if(ct==yt||ct==Ye||ct==vt)return et;if(lt==An&&(ct==An||ct==hr||ct==Vn||ct==Pn))return me;if((lt==Vn||lt==hr)&&(ct==hr||ct==Vt))return me;if((lt==Pn||lt==Vt)&&ct==Vt)return me;if(ct==Et||ct==Yn)return me;if(ct==Ut)return me;if(lt==Ln)return me;var Gt=Te.indexOf(Et)!=-1?Te.lastIndexOf(Et)-1:Te.length-2;return[Ir,he].indexOf(Te[Gt])!=-1&&Te.slice(Gt+1,-1).every(function(nn){return nn==Et})&&ct==rr||lt==Yn&&[We,he].indexOf(ct)!=-1?me:Ne.indexOf(Zt)!=-1?bt:lt==Zt&&ct==Zt?me:et}this.nextBreak=function(p,Ne){if(Ne===void 0&&(Ne=0),Ne<0)return 0;if(Ne>=p.length-1)return p.length;for(var Ve=ve(Xe(p,Ne)),Te=[],lt=Ne+1;lt<p.length;lt++)if(!ir(p,lt-1)){var ct=ve(Xe(p,lt));if(ae(Ve,Te,ct))return lt;Te.push(ct)}return p.length},this.splitGraphemes=function(p){for(var Ne=[],Ve=0,Te;(Te=this.nextBreak(p,Ve))<p.length;)Ne.push(p.slice(Ve,Te)),Ve=Te;return Ve<p.length&&Ne.push(p.slice(Ve)),Ne},this.iterateGraphemes=function(p){var Ne=0,Ve={next:(function(){var Te,lt;return(lt=this.nextBreak(p,Ne))<p.length?(Te=p.slice(Ne,lt),Ne=lt,{value:Te,done:!1}):Ne<p.length?(Te=p.slice(Ne),Ne=p.length,{value:Te,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Ve[Symbol.iterator]=function(){return Ve}),Ve},this.countGraphemes=function(p){for(var Ne=0,Ve=0,Te;(Te=this.nextBreak(p,Ve))<p.length;)Ve=Te,Ne++;return Ve<p.length&&Ne++,Ne};function ve(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?Ln:p==13?Ye:p==10?vt:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?yt:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?Et:127462<=p&&p<=127487?Zt:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?Ut:4352<=p&&p<=4447||43360<=p&&p<=43388?An:4448<=p&&p<=4519||55216<=p&&p<=55238?hr:4520<=p&&p<=4607||55243<=p&&p<=55291?Vt:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?Vn:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?Pn:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?Ir:127995<=p&&p<=127999?rr:p==8205?Yn:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?We:128102<=p&&p<=128105?he:Dn}return this}Pe.exports&&(Pe.exports=Re)}),s=new i,l=function(Re,Ye,vt){for(var yt=s.iterateGraphemes(Re.substring(Ye)),Et="",Zt=0;Zt<vt-Ye;Zt++){var Ut=yt.next();if(Et+=Ut.value,Ut.done)break}return Et},o=function(Pe,Re,Ye,vt,yt,Et,Zt){return{start:{line:Pe,column:Re,offset:Ye},end:{line:vt,column:yt,offset:Et},source:Zt||null}},f=r(function(Pe,Re){(function(Ye,vt){Pe.exports=vt()})(t,function(){var Ye="",vt,yt=Et;function Et(Pn,Dn){if(typeof Pn!="string")throw new TypeError("expected a string");if(Dn===1)return Pn;if(Dn===2)return Pn+Pn;var Ln=Pn.length*Dn;if(vt!==Pn||typeof vt>"u")vt=Pn,Ye="";else if(Ye.length>=Ln)return Ye.substr(0,Ln);for(;Ln>Ye.length&&Dn>1;)Dn&1&&(Ye+=Pn),Dn>>=1,Pn+=Pn;return Ye+=Pn,Ye=Ye.substr(0,Ln),Ye}var Zt=function(Dn,Ln,Ir){if(Dn==null||Ln==null)return Dn;var rr=String(Dn),Yn=typeof Ln=="number"?Ln:parseInt(Ln,10);if(isNaN(Yn)||!isFinite(Yn))return rr;var We=rr.length;if(We>=Yn)return rr;var he=String(Ir);he===""&&(he=" ");for(var me=Yn-We;he.length<me;)he+=he;var et=he.length>me?he.substr(0,me):he;return et+rr},Ut=Object.assign||function(Pn){for(var Dn=1;Dn<arguments.length;Dn++){var Ln=arguments[Dn];for(var Ir in Ln)Object.prototype.hasOwnProperty.call(Ln,Ir)&&(Pn[Ir]=Ln[Ir])}return Pn};function An(Pn,Dn,Ln,Ir){var rr=String(Dn),Yn=Zt(rr,Ln," "),We=yt(" ",Ir.tabSize);return Yn+" | "+Pn.replace(/\t/g,We)}function hr(Pn,Dn,Ln,Ir,rr){return Pn.slice(Dn,Ln).map(function(Yn,We){return An(Yn,Dn+We+1,Ir,rr)}).join(`
`)}var Vt={extraLines:2,tabSize:4},Vn=function(Dn,Ln,Ir,rr){rr=Ut({},Vt,rr);var Yn=Dn.split(/\r\n?|\n|\f/),We=Math.max(1,Ln-rr.extraLines)-1,he=Math.min(Ln+rr.extraLines,Yn.length),me=String(he).length,et=hr(Yn,We,Ln,me,rr),bt=An(Yn[Ln-1].substring(0,Ir-1),Ln,me,rr),Yt=yt(" ",bt.length)+"^",Jt=hr(Yn,Ln,he,me,rr);return[et,Yt,Jt].filter(Boolean).join(`
`)};return Vn})}),C=new Error().stack,x=function(Pe){var Re=Object.create(SyntaxError.prototype);return Object.assign(Re,Pe,{name:"SyntaxError"}),Object.defineProperty(Re,"stack",{get:function(){return C?C.replace(/^(.+\n){1,3}/,String(Re)+`
`):""}}),Re},B=function(Pe,Re,Ye,vt,yt){throw x({message:vt?Pe+`
`+f(Re,vt,yt):Pe,rawMessage:Pe,source:Ye,line:vt,column:yt})},R={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Re){for(var Ye=arguments.length,vt=Array(Ye>1?Ye-1:0),yt=1;yt<Ye;yt++)vt[yt-1]=arguments[yt];return"Unexpected token <"+Re+"> at "+vt.filter(Boolean).join(":")}},P={unexpectedSymbol:function(Re){for(var Ye=arguments.length,vt=Array(Ye>1?Ye-1:0),yt=1;yt<Ye;yt++)vt[yt-1]=arguments[yt];return"Unexpected symbol <"+Re+"> at "+vt.filter(Boolean).join(":")}},U={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},N={"{":U.LEFT_BRACE,"}":U.RIGHT_BRACE,"[":U.LEFT_BRACKET,"]":U.RIGHT_BRACKET,":":U.COLON,",":U.COMMA},W={true:U.TRUE,false:U.FALSE,null:U.NULL},X={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},$={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},re={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function te(Pe){return Pe>="1"&&Pe<="9"}function V(Pe){return Pe>="0"&&Pe<="9"}function ne(Pe){return V(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function G(Pe){return Pe==="e"||Pe==="E"}function le(Pe,Re,Ye,vt){var yt=Pe.charAt(Re);if(yt==="\r")Re++,Ye++,vt=1,Pe.charAt(Re)===`
`&&Re++;else if(yt===`
`)Re++,Ye++,vt=1;else if(yt==="	"||yt===" ")Re++,vt++;else return null;return{index:Re,line:Ye,column:vt}}function fe(Pe,Re,Ye,vt){var yt=Pe.charAt(Re);return yt in N?{type:N[yt],line:Ye,column:vt+1,index:Re+1,value:null}:null}function pe(Pe,Re,Ye,vt){for(var yt in W)if(W.hasOwnProperty(yt)&&Pe.substr(Re,yt.length)===yt)return{type:W[yt],line:Ye,column:vt+yt.length,index:Re+yt.length,value:yt};return null}function we(Pe,Re,Ye,vt){for(var yt=Re,Et=X._START_;Re<Pe.length;){var Zt=Pe.charAt(Re);switch(Et){case X._START_:{if(Zt==='"')Re++,Et=X.START_QUOTE_OR_CHAR;else return null;break}case X.START_QUOTE_OR_CHAR:{if(Zt==="\\")Re++,Et=X.ESCAPE;else{if(Zt==='"')return Re++,{type:U.STRING,line:Ye,column:vt+Re-yt,index:Re,value:Pe.slice(yt,Re)};Re++}break}case X.ESCAPE:{if(Zt in $){if(Re++,Zt==="u")for(var Ut=0;Ut<4;Ut++){var An=Pe.charAt(Re);if(An&&ne(An))Re++;else return null}Et=X.START_QUOTE_OR_CHAR}else return null;break}}}}function Se(Pe,Re,Ye,vt){var yt=Re,Et=Re,Zt=re._START_;e:for(;Re<Pe.length;){var Ut=Pe.charAt(Re);switch(Zt){case re._START_:{if(Ut==="-")Zt=re.MINUS;else if(Ut==="0")Et=Re+1,Zt=re.ZERO;else if(te(Ut))Et=Re+1,Zt=re.DIGIT;else return null;break}case re.MINUS:{if(Ut==="0")Et=Re+1,Zt=re.ZERO;else if(te(Ut))Et=Re+1,Zt=re.DIGIT;else return null;break}case re.ZERO:{if(Ut===".")Zt=re.POINT;else if(G(Ut))Zt=re.EXP;else break e;break}case re.DIGIT:{if(V(Ut))Et=Re+1;else if(Ut===".")Zt=re.POINT;else if(G(Ut))Zt=re.EXP;else break e;break}case re.POINT:{if(V(Ut))Et=Re+1,Zt=re.DIGIT_FRACTION;else break e;break}case re.DIGIT_FRACTION:{if(V(Ut))Et=Re+1;else if(G(Ut))Zt=re.EXP;else break e;break}case re.EXP:{if(Ut==="+"||Ut==="-")Zt=re.EXP_DIGIT_OR_SIGN;else if(V(Ut))Et=Re+1,Zt=re.EXP_DIGIT_OR_SIGN;else break e;break}case re.EXP_DIGIT_OR_SIGN:{if(V(Ut))Et=Re+1;else break e;break}}Re++}return Et>0?{type:U.NUMBER,line:Ye,column:vt+Et-yt,index:Et,value:Pe.slice(yt,Et)}:null}var xe=function(Re,Ye){for(var vt=1,yt=1,Et=0,Zt=[];Et<Re.length;){var Ut=[Re,Et,vt,yt],An=le.apply(void 0,Ut);if(An){Et=An.index,vt=An.line,yt=An.column;continue}var hr=fe.apply(void 0,Ut)||pe.apply(void 0,Ut)||we.apply(void 0,Ut)||Se.apply(void 0,Ut);if(hr){var Vt={type:hr.type,value:hr.value,loc:o(vt,yt,Et,hr.line,hr.column,hr.index,Ye.source)};Zt.push(Vt),Et=hr.index,vt=hr.line,yt=hr.column}else B(P.unexpectedSymbol(l(Re,Et,Et+1),Ye.source,vt,yt),Re,Ye.source,vt,yt)}return Zt},je={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},Me={_START_:0,KEY:1,COLON:2},rt={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ct={loc:!0,source:null};function it(Pe,Re,Ye){var vt=Re.length>0?Re[Re.length-1].loc.end:{line:1,column:1};B(R.unexpectedEnd(),Pe,Ye.source,vt.line,vt.column)}function nt(Pe){for(var Re=0,Ye=0;Ye<4;Ye++)Re=Re*16+parseInt(Pe[Ye],16);return String.fromCharCode(Re)}var Ge={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Ie=['"',"\\","/"];function $e(Pe){for(var Re="",Ye=0;Ye<Pe.length;Ye++){var vt=Pe.charAt(Ye);if(vt==="\\"){Ye++;var yt=Pe.charAt(Ye);if(yt==="u")Re+=nt(Pe.substr(Ye+1,4)),Ye+=4;else if(Ie.indexOf(yt)!==-1)Re+=yt;else if(yt in Ge)Re+=Ge[yt];else break}else Re+=vt}return Re}function gt(Pe,Re,Ye,vt){for(var yt=void 0,Et={type:"Object",children:[]},Zt=je._START_;Ye<Re.length;){var Ut=Re[Ye];switch(Zt){case je._START_:{if(Ut.type===U.LEFT_BRACE)yt=Ut,Zt=je.OPEN_OBJECT,Ye++;else return null;break}case je.OPEN_OBJECT:{if(Ut.type===U.RIGHT_BRACE)return vt.loc&&(Et.loc=o(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Ut.loc.end.line,Ut.loc.end.column,Ut.loc.end.offset,vt.source)),{value:Et,index:Ye+1};var An=Dt(Pe,Re,Ye,vt);Et.children.push(An.value),Zt=je.PROPERTY,Ye=An.index;break}case je.PROPERTY:{if(Ut.type===U.RIGHT_BRACE)return vt.loc&&(Et.loc=o(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Ut.loc.end.line,Ut.loc.end.column,Ut.loc.end.offset,vt.source)),{value:Et,index:Ye+1};Ut.type===U.COMMA?(Zt=je.COMMA,Ye++):B(R.unexpectedToken(l(Pe,Ut.loc.start.offset,Ut.loc.end.offset),vt.source,Ut.loc.start.line,Ut.loc.start.column),Pe,vt.source,Ut.loc.start.line,Ut.loc.start.column);break}case je.COMMA:{var hr=Dt(Pe,Re,Ye,vt);hr?(Ye=hr.index,Et.children.push(hr.value),Zt=je.PROPERTY):B(R.unexpectedToken(l(Pe,Ut.loc.start.offset,Ut.loc.end.offset),vt.source,Ut.loc.start.line,Ut.loc.start.column),Pe,vt.source,Ut.loc.start.line,Ut.loc.start.column);break}}}it(Pe,Re,vt)}function Dt(Pe,Re,Ye,vt){for(var yt=void 0,Et={type:"Property",key:null,value:null},Zt=Me._START_;Ye<Re.length;){var Ut=Re[Ye];switch(Zt){case Me._START_:{if(Ut.type===U.STRING){var An={type:"Identifier",value:$e(Pe.slice(Ut.loc.start.offset+1,Ut.loc.end.offset-1)),raw:Ut.value};vt.loc&&(An.loc=Ut.loc),yt=Ut,Et.key=An,Zt=Me.KEY,Ye++}else return null;break}case Me.KEY:{Ut.type===U.COLON?(Zt=Me.COLON,Ye++):B(R.unexpectedToken(l(Pe,Ut.loc.start.offset,Ut.loc.end.offset),vt.source,Ut.loc.start.line,Ut.loc.start.column),Pe,vt.source,Ut.loc.start.line,Ut.loc.start.column);break}case Me.COLON:{var hr=St(Pe,Re,Ye,vt);return Et.value=hr.value,vt.loc&&(Et.loc=o(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,hr.value.loc.end.line,hr.value.loc.end.column,hr.value.loc.end.offset,vt.source)),{value:Et,index:hr.index}}}}}function ut(Pe,Re,Ye,vt){for(var yt=void 0,Et={type:"Array",children:[]},Zt=rt._START_,Ut=void 0;Ye<Re.length;)switch(Ut=Re[Ye],Zt){case rt._START_:{if(Ut.type===U.LEFT_BRACKET)yt=Ut,Zt=rt.OPEN_ARRAY,Ye++;else return null;break}case rt.OPEN_ARRAY:{if(Ut.type===U.RIGHT_BRACKET)return vt.loc&&(Et.loc=o(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Ut.loc.end.line,Ut.loc.end.column,Ut.loc.end.offset,vt.source)),{value:Et,index:Ye+1};var An=St(Pe,Re,Ye,vt);Ye=An.index,Et.children.push(An.value),Zt=rt.VALUE;break}case rt.VALUE:{if(Ut.type===U.RIGHT_BRACKET)return vt.loc&&(Et.loc=o(yt.loc.start.line,yt.loc.start.column,yt.loc.start.offset,Ut.loc.end.line,Ut.loc.end.column,Ut.loc.end.offset,vt.source)),{value:Et,index:Ye+1};Ut.type===U.COMMA?(Zt=rt.COMMA,Ye++):B(R.unexpectedToken(l(Pe,Ut.loc.start.offset,Ut.loc.end.offset),vt.source,Ut.loc.start.line,Ut.loc.start.column),Pe,vt.source,Ut.loc.start.line,Ut.loc.start.column);break}case rt.COMMA:{var hr=St(Pe,Re,Ye,vt);Ye=hr.index,Et.children.push(hr.value),Zt=rt.VALUE;break}}it(Pe,Re,vt)}function Rt(Pe,Re,Ye,vt){var yt=Re[Ye],Et=null;switch(yt.type){case U.STRING:{Et=$e(Pe.slice(yt.loc.start.offset+1,yt.loc.end.offset-1));break}case U.NUMBER:{Et=Number(yt.value);break}case U.TRUE:{Et=!0;break}case U.FALSE:{Et=!1;break}case U.NULL:{Et=null;break}default:return null}var Zt={type:"Literal",value:Et,raw:yt.value};return vt.loc&&(Zt.loc=yt.loc),{value:Zt,index:Ye+1}}function St(Pe,Re,Ye,vt){var yt=Re[Ye],Et=Rt.apply(void 0,arguments)||gt.apply(void 0,arguments)||ut.apply(void 0,arguments);if(Et)return Et;B(R.unexpectedToken(l(Pe,yt.loc.start.offset,yt.loc.end.offset),vt.source,yt.loc.start.line,yt.loc.start.column),Pe,vt.source,yt.loc.start.line,yt.loc.start.column)}var Ke=function(Pe,Re){Re=Object.assign({},Ct,Re);var Ye=xe(Pe,Re);Ye.length===0&&it(Pe,Ye,Re);var vt=St(Pe,Ye,0,Re);if(vt.index===Ye.length)return vt.value;var yt=Ye[vt.index];B(R.unexpectedToken(l(Pe,yt.loc.start.offset,yt.loc.end.offset),Re.source,yt.loc.start.line,yt.loc.start.column),Pe,Re.source,yt.loc.start.line,yt.loc.start.column)};return Ke})}(A2)),A2.exports}var lse=ase();const Ase=Gl(lse);function pr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return pr=function(){return l},l}pr();pr().s[0]++;bp.defineMode("mgl",(n,e)=>(pr().f[0]++,pr().s[1]++,bp.modes.javascript({...n,json:!0},e)));function KN(n){pr().f[1]++;const e=(pr().s[2]++,[]);pr().s[3]++;try{pr().s[4]++,ose.parse(n)}catch(t){const r=(pr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(pr().s[6]++,r){pr().b[0][0]++;const i=(pr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});pr().s[8]++,e.push({from:bp.Pos(i.first_line-1,i.first_column),to:bp.Pos(i.last_line-1,i.last_column),message:t})}else pr().b[0][1]++}return pr().s[9]++,e}pr().s[10]++;bp.registerHelper("lint","json",n=>(pr().f[2]++,pr().s[11]++,KN(n)));pr().s[12]++;bp.registerHelper("lint","mgl",(n,e,t)=>{pr().f[3]++;const r=(pr().s[13]++,KN(n)),{context:i}=(pr().s[14]++,e);if(pr().s[15]++,r.length>0)return pr().b[1][0]++,pr().s[16]++,r;pr().b[1][1]++;const s=(pr().s[17]++,Ase(n)),l=(pr().s[18]++,JSON.parse(n));function o(C,x){if(pr().f[4]++,pr().s[19]++,C){if(pr().b[2][1]++,pr().s[21]++,x.length<1)return pr().b[3][0]++,pr().s[22]++,C;if(pr().b[3][1]++,pr().s[23]++,C.children){pr().b[4][1]++;const B=(pr().s[25]++,x[0]);let R;return pr().s[26]++,B.match(/^[0-9]+$/)?(pr().b[5][0]++,pr().s[27]++,R=C.children[x[0]]):(pr().b[5][1]++,pr().s[28]++,R=C.children.find(P=>(pr().f[5]++,pr().s[29]++,pr().b[6][0]++,P.key&&(pr().b[6][1]++,P.key.type==="Identifier")&&(pr().b[6][2]++,P.key.value===B))),pr().s[30]++,R?(pr().b[7][0]++,pr().s[31]++,R=R.value):pr().b[7][1]++),pr().s[32]++,o(R,x.slice(1))}else{pr().b[4][0]++,pr().s[24]++;return}}else{pr().b[2][0]++,pr().s[20]++;return}}let f=(pr().s[33]++,null);if(pr().s[34]++,i==="layer"){pr().b[8][0]++;const C=(pr().s[35]++,lf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));pr().s[36]++,C?(pr().b[9][0]++,pr().s[37]++,f={result:"error",value:C.filter(x=>(pr().f[6]++,pr().s[38]++,!x.message.match(/^layers\[0\]: source ".*" not found$/))).map(x=>{pr().f[7]++;const B=(pr().s[39]++,x.message.replace(/^layers\[0\]./,"").split(":"));return pr().s[40]++,{name:"",key:B[0],message:B[1]}})}):pr().b[9][1]++}else if(pr().b[8][1]++,pr().s[41]++,i==="expression")pr().b[10][0]++,pr().s[42]++,f=L$.createExpression(l,e.spec);else throw pr().b[10][1]++,pr().s[43]++,new Error(`Invalid context ${i}`);if(pr().s[44]++,f?.result==="error"){pr().b[11][0]++;const C=(pr().s[45]++,f.value);pr().s[46]++,C.forEach(x=>{pr().f[8]++;const{key:B,message:R}=(pr().s[47]++,x);if(pr().s[48]++,B)if(pr().b[12][1]++,pr().s[52]++,B){pr().b[13][0]++;const P=(pr().s[53]++,B.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),U=(pr().s[54]++,o(s,P));if(pr().s[55]++,U)pr().b[14][1]++;else{pr().b[14][0]++,pr().s[56]++,console.warn("Something went wrong parsing error:",x),pr().s[57]++;return}const{loc:N}=(pr().s[58]++,U),{start:W,end:X}=(pr().s[59]++,N);pr().s[60]++,r.push({from:bp.Pos(W.line-1,W.column),to:bp.Pos(X.line-1,X.column),message:R})}else pr().b[13][1]++;else{pr().b[12][0]++;const P=(pr().s[49]++,t.getLineHandle(t.lastLine())),U=(pr().s[50]++,{from:bp.Pos(t.firstLine(),0),to:bp.Pos(t.lastLine(),P.text.length),message:R});pr().s[51]++,r.push(U)}})}else pr().b[11][1]++;return pr().s[61]++,r});function _r(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _r=function(){return l},l}_r();class use extends ur.Component{static defaultProps=(_r().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:e=>(_r().f[0]++,_r().s[1]++,DN(e,{indent:2,maxLength:40})),onFocus:()=>{_r().f[1]++},onBlur:()=>{_r().f[2]++},onJSONInvalid:()=>{_r().f[3]++},onJSONValid:()=>{_r().f[4]++}});_keyEvent;_doc;_el=(_r().s[2]++,null);_cancelNextChange=(_r().s[3]++,!1);constructor(e){_r().f[5]++,_r().s[4]++,super(e),_r().s[5]++,this._keyEvent="keyboard",_r().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){_r().f[6]++,_r().s[7]++,this._doc=bp(this._el,{value:this.props.getValue(this.props.layer),mode:(_r().b[0][0]++,this.props.mode||(_r().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(_r().b[1][0]++,this.props.lint||(_r().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),_r().s[8]++,this._doc.on("change",this.onChange),_r().s[9]++,this._doc.on("focus",this.onFocus),_r().s[10]++,this._doc.on("blur",this.onBlur)}onPointerDown=(_r().s[11]++,()=>{_r().f[7]++,_r().s[12]++,this._keyEvent="pointer"});onFocus=(_r().s[13]++,()=>{_r().f[8]++,_r().s[14]++,this.props.onFocus?(_r().b[2][0]++,_r().s[15]++,this.props.onFocus()):_r().b[2][1]++,_r().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})});onBlur=(_r().s[17]++,()=>{_r().f[9]++,_r().s[18]++,this._keyEvent="keyboard",_r().s[19]++,this.props.onBlur?(_r().b[3][0]++,_r().s[20]++,this.props.onBlur()):_r().b[3][1]++,_r().s[21]++,this.setState({isEditing:!1,showMessage:!1})});componentWillUnMount(){_r().f[10]++,_r().s[22]++,this._doc.off("change",this.onChange),_r().s[23]++,this._doc.off("focus",this.onFocus),_r().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(e){_r().f[11]++,_r().s[25]++,_r().b[5][0]++,!this.state.isEditing&&(_r().b[5][1]++,e.layer!==this.props.layer)?(_r().b[4][0]++,_r().s[26]++,this._cancelNextChange=!0,_r().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):_r().b[4][1]++}onChange=(_r().s[28]++,e=>{if(_r().f[12]++,_r().s[29]++,this._cancelNextChange){_r().b[6][0]++,_r().s[30]++,this._cancelNextChange=!1,_r().s[31]++,this.setState({prevValue:this._doc.getValue()}),_r().s[32]++;return}else _r().b[6][1]++;const t=(_r().s[33]++,this._doc.getValue());if(_r().s[34]++,this.state.prevValue!==t){_r().b[7][0]++;let r,i;_r().s[35]++;try{_r().s[36]++,r=JSON.parse(t)}catch(s){_r().s[37]++,i=s,_r().s[38]++,console.warn(s)}_r().s[39]++,_r().b[9][0]++,i&&(_r().b[9][1]++,this.props.onJSONInvalid)?(_r().b[8][0]++,_r().s[40]++,this.props.onJSONInvalid()):(_r().b[8][1]++,_r().s[41]++,this.props.onChange?(_r().b[10][0]++,_r().s[42]++,this.props.onChange(r)):_r().b[10][1]++,_r().s[43]++,this.props.onJSONValid?(_r().b[11][0]++,_r().s[44]++,this.props.onJSONValid()):_r().b[11][1]++)}else _r().b[7][1]++;_r().s[45]++,this.setState({prevValue:t})});render(){_r().f[13]++;const e=(_r().s[46]++,this.props.t),{showMessage:t}=(_r().s[47]++,this.state),r=(_r().s[48]++,{});return _r().s[49]++,this.props.maxHeight?(_r().b[12][0]++,_r().s[50]++,r.maxHeight=this.props.maxHeight):_r().b[12][1]++,_r().s[51]++,oe.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[oe.jsx("div",{className:dm("JSONEditor__message",{"JSONEditor__message--on":t}),children:oe.jsxs(U0,{t:e,children:["Press ",oe.jsx("kbd",{children:"ESC"})," to lose focus"]})}),oe.jsx("div",{className:dm("codemirror-container",this.props.className),ref:i=>(_r().f[14]++,_r().s[52]++,this._el=i),style:r})]})}}const cse=(_r().s[53]++,Us()(use));function VC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ba883449bc5c5bdef8990a340e3c3a506f463d35",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAiC;AAMxC,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ba883449bc5c5bdef8990a340e3c3a506f463d35"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return VC=function(){return l},l}VC();VC().s[0]++;const dI=n=>(VC().f[0]++,VC().s[1]++,oe.jsx(cse,{...n}));var HC="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",hse="M7,10L12,15L17,10H7Z",dse="M7,15L12,10L17,15H7Z",fI="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function j1(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return j1=function(){return l},l}j1();const pI=(j1().s[0]++,["all","any","none"]);j1().s[1]++;const fse=(j1().s[2]++,Object.keys(Xo.filter_operator.values).filter(n=>(j1().f[0]++,j1().s[3]++,pI.indexOf(n)<0)));function Ei(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ei=function(){return l},l}Ei();function pse(n){return Ei().f[0]++,Ei().s[0]++,n===""?(Ei().b[0][0]++,Ei().s[1]++,n):(Ei().b[0][1]++,Ei().s[2]++,isNaN(n)?(Ei().b[1][0]++,Ei().s[3]++,n):(Ei().b[1][1]++,Ei().s[4]++,parseFloat(n)))}function mse(n){Ei().f[1]++;const e=(Ei().s[5]++,typeof n=="string");if(Ei().s[6]++,e)Ei().b[2][1]++;else return Ei().b[2][0]++,Ei().s[7]++,n;return Ei().s[8]++,n.match(/^\s*true\s*$/)?(Ei().b[3][0]++,Ei().s[9]++,!0):(Ei().b[3][1]++,Ei().s[10]++,n.match(/^\s*false\s*$/)?(Ei().b[4][0]++,Ei().s[11]++,!1):(Ei().b[4][1]++,Ei().s[12]++,n))}function gse(n){return Ei().f[2]++,Ei().s[13]++,n=pse(n),Ei().s[14]++,n=mse(n),Ei().s[15]++,n}class yse extends ur.Component{static defaultProps=(Ei().s[16]++,{properties:{}});onFilterPartChanged(e,t,r){Ei().f[3]++;let i=(Ei().s[17]++,[e,t,...r.map(gse)]);Ei().s[18]++,Ei().b[6][0]++,e==="has"||(Ei().b[6][1]++,e==="!has")?(Ei().b[5][0]++,Ei().s[19]++,i=[e,t]):(Ei().b[5][1]++,Ei().s[20]++,r.length===0?(Ei().b[7][0]++,Ei().s[21]++,i=[e,t,""]):Ei().b[7][1]++),Ei().s[22]++,this.props.onChange(i)}render(){Ei().f[4]++;const e=(Ei().s[23]++,this.props.filter),t=(Ei().s[24]++,e[0]),r=(Ei().s[25]++,e[1]),i=(Ei().s[26]++,e.slice(2));return Ei().s[27]++,oe.jsxs("div",{className:"maputnik-filter-editor-single",children:[oe.jsx("div",{className:"maputnik-filter-editor-property",children:oe.jsx(T_,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(Ei().f[5]++,Ei().s[28]++,[s,s])),onChange:s=>(Ei().f[6]++,Ei().s[29]++,this.onFilterPartChanged(t,s,i))})}),oe.jsx("div",{className:"maputnik-filter-editor-operator",children:oe.jsx(sg,{"aria-label":"function",value:t,onChange:s=>(Ei().f[7]++,Ei().s[30]++,this.onFilterPartChanged(s,r,i)),options:fse})}),(Ei().b[8][0]++,i.length>0&&(Ei().b[8][1]++,oe.jsx("div",{className:"maputnik-filter-editor-args",children:oe.jsx(Sp,{"aria-label":"value",value:i.join(","),onChange:s=>(Ei().f[8]++,Ei().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}function xy(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="13a2e2db8b749f303c3bce9d46fec729506d3ee2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"13a2e2db8b749f303c3bce9d46fec729506d3ee2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xy=function(){return l},l}xy();class vse extends ur.Component{render(){xy().f[0]++;const e=(xy().s[0]++,this.props.t);return xy().s[1]++,oe.jsxs("div",{className:"maputnik-filter-editor-block",children:[oe.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),oe.jsx("div",{className:"maputnik-filter-editor-block-action",children:oe.jsx(el,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:oe.jsx(qy,{})})})]})}}const Cse=(xy().s[2]++,Us()(vse));var KM,WT;function _se(){if(WT)return KM;WT=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",l="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+o+")",C="[^"+e+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",R="\\u200d",P=f+"?",U="["+i+"]?",N="(?:"+R+"(?:"+[C,x,B].join("|")+")"+U+P+")*",W=U+P+N,X="(?:"+[C+l+"?",l,x,B,s].join("|")+")",$=RegExp(o+"(?="+o+")|"+X+W,"g"),re=RegExp("["+R+e+t+r+i+"]"),te=typeof window=="object"&&window&&window.Object===Object&&window,V=typeof self=="object"&&self&&self.Object===Object&&self,ne=te||V||Function("return this")();function G(ut){return ut.split("")}function le(ut){return re.test(ut)}function fe(ut){return le(ut)?pe(ut):G(ut)}function pe(ut){return ut.match($)||[]}var we=Object.prototype,Se=we.toString,xe=ne.Symbol,je=xe?xe.prototype:void 0,Me=je?je.toString:void 0;function rt(ut,Rt,St){var Ke=-1,Pe=ut.length;Rt<0&&(Rt=-Rt>Pe?0:Pe+Rt),St=St>Pe?Pe:St,St<0&&(St+=Pe),Pe=Rt>St?0:St-Rt>>>0,Rt>>>=0;for(var Re=Array(Pe);++Ke<Pe;)Re[Ke]=ut[Ke+Rt];return Re}function Ct(ut){if(typeof ut=="string")return ut;if(Ie(ut))return Me?Me.call(ut):"";var Rt=ut+"";return Rt=="0"&&1/ut==-1/0?"-0":Rt}function it(ut,Rt,St){var Ke=ut.length;return St=St===void 0?Ke:St,!Rt&&St>=Ke?ut:rt(ut,Rt,St)}function nt(ut){return function(Rt){Rt=$e(Rt);var St=le(Rt)?fe(Rt):void 0,Ke=St?St[0]:Rt.charAt(0),Pe=St?it(St,1).join(""):Rt.slice(1);return Ke[ut]()+Pe}}function Ge(ut){return!!ut&&typeof ut=="object"}function Ie(ut){return typeof ut=="symbol"||Ge(ut)&&Se.call(ut)==n}function $e(ut){return ut==null?"":Ct(ut)}function gt(ut){return Dt($e(ut).toLowerCase())}var Dt=nt("toUpperCase");return KM=gt,KM}var bse=_se();const mI=Gl(bse);function Zp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zp=function(){return l},l}Zp();function y3(n){Zp().f[0]++;let e;const t=(Zp().s[0]++,n.split("-"));return Zp().s[1]++,t.length>1?(Zp().b[0][0]++,Zp().s[2]++,e=n.split("-").slice(1).join(" ")):(Zp().b[0][1]++,Zp().s[3]++,e=n),Zp().s[4]++,mI(e)}function Eo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Eo=function(){return l},l}Eo();class xse extends ur.Component{static defaultProps=(Eo().s[0]++,{errors:{},onFocus:()=>{Eo().f[0]++},onBlur:()=>{Eo().f[1]++}});constructor(e){Eo().f[2]++,Eo().s[1]++,super(e),Eo().s[2]++,this.state={jsonError:!1}}onJSONInvalid=(Eo().s[3]++,e=>{Eo().f[3]++,Eo().s[4]++,this.setState({jsonError:!0})});onJSONValid=(Eo().s[5]++,()=>{Eo().f[4]++,Eo().s[6]++,this.setState({jsonError:!1})});render(){Eo().f[5]++;const{t:e,errors:t,fieldName:r,fieldType:i,value:s,canUndo:l}=(Eo().s[7]++,this.props),{jsonError:o}=(Eo().s[8]++,this.state),f=(Eo().s[9]++,l?(Eo().b[0][0]++,!l()):(Eo().b[0][1]++,!0)),C=(Eo().s[10]++,oe.jsxs(oe.Fragment,{children:[(Eo().b[1][0]++,this.props.onUndo&&(Eo().b[1][1]++,oe.jsx(el,{onClick:this.props.onUndo,disabled:f,className:"maputnik-delete-stop",title:e("Revert from expression"),children:oe.jsx(TV,{})},"undo_action"))),oe.jsx(el,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:oe.jsx(qy,{})},"delete_action")]})),x=(Eo().s[11]++,i===void 0?(Eo().b[2][0]++,r):(Eo().b[2][1]++,`${i}.${r}`)),B=(Eo().s[12]++,t[x]),R=(Eo().s[13]++,`${x}[`),P=(Eo().s[14]++,[]);function U(N){return Eo().f[6]++,Eo().s[15]++,DN(N,{indent:2,maxLength:38})}return Eo().s[16]++,o?(Eo().b[3][0]++,Eo().s[17]++,P.push({message:"Invalid JSON"})):(Eo().b[3][1]++,Eo().s[18]++,Object.entries(t).filter(([N,W])=>(Eo().f[7]++,Eo().s[19]++,N.startsWith(R))).forEach(([N,W])=>(Eo().f[8]++,Eo().s[20]++,P.push(W))),Eo().s[21]++,B?(Eo().b[4][0]++,Eo().s[22]++,P.push(B)):Eo().b[4][1]++),Eo().s[23]++,oe.jsx(ha,{error:P,fieldSpec:this.props.fieldSpec,label:e(y3(this.props.fieldName)),action:C,wideMode:!0,children:oe.jsx(dI,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:s,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:U,onChange:this.props.onChange})})}}const FN=(Eo().s[24]++,Us()(xse));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Un=function(){return l},l}Un();function w0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,pI.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function Mse(n){return Un().f[1]++,Un().s[9]++,K$(wse(n)).layers[0].filter}function wse(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Sse=(Un().s[11]++,["all","any","none"]);function QT(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,Sse.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,AC(n));return Un().s[15]++,!cx.isEqual(e,n)}function YT(n){return Un().f[4]++,Un().s[16]++,pI.indexOf(n[0])>=0}function Ese(n){return Un().f[5]++,Un().s[17]++,YT(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,YT(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class Bse extends ur.Component{static defaultProps=(Un().s[22]++,{filter:["all"]});constructor(e){Un().f[8]++,Un().s[23]++,super(e),Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:QT(w0(e))}}onFilterPartChanged(e,t){Un().f[9]++;const r=(Un().s[25]++,w0(this.props).slice(0));Un().s[26]++,r[e]=t,Un().s[27]++,this.props.onChange(r)}deleteFilterItem(e){Un().f[10]++;const t=(Un().s[28]++,w0(this.props).slice(0));Un().s[29]++,t.splice(e+1,1),Un().s[30]++,this.props.onChange(t)}addFilterItem=(Un().s[31]++,()=>{Un().f[11]++;const e=(Un().s[32]++,w0(this.props).slice(0));Un().s[33]++,e.push(["==","name",""]),Un().s[34]++,this.props.onChange(e)});onToggleDoc=(Un().s[35]++,e=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:e})});makeFilter=(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(Un().s[39]++,()=>{Un().f[14]++;const e=(Un().s[40]++,w0(this.props));Un().s[41]++,this.props.onChange(Mse(e)),Un().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){Un().f[15]++;const r=(Un().s[43]++,QT(w0(e)));return Un().s[44]++,Un().b[7][0]++,!r&&(Un().b[7][1]++,t.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,r&&(Un().b[9][1]++,t.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:e,t}=(Un().s[49]++,this.props),{displaySimpleFilter:r}=(Un().s[50]++,this.state),i=(Un().s[51]++,{doc:ws.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),s=(Un().s[52]++,["all"]),l=(Un().s[53]++,Un().b[10][0]++,r&&(Un().b[10][1]++,Ese(w0(this.props))));if(Un().s[54]++,l)return Un().b[11][0]++,Un().s[55]++,oe.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[oe.jsx("p",{children:t("Nested filters are not supported.")}),oe.jsxs(el,{onClick:this.makeExpression,title:t("Convert to expression"),children:[oe.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:HC})}),t("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,r){Un().b[12][0]++;const o=(Un().s[57]++,w0(this.props)),f=(Un().s[58]++,o[0]),C=(Un().s[59]++,o.slice(1)),x=(Un().s[60]++,oe.jsx("div",{children:oe.jsx(el,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:HC})})})})),B=(Un().s[61]++,C.map((R,P)=>{Un().f[17]++;const U=(Un().s[62]++,e[`filter[${P+1}]`]);return Un().s[63]++,oe.jsxs("div",{children:[oe.jsx(Cse,{onDelete:this.deleteFilterItem.bind(this,P),children:oe.jsx(yse,{properties:this.props.properties,filter:R,onChange:this.onFilterPartChanged.bind(this,P+1)})},P),(Un().b[13][0]++,U&&(Un().b[13][1]++,oe.jsx("div",{className:"maputnik-inline-error",children:U.message},"error")))]},`block-${P}`)}));return Un().s[64]++,oe.jsxs(oe.Fragment,{children:[oe.jsx(ha,{fieldSpec:i,label:t("Filter"),action:x,children:oe.jsx(sg,{value:f,onChange:R=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,R)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),B,oe.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:oe.jsxs(el,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:fI})})," ",t("Add filter")]})},"buttons"),oe.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:oe.jsx(VO,{fieldSpec:i})},"doc")]})}else{Un().b[12][1]++;const{filter:o}=(Un().s[66]++,this.props);return Un().s[67]++,oe.jsxs(oe.Fragment,{children:[oe.jsx(FN,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(s)},fieldName:"filter",fieldSpec:i,value:o,errors:e,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,oe.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",oe.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const Ose=(Un().s[70]++,Us()(Bse));var Ug={},ld={},zg={},FM,qT;function LN(){if(qT)return FM;qT=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return FM=n,FM}var LM,$T;function Tp(){if($T)return LM;$T=1;var n=LN(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return LM=t,LM}var UM,VT;function k_(){if(VT)return UM;VT=1;var n=Tp(),e=n.Symbol;return UM=e,UM}var zM,HT;function Ise(){if(HT)return zM;HT=1;var n=k_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(l){var o=t.call(l,i),f=l[i];try{l[i]=void 0;var C=!0}catch{}var x=r.call(l);return C&&(o?l[i]=f:delete l[i]),x}return zM=s,zM}var NM,ZT;function Tse(){if(ZT)return NM;ZT=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return NM=t,NM}var GM,XT;function ag(){if(XT)return GM;XT=1;var n=k_(),e=Ise(),t=Tse(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return GM=l,GM}var jM,JT;function Af(){if(JT)return jM;JT=1;var n=Array.isArray;return jM=n,jM}var WM,ek;function mm(){if(ek)return WM;ek=1;function n(e){return e!=null&&typeof e=="object"}return WM=n,WM}var QM,tk;function kse(){if(tk)return QM;tk=1;var n=ag(),e=Af(),t=mm(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return QM=i,QM}var YM,nk;function Pse(){if(nk)return YM;nk=1;function n(e){return function(t,r,i){for(var s=-1,l=Object(t),o=i(t),f=o.length;f--;){var C=o[e?f:++s];if(r(l[C],C,l)===!1)break}return t}}return YM=n,YM}var qM,rk;function UN(){if(rk)return qM;rk=1;var n=Pse(),e=n();return qM=e,qM}var $M,ik;function Rse(){if(ik)return $M;ik=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return $M=n,$M}var VM,ok;function Dse(){if(ok)return VM;ok=1;var n=ag(),e=mm(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return VM=r,VM}var HM,sk;function gI(){if(sk)return HM;sk=1;var n=Dse(),e=mm(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return HM=s,HM}var Jv={exports:{}},ZM,ak;function Kse(){if(ak)return ZM;ak=1;function n(){return!1}return ZM=n,ZM}Jv.exports;var lk;function v3(){return lk||(lk=1,function(n,e){var t=Tp(),r=Kse(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,l=s&&s.exports===i,o=l?t.Buffer:void 0,f=o?o.isBuffer:void 0,C=f||r;n.exports=C}(Jv,Jv.exports)),Jv.exports}var XM,Ak;function yI(){if(Ak)return XM;Ak=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return XM=t,XM}var JM,uk;function vI(){if(uk)return JM;uk=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return JM=e,JM}var e5,ck;function Fse(){if(ck)return e5;ck=1;var n=ag(),e=vI(),t=mm(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",o="[object Error]",f="[object Function]",C="[object Map]",x="[object Number]",B="[object Object]",R="[object RegExp]",P="[object Set]",U="[object String]",N="[object WeakMap]",W="[object ArrayBuffer]",X="[object DataView]",$="[object Float32Array]",re="[object Float64Array]",te="[object Int8Array]",V="[object Int16Array]",ne="[object Int32Array]",G="[object Uint8Array]",le="[object Uint8ClampedArray]",fe="[object Uint16Array]",pe="[object Uint32Array]",we={};we[$]=we[re]=we[te]=we[V]=we[ne]=we[G]=we[le]=we[fe]=we[pe]=!0,we[r]=we[i]=we[W]=we[s]=we[X]=we[l]=we[o]=we[f]=we[C]=we[x]=we[B]=we[R]=we[P]=we[U]=we[N]=!1;function Se(xe){return t(xe)&&e(xe.length)&&!!we[n(xe)]}return e5=Se,e5}var t5,hk;function CI(){if(hk)return t5;hk=1;function n(e){return function(t){return e(t)}}return t5=n,t5}var eC={exports:{}};eC.exports;var dk;function _I(){return dk||(dk=1,function(n,e){var t=LN(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s&&t.process,o=function(){try{var f=i&&i.require&&i.require("util").types;return f||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(eC,eC.exports)),eC.exports}var n5,fk;function bI(){if(fk)return n5;fk=1;var n=Fse(),e=CI(),t=_I(),r=t&&t.isTypedArray,i=r?e(r):n;return n5=i,n5}var r5,pk;function zN(){if(pk)return r5;pk=1;var n=Rse(),e=gI(),t=Af(),r=v3(),i=yI(),s=bI(),l=Object.prototype,o=l.hasOwnProperty;function f(C,x){var B=t(C),R=!B&&e(C),P=!B&&!R&&r(C),U=!B&&!R&&!P&&s(C),N=B||R||P||U,W=N?n(C.length,String):[],X=W.length;for(var $ in C)(x||o.call(C,$))&&!(N&&($=="length"||P&&($=="offset"||$=="parent")||U&&($=="buffer"||$=="byteLength"||$=="byteOffset")||i($,X)))&&W.push($);return W}return r5=f,r5}var i5,mk;function xI(){if(mk)return i5;mk=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return i5=e,i5}var o5,gk;function NN(){if(gk)return o5;gk=1;function n(e,t){return function(r){return e(t(r))}}return o5=n,o5}var s5,yk;function Lse(){if(yk)return s5;yk=1;var n=NN(),e=n(Object.keys,Object);return s5=e,s5}var a5,vk;function Use(){if(vk)return a5;vk=1;var n=xI(),e=Lse(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var l=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&l.push(o);return l}return a5=i,a5}var l5,Ck;function Yf(){if(Ck)return l5;Ck=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return l5=n,l5}var A5,_k;function MI(){if(_k)return A5;_k=1;var n=ag(),e=Yf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function l(o){if(!e(o))return!1;var f=n(o);return f==r||f==i||f==t||f==s}return A5=l,A5}var u5,bk;function Jy(){if(bk)return u5;bk=1;var n=MI(),e=vI();function t(r){return r!=null&&e(r.length)&&!n(r)}return u5=t,u5}var c5,xk;function P_(){if(xk)return c5;xk=1;var n=zN(),e=Use(),t=Jy();function r(i){return t(i)?n(i):e(i)}return c5=r,c5}var h5,Mk;function GN(){if(Mk)return h5;Mk=1;var n=UN(),e=P_();function t(r,i){return r&&n(r,i,e)}return h5=t,h5}var d5,wk;function C3(){if(wk)return d5;wk=1;function n(e){return e}return d5=n,d5}var f5,Sk;function jN(){if(Sk)return f5;Sk=1;var n=C3();function e(t){return typeof t=="function"?t:n}return f5=e,f5}var p5,Ek;function wI(){if(Ek)return p5;Ek=1;var n=GN(),e=jN();function t(r,i){return r&&n(r,e(i))}return p5=t,p5}var m5,Bk;function SI(){if(Bk)return m5;Bk=1;var n=NN(),e=n(Object.getPrototypeOf,Object);return m5=e,m5}var g5,Ok;function WN(){if(Ok)return g5;Ok=1;var n=ag(),e=SI(),t=mm(),r="[object Object]",i=Function.prototype,s=Object.prototype,l=i.toString,o=s.hasOwnProperty,f=l.call(Object);function C(x){if(!t(x)||n(x)!=r)return!1;var B=e(x);if(B===null)return!0;var R=o.call(B,"constructor")&&B.constructor;return typeof R=="function"&&R instanceof R&&l.call(R)==f}return g5=C,g5}var y5,Ik;function QN(){if(Ik)return y5;Ik=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return y5=n,y5}var v5,Tk;function zse(){if(Tk)return v5;Tk=1;function n(){this.__data__=[],this.size=0}return v5=n,v5}var C5,kk;function R_(){if(kk)return C5;kk=1;function n(e,t){return e===t||e!==e&&t!==t}return C5=n,C5}var _5,Pk;function _3(){if(Pk)return _5;Pk=1;var n=R_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return _5=e,_5}var b5,Rk;function Nse(){if(Rk)return b5;Rk=1;var n=_3(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,l=n(s,i);if(l<0)return!1;var o=s.length-1;return l==o?s.pop():t.call(s,l,1),--this.size,!0}return b5=r,b5}var x5,Dk;function Gse(){if(Dk)return x5;Dk=1;var n=_3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return x5=e,x5}var M5,Kk;function jse(){if(Kk)return M5;Kk=1;var n=_3();function e(t){return n(this.__data__,t)>-1}return M5=e,M5}var w5,Fk;function Wse(){if(Fk)return w5;Fk=1;var n=_3();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return w5=e,w5}var S5,Lk;function b3(){if(Lk)return S5;Lk=1;var n=zse(),e=Nse(),t=Gse(),r=jse(),i=Wse();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var C=l[o];this.set(C[0],C[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,S5=s,S5}var E5,Uk;function Qse(){if(Uk)return E5;Uk=1;var n=b3();function e(){this.__data__=new n,this.size=0}return E5=e,E5}var B5,zk;function Yse(){if(zk)return B5;zk=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return B5=n,B5}var O5,Nk;function qse(){if(Nk)return O5;Nk=1;function n(e){return this.__data__.get(e)}return O5=n,O5}var I5,Gk;function $se(){if(Gk)return I5;Gk=1;function n(e){return this.__data__.has(e)}return I5=n,I5}var T5,jk;function Vse(){if(jk)return T5;jk=1;var n=Tp(),e=n["__core-js_shared__"];return T5=e,T5}var k5,Wk;function Hse(){if(Wk)return k5;Wk=1;var n=Vse(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return k5=t,k5}var P5,Qk;function YN(){if(Qk)return P5;Qk=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return P5=t,P5}var R5,Yk;function Zse(){if(Yk)return R5;Yk=1;var n=MI(),e=Hse(),t=Yf(),r=YN(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,f=l.toString,C=o.hasOwnProperty,x=RegExp("^"+f.call(C).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(R){if(!t(R)||e(R))return!1;var P=n(R)?x:s;return P.test(r(R))}return R5=B,R5}var D5,qk;function Xse(){if(qk)return D5;qk=1;function n(e,t){return e?.[t]}return D5=n,D5}var K5,$k;function lg(){if($k)return K5;$k=1;var n=Zse(),e=Xse();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return K5=t,K5}var F5,Vk;function EI(){if(Vk)return F5;Vk=1;var n=lg(),e=Tp(),t=n(e,"Map");return F5=t,F5}var L5,Hk;function x3(){if(Hk)return L5;Hk=1;var n=lg(),e=n(Object,"create");return L5=e,L5}var U5,Zk;function Jse(){if(Zk)return U5;Zk=1;var n=x3();function e(){this.__data__=n?n(null):{},this.size=0}return U5=e,U5}var z5,Xk;function eae(){if(Xk)return z5;Xk=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return z5=n,z5}var N5,Jk;function tae(){if(Jk)return N5;Jk=1;var n=x3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var l=this.__data__;if(n){var o=l[s];return o===e?void 0:o}return r.call(l,s)?l[s]:void 0}return N5=i,N5}var G5,eP;function nae(){if(eP)return G5;eP=1;var n=x3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return G5=r,G5}var j5,tP;function rae(){if(tP)return j5;tP=1;var n=x3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return j5=t,j5}var W5,nP;function iae(){if(nP)return W5;nP=1;var n=Jse(),e=eae(),t=tae(),r=nae(),i=rae();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var C=l[o];this.set(C[0],C[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,W5=s,W5}var Q5,rP;function oae(){if(rP)return Q5;rP=1;var n=iae(),e=b3(),t=EI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Q5=r,Q5}var Y5,iP;function sae(){if(iP)return Y5;iP=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Y5=n,Y5}var q5,oP;function M3(){if(oP)return q5;oP=1;var n=sae();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return q5=e,q5}var $5,sP;function aae(){if(sP)return $5;sP=1;var n=M3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return $5=e,$5}var V5,aP;function lae(){if(aP)return V5;aP=1;var n=M3();function e(t){return n(this,t).get(t)}return V5=e,V5}var H5,lP;function Aae(){if(lP)return H5;lP=1;var n=M3();function e(t){return n(this,t).has(t)}return H5=e,H5}var Z5,AP;function uae(){if(AP)return Z5;AP=1;var n=M3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return Z5=e,Z5}var X5,uP;function BI(){if(uP)return X5;uP=1;var n=oae(),e=aae(),t=lae(),r=Aae(),i=uae();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var C=l[o];this.set(C[0],C[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,X5=s,X5}var J5,cP;function cae(){if(cP)return J5;cP=1;var n=b3(),e=EI(),t=BI(),r=200;function i(s,l){var o=this.__data__;if(o instanceof n){var f=o.__data__;if(!e||f.length<r-1)return f.push([s,l]),this.size=++o.size,this;o=this.__data__=new t(f)}return o.set(s,l),this.size=o.size,this}return J5=i,J5}var ew,hP;function w3(){if(hP)return ew;hP=1;var n=b3(),e=Qse(),t=Yse(),r=qse(),i=$se(),s=cae();function l(o){var f=this.__data__=new n(o);this.size=f.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=r,l.prototype.has=i,l.prototype.set=s,ew=l,ew}var tw,dP;function hae(){if(dP)return tw;dP=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return tw=e,tw}var nw,fP;function dae(){if(fP)return nw;fP=1;function n(e){return this.__data__.has(e)}return nw=n,nw}var rw,pP;function fae(){if(pP)return rw;pP=1;var n=BI(),e=hae(),t=dae();function r(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new n;++s<l;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,rw=r,rw}var iw,mP;function pae(){if(mP)return iw;mP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return iw=n,iw}var ow,gP;function mae(){if(gP)return ow;gP=1;function n(e,t){return e.has(t)}return ow=n,ow}var sw,yP;function qN(){if(yP)return sw;yP=1;var n=fae(),e=pae(),t=mae(),r=1,i=2;function s(l,o,f,C,x,B){var R=f&r,P=l.length,U=o.length;if(P!=U&&!(R&&U>P))return!1;var N=B.get(l),W=B.get(o);if(N&&W)return N==o&&W==l;var X=-1,$=!0,re=f&i?new n:void 0;for(B.set(l,o),B.set(o,l);++X<P;){var te=l[X],V=o[X];if(C)var ne=R?C(V,te,X,o,l,B):C(te,V,X,l,o,B);if(ne!==void 0){if(ne)continue;$=!1;break}if(re){if(!e(o,function(G,le){if(!t(re,le)&&(te===G||x(te,G,f,C,B)))return re.push(le)})){$=!1;break}}else if(!(te===V||x(te,V,f,C,B))){$=!1;break}}return B.delete(l),B.delete(o),$}return sw=s,sw}var aw,vP;function $N(){if(vP)return aw;vP=1;var n=Tp(),e=n.Uint8Array;return aw=e,aw}var lw,CP;function gae(){if(CP)return lw;CP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return lw=n,lw}var Aw,_P;function yae(){if(_P)return Aw;_P=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return Aw=n,Aw}var uw,bP;function vae(){if(bP)return uw;bP=1;var n=k_(),e=$N(),t=R_(),r=qN(),i=gae(),s=yae(),l=1,o=2,f="[object Boolean]",C="[object Date]",x="[object Error]",B="[object Map]",R="[object Number]",P="[object RegExp]",U="[object Set]",N="[object String]",W="[object Symbol]",X="[object ArrayBuffer]",$="[object DataView]",re=n?n.prototype:void 0,te=re?re.valueOf:void 0;function V(ne,G,le,fe,pe,we,Se){switch(le){case $:if(ne.byteLength!=G.byteLength||ne.byteOffset!=G.byteOffset)return!1;ne=ne.buffer,G=G.buffer;case X:return!(ne.byteLength!=G.byteLength||!we(new e(ne),new e(G)));case f:case C:case R:return t(+ne,+G);case x:return ne.name==G.name&&ne.message==G.message;case P:case N:return ne==G+"";case B:var xe=i;case U:var je=fe&l;if(xe||(xe=s),ne.size!=G.size&&!je)return!1;var Me=Se.get(ne);if(Me)return Me==G;fe|=o,Se.set(ne,G);var rt=r(xe(ne),xe(G),fe,pe,we,Se);return Se.delete(ne),rt;case W:if(te)return te.call(ne)==te.call(G)}return!1}return uw=V,uw}var cw,xP;function VN(){if(xP)return cw;xP=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return cw=n,cw}var hw,MP;function HN(){if(MP)return hw;MP=1;var n=VN(),e=Af();function t(r,i,s){var l=i(r);return e(r)?l:n(l,s(r))}return hw=t,hw}var dw,wP;function Cae(){if(wP)return dw;wP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,l=[];++r<i;){var o=e[r];t(o,r,e)&&(l[s++]=o)}return l}return dw=n,dw}var fw,SP;function ZN(){if(SP)return fw;SP=1;function n(){return[]}return fw=n,fw}var pw,EP;function OI(){if(EP)return pw;EP=1;var n=Cae(),e=ZN(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(l){return l==null?[]:(l=Object(l),n(i(l),function(o){return r.call(l,o)}))}:e;return pw=s,pw}var mw,BP;function XN(){if(BP)return mw;BP=1;var n=HN(),e=OI(),t=P_();function r(i){return n(i,t,e)}return mw=r,mw}var gw,OP;function _ae(){if(OP)return gw;OP=1;var n=XN(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o,f,C,x){var B=o&e,R=n(s),P=R.length,U=n(l),N=U.length;if(P!=N&&!B)return!1;for(var W=P;W--;){var X=R[W];if(!(B?X in l:r.call(l,X)))return!1}var $=x.get(s),re=x.get(l);if($&&re)return $==l&&re==s;var te=!0;x.set(s,l),x.set(l,s);for(var V=B;++W<P;){X=R[W];var ne=s[X],G=l[X];if(f)var le=B?f(G,ne,X,l,s,x):f(ne,G,X,s,l,x);if(!(le===void 0?ne===G||C(ne,G,o,f,x):le)){te=!1;break}V||(V=X=="constructor")}if(te&&!V){var fe=s.constructor,pe=l.constructor;fe!=pe&&"constructor"in s&&"constructor"in l&&!(typeof fe=="function"&&fe instanceof fe&&typeof pe=="function"&&pe instanceof pe)&&(te=!1)}return x.delete(s),x.delete(l),te}return gw=i,gw}var yw,IP;function bae(){if(IP)return yw;IP=1;var n=lg(),e=Tp(),t=n(e,"DataView");return yw=t,yw}var vw,TP;function xae(){if(TP)return vw;TP=1;var n=lg(),e=Tp(),t=n(e,"Promise");return vw=t,vw}var Cw,kP;function Mae(){if(kP)return Cw;kP=1;var n=lg(),e=Tp(),t=n(e,"Set");return Cw=t,Cw}var _w,PP;function wae(){if(PP)return _w;PP=1;var n=lg(),e=Tp(),t=n(e,"WeakMap");return _w=t,_w}var bw,RP;function S3(){if(RP)return bw;RP=1;var n=bae(),e=EI(),t=xae(),r=Mae(),i=wae(),s=ag(),l=YN(),o="[object Map]",f="[object Object]",C="[object Promise]",x="[object Set]",B="[object WeakMap]",R="[object DataView]",P=l(n),U=l(e),N=l(t),W=l(r),X=l(i),$=s;return(n&&$(new n(new ArrayBuffer(1)))!=R||e&&$(new e)!=o||t&&$(t.resolve())!=C||r&&$(new r)!=x||i&&$(new i)!=B)&&($=function(re){var te=s(re),V=te==f?re.constructor:void 0,ne=V?l(V):"";if(ne)switch(ne){case P:return R;case U:return o;case N:return C;case W:return x;case X:return B}return te}),bw=$,bw}var xw,DP;function Sae(){if(DP)return xw;DP=1;var n=w3(),e=qN(),t=vae(),r=_ae(),i=S3(),s=Af(),l=v3(),o=bI(),f=1,C="[object Arguments]",x="[object Array]",B="[object Object]",R=Object.prototype,P=R.hasOwnProperty;function U(N,W,X,$,re,te){var V=s(N),ne=s(W),G=V?x:i(N),le=ne?x:i(W);G=G==C?B:G,le=le==C?B:le;var fe=G==B,pe=le==B,we=G==le;if(we&&l(N)){if(!l(W))return!1;V=!0,fe=!1}if(we&&!fe)return te||(te=new n),V||o(N)?e(N,W,X,$,re,te):t(N,W,G,X,$,re,te);if(!(X&f)){var Se=fe&&P.call(N,"__wrapped__"),xe=pe&&P.call(W,"__wrapped__");if(Se||xe){var je=Se?N.value():N,Me=xe?W.value():W;return te||(te=new n),re(je,Me,X,$,te)}}return we?(te||(te=new n),r(N,W,X,$,re,te)):!1}return xw=U,xw}var Mw,KP;function JN(){if(KP)return Mw;KP=1;var n=Sae(),e=mm();function t(r,i,s,l,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,l,t,o)}return Mw=t,Mw}var ww,FP;function Eae(){if(FP)return ww;FP=1;var n=w3(),e=JN(),t=1,r=2;function i(s,l,o,f){var C=o.length,x=C,B=!f;if(s==null)return!x;for(s=Object(s);C--;){var R=o[C];if(B&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++C<x;){R=o[C];var P=R[0],U=s[P],N=R[1];if(B&&R[2]){if(U===void 0&&!(P in s))return!1}else{var W=new n;if(f)var X=f(U,N,P,s,l,W);if(!(X===void 0?e(N,U,t|r,f,W):X))return!1}}return!0}return ww=i,ww}var Sw,LP;function eG(){if(LP)return Sw;LP=1;var n=Yf();function e(t){return t===t&&!n(t)}return Sw=e,Sw}var Ew,UP;function Bae(){if(UP)return Ew;UP=1;var n=eG(),e=P_();function t(r){for(var i=e(r),s=i.length;s--;){var l=i[s],o=r[l];i[s]=[l,o,n(o)]}return i}return Ew=t,Ew}var Bw,zP;function tG(){if(zP)return Bw;zP=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return Bw=n,Bw}var Ow,NP;function Oae(){if(NP)return Ow;NP=1;var n=Eae(),e=Bae(),t=tG();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(l){return l===i||n(l,i,s)}}return Ow=r,Ow}var Iw,GP;function E3(){if(GP)return Iw;GP=1;var n=ag(),e=mm(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return Iw=r,Iw}var Tw,jP;function II(){if(jP)return Tw;jP=1;var n=Af(),e=E3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||l!=null&&s in Object(l)}return Tw=i,Tw}var kw,WP;function Iae(){if(WP)return kw;WP=1;var n=BI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var l=arguments,o=i?i.apply(this,l):l[0],f=s.cache;if(f.has(o))return f.get(o);var C=r.apply(this,l);return s.cache=f.set(o,C)||f,C};return s.cache=new(t.Cache||n),s}return t.Cache=n,kw=t,kw}var Pw,QP;function Tae(){if(QP)return Pw;QP=1;var n=Iae(),e=500;function t(r){var i=n(r,function(l){return s.size===e&&s.clear(),l}),s=i.cache;return i}return Pw=t,Pw}var Rw,YP;function kae(){if(YP)return Rw;YP=1;var n=Tae(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(l,o,f,C){s.push(f?C.replace(t,"$1"):o||l)}),s});return Rw=r,Rw}var Dw,qP;function Pae(){if(qP)return Dw;qP=1;var n=k_(),e=QN(),t=Af(),r=E3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(r(o))return s?s.call(o):"";var f=o+"";return f=="0"&&1/o==-1/0?"-0":f}return Dw=l,Dw}var Kw,$P;function Rae(){if($P)return Kw;$P=1;var n=Pae();function e(t){return t==null?"":n(t)}return Kw=e,Kw}var Fw,VP;function nG(){if(VP)return Fw;VP=1;var n=Af(),e=II(),t=kae(),r=Rae();function i(s,l){return n(s)?s:e(s,l)?[s]:t(r(s))}return Fw=i,Fw}var Lw,HP;function B3(){if(HP)return Lw;HP=1;var n=E3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return Lw=e,Lw}var Uw,ZP;function rG(){if(ZP)return Uw;ZP=1;var n=nG(),e=B3();function t(r,i){i=n(i,r);for(var s=0,l=i.length;r!=null&&s<l;)r=r[e(i[s++])];return s&&s==l?r:void 0}return Uw=t,Uw}var zw,XP;function Dae(){if(XP)return zw;XP=1;var n=rG();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return zw=e,zw}var Nw,JP;function Kae(){if(JP)return Nw;JP=1;function n(e,t){return e!=null&&t in Object(e)}return Nw=n,Nw}var Gw,eR;function Fae(){if(eR)return Gw;eR=1;var n=nG(),e=gI(),t=Af(),r=yI(),i=vI(),s=B3();function l(o,f,C){f=n(f,o);for(var x=-1,B=f.length,R=!1;++x<B;){var P=s(f[x]);if(!(R=o!=null&&C(o,P)))break;o=o[P]}return R||++x!=B?R:(B=o==null?0:o.length,!!B&&i(B)&&r(P,B)&&(t(o)||e(o)))}return Gw=l,Gw}var jw,tR;function Lae(){if(tR)return jw;tR=1;var n=Kae(),e=Fae();function t(r,i){return r!=null&&e(r,i,n)}return jw=t,jw}var Ww,nR;function Uae(){if(nR)return Ww;nR=1;var n=JN(),e=Dae(),t=Lae(),r=II(),i=eG(),s=tG(),l=B3(),o=1,f=2;function C(x,B){return r(x)&&i(B)?s(l(x),B):function(R){var P=e(R,x);return P===void 0&&P===B?t(R,x):n(B,P,o|f)}}return Ww=C,Ww}var Qw,rR;function zae(){if(rR)return Qw;rR=1;function n(e){return function(t){return t?.[e]}}return Qw=n,Qw}var Yw,iR;function Nae(){if(iR)return Yw;iR=1;var n=rG();function e(t){return function(r){return n(r,t)}}return Yw=e,Yw}var qw,oR;function Gae(){if(oR)return qw;oR=1;var n=zae(),e=Nae(),t=II(),r=B3();function i(s){return t(s)?n(r(s)):e(s)}return qw=i,qw}var $w,sR;function jae(){if(sR)return $w;sR=1;var n=Oae(),e=Uae(),t=C3(),r=Af(),i=Gae();function s(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?r(l)?e(l[0],l[1]):n(l):i(l)}return $w=s,$w}var Vw,aR;function Wae(){if(aR)return Vw;aR=1;var n=Jy();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var l=i.length,o=r?l:-1,f=Object(i);(r?o--:++o<l)&&s(f[o],o,f)!==!1;);return i}}return Vw=e,Vw}var Hw,lR;function iG(){if(lR)return Hw;lR=1;var n=GN(),e=Wae(),t=e(n);return Hw=t,Hw}var Zw,AR;function Qae(){if(AR)return Zw;AR=1;var n=iG(),e=Jy();function t(r,i){var s=-1,l=e(r)?Array(r.length):[];return n(r,function(o,f,C){l[++s]=i(o,f,C)}),l}return Zw=t,Zw}var Xw,uR;function Yae(){if(uR)return Xw;uR=1;var n=QN(),e=jae(),t=Qae(),r=Af();function i(s,l){var o=r(s)?n:t;return o(s,e(l,3))}return Xw=i,Xw}var cR;function qae(){if(cR)return zg;cR=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.flattenNames=void 0;var n=kse(),e=f(n),t=wI(),r=f(t),i=WN(),s=f(i),l=Yae(),o=f(l);function f(x){return x&&x.__esModule?x:{default:x}}var C=zg.flattenNames=function x(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],R=[];return(0,o.default)(B,function(P){Array.isArray(P)?x(P).map(function(U){return R.push(U)}):(0,s.default)(P)?(0,r.default)(P,function(U,N){U===!0&&R.push(N),R.push(N+"-"+U)}):(0,e.default)(P)&&R.push(P)}),R};return zg.default=C,zg}var Ng={},Jw,hR;function oG(){if(hR)return Jw;hR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return Jw=n,Jw}var eS,dR;function sG(){if(dR)return eS;dR=1;var n=lg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return eS=e,eS}var tS,fR;function TI(){if(fR)return tS;fR=1;var n=sG();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return tS=e,tS}var nS,pR;function aG(){if(pR)return nS;pR=1;var n=TI(),e=R_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o){var f=s[l];(!(r.call(s,l)&&e(f,o))||o===void 0&&!(l in s))&&n(s,l,o)}return nS=i,nS}var rS,mR;function D_(){if(mR)return rS;mR=1;var n=aG(),e=TI();function t(r,i,s,l){var o=!s;s||(s={});for(var f=-1,C=i.length;++f<C;){var x=i[f],B=l?l(s[x],r[x],x,s,r):void 0;B===void 0&&(B=r[x]),o?e(s,x,B):n(s,x,B)}return s}return rS=t,rS}var iS,gR;function $ae(){if(gR)return iS;gR=1;var n=D_(),e=P_();function t(r,i){return r&&n(i,e(i),r)}return iS=t,iS}var oS,yR;function Vae(){if(yR)return oS;yR=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return oS=n,oS}var sS,vR;function Hae(){if(vR)return sS;vR=1;var n=Yf(),e=xI(),t=Vae(),r=Object.prototype,i=r.hasOwnProperty;function s(l){if(!n(l))return t(l);var o=e(l),f=[];for(var C in l)C=="constructor"&&(o||!i.call(l,C))||f.push(C);return f}return sS=s,sS}var aS,CR;function K_(){if(CR)return aS;CR=1;var n=zN(),e=Hae(),t=Jy();function r(i){return t(i)?n(i,!0):e(i)}return aS=r,aS}var lS,_R;function Zae(){if(_R)return lS;_R=1;var n=D_(),e=K_();function t(r,i){return r&&n(i,e(i),r)}return lS=t,lS}var tC={exports:{}};tC.exports;var bR;function lG(){return bR||(bR=1,function(n,e){var t=Tp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function f(C,x){if(x)return C.slice();var B=C.length,R=o?o(B):new C.constructor(B);return C.copy(R),R}n.exports=f}(tC,tC.exports)),tC.exports}var AS,xR;function AG(){if(xR)return AS;xR=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return AS=n,AS}var uS,MR;function Xae(){if(MR)return uS;MR=1;var n=D_(),e=OI();function t(r,i){return n(r,e(r),i)}return uS=t,uS}var cS,wR;function uG(){if(wR)return cS;wR=1;var n=VN(),e=SI(),t=OI(),r=ZN(),i=Object.getOwnPropertySymbols,s=i?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:r;return cS=s,cS}var hS,SR;function Jae(){if(SR)return hS;SR=1;var n=D_(),e=uG();function t(r,i){return n(r,e(r),i)}return hS=t,hS}var dS,ER;function ele(){if(ER)return dS;ER=1;var n=HN(),e=uG(),t=K_();function r(i){return n(i,t,e)}return dS=r,dS}var fS,BR;function tle(){if(BR)return fS;BR=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return fS=t,fS}var pS,OR;function kI(){if(OR)return pS;OR=1;var n=$N();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return pS=e,pS}var mS,IR;function nle(){if(IR)return mS;IR=1;var n=kI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return mS=e,mS}var gS,TR;function rle(){if(TR)return gS;TR=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return gS=e,gS}var yS,kR;function ile(){if(kR)return yS;kR=1;var n=k_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return yS=r,yS}var vS,PR;function cG(){if(PR)return vS;PR=1;var n=kI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return vS=e,vS}var CS,RR;function ole(){if(RR)return CS;RR=1;var n=kI(),e=nle(),t=rle(),r=ile(),i=cG(),s="[object Boolean]",l="[object Date]",o="[object Map]",f="[object Number]",C="[object RegExp]",x="[object Set]",B="[object String]",R="[object Symbol]",P="[object ArrayBuffer]",U="[object DataView]",N="[object Float32Array]",W="[object Float64Array]",X="[object Int8Array]",$="[object Int16Array]",re="[object Int32Array]",te="[object Uint8Array]",V="[object Uint8ClampedArray]",ne="[object Uint16Array]",G="[object Uint32Array]";function le(fe,pe,we){var Se=fe.constructor;switch(pe){case P:return n(fe);case s:case l:return new Se(+fe);case U:return e(fe,we);case N:case W:case X:case $:case re:case te:case V:case ne:case G:return i(fe,we);case o:return new Se;case f:case B:return new Se(fe);case C:return t(fe);case x:return new Se;case R:return r(fe)}}return CS=le,CS}var _S,DR;function sle(){if(DR)return _S;DR=1;var n=Yf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return _S=t,_S}var bS,KR;function hG(){if(KR)return bS;KR=1;var n=sle(),e=SI(),t=xI();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return bS=r,bS}var xS,FR;function ale(){if(FR)return xS;FR=1;var n=S3(),e=mm(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return xS=r,xS}var MS,LR;function lle(){if(LR)return MS;LR=1;var n=ale(),e=CI(),t=_I(),r=t&&t.isMap,i=r?e(r):n;return MS=i,MS}var wS,UR;function Ale(){if(UR)return wS;UR=1;var n=S3(),e=mm(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return wS=r,wS}var SS,zR;function ule(){if(zR)return SS;zR=1;var n=Ale(),e=CI(),t=_I(),r=t&&t.isSet,i=r?e(r):n;return SS=i,SS}var ES,NR;function cle(){if(NR)return ES;NR=1;var n=w3(),e=oG(),t=aG(),r=$ae(),i=Zae(),s=lG(),l=AG(),o=Xae(),f=Jae(),C=XN(),x=ele(),B=S3(),R=tle(),P=ole(),U=hG(),N=Af(),W=v3(),X=lle(),$=Yf(),re=ule(),te=P_(),V=K_(),ne=1,G=2,le=4,fe="[object Arguments]",pe="[object Array]",we="[object Boolean]",Se="[object Date]",xe="[object Error]",je="[object Function]",Me="[object GeneratorFunction]",rt="[object Map]",Ct="[object Number]",it="[object Object]",nt="[object RegExp]",Ge="[object Set]",Ie="[object String]",$e="[object Symbol]",gt="[object WeakMap]",Dt="[object ArrayBuffer]",ut="[object DataView]",Rt="[object Float32Array]",St="[object Float64Array]",Ke="[object Int8Array]",Pe="[object Int16Array]",Re="[object Int32Array]",Ye="[object Uint8Array]",vt="[object Uint8ClampedArray]",yt="[object Uint16Array]",Et="[object Uint32Array]",Zt={};Zt[fe]=Zt[pe]=Zt[Dt]=Zt[ut]=Zt[we]=Zt[Se]=Zt[Rt]=Zt[St]=Zt[Ke]=Zt[Pe]=Zt[Re]=Zt[rt]=Zt[Ct]=Zt[it]=Zt[nt]=Zt[Ge]=Zt[Ie]=Zt[$e]=Zt[Ye]=Zt[vt]=Zt[yt]=Zt[Et]=!0,Zt[xe]=Zt[je]=Zt[gt]=!1;function Ut(An,hr,Vt,Vn,Pn,Dn){var Ln,Ir=hr&ne,rr=hr&G,Yn=hr&le;if(Vt&&(Ln=Pn?Vt(An,Vn,Pn,Dn):Vt(An)),Ln!==void 0)return Ln;if(!$(An))return An;var We=N(An);if(We){if(Ln=R(An),!Ir)return l(An,Ln)}else{var he=B(An),me=he==je||he==Me;if(W(An))return s(An,Ir);if(he==it||he==fe||me&&!Pn){if(Ln=rr||me?{}:U(An),!Ir)return rr?f(An,i(Ln,An)):o(An,r(Ln,An))}else{if(!Zt[he])return Pn?An:{};Ln=P(An,he,Ir)}}Dn||(Dn=new n);var et=Dn.get(An);if(et)return et;Dn.set(An,Ln),re(An)?An.forEach(function(Jt){Ln.add(Ut(Jt,hr,Vt,Jt,An,Dn))}):X(An)&&An.forEach(function(Jt,ir){Ln.set(ir,Ut(Jt,hr,Vt,ir,An,Dn))});var bt=Yn?rr?x:C:rr?V:te,Yt=We?void 0:bt(An);return e(Yt||An,function(Jt,ir){Yt&&(ir=Jt,Jt=An[ir]),t(Ln,ir,Ut(Jt,hr,Vt,ir,An,Dn))}),Ln}return ES=Ut,ES}var BS,GR;function hle(){if(GR)return BS;GR=1;var n=cle(),e=1,t=4;function r(i){return n(i,e|t)}return BS=r,BS}var jR;function dle(){if(jR)return Ng;jR=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.mergeClasses=void 0;var n=wI(),e=s(n),t=hle(),r=s(t),i=Object.assign||function(o){for(var f=1;f<arguments.length;f++){var C=arguments[f];for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(o[x]=C[x])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var l=Ng.mergeClasses=function(f){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=f.default&&(0,r.default)(f.default)||{};return C.map(function(B){var R=f[B];return R&&(0,e.default)(R,function(P,U){x[U]||(x[U]={}),x[U]=i({},x[U],R[U])}),B}),x};return Ng.default=l,Ng}var Gg={},WR;function fle(){if(WR)return Gg;WR=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.autoprefix=void 0;var n=wI(),e=r(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(l[C]=f[C])}return l};function r(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var f=o&&o.split(" ");return{position:"absolute",top:f&&f[0],right:f&&f[1],bottom:f&&f[2],left:f&&f[3]}},extend:function(o,f){var C=f[o];return C||{extend:o}}},s=Gg.autoprefix=function(o){var f={};return(0,e.default)(o,function(C,x){var B={};(0,e.default)(C,function(R,P){var U=i[P];U?B=t({},B,U(R)):B[P]=R}),f[x]=B}),f};return Gg.default=s,Gg}var jg={},QR;function ple(){if(QR)return jg;QR=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.hover=void 0;var n=Object.assign||function(f){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=tl(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function s(f,C){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:f}function l(f,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);f.prototype=Object.create(C&&C.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(f,C):f.__proto__=C)}var o=jg.hover=function(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(R,B);function R(){var P,U,N,W;i(this,R);for(var X=arguments.length,$=Array(X),re=0;re<X;re++)$[re]=arguments[re];return W=(U=(N=s(this,(P=R.__proto__||Object.getPrototypeOf(R)).call.apply(P,[this].concat($))),N),N.state={hover:!1},N.handleMouseOver=function(){return N.setState({hover:!0})},N.handleMouseOut=function(){return N.setState({hover:!1})},N.render=function(){return t.default.createElement(x,{onMouseOver:N.handleMouseOver,onMouseOut:N.handleMouseOut},t.default.createElement(C,n({},N.props,N.state)))},U),s(N,W)}return R}(t.default.Component)};return jg.default=o,jg}var Wg={},YR;function mle(){if(YR)return Wg;YR=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.active=void 0;var n=Object.assign||function(f){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=tl(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function s(f,C){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:f}function l(f,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);f.prototype=Object.create(C&&C.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(f,C):f.__proto__=C)}var o=Wg.active=function(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(R,B);function R(){var P,U,N,W;i(this,R);for(var X=arguments.length,$=Array(X),re=0;re<X;re++)$[re]=arguments[re];return W=(U=(N=s(this,(P=R.__proto__||Object.getPrototypeOf(R)).call.apply(P,[this].concat($))),N),N.state={active:!1},N.handleMouseDown=function(){return N.setState({active:!0})},N.handleMouseUp=function(){return N.setState({active:!1})},N.render=function(){return t.default.createElement(x,{onMouseDown:N.handleMouseDown,onMouseUp:N.handleMouseUp},t.default.createElement(C,n({},N.props,N.state)))},U),s(N,W)}return R}(t.default.Component)};return Wg.default=o,Wg}var jb={},qR;function gle(){if(qR)return jb;qR=1,Object.defineProperty(jb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=f};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return jb.default=n,jb}var $R;function kp(){if($R)return ld;$R=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.ReactCSS=ld.loop=ld.handleActive=ld.handleHover=ld.hover=void 0;var n=qae(),e=R(n),t=dle(),r=R(t),i=fle(),s=R(i),l=ple(),o=R(l),f=mle(),C=R(f),x=gle(),B=R(x);function R(U){return U&&U.__esModule?U:{default:U}}ld.hover=o.default,ld.handleHover=o.default,ld.handleActive=C.default,ld.loop=B.default;var P=ld.ReactCSS=function(N){for(var W=arguments.length,X=Array(W>1?W-1:0),$=1;$<W;$++)X[$-1]=arguments[$];var re=(0,e.default)(X),te=(0,r.default)(N,re);return(0,s.default)(te)};return ld.default=P,ld}var OS,VR;function dG(){if(VR)return OS;VR=1;var n=TI(),e=R_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return OS=t,OS}var IS,HR;function yle(){if(HR)return IS;HR=1;var n=Jy(),e=mm();function t(r){return e(r)&&n(r)}return IS=t,IS}var TS,ZR;function fG(){if(ZR)return TS;ZR=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return TS=n,TS}var kS,XR;function vle(){if(XR)return kS;XR=1;var n=D_(),e=K_();function t(r){return n(r,e(r))}return kS=t,kS}var PS,JR;function Cle(){if(JR)return PS;JR=1;var n=dG(),e=lG(),t=cG(),r=AG(),i=hG(),s=gI(),l=Af(),o=yle(),f=v3(),C=MI(),x=Yf(),B=WN(),R=bI(),P=fG(),U=vle();function N(W,X,$,re,te,V,ne){var G=P(W,$),le=P(X,$),fe=ne.get(le);if(fe){n(W,$,fe);return}var pe=V?V(G,le,$+"",W,X,ne):void 0,we=pe===void 0;if(we){var Se=l(le),xe=!Se&&f(le),je=!Se&&!xe&&R(le);pe=le,Se||xe||je?l(G)?pe=G:o(G)?pe=r(G):xe?(we=!1,pe=e(le,!0)):je?(we=!1,pe=t(le,!0)):pe=[]:B(le)||s(le)?(pe=G,s(G)?pe=U(G):(!x(G)||C(G))&&(pe=i(le))):we=!1}we&&(ne.set(le,pe),te(pe,le,re,V,ne),ne.delete(le)),n(W,$,pe)}return PS=N,PS}var RS,eD;function _le(){if(eD)return RS;eD=1;var n=w3(),e=dG(),t=UN(),r=Cle(),i=Yf(),s=K_(),l=fG();function o(f,C,x,B,R){f!==C&&t(C,function(P,U){if(R||(R=new n),i(P))r(f,C,U,x,o,B,R);else{var N=B?B(l(f,U),P,U+"",f,C,R):void 0;N===void 0&&(N=P),e(f,U,N)}},s)}return RS=o,RS}var DS,tD;function ble(){if(tD)return DS;tD=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return DS=n,DS}var KS,nD;function xle(){if(nD)return KS;nD=1;var n=ble(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var l=arguments,o=-1,f=e(l.length-i,0),C=Array(f);++o<f;)C[o]=l[i+o];o=-1;for(var x=Array(i+1);++o<i;)x[o]=l[o];return x[i]=s(C),n(r,this,x)}}return KS=t,KS}var FS,rD;function Mle(){if(rD)return FS;rD=1;function n(e){return function(){return e}}return FS=n,FS}var LS,iD;function wle(){if(iD)return LS;iD=1;var n=Mle(),e=sG(),t=C3(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return LS=r,LS}var US,oD;function Sle(){if(oD)return US;oD=1;var n=800,e=16,t=Date.now;function r(i){var s=0,l=0;return function(){var o=t(),f=e-(o-l);if(l=o,f>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return US=r,US}var zS,sD;function Ele(){if(sD)return zS;sD=1;var n=wle(),e=Sle(),t=e(n);return zS=t,zS}var NS,aD;function Ble(){if(aD)return NS;aD=1;var n=C3(),e=xle(),t=Ele();function r(i,s){return t(e(i,s,n),i+"")}return NS=r,NS}var GS,lD;function Ole(){if(lD)return GS;lD=1;var n=R_(),e=Jy(),t=yI(),r=Yf();function i(s,l,o){if(!r(o))return!1;var f=typeof l;return(f=="number"?e(o)&&t(l,o.length):f=="string"&&l in o)?n(o[l],s):!1}return GS=i,GS}var jS,AD;function Ile(){if(AD)return jS;AD=1;var n=Ble(),e=Ole();function t(r){return n(function(i,s){var l=-1,o=s.length,f=o>1?s[o-1]:void 0,C=o>2?s[2]:void 0;for(f=r.length>3&&typeof f=="function"?(o--,f):void 0,C&&e(s[0],s[1],C)&&(f=o<3?void 0:f,o=1),i=Object(i);++l<o;){var x=s[l];x&&r(i,x,l,f)}return i})}return jS=t,jS}var WS,uD;function pG(){if(uD)return WS;uD=1;var n=_le(),e=Ile(),t=e(function(r,i,s){n(r,i,s)});return WS=t,WS}var QS={},Qg={},Wb={},cD;function Tle(){return cD||(cD=1,Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.calculateChange=function(e,t,r,i,s){var l=s.clientWidth,o=s.clientHeight,f=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,C=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,x=f-(s.getBoundingClientRect().left+window.pageXOffset),B=C-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var R=void 0;if(B<0?R=0:B>o?R=1:R=Math.round(B*100/o)/100,t.a!==R)return{h:t.h,s:t.s,l:t.l,a:R,source:"rgb"}}else{var P=void 0;if(x<0?P=0:x>l?P=1:P=Math.round(x*100/l)/100,i!==P)return{h:t.h,s:t.s,l:t.l,a:P,source:"rgb"}}return null}),Wb}var Yg={},Fv={},hD;function kle(){if(hD)return Fv;hD=1,Object.defineProperty(Fv,"__esModule",{value:!0});var n={},e=Fv.render=function(r,i,s,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=s*2,o.height=s*2;var f=o.getContext("2d");return f?(f.fillStyle=r,f.fillRect(0,0,o.width,o.height),f.fillStyle=i,f.fillRect(0,0,s,s),f.translate(s,s),f.fillRect(0,0,s,s),o.toDataURL()):null};return Fv.get=function(r,i,s,l){var o=r+"-"+i+"-"+s+(l?"-server":"");if(n[o])return n[o];var f=e(r,i,s,l);return n[o]=f,f},Fv}var dD;function PI(){if(dD)return Yg;dD=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.Checkboard=void 0;var n=Object.assign||function(x){for(var B=1;B<arguments.length;B++){var R=arguments[B];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(x[P]=R[P])}return x},e=tl(),t=f(e),r=kp(),i=f(r),s=kle(),l=o(s);function o(x){if(x&&x.__esModule)return x;var B={};if(x!=null)for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&(B[R]=x[R]);return B.default=x,B}function f(x){return x&&x.__esModule?x:{default:x}}var C=Yg.Checkboard=function(B){var R=B.white,P=B.grey,U=B.size,N=B.renderers,W=B.borderRadius,X=B.boxShadow,$=B.children,re=(0,i.default)({default:{grid:{borderRadius:W,boxShadow:X,absolute:"0px 0px 0px 0px",background:"url("+l.get(R,P,U,N.canvas)+") center left"}}});return(0,e.isValidElement)($)?t.default.cloneElement($,n({},$.props,{style:n({},$.props.style,re.grid)})):t.default.createElement("div",{style:re.grid})};return C.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},Yg.default=C,Yg}var fD;function Ple(){if(fD)return Qg;fD=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.Alpha=void 0;var n=Object.assign||function(W){for(var X=1;X<arguments.length;X++){var $=arguments[X];for(var re in $)Object.prototype.hasOwnProperty.call($,re)&&(W[re]=$[re])}return W},e=function(){function W(X,$){for(var re=0;re<$.length;re++){var te=$[re];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(X,te.key,te)}}return function(X,$,re){return $&&W(X.prototype,$),re&&W(X,re),X}}(),t=tl(),r=B(t),i=kp(),s=B(i),l=Tle(),o=x(l),f=PI(),C=B(f);function x(W){if(W&&W.__esModule)return W;var X={};if(W!=null)for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(X[$]=W[$]);return X.default=W,X}function B(W){return W&&W.__esModule?W:{default:W}}function R(W,X){if(!(W instanceof X))throw new TypeError("Cannot call a class as a function")}function P(W,X){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:W}function U(W,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);W.prototype=Object.create(X&&X.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(W,X):W.__proto__=X)}var N=Qg.Alpha=function(W){U(X,W);function X(){var $,re,te,V;R(this,X);for(var ne=arguments.length,G=Array(ne),le=0;le<ne;le++)G[le]=arguments[le];return V=(re=(te=P(this,($=X.__proto__||Object.getPrototypeOf(X)).call.apply($,[this].concat(G))),te),te.handleChange=function(fe){var pe=o.calculateChange(fe,te.props.hsl,te.props.direction,te.props.a,te.container);pe&&typeof te.props.onChange=="function"&&te.props.onChange(pe,fe)},te.handleMouseDown=function(fe){te.handleChange(fe),window.addEventListener("mousemove",te.handleChange),window.addEventListener("mouseup",te.handleMouseUp)},te.handleMouseUp=function(){te.unbindEventListeners()},te.unbindEventListeners=function(){window.removeEventListener("mousemove",te.handleChange),window.removeEventListener("mouseup",te.handleMouseUp)},re),P(te,V)}return e(X,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var re=this,te=this.props.rgb,V=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:te.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)"},pointer:{left:0,top:te.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:V.alpha},r.default.createElement("div",{style:V.checkboard},r.default.createElement(C.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:V.gradient}),r.default.createElement("div",{style:V.container,ref:function(G){return re.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:V.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:V.slider}))))}}]),X}(t.PureComponent||t.Component);return Qg.default=N,Qg}var qg={},pD;function Rle(){if(pD)return qg;pD=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.EditableInput=void 0;var n=function(){function $(re,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(re,ne.key,ne)}}return function(re,te,V){return te&&$(re.prototype,te),V&&$(re,V),re}}(),e=tl(),t=s(e),r=kp(),i=s(r);function s($){return $&&$.__esModule?$:{default:$}}function l($,re,te){return re in $?Object.defineProperty($,re,{value:te,enumerable:!0,configurable:!0,writable:!0}):$[re]=te,$}function o($,re){if(!($ instanceof re))throw new TypeError("Cannot call a class as a function")}function f($,re){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:$}function C($,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);$.prototype=Object.create(re&&re.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf($,re):$.__proto__=re)}var x=1,B=38,R=40,P=[B,R],U=function(re){return P.indexOf(re)>-1},N=function(re){return Number(String(re).replace(/%/g,""))},W=1,X=qg.EditableInput=function($){C(re,$);function re(te){o(this,re);var V=f(this,(re.__proto__||Object.getPrototypeOf(re)).call(this));return V.handleBlur=function(){V.state.blurValue&&V.setState({value:V.state.blurValue,blurValue:null})},V.handleChange=function(ne){V.setUpdatedValue(ne.target.value,ne)},V.handleKeyDown=function(ne){var G=N(ne.target.value);if(!isNaN(G)&&U(ne.keyCode)){var le=V.getArrowOffset(),fe=ne.keyCode===B?G+le:G-le;V.setUpdatedValue(fe,ne)}},V.handleDrag=function(ne){if(V.props.dragLabel){var G=Math.round(V.props.value+ne.movementX);G>=0&&G<=V.props.dragMax&&V.props.onChange&&V.props.onChange(V.getValueObjectWithLabel(G),ne)}},V.handleMouseDown=function(ne){V.props.dragLabel&&(ne.preventDefault(),V.handleDrag(ne),window.addEventListener("mousemove",V.handleDrag),window.addEventListener("mouseup",V.handleMouseUp))},V.handleMouseUp=function(){V.unbindEventListeners()},V.unbindEventListeners=function(){window.removeEventListener("mousemove",V.handleDrag),window.removeEventListener("mouseup",V.handleMouseUp)},V.state={value:String(te.value).toUpperCase(),blurValue:String(te.value).toUpperCase()},V.inputId="rc-editable-input-"+W++,V}return n(re,[{key:"componentDidUpdate",value:function(V,ne){this.props.value!==this.state.value&&(V.value!==this.props.value||ne.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(V){return l({},this.props.label,V)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||x}},{key:"setUpdatedValue",value:function(V,ne){var G=this.props.label?this.getValueObjectWithLabel(V):V;this.props.onChange&&this.props.onChange(G,ne),this.setState({value:V})}},{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:ne.wrap},t.default.createElement("input",{id:this.inputId,style:ne.input,ref:function(le){return V.input=le},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:ne.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),re}(e.PureComponent||e.Component);return qg.default=X,qg}var $g={},Qb={},mD;function Dle(){return mD||(mD=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.calculateChange=function(e,t,r,i){var s=i.clientWidth,l=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(i.getBoundingClientRect().left+window.pageXOffset),x=f-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(x<0)B=359;else if(x>l)B=0;else{var R=-(x*100/l)+100;B=360*R/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var P=void 0;if(C<0)P=0;else if(C>s)P=359;else{var U=C*100/s;P=360*U/100}if(r.h!==P)return{h:P,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),Qb}var gD;function Kle(){if(gD)return $g;gD=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.Hue=void 0;var n=function(){function P(U,N){for(var W=0;W<N.length;W++){var X=N[W];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(U,X.key,X)}}return function(U,N,W){return N&&P(U.prototype,N),W&&P(U,W),U}}(),e=tl(),t=f(e),r=kp(),i=f(r),s=Dle(),l=o(s);function o(P){if(P&&P.__esModule)return P;var U={};if(P!=null)for(var N in P)Object.prototype.hasOwnProperty.call(P,N)&&(U[N]=P[N]);return U.default=P,U}function f(P){return P&&P.__esModule?P:{default:P}}function C(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function x(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function B(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var R=$g.Hue=function(P){B(U,P);function U(){var N,W,X,$;C(this,U);for(var re=arguments.length,te=Array(re),V=0;V<re;V++)te[V]=arguments[V];return $=(W=(X=x(this,(N=U.__proto__||Object.getPrototypeOf(U)).call.apply(N,[this].concat(te))),X),X.handleChange=function(ne){var G=l.calculateChange(ne,X.props.direction,X.props.hsl,X.container);G&&typeof X.props.onChange=="function"&&X.props.onChange(G,ne)},X.handleMouseDown=function(ne){X.handleChange(ne),window.addEventListener("mousemove",X.handleChange),window.addEventListener("mouseup",X.handleMouseUp)},X.handleMouseUp=function(){X.unbindEventListeners()},W),x(X,$)}return n(U,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var W=this,X=this.props.direction,$=X===void 0?"horizontal":X,re=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:$==="vertical"});return t.default.createElement("div",{style:re.hue},t.default.createElement("div",{className:"hue-"+$,style:re.container,ref:function(V){return W.container=V},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:re.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:re.slider}))))}}]),U}(e.PureComponent||e.Component);return $g.default=R,$g}var Vg={},yD;function Fle(){if(yD)return Vg;yD=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.Raised=void 0;var n=tl(),e=f(n),t=pm(),r=f(t),i=kp(),s=f(i),l=pG(),o=f(l);function f(x){return x&&x.__esModule?x:{default:x}}var C=Vg.Raised=function(B){var R=B.zDepth,P=B.radius,U=B.background,N=B.children,W=B.styles,X=W===void 0?{}:W,$=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+R+"px "+R*4+"px rgba(0,0,0,.24)",borderRadius:P,background:U}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},X),{"zDepth-1":R===1});return e.default.createElement("div",{style:$.wrap},e.default.createElement("div",{style:$.bg}),e.default.createElement("div",{style:$.content},N))};return C.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},C.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},Vg.default=C,Vg}var Hg={},YS,vD;function Lle(){if(vD)return YS;vD=1;var n=Tp(),e=function(){return n.Date.now()};return YS=e,YS}var qS,CD;function Ule(){if(CD)return qS;CD=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return qS=e,qS}var $S,_D;function zle(){if(_D)return $S;_D=1;var n=Ule(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return $S=t,$S}var VS,bD;function Nle(){if(bD)return VS;bD=1;var n=zle(),e=Yf(),t=E3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function f(C){if(typeof C=="number")return C;if(t(C))return r;if(e(C)){var x=typeof C.valueOf=="function"?C.valueOf():C;C=e(x)?x+"":x}if(typeof C!="string")return C===0?C:+C;C=n(C);var B=s.test(C);return B||l.test(C)?o(C.slice(2),B?2:8):i.test(C)?r:+C}return VS=f,VS}var HS,xD;function mG(){if(xD)return HS;xD=1;var n=Yf(),e=Lle(),t=Nle(),r="Expected a function",i=Math.max,s=Math.min;function l(o,f,C){var x,B,R,P,U,N,W=0,X=!1,$=!1,re=!0;if(typeof o!="function")throw new TypeError(r);f=t(f)||0,n(C)&&(X=!!C.leading,$="maxWait"in C,R=$?i(t(C.maxWait)||0,f):R,re="trailing"in C?!!C.trailing:re);function te(xe){var je=x,Me=B;return x=B=void 0,W=xe,P=o.apply(Me,je),P}function V(xe){return W=xe,U=setTimeout(le,f),X?te(xe):P}function ne(xe){var je=xe-N,Me=xe-W,rt=f-je;return $?s(rt,R-Me):rt}function G(xe){var je=xe-N,Me=xe-W;return N===void 0||je>=f||je<0||$&&Me>=R}function le(){var xe=e();if(G(xe))return fe(xe);U=setTimeout(le,ne(xe))}function fe(xe){return U=void 0,re&&x?te(xe):(x=B=void 0,P)}function pe(){U!==void 0&&clearTimeout(U),W=0,x=N=B=U=void 0}function we(){return U===void 0?P:fe(e())}function Se(){var xe=e(),je=G(xe);if(x=arguments,B=this,N=xe,je){if(U===void 0)return V(N);if($)return clearTimeout(U),U=setTimeout(le,f),te(N)}return U===void 0&&(U=setTimeout(le,f)),P}return Se.cancel=pe,Se.flush=we,Se}return HS=l,HS}var ZS,MD;function Gle(){if(MD)return ZS;MD=1;var n=mG(),e=Yf(),t="Expected a function";function r(i,s,l){var o=!0,f=!0;if(typeof i!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,f="trailing"in l?!!l.trailing:f),n(i,s,{leading:o,maxWait:s,trailing:f})}return ZS=r,ZS}var Yb={},wD;function jle(){return wD||(wD=1,Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,l=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(r.getBoundingClientRect().left+window.pageXOffset),x=f-(r.getBoundingClientRect().top+window.pageYOffset);C<0?C=0:C>s&&(C=s),x<0?x=0:x>l&&(x=l);var B=C/s,R=1-x/l;return{h:t.h,s:B,v:R,a:t.a,source:"hsv"}}),Yb}var SD;function Wle(){if(SD)return Hg;SD=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.Saturation=void 0;var n=function(){function N(W,X){for(var $=0;$<X.length;$++){var re=X[$];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(W,re.key,re)}}return function(W,X,$){return X&&N(W.prototype,X),$&&N(W,$),W}}(),e=tl(),t=x(e),r=kp(),i=x(r),s=Gle(),l=x(s),o=jle(),f=C(o);function C(N){if(N&&N.__esModule)return N;var W={};if(N!=null)for(var X in N)Object.prototype.hasOwnProperty.call(N,X)&&(W[X]=N[X]);return W.default=N,W}function x(N){return N&&N.__esModule?N:{default:N}}function B(N,W){if(!(N instanceof W))throw new TypeError("Cannot call a class as a function")}function R(N,W){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:N}function P(N,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);N.prototype=Object.create(W&&W.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(N,W):N.__proto__=W)}var U=Hg.Saturation=function(N){P(W,N);function W(X){B(this,W);var $=R(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,X));return $.handleChange=function(re){typeof $.props.onChange=="function"&&$.throttle($.props.onChange,f.calculateChange(re,$.props.hsl,$.container),re)},$.handleMouseDown=function(re){$.handleChange(re);var te=$.getContainerRenderWindow();te.addEventListener("mousemove",$.handleChange),te.addEventListener("mouseup",$.handleMouseUp)},$.handleMouseUp=function(){$.unbindEventListeners()},$.throttle=(0,l.default)(function(re,te,V){re(te,V)},50),$}return n(W,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var $=this.container,re=window;!re.document.contains($)&&re.parent!==re;)re=re.parent;return re}},{key:"unbindEventListeners",value:function(){var $=this.getContainerRenderWindow();$.removeEventListener("mousemove",this.handleChange),$.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var $=this,re=this.props.style||{},te=re.color,V=re.white,ne=re.black,G=re.pointer,le=re.circle,fe=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:te,white:V,black:ne,pointer:G,circle:le}},{custom:!!this.props.style});return t.default.createElement("div",{style:fe.color,ref:function(we){return $.container=we},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:fe.white,className:"saturation-white"},t.default.createElement("div",{style:fe.black,className:"saturation-black"}),t.default.createElement("div",{style:fe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:fe.circle}))))}}]),W}(e.PureComponent||e.Component);return Hg.default=U,Hg}var Zg={},Gh={},XS,ED;function Qle(){if(ED)return XS;ED=1;var n=oG(),e=iG(),t=jN(),r=Af();function i(s,l){var o=r(s)?n:e;return o(s,t(l))}return XS=i,XS}var JS,BD;function Yle(){return BD||(BD=1,JS=Qle()),JS}var u2={exports:{}},qle=u2.exports,OD;function $le(){return OD||(OD=1,function(n,e){(function(t,r){n.exports=r()})(qle,function(){function t(Ke){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Ke)}var r=/^\s+/,i=/\s+$/;function s(Ke,Pe){if(Ke=Ke||"",Pe=Pe||{},Ke instanceof s)return Ke;if(!(this instanceof s))return new s(Ke,Pe);var Re=l(Ke);this._originalInput=Ke,this._r=Re.r,this._g=Re.g,this._b=Re.b,this._a=Re.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||Re.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Re.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),Re,Ye,vt,yt,Et,Zt;return Re=Pe.r/255,Ye=Pe.g/255,vt=Pe.b/255,Re<=.03928?yt=Re/12.92:yt=Math.pow((Re+.055)/1.055,2.4),Ye<=.03928?Et=Ye/12.92:Et=Math.pow((Ye+.055)/1.055,2.4),vt<=.03928?Zt=vt/12.92:Zt=Math.pow((vt+.055)/1.055,2.4),.2126*yt+.7152*Et+.0722*Zt},setAlpha:function(Pe){return this._a=je(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=x(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=x(this._r,this._g,this._b),Re=Math.round(Pe.h*360),Ye=Math.round(Pe.s*100),vt=Math.round(Pe.v*100);return this._a==1?"hsv("+Re+", "+Ye+"%, "+vt+"%)":"hsva("+Re+", "+Ye+"%, "+vt+"%, "+this._roundA+")"},toHsl:function(){var Pe=f(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=f(this._r,this._g,this._b),Re=Math.round(Pe.h*360),Ye=Math.round(Pe.s*100),vt=Math.round(Pe.l*100);return this._a==1?"hsl("+Re+", "+Ye+"%, "+vt+"%)":"hsla("+Re+", "+Ye+"%, "+vt+"%, "+this._roundA+")"},toHex:function(Pe){return R(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return P(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Me(this._r,255)*100)+"%",g:Math.round(Me(this._g,255)*100)+"%",b:Math.round(Me(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Me(this._r,255)*100)+"%, "+Math.round(Me(this._g,255)*100)+"%, "+Math.round(Me(this._b,255)*100)+"%)":"rgba("+Math.round(Me(this._r,255)*100)+"%, "+Math.round(Me(this._g,255)*100)+"%, "+Math.round(Me(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Se[R(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var Re="#"+U(this._r,this._g,this._b,this._a),Ye=Re,vt=this._gradientType?"GradientType = 1, ":"";if(Pe){var yt=s(Pe);Ye="#"+U(yt._r,yt._g,yt._b,yt._a)}return"progid:DXImageTransform.Microsoft.gradient("+vt+"startColorstr="+Re+",endColorstr="+Ye+")"},toString:function(Pe){var Re=!!Pe;Pe=Pe||this._format;var Ye=!1,vt=this._a<1&&this._a>=0,yt=!Re&&vt&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return yt?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(Ye=this.toRgbString()),Pe==="prgb"&&(Ye=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(Ye=this.toHexString()),Pe==="hex3"&&(Ye=this.toHexString(!0)),Pe==="hex4"&&(Ye=this.toHex8String(!0)),Pe==="hex8"&&(Ye=this.toHex8String()),Pe==="name"&&(Ye=this.toName()),Pe==="hsl"&&(Ye=this.toHslString()),Pe==="hsv"&&(Ye=this.toHsvString()),Ye||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Pe,Re){var Ye=Pe.apply(null,[this].concat([].slice.call(Re)));return this._r=Ye._r,this._g=Ye._g,this._b=Ye._b,this.setAlpha(Ye._a),this},lighten:function(){return this._applyModification($,arguments)},brighten:function(){return this._applyModification(re,arguments)},darken:function(){return this._applyModification(te,arguments)},desaturate:function(){return this._applyModification(N,arguments)},saturate:function(){return this._applyModification(W,arguments)},greyscale:function(){return this._applyModification(X,arguments)},spin:function(){return this._applyModification(V,arguments)},_applyCombination:function(Pe,Re){return Pe.apply(null,[this].concat([].slice.call(Re)))},analogous:function(){return this._applyCombination(fe,arguments)},complement:function(){return this._applyCombination(ne,arguments)},monochromatic:function(){return this._applyCombination(pe,arguments)},splitcomplement:function(){return this._applyCombination(le,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},s.fromRatio=function(Ke,Pe){if(t(Ke)=="object"){var Re={};for(var Ye in Ke)Ke.hasOwnProperty(Ye)&&(Ye==="a"?Re[Ye]=Ke[Ye]:Re[Ye]=Ie(Ke[Ye]));Ke=Re}return s(Ke,Pe)};function l(Ke){var Pe={r:0,g:0,b:0},Re=1,Ye=null,vt=null,yt=null,Et=!1,Zt=!1;return typeof Ke=="string"&&(Ke=Rt(Ke)),t(Ke)=="object"&&(ut(Ke.r)&&ut(Ke.g)&&ut(Ke.b)?(Pe=o(Ke.r,Ke.g,Ke.b),Et=!0,Zt=String(Ke.r).substr(-1)==="%"?"prgb":"rgb"):ut(Ke.h)&&ut(Ke.s)&&ut(Ke.v)?(Ye=Ie(Ke.s),vt=Ie(Ke.v),Pe=B(Ke.h,Ye,vt),Et=!0,Zt="hsv"):ut(Ke.h)&&ut(Ke.s)&&ut(Ke.l)&&(Ye=Ie(Ke.s),yt=Ie(Ke.l),Pe=C(Ke.h,Ye,yt),Et=!0,Zt="hsl"),Ke.hasOwnProperty("a")&&(Re=Ke.a)),Re=je(Re),{ok:Et,format:Ke.format||Zt,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:Re}}function o(Ke,Pe,Re){return{r:Me(Ke,255)*255,g:Me(Pe,255)*255,b:Me(Re,255)*255}}function f(Ke,Pe,Re){Ke=Me(Ke,255),Pe=Me(Pe,255),Re=Me(Re,255);var Ye=Math.max(Ke,Pe,Re),vt=Math.min(Ke,Pe,Re),yt,Et,Zt=(Ye+vt)/2;if(Ye==vt)yt=Et=0;else{var Ut=Ye-vt;switch(Et=Zt>.5?Ut/(2-Ye-vt):Ut/(Ye+vt),Ye){case Ke:yt=(Pe-Re)/Ut+(Pe<Re?6:0);break;case Pe:yt=(Re-Ke)/Ut+2;break;case Re:yt=(Ke-Pe)/Ut+4;break}yt/=6}return{h:yt,s:Et,l:Zt}}function C(Ke,Pe,Re){var Ye,vt,yt;Ke=Me(Ke,360),Pe=Me(Pe,100),Re=Me(Re,100);function Et(An,hr,Vt){return Vt<0&&(Vt+=1),Vt>1&&(Vt-=1),Vt<1/6?An+(hr-An)*6*Vt:Vt<1/2?hr:Vt<2/3?An+(hr-An)*(2/3-Vt)*6:An}if(Pe===0)Ye=vt=yt=Re;else{var Zt=Re<.5?Re*(1+Pe):Re+Pe-Re*Pe,Ut=2*Re-Zt;Ye=Et(Ut,Zt,Ke+1/3),vt=Et(Ut,Zt,Ke),yt=Et(Ut,Zt,Ke-1/3)}return{r:Ye*255,g:vt*255,b:yt*255}}function x(Ke,Pe,Re){Ke=Me(Ke,255),Pe=Me(Pe,255),Re=Me(Re,255);var Ye=Math.max(Ke,Pe,Re),vt=Math.min(Ke,Pe,Re),yt,Et,Zt=Ye,Ut=Ye-vt;if(Et=Ye===0?0:Ut/Ye,Ye==vt)yt=0;else{switch(Ye){case Ke:yt=(Pe-Re)/Ut+(Pe<Re?6:0);break;case Pe:yt=(Re-Ke)/Ut+2;break;case Re:yt=(Ke-Pe)/Ut+4;break}yt/=6}return{h:yt,s:Et,v:Zt}}function B(Ke,Pe,Re){Ke=Me(Ke,360)*6,Pe=Me(Pe,100),Re=Me(Re,100);var Ye=Math.floor(Ke),vt=Ke-Ye,yt=Re*(1-Pe),Et=Re*(1-vt*Pe),Zt=Re*(1-(1-vt)*Pe),Ut=Ye%6,An=[Re,Et,yt,yt,Zt,Re][Ut],hr=[Zt,Re,Re,Et,yt,yt][Ut],Vt=[yt,yt,Zt,Re,Re,Et][Ut];return{r:An*255,g:hr*255,b:Vt*255}}function R(Ke,Pe,Re,Ye){var vt=[Ge(Math.round(Ke).toString(16)),Ge(Math.round(Pe).toString(16)),Ge(Math.round(Re).toString(16))];return Ye&&vt[0].charAt(0)==vt[0].charAt(1)&&vt[1].charAt(0)==vt[1].charAt(1)&&vt[2].charAt(0)==vt[2].charAt(1)?vt[0].charAt(0)+vt[1].charAt(0)+vt[2].charAt(0):vt.join("")}function P(Ke,Pe,Re,Ye,vt){var yt=[Ge(Math.round(Ke).toString(16)),Ge(Math.round(Pe).toString(16)),Ge(Math.round(Re).toString(16)),Ge($e(Ye))];return vt&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)&&yt[3].charAt(0)==yt[3].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0)+yt[3].charAt(0):yt.join("")}function U(Ke,Pe,Re,Ye){var vt=[Ge($e(Ye)),Ge(Math.round(Ke).toString(16)),Ge(Math.round(Pe).toString(16)),Ge(Math.round(Re).toString(16))];return vt.join("")}s.equals=function(Ke,Pe){return!Ke||!Pe?!1:s(Ke).toRgbString()==s(Pe).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function N(Ke,Pe){Pe=Pe===0?0:Pe||10;var Re=s(Ke).toHsl();return Re.s-=Pe/100,Re.s=rt(Re.s),s(Re)}function W(Ke,Pe){Pe=Pe===0?0:Pe||10;var Re=s(Ke).toHsl();return Re.s+=Pe/100,Re.s=rt(Re.s),s(Re)}function X(Ke){return s(Ke).desaturate(100)}function $(Ke,Pe){Pe=Pe===0?0:Pe||10;var Re=s(Ke).toHsl();return Re.l+=Pe/100,Re.l=rt(Re.l),s(Re)}function re(Ke,Pe){Pe=Pe===0?0:Pe||10;var Re=s(Ke).toRgb();return Re.r=Math.max(0,Math.min(255,Re.r-Math.round(255*-(Pe/100)))),Re.g=Math.max(0,Math.min(255,Re.g-Math.round(255*-(Pe/100)))),Re.b=Math.max(0,Math.min(255,Re.b-Math.round(255*-(Pe/100)))),s(Re)}function te(Ke,Pe){Pe=Pe===0?0:Pe||10;var Re=s(Ke).toHsl();return Re.l-=Pe/100,Re.l=rt(Re.l),s(Re)}function V(Ke,Pe){var Re=s(Ke).toHsl(),Ye=(Re.h+Pe)%360;return Re.h=Ye<0?360+Ye:Ye,s(Re)}function ne(Ke){var Pe=s(Ke).toHsl();return Pe.h=(Pe.h+180)%360,s(Pe)}function G(Ke,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var Re=s(Ke).toHsl(),Ye=[s(Ke)],vt=360/Pe,yt=1;yt<Pe;yt++)Ye.push(s({h:(Re.h+yt*vt)%360,s:Re.s,l:Re.l}));return Ye}function le(Ke){var Pe=s(Ke).toHsl(),Re=Pe.h;return[s(Ke),s({h:(Re+72)%360,s:Pe.s,l:Pe.l}),s({h:(Re+216)%360,s:Pe.s,l:Pe.l})]}function fe(Ke,Pe,Re){Pe=Pe||6,Re=Re||30;var Ye=s(Ke).toHsl(),vt=360/Re,yt=[s(Ke)];for(Ye.h=(Ye.h-(vt*Pe>>1)+720)%360;--Pe;)Ye.h=(Ye.h+vt)%360,yt.push(s(Ye));return yt}function pe(Ke,Pe){Pe=Pe||6;for(var Re=s(Ke).toHsv(),Ye=Re.h,vt=Re.s,yt=Re.v,Et=[],Zt=1/Pe;Pe--;)Et.push(s({h:Ye,s:vt,v:yt})),yt=(yt+Zt)%1;return Et}s.mix=function(Ke,Pe,Re){Re=Re===0?0:Re||50;var Ye=s(Ke).toRgb(),vt=s(Pe).toRgb(),yt=Re/100,Et={r:(vt.r-Ye.r)*yt+Ye.r,g:(vt.g-Ye.g)*yt+Ye.g,b:(vt.b-Ye.b)*yt+Ye.b,a:(vt.a-Ye.a)*yt+Ye.a};return s(Et)},s.readability=function(Ke,Pe){var Re=s(Ke),Ye=s(Pe);return(Math.max(Re.getLuminance(),Ye.getLuminance())+.05)/(Math.min(Re.getLuminance(),Ye.getLuminance())+.05)},s.isReadable=function(Ke,Pe,Re){var Ye=s.readability(Ke,Pe),vt,yt;switch(yt=!1,vt=St(Re),vt.level+vt.size){case"AAsmall":case"AAAlarge":yt=Ye>=4.5;break;case"AAlarge":yt=Ye>=3;break;case"AAAsmall":yt=Ye>=7;break}return yt},s.mostReadable=function(Ke,Pe,Re){var Ye=null,vt=0,yt,Et,Zt,Ut;Re=Re||{},Et=Re.includeFallbackColors,Zt=Re.level,Ut=Re.size;for(var An=0;An<Pe.length;An++)yt=s.readability(Ke,Pe[An]),yt>vt&&(vt=yt,Ye=s(Pe[An]));return s.isReadable(Ke,Ye,{level:Zt,size:Ut})||!Et?Ye:(Re.includeFallbackColors=!1,s.mostReadable(Ke,["#fff","#000"],Re))};var we=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Se=s.hexNames=xe(we);function xe(Ke){var Pe={};for(var Re in Ke)Ke.hasOwnProperty(Re)&&(Pe[Ke[Re]]=Re);return Pe}function je(Ke){return Ke=parseFloat(Ke),(isNaN(Ke)||Ke<0||Ke>1)&&(Ke=1),Ke}function Me(Ke,Pe){it(Ke)&&(Ke="100%");var Re=nt(Ke);return Ke=Math.min(Pe,Math.max(0,parseFloat(Ke))),Re&&(Ke=parseInt(Ke*Pe,10)/100),Math.abs(Ke-Pe)<1e-6?1:Ke%Pe/parseFloat(Pe)}function rt(Ke){return Math.min(1,Math.max(0,Ke))}function Ct(Ke){return parseInt(Ke,16)}function it(Ke){return typeof Ke=="string"&&Ke.indexOf(".")!=-1&&parseFloat(Ke)===1}function nt(Ke){return typeof Ke=="string"&&Ke.indexOf("%")!=-1}function Ge(Ke){return Ke.length==1?"0"+Ke:""+Ke}function Ie(Ke){return Ke<=1&&(Ke=Ke*100+"%"),Ke}function $e(Ke){return Math.round(parseFloat(Ke)*255).toString(16)}function gt(Ke){return Ct(Ke)/255}var Dt=function(){var Ke="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",Re="(?:"+Pe+")|(?:"+Ke+")",Ye="[\\s|\\(]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")\\s*\\)?",vt="[\\s|\\(]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")\\s*\\)?";return{CSS_UNIT:new RegExp(Re),rgb:new RegExp("rgb"+Ye),rgba:new RegExp("rgba"+vt),hsl:new RegExp("hsl"+Ye),hsla:new RegExp("hsla"+vt),hsv:new RegExp("hsv"+Ye),hsva:new RegExp("hsva"+vt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ut(Ke){return!!Dt.CSS_UNIT.exec(Ke)}function Rt(Ke){Ke=Ke.replace(r,"").replace(i,"").toLowerCase();var Pe=!1;if(we[Ke])Ke=we[Ke],Pe=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Re;return(Re=Dt.rgb.exec(Ke))?{r:Re[1],g:Re[2],b:Re[3]}:(Re=Dt.rgba.exec(Ke))?{r:Re[1],g:Re[2],b:Re[3],a:Re[4]}:(Re=Dt.hsl.exec(Ke))?{h:Re[1],s:Re[2],l:Re[3]}:(Re=Dt.hsla.exec(Ke))?{h:Re[1],s:Re[2],l:Re[3],a:Re[4]}:(Re=Dt.hsv.exec(Ke))?{h:Re[1],s:Re[2],v:Re[3]}:(Re=Dt.hsva.exec(Ke))?{h:Re[1],s:Re[2],v:Re[3],a:Re[4]}:(Re=Dt.hex8.exec(Ke))?{r:Ct(Re[1]),g:Ct(Re[2]),b:Ct(Re[3]),a:gt(Re[4]),format:Pe?"name":"hex8"}:(Re=Dt.hex6.exec(Ke))?{r:Ct(Re[1]),g:Ct(Re[2]),b:Ct(Re[3]),format:Pe?"name":"hex"}:(Re=Dt.hex4.exec(Ke))?{r:Ct(Re[1]+""+Re[1]),g:Ct(Re[2]+""+Re[2]),b:Ct(Re[3]+""+Re[3]),a:gt(Re[4]+""+Re[4]),format:Pe?"name":"hex8"}:(Re=Dt.hex3.exec(Ke))?{r:Ct(Re[1]+""+Re[1]),g:Ct(Re[2]+""+Re[2]),b:Ct(Re[3]+""+Re[3]),format:Pe?"name":"hex"}:!1}function St(Ke){var Pe,Re;return Ke=Ke||{level:"AA",size:"small"},Pe=(Ke.level||"AA").toUpperCase(),Re=(Ke.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),Re!=="small"&&Re!=="large"&&(Re="small"),{level:Pe,size:Re}}return s})}(u2)),u2.exports}var ID;function gG(){if(ID)return Gh;ID=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.isvalidColorString=Gh.red=Gh.getContrastingColor=Gh.isValidHex=Gh.toState=Gh.simpleCheckForValidColor=void 0;var n=Yle(),e=i(n),t=$le(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}Gh.simpleCheckForValidColor=function(o){var f=["r","g","b","a","h","s","l","v"],C=0,x=0;return(0,e.default)(f,function(B){if(o[B]&&(C+=1,isNaN(o[B])||(x+=1),B==="s"||B==="l")){var R=/^\d+%$/;R.test(o[B])&&(x+=1)}}),C===x?o:!1};var s=Gh.toState=function(o,f){var C=o.hex?(0,r.default)(o.hex):(0,r.default)(o),x=C.toHsl(),B=C.toHsv(),R=C.toRgb(),P=C.toHex();x.s===0&&(x.h=f||0,B.h=f||0);var U=P==="000000"&&R.a===0;return{hsl:x,hex:U?"transparent":"#"+P,rgb:R,hsv:B,oldHue:o.h||f||x.h,source:o.source}};return Gh.isValidHex=function(o){if(o==="transparent")return!0;var f=String(o).charAt(0)==="#"?1:0;return o.length!==4+f&&o.length<7+f&&(0,r.default)(o).isValid()},Gh.getContrastingColor=function(o){if(!o)return"#fff";var f=s(o);if(f.hex==="transparent")return"rgba(0,0,0,0.4)";var C=(f.rgb.r*299+f.rgb.g*587+f.rgb.b*114)/1e3;return C>=128?"#000":"#fff"},Gh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Gh.isvalidColorString=function(o,f){var C=o.replace("°","");return(0,r.default)(f+" ("+C+")")._ok},Gh}var TD;function Vle(){if(TD)return Zg;TD=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.ColorWrap=void 0;var n=Object.assign||function(U){for(var N=1;N<arguments.length;N++){var W=arguments[N];for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&(U[X]=W[X])}return U},e=function(){function U(N,W){for(var X=0;X<W.length;X++){var $=W[X];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}return function(N,W,X){return W&&U(N.prototype,W),X&&U(N,X),N}}(),t=tl(),r=C(t),i=mG(),s=C(i),l=gG(),o=f(l);function f(U){if(U&&U.__esModule)return U;var N={};if(U!=null)for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(N[W]=U[W]);return N.default=U,N}function C(U){return U&&U.__esModule?U:{default:U}}function x(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function B(U,N){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:U}function R(U,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);U.prototype=Object.create(N&&N.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(U,N):U.__proto__=N)}var P=Zg.ColorWrap=function(N){var W=function(X){R($,X);function $(re){x(this,$);var te=B(this,($.__proto__||Object.getPrototypeOf($)).call(this));return te.handleChange=function(V,ne){var G=o.simpleCheckForValidColor(V);if(G){var le=o.toState(V,V.h||te.state.oldHue);te.setState(le),te.props.onChangeComplete&&te.debounce(te.props.onChangeComplete,le,ne),te.props.onChange&&te.props.onChange(le,ne)}},te.handleSwatchHover=function(V,ne){var G=o.simpleCheckForValidColor(V);if(G){var le=o.toState(V,V.h||te.state.oldHue);te.props.onSwatchHover&&te.props.onSwatchHover(le,ne)}},te.state=n({},o.toState(re.color,0)),te.debounce=(0,s.default)(function(V,ne,G){V(ne,G)},100),te}return e($,[{key:"render",value:function(){var te={};return this.props.onSwatchHover&&(te.onSwatchHover=this.handleSwatchHover),r.default.createElement(N,n({},this.props,this.state,{onChange:this.handleChange},te))}}],[{key:"getDerivedStateFromProps",value:function(te,V){return n({},o.toState(te.color,V.oldHue))}}]),$}(t.PureComponent||t.Component);return W.propTypes=n({},N.propTypes),W.defaultProps=n({},N.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),W};return Zg.default=P,Zg}var Xg={},Lv={},kD;function Hle(){if(kD)return Lv;kD=1,Object.defineProperty(Lv,"__esModule",{value:!0}),Lv.handleFocus=void 0;var n=Object.assign||function(f){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=function(){function f(C,x){for(var B=0;B<x.length;B++){var R=x[B];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}}return function(C,x,B){return x&&f(C.prototype,x),B&&f(C,B),C}}(),t=tl(),r=i(t);function i(f){return f&&f.__esModule?f:{default:f}}function s(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function l(f,C){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:f}function o(f,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);f.prototype=Object.create(C&&C.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(f,C):f.__proto__=C)}return Lv.handleFocus=function(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){o(R,B);function R(){var P,U,N,W;s(this,R);for(var X=arguments.length,$=Array(X),re=0;re<X;re++)$[re]=arguments[re];return W=(U=(N=l(this,(P=R.__proto__||Object.getPrototypeOf(R)).call.apply(P,[this].concat($))),N),N.state={focus:!1},N.handleFocus=function(){return N.setState({focus:!0})},N.handleBlur=function(){return N.setState({focus:!1})},U),l(N,W)}return e(R,[{key:"render",value:function(){return r.default.createElement(x,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(C,n({},this.props,this.state)))}}]),R}(r.default.Component)},Lv}var PD;function Zle(){if(PD)return Xg;PD=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.Swatch=void 0;var n=Object.assign||function(B){for(var R=1;R<arguments.length;R++){var P=arguments[R];for(var U in P)Object.prototype.hasOwnProperty.call(P,U)&&(B[U]=P[U])}return B},e=tl(),t=f(e),r=kp(),i=f(r),s=Hle(),l=PI(),o=f(l);function f(B){return B&&B.__esModule?B:{default:B}}var C=13,x=Xg.Swatch=function(R){var P=R.color,U=R.style,N=R.onClick,W=N===void 0?function(){}:N,X=R.onHover,$=R.title,re=$===void 0?P:$,te=R.children,V=R.focus,ne=R.focusStyle,G=ne===void 0?{}:ne,le=P==="transparent",fe=(0,i.default)({default:{swatch:n({background:P,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},U,V?G:{})}}),pe=function(Me){return W(P,Me)},we=function(Me){return Me.keyCode===C&&W(P,Me)},Se=function(Me){return X(P,Me)},xe={};return X&&(xe.onMouseOver=Se),t.default.createElement("div",n({style:fe.swatch,onClick:pe,title:re,tabIndex:0,onKeyDown:we},xe),te,le&&t.default.createElement(o.default,{borderRadius:fe.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return Xg.default=(0,s.handleFocus)(x),Xg}var RD;function yG(){return RD||(RD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ple();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return C(e).default}});var t=PI();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return C(t).default}});var r=Rle();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return C(r).default}});var i=Kle();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return C(i).default}});var s=Fle();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return C(s).default}});var l=Wle();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return C(l).default}});var o=Vle();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return C(o).default}});var f=Zle();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return C(f).default}});function C(x){return x&&x.__esModule?x:{default:x}}}(QS)),QS}var Jg={},eE,DD;function Xle(){if(DD)return eE;DD=1;function n(e){return e===void 0}return eE=n,eE}var qb={},KD;function Jle(){if(KD)return qb;KD=1,Object.defineProperty(qb,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(l[C]=f[C])}return l},e=tl(),t=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,o){var f={};for(var C in l)o.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(l,C)&&(f[C]=l[C]);return f}var s=24;return qb.default=function(l){var o=l.fill,f=o===void 0?"currentColor":o,C=l.width,x=C===void 0?s:C,B=l.height,R=B===void 0?s:B,P=l.style,U=P===void 0?{}:P,N=i(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:f,width:x,height:R},U)},N),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},qb}var FD;function eAe(){if(FD)return Jg;FD=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.ChromeFields=void 0;var n=function(){function $(re,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(re,ne.key,ne)}}return function(re,te,V){return te&&$(re.prototype,te),V&&$(re,V),re}}(),e=tl(),t=P(e),r=kp(),i=P(r),s=gG(),l=R(s),o=Xle(),f=P(o),C=yG(),x=Jle(),B=P(x);function R($){if($&&$.__esModule)return $;var re={};if($!=null)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(re[te]=$[te]);return re.default=$,re}function P($){return $&&$.__esModule?$:{default:$}}function U($,re){if(!($ instanceof re))throw new TypeError("Cannot call a class as a function")}function N($,re){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:$}function W($,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);$.prototype=Object.create(re&&re.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf($,re):$.__proto__=re)}var X=Jg.ChromeFields=function($){W(re,$);function re(te){U(this,re);var V=N(this,(re.__proto__||Object.getPrototypeOf(re)).call(this));return V.toggleViews=function(){V.state.view==="hex"?V.setState({view:"rgb"}):V.state.view==="rgb"?V.setState({view:"hsl"}):V.state.view==="hsl"&&(V.props.hsl.a===1?V.setState({view:"hex"}):V.setState({view:"rgb"}))},V.handleChange=function(ne,G){ne.hex?l.isValidHex(ne.hex)&&V.props.onChange({hex:ne.hex,source:"hex"},G):ne.r||ne.g||ne.b?V.props.onChange({r:ne.r||V.props.rgb.r,g:ne.g||V.props.rgb.g,b:ne.b||V.props.rgb.b,source:"rgb"},G):ne.a?(ne.a<0?ne.a=0:ne.a>1&&(ne.a=1),V.props.onChange({h:V.props.hsl.h,s:V.props.hsl.s,l:V.props.hsl.l,a:Math.round(ne.a*100)/100,source:"rgb"},G)):(ne.h||ne.s||ne.l)&&(typeof ne.s=="string"&&ne.s.includes("%")&&(ne.s=ne.s.replace("%","")),typeof ne.l=="string"&&ne.l.includes("%")&&(ne.l=ne.l.replace("%","")),ne.s==1?ne.s=.01:ne.l==1&&(ne.l=.01),V.props.onChange({h:ne.h||V.props.hsl.h,s:Number((0,f.default)(ne.s)?V.props.hsl.s:ne.s),l:Number((0,f.default)(ne.l)?V.props.hsl.l:ne.l),source:"hsl"},G))},V.showHighlight=function(ne){ne.currentTarget.style.background="#eee"},V.hideHighlight=function(ne){ne.currentTarget.style.background="transparent"},te.hsl.a!==1&&te.view==="hex"?V.state={view:"rgb"}:V.state={view:te.view},V}return n(re,[{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(C.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:ne.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:ne.toggle},t.default.createElement("div",{style:ne.icon,onClick:this.toggleViews,ref:function(fe){return V.icon=fe}},t.default.createElement(B.default,{style:ne.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(V,ne){return V.hsl.a!==1&&ne.view==="hex"?{view:"rgb"}:null}}]),re}(t.default.Component);return X.defaultProps={view:"hex"},Jg.default=X,Jg}var ey={},LD;function tAe(){if(LD)return ey;LD=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.ChromePointer=void 0;var n=tl(),e=i(n),t=kp(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=ey.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return ey.default=s,ey}var ty={},UD;function nAe(){if(UD)return ty;UD=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.ChromePointerCircle=void 0;var n=tl(),e=i(n),t=kp(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=ty.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return ty.default=s,ty}var zD;function rAe(){if(zD)return Ug;zD=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.Chrome=void 0;var n=tl(),e=N(n),t=pm(),r=N(t),i=kp(),s=N(i),l=pG(),o=N(l),f=yG(),C=eAe(),x=N(C),B=tAe(),R=N(B),P=nAe(),U=N(P);function N(X){return X&&X.__esModule?X:{default:X}}var W=Ug.Chrome=function($){var re=$.width,te=$.onChange,V=$.disableAlpha,ne=$.rgb,G=$.hsl,le=$.hsv,fe=$.hex,pe=$.renderers,we=$.styles,Se=we===void 0?{}:we,xe=$.className,je=xe===void 0?"":xe,Me=$.defaultView,rt=(0,s.default)((0,o.default)({default:{picker:{width:re,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ne.r+", "+ne.g+", "+ne.b+", "+ne.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Se),{disableAlpha:V});return e.default.createElement("div",{style:rt.picker,className:"chrome-picker "+je},e.default.createElement("div",{style:rt.saturation},e.default.createElement(f.Saturation,{style:rt.Saturation,hsl:G,hsv:le,pointer:U.default,onChange:te})),e.default.createElement("div",{style:rt.body},e.default.createElement("div",{style:rt.controls,className:"flexbox-fix"},e.default.createElement("div",{style:rt.color},e.default.createElement("div",{style:rt.swatch},e.default.createElement("div",{style:rt.active}),e.default.createElement(f.Checkboard,{renderers:pe}))),e.default.createElement("div",{style:rt.toggles},e.default.createElement("div",{style:rt.hue},e.default.createElement(f.Hue,{style:rt.Hue,hsl:G,pointer:R.default,onChange:te})),e.default.createElement("div",{style:rt.alpha},e.default.createElement(f.Alpha,{style:rt.Alpha,rgb:ne,hsl:G,pointer:R.default,renderers:pe,onChange:te})))),e.default.createElement(x.default,{rgb:ne,hsl:G,hex:fe,view:Me,onChange:te,disableAlpha:V})))};return W.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},W.defaultProps={width:225,disableAlpha:!1,styles:{}},Ug.default=(0,f.ColorWrap)(W),Ug}var iAe=rAe();const oAe=Gl(iAe);function io(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return io=function(){return l},l}io();function sAe(n){io().f[0]++;const e=(io().s[0]++,n.rgb);return io().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class vG extends ur.Component{state=(io().s[2]++,{pickerOpened:!1});colorInput=(io().s[3]++,null);constructor(e){io().f[1]++,io().s[4]++,super(e),io().s[5]++,this.onChangeNoCheck=t6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){io().f[2]++,io().s[6]++,this.props.onChange(e)}calcPickerOffset=(io().s[7]++,()=>{io().f[3]++;const e=(io().s[8]++,this.colorInput);if(io().s[9]++,e){io().b[0][0]++;const t=(io().s[10]++,e.getBoundingClientRect());return io().s[11]++,{top:t.top,left:t.left+196}}else return io().b[0][1]++,io().s[12]++,{top:160,left:555}});togglePicker=(io().s[13]++,()=>{io().f[4]++,io().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){io().f[5]++,io().s[15]++;try{return io().s[16]++,Ku(this.props.value).rgb()}catch(e){return io().s[17]++,console.warn("Error parsing color: ",e),io().s[18]++,Ku("rgb(255,255,255)")}}onChange(e){io().f[6]++,io().s[19]++,this.props.onChange(e===""?(io().b[1][0]++,void 0):(io().b[1][1]++,e))}render(){io().f[7]++;const e=(io().s[20]++,this.calcPickerOffset()),t=(io().s[21]++,this.color.object()),r=(io().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),i=(io().s[23]++,oe.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[oe.jsx(oAe,{color:r,onChange:l=>(io().f[8]++,io().s[24]++,this.onChangeNoCheck(sAe(l)))}),oe.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),s=(io().s[25]++,{backgroundColor:this.props.value});return io().s[26]++,oe.jsxs("div",{className:"maputnik-color-wrapper",children:[(io().b[2][0]++,this.state.pickerOpened&&(io().b[2][1]++,i)),oe.jsx("div",{className:"maputnik-color-swatch",style:s}),oe.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:l=>(io().f[9]++,io().s[27]++,this.colorInput=l),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(io().b[3][0]++,this.props.value):(io().b[3][1]++,""),onChange:l=>(io().f[10]++,io().s[28]++,this.onChange(l.target.value))})]})}}function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gn=function(){return l},l}gn();class $m extends ur.Component{static defaultProps=(gn().s[0]++,{rangeStep:1});_keyboardEvent=(gn().s[1]++,!1);constructor(e){gn().f[0]++,gn().s[2]++,super(e),gn().s[3]++,this.state={uuid:+Ny(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return gn().f[1]++,gn().s[4]++,gn().b[1][0]++,!t.editing&&(gn().b[1][1]++,e.value!==t.value)?(gn().b[0][0]++,gn().s[5]++,{value:e.value,dirtyValue:e.value}):(gn().b[0][1]++,gn().s[6]++,null)}changeValue(e){gn().f[2]++;const t=(gn().s[7]++,gn().b[3][0]++,e===""||(gn().b[3][1]++,e===void 0)?(gn().b[2][0]++,void 0):(gn().b[2][1]++,+e)),r=(gn().s[8]++,this.props.value!==t);gn().s[9]++,gn().b[5][0]++,this.isValid(t)&&(gn().b[5][1]++,r)?(gn().b[4][0]++,gn().s[10]++,this.props.onChange?(gn().b[6][0]++,gn().s[11]++,this.props.onChange(t)):gn().b[6][1]++,gn().s[12]++,this.setState({value:t})):(gn().b[4][1]++,gn().s[13]++,gn().b[8][0]++,!this.isValid(t)&&(gn().b[8][1]++,r)?(gn().b[7][0]++,gn().s[14]++,this.setState({value:void 0})):gn().b[7][1]++),gn().s[15]++,this.setState({dirtyValue:e===""?(gn().b[9][0]++,void 0):(gn().b[9][1]++,e)})}isValid(e){if(gn().f[3]++,gn().s[16]++,e===void 0)return gn().b[10][0]++,gn().s[17]++,!0;gn().b[10][1]++;const t=(gn().s[18]++,+e);return gn().s[19]++,isNaN(t)?(gn().b[11][0]++,gn().s[20]++,!1):(gn().b[11][1]++,gn().s[21]++,gn().b[13][0]++,!isNaN(this.props.min)&&(gn().b[13][1]++,t<this.props.min)?(gn().b[12][0]++,gn().s[22]++,!1):(gn().b[12][1]++,gn().s[23]++,gn().b[15][0]++,!isNaN(this.props.max)&&(gn().b[15][1]++,t>this.props.max)?(gn().b[14][0]++,gn().s[24]++,!1):(gn().b[14][1]++,gn().s[25]++,!0)))}resetValue=(gn().s[26]++,()=>{if(gn().f[4]++,gn().s[27]++,this.setState({editing:!1}),gn().s[28]++,this.state.value)gn().b[16][1]++;else{gn().b[16][0]++,gn().s[29]++;return}gn().s[30]++,this.isValid(this.state.value)?gn().b[17][1]++:(gn().b[17][0]++,gn().s[31]++,this.isValid(this.props.value)?(gn().b[18][0]++,gn().s[32]++,this.changeValue(this.props.value),gn().s[33]++,this.setState({dirtyValue:this.props.value})):(gn().b[18][1]++,gn().s[34]++,this.changeValue(void 0),gn().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(gn().s[36]++,e=>{gn().f[5]++;let t=(gn().s[37]++,parseFloat(e.target.value));const r=(gn().s[38]++,this.props.rangeStep);let i=(gn().s[39]++,t);if(gn().s[40]++,r){gn().b[19][0]++;const s=(gn().s[41]++,t%r);gn().s[42]++,this._keyboardEvent?(gn().b[20][0]++,gn().s[43]++,t<+this.state.dirtyValue?(gn().b[21][0]++,gn().s[44]++,t=this.state.value-r):(gn().b[21][1]++,gn().s[45]++,t=this.state.value+r),gn().s[46]++,i=t):(gn().b[20][1]++,gn().s[47]++,s<r/2?(gn().b[22][0]++,gn().s[48]++,t=t-s):(gn().b[22][1]++,gn().s[49]++,t=t+(r-s)))}else gn().b[19][1]++;gn().s[50]++,this._keyboardEvent=!1,gn().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),gn().s[52]++,this.setState({value:t,dirtyValue:i}),gn().s[53]++,this.props.onChange?(gn().b[23][0]++,gn().s[54]++,this.props.onChange(t)):gn().b[23][1]++});render(){if(gn().f[6]++,gn().s[55]++,gn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(gn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(gn().b[25][2]++,this.props.min!==void 0)&&(gn().b[25][3]++,this.props.max!==void 0)&&(gn().b[25][4]++,this.props.allowRange)){gn().b[24][0]++;const e=(gn().s[56]++,this.state.editing?(gn().b[26][0]++,this.state.dirtyValue):(gn().b[26][1]++,this.state.value)),t=(gn().s[57]++,this.props.default===void 0?(gn().b[27][0]++,""):(gn().b[27][1]++,this.props.default));let r;return gn().s[58]++,this.state.editingRange?(gn().b[28][0]++,gn().s[59]++,r=this.state.value):(gn().b[28][1]++,gn().s[60]++,r=e),gn().s[61]++,oe.jsxs("div",{className:"maputnik-number-container",children:[oe.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(gn().b[29][0]++,t):(gn().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{gn().f[7]++,gn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{gn().f[8]++,gn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{gn().f[9]++,gn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{gn().f[10]++,gn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),oe.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:r===void 0?(gn().b[30][0]++,""):(gn().b[30][1]++,r),onFocus:i=>{gn().f[11]++,gn().s[66]++,this.setState({editing:!0})},onChange:i=>{gn().f[12]++,gn().s[67]++,this.changeValue(i.target.value)},onBlur:i=>{gn().f[13]++,gn().s[68]++,this.setState({editing:!1}),gn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{gn().b[24][1]++;const e=(gn().s[70]++,this.state.editing?(gn().b[31][0]++,this.state.dirtyValue):(gn().b[31][1]++,this.state.value));return gn().s[71]++,oe.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(gn().b[32][0]++,""):(gn().b[32][1]++,e),onChange:t=>(gn().f[14]++,gn().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{gn().f[15]++,gn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Xp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xp=function(){return l},l}Xp();class CG extends ur.Component{static defaultProps=(Xp().s[0]++,{value:!1});onChange=(Xp().s[1]++,()=>{Xp().f[0]++,Xp().s[2]++,this.props.onChange(!this.props.value)});render(){return Xp().f[1]++,Xp().s[3]++,oe.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[oe.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),oe.jsx("div",{className:"maputnik-checkbox-box",children:oe.jsx("svg",{style:{display:this.props.value?(Xp().b[0][0]++,"inline"):(Xp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:oe.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vr=function(){return l},l}Vr();let _G=class extends ur.Component{static defaultProps=(Vr().s[0]++,{value:[],default:[]});constructor(e){Vr().f[0]++,Vr().s[1]++,super(e),Vr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Vr().f[1]++;const r=(Vr().s[3]++,[]),i=(Vr().s[4]++,t.initialPropsValue.slice(0));return Vr().s[5]++,Array(e.length).fill(null).map((s,l)=>{Vr().f[2]++,Vr().s[6]++,e.value[l]===t.initialPropsValue[l]?(Vr().b[0][0]++,Vr().s[7]++,r[l]=t.value[l]):(Vr().b[0][1]++,Vr().s[8]++,r[l]=t.value[l],Vr().s[9]++,i[l]=t.value[l])}),Vr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Vr().f[3]++,Vr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Vr().f[4]++;const i=(Vr().s[12]++,e[r]);return Vr().s[13]++,Vr().b[1][0]++,!(i===void 0||(Vr().b[1][1]++,i===""))})}changeValue(e,t){Vr().f[5]++;const r=(Vr().s[14]++,this.state.value.slice(0));Vr().s[15]++,r[e]=t,Vr().s[16]++,this.setState({value:r},()=>{Vr().f[6]++,Vr().s[17]++,Vr().b[3][0]++,this.isComplete(r)&&(Vr().b[3][1]++,this.props.onChange)?(Vr().b[2][0]++,Vr().s[18]++,this.props.onChange(r)):(Vr().b[2][1]++,Vr().s[19]++,this.props.onChange?(Vr().b[4][0]++,Vr().s[20]++,this.props.onChange(void 0)):Vr().b[4][1]++)})}render(){Vr().f[7]++;const{value:e}=(Vr().s[21]++,this.state),t=(Vr().s[22]++,Vr().b[5][0]++,e.length>0&&(Vr().b[5][1]++,!e.every(i=>(Vr().f[8]++,Vr().s[23]++,Vr().b[6][0]++,i===""||(Vr().b[6][1]++,i===void 0))))),r=(Vr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Vr().f[9]++,Vr().s[25]++,this.props.type==="number"?(Vr().b[7][0]++,Vr().s[26]++,oe.jsx($m,{default:(Vr().b[9][0]++,t||(Vr().b[9][1]++,!this.props.default)?(Vr().b[8][0]++,void 0):(Vr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Vr().b[10][0]++,!0):(Vr().b[10][1]++,!1),onChange:l=>(Vr().f[10]++,Vr().s[27]++,this.changeValue(s,l)),"aria-label":(Vr().b[11][0]++,this.props["aria-label"]||(Vr().b[11][1]++,this.props.label))},s)):(Vr().b[7][1]++,Vr().s[28]++,oe.jsx(Sp,{default:(Vr().b[13][0]++,t||(Vr().b[13][1]++,!this.props.default)?(Vr().b[12][0]++,void 0):(Vr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Vr().b[14][0]++,!0):(Vr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Vr().b[15][0]++,this.props["aria-label"]||(Vr().b[15][1]++,this.props.label))},s)))));return Vr().s[29]++,oe.jsx("div",{className:"maputnik-array",children:r})}};function fu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fu=function(){return l},l}fu();class aAe extends ur.Component{render(){fu().f[0]++;let e=(fu().s[0]++,this.props.options);fu().s[1]++,fu().b[1][0]++,e.length>0&&(fu().b[1][1]++,!Array.isArray(e[0]))?(fu().b[0][0]++,fu().s[2]++,e=e.map(i=>(fu().f[1]++,fu().s[3]++,[i,i]))):fu().b[0][1]++;const t=(fu().s[4]++,fu().b[2][0]++,this.props.value||(fu().b[2][1]++,e[0][0])),r=(fu().s[5]++,e.map(([i,s])=>(fu().f[2]++,fu().s[6]++,oe.jsxs("label",{className:dm("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[oe.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(fu().f[3]++,fu().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return fu().s[8]++,oe.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Ul(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ul=function(){return l},l}Ul();function lAe(n){Ul().f[0]++;let e=(Ul().s[0]++,0);return Ul().s[1]++,n.forEach(([t,r])=>{Ul().f[1]++,Ul().s[2]++,e+=r.length}),Ul().s[3]++,e}class RI extends ur.Component{render(){Ul().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Ul().s[4]++,this.props);return Ul().s[5]++,Ul().b[1][0]++,e.length<=3&&(Ul().b[1][1]++,lAe(e)<=20)?(Ul().b[0][0]++,Ul().s[6]++,oe.jsx(aAe,{name:i,options:e,value:(Ul().b[2][0]++,t||(Ul().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Ul().b[3][0]++,this.props["aria-label"]||(Ul().b[3][1]++,s))})):(Ul().b[0][1]++,Ul().s[7]++,oe.jsx(sg,{options:e,value:(Ul().b[4][0]++,t||(Ul().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Ul().b[5][0]++,this.props["aria-label"]||(Ul().b[5][1]++,s))}))}}function My(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return My=function(){return l},l}My();class AAe extends ur.Component{render(){My().f[0]++;const e=(My().s[0]++,this.props.t);return My().s[1]++,oe.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const tE=(My().s[2]++,Us()(AAe));function oo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oo=function(){return l},l}oo();function nE(n,e){if(oo().f[0]++,oo().s[0]++,n===""){oo().b[0][0]++,oo().s[1]++;return}else oo().b[0][1]++;let t;oo().s[2]++;const r=l=>{oo().f[1]++,oo().s[3]++;try{const o=(oo().s[4]++,new URL(l));return oo().s[5]++,o.protocol}catch{oo().s[6]++;return}},i=(oo().s[7]++,r(n)),s=(oo().s[8]++,window.location.protocol==="https:");return oo().s[9]++,i?(oo().b[1][1]++,oo().s[13]++,oo().b[4][0]++,i&&(oo().b[4][1]++,i==="http:")&&(oo().b[4][2]++,window.location.protocol==="https:")?(oo().b[3][0]++,oo().s[14]++,t=oe.jsx(tE,{children:oe.jsxs(U0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",oe.jsx("code",{children:"https://"})," domain"]})})):oo().b[3][1]++):(oo().b[1][0]++,oo().s[10]++,s?(oo().b[2][0]++,oo().s[11]++,t=oe.jsx(tE,{children:oe.jsxs(U0,{t:e,children:["Must provide protocol: ",oe.jsx("code",{children:"https://"})]})})):(oo().b[2][1]++,oo().s[12]++,t=oe.jsx(tE,{children:oe.jsxs(U0,{t:e,children:["Must provide protocol: ",oe.jsx("code",{children:"http://"})," or ",oe.jsx("code",{children:"https://"})]})}))),oo().s[15]++,t}class uAe extends ur.Component{static defaultProps=(oo().s[16]++,{onInput:()=>{oo().f[2]++}});constructor(e){oo().f[3]++,oo().s[17]++,super(e),oo().s[18]++,this.state={error:nE(e.value,e.t)}}onInput=(oo().s[19]++,e=>{oo().f[4]++,oo().s[20]++,this.setState({error:nE(e,this.props.t)}),oo().s[21]++,this.props.onInput?(oo().b[5][0]++,oo().s[22]++,this.props.onInput(e)):oo().b[5][1]++});onChange=(oo().s[23]++,e=>{oo().f[5]++,oo().s[24]++,this.setState({error:nE(e,this.props.t)}),oo().s[25]++,this.props.onChange(e)});render(){return oo().f[6]++,oo().s[26]++,oe.jsxs("div",{children:[oe.jsx(Sp,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const DI=(oo().s[27]++,Us()(uAe));function Kr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Kr=function(){return l},l}Kr();class cAe extends ur.Component{changeValue(e,t){Kr().f[0]++;const r=(Kr().s[0]++,this.values.slice(0));Kr().s[1]++,r[e]=t,Kr().s[2]++,this.props.onChange?(Kr().b[0][0]++,Kr().s[3]++,this.props.onChange(r)):Kr().b[0][1]++}get values(){return Kr().f[1]++,Kr().s[4]++,Kr().b[1][0]++,this.props.value||(Kr().b[1][1]++,this.props.default)||(Kr().b[1][2]++,[])}addValue=(Kr().s[5]++,()=>{Kr().f[2]++;const e=(Kr().s[6]++,this.values.slice(0));if(Kr().s[7]++,this.props.type==="number")Kr().b[2][0]++,Kr().s[8]++,e.push(0);else if(Kr().b[2][1]++,Kr().s[9]++,this.props.type==="url")Kr().b[3][0]++,Kr().s[10]++,e.push("");else if(Kr().b[3][1]++,Kr().s[11]++,this.props.type==="enum"){Kr().b[4][0]++;const{fieldSpec:t}=(Kr().s[12]++,this.props),r=(Kr().s[13]++,Object.keys(t.values)[0]);Kr().s[14]++,e.push(r)}else Kr().b[4][1]++,Kr().s[15]++,e.push("");Kr().s[16]++,this.props.onChange?(Kr().b[5][0]++,Kr().s[17]++,this.props.onChange(e)):Kr().b[5][1]++});deleteValue(e){Kr().f[3]++;const t=(Kr().s[18]++,this.values.slice(0));Kr().s[19]++,t.splice(e,1),Kr().s[20]++,this.props.onChange?(Kr().b[6][0]++,Kr().s[21]++,this.props.onChange(t.length>0?(Kr().b[7][0]++,t):(Kr().b[7][1]++,void 0))):Kr().b[6][1]++}render(){Kr().f[4]++;const e=(Kr().s[22]++,this.props.t),t=(Kr().s[23]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Kr().s[24]++,this.values.map((i,s)=>{Kr().f[5]++;const l=(Kr().s[25]++,oe.jsx(hAe,{onClick:this.deleteValue.bind(this,s),...t}));let o;if(Kr().s[26]++,this.props.type==="url")Kr().b[8][0]++,Kr().s[27]++,o=oe.jsx(DI,{value:i,onChange:this.changeValue.bind(this,s),"aria-label":(Kr().b[9][0]++,this.props["aria-label"]||(Kr().b[9][1]++,this.props.label))});else if(Kr().b[8][1]++,Kr().s[28]++,this.props.type==="number")Kr().b[10][0]++,Kr().s[29]++,o=oe.jsx($m,{value:i,onChange:this.changeValue.bind(this,s),"aria-label":(Kr().b[11][0]++,this.props["aria-label"]||(Kr().b[11][1]++,this.props.label))});else if(Kr().b[10][1]++,Kr().s[30]++,this.props.type==="enum"){Kr().b[12][0]++;const f=(Kr().s[31]++,Object.keys(this.props.fieldSpec?.values).map(C=>(Kr().f[6]++,Kr().s[32]++,[C,mI(C)])));Kr().s[33]++,o=oe.jsx(RI,{options:f,value:i,onChange:this.changeValue.bind(this,s),"aria-label":(Kr().b[13][0]++,this.props["aria-label"]||(Kr().b[13][1]++,this.props.label))})}else Kr().b[12][1]++,Kr().s[34]++,o=oe.jsx(Sp,{value:i,onChange:this.changeValue.bind(this,s),"aria-label":(Kr().b[14][0]++,this.props["aria-label"]||(Kr().b[14][1]++,this.props.label))});return Kr().s[35]++,oe.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[oe.jsx("div",{className:"maputnik-array-block-action",children:l}),oe.jsx("div",{className:"maputnik-array-block-content",children:o})]},s)}));return Kr().s[36]++,oe.jsxs("div",{className:"maputnik-array",children:[r,oe.jsx(el,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const bG=(Kr().s[37]++,Us()(cAe));class hAe extends ur.Component{render(){Kr().f[7]++;const e=(Kr().s[38]++,this.props.t);return Kr().s[39]++,oe.jsx(el,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:oe.jsx($O,{label:oe.jsx(qy,{})})})}}function ua(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ua=function(){return l},l}ua();class dAe extends ur.Component{static defaultProps=(ua().s[0]++,{fonts:[]});get values(){ua().f[0]++;const e=(ua().s[1]++,ua().b[0][0]++,this.props.value||(ua().b[0][1]++,this.props.default)||(ua().b[0][2]++,[]));return ua().s[2]++,e[e.length-1]!==""?(ua().b[1][0]++,ua().s[3]++,e.concat("")):(ua().b[1][1]++,ua().s[4]++,e)}changeFont(e,t){ua().f[1]++;const r=(ua().s[5]++,this.values.slice(0));ua().s[6]++,r[e]=t;const i=(ua().s[7]++,r.filter(s=>(ua().f[2]++,ua().s[8]++,s!==void 0)).filter(s=>(ua().f[3]++,ua().s[9]++,s!=="")));ua().s[10]++,this.props.onChange(i)}render(){ua().f[4]++;const e=(ua().s[11]++,this.values.map((t,r)=>(ua().f[5]++,ua().s[12]++,oe.jsx("li",{children:oe.jsx(T_,{"aria-label":(ua().b[2][0]++,this.props["aria-label"]||(ua().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(i=>(ua().f[6]++,ua().s[13]++,[i,i])),onChange:this.changeFont.bind(this,r)})},r))));return ua().s[14]++,oe.jsx("ul",{className:"maputnik-font",children:e})}}function po(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return po=function(){return l},l}po();const fAe=(po().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let wy=class extends ur.Component{childNodes(){po().f[0]++;const e=(po().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(po().f[1]++,po().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(po().s[3]++,this.props.fieldSpec?.type){case"number":return po().b[0][0]++,po().s[4]++,oe.jsx($m,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":po().b[0][1]++;{const t=(po().s[5]++,Object.keys((po().b[1][0]++,this.props.fieldSpec.values||(po().b[1][1]++,[]))).map(r=>(po().f[2]++,po().s[6]++,[r,mI(r)])));return po().s[7]++,oe.jsx(RI,{...e,options:t})}case"resolvedImage":po().b[0][2]++;case"formatted":po().b[0][3]++;case"string":if(po().b[0][4]++,po().s[8]++,fAe.indexOf(this.props.fieldName)>=0){po().b[2][0]++;const t=(po().s[9]++,po().b[3][0]++,this.props.fieldSpec.values||(po().b[3][1]++,[]));return po().s[10]++,oe.jsx(T_,{...e,options:t.map(r=>(po().f[3]++,po().s[11]++,[r,r]))})}else return po().b[2][1]++,po().s[12]++,oe.jsx(Sp,{...e});case"color":return po().b[0][5]++,po().s[13]++,oe.jsx(vG,{...e});case"boolean":return po().b[0][6]++,po().s[14]++,oe.jsx(CG,{...e});case"array":return po().b[0][7]++,po().s[15]++,this.props.fieldName==="text-font"?(po().b[4][0]++,po().s[16]++,oe.jsx(dAe,{...e,fonts:this.props.fieldSpec.values})):(po().b[4][1]++,po().s[17]++,this.props.fieldSpec.length?(po().b[5][0]++,po().s[18]++,oe.jsx(_G,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(po().b[5][1]++,po().s[19]++,oe.jsx(bG,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return po().b[0][8]++,po().s[20]++,null}}render(){return po().f[4]++,po().s[21]++,oe.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function Sc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="cf4fa307cbacd101a0c445717dc560b88355320c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:6,column:17},end:{line:26,column:1}},1:{start:{line:7,column:32},end:{line:7,column:53}},2:{start:{line:8,column:18},end:{line:8,column:67}},3:{start:{line:9,column:22},end:{line:11,column:3}},4:{start:{line:10,column:4},end:{line:10,column:20}},5:{start:{line:12,column:2},end:{line:25,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:28},end:{line:26,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:9,column:22},end:{line:9,column:23}},loc:{start:{line:9,column:31},end:{line:11,column:3}},line:9}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:20,column:8}},type:"binary-expr",locations:[{start:{line:13,column:4},end:{line:13,column:19}},{start:{line:13,column:39},end:{line:20,column:8}}],line:13},1:{loc:{start:{line:21,column:4},end:{line:21,column:118}},type:"binary-expr",locations:[{start:{line:21,column:4},end:{line:21,column:20}},{start:{line:21,column:40},end:{line:21,column:118}}],line:21},2:{loc:{start:{line:24,column:4},end:{line:24,column:198}},type:"binary-expr",locations:[{start:{line:24,column:4},end:{line:24,column:19}},{start:{line:24,column:39},end:{line:24,column:198}}],line:24},3:{loc:{start:{line:24,column:104},end:{line:24,column:125}},type:"cond-expr",locations:[{start:{line:24,column:114},end:{line:24,column:116}},{start:{line:24,column:119},end:{line:24,column:125}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAqBI,SAGM,KAHN;AArBJ,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAS7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAU,8BACZ,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf4fa307cbacd101a0c445717dc560b88355320c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Sc=function(){return l},l}Sc();Sc().s[0]++;const ZC=n=>{Sc().f[0]++;const[e,t]=(Sc().s[1]++,ur.useState(!1)),r=(Sc().s[2]++,ur.useRef(Ny("fieldset_label_")));Sc().s[3]++;const i=s=>{Sc().f[1]++,Sc().s[4]++,t(s)};return Sc().s[5]++,oe.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":r.current,children:[(Sc().b[0][0]++,n.fieldSpec&&(Sc().b[0][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:oe.jsx($O,{label:n.label,onToggleDoc:i,fieldSpec:n.fieldSpec})}))),(Sc().b[1][0]++,!n.fieldSpec&&(Sc().b[1][1]++,oe.jsx("div",{className:"maputnik-input-block-label",children:n.label}))),oe.jsx("div",{className:"maputnik-input-block-action",children:n.action}),oe.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Sc().b[2][0]++,n.fieldSpec&&(Sc().b[2][1]++,oe.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Sc().b[3][0]++,""):(Sc().b[3][1]++,"none")},children:oe.jsx(VO,{fieldSpec:n.fieldSpec})})))]})};function Fs(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="9ce53c41b0db96df107bee36917be9f6606b9a56",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:15,column:1}},1:{start:{line:6,column:15},end:{line:6,column:20}},2:{start:{line:7,column:27},end:{line:7,column:87}},3:{start:{line:8,column:17},end:{line:8,column:22}},4:{start:{line:9,column:15},end:{line:9,column:23}},5:{start:{line:10,column:23},end:{line:10,column:28}},6:{start:{line:11,column:16},end:{line:11,column:21}},7:{start:{line:12,column:16},end:{line:12,column:21}},8:{start:{line:13,column:19},end:{line:13,column:24}},9:{start:{line:14,column:17},end:{line:14,column:22}},10:{start:{line:16,column:18},end:{line:27,column:1}},11:{start:{line:17,column:20},end:{line:17,column:41}},12:{start:{line:18,column:22},end:{line:18,column:40}},13:{start:{line:20,column:2},end:{line:25,column:3}},14:{start:{line:21,column:4},end:{line:21,column:35}},15:{start:{line:23,column:4},end:{line:23,column:53}},16:{start:{line:24,column:4},end:{line:24,column:22}},17:{start:{line:26,column:2},end:{line:26,column:170}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:9},end:{line:6,column:10}},loc:{start:{line:6,column:15},end:{line:6,column:20}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:7,column:8},end:{line:7,column:9}},loc:{start:{line:7,column:27},end:{line:7,column:87}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:8,column:11},end:{line:8,column:12}},loc:{start:{line:8,column:17},end:{line:8,column:22}},line:8},3:{name:"(anonymous_3)",decl:{start:{line:9,column:9},end:{line:9,column:10}},loc:{start:{line:9,column:15},end:{line:9,column:23}},line:9},4:{name:"(anonymous_4)",decl:{start:{line:10,column:17},end:{line:10,column:18}},loc:{start:{line:10,column:23},end:{line:10,column:28}},line:10},5:{name:"(anonymous_5)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:16},end:{line:11,column:21}},line:11},6:{name:"(anonymous_6)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},7:{name:"(anonymous_7)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:13,column:24}},line:13},8:{name:"(anonymous_8)",decl:{start:{line:14,column:11},end:{line:14,column:12}},loc:{start:{line:14,column:17},end:{line:14,column:22}},line:14},9:{name:"(anonymous_9)",decl:{start:{line:16,column:18},end:{line:16,column:19}},loc:{start:{line:16,column:29},end:{line:27,column:1}},line:16}},branchMap:{0:{loc:{start:{line:7,column:27},end:{line:7,column:87}},type:"cond-expr",locations:[{start:{line:7,column:71},end:{line:7,column:79}},{start:{line:7,column:82},end:{line:7,column:87}}],line:7},1:{loc:{start:{line:20,column:2},end:{line:25,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:25,column:3}},{start:{line:22,column:9},end:{line:25,column:3}}],line:20}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AAqCM;AArCN,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,MAAM,WAAW;AAEnC,QAAM,cAAc,QAAQ,SAAU;AAEtC,MAAI;AACJ,MAAI,aAAa;AACf,gBAAY,YAAY,KAAK;AAAA,EAC/B,OACK;AACH,YAAQ,KAAK,yBAAyB,SAAS;AAC/C,gBAAY;AAAA,EACd;AAEA,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WACpE,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ce53c41b0db96df107bee36917be9f6606b9a56"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fs=function(){return l},l}Fs();const pAe=(Fs().s[0]++,{color:()=>(Fs().f[0]++,Fs().s[1]++,ha),enum:({fieldSpec:n})=>(Fs().f[1]++,Fs().s[2]++,Object.keys(n.values).length<=3?(Fs().b[0][0]++,ZC):(Fs().b[0][1]++,ha)),boolean:()=>(Fs().f[2]++,Fs().s[3]++,ha),array:()=>(Fs().f[3]++,Fs().s[4]++,ZC),resolvedImage:()=>(Fs().f[4]++,Fs().s[5]++,ha),number:()=>(Fs().f[5]++,Fs().s[6]++,ha),string:()=>(Fs().f[6]++,Fs().s[7]++,ha),formatted:()=>(Fs().f[7]++,Fs().s[8]++,ha),padding:()=>(Fs().f[8]++,Fs().s[9]++,ha)});Fs().s[10]++;const mAe=n=>{Fs().f[9]++;const e=(Fs().s[11]++,n.fieldSpec?.type),t=(Fs().s[12]++,pAe[e]);let r;return Fs().s[13]++,t?(Fs().b[1][0]++,Fs().s[14]++,r=t(n)):(Fs().b[1][1]++,Fs().s[15]++,console.warn("No such type for '%s'",e),Fs().s[16]++,r=ha),Fs().s[17]++,oe.jsx(r,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,children:oe.jsx(wy,{...n})})};function yh(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yh=function(){return l},l}yh();class gAe extends ur.Component{render(){yh().f[0]++;const e=(yh().s[0]++,this.props.t);let t,r,i;return yh().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(yh().b[0][0]++,yh().s[2]++,i=oe.jsx(el,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:HC})})}),yh().s[3]++,t=oe.jsx(el,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:oe.jsx(kV,{})}),yh().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(yh().b[1][0]++,yh().s[5]++,r=oe.jsx(el,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:oe.jsx(PV,{})})):yh().b[1][1]++,yh().s[6]++,oe.jsxs("div",{children:[i,r,t]})):(yh().b[0][1]++,yh().s[7]++,oe.jsx("div",{children:i}))}}const yAe=(yh().s[8]++,Us()(gAe));function Jp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Jp=function(){return l},l}Jp();class vAe extends ur.Component{static defaultProps=(Jp().s[0]++,{errors:{}});render(){Jp().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Jp().s[1]++,this.props),i=(Jp().s[2]++,oe.jsx(yAe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Jp().s[3]++,e[r+"."+t]);return Jp().s[4]++,oe.jsx(mAe,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:y3((Jp().b[0][0]++,this.props.fieldName||(Jp().b[0][1]++,""))),action:i})}}function Ad(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ad=function(){return l},l}Ad();function xG(n,e){Ad().f[0]++;const t=(Ad().s[0]++,+n),r=(Ad().s[1]++,+e);return Ad().s[2]++,t<r?(Ad().b[0][0]++,Ad().s[3]++,-1):(Ad().b[0][1]++,Ad().s[4]++,t>r?(Ad().b[1][0]++,Ad().s[5]++,1):(Ad().b[1][1]++,Ad().s[6]++,0))}function dp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dp=function(){return l},l}dp();function Pf(n){if(dp().f[0]++,dp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return dp().b[0][0]++,dp().s[1]++,n.default;dp().b[0][1]++;const e=(dp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return dp().s[3]++,dp().b[1][0]++,e[n.type]||(dp().b[1][1]++,"")}function Sy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Sy=function(){return l},l}Sy();class CAe extends ur.Component{render(){Sy().f[0]++;const e=(Sy().s[0]++,this.props.t);return Sy().s[1]++,oe.jsx(el,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:oe.jsx(qy,{})})}}const MG=(Sy().s[2]++,Us()(CAe));function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mn=function(){return l},l}mn();function ND(n,e){mn().f[0]++;let t;return mn().s[0]++,mn().b[1][0]++,n.value&&(mn().b[1][1]++,n.value.stops)?(mn().b[0][0]++,mn().s[1]++,n.value.stops.forEach((r,i)=>{mn().f[1]++,mn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?mn().b[2][1]++:(mn().b[2][0]++,mn().s[3]++,t?mn().b[3][1]++:(mn().b[3][0]++,mn().s[4]++,t={...e}),mn().s[5]++,t[i]=Ny("stop-"))})):mn().b[0][1]++,mn().s[6]++,t}class _Ae extends ur.Component{state=(mn().s[7]++,{refs:{}});componentDidMount(){mn().f[2]++;const e=(mn().s[8]++,ND(this.props,this.state));mn().s[9]++,e?(mn().b[4][0]++,mn().s[10]++,this.setState({refs:e})):mn().b[4][1]++}static getDerivedStateFromProps(e,t){mn().f[3]++;const r=(mn().s[11]++,ND(e,t));return mn().s[12]++,r?(mn().b[5][0]++,mn().s[13]++,{refs:r}):(mn().b[5][1]++,mn().s[14]++,null)}getFieldFunctionType(e){return mn().f[4]++,mn().s[15]++,e.expression.interpolated?(mn().b[6][0]++,mn().s[16]++,"exponential"):(mn().b[6][1]++,mn().s[17]++,e.type==="number"?(mn().b[7][0]++,mn().s[18]++,"interval"):(mn().b[7][1]++,mn().s[19]++,"categorical"))}getDataFunctionTypes(e){return mn().f[5]++,mn().s[20]++,e.expression.interpolated?(mn().b[8][0]++,mn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(mn().b[8][1]++,mn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){mn().f[6]++;const t=(mn().s[23]++,e.map((i,s)=>(mn().f[7]++,mn().s[24]++,{ref:this.state.refs[s],data:i})).sort((i,s)=>(mn().f[8]++,mn().s[25]++,xG(i.data[0].zoom,s.data[0].zoom)))),r=(mn().s[26]++,{});return mn().s[27]++,t.forEach((i,s)=>{mn().f[9]++,mn().s[28]++,r[s]=i.ref}),mn().s[29]++,this.setState({refs:r}),mn().s[30]++,t.map(i=>(mn().f[10]++,mn().s[31]++,i.data))}onChange=(mn().s[32]++,(e,t)=>{if(mn().f[11]++,mn().s[33]++,t.type==="identity")mn().b[9][0]++,mn().s[34]++,t={type:t.type,property:t.property};else{mn().b[9][1]++;const r=(mn().s[35]++,t.type==="categorical"?(mn().b[10][0]++,""):(mn().b[10][1]++,0));mn().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:r},Pf(this.props.fieldSpec)],[{zoom:10,value:r},Pf(this.props.fieldSpec)]],...t}}mn().s[37]++,this.props.onChange(e,t)});changeStop(e,t,r){mn().f[12]++;const i=(mn().s[38]++,mn().b[11][0]++,this.props.value?.stops.slice(0)||(mn().b[11][1]++,[]));mn().s[39]++,i[e]=[{value:t.value,zoom:t.zoom===void 0?(mn().b[12][0]++,0):(mn().b[12][1]++,t.zoom)},r];const s=(mn().s[40]++,this.orderStopsByZoom(i)),l=(mn().s[41]++,{...this.props.value,stops:s});mn().s[42]++,this.onChange(this.props.fieldName,l)}changeBase(e){mn().f[13]++;const t=(mn().s[43]++,{...this.props.value,base:e});mn().s[44]++,t.base===void 0?(mn().b[13][0]++,mn().s[45]++,delete t.base):mn().b[13][1]++,mn().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){mn().f[14]++,mn().s[47]++,mn().b[15][0]++,e==="interpolate"&&(mn().b[15][1]++,this.props.onChangeToZoomFunction)?(mn().b[14][0]++,mn().s[48]++,this.props.onChangeToZoomFunction()):(mn().b[14][1]++,mn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){mn().f[15]++,mn().s[50]++,t?(mn().b[16][0]++,mn().s[51]++,this.props.value[e]=t):(mn().b[16][1]++,mn().s[52]++,delete this.props.value[e]),mn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){mn().f[16]++;const e=(mn().s[54]++,this.props.t);mn().s[55]++,typeof this.props.value?.type>"u"?(mn().b[17][0]++,mn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):mn().b[17][1]++;let t;return mn().s[57]++,this.props.value?.stops?(mn().b[18][0]++,mn().s[58]++,t=this.props.value.stops.map((r,i)=>{mn().f[17]++;const s=(mn().s[59]++,typeof r[0]=="object"?(mn().b[19][0]++,r[0].zoom):(mn().b[19][1]++,void 0)),l=(mn().s[60]++,this.state.refs[i]),o=(mn().s[61]++,typeof r[0]=="object"?(mn().b[20][0]++,r[0].value):(mn().b[20][1]++,r[0])),f=(mn().s[62]++,r[1]),C=(mn().s[63]++,oe.jsx(MG,{onClick:this.props.onDeleteStop?.bind(this,i)})),x=(mn().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:o,onChange:P=>(mn().f[18]++,mn().s[65]++,this.changeStop(i,{zoom:s,value:P},f))});let B;mn().s[66]++,this.props.value?.type==="categorical"?(mn().b[21][0]++,mn().s[67]++,B=oe.jsx(Sp,{...x})):(mn().b[21][1]++,mn().s[68]++,B=oe.jsx($m,{...x}));let R=(mn().s[69]++,null);return mn().s[70]++,s!==void 0?(mn().b[22][0]++,mn().s[71]++,R=oe.jsx("div",{children:oe.jsx($m,{"aria-label":"Zoom",value:s,onChange:P=>(mn().f[19]++,mn().s[72]++,this.changeStop(i,{zoom:P,value:o},f)),min:0,max:22})})):mn().b[22][1]++,mn().s[73]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:R}),oe.jsx("td",{children:B}),oe.jsx("td",{children:oe.jsx(wy,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:f,onChange:(P,U)=>(mn().f[20]++,mn().s[74]++,this.changeStop(i,{zoom:s,value:o},U))})}),oe.jsx("td",{children:C})]},l)})):mn().b[18][1]++,mn().s[75]++,oe.jsx("div",{className:"maputnik-data-spec-block",children:oe.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[oe.jsx("legend",{children:y3(this.props.fieldName)}),oe.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[oe.jsx(ha,{label:e("Function"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(sg,{value:this.props.value.type,onChange:r=>(mn().f[21]++,mn().s[76]++,this.changeDataType(r)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(mn().b[23][0]++,this.props.value?.type!=="identity"&&(mn().b[23][1]++,oe.jsx(ha,{label:e("Base"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(wy,{fieldName:"base",fieldSpec:Xo.function.base,value:this.props.value?.base,onChange:(r,i)=>(mn().f[22]++,mn().s[77]++,this.changeBase(i))})})},"base"))),oe.jsx(ha,{label:"Property",children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(Sp,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:r=>(mn().f[23]++,mn().s[78]++,this.changeDataProperty("property",r))})})},"property"),(mn().b[24][0]++,t&&(mn().b[24][1]++,oe.jsx(ha,{label:e("Default"),children:oe.jsx(wy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(r,i)=>(mn().f[24]++,mn().s[79]++,this.changeDataProperty("default",i))})},"default"))),(mn().b[25][0]++,t&&(mn().b[25][1]++,oe.jsx("div",{className:"maputnik-function-stop",children:oe.jsxs("table",{className:"maputnik-function-stop-table",children:[oe.jsx("caption",{children:e("Stops")}),oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{children:e("Zoom")}),oe.jsx("th",{children:e("Input value")}),oe.jsx("th",{rowSpan:2,children:e("Output value")})]})}),oe.jsx("tbody",{children:t})]})}))),oe.jsxs("div",{className:"maputnik-toolbox",children:[(mn().b[26][0]++,t&&(mn().b[26][1]++,oe.jsxs(el,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:fI})})," ",e("Add stop")]}))),oe.jsxs(el,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:HC})})," ",e("Convert to expression")]})]})]})]})})}}const bAe=(mn().s[80]++,Us()(_Ae));function xr(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xr=function(){return l},l}xr();function GD(n,e){xr().f[0]++;let t=(xr().s[0]++,{});return xr().s[1]++,xr().b[1][0]++,n.value&&(xr().b[1][1]++,n.value.stops)?(xr().b[0][0]++,xr().s[2]++,n.value.stops.forEach((r,i)=>{xr().f[1]++,xr().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(xr().b[2][0]++,xr().s[4]++,t?xr().b[3][1]++:(xr().b[3][0]++,xr().s[5]++,t={...e}),xr().s[6]++,t[i]=Ny("stop-")):(xr().b[2][1]++,xr().s[7]++,t[i]=e.refs[i])})):xr().b[0][1]++,xr().s[8]++,t}class xAe extends ur.Component{static defaultProps=(xr().s[9]++,{errors:{}});state=(xr().s[10]++,{refs:{}});componentDidMount(){xr().f[2]++;const e=(xr().s[11]++,GD(this.props,this.state));xr().s[12]++,e?(xr().b[4][0]++,xr().s[13]++,this.setState({refs:e})):xr().b[4][1]++}static getDerivedStateFromProps(e,t){xr().f[3]++;const r=(xr().s[14]++,GD(e,t));return xr().s[15]++,r?(xr().b[5][0]++,xr().s[16]++,{refs:r}):(xr().b[5][1]++,xr().s[17]++,null)}orderStopsByZoom(e){xr().f[4]++;const t=(xr().s[18]++,e.map((i,s)=>(xr().f[5]++,xr().s[19]++,{ref:this.state.refs[s],data:i})).sort((i,s)=>(xr().f[6]++,xr().s[20]++,xG(i.data[0],s.data[0])))),r=(xr().s[21]++,{});return xr().s[22]++,t.forEach((i,s)=>{xr().f[7]++,xr().s[23]++,r[s]=i.ref}),xr().s[24]++,this.setState({refs:r}),xr().s[25]++,t.map(i=>(xr().f[8]++,xr().s[26]++,i.data))}changeZoomStop(e,t,r){xr().f[9]++;const i=(xr().s[27]++,this.props.value.stops.slice(0));xr().s[28]++,i[e]=[t,r];const s=(xr().s[29]++,this.orderStopsByZoom(i)),l=(xr().s[30]++,{...this.props.value,stops:s});xr().s[31]++,this.props.onChange(this.props.fieldName,l)}changeBase(e){xr().f[10]++;const t=(xr().s[32]++,{...this.props.value,base:e});xr().s[33]++,t.base===void 0?(xr().b[6][0]++,xr().s[34]++,delete t.base):xr().b[6][1]++,xr().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(xr().s[36]++,e=>{xr().f[11]++,xr().s[37]++,xr().b[8][0]++,e!=="interpolate"&&(xr().b[8][1]++,this.props.onChangeToDataFunction)?(xr().b[7][0]++,xr().s[38]++,this.props.onChangeToDataFunction(e)):xr().b[7][1]++});render(){xr().f[12]++;const e=(xr().s[39]++,this.props.t),t=(xr().s[40]++,this.props.value?.stops.map((r,i)=>{xr().f[13]++;const s=(xr().s[41]++,r[0]),l=(xr().s[42]++,r[1]),o=(xr().s[43]++,oe.jsx(MG,{onClick:this.props.onDeleteStop?.bind(this,i)}));return xr().s[44]++,oe.jsxs("tr",{children:[oe.jsx("td",{children:oe.jsx($m,{"aria-label":e("Zoom"),value:s,onChange:f=>(xr().f[14]++,xr().s[45]++,this.changeZoomStop(i,f,l)),min:0,max:22})}),oe.jsx("td",{children:oe.jsx(wy,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:l,onChange:(f,C)=>(xr().f[15]++,xr().s[46]++,this.changeZoomStop(i,s,C))})}),oe.jsx("td",{children:o})]},`${r[0]}-${r[1]}`)}));return xr().s[47]++,oe.jsx("div",{className:"maputnik-data-spec-block",children:oe.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[oe.jsx("legend",{children:y3(this.props.fieldName)}),oe.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[oe.jsx(ha,{label:e("Function"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(sg,{value:"interpolate",onChange:r=>(xr().f[16]++,xr().s[48]++,this.changeDataType(r)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),oe.jsx(ha,{label:e("Base"),children:oe.jsx("div",{className:"maputnik-data-spec-property-input",children:oe.jsx(wy,{fieldName:"base",fieldSpec:Xo.function.base,value:this.props.value?.base,onChange:(r,i)=>(xr().f[17]++,xr().s[49]++,this.changeBase(i))})})}),oe.jsx("div",{className:"maputnik-function-stop",children:oe.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[oe.jsx("caption",{children:e("Stops")}),oe.jsx("thead",{children:oe.jsxs("tr",{children:[oe.jsx("th",{children:e("Zoom")}),oe.jsx("th",{rowSpan:2,children:e("Output value")})]})}),oe.jsx("tbody",{children:t})]})}),oe.jsxs("div",{className:"maputnik-toolbox",children:[oe.jsxs(el,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:fI})})," ",e("Add stop")]}),oe.jsxs(el,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[oe.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:oe.jsx("path",{fill:"currentColor",d:HC})})," ",e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return xr().f[18]++,xr().s[50]++,e["property-type"]==="data-driven"?(xr().b[9][0]++,xr().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(xr().b[9][1]++,xr().s[52]++,["interpolate"])}}const MAe=(xr().s[53]++,Us()(xAe));function Nt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="5033c253416f295119927ac94f2be1c5d08ca915",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:56,column:22},end:{line:281,column:1}},25:{start:{line:57,column:34},end:{line:59,column:3}},26:{start:{line:60,column:36},end:{line:60,column:57}},27:{start:{line:61,column:2},end:{line:65,column:48}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:61}},30:{start:{line:66,column:31},end:{line:74,column:3}},31:{start:{line:67,column:4},end:{line:69,column:5}},32:{start:{line:68,column:6},end:{line:68,column:27}},33:{start:{line:70,column:4},end:{line:72,column:5}},34:{start:{line:71,column:6},end:{line:71,column:24}},35:{start:{line:73,column:4},end:{line:73,column:25}},36:{start:{line:75,column:18},end:{line:91,column:3}},37:{start:{line:76,column:18},end:{line:76,column:44}},38:{start:{line:77,column:21},end:{line:77,column:44}},39:{start:{line:78,column:4},end:{line:85,column:5}},40:{start:{line:79,column:6},end:{line:82,column:9}},41:{start:{line:84,column:6},end:{line:84,column:49}},42:{start:{line:86,column:25},end:{line:89,column:5}},43:{start:{line:90,column:4},end:{line:90,column:50}},44:{start:{line:92,column:27},end:{line:96,column:3}},45:{start:{line:93,column:37},end:{line:93,column:42}},46:{start:{line:94,column:4},end:{line:94,column:49}},47:{start:{line:95,column:4},end:{line:95,column:25}},48:{start:{line:97,column:21},end:{line:108,column:3}},49:{start:{line:98,column:18},end:{line:98,column:44}},50:{start:{line:99,column:4},end:{line:99,column:29}},51:{start:{line:100,column:23},end:{line:103,column:5}},52:{start:{line:104,column:4},end:{line:106,column:5}},53:{start:{line:105,column:6},end:{line:105,column:33}},54:{start:{line:107,column:4},end:{line:107,column:50}},55:{start:{line:109,column:27},end:{line:138,column:3}},56:{start:{line:110,column:22},end:{line:110,column:27}},57:{start:{line:112,column:4},end:{line:136,column:5}},58:{start:{line:113,column:6},end:{line:128,column:7}},59:{start:{line:114,column:8},end:{line:119,column:10}},60:{start:{line:117,column:12},end:{line:117,column:83}},61:{start:{line:121,column:8},end:{line:127,column:10}},62:{start:{line:130,column:6},end:{line:135,column:8}},63:{start:{line:137,column:4},end:{line:137,column:46}},64:{start:{line:139,column:25},end:{line:151,column:3}},65:{start:{line:140,column:33},end:{line:140,column:38}},66:{start:{line:141,column:4},end:{line:150,column:5}},67:{start:{line:142,column:6},end:{line:145,column:9}},68:{start:{line:146,column:6},end:{line:146,column:27}},69:{start:{line:147,column:11},end:{line:150,column:5}},70:{start:{line:148,column:6},end:{line:148,column:42}},71:{start:{line:149,column:6},end:{line:149,column:27}},72:{start:{line:152,column:18},end:{line:155,column:3}},73:{start:{line:153,column:33},end:{line:153,column:38}},74:{start:{line:154,column:4},end:{line:154,column:140}},75:{start:{line:156,column:25},end:{line:167,column:3}},76:{start:{line:157,column:33},end:{line:157,column:38}},77:{start:{line:159,column:4},end:{line:165,column:5}},78:{start:{line:160,column:6},end:{line:160,column:67}},79:{start:{line:161,column:11},end:{line:165,column:5}},80:{start:{line:162,column:6},end:{line:162,column:43}},81:{start:{line:164,column:6},end:{line:164,column:65}},82:{start:{line:166,column:4},end:{line:166,column:48}},83:{start:{line:168,column:27},end:{line:206,column:3}},84:{start:{line:169,column:25},end:{line:169,column:62}},85:{start:{line:170,column:22},end:{line:170,column:61}},86:{start:{line:171,column:22},end:{line:171,column:27}},87:{start:{line:173,column:4},end:{line:204,column:5}},88:{start:{line:174,column:6},end:{line:193,column:7}},89:{start:{line:175,column:8},end:{line:182,column:10}},90:{start:{line:180,column:12},end:{line:180,column:106}},91:{start:{line:184,column:8},end:{line:192,column:10}},92:{start:{line:195,column:6},end:{line:203,column:8}},93:{start:{line:205,column:4},end:{line:205,column:46}},94:{start:{line:207,column:24},end:{line:209,column:3}},95:{start:{line:208,column:4},end:{line:208,column:23}},96:{start:{line:210,column:26},end:{line:212,column:3}},97:{start:{line:211,column:4},end:{line:211,column:24}},98:{start:{line:213,column:20},end:{line:213,column:120}},99:{start:{line:215,column:2},end:{line:279,column:3}},100:{start:{line:216,column:4},end:{line:231,column:6}},101:{start:{line:232,column:9},end:{line:279,column:3}},102:{start:{line:233,column:4},end:{line:247,column:6}},103:{start:{line:248,column:9},end:{line:279,column:3}},104:{start:{line:249,column:4},end:{line:263,column:6}},105:{start:{line:265,column:4},end:{line:278,column:6}},106:{start:{line:280,column:2},end:{line:280,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:56,column:22},end:{line:56,column:23}},loc:{start:{line:56,column:33},end:{line:281,column:1}},line:56},12:{name:"(anonymous_12)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:65,column:3}},line:61},13:{name:"(anonymous_13)",decl:{start:{line:66,column:31},end:{line:66,column:32}},loc:{start:{line:66,column:46},end:{line:74,column:3}},line:66},14:{name:"(anonymous_14)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:24},end:{line:91,column:3}},line:75},15:{name:"(anonymous_15)",decl:{start:{line:92,column:27},end:{line:92,column:28}},loc:{start:{line:92,column:33},end:{line:96,column:3}},line:92},16:{name:"(anonymous_16)",decl:{start:{line:97,column:21},end:{line:97,column:22}},loc:{start:{line:97,column:34},end:{line:108,column:3}},line:97},17:{name:"(anonymous_17)",decl:{start:{line:109,column:27},end:{line:109,column:28}},loc:{start:{line:109,column:33},end:{line:138,column:3}},line:109},18:{name:"(anonymous_18)",decl:{start:{line:116,column:33},end:{line:116,column:34}},loc:{start:{line:116,column:43},end:{line:118,column:11}},line:116},19:{name:"(anonymous_19)",decl:{start:{line:139,column:25},end:{line:139,column:26}},loc:{start:{line:139,column:31},end:{line:151,column:3}},line:139},20:{name:"(anonymous_20)",decl:{start:{line:152,column:18},end:{line:152,column:19}},loc:{start:{line:152,column:24},end:{line:155,column:3}},line:152},21:{name:"(anonymous_21)",decl:{start:{line:156,column:25},end:{line:156,column:26}},loc:{start:{line:156,column:31},end:{line:167,column:3}},line:156},22:{name:"(anonymous_22)",decl:{start:{line:168,column:27},end:{line:168,column:28}},loc:{start:{line:168,column:33},end:{line:206,column:3}},line:168},23:{name:"(anonymous_23)",decl:{start:{line:179,column:33},end:{line:179,column:34}},loc:{start:{line:179,column:43},end:{line:181,column:11}},line:179},24:{name:"(anonymous_24)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:30},end:{line:209,column:3}},line:207},25:{name:"(anonymous_25)",decl:{start:{line:210,column:26},end:{line:210,column:27}},loc:{start:{line:210,column:32},end:{line:212,column:3}},line:210}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:67,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:67,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67},18:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},19:{loc:{start:{line:78,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:85,column:5}},{start:{line:83,column:11},end:{line:85,column:5}}],line:78},20:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},21:{loc:{start:{line:112,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:136,column:5}},{start:{line:129,column:11},end:{line:136,column:5}}],line:112},22:{loc:{start:{line:113,column:6},end:{line:128,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:128,column:7}},{start:{line:120,column:13},end:{line:128,column:7}}],line:113},23:{loc:{start:{line:117,column:34},end:{line:117,column:81}},type:"binary-expr",locations:[{start:{line:117,column:34},end:{line:117,column:41}},{start:{line:117,column:45},end:{line:117,column:81}}],line:117},24:{loc:{start:{line:132,column:14},end:{line:132,column:59}},type:"binary-expr",locations:[{start:{line:132,column:14},end:{line:132,column:19}},{start:{line:132,column:23},end:{line:132,column:59}}],line:132},25:{loc:{start:{line:133,column:15},end:{line:133,column:60}},type:"binary-expr",locations:[{start:{line:133,column:15},end:{line:133,column:20}},{start:{line:133,column:24},end:{line:133,column:60}}],line:133},26:{loc:{start:{line:141,column:4},end:{line:150,column:5}},type:"if",locations:[{start:{line:141,column:4},end:{line:150,column:5}},{start:{line:147,column:11},end:{line:150,column:5}}],line:141},27:{loc:{start:{line:147,column:11},end:{line:150,column:5}},type:"if",locations:[{start:{line:147,column:11},end:{line:150,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},28:{loc:{start:{line:154,column:11},end:{line:154,column:139}},type:"binary-expr",locations:[{start:{line:154,column:11},end:{line:154,column:33}},{start:{line:154,column:37},end:{line:154,column:63}},{start:{line:154,column:67},end:{line:154,column:85}},{start:{line:154,column:89},end:{line:154,column:109}},{start:{line:154,column:113},end:{line:154,column:139}}],line:154},29:{loc:{start:{line:159,column:4},end:{line:165,column:5}},type:"if",locations:[{start:{line:159,column:4},end:{line:165,column:5}},{start:{line:161,column:11},end:{line:165,column:5}}],line:159},30:{loc:{start:{line:159,column:8},end:{line:159,column:53}},type:"binary-expr",locations:[{start:{line:159,column:8},end:{line:159,column:33}},{start:{line:159,column:37},end:{line:159,column:53}}],line:159},31:{loc:{start:{line:161,column:11},end:{line:165,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:165,column:5}},{start:{line:163,column:11},end:{line:165,column:5}}],line:161},32:{loc:{start:{line:164,column:31},end:{line:164,column:63}},type:"binary-expr",locations:[{start:{line:164,column:31},end:{line:164,column:36}},{start:{line:164,column:40},end:{line:164,column:63}}],line:164},33:{loc:{start:{line:170,column:22},end:{line:170,column:61}},type:"cond-expr",locations:[{start:{line:170,column:55},end:{line:170,column:57}},{start:{line:170,column:60},end:{line:170,column:61}}],line:170},34:{loc:{start:{line:173,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:204,column:5}},{start:{line:194,column:11},end:{line:204,column:5}}],line:173},35:{loc:{start:{line:174,column:6},end:{line:193,column:7}},type:"if",locations:[{start:{line:174,column:6},end:{line:193,column:7}},{start:{line:183,column:13},end:{line:193,column:7}}],line:174},36:{loc:{start:{line:180,column:57},end:{line:180,column:104}},type:"binary-expr",locations:[{start:{line:180,column:57},end:{line:180,column:64}},{start:{line:180,column:68},end:{line:180,column:104}}],line:180},37:{loc:{start:{line:200,column:42},end:{line:200,column:93}},type:"binary-expr",locations:[{start:{line:200,column:42},end:{line:200,column:53}},{start:{line:200,column:57},end:{line:200,column:93}}],line:200},38:{loc:{start:{line:201,column:43},end:{line:201,column:94}},type:"binary-expr",locations:[{start:{line:201,column:43},end:{line:201,column:54}},{start:{line:201,column:58},end:{line:201,column:94}}],line:201},39:{loc:{start:{line:213,column:20},end:{line:213,column:120}},type:"cond-expr",locations:[{start:{line:213,column:62},end:{line:213,column:89}},{start:{line:213,column:92},end:{line:213,column:120}}],line:213},40:{loc:{start:{line:215,column:2},end:{line:279,column:3}},type:"if",locations:[{start:{line:215,column:2},end:{line:279,column:3}},{start:{line:232,column:9},end:{line:279,column:3}}],line:215},41:{loc:{start:{line:232,column:9},end:{line:279,column:3}},type:"if",locations:[{start:{line:232,column:9},end:{line:279,column:3}},{start:{line:248,column:9},end:{line:279,column:3}}],line:232},42:{loc:{start:{line:248,column:9},end:{line:279,column:3}},type:"if",locations:[{start:{line:248,column:9},end:{line:279,column:3}},{start:{line:264,column:9},end:{line:279,column:3}}],line:248}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAsTM;AAtTN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5033c253416f295119927ac94f2be1c5d08ca915"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Nt=function(){return l},l}Nt();function jD(n){return Nt().f[0]++,Nt().s[0]++,Nt().b[0][0]++,Array.isArray(n)&&(Nt().b[0][1]++,n.length===2)&&(Nt().b[0][2]++,n[0]==="literal")}function WD(n){return Nt().f[1]++,Nt().s[1]++,Nt().b[1][0]++,Array.isArray(n)&&(Nt().b[1][1]++,n.length===2)&&(Nt().b[1][2]++,n[0]==="get")}function wAe(n){return Nt().f[2]++,Nt().s[2]++,Nt().b[2][0]++,typeof n=="object"&&(Nt().b[2][1]++,n.stops)&&(Nt().b[2][2]++,typeof n.property>"u")&&(Nt().b[2][3]++,Array.isArray(n.stops))&&(Nt().b[2][4]++,n.stops.length>1)&&(Nt().b[2][5]++,n.stops.every(e=>(Nt().f[3]++,Nt().s[3]++,Nt().b[3][0]++,Array.isArray(e)&&(Nt().b[3][1]++,e.length===2))))}function wG(n){return Nt().f[4]++,Nt().s[4]++,Nt().b[4][0]++,typeof n=="object"&&(Nt().b[4][1]++,n.type==="identity")&&(Nt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function SAe(n){return Nt().f[5]++,Nt().s[5]++,Nt().b[5][0]++,typeof n=="object"&&(Nt().b[5][1]++,n.stops)&&(Nt().b[5][2]++,typeof n.property<"u")&&(Nt().b[5][3]++,n.stops.length>1)&&(Nt().b[5][4]++,Array.isArray(n.stops))&&(Nt().b[5][5]++,n.stops.every(e=>(Nt().f[6]++,Nt().s[6]++,Nt().b[6][0]++,Array.isArray(e)&&(Nt().b[6][1]++,e.length===2)&&(Nt().b[6][2]++,typeof e[0]=="object"))))}function EAe(n){return Nt().f[7]++,Nt().s[7]++,Nt().b[7][0]++,wG(n)||(Nt().b[7][1]++,SAe(n))}function KI(n){Nt().f[8]++;const e=(Nt().s[8]++,["string","boolean","number"]);return Nt().s[9]++,e.includes(typeof n)}function BAe(n){return Nt().f[9]++,Nt().s[10]++,Array.isArray(n)?(Nt().b[8][0]++,Nt().s[11]++,n.every(KI)):(Nt().b[8][1]++,Nt().s[12]++,!1)}function QD(n,e=(Nt().b[9][0]++,{})){return Nt().f[10]++,Nt().s[13]++,n===void 0?(Nt().b[10][0]++,Nt().s[14]++,"value"):(Nt().b[10][1]++,Nt().s[15]++,KI(n)?(Nt().b[11][0]++,Nt().s[16]++,"value"):(Nt().b[11][1]++,Nt().s[17]++,Nt().b[13][0]++,e.type==="array"&&(Nt().b[13][1]++,BAe(n))?(Nt().b[12][0]++,Nt().s[18]++,"value"):(Nt().b[12][1]++,Nt().s[19]++,wAe(n)?(Nt().b[14][0]++,Nt().s[20]++,"zoom_function"):(Nt().b[14][1]++,Nt().s[21]++,EAe(n)?(Nt().b[15][0]++,Nt().s[22]++,"data_function"):(Nt().b[15][1]++,Nt().s[23]++,"expression")))))}Nt().s[24]++;const OAe=n=>{Nt().f[11]++;const[e,t]=(Nt().s[25]++,ur.useState(QD(n.value,n.fieldSpec))),[r,i]=(Nt().s[26]++,ur.useState(!1));Nt().s[27]++,ur.useEffect(()=>{Nt().f[12]++,Nt().s[28]++,r?Nt().b[16][1]++:(Nt().b[16][0]++,Nt().s[29]++,t(QD(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,r]),Nt().s[30]++;const s=$=>(Nt().f[13]++,Nt().s[31]++,$.expression.interpolated?(Nt().b[17][0]++,Nt().s[32]++,"exponential"):(Nt().b[17][1]++,Nt().s[33]++,$.type==="number"?(Nt().b[18][0]++,Nt().s[34]++,"interval"):(Nt().b[18][1]++,Nt().s[35]++,"categorical")));Nt().s[36]++;const l=()=>{Nt().f[14]++;const $=(Nt().s[37]++,n.value.stops.slice(0)),re=(Nt().s[38]++,$[$.length-1]);Nt().s[39]++,typeof re[0]=="object"?(Nt().b[19][0]++,Nt().s[40]++,$.push([{zoom:re[0].zoom+1,value:re[0].value},re[1]])):(Nt().b[19][1]++,Nt().s[41]++,$.push([re[0]+1,re[1]]));const te=(Nt().s[42]++,{...n.value,stops:$});Nt().s[43]++,n.onChange(n.fieldName,te)};Nt().s[44]++;const o=()=>{Nt().f[15]++;const{fieldSpec:$,fieldName:re}=(Nt().s[45]++,n);Nt().s[46]++,n.onChange(re,$.default),Nt().s[47]++,t("value")};Nt().s[48]++;const f=$=>{Nt().f[16]++;const re=(Nt().s[49]++,n.value.stops.slice(0));Nt().s[50]++,re.splice($,1);let te=(Nt().s[51]++,{...n.value,stops:re});Nt().s[52]++,re.length===1?(Nt().b[20][0]++,Nt().s[53]++,te=re[0][1]):Nt().b[20][1]++,Nt().s[54]++,n.onChange(n.fieldName,te)};Nt().s[55]++;const C=()=>{Nt().f[17]++;const{value:$}=(Nt().s[56]++,n);let re;Nt().s[57]++,typeof $=="object"?(Nt().b[21][0]++,Nt().s[58]++,$.stops?(Nt().b[22][0]++,Nt().s[59]++,re={base:$.base,stops:$.stops.map(te=>(Nt().f[18]++,Nt().s[60]++,[te[0].zoom,(Nt().b[23][0]++,te[1]||(Nt().b[23][1]++,Pf(n.fieldSpec)))]))}):(Nt().b[22][1]++,Nt().s[61]++,re={base:$.base,stops:[[6,Pf(n.fieldSpec)],[10,Pf(n.fieldSpec)]]})):(Nt().b[21][1]++,Nt().s[62]++,re={stops:[[6,(Nt().b[24][0]++,$||(Nt().b[24][1]++,Pf(n.fieldSpec)))],[10,(Nt().b[25][0]++,$||(Nt().b[25][1]++,Pf(n.fieldSpec)))]]}),Nt().s[63]++,n.onChange(n.fieldName,re)};Nt().s[64]++;const x=()=>{Nt().f[19]++;const{value:$,fieldName:re}=(Nt().s[65]++,n);Nt().s[66]++,WD($)?(Nt().b[26][0]++,Nt().s[67]++,n.onChange(re,{type:"identity",property:$[1]}),Nt().s[68]++,t("value")):(Nt().b[26][1]++,Nt().s[69]++,jD($)?(Nt().b[27][0]++,Nt().s[70]++,n.onChange(re,$[1]),Nt().s[71]++,t("value")):Nt().b[27][1]++)};Nt().s[72]++;const B=()=>{Nt().f[20]++;const{value:$,fieldSpec:re}=(Nt().s[73]++,n);return Nt().s[74]++,Nt().b[28][0]++,WD($)||(Nt().b[28][1]++,jD($))||(Nt().b[28][2]++,KI($))||(Nt().b[28][3]++,Array.isArray($)&&(Nt().b[28][4]++,re.type==="array"))};Nt().s[75]++;const R=()=>{Nt().f[21]++;const{value:$,fieldSpec:re}=(Nt().s[76]++,n);let te;Nt().s[77]++,Nt().b[30][0]++,typeof $=="object"&&(Nt().b[30][1]++,"stops"in $)?(Nt().b[29][0]++,Nt().s[78]++,te=U$.convertFunction($,re)):(Nt().b[29][1]++,Nt().s[79]++,wG($)?(Nt().b[31][0]++,Nt().s[80]++,te=["get",$.property]):(Nt().b[31][1]++,Nt().s[81]++,te=["literal",(Nt().b[32][0]++,$||(Nt().b[32][1]++,n.fieldSpec.default))])),Nt().s[82]++,n.onChange(n.fieldName,te)};Nt().s[83]++;const P=()=>{Nt().f[22]++;const $=(Nt().s[84]++,s(n.fieldSpec)),re=(Nt().s[85]++,$==="categorical"?(Nt().b[33][0]++,""):(Nt().b[33][1]++,0)),{value:te}=(Nt().s[86]++,n);let V;Nt().s[87]++,typeof te=="object"?(Nt().b[34][0]++,Nt().s[88]++,te.stops?(Nt().b[35][0]++,Nt().s[89]++,V={property:"",type:$,base:te.base,stops:te.stops.map(ne=>(Nt().f[23]++,Nt().s[90]++,[{zoom:ne[0],value:re},(Nt().b[36][0]++,ne[1]||(Nt().b[36][1]++,Pf(n.fieldSpec)))]))}):(Nt().b[35][1]++,Nt().s[91]++,V={property:"",type:$,base:te.base,stops:[[{zoom:6,value:re},Pf(n.fieldSpec)],[{zoom:10,value:re},Pf(n.fieldSpec)]]})):(Nt().b[34][1]++,Nt().s[92]++,V={property:"",type:$,base:te.base,stops:[[{zoom:6,value:re},(Nt().b[37][0]++,n.value||(Nt().b[37][1]++,Pf(n.fieldSpec)))],[{zoom:10,value:re},(Nt().b[38][0]++,n.value||(Nt().b[38][1]++,Pf(n.fieldSpec)))]]}),Nt().s[93]++,n.onChange(n.fieldName,V)};Nt().s[94]++;const U=()=>{Nt().f[24]++,Nt().s[95]++,i(!0)};Nt().s[96]++;const N=()=>{Nt().f[25]++,Nt().s[97]++,i(!1)},W=(Nt().s[98]++,n.fieldSpec.default===n.value?(Nt().b[39][0]++,"maputnik-default-property"):(Nt().b[39][1]++,"maputnik-modified-property"));let X;return Nt().s[99]++,e==="expression"?(Nt().b[40][0]++,Nt().s[100]++,X=oe.jsx(FN,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:B,onUndo:x,onDelete:o,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:U,onBlur:N})):(Nt().b[40][1]++,Nt().s[101]++,e==="zoom_function"?(Nt().b[41][0]++,Nt().s[102]++,X=oe.jsx(MAe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:f,onAddStop:l,onChangeToDataFunction:P,onExpressionClick:R})):(Nt().b[41][1]++,Nt().s[103]++,e==="data_function"?(Nt().b[42][0]++,Nt().s[104]++,X=oe.jsx(bAe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:f,onAddStop:l,onChangeToZoomFunction:C,onExpressionClick:R})):(Nt().b[42][1]++,Nt().s[105]++,X=oe.jsx(vAe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:C,onDataClick:P,onExpressionClick:R})))),Nt().s[106]++,oe.jsx("div",{className:W,"data-wd-key":"spec-field-container:"+n.fieldName,children:X})};function mo(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mo=function(){return l},l}mo();const IAe=(mo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function TAe(n,e,t){mo().f[0]++;const r=(mo().s[1]++,SG(n,e,t)),i=(mo().s[2]++,n[r+"_"+e]),s=(mo().s[3]++,i[t]);return mo().s[4]++,IAe.indexOf(t)>=0?(mo().b[0][0]++,mo().s[5]++,{...s,values:n.$root.sprite.values}):(mo().b[0][1]++,mo().s[6]++,t==="text-font"?(mo().b[1][0]++,mo().s[7]++,{...s,values:n.$root.glyphs.values}):(mo().b[1][1]++,mo().s[8]++,s))}function SG(n,e,t){mo().f[1]++;const r=(mo().s[9]++,mo().b[2][0]++,n["paint_"+e]||(mo().b[2][1]++,{}));return mo().s[10]++,t in r?(mo().b[3][0]++,mo().s[11]++,"paint"):(mo().b[3][1]++,mo().s[12]++,"layout")}class kAe extends ur.Component{onPropertyChange=(mo().s[13]++,(e,t)=>{mo().f[2]++;const r=(mo().s[14]++,SG(this.props.spec,this.props.layer.type,e));mo().s[15]++,this.props.onChange(r,e,t)});render(){mo().f[3]++;const{errors:e}=(mo().s[16]++,this.props),t=(mo().s[17]++,this.props.groupFields.map(r=>{mo().f[4]++;const i=(mo().s[18]++,TAe(this.props.spec,this.props.layer.type,r)),s=(mo().s[19]++,mo().b[4][0]++,this.props.layer.paint||(mo().b[4][1]++,{})),l=(mo().s[20]++,mo().b[5][0]++,this.props.layer.layout||(mo().b[5][1]++,{})),o=(mo().s[21]++,r in s?(mo().b[6][0]++,s[r]):(mo().b[6][1]++,l[r])),f=(mo().s[22]++,r in s?(mo().b[7][0]++,"paint"):(mo().b[7][1]++,"layout"));return mo().s[23]++,oe.jsx(OAe,{errors:e,onChange:this.onPropertyChange,fieldName:r,value:o,fieldType:f,fieldSpec:i},r)}));return mo().s[24]++,oe.jsx("div",{className:"maputnik-property-group",children:t})}}var rE,YD;function PAe(){return YD||(YD=1,rE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var l in r)t.d(s,l,(function(o){return r[o]}).bind(null,l));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=pm()},function(n,e){n.exports=tl()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(U){for(var N,W=1,X=arguments.length;W<X;W++)for(var $ in N=arguments[W])Object.prototype.hasOwnProperty.call(N,$)&&(U[$]=N[$]);return U}).apply(this,arguments)},l=function(U,N){var W={};for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&N.indexOf(X)<0&&(W[X]=U[X]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(X=Object.getOwnPropertySymbols(U);$<X.length;$++)N.indexOf(X[$])<0&&Object.prototype.propertyIsEnumerable.call(U,X[$])&&(W[X[$]]=U[X[$]])}return W},o=0,f=r.forwardRef(function(U,N){var W=U.title,X=W===void 0?null:W,$=U.description,re=$===void 0?null:$,te=U.size,V=te===void 0?null:te,ne=U.color,G=ne===void 0?"currentColor":ne,le=U.horizontal,fe=le===void 0?null:le,pe=U.vertical,we=pe===void 0?null:pe,Se=U.rotate,xe=Se===void 0?null:Se,je=U.spin,Me=je===void 0?null:je,rt=U.style,Ct=rt===void 0?{}:rt,it=U.children,nt=l(U,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var Ge,Ie=Me!==null&&Me,$e=r.Children.map(it,function(Rt){var St=Rt;Ie!==!0&&(Ie=(Me===null?St.props.spin:Me)===!0);var Ke=St.props.size;typeof V=="number"&&typeof St.props.size=="number"&&(Ke=St.props.size/V);var Pe={size:Ke,color:G===null?St.props.color:G,horizontal:fe===null?St.props.horizontal:fe,vertical:we===null?St.props.vertical:we,rotate:xe===null?St.props.rotate:xe,spin:Me===null?St.props.spin:Me,inStack:!0};return r.cloneElement(St,Pe)});V!==null&&(Ct.width=typeof V=="string"?V:1.5*V+"rem");var gt,Dt="stack_labelledby_"+o,ut="stack_describedby_"+o;if(X)Ge=re?Dt+" "+ut:Dt;else if(gt="presentation",re)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:N,viewBox:"0 0 24 24",style:Ct,role:gt,"aria-labelledby":Ge},nt),X&&r.createElement("title",{id:Dt},X),re&&r.createElement("desc",{id:ut},re),Ie&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),$e)});f.displayName="Stack",f.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},f.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var C=f;t.d(e,"Icon",function(){return P}),t.d(e,"Stack",function(){return C});var x=function(){return(x=Object.assign||function(U){for(var N,W=1,X=arguments.length;W<X;W++)for(var $ in N=arguments[W])Object.prototype.hasOwnProperty.call(N,$)&&(U[$]=N[$]);return U}).apply(this,arguments)},B=function(U,N){var W={};for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&N.indexOf(X)<0&&(W[X]=U[X]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(X=Object.getOwnPropertySymbols(U);$<X.length;$++)N.indexOf(X[$])<0&&Object.prototype.propertyIsEnumerable.call(U,X[$])&&(W[X[$]]=U[X[$]])}return W},R=0,P=r.forwardRef(function(U,N){var W=U.path,X=U.id,$=X===void 0?++R:X,re=U.title,te=re===void 0?null:re,V=U.description,ne=V===void 0?null:V,G=U.size,le=G===void 0?null:G,fe=U.color,pe=fe===void 0?"currentColor":fe,we=U.horizontal,Se=we!==void 0&&we,xe=U.vertical,je=xe!==void 0&&xe,Me=U.rotate,rt=Me===void 0?0:Me,Ct=U.spin,it=Ct!==void 0&&Ct,nt=U.style,Ge=nt===void 0?{}:nt,Ie=U.inStack,$e=Ie!==void 0&&Ie,gt=B(U,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Dt={},ut=[];le!==null&&($e?ut.push("scale("+le+")"):(Ge.width=typeof le=="string"?le:1.5*le+"rem",Ge.height=Ge.width)),Se&&ut.push("scaleX(-1)"),je&&ut.push("scaleY(-1)"),rt!==0&&ut.push("rotate("+rt+"deg)"),pe!==null&&(Dt.fill=pe);var Rt=r.createElement("path",x({d:W,style:Dt},$e?gt:{})),St=Rt;ut.length>0&&(Ge.transform=ut.join(" "),Ge.transformOrigin="center",$e&&(St=r.createElement("g",{style:Ge},Rt,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Ke,Pe=St,Re=it===!0||typeof it!="number"?2:it,Ye=!$e&&(Se||je);if(Re<0&&(Ye=!Ye),it&&(Pe=r.createElement("g",{style:{animation:"spin"+(Ye?"-inverse":"")+" linear "+Math.abs(Re)+"s infinite",transformOrigin:"center"}},St,!(Se||je||rt!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),$e)return Pe;var vt,yt="icon_labelledby_"+$,Et="icon_describedby_"+$;if(te)Ke=ne?yt+" "+Et:yt;else if(vt="presentation",ne)throw new Error("title attribute required when description is set");return r.createElement("svg",x({ref:N,viewBox:"0 0 24 24",style:Ge,role:vt,"aria-labelledby":Ke},gt),te&&r.createElement("title",{id:yt},te),ne&&r.createElement("desc",{id:Et},ne),!$e&&it&&(Ye?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});P.displayName="Icon",P.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},P.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=P}])),rE}var RAe=PAe();const qD=Gl(RAe);function my(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return my=function(){return l},l}my();class DAe extends ur.Component{render(){return my().f[0]++,my().s[0]++,oe.jsxs(TN,{uuid:this.props.id,children:[oe.jsx(RN,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(my().f[1]++,my().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:oe.jsxs(Yoe,{className:"maputnik-layer-editor-group__button",children:[oe.jsx("span",{style:{flexGrow:1},children:this.props.title}),oe.jsx(qD,{path:dse,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),oe.jsx(qD,{path:hse,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),oe.jsx(Hoe,{children:this.props.children})]})}}function W1(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="90f4763b72e1eacd247b39087553d31d1a0a133a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90f4763b72e1eacd247b39087553d31d1a0a133a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return W1=function(){return l},l}W1();W1().s[0]++;const KAe=n=>{W1().f[0]++;const e=(W1().s[1]++,n.t);return W1().s[2]++,oe.jsx(ha,{label:e("Min Zoom"),fieldSpec:Xo.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:oe.jsx($m,{allowRange:!0,value:n.value,onChange:n.onChange,min:Xo.layer.minzoom.minimum,max:Xo.layer.minzoom.maximum,default:Xo.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},FAe=(W1().s[3]++,Us()(KAe));function Q1(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="af8478150b9688dd685e47e421715e80a172fde9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"af8478150b9688dd685e47e421715e80a172fde9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Q1=function(){return l},l}Q1();Q1().s[0]++;const LAe=n=>{Q1().f[0]++;const e=(Q1().s[1]++,n.t);return Q1().s[2]++,oe.jsx(ha,{label:e("Max Zoom"),fieldSpec:Xo.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:oe.jsx($m,{allowRange:!0,value:n.value,onChange:n.onChange,min:Xo.layer.maxzoom.minimum,max:Xo.layer.maxzoom.maximum,default:Xo.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},UAe=(Q1().s[3]++,Us()(LAe));function L0(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="57456766e3c3291370696e036ad161fb7b3e99e2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"57456766e3c3291370696e036ad161fb7b3e99e2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return L0=function(){return l},l}L0();L0().s[0]++;const zAe=n=>{L0().f[0]++;const e=(L0().s[1]++,n.t),t=(L0().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return L0().s[3]++,oe.jsx(ha,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:oe.jsx(Sp,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},NAe=(L0().s[4]++,Us()(zAe)),GAe={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},jAe={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},WAe={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},QAe={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},YAe={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},qAe={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},$Ae={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},VAe={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},HAe={groups:[]},$b={line:GAe,background:jAe,fill:WAe,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:QAe,symbol:YAe,raster:qAe,hillshade:$Ae,heatmap:VAe,invalid:HAe};function gy(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gy=function(){return l},l}gy();function EG(n){return gy().f[0]++,gy().s[0]++,n===""?(gy().b[0][0]++,"[empty_string]"):(gy().b[0][1]++,`'${n}'`)}function Tn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="70f3b35da8fd2a976c690c3214667f5b6491f2cd",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:62,column:4},end:{line:62,column:17}},8:{start:{line:63,column:25},end:{line:63,column:27}},9:{start:{line:64,column:4},end:{line:66,column:7}},10:{start:{line:65,column:6},end:{line:65,column:39}},11:{start:{line:67,column:4},end:{line:67,column:34}},12:{start:{line:70,column:29},end:{line:70,column:54}},13:{start:{line:71,column:4},end:{line:75,column:7}},14:{start:{line:72,column:6},end:{line:74,column:7}},15:{start:{line:73,column:8},end:{line:73,column:45}},16:{start:{line:76,column:4},end:{line:78,column:6}},17:{start:{line:81,column:4},end:{line:84,column:6}},18:{start:{line:87,column:32},end:{line:90,column:5}},19:{start:{line:91,column:4},end:{line:93,column:7}},20:{start:{line:96,column:18},end:{line:96,column:20}},21:{start:{line:97,column:4},end:{line:99,column:5}},22:{start:{line:98,column:6},end:{line:98,column:62}},23:{start:{line:100,column:35},end:{line:100,column:45}},24:{start:{line:101,column:22},end:{line:101,column:24}},25:{start:{line:102,column:4},end:{line:108,column:7}},26:{start:{line:103,column:6},end:{line:107,column:7}},27:{start:{line:104,column:8},end:{line:106,column:10}},28:{start:{line:110,column:18},end:{line:110,column:34}},29:{start:{line:111,column:4},end:{line:113,column:5}},30:{start:{line:112,column:6},end:{line:112,column:63}},31:{start:{line:114,column:4},end:{line:217,column:5}},32:{start:{line:116,column:8},end:{line:180,column:13}},33:{start:{line:123,column:35},end:{line:123,column:112}},34:{start:{line:132,column:37},end:{line:135,column:15}},35:{start:{line:144,column:31},end:{line:144,column:69}},36:{start:{line:153,column:31},end:{line:153,column:75}},37:{start:{line:161,column:31},end:{line:161,column:70}},38:{start:{line:169,column:31},end:{line:169,column:70}},39:{start:{line:177,column:31},end:{line:177,column:104}},40:{start:{line:182,column:8},end:{line:190,column:16}},41:{start:{line:188,column:29},end:{line:188,column:67}},42:{start:{line:192,column:8},end:{line:201,column:10}},43:{start:{line:203,column:8},end:{line:214,column:10}},44:{start:{line:208,column:14},end:{line:211,column:16}},45:{start:{line:216,column:8},end:{line:216,column:49}},46:{start:{line:220,column:4},end:{line:223,column:7}},47:{start:{line:226,column:14},end:{line:226,column:26}},48:{start:{line:227,column:21},end:{line:227,column:23}},49:{start:{line:228,column:22},end:{line:228,column:43}},50:{start:{line:229,column:19},end:{line:246,column:6}},51:{start:{line:230,column:6},end:{line:230,column:70}},52:{start:{line:232,column:22},end:{line:232,column:30}},53:{start:{line:233,column:6},end:{line:233,column:29}},54:{start:{line:234,column:6},end:{line:245,column:8}},55:{start:{line:247,column:20},end:{line:247,column:49}},56:{start:{line:248,column:18},end:{line:273,column:5}},57:{start:{line:251,column:23},end:{line:251,column:71}},58:{start:{line:255,column:23},end:{line:255,column:68}},59:{start:{line:259,column:23},end:{line:259,column:80}},60:{start:{line:265,column:23},end:{line:265,column:41}},61:{start:{line:271,column:23},end:{line:271,column:40}},62:{start:{line:275,column:6},end:{line:275,column:30}},63:{start:{line:276,column:6},end:{line:276,column:26}},64:{start:{line:278,column:4},end:{line:323,column:9}},65:{start:{line:305,column:33},end:{line:305,column:42}},66:{start:{line:306,column:20},end:{line:306,column:174}},67:{start:{line:326,column:20},end:{line:326,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:21},end:{line:68,column:3}},line:61},7:{name:"(anonymous_7)",decl:{start:{line:64,column:57},end:{line:64,column:58}},loc:{start:{line:64,column:68},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:48},end:{line:79,column:3}},line:69},9:{name:"(anonymous_9)",decl:{start:{line:71,column:63},end:{line:71,column:64}},loc:{start:{line:71,column:74},end:{line:75,column:5}},line:71},10:{name:"(anonymous_10)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:44},end:{line:85,column:3}},line:80},11:{name:"(anonymous_11)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:36},end:{line:94,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:32},end:{line:218,column:3}},line:95},13:{name:"(anonymous_13)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:108,column:5}},line:102},14:{name:"(anonymous_14)",decl:{start:{line:123,column:24},end:{line:123,column:25}},loc:{start:{line:123,column:35},end:{line:123,column:112}},line:123},15:{name:"(anonymous_15)",decl:{start:{line:132,column:24},end:{line:132,column:25}},loc:{start:{line:132,column:37},end:{line:135,column:15}},line:132},16:{name:"(anonymous_16)",decl:{start:{line:144,column:24},end:{line:144,column:25}},loc:{start:{line:144,column:31},end:{line:144,column:69}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:24},end:{line:153,column:25}},loc:{start:{line:153,column:31},end:{line:153,column:75}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:161,column:24},end:{line:161,column:25}},loc:{start:{line:161,column:31},end:{line:161,column:70}},line:161},19:{name:"(anonymous_19)",decl:{start:{line:169,column:24},end:{line:169,column:25}},loc:{start:{line:169,column:31},end:{line:169,column:70}},line:169},20:{name:"(anonymous_20)",decl:{start:{line:177,column:24},end:{line:177,column:25}},loc:{start:{line:177,column:31},end:{line:177,column:104}},line:177},21:{name:"(anonymous_21)",decl:{start:{line:188,column:22},end:{line:188,column:23}},loc:{start:{line:188,column:29},end:{line:188,column:67}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:207,column:22},end:{line:207,column:23}},loc:{start:{line:207,column:34},end:{line:212,column:13}},line:207},23:{name:"(anonymous_23)",decl:{start:{line:219,column:2},end:{line:219,column:3}},loc:{start:{line:219,column:20},end:{line:224,column:3}},line:219},24:{name:"(anonymous_24)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:324,column:3}},line:225},25:{name:"(anonymous_25)",decl:{start:{line:229,column:53},end:{line:229,column:54}},loc:{start:{line:229,column:64},end:{line:231,column:5}},line:229},26:{name:"(anonymous_26)",decl:{start:{line:231,column:11},end:{line:231,column:12}},loc:{start:{line:231,column:22},end:{line:246,column:5}},line:231},27:{name:"(anonymous_27)",decl:{start:{line:251,column:17},end:{line:251,column:18}},loc:{start:{line:251,column:23},end:{line:251,column:71}},line:251},28:{name:"(anonymous_28)",decl:{start:{line:255,column:17},end:{line:255,column:18}},loc:{start:{line:255,column:23},end:{line:255,column:68}},line:255},29:{name:"(anonymous_29)",decl:{start:{line:259,column:17},end:{line:259,column:18}},loc:{start:{line:259,column:23},end:{line:259,column:80}},line:259},30:{name:"(anonymous_30)",decl:{start:{line:265,column:17},end:{line:265,column:18}},loc:{start:{line:265,column:23},end:{line:265,column:41}},line:265},31:{name:"(anonymous_31)",decl:{start:{line:271,column:17},end:{line:271,column:18}},loc:{start:{line:271,column:23},end:{line:271,column:40}},line:271},32:{name:"handleSelection",decl:{start:{line:274,column:13},end:{line:274,column:28}},loc:{start:{line:274,column:40},end:{line:277,column:5}},line:274},33:{name:"(anonymous_33)",decl:{start:{line:304,column:147},end:{line:304,column:148}},loc:{start:{line:304,column:155},end:{line:307,column:19}},line:304}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},2:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},3:{loc:{start:{line:103,column:6},end:{line:107,column:7}},type:"if",locations:[{start:{line:103,column:6},end:{line:107,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:103},4:{loc:{start:{line:103,column:10},end:{line:103,column:96}},type:"binary-expr",locations:[{start:{line:103,column:10},end:{line:103,column:22}},{start:{line:103,column:26},end:{line:103,column:55}},{start:{line:103,column:59},end:{line:103,column:96}}],line:103},5:{loc:{start:{line:111,column:4},end:{line:113,column:5}},type:"if",locations:[{start:{line:111,column:4},end:{line:113,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:217,column:5}},type:"switch",locations:[{start:{line:115,column:6},end:{line:180,column:13}},{start:{line:181,column:6},end:{line:190,column:16}},{start:{line:191,column:6},end:{line:201,column:10}},{start:{line:202,column:6},end:{line:214,column:10}},{start:{line:215,column:6},end:{line:216,column:49}}],line:114},7:{loc:{start:{line:138,column:10},end:{line:146,column:11}},type:"binary-expr",locations:[{start:{line:138,column:10},end:{line:138,column:48}},{start:{line:138,column:68},end:{line:146,column:11}}],line:138},8:{loc:{start:{line:147,column:10},end:{line:155,column:11}},type:"binary-expr",locations:[{start:{line:147,column:10},end:{line:147,column:93}},{start:{line:147,column:113},end:{line:155,column:11}}],line:147},9:{loc:{start:{line:177,column:83},end:{line:177,column:103}},type:"cond-expr",locations:[{start:{line:177,column:93},end:{line:177,column:99}},{start:{line:177,column:102},end:{line:177,column:103}}],line:177},10:{loc:{start:{line:230,column:15},end:{line:230,column:68}},type:"binary-expr",locations:[{start:{line:230,column:15},end:{line:230,column:41}},{start:{line:230,column:45},end:{line:230,column:68}}],line:230},11:{loc:{start:{line:247,column:20},end:{line:247,column:49}},type:"binary-expr",locations:[{start:{line:247,column:20},end:{line:247,column:43}},{start:{line:247,column:47},end:{line:247,column:49}}],line:247},12:{loc:{start:{line:258,column:14},end:{line:258,column:67}},type:"cond-expr",locations:[{start:{line:258,column:46},end:{line:258,column:55}},{start:{line:258,column:58},end:{line:258,column:67}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA+JyB,SA2EL,UA1Ed,KADmB;AA/JzB,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAG5B,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"70f3b35da8fd2a976c690c3214667f5b6491f2cd"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Tn=function(){return l},l}Tn();function BG(n,e){return Tn().f[0]++,Tn().s[0]++,$b[n]?(Tn().b[0][0]++,{...$b[n],groups:$b[n].groups.map(t=>(Tn().f[1]++,Tn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Tn().b[0][1]++,$b.invalid)}function $D(n,e){Tn().f[2]++;const t=(Tn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Tn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Tn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Tn().s[5]++,[t,r].concat(BG(n,e).groups).concat([i])}class ZAe extends ur.Component{static defaultProps=(Tn().s[6]++,{onLayerChanged:()=>{Tn().f[3]++},onLayerIdChange:()=>{Tn().f[4]++},onLayerDestroyed:()=>{Tn().f[5]++}});constructor(e){Tn().f[6]++,Tn().s[7]++,super(e);const t=(Tn().s[8]++,{});Tn().s[9]++,$D(this.props.layer.type,e.t).forEach(r=>{Tn().f[7]++,Tn().s[10]++,t[r.title]=!0}),Tn().s[11]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Tn().f[8]++;const r=(Tn().s[12]++,{...t.editorGroups});return Tn().s[13]++,BG(e.layer.type,e.t).groups.forEach(i=>{Tn().f[9]++,Tn().s[14]++,i.title in r?Tn().b[1][1]++:(Tn().b[1][0]++,Tn().s[15]++,r[i.title]=!0)}),Tn().s[16]++,{editorGroups:r}}changeProperty(e,t,r){Tn().f[10]++,Tn().s[17]++,this.props.onLayerChanged(this.props.layerIndex,soe(this.props.layer,e,t,r))}onGroupToggle(e,t){Tn().f[11]++;const r=(Tn().s[18]++,{...this.state.editorGroups,[e]:t});Tn().s[19]++,this.setState({editorGroups:r})}renderGroupType(e,t){Tn().f[12]++;let r=(Tn().s[20]++,"");Tn().s[21]++,this.props.layer.metadata?(Tn().b[2][0]++,Tn().s[22]++,r=this.props.layer.metadata["maputnik:comment"]):Tn().b[2][1]++;const{errors:i,layerIndex:s}=(Tn().s[23]++,this.props),l=(Tn().s[24]++,{});Tn().s[25]++,i.forEach(C=>{Tn().f[13]++,Tn().s[26]++,Tn().b[4][0]++,C.parsed&&(Tn().b[4][1]++,C.parsed.type==="layer")&&(Tn().b[4][2]++,C.parsed.data.index==s)?(Tn().b[3][0]++,Tn().s[27]++,l[C.parsed.data.key]={message:C.parsed.data.message}):Tn().b[3][1]++});let o;const f=(Tn().s[28]++,this.props.layer);switch(Tn().s[29]++,Object.prototype.hasOwnProperty.call(this.props.sources,f.source)?(Tn().b[5][0]++,Tn().s[30]++,o=this.props.sources[f.source].layers):Tn().b[5][1]++,Tn().s[31]++,e){case"layer":return Tn().b[6][0]++,Tn().s[32]++,oe.jsxs("div",{children:[oe.jsx(nN,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:C=>(Tn().f[14]++,Tn().s[33]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,C))}),oe.jsx(tN,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:C=>(Tn().f[15]++,Tn().s[34]++,this.props.onLayerChanged(this.props.layerIndex,ooe(this.props.layer,C)))}),(Tn().b[7][0]++,this.props.layer.type!=="background"&&(Tn().b[7][1]++,oe.jsx(_N,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:C=>(Tn().f[16]++,Tn().s[35]++,this.changeProperty(null,"source",C))}))),(Tn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Tn().b[8][1]++,oe.jsx(xN,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:C=>(Tn().f[17]++,Tn().s[36]++,this.changeProperty(null,"source-layer",C))}))),oe.jsx(FAe,{error:l.minzoom,value:this.props.layer.minzoom,onChange:C=>(Tn().f[18]++,Tn().s[37]++,this.changeProperty(null,"minzoom",C))}),oe.jsx(UAe,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:C=>(Tn().f[19]++,Tn().s[38]++,this.changeProperty(null,"maxzoom",C))}),oe.jsx(NAe,{error:l.comment,value:r,onChange:C=>(Tn().f[20]++,Tn().s[39]++,this.changeProperty("metadata","maputnik:comment",C==""?(Tn().b[9][0]++,void 0):(Tn().b[9][1]++,C)))})]});case"filter":return Tn().b[6][1]++,Tn().s[40]++,oe.jsx("div",{children:oe.jsx("div",{className:"maputnik-filter-editor-wrapper",children:oe.jsx(Ose,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:C=>(Tn().f[21]++,Tn().s[41]++,this.changeProperty(null,"filter",C))})})});case"properties":return Tn().b[6][2]++,Tn().s[42]++,oe.jsx(kAe,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Tn().b[6][3]++,Tn().s[43]++,oe.jsx(dI,{layer:this.props.layer,onChange:C=>{Tn().f[22]++,Tn().s[44]++,this.props.onLayerChanged(this.props.layerIndex,C)}});default:return Tn().b[6][4]++,Tn().s[45]++,oe.jsx(oe.Fragment,{})}}moveLayer(e){Tn().f[23]++,Tn().s[46]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Tn().f[24]++;const e=(Tn().s[47]++,this.props.t),t=(Tn().s[48]++,[]),r=(Tn().s[49]++,this.props.layer.type),i=(Tn().s[50]++,$D(r,e).filter(f=>(Tn().f[25]++,Tn().s[51]++,Tn().b[10][0]++,!(r==="background"&&(Tn().b[10][1]++,f.type==="source")))).map(f=>{Tn().f[26]++;const C=(Tn().s[52]++,f.id);return Tn().s[53]++,t.push(C),Tn().s[54]++,oe.jsx(DAe,{"data-wd-key":f.title,id:C,title:f.title,isActive:this.state.editorGroups[f.title],onActiveToggle:this.onGroupToggle.bind(this,f.title),children:this.renderGroupType(f.type,f.fields)},C)})),s=(Tn().s[55]++,Tn().b[11][0]++,this.props.layer.layout||(Tn().b[11][1]++,{})),l=(Tn().s[56]++,{delete:{text:e("Delete"),handler:()=>(Tn().f[27]++,Tn().s[57]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Tn().f[28]++,Tn().s[58]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Tn().b[12][0]++,e("Show")):(Tn().b[12][1]++,e("Hide")),handler:()=>(Tn().f[29]++,Tn().s[59]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Tn().f[30]++,Tn().s[60]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Tn().f[31]++,Tn().s[61]++,this.moveLayer(1))}});function o(f,C){Tn().f[32]++,Tn().s[62]++,C.stopPropagation(),Tn().s[63]++,l[f].handler()}return Tn().s[64]++,oe.jsx(Ey.Provider,{value:{size:"14px",color:"#8e8e8e"},children:oe.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[oe.jsx("header",{children:oe.jsxs("div",{className:"layer-header",children:[oe.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:EG(this.props.layer.id)})}),oe.jsx("div",{className:"layer-header__info",children:oe.jsxs(Gb.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[oe.jsx(Gb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:oe.jsx(UV,{className:"more-menu__button__svg"})}),oe.jsx(Gb.Menu,{children:oe.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(f=>{Tn().f[33]++;const C=(Tn().s[65]++,l[f]);return Tn().s[66]++,oe.jsx("li",{children:oe.jsx(Gb.MenuItem,{value:f,className:"more-menu__menu__item",children:C.text})},f)})})})]})})]})}),oe.jsx(Poe,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})})}}const XAe=(Tn().s[67]++,Us()(ZAe));var VD=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},JAe=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),eue=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),tue=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),nue=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),rue=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),iue=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,oue=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,HD=3,sue=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",iue]],ZD=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function aue(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new rue:typeof navigator<"u"?Aue(navigator.userAgent):cue()}function lue(n){return n!==""&&sue.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function Aue(n){var e=lue(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new nue;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<HD&&(i=VD(VD([],i,!0),hue(HD-i.length),!0)):i=[];var s=i.join("."),l=uue(n),o=oue.exec(n);return o&&o[1]?new tue(t,s,l,o[1]):new JAe(t,s,l)}function uue(n){for(var e=0,t=ZD.length;e<t;e++){var r=ZD[e],i=r[0],s=r[1],l=s.exec(n);if(l)return i}return null}function cue(){var n=typeof process<"u"&&process.version;return n?new eue(process.version.slice(1)):null}function hue(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const due="maputnik",fue="2.1.1",XD={name:due,version:fue},pue="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $i=function(){return l},l}$i();const mue=($i().s[0]++,aue()),Vb=($i().s[1]++,["chrome","firefox"].indexOf(mue.name)>-1);class _1 extends ur.Component{render(){return $i().f[0]++,$i().s[2]++,oe.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class gue extends ur.Component{render(){return $i().f[1]++,$i().s[3]++,oe.jsx("a",{className:dm("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class JD extends ur.Component{render(){return $i().f[2]++,$i().s[4]++,oe.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class Hb extends ur.Component{render(){return $i().f[3]++,$i().s[5]++,oe.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class yue extends ur.Component{state=($i().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){$i().f[4]++,$i().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){$i().f[5]++,$i().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=($i().s[9]++,e=>{if($i().f[6]++,$i().s[10]++,e==="map")$i().b[0][0]++,$i().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{$i().b[0][1]++;const t=($i().s[12]++,document.querySelector("#skip-target-"+e));$i().s[13]++,t.focus()}});render(){$i().f[7]++;const e=($i().s[14]++,this.props.t),t=($i().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!Vb},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!Vb},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!Vb},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!Vb}]),r=($i().s[16]++,t.find(i=>($i().f[8]++,$i().s[17]++,i.id===this.props.mapState)));return $i().s[18]++,oe.jsx("nav",{className:"maputnik-toolbar",children:oe.jsxs("div",{className:"maputnik-toolbar__inner",children:[oe.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[oe.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:i=>($i().f[9]++,$i().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),oe.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:i=>($i().f[10]++,$i().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),oe.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:i=>($i().f[11]++,$i().s[21]++,this.onSkip("map")),children:e("Map view")}),oe.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[oe.jsx("img",{src:pue,alt:e("Maputnik on GitHub")}),oe.jsxs("h1",{children:[oe.jsx("span",{className:"maputnik-toolbar-name",children:XD.name}),oe.jsxs("span",{className:"maputnik-toolbar-version",children:["v",XD.version]})]})]})]}),oe.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[oe.jsxs(Hb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[oe.jsx(SV,{}),oe.jsx(_1,{children:e("Open")})]}),oe.jsxs(Hb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[oe.jsx(C6,{}),oe.jsx(_1,{children:e("Save")})]}),oe.jsxs(Hb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[oe.jsx(RV,{}),oe.jsx(_1,{children:e("Data Sources")})]}),oe.jsxs(Hb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[oe.jsx(EV,{}),oe.jsx(_1,{children:e("Style Settings")})]}),oe.jsxs(JD,{wdKey:"nav:inspect",children:[oe.jsx(_V,{}),oe.jsxs(_1,{children:[e("View"),oe.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:i=>($i().f[12]++,$i().s[22]++,this.handleSelection(i.target.value)),value:r?.id,children:[t.filter(i=>($i().f[13]++,$i().s[23]++,i.group==="general")).map(i=>($i().f[14]++,$i().s[24]++,oe.jsx("option",{value:i.id,disabled:i.disabled,"data-wd-key":i.id,children:i.title},i.id))),oe.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(i=>($i().f[15]++,$i().s[25]++,i.group==="color-accessibility")).map(i=>($i().f[16]++,$i().s[26]++,oe.jsx("option",{value:i.id,disabled:i.disabled,children:i.title},i.id)))})]})]})]}),oe.jsxs(JD,{wdKey:"nav:language",children:[oe.jsx(wV,{}),oe.jsxs(_1,{children:["Language",oe.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:i=>($i().f[17]++,$i().s[27]++,this.handleLanguageChange(i.target.value)),value:this.props.i18n.language,children:Object.entries(wF).map(([i,s])=>($i().f[18]++,$i().s[28]++,oe.jsx("option",{value:i,children:s},i)))})]})]}),oe.jsxs(gue,{href:"https://github.com/maplibre/maputnik/wiki",children:[oe.jsx(bV,{}),oe.jsx(_1,{children:e("Help")})]})]})]})})}}const vue=($i().s[29]++,Us()(yue));function ax(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ax=function(){return l},l}ax();class Cue extends ur.Component{render(){return ax().f[0]++,ax().s[0]++,oe.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function I0(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="8ec38c69dd624a1f42daa5f8d5bda8f1451ec7e4",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:18,column:12}},2:{start:{line:21,column:18},end:{line:21,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:19,column:3}},line:7}},branchMap:{0:{loc:{start:{line:16,column:6},end:{line:16,column:123}},type:"binary-expr",locations:[{start:{line:16,column:6},end:{line:16,column:23}},{start:{line:16,column:43},end:{line:16,column:123}}],line:16}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAsBQ,SACE,KADF;AAtBR,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AACjD,SAAS,mBAAmB;AAW5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8ec38c69dd624a1f42daa5f8d5bda8f1451ec7e4"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return I0=function(){return l},l}I0();class _ue extends ur.Component{render(){return I0().f[0]++,I0().s[0]++,document.body.dir=this.props.i18n.dir(),I0().s[1]++,oe.jsx(Ey.Provider,{value:{size:"14px"},children:oe.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,oe.jsxs("div",{className:"maputnik-layout-main",children:[oe.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),oe.jsx("div",{className:"maputnik-layout-drawer",children:oe.jsx(Cue,{children:this.props.layerEditor})}),this.props.map]}),(I0().b[0][0]++,this.props.bottom&&(I0().b[0][1]++,oe.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const bue=(I0().s[2]++,Us()(_ue));function ul(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ul=function(){return l},l}ul();class xue extends ur.Component{static defaultProps=(ul().s[0]++,{onLayerSelect:()=>{ul().f[0]++}});render(){ul().f[1]++;const{t:e,selectedLayerIndex:t}=(ul().s[1]++,this.props),r=(ul().s[2]++,this.props.errors?.map((s,l)=>{ul().f[2]++;let o;if(ul().s[3]++,ul().b[1][0]++,s.parsed&&(ul().b[1][1]++,s.parsed.type==="layer")){ul().b[0][0]++;const{parsed:f}=(ul().s[4]++,s),C=(ul().s[5]++,this.props.mapStyle?.layers[f.data.index].id);ul().s[6]++,o=oe.jsxs(oe.Fragment,{children:[oe.jsxs(U0,{t:e,children:["Layer ",oe.jsx("span",{children:EG(C)}),": ",f.data.message]}),(ul().b[2][0]++,t!==f.data.index&&(ul().b[2][1]++,oe.jsxs(oe.Fragment,{children:[" — ",oe.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(ul().f[3]++,ul().s[7]++,this.props.onLayerSelect(f.data.index)),children:e("switch to layer")})]})))]})}else ul().b[0][1]++,ul().s[8]++,o=s.message;return ul().s[9]++,oe.jsx("p",{className:"maputnik-message-panel-error",children:o},"error-"+l)})),i=(ul().s[10]++,this.props.infos?.map((s,l)=>(ul().f[4]++,ul().s[11]++,oe.jsx("p",{children:s},"info-"+l))));return ul().s[12]++,oe.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}const Mue=(ul().s[13]++,Us()(xue));function XC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="88703d2c3d1eb7970d8c410ea3b48099d39b8a79",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88703d2c3d1eb7970d8c410ea3b48099d39b8a79"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return XC=function(){return l},l}XC();XC().s[0]++;const lx=n=>(XC().f[0]++,XC().s[1]++,oe.jsx(ZC,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(_G,{...n})}));function JC(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="fffa19ca675ebdef11e1e19bc5de80e92e7ab3b7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fffa19ca675ebdef11e1e19bc5de80e92e7ab3b7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return JC=function(){return l},l}JC();JC().s[0]++;const pp=n=>(JC().f[0]++,JC().s[1]++,oe.jsx(ha,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx($m,{...n})}));function e_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="52bce12df188c4d6d93f7468926f9c71d8918aec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52bce12df188c4d6d93f7468926f9c71d8918aec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return e_=function(){return l},l}e_();e_().s[0]++;const Ff=n=>(e_().f[0]++,e_().s[1]++,oe.jsx(ha,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(Sp,{...n})}));function t_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="22d8106d93846b5349fc1a84506c2b599d950216",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"22d8106d93846b5349fc1a84506c2b599d950216"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return t_=function(){return l},l}t_();t_().s[0]++;const Gy=n=>(t_().f[0]++,t_().s[1]++,oe.jsx(ha,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(DI,{...n})}));function n_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="fc56b0bbcfdebee59c0c65a50c638259331ea9d2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fc56b0bbcfdebee59c0c65a50c638259331ea9d2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return n_=function(){return l},l}n_();n_().s[0]++;const O3=n=>(n_().f[0]++,n_().s[1]++,oe.jsx(ha,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(sg,{...n})}));function r_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="3037ded4ee585e31829504c4e3cf91968b29d62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3037ded4ee585e31829504c4e3cf91968b29d62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return r_=function(){return l},l}r_();r_().s[0]++;const wue=n=>(r_().f[0]++,r_().s[1]++,oe.jsx(ZC,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(RI,{...n})}));function i_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="eafb3279f0c8cbcaa727c8284a8764c1ce8a88a6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"eafb3279f0c8cbcaa727c8284a8764c1ce8a88a6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return i_=function(){return l},l}i_();i_().s[0]++;const Sue=n=>(i_().f[0]++,i_().s[1]++,oe.jsx(ha,{label:n.label,fieldSpec:n.fieldSpec,children:oe.jsx(vG,{...n})}));function o_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return o_=function(){return l},l}o_();o_().s[0]++;const OG=n=>(o_().f[0]++,o_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function zi(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="872f9c04e4419295b6c623f56ecfd65d49f0bc65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:305,column:6}},27:{start:{line:308,column:22},end:{line:308,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:306,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:170,column:21},end:{line:170,column:42}},type:"binary-expr",locations:[{start:{line:170,column:21},end:{line:170,column:36}},{start:{line:170,column:40},end:{line:170,column:42}}],line:170},9:{loc:{start:{line:299,column:21},end:{line:299,column:62}},type:"binary-expr",locations:[{start:{line:299,column:21},end:{line:299,column:50}},{start:{line:299,column:54},end:{line:299,column:62}}],line:299}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,yBAAyB,KAAK,MAAM,kCAAkC;AAAA;AAAA,UAClF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"872f9c04e4419295b6c623f56ecfd65d49f0bc65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return zi=function(){return l},l}zi();class Eue extends ur.Component{changeTransitionProperty(e,t){zi().f[0]++;const r=(zi().s[0]++,{...this.props.mapStyle.transition});zi().s[1]++,t===void 0?(zi().b[0][0]++,zi().s[2]++,delete r[e]):(zi().b[0][1]++,zi().s[3]++,r[e]=t),zi().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){zi().f[1]++;const r=(zi().s[5]++,{...this.props.mapStyle.light});zi().s[6]++,t===void 0?(zi().b[1][0]++,zi().s[7]++,delete r[e]):(zi().b[1][1]++,zi().s[8]++,r[e]=t),zi().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){zi().f[2]++;const r=(zi().s[10]++,{...this.props.mapStyle.terrain});zi().s[11]++,t===void 0?(zi().b[2][0]++,zi().s[12]++,delete r[e]):(zi().b[2][1]++,zi().s[13]++,r[e]=t),zi().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){zi().f[3]++;const r=(zi().s[15]++,{...this.props.mapStyle});zi().s[16]++,t===void 0?(zi().b[3][0]++,zi().s[17]++,delete r[e]):(zi().b[3][1]++,zi().s[18]++,r[e]=t),zi().s[19]++,this.props.onStyleChanged(r)}render(){zi().f[4]++;const e=(zi().s[20]++,zi().b[4][0]++,this.props.mapStyle.metadata||(zi().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(zi().s[21]++,this.props),s=(zi().s[22]++,OG(t)),l=(zi().s[23]++,zi().b[5][0]++,this.props.mapStyle.light||(zi().b[5][1]++,{})),o=(zi().s[24]++,zi().b[6][0]++,this.props.mapStyle.transition||(zi().b[6][1]++,{})),f=(zi().s[25]++,zi().b[7][0]++,this.props.mapStyle.terrain||(zi().b[7][1]++,{}));return zi().s[26]++,oe.jsx(Z0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:oe.jsxs("div",{className:"modal:settings",children:[oe.jsx(Ff,{label:t("Name"),fieldSpec:Xo.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),oe.jsx(Ff,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),oe.jsx(Gy,{fieldSpec:Xo.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),oe.jsx(Gy,{label:t("Glyphs URL"),fieldSpec:Xo.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),oe.jsx(Ff,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),oe.jsx(Ff,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),oe.jsx(Ff,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),oe.jsx(Ff,{label:s.maputnik.locationiq_access_token.label,fieldSpec:s.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:r.bind(this,"maputnik:locationiq_access_token")}),oe.jsx(lx,{label:t("Center"),fieldSpec:Xo.$root.center,length:2,type:"number",value:(zi().b[8][0]++,i.center||(zi().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),oe.jsx(pp,{label:t("Zoom"),fieldSpec:Xo.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),oe.jsx(pp,{label:t("Bearing"),fieldSpec:Xo.$root.bearing,value:i.bearing,default:Xo.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),oe.jsx(pp,{label:t("Pitch"),fieldSpec:Xo.$root.pitch,value:i.pitch,default:Xo.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),oe.jsx(wue,{label:t("Light anchor"),fieldSpec:Xo.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(Xo.light.anchor.values),default:Xo.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),oe.jsx(Sue,{label:t("Light color"),fieldSpec:Xo.light.color,value:l.color,default:Xo.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),oe.jsx(pp,{label:t("Light intensity"),fieldSpec:Xo.light.intensity,value:l.intensity,default:Xo.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),oe.jsx(lx,{label:t("Light position"),fieldSpec:Xo.light.position,type:"number",length:Xo.light.position.length,value:l.position,default:Xo.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),oe.jsx(Ff,{label:t("Terrain source"),fieldSpec:Xo.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:f.source,onChange:this.changeTerrainProperty.bind(this,"source")}),oe.jsx(pp,{label:t("Terrain exaggeration"),fieldSpec:Xo.terrain.exaggeration,value:f.exaggeration,default:Xo.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),oe.jsx(pp,{label:t("Transition delay"),fieldSpec:Xo.transition.delay,value:o.delay,default:Xo.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),oe.jsx(pp,{label:t("Transition duration"),fieldSpec:Xo.transition.duration,value:o.duration,default:Xo.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),oe.jsx(O3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(zi().b[9][0]++,e["maputnik:renderer"]||(zi().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const Bue=(zi().s[27]++,Us()(Eue));var c2={exports:{}},Oue=c2.exports,eK;function Iue(){return eK||(eK=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",Oue,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(s,l){if(typeof s!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=r[l.locale]||{},f=l.replacement===void 0?"-":l.replacement,C=l.trim===void 0?!0:l.trim,x=s.normalize().split("").reduce(function(B,R){var P=o[R];return P===void 0&&(P=t[R]),P===void 0&&(P=R),P===f&&(P=" "),B+P.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(x=x.replace(/[^A-Za-z0-9\s]/g,"")),C&&(x=x.trim()),x=x.replace(/\s+/g,f),l.lower&&(x=x.toLowerCase()),x}return i.extend=function(s){Object.assign(t,s)},i})}(c2)),c2.exports}var Tue=Iue();const kue=Gl(Tue);var h2={exports:{}},Pue=h2.exports,tK;function Rue(){return tK||(tK=1,function(n,e){(function(t,r){r()})(Pue,function(){function t(C,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\uFEFF",C],{type:C.type}):C}function r(C,x,B){var R=new XMLHttpRequest;R.open("GET",C),R.responseType="blob",R.onload=function(){f(R.response,x,B)},R.onerror=function(){console.error("could not download file")},R.send()}function i(C){var x=new XMLHttpRequest;x.open("HEAD",C,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function s(C){try{C.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(x)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(C,x,B){var R=l.URL||l.webkitURL,P=document.createElement("a");x=x||C.name||"download",P.download=x,P.rel="noopener",typeof C=="string"?(P.href=C,P.origin===location.origin?s(P):i(P.href)?r(C,x,B):s(P,P.target="_blank")):(P.href=R.createObjectURL(C),setTimeout(function(){R.revokeObjectURL(P.href)},4e4),setTimeout(function(){s(P)},0))}:"msSaveOrOpenBlob"in navigator?function(C,x,B){if(x=x||C.name||"download",typeof C!="string")navigator.msSaveOrOpenBlob(t(C,B),x);else if(i(C))r(C,x,B);else{var R=document.createElement("a");R.href=C,R.target="_blank",setTimeout(function(){s(R)})}}:function(C,x,B,R){if(R=R||open("","_blank"),R&&(R.document.title=R.document.body.innerText="downloading..."),typeof C=="string")return r(C,x,B);var P=C.type==="application/octet-stream",U=/constructor/i.test(l.HTMLElement)||l.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||P&&U||o)&&typeof FileReader<"u"){var W=new FileReader;W.onloadend=function(){var re=W.result;re=N?re:re.replace(/^data:[^;]*;/,"data:attachment/file;"),R?R.location.href=re:location=re,R=null},W.readAsDataURL(C)}else{var X=l.URL||l.webkitURL,$=X.createObjectURL(C);R?R.location=$:location.href=$,R=null,setTimeout(function(){X.revokeObjectURL($)},4e4)}});l.saveAs=f.saveAs=f,n.exports=f})}(h2)),h2.exports}var nK=Rue();const Due="5.5.0",Kue="get_your_own_OpIi9ZULNHzrESv6T2vL",Fue="b71f7f0ba4064f5eb9e903859a9cf5c6",Lue="pk.put_your_api_key_here7bb23dffeb4",IG={openmaptiles:Kue,thunderforest:Fue,locationiq:Lue};function $n(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="9703d9f5282c5ba5f688793232ecfbe02d09ccff",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:65,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:65,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:63,column:9},end:{line:65,column:3}},34:{start:{line:64,column:4},end:{line:64,column:34}},35:{start:{line:66,column:22},end:{line:66,column:68}},36:{start:{line:67,column:2},end:{line:69,column:3}},37:{start:{line:68,column:4},end:{line:68,column:20}},38:{start:{line:71,column:2},end:{line:75,column:3}},39:{start:{line:72,column:4},end:{line:72,column:55}},40:{start:{line:74,column:4},end:{line:74,column:57}},41:{start:{line:76,column:25},end:{line:82,column:3}},42:{start:{line:83,column:23},end:{line:86,column:3}},43:{start:{line:87,column:2},end:{line:87,column:22}},44:{start:{line:90,column:21},end:{line:90,column:29}},45:{start:{line:91,column:2},end:{line:93,column:5}},46:{start:{line:92,column:4},end:{line:92,column:76}},47:{start:{line:94,column:2},end:{line:102,column:3}},48:{start:{line:95,column:27},end:{line:95,column:73}},49:{start:{line:96,column:4},end:{line:101,column:5}},50:{start:{line:97,column:6},end:{line:100,column:8}},51:{start:{line:103,column:2},end:{line:103,column:22}},52:{start:{line:106,column:26},end:{line:108,column:3}},53:{start:{line:109,column:2},end:{line:109,column:63}},54:{start:{line:110,column:2},end:{line:110,column:64}},55:{start:{line:111,column:2},end:{line:111,column:57}},56:{start:{line:112,column:2},end:{line:112,column:61}},57:{start:{line:113,column:2},end:{line:116,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:88,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:89,column:9},end:{line:89,column:28}},loc:{start:{line:89,column:50},end:{line:104,column:1}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:91,column:40},end:{line:91,column:41}},loc:{start:{line:91,column:56},end:{line:93,column:3}},line:91},11:{name:"stripAccessTokens",decl:{start:{line:105,column:9},end:{line:105,column:26}},loc:{start:{line:105,column:37},end:{line:117,column:1}},line:105}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:65,column:3}},{start:{line:61,column:9},end:{line:65,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:65,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:65,column:3}},{start:{line:63,column:9},end:{line:65,column:3}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:63,column:9},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:9},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},15:{loc:{start:{line:63,column:13},end:{line:63,column:70}},type:"binary-expr",locations:[{start:{line:63,column:13},end:{line:63,column:28}},{start:{line:63,column:32},end:{line:63,column:70}}],line:63},16:{loc:{start:{line:67,column:2},end:{line:69,column:3}},type:"if",locations:[{start:{line:67,column:2},end:{line:69,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67},17:{loc:{start:{line:71,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:71,column:2},end:{line:75,column:3}},{start:{line:73,column:9},end:{line:75,column:3}}],line:71},18:{loc:{start:{line:89,column:39},end:{line:89,column:48}},type:"default-arg",locations:[{start:{line:89,column:46},end:{line:89,column:48}}],line:89},19:{loc:{start:{line:94,column:2},end:{line:102,column:3}},type:"if",locations:[{start:{line:94,column:2},end:{line:102,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},20:{loc:{start:{line:94,column:6},end:{line:94,column:114}},type:"binary-expr",locations:[{start:{line:94,column:6},end:{line:94,column:21}},{start:{line:94,column:26},end:{line:94,column:69}},{start:{line:94,column:73},end:{line:94,column:113}}],line:94},21:{loc:{start:{line:96,column:4},end:{line:101,column:5}},type:"if",locations:[{start:{line:96,column:4},end:{line:101,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:96}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9703d9f5282c5ba5f688793232ecfbe02d09ccff"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $n=function(){return l},l}$n();const Uue=($n().s[0]++,kG({version:8,sources:{},layers:[]}));function TG(){return $n().f[0]++,$n().s[1]++,Math.random().toString(36).substring(2,9)}function zue(n){return $n().f[1]++,$n().s[2]++,$n().b[1][0]++,!("id"in n)||($n().b[1][1]++,!n.id)?($n().b[0][0]++,$n().s[3]++,n.id=TG(),$n().s[4]++,n):($n().b[0][1]++,$n().s[5]++,n)}function Nue(n){$n().f[2]++;const e=($n().s[6]++,n.layers.map(t=>{$n().f[3]++;const r=($n().s[7]++,{...t});return $n().s[8]++,delete r.interactive,$n().s[9]++,r}));return $n().s[10]++,{...n,layers:e}}function Gue(n){return $n().f[4]++,$n().s[11]++,{...n,layers:_B(n.layers)}}function kG(n){return $n().f[5]++,$n().s[12]++,Nue(Gue(zue(n)))}function jue(n,e){$n().f[6]++,$n().s[13]++;for(let t=($n().s[14]++,0);t<n.length;t++){if($n().s[15]++,n[t].id===e)return $n().b[2][0]++,$n().s[16]++,t;$n().b[2][1]++}return $n().s[17]++,null}function FI(n,e,t){$n().f[7]++;const r=($n().s[18]++,$n().b[3][0]++,e.metadata||($n().b[3][1]++,{}));let i=($n().s[19]++,r[`maputnik:${n}_access_token`]);return $n().s[20]++,$n().b[5][0]++,t.allowFallback&&($n().b[5][1]++,!i)?($n().b[4][0]++,$n().s[21]++,i=IG[n]):$n().b[4][1]++,$n().s[22]++,i}function Wue(n,e,t=($n().b[6][0]++,{})){$n().f[8]++;const r=($n().s[23]++,n.sources[e]);if($n().s[24]++,r)$n().b[7][1]++;else return $n().b[7][0]++,$n().s[25]++,n;if($n().s[26]++,$n().b[9][0]++,!("url"in r)||($n().b[9][1]++,!r.url))return $n().b[8][0]++,$n().s[27]++,n;$n().b[8][1]++;let i=($n().s[28]++,e);$n().s[29]++,$n().b[11][0]++,e==="thunderforest_transport"||($n().b[11][1]++,e==="thunderforest_outdoors")?($n().b[10][0]++,$n().s[30]++,i="thunderforest"):($n().b[10][1]++,$n().s[31]++,$n().b[13][0]++,"url"in r&&($n().b[13][1]++,r.url?.match(/\.stadiamaps\.com/))?($n().b[12][0]++,$n().s[32]++,i="stadia"):($n().b[12][1]++,$n().s[33]++,$n().b[15][0]++,"url"in r&&($n().b[15][1]++,r.url?.match(/\.locationiq\.com/))?($n().b[14][0]++,$n().s[34]++,i="locationiq"):$n().b[14][1]++));const s=($n().s[35]++,FI(i,n,t));if($n().s[36]++,s)$n().b[16][1]++;else return $n().b[16][0]++,$n().s[37]++,n;let l;$n().s[38]++,i=="stadia"?($n().b[17][0]++,$n().s[39]++,l=`${r.url}?api_key=${s}`):($n().b[17][1]++,$n().s[40]++,l=r.url.replace("{key}",s));const o=($n().s[41]++,{...n.sources,[e]:{...r,url:l}}),f=($n().s[42]++,{...n,sources:o});return $n().s[43]++,f}function Que(n,e=($n().b[18][0]++,{})){$n().f[9]++;let t=($n().s[44]++,n);if($n().s[45]++,Object.keys(n.sources).forEach(r=>{$n().f[10]++,$n().s[46]++,t=Wue(t,r,e)}),$n().s[47]++,$n().b[20][0]++,n.glyphs&&($n().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||($n().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){$n().b[19][0]++;const r=($n().s[48]++,FI("openmaptiles",n,e));$n().s[49]++,r?($n().b[21][0]++,$n().s[50]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):$n().b[21][1]++}else $n().b[19][1]++;return $n().s[51]++,t}function Yue(n){$n().f[11]++;const e=($n().s[52]++,{...n.metadata});return $n().s[53]++,delete e["maputnik:openmaptiles_access_token"],$n().s[54]++,delete e["maputnik:thunderforest_access_token"],$n().s[55]++,delete e["maputnik:stadia_access_token"],$n().s[56]++,delete e["maputnik:locationiq_access_token"],$n().s[57]++,{...n,metadata:e}}const Ac={ensureStyleValidity:kG,emptyStyle:Uue,indexOfLayer:jue,generateId:TG,getAccessToken:FI,replaceAccessTokens:Que,stripAccessTokens:Yue};function Nr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="d04d0772f7c8af54bd6832aad6108dc2c65adebc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d04d0772f7c8af54bd6832aad6108dc2c65adebc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Nr=function(){return l},l}Nr();const rK=(Nr().s[0]++,Due),iK=(Nr().s[1]++,typeof window.showSaveFilePicker=="function");class que extends ur.Component{tokenizedStyle(){return Nr().f[0]++,Nr().s[2]++,OL(Ac.stripAccessTokens(Ac.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Nr().f[1]++,Nr().s[3]++,this.props.mapStyle.name?(Nr().b[0][0]++,Nr().s[4]++,kue(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Nr().b[0][1]++,Nr().s[5]++,this.props.mapStyle.id)}createHtml(){Nr().f[2]++;const e=(Nr().s[6]++,this.tokenizedStyle()),t=(Nr().s[7]++,Nr().b[1][0]++,this.props.mapStyle.name||(Nr().b[1][1]++,this.props.t("Map"))),r=(Nr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${rK}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${rK}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Nr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Nr().s[10]++,this.exportName());Nr().s[11]++,nK.saveAs(i,s+".html")}async saveStyle(){Nr().f[3]++;const e=(Nr().s[12]++,this.tokenizedStyle());if(Nr().s[13]++,iK)Nr().b[2][1]++;else{Nr().b[2][0]++;const i=(Nr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Nr().s[15]++,this.exportName());Nr().s[16]++,nK.saveAs(i,s+".json"),Nr().s[17]++;return}let t=(Nr().s[18]++,this.props.fileHandle);if(Nr().s[19]++,t==null)if(Nr().b[3][0]++,Nr().s[20]++,t=await this.createFileHandle(),Nr().s[21]++,this.props.onSetFileHandle(t),Nr().s[22]++,t==null){Nr().b[4][0]++,Nr().s[23]++;return}else Nr().b[4][1]++;else Nr().b[3][1]++;const r=(Nr().s[24]++,await t.createWritable());Nr().s[25]++,await r.write(e),Nr().s[26]++,await r.close(),Nr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Nr().f[4]++;const e=(Nr().s[28]++,this.tokenizedStyle()),t=(Nr().s[29]++,await this.createFileHandle());if(Nr().s[30]++,this.props.onSetFileHandle(t),Nr().s[31]++,t==null){Nr().b[5][0]++,Nr().s[32]++;return}else Nr().b[5][1]++;const r=(Nr().s[33]++,await t.createWritable());Nr().s[34]++,await r.write(e),Nr().s[35]++,await r.close(),Nr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Nr().f[5]++;const e=(Nr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Nr().s[38]++,await window.showSaveFilePicker(e));return Nr().s[39]++,this.props.onSetFileHandle(t),Nr().s[40]++,t}changeMetadataProperty(e,t){Nr().f[6]++;const r=(Nr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Nr().s[42]++,this.props.onStyleChanged(r)}render(){Nr().f[7]++;const e=(Nr().s[43]++,this.props.t),t=(Nr().s[44]++,OG(e));return Nr().s[45]++,oe.jsx(Z0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Save Style")}),oe.jsx("p",{children:e("Save the JSON style to your computer.")}),oe.jsxs("div",{children:[oe.jsx(Ff,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Nr().b[6][0]++,this.props.mapStyle.metadata||(Nr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),oe.jsx(Ff,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Nr().b[7][0]++,this.props.mapStyle.metadata||(Nr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),oe.jsx(Ff,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Nr().b[8][0]++,this.props.mapStyle.metadata||(Nr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),oe.jsx(Ff,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(Nr().b[9][0]++,this.props.mapStyle.metadata||(Nr().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),oe.jsxs("div",{className:"maputnik-modal-export-buttons",children:[oe.jsxs(el,{onClick:this.saveStyle.bind(this),children:[oe.jsx(C6,{}),e("Save")]}),(Nr().b[10][0]++,iK&&(Nr().b[10][1]++,oe.jsxs(el,{onClick:this.saveStyleAs.bind(this),children:[oe.jsx(C6,{}),e("Save as")]}))),oe.jsxs(el,{onClick:this.createHtml.bind(this),children:[oe.jsx(DV,{}),e("Create HTML")]})]})]})})}}const $ue=(Nr().s[46]++,Us()(que));function s_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="008bf7f932014e13eee4379e3554a3bc406336ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"008bf7f932014e13eee4379e3554a3bc406336ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return s_=function(){return l},l}s_();s_().s[0]++;const PG=n=>(s_().f[0]++,s_().s[1]++,oe.jsx(ZC,{label:n.label,children:oe.jsx(bG,{...n})}));function a_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="c125b14cc26e01a4ebcfb9f19e77a3d5d28023c7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c125b14cc26e01a4ebcfb9f19e77a3d5d28023c7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return a_=function(){return l},l}a_();a_().s[0]++;const Vue=n=>(a_().f[0]++,a_().s[1]++,oe.jsx(ha,{label:n.label,children:oe.jsx(CG,{...n})}));function Wn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wn=function(){return l},l}Wn();class iE extends ur.Component{render(){Wn().f[0]++;const e=(Wn().s[0]++,this.props.t);return Wn().s[1]++,oe.jsxs("div",{children:[oe.jsx(Gy,{label:e("TileJSON URL"),fieldSpec:ws.source_vector.url,value:this.props.source.url,onChange:t=>(Wn().f[1]++,Wn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class oE extends ur.Component{changeTileUrls(e){Wn().f[2]++,Wn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Wn().f[3]++;const e=(Wn().s[4]++,Wn().b[0][0]++,this.props.source.tiles||(Wn().b[0][1]++,[]));return Wn().s[5]++,oe.jsx(PG,{label:this.props.t("Tile URL"),fieldSpec:ws.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Wn().f[4]++;const e=(Wn().s[6]++,this.props.t);return Wn().s[7]++,oe.jsxs("div",{children:[this.renderTileUrls(),oe.jsx(O3,{label:e("Scheme Type"),fieldSpec:ws.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Wn().f[5]++,Wn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),oe.jsx(pp,{label:e("Min Zoom"),fieldSpec:ws.source_vector.minzoom,value:(Wn().b[1][0]++,this.props.source.minzoom||(Wn().b[1][1]++,0)),onChange:t=>(Wn().f[6]++,Wn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),oe.jsx(pp,{label:e("Max Zoom"),fieldSpec:ws.source_vector.maxzoom,value:(Wn().b[2][0]++,this.props.source.maxzoom||(Wn().b[2][1]++,22)),onChange:t=>(Wn().f[7]++,Wn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Wn().s[11]++;const RG=n=>(Wn().f[8]++,Wn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class Hue extends ur.Component{render(){Wn().f[9]++;const e=(Wn().s[13]++,this.props.t);Wn().s[14]++;const t=(r,i)=>{Wn().f[10]++;const s=(Wn().s[15]++,this.props.source.coordinates.slice(0));Wn().s[16]++,s[r]=i,Wn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Wn().s[18]++,oe.jsxs("div",{children:[oe.jsx(Gy,{label:e("Image URL"),fieldSpec:ws.source_image.url,value:this.props.source.url,onChange:r=>(Wn().f[11]++,Wn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),RG(e).map(({label:r,key:i},s)=>(Wn().f[12]++,Wn().s[20]++,oe.jsx(lx,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:l=>(Wn().f[13]++,Wn().s[21]++,t(s,l))},i)))]})}}class Zue extends ur.Component{render(){Wn().f[14]++;const e=(Wn().s[22]++,this.props.t);Wn().s[23]++;const t=(i,s)=>{Wn().f[15]++;const l=(Wn().s[24]++,this.props.source.coordinates.slice(0));Wn().s[25]++,l[i]=s,Wn().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};Wn().s[27]++;const r=i=>{Wn().f[16]++,Wn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Wn().s[29]++,oe.jsxs("div",{children:[oe.jsx(PG,{label:e("Video URL"),fieldSpec:ws.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),RG(e).map(({label:i,key:s},l)=>(Wn().f[17]++,Wn().s[30]++,oe.jsx(lx,{label:i,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(Wn().f[18]++,Wn().s[31]++,t(l,o))},s)))]})}}class Xue extends ur.Component{render(){Wn().f[19]++;const e=(Wn().s[32]++,this.props.t);return Wn().s[33]++,oe.jsx(Gy,{label:e("GeoJSON URL"),fieldSpec:ws.source_geojson.data,value:this.props.source.data,onChange:t=>(Wn().f[20]++,Wn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class Jue extends ur.Component{render(){Wn().f[21]++;const e=(Wn().s[35]++,this.props.t);return Wn().s[36]++,oe.jsxs("div",{children:[oe.jsx(ha,{label:e("GeoJSON"),fieldSpec:ws.source_geojson.data,children:oe.jsx(dI,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Wn().f[22]++,Wn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),oe.jsx(Vue,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Wn().f[23]++,Wn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class ece extends ur.Component{render(){Wn().f[24]++;const e=(Wn().s[39]++,this.props.t);return Wn().s[40]++,oe.jsxs("div",{children:[oe.jsx(Gy,{label:e("PMTiles URL"),fieldSpec:ws.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Wn().f[25]++,Wn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Wn().b[3][0]++,t):(Wn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class tce extends ur.Component{render(){Wn().f[26]++;const e=(Wn().s[42]++,this.props.t),t=(Wn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Wn().s[44]++,this.props.mode){case"geojson_url":return Wn().b[4][0]++,Wn().s[45]++,oe.jsx(Xue,{...t});case"geojson_json":return Wn().b[4][1]++,Wn().s[46]++,oe.jsx(Jue,{...t});case"tilejson_vector":return Wn().b[4][2]++,Wn().s[47]++,oe.jsx(iE,{...t});case"tile_vector":return Wn().b[4][3]++,Wn().s[48]++,oe.jsx(oE,{...t});case"tilejson_raster":return Wn().b[4][4]++,Wn().s[49]++,oe.jsx(iE,{...t});case"tile_raster":return Wn().b[4][5]++,Wn().s[50]++,oe.jsx(oE,{...t,children:oe.jsx(pp,{label:e("Tile Size"),fieldSpec:ws.source_raster.tileSize,onChange:r=>(Wn().f[27]++,Wn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Wn().b[5][0]++,this.props.source.tileSize||(Wn().b[5][1]++,ws.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Wn().b[4][6]++,Wn().s[52]++,oe.jsx(iE,{...t});case"tilexyz_raster-dem":return Wn().b[4][7]++,Wn().s[53]++,oe.jsxs(oE,{...t,children:[oe.jsx(pp,{label:e("Tile Size"),fieldSpec:ws.source_raster_dem.tileSize,onChange:r=>(Wn().f[28]++,Wn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Wn().b[6][0]++,this.props.source.tileSize||(Wn().b[6][1]++,ws.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),oe.jsx(O3,{label:e("Encoding"),fieldSpec:ws.source_raster_dem.encoding,options:Object.keys(ws.source_raster_dem.encoding.values),onChange:r=>(Wn().f[29]++,Wn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(Wn().b[7][0]++,this.props.source.encoding||(Wn().b[7][1]++,ws.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Wn().b[4][8]++,Wn().s[56]++,oe.jsx(ece,{...t});case"image":return Wn().b[4][9]++,Wn().s[57]++,oe.jsx(Hue,{...t});case"video":return Wn().b[4][10]++,Wn().s[58]++,oe.jsx(Zue,{...t});default:return Wn().b[4][11]++,Wn().s[59]++,null}}}const DG=(Wn().s[60]++,Us()(tce));function xp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xp=function(){return l},l}xp();function nce(n,e){xp().f[0]++;const t=(xp().s[0]++,{...n.sources});return xp().s[1]++,delete t[e],xp().s[2]++,{...n,sources:t}}function oK(n,e,t){return xp().f[1]++,xp().s[3]++,KG(n,e,t)}function KG(n,e,t){xp().f[2]++;const r=(xp().s[4]++,{...n.sources,[e]:t});return xp().s[5]++,{...n,sources:r}}const rce={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},ice={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},oce={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},sce={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},ace={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},sK={openmaptiles:rce,thunderforest_transport:ice,thunderforest_outdoors:oce,open_zoomstack:sce,locationiq:ace};function hn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hn=function(){return l},l}hn();class lce extends ur.Component{render(){return hn().f[0]++,hn().s[0]++,oe.jsx("div",{className:"maputnik-public-source",children:oe.jsxs(el,{className:"maputnik-public-source-select",onClick:()=>(hn().f[1]++,hn().s[1]++,this.props.onSelect(this.props.id)),children:[oe.jsxs("div",{className:"maputnik-public-source-info",children:[oe.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),oe.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(PL,{})]})})}}function Ace(n){return hn().f[2]++,hn().s[2]++,n.type==="raster"?(hn().b[0][0]++,hn().s[3]++,n.tiles?(hn().b[1][0]++,hn().s[4]++,"tile_raster"):(hn().b[1][1]++,hn().s[5]++,"tilejson_raster")):(hn().b[0][1]++,hn().s[6]++,n.type==="raster-dem"?(hn().b[2][0]++,hn().s[7]++,n.tiles?(hn().b[3][0]++,hn().s[8]++,"tilexyz_raster-dem"):(hn().b[3][1]++,hn().s[9]++,"tilejson_raster-dem")):(hn().b[2][1]++,hn().s[10]++,n.type==="vector"?(hn().b[4][0]++,hn().s[11]++,n.tiles?(hn().b[5][0]++,hn().s[12]++,"tile_vector"):(hn().b[5][1]++,hn().s[13]++,hn().b[7][0]++,n.url&&(hn().b[7][1]++,n.url.startsWith("pmtiles://"))?(hn().b[6][0]++,hn().s[14]++,"pmtiles_vector"):(hn().b[6][1]++,hn().s[15]++,"tilejson_vector"))):(hn().b[4][1]++,hn().s[16]++,n.type==="geojson"?(hn().b[8][0]++,hn().s[17]++,typeof n.data=="string"?(hn().b[9][0]++,hn().s[18]++,"geojson_url"):(hn().b[9][1]++,hn().s[19]++,"geojson_json")):(hn().b[8][1]++,hn().s[20]++,n.type==="image"?(hn().b[10][0]++,hn().s[21]++,"image"):(hn().b[10][1]++,hn().s[22]++,n.type==="video"?(hn().b[11][0]++,hn().s[23]++,"video"):(hn().b[11][1]++,hn().s[24]++,null))))))}class uce extends ur.Component{render(){hn().f[3]++;const e=(hn().s[25]++,this.props.t);return hn().s[26]++,oe.jsxs("div",{className:"maputnik-active-source-type-editor",children:[oe.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[oe.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(el,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(hn().f[4]++,hn().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:oe.jsx(qy,{})})]}),oe.jsx("div",{className:"maputnik-active-source-type-editor-content",children:oe.jsx(DG,{onChange:this.props.onChange,mode:Ace(this.props.source),source:this.props.source})})]})}}class cce extends ur.Component{constructor(e){hn().f[5]++,hn().s[28]++,super(e),hn().s[29]++,this.state={mode:"tilejson_vector",sourceId:Ac.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){hn().f[6]++;const t=(hn().s[30]++,hn().b[12][0]++,(hn().b[13][0]++,this.state||(hn().b[13][1]++,{})).source||(hn().b[12][1]++,{})),{protocol:r}=(hn().s[31]++,window.location);switch(hn().s[32]++,e){case"pmtiles_vector":return hn().b[14][0]++,hn().s[33]++,{type:"vector",url:`${r}//localhost:3000/file.pmtiles`};case"geojson_url":return hn().b[14][1]++,hn().s[34]++,{type:"geojson",data:`${r}//localhost:3000/geojson.json`};case"geojson_json":return hn().b[14][2]++,hn().s[35]++,{type:"geojson",cluster:(hn().b[15][0]++,t.cluster||(hn().b[15][1]++,!1)),data:""};case"tilejson_vector":return hn().b[14][3]++,hn().s[36]++,{type:"vector",url:(hn().b[16][0]++,t.url||(hn().b[16][1]++,`${r}//localhost:3000/tilejson.json`))};case"tile_vector":return hn().b[14][4]++,hn().s[37]++,{type:"vector",tiles:(hn().b[17][0]++,t.tiles||(hn().b[17][1]++,[`${r}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(hn().b[18][0]++,t.minzoom||(hn().b[18][1]++,0)),maxzoom:(hn().b[19][0]++,t.maxzoom||(hn().b[19][1]++,14)),scheme:(hn().b[20][0]++,t.scheme||(hn().b[20][1]++,"xyz"))};case"tilejson_raster":return hn().b[14][5]++,hn().s[38]++,{type:"raster",url:(hn().b[21][0]++,t.url||(hn().b[21][1]++,`${r}//localhost:3000/tilejson.json`))};case"tile_raster":return hn().b[14][6]++,hn().s[39]++,{type:"raster",tiles:(hn().b[22][0]++,t.tiles||(hn().b[22][1]++,[`${r}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(hn().b[23][0]++,t.minzoom||(hn().b[23][1]++,0)),maxzoom:(hn().b[24][0]++,t.maxzoom||(hn().b[24][1]++,14)),scheme:(hn().b[25][0]++,t.scheme||(hn().b[25][1]++,"xyz")),tileSize:(hn().b[26][0]++,t.tileSize||(hn().b[26][1]++,512))};case"tilejson_raster-dem":return hn().b[14][7]++,hn().s[40]++,{type:"raster-dem",url:(hn().b[27][0]++,t.url||(hn().b[27][1]++,`${r}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return hn().b[14][8]++,hn().s[41]++,{type:"raster-dem",tiles:(hn().b[28][0]++,t.tiles||(hn().b[28][1]++,[`${r}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(hn().b[29][0]++,t.minzoom||(hn().b[29][1]++,0)),maxzoom:(hn().b[30][0]++,t.maxzoom||(hn().b[30][1]++,14)),tileSize:(hn().b[31][0]++,t.tileSize||(hn().b[31][1]++,512))};case"image":return hn().b[14][9]++,hn().s[42]++,{type:"image",url:`${r}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return hn().b[14][10]++,hn().s[43]++,{type:"video",urls:[`${r}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return hn().b[14][11]++,hn().s[44]++,{}}}onAdd=(hn().s[45]++,()=>{hn().f[7]++;const{source:e,sourceId:t}=(hn().s[46]++,this.state);hn().s[47]++,this.props.onAdd(t,e)});onChangeSource=(hn().s[48]++,e=>{hn().f[8]++,hn().s[49]++,this.setState({source:e})});render(){hn().f[9]++;const e=(hn().s[50]++,this.props.t),t=(hn().s[51]++,{doc:Xo.source_vector.type.doc});return hn().s[52]++,oe.jsxs("div",{className:"maputnik-add-source",children:[oe.jsx(Ff,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:r=>(hn().f[10]++,hn().s[53]++,this.setState({sourceId:r})),"data-wd-key":"modal:sources.add.source_id"}),oe.jsx(O3,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:r=>(hn().f[11]++,hn().s[54]++,this.setState({mode:r,source:this.defaultSource(r)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),oe.jsx(DG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),oe.jsx(el,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class hce extends ur.Component{stripTitle(e){hn().f[12]++;const t=(hn().s[55]++,{...e});return hn().s[56]++,delete t.title,hn().s[57]++,t}render(){hn().f[13]++;const{t:e,mapStyle:t}=(hn().s[58]++,this.props),r=(hn().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(hn().s[60]++,Object.keys(t.sources).map(l=>{hn().f[14]++;const o=(hn().s[61]++,t.sources[l]);return hn().s[62]++,oe.jsx(uce,{sourceId:l,source:o,onChange:f=>(hn().f[15]++,hn().s[63]++,this.props.onStyleChanged(KG(t,l,f))),onDelete:()=>(hn().f[16]++,hn().s[64]++,this.props.onStyleChanged(nce(t,l))),...r},l)})),s=(hn().s[65]++,Object.keys(sK).filter(l=>(hn().f[17]++,hn().s[66]++,!(l in t.sources))).map(l=>{hn().f[18]++;const o=(hn().s[67]++,sK[l]);return hn().s[68]++,oe.jsx(lce,{id:l,type:o.type,title:o.title,onSelect:()=>(hn().f[19]++,hn().s[69]++,this.props.onStyleChanged(oK(t,l,this.stripTitle(o))))},l)}));return hn().s[70]++,oe.jsxs(Z0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Active Sources")}),i]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Choose Public Source")}),oe.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),oe.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Add New Source")}),oe.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),oe.jsx(cce,{onAdd:(l,o)=>(hn().f[20]++,hn().s[71]++,this.props.onStyleChanged(oK(t,l,o))),...r})]})]})}}const dce=(hn().s[72]++,Us()(hce));var Zb={},aK;function fce(){if(aK)return Zb;aK=1,Object.defineProperty(Zb,"__esModule",{value:!0});var n=Object.assign||function(U){for(var N=1;N<arguments.length;N++){var W=arguments[N];for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&(U[X]=W[X])}return U},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},t=function(){function U(N,W){for(var X=0;X<W.length;X++){var $=W[X];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}return function(N,W,X){return W&&U(N.prototype,W),X&&U(N,X),N}}(),r=tl(),i=f(r),s=Ax(),l=o(s);function o(U){return U&&U.__esModule?U:{default:U}}function f(U){if(U&&U.__esModule)return U;var N={};if(U!=null)for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(N[W]=U[W]);return N.default=U,N}function C(U,N){var W={};for(var X in U)N.indexOf(X)>=0||Object.prototype.hasOwnProperty.call(U,X)&&(W[X]=U[X]);return W}function x(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function B(U,N){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:U}function R(U,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);U.prototype=Object.create(N&&N.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(U,N):U.__proto__=N)}var P=function(U){R(N,U);function N(W){x(this,N);var X=B(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,W));X.handleChange=function(re){var te=Array.prototype.slice.call(re.target.files),V=(X.props.as||"url").toLowerCase();Promise.all(te.map(function(ne){return new Promise(function(G,le){var fe=new FileReader;switch(fe.onload=function(pe){G([pe,ne])},V){case"binary":{fe.readAsBinaryString(ne);break}case"buffer":{fe.readAsArrayBuffer(ne);break}case"text":{fe.readAsText(ne);break}case"url":{fe.readAsDataURL(ne);break}}})})).then(function(ne){X.props.onChange(re,ne)})},X.triggerInput=function(){var re=l.default.findDOMNode(X._reactFileReaderInput);re&&re.click()};var $=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!$.File||!$.FileReader||!$.FileList||!$.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),X}return t(N,[{key:"render",value:function(){var X=this,$=this.props;$.as;var re=$.children,te=$.style,V=C($,["as","children","style"]),ne=re?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:te},i.createElement("input",n({},V,{type:"file",ref:function(le){X._reactFileReaderInput=le},onChange:this.handleChange,onClick:function(){X._reactFileReaderInput.value=null},style:ne})),re)}}]),N}(i.Component);return Zb.default=P,Zb}var pce=fce();const mce=Gl(pce);function ud(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ud=function(){return l},l}ud();class gce extends ur.Component{underlayOnClick(e){ud().f[0]++,ud().s[0]++,e.stopPropagation()}render(){ud().f[1]++;const e=(ud().s[1]++,this.props.t);return ud().s[2]++,oe.jsxs(Z0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(ud().f[2]++,ud().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(ud().f[3]++,ud().s[4]++,this.props.onCancel()),children:[oe.jsx("p",{children:this.props.message}),oe.jsx("p",{className:"maputnik-dialog__buttons",children:oe.jsx(el,{onClick:t=>(ud().f[4]++,ud().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const yce=(ud().s[6]++,Us()(gce)),FG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function lr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return lr=function(){return l},l}lr();class vce extends ur.Component{render(){return lr().f[0]++,lr().s[0]++,oe.jsx("div",{className:"maputnik-public-style",children:oe.jsxs(el,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(lr().f[1]++,lr().s[1]++,this.props.onSelect(this.props.url)),children:[oe.jsxs("div",{className:"maputnik-public-style-header",children:[oe.jsx("div",{children:this.props.title}),oe.jsx("span",{className:"maputnik-space"}),oe.jsx(PL,{})]}),oe.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class Cce extends ur.Component{constructor(e){lr().f[2]++,lr().s[2]++,super(e),lr().s[3]++,this.state={styleUrl:""}}clearError(){lr().f[3]++,lr().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){lr().f[4]++,lr().s[5]++,e?(lr().b[0][0]++,lr().s[6]++,e.stopPropagation()):lr().b[0][1]++,lr().s[7]++,this.state.activeRequest?(lr().b[1][0]++,lr().s[8]++,this.state.activeRequest.abort(),lr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):lr().b[1][1]++}onStyleSelect=(lr().s[10]++,e=>{lr().f[5]++,lr().s[11]++,this.clearError();let t=(lr().s[12]++,!1);lr().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(r){return lr().f[6]++,lr().s[14]++,r.json()}).then(r=>{if(lr().f[7]++,lr().s[15]++,t){lr().b[2][0]++,lr().s[16]++;return}else lr().b[2][1]++;lr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const i=(lr().s[18]++,Ac.ensureStyleValidity(r));lr().s[19]++,console.log("Loaded style ",i.id),lr().s[20]++,this.props.onStyleOpen(i),lr().s[21]++,this.onOpenToggle()}).catch(r=>{lr().f[8]++,lr().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),lr().s[23]++,console.error(r),lr().s[24]++,console.warn("Could not open the style URL",e)}),lr().s[25]++,this.setState({activeRequest:{abort:function(){lr().f[9]++,lr().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(lr().s[27]++,e=>{lr().f[10]++,lr().s[28]++,e.preventDefault(),lr().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(lr().s[30]++,async()=>{lr().f[11]++,lr().s[31]++,this.clearError();const e=(lr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(lr().s[33]++,await window.showOpenFilePicker(e)),r=(lr().s[34]++,await t.getFile()),i=(lr().s[35]++,await r.text());let s;lr().s[36]++;try{lr().s[37]++,s=JSON.parse(i)}catch(l){lr().s[38]++,this.setState({error:l.toString()}),lr().s[39]++;return}return lr().s[40]++,s=Ac.ensureStyleValidity(s),lr().s[41]++,this.props.onStyleOpen(s,t),lr().s[42]++,this.onOpenToggle(),lr().s[43]++,r});onFileChanged=(lr().s[44]++,async(e,t)=>{lr().f[12]++;const[,r]=(lr().s[45]++,t[0]),i=(lr().s[46]++,new FileReader);lr().s[47]++,this.clearError(),lr().s[48]++,i.readAsText(r,"UTF-8"),lr().s[49]++,i.onload=s=>{lr().f[13]++;let l;lr().s[50]++;try{lr().s[51]++,l=JSON.parse(s.target?.result)}catch(o){lr().s[52]++,this.setState({error:o.toString()}),lr().s[53]++;return}lr().s[54]++,l=Ac.ensureStyleValidity(l),lr().s[55]++,this.props.onStyleOpen(l),lr().s[56]++,this.onOpenToggle()},lr().s[57]++,i.onerror=s=>(lr().f[14]++,lr().s[58]++,console.log(s.target))});onOpenToggle(){lr().f[15]++,lr().s[59]++,this.setState({styleUrl:""}),lr().s[60]++,this.clearError(),lr().s[61]++,this.props.onOpenToggle()}onChangeUrl=(lr().s[62]++,e=>{lr().f[16]++,lr().s[63]++,this.setState({styleUrl:e})});render(){lr().f[17]++;const e=(lr().s[64]++,this.props.t),t=(lr().s[65]++,FG.map(i=>(lr().f[18]++,lr().s[66]++,oe.jsx(vce,{url:i.url,title:i.title,thumbnailUrl:i.thumbnail,onSelect:this.onStyleSelect},i.id))));let r;return lr().s[67]++,this.state.error?(lr().b[3][0]++,lr().s[68]++,r=oe.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,oe.jsx("a",{href:"#",onClick:()=>(lr().f[19]++,lr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:"×"})]})):lr().b[3][1]++,lr().s[70]++,oe.jsxs("div",{children:[oe.jsxs(Z0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(lr().f[20]++,lr().s[71]++,this.onOpenToggle()),title:e("Open Style"),children:[r,oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:e("Open local Style")}),oe.jsx("p",{children:e("Open a local JSON style from your computer.")}),oe.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(lr().b[4][0]++,oe.jsxs(el,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[oe.jsx(m7,{})," ",e("Open Style")]})):(lr().b[4][1]++,oe.jsx(mce,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":e("Open Style"),children:oe.jsxs(el,{className:"maputnik-upload-button",children:[oe.jsx(m7,{})," ",e("Open Style")]})}))})]}),oe.jsx("section",{className:"maputnik-modal-section",children:oe.jsxs("form",{onSubmit:this.onSubmitUrl,children:[oe.jsx("h1",{children:e("Load from URL")}),oe.jsx("p",{children:oe.jsxs(U0,{t:e,children:["Load from a URL. Note that the URL must have ",oe.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),oe.jsx(DI,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),oe.jsx("div",{children:oe.jsx(el,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[oe.jsx("h1",{children:e("Gallery Styles")}),oe.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),oe.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),oe.jsx(yce,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:i=>(lr().f[21]++,lr().s[72]++,this.onCancelActiveRequest(i)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const _ce=(lr().s[73]++,Us()(Cce));function Df(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Df=function(){return l},l}Df();class bce extends ur.Component{render(){Df().f[0]++;const e=(Df().s[0]++,this.props.t),t=(Df().s[1]++,[{key:oe.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:oe.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:oe.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:oe.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:oe.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:oe.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:oe.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:oe.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(Df().s[2]++,[{key:oe.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:oe.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:oe.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:oe.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:oe.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:oe.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:oe.jsxs(oe.Fragment,{children:[oe.jsx("kbd",{children:"Shift"})," + ",oe.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return Df().s[3]++,oe.jsx(Z0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[oe.jsx("p",{children:oe.jsxs(U0,{t:e,children:["Press ",oe.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),oe.jsx("dl",{children:t.map((i,s)=>(Df().f[1]++,Df().s[4]++,oe.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[oe.jsx("dt",{children:i.key},"dt"+s),oe.jsx("dd",{children:i.text},"dd"+s)]},s)))}),oe.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),oe.jsx("ul",{children:r.map((i,s)=>(Df().f[2]++,Df().s[5]++,oe.jsxs("li",{children:[oe.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const xce=(Df().s[6]++,Us()(bce));function pu(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return pu=function(){return l},l}pu();class Mce extends ur.Component{render(){pu().f[0]++;const{t:e,mapView:t}=(pu().s[0]++,this.props),r=(pu().s[1]++,Math.round(t.zoom)+1),i=(pu().s[2]++,+t.center.lng.toFixed(5)),s=(pu().s[3]++,+t.center.lat.toFixed(5));return pu().s[4]++,oe.jsxs(Z0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[oe.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[oe.jsx("h1",{children:e("Options")}),(pu().b[0][0]++,this.props.renderer==="mlgljs"&&(pu().b[0][1]++,oe.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(pu().f[1]++,pu().s[5]++,oe.jsx("li",{children:oe.jsxs("label",{children:[oe.jsx("input",{type:"checkbox",checked:o,onChange:f=>(pu().f[2]++,pu().s[6]++,this.props.onChangeMaplibreGlDebug(l,f.target.checked))})," ",l]})},l)))}))),(pu().b[1][0]++,this.props.renderer==="ol"&&(pu().b[1][1]++,oe.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(pu().f[3]++,pu().s[7]++,oe.jsx("li",{children:oe.jsxs("label",{children:[oe.jsx("input",{type:"checkbox",checked:o,onChange:f=>(pu().f[4]++,pu().s[8]++,this.props.onChangeOpenlayersDebug(l,f.target.checked))})," ",l]})},l)))})))]}),oe.jsxs("section",{className:"maputnik-modal-section",children:[oe.jsx("h1",{children:"Links"}),oe.jsx("p",{children:oe.jsxs(U0,{t:e,children:[oe.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"})," — Opens the current view on openstreetmap.org"]})})]})]})}}const wce=(pu().s[9]++,Us()(Mce));var b1={},nC={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Sce=nC.exports,lK;function Ece(){return lK||(lK=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=n&&!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var l,o=2147483647,f=36,C=1,x=26,B=38,R=700,P=72,U=128,N="-",W=/^xn--/,X=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,re={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=f-C,V=Math.floor,ne=String.fromCharCode,G;function le(Ge){throw new RangeError(re[Ge])}function fe(Ge,Ie){for(var $e=Ge.length,gt=[];$e--;)gt[$e]=Ie(Ge[$e]);return gt}function pe(Ge,Ie){var $e=Ge.split("@"),gt="";$e.length>1&&(gt=$e[0]+"@",Ge=$e[1]),Ge=Ge.replace($,".");var Dt=Ge.split("."),ut=fe(Dt,Ie).join(".");return gt+ut}function we(Ge){for(var Ie=[],$e=0,gt=Ge.length,Dt,ut;$e<gt;)Dt=Ge.charCodeAt($e++),Dt>=55296&&Dt<=56319&&$e<gt?(ut=Ge.charCodeAt($e++),(ut&64512)==56320?Ie.push(((Dt&1023)<<10)+(ut&1023)+65536):(Ie.push(Dt),$e--)):Ie.push(Dt);return Ie}function Se(Ge){return fe(Ge,function(Ie){var $e="";return Ie>65535&&(Ie-=65536,$e+=ne(Ie>>>10&1023|55296),Ie=56320|Ie&1023),$e+=ne(Ie),$e}).join("")}function xe(Ge){return Ge-48<10?Ge-22:Ge-65<26?Ge-65:Ge-97<26?Ge-97:f}function je(Ge,Ie){return Ge+22+75*(Ge<26)-((Ie!=0)<<5)}function Me(Ge,Ie,$e){var gt=0;for(Ge=$e?V(Ge/R):Ge>>1,Ge+=V(Ge/Ie);Ge>te*x>>1;gt+=f)Ge=V(Ge/te);return V(gt+(te+1)*Ge/(Ge+B))}function rt(Ge){var Ie=[],$e=Ge.length,gt,Dt=0,ut=U,Rt=P,St,Ke,Pe,Re,Ye,vt,yt,Et,Zt;for(St=Ge.lastIndexOf(N),St<0&&(St=0),Ke=0;Ke<St;++Ke)Ge.charCodeAt(Ke)>=128&&le("not-basic"),Ie.push(Ge.charCodeAt(Ke));for(Pe=St>0?St+1:0;Pe<$e;){for(Re=Dt,Ye=1,vt=f;Pe>=$e&&le("invalid-input"),yt=xe(Ge.charCodeAt(Pe++)),(yt>=f||yt>V((o-Dt)/Ye))&&le("overflow"),Dt+=yt*Ye,Et=vt<=Rt?C:vt>=Rt+x?x:vt-Rt,!(yt<Et);vt+=f)Zt=f-Et,Ye>V(o/Zt)&&le("overflow"),Ye*=Zt;gt=Ie.length+1,Rt=Me(Dt-Re,gt,Re==0),V(Dt/gt)>o-ut&&le("overflow"),ut+=V(Dt/gt),Dt%=gt,Ie.splice(Dt++,0,ut)}return Se(Ie)}function Ct(Ge){var Ie,$e,gt,Dt,ut,Rt,St,Ke,Pe,Re,Ye,vt=[],yt,Et,Zt,Ut;for(Ge=we(Ge),yt=Ge.length,Ie=U,$e=0,ut=P,Rt=0;Rt<yt;++Rt)Ye=Ge[Rt],Ye<128&&vt.push(ne(Ye));for(gt=Dt=vt.length,Dt&&vt.push(N);gt<yt;){for(St=o,Rt=0;Rt<yt;++Rt)Ye=Ge[Rt],Ye>=Ie&&Ye<St&&(St=Ye);for(Et=gt+1,St-Ie>V((o-$e)/Et)&&le("overflow"),$e+=(St-Ie)*Et,Ie=St,Rt=0;Rt<yt;++Rt)if(Ye=Ge[Rt],Ye<Ie&&++$e>o&&le("overflow"),Ye==Ie){for(Ke=$e,Pe=f;Re=Pe<=ut?C:Pe>=ut+x?x:Pe-ut,!(Ke<Re);Pe+=f)Ut=Ke-Re,Zt=f-Re,vt.push(ne(je(Re+Ut%Zt,0))),Ke=V(Ut/Zt);vt.push(ne(je(Ke,0))),ut=Me($e,Et,gt==Dt),$e=0,++gt}++$e,++Ie}return vt.join("")}function it(Ge){return pe(Ge,function(Ie){return W.test(Ie)?rt(Ie.slice(4).toLowerCase()):Ie})}function nt(Ge){return pe(Ge,function(Ie){return X.test(Ie)?"xn--"+Ct(Ie):Ie})}if(l={version:"1.4.1",ucs2:{decode:we,encode:Se},decode:rt,encode:Ct,toASCII:nt,toUnicode:it},r&&i)if(n.exports==r)i.exports=l;else for(G in l)l.hasOwnProperty(G)&&(r[G]=l[G]);else t.punycode=l})(Sce)}(nC,nC.exports)),nC.exports}var sE,AK;function ev(){return AK||(AK=1,sE=TypeError),sE}const Bce={},Oce=Object.freeze(Object.defineProperty({__proto__:null,default:Bce},Symbol.toStringTag,{value:"Module"})),Ice=fB(Oce);var aE,uK;function I3(){if(uK)return aE;uK=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,f=typeof WeakMap=="function"&&WeakMap.prototype,C=f?WeakMap.prototype.has:null,x=typeof WeakSet=="function"&&WeakSet.prototype,B=x?WeakSet.prototype.has:null,R=typeof WeakRef=="function"&&WeakRef.prototype,P=R?WeakRef.prototype.deref:null,U=Boolean.prototype.valueOf,N=Object.prototype.toString,W=Function.prototype.toString,X=String.prototype.match,$=String.prototype.slice,re=String.prototype.replace,te=String.prototype.toUpperCase,V=String.prototype.toLowerCase,ne=RegExp.prototype.test,G=Array.prototype.concat,le=Array.prototype.join,fe=Array.prototype.slice,pe=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Se=Object.getOwnPropertySymbols,xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,je=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Me=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===je||!0)?Symbol.toStringTag:null,rt=Object.prototype.propertyIsEnumerable,Ct=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Xe){return Xe.__proto__}:null);function it(Xe,ae){if(Xe===1/0||Xe===-1/0||Xe!==Xe||Xe&&Xe>-1e3&&Xe<1e3||ne.call(/e/,ae))return ae;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Xe=="number"){var p=Xe<0?-pe(-Xe):pe(Xe);if(p!==Xe){var Ne=String(p),Ve=$.call(ae,Ne.length+1);return re.call(Ne,ve,"$&_")+"."+re.call(re.call(Ve,/([0-9]{3})/g,"$&_"),/_$/,"")}}return re.call(ae,ve,"$&_")}var nt=Ice,Ge=nt.custom,Ie=yt(Ge)?Ge:null,$e={__proto__:null,double:'"',single:"'"},gt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};aE=function Xe(ae,ve,p,Ne){var Ve=ve||{};if(Ut(Ve,"quoteStyle")&&!Ut($e,Ve.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ut(Ve,"maxStringLength")&&(typeof Ve.maxStringLength=="number"?Ve.maxStringLength<0&&Ve.maxStringLength!==1/0:Ve.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Te=Ut(Ve,"customInspect")?Ve.customInspect:!0;if(typeof Te!="boolean"&&Te!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ut(Ve,"indent")&&Ve.indent!==null&&Ve.indent!=="	"&&!(parseInt(Ve.indent,10)===Ve.indent&&Ve.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ut(Ve,"numericSeparator")&&typeof Ve.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var lt=Ve.numericSeparator;if(typeof ae>"u")return"undefined";if(ae===null)return"null";if(typeof ae=="boolean")return ae?"true":"false";if(typeof ae=="string")return Yn(ae,Ve);if(typeof ae=="number"){if(ae===0)return 1/0/ae>0?"0":"-0";var ct=String(ae);return lt?it(ae,ct):ct}if(typeof ae=="bigint"){var Ft=String(ae)+"n";return lt?it(ae,Ft):Ft}var jt=typeof Ve.depth>"u"?5:Ve.depth;if(typeof p>"u"&&(p=0),p>=jt&&jt>0&&typeof ae=="object")return Rt(ae)?"[Array]":"[Object]";var Gt=Yt(Ve,p);if(typeof Ne>"u")Ne=[];else if(Vt(Ne,ae)>=0)return"[Circular]";function nn(qr,_s,La){if(_s&&(Ne=fe.call(Ne),Ne.push(_s)),La){var da={depth:Ve.depth};return Ut(Ve,"quoteStyle")&&(da.quoteStyle=Ve.quoteStyle),Xe(qr,da,p+1,Ne)}return Xe(qr,Ve,p+1,Ne)}if(typeof ae=="function"&&!Ke(ae)){var On=hr(ae),Rn=ir(ae,nn);return"[Function"+(On?": "+On:" (anonymous)")+"]"+(Rn.length>0?" { "+le.call(Rn,", ")+" }":"")}if(yt(ae)){var dr=je?re.call(String(ae),/^(Symbol\(.*\))_[^)]*$/,"$1"):xe.call(ae);return typeof ae=="object"&&!je?he(dr):dr}if(rr(ae)){for(var Tr="<"+V.call(String(ae.nodeName)),or=ae.attributes||[],on=0;on<or.length;on++)Tr+=" "+or[on].name+"="+Dt(ut(or[on].value),"double",Ve);return Tr+=">",ae.childNodes&&ae.childNodes.length&&(Tr+="..."),Tr+="</"+V.call(String(ae.nodeName))+">",Tr}if(Rt(ae)){if(ae.length===0)return"[]";var ti=ir(ae,nn);return Gt&&!bt(ti)?"["+Jt(ti,Gt)+"]":"[ "+le.call(ti,", ")+" ]"}if(Pe(ae)){var li=ir(ae,nn);return!("cause"in Error.prototype)&&"cause"in ae&&!rt.call(ae,"cause")?"{ ["+String(ae)+"] "+le.call(G.call("[cause]: "+nn(ae.cause),li),", ")+" }":li.length===0?"["+String(ae)+"]":"{ ["+String(ae)+"] "+le.call(li,", ")+" }"}if(typeof ae=="object"&&Te){if(Ie&&typeof ae[Ie]=="function"&&nt)return nt(ae,{depth:jt-p});if(Te!=="symbol"&&typeof ae.inspect=="function")return ae.inspect()}if(Vn(ae)){var jr=[];return r&&r.call(ae,function(qr,_s){jr.push(nn(_s,ae,!0)+" => "+nn(qr,ae))}),et("Map",t.call(ae),jr,Gt)}if(Ln(ae)){var Fr=[];return o&&o.call(ae,function(qr){Fr.push(nn(qr,ae))}),et("Set",l.call(ae),Fr,Gt)}if(Pn(ae))return me("WeakMap");if(Ir(ae))return me("WeakSet");if(Dn(ae))return me("WeakRef");if(Ye(ae))return he(nn(Number(ae)));if(Et(ae))return he(nn(we.call(ae)));if(vt(ae))return he(U.call(ae));if(Re(ae))return he(nn(String(ae)));if(typeof window<"u"&&ae===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ae===globalThis||typeof window<"u"&&ae===window)return"{ [object globalThis] }";if(!St(ae)&&!Ke(ae)){var wn=ir(ae,nn),Dr=Ct?Ct(ae)===Object.prototype:ae instanceof Object||ae.constructor===Object,ui=ae instanceof Object?"":"null prototype",Pi=!Dr&&Me&&Object(ae)===ae&&Me in ae?$.call(An(ae),8,-1):ui?"Object":"",yi=Dr||typeof ae.constructor!="function"?"":ae.constructor.name?ae.constructor.name+" ":"",As=yi+(Pi||ui?"["+le.call(G.call([],Pi||[],ui||[]),": ")+"] ":"");return wn.length===0?As+"{}":Gt?As+"{"+Jt(wn,Gt)+"}":As+"{ "+le.call(wn,", ")+" }"}return String(ae)};function Dt(Xe,ae,ve){var p=ve.quoteStyle||ae,Ne=$e[p];return Ne+Xe+Ne}function ut(Xe){return re.call(String(Xe),/"/g,"&quot;")}function Rt(Xe){return An(Xe)==="[object Array]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function St(Xe){return An(Xe)==="[object Date]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function Ke(Xe){return An(Xe)==="[object RegExp]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function Pe(Xe){return An(Xe)==="[object Error]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function Re(Xe){return An(Xe)==="[object String]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function Ye(Xe){return An(Xe)==="[object Number]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function vt(Xe){return An(Xe)==="[object Boolean]"&&(!Me||!(typeof Xe=="object"&&Me in Xe))}function yt(Xe){if(je)return Xe&&typeof Xe=="object"&&Xe instanceof Symbol;if(typeof Xe=="symbol")return!0;if(!Xe||typeof Xe!="object"||!xe)return!1;try{return xe.call(Xe),!0}catch{}return!1}function Et(Xe){if(!Xe||typeof Xe!="object"||!we)return!1;try{return we.call(Xe),!0}catch{}return!1}var Zt=Object.prototype.hasOwnProperty||function(Xe){return Xe in this};function Ut(Xe,ae){return Zt.call(Xe,ae)}function An(Xe){return N.call(Xe)}function hr(Xe){if(Xe.name)return Xe.name;var ae=X.call(W.call(Xe),/^function\s*([\w$]+)/);return ae?ae[1]:null}function Vt(Xe,ae){if(Xe.indexOf)return Xe.indexOf(ae);for(var ve=0,p=Xe.length;ve<p;ve++)if(Xe[ve]===ae)return ve;return-1}function Vn(Xe){if(!t||!Xe||typeof Xe!="object")return!1;try{t.call(Xe);try{l.call(Xe)}catch{return!0}return Xe instanceof Map}catch{}return!1}function Pn(Xe){if(!C||!Xe||typeof Xe!="object")return!1;try{C.call(Xe,C);try{B.call(Xe,B)}catch{return!0}return Xe instanceof WeakMap}catch{}return!1}function Dn(Xe){if(!P||!Xe||typeof Xe!="object")return!1;try{return P.call(Xe),!0}catch{}return!1}function Ln(Xe){if(!l||!Xe||typeof Xe!="object")return!1;try{l.call(Xe);try{t.call(Xe)}catch{return!0}return Xe instanceof Set}catch{}return!1}function Ir(Xe){if(!B||!Xe||typeof Xe!="object")return!1;try{B.call(Xe,B);try{C.call(Xe,C)}catch{return!0}return Xe instanceof WeakSet}catch{}return!1}function rr(Xe){return!Xe||typeof Xe!="object"?!1:typeof HTMLElement<"u"&&Xe instanceof HTMLElement?!0:typeof Xe.nodeName=="string"&&typeof Xe.getAttribute=="function"}function Yn(Xe,ae){if(Xe.length>ae.maxStringLength){var ve=Xe.length-ae.maxStringLength,p="... "+ve+" more character"+(ve>1?"s":"");return Yn($.call(Xe,0,ae.maxStringLength),ae)+p}var Ne=gt[ae.quoteStyle||"single"];Ne.lastIndex=0;var Ve=re.call(re.call(Xe,Ne,"\\$1"),/[\x00-\x1f]/g,We);return Dt(Ve,"single",ae)}function We(Xe){var ae=Xe.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[ae];return ve?"\\"+ve:"\\x"+(ae<16?"0":"")+te.call(ae.toString(16))}function he(Xe){return"Object("+Xe+")"}function me(Xe){return Xe+" { ? }"}function et(Xe,ae,ve,p){var Ne=p?Jt(ve,p):le.call(ve,", ");return Xe+" ("+ae+") {"+Ne+"}"}function bt(Xe){for(var ae=0;ae<Xe.length;ae++)if(Vt(Xe[ae],`
`)>=0)return!1;return!0}function Yt(Xe,ae){var ve;if(Xe.indent==="	")ve="	";else if(typeof Xe.indent=="number"&&Xe.indent>0)ve=le.call(Array(Xe.indent+1)," ");else return null;return{base:ve,prev:le.call(Array(ae+1),ve)}}function Jt(Xe,ae){if(Xe.length===0)return"";var ve=`
`+ae.prev+ae.base;return ve+le.call(Xe,","+ve)+`
`+ae.prev}function ir(Xe,ae){var ve=Rt(Xe),p=[];if(ve){p.length=Xe.length;for(var Ne=0;Ne<Xe.length;Ne++)p[Ne]=Ut(Xe,Ne)?ae(Xe[Ne],Xe):""}var Ve=typeof Se=="function"?Se(Xe):[],Te;if(je){Te={};for(var lt=0;lt<Ve.length;lt++)Te["$"+Ve[lt]]=Ve[lt]}for(var ct in Xe)Ut(Xe,ct)&&(ve&&String(Number(ct))===ct&&ct<Xe.length||je&&Te["$"+ct]instanceof Symbol||(ne.call(/[^\w$]/,ct)?p.push(ae(ct,Xe)+": "+ae(Xe[ct],Xe)):p.push(ct+": "+ae(Xe[ct],Xe))));if(typeof Se=="function")for(var Ft=0;Ft<Ve.length;Ft++)rt.call(Xe,Ve[Ft])&&p.push("["+ae(Ve[Ft])+"]: "+ae(Xe[Ve[Ft]],Xe));return p}return aE}var lE,cK;function Tce(){if(cK)return lE;cK=1;var n=I3(),e=ev(),t=function(o,f,C){for(var x=o,B;(B=x.next)!=null;x=B)if(B.key===f)return x.next=B.next,C||(B.next=o.next,o.next=B),B},r=function(o,f){if(o){var C=t(o,f);return C&&C.value}},i=function(o,f,C){var x=t(o,f);x?x.value=C:o.next={key:f,next:o.next,value:C}},s=function(o,f){return o?!!t(o,f):!1},l=function(o,f){if(o)return t(o,f,!0)};return lE=function(){var f,C={assert:function(x){if(!C.has(x))throw new e("Side channel does not contain "+n(x))},delete:function(x){var B=f&&f.next,R=l(f,x);return R&&B&&B===R&&(f=void 0),!!R},get:function(x){return r(f,x)},has:function(x){return s(f,x)},set:function(x,B){f||(f={next:void 0}),i(f,x,B)}};return C},lE}var AE,hK;function LG(){return hK||(hK=1,AE=Object),AE}var uE,dK;function kce(){return dK||(dK=1,uE=Error),uE}var cE,fK;function Pce(){return fK||(fK=1,cE=EvalError),cE}var hE,pK;function Rce(){return pK||(pK=1,hE=RangeError),hE}var dE,mK;function Dce(){return mK||(mK=1,dE=ReferenceError),dE}var fE,gK;function Kce(){return gK||(gK=1,fE=SyntaxError),fE}var pE,yK;function Fce(){return yK||(yK=1,pE=URIError),pE}var mE,vK;function Lce(){return vK||(vK=1,mE=Math.abs),mE}var gE,CK;function Uce(){return CK||(CK=1,gE=Math.floor),gE}var yE,_K;function zce(){return _K||(_K=1,yE=Math.max),yE}var vE,bK;function Nce(){return bK||(bK=1,vE=Math.min),vE}var CE,xK;function Gce(){return xK||(xK=1,CE=Math.pow),CE}var _E,MK;function jce(){return MK||(MK=1,_E=Math.round),_E}var bE,wK;function Wce(){return wK||(wK=1,bE=Number.isNaN||function(e){return e!==e}),bE}var xE,SK;function Qce(){if(SK)return xE;SK=1;var n=Wce();return xE=function(t){return n(t)||t===0?t:t<0?-1:1},xE}var ME,EK;function Yce(){return EK||(EK=1,ME=Object.getOwnPropertyDescriptor),ME}var wE,BK;function UG(){if(BK)return wE;BK=1;var n=Yce();if(n)try{n([],"length")}catch{n=null}return wE=n,wE}var SE,OK;function qce(){if(OK)return SE;OK=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return SE=n,SE}var EE,IK;function $ce(){return IK||(IK=1,EE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),EE}var BE,TK;function Vce(){if(TK)return BE;TK=1;var n=typeof Symbol<"u"&&Symbol,e=$ce();return BE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},BE}var OE,kK;function zG(){return kK||(kK=1,OE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),OE}var IE,PK;function NG(){if(PK)return IE;PK=1;var n=LG();return IE=n.getPrototypeOf||null,IE}var TE,RK;function Hce(){if(RK)return TE;RK=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(f,C){for(var x=[],B=0;B<f.length;B+=1)x[B]=f[B];for(var R=0;R<C.length;R+=1)x[R+f.length]=C[R];return x},s=function(f,C){for(var x=[],B=C,R=0;B<f.length;B+=1,R+=1)x[R]=f[B];return x},l=function(o,f){for(var C="",x=0;x<o.length;x+=1)C+=o[x],x+1<o.length&&(C+=f);return C};return TE=function(f){var C=this;if(typeof C!="function"||e.apply(C)!==r)throw new TypeError(n+C);for(var x=s(arguments,1),B,R=function(){if(this instanceof B){var X=C.apply(this,i(x,arguments));return Object(X)===X?X:this}return C.apply(f,i(x,arguments))},P=t(0,C.length-x.length),U=[],N=0;N<P;N++)U[N]="$"+N;if(B=Function("binder","return function ("+l(U,",")+"){ return binder.apply(this,arguments); }")(R),C.prototype){var W=function(){};W.prototype=C.prototype,B.prototype=new W,W.prototype=null}return B},TE}var kE,DK;function T3(){if(DK)return kE;DK=1;var n=Hce();return kE=Function.prototype.bind||n,kE}var PE,KK;function LI(){return KK||(KK=1,PE=Function.prototype.call),PE}var RE,FK;function GG(){return FK||(FK=1,RE=Function.prototype.apply),RE}var DE,LK;function Zce(){return LK||(LK=1,DE=typeof Reflect<"u"&&Reflect&&Reflect.apply),DE}var KE,UK;function Xce(){if(UK)return KE;UK=1;var n=T3(),e=GG(),t=LI(),r=Zce();return KE=r||n.call(t,e),KE}var FE,zK;function jG(){if(zK)return FE;zK=1;var n=T3(),e=ev(),t=LI(),r=Xce();return FE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},FE}var LE,NK;function Jce(){if(NK)return LE;NK=1;var n=jG(),e=UG(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return LE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,LE}var UE,GK;function ehe(){if(GK)return UE;GK=1;var n=zG(),e=NG(),t=Jce();return UE=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,UE}var zE,jK;function the(){if(jK)return zE;jK=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=T3();return zE=t.call(n,e),zE}var NE,WK;function UI(){if(WK)return NE;WK=1;var n,e=LG(),t=kce(),r=Pce(),i=Rce(),s=Dce(),l=Kce(),o=ev(),f=Fce(),C=Lce(),x=Uce(),B=zce(),R=Nce(),P=Gce(),U=jce(),N=Qce(),W=Function,X=function(Pe){try{return W('"use strict"; return ('+Pe+").constructor;")()}catch{}},$=UG(),re=qce(),te=function(){throw new o},V=$?function(){try{return arguments.callee,te}catch{try{return $(arguments,"callee").get}catch{return te}}}():te,ne=Vce()(),G=ehe(),le=NG(),fe=zG(),pe=GG(),we=LI(),Se={},xe=typeof Uint8Array>"u"||!G?n:G(Uint8Array),je={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":ne&&G?G([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":Se,"%AsyncGenerator%":Se,"%AsyncGeneratorFunction%":Se,"%AsyncIteratorPrototype%":Se,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":W,"%GeneratorFunction%":Se,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ne&&G?G(G([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ne||!G?n:G(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":$,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ne||!G?n:G(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ne&&G?G(""[Symbol.iterator]()):n,"%Symbol%":ne?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":V,"%TypedArray%":xe,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":f,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":we,"%Function.prototype.apply%":pe,"%Object.defineProperty%":re,"%Object.getPrototypeOf%":le,"%Math.abs%":C,"%Math.floor%":x,"%Math.max%":B,"%Math.min%":R,"%Math.pow%":P,"%Math.round%":U,"%Math.sign%":N,"%Reflect.getPrototypeOf%":fe};if(G)try{null.error}catch(Pe){var Me=G(G(Pe));je["%Error.prototype%"]=Me}var rt=function Pe(Re){var Ye;if(Re==="%AsyncFunction%")Ye=X("async function () {}");else if(Re==="%GeneratorFunction%")Ye=X("function* () {}");else if(Re==="%AsyncGeneratorFunction%")Ye=X("async function* () {}");else if(Re==="%AsyncGenerator%"){var vt=Pe("%AsyncGeneratorFunction%");vt&&(Ye=vt.prototype)}else if(Re==="%AsyncIteratorPrototype%"){var yt=Pe("%AsyncGenerator%");yt&&G&&(Ye=G(yt.prototype))}return je[Re]=Ye,Ye},Ct={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},it=T3(),nt=the(),Ge=it.call(we,Array.prototype.concat),Ie=it.call(pe,Array.prototype.splice),$e=it.call(we,String.prototype.replace),gt=it.call(we,String.prototype.slice),Dt=it.call(we,RegExp.prototype.exec),ut=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rt=/\\(\\)?/g,St=function(Re){var Ye=gt(Re,0,1),vt=gt(Re,-1);if(Ye==="%"&&vt!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(vt==="%"&&Ye!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var yt=[];return $e(Re,ut,function(Et,Zt,Ut,An){yt[yt.length]=Ut?$e(An,Rt,"$1"):Zt||Et}),yt},Ke=function(Re,Ye){var vt=Re,yt;if(nt(Ct,vt)&&(yt=Ct[vt],vt="%"+yt[0]+"%"),nt(je,vt)){var Et=je[vt];if(Et===Se&&(Et=rt(vt)),typeof Et>"u"&&!Ye)throw new o("intrinsic "+Re+" exists, but is not available. Please file an issue!");return{alias:yt,name:vt,value:Et}}throw new l("intrinsic "+Re+" does not exist!")};return NE=function(Re,Ye){if(typeof Re!="string"||Re.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ye!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Dt(/^%?[^%]*%?$/,Re)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var vt=St(Re),yt=vt.length>0?vt[0]:"",Et=Ke("%"+yt+"%",Ye),Zt=Et.name,Ut=Et.value,An=!1,hr=Et.alias;hr&&(yt=hr[0],Ie(vt,Ge([0,1],hr)));for(var Vt=1,Vn=!0;Vt<vt.length;Vt+=1){var Pn=vt[Vt],Dn=gt(Pn,0,1),Ln=gt(Pn,-1);if((Dn==='"'||Dn==="'"||Dn==="`"||Ln==='"'||Ln==="'"||Ln==="`")&&Dn!==Ln)throw new l("property names with quotes must have matching quotes");if((Pn==="constructor"||!Vn)&&(An=!0),yt+="."+Pn,Zt="%"+yt+"%",nt(je,Zt))Ut=je[Zt];else if(Ut!=null){if(!(Pn in Ut)){if(!Ye)throw new o("base intrinsic for "+Re+" exists, but the property is not available.");return}if($&&Vt+1>=vt.length){var Ir=$(Ut,Pn);Vn=!!Ir,Vn&&"get"in Ir&&!("originalValue"in Ir.get)?Ut=Ir.get:Ut=Ut[Pn]}else Vn=nt(Ut,Pn),Ut=Ut[Pn];Vn&&!An&&(je[Zt]=Ut)}}return Ut},NE}var GE,QK;function WG(){if(QK)return GE;QK=1;var n=UI(),e=jG(),t=e([n("%String.prototype.indexOf%")]);return GE=function(i,s){var l=n(i,!!s);return typeof l=="function"&&t(i,".prototype.")>-1?e([l]):l},GE}var jE,YK;function QG(){if(YK)return jE;YK=1;var n=UI(),e=WG(),t=I3(),r=ev(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),f=e("Map.prototype.delete",!0),C=e("Map.prototype.size",!0);return jE=!!i&&function(){var B,R={assert:function(P){if(!R.has(P))throw new r("Side channel does not contain "+t(P))},delete:function(P){if(B){var U=f(B,P);return C(B)===0&&(B=void 0),U}return!1},get:function(P){if(B)return s(B,P)},has:function(P){return B?o(B,P):!1},set:function(P,U){B||(B=new i),l(B,P,U)}};return R},jE}var WE,qK;function nhe(){if(qK)return WE;qK=1;var n=UI(),e=WG(),t=I3(),r=QG(),i=ev(),s=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),f=e("WeakMap.prototype.has",!0),C=e("WeakMap.prototype.delete",!0);return WE=s?function(){var B,R,P={assert:function(U){if(!P.has(U))throw new i("Side channel does not contain "+t(U))},delete:function(U){if(s&&U&&(typeof U=="object"||typeof U=="function")){if(B)return C(B,U)}else if(r&&R)return R.delete(U);return!1},get:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?l(B,U):R&&R.get(U)},has:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?f(B,U):!!R&&R.has(U)},set:function(U,N){s&&U&&(typeof U=="object"||typeof U=="function")?(B||(B=new s),o(B,U,N)):r&&(R||(R=r()),R.set(U,N))}};return P}:r,WE}var QE,$K;function rhe(){if($K)return QE;$K=1;var n=ev(),e=I3(),t=Tce(),r=QG(),i=nhe(),s=i||r||t;return QE=function(){var o,f={assert:function(C){if(!f.has(C))throw new n("Side channel does not contain "+e(C))},delete:function(C){return!!o&&o.delete(C)},get:function(C){return o&&o.get(C)},has:function(C){return!!o&&o.has(C)},set:function(C,x){o||(o=s()),o.set(C,x)}};return f},QE}var YE,VK;function zI(){if(VK)return YE;VK=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return YE={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},YE}var qE,HK;function YG(){if(HK)return qE;HK=1;var n=zI(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var W=[],X=0;X<256;++X)W.push("%"+((X<16?"0":"")+X.toString(16)).toUpperCase());return W}(),i=function(X){for(;X.length>1;){var $=X.pop(),re=$.obj[$.prop];if(t(re)){for(var te=[],V=0;V<re.length;++V)typeof re[V]<"u"&&te.push(re[V]);$.obj[$.prop]=te}}},s=function(X,$){for(var re=$&&$.plainObjects?{__proto__:null}:{},te=0;te<X.length;++te)typeof X[te]<"u"&&(re[te]=X[te]);return re},l=function W(X,$,re){if(!$)return X;if(typeof $!="object"&&typeof $!="function"){if(t(X))X.push($);else if(X&&typeof X=="object")(re&&(re.plainObjects||re.allowPrototypes)||!e.call(Object.prototype,$))&&(X[$]=!0);else return[X,$];return X}if(!X||typeof X!="object")return[X].concat($);var te=X;return t(X)&&!t($)&&(te=s(X,re)),t(X)&&t($)?($.forEach(function(V,ne){if(e.call(X,ne)){var G=X[ne];G&&typeof G=="object"&&V&&typeof V=="object"?X[ne]=W(G,V,re):X.push(V)}else X[ne]=V}),X):Object.keys($).reduce(function(V,ne){var G=$[ne];return e.call(V,ne)?V[ne]=W(V[ne],G,re):V[ne]=G,V},te)},o=function(X,$){return Object.keys($).reduce(function(re,te){return re[te]=$[te],re},X)},f=function(W,X,$){var re=W.replace(/\+/g," ");if($==="iso-8859-1")return re.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(re)}catch{return re}},C=1024,x=function(X,$,re,te,V){if(X.length===0)return X;var ne=X;if(typeof X=="symbol"?ne=Symbol.prototype.toString.call(X):typeof X!="string"&&(ne=String(X)),re==="iso-8859-1")return escape(ne).replace(/%u[0-9a-f]{4}/gi,function(xe){return"%26%23"+parseInt(xe.slice(2),16)+"%3B"});for(var G="",le=0;le<ne.length;le+=C){for(var fe=ne.length>=C?ne.slice(le,le+C):ne,pe=[],we=0;we<fe.length;++we){var Se=fe.charCodeAt(we);if(Se===45||Se===46||Se===95||Se===126||Se>=48&&Se<=57||Se>=65&&Se<=90||Se>=97&&Se<=122||V===n.RFC1738&&(Se===40||Se===41)){pe[pe.length]=fe.charAt(we);continue}if(Se<128){pe[pe.length]=r[Se];continue}if(Se<2048){pe[pe.length]=r[192|Se>>6]+r[128|Se&63];continue}if(Se<55296||Se>=57344){pe[pe.length]=r[224|Se>>12]+r[128|Se>>6&63]+r[128|Se&63];continue}we+=1,Se=65536+((Se&1023)<<10|fe.charCodeAt(we)&1023),pe[pe.length]=r[240|Se>>18]+r[128|Se>>12&63]+r[128|Se>>6&63]+r[128|Se&63]}G+=pe.join("")}return G},B=function(X){for(var $=[{obj:{o:X},prop:"o"}],re=[],te=0;te<$.length;++te)for(var V=$[te],ne=V.obj[V.prop],G=Object.keys(ne),le=0;le<G.length;++le){var fe=G[le],pe=ne[fe];typeof pe=="object"&&pe!==null&&re.indexOf(pe)===-1&&($.push({obj:ne,prop:fe}),re.push(pe))}return i($),X},R=function(X){return Object.prototype.toString.call(X)==="[object RegExp]"},P=function(X){return!X||typeof X!="object"?!1:!!(X.constructor&&X.constructor.isBuffer&&X.constructor.isBuffer(X))},U=function(X,$){return[].concat(X,$)},N=function(X,$){if(t(X)){for(var re=[],te=0;te<X.length;te+=1)re.push($(X[te]));return re}return $(X)};return qE={arrayToObject:s,assign:o,combine:U,compact:B,decode:f,encode:x,isBuffer:P,isRegExp:R,maybeMap:N,merge:l},qE}var $E,ZK;function ihe(){if(ZK)return $E;ZK=1;var n=rhe(),e=YG(),t=zI(),r=Object.prototype.hasOwnProperty,i={brackets:function(W){return W+"[]"},comma:"comma",indices:function(W,X){return W+"["+X+"]"},repeat:function(W){return W}},s=Array.isArray,l=Array.prototype.push,o=function(N,W){l.apply(N,s(W)?W:[W])},f=Date.prototype.toISOString,C=t.default,x={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:C,formatter:t.formatters[C],indices:!1,serializeDate:function(W){return f.call(W)},skipNulls:!1,strictNullHandling:!1},B=function(W){return typeof W=="string"||typeof W=="number"||typeof W=="boolean"||typeof W=="symbol"||typeof W=="bigint"},R={},P=function N(W,X,$,re,te,V,ne,G,le,fe,pe,we,Se,xe,je,Me,rt,Ct){for(var it=W,nt=Ct,Ge=0,Ie=!1;(nt=nt.get(R))!==void 0&&!Ie;){var $e=nt.get(W);if(Ge+=1,typeof $e<"u"){if($e===Ge)throw new RangeError("Cyclic object value");Ie=!0}typeof nt.get(R)>"u"&&(Ge=0)}if(typeof fe=="function"?it=fe(X,it):it instanceof Date?it=Se(it):$==="comma"&&s(it)&&(it=e.maybeMap(it,function(Zt){return Zt instanceof Date?Se(Zt):Zt})),it===null){if(V)return le&&!Me?le(X,x.encoder,rt,"key",xe):X;it=""}if(B(it)||e.isBuffer(it)){if(le){var gt=Me?X:le(X,x.encoder,rt,"key",xe);return[je(gt)+"="+je(le(it,x.encoder,rt,"value",xe))]}return[je(X)+"="+je(String(it))]}var Dt=[];if(typeof it>"u")return Dt;var ut;if($==="comma"&&s(it))Me&&le&&(it=e.maybeMap(it,le)),ut=[{value:it.length>0?it.join(",")||null:void 0}];else if(s(fe))ut=fe;else{var Rt=Object.keys(it);ut=pe?Rt.sort(pe):Rt}var St=G?String(X).replace(/\./g,"%2E"):String(X),Ke=re&&s(it)&&it.length===1?St+"[]":St;if(te&&s(it)&&it.length===0)return Ke+"[]";for(var Pe=0;Pe<ut.length;++Pe){var Re=ut[Pe],Ye=typeof Re=="object"&&Re&&typeof Re.value<"u"?Re.value:it[Re];if(!(ne&&Ye===null)){var vt=we&&G?String(Re).replace(/\./g,"%2E"):String(Re),yt=s(it)?typeof $=="function"?$(Ke,vt):Ke:Ke+(we?"."+vt:"["+vt+"]");Ct.set(W,Ge);var Et=n();Et.set(R,Ct),o(Dt,N(Ye,yt,$,re,te,V,ne,G,$==="comma"&&Me&&s(it)?null:le,fe,pe,we,Se,xe,je,Me,rt,Et))}}return Dt},U=function(W){if(!W)return x;if(typeof W.allowEmptyArrays<"u"&&typeof W.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof W.encodeDotInKeys<"u"&&typeof W.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(W.encoder!==null&&typeof W.encoder<"u"&&typeof W.encoder!="function")throw new TypeError("Encoder has to be a function.");var X=W.charset||x.charset;if(typeof W.charset<"u"&&W.charset!=="utf-8"&&W.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var $=t.default;if(typeof W.format<"u"){if(!r.call(t.formatters,W.format))throw new TypeError("Unknown format option provided.");$=W.format}var re=t.formatters[$],te=x.filter;(typeof W.filter=="function"||s(W.filter))&&(te=W.filter);var V;if(W.arrayFormat in i?V=W.arrayFormat:"indices"in W?V=W.indices?"indices":"repeat":V=x.arrayFormat,"commaRoundTrip"in W&&typeof W.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ne=typeof W.allowDots>"u"?W.encodeDotInKeys===!0?!0:x.allowDots:!!W.allowDots;return{addQueryPrefix:typeof W.addQueryPrefix=="boolean"?W.addQueryPrefix:x.addQueryPrefix,allowDots:ne,allowEmptyArrays:typeof W.allowEmptyArrays=="boolean"?!!W.allowEmptyArrays:x.allowEmptyArrays,arrayFormat:V,charset:X,charsetSentinel:typeof W.charsetSentinel=="boolean"?W.charsetSentinel:x.charsetSentinel,commaRoundTrip:!!W.commaRoundTrip,delimiter:typeof W.delimiter>"u"?x.delimiter:W.delimiter,encode:typeof W.encode=="boolean"?W.encode:x.encode,encodeDotInKeys:typeof W.encodeDotInKeys=="boolean"?W.encodeDotInKeys:x.encodeDotInKeys,encoder:typeof W.encoder=="function"?W.encoder:x.encoder,encodeValuesOnly:typeof W.encodeValuesOnly=="boolean"?W.encodeValuesOnly:x.encodeValuesOnly,filter:te,format:$,formatter:re,serializeDate:typeof W.serializeDate=="function"?W.serializeDate:x.serializeDate,skipNulls:typeof W.skipNulls=="boolean"?W.skipNulls:x.skipNulls,sort:typeof W.sort=="function"?W.sort:null,strictNullHandling:typeof W.strictNullHandling=="boolean"?W.strictNullHandling:x.strictNullHandling}};return $E=function(N,W){var X=N,$=U(W),re,te;typeof $.filter=="function"?(te=$.filter,X=te("",X)):s($.filter)&&(te=$.filter,re=te);var V=[];if(typeof X!="object"||X===null)return"";var ne=i[$.arrayFormat],G=ne==="comma"&&$.commaRoundTrip;re||(re=Object.keys(X)),$.sort&&re.sort($.sort);for(var le=n(),fe=0;fe<re.length;++fe){var pe=re[fe],we=X[pe];$.skipNulls&&we===null||o(V,P(we,pe,ne,G,$.allowEmptyArrays,$.strictNullHandling,$.skipNulls,$.encodeDotInKeys,$.encode?$.encoder:null,$.filter,$.sort,$.allowDots,$.serializeDate,$.format,$.formatter,$.encodeValuesOnly,$.charset,le))}var Se=V.join($.delimiter),xe=$.addQueryPrefix===!0?"?":"";return $.charsetSentinel&&($.charset==="iso-8859-1"?xe+="utf8=%26%2310003%3B&":xe+="utf8=%E2%9C%93&"),Se.length>0?xe+Se:""},$E}var VE,XK;function ohe(){if(XK)return VE;XK=1;var n=YG(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(R){return R.replace(/&#(\d+);/g,function(P,U){return String.fromCharCode(parseInt(U,10))})},s=function(R,P,U){if(R&&typeof R=="string"&&P.comma&&R.indexOf(",")>-1)return R.split(",");if(P.throwOnLimitExceeded&&U>=P.arrayLimit)throw new RangeError("Array limit exceeded. Only "+P.arrayLimit+" element"+(P.arrayLimit===1?"":"s")+" allowed in an array.");return R},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",f=function(P,U){var N={__proto__:null},W=U.ignoreQueryPrefix?P.replace(/^\?/,""):P;W=W.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var X=U.parameterLimit===1/0?void 0:U.parameterLimit,$=W.split(U.delimiter,U.throwOnLimitExceeded?X+1:X);if(U.throwOnLimitExceeded&&$.length>X)throw new RangeError("Parameter limit exceeded. Only "+X+" parameter"+(X===1?"":"s")+" allowed.");var re=-1,te,V=U.charset;if(U.charsetSentinel)for(te=0;te<$.length;++te)$[te].indexOf("utf8=")===0&&($[te]===o?V="utf-8":$[te]===l&&(V="iso-8859-1"),re=te,te=$.length);for(te=0;te<$.length;++te)if(te!==re){var ne=$[te],G=ne.indexOf("]="),le=G===-1?ne.indexOf("="):G+1,fe,pe;le===-1?(fe=U.decoder(ne,r.decoder,V,"key"),pe=U.strictNullHandling?null:""):(fe=U.decoder(ne.slice(0,le),r.decoder,V,"key"),pe=n.maybeMap(s(ne.slice(le+1),U,t(N[fe])?N[fe].length:0),function(Se){return U.decoder(Se,r.decoder,V,"value")})),pe&&U.interpretNumericEntities&&V==="iso-8859-1"&&(pe=i(String(pe))),ne.indexOf("[]=")>-1&&(pe=t(pe)?[pe]:pe);var we=e.call(N,fe);we&&U.duplicates==="combine"?N[fe]=n.combine(N[fe],pe):(!we||U.duplicates==="last")&&(N[fe]=pe)}return N},C=function(R,P,U,N){var W=0;if(R.length>0&&R[R.length-1]==="[]"){var X=R.slice(0,-1).join("");W=Array.isArray(P)&&P[X]?P[X].length:0}for(var $=N?P:s(P,U,W),re=R.length-1;re>=0;--re){var te,V=R[re];if(V==="[]"&&U.parseArrays)te=U.allowEmptyArrays&&($===""||U.strictNullHandling&&$===null)?[]:n.combine([],$);else{te=U.plainObjects?{__proto__:null}:{};var ne=V.charAt(0)==="["&&V.charAt(V.length-1)==="]"?V.slice(1,-1):V,G=U.decodeDotInKeys?ne.replace(/%2E/g,"."):ne,le=parseInt(G,10);!U.parseArrays&&G===""?te={0:$}:!isNaN(le)&&V!==G&&String(le)===G&&le>=0&&U.parseArrays&&le<=U.arrayLimit?(te=[],te[le]=$):G!=="__proto__"&&(te[G]=$)}$=te}return $},x=function(P,U,N,W){if(P){var X=N.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P,$=/(\[[^[\]]*])/,re=/(\[[^[\]]*])/g,te=N.depth>0&&$.exec(X),V=te?X.slice(0,te.index):X,ne=[];if(V){if(!N.plainObjects&&e.call(Object.prototype,V)&&!N.allowPrototypes)return;ne.push(V)}for(var G=0;N.depth>0&&(te=re.exec(X))!==null&&G<N.depth;){if(G+=1,!N.plainObjects&&e.call(Object.prototype,te[1].slice(1,-1))&&!N.allowPrototypes)return;ne.push(te[1])}if(te){if(N.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+N.depth+" and strictDepth is true");ne.push("["+X.slice(te.index)+"]")}return C(ne,U,N,W)}},B=function(P){if(!P)return r;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.decodeDotInKeys<"u"&&typeof P.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(P.decoder!==null&&typeof P.decoder<"u"&&typeof P.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof P.throwOnLimitExceeded<"u"&&typeof P.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var U=typeof P.charset>"u"?r.charset:P.charset,N=typeof P.duplicates>"u"?r.duplicates:P.duplicates;if(N!=="combine"&&N!=="first"&&N!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var W=typeof P.allowDots>"u"?P.decodeDotInKeys===!0?!0:r.allowDots:!!P.allowDots;return{allowDots:W,allowEmptyArrays:typeof P.allowEmptyArrays=="boolean"?!!P.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof P.allowPrototypes=="boolean"?P.allowPrototypes:r.allowPrototypes,allowSparse:typeof P.allowSparse=="boolean"?P.allowSparse:r.allowSparse,arrayLimit:typeof P.arrayLimit=="number"?P.arrayLimit:r.arrayLimit,charset:U,charsetSentinel:typeof P.charsetSentinel=="boolean"?P.charsetSentinel:r.charsetSentinel,comma:typeof P.comma=="boolean"?P.comma:r.comma,decodeDotInKeys:typeof P.decodeDotInKeys=="boolean"?P.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof P.decoder=="function"?P.decoder:r.decoder,delimiter:typeof P.delimiter=="string"||n.isRegExp(P.delimiter)?P.delimiter:r.delimiter,depth:typeof P.depth=="number"||P.depth===!1?+P.depth:r.depth,duplicates:N,ignoreQueryPrefix:P.ignoreQueryPrefix===!0,interpretNumericEntities:typeof P.interpretNumericEntities=="boolean"?P.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof P.parameterLimit=="number"?P.parameterLimit:r.parameterLimit,parseArrays:P.parseArrays!==!1,plainObjects:typeof P.plainObjects=="boolean"?P.plainObjects:r.plainObjects,strictDepth:typeof P.strictDepth=="boolean"?!!P.strictDepth:r.strictDepth,strictNullHandling:typeof P.strictNullHandling=="boolean"?P.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof P.throwOnLimitExceeded=="boolean"?P.throwOnLimitExceeded:!1}};return VE=function(R,P){var U=B(P);if(R===""||R===null||typeof R>"u")return U.plainObjects?{__proto__:null}:{};for(var N=typeof R=="string"?f(R,U):R,W=U.plainObjects?{__proto__:null}:{},X=Object.keys(N),$=0;$<X.length;++$){var re=X[$],te=x(re,N[re],U,typeof R=="string");W=n.merge(W,te,U)}return U.allowSparse===!0?W:n.compact(W)},VE}var HE,JK;function she(){if(JK)return HE;JK=1;var n=ihe(),e=ohe(),t=zI();return HE={formats:t,parse:e,stringify:n},HE}var eF;function ahe(){if(eF)return b1;eF=1;var n=Ece();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(l),f=["%","/","?",";","#"].concat(o),C=["/","?","#"],x=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=she();function X(V,ne,G){if(V&&typeof V=="object"&&V instanceof e)return V;var le=new e;return le.parse(V,ne,G),le}e.prototype.parse=function(V,ne,G){if(typeof V!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof V);var le=V.indexOf("?"),fe=le!==-1&&le<V.indexOf("#")?"?":"#",pe=V.split(fe),we=/\\/g;pe[0]=pe[0].replace(we,"/"),V=pe.join(fe);var Se=V;if(Se=Se.trim(),!G&&V.split("#").length===1){var xe=i.exec(Se);if(xe)return this.path=Se,this.href=Se,this.pathname=xe[1],xe[2]?(this.search=xe[2],ne?this.query=W.parse(this.search.substr(1)):this.query=this.search.substr(1)):ne&&(this.search="",this.query={}),this}var je=t.exec(Se);if(je){je=je[0];var Me=je.toLowerCase();this.protocol=Me,Se=Se.substr(je.length)}if(G||je||Se.match(/^\/\/[^@/]+@[^@/]+/)){var rt=Se.substr(0,2)==="//";rt&&!(je&&U[je])&&(Se=Se.substr(2),this.slashes=!0)}if(!U[je]&&(rt||je&&!N[je])){for(var Ct=-1,it=0;it<C.length;it++){var nt=Se.indexOf(C[it]);nt!==-1&&(Ct===-1||nt<Ct)&&(Ct=nt)}var Ge,Ie;Ct===-1?Ie=Se.lastIndexOf("@"):Ie=Se.lastIndexOf("@",Ct),Ie!==-1&&(Ge=Se.slice(0,Ie),Se=Se.slice(Ie+1),this.auth=decodeURIComponent(Ge)),Ct=-1;for(var it=0;it<f.length;it++){var nt=Se.indexOf(f[it]);nt!==-1&&(Ct===-1||nt<Ct)&&(Ct=nt)}Ct===-1&&(Ct=Se.length),this.host=Se.slice(0,Ct),Se=Se.slice(Ct),this.parseHost(),this.hostname=this.hostname||"";var $e=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!$e)for(var gt=this.hostname.split(/\./),it=0,Dt=gt.length;it<Dt;it++){var ut=gt[it];if(ut&&!ut.match(B)){for(var Rt="",St=0,Ke=ut.length;St<Ke;St++)ut.charCodeAt(St)>127?Rt+="x":Rt+=ut[St];if(!Rt.match(B)){var Pe=gt.slice(0,it),Re=gt.slice(it+1),Ye=ut.match(R);Ye&&(Pe.push(Ye[1]),Re.unshift(Ye[2])),Re.length&&(Se="/"+Re.join(".")+Se),this.hostname=Pe.join(".");break}}}this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),$e||(this.hostname=n.toASCII(this.hostname));var vt=this.port?":"+this.port:"",yt=this.hostname||"";this.host=yt+vt,this.href+=this.host,$e&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),Se[0]!=="/"&&(Se="/"+Se))}if(!P[Me])for(var it=0,Dt=o.length;it<Dt;it++){var Et=o[it];if(Se.indexOf(Et)!==-1){var Zt=encodeURIComponent(Et);Zt===Et&&(Zt=escape(Et)),Se=Se.split(Et).join(Zt)}}var Ut=Se.indexOf("#");Ut!==-1&&(this.hash=Se.substr(Ut),Se=Se.slice(0,Ut));var An=Se.indexOf("?");if(An!==-1?(this.search=Se.substr(An),this.query=Se.substr(An+1),ne&&(this.query=W.parse(this.query)),Se=Se.slice(0,An)):ne&&(this.search="",this.query={}),Se&&(this.pathname=Se),N[Me]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var vt=this.pathname||"",hr=this.search||"";this.path=vt+hr}return this.href=this.format(),this};function $(V){return typeof V=="string"&&(V=X(V)),V instanceof e?V.format():e.prototype.format.call(V)}e.prototype.format=function(){var V=this.auth||"";V&&(V=encodeURIComponent(V),V=V.replace(/%3A/i,":"),V+="@");var ne=this.protocol||"",G=this.pathname||"",le=this.hash||"",fe=!1,pe="";this.host?fe=V+this.host:this.hostname&&(fe=V+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(fe+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(pe=W.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var we=this.search||pe&&"?"+pe||"";return ne&&ne.substr(-1)!==":"&&(ne+=":"),this.slashes||(!ne||N[ne])&&fe!==!1?(fe="//"+(fe||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):fe||(fe=""),le&&le.charAt(0)!=="#"&&(le="#"+le),we&&we.charAt(0)!=="?"&&(we="?"+we),G=G.replace(/[?#]/g,function(Se){return encodeURIComponent(Se)}),we=we.replace("#","%23"),ne+fe+G+we+le};function re(V,ne){return X(V,!1,!0).resolve(ne)}e.prototype.resolve=function(V){return this.resolveObject(X(V,!1,!0)).format()};function te(V,ne){return V?X(V,!1,!0).resolveObject(ne):ne}return e.prototype.resolveObject=function(V){if(typeof V=="string"){var ne=new e;ne.parse(V,!1,!0),V=ne}for(var G=new e,le=Object.keys(this),fe=0;fe<le.length;fe++){var pe=le[fe];G[pe]=this[pe]}if(G.hash=V.hash,V.href==="")return G.href=G.format(),G;if(V.slashes&&!V.protocol){for(var we=Object.keys(V),Se=0;Se<we.length;Se++){var xe=we[Se];xe!=="protocol"&&(G[xe]=V[xe])}return N[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if(V.protocol&&V.protocol!==G.protocol){if(!N[V.protocol]){for(var je=Object.keys(V),Me=0;Me<je.length;Me++){var rt=je[Me];G[rt]=V[rt]}return G.href=G.format(),G}if(G.protocol=V.protocol,!V.host&&!U[V.protocol]){for(var Dt=(V.pathname||"").split("/");Dt.length&&!(V.host=Dt.shift()););V.host||(V.host=""),V.hostname||(V.hostname=""),Dt[0]!==""&&Dt.unshift(""),Dt.length<2&&Dt.unshift(""),G.pathname=Dt.join("/")}else G.pathname=V.pathname;if(G.search=V.search,G.query=V.query,G.host=V.host||"",G.auth=V.auth,G.hostname=V.hostname||V.host,G.port=V.port,G.pathname||G.search){var Ct=G.pathname||"",it=G.search||"";G.path=Ct+it}return G.slashes=G.slashes||V.slashes,G.href=G.format(),G}var nt=G.pathname&&G.pathname.charAt(0)==="/",Ge=V.host||V.pathname&&V.pathname.charAt(0)==="/",Ie=Ge||nt||G.host&&V.pathname,$e=Ie,gt=G.pathname&&G.pathname.split("/")||[],Dt=V.pathname&&V.pathname.split("/")||[],ut=G.protocol&&!N[G.protocol];if(ut&&(G.hostname="",G.port=null,G.host&&(gt[0]===""?gt[0]=G.host:gt.unshift(G.host)),G.host="",V.protocol&&(V.hostname=null,V.port=null,V.host&&(Dt[0]===""?Dt[0]=V.host:Dt.unshift(V.host)),V.host=null),Ie=Ie&&(Dt[0]===""||gt[0]==="")),Ge)G.host=V.host||V.host===""?V.host:G.host,G.hostname=V.hostname||V.hostname===""?V.hostname:G.hostname,G.search=V.search,G.query=V.query,gt=Dt;else if(Dt.length)gt||(gt=[]),gt.pop(),gt=gt.concat(Dt),G.search=V.search,G.query=V.query;else if(V.search!=null){if(ut){G.host=gt.shift(),G.hostname=G.host;var Rt=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Rt&&(G.auth=Rt.shift(),G.hostname=Rt.shift(),G.host=G.hostname)}return G.search=V.search,G.query=V.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!gt.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var St=gt.slice(-1)[0],Ke=(G.host||V.host||gt.length>1)&&(St==="."||St==="..")||St==="",Pe=0,Re=gt.length;Re>=0;Re--)St=gt[Re],St==="."?gt.splice(Re,1):St===".."?(gt.splice(Re,1),Pe++):Pe&&(gt.splice(Re,1),Pe--);if(!Ie&&!$e)for(;Pe--;Pe)gt.unshift("..");Ie&&gt[0]!==""&&(!gt[0]||gt[0].charAt(0)!=="/")&&gt.unshift(""),Ke&&gt.join("/").substr(-1)!=="/"&&gt.push("");var Ye=gt[0]===""||gt[0]&&gt[0].charAt(0)==="/";if(ut){G.hostname=Ye?"":gt.length?gt.shift():"",G.host=G.hostname;var Rt=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Rt&&(G.auth=Rt.shift(),G.hostname=Rt.shift(),G.host=G.hostname)}return Ie=Ie||G.host&&gt.length,Ie&&!Ye&&gt.unshift(""),gt.length>0?G.pathname=gt.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=V.auth||G.auth,G.slashes=G.slashes||V.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var V=this.host,ne=r.exec(V);ne&&(ne=ne[0],ne!==":"&&(this.port=ne.substr(1)),V=V.substr(0,V.length-ne.length)),V&&(this.hostname=V)},b1.parse=X,b1.resolve=re,b1.resolveObject=te,b1.format=$,b1.Url=e,b1}var lhe=ahe();const tF=Gl(lhe);function ds(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ds=function(){return l},l}ds();function qG(n,e,t){ds().f[0]++,ds().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(ds().f[1]++,ds().s[1]++,r.ok)ds().b[0][1]++;else throw ds().b[0][0]++,ds().s[2]++,new Error("Failed to load metadata for "+n);return ds().s[3]++,r.json()}).then(r=>{ds().f[2]++,ds().s[4]++,t(r)}).catch(()=>{ds().f[3]++,ds().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),ds().s[6]++,t(e)})}function Ahe(n,e){if(ds().f[4]++,ds().s[7]++,n)ds().b[1][1]++;else return ds().b[1][0]++,ds().s[8]++,e([]);const t=(ds().s[9]++,tF.parse(n)),r=(ds().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");ds().s[11]++,t.pathname===r?(ds().b[2][0]++,ds().s[12]++,t.pathname="/fontstacks.json"):(ds().b[2][1]++,ds().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(ds().s[14]++,tF.format(t));ds().s[15]++,qG(i,[],e)}function uhe(n,e){if(ds().f[5]++,ds().s[16]++,n)ds().b[3][1]++;else return ds().b[3][0]++,ds().s[17]++,e([]);const t=(ds().s[18]++,n+".json");ds().s[19]++,qG(t,{},r=>(ds().f[6]++,ds().s[20]++,e(Object.keys(r))))}function ac(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ac=function(){return l},l}ac();function che(){ac().f[0]++;const n=(ac().s[0]++,new URL(window.location.href));return ac().s[1]++,n.searchParams.get("style")}function $G(n,e){ac().f[1]++,ac().s[2]++,console.log("Loading style",n),ac().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return ac().f[2]++,ac().s[4]++,t.json()}).then(function(t){ac().f[3]++,ac().s[5]++,e(Ac.ensureStyleValidity(t))}).catch(function(){ac().f[4]++,ac().s[6]++,console.warn("Could not fetch default style",n),ac().s[7]++,e(Ac.emptyStyle)})}function nF(){ac().f[5]++;const n=(ac().s[8]++,new URL(window.location.href));ac().s[9]++,n.searchParams.delete("style"),ac().s[10]++,window.history.replaceState({},document.title,n.toString())}function Wh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wh=function(){return l},l}Wh();function VG(n,e){Wh().f[0]++;const t=(Wh().s[0]++,DY(n,e));return Wh().s[1]++,t.map(r=>(Wh().f[1]++,Wh().s[2]++,r.command+" "+r.args.join(" ")))}function hhe(n,e){return Wh().f[2]++,Wh().s[3]++,VG(n,e).map(t=>(Wh().f[3]++,Wh().s[4]++,"Undo "+t))}function dhe(n,e){return Wh().f[4]++,Wh().s[5]++,VG(n,e).map(t=>(Wh().f[5]++,Wh().s[6]++,"Redo "+t))}function Gr(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="e896abae0ef5c84b69751a8143800bbdbde13b86",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:19},end:{line:76,column:5}},37:{start:{line:74,column:6},end:{line:74,column:65}},38:{start:{line:75,column:6},end:{line:75,column:67}},39:{start:{line:77,column:4},end:{line:88,column:5}},40:{start:{line:78,column:6},end:{line:78,column:15}},41:{start:{line:80,column:6},end:{line:87,column:7}},42:{start:{line:83,column:8},end:{line:83,column:21}},43:{start:{line:84,column:8},end:{line:84,column:17}},44:{start:{line:86,column:8},end:{line:86,column:16}},45:{start:{line:89,column:4},end:{line:89,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:90,column:3}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:73,column:19},end:{line:73,column:20}},loc:{start:{line:73,column:25},end:{line:76,column:5}},line:73}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},6:{loc:{start:{line:80,column:6},end:{line:87,column:7}},type:"if",locations:[{start:{line:80,column:6},end:{line:87,column:7}},{start:{line:85,column:13},end:{line:87,column:7}}],line:80},7:{loc:{start:{line:80,column:10},end:{line:82,column:81}},type:"binary-expr",locations:[{start:{line:80,column:10},end:{line:80,column:35}},{start:{line:80,column:40},end:{line:80,column:53}},{start:{line:81,column:6},end:{line:81,column:21}},{start:{line:82,column:6},end:{line:82,column:37}},{start:{line:82,column:41},end:{line:82,column:80}}],line:80}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e896abae0ef5c84b69751a8143800bbdbde13b86"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gr=function(){return l},l}Gr();const k3=(Gr().s[0]++,"maputnik"),HG=(Gr().s[1]++,"style"),rF=(Gr().s[2]++,{latest:[k3,"latest_style"].join(":")}),fhe=(Gr().s[3]++,FG[0].url);function iF(n){Gr().f[0]++,Gr().s[4]++,$G(fhe,n)}function phe(){Gr().f[1]++;const n=(Gr().s[5]++,[]);Gr().s[6]++;for(let e=(Gr().s[7]++,0);e<window.localStorage.length;e++){const t=(Gr().s[8]++,window.localStorage.key(e));Gr().s[9]++,ZG(t)?(Gr().b[0][0]++,Gr().s[10]++,n.push(mhe(t))):Gr().b[0][1]++}return Gr().s[11]++,n}function ZG(n){Gr().f[2]++;const e=(Gr().s[12]++,n.split(":"));return Gr().s[13]++,Gr().b[1][0]++,e.length===3&&(Gr().b[1][1]++,e[0]===k3)&&(Gr().b[1][2]++,e[1]===HG)}function mhe(n){if(Gr().f[3]++,Gr().s[14]++,ZG(n))Gr().b[2][1]++;else throw Gr().b[2][0]++,Gr().s[15]++,"Key is not a valid style key";const e=(Gr().s[16]++,n.split(":")),t=(Gr().s[17]++,e[2]);return Gr().s[18]++,t}function oF(n){return Gr().f[4]++,Gr().s[19]++,[k3,HG,n].join(":")}class sF{mapStyles;constructor(){Gr().f[5]++,Gr().s[20]++,this.mapStyles=phe()}init(e){Gr().f[6]++,Gr().s[21]++,e(null)}purge(){Gr().f[7]++,Gr().s[22]++;for(let e=(Gr().s[23]++,0);e<window.localStorage.length;e++){const t=(Gr().s[24]++,window.localStorage.key(e));Gr().s[25]++,t.startsWith(k3)?(Gr().b[3][0]++,Gr().s[26]++,window.localStorage.removeItem(t)):Gr().b[3][1]++}}latestStyle(e){if(Gr().f[8]++,Gr().s[27]++,this.mapStyles.length===0)return Gr().b[4][0]++,Gr().s[28]++,iF(e);Gr().b[4][1]++;const t=(Gr().s[29]++,window.localStorage.getItem(rF.latest)),r=(Gr().s[30]++,window.localStorage.getItem(oF(t)));if(Gr().s[31]++,r)return Gr().b[5][0]++,Gr().s[32]++,e(JSON.parse(r));Gr().b[5][1]++,Gr().s[33]++,iF(e)}save(e){Gr().f[9]++,Gr().s[34]++,e=Ac.ensureStyleValidity(e);const t=(Gr().s[35]++,oF(e.id));Gr().s[36]++;const r=()=>{Gr().f[10]++,Gr().s[37]++,window.localStorage.setItem(t,JSON.stringify(e)),Gr().s[38]++,window.localStorage.setItem(rF.latest,e.id)};Gr().s[39]++;try{Gr().s[40]++,r()}catch(i){if(Gr().s[41]++,Gr().b[7][0]++,i instanceof DOMException&&(Gr().b[7][1]++,i.code===22||(Gr().b[7][2]++,i.code===1014)||(Gr().b[7][3]++,i.name==="QuotaExceededError")||(Gr().b[7][4]++,i.name==="NS_ERROR_DOM_QUOTA_REACHED")))Gr().b[6][0]++,Gr().s[42]++,this.purge(),Gr().s[43]++,r();else throw Gr().b[6][1]++,Gr().s[44]++,i}return Gr().s[45]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hB=function(n,e){return hB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},hB(n,e)};function XG(n,e){hB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ghe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function yhe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return s}function vhe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(yhe(arguments[e]));return n}var JG=function(){function n(e,t){this.target=t,this.type=e}return n}(),Che=function(n){XG(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(JG),_he=function(n){XG(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(JG);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var bhe=function(){if(typeof WebSocket<"u")return WebSocket},xhe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},x1={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},Mhe=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var l=i._options.minUptime,o=l===void 0?x1.minUptime:l;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(f){return i._ws.send(f)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(f){return i._callEventListener(s,f)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(l){return i._callEventListener(s,l)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(l){return i._callEventListener(s,l)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(l){return i._callEventListener(s,l)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?x1.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=ghe(i),l=s.next();!l.done;l=s.next()){var o=l.value;this._callEventListener(e,o)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,vhe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?x1.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?x1.minReconnectionDelay:i,l=e.maxReconnectionDelay,o=l===void 0?x1.maxReconnectionDelay:l,f=0;return this._retryCount>0&&(f=s*Math.pow(r,this._retryCount-1),f>o&&(f=o)),this._debug("next delay",f),f},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?x1.maxRetries:r,s=t.connectionTimeout,l=s===void 0?x1.connectionTimeout:s,o=t.WebSocket,f=o===void 0?bhe():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!xhe(f))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(C){e._closeCalled||(e._debug("connect",{url:C,protocols:e._protocols}),e._ws=e._protocols?new f(C,e._protocols):new f(C),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Che(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new _he(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function _i(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _i=function(){return l},l}_i();class whe{localUrl;websocketUrl;latestStyleId=(_i().s[0]++,void 0);onLocalStyleChange;constructor(e){_i().f[0]++,_i().s[1]++,this.onLocalStyleChange=(_i().b[0][0]++,e.onLocalStyleChange||(_i().b[0][1]++,()=>{_i().f[1]++}));const t=(_i().s[2]++,_i().b[1][0]++,e.port||(_i().b[1][1]++,"8000")),r=(_i().s[3]++,_i().b[2][0]++,e.host||(_i().b[2][1]++,"localhost"));_i().s[4]++,this.localUrl=`http://${r}:${t}`,_i().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,_i().s[6]++,this.init=this.init.bind(this)}init(e){_i().f[2]++,_i().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(_i().f[3]++,_i().s[8]++,t.json())).then(t=>{_i().f[4]++;const r=(_i().s[9]++,t);_i().s[10]++,this.latestStyleId=r[0],_i().s[11]++,this.notifyLocalChanges(),_i().s[12]++,e(null)}).catch(()=>{_i().f[5]++,_i().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){_i().f[6]++;const e=(_i().s[14]++,new Mhe(this.websocketUrl));_i().s[15]++,e.onmessage=t=>{if(_i().f[7]++,_i().s[16]++,t.data)_i().b[3][1]++;else{_i().b[3][0]++,_i().s[17]++;return}_i().s[18]++,console.log("Received style update from API");let r=(_i().s[19]++,Ac.emptyStyle);_i().s[20]++;try{_i().s[21]++,r=JSON.parse(t.data)}catch(s){_i().s[22]++,console.error(s)}const i=(_i().s[23]++,Ac.ensureStyleValidity(r));_i().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(_i().f[8]++,_i().s[25]++,this.latestStyleId)_i().b[4][0]++,_i().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return _i().f[9]++,_i().s[27]++,t.json()}).then(function(t){_i().f[10]++,_i().s[28]++,e(Ac.ensureStyleValidity(t))});else throw _i().b[4][1]++,_i().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){_i().f[11]++;const t=(_i().s[30]++,OL(Ac.stripAccessTokens(Ac.replaceAccessTokens(e)))),r=(_i().s[31]++,e.id);return _i().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){_i().f[12]++,_i().s[33]++,i?(_i().b[5][0]++,_i().s[34]++,console.error(i)):_i().b[5][1]++}),_i().s[35]++,e}}function _l(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _l=function(){return l},l}_l();class She{revisions;currentIdx;constructor(e=(_l().b[0][0]++,[])){_l().f[0]++,_l().s[0]++,this.revisions=e,_l().s[1]++,this.currentIdx=e.length-1}get latest(){return _l().f[1]++,_l().s[2]++,this.revisions[this.revisions.length-1]}get current(){return _l().f[2]++,_l().s[3]++,this.revisions[this.currentIdx]}addRevision(e){_l().f[3]++,_l().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),_l().s[5]++,this.revisions.push(e),_l().s[6]++,this.currentIdx++}undo(){return _l().f[4]++,_l().s[7]++,this.currentIdx>0?(_l().b[1][0]++,_l().s[8]++,this.currentIdx--):_l().b[1][1]++,_l().s[9]++,this.current}redo(){return _l().f[5]++,_l().s[10]++,this.currentIdx<this.revisions.length-1?(_l().b[2][0]++,_l().s[11]++,this.currentIdx++):_l().b[2][1]++,_l().s[12]++,this.current}}var ZE,aF;function Ehe(){if(aF)return ZE;aF=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,f=typeof window=="object"&&window&&window.Object===Object&&window,C=typeof self=="object"&&self&&self.Object===Object&&self,x=f||C||Function("return this")(),B=Object.prototype,R=B.toString,P=Math.max,U=Math.min,N=function(){return x.Date.now()};function W(ne,G,le){var fe,pe,we,Se,xe,je,Me=0,rt=!1,Ct=!1,it=!0;if(typeof ne!="function")throw new TypeError(n);G=V(G)||0,$(le)&&(rt=!!le.leading,Ct="maxWait"in le,we=Ct?P(V(le.maxWait)||0,G):we,it="trailing"in le?!!le.trailing:it);function nt(Ke){var Pe=fe,Re=pe;return fe=pe=void 0,Me=Ke,Se=ne.apply(Re,Pe),Se}function Ge(Ke){return Me=Ke,xe=setTimeout(gt,G),rt?nt(Ke):Se}function Ie(Ke){var Pe=Ke-je,Re=Ke-Me,Ye=G-Pe;return Ct?U(Ye,we-Re):Ye}function $e(Ke){var Pe=Ke-je,Re=Ke-Me;return je===void 0||Pe>=G||Pe<0||Ct&&Re>=we}function gt(){var Ke=N();if($e(Ke))return Dt(Ke);xe=setTimeout(gt,Ie(Ke))}function Dt(Ke){return xe=void 0,it&&fe?nt(Ke):(fe=pe=void 0,Se)}function ut(){xe!==void 0&&clearTimeout(xe),Me=0,fe=je=pe=xe=void 0}function Rt(){return xe===void 0?Se:Dt(N())}function St(){var Ke=N(),Pe=$e(Ke);if(fe=arguments,pe=this,je=Ke,Pe){if(xe===void 0)return Ge(je);if(Ct)return xe=setTimeout(gt,G),nt(je)}return xe===void 0&&(xe=setTimeout(gt,G)),Se}return St.cancel=ut,St.flush=Rt,St}function X(ne,G,le){var fe=!0,pe=!0;if(typeof ne!="function")throw new TypeError(n);return $(le)&&(fe="leading"in le?!!le.leading:fe,pe="trailing"in le?!!le.trailing:pe),W(ne,G,{leading:fe,maxWait:G,trailing:pe})}function $(ne){var G=typeof ne;return!!ne&&(G=="object"||G=="function")}function re(ne){return!!ne&&typeof ne=="object"}function te(ne){return typeof ne=="symbol"||re(ne)&&R.call(ne)==t}function V(ne){if(typeof ne=="number")return ne;if(te(ne))return e;if($(ne)){var G=typeof ne.valueOf=="function"?ne.valueOf():ne;ne=$(G)?G+"":G}if(typeof ne!="string")return ne===0?ne:+ne;ne=ne.replace(r,"");var le=s.test(ne);return le||l.test(ne)?o(ne.slice(2),le?2:8):i.test(ne)?e:+ne}return ZE=X,ZE}var Bhe=Ehe();const Ohe=Gl(Bhe);var rC={exports:{}};rC.exports;var lF;function Ihe(){return lF||(lF=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",f="[object Array]",C="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",R="[object Error]",P="[object Function]",U="[object GeneratorFunction]",N="[object Map]",W="[object Number]",X="[object Null]",$="[object Object]",re="[object Promise]",te="[object Proxy]",V="[object RegExp]",ne="[object Set]",G="[object String]",le="[object Symbol]",fe="[object Undefined]",pe="[object WeakMap]",we="[object ArrayBuffer]",Se="[object DataView]",xe="[object Float32Array]",je="[object Float64Array]",Me="[object Int8Array]",rt="[object Int16Array]",Ct="[object Int32Array]",it="[object Uint8Array]",nt="[object Uint8ClampedArray]",Ge="[object Uint16Array]",Ie="[object Uint32Array]",$e=/[\\^$.*+?()[\]{}|]/g,gt=/^\[object .+?Constructor\]$/,Dt=/^(?:0|[1-9]\d*)$/,ut={};ut[xe]=ut[je]=ut[Me]=ut[rt]=ut[Ct]=ut[it]=ut[nt]=ut[Ge]=ut[Ie]=!0,ut[o]=ut[f]=ut[we]=ut[x]=ut[Se]=ut[B]=ut[R]=ut[P]=ut[N]=ut[W]=ut[$]=ut[V]=ut[ne]=ut[G]=ut[pe]=!1;var Rt=typeof window=="object"&&window&&window.Object===Object&&window,St=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Rt||St||Function("return this")(),Pe=e&&!e.nodeType&&e,Re=Pe&&!0&&n&&!n.nodeType&&n,Ye=Re&&Re.exports===Pe,vt=Ye&&Rt.process,yt=function(){try{return vt&&vt.binding&&vt.binding("util")}catch{}}(),Et=yt&&yt.isTypedArray;function Zt(J,Ee){for(var st=-1,Ht=J==null?0:J.length,kr=0,Qn=[];++st<Ht;){var Zr=J[st];Ee(Zr,st,J)&&(Qn[kr++]=Zr)}return Qn}function Ut(J,Ee){for(var st=-1,Ht=Ee.length,kr=J.length;++st<Ht;)J[kr+st]=Ee[st];return J}function An(J,Ee){for(var st=-1,Ht=J==null?0:J.length;++st<Ht;)if(Ee(J[st],st,J))return!0;return!1}function hr(J,Ee){for(var st=-1,Ht=Array(J);++st<J;)Ht[st]=Ee(st);return Ht}function Vt(J){return function(Ee){return J(Ee)}}function Vn(J,Ee){return J.has(Ee)}function Pn(J,Ee){return J?.[Ee]}function Dn(J){var Ee=-1,st=Array(J.size);return J.forEach(function(Ht,kr){st[++Ee]=[kr,Ht]}),st}function Ln(J,Ee){return function(st){return J(Ee(st))}}function Ir(J){var Ee=-1,st=Array(J.size);return J.forEach(function(Ht){st[++Ee]=Ht}),st}var rr=Array.prototype,Yn=Function.prototype,We=Object.prototype,he=Ke["__core-js_shared__"],me=Yn.toString,et=We.hasOwnProperty,bt=function(){var J=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Yt=We.toString,Jt=RegExp("^"+me.call(et).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ir=Ye?Ke.Buffer:void 0,Xe=Ke.Symbol,ae=Ke.Uint8Array,ve=We.propertyIsEnumerable,p=rr.splice,Ne=Xe?Xe.toStringTag:void 0,Ve=Object.getOwnPropertySymbols,Te=ir?ir.isBuffer:void 0,lt=Ln(Object.keys,Object),ct=Ao(Ke,"DataView"),Ft=Ao(Ke,"Map"),jt=Ao(Ke,"Promise"),Gt=Ao(Ke,"Set"),nn=Ao(Ke,"WeakMap"),On=Ao(Object,"create"),Rn=Ni(ct),dr=Ni(Ft),Tr=Ni(jt),or=Ni(Gt),on=Ni(nn),ti=Xe?Xe.prototype:void 0,li=ti?ti.valueOf:void 0;function jr(J){var Ee=-1,st=J==null?0:J.length;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function Fr(){this.__data__=On?On(null):{},this.size=0}function wn(J){var Ee=this.has(J)&&delete this.__data__[J];return this.size-=Ee?1:0,Ee}function Dr(J){var Ee=this.__data__;if(On){var st=Ee[J];return st===r?void 0:st}return et.call(Ee,J)?Ee[J]:void 0}function ui(J){var Ee=this.__data__;return On?Ee[J]!==void 0:et.call(Ee,J)}function Pi(J,Ee){var st=this.__data__;return this.size+=this.has(J)?0:1,st[J]=On&&Ee===void 0?r:Ee,this}jr.prototype.clear=Fr,jr.prototype.delete=wn,jr.prototype.get=Dr,jr.prototype.has=ui,jr.prototype.set=Pi;function yi(J){var Ee=-1,st=J==null?0:J.length;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function As(){this.__data__=[],this.size=0}function qr(J){var Ee=this.__data__,st=gr(Ee,J);if(st<0)return!1;var Ht=Ee.length-1;return st==Ht?Ee.pop():p.call(Ee,st,1),--this.size,!0}function _s(J){var Ee=this.__data__,st=gr(Ee,J);return st<0?void 0:Ee[st][1]}function La(J){return gr(this.__data__,J)>-1}function da(J,Ee){var st=this.__data__,Ht=gr(st,J);return Ht<0?(++this.size,st.push([J,Ee])):st[Ht][1]=Ee,this}yi.prototype.clear=As,yi.prototype.delete=qr,yi.prototype.get=_s,yi.prototype.has=La,yi.prototype.set=da;function No(J){var Ee=-1,st=J==null?0:J.length;for(this.clear();++Ee<st;){var Ht=J[Ee];this.set(Ht[0],Ht[1])}}function zs(){this.size=0,this.__data__={hash:new jr,map:new(Ft||yi),string:new jr}}function hl(J){var Ee=bi(this,J).delete(J);return this.size-=Ee?1:0,Ee}function ci(J){return bi(this,J).get(J)}function oa(J){return bi(this,J).has(J)}function bo(J,Ee){var st=bi(this,J),Ht=st.size;return st.set(J,Ee),this.size+=st.size==Ht?0:1,this}No.prototype.clear=zs,No.prototype.delete=hl,No.prototype.get=ci,No.prototype.has=oa,No.prototype.set=bo;function lo(J){var Ee=-1,st=J==null?0:J.length;for(this.__data__=new No;++Ee<st;)this.add(J[Ee])}function Er(J){return this.__data__.set(J,r),this}function wa(J){return this.__data__.has(J)}lo.prototype.add=lo.prototype.push=Er,lo.prototype.has=wa;function qo(J){var Ee=this.__data__=new yi(J);this.size=Ee.size}function Jo(){this.__data__=new yi,this.size=0}function qe(J){var Ee=this.__data__,st=Ee.delete(J);return this.size=Ee.size,st}function xt(J){return this.__data__.get(J)}function _n(J){return this.__data__.has(J)}function jn(J,Ee){var st=this.__data__;if(st instanceof yi){var Ht=st.__data__;if(!Ft||Ht.length<t-1)return Ht.push([J,Ee]),this.size=++st.size,this;st=this.__data__=new No(Ht)}return st.set(J,Ee),this.size=st.size,this}qo.prototype.clear=Jo,qo.prototype.delete=qe,qo.prototype.get=xt,qo.prototype.has=_n,qo.prototype.set=jn;function fn(J,Ee){var st=Vo(J),Ht=!st&&$o(J),kr=!st&&!Ht&&Ea(J),Qn=!st&&!Ht&&!kr&&Ho(J),Zr=st||Ht||kr||Qn,Ai=Zr?hr(J.length,String):[],Rr=Ai.length;for(var ni in J)et.call(J,ni)&&!(Zr&&(ni=="length"||kr&&(ni=="offset"||ni=="parent")||Qn&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||Wl(ni,Rr)))&&Ai.push(ni);return Ai}function gr(J,Ee){for(var st=J.length;st--;)if(uo(J[st][0],Ee))return st;return-1}function Qi(J,Ee,st){var Ht=Ee(J);return Vo(J)?Ht:Ut(Ht,st(J))}function Io(J){return J==null?J===void 0?fe:X:Ne&&Ne in Object(J)?Oi(J):za(J)}function fs(J){return Ii(J)&&Io(J)==o}function fa(J,Ee,st,Ht,kr){return J===Ee?!0:J==null||Ee==null||!Ii(J)&&!Ii(Ee)?J!==J&&Ee!==Ee:iA(J,Ee,st,Ht,fa,kr)}function iA(J,Ee,st,Ht,kr,Qn){var Zr=Vo(J),Ai=Vo(Ee),Rr=Zr?f:Oo(J),ni=Ai?f:Oo(Ee);Rr=Rr==o?$:Rr,ni=ni==o?$:ni;var Yi=Rr==$,xo=ni==$,si=Rr==ni;if(si&&Ea(J)){if(!Ea(Ee))return!1;Zr=!0,Yi=!1}if(si&&!Yi)return Qn||(Qn=new qo),Zr||Ho(J)?nl(J,Ee,st,Ht,kr,Qn):Ua(J,Ee,Rr,st,Ht,kr,Qn);if(!(st&i)){var fi=Yi&&et.call(J,"__wrapped__"),co=xo&&et.call(Ee,"__wrapped__");if(fi||co){var Ki=fi?J.value():J,Fi=co?Ee.value():Ee;return Qn||(Qn=new qo),kr(Ki,Fi,st,Ht,Qn)}}return si?(Qn||(Qn=new qo),JA(J,Ee,st,Ht,kr,Qn)):!1}function vi(J){if(!EA(J)||oA(J))return!1;var Ee=Ss(J)?Jt:gt;return Ee.test(Ni(J))}function zu(J){return Ii(J)&&sa(J.length)&&!!ut[Io(J)]}function jl(J){if(!sA(J))return lt(J);var Ee=[];for(var st in Object(J))et.call(J,st)&&st!="constructor"&&Ee.push(st);return Ee}function nl(J,Ee,st,Ht,kr,Qn){var Zr=st&i,Ai=J.length,Rr=Ee.length;if(Ai!=Rr&&!(Zr&&Rr>Ai))return!1;var ni=Qn.get(J);if(ni&&Qn.get(Ee))return ni==Ee;var Yi=-1,xo=!0,si=st&s?new lo:void 0;for(Qn.set(J,Ee),Qn.set(Ee,J);++Yi<Ai;){var fi=J[Yi],co=Ee[Yi];if(Ht)var Ki=Zr?Ht(co,fi,Yi,Ee,J,Qn):Ht(fi,co,Yi,J,Ee,Qn);if(Ki!==void 0){if(Ki)continue;xo=!1;break}if(si){if(!An(Ee,function(Fi,Ns){if(!Vn(si,Ns)&&(fi===Fi||kr(fi,Fi,st,Ht,Qn)))return si.push(Ns)})){xo=!1;break}}else if(!(fi===co||kr(fi,co,st,Ht,Qn))){xo=!1;break}}return Qn.delete(J),Qn.delete(Ee),xo}function Ua(J,Ee,st,Ht,kr,Qn,Zr){switch(st){case Se:if(J.byteLength!=Ee.byteLength||J.byteOffset!=Ee.byteOffset)return!1;J=J.buffer,Ee=Ee.buffer;case we:return!(J.byteLength!=Ee.byteLength||!Qn(new ae(J),new ae(Ee)));case x:case B:case W:return uo(+J,+Ee);case R:return J.name==Ee.name&&J.message==Ee.message;case V:case G:return J==Ee+"";case N:var Ai=Dn;case ne:var Rr=Ht&i;if(Ai||(Ai=Ir),J.size!=Ee.size&&!Rr)return!1;var ni=Zr.get(J);if(ni)return ni==Ee;Ht|=s,Zr.set(J,Ee);var Yi=nl(Ai(J),Ai(Ee),Ht,kr,Qn,Zr);return Zr.delete(J),Yi;case le:if(li)return li.call(J)==li.call(Ee)}return!1}function JA(J,Ee,st,Ht,kr,Qn){var Zr=st&i,Ai=Sa(J),Rr=Ai.length,ni=Sa(Ee),Yi=ni.length;if(Rr!=Yi&&!Zr)return!1;for(var xo=Rr;xo--;){var si=Ai[xo];if(!(Zr?si in Ee:et.call(Ee,si)))return!1}var fi=Qn.get(J);if(fi&&Qn.get(Ee))return fi==Ee;var co=!0;Qn.set(J,Ee),Qn.set(Ee,J);for(var Ki=Zr;++xo<Rr;){si=Ai[xo];var Fi=J[si],Ns=Ee[si];if(Ht)var Na=Zr?Ht(Ns,Fi,si,Ee,J,Qn):Ht(Fi,Ns,si,J,Ee,Qn);if(!(Na===void 0?Fi===Ns||kr(Fi,Ns,st,Ht,Qn):Na)){co=!1;break}Ki||(Ki=si=="constructor")}if(co&&!Ki){var eu=J.constructor,Gs=Ee.constructor;eu!=Gs&&"constructor"in J&&"constructor"in Ee&&!(typeof eu=="function"&&eu instanceof eu&&typeof Gs=="function"&&Gs instanceof Gs)&&(co=!1)}return Qn.delete(J),Qn.delete(Ee),co}function Sa(J){return Qi(J,Gi,xl)}function bi(J,Ee){var st=J.__data__;return Di(Ee)?st[typeof Ee=="string"?"string":"hash"]:st.map}function Ao(J,Ee){var st=Pn(J,Ee);return vi(st)?st:void 0}function Oi(J){var Ee=et.call(J,Ne),st=J[Ne];try{J[Ne]=void 0;var Ht=!0}catch{}var kr=Yt.call(J);return Ht&&(Ee?J[Ne]=st:delete J[Ne]),kr}var xl=Ve?function(J){return J==null?[]:(J=Object(J),Zt(Ve(J),function(Ee){return ve.call(J,Ee)}))}:Sr,Oo=Io;(ct&&Oo(new ct(new ArrayBuffer(1)))!=Se||Ft&&Oo(new Ft)!=N||jt&&Oo(jt.resolve())!=re||Gt&&Oo(new Gt)!=ne||nn&&Oo(new nn)!=pe)&&(Oo=function(J){var Ee=Io(J),st=Ee==$?J.constructor:void 0,Ht=st?Ni(st):"";if(Ht)switch(Ht){case Rn:return Se;case dr:return N;case Tr:return re;case or:return ne;case on:return pe}return Ee});function Wl(J,Ee){return Ee=Ee??l,!!Ee&&(typeof J=="number"||Dt.test(J))&&J>-1&&J%1==0&&J<Ee}function Di(J){var Ee=typeof J;return Ee=="string"||Ee=="number"||Ee=="symbol"||Ee=="boolean"?J!=="__proto__":J===null}function oA(J){return!!bt&&bt in J}function sA(J){var Ee=J&&J.constructor,st=typeof Ee=="function"&&Ee.prototype||We;return J===st}function za(J){return Yt.call(J)}function Ni(J){if(J!=null){try{return me.call(J)}catch{}try{return J+""}catch{}}return""}function uo(J,Ee){return J===Ee||J!==J&&Ee!==Ee}var $o=fs(function(){return arguments}())?fs:function(J){return Ii(J)&&et.call(J,"callee")&&!ve.call(J,"callee")},Vo=Array.isArray;function Hi(J){return J!=null&&sa(J.length)&&!Ss(J)}var Ea=Te||to;function pa(J,Ee){return fa(J,Ee)}function Ss(J){if(!EA(J))return!1;var Ee=Io(J);return Ee==P||Ee==U||Ee==C||Ee==te}function sa(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=l}function EA(J){var Ee=typeof J;return J!=null&&(Ee=="object"||Ee=="function")}function Ii(J){return J!=null&&typeof J=="object"}var Ho=Et?Vt(Et):zu;function Gi(J){return Hi(J)?fn(J):jl(J)}function Sr(){return[]}function to(){return!1}n.exports=pa}(rC,rC.exports)),rC.exports}var The=Ihe();const dB=Gl(The);function Ui(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ui=function(){return l},l}Ui();class khe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(Ui().b[0][0]++,{})){Ui().f[0]++,Ui().s[0]++,this.onSourcesChange=(Ui().b[1][0]++,e.onSourcesChange||(Ui().b[1][1]++,()=>{Ui().f[1]++})),Ui().s[1]++,this.onVectorLayersChange=(Ui().b[2][0]++,e.onVectorLayersChange||(Ui().b[2][1]++,()=>{Ui().f[2]++})),Ui().s[2]++,this._sources={},Ui().s[3]++,this._vectorLayers={},Ui().s[4]++,this.throttledAnalyzeVectorLayerFields=Ohe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Ui().f[3]++;const t=(Ui().s[5]++,{...this._sources});Ui().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Ui().f[4]++,Ui().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Ui().s[8]++,dB(t,this._sources)?Ui().b[3][1]++:(Ui().b[3][0]++,Ui().s[9]++,this.onSourcesChange(this._sources)),Ui().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Ui().f[5]++;const t=(Ui().s[11]++,{...this._vectorLayers});Ui().s[12]++,Object.keys(this._sources).forEach(r=>{Ui().f[6]++,Ui().s[13]++,(Ui().b[4][0]++,this._sources[r]||(Ui().b[4][1]++,[])).forEach(i=>{Ui().f[7]++;const s=(Ui().s[14]++,Ui().b[5][0]++,this._vectorLayers[i]||(Ui().b[5][1]++,{})),l=(Ui().s[15]++,{sourceLayer:i});Ui().s[16]++,e.querySourceFeatures(r,l).forEach(o=>{Ui().f[8]++,Ui().s[17]++,Object.keys(o.properties).forEach(f=>{Ui().f[9]++;const C=(Ui().s[18]++,Ui().b[6][0]++,s[f]||(Ui().b[6][1]++,{}));Ui().s[19]++,C[o.properties[f]]={},Ui().s[20]++,s[f]=C})}),Ui().s[21]++,this._vectorLayers[i]=s})}),Ui().s[22]++,dB(t,this._vectorLayers)?Ui().b[7][1]++:(Ui().b[7][0]++,Ui().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Ui().f[10]++,Ui().s[24]++,this._sources}get vectorLayers(){return Ui().f[11]++,Ui().s[25]++,this._vectorLayers}}function Zs(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zs=function(){return l},l}Zs();const vC=(Zs().s[0]++,{});function NI(){Zs().f[0]++;const n=(Zs().s[1]++,new URL(window.location.href).searchParams),e=(Zs().s[2]++,n.get("debug"));return Zs().s[3]++,e?(Zs().b[0][0]++,Zs().s[4]++,!!e.match(/^(|1|true)$/)):(Zs().b[0][1]++,Zs().s[5]++,!1)}function ej(){return Zs().f[1]++,Zs().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function Phe(n,e,t){if(Zs().f[2]++,Zs().s[7]++,NI())Zs().b[1][1]++;else throw Zs().b[1][0]++,Zs().s[8]++,ej();Zs().s[9]++,vC[n]=(Zs().b[2][0]++,vC[n]||(Zs().b[2][1]++,{})),Zs().s[10]++,vC[n][e]=t}function Rhe(n,e){if(Zs().f[3]++,Zs().s[11]++,NI())Zs().b[3][1]++;else throw Zs().b[3][0]++,Zs().s[12]++,ej();if(Zs().s[13]++,Object.prototype.hasOwnProperty.call(vC,n))return Zs().b[4][0]++,Zs().s[14]++,vC[n][e];Zs().b[4][1]++}const S1=(Zs().s[15]++,{enabled:NI,get:Rhe,set:Phe});Zs().s[16]++;window.debug=S1;function be(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="d520736031a58007b49b658801c6875af9cde4bb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:78,column:4},end:{line:78,column:17}},20:{start:{line:79,column:4},end:{line:79,column:45}},21:{start:{line:80,column:19},end:{line:80,column:75}},22:{start:{line:81,column:15},end:{line:81,column:38}},23:{start:{line:82,column:4},end:{line:84,column:5}},24:{start:{line:83,column:6},end:{line:83,column:34}},25:{start:{line:85,column:4},end:{line:89,column:7}},26:{start:{line:86,column:40},end:{line:86,column:86}},27:{start:{line:90,column:22},end:{line:141,column:5}},28:{start:{line:94,column:10},end:{line:94,column:40}},29:{start:{line:100,column:10},end:{line:100,column:35}},30:{start:{line:106,column:10},end:{line:106,column:37}},31:{start:{line:112,column:10},end:{line:112,column:38}},32:{start:{line:118,column:10},end:{line:118,column:39}},33:{start:{line:124,column:10},end:{line:126,column:12}},34:{start:{line:132,column:10},end:{line:132,column:63}},35:{start:{line:138,column:10},end:{line:138,column:36}},36:{start:{line:142,column:4},end:{line:155,column:7}},37:{start:{line:143,column:6},end:{line:154,column:7}},38:{start:{line:144,column:8},end:{line:144,column:24}},39:{start:{line:145,column:8},end:{line:145,column:30}},40:{start:{line:146,column:13},end:{line:154,column:7}},41:{start:{line:147,column:25},end:{line:149,column:10}},42:{start:{line:148,column:10},end:{line:148,column:41}},43:{start:{line:150,column:8},end:{line:153,column:9}},44:{start:{line:151,column:10},end:{line:151,column:44}},45:{start:{line:152,column:10},end:{line:152,column:29}},46:{start:{line:156,column:21},end:{line:156,column:38}},47:{start:{line:157,column:4},end:{line:176,column:5}},48:{start:{line:158,column:6},end:{line:158,column:41}},49:{start:{line:159,column:6},end:{line:159,column:74}},50:{start:{line:159,column:43},end:{line:159,column:72}},51:{start:{line:160,column:6},end:{line:160,column:31}},52:{start:{line:162,column:6},end:{line:164,column:7}},53:{start:{line:163,column:8},end:{line:163,column:33}},54:{start:{line:165,column:6},end:{line:175,column:9}},55:{start:{line:166,column:8},end:{line:169,column:9}},56:{start:{line:167,column:10},end:{line:167,column:74}},57:{start:{line:168,column:10},end:{line:168,column:45}},58:{start:{line:170,column:8},end:{line:170,column:104}},59:{start:{line:170,column:50},end:{line:170,column:102}},60:{start:{line:171,column:8},end:{line:174,column:9}},61:{start:{line:172,column:10},end:{line:172,column:63}},62:{start:{line:173,column:10},end:{line:173,column:69}},63:{start:{line:177,column:4},end:{line:180,column:5}},64:{start:{line:178,column:6},end:{line:178,column:65}},65:{start:{line:179,column:6},end:{line:179,column:59}},66:{start:{line:181,column:4},end:{line:215,column:6}},67:{start:{line:216,column:4},end:{line:218,column:7}},68:{start:{line:217,column:35},end:{line:217,column:69}},69:{start:{line:220,column:19},end:{line:238,column:3}},70:{start:{line:221,column:4},end:{line:237,column:5}},71:{start:{line:222,column:6},end:{line:228,column:7}},72:{start:{line:223,column:8},end:{line:223,column:27}},73:{start:{line:224,column:8},end:{line:224,column:22}},74:{start:{line:225,column:13},end:{line:228,column:7}},75:{start:{line:226,column:8},end:{line:226,column:27}},76:{start:{line:227,column:8},end:{line:227,column:22}},77:{start:{line:230,column:6},end:{line:236,column:7}},78:{start:{line:231,column:8},end:{line:231,column:27}},79:{start:{line:232,column:8},end:{line:232,column:22}},80:{start:{line:233,column:13},end:{line:236,column:7}},81:{start:{line:234,column:8},end:{line:234,column:27}},82:{start:{line:235,column:8},end:{line:235,column:22}},83:{start:{line:240,column:4},end:{line:240,column:60}},84:{start:{line:243,column:4},end:{line:243,column:63}},85:{start:{line:246,column:4},end:{line:246,column:40}},86:{start:{line:249,column:21},end:{line:249,column:55}},87:{start:{line:250,column:24},end:{line:250,column:93}},88:{start:{line:251,column:21},end:{line:251,column:110}},89:{start:{line:252,column:4},end:{line:254,column:7}},90:{start:{line:253,column:6},end:{line:253,column:80}},91:{start:{line:257,column:4},end:{line:259,column:7}},92:{start:{line:258,column:6},end:{line:258,column:80}},93:{start:{line:261,column:29},end:{line:275,column:3}},94:{start:{line:262,column:4},end:{line:266,column:5}},95:{start:{line:263,column:6},end:{line:265,column:9}},96:{start:{line:267,column:25},end:{line:273,column:5}},97:{start:{line:274,column:4},end:{line:274,column:38}},98:{start:{line:276,column:19},end:{line:399,column:3}},99:{start:{line:277,column:4},end:{line:282,column:6}},100:{start:{line:283,column:4},end:{line:285,column:5}},101:{start:{line:284,column:6},end:{line:284,column:71}},102:{start:{line:286,column:4},end:{line:288,column:5}},103:{start:{line:287,column:6},end:{line:287,column:71}},104:{start:{line:289,column:4},end:{line:293,column:5}},105:{start:{line:290,column:6},end:{line:292,column:7}},106:{start:{line:291,column:8},end:{line:291,column:63}},107:{start:{line:294,column:4},end:{line:296,column:5}},108:{start:{line:295,column:6},end:{line:295,column:44}},109:{start:{line:297,column:19},end:{line:297,column:51}},110:{start:{line:298,column:24},end:{line:298,column:26}},111:{start:{line:299,column:4},end:{line:310,column:5}},112:{start:{line:300,column:26},end:{line:300,column:42}},113:{start:{line:301,column:6},end:{line:309,column:9}},114:{start:{line:302,column:8},end:{line:307,column:9}},115:{start:{line:303,column:24},end:{line:305,column:11}},116:{start:{line:306,column:10},end:{line:306,column:34}},117:{start:{line:308,column:8},end:{line:308,column:40}},118:{start:{line:311,column:25},end:{line:362,column:6}},119:{start:{line:312,column:23},end:{line:312,column:109}},120:{start:{line:313,column:6},end:{line:326,column:7}},121:{start:{line:314,column:35},end:{line:314,column:43}},122:{start:{line:315,column:8},end:{line:325,column:10}},123:{start:{line:327,column:33},end:{line:327,column:100}},124:{start:{line:328,column:6},end:{line:341,column:7}},125:{start:{line:329,column:35},end:{line:329,column:53}},126:{start:{line:330,column:8},end:{line:340,column:10}},127:{start:{line:342,column:25},end:{line:342,column:88}},128:{start:{line:343,column:6},end:{line:361,column:7}},129:{start:{line:344,column:52},end:{line:344,column:62}},130:{start:{line:345,column:20},end:{line:345,column:78}},131:{start:{line:346,column:8},end:{line:356,column:10}},132:{start:{line:358,column:8},end:{line:360,column:10}},133:{start:{line:363,column:24},end:{line:363,column:30}},134:{start:{line:364,column:4},end:{line:378,column:5}},135:{start:{line:365,column:6},end:{line:365,column:42}},136:{start:{line:366,column:6},end:{line:377,column:9}},137:{start:{line:367,column:28},end:{line:367,column:33}},138:{start:{line:368,column:8},end:{line:376,column:9}},139:{start:{line:369,column:10},end:{line:375,column:11}},140:{start:{line:370,column:28},end:{line:370,column:49}},141:{start:{line:371,column:30},end:{line:371,column:69}},142:{start:{line:372,column:12},end:{line:372,column:44}},143:{start:{line:374,column:12},end:{line:374,column:30}},144:{start:{line:379,column:4},end:{line:381,column:5}},145:{start:{line:380,column:6},end:{line:380,column:40}},146:{start:{line:382,column:4},end:{line:384,column:5}},147:{start:{line:383,column:6},end:{line:383,column:40}},148:{start:{line:385,column:4},end:{line:387,column:5}},149:{start:{line:386,column:6},end:{line:386,column:47}},150:{start:{line:388,column:4},end:{line:390,column:5}},151:{start:{line:389,column:6},end:{line:389,column:31}},152:{start:{line:391,column:4},end:{line:398,column:7}},153:{start:{line:396,column:6},end:{line:396,column:26}},154:{start:{line:397,column:6},end:{line:397,column:27}},155:{start:{line:400,column:11},end:{line:407,column:3}},156:{start:{line:401,column:24},end:{line:401,column:49}},157:{start:{line:402,column:21},end:{line:402,column:67}},158:{start:{line:403,column:4},end:{line:403,column:61}},159:{start:{line:404,column:4},end:{line:406,column:7}},160:{start:{line:408,column:11},end:{line:415,column:3}},161:{start:{line:409,column:24},end:{line:409,column:49}},162:{start:{line:410,column:21},end:{line:410,column:67}},163:{start:{line:411,column:4},end:{line:411,column:61}},164:{start:{line:412,column:4},end:{line:414,column:7}},165:{start:{line:416,column:16},end:{line:430,column:3}},166:{start:{line:417,column:33},end:{line:417,column:37}},167:{start:{line:418,column:17},end:{line:418,column:43}},168:{start:{line:419,column:4},end:{line:419,column:53}},169:{start:{line:420,column:4},end:{line:420,column:53}},170:{start:{line:421,column:4},end:{line:421,column:38}},171:{start:{line:421,column:31},end:{line:421,column:38}},172:{start:{line:422,column:4},end:{line:426,column:5}},173:{start:{line:423,column:6},end:{line:425,column:9}},174:{start:{line:427,column:4},end:{line:427,column:29}},175:{start:{line:428,column:4},end:{line:428,column:49}},176:{start:{line:429,column:4},end:{line:429,column:32}},177:{start:{line:431,column:19},end:{line:437,column:3}},178:{start:{line:432,column:25},end:{line:435,column:5}},179:{start:{line:436,column:4},end:{line:436,column:38}},180:{start:{line:438,column:19},end:{line:443,column:3}},181:{start:{line:439,column:19},end:{line:439,column:45}},182:{start:{line:440,column:28},end:{line:440,column:43}},183:{start:{line:441,column:4},end:{line:441,column:37}},184:{start:{line:442,column:4},end:{line:442,column:41}},185:{start:{line:444,column:16},end:{line:451,column:3}},186:{start:{line:445,column:19},end:{line:445,column:45}},187:{start:{line:446,column:26},end:{line:446,column:41}},188:{start:{line:447,column:24},end:{line:447,column:55}},189:{start:{line:448,column:4},end:{line:448,column:46}},190:{start:{line:449,column:4},end:{line:449,column:48}},191:{start:{line:450,column:4},end:{line:450,column:39}},192:{start:{line:452,column:28},end:{line:461,column:3}},193:{start:{line:453,column:19},end:{line:453,column:45}},194:{start:{line:454,column:26},end:{line:454,column:41}},195:{start:{line:455,column:18},end:{line:455,column:45}},196:{start:{line:456,column:26},end:{line:456,column:70}},197:{start:{line:457,column:4},end:{line:457,column:88}},198:{start:{line:458,column:4},end:{line:458,column:33}},199:{start:{line:459,column:4},end:{line:459,column:33}},200:{start:{line:460,column:4},end:{line:460,column:39}},201:{start:{line:462,column:20},end:{line:469,column:3}},202:{start:{line:463,column:26},end:{line:463,column:61}},203:{start:{line:464,column:4},end:{line:467,column:6}},204:{start:{line:468,column:4},end:{line:468,column:39}},205:{start:{line:470,column:19},end:{line:474,column:3}},206:{start:{line:471,column:26},end:{line:471,column:61}},207:{start:{line:472,column:4},end:{line:472,column:33}},208:{start:{line:473,column:4},end:{line:473,column:39}},209:{start:{line:475,column:16},end:{line:479,column:3}},210:{start:{line:476,column:4},end:{line:478,column:27}},211:{start:{line:480,column:21},end:{line:494,column:3}},212:{start:{line:481,column:21},end:{line:481,column:44}},213:{start:{line:482,column:4},end:{line:493,column:5}},214:{start:{line:483,column:27},end:{line:489,column:7}},215:{start:{line:490,column:6},end:{line:490,column:26}},216:{start:{line:492,column:6},end:{line:492,column:22}},217:{start:{line:495,column:14},end:{line:499,column:3}},218:{start:{line:496,column:4},end:{line:496,column:34}},219:{start:{line:497,column:4},end:{line:497,column:47}},220:{start:{line:498,column:4},end:{line:498,column:34}},221:{start:{line:501,column:23},end:{line:501,column:25}},222:{start:{line:502,column:4},end:{line:542,column:5}},223:{start:{line:503,column:6},end:{line:541,column:7}},224:{start:{line:504,column:8},end:{line:507,column:10}},225:{start:{line:508,column:18},end:{line:508,column:25}},226:{start:{line:509,column:8},end:{line:513,column:9}},227:{start:{line:510,column:10},end:{line:510,column:62}},228:{start:{line:512,column:10},end:{line:512,column:63}},229:{start:{line:514,column:32},end:{line:527,column:9}},230:{start:{line:515,column:10},end:{line:517,column:11}},231:{start:{line:516,column:12},end:{line:516,column:19}},232:{start:{line:518,column:26},end:{line:520,column:12}},233:{start:{line:521,column:10},end:{line:523,column:11}},234:{start:{line:522,column:12},end:{line:522,column:47}},235:{start:{line:524,column:10},end:{line:526,column:13}},236:{start:{line:528,column:8},end:{line:538,column:9}},237:{start:{line:529,column:10},end:{line:531,column:13}},238:{start:{line:529,column:69},end:{line:529,column:90}},239:{start:{line:530,column:12},end:{line:530,column:74}},240:{start:{line:533,column:10},end:{line:537,column:13}},241:{start:{line:535,column:32},end:{line:535,column:47}},242:{start:{line:535,column:64},end:{line:535,column:85}},243:{start:{line:536,column:12},end:{line:536,column:74}},244:{start:{line:540,column:8},end:{line:540,column:86}},245:{start:{line:543,column:4},end:{line:548,column:5}},246:{start:{line:544,column:6},end:{line:544,column:39}},247:{start:{line:545,column:6},end:{line:547,column:9}},248:{start:{line:551,column:21},end:{line:551,column:55}},249:{start:{line:552,column:4},end:{line:552,column:53}},250:{start:{line:554,column:16},end:{line:558,column:3}},251:{start:{line:555,column:4},end:{line:557,column:7}},252:{start:{line:560,column:40},end:{line:560,column:50}},253:{start:{line:561,column:21},end:{line:572,column:5}},254:{start:{line:564,column:8},end:{line:566,column:11}},255:{start:{line:569,column:8},end:{line:569,column:44}},256:{start:{line:570,column:8},end:{line:570,column:28}},257:{start:{line:573,column:21},end:{line:573,column:40}},258:{start:{line:575,column:4},end:{line:597,column:5}},259:{start:{line:576,column:6},end:{line:584,column:8}},260:{start:{line:586,column:6},end:{line:596,column:8}},261:{start:{line:599,column:4},end:{line:601,column:5}},262:{start:{line:600,column:6},end:{line:600,column:63}},263:{start:{line:602,column:25},end:{line:602,column:27}},264:{start:{line:603,column:4},end:{line:605,column:5}},265:{start:{line:604,column:6},end:{line:604,column:52}},266:{start:{line:606,column:4},end:{line:606,column:160}},267:{start:{line:608,column:18},end:{line:626,column:3}},268:{start:{line:609,column:43},end:{line:609,column:53}},269:{start:{line:610,column:35},end:{line:610,column:45}},270:{start:{line:611,column:16},end:{line:611,column:38}},271:{start:{line:612,column:20},end:{line:612,column:50}},272:{start:{line:613,column:4},end:{line:613,column:70}},273:{start:{line:614,column:23},end:{line:614,column:122}},274:{start:{line:614,column:66},end:{line:614,column:91}},275:{start:{line:614,column:109},end:{line:614,column:121}},276:{start:{line:615,column:4},end:{line:619,column:5}},277:{start:{line:616,column:6},end:{line:616,column:58}},278:{start:{line:618,column:6},end:{line:618,column:39}},279:{start:{line:620,column:4},end:{line:624,column:5}},280:{start:{line:621,column:6},end:{line:621,column:38}},281:{start:{line:622,column:11},end:{line:624,column:5}},282:{start:{line:623,column:6},end:{line:623,column:46}},283:{start:{line:625,column:4},end:{line:625,column:71}},284:{start:{line:627,column:27},end:{line:672,column:3}},285:{start:{line:628,column:16},end:{line:628,column:38}},286:{start:{line:629,column:23},end:{line:629,column:52}},287:{start:{line:630,column:4},end:{line:642,column:5}},288:{start:{line:631,column:21},end:{line:631,column:42}},289:{start:{line:632,column:23},end:{line:632,column:25}},290:{start:{line:633,column:6},end:{line:635,column:9}},291:{start:{line:634,column:8},end:{line:634,column:35}},292:{start:{line:636,column:6},end:{line:641,column:9}},293:{start:{line:643,column:17},end:{line:643,column:45}},294:{start:{line:644,column:4},end:{line:646,column:5}},295:{start:{line:645,column:6},end:{line:645,column:29}},296:{start:{line:647,column:17},end:{line:647,column:46}},297:{start:{line:648,column:4},end:{line:671,column:5}},298:{start:{line:649,column:6},end:{line:670,column:7}},299:{start:{line:650,column:22},end:{line:650,column:37}},300:{start:{line:651,column:46},end:{line:654,column:9}},301:{start:{line:655,column:20},end:{line:655,column:24}},302:{start:{line:656,column:8},end:{line:661,column:9}},303:{start:{line:657,column:33},end:{line:657,column:63}},304:{start:{line:658,column:10},end:{line:660,column:11}},305:{start:{line:659,column:12},end:{line:659,column:26}},306:{start:{line:662,column:8},end:{line:667,column:9}},307:{start:{line:663,column:10},end:{line:666,column:13}},308:{start:{line:669,column:8},end:{line:669,column:26}},309:{start:{line:673,column:18},end:{line:678,column:3}},310:{start:{line:674,column:4},end:{line:677,column:27}},311:{start:{line:680,column:4},end:{line:685,column:27}},312:{start:{line:688,column:4},end:{line:688,column:60}},313:{start:{line:690,column:20},end:{line:692,column:3}},314:{start:{line:691,column:4},end:{line:691,column:34}},315:{start:{line:693,column:28},end:{line:700,column:3}},316:{start:{line:694,column:4},end:{line:699,column:7}},317:{start:{line:701,column:28},end:{line:708,column:3}},318:{start:{line:702,column:4},end:{line:707,column:7}},319:{start:{line:710,column:19},end:{line:710,column:51}},320:{start:{line:711,column:26},end:{line:711,column:92}},321:{start:{line:712,column:36},end:{line:725,column:5}},322:{start:{line:726,column:38},end:{line:740,column:5}},323:{start:{line:741,column:24},end:{line:760,column:14}},324:{start:{line:761,column:24},end:{line:771,column:14}},325:{start:{line:772,column:35},end:{line:832,column:8}},326:{start:{line:833,column:4},end:{line:843,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:219,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:86,column:26},end:{line:86,column:27}},loc:{start:{line:86,column:40},end:{line:86,column:86}},line:86},4:{name:"(anonymous_4)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:9}},line:93},5:{name:"(anonymous_5)",decl:{start:{line:99,column:17},end:{line:99,column:18}},loc:{start:{line:99,column:23},end:{line:101,column:9}},line:99},6:{name:"(anonymous_6)",decl:{start:{line:105,column:17},end:{line:105,column:18}},loc:{start:{line:105,column:23},end:{line:107,column:9}},line:105},7:{name:"(anonymous_7)",decl:{start:{line:111,column:17},end:{line:111,column:18}},loc:{start:{line:111,column:23},end:{line:113,column:9}},line:111},8:{name:"(anonymous_8)",decl:{start:{line:117,column:17},end:{line:117,column:18}},loc:{start:{line:117,column:23},end:{line:119,column:9}},line:117},9:{name:"(anonymous_9)",decl:{start:{line:123,column:17},end:{line:123,column:18}},loc:{start:{line:123,column:23},end:{line:127,column:9}},line:123},10:{name:"(anonymous_10)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},11:{name:"(anonymous_11)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},12:{name:"(anonymous_12)",decl:{start:{line:142,column:44},end:{line:142,column:45}},loc:{start:{line:142,column:51},end:{line:155,column:5}},line:142},13:{name:"(anonymous_13)",decl:{start:{line:147,column:40},end:{line:147,column:41}},loc:{start:{line:147,column:55},end:{line:149,column:9}},line:147},14:{name:"(anonymous_14)",decl:{start:{line:159,column:29},end:{line:159,column:30}},loc:{start:{line:159,column:43},end:{line:159,column:72}},line:159},15:{name:"(anonymous_15)",decl:{start:{line:165,column:27},end:{line:165,column:28}},loc:{start:{line:165,column:36},end:{line:175,column:7}},line:165},16:{name:"(anonymous_16)",decl:{start:{line:170,column:36},end:{line:170,column:37}},loc:{start:{line:170,column:50},end:{line:170,column:102}},line:170},17:{name:"(anonymous_17)",decl:{start:{line:217,column:28},end:{line:217,column:29}},loc:{start:{line:217,column:35},end:{line:217,column:69}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:220,column:19},end:{line:220,column:20}},loc:{start:{line:220,column:26},end:{line:238,column:3}},line:220},19:{name:"(anonymous_19)",decl:{start:{line:239,column:2},end:{line:239,column:3}},loc:{start:{line:239,column:22},end:{line:241,column:3}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:242,column:2},end:{line:242,column:3}},loc:{start:{line:242,column:25},end:{line:244,column:3}},line:242},21:{name:"(anonymous_21)",decl:{start:{line:245,column:2},end:{line:245,column:3}},loc:{start:{line:245,column:27},end:{line:247,column:3}},line:245},22:{name:"(anonymous_22)",decl:{start:{line:248,column:2},end:{line:248,column:3}},loc:{start:{line:248,column:27},end:{line:255,column:3}},line:248},23:{name:"(anonymous_23)",decl:{start:{line:252,column:37},end:{line:252,column:38}},loc:{start:{line:252,column:48},end:{line:254,column:5}},line:252},24:{name:"(anonymous_24)",decl:{start:{line:256,column:2},end:{line:256,column:3}},loc:{start:{line:256,column:23},end:{line:260,column:3}},line:256},25:{name:"(anonymous_25)",decl:{start:{line:257,column:36},end:{line:257,column:37}},loc:{start:{line:257,column:47},end:{line:259,column:5}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:261,column:29},end:{line:261,column:30}},loc:{start:{line:261,column:50},end:{line:275,column:3}},line:261},27:{name:"(anonymous_27)",decl:{start:{line:276,column:19},end:{line:276,column:20}},loc:{start:{line:276,column:44},end:{line:399,column:3}},line:276},28:{name:"(anonymous_28)",decl:{start:{line:301,column:30},end:{line:301,column:31}},loc:{start:{line:301,column:48},end:{line:309,column:7}},line:301},29:{name:"(anonymous_29)",decl:{start:{line:311,column:56},end:{line:311,column:57}},loc:{start:{line:311,column:67},end:{line:362,column:5}},line:311},30:{name:"(anonymous_30)",decl:{start:{line:366,column:21},end:{line:366,column:22}},loc:{start:{line:366,column:32},end:{line:377,column:7}},line:366},31:{name:"(anonymous_31)",decl:{start:{line:395,column:7},end:{line:395,column:8}},loc:{start:{line:395,column:13},end:{line:398,column:5}},line:395},32:{name:"(anonymous_32)",decl:{start:{line:400,column:11},end:{line:400,column:12}},loc:{start:{line:400,column:17},end:{line:407,column:3}},line:400},33:{name:"(anonymous_33)",decl:{start:{line:408,column:11},end:{line:408,column:12}},loc:{start:{line:408,column:17},end:{line:415,column:3}},line:408},34:{name:"(anonymous_34)",decl:{start:{line:416,column:16},end:{line:416,column:17}},loc:{start:{line:416,column:26},end:{line:430,column:3}},line:416},35:{name:"(anonymous_35)",decl:{start:{line:431,column:19},end:{line:431,column:20}},loc:{start:{line:431,column:38},end:{line:437,column:3}},line:431},36:{name:"(anonymous_36)",decl:{start:{line:438,column:19},end:{line:438,column:20}},loc:{start:{line:438,column:30},end:{line:443,column:3}},line:438},37:{name:"(anonymous_37)",decl:{start:{line:444,column:16},end:{line:444,column:17}},loc:{start:{line:444,column:27},end:{line:451,column:3}},line:444},38:{name:"(anonymous_38)",decl:{start:{line:452,column:28},end:{line:452,column:29}},loc:{start:{line:452,column:39},end:{line:461,column:3}},line:452},39:{name:"(anonymous_39)",decl:{start:{line:462,column:20},end:{line:462,column:21}},loc:{start:{line:462,column:46},end:{line:469,column:3}},line:462},40:{name:"(anonymous_40)",decl:{start:{line:470,column:19},end:{line:470,column:20}},loc:{start:{line:470,column:37},end:{line:474,column:3}},line:470},41:{name:"(anonymous_41)",decl:{start:{line:475,column:16},end:{line:475,column:17}},loc:{start:{line:475,column:30},end:{line:479,column:3}},line:475},42:{name:"(anonymous_42)",decl:{start:{line:480,column:21},end:{line:480,column:22}},loc:{start:{line:480,column:35},end:{line:494,column:3}},line:480},43:{name:"(anonymous_43)",decl:{start:{line:495,column:14},end:{line:495,column:15}},loc:{start:{line:495,column:40},end:{line:499,column:3}},line:495},44:{name:"(anonymous_44)",decl:{start:{line:500,column:2},end:{line:500,column:3}},loc:{start:{line:500,column:17},end:{line:549,column:3}},line:500},45:{name:"(anonymous_45)",decl:{start:{line:514,column:32},end:{line:514,column:33}},loc:{start:{line:514,column:42},end:{line:527,column:9}},line:514},46:{name:"(anonymous_46)",decl:{start:{line:529,column:59},end:{line:529,column:60}},loc:{start:{line:529,column:69},end:{line:529,column:90}},line:529},47:{name:"(anonymous_47)",decl:{start:{line:529,column:98},end:{line:529,column:99}},loc:{start:{line:529,column:107},end:{line:531,column:11}},line:529},48:{name:"(anonymous_48)",decl:{start:{line:535,column:18},end:{line:535,column:19}},loc:{start:{line:535,column:32},end:{line:535,column:47}},line:535},49:{name:"(anonymous_49)",decl:{start:{line:535,column:54},end:{line:535,column:55}},loc:{start:{line:535,column:64},end:{line:535,column:85}},line:535},50:{name:"(anonymous_50)",decl:{start:{line:535,column:93},end:{line:535,column:94}},loc:{start:{line:535,column:102},end:{line:537,column:11}},line:535},51:{name:"(anonymous_51)",decl:{start:{line:550,column:2},end:{line:550,column:3}},loc:{start:{line:550,column:17},end:{line:553,column:3}},line:550},52:{name:"(anonymous_52)",decl:{start:{line:554,column:16},end:{line:554,column:17}},loc:{start:{line:554,column:29},end:{line:558,column:3}},line:554},53:{name:"(anonymous_53)",decl:{start:{line:559,column:2},end:{line:559,column:3}},loc:{start:{line:559,column:16},end:{line:607,column:3}},line:559},54:{name:"(anonymous_54)",decl:{start:{line:563,column:27},end:{line:563,column:28}},loc:{start:{line:563,column:42},end:{line:567,column:7}},line:563},55:{name:"(anonymous_55)",decl:{start:{line:568,column:20},end:{line:568,column:21}},loc:{start:{line:568,column:27},end:{line:571,column:7}},line:568},56:{name:"(anonymous_56)",decl:{start:{line:608,column:18},end:{line:608,column:19}},loc:{start:{line:608,column:24},end:{line:626,column:3}},line:608},57:{name:"(anonymous_57)",decl:{start:{line:614,column:50},end:{line:614,column:51}},loc:{start:{line:614,column:66},end:{line:614,column:91}},line:614},58:{name:"(anonymous_58)",decl:{start:{line:614,column:100},end:{line:614,column:101}},loc:{start:{line:614,column:109},end:{line:614,column:121}},line:614},59:{name:"(anonymous_59)",decl:{start:{line:627,column:27},end:{line:627,column:28}},loc:{start:{line:627,column:41},end:{line:672,column:3}},line:627},60:{name:"(anonymous_60)",decl:{start:{line:633,column:21},end:{line:633,column:22}},loc:{start:{line:633,column:36},end:{line:635,column:7}},line:633},61:{name:"(anonymous_61)",decl:{start:{line:673,column:18},end:{line:673,column:19}},loc:{start:{line:673,column:29},end:{line:678,column:3}},line:673},62:{name:"(anonymous_62)",decl:{start:{line:679,column:2},end:{line:679,column:3}},loc:{start:{line:679,column:29},end:{line:686,column:3}},line:679},63:{name:"(anonymous_63)",decl:{start:{line:687,column:2},end:{line:687,column:3}},loc:{start:{line:687,column:25},end:{line:689,column:3}},line:687},64:{name:"(anonymous_64)",decl:{start:{line:690,column:20},end:{line:690,column:21}},loc:{start:{line:690,column:36},end:{line:692,column:3}},line:690},65:{name:"(anonymous_65)",decl:{start:{line:693,column:28},end:{line:693,column:29}},loc:{start:{line:693,column:44},end:{line:700,column:3}},line:693},66:{name:"(anonymous_66)",decl:{start:{line:701,column:28},end:{line:701,column:29}},loc:{start:{line:701,column:44},end:{line:708,column:3}},line:701},67:{name:"(anonymous_67)",decl:{start:{line:709,column:2},end:{line:709,column:3}},loc:{start:{line:709,column:11},end:{line:844,column:3}},line:709}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:82,column:4},end:{line:84,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:84,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},8:{loc:{start:{line:82,column:8},end:{line:82,column:89}},type:"binary-expr",locations:[{start:{line:82,column:8},end:{line:82,column:20}},{start:{line:82,column:25},end:{line:82,column:54}},{start:{line:82,column:58},end:{line:82,column:88}}],line:82},9:{loc:{start:{line:125,column:12},end:{line:125,column:61}},type:"cond-expr",locations:[{start:{line:125,column:44},end:{line:125,column:53}},{start:{line:125,column:56},end:{line:125,column:61}}],line:125},10:{loc:{start:{line:143,column:6},end:{line:154,column:7}},type:"if",locations:[{start:{line:143,column:6},end:{line:154,column:7}},{start:{line:146,column:13},end:{line:154,column:7}}],line:143},11:{loc:{start:{line:146,column:13},end:{line:154,column:7}},type:"if",locations:[{start:{line:146,column:13},end:{line:154,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:146,column:17},end:{line:146,column:88}},type:"binary-expr",locations:[{start:{line:146,column:17},end:{line:146,column:44}},{start:{line:146,column:48},end:{line:146,column:88}}],line:146},13:{loc:{start:{line:150,column:8},end:{line:153,column:9}},type:"if",locations:[{start:{line:150,column:8},end:{line:153,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:150},14:{loc:{start:{line:157,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:176,column:5}},{start:{line:161,column:11},end:{line:176,column:5}}],line:157},15:{loc:{start:{line:157,column:8},end:{line:157,column:104}},type:"binary-expr",locations:[{start:{line:157,column:8},end:{line:157,column:16}},{start:{line:157,column:20},end:{line:157,column:104}}],line:157},16:{loc:{start:{line:162,column:6},end:{line:164,column:7}},type:"if",locations:[{start:{line:162,column:6},end:{line:164,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},17:{loc:{start:{line:166,column:8},end:{line:169,column:9}},type:"if",locations:[{start:{line:166,column:8},end:{line:169,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:166},18:{loc:{start:{line:171,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:174,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},19:{loc:{start:{line:177,column:4},end:{line:180,column:5}},type:"if",locations:[{start:{line:177,column:4},end:{line:180,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},20:{loc:{start:{line:221,column:4},end:{line:237,column:5}},type:"if",locations:[{start:{line:221,column:4},end:{line:237,column:5}},{start:{line:229,column:11},end:{line:237,column:5}}],line:221},21:{loc:{start:{line:222,column:6},end:{line:228,column:7}},type:"if",locations:[{start:{line:222,column:6},end:{line:228,column:7}},{start:{line:225,column:13},end:{line:228,column:7}}],line:222},22:{loc:{start:{line:222,column:10},end:{line:222,column:53}},type:"binary-expr",locations:[{start:{line:222,column:10},end:{line:222,column:19}},{start:{line:222,column:23},end:{line:222,column:33}},{start:{line:222,column:37},end:{line:222,column:53}}],line:222},23:{loc:{start:{line:225,column:13},end:{line:228,column:7}},type:"if",locations:[{start:{line:225,column:13},end:{line:228,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:225},24:{loc:{start:{line:225,column:17},end:{line:225,column:46}},type:"binary-expr",locations:[{start:{line:225,column:17},end:{line:225,column:26}},{start:{line:225,column:30},end:{line:225,column:46}}],line:225},25:{loc:{start:{line:230,column:6},end:{line:236,column:7}},type:"if",locations:[{start:{line:230,column:6},end:{line:236,column:7}},{start:{line:233,column:13},end:{line:236,column:7}}],line:230},26:{loc:{start:{line:230,column:10},end:{line:230,column:39}},type:"binary-expr",locations:[{start:{line:230,column:10},end:{line:230,column:19}},{start:{line:230,column:23},end:{line:230,column:39}}],line:230},27:{loc:{start:{line:233,column:13},end:{line:236,column:7}},type:"if",locations:[{start:{line:233,column:13},end:{line:236,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:233},28:{loc:{start:{line:233,column:17},end:{line:233,column:46}},type:"binary-expr",locations:[{start:{line:233,column:17},end:{line:233,column:26}},{start:{line:233,column:30},end:{line:233,column:46}}],line:233},29:{loc:{start:{line:249,column:21},end:{line:249,column:55}},type:"binary-expr",locations:[{start:{line:249,column:21},end:{line:249,column:49}},{start:{line:249,column:53},end:{line:249,column:55}}],line:249},30:{loc:{start:{line:250,column:24},end:{line:250,column:93}},type:"binary-expr",locations:[{start:{line:250,column:24},end:{line:250,column:70}},{start:{line:250,column:74},end:{line:250,column:93}}],line:250},31:{loc:{start:{line:251,column:21},end:{line:251,column:110}},type:"cond-expr",locations:[{start:{line:251,column:55},end:{line:251,column:96}},{start:{line:251,column:99},end:{line:251,column:110}}],line:251},32:{loc:{start:{line:262,column:4},end:{line:266,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:266,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},33:{loc:{start:{line:262,column:8},end:{line:262,column:123}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:40}},{start:{line:262,column:44},end:{line:262,column:123}}],line:262},34:{loc:{start:{line:276,column:30},end:{line:276,column:39}},type:"default-arg",locations:[{start:{line:276,column:37},end:{line:276,column:39}}],line:276},35:{loc:{start:{line:283,column:4},end:{line:285,column:5}},type:"if",locations:[{start:{line:283,column:4},end:{line:285,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:283},36:{loc:{start:{line:283,column:8},end:{line:283,column:62}},type:"binary-expr",locations:[{start:{line:283,column:8},end:{line:283,column:23}},{start:{line:283,column:27},end:{line:283,column:62}}],line:283},37:{loc:{start:{line:286,column:4},end:{line:288,column:5}},type:"if",locations:[{start:{line:286,column:4},end:{line:288,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:8},end:{line:286,column:62}},type:"binary-expr",locations:[{start:{line:286,column:8},end:{line:286,column:23}},{start:{line:286,column:27},end:{line:286,column:62}}],line:286},39:{loc:{start:{line:290,column:6},end:{line:292,column:7}},type:"if",locations:[{start:{line:290,column:6},end:{line:292,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:290},40:{loc:{start:{line:290,column:10},end:{line:290,column:69}},type:"binary-expr",locations:[{start:{line:290,column:10},end:{line:290,column:16}},{start:{line:290,column:20},end:{line:290,column:35}},{start:{line:290,column:39},end:{line:290,column:69}}],line:290},41:{loc:{start:{line:294,column:4},end:{line:296,column:5}},type:"if",locations:[{start:{line:294,column:4},end:{line:296,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:294},42:{loc:{start:{line:297,column:19},end:{line:297,column:51}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:51}}],line:297},43:{loc:{start:{line:299,column:4},end:{line:310,column:5}},type:"if",locations:[{start:{line:299,column:4},end:{line:310,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:299},44:{loc:{start:{line:299,column:8},end:{line:299,column:35}},type:"binary-expr",locations:[{start:{line:299,column:8},end:{line:299,column:16}},{start:{line:299,column:20},end:{line:299,column:35}}],line:299},45:{loc:{start:{line:302,column:8},end:{line:307,column:9}},type:"if",locations:[{start:{line:302,column:8},end:{line:307,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:302},46:{loc:{start:{line:302,column:12},end:{line:302,column:56}},type:"binary-expr",locations:[{start:{line:302,column:12},end:{line:302,column:27}},{start:{line:302,column:31},end:{line:302,column:56}}],line:302},47:{loc:{start:{line:313,column:6},end:{line:326,column:7}},type:"if",locations:[{start:{line:313,column:6},end:{line:326,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:313},48:{loc:{start:{line:328,column:6},end:{line:341,column:7}},type:"if",locations:[{start:{line:328,column:6},end:{line:341,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:328},49:{loc:{start:{line:343,column:6},end:{line:361,column:7}},type:"if",locations:[{start:{line:343,column:6},end:{line:361,column:7}},{start:{line:357,column:13},end:{line:361,column:7}}],line:343},50:{loc:{start:{line:345,column:20},end:{line:345,column:78}},type:"cond-expr",locations:[{start:{line:345,column:40},end:{line:345,column:67}},{start:{line:345,column:70},end:{line:345,column:78}}],line:345},51:{loc:{start:{line:345,column:20},end:{line:345,column:37}},type:"binary-expr",locations:[{start:{line:345,column:20},end:{line:345,column:25}},{start:{line:345,column:29},end:{line:345,column:37}}],line:345},52:{loc:{start:{line:364,column:4},end:{line:378,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:378,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},53:{loc:{start:{line:368,column:8},end:{line:376,column:9}},type:"if",locations:[{start:{line:368,column:8},end:{line:376,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:368},54:{loc:{start:{line:379,column:4},end:{line:381,column:5}},type:"if",locations:[{start:{line:379,column:4},end:{line:381,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:379},55:{loc:{start:{line:382,column:4},end:{line:384,column:5}},type:"if",locations:[{start:{line:382,column:4},end:{line:384,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:382},56:{loc:{start:{line:385,column:4},end:{line:387,column:5}},type:"if",locations:[{start:{line:385,column:4},end:{line:387,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:385},57:{loc:{start:{line:388,column:4},end:{line:390,column:5}},type:"if",locations:[{start:{line:388,column:4},end:{line:390,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:388},58:{loc:{start:{line:421,column:4},end:{line:421,column:38}},type:"if",locations:[{start:{line:421,column:4},end:{line:421,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:421},59:{loc:{start:{line:422,column:4},end:{line:426,column:5}},type:"if",locations:[{start:{line:422,column:4},end:{line:426,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:422},60:{loc:{start:{line:456,column:26},end:{line:456,column:70}},type:"cond-expr",locations:[{start:{line:456,column:46},end:{line:456,column:65}},{start:{line:456,column:68},end:{line:456,column:70}}],line:456},61:{loc:{start:{line:457,column:31},end:{line:457,column:87}},type:"cond-expr",locations:[{start:{line:457,column:69},end:{line:457,column:78}},{start:{line:457,column:81},end:{line:457,column:87}}],line:457},62:{loc:{start:{line:481,column:21},end:{line:481,column:44}},type:"binary-expr",locations:[{start:{line:481,column:21},end:{line:481,column:38}},{start:{line:481,column:42},end:{line:481,column:44}}],line:481},63:{loc:{start:{line:482,column:4},end:{line:493,column:5}},type:"if",locations:[{start:{line:482,column:4},end:{line:493,column:5}},{start:{line:491,column:11},end:{line:493,column:5}}],line:482},64:{loc:{start:{line:503,column:6},end:{line:541,column:7}},type:"if",locations:[{start:{line:503,column:6},end:{line:541,column:7}},{start:{line:539,column:13},end:{line:541,column:7}}],line:503},65:{loc:{start:{line:503,column:10},end:{line:503,column:149}},type:"binary-expr",locations:[{start:{line:503,column:10},end:{line:503,column:72}},{start:{line:503,column:76},end:{line:503,column:97}},{start:{line:503,column:101},end:{line:503,column:149}}],line:503},66:{loc:{start:{line:515,column:10},end:{line:517,column:11}},type:"if",locations:[{start:{line:515,column:10},end:{line:517,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:515},67:{loc:{start:{line:528,column:8},end:{line:538,column:9}},type:"if",locations:[{start:{line:528,column:8},end:{line:538,column:9}},{start:{line:532,column:15},end:{line:538,column:9}}],line:528},68:{loc:{start:{line:540,column:26},end:{line:540,column:85}},type:"binary-expr",locations:[{start:{line:540,column:26},end:{line:540,column:49}},{start:{line:540,column:53},end:{line:540,column:85}}],line:540},69:{loc:{start:{line:543,column:4},end:{line:548,column:5}},type:"if",locations:[{start:{line:543,column:4},end:{line:548,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:543},70:{loc:{start:{line:551,column:21},end:{line:551,column:55}},type:"binary-expr",locations:[{start:{line:551,column:21},end:{line:551,column:49}},{start:{line:551,column:53},end:{line:551,column:55}}],line:551},71:{loc:{start:{line:552,column:11},end:{line:552,column:52}},type:"binary-expr",locations:[{start:{line:552,column:11},end:{line:552,column:40}},{start:{line:552,column:44},end:{line:552,column:52}}],line:552},72:{loc:{start:{line:562,column:16},end:{line:562,column:41}},type:"binary-expr",locations:[{start:{line:562,column:16},end:{line:562,column:29}},{start:{line:562,column:33},end:{line:562,column:41}}],line:562},73:{loc:{start:{line:575,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:575,column:4},end:{line:597,column:5}},{start:{line:585,column:11},end:{line:597,column:5}}],line:575},74:{loc:{start:{line:599,column:4},end:{line:601,column:5}},type:"if",locations:[{start:{line:599,column:4},end:{line:601,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:599},75:{loc:{start:{line:603,column:4},end:{line:605,column:5}},type:"if",locations:[{start:{line:603,column:4},end:{line:605,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:603},76:{loc:{start:{line:614,column:66},end:{line:614,column:91}},type:"cond-expr",locations:[{start:{line:614,column:81},end:{line:614,column:84}},{start:{line:614,column:87},end:{line:614,column:91}}],line:614},77:{loc:{start:{line:615,column:4},end:{line:619,column:5}},type:"if",locations:[{start:{line:615,column:4},end:{line:619,column:5}},{start:{line:617,column:11},end:{line:619,column:5}}],line:615},78:{loc:{start:{line:620,column:4},end:{line:624,column:5}},type:"if",locations:[{start:{line:620,column:4},end:{line:624,column:5}},{start:{line:622,column:11},end:{line:624,column:5}}],line:620},79:{loc:{start:{line:622,column:11},end:{line:624,column:5}},type:"if",locations:[{start:{line:622,column:11},end:{line:624,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:622},80:{loc:{start:{line:630,column:4},end:{line:642,column:5}},type:"if",locations:[{start:{line:630,column:4},end:{line:642,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:630},81:{loc:{start:{line:630,column:8},end:{line:630,column:39}},type:"binary-expr",locations:[{start:{line:630,column:8},end:{line:630,column:18}},{start:{line:630,column:22},end:{line:630,column:39}}],line:630},82:{loc:{start:{line:644,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:644,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:644},83:{loc:{start:{line:644,column:8},end:{line:644,column:27}},type:"binary-expr",locations:[{start:{line:644,column:8},end:{line:644,column:12}},{start:{line:644,column:16},end:{line:644,column:27}}],line:644},84:{loc:{start:{line:648,column:4},end:{line:671,column:5}},type:"if",locations:[{start:{line:648,column:4},end:{line:671,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:648},85:{loc:{start:{line:656,column:8},end:{line:661,column:9}},type:"if",locations:[{start:{line:656,column:8},end:{line:661,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:656},86:{loc:{start:{line:658,column:10},end:{line:660,column:11}},type:"if",locations:[{start:{line:658,column:10},end:{line:660,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:658},87:{loc:{start:{line:662,column:8},end:{line:667,column:9}},type:"if",locations:[{start:{line:662,column:8},end:{line:667,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:662},88:{loc:{start:{line:710,column:19},end:{line:710,column:51}},type:"binary-expr",locations:[{start:{line:710,column:19},end:{line:710,column:45}},{start:{line:710,column:49},end:{line:710,column:51}}],line:710},89:{loc:{start:{line:711,column:26},end:{line:711,column:92}},type:"cond-expr",locations:[{start:{line:711,column:46},end:{line:711,column:83}},{start:{line:711,column:86},end:{line:711,column:92}}],line:711},90:{loc:{start:{line:741,column:24},end:{line:760,column:14}},type:"cond-expr",locations:[{start:{line:741,column:56},end:{line:760,column:5}},{start:{line:760,column:8},end:{line:760,column:14}}],line:741},91:{loc:{start:{line:761,column:24},end:{line:771,column:14}},type:"cond-expr",locations:[{start:{line:761,column:97},end:{line:771,column:5}},{start:{line:771,column:8},end:{line:771,column:14}}],line:761}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0,322:0,323:0,324:0,325:0,326:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0],90:[0,0],91:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AAmvBmB,SAAA,KAkNA,YAlNA;AAnvBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,UAAM,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AACtE,QAAI,OAAO,OAAO,IAAI,WAAW;AACjC,QAAI,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACA,SAAK,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AACnG,WAAK,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AAChE,6BAAuB;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACX,+BAAuB;AAAA,MACzB;AACA,WAAK,WAAW,KAAK,CAAA,QAAO;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AAC9D,eAAK,aAAa,IAAI,WAAW;AAAA,QACnC;AACA,aAAK,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAE1F,YAAG,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AAC1D,SAAK,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AAC7F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAA,UAAS;AACtB,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAClE,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AACpG,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAE1C,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEd,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAED,qBAAU,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEA,YAAI,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAA,SAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAA,QAAO;AACZ,oBAAQ,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAA,QAAO;AACZ,oBAAQ,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACH,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d520736031a58007b49b658801c6875af9cde4bb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return be=function(){return l},l}be();be().s[0]++;window.Buffer=nQ.Buffer;function Xb(n,e){be().f[0]++;const t=(be().s[1]++,n.match(/\.tilehosting\.com/)),r=(be().s[2]++,n.match(/\.maptiler\.com/)),i=(be().s[3]++,n.match(/\.thunderforest\.com/)),s=(be().s[4]++,n.match(/\.locationiq\.com/));if(be().s[5]++,be().b[1][0]++,t||(be().b[1][1]++,r)){be().b[0][0]++;const l=(be().s[6]++,Ac.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(be().s[7]++,l)return be().b[2][0]++,be().s[8]++,n.replace("{key}",l);be().b[2][1]++}else if(be().b[0][1]++,be().s[9]++,i){be().b[3][0]++;const l=(be().s[10]++,Ac.getAccessToken("thunderforest",e,{allowFallback:!0}));if(be().s[11]++,l)return be().b[4][0]++,be().s[12]++,n.replace("{key}",l);be().b[4][1]++}else if(be().b[3][1]++,be().s[13]++,s){be().b[5][0]++;const l=(be().s[14]++,Ac.getAccessToken("locationiq",e,{allowFallback:!0}));if(be().s[15]++,l)return be().b[6][0]++,be().s[16]++,n.replace("{key}",l);be().b[6][1]++}else return be().b[5][1]++,be().s[17]++,n}function AF(n,e,t){return be().f[1]++,be().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class Dhe extends ur.Component{revisionStore;styleStore;layerWatcher;constructor(e){be().f[2]++,be().s[19]++,super(e),be().s[20]++,this.revisionStore=new She;const t=(be().s[21]++,new URLSearchParams(window.location.search.substring(1)));let r=(be().s[22]++,t.get("localport"));be().s[23]++,be().b[8][0]++,r==null&&(be().b[8][1]++,window.location.port!=="80")&&(be().b[8][2]++,window.location.port!=="443")?(be().b[7][0]++,be().s[24]++,r=window.location.port):be().b[7][1]++,be().s[25]++,this.styleStore=new whe({onLocalStyleChange:l=>(be().f[3]++,be().s[26]++,this.onStyleChanged(l,{save:!1})),port:r,host:t.get("localhost")});const i=(be().s[27]++,[{key:"?",handler:()=>{be().f[4]++,be().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{be().f[5]++,be().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{be().f[6]++,be().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{be().f[7]++,be().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{be().f[8]++,be().s[32]++,this.toggleModal("settings")}},{key:"i",handler:()=>{be().f[9]++,be().s[33]++,this.setMapState(this.state.mapState==="map"?(be().b[9][0]++,"inspect"):(be().b[9][1]++,"map"))}},{key:"m",handler:()=>{be().f[10]++,be().s[34]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{be().f[11]++,be().s[35]++,this.toggleModal("debug")}}]);be().s[36]++,document.body.addEventListener("keyup",l=>{if(be().f[12]++,be().s[37]++,l.key==="Escape")be().b[10][0]++,be().s[38]++,l.target.blur(),be().s[39]++,document.body.focus();else if(be().b[10][1]++,be().s[40]++,be().b[12][0]++,this.state.isOpen.shortcuts||(be().b[12][1]++,document.activeElement===document.body)){be().b[11][0]++;const o=(be().s[41]++,i.find(f=>(be().f[13]++,be().s[42]++,f.key===l.key)));be().s[43]++,o?(be().b[13][0]++,be().s[44]++,this.setModal("shortcuts",!1),be().s[45]++,o.handler()):be().b[13][1]++}else be().b[11][1]++});const s=(be().s[46]++,che());be().s[47]++,be().b[15][0]++,s&&(be().b[15][1]++,window.confirm("Load style from URL: "+s+" and discard current changes?"))?(be().b[14][0]++,be().s[48]++,this.styleStore=new sF,be().s[49]++,$G(s,l=>(be().f[14]++,be().s[50]++,this.onStyleChanged(l))),be().s[51]++,nF()):(be().b[14][1]++,be().s[52]++,s?(be().b[16][0]++,be().s[53]++,nF()):be().b[16][1]++,be().s[54]++,this.styleStore.init(l=>{be().f[15]++,be().s[55]++,l?(be().b[17][0]++,be().s[56]++,console.log("Falling back to local storage for storing styles"),be().s[57]++,this.styleStore=new sF):be().b[17][1]++,be().s[58]++,this.styleStore.latestStyle(o=>(be().f[16]++,be().s[59]++,this.onStyleChanged(o,{initialLoad:!0}))),be().s[60]++,S1.enabled()?(be().b[18][0]++,be().s[61]++,S1.set("maputnik","styleStore",this.styleStore),be().s[62]++,S1.set("maputnik","revisionStore",this.revisionStore)):be().b[18][1]++})),be().s[63]++,S1.enabled()?(be().b[19][0]++,be().s[64]++,S1.set("maputnik","revisionStore",this.revisionStore),be().s[65]++,S1.set("maputnik","styleStore",this.styleStore)):be().b[19][1]++,be().s[66]++,this.state={errors:[],infos:[],mapStyle:Ac.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:ws,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},be().s[67]++,this.layerWatcher=new khe({onVectorLayersChange:l=>(be().f[17]++,be().s[68]++,this.setState({vectorLayers:l}))})}handleKeyPress=(be().s[69]++,e=>{be().f[18]++,be().s[70]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(be().b[20][0]++,be().s[71]++,be().b[22][0]++,e.metaKey&&(be().b[22][1]++,e.shiftKey)&&(be().b[22][2]++,e.keyCode===90)?(be().b[21][0]++,be().s[72]++,e.preventDefault(),be().s[73]++,this.onRedo()):(be().b[21][1]++,be().s[74]++,be().b[24][0]++,e.metaKey&&(be().b[24][1]++,e.keyCode===90)?(be().b[23][0]++,be().s[75]++,e.preventDefault(),be().s[76]++,this.onUndo()):be().b[23][1]++)):(be().b[20][1]++,be().s[77]++,be().b[26][0]++,e.ctrlKey&&(be().b[26][1]++,e.keyCode===90)?(be().b[25][0]++,be().s[78]++,e.preventDefault(),be().s[79]++,this.onUndo()):(be().b[25][1]++,be().s[80]++,be().b[28][0]++,e.ctrlKey&&(be().b[28][1]++,e.keyCode===89)?(be().b[27][0]++,be().s[81]++,e.preventDefault(),be().s[82]++,this.onRedo()):be().b[27][1]++))});componentDidMount(){be().f[19]++,be().s[83]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){be().f[20]++,be().s[84]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){be().f[21]++,be().s[85]++,this.styleStore.save(e)}updateFonts(e){be().f[22]++;const t=(be().s[86]++,be().b[29][0]++,this.state.mapStyle.metadata||(be().b[29][1]++,{})),r=(be().s[87]++,be().b[30][0]++,t["maputnik:openmaptiles_access_token"]||(be().b[30][1]++,IG.openmaptiles)),i=(be().s[88]++,typeof e=="string"?(be().b[31][0]++,e.replace("{key}",r)):(be().b[31][1]++,e));be().s[89]++,Ahe(i,s=>{be().f[23]++,be().s[90]++,this.setState({spec:AF(this.state.spec,"glyphs",s)})})}updateIcons(e){be().f[24]++,be().s[91]++,uhe(e,t=>{be().f[25]++,be().s[92]++,this.setState({spec:AF(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(be().s[93]++,(e,t)=>{be().f[26]++,be().s[94]++,be().b[33][0]++,e==="maputnik:renderer"&&(be().b[33][1]++,t!==oQ(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(be().b[32][0]++,be().s[95]++,this.setState({mapState:"map"})):be().b[32][1]++;const r=(be().s[96]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});be().s[97]++,this.onStyleChanged(r)});onStyleChanged=(be().s[98]++,(e,t=(be().b[34][0]++,{}))=>{be().f[27]++,be().s[99]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},be().s[100]++,be().b[36][0]++,e.glyphs&&(be().b[36][1]++,typeof e.glyphs=="string")?(be().b[35][0]++,be().s[101]++,e.glyphs=Xb(e.glyphs,e)):be().b[35][1]++,be().s[102]++,be().b[38][0]++,e.sprite&&(be().b[38][1]++,typeof e.sprite=="string")?(be().b[37][0]++,be().s[103]++,e.sprite=Xb(e.sprite,e)):be().b[37][1]++,be().s[104]++;for(const[o,f]of Object.entries(e.sources))be().s[105]++,be().b[40][0]++,f&&(be().b[40][1]++,"url"in f)&&(be().b[40][2]++,typeof f.url=="string")?(be().b[39][0]++,be().s[106]++,f.url=Xb(f.url,e)):be().b[39][1]++;be().s[107]++,t.initialLoad?(be().b[41][0]++,be().s[108]++,this.getInitialStateFromUrl(e)):be().b[41][1]++;const r=(be().s[109]++,be().b[42][0]++,lf(e)||(be().b[42][1]++,[])),i=(be().s[110]++,[]);if(be().s[111]++,be().b[44][0]++,e&&(be().b[44][1]++,e.layers)){be().b[43][0]++;const o=(be().s[112]++,new window.Map);be().s[113]++,e.layers.forEach((f,C)=>{if(be().f[28]++,be().s[114]++,be().b[46][0]++,f.id===""&&(be().b[46][1]++,o.has(f.id))){be().b[45][0]++;const x=(be().s[115]++,new Error(`layers[${C}]: duplicate layer id [empty_string], previously used`));be().s[116]++,i.push(x)}else be().b[45][1]++;be().s[117]++,o.set(f.id,!0)})}else be().b[43][1]++;const s=(be().s[118]++,i.concat(r).map(o=>{be().f[29]++;const f=(be().s[119]++,o.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(be().s[120]++,f){be().b[47][0]++;const[,B,R]=(be().s[121]++,f);return be().s[122]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(B,10),key:"id",message:R}}}}else be().b[47][1]++;const C=(be().s[123]++,o.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(be().s[124]++,C){be().b[48][0]++;const[,B,R]=(be().s[125]++,C);return be().s[126]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(B,10),key:"source",message:R}}}}else be().b[48][1]++;const x=(be().s[127]++,o.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(be().s[128]++,x){be().b[49][0]++;const[,B,R,P,U]=(be().s[129]++,x),N=(be().s[130]++,be().b[51][0]++,R&&(be().b[51][1]++,P)?(be().b[50][0]++,[R,P].join(".")):(be().b[50][1]++,P));return be().s[131]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(B,10),key:N,message:U}}}}else return be().b[49][1]++,be().s[132]++,{message:o.message}}));let l=(be().s[133]++,void 0);be().s[134]++,r.length>0?(be().b[52][0]++,be().s[135]++,l=x8(e),be().s[136]++,r.forEach(o=>{be().f[30]++;const{message:f}=(be().s[137]++,o);if(be().s[138]++,f){be().b[53][0]++,be().s[139]++;try{const C=(be().s[140]++,f.split(":")[0]),x=(be().s[141]++,C.match(/^\S+?\[\d+\]\.[^[]+/)[0]);be().s[142]++,cx.unset(l,x)}catch(C){be().s[143]++,console.warn(C)}}else be().b[53][1]++})):be().b[52][1]++,be().s[144]++,e.glyphs!==this.state.mapStyle.glyphs?(be().b[54][0]++,be().s[145]++,this.updateFonts(e.glyphs)):be().b[54][1]++,be().s[146]++,e.sprite!==this.state.mapStyle.sprite?(be().b[55][0]++,be().s[147]++,this.updateIcons(e.sprite)):be().b[55][1]++,be().s[148]++,t.addRevision?(be().b[56][0]++,be().s[149]++,this.revisionStore.addRevision(e)):be().b[56][1]++,be().s[150]++,t.save?(be().b[57][0]++,be().s[151]++,this.saveStyle(e)):be().b[57][1]++,be().s[152]++,this.setState({mapStyle:e,dirtyMapStyle:l,errors:s},()=>{be().f[31]++,be().s[153]++,this.fetchSources(),be().s[154]++,this.setStateInUrl()})});onUndo=(be().s[155]++,()=>{be().f[32]++;const e=(be().s[156]++,this.revisionStore.undo()),t=(be().s[157]++,hhe(this.state.mapStyle,e));be().s[158]++,this.onStyleChanged(e,{addRevision:!1}),be().s[159]++,this.setState({infos:t})});onRedo=(be().s[160]++,()=>{be().f[33]++;const e=(be().s[161]++,this.revisionStore.redo()),t=(be().s[162]++,dhe(this.state.mapStyle,e));be().s[163]++,this.onStyleChanged(e,{addRevision:!1}),be().s[164]++,this.setState({infos:t})});onMoveLayer=(be().s[165]++,e=>{be().f[34]++;let{oldIndex:t,newIndex:r}=(be().s[166]++,e),i=(be().s[167]++,this.state.mapStyle.layers);if(be().s[168]++,t=w8(t,0,i.length-1),be().s[169]++,r=w8(r,0,i.length-1),be().s[170]++,t===r){be().b[58][0]++,be().s[171]++;return}else be().b[58][1]++;be().s[172]++,t===this.state.selectedLayerIndex?(be().b[59][0]++,be().s[173]++,this.setState({selectedLayerIndex:r})):be().b[59][1]++,be().s[174]++,i=i.slice(0),be().s[175]++,lQ(i,t,r),be().s[176]++,this.onLayersChange(i)});onLayersChange=(be().s[177]++,e=>{be().f[35]++;const t=(be().s[178]++,{...this.state.mapStyle,layers:e});be().s[179]++,this.onStyleChanged(t)});onLayerDestroy=(be().s[180]++,e=>{be().f[36]++;const t=(be().s[181]++,this.state.mapStyle.layers),r=(be().s[182]++,t.slice(0));be().s[183]++,r.splice(e,1),be().s[184]++,this.onLayersChange(r)});onLayerCopy=(be().s[185]++,e=>{be().f[37]++;const t=(be().s[186]++,this.state.mapStyle.layers),r=(be().s[187]++,t.slice(0)),i=(be().s[188]++,x8(r[e]));be().s[189]++,i.id=i.id+"-copy",be().s[190]++,r.splice(e,0,i),be().s[191]++,this.onLayersChange(r)});onLayerVisibilityToggle=(be().s[192]++,e=>{be().f[38]++;const t=(be().s[193]++,this.state.mapStyle.layers),r=(be().s[194]++,t.slice(0)),i=(be().s[195]++,{...r[e]}),s=(be().s[196]++,"layout"in i?(be().b[60][0]++,{...i.layout}):(be().b[60][1]++,{}));be().s[197]++,s.visibility=s.visibility==="none"?(be().b[61][0]++,"visible"):(be().b[61][1]++,"none"),be().s[198]++,i.layout=s,be().s[199]++,r[e]=i,be().s[200]++,this.onLayersChange(r)});onLayerIdChange=(be().s[201]++,(e,t,r)=>{be().f[39]++;const i=(be().s[202]++,this.state.mapStyle.layers.slice(0));be().s[203]++,i[e]={...i[e],id:r},be().s[204]++,this.onLayersChange(i)});onLayerChanged=(be().s[205]++,(e,t)=>{be().f[40]++;const r=(be().s[206]++,this.state.mapStyle.layers.slice(0));be().s[207]++,r[e]=t,be().s[208]++,this.onLayersChange(r)});setMapState=(be().s[209]++,e=>{be().f[41]++,be().s[210]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(be().s[211]++,e=>{be().f[42]++;const t=(be().s[212]++,be().b[62][0]++,e.metadata||(be().b[62][1]++,{}));if(be().s[213]++,t["maputnik:renderer"]===void 0){be().b[63][0]++;const r=(be().s[214]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return be().s[215]++,r}else return be().b[63][1]++,be().s[216]++,e});openStyle=(be().s[217]++,(e,t)=>{be().f[43]++,be().s[218]++,this.setState({fileHandle:t}),be().s[219]++,e=this.setDefaultValues(e),be().s[220]++,this.onStyleChanged(e)});fetchSources(){be().f[44]++;const e=(be().s[221]++,{});be().s[222]++;for(const[t,r]of Object.entries(this.state.mapStyle.sources))if(be().s[223]++,be().b[65][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,t)&&(be().b[65][1]++,r.type==="vector")&&(be().b[65][2]++,Object.prototype.hasOwnProperty.call(r,"url"))){be().b[64][0]++,be().s[224]++,e[t]={type:r.type,layers:[]};let i=(be().s[225]++,r.url);be().s[226]++;try{be().s[227]++,i=Xb(i,this.state.mapStyle)}catch(l){be().s[228]++,console.warn("Failed to setFetchAccessToken: ",l)}be().s[229]++;const s=l=>{if(be().f[45]++,be().s[230]++,Object.prototype.hasOwnProperty.call(l,"vector_layers"))be().b[66][1]++;else{be().b[66][0]++,be().s[231]++;return}const o=(be().s[232]++,Object.assign({},{[t]:this.state.sources[t]}));be().s[233]++;for(const f of l.vector_layers)be().s[234]++,o[t].layers.push(f.id);be().s[235]++,this.setState({sources:o})};be().s[236]++,i.startsWith("pmtiles://")?(be().b[67][0]++,be().s[237]++,new i6(i.substr(10)).getTileJson("").then(l=>(be().f[46]++,be().s[238]++,s(l))).catch(l=>{be().f[47]++,be().s[239]++,console.error("Failed to process sources for '%s'",i,l)})):(be().b[67][1]++,be().s[240]++,fetch(i,{mode:"cors"}).then(l=>(be().f[48]++,be().s[241]++,l.json())).then(l=>(be().f[49]++,be().s[242]++,s(l))).catch(l=>{be().f[50]++,be().s[243]++,console.error("Failed to process sources for '%s'",i,l)}))}else be().b[64][1]++,be().s[244]++,e[t]=(be().b[68][0]++,this.state.sources[t]||(be().b[68][1]++,this.state.mapStyle.sources[t]));be().s[245]++,dB(this.state.sources,e)?be().b[69][1]++:(be().b[69][0]++,be().s[246]++,console.debug("Setting sources"),be().s[247]++,this.setState({sources:e}))}_getRenderer(){be().f[51]++;const e=(be().s[248]++,be().b[70][0]++,this.state.mapStyle.metadata||(be().b[70][1]++,{}));return be().s[249]++,be().b[71][0]++,e["maputnik:renderer"]||(be().b[71][1]++,"mlgljs")}onMapChange=(be().s[250]++,e=>{be().f[52]++,be().s[251]++,this.setState({mapView:e})});mapRenderer(){be().f[53]++;const{mapStyle:e,dirtyMapStyle:t}=(be().s[252]++,this.state),r=(be().s[253]++,{mapStyle:(be().b[72][0]++,t||(be().b[72][1]++,e)),replaceAccessTokens:f=>(be().f[54]++,be().s[254]++,Ac.replaceAccessTokens(f,{allowFallback:!0})),onDataChange:f=>{be().f[55]++,be().s[255]++,this.layerWatcher.analyzeMap(f.map),be().s[256]++,this.fetchSources()}}),i=(be().s[257]++,this._getRenderer());let s;be().s[258]++,i==="ol"?(be().b[73][0]++,be().s[259]++,s=oe.jsx(Zne,{...r,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(be().b[73][1]++,be().s[260]++,s=oe.jsx(TH,{...r,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let l;be().s[261]++,this.state.mapState.match(/^filter-/)?(be().b[74][0]++,be().s[262]++,l=this.state.mapState.replace(/^filter-/,"")):be().b[74][1]++;const o=(be().s[263]++,{});return be().s[264]++,l?(be().b[75][0]++,be().s[265]++,o.filter=`url('#${l}')`):be().b[75][1]++,be().s[266]++,oe.jsx("div",{style:o,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:s})}setStateInUrl=(be().s[267]++,()=>{be().f[56]++;const{mapState:e,mapStyle:t,isOpen:r}=(be().s[268]++,this.state),{selectedLayerIndex:i}=(be().s[269]++,this.state),s=(be().s[270]++,new URL(location.href)),l=(be().s[271]++,k8(JSON.stringify(t)));be().s[272]++,s.searchParams.set("layer",`${l}~${i}`);const o=(be().s[273]++,Object.entries(r).map(([f,C])=>(be().f[57]++,be().s[274]++,C===!0?(be().b[76][0]++,f):(be().b[76][1]++,null))).filter(f=>(be().f[58]++,be().s[275]++,f!==null)));be().s[276]++,o.length>0?(be().b[77][0]++,be().s[277]++,s.searchParams.set("modal",o.join(","))):(be().b[77][1]++,be().s[278]++,s.searchParams.delete("modal")),be().s[279]++,e==="map"?(be().b[78][0]++,be().s[280]++,s.searchParams.delete("view")):(be().b[78][1]++,be().s[281]++,e==="inspect"?(be().b[79][0]++,be().s[282]++,s.searchParams.set("view","inspect")):be().b[79][1]++),be().s[283]++,history.replaceState({selectedLayerIndex:i},"Maputnik",s.href)});getInitialStateFromUrl=(be().s[284]++,e=>{be().f[59]++;const t=(be().s[285]++,new URL(location.href)),r=(be().s[286]++,t.searchParams.get("modal"));if(be().s[287]++,be().b[81][0]++,r&&(be().b[81][1]++,r!=="")){be().b[80][0]++;const l=(be().s[288]++,r.split(",")),o=(be().s[289]++,{});be().s[290]++,l.forEach(f=>{be().f[60]++,be().s[291]++,o[f]=!0}),be().s[292]++,this.setState({isOpen:{...this.state.isOpen,...o}})}else be().b[80][1]++;const i=(be().s[293]++,t.searchParams.get("view"));be().s[294]++,be().b[83][0]++,i&&(be().b[83][1]++,i!=="")?(be().b[82][0]++,be().s[295]++,this.setMapState(i)):be().b[82][1]++;const s=(be().s[296]++,t.searchParams.get("layer"));if(be().s[297]++,s){be().b[84][0]++,be().s[298]++;try{const l=(be().s[299]++,s.split("~")),[o,f]=(be().s[300]++,[l[0],parseInt(l[1],10)]);let C=(be().s[301]++,!0);if(be().s[302]++,o!=="-"){be().b[85][0]++;const x=(be().s[303]++,k8(JSON.stringify(e)));be().s[304]++,x!==parseInt(o,10)?(be().b[86][0]++,be().s[305]++,C=!1):be().b[86][1]++}else be().b[85][1]++;be().s[306]++,C?(be().b[87][0]++,be().s[307]++,this.setState({selectedLayerIndex:f,selectedLayerOriginalId:e.layers[f].id})):be().b[87][1]++}catch(l){be().s[308]++,console.warn(l)}}else be().b[84][1]++});onLayerSelect=(be().s[309]++,e=>{be().f[61]++,be().s[310]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){be().f[62]++,be().s[311]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){be().f[63]++,be().s[312]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(be().s[313]++,e=>{be().f[64]++,be().s[314]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(be().s[315]++,(e,t)=>{be().f[65]++,be().s[316]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(be().s[317]++,(e,t)=>{be().f[66]++,be().s[318]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){be().f[67]++;const e=(be().s[319]++,be().b[88][0]++,this.state.mapStyle.layers||(be().b[88][1]++,[])),t=(be().s[320]++,e.length>0?(be().b[89][0]++,e[this.state.selectedLayerIndex]):(be().b[89][1]++,void 0)),r=(be().s[321]++,oe.jsx(vue,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),i=(be().s[322]++,oe.jsx(coe,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(be().s[323]++,t?(be().b[90][0]++,oe.jsx(XAe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(be().b[90][1]++,void 0)),l=(be().s[324]++,this.state.errors.length+this.state.infos.length>0?(be().b[91][0]++,oe.jsx(Mue,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(be().b[91][1]++,void 0)),o=(be().s[325]++,oe.jsxs("div",{children:[oe.jsx(wce,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),oe.jsx(xce,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),oe.jsx(Bue,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),oe.jsx($ue,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),oe.jsx(_ce,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),oe.jsx(dce,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return be().s[326]++,oe.jsx(bue,{toolbar:r,layerList:i,layerEditor:s,map:this.mapRenderer(),bottom:l,modals:o})}}const Khe=Rj.createRoot(document.querySelector("#app"));Khe.render(oe.jsx(Ey.Provider,{value:{className:"react-icons"},children:oe.jsx(Dhe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-DvAEUNsS.js.map
